{"items":[{"comments":[{"comment_id":134566258,"body":"you should ask this kind of questions in chat-gpt or so ;)"},{"comment_id":134568328,"body":"Please provide enough code so others can better understand or reproduce the problem."}],"last_activity_date":1684791398,"question_id":76310056,"body":"<p>As a project I'm trying to build an app that live streams video from a thermal camera.\nIn this case that works over it-self wifi hotspot, so basically you turn on the device, turn on the built inside router that makes the hotspot, you connect via wifi to the hostpot of the device and then the goal is to see (and in the future save the video/images) the live video streaming by this app.\nDo you know about some opensource framework that does this job? I know that about almost all normal cameras uses MJPEG format, and that exists decoder for this format for android studio, but I don't know if thermal cameras uses this too.\nCan someone tell me the steps to reproduce the app I want?\nThanks.</p>\n"},{"answers":[{"answer_id":37944957,"body":"<p>Check in your form the Uploadify property \"Size Limit\".</p>\n\n<p>In web.config check <code>maxRequestLength</code> in <code>&lt;system.web&gt;</code> and the <code>requestLimits maxAllowedContentLength</code> in <code>&lt;security&gt;</code>.</p>\n\n<p>Example:</p>\n\n<pre><code>&lt;system.web&gt;\n &lt;httpRuntime requestValidationMode=\"2.0\" executionTimeout=\"600\" maxRequestLength=\"50000\"/&gt;\n&lt;/system.web&gt;\n\n&lt;system.webServer&gt;\n &lt;security&gt;\n  &lt;requestFiltering&gt;\n   &lt;hiddenSegments&gt;\n    &lt;add segment=\"PrivateTempStorage\" /&gt;\n    &lt;add segment=\"private\" /&gt;\n   &lt;/hiddenSegments&gt;\n   &lt;requestLimits maxAllowedContentLength=\"50000000\"/&gt;\n  &lt;/requestFiltering&gt;\n &lt;/security&gt;\n&lt;/system.webServer&gt;\n</code></pre>\n"}],"last_activity_date":1684791155,"question_id":37925795,"body":"<p>I have a website made in Genexus with a transaction which includes a Uploadify control in it, running on a local Tomcat server, and it works fine with small files but when I try to upload a bigger one (> 50 MB) it appears to upload the file but then returns to the transaction screen.</p>\n\n<p>I ran a test using Developer Tools included in Google Chrome, and I noticed that, when I try to upload large files, a \"500 - Internal Server Error\" occurs. Clicking on the corresponding line in the \"Network\" tab gives this:</p>\n\n<pre><code>HTTP Status 500 -\n\ntype Exception report\n\nmessage\n\ndescription The server encountered an internal error () that prevented it from fulfilling this request.\n\nexception\n\njavax.servlet.ServletException: java.lang.NoSuchMethodError: org.apache.commons.fileupload.DefaultFileItem.cleanup()V\nat com.genexus.webpanels.HttpContextWeb.cleanup(Unknown Source)\nat com.genexus.webpanels.GXWebObjectBase.doExecute(Unknown Source)\nat br.com.procempa.spm.cauge.texpedientessoliceventosalter.doExecute(texpedientessoliceventosalter.java:21)\nat com.genexus.webpanels.GXWebObjectStub.callExecute(Unknown Source)\nat com.genexus.webpanels.GXWebObjectStub.doPost(Unknown Source)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\nat org.apache.catalina.servlets.InvokerServlet.serveRequest(InvokerServlet.java:420)\nat org.apache.catalina.servlets.InvokerServlet.doPost(InvokerServlet.java:170)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)\nat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:873)\nat org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)\nat org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)\nat org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)\nat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)\nat java.lang.Thread.run(Unknown Source)\n\ncom.genexus.webpanels.GXWebObjectStub.callExecute(Unknown Source)\ncom.genexus.webpanels.GXWebObjectStub.doPost(Unknown Source)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:647)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\norg.apache.catalina.servlets.InvokerServlet.serveRequest(InvokerServlet.java:420)\norg.apache.catalina.servlets.InvokerServlet.doPost(InvokerServlet.java:170)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:647)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\nnote The full stack trace of the root cause is available in the Apache Tomcat/5.5.28 logs.\n\nApache Tomcat/5.5.28\n</code></pre>\n\n<p>Searching on some websites, I found suggestions to edit the application's web.xml adding the following tag inside the &lt;servlet&gt; tag in tomcat-directory/application-directory/WEB-INF/web.xml:</p>\n\n<pre><code>&lt;multipart-config&gt;\n    &lt;max-file-size&gt;1073741824&lt;/max-file-size&gt;\n    &lt;max-request-size&gt;1073741824&lt;/max-request-size&gt;\n    &lt;file-size-threshold&gt;0&lt;/file-size-threshold&gt;\n&lt;/multipart-config&gt;\n</code></pre>\n\n<p>And then edited tomcat-directory/conf/server.xml to make the Connector tag for port 8080 look like this:</p>\n\n<pre><code>&lt;Connector port=\"8080\" maxHttpHeaderSize=\"4096\" maxPostSize=\"1073741824\"\n           maxThreads=\"150\" minSpareThreads=\"25\" maxSpareThreads=\"75\"\n           enableLookups=\"false\" redirectPort=\"8443\" acceptCount=\"100\"\n           connectionTimeout=\"600000\" disableUploadTimeout=\"true\" /&gt;\n</code></pre>\n\n<p>And then restarted Tomcat, but yet it gives me the same error. Am I missing anything else?</p>\n\n<p>Thanks in advance!</p>\n\n<p><strong>EDIT:</strong> Actually, my application is a Java one, and the control used is not a true \"Uploadify\", it has class \"Image\" and is linked to a BLOB field in the database. Isn't it the case to change the field type in the transaction form?</p>\n"},{"comments":[{"comment_id":134567305,"body":"maven/gradle dependency packages are (in most cases) from &quot;maven central&quot; public repository and it holds (in most cases) &quot;official&quot; build of such artifacts, but if you cannot trust such, you can directly download the asset from its official website and add the file to your IDEA project. You can go with your favourite way."}],"last_activity_date":1684790941,"question_id":76310024,"body":"<p>I am building a project and want to use JsonPath for parsing and filtering json files. I am fairly new to this level of program development and was wondering the real practice behind just using IntelliJ, like i am, searching for the dependency with Intelij and then adding i believe Intellij IDE automatically adds this to your gradle file. The thing is, I don't like the fact these files are from some randoms. Is there no official JsonPath file that you can import right on your .java file and it's recognized right away? It seems this file is just not official and was written up by some random(s).</p>\n<p>Thank you, and sorry if i sound stupid.</p>\n"},{"last_activity_date":1684790913,"question_id":76310018,"body":"<p>I am struggling with an old project which was upgraded to <code>Spring 5.3.23</code> , <code>Spring WS 3.1.6</code> and <code>WSS4J 2.4.1</code> . It is running in <code>WildFly 26.1.2</code> with <code>SAAJ 1.5.3</code> builtin</p>\n<p>The project contains some REST Spring Controllers and one SOAP server endpoint with Wss4jSecurityInterceptor. After upgrade the SOAP endpoint returns error</p>\n<pre><code>WRONG_DOCUMENT_ERR: A node is used in a different document than the one that created it.\n</code></pre>\n<p>When I remove the security interceptor it returns the response without issue. Due to separate logging issues I cannot get to the stacktrace. Does anybody have any clue? I tried various versions mixed but it is always the same. Thanks</p>\n"},{"comments":[{"comment_id":134565886,"body":"I believe spec wise the cAS call can continue to fail as the <code>getOpaque()</code> call returns the &#39;wrong&#39; value for millions of loops, in theory. I would go with trying this operation just once, and if it fails, do the loop you pasted, but with <code>getVolatile</code> instead of <code>getOpaque</code>."},{"comment_id":134566867,"body":"This belongs on <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}],"last_activity_date":1684790732,"question_id":76310008,"body":"<p>My code:</p>\n<pre><code>static final VarHandle COUNTER_VAR_HANDLE = //;\nstatic final int MAX = 10;\n\nint counter = -1;\n\nint getNext() {\n  var next = 0;\n  var prev = 0;\n\n  do {\n    prev = (int) COUNTER_VAR_HANDLE.getOpaque(this);\n    next = (prev + 1) % MAX;\n  } while (!COUNTER_VAR_HANDLE.compareAndSet(this, prev, next));\n\n  return next;\n}\n</code></pre>\n<p>Trying to understand VarHandles and their different uses. Given a recent architecture (e.g. x86), is this the correct implementation of a getNext() method?</p>\n<p>If my reading serves me correctly there is no benefit to using <code>weakCompareAndSet</code> on a modern achitecture but I wasn't sure whether I needed <code>getVolatile()</code> instead of <code>getOpaque()</code> in this circumstance. Am I going to run into issues with multiple threads calling <code>getNext()</code>?</p>\n"},{"last_activity_date":1684790443,"question_id":76309989,"body":"<p>I'm trying to publish an artifact to a corporate repository. I set up the maven-publish plugin as follows (I use build.gradle.kts):</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>plugins {\n    `java-library`\n    `maven-publish`\n}\n\nval nexusUsername: String by project\nval nexusPassword: String by project\nval nexusSnapshotRepositoryUrl: String by project\nval nexusRepositoryUrl: String by project\n\npublishing {\n    publications {\n        register(&quot;mavenJava&quot;, MavenPublication::class) {\n            from(components[&quot;java&quot;])\n        }\n    }\n    repositories {\n        maven {\n            credentials {\n                username = nexusUsername\n                password = nexusPassword\n            }\n            url = uri(nexusRepositoryUrl)\n            mavenContent {\n                releasesOnly()\n            }\n        }\n        maven {\n            credentials {\n                username = nexusUsername\n                password = nexusPassword\n            }\n            url = uri(nexusSnapshotRepositoryUrl)\n            mavenContent {\n                snapshotsOnly()\n            }\n        }\n    }\n}\n</code></pre>\n<p>gradle.properties:</p>\n<pre><code>version=0.0.1\nnexusRepositoryUrl=https://nexus.custom/repository/release/\nnexusSnapshotRepositoryUrl=https://nexus.custom/repository/snapshot/\nnexusUsername=\nnexusPassword=\n</code></pre>\n<p>For some reason, when the publish task is called, mavenContent is ignored for me - the publication always tries to execute to the last maven repository, which is specified ignoring the version (i.e., the application version is 0.0.1, while the publication is carried out in the snapshot repository, if the repositories are swapped, the publication will be in the release repository).\nI'm expecting a behavior in which when I run the publish task, I will have the correct repository determined based on the version, is this not how it should work?</p>\n<p>When I start the task, I get information in the log about an attempt to publish to the repository snapshots:\n<code>./gradlew publish</code></p>\n<blockquote>\n<p>Execution failed for task ':publishMavenJavaPublicationToMaven2Repository'.\nFailed to publish publication 'mavenJava' to repository 'maven2'\nCould not PUT 'https://nexus.custom/repository/snapshot/ru/example/0.0.1/some-example-app-0.0.1.jar'. Received status code 400 from server: Bad Request</p>\n</blockquote>\n"},{"comments":[{"comment_id":134517137,"body":"i didn&#39;t found a direct solution so i was applying specific converters for my queries List&lt;Document&gt; results = dao.find(CollectionNames.PESSOA_JURIDICA, filter(search), ascending(sortBy), limit, offset);         return results.stream().map(d -&gt; converter.read(PessoaJuridicaDocument.class, d)).collect(Collectors.toList());  see org.springframework.data.mongodb.core.convert.MappingMongoCo&zwnj;&#8203;nverter for details"},{"comment_id":134559921,"body":"What is the converter class here? Can you add an answer so that I can accept it, thanks"}],"answers":[{"answer_id":76309981,"body":"<p>The converter class can help you on that:</p>\n<pre><code>package simple.sample.mongo.dao;\n\nimport com.mongodb.client.model.Filters;\nimport com.mongodb.client.model.Sorts;\nimport org.springframework.data.mongodb.core.convert.MappingMongoConverter;\nimport org.springframework.stereotype.Component;\nimport simple.sample.mongo.dao.base.BaseDAO;\nimport simple.sample.mongo.models.TodoDocument;\n\nimport java.util.List;\nimport java.util.stream.Collectors;\n\n@Component\npublic class TodoDAO {\n\n    private final MappingMongoConverter converter;\n    private final BaseDAO dao;\n\n    public TodoDAO(MappingMongoConverter converter, BaseDAO dao) {\n        this.converter = converter;\n        this.dao = dao;\n    }\n\n    // see for more converters https://github.com/spring-projects/spring-data-examples/tree/main/mongodb/example/src/main/java/example/springdata/mongodb/converters\n    public List&lt;TodoDocument&gt; find(String description) {\n        return dao.find(&quot;todos&quot;,\n                        Filters.regex(&quot;description&quot;, description),\n                        Sorts.ascending(&quot;description&quot;), 100, 0)\n                .stream().map(doc -&gt; converter.read(TodoDocument.class, doc))\n                .collect(Collectors.toList());\n    }\n\n}\n</code></pre>\n<p>Where <code>TodoDocument</code> is a mongo collection mapped to java class.</p>\n<p>You can either use <code>TodoRepository</code> to query the document store or get connection from <code>MongoTemplate</code> in order to get access to more flexible queries.</p>\n<p>The more complete sourcecode can be found <a href=\"https://github.com/sombriks/simple-sample-mongo\" rel=\"nofollow noreferrer\">in this link</a></p>\n"}],"last_activity_date":1684790335,"question_id":76281550,"body":"<p>I have the following java code that I am using to paginated a response from mongodb, that works as expected:</p>\n<pre><code>List&lt;Document&gt; documents = collection.find()\n        .skip(offset)\n        .limit(limit)\n        .into(new ArrayList&lt;&gt;());\n</code></pre>\n<p>Instead of a generic <code>org.bson.Document</code> what I want to return is a list of my specific <code>model</code> kotlin class Person.</p>\n<pre><code>@JsonInclude(JsonInclude.Include.NON_NULL)\nclass Person {\n\n    @JsonProperty(&quot;id&quot;)\n    var id: Long? = null\n\n    @JsonProperty(&quot;name&quot;)\n    var name: String? = null\n    \n}\n</code></pre>\n<p>When I try the following:</p>\n<pre><code>    List&lt;Person&gt; documents = collection.find()\n            .skip(offset)\n            .limit(limit)\n            .into(new ArrayList&lt;Person&gt;());\n</code></pre>\n<p>I get compile error:</p>\n<pre><code>Inferred type 'A' for type parameter 'A' is not within its bound; should implement 'java.util.Collection&lt;? super org.bson.Document&gt;'\n</code></pre>\n<p>How can I resolve this?</p>\n<p>The library used here is: <code>org.mongodb:bson:3.12.1</code></p>\n"},{"last_activity_date":1684790292,"question_id":76309842,"body":"<p>I want to write a working test code on Android-java. It should, when the &quot;Activity&quot; is minimized, track changes to the system &quot;clipboard&quot; and when it is changed (copy, cut . . .) open the &quot;Toast&quot; window in which this modified &quot;clipboard&quot; will be displayed. The program works on older versions of Android. On versions older than Android Oreo (API 26), the program does not notice the &quot;clipboard&quot; changes and closes after a while (about 10 seconds). Tell me what is the error of my code?</p>\n<pre><code>////  This my MainActivity.java\n\npackage com.example.service;\n\nimport static android.app.PendingIntent.getActivity;\nimport static java.security.AccessController.getContext;\nimport androidx.appcompat.app.AppCompatActivity;\nimport android.app.AlertDialog;\nimport android.app.Dialog;\nimport android.content.DialogInterface;\nimport android.content.Intent;\nimport android.graphics.Color;\nimport android.graphics.Typeface;\nimport android.os.Build;\nimport android.os.Bundle;\nimport android.os.Handler;\nimport android.view.Gravity;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.view.WindowManager;\nimport android.widget.LinearLayout;\nimport android.widget.TextView;\nimport android.widget.Toast;\nimport java.util.Timer;\nimport java.util.TimerTask;\n\n\npublic class MainActivity extends AppCompatActivity {\n    private boolean mPopupShowing = false;\n    private Runnable mPopupRunnable;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n    public void onBtnClickNEW(View view) {\n    /*    startService(new Intent(this, ClipboardService.class)\n                .addFlags(Intent.FLAG_ACTIVITY_MULTIPLE_TASK)\n                .addFlags(Intent.FLAG_ACTIVITY_NEW_TASK));*/\n        if (Build.VERSION.SDK_INT &gt;= 26) {\n            System.out.println(&quot;SDK_INT &gt;= 26 &quot; );   // 05\n            startForegroundService(new Intent(this, ClipboardService.class));\n        }\n        else {\n            System.out.println(&quot;SDK_INT &lt; 26 &quot; );   // 05\n            startService(new Intent(this, ClipboardService.class));\n        }\n    }\n    public void onBtnClickSTOP(View view) {\n        stopService(new Intent(this, ClipboardService.class));\n    }\n    public void onBtnClickALERT(View view) {\n        Toast toast = Toast.makeText(getApplicationContext(),&quot;Check clipboard!&quot;, Toast.LENGTH_LONG);\n        toast.setGravity(Gravity.TOP, toast.getXOffset() / 2, toast.getYOffset() / 2);\n        TextView textView = new TextView(getApplicationContext());\n        textView.setBackgroundColor(Color.DKGRAY);\n        textView.setTextColor(Color.WHITE);\n        textView.setTextSize(30);\n        Typeface typeface = Typeface.create(&quot;serif&quot;, Typeface.BOLD);\n        textView.setTypeface(typeface);\n        textView.setPadding(10, 10, 10, 10);\n        textView.setText(&quot;Check clipboard!&quot;);\n        toast.setView(textView);\n        toast.show();\n    }\n}\n\n//////////////////////////////////////////////////////////////////////\n//  This my service &quot;ClipboardService&quot;\n//////////////////////////////////////////////////////////////////////\n\npackage com.example.service;\nimport android.app.Service;\nimport android.content.ClipData;\nimport android.content.ClipboardManager;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.graphics.Color;\nimport android.graphics.Typeface;\nimport android.os.Handler;\nimport android.os.IBinder;\nimport android.view.Gravity;\nimport android.widget.TextView;\nimport android.widget.Toast;\nimport androidx.annotation.Nullable;\npublic class ClipboardService extends Service {\n    private Handler mPopupHandler;\n    private Runnable mPopupRunnable;\n    private final ClipboardManager.OnPrimaryClipChangedListener mClipboardListener =\n            new ClipboardManager.OnPrimaryClipChangedListener() {\n                @Override\n                public void onPrimaryClipChanged() {\n                    ClipboardManager clipboardManager = null;\n                    clipboardManager = (ClipboardManager)getSystemService(CLIPBOARD_SERVICE);\n                    ClipData clipData = clipboardManager.getPrimaryClip();\n                    ClipData.Item item = clipData.getItemAt(0);\n                    CharSequence text = item.getText();\n                    showPopup(text.toString());\n                }\n            };\n    @Override\n    public void onCreate() {\n        super.onCreate();\n        mPopupHandler = new Handler();\n    }\n    @Override\n    public int onStartCommand(Intent intent, int flags, int startId) {\n        // регистрация слушателя буфера обмена\n        System.out.println(&quot;onStartCommand&quot;);\n    ClipboardManager clipboardManager = (ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);\n        clipboardManager.addPrimaryClipChangedListener(mClipboardListener);\n        return START_STICKY;\n    }\n    private void showPopup(String text) {\n        Toast toast = Toast.makeText(getApplicationContext(),text, Toast.LENGTH_LONG);\n        toast.setGravity(Gravity.TOP, toast.getXOffset() / 2, toast.getYOffset() / 2);\n        TextView textView = new TextView(getApplicationContext());\n        textView.setBackgroundColor(Color.DKGRAY);\n        textView.setTextColor(Color.WHITE);\n        textView.setTextSize(30);\n        Typeface typeface = Typeface.create(&quot;serif&quot;, Typeface.BOLD);\n        textView.setTypeface(typeface);\n        textView.setPadding(10, 10, 10, 10);\n        textView.setText(text);\n        toast.setView(textView);\n        toast.show();\n        System.out.println(text);\n    }\n    @Override\n    public void onDestroy() {\n    ClipboardManager clipboardManager=(ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);\n        clipboardManager.removePrimaryClipChangedListener(mClipboardListener);\n        if(mPopupHandler != null &amp;&amp; mPopupRunnable != null) {\n            mPopupHandler.removeCallbacks(mPopupRunnable);\n        }\n        super.onDestroy();\n    }\n    @Nullable\n    @Override\n    public IBinder onBind(Intent intent) {\n        return null;\n    }\n}\n\n/////////////////////////////////////////////////////////////////////\n//    This my activity_main.xml\n//////////////////////////////////////////////////////////////////////\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\nandroidx.constraintlayout.widget.ConstraintLayout                                \nxmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\nxmlns:tools=&quot;http://schemas.android.com/tools&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;match_parent&quot;\ntools:context=&quot;.MainActivity&quot;\\&gt;\n    &lt;TextView\n        android:id=&quot;@+id/textView&quot;\n        android:layout_width=&quot;243dp&quot;\n        android:layout_height=&quot;51dp&quot;\n        android:text=&quot;Hello World!&quot;\n        android:textSize=&quot;34sp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.526&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintVertical_bias=&quot;0.068&quot; /&gt;\n    &lt;Button\n        android:id=&quot;@+id/button&quot;\n        android:layout_width=&quot;184dp&quot;\n        android:layout_height=&quot;134dp&quot;\n        android:layout_marginStart=&quot;112dp&quot;\n        android:layout_marginTop=&quot;28dp&quot;\n        android:onClick=&quot;onBtnClickNEW&quot;\n        android:text=&quot;Start&quot;\n        android:textColor=&quot;#215915&quot;\n        android:textSize=&quot;34sp&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/textView&quot; /&gt;\n    &lt;Button\n        android:id=&quot;@+id/button2&quot;\n        android:layout_width=&quot;186dp&quot;\n        android:layout_height=&quot;122dp&quot;\n        android:layout_marginStart=&quot;112dp&quot;\n        android:layout_marginTop=&quot;12dp&quot;\n        android:onClick=&quot;onBtnClickSTOP&quot;\n        android:text=&quot;Stop&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/button&quot; /&gt;\n    &lt;EditText\n        android:id=&quot;@+id/editTextTextMultiLine&quot;\n        android:layout_width=&quot;258dp&quot;\n        android:layout_height=&quot;100dp&quot;\n        android:layout_marginStart=&quot;76dp&quot;\n        android:layout_marginTop=&quot;28dp&quot;\n        android:background=&quot;#D1EDAA&quot;\n        android:ems=&quot;10&quot;\n        android:gravity=&quot;start|top&quot;\n        android:inputType=&quot;textMultiLine&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/button2&quot;\n        tools:text=&quot;1234&quot; /&gt;\n    &lt;Button\n        android:id=&quot;@+id/button3&quot;\n        android:layout_width=&quot;121dp&quot;\n        android:layout_height=&quot;77dp&quot;\n        android:layout_marginStart=&quot;144dp&quot;\n        android:layout_marginTop=&quot;28dp&quot;\n        android:text=&quot;Alert&quot;\n        android:onClick=&quot;onBtnClickALERT&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@+id/editTextTextMultiLine&quot; /&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n"},{"last_activity_date":1684790112,"question_id":76309965,"body":"<p>I am trying to create an android application that includes find places on map, for that i might need to have the support tools downloaded, but i cannot find the support tools through the SDK tools. I am using Android Studio Flamingo.</p>\n<p>I noticed when i tried to put this in the XML&quot;        android:name=&quot;com.google.android.gms.maps.SupportMapFragment&quot;\n&quot;</p>\n"},{"answers":[{"comments":[{"comment_id":134565689,"body":"can you take a look into inner for-loop <i>for (q = w; q &lt; l; q++)</i>, because <i>nombre.substring(w, q + 1)</i> might give index out of bound exception  as well"},{"comment_id":134565730,"body":"Thank you so much, I really didn&#39;t know how it wasn&#39;t working until you came to explain, now the code just work fine"},{"comment_id":134565782,"body":"@sittsering, the second argument of <code>String.substring</code> is an exclusive value, so <code>+ 1</code> on the last iteration will be valid.  It uses a half-open interval of [a, b)."},{"comment_id":134565788,"body":"@Ren, Great; you&#39;re welcome.  I&#39;m glad it helped."}],"answer_id":76309877,"body":"<p>Firstly, the initial thing wrong with the code, is that your for-loop conditional statements are using a <code>&lt;=</code> when your indexes, <code>w</code>, and <code>q</code>, are both starting at <code>0</code>.<br />\nThis will cause a <code>StringIndexOutOfBoundsException</code> to be thrown.</p>\n<p>Secondly, your intra for-loop, call it <code>q</code>, is starting at <code>0</code>.<br />\nThis will, additionally, cause the <code>nombre.substring(w,q+1)</code> call to throw an <code>StringIndexOutOfBoundsException</code>.</p>\n<p>To fix this, start the loop at <code>w</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>l = nombre.length();\ni = 0;\nfor (w = 0; w &lt; l; w++) {\n    for (q = w; q &lt; l; q++) {\n        if (nombre.substring(w, q + 1).equals(&quot; &quot;)) {\n            i = i + 1;\n            e[i] = q;\n        }\n    }\n}\n</code></pre>\n<p>As an added measure, try using the following implementation, to acquire input from the user.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    Scanner scanner = new Scanner(System.in);\n    System.out.print(&quot;Introduce tu nombre: &quot;);\n    String nombre = scanner.nextLine();\n    System.out.print(&quot;Introduce tu año, mes y dia de nacimiento, en ese orden: &quot;);\n    String[] strings = scanner.nextLine().split(&quot; +&quot;);\n    String a = strings[0];\n    String m = strings[1];\n    String d = strings[2];\n\n    System.out.println(&quot;nombre = &quot; + nombre);\n    System.out.printf(&quot;[a, m, d] = %s, %s, %s%n&quot;, a, m, d);\n}\n</code></pre>\n<p>Input</p>\n<pre class=\"lang-none prettyprint-override\"><code>Introduce tu nombre: reilas\nIntroduce tu año, mes y dia de nacimiento, en ese orden: 1900 1 2\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>nombre = reilas\n[a, m, d] = 1900, 1, 2\n</code></pre>\n"}],"last_activity_date":1684789905,"question_id":76309776,"body":"<p>At the uni they asked us for a code where they ask us for a name, a date and according to that to make a string of characters with certain conditions. The code in general works fine, the problem is when the code reaches the part where it detects how many parts the name is in, it throws me the title error. I will only leave the problematic part because, I do not have problems in any other part of the code.</p>\n<pre><code>    l=nombre.length(); i=0;\n        for(w=0;w&lt;=l;w++){\n            for(q=0;q&lt;=l;q++){\n                if(nombre.substring(w,q+1).equals(&quot; &quot;)){\n                    i=i+1;e[i]=q;\n                }\n            }\n        }\n</code></pre>\n<p>The problem is in the <code>if</code>, and from what I saw it is the variable <code>q</code>, if I remove the <code>+1</code> it remains as <code>begin 1, end 0, length 15</code> but if I leave it it remains as <code>begin 0, end 16, length 15</code>; I already tried to do several things but the error persists. I would appreciate if someone could fix it.</p>\n<p>If needed, the full code is this:</p>\n<pre><code>package semetresmasctm.proyectoclases;\nimport java.io.*;\npublic class Actividad_15{\n    public static void nombre1(String nombre,int e[],int i) {\n    if(i==3){\n            switch(nombre.substring(e[2]+1,e[2]+2)){\n                case &quot;ñ&quot;,&quot;Ñ&quot;-&gt;System.out.print(&quot;X&quot;);\n                case &quot;/&quot;,&quot;-&quot;,&quot;.&quot;-&gt;System.out.print(&quot;X&quot;);\n                default-&gt;System.out.print(nombre.substring(e[2]+1,e[2]+2).toUpperCase());\n            }\n            switch(nombre.substring(e[2]+2,e[2]+3)){\n                case &quot;ñ&quot;,&quot;Ñ&quot;-&gt; System.out.print(&quot;X&quot;);\n                case &quot;/&quot;,&quot;-&quot;,&quot;.&quot;-&gt;System.out.print(&quot;X&quot;);\n                default-&gt;System.out.print(nombre.substring(e[2]+2,e[2]+3).toUpperCase());\n            }\n            switch(nombre.substring(e[3]+1,e[3]+2)){\n                case &quot;ñ&quot;,&quot;Ñ&quot;-&gt;System.out.print(&quot;X&quot;);\n                case &quot;/&quot;,&quot;-&quot;,&quot;.&quot;-&gt;System.out.print(&quot;X&quot;);\n                default-&gt;System.out.print(nombre.substring(e[3]+1,e[3]+2).toUpperCase());\n            }\n            switch(nombre.substring(0,e[1])){\n                case &quot;maria&quot;,&quot;Maria&quot;,&quot;ma&quot;,&quot;MA&quot;,&quot;MA.&quot;,&quot;ma.&quot;-&gt;System.out.print(nombre.substring(e[1]+1,e[1]+2).toUpperCase());\n                case &quot;jose&quot;,&quot;Jose&quot;,&quot;J&quot;,&quot;j&quot;,&quot;J.&quot;,&quot;j.&quot;-&gt;System.out.print(nombre.substring(e[1]+1,e[1]+2).toUpperCase());\n                default-&gt;System.out.print(nombre.substring(0,1).toUpperCase());\n            }\n        } else {\n            if(i==2){\n                switch(nombre.substring(e[1]+1,e[1]+2)){\n                    case &quot;ñ&quot;,&quot;Ñ&quot;-&gt;System.out.print(&quot;X&quot;);\n                    case &quot;/&quot;,&quot;-&quot;,&quot;.&quot;-&gt;System.out.print(&quot;X&quot;);\n                    default-&gt;System.out.print(nombre.substring(e[1]+1,e[1]+2).toUpperCase());\n                }\n                switch(nombre.substring(e[1]+2,e[1]+3)){\n                    case &quot;ñ&quot;,&quot;Ñ&quot;-&gt;System.out.print(&quot;X&quot;);\n                    case &quot;/&quot;,&quot;-&quot;,&quot;.&quot;-&gt;System.out.print(&quot;X&quot;);\n                    default-&gt;System.out.print(nombre.substring(e[1]+2,e[1]+3).toUpperCase());\n                }\n                switch(nombre.substring(e[2]+1,e[2]+2)){\n                    case &quot;ñ&quot;,&quot;Ñ&quot;-&gt;System.out.print(&quot;X&quot;);\n                    case &quot;/&quot;,&quot;-&quot;,&quot;.&quot;-&gt;System.out.print(&quot;X&quot;);\n                    default-&gt;System.out.print(nombre.substring(e[2]+1,e[2]+2).toUpperCase());\n                }\n                System.out.print(nombre.substring(0,1).toUpperCase());\n            }\n        }\n    }\n    public static void fecha(String a,String m,String d){\n    System.out.print(a.substring(2,4));\n        switch(m){\n            case &quot;1&quot;,&quot;01&quot;,&quot;enero&quot;-&gt;System.out.print(&quot;01&quot;);\n            case &quot;2&quot;,&quot;02&quot;,&quot;febrero&quot;-&gt;System.out.print(&quot;02&quot;);\n            case &quot;3&quot;,&quot;03&quot;,&quot;marzo&quot;-&gt;System.out.print(&quot;03&quot;);\n            case &quot;4&quot;,&quot;04&quot;,&quot;abril&quot;-&gt;System.out.print(&quot;04&quot;);\n            case &quot;5&quot;,&quot;05&quot;,&quot;mayo&quot;-&gt;System.out.print(&quot;05&quot;);\n            case &quot;6&quot;,&quot;06&quot;,&quot;junio&quot;-&gt;System.out.print(&quot;06&quot;);\n            case &quot;7&quot;,&quot;07&quot;,&quot;julio&quot;-&gt;System.out.print(&quot;07&quot;);\n            case &quot;8&quot;,&quot;08&quot;,&quot;agosto&quot;-&gt;System.out.print(&quot;08&quot;);\n            case &quot;9&quot;,&quot;09&quot;,&quot;septiembre&quot;-&gt;System.out.print(&quot;09&quot;);\n            case &quot;10&quot;,&quot;octubre&quot;-&gt;System.out.print(&quot;10&quot;);\n            case &quot;11&quot;,&quot;noviembre&quot;-&gt;System.out.print(&quot;11&quot;);\n            case &quot;12&quot;,&quot;diciembre&quot;-&gt;System.out.print(&quot;12&quot;);\n        }\n        if(d.length()==1){\n            System.out.print(&quot;0&quot;+d);\n        } else {\n            System.out.print(d);\n        }\n    }\n    public static void main(String args[]) throws IOException, Exception {\n    BufferedReader bufEntrada=new BufferedReader(new InputStreamReader(System.in));\n    String a,d,m,nombre;\n    int e[],i,l,q,w;\n    e=new int[4];\n    System.out.println(&quot;Introduce tu nombre&quot;);\n    nombre=bufEntrada.readLine();\n    l=nombre.length(); i=0;\n    for(w=0;w&lt;=l;w++){\n            for(q=0;q&lt;=l;q++){\n        if(nombre.substring(w,q+1).equals(&quot; &quot;)){\n                    i=i+1;e[i]=q;\n                }\n            }\n    }\n    System.out.println(&quot;Introduce tu año, mes y dia de nacimiento, en ese orden&quot;);\n    a=bufEntrada.readLine();\n    m=bufEntrada.readLine();\n    d=bufEntrada.readLine();\n    nombre1(nombre,e,i);fecha(a,m,d);\n    }\n}\n\n</code></pre>\n<p>I already tried to run it in other environments (online compilers and another IDE that I had) but it didn't work</p>\n"},{"comments":[{"comment_id":134565644,"body":"Does your out of bounds error have a full exception message and stack trace? Are you sure the error is coming from this method (cofactor) and not the other two (determinant and submatrix)?"},{"comment_id":134565663,"body":"Please have a look at <a href=\"https://stackoverflow.com/questions/3988788/what-is-a-stack-trace-and-how-can-i-use-it-to-debug-my-application-errors\">What is a stack trace, and how can I use it to debug my application errors?</a> as well as <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>."},{"comment_id":134566027,"body":"&quot;<i>Where is the out of bounds error coming from?</i>&quot; - Exceptions in Java <i>usually</i> have a stack trace, that indicates where the exception was created... for the whole stack, that is, every method call up to the creation of that exception - that information is so <i>important</i> that the exception even have a method to print it: <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Throwable.html#printStackTrace()\" rel=\"nofollow noreferrer\"><code>printStackTrace()</code></a>"}],"last_activity_date":1684789670,"question_id":76309911,"body":"<pre><code>public static int[][] cofactor(int[][] arr)\n{\n    int[][] newArr = new int[arr.length][arr[0].length];\n    if(arr.length != arr[0].length)\n    {\n        return newArr;\n    }\n    \n    if(newArr.length == 2 &amp;&amp; newArr[0].length == 2)\n    {\n        newArr[0][0] = arr[1][1];\n        newArr[1][1] = arr[0][0];\n        newArr[0][1] = arr[1][0] * -1;\n        newArr[1][0] = arr[0][1] * -1;\n        return newArr;\n        \n    }\n    \n    int sign = 1;\n    for(int i = 0; i &lt; arr.length; i++)\n    {\n        for(int j = 0; j &lt; arr[0].length; j++)\n        {\n            newArr[i][j] = sign * determinant(submatrix(arr, i, j)); \n            sign *= -1;\n        }\n    }\n    return newArr;\n    \n    \n}\n</code></pre>\n<p>When I run this on the 2d array:</p>\n<p>int[][] matrixA = new int[][]{{1, 2, 3}, {4, -3, 6}, {7, 8, 9}};</p>\n<p>it is giving me an out of bounds error, but I am not sure where it is from or why.</p>\n<p>Out of bounds error that I'm not sure how to solve.</p>\n"},{"comments":[{"comment_id":134565527,"body":"it shouldn&#39;t take 60 seconds to upload 5Mb. If it does, it should be broken into batches. On the server, it may need to copy the data to a local file and read from that. Reading the http that slow will surely cause buffer overflows and timeouts."},{"comment_id":134565620,"body":"Thanks Garr, Yeah, it was sent as Stream by the client. Using InputStream to collect the data.  One batch is taking more than 60 seconds for the client to send and that is causing some sort of timeout on the server and is leading to closing the connection"},{"comment_id":134565779,"body":"There are just so many possible places it hits a timeout at 60 seconds. You have to consider all middleware (Apache? Proxy?) as well as the client itself. Might need to redesign to take files that large."},{"comment_id":134566483,"body":"What idletimeout is that? Jetty?"},{"comment_id":134567025,"body":"The client is uploading this data how? That&#39;s where the problem is."},{"comment_id":134568525,"body":"aled, Yes, its jetty server&#39;s idle timeout.  user207421, its uploading in form of InputStream. Here is the API Signature--  postData(InputStream data, String id, String fileName)"}],"last_activity_date":1684788507,"question_id":76309798,"body":"<p>Seeing Early EOF exception on the server</p>\n<p>While uploading file of size(about 5 MB), I am getting org.eclipse.jetty.io.EofException: Early EOF excception on our application server. My jetty server version is &quot;9.4.49.v20220914&quot;.\nBelow is stack trace</p>\n<pre><code>SnapshotResource: Can't retrieve Ilom snapshot data\norg.eclipse.jetty.io.EofException: Early EOF\n    at org.eclipse.jetty.server.HttpInput$3.getError(HttpInput.java:1207)\n    at org.eclipse.jetty.server.HttpInput$3.noContent(HttpInput.java:1195)\n    at org.eclipse.jetty.server.HttpInput.read(HttpInput.java:333)\n    at java.io.InputStream.read(InputStream.java:101)\n    at pic.commons.service.metrics.jersey.MetricsEventListener$TimingInputStream.read(MetricsEventListener.java:118)\n    at org.glassfish.jersey.message.internal.EntityInputStream.read(EntityInputStream.java:74)\n    at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:1309)\n    at org.apache.commons.io.IOUtils.copy(IOUtils.java:978)\n    at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:1282)\n    at org.apache.commons.io.IOUtils.copy(IOUtils.java:953)\n    at org.apache.commons.io.IOUtils.toByteArray(IOUtils.java:2405)\n    at bmstats.resources.IlomSnapshotResource.postSnapshot(IlomSnapshotResource.java:113)\n</code></pre>\n<p>I noticed exactly after 60 secs, I see that server is triggering connection close. I am suspecting this is some kind of timeout. I already increased the idletimeout to 600secs and it did not help\nI checked the tcp dump. Its the server that is closing the connection(sending FIN to client).\nServer Logs:</p>\n<pre><code>DEBUG 2023-05-18 21:12:46,978 /954B138CE7D1C438FAC91D668F525B52/ org.eclipse.jetty.server.HttpConnection: releaseRequestBuffer HttpConnection@4c105727::SocketChannelEndPoint@360920bb{l=/127.0.0.1:19000,r=/127.0.0.1:34004,OPEN,fill=-,flush=-,to=0/600000}{io=0/0,kio=0,kro=1}-&gt;HttpConnection@4c105727[p=HttpParser{s=CHUNKED_CONTENT,1376004 of -1},g=HttpGenerator@686fd9f3{s=START}]=&gt;HttpChannelOverHttp@228a341a{s=HttpChannelState@7952e7db{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=1},r=1,c=false/false,a=HANDLING,uri=ABC.zip,age=93063}\n\nDEBUG 2023-05-18 21:12:46,978 /954B138CE7D1C438FAC91D668F525B52/ org.eclipse.jetty.server.HttpInput: HttpInputOverHTTP@7a811a0b[c=1376004,q=0,[0]=null,s=STREAM] blocking for content timeout=0\n\nDEBUG 2023-05-18 21:13:46,976 /954B138CE7D1C438FAC91D668F525B52/ org.eclipse.jetty.server.HttpConnection: HttpConnection@4c105727::SocketChannelEndPoint@360920bb{l=/127.0.0.1:19000,r=/127.0.0.1:34004,ISHUT,fill=-,flush=-,to=59997/600000}{io=0/0,kio=0,kro=1}-&gt;HttpConnection@4c105727[p=HttpParser{s=CHUNKED_CONTENT,1376004 of -1},g=HttpGenerator@686fd9f3{s=START}]=&gt;HttpChannelOverHttp@228a341a{s=HttpChannelState@7952e7db{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=1},r=1,c=false/false,a=HANDLING,uri=ABC.zip,age=153061} filled -1 HeapByteBuffer@3c03e4f1[p=0,l=0,c=8192,r=0]={&lt;&lt;&lt;&gt;&gt;&gt;HTTP/1.1 ...&lt;fds&gt;12}\n\nDEBUG 2023-05-18 21:13:46,976 /954B138CE7D1C438FAC91D668F52/ org.eclipse.jetty.server.HttpConnection: HttpConnection@4c105727::SocketChannelEndPoint@360920bb{l=/127.0.0.1:19000,r=/127.0.0.1:34004,ISHUT,fill=-,flush=-,to=59997/600000}{io=0/0,kio=0,kro=1}-&gt;HttpConnection@4c105727[p=HttpParser{s=CHUNKED_CONTENT,1376004 of -1},g=HttpGenerator@686fd9f3{s=START}]=&gt;HttpChannelOverHttp@228a341a{s=HttpChannelState@7952e7db{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=1},r=1,c=false/false,a=HANDLING,uri=ABC.zip,age=153061} parse HeapByteBuffer@3c03e4f1[p=0,l=0,c=8192,r=0]={&lt;&lt;&lt;&gt;&gt;&gt;HTTP/1.1 ...&lt;fds&gt;12} {}\n\nDEBUG 2023-05-18 21:13:46,976 /954B138CE7D1C438FAC91D668F525B52/ org.eclipse.jetty.server.HttpInput: HttpInputOverHTTP@7a811a0b[c=1376004,q=0,[0]=null,s=STREAM] addContent EARLY_EOF\n\nDEBUG 2023-05-18 21:13:46,976 /954B138CE7D1C438FAC91D668F525B52/ org.eclipse.jetty.server.HttpConnection: HttpConnection@4c105727::SocketChannelEndPoint@360920bb{l=/127.0.0.1:19000,r=/127.0.0.1:34004,ISHUT,fill=-,flush=-,to=59998/600000}{io=0/0,kio=0,kro=1}-&gt;HttpConnection@4c105727[p=HttpParser{s=CLOSED,1376004 of -1},g=HttpGenerator@686fd9f3{s=START}]=&gt;HttpChannelOverHttp@228a341a{s=HttpChannelState@7952e7db{s=HANDLING rs=BLOCKING os=OPEN is=IDLE awp=false se=false i=true al=1},r=1,c=false/false,a=HANDLING,uri=ABC.zipzip,age=153061} parsed false HttpParser{s=CLOSED,1376004 of -1}\n\n</code></pre>\n<p>If anyone has idea, please help me solve this issue</p>\n"},{"comments":[{"comment_id":134568608,"body":"If you understand Kotlin, I think that this <a href=\"https://medium.com/firebase-tips-tricks/how-to-upload-an-image-to-cloud-storage-and-save-the-url-in-firestore-42711ca1df46\" rel=\"nofollow noreferrer\">resource</a> will help. Here is the corresponding <a href=\"https://github.com/alexmamo/CloudStorageJetpackCompose\" rel=\"nofollow noreferrer\">repo</a>."}],"answers":[{"answer_id":76309762,"body":"<p>The error message is telling you that Firebase Storage can't find a file using the Reference you used to get a download URL.  That's because you are not using the correct Reference with <code>getDownloadUrl</code>.</p>\n<p>Here is what you're using to upload the file:</p>\n<pre><code>ref.child(postId+&quot;-&quot;+fmNumber).putFile(result)\n</code></pre>\n<p>Here is what you're using to get the download URL:</p>\n<pre><code>ref.getDownloadUrl()\n</code></pre>\n<p>These are not using the same Reference.  You should probably build a new reference variable and use it in both places to ensure they are always the same.</p>\n<pre><code>StorageReference fileRef = ref.child(postId+&quot;-&quot;+fmNumber);\n\n// Then...\n\nfileRef.putFile(result)...\n\n// Then...\n\nfileRef.getDownloadUrl()...\n</code></pre>\n"}],"last_activity_date":1684788153,"question_id":76309639,"body":"<p>I am trying to upload the image on firestore. The photo is uploading successfully but I can't download the image url. I don't understand where is the problem.</p>\n<p>My code is:</p>\n<pre><code>  ActivityResultLauncher&lt;String&gt; imageSelect;\n        ref = FirebaseStorage.getInstance().getReference(&quot;photo&quot;);\n\n        //img pick\n        imageSelect = registerForActivityResult(new ActivityResultContracts.GetContent(), new ActivityResultCallback&lt;Uri&gt;() {\n            @Override\n            public void onActivityResult(Uri result) {\n                if (result != null){\n                    imgPicker.setImageURI(result);\n                    emptyImg = false;\n                    Random random = new Random();\n                    int post = random.nextInt(999999);\n                    String postId = String.valueOf(post);\n                    ref.child(postId+&quot;-&quot;+fmNumber).putFile(result)\n                            .addOnSuccessListener(new OnSuccessListener&lt;UploadTask.TaskSnapshot&gt;() {\n                                @Override\n                                public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\n                                    ref.getDownloadUrl().addOnSuccessListener(new OnSuccessListener&lt;Uri&gt;() {\n                                        @Override\n                                        public void onSuccess(Uri uri) {\n                                            image = uri.toString();\n                                            System.out.println(image);\n                                            Toast.makeText(FromActivity.this, &quot;Image Upload Successful&quot;, Toast.LENGTH_SHORT).show();\n                                            uploadComplete = true;\n                                        }\n                                    });\n                                }\n                            });\n                }else {\n                    Toast.makeText(FromActivity.this, &quot;You don't select any image&quot;, Toast.LENGTH_SHORT).show();\n                    imgPicker.setImageResource(R.drawable.profile);\n                    uploadComplete = false;\n                }\n\n            }\n        });\n</code></pre>\n<p>It shows this error.</p>\n<pre><code>{  &quot;error&quot;: {    &quot;code&quot;: 404,    &quot;message&quot;: &quot;Not Found.&quot;  }}\njava.io.IOException: {  &quot;error&quot;: {    &quot;code&quot;: 404,    &quot;message&quot;: &quot;Not Found.&quot;  }}\nat com.google.firebase.storage.network.NetworkRequest.parseResponse(NetworkRequest.java:445)\nat com.google.firebase.storage.network.NetworkRequest.parseErrorResponse(NetworkRequest.java:462)\nat com.google.firebase.storage.network.NetworkRequest.processResponseStream(NetworkRequest.java:453)\nat com.google.firebase.storage.network.NetworkRequest.performRequest(NetworkRequest.java:272)\nat com.google.firebase.storage.network.NetworkRequest.performRequest(NetworkRequest.java:289)\nat com.google.firebase.storage.internal.ExponentialBackoffSender.sendWithExponentialBackoff(ExponentialBackoffSender.java:76)\nat com.google.firebase.storage.internal.ExponentialBackoffSender.sendWithExponentialBackoff(ExponentialBackoffSender.java:68)\nat com.google.firebase.storage.GetDownloadUrlTask.run(GetDownloadUrlTask.java:77)\n</code></pre>\n"},{"comments":[{"comment_id":134563193,"body":"Not really sure what that code is attempting to do. I see no reason to pass layout managers as a parameter or to have panels extend one another. It is an overly complicated design. Also, you should not be using &quot;FlowLayout.LEFT&quot; as a parameter to the add(...) method. A FlowLayout does not support any constraints. I suggest you just create a panel and add 3 buttons to it. The components should be created in the class where you actually add the components to the panel., not in the super class."},{"comment_id":134574330,"body":"<b>do not</b> extend concrete containers/components - they are designed for usage - so configures them as needed"}],"answers":[{"answer_id":76309752,"body":"<p>The problem is <code>Arrays.fill(tab, new JButton());</code>.</p>\n<p>It creates only <strong>one</strong> instance of JButton which is assigned to each position of the array.</p>\n<p>This should fix it:</p>\n<pre><code>class MyButtonPanel extends JPanel{\n    JButton[] tab;\n    public MyButtonPanel(int numOfButtons, LayoutManager layout) {\n        this.tab = new JButton[numOfButtons];\n        for (int i = 0; i &lt; numOfButtons; i++) {\n            tab[i] = new JButton();\n        }\n        this.setLayout(layout);\n    }\n}\n</code></pre>\n"}],"last_activity_date":1684788075,"question_id":76307574,"body":"<p>Basically, when i run the following code, instead of a panel containing three buttons next to each other i get a tiny panel that (i'm assuming) has all the buttons on top of each other. What's weird is that when i put all the code inside <code>Main()</code> it seems to work just fine, i can even add more buttons to <code>myTopLeftPanel</code> from main and they are displayed correctly, but when i split it into classes it starts acting weird. What's the cause of this? How can i fix it?</p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.util.Arrays;\n\npublic class Main extends JFrame {\n    int height = 500;\n    int width = (int)Math.round(height*1.61803);\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(() -&gt; new Main());\n    }\n    public Main() {\n        this.setLayout(new BorderLayout());\n        MyTopLeftPanel myTopLeftPanel = new MyTopLeftPanel();\n        JPanel top = addPanel(new BorderLayout());\n        top.add(myTopLeftPanel, BorderLayout.WEST);\n        this.add(top, BorderLayout.NORTH);\n        setup();\n    }\n    void setup(){\n        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        this.setSize(width, height);\n        this.setVisible(true);\n    }\n    JPanel addPanel(LayoutManager layout){\n        JPanel temp = new JPanel();\n        temp.setLayout(layout);\n        return temp;\n    }\n}\n</code></pre>\n<pre><code>class MyButtonPanel extends JPanel{\n    JButton[] tab;\n    public MyButtonPanel(int numOfButtons, LayoutManager layout) {\n        this.tab = new JButton[numOfButtons];\n        Arrays.fill(tab, new JButton());\n        this.setLayout(layout);\n    }\n}\n</code></pre>\n<pre><code>class MyTopLeftPanel extends MyButtonPanel{\n    public MyTopLeftPanel(){\n        super(3, new FlowLayout());\n        tab[0].setBackground(Color.RED);\n        tab[0].setText(&quot;R&quot;);\n        tab[1].setBackground(Color.GREEN);\n        tab[1].setText(&quot;G&quot;);\n        tab[2].setBackground(Color.BLUE);\n        tab[2].setText(&quot;B&quot;);\n        this.setLayout(new FlowLayout());\n        this.add(tab[0], FlowLayout.LEFT);\n        this.add(tab[1], FlowLayout.LEFT);\n        this.add(tab[2], FlowLayout.LEFT);\n    }\n}\n</code></pre>\n"},{"comments":[{"comment_id":134558275,"body":"If you really wish the json could be provided like <code>&quot;list&quot;: []</code> instead of <code>&quot;List&quot;: null</code>, then rather than polute your application with null handling kung fu, you could just tweak the json string to replace all list fields that should not be null with empty lists via regex."}],"answers":[{"comments":[{"comment_id":134558145,"body":"You are correct, the issue remains though. I am receiving from a third-party system JSONs that have null elements, like I have described in the example : <code>list: null</code>  I would like to have this default to a value, and not remain null - as the application is not 100% null-tollerant.   Thank you for the recommendation. The question now becomes, how to I register the TypeAdapter for this ? This does not work :  <code>new GsonBuilder().registerTypeAdapter(Collection.class,Collectio&zwnj;&#8203;nDeserializer.class)&zwnj;&#8203;.create()</code>"},{"comment_id":134560188,"body":"@BogdanMaceasa you can register it with <code>new GsonBuilder().registerTypeAdapter(Collection.class, new CollectionDeserializer())</code>."}],"answer_id":76305573,"body":"<p>Your JSON string is explicitly saying that this list is null, so I'm not sure why you expected it to be empty in the first place. For an empty string, the JSON string should be <code>[]</code>.</p>\n<p>Nevertheless, if you still want to convert null lists to empty lists in your custom deserializer, the answer is simple. Your custom deserializer is not working because it's testing the the json element being null or empty. It's neither of those: it's a value that represents a null element. Use <a href=\"https://www.javadoc.io/static/com.google.code.gson/gson/2.10.1/com.google.gson/com/google/gson/JsonElement.html#isJsonNull()\" rel=\"nofollow noreferrer\">JsonElement.isJsonNull</a>:</p>\n<pre><code>class CollectionDeserializer implements JsonDeserializer&lt;Collection&lt;?&gt;&gt; {\n    public Collection&lt;?&gt; deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\n        return json.isJsonNull() ? Collections.emptyList() : ...;\n    }\n}\n</code></pre>\n"},{"comments":[{"comment_id":134558379,"body":"I have thought about this, and tested it as well. I know it works but honestly I have gone to some lengths to implement GSON in my project and it would mean replacing everything with modelMapper :) I&#39;d rather not do that unless forced to."},{"comment_id":134564903,"body":"This only works because you omitted <code>list</code>. If you&#39;re playing with the JSON, might as well make it <code>&quot;list&quot;: []</code>."}],"answer_id":76305690,"body":"<p>It can be done with Jackson, and without explicitly set the field to null:</p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonProperty;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class TestApplication{\n    @Data\n    @NoArgsConstructor\n    public static class User{\n\n        private String userName;\n        @JsonProperty(&quot;eMailAddress&quot;)\n        private String email;\n        private final List&lt;Object&gt; list = new ArrayList&lt;&gt;();\n\n    }\n\n    public static void main(String[] args) throws JsonProcessingException {\n        String x = &quot;{\\n&quot; + &quot;\\&quot;userName\\&quot;: \\&quot;test\\&quot;&quot;\n                + &quot;,\\n&quot; + &quot;\\&quot;eMailAddress\\&quot;: \\&quot;dan@gmail.com\\&quot;&quot;\n                + &quot;}&quot;;\n\n        ObjectMapper mapper = new ObjectMapper();\n        User from = mapper.readValue(x, User.class);\n\n        System.out.println(from);\n    }\n\n}\n</code></pre>\n<p>This prints:</p>\n<pre><code>TestApplication.User(userName=test, email=dan@gmail.com, list=[])\n</code></pre>\n"},{"comments":[{"comment_id":134558562,"body":"this can&#39;t be reliably done. I have given an example using a field called &quot;list&quot; but in practice there are dozens of fields."}],"answer_id":76305844,"body":"<p>It can be done with Gson with explicitly set the field to empty list:\nReplace:</p>\n<pre><code>+ &quot;,\\n&quot; + &quot;\\&quot;list\\&quot;: null\\n&quot;\n</code></pre>\n<p>With:</p>\n<pre><code>+ &quot;,\\n&quot; + &quot;\\&quot;list\\&quot;: []\\n&quot;\n</code></pre>\n<p>This prints:</p>\n<pre><code>TestApplication.User(userName=test, email=null, list=[])\n</code></pre>\n"},{"answer_id":76306795,"body":"<p>A null list is not the same as an empty list.</p>\n<p>You can only use a custom adapter if you want all null arrays to become empty arrays. It's a lot of work. You need the following:</p>\n<p>New variant of <a href=\"https://github.com/google/gson/blob/master/gson/src/main/java/com/google/gson/internal/bind/ArrayTypeAdapter.java.\" rel=\"nofollow noreferrer\">ArrayTypeAdapter</a>, <a href=\"https://github.com/google/gson/blob/master/gson/src/main/java/com/google/gson/internal/bind/CollectionTypeAdapterFactory.java\" rel=\"nofollow noreferrer\">CollectionTypeAdapterFactory</a> and other setup classes.</p>\n<p>Change the following lines of ArrayTypeAdapter</p>\n<pre><code>if (in.peek() == JsonToken.NULL) {\n  in.nextNull();\n  return null;\n}\n</code></pre>\n<p>to</p>\n<pre><code>if (in.peek() == JsonToken.NULL) {\n  in.nextNull();\n  return Array.newInstance(componentType, 0);\n}\n</code></pre>\n<p>Instead of doing this, I recommend that you add an input validator <code>@NotNull</code> or programmatically change the <code>null</code> to <code>[]</code> for specific values after deserialisation</p>\n"},{"comments":[{"comment_id":134568536,"body":"I have found something similar which i was trying to modify to suit my case, but you implementation hit the nail on the head."}],"answer_id":76309479,"body":"<p>This can be solved with a custom <a href=\"https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/TypeAdapterFactory.html\" rel=\"nofollow noreferrer\"><code>TypeAdapterFactory</code></a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class NullListToEmptyFactory implements TypeAdapterFactory {\n    public static final NullListToEmptyFactory INSTANCE = new NullListToEmptyFactory();\n\n    private NullListToEmptyFactory() {\n    }\n\n    @Override\n    public &lt;T&gt; TypeAdapter&lt;T&gt; create(Gson gson, TypeToken&lt;T&gt; type) {\n        Class&lt;?&gt; rawType = type.getRawType();\n\n        // Only handle List and ArrayList; let other factories handle different types\n        if (rawType != List.class &amp;&amp; rawType != ArrayList.class) {\n            return null;\n        }\n\n        // Delegate which handles deserialization of non-null values, and serialization\n        TypeAdapter&lt;T&gt; delegate = gson.getDelegateAdapter(this, type);\n        return new TypeAdapter&lt;T&gt;() {\n            @Override\n            public void write(JsonWriter out, T value) throws IOException {\n                delegate.write(out, value);\n            }\n\n            @Override\n            public T read(JsonReader in) throws IOException {\n                if (in.peek() == JsonToken.NULL) {\n                    in.nextNull();\n\n                    // Safe due to check at beginning of `create` method\n                    @SuppressWarnings(&quot;unchecked&quot;)\n                    T t = (T) new ArrayList&lt;&gt;();\n                    return t;\n                } else {\n                    return delegate.read(in);\n                }\n            }\n        };\n    }\n}\n</code></pre>\n<p>You can then register this factory on a <code>GsonBuilder</code> like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Gson gson = new GsonBuilder()\n    .registerTypeAdapterFactory(NullListToEmptyFactory.INSTANCE)\n    .create();\n</code></pre>\n<p>The usage of <code>TypeAdapterFactory</code> has the following advantages:</p>\n<ul>\n<li>It uses <code>TypeAdapter</code> which normally performs better than <code>JsonDeserializer</code> because it directly operates on the JSON stream and does not have to convert it to a <code>JsonElement</code> first</li>\n<li>It allows delegating to the default adapter:\n<ul>\n<li>There is no need to create a second <code>Gson</code> instance; deserialization will use your existing <code>Gson</code> instance and all of its configuration you made</li>\n<li>It supports custom element types, for example <code>List&lt;MyClass&gt;</code> because the delegate does all the type resolution work</li>\n</ul>\n</li>\n</ul>\n<p><strong>Important:</strong> With any solution you choose for this problem, none of them will handle the case where the field is missing in the JSON data. Gson does not support that very well at the moment, see <a href=\"https://github.com/google/gson/issues/1005\" rel=\"nofollow noreferrer\">this feature request</a>. You currently have to explicitly initialize the field with a non-<code>null</code> <code>List</code> (and make sure your class has a no-args constructor; <a href=\"https://github.com/google/gson/blob/master/Troubleshooting.md#default-field-values-missing\" rel=\"nofollow noreferrer\">more information</a>), otherwise the field will be <code>null</code> if it is missing in the JSON data.</p>\n"}],"last_activity_date":1684788056,"question_id":76305392,"body":"<p>I am using Gson to deserialize a bunch of objects, some of which are more complex and some &quot;lightweight&quot;.</p>\n<p>I am in a bit of a cunundrum over here, as I have been expecting another behaviour from GSON.fromJson() when reading a field with <code>null</code> value. More precisely, looking at this example</p>\n<pre><code>public class TestApplication{\n    @Data\n    @NoArgsConstructor\n    public class User{\n\n        private String userName;\n        @SerializedName(value = &quot;eMailAddress&quot;)\n        private String email;\n        private final List&lt;Object&gt; list = new ArrayList&lt;&gt;();\n\n    }\n\n    public static void main(String[] args) {\n        String x = &quot;{\\n&quot; + &quot;\\&quot;userName\\&quot;: \\&quot;test\\&quot;&quot;\n            + &quot;,\\n&quot; + &quot;\\&quot;eMailAddress\\&quot;: \\&quot;dan@gmail.com\\&quot;&quot;\n            + &quot;,\\n&quot; + &quot;\\&quot;list\\&quot;: null\\n&quot;\n            + &quot;}&quot;;\n\n        User from = new Gson().fromJson(x, User.class);\n        System.out.println(from);\n    }\n\n}\n</code></pre>\n<p>This prints:</p>\n<pre><code>TestApplication.User(userName=test, email=dan@gmail.com, list=null)\n</code></pre>\n<p>I was expecting the output list to be empty (<code>list=[]</code>) and not null.</p>\n<p>Can I do anything to achieve the behaviour I need? My application uses lists of objects and it is not feasable to register a typeAdapter for each of them.</p>\n<p>How would I go about writing a custom deserializer? This next example would be simple enough if it were to work:</p>\n<pre><code>    class CollectionDeserializer implements JsonDeserializer&lt;Collection&lt;?&gt;&gt; {\n\n        public Collection&lt;?&gt; deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\n\n            return ObjectUtils.isEmpty(json) ? new ArrayList&lt;&gt;() : new Gson().fromJson(json, Collection.class);\n        }\n\n    }\n</code></pre>\n<p>What I have tried:</p>\n<ul>\n<li>implementing a customer deserializer ( above ) with no success.</li>\n<li>@JsonSetter(nulls= Nulls.SKIP) annotation with no effect on the Gson parsing.</li>\n</ul>\n"},{"comments":[{"comment_id":133190346,"body":"This GitHub-issue response solved it for me: <a href=\"https://github.com/flutter/flutter/issues/118502#issuecomment-1383215722\" rel=\"nofollow noreferrer\">github.com/flutter/flutter/issues/&hellip;</a>"}],"answers":[{"answer_id":51286951,"body":"<p>Please ensure Java is in your PATH and that JAVA_HOME is defined and pointing to the JDK.  I've had Windows put the JRE in the path instead of the JDK, which leads to all kinds of issues.</p>\n\n<p>Please take a look at your PATH environment variable and remove everything Java related that does not point to the JDK folder.</p>\n\n<p>Oracle has some documentation on how to do this here : <a href=\"https://docs.oracle.com/cd/E19182-01/821-0917/inst_jdk_javahome_t/index.html\" rel=\"nofollow noreferrer\">Installing Java and setting JAVA_HOME</a></p>\n"},{"answer_id":62751373,"body":"<p><img src=\"https://i.stack.imgur.com/HJ1xu.png\" alt=\"enter image description here\" /></p>\n<p>I was getting this error when I run <code>flutter doctor</code>.</p>\n<p>Solution:</p>\n<ul>\n<li>Go to the file &quot;java&quot; following the path where Error is shown.</li>\n<li>Then right click on the file and go to Properties.</li>\n<li>Then Go to permissions and <strong>Check</strong> the box &quot;<strong>Allow executing file as program</strong>&quot;.</li>\n<li>Finally, run <code>flutter doctor</code> to see <code>No issues found!</code>.</li>\n</ul>\n"},{"comments":[{"comment_id":120315835,"body":"I have both the stable and the beta Android Studio installed, how did you change your Android Studio?"},{"comment_id":120322522,"body":"in Android Studio update your Preview channel to Stable.. <a href=\"https://developer.android.com/studio/preview/install-preview#change_your_update_channel\" rel=\"nofollow noreferrer\">developer.android.com/studio/preview/&hellip;</a>"},{"comment_id":120352145,"body":"Thank you for the response but I need to use Beta for m1 mac support, will try once and see."},{"comment_id":120551058,"body":"Unknown to what could be different for M1 macs."},{"comment_id":121188514,"body":"Any fix for m1 mac?"}],"answer_id":67845759,"body":"<p>Had this issue of <code>✗ Unable to find bundled Java version.</code>\nSeems like the issue was with <strong>Android Studio (Beta Version)</strong></p>\n<p>Changed my <strong>Android Studio (Stable Version)</strong> to solve the issue</p>\n<p>Here are the <code>flutter doctor -v</code> details for each  <strong>Android Studio</strong></p>\n<p><strong>Beta Android Studio</strong></p>\n<pre><code>[!] Android Studio\n    • Android Studio at /Applications/Android Studio Preview.app/Contents\n    • Flutter plugin can be installed from:\n      🔨 https://plugins.jetbrains.com/plugin/9212-flutter\n    • Dart plugin can be installed from:\n      🔨 https://plugins.jetbrains.com/plugin/6351-dart\n    ✗ Unable to find bundled Java version.\n    • Try updating or re-installing Android Studio.\n</code></pre>\n<p><strong>Stable Android Studio</strong></p>\n<pre><code>[✓] Android Studio (version 4.2)\n    • Android Studio at /Applications/Android Studio.app/Contents\n    • Flutter plugin can be installed from:\n      🔨 https://plugins.jetbrains.com/plugin/9212-flutter\n    • Dart plugin can be installed from:\n      🔨 https://plugins.jetbrains.com/plugin/6351-dart\n    • Java version OpenJDK Runtime Environment (build 11.0.8+10-b944.6916264)\n</code></pre>\n<p>Even after this issue persist then</p>\n<ul>\n<li><p>Check for Java\n<code>java -version</code>\n<code>which java</code></p>\n</li>\n<li><p>double-check that these are present in your .bashrc or .bash_profile or .zshrc</p>\n</li>\n</ul>\n<pre><code>export PATH=&quot;$PATH:/usr/bin/java&quot;\nexport JAVA_HOME=$(/usr/libexec/java_home)\n</code></pre>\n"},{"comments":[{"comment_id":131200611,"body":"The older one is one with only the JRE folder like @Neail pointed it out. The one with the smaller number"}],"answer_id":67999421,"body":"<p><strong>For Windows:</strong>\nIf you are using windows go to this directory C:\\Program Files\\Android\\Android Studio and check older Android Studio folders are exist if exist  delete those. it will work.</p>\n"},{"comments":[{"comment_id":134565357,"body":"This answer would be much better if the text were expressed as text, not an image.  <a href=\"//meta.stackoverflow.com/a/285557/208273\">Images are much harder to use than text, for many reasons</a>."}],"answer_id":68293939,"body":"<p>Double check the path, solved my problem wrapping the path with quotation marks...</p>\n<p><strong>Before</strong>:</p>\n<p><a href=\"https://i.stack.imgur.com/WX8ds.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/WX8ds.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>After</strong>:</p>\n<p><a href=\"https://i.stack.imgur.com/ODXSV.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ODXSV.png\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"comment_id":121218710,"body":"There are many versions out there. Which one did you go to?"}],"answer_id":68572043,"body":"<p>I get this error this morning, when updated ANDROID STUDIO to new version, so to solve this problem you need to find previous version from <a href=\"https://developer.android.com/studio/archive\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/archive</a> and setup, it works for me! (sorry, if exists grammatical errors)</p>\n"},{"comments":[{"comment_id":121232574,"body":"just add a bit info. from that mkyong.com article, you only need to execute the command from 2.1 2.2 and 2.3 then continue to execute the command from Nalawala above. it works!"},{"comment_id":121584244,"body":"also work for me. just note. JRE folder you can find at cd /Applications/Android\\ Studio.app/Contents/jre"},{"comment_id":124207728,"body":"creating sym-links (as suggested in this answer) will break it once again when you update Android Studio. Better just follow steps 3 + 4 in the linked article from mkyong.com"},{"comment_id":124566998,"body":"Worked perfectly on Android Studio Preview, with slight change to command to account for beta version &quot;cd /Applications/Android\\ Studio\\ Preview.app/Contents/jre&quot;"},{"comment_id":128110731,"body":"Did everything suggested here but was still having the error ! Uninstalling Android Studio Preview solved the problem for me."},{"comment_id":128341243,"body":"I followed everything except that I couldn&#39;t find &quot;jre&quot; folder, it was &quot;jbr&quot; for me. issue was fixed when I renamed the folder to &quot;jre&quot;"},{"comment_id":131606187,"body":"@Texv instead of rename, create a link by &quot;ln -s jbr jre&quot;, otherwise &quot;Android Studio Preview&quot; can not be launched."},{"comment_id":132677331,"body":"An update for MAC users running Android Studio Electric Eel 2022.1.1, new location to set JAVA_HOME should be &#39;/Applications/Android\\ Studio.app/Contents/jbr/Contents/Home&#39;  reference: <a href=\"https://stackoverflow.com/a/43237101\">stackoverflow.com/a/43237101</a>"},{"comment_id":132921976,"body":"&#39;sudo ln -s jbr jre&#39; was giving me &#39;ln: jre: Operation not permitted&#39; so I just copied the jbr folder and renamed it jre"},{"comment_id":133174259,"body":"If your not permitted go here <a href=\"https://osxdaily.com/2018/10/09/fix-operation-not-permitted-terminal-error-macos/\" rel=\"nofollow noreferrer\">osxdaily.com/2018/10/09/&hellip;</a>"},{"comment_id":133329142,"body":"Thank you so much it is working on MacBook Pro M1 Pro Android Studio Electric eel"},{"comment_id":134262184,"body":"I pasted this in my zshenv file: export JAVA_HOME=/Applications/Android\\ Studio.app/Contents/jbr/Contents/Home and then did all the steps under the &quot;For Mac Users&quot; section above. Installed Android Studio Flamingo 2022.2.1 with macOS Monterey. Works now, thanks."},{"comment_id":134298564,"body":"You are awesome man! Everything working perfectly now."},{"comment_id":134363525,"body":"God bless the internet... Attention for anyone using newer versions of Mac btw, even &#39;sudo ln -s jbr jre&#39; will fail because there is a new security setting where you actually have to go in and grant terminal permission to edit other applications."}],"answer_id":68575967,"body":"<h2>For <strong>Mac</strong> Users:</h2>\n<p>Set the <code>JAVA_HOME</code> path by following <a href=\"https://mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/#what-is-usrlibexecjava-home\" rel=\"noreferrer\">this article</a> and then  apply the following commands:</p>\n<h3>For the JetBrains Runtime &quot;Android Studio Electric Eel&quot;</h3>\n<pre><code>cd /Applications/Android\\ Studio.app/Contents/jbr\nln -s ../jbr jdk\nln -s &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot; jdk\n</code></pre>\n<p>Then go to the <em>Finder</em> and search for <em>Android Studio</em>:</p>\n<ol>\n<li>Right click -&gt; <em>Show Package Contents</em></li>\n<li>Open the <em>contents</em> folder, then create new folder called <code>jre</code></li>\n<li>Copy the contents of the JetBrainsRuntime folder and paste it into the <code>jre</code> folder</li>\n</ol>\n<p><code>flutter doctor -v</code> should work now!</p>\n<h3>Other versions</h3>\n<pre><code>cd /Applications/Android\\ Studio.app/Contents/jre\nln -s ../jre jdk\nln -s &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot; jdk\n</code></pre>\n<p>Then you can run <code>flutter doctor -v</code></p>\n<hr />\n<h2>For Mac users who are using the <code>JetBrains Toolbox</code>:</h2>\n<p>Set the <code>JAVA_HOME</code> path following <a href=\"https://mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/#what-is-usrlibexecjava-home\" rel=\"noreferrer\">the article</a>.</p>\n<p>After that, change <code>username</code> to your macOS username and run:</p>\n<pre><code>cd /Users/username/Library/Application Support/JetBrains/Toolbox/apps/AndroidStudio/ch-0/203.7583922/Android Studio.app/Contents/jre\nln -s ../jre jdk\nln -s &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot; jdk\n\nflutter doctor -v\n</code></pre>\n<p>If you're still facing the issue, you can try this workaround:</p>\n<pre><code>cd /Applications/Android\\ Studio.app/Contents\nln -s jbr jre\n</code></pre>\n"},{"answer_id":68628394,"body":"<p>I use macos big sur 11.5.1 also have the above situation and have successfully fixed the error:</p>\n<blockquote>\n<p>Unable to find bundled Java version on Flutter &amp;&amp;\n! Some Android licenses are not accepted. To resolve this, run: flutter doctor --android-licenses</p>\n</blockquote>\n<p>CH-0 / 203.7678000 is the version you installed if you have to fix it</p>\n<pre><code>cd ~/Library/Application\\ Support/JetBrains/Toolbox/apps/AndroidStudio/ch-0/203.7678000/Android\\ Studio.app/Contents/jre \n\nsudo ln -s ../jre jdk\n\nsudo ln -s &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot; jdk\n\nflutter doctor --android-licenses\n\nflutter doctor -v\n</code></pre>\n"},{"comments":[{"comment_id":122415986,"body":"I followed your instructions and nothing changed. I&#39;m on an m1 MBP."},{"comment_id":132917251,"body":"I am using <code>Java 11</code>, and I needed to make one small change to make it work. Currently, it is working when I modify your code like the following:  <code>ln -s &#47;Library&#47;Java&#47;JavaVirtualMachines&#47;zulu-11.jdk&#47;Contents Contents</code>"}],"answer_id":68781084,"body":"<p><strong>Apple Silicon Users Problem Solved!</strong></p>\n<p>First do this: <a href=\"https://stackoverflow.com/questions/64708446/flutter-doctor-android-licenses-exception-in-thread-main-java-lang-noclass\">Flutter Doctor --android-licenses : Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError</a></p>\n<p>Then:</p>\n<ol>\n<li>Make Sure to set Java_Home path in .zshrc using same article already listed here. He explains using the .zshenv but we will edit .zshrc file.</li>\n</ol>\n<p><a href=\"https://mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/#what-is-usrlibexecjava-home\" rel=\"nofollow noreferrer\">https://mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/#what-is-usrlibexecjava-home</a></p>\n<ol start=\"2\">\n<li>Uninstall Java from your system</li>\n<li>Re-install the M1 Specific Version from Azul. Choose Java 16. Choose ARM 64 bit <a href=\"https://www.azul.com/downloads/?package=jdk\" rel=\"nofollow noreferrer\">https://www.azul.com/downloads/?package=jdk</a></li>\n</ol>\n<p><strong>Here's Where I Was Stuck But Finally Found The Fix</strong></p>\n<p>Run these commands:</p>\n<ol start=\"4\">\n<li>cd /Applications/Android\\ Studio.app/Contents/jre</li>\n<li>ln -s /Library/Java/JavaVirtualMachines/zulu-16.jdk jdk</li>\n<li>flutter doctor -v</li>\n</ol>\n"},{"comments":[{"comment_id":121596076,"body":"All of this has already been suggested in other answers."}],"answer_id":68800353,"body":"<p>1.Write the path in quotes i.e flutter config --android-studio-dir &quot;C:\\Program Files\\Android\\Android Studio&quot;.</p>\n<p>2.Please check the correct path of android Studio.</p>\n<p>3.Do the 1st step and run flutter doctor .</p>\n"},{"comments":[{"comment_id":124207698,"body":"This will probably break other stuff. Also, it stops working when you update Android Studio"}],"answer_id":68992448,"body":"<p>In my case, I recently bought an M1 Macbook and then installed Android Studio with the Jetbrains Toolbox but</p>\n<p>This folder doesn't exist</p>\n<pre><code>/Users/username/Library/Application Support/JetBrains/Toolbox/apps/AndroidStudio/ch-0/203.7583922/Android Studio.app/Contents/jre\n</code></pre>\n<p>So I follow what this comment say and now is working just fine\n<a href=\"https://github.com/flutter/flutter/issues/76215#issuecomment-893512809\" rel=\"nofollow noreferrer\">https://github.com/flutter/flutter/issues/76215#issuecomment-893512809</a></p>\n<p>1.- Go to Applications folder then right click on your android studio app\n2.- click on Show package contents\n3.- open a terminal inside jre folder then create the new jdk folder</p>\n<pre><code>mkdir jdk\n</code></pre>\n<p>4.- move the folder Contents into jdk</p>\n<pre><code>mv Contents jdk\n</code></pre>\n<p>After refreshing my terminal, flutter doctor works just fine!</p>\n"},{"comments":[{"comment_id":125428735,"body":"make sure no spaces in the path of the directory"}],"answer_id":69140582,"body":"<p>I have recently encountered the same issue on Ubuntu 20.04 LTS.</p>\n<p>After searching a lot I have fixed this issue by removing the Android Studio path from the Flutter config by running below mention command.</p>\n<pre><code>flutter config --android-studio-dir=   \n</code></pre>\n<p>Solution:</p>\n<p><img src=\"https://i.stack.imgur.com/DTOWP.png\" alt=\"Solution \" /></p>\n"},{"answer_id":69241218,"body":"<p>In my case, I am using macOS, there was a copy of Android Studio Preview in my Downloads folder. I just deleted that Android Studio Preview file and the error was gone.</p>\n"},{"comments":[{"comment_id":130355905,"body":"cd: no such file or directory: /Applications/Android Studio Preview.app/Contents/jre"},{"comment_id":132028079,"body":"no jre folder in Android Studio Preview.app. I solved it and post my solution below for Android Studio Preview"}],"answer_id":69852062,"body":"<p>Those on the Beta Versions of MAC OS Beta, Xcode Beta, Android Studio Preview.</p>\n<p>Just ensure your path ways are correct to the Applications files for Flutter.</p>\n<p>To fix JAVA Bundle for Android Studio Preview do this:</p>\n<pre><code>cd /Applications/Android\\ Studio\\ Preview.app/Contents/jre\n\nln -s ../jre jdk\n\nln -s &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot; jdk\n\nflutter doctor -v\n</code></pre>\n"},{"answer_id":70938810,"body":"<p>Uninstall Android Studio...</p>\n<p>Delete folder $/Program Files/Android</p>\n<p>Install Android studio...</p>\n<p>$flutter doctor</p>\n"},{"answer_id":71042563,"body":"<p>I was getting error as below,</p>\n<p><a href=\"https://i.stack.imgur.com/pVulg.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/pVulg.png\" alt=\"enter image description here\" /></a></p>\n<p>Execute below steps to resolve this issue,</p>\n<ol>\n<li>Visit Google folder in user directory\n<a href=\"https://i.stack.imgur.com/HJ2ZJ.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/HJ2ZJ.png\" alt=\"enter image description here\" /></a></li>\n<li>Delete the AndroidStudio4.1 directory ( For which I was getting error )\n<a href=\"https://i.stack.imgur.com/HWFhD.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/HWFhD.png\" alt=\"enter image description here\" /></a></li>\n</ol>\n<p>Run &quot;flutter doctor&quot; again. My problem was fixed</p>\n"},{"answer_id":71129776,"body":"<p>In my case, there were two &quot;Android Studio&quot; folders. One was &quot;Android Studio&quot; and another was &quot;Android Studio1&quot;, the &quot;Android Studio1&quot; had the actual app installed and the &quot;Android Studio&quot; folder was empty. Deleting the empty folder and renaming the &quot;Android Studio1&quot; to &quot;Android Studio&quot; fixed the issue.</p>\n"},{"answer_id":73768876,"body":"<p>If it's not related to JAVA_HOME path, then try the following:</p>\n<ul>\n<li>go to path: <code>C:\\Users\\Administrator\\AppData\\Local\\Google</code>\nand delete the old version of AndroidStudioXXX.X folder</li>\n<li>now run <code>flutter doctor</code> again.\nit fixes mine.</li>\n</ul>\n"},{"comments":[{"comment_id":132028623,"body":"doesn&#39;t need to delete Android Studio Preview. You can check my solution"}],"answer_id":74411728,"body":"<p>FYI; This is on an M1 Mac.</p>\n<ol start=\"0\">\n<li>The summary error just says:</li>\n</ol>\n<pre><code>[!] Android Studio\n    ✗ Unable to find bundled Java version.\n</code></pre>\n<ol>\n<li>The summary also suggested <code>flutter doctor -v</code> to get more details. Now I see:</li>\n</ol>\n<pre><code>[!] Android Studio\n    • Android Studio at /Applications/Android Studio 4.2 Preview.app/Contents\n    • Flutter plugin can be installed from:\n      🔨 https://plugins.jetbrains.com/plugin/9212-flutter\n    • Dart plugin can be installed from:\n      🔨 https://plugins.jetbrains.com/plugin/6351-dart\n    ✗ Unable to find bundled Java version.\n    • Try updating or re-installing Android Studio.\n\n[✓] Android Studio (version 2021.3)\n    • Android Studio at /Applications/Android Studio.app/Contents\n    • Flutter plugin can be installed from:\n      🔨 https://plugins.jetbrains.com/plugin/9212-flutter\n    • Dart plugin can be installed from:\n      🔨 https://plugins.jetbrains.com/plugin/6351-dart\n    • Java version OpenJDK Runtime Environment (build 11.0.13+0-b1751.21-8125866)\n</code></pre>\n<ol start=\"2\">\n<li>I used Finder to delete <code>Android Studio 4.2 Preview.app</code>.</li>\n<li><code>flutter doctor</code> now happy.</li>\n</ol>\n<p>HCI suggestion to <code>flutter doctor</code> maintainers: default to &quot;full details&quot; when reporting errors.</p>\n"},{"answer_id":74810760,"body":"<p><strong>For Android Studio Preview</strong></p>\n<p>I already install</p>\n<ul>\n<li>Android Studio Preview</li>\n<li>JDK via Android Studio Preview</li>\n<li>Xcode v12 on MacOS 10.15</li>\n</ul>\n<p>Here is what I faced <code>[!] Android Studio: Unable to find bundled Java version.</code></p>\n<p>Solution:</p>\n<ol>\n<li>Find out JDK PATH. Check <a href=\"https://mkyong.com/java/how-to-set-java_home-environment-variable-on-mac-os-x/#what-is-usrlibexecjava-home\" rel=\"noreferrer\">this</a></li>\n</ol>\n<pre><code>#check bash or zsh\n\n$ echo $SHELL\n/bin/bash\n\n#return the path of java_home \n$ /usr/libexec/java_home\n</code></pre>\n<p>2.Add JAVA_HOME in .bash_profile for bash or .zshenv for zsh</p>\n<pre><code>$ nano ~/.bash_profile\nexport JAVA_HOME=$(/usr/libexec/java_home)\n$ source ~/.bash_profile\n</code></pre>\n<p>3.Link JDK path to Android Studio Preview</p>\n<pre><code>$ cd /Applications/Android\\ Studio\\ Preview.app/Contents\n\n# flutter doctor check if Contents/jre exist, link jbr with jre\n$ ln -s jbr jre\n\n$ cd jbr\n$ ln -s ../jbr jdk\n$ ln -s &quot;/Library/Internet Plug-Ins/JavaAppletPlugin.plugin&quot; jdk\n</code></pre>\n<p>4.[Optional] if you have Android Studio at the same time, you could follow @Nalawala Murtuza solution. It is permitted for <code>Android Studio</code> and <code>Android Studio Preview</code> at the same time during check from flutter doctor. Doesn't need to delete Android Studio Preview.</p>\n<p><a href=\"https://i.stack.imgur.com/93Kc4.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/93Kc4.png\" alt=\"enter image description here\" /></a></p>\n<p>5.Use <code>flutter doctor -v</code> to check</p>\n"},{"comments":[{"comment_id":132580175,"body":"Is there any source or comment on the directory name change by the dev team? Been pulling my hair for the last hour reinstalling and browsing the directories trying to figure it out what was wrong, thanks"},{"comment_id":132581819,"body":"bro, operation not permitted on mac to create a symlink between jbr and jre, please help"},{"comment_id":132584806,"body":"@VanditShah give the terminal full disk access at <code>settings&gt;privacy &amp; security&gt;full disk access&gt;terminal</code> and then call the command with <code>sudo</code>"},{"comment_id":132597544,"body":"On Linux if you are part of the beta / preview program of Android Studio, then the command is <code>cd ~&#47;android-studio-preview&#47; &amp;&amp; ln -s jbr jre</code>. This startled me, because I have the regular directory and your command didn&#39;t fix it. Then I realized I&#39;m using a Preview version. You can add that."},{"comment_id":132618491,"body":"When I try to do this in AS Terminal it complains: <code>PS C:\\Program Files\\android\\android studio&gt; mklink &#47;D &quot;jre&quot; &quot;jbr&quot; mklink : The term &#39;mklink&#39; is not recognized as the name of a cmdlet, function, script file, or operable program. Check the spelling of the name, or  if a path was included, verify that the path is correct and try again. At line:1 char:1 + mklink &#47;D &quot;jre&quot; &quot;jbr&quot;</code> - help!"},{"comment_id":132623693,"body":"@Sam try <code>New-Item -ItemType...</code>, as the <code>mklink</code> is a command in CMD. If that doesn&#39;t work maybe just run the above in Power Shell or CMD :)"},{"comment_id":132658782,"body":"works fine, but I&#39;d like to know more about what happens if you create link instead of common folder which Android Studio gives you from scratch, any hidden rocks?"},{"comment_id":132685846,"body":"On Windows, flutter doctor was throwing this error with latest Android Studio i.e. Electric Eel | 2022.1.1.  However for me, jre folder already existed under C:\\Program Files\\Android\\Android Studio which contained just one file \\jre\\bin\\.marker.  I renamed the existing jre folder into jre_old and afterwards created the symbolic link through below command. problem fixed !   cd C:\\Program Files\\Android\\Android Studio  mklink /D &quot;jre&quot; &quot;jbr&quot;"},{"comment_id":132741326,"body":"@VanditShah Another solution for those using a restricted company computer or getting &quot;operation not permitted,&quot; install <a href=\"https://developer.android.com/studio/archive\" rel=\"nofollow noreferrer\">Android Studio Dolphin</a>, the previous version of Android Studio (accept the terms at the bottom of page). During installation, it&#39;ll ask if you want to uninstall new version during installation."},{"comment_id":132778652,"body":"Windows solution worked, but my Android Studio was installed with Jetbrains Toolbox and the location was different. To see the actual Android Studio path run <code>flutter doctor -v</code>"},{"comment_id":132783935,"body":"This helped me a lot of time. PS. for those who are getting &quot;Access Denied&quot; error on windows by running <code>mklink &#47;D &quot;jre&quot; &quot;jbr&quot;</code>, just run CMD as Administrator."},{"comment_id":132786044,"body":"if you&#39;re on Linux and installed Android studio via the JetBrains Toolbox app, the path you&#39;re looking for will be something like <code>~&#47;.local&#47;share&#47;JetBrains&#47;Toolbox&#47;apps&#47;AndroidStudio&#47;ch-0&#47;221&zwnj;&#8203;.6008.13.2211.947738&zwnj;&#8203;6</code>. The last directory name could be different"},{"comment_id":132933991,"body":"@eja Before doing that, we should have to rename <code>jre</code> dir to another name, say, <code>jreOld</code>, otherwise, <b>CMD says that it cannot create symbolic link if the same (<code>jre</code>) dir is there</b>. then, we can run command given in answer above (for Windows)!"},{"comment_id":133096283,"body":"ln: jre: Operation not permitted  On Mac"},{"comment_id":133097523,"body":"Try giving the terminal the required permissions and run the same with <code>sudo</code> I suppose you the needed permissions are Disk Access in <code>Settings - Privacy &amp; Security - Full Disk Access - Terminal</code>"},{"comment_id":133131140,"body":"This breaks Android Studio patching. Is there a way to point flutter to jbr without making changes to jre folder?"},{"comment_id":133302901,"body":"Thanks a lot. This issue bothered me for a couple of hours. Finally resolved."},{"comment_id":133550377,"body":"Flutter 3.7.7 (and possibly earlier recent versions) look for the JRE under <code>jbr</code>, making workarounds like this unnecessary. Thus one solution is to upgrade to a more recent Flutter version."},{"comment_id":133809849,"body":"This worked for me. Thanks! One very minor clarification, on a Mac, the <b>Disk Access Permissions</b> are in the <b>Mac Settings</b>, not the <b>Android Studio Settings</b>."},{"comment_id":134363529,"body":"God bless the internet... Attention for anyone using newer versions of Mac btw, even &#39;sudo ln -s jbr jre&#39; will fail because there is a new security setting where you actually have to go in and grant terminal permission to edit other applications."}],"answer_id":75119315,"body":"<p>For those having these issues with the latest Android Studio - Electric Eel version, and other canaries and preview releases, note that the bundled <code>jre</code> directory in the Android Studio installation folder is now renamed to <code>jbr</code></p>\n<p>To resolve this, just create a sym link <code>jre</code> -&gt; <code>jbr</code> and Flutter won't complain.</p>\n<p>On Linux</p>\n<pre><code>cd ~/android-studio/ &amp;&amp; ln -s jbr jre\n</code></pre>\n<p>Windows (check installation folder)</p>\n<pre><code>cd C:\\Program Files\\Android\\Android Studio\nmklink /D &quot;jre&quot; &quot;jbr&quot;\n</code></pre>\n<p>or</p>\n<pre><code>New-Item -ItemType SymbolicLink -Path .\\jre -Target .\\jbr\n</code></pre>\n<p>Mac OS</p>\n<pre><code>cd /Applications/Android\\ Studio.app/Contents\nln -s jbr jre\n</code></pre>\n<hr />\n<p>Note that if you are running a preview release, and depending on your OS, the default installation directory might be different, e.g. on Linux it would be</p>\n<pre><code>~/android-studio-preview/\n</code></pre>\n<p>In either case, you can check the installation directory by running</p>\n<pre><code>flutter doctor -v\n</code></pre>\n<hr />\n<p>Also, in case if you run with permissions issues, you can try running the command with admin privileges, depending on your OS.</p>\n<p>For example on Mac/Linux, you can just run the same command with <code>sudo</code> and it should work, additionally on Mac, you'll have to configure the <strong>Disk Access</strong> permissions, depends on your version, but most probably can be found under:</p>\n<p><code>Settings - Privacy &amp; Security - Full Disk Access - Terminal</code></p>\n"},{"answer_id":75127145,"body":"<p><strong>For Windows</strong>\nGo To android studio directory (Default C:\\Program Files\\Android\\Android Studio)\nremove jre folder\nrun cmd as administrator</p>\n<pre><code>cd C:\\Program Files\\Android\\Android Studio\n\nmklink /D &quot;jre&quot; &quot;jbr&quot;\n</code></pre>\n"},{"comments":[{"comment_id":132597445,"body":"Why this this happen with Electric Eel suddenly? Never had this problem before, just recently."},{"comment_id":132605901,"body":"@CsabaToth well I think Android Studio was built on JetBrains IntelliJ IDEA software, which uses its own version of openjdk called Jetbrains runtime(jbr). So I think in the new version of android studio, maybe they might have switched to using Jetbrains jrb."},{"comment_id":132626485,"body":"here is the video link: <a href=\"https://www.youtube.com/watch?v=ry_Zyyq-ZDQ&amp;ab_channel=MdShihabUddin\" rel=\"nofollow noreferrer\">youtube.com/watch?v=ry_Zyyq-ZDQ&amp;ab_channel=MdShihabUddin</a>"},{"comment_id":133022787,"body":"I used brew to install Android Studio. <code>cd &#47;Applications&#47;Android\\ Studio.app&#47;Contents&#47; &amp;&amp; ln -s jbr jre</code>"},{"comment_id":133074531,"body":"For users who use <code>toolbox</code>, <code>flutter doctor -v</code> will show you the <code>Android Studio</code> app location. Then do the above."},{"comment_id":133084375,"body":"You have to add permission privacy setting for terminal to execute ln. <a href=\"https://osxdaily.com/2018/10/09/fix-operation-not-permitted-terminal-error-macos/\" rel=\"nofollow noreferrer\">osxdaily.com/2018/10/09/&hellip;</a>"}],"answer_id":75134478,"body":"<p><strong>For Mac Users</strong></p>\n<p>Make sure you have installed java and set the java_home path, you can use homebrew for that.</p>\n<p>If you installed <strong>Android Studio Electric Eel</strong> Follow the following step</p>\n<ol>\n<li>Go to your Applications folder.</li>\n<li>Search for Android Studio.app. (<code>flutter doctor -v</code> also has an <code>Android Studio</code> entry which will show you the app location)</li>\n<li>Right click and select Show Package Content.</li>\n<li>Navigate into the Content Folder that opens.</li>\n<li>Use your terminal to cd into that folder and then enter the command below and everything should be solved</li>\n</ol>\n<pre><code>ln -s jbr jre\n</code></pre>\n<p>The command above creates a symbolic link</p>\n<p>The symbolic link also works on Ubuntu.</p>\n"},{"comments":[{"comment_id":132806892,"body":"Delete the jre folder and change the environment variable to jbr. It works for me even the flutter doctor complains."},{"comment_id":133072680,"body":"im using android studio 2022.1.1 and this answer works for me."},{"comment_id":133131143,"body":"This breaks Android Studio patching"},{"comment_id":133140054,"body":"@under : how this breaks AS patching ???"},{"comment_id":133170623,"body":"When I try to install the Android Studio patch I get a fatal error saying that jre/bin/.marker file was not found. To resolve, I removed the symbolic link, created the jre/bin/.marker folders and empty file. This allows installation to complete. Then I applied the symbolic link fix again to fix flutter. Not ideal... This is on Windows 10"},{"comment_id":133222368,"body":"great answer.....as temp solution"}],"answer_id":75146150,"body":"<p>For Windows users:</p>\n<p>Go to <code>C:\\Program Files\\Android\\Android Studio</code>, then copy the contents of <strong>jbr</strong> and paste the contents into the <strong>jre</strong> folder.</p>\n<p>Run <code>flutter doctor</code> again and it will solve the problem.</p>\n<p>(I'm running Android studio 2022.1)</p>\n"},{"answer_id":75160155,"body":"<p>Go to Finder &gt; Applications &gt; Android Studio:</p>\n<ol>\n<li>Right click and click &quot;Show package contents&quot;</li>\n<li>Create a new folder called <code>jre</code></li>\n<li>Copy the contents of the <code>jbr</code> folder and paste them into the <code>jre</code> folder</li>\n</ol>\n"},{"answer_id":75166586,"body":"<p>WINDOWS SOLVED (Android studio 2022.1.1)</p>\n<p>Go to &quot;C:\\Users\\user\\AppData\\Local\\JetBrains\\Toolbox\\apps\\AndroidStudio\\ch-0\\221.6008.13.2211.9477386&quot; then <strong>copy</strong> the content of jbr and paste the content into jre folder</p>\n<p>run doctor again and problem solved</p>\n<p>Add Path to enviroment variables if nessary\nC:\\Users\\user\\AppData\\Local\\JetBrains\\Toolbox\\apps\\AndroidStudio\\ch-0\\221.6008.13.2211.9477386\\jre\\bin</p>\n<p>Answer based on GAYTH BACCARI post. Thanks</p>\n<p>Check if path in the enviorment variables are added for JAVA</p>\n"},{"answer_id":75190139,"body":"<p>In latest version of Flutter for Mac, you won't find jre folder under <code>/Applications/Android Studio.app/Contents</code></p>\n<p>Therefore, you can start Terminal and run following commands to fix the issue:</p>\n<p><code>cd /Applications/Android Studio.app/Contents</code></p>\n<p><code>ln -s jbr jre</code> (creates a symbolic link (shortcut) named <code>jre</code> pointing to <code>jbr</code>)</p>\n<p>If you're on latest version of Mac, you might see error while trying to make changes under Applications folder using Terminal, resolve it by adding <code>sudo</code>, like this:</p>\n<p><code>sudo ln -s jbr jre</code> (runs the above command as admin, it will ask you for Mac password)</p>\n<p>You might still see security alert, then you must go to <code>System Settings &gt; Privacy &amp; Security &gt; App Management</code> and <code>Terminal</code> as in the list of apps allowed to make changes under Applications folder.</p>\n"},{"answer_id":75350778,"body":"<p><strong>Solution for Mac</strong></p>\n<p>Go to finder and find Android studio:</p>\n<ul>\n<li>right click and click show package contents</li>\n<li>Create a new folder called jre</li>\n<li>copy the contents of the jbr folder and paste them into jre folder</li>\n<li>reload your terminal and type flutter doctor</li>\n</ul>\n<p>Chill Pill :)</p>\n"},{"answer_id":75354431,"body":"<p>for Ubuntu 22.04 and android sturdio 2022.1.1</p>\n<p><code>cd path/to/android-studio</code></p>\n<p>Just copy jbr directory to jre directory</p>\n<p><code>cp -r jbr/ jre</code></p>\n<p>and it will work</p>\n<p><a href=\"https://i.stack.imgur.com/xaiDb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xaiDb.png\" alt=\"enter image description here\" /></a></p>\n"},{"answer_id":76032969,"body":"<p>If you are using Ubuntu and used JetBrains Toolbox then just do one thing: Go to the Android Studio directory <code>/home/shahadat/.local/share/JetBrains/Toolbox/apps/AndroidStudio/ch-0/222.4459.24.2221.9862592</code> address path will look like this.</p>\n<p>if you do not know how to find out the Android studio path from the JetBrains toolbox or anything else then type <code>flutter doctor -v</code> and then check Android Studio Section (Version 2022.2) - The version can vary.</p>\n<p>Then just copy the <code>jbr</code> directory and rename the directory/folder as <code>jre</code>.</p>\n<p>Now run <code>flutter doctor -v</code></p>\n<p>This works for me.</p>\n"}],"last_activity_date":1684788013,"question_id":51281702,"body":"<p>I have <code>Android Studio version 3.0</code>. When I use the command <code>flutter doctor</code> it shows me the following:</p>\n<blockquote>\n<p>Unable to find bundled Java version</p>\n</blockquote>\n<p>My current Java version is <code>(build 1.8.0_131-b11)</code> on Windows 10.</p>\n<p>I don't have any older versions of Android Studio on my computer.</p>\n"},{"answers":[{"answer_id":76309721,"body":"<p>First,it's hard to figure out why you are using <code>RestTemplate</code> instead of <code>MockMvc</code> or <code>WebTestClient</code> (would need your complete test class for that). Is it an end-to-end test?</p>\n<p>If writing an end-to-end test, you should be fetching the JWT from the authorization server: if you build it yourself, it will probably not pass validation (JWTs are signed with a private key on the authorization server and\nJWT decoder checks this signature using the public key). In that case, nothing in the Authorization will be mocked, the identity is just the one served by the authorization server.</p>\n<p>If writing unit (<code>@WebMvcTest</code>) or integration (<code>@SpringBootTest</code>) tests, then you should be using <code>MockMvc</code> or <code>WebTestClient</code> instead of <code>RestTemplate</code>. In that case, use an annotation, <code>MockMvc</code> request post processor or <code>WebTestClient</code> mutator, building the right type of <code>Authentication</code></p>\n<p>Second, <code>@WithMockUser</code> is putting a <code>UsernamePasswordAuthenticationToken</code> instance in test security context, when you probably want a <code>JwtAuthenticationToken</code> (would need your complete security configuration to be sure). You should be using <code>@WithMockJwtAuth</code> from <a href=\"https://github.com/ch4mpy/spring-addons\" rel=\"nofollow noreferrer\">those libs I created</a> to build <code>JwtAuthentication token</code> (test tooling provided by spring-security-test for JWTs is limited to MockMvc and WebTestClient).</p>\n<p>I suggest you take the time to read <a href=\"https://www.baeldung.com/spring-oauth-testing-access-control\" rel=\"nofollow noreferrer\">this Baeldung article I wrote</a>.</p>\n"}],"last_activity_date":1684787738,"question_id":76309502,"body":"<p>I've been trying to write a Kotling Spring Boot test utilizing <code>TestRestTemplate</code> to call an endpoint on my application that has a <code>PreAuthorize</code> annotation on it, but I am unable to propogate the <code>SecurityContext</code> with an authorized OAuth2 user. I keep getting the following exception:</p>\n<blockquote>\n<p>An Authentication object was not found in the SecurityContext</p>\n</blockquote>\n<p>I've tried a couple different things. Below, I'll depict the original setup, and what I've tried:</p>\n<p><strong>Controller</strong></p>\n<pre><code>@RestController\n@RequestMappting(/api/v1)\n@PreAuthorize(&quot;@authorizationService.canDoThat()&quot;) // Some logic to compare request to backend DB. Test does not hit this method\nclass SomeController() {\n   ...\n   ...\n\n   @PutMapping(/update)\n   fun update(@RequestBody request) {\n     // Some logic to update something (test doesn't hit this part)\n   }\n}\n</code></pre>\n<p><strong>Test</strong></p>\n<pre><code>@Test\nfun `update`() {\n   val url = &quot;http://localhost:${port}${basePath}/update&quot;\n\n   val headers = HttpHeaders()\n   val body = HttpEntity(\n      UpdateRequest(\n         // The request object\n      ), headers\n   )\n\n   val response = restTemplate.exchange(\n        url,\n        HttpMethod.PUT,\n        body,\n        typeReference&lt;SomeResponseType&gt;()\n    )\n}\n</code></pre>\n<p><strong>Test using WithMockUser</strong></p>\n<pre><code>@Test\n@WithMockUser(username = &quot;username&quot;, password = &quot;password&quot;, authorities = [&quot;SCOPE_write&quot;])\nfun `update`() {\n   val url = &quot;http://localhost:${port}${basePath}/update&quot;\n\n   val headers = HttpHeaders()\n   val body = HttpEntity(\n      UpdateRequest(\n         // The request object\n      ), headers\n   )\n\n   val response = restTemplate.exchange(\n        url,\n        HttpMethod.PUT,\n        body,\n        typeReference&lt;SomeResponseType&gt;()\n    )\n}\n</code></pre>\n<p><strong>Test manually setting context</strong></p>\n<pre><code>@Test\nfun `update`() {\n   val url = &quot;http://localhost:${port}${basePath}/update&quot;\n\n   val jwt = Jwt(\n         &quot;token-value&quot;,\n         Instant.now(),\n         Instant.now().plusSeconds(60),\n         mapOf(&quot;Authorization&quot; to &quot;Bearer token-value&quot;),\n         mapOf(&quot;someClaim&quot; to someClaimValue)\n   )\n   val authorities = setOf(GrantedAuthority { &quot;SCOPE_write&quot; })\n   val oauthAuthentication = JwtAuthenticationToken(jwt, authorities)\n\n   // Set security context\n   val context: SecurityContext = SecurityContextHolder.createEmptyContext()\n   context.authentication = oauthAuthentication\n   SecurityContextHolder.setContext(context)\n\n   val headers = HttpHeaders()\n   val body = HttpEntity(\n      UpdateRequest(\n         // The request object\n      ), headers\n   )\n\n   val response = restTemplate.exchange(\n        url,\n        HttpMethod.PUT,\n        body,\n        typeReference&lt;SomeResponseType&gt;()\n    )\n}\n</code></pre>\n"},{"comments":[{"comment_id":23250338,"body":"I need a clarification on the example... If for both threads the assignment is before the read, there is at least one value changed before they reach the reading. How can both threads see 0?"},{"comment_id":99187409,"body":"seriously, what does left number mean?"}],"answers":[{"comments":[{"comment_id":15978299,"body":"Thanks a lot about your answer. May I consider that all my two understanding are correct? And still two questions: what does &quot;w.v = r.v&quot; mean? what does left number mean? Thanks again."},{"comment_id":15988060,"body":"According to my understanding, I find that if a program is correctly synchronized then it still allows data race existed in program. So what is your opinion about this opinion?"},{"comment_id":16015802,"body":"I have start a new question: Does a correctly synchronized program still allow data race?(Part I) to continue this discussion. You are welcome to join new question."},{"comment_id":16025242,"body":"synchronized ensures all memory at the entry and exit of a the block occurs in a predictable order, even things you didn&#167;t access in the block. synchronized components allow different race conditions e.g. a Vector or Collections.syncrhonizedList accessed multiple times can have race condition between a read and a write to that collection."}],"answer_id":11970581,"body":"<p>Each thread can be on a different core with its own private registers which Java can use to hold values of variables, unless you force access to coherent shared memory.  This means that one thread can write to a value storing in a register, and this value is not visible to another thread for some time, like the duration of a loop or whole function. (milli-seconds is not uncommon)</p>\n\n<p>A more extreme example is that the reading thread's code is optimised with the assumption that since it never changes the value, it doesn't need to read it from memory.  In this case the optimised code never sees the change performed by another thread.</p>\n\n<p>In both cases, the use of <code>volatile</code> ensures that reads and write occur in a consistent order and both threads see the same value.  This is sometimes described as always reading from main memory, though it doesn't have to be the case because the caches can talk to each other directly. (So the performance hit is much smaller than you might expect).</p>\n\n<p>On normal CPUs, caches are \"coherent\" (can't hold stale / conflicting values) and transparent, not managed manually. Making data visible between threads just means doing an actual load or store instruction in asm to access memory (through the data caches), and optionally waiting for the store buffer to drain to give ordering wrt. other later operations.</p>\n"},{"comments":[{"comment_id":15978350,"body":"Thanks a lot about your answer. May I consider that all my two understanding are correct? And still two questions: what does &quot;w.v = r.v&quot; mean? what does left number mean? Thanks again."},{"comment_id":15979363,"body":"@newman:<code>r.v</code> means: <code>read of a variable v</code> and and <code>w.v</code> means: <code>write to variable v</code>.It is explained in the same paragraph: <code>We say that a read r of a variable v is allowed to observe a write w to v if, in the happens-before partial order of the execution trace</code>"},{"comment_id":15980234,"body":"@newman You might be interested in <a href=\"http://cs.oswego.edu/pipermail/concurrency-interest/2012-August/009795.html\" rel=\"nofollow noreferrer\">this discussion</a> which shows how you can use that paragraph to prove a concurrent code correct (i.e. free of data race)."},{"comment_id":15986560,"body":"Thanks a lot for all your reply. I have understood what means w.v and r.v, but what means w.v = r.v, in other words, what does &quot;=&quot; mean? I think it does not mean &quot;equals&quot; because &quot;equals&quot; is &quot;==&quot;. So would you please explain one step more."},{"comment_id":15988174,"body":"@newman It means that the read and the write are about the same variable - it does not say anything about the value of the variable written / seen by w / r."},{"comment_id":15992713,"body":"@newman:Please choose the answer that helped you most and mark it as accepted (if you think that you understood your problem)"},{"comment_id":16014793,"body":"Thanks for your reminder. I have done it. You are welcome to join further discussion."},{"comment_id":16015827,"body":"I have start a new question: Does a correctly synchronized program still allow data race?(Part I) to continue this discussion. You are welcome to join new question."}],"answer_id":11970749,"body":"<p>The Java Memory Model defines a <em>partial ordering</em> of all your actions of your program which is called <em>happens-before</em>.<br>\nTo guarantee that a thread <code>Y</code> is able to see the side-effects of action <code>X</code> (irrelevant if <code>X</code> occurred in different thread or not) a <em>happens-before</em> relationship is defined between <code>X</code> and <code>Y</code>.<br>\nIf such a relationship is not present the JVM may re-order the operations of the program.<br>\nNow, if a variable is shared and accessed by many threads, and written by (at least) one thread if the reads and writes are not ordered by the <em>happens before</em> relationship, then you have a data race.<br>\nIn a correct program there are no data races.<br>\nExample is 2 threads <code>A</code> and <code>B</code> synchronized on lock <code>X</code>.<br>\n<code>Thread A</code> acquires lock (now <code>Thread B</code> is blocked) and does the write operations and then releases lock <code>X</code>. Now <code>Thread B</code> acquires lock <code>X</code> and since all the actions of <code>Thread A</code> were done <em>before releasing</em> the lock <code>X</code>, they are <em>ordered before</em> the actions of <code>Thread B</code> which acquired the lock <code>X</code> <em>after</em> thread <code>A</code> (and also visible to <code>Thread B</code>).<br>\nNote that this occurs on actions synchronized <em>on the same lock</em>. There is <em>no</em> happens before relationship among threads synchronized <em>on different locks</em></p>\n"},{"comments":[{"comment_id":15978337,"body":"Thanks a lot about your answer. May I consider that all my two understanding are correct? And still two questions: what does &quot;w.v = r.v&quot; mean? what does left number mean? Thanks again."},{"comment_id":15988081,"body":"According to my understanding, I find that if a program is correctly synchronized then it still allows data race existed in program. So what is your opinion about this opinion?"},{"comment_id":15988443,"body":"@newman I am not sure =&gt; I prefer to keep it simple and avoid data races."},{"comment_id":15989600,"body":"Thanks a lot. I will continue this topic tomorrow. See you next day."},{"comment_id":16014357,"body":"There are two conclusions from JLS: C1:If a program has no data races, then all executions of the program will appear to be sequentially consistent. C2:If a program is correctly synchronized, then all executions of the program will appear to be sequentially consistent. If another direction of C1 is true,then we get following conclusion: C3:If a program is correctly synchronized,then this problem has no data race. But unfortunately,there is not such a direction in JLS, so I get the that conclusion:"},{"comment_id":16014369,"body":"if a program is correctly synchronized then it still allows data race existed in program. But I think this is not enough, I want get same conclusion in other solid ways, or proof of false of this conclusion,even in informal way. First of all, I think a code sample that shows a sequential consistent execution of a multiple-threaded program in which it contains data race is helpful to understand and resolve this question. After serious consideration, I still can not find a proper sample. So would you please give me a code sample."},{"comment_id":16014535,"body":"To be honest that is becoming very theoretical and I m not the best person to answer those questions."},{"comment_id":16015818,"body":"I have start a new question: Does a correctly synchronized program still allow data race?(Part I) to continue this discussion. You are welcome to join new question."},{"comment_id":114944214,"body":"I feel a bit strange resurrecting this, but you say <code>...that a read that comes after a write in your program order...</code>, while <code>happens before consistency</code> has nothing to do with program order. It is the rule that says that a <i>read</i> observes either the <i>write</i> in <code>happens-before</code> or <i>any other read</i> (racy). This rule defines the connection between <code>synchronizes-with</code> order, that builds the <code>happens-before order</code> among multiple threads."}],"answer_id":11971262,"body":"<p>In substance that is correct. The main thing to take out of this is: unless you use some form of synchronization, there is no guarantee that a read that comes after a write in your program order sees the effect of that write, as the statements might have been reodered.</p>\n\n<blockquote>\n  <p>does it exist this situation (reads see writes that occur later) in real world? If it does, could you give me a real example?</p>\n</blockquote>\n\n<p>From a wall clock's perspective, obviously, a read can't see the effect of a write that has not happened yet.</p>\n\n<p>From a program order's perspective, because statements can be reordered if there isn't a proper synchronization (happens before relationship), a read that comes before a write in your program, could see the effect of that write during execution because it has been executed after the write by the JVM.</p>\n"},{"comments":[{"comment_id":107293730,"body":"On the topic of ordering, it&#39;s not just the compiler that changes ordering or perceived ordering (instructions may execute in order but their effect on memory may not be seen in the same order by other cores/cpus). CPUs&#39; pipelining architectures can and do also change the ordering of instructions that do not depend on each other&#39;s output."},{"comment_id":125325929,"body":"@yoAlex5 I understand your comment. But follow code why is not infinite loop. public class HB {     public static Boolean flag = true;     public static void main(String[] args) throws InterruptedException {         Thread t = new Thread(() -&gt; {             while (flag) {                 System.out.println( &quot;do=====&gt;&quot;);             }             System.out.println(Thread.currentThread().getName() + &quot; &quot; + &quot;end&quot;);         }, &quot;server&quot;);         t.start();                  Thread.sleep(1000);         System.out.println(&quot;parent&quot;);         flag = false;     } }"}],"answer_id":59491099,"body":"<p><strong>happens-before</strong></p>\n<p>Let's take a look at definitions in <strong>concurrency</strong> theory:</p>\n<p><strong>Atomicity</strong> - is a property of operation that can be executed completely as a single transaction and can not be executed partially. For example <code>Atomic operations</code><a href=\"https://stackoverflow.com/a/65382071/4770877\"><sup>[Example]</sup></a></p>\n<p><strong>Visibility</strong> - if one thread made changes they are visible for other threads. <code>volatile</code> before Java 5 with <code>happens-before</code></p>\n<p><strong>Ordering</strong> - compiler is able to change an ordering of operations/instructions of source code to make some optimisations.</p>\n<p>For example <code>happens-before</code> which is a kind of <code>memory barrier</code> which helps to solve <code>Visibility</code> and <code>Ordering</code> issue. Good examples of happens-before are <code>volatile</code><a href=\"https://stackoverflow.com/a/59498520/4770877\"><sup>[About]</sup></a>, <code>synchronized</code> monitor<a href=\"https://stackoverflow.com/a/59500618/4770877\"><sup>[About]</sup></a></p>\n<p>A good example of <code>atomicity</code> is <code>Compare and swap</code>(<code>CAS</code>) realization of <code>check then act</code>(<code>CTA</code>) pattern which should be atomic and allows to change a variable in multithreading envirompment. You can write your own implementation if <code>CTA</code>:</p>\n<ul>\n<li><code>volatile + synchronized</code></li>\n<li><code>java.util.concurrent.atomic</code> with <code>sun.misc.Unsafe</code>(memory allocation, instantiating without constructor call...) from <code>Java 5</code> which uses <code>JNI</code> and CPU advantages.</li>\n</ul>\n<p><code>CAS</code> algoritm has thee parameters(A(address), O(old value), N(new value)).</p>\n<pre><code>If value by A(address) == O(old value) then put N(new value) into A(address), \nelse O(old value) = value from A(address) and repeat this actions again\n</code></pre>\n<h2>Happens-before</h2>\n<p><a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5\" rel=\"nofollow noreferrer\">Official doc</a></p>\n<blockquote>\n<p>Two actions can be <strong>ordered</strong> by a happens-before relationship. If one action happens-before another, then the first is <strong>visible</strong> to and <strong>ordered</strong> before the second.</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/ymS7O.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ymS7O.png\" alt=\"enter image description here\" /></a></p>\n<h2>volatile<a href=\"https://stackoverflow.com/a/59498520/4770877\"><sup>[About]</sup></a> as an example</h2>\n<blockquote>\n<p>A <strong>write</strong> to a <strong>volatile</strong> field <strong>happens-before</strong> every subsequent <strong>read</strong> of that field.</p>\n</blockquote>\n<p>Let's take a look at the example:</p>\n<pre><code>// Definitions\nint a = 1;\nint b = 2;\nvolatile boolean myVolatile = false;\n\n// Thread A. Program order\n{\n    a = 5;\n    b = 6;\n    myVolatile = true; // &lt;-- write\n}\n\n//Thread B. Program order\n{\n    //Thread.sleep(1000); //just to show that writing into `myVolatile`(Thread A) was executed before\n\n    System.out.println(myVolatile); // &lt;-- read\n    System.out.println(a);  //prints 5, not 1\n    System.out.println(b);  //prints 6, not 2\n}\n</code></pre>\n<p><strong>Visibility</strong> - When <code>Thread A</code> <strong>changes/writes</strong> a <strong>volatile</strong> variable it also pushes all previous changes into <strong>RAM - Main Memory</strong> as a result all <strong>not volatile</strong> variable will be up to date and visible for another threads</p>\n<p><strong>Ordering</strong>:</p>\n<ul>\n<li><p>All operations <strong>before writing into volatile variable in <code>Thread A</code></strong> will be called before. JVM is able to reorder them but guarantees that no one operation <strong>before writing into volatile variable in <code>Thread A</code></strong> will be called after it.</p>\n</li>\n<li><p>All operations <strong>after reading the volatile variable in <code>Thread B</code></strong> will be called after. JVM is able to reorder them but guarantees that no one operation <strong>after reading a volatile variable in <code>Thread B</code></strong> will be called before it.</p>\n</li>\n</ul>\n<p><a href=\"https://stackoverflow.com/a/63744581/4770877\">[Concurrency vs Parallelism]</a></p>\n"},{"answer_id":67050182,"body":"<p>Q1: is my understanding right?</p>\n<p>A: Yes</p>\n<p>Q2: what does &quot;w.v = r.v&quot; mean?</p>\n<p>A: The value of w.v is same as that of r.v</p>\n<p>Q3: What does left number mean?</p>\n<p>A: I think it is statement ID like shown in &quot;Table 17.4-A. Surprising results caused by statement reordering - original code&quot;. But you can ignore it because it does not apply to the conent of &quot;Another execution order that is happens-before consistent is: &quot; So the left number is shit completely. Do not stick to it.</p>\n<p>Q4: In my understanding, the reason of both r2 and r1 can see initial write of 0 is both A and B are not volatile field. So my fourth quesiton is: whether my understanding is right?</p>\n<p>A: That is one reason. re-order can also make it. &quot;A program must be correctly synchronized to avoid the kinds of counterintuitive behaviors that can be observed when code is reordered.&quot;</p>\n<p>Q5&amp;6: In second execution order ... So my fifth and sixth questions are: does it exist this situation (reads see writes that occur later) in real world? If it does, could you give me a real example?</p>\n<p>A: Yes. no synchronization in code, each thread read can see either the write of the initial value or the write by the other thread.</p>\n<p>time 1: Thread 2: A=2</p>\n<p>time 2: Thread 1: B=1 // Without synchronization, B=1 of Thread 1 can be interleaved here</p>\n<p>time 3: Thread 2: r1=B // r1 value is 1</p>\n<p>time 4: Thread 1: r2=A // r2 value is 2</p>\n<p>Note &quot;An execution is happens-before consistent if its set of actions is happens-before consistent&quot;</p>\n"}],"last_activity_date":1684787354,"question_id":11970428,"body":"<p>In <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5\" rel=\"noreferrer\">chapter 17 of JLS</a>, it introduce a concept: happens-before consistent.</p>\n\n<blockquote>\n  <p>A set of actions A is happens-before consistent if for all reads r in A, where W(r) is the write action seen by r, it is not the case that either hb(r, W(r)) or that there exists a write w in A such that w.v = r.v and hb(W(r), w) and hb(w, r)\"</p>\n</blockquote>\n\n<p>In my understanding, it equals to following words:\n..., it is the case that neither ... nor ...</p>\n\n<p>So my first two questions are:</p>\n\n<ul>\n<li>is my understanding right?</li>\n<li>what does \"w.v = r.v\" mean?</li>\n</ul>\n\n<p>It also gives an Example: 17.4.5-1</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Thread 1 Thread 2\n\nB = 1; A = 2; \n\nr2 = A; r1 = B; \n</code></pre>\n\n<p>In first execution order:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1: B = 1;\n\n3: A = 2;\n\n2: r2 = A;  // sees initial write of 0\n\n4: r1 = B;  // sees initial write of 0\n</code></pre>\n\n<p>The order itself has already told us that two threads are executed alternately, so my third question is: what does left number mean?</p>\n\n<p>In my understanding, the reason of both r2 and r1 can see initial write of 0 is both A and B are not volatile field. So my fourth quesiton is: whether my understanding is right?</p>\n\n<p>In second execution order:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1: r2 = A;  // sees write of A = 2\n\n3: r1 = B;  // sees write of B = 1\n\n2: B = 1;\n\n4: A = 2;\n</code></pre>\n\n<p>According to definition of happens-before consistency, it is not difficult to understand this execution order is happens-before consistent(if my first understanding is correct).\nSo my fifth and sixth questions are: does it exist this situation (reads see writes that occur later) in real world? If it does, could you give me a real example?</p>\n"},{"comments":[{"comment_id":134565097,"body":"Please provide an example of such a company name, so we can help."},{"comment_id":134565139,"body":"What did you try? Show us your code."},{"comment_id":134565197,"body":"<code>new StringBuilder(new StringBuilder(name).reverse().toString().replaceAll(&quot; .*&quot;, &quot;&quot;)).reverse().toString()</code> :)"},{"comment_id":134567145,"body":"An example of the string is like:  Western Asset Municipal High Income Fund Inc MHF.  The last part of the string MHF is the ticker. Please note that the ticker can be any length between 3 and 5 char normally. I&#39;m doing this for every record I load."}],"answers":[{"comments":[{"comment_id":134567473,"body":"Thank you all for your kind responses. I think I have what I was looking for now."}],"answer_id":76309654,"body":"<p>use <a href=\"https://www.w3schools.com/java/ref_string_lastindexof.asp\" rel=\"nofollow noreferrer\">lastIndexOf</a> to get the index of the last space, and take substring from that.</p>\n<pre><code>class HelloWorld {\n    public static void main(String[] args) {\n       String test = &quot;ABC XYZ Foo Barrr AXFB&quot;;\n       System.out.println(test.substring(test.lastIndexOf(&quot; &quot;)+1));\n    }\n}\n</code></pre>\n"}],"last_activity_date":1684787111,"question_id":76309591,"body":"<p>I have a string(name of company) containing a ticker symbol at the end, and I need to extract the ticker. For instance, company ABC XYZ Foo Barrr AXFB, where AXFB is the ticker. I only need the ticker.\nHow do I extract the ticker and discard the rest using java? the length of the string can be anything and the number of spaces in the string can be any.</p>\n<p>I did try to use regex and also java. I was expecting only the ticker.</p>\n"},{"comments":[{"comment_id":134560085,"body":"&quot;errors appeared&quot;. Um, yes."},{"comment_id":134560942,"body":"What errors appeared?  And ... how come you need to download some random (archived) project from github to complete your assignment?"},{"comment_id":134563384,"body":"<a href=\"https://docs.google.com/document/d/1PAoBMxiXy77cMjkulIplKhuw0YXxsO48LMv94oW-jHw/edit\" rel=\"nofollow noreferrer\">docs.google.com/document/d/&hellip;</a>"},{"comment_id":134563835,"body":"I expected to see them, but such a huge number is frightening"},{"comment_id":134565045,"body":"Please <a href=\"https://stackoverflow.com/posts/76306558/edit\">edit</a> the question in order to add new information."},{"comment_id":134565194,"body":"what exactly should I add to the question?"},{"comment_id":134566044,"body":"A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be helpful, without external links. Links can break, or linked content can change, making the question useless for others with similar problems. See also <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}],"last_activity_date":1684786966,"question_id":76306558,"body":"<p>I downloaded the project from the git hub to java, he has a gradle build version 6.3, and it needs to be run with the sdk version 14, but for my assignment at the university I need to run the project on version 17, how to raise the gradle version to 7.3 and not break the project\n<a href=\"https://github.com/slamach/prog-labs/tree/master/prog-lab6\" rel=\"nofollow noreferrer\">https://github.com/slamach/prog-labs/tree/master/prog-lab6</a> - link to the git from which I downloaded the project</p>\n<p>I tried to change the version in gradle wrapper, but errors appeared during assembly, apparently the problem is in the dependencies, but I do not know what to do with them\n<a href=\"https://docs.google.com/document/d/1PAoBMxiXy77cMjkulIplKhuw0YXxsO48LMv94oW-jHw/edit\" rel=\"nofollow noreferrer\">https://docs.google.com/document/d/1PAoBMxiXy77cMjkulIplKhuw0YXxsO48LMv94oW-jHw/edit</a> - file with exception</p>\n"},{"comments":[{"comment_id":134564920,"body":"You can change the compileSdkVersion on build.gradle file"}],"answers":[{"comments":[{"comment_id":134564971,"body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76309422/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"answer_id":76309422,"body":"<p>You can go to file -&gt; project structure -&gt; you click your modules and change the &quot;Compile Sdk Version&quot; property to be 33.</p>\n"}],"last_activity_date":1684786663,"question_id":76309378,"body":"<p>Currently while executing the program it shows &quot;current API level is 32 please update the API level to 33&quot;. How should I resolve this???</p>\n<p><a href=\"https://i.stack.imgur.com/k6fa2.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nI tried executing my code in android studio, but it says to update the API level. How to fix it?</p>\n"},{"comments":[{"comment_id":134562457,"body":"probably you must pass an array of <code>java&#47;lang&#47;String</code> instances... but I am a Java developer with very limited Rust knowledge"},{"comment_id":134563474,"body":"&quot;it doesn&#39;t work&quot; is about the least useful description of an error ever, can you be more specific, best would be a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of exactly what didn&#39;t work."},{"comment_id":134563506,"body":"In your &#39;string array&#39; you have &#39;proper&#39; quotes (<code>“</code> and <code>”</code>) instead of plain <code>&quot;</code> the former while technically correct for text quotation usually doesn&#39;t work to delimit stirngs in programming languages."}],"answers":[{"answer_id":76309571,"body":"<p>Finally. I solved the problem by spending a lot of time studying the documentation. Since I could not find information on the web (that's why I created the question), I'll leave the solution here.\nTo pass arguments to a method call, you need to do something like this:</p>\n<pre class=\"lang-rust prettyprint-override\"><code>// create Java array of objects (in our case, type string)\n// 1 - one element of array\n// stringClass - Java string class signature (&quot;java/lang/String&quot;)\n// env.new_string(&quot;&quot;) - initial element of array\nlet arguments: JObjectArray = env.new_object_array(1, stringClass, env.new_string(&quot;&quot;).unwrap()).unwrap();\n\n// Set element at index 0\n// &amp;arguments - reference to our Java objects array\n// 0 - element index (place at)\n// env.new_string(&quot;--username&quot;) - the value we set at 0 index (create new java string)\nenv.set_object_array_element(&amp;arguments, 0, env.new_string(&quot;--username&quot;).unwrap()).unwrap();\n\n// JValue - This type is used for parameters passed to Java method calls.\n// A reference JValueGen\n// docs:  \n// https://docs.rs/jni/latest/jni/objects/enum.JValueGen.html#\n// https://docs.rs/jni/latest/jni/objects/type.JValue.html\n//\n// &amp;JObject::from(arguments) - create Java object instance from our arguments object array\n// \nenv.call_static_method(class,main_method_name, main_signature, &amp;[JValue::Object(&amp;JObject::from(arguments))])\n</code></pre>\n"}],"last_activity_date":1684786272,"question_id":76307885,"body":"<p>This is my first project using jni.</p>\n<p>I am trying to invoke a Java method from Rust.</p>\n<p>Java method signature looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {...}\n</code></pre>\n<p>On the Rust side, I create a JavaVM, find the class and try to call static method, but I don't know how to pass the arguments</p>\n<pre class=\"lang-rust prettyprint-override\"><code>env.call_static_method(class, &quot;main&quot;, &quot;([Ljava/lang/String;)V&quot;, HowPassArgumentsThere?)\n.expect(&quot;Failed to invoke main method&quot;);\n</code></pre>\n<p>Arguments are an array of strings as I understand it. And I have to put something like this:</p>\n<pre><code>[\n“—username”, “Test”,\n“—version”, “1.7.10”,\n“—uuid”, “4f19c3577b774731bcc663e536ebd108”, \n“—accessToken”, “12412412412”,\n“—userProperties”, “{}”\n]\n</code></pre>\n<p>Full code available there: <a href=\"https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=03c197068218a00b3e0a2d8f170dda16\" rel=\"nofollow noreferrer\">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=03c197068218a00b3e0a2d8f170dda16</a></p>\n<p>i tried to create an object array according to how it's done in cpp</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>jobjectArray str_array = Env-&gt;NewObjectArray(Env, 4, Env-&gt;FindClass(Env, 'java/lang/String'), Env-&gt;NewString(Env, NULL, 0));\nArguments[0] = '--username';\nArguments[1] = 'Player';\nArguments[2] = '--accessToken';\nArguments[3] = '12345';\nEnv-&gt;SetObjectArrayElement(Env, JavaObjectArray, 0, Env-&gt;NewString(Env, &amp;Arguments[0]), strlen(Arguments[0]));\nEnv-&gt;SetObjectArrayElement(Env, JavaObjectArray, 1, Env-&gt;NewString(Env, &amp;Arguments[1]), strlen(Arguments[1]));\nEnv-&gt;SetObjectArrayElement(Env, JavaObjectArray, 2, Env-&gt;NewString(Env, &amp;Arguments[2]), strlen(Arguments[2]));\nEnv-&gt;SetObjectArrayElement(Env, JavaObjectArray, 3, Env-&gt;NewString(Env, &amp;Arguments[3]), strlen(Arguments[3]));\n\nenv-&gt;CallStaticVoidMethod(class_Launch, env-&gt;GetStaticMethodID(class_Launch, &quot;main&quot;, &quot;([Ljava/lang/String;)V&quot;), str_array);\njvm-&gt;DestroyJavaVM();\n</code></pre>\n<p>But in Rust it doesn't work. Any ideas?</p>\n"},{"comments":[{"comment_id":23127720,"body":"Also this is how I do the makePersistentAll (after the saxParser.parse line ... pm.makePersistentAll(layouts);"}],"answers":[{"comments":[{"comment_id":23167649,"body":"This is what goes in the jdoconfig.xml&lt;property name=&quot;datanucleus.appengine.datastoreEnableXGTransactions&quot; value=&quot;true&quot;/&gt;"}],"answer_id":16200980,"body":"<p>I resolved this issue by</p>\n<ol>\n<li>removing the jdo 1.5 libs which were being cached in my application libraries (I had switched to v2, but they were still there.\nThe way I removed them was to start a new project and copy my code over.</li>\n</ol>\n<p>This revealed some issues locally, e.g. now an exception was thrown in my localhost which instructed me to enable xg transactions...</p>\n<ol start=\"2\">\n<li>adding the following to the jdoconfig.xml ...</li>\n</ol>\n\n<ol start=\"3\">\n<li>I am using transactions.</li>\n</ol>\n<p>I don't entirely understand the solution, because the transaction is simply persisting a collection of objects of type Layout. I'm happy it works.</p>\n<p>Now the data is being persisted on the production (remote) copy as well as my localhost, according to the namespaces.</p>\n"}],"last_activity_date":1684785856,"question_id":16178359,"body":"<p>I wrote a web application with servlets and using the datastore and namespace apis.</p>\n\n<p>This works great on my localhost, but never stores data on the deployed copy.</p>\n\n<p>I followed the multi-tenancy with java documentation, along with another reference so that I could read xml and store it in the BigTable.</p>\n\n<p>Make the class persistable:</p>\n\n<pre><code>`@PersistenceCapable(identityType = IdentityType.APPLICATION)\npublic class Layout {\n\n    @PrimaryKey\n    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)\n    private Key key;\n\n    private String id;'\n</code></pre>\n\n<p>Store the data:</p>\n\n<pre><code>`customerKey = KeyFactory.createKey(Layout.class.getSimpleName(), layout.getId());\n            layout.setKey(customerKey);`\n</code></pre>\n\n<p>Now make it persistent ...</p>\n\n<pre><code>`pm = XMLImportPersistenceManagerFactory.get().getPersistenceManager();\n            SAXParser saxParser = factory.newSAXParser();\n            saxParser.parse(new InputSource(_URL_STRINGS), this);`\n</code></pre>\n\n<p>Then close it ...</p>\n\n<pre><code>pm.close()\n</code></pre>\n\n<p>The code works beautifully in my localhost. It does not work that I can see on appengine. The servlet runs, but no data is ever stored.</p>\n\n<p>If you hit the url, it will say Layouts Created, and I will see a 200 in the logs, but no data. That tells me the servlet is running.\nHere is my app: <a href=\"http://layoutimporter.appspot.com/CreateLayout?namespace=boston\" rel=\"nofollow\">http://layoutimporter.appspot.com/CreateLayout?namespace=boston</a></p>\n\n<p>Some closing details. I wrote a Namespace filter to set the namespace based on the parameter in the querystring.  </p>\n\n<p>I am running a warmup servlet to intialize the PersistenceManagerFactory to avoid loading requests = 1.</p>\n\n<p>Any ideas on this one. I have exhausted my resources and am spooling among all the same threads that are related to \"oops, I can't find your kinds ...\" etc.</p>\n\n<p>I tried deleting the deployed copy and starting a new deployed copy. I tried reversioning the deployed copy. No joy. I can out.print the namespaces and data after persisting it when I do so on the local copy, but not ever on the remote copy.  This is a real stumper!</p>\n\n<p>Thanks!</p>\n\n<p>..\\Wendy</p>\n"},{"answers":[{"answer_id":76309514,"body":"<p>The <code>classpath:keystore.p12</code> syntax will work with applications that have been AOT processed and compiled to a native executable. You do, however, need to make sure that the certificate files are included in the native executable.</p>\n<p>This happens by default for types of resources that Spring Boot knows about such as static web content, web templates, database schema and data files, database migration scripts, and others.</p>\n<p>Spring Boot doesn't automatically know where your certificates are or that they will be required at runtime. To enable this, you'll need to register these files with the AOT engine as <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#native-image.advanced.custom-hints\" rel=\"nofollow noreferrer\">described in the documentation</a>.</p>\n<p>In your case, that might look like this:</p>\n<pre><code>@ImportRuntimeHints(CertificateRuntimeHints.CertificateResourcesRegistrar.class)\n@Configuration\npublic class CertificateRuntimeHints {\n\n    static class CertificateResourcesRegistrar implements RuntimeHintsRegistrar {\n\n        @Override\n        public void registerHints(RuntimeHints hints, ClassLoader classLoader) {\n            hints.resources().registerPattern(&quot;*.p12&quot;);\n        }\n    }\n\n}\n</code></pre>\n"}],"last_activity_date":1684785547,"question_id":76287163,"body":"<p>I'm using <em>Spring Boot 3.1.0</em> and <em>Spring Framework 6.0.9</em>. A keystore file is specified for JVM as follows for a JVM deployment so that the file is placed in src\\main\\resources\\application.properties:</p>\n<pre><code>server.ssl.bundle: microservice\nspring.ssl.bundle.jks.microservice.keystore.location: classpath:keystore.p12\n</code></pre>\n<p>But how do I specify the location for Spring Aot Processing when I don't have a classpath? Do I have to edit application.properties? Or can I use an argument when invoking the .exe file to override the property from application.properties?</p>\n"},{"answers":[{"answer_id":74948412,"body":"<p>As it turns out, Springboot has a configuration that allows you to expose the actuator endpoints on a different port. Using Spring boot version <code>2.7.X</code> I was able to do the following:</p>\n<pre><code>management.endpoints.web.exposure.include=health,prometheus\nmanagement.server.port=9090\n</code></pre>\n<p>Changing this port does not affect the normal server port that http requests are served from.</p>\n"}],"last_activity_date":1684785217,"question_id":74757650,"body":"<p>I’m wondering what the best practice is for only exposing certain APIs on a SpringBoot service. For context I have a service that will be sitting behind a TCP load balancer which has some apis that will be called from a web page. However, I’d like to limit which APIs are exposed, like a metrics scraping endpoint for Prometheus and some other actuator type endpoints.</p>\n<p>I was thinking of standing up an NGINX instance on each service host and proxying requests to the instance on the same host. In that way, I think I could limit which APIs are available publicly. But I’d like to know what other options are recommended or available.</p>\n"},{"last_activity_date":1684785203,"question_id":74926415,"body":"<p>I want to know the JVM CPU usage rate.\nSo we used the Java actuator's process.cpu.usage.</p>\n<p>However, this value was different from the CPU utilization of the container.\nSo I wonder if &quot;process.cpu.usage&quot; is the usage rate.</p>\n<p>And if it is, what is the limit value based on when calculating the utilization rate?</p>\n<p>I can't find the official document or source code related to it.</p>\n"},{"answers":[{"comments":[{"comment_id":134568087,"body":"How do I refresh the grid? I tried calling the adapter.notifyDataSetChanged() but that didnt work."}],"answer_id":76309468,"body":"<p>Try calling adapter.notifyDataSetChanged(); after refreshing the Grid! It</p>\n"}],"last_activity_date":1684785135,"question_id":76308657,"body":"<p>I am receiving data from an API call. I am able to send that data to my GridView in MainActivity.java and update the gridview once after I have received the first version of the data but when I click on the grid, the data changes and I need the gridview to refresh and show the updated data, which is not happening. I am calling the same callback again, which I am doing at the start which gives me the first version of the data.</p>\n<p>My APIManager.java class :</p>\n<pre><code>public class APIManager {\n\n    DeviceCallback deviceCallback;\n    private static final String TAG = &quot;APIManager&quot;;\n    private static final String API_URL = &quot;https://base-url&quot;\n    private static final String AUTH_TOKEN = SplashScreen.getTOKEN();\n    private static List&lt;Device&gt; deviceArray = null;\n    public void setDeviceCallback(DeviceCallback deviceCallback) {\n        this.deviceCallback = deviceCallback;\n    }\n\n    void toggleDeviceState(Context context, String deviceID) {\n        String URL = &quot;https://baseurl/&quot; + deviceID;\n        RequestQueue requestQueue = Volley.newRequestQueue(context);\n        JsonObjectRequest jsonObjectRequest = new JsonObjectRequest(Request.Method.POST, URL, null,\n                new Response.Listener&lt;JSONObject&gt;() {\n                    @Override\n                    public void onResponse(JSONObject response) {\n                        // Process the JSON response\n                        try {\n\n                            parseToggleStateResponse(response);\n\n                        } catch (JSONException e) {\n                            Log.e(TAG, &quot;JSON parsing error: &quot; + e.getMessage());\n                        }\n                    }\n                },\n                new Response.ErrorListener() {\n                    @Override\n                    public void onErrorResponse(VolleyError error) {\n                        // Handle API call error\n                        Log.e(TAG, &quot;API error: &quot; + error.getMessage());\n                    }\n                }) {\n            @Override\n            public Map&lt;String, String&gt; getHeaders() throws AuthFailureError {\n                Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();\n                headers.put(&quot;Authorization&quot;, &quot;jwt &quot; + AUTH_TOKEN);\n                return headers;\n            }\n        };\n\n        requestQueue.add(jsonObjectRequest);\n\n    }\n\n    void fetchInitialData(Context context) {\n        RequestQueue requestQueue = Volley.newRequestQueue(context);\n        JsonObjectRequest jsonObjectRequest = new JsonObjectRequest(Request.Method.GET, API_URL, null,\n                new Response.Listener&lt;JSONObject&gt;() {\n                    @Override\n                    public void onResponse(JSONObject response) {\n                        // Process the JSON response\n                        try {\n//\n                            parseResponseData(response);\n                            JSONArray ownDevices = response.getJSONArray(&quot;owndevices&quot;);\n\n\n                        } catch (JSONException e) {\n                            Log.e(TAG, &quot;JSON parsing error: &quot; + e.getMessage());\n                        }\n                    }\n                },\n                new Response.ErrorListener() {\n                    @Override\n                    public void onErrorResponse(VolleyError error) {\n                        // Handle API call error\n                        Log.e(TAG, &quot;API error: &quot; + error.getMessage());\n                    }\n                }) {\n            @Override\n            public Map&lt;String, String&gt; getHeaders() throws AuthFailureError {\n                Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();\n                headers.put(&quot;Authorization&quot;, &quot;Jwt &quot; + AUTH_TOKEN);\n                return headers;\n            }\n        };\n\n        requestQueue.add(jsonObjectRequest);\n    }\n\n    ToggleResponse parseToggleStateResponse(JSONObject response) throws JSONException {\n\n\n        Gson gson = new Gson();\n\n        JSONObject device = response.getJSONObject(&quot;data&quot;);\n\n\n        Device deviceData = gson.fromJson(device.toString(), Device.class);\n        Log.w(&quot;API-MANAGER&quot;, &quot;125 : Response = &quot; + deviceData.getId());\n        for (int i = 0; i &lt; deviceArray.toArray().length; i++)\n        {\n            String deviceID = deviceArray.get(i).getId();\n\n            if (deviceID == deviceData.getId()) {\n                Log.w(&quot;API-MANAGER&quot;, &quot;DEVICE FOUND : &quot; + deviceArray.get(i).getGivenName());\n                deviceArray.get(i).setState(deviceData.isState());\n                deviceCallback.deviceCallbackFunction(deviceArray);\n            }\n        }\n\n        ToggleResponse responseData = new ToggleResponse(deviceData, message);\n\n\n        return responseData;\n    }\n\n\n\n    DeviceResponse parseResponseData(JSONObject response) throws JSONException {\n\n\n        Gson gson = new Gson();\n\n        JSONArray ownDevicesArray = response.getJSONArray(&quot;owndevices&quot;);\n\n        Device ownDevices[] = gson.fromJson(String.valueOf(ownDevicesArray), Device[].class);\n;\n        DeviceResponse responseData = new DeviceResponse(ownDevices);\n        List&lt;Device&gt; ownDevice = new ArrayList&lt;&gt;();;\n        List&lt;Device&gt; delDevice = new ArrayList&lt;&gt;();\n\n\n        // Parse ownDevices\n        for (int i = 0; i &lt; ownDevicesArray.length(); i++)\n        {\n            JSONObject deviceObject = ownDevicesArray.getJSONObject(i);\n            Device device = new Device();\n            Log.w(&quot;API-MANAGER&quot;, &quot;153&quot; + deviceObject.getString(&quot;_id&quot;));\n            device.set_id(deviceObject.getString(&quot;_id&quot;));\n            device.setName(deviceObject.getString(&quot;name&quot;));\n            device.setGivenName(deviceObject.getString(&quot;givenName&quot;));\n            device.setState(deviceObject.getBoolean(&quot;state&quot;));\n            device.setAdmin(deviceObject.getString(&quot;admin&quot;));\ndevice.setDelegate(getStringListFromJSONArray(deviceObject.getJSONArray(&quot;delegate&quot;)));\n            device.setSchedulerFlag(deviceObject.getBoolean(&quot;schedulerFlag&quot;));\n            device.setTopic(deviceObject.getString(&quot;topic&quot;));\n\n            device.setMultiState(deviceObject.optString(&quot;multiState&quot;));\n\n\n            ownDevice.add(device);\n        }\n        deviceArray = ownDevice;\n\n\n        deviceCallback.deviceCallbackFunction(ownDevice);\n     \n\n        responseData.setOwndevices(ownDevice);\n   \n\n     \n        return responseData;\n    }\n\n    private List&lt;String&gt; getStringListFromJSONArray(JSONArray jsonArray) throws JSONException {\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\n        for (int i = 0; i &lt; jsonArray.length(); i++) {\n            list.add(jsonArray.getString(i));\n        }\n        return list;\n    }\n\n\n\n    public interface DeviceCallback {\n        void deviceCallbackFunction(List&lt;Device&gt; deviceData);\n    }\n}\n</code></pre>\n<p>GridAdaptr.java :</p>\n<pre><code>public class GridAdapter extends BaseAdapter{\n\n    Context context;\n    private final List&lt;Device&gt; deviceData;\n//    private final int [] images;\n    LayoutInflater layoutInflater;\n    APIManager apiManager = new APIManager();\n    public GridAdapter(Context context, List&lt;Device&gt; deviceData) {\n        this.context = context;\n        this.deviceData = deviceData;\n//        this.images = images;\n    }\n\n    @Override\n    public int getCount() {\n        return deviceData.toArray().length;\n    }\n\n    @Override\n    public Object getItem(int position) {\n        return null;\n    }\n\n    @Override\n    public long getItemId(int position) {\n        return 0;\n    }\n\n    @Override\n    public View getView(final int position, View convertView, ViewGroup parent) {\n\n        layoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n\n\n        Holder holder = new Holder();\n        View rowView;\n\n        rowView = layoutInflater.inflate(R.layout.grid_item_layout, null);\n        holder.GivenName = (TextView) rowView.findViewById(R.id.GivenName);\n        holder.image= (ImageView) rowView.findViewById(R.id.image);\n        holder.image.setImageResource(deviceData.get(position).isState()? R.drawable.switch_on : R.drawable.switch_off);\n\n        holder.GivenName.setText(deviceData.get(position).getGivenName());\n\n\n\n\n        rowView.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                apiManager.toggleDeviceState(context.getApplicationContext(), deviceData.get(position).getId());\n\n                Toast.makeText(context, &quot;You Clicked &quot;+deviceData.get(position).getId(), Toast.LENGTH_LONG).show();\n\n                notifyDataSetChanged();\n\n            }\n        });\n\n        return rowView;\n    }\n\n\n\n    public class Holder\n    {\n        TextView Name;\n        TextView GivenName;\n        TextView State;\n        TextView MultiState;\n        TextView ConnectFlag;\n        ImageView image;\n\n    }\n\n}\n</code></pre>\n<p>My MainActivity.java :</p>\n<pre><code>import io.socket.client.Socket;\n\npublic class MainActivity extends AppCompatActivity implements APIManager.DeviceCallback {\n\n\n    public static GridView gridView;\n    private Boolean hasConnection = false;\n    String token = &quot;&quot;;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        SharedPreferences sharedPreferences = getSharedPreferences(&quot;MyPrefs&quot;, Context.MODE_PRIVATE);\n        token = sharedPreferences.getString(&quot;token&quot;, null);\n\n        APIManager apiManager = new APIManager();\n        SocketClass socketClass = new SocketClass();\n        apiManager.setDeviceCallback(this);\n        apiManager.fetchData(getApplicationContext());\n        getSupportActionBar().setTitle(&quot;Home&quot;);\n        getSupportActionBar().setDisplayHomeAsUpEnabled(true);\n        getSupportActionBar().setDisplayShowHomeEnabled(true);\n         gridView = (GridView) findViewById(R.id.gridview);\n\n\n      \n    }\n\n    @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        MenuInflater inflater = getMenuInflater();\n        inflater.inflate(R.menu.main_menu, menu);\n\n        return true;\n    }\n\n    @Override\n    public boolean onOptionsItemSelected(@NonNull MenuItem item) {\n        Log.w(&quot;API-MANAGER&quot;, &quot;Item : &quot; + item.toString());\n        return super.onOptionsItemSelected(item);\n    }\n\n    @Override\n    public void deviceCallbackFunction(List&lt;Device&gt; deviceData) {\n\n\n        GridAdapter gridAdapter = new GridAdapter(this, deviceData);\n        Log.w(&quot;API-MANAGER&quot;, &quot;49&quot; + deviceData.get(0).getGivenName());\n\n        gridView.setAdapter(gridAdapter);\n\n    }\n}\n</code></pre>\n"},{"answers":[{"answer_id":63391706,"body":"<p><a href=\"https://github.com/spring-projects/spring-boot/blob/v2.3.2.RELEASE/spring-boot-project/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/hazelcast/HazelcastHealthIndicator.java\" rel=\"nofollow noreferrer\">HazelcastHealthIndicator</a> is automatically configured as described in <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html\" rel=\"nofollow noreferrer\">Spring Boot Actuator: Production-ready Features</a>. However, from what I see, it only checks if Hazelcast exists and has UUID.</p>\n<p>If you want some more Hazelcast specific readiness health check (like checking <code>hazelcast/health/ready</code> endpoint or <code>hazelcast/health/cluster-safe</code>), then I guess that you need to write a <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html#writing-custom-healthindicators\" rel=\"nofollow noreferrer\">custom Spring Actuator Health Check Indicator</a>.</p>\n"}],"last_activity_date":1684785131,"question_id":63377975,"body":"<p>I am trying implement readiness probe using actuator in springboot. I already have database health check using readiness probe in my helm:</p>\n<pre><code>-  name: management.endpoint.health.group.readiness.include\n   value: 'readinessState,db'\n</code></pre>\n<p>I am guessing that I just need to moditfy value portion to add Hazelcast IMDG, but I am not sure if this is the case. I couldn't find good website that explains how to configure it. How do I achieve this?</p>\n"},{"comments":[{"comment_id":89833890,"body":"This has been hanging around for a bit, you might have moved on.  I&#39;ve only ever changed the path in the config file, so in application.yaml I have: management:   context-path: /actuator You might also consider using switching to actuator 2.x.x, as the default was changed to have the endpoints exposed at /actuator."}],"last_activity_date":1684785107,"question_id":48710894,"body":"<p>We develop a Spring (4.1.1) based web application and I'm trying to integrate Actuator to have some nice info out of it.</p>\n\n<p>Our stack:\nSpring 4.1.1</p>\n\n<p>Its a non Boot application so after reading a lot of questions and articles I put togheter the following code:</p>\n\n<p>pom.xml</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-actuator&lt;/artifactId&gt;\n    &lt;version&gt;1.1.12.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>ActuatorConfig.java</p>\n\n<pre><code>@Configuration\n@Import(EndpointAutoConfiguration.class)\npublic class ActuatorConfig {\n\n\n    @Bean\n    @Autowired\n    public ManagementServerProperties myManagementServerProperties() {\n        ManagementServerProperties manag = new ManagementServerProperties();\n        manag.setContextPath(\"/actuator\");\n\n        return manag;\n    }\n\n    @Bean\n    @Autowired\n    // Define the HandlerMapping similar to RequestHandlerMapping to expose the\n    @DependsOn(\"myManagementServerProperties\")\n    public EndpointHandlerMapping endpointHandlerMapping(Collection&lt;? extends MvcEndpoint&gt; endpoints) {\n        return new EndpointHandlerMapping(endpoints);\n    }\n\n    @Bean\n    @Autowired\n    // define the HealthPoint endpoint\n    @DependsOn(\"myManagementServerProperties\")\n    public HealthMvcEndpoint healthMvcEndpoint(HealthEndpoint delegate) {\n        return new HealthMvcEndpoint(delegate);\n    }\n\n    @Bean\n    @Autowired\n    // define the Info endpoint\n    @DependsOn(\"myManagementServerProperties\")\n    public EndpointMvcAdapter infoMvcEndPoint(InfoEndpoint delegate) {\n        return new EndpointMvcAdapter(delegate);\n    }\n\n    @Bean\n    @Autowired\n    // define the beans endpoint\n    @DependsOn(\"myManagementServerProperties\")\n    public EndpointMvcAdapter beansEndPoint(BeansEndpoint delegate) {\n        return new EndpointMvcAdapter(delegate);\n    }\n\n    @Bean\n    @Autowired\n    // define the mappings endpoint\n    @DependsOn(\"myManagementServerProperties\")\n    public EndpointMvcAdapter requestMappingEndPoint(RequestMappingEndpoint delegate) {\n        return new EndpointMvcAdapter(delegate);\n    }\n\n    @Bean\n    @Autowired\n    // define the HealthPoint endpoint\n    @DependsOn(\"myManagementServerProperties\")\n    public EndpointMvcAdapter dumpMvcEndpoint(DumpEndpoint delegate) {\n        return new EndpointMvcAdapter(delegate);\n    }\n\n    @Bean\n    @Autowired\n    // define the MetricsEndpoint endpoint\n    @DependsOn(\"myManagementServerProperties\")\n    public MetricsMvcEndpoint metricsMvcEndpoint(MetricsEndpoint delegate) {\n        return new MetricsMvcEndpoint(delegate);\n    }\n\n    @Bean\n    @Autowired\n    @DependsOn(\"myManagementServerProperties\")\n    public EnvironmentMvcEndpoint environmentMvcEndpoint(EnvironmentEndpoint delegate) {\n        return new EnvironmentMvcEndpoint(delegate);\n    }\n</code></pre>\n\n<p>With this configuration I can actually call those endpoints I declared:</p>\n\n<pre><code>2018-02-09 12:33:47,083 [localhost-startStop-1] INFO  org.springframework.boot.actuate.endpoint.mvc.EndpointHandlerMapping - Mapped \"{[/dump],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}\" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()\n2018-02-09 12:33:47,084 [localhost-startStop-1] INFO  org.springframework.boot.actuate.endpoint.mvc.EndpointHandlerMapping - Mapped \"{[/metrics/{name:.*}],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}\" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.MetricsMvcEndpoint.value(java.lang.String)\n2018-02-09 12:33:47,084 [localhost-startStop-1] INFO  org.springframework.boot.actuate.endpoint.mvc.EndpointHandlerMapping - Mapped \"{[/metrics],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}\" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()\n2018-02-09 12:33:47,084 [localhost-startStop-1] INFO  org.springframework.boot.actuate.endpoint.mvc.EndpointHandlerMapping - Mapped \"{[/beans],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}\" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()\n2018-02-09 12:33:47,084 [localhost-startStop-1] INFO  org.springframework.boot.actuate.endpoint.mvc.EndpointHandlerMapping - Mapped \"{[/health],methods=[],params=[],headers=[],consumes=[],produces=[],custom=[]}\" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.HealthMvcEndpoint.invoke()\n2018-02-09 12:33:47,084 [localhost-startStop-1] INFO  org.springframework.boot.actuate.endpoint.mvc.EndpointHandlerMapping - Mapped \"{[/info],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}\" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()\n2018-02-09 12:33:47,084 [localhost-startStop-1] INFO  org.springframework.boot.actuate.endpoint.mvc.EndpointHandlerMapping - Mapped \"{[/mappings],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}\" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()\n2018-02-09 12:33:47,085 [localhost-startStop-1] INFO  org.springframework.boot.actuate.endpoint.mvc.EndpointHandlerMapping - Mapped \"{[/env/{name:.*}],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}\" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EnvironmentMvcEndpoint.value(java.lang.String)\n2018-02-09 12:33:47,085 [localhost-startStop-1] INFO  org.springframework.boot.actuate.endpoint.mvc.EndpointHandlerMapping - Mapped \"{[/env],methods=[GET],params=[],headers=[],consumes=[],produces=[],custom=[]}\" onto public java.lang.Object org.springframework.boot.actuate.endpoint.mvc.EndpointMvcAdapter.invoke()\n</code></pre>\n\n<p>What I want to achieve is to change the basepath of all those endpoints to something like <strong>\\actuator</strong> so I can call:</p>\n\n<pre><code>https://mydomain:8443/myapp/api/actuator/dump\nhttps://mydomain:8443/myapp/api/actuator/metrics\n</code></pre>\n\n<p>What I tried after looking online, given that its a non boot application, is adding this configuration ad my ActuatorConfig class:</p>\n\n<pre><code>@Bean\n        @Autowired\n        public ManagementServerProperties myManagementServerProperties() {\n            ManagementServerProperties manag = new ManagementServerProperties();\n            manag.setContextPath(\"/actuator\");\n\n            return manag;\n        }\n</code></pre>\n\n<p>I tried to use <code>@DependsOn</code> annotation to make sure the myManagementServerProperties was instantiated before the Actuator endpoints but nothing changed.</p>\n\n<p>What am I doing wrong?</p>\n"},{"comments":[{"comment_id":9469798,"body":"how else would you solve the NP problem than by recursion?"},{"comment_id":25102807,"body":"Dynamic Programming for example. No recursion needed. You may always try to change NP-complete program into pseudo-polynomial, knapsack is one of those problems."},{"comment_id":94889624,"body":"I like to listen experienced-<b>wise</b> people before going deeper into a subject. To be skillful on DP, one needs to be skillful on <i>Recursion, Memoized approach and Bottom-up(Tabulation) approach</i>. That&#39;s why the guy highly likely ponders its recursive way like me."},{"comment_id":94889801,"body":"So, @Benjamin&#39;s saying is genuinely minute right. No recursion is needed, yet recursion formula is inevitable sine qua non for DP."}],"answers":[{"comments":[{"comment_id":9467679,"body":"Thanks but I still don&#39;t see it."},{"comment_id":9467843,"body":"@&#211;scar L&#243;pez: you have answered the &quot;real&quot; knapsack but not his problem, which seems simpler since that there&#39;s apparently no value/weight distinction in the OP&#39;s problem."},{"comment_id":28670326,"body":"What do you mean by values? You have a W for weight next to it so it can&#39;t be weight."},{"comment_id":28672520,"body":"@cokedude &quot;V is an array of values&quot;. What gets maximized it&#39;s the values from this array"},{"comment_id":80330363,"body":"@&#211;scarL&#243;pez, I run your code as &quot;knapsack([2, 3], [1, 2], 2)&quot; and received 3 as an output. Are you sure it is working correctly? Or am I missing something? I expected 4, because we can take first element with weight 1 and value 2 twice."},{"comment_id":80330647,"body":"@Hasek you can’t take the same element twice ;)"}],"answer_id":7774886,"body":"<p>Here's a simple recursive implementation (not very efficient, but easy to follow). It's in Python, OP is asking for a Java implementation, but porting it to Java shouldn't be too difficult, it's like looking at pseudo-code.</p>\n\n<p>The main function declares three parameters: V is an array of values, W is an array of weights and C the capacity of the knapsack.</p>\n\n<pre><code>def knapsack(V, W, C):\n    return knapsack_aux(V, W, len(V)-1, C)\n\ndef knapsack_aux(V, W, i, aW):\n    if i == -1 or aW == 0:\n        return 0\n    elif W[i] &gt; aW:\n        return knapsack_aux(V, W, i-1, aW)\n    else:\n        return max(knapsack_aux(V, W, i-1, aW),\n                   V[i] + knapsack_aux(V, W, i-1, aW-W[i]))\n</code></pre>\n\n<p>The algorithm maximizes the value of the items added to the knapsack, returning the maximum value attainable with the given weights</p>\n"},{"answer_id":7775224,"body":"<p>What did you try?  </p>\n\n<p>The idea, given the problem you stated (which specifies we must use recursion) is simple: for each item that you can take, see if it's better to take it or not.  So there are only two possible path:</p>\n\n<ol>\n<li>you take the item</li>\n<li>you don't take it</li>\n</ol>\n\n<p>When you take the item, you remove it from your list and you decrease the capacity by the weight of the item.</p>\n\n<p>When you don't take the item, you remove if from you list but you do not decrease the capacity.</p>\n\n<p>Sometimes it helps to print what the recursive calls may look like.  In this case, it could look like this:</p>\n\n<pre><code>Calling 11 8 7 6 5  with cap: 20\n +Calling 8 7 6 5  with cap: 20\n |  Calling 7 6 5  with cap: 20\n |    Calling 6 5  with cap: 20\n |      Calling 5  with cap: 20\n |      Result: 5\n |      Calling 5  with cap: 14\n |      Result: 5\n |    Result: 11\n |    Calling 6 5  with cap: 13\n |      Calling 5  with cap: 13\n |      Result: 5\n |      Calling 5  with cap: 7\n |      Result: 5\n |    Result: 11\n |  Result: 18\n |  Calling 7 6 5  with cap: 12\n |    Calling 6 5  with cap: 12\n |      Calling 5  with cap: 12\n |      Result: 5\n |      Calling 5  with cap: 6\n |      Result: 5\n |    Result: 11\n |    Calling 6 5  with cap: 5\n |      Calling 5  with cap: 5\n |      Result: 5\n |    Result: 5\n |  Result: 12\n +Result: 20\n  Calling 8 7 6 5  with cap: 9\n    Calling 7 6 5  with cap: 9\n      Calling 6 5  with cap: 9\n        Calling 5  with cap: 9\n        Result: 5\n        Calling 5  with cap: 3\n        Result: 0\n      Result: 6\n      Calling 6 5  with cap: 2\n        Calling 5  with cap: 2\n        Result: 0\n      Result: 0\n    Result: 7\n    Calling 7 6 5  with cap: 1\n      Calling 6 5  with cap: 1\n        Calling 5  with cap: 1\n        Result: 0\n      Result: 0\n    Result: 0\n  Result: 8\nResult: 20\n</code></pre>\n\n<p>I did on purpose show the call to [8 7 6 5] with a capacity of 20, which gives a result of 20 (8 + 7 + 5).</p>\n\n<p>Note that [8 7 6 5] is called twice: once with a capacity of 20 (because we didn't take 11) and once with a capacity of 9 (because with did take 11).</p>\n\n<p>So the path to the solution:</p>\n\n<p>11 not taken, calling [8 7 6 5] with a capacity of 20</p>\n\n<p>8 taken, calling [7 6 5] with a capacity of 12 (20 - 8)</p>\n\n<p>7 taken, calling [6 5] with a capacity of 5  (12 - 7)</p>\n\n<p>6 not taken, calling [5] with a capacity of 5</p>\n\n<p>5 taken, we're at zero.</p>\n\n<p>The actual method in Java can fit in very few lines of code.</p>\n\n<p>Since this is obviously homework, I'll just help you with a skeleton:</p>\n\n<pre><code>private int ukp( final int[] ar, final int cap ) {\n    if ( ar.length == 1 ) {\n        return ar[0] &lt;= cap ? ar[0] : 0;\n    } else {\n        final int[] nar = new int[ar.length-1];\n        System.arraycopy(ar, 1, nar, 0, nar.length);\n        fint int item = ar[0];\n        if ( item &lt; cap ) {\n            final int left = ...  // fill me: we're not taking the item\n            final int took = ...  // fill me: we're taking the item\n            return Math.max(took,left);\n        } else {\n            return ... // fill me: we're not taking the item\n        }\n    }\n}\n</code></pre>\n\n<p>I did copy the array to a new array, which is less efficient (but anyway recursion is not the way to go here if you seek performance), but more \"functional\".</p>\n"},{"answer_id":9439380,"body":"<p>Here is a Java solution</p>\n\n<pre><code>static int knapsack(int[] values, int[] weights, int W, int[] tab, int i) {\n    if(i&gt;=values.length) return 0;\n    if(tab[W] != 0) \n        return tab[W];      \n\n    int value1 = knapsack(values, weights, W, tab, i+1);        \n    int value2 = 0;\n    if(W &gt;= weights[i]) value2 = knapsack(values, weights, W-weights[i], tab, i+1) + values[i];\n\n    return tab[W] = (value1&gt;value2) ? value1 : value2;\n}\n</code></pre>\n\n<p>Test it by using</p>\n\n<pre><code>public static void main(String[] args) {\n    int[] values = new int[] {894, 260, 392, 281, 27};\n    int[] weights = new int[] {8, 6, 4, 0, 21};\n    int W = 30;\n    int[] tab = new int[W+1];\n    System.out.println(knapsack(values, weights, W, tab, 0));\n}\n</code></pre>\n"},{"answer_id":10990970,"body":"<p>Here is a simple recursive solution in Java but you should avoid using recursion if possible. </p>\n\n<pre><code>public class Knapsack {\n\n    public static void main(String[] args) {\n        int[] arr = new int[]{11, 8, 7, 6, 5};\n        find(arr,20);\n    }\n\n    public static boolean find( int[] arr,int total){\n        return find(arr,0,total);\n    }\n\n    private static boolean find( int[] arr,int start,  int total){\n        if (start == arr.length){\n            return false;\n        }\n        int curr = arr[start];\n        if (curr == total){\n            System.out.println(curr);\n            return true;\n        }else if (curr &gt; total || !find(arr,start+1,total-curr)){\n            return find(arr,start+1,total);\n        }\n        System.out.println(curr);\n        return true;\n    }\n}\n</code></pre>\n"},{"comments":[{"comment_id":33302887,"body":"Is there a way of keeping track of the unique items you used in this recursion? I&#39;ve been trying to figure it out for a few hours now with no success."},{"comment_id":47941195,"body":"@crashprophet, <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html\" rel=\"nofollow noreferrer\">HashSet</a>"},{"comment_id":69125809,"body":"I think it is <code>if (i &lt;0 || W ==0) return 0</code>"}],"answer_id":14186622,"body":"<p>I had to do this for my homework so I tested all of the above codes (except for the Python one), but none of them work for every corner case.</p>\n\n<p>This is my code, it works for every corner case.</p>\n\n<pre><code>static int[] values = new int[] {894, 260, 392, 281, 27};\nstatic int[] weights = new int[] {8, 6, 4, 0, 21};\nstatic int W = 30;\n\nprivate static int knapsack(int i, int W) {\n    if (i &lt; 0) {\n        return 0;\n    }\n    if (weights[i] &gt; W) {\n        return knapsack(i-1, W);\n    } else {\n        return Math.max(knapsack(i-1, W), knapsack(i-1, W - weights[i]) + values[i]);\n    }\n}\n\npublic static void main(String[] args) {\nSystem.out.println(knapsack(values.length - 1, W));}\n</code></pre>\n\n<p>It is not optimized, the recursion will kill you, but you can use simple memoization to fix that. Why is my code short, correct and simple to understand? I just checked out the mathematical definition of the 0-1 Knapsack problem <a href=\"http://en.wikipedia.org/wiki/Knapsack_problem#Dynamic_programming\">http://en.wikipedia.org/wiki/Knapsack_problem#Dynamic_programming</a></p>\n"},{"answer_id":18024900,"body":"<pre><code>public class Knapsack {\n    public int[] arr = {11,8,7,6,5};\n    public int[] retArr = new int[5];\n    int i = 0;\n    public boolean problem(int sum, int pick) {\n        if(pick == arr.length) {\n            return false;\n        }\n        if(arr[pick] &lt; sum) {   \n            boolean r = problem(sum - arr[pick], pick+1);           \n            if(!r) {\n                return problem(sum, pick+1);\n            } else {\n                retArr[i++] = arr[pick];\n                return true;\n            }                   \n        } else if (arr[pick] &gt; sum) {\n            return problem(sum, pick+1);\n        } else {\n            retArr[i++] = arr[pick];\n            return true;\n        }\n    }\n\n    public static void main(String[] args) {\n        Knapsack rk = new Knapsack`enter code here`();\n        if(rk.problem(20, 0)) {\n            System.out.println(\"Success \" );\n            for(int i=0; i &lt; rk.retArr.length; i++)\n                System.out.println(rk.retArr[i]);\n        }\n    }\n\n}\n</code></pre>\n"},{"answer_id":23331586,"body":"<p>Yet another dynamic programming implementation in Java. \nI always feel top-down DP using memoization is much easier to understand than bottom up DP.</p>\n\n<p>Complete, self-explanatory, runnable code, using data from <a href=\"http://en.wikipedia.org/wiki/File%3aKnapsack.svg\" rel=\"nofollow\">this example from Wikipedia</a>:</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\npublic class Knapsack {\n\n    private static final List&lt;Item&gt; ITEMS = new ArrayList&lt;&gt;();\n    private static final Map&lt;Integer, Bag&gt; CACHE = new HashMap&lt;&gt;();\n    private static final boolean FINITE_ITEMS = true; //whether an item can be added more than once\n\n    public static void main(String[] args) {\n        ITEMS.add(new Item(4, 12, \"GREEN\"));\n        ITEMS.add(new Item(2, 2, \"CYAN\"));\n        ITEMS.add(new Item(2, 1, \"GREY\"));\n        ITEMS.add(new Item(1, 1, \"ORANGE\"));\n        ITEMS.add(new Item(10, 4, \"YELLOW\"));\n        Bag best = bestBagForCapa(15);\n        System.out.println(best.toString());\n    }\n\n    public static Bag bestBagForCapa(int capa) {\n        if (CACHE.containsKey(capa)) return CACHE.get(capa);\n        if (capa &lt; 0) return null;\n        if (capa == 0) return new Bag(0, 0);\n\n        int currentWeight = -1;\n        int currentValue = -1;\n        String newItem = null;\n        List&lt;String&gt; previousItems = null;\n        for (Item p : ITEMS) {\n            Bag previous = bestBagForCapa(capa - p.weight);\n            if (previous == null) continue;\n\n            int weightSoFar = previous.weight;\n            int valueSoFar = previous.value;\n            int nextBestValue = 0;\n            Item candidateItem = null;\n            for (Item candidate : ITEMS) {\n                if (FINITE_ITEMS &amp;&amp; previous.alreadyHas(candidate)) continue;\n                if (weightSoFar + candidate.weight &lt;= capa &amp;&amp; nextBestValue &lt; valueSoFar + candidate.value) {\n                    candidateItem = candidate;\n                    nextBestValue = valueSoFar + candidate.value;\n                }\n            }\n\n            if (candidateItem != null &amp;&amp; nextBestValue &gt; currentValue) {\n                currentValue = nextBestValue;\n                currentWeight = weightSoFar + candidateItem.weight;\n                newItem = candidateItem.name;\n                previousItems = previous.contents;\n            }\n        }\n\n        if (currentWeight &lt;= 0 || currentValue &lt;= 0) throw new RuntimeException(\"cannot be 0 here\");\n        Bag bestBag = new Bag(currentWeight, currentValue);\n        bestBag.add(previousItems);\n        bestBag.add(Collections.singletonList(newItem));\n        CACHE.put(capa, bestBag);\n        return bestBag;\n    }\n\n}\n\nclass Item {\n\n    int value;\n    int weight;\n    String name;\n\n    Item(int value, int weight, String name) {\n        this.value = value;\n        this.weight = weight;\n        this.name = name;\n    }\n\n}\n\nclass Bag {\n\n    List&lt;String&gt; contents = new ArrayList&lt;&gt;();\n    int weight;\n    int value;\n\n    boolean alreadyHas(Item item) {\n        return contents.contains(item.name);\n    }\n\n    @Override\n    public String toString() {\n        return \"weight \" + weight + \" , value \" + value + \"\\n\" + contents.toString(); \n    }\n\n    void add(List&lt;String&gt; name) {\n        contents.addAll(name);\n    }\n\n    Bag(int weight, int value) {\n        this.weight = weight;\n        this.value = value;\n    }\n\n}\n</code></pre>\n"},{"answer_id":24877732,"body":"<p>The problem is basically modified version of classic knapsack problem for simplicity (there <strong>are no values/benefits</strong> corresponding to weights) (for actual: <a href=\"http://en.wikipedia.org/wiki/Knapsack_problem\" rel=\"nofollow noreferrer\">http://en.wikipedia.org/wiki/Knapsack_problem</a>, <a href=\"https://stackoverflow.com/questions/17073768/0-1-knapsack-a-few-clarification-on-wikis-pseudocode/24906286#24906286\">0/1 Knapsack - A few clarification on Wiki&#39;s pseudocode</a>, <a href=\"https://stackoverflow.com/questions/3907545/how-to-understand-the-knapsack-problem-is-np-complete\">How to understand the knapsack problem is NP-complete?</a>, <a href=\"https://stackoverflow.com/questions/4538581/why-is-the-knapsack-problem-pseudo-polynomial?lq=1\">Why is the knapsack problem pseudo-polynomial?</a>, <a href=\"http://www.geeksforgeeks.org/dynamic-programming-set-10-0-1-knapsack-problem/\" rel=\"nofollow noreferrer\">http://www.geeksforgeeks.org/dynamic-programming-set-10-0-1-knapsack-problem/</a>).</p>\n\n<p>Here are five versions of solving this in c#:</p>\n\n<p><strong>version1</strong>: Using dynamic programming (tabulated - by eagerly finding solutions for all sum problems to get to final one) - O(n * W)</p>\n\n<p><strong>version 2</strong>: Using DP but memoization version (lazy - just finding solutions for whatever is needed)</p>\n\n<p><strong>version 3</strong> Using recursion to demonstrate overlapped sub problems and optimal sub structure</p>\n\n<p><strong>version 4</strong> Recursive (brute force) - basically accepted answer </p>\n\n<p><strong>version 5</strong> Using stack of #4 (demonstrating removing tail recursion)</p>\n\n<p><strong>version1</strong>: Using dynamic programming (tabulated - by eagerly finding solutions for all sum problems to get to final one) - O(n * W)</p>\n\n<pre><code>public bool KnapsackSimplified_DP_Tabulated_Eager(int[] weights, int W)\n        {\n            this.Validate(weights, W);\n            bool[][] DP_Memoization_Cache = new bool[weights.Length + 1][];\n            for (int i = 0; i &lt;= weights.Length; i++)\n            {\n                DP_Memoization_Cache[i] = new bool[W + 1];\n            }\n            for (int i = 1; i &lt;= weights.Length; i++)\n            {\n                for (int w = 0; w &lt;= W; w++)\n                {\n                    /// f(i, w) determines if weight 'w' can be accumulated using given 'i' number of weights\n                    /// f(i, w) = False if i &lt;= 0\n                    ///           OR True if weights[i-1] == w\n                    ///           OR f(i-1, w) if weights[i-1] &gt; w\n                    ///           OR f(i-1, w) || f(i-1, w-weights[i-1])\n                    if(weights[i-1] == w)\n                    {\n                        DP_Memoization_Cache[i][w] = true;\n                    }\n                    else\n                    {\n                        DP_Memoization_Cache[i][w] = DP_Memoization_Cache[i - 1][w];\n                        if(!DP_Memoization_Cache[i][w])\n                        {\n                            if (w &gt; weights[i - 1])\n                            {\n                                DP_Memoization_Cache[i][w] = DP_Memoization_Cache[i - 1][w - weights[i - 1]];\n                            }\n                        }\n                    }\n                }\n            }\n            return DP_Memoization_Cache[weights.Length][W];\n        }\n</code></pre>\n\n<p><strong>version 2</strong>: Using DP but memorization version (lazy - just finding solutions for whatever is needed)</p>\n\n<pre><code>/// &lt;summary&gt;\n        /// f(i, w) determines if weight 'w' can be accumulated using given 'i' number of weights\n        /// f(i, w) = False if i &lt; 0\n        ///           OR True if weights[i] == w\n        ///           OR f(i-1, w) if weights[i] &gt; w\n        ///           OR f(i-1, w) || f(i-1, w-weights[i])\n        /// &lt;/summary&gt;\n        /// &lt;param name=\"rowIndexOfCache\"&gt;\n        /// Note, its index of row in the cache\n        /// index of given weifhts is indexOfCahce -1 (as it starts from 0)\n        /// &lt;/param&gt;\n        bool KnapsackSimplified_DP_Memoization_Lazy(int[] weights, int w, int i_rowIndexOfCache, bool?[][] DP_Memoization_Cache)\n        {\n            if(i_rowIndexOfCache &lt; 0)\n            {\n                return false;\n            }\n            if(DP_Memoization_Cache[i_rowIndexOfCache][w].HasValue)\n            {\n                return DP_Memoization_Cache[i_rowIndexOfCache][w].Value;\n            }\n            int i_weights_index = i_rowIndexOfCache - 1;\n            if (weights[i_weights_index] == w)\n            {\n                //we can just use current weight, so no need to call other recursive methods\n                //just return true\n                DP_Memoization_Cache[i_rowIndexOfCache][w] = true;\n                return true;\n            }\n            //see if W, can be achieved without using weights[i]\n            bool flag = this.KnapsackSimplified_OverlappedSubPromblems_OptimalSubstructure(weights,\n                w, i_rowIndexOfCache - 1);\n            DP_Memoization_Cache[i_rowIndexOfCache][w] = flag;\n            if (flag)\n            {\n                return true;\n            }\n            if (w &gt; weights[i_weights_index])\n            {\n                //see if W-weight[i] can be achieved with rest of the weights\n                flag = this.KnapsackSimplified_OverlappedSubPromblems_OptimalSubstructure(weights,\n                    w - weights[i_weights_index], i_rowIndexOfCache - 1);\n                DP_Memoization_Cache[i_rowIndexOfCache][w] = flag;\n            }\n            return flag;\n        }\n</code></pre>\n\n<p><strong>where</strong></p>\n\n<pre><code>public bool KnapsackSimplified_DP_Memoization_Lazy(int[] weights, int W)\n        {\n            this.Validate(weights, W);\n            //note 'row' index represents the number of weights been used\n            //note 'colum' index represents the weight that can be achived using given \n            //number of weights 'row'\n            bool?[][] DP_Memoization_Cache = new bool?[weights.Length+1][];\n            for(int i = 0; i&lt;=weights.Length; i++)\n            {\n                DP_Memoization_Cache[i] = new bool?[W + 1];\n                for(int w=0; w&lt;=W; w++)\n                {\n                    if(i != 0)\n                    {\n                        DP_Memoization_Cache[i][w] = null;\n                    }\n                    else\n                    {\n                        //can't get to weight 'w' using none of the given weights\n                        DP_Memoization_Cache[0][w] = false;\n                    }\n                }\n                DP_Memoization_Cache[i][0] = false;\n            }\n            bool f = this.KnapsackSimplified_DP_Memoization_Lazy(\n                weights, w: W, i_rowIndexOfCache: weights.Length, DP_Memoization_Cache: DP_Memoization_Cache);\n            Assert.IsTrue(f == DP_Memoization_Cache[weights.Length][W]);\n            return f;\n        }\n</code></pre>\n\n<p><strong>version 3</strong> Identifying overlapped sub problems and optimal sub structure</p>\n\n<pre><code>/// &lt;summary&gt;\n        /// f(i, w) = False if i &lt; 0\n        ///           OR True if weights[i] == w\n        ///           OR f(i-1, w) if weights[i] &gt; w\n        ///           OR f(i-1, w) || f(i-1, w-weights[i])\n        /// &lt;/summary&gt;\n        public bool KnapsackSimplified_OverlappedSubPromblems_OptimalSubstructure(int[] weights, int W, int i)\n        {\n            if(i&lt;0)\n            {\n                //no more weights to traverse\n                return false;\n            }\n            if(weights[i] == W)\n            {\n                //we can just use current weight, so no need to call other recursive methods\n                //just return true\n                return true;\n            }\n            //see if W, can be achieved without using weights[i]\n            bool flag = this.KnapsackSimplified_OverlappedSubPromblems_OptimalSubstructure(weights,\n                W, i - 1);\n            if(flag)\n            {\n                return true;\n            }\n            if(W &gt; weights[i])\n            {\n                //see if W-weight[i] can be achieved with rest of the weights\n                return this.KnapsackSimplified_OverlappedSubPromblems_OptimalSubstructure(weights, W - weights[i], i - 1);\n            }\n            return false;\n        }\n</code></pre>\n\n<p><strong>where</strong> </p>\n\n<pre><code>public bool KnapsackSimplified_OverlappedSubPromblems_OptimalSubstructure(int[] weights, int W)\n        {\n            this.Validate(weights, W);\n            bool f = this.KnapsackSimplified_OverlappedSubPromblems_OptimalSubstructure(weights, W,\n                i: weights.Length - 1);\n            return f;\n        }\n</code></pre>\n\n<p><strong>version 4</strong> Brute force</p>\n\n<pre><code>private bool KnapsackSimplifiedProblemRecursive(int[] weights, int sum, int currentSum, int index, List&lt;int&gt; itemsInTheKnapsack)\n        {\n            if (currentSum == sum)\n            {\n                return true;\n            }\n            if (currentSum &gt; sum)\n            {\n                return false;\n            }\n            if (index &gt;= weights.Length)\n            {\n                return false;\n            }\n            itemsInTheKnapsack.Add(weights[index]);\n            bool flag = KnapsackSimplifiedProblemRecursive(weights, sum, currentSum: currentSum + weights[index],\n                index: index + 1, itemsInTheKnapsack: itemsInTheKnapsack);\n            if (!flag)\n            {\n                itemsInTheKnapsack.Remove(weights[index]);\n                flag = KnapsackSimplifiedProblemRecursive(weights, sum, currentSum, index + 1, itemsInTheKnapsack);\n            }\n            return flag;\n        }\n        public bool KnapsackRecursive(int[] weights, int sum, out List&lt;int&gt; knapsack)\n        {\n            if(sum &lt;= 0)\n            {\n                throw new ArgumentException(\"sum should be +ve non zero integer\");\n            }\n            knapsack = new List&lt;int&gt;();\n            bool fits = KnapsackSimplifiedProblemRecursive(weights, sum, currentSum: 0, index: 0, \n                itemsInTheKnapsack: knapsack);\n            return fits;\n        }\n</code></pre>\n\n<p><strong>version 5: Iterative version using stack (note - same complexity - using stack - removing tail recursion)</strong></p>\n\n<pre><code>public bool KnapsackIterativeUsingStack(int[] weights, int sum, out List&lt;int&gt; knapsack)\n        {\n            sum.Throw(\"sum\", s =&gt; s &lt;= 0);\n            weights.ThrowIfNull(\"weights\");\n            weights.Throw(\"weights\", w =&gt; (w.Length == 0)\n                                  || w.Any(wi =&gt; wi &lt; 0));\n            var knapsackIndices = new List&lt;int&gt;();\n            knapsack = new List&lt;int&gt;();\n            Stack&lt;KnapsackStackNode&gt; stack = new Stack&lt;KnapsackStackNode&gt;();\n            stack.Push(new KnapsackStackNode() { sumOfWeightsInTheKnapsack = 0, nextItemIndex = 1 });\n            stack.Push(new KnapsackStackNode() { sumOfWeightsInTheKnapsack = weights[0], nextItemIndex = 1, includesItemAtCurrentIndex = true });\n            knapsackIndices.Add(0);\n\n            while(stack.Count &gt; 0)\n            {\n                var top = stack.Peek();\n                if(top.sumOfWeightsInTheKnapsack == sum)\n                {\n                    int count = 0;\n                    foreach(var index in knapsackIndices)\n                    {\n                        var w = weights[index];\n                        knapsack.Add(w);\n                        count += w;\n                    }\n                    Debug.Assert(count == sum);\n                    return true;\n                }\n                //basically either of the below three cases, we dont need to traverse/explore adjuscent\n                // nodes further\n                if((top.nextItemIndex == weights.Length) //we reached end, no need to traverse\n                    || (top.sumOfWeightsInTheKnapsack &gt; sum) // last added node should not be there\n                    || (top.alreadyExploredAdjuscentItems)) //already visted\n                {\n                    if (top.includesItemAtCurrentIndex)\n                    {\n                        Debug.Assert(knapsackIndices.Contains(top.nextItemIndex - 1));\n                        knapsackIndices.Remove(top.nextItemIndex - 1);\n                    }\n                    stack.Pop();\n                    continue;\n                }\n\n                var node1 = new KnapsackStackNode();\n                node1.sumOfWeightsInTheKnapsack = top.sumOfWeightsInTheKnapsack;\n                node1.nextItemIndex = top.nextItemIndex + 1;\n                stack.Push(node1);\n\n                var node2 = new KnapsackStackNode();\n                knapsackIndices.Add(top.nextItemIndex);\n                node2.sumOfWeightsInTheKnapsack = top.sumOfWeightsInTheKnapsack + weights[top.nextItemIndex];\n                node2.nextItemIndex = top.nextItemIndex + 1;\n                node2.includesItemAtCurrentIndex = true;\n                stack.Push(node2);\n\n                top.alreadyExploredAdjuscentItems = true;\n            }\n            return false;\n        }\n</code></pre>\n\n<p><strong>where</strong> </p>\n\n<pre><code>class KnapsackStackNode\n        {\n            public int sumOfWeightsInTheKnapsack;\n            public int nextItemIndex;\n            public bool alreadyExploredAdjuscentItems;\n            public bool includesItemAtCurrentIndex;\n        }\n</code></pre>\n\n<p><strong>And unit tests</strong></p>\n\n<pre><code>[TestMethod]\n        public void KnapsackSimpliedProblemTests()\n        {\n            int[] weights = new int[] { 7, 5, 4, 4, 1 };\n            List&lt;int&gt; bag = null;\n            bool flag = this.KnapsackSimplifiedProblemIterativeUsingStack(weights, 10, knapsack: out bag);\n            Assert.IsTrue(flag);\n            Assert.IsTrue(bag.Contains(5));\n            Assert.IsTrue(bag.Contains(4));\n            Assert.IsTrue(bag.Contains(1));\n            Assert.IsTrue(bag.Count == 3);\n            flag = this.KnapsackSimplifiedProblemIterativeUsingStack(weights, 3, knapsack: out bag);\n            Assert.IsFalse(flag);\n            flag = this.KnapsackSimplifiedProblemIterativeUsingStack(weights, 7, knapsack: out bag);\n            Assert.IsTrue(flag);\n            Assert.IsTrue(bag.Contains(7));\n            Assert.IsTrue(bag.Count == 1);\n            flag = this.KnapsackSimplifiedProblemIterativeUsingStack(weights, 1, knapsack: out bag);\n            Assert.IsTrue(flag);\n            Assert.IsTrue(bag.Contains(1));\n            Assert.IsTrue(bag.Count == 1);\n\n            flag = this.KnapsackSimplified_DP_Tabulated_Eager(weights, 10);\n            Assert.IsTrue(flag);\n            flag = this.KnapsackSimplified_DP_Tabulated_Eager(weights, 3);\n            Assert.IsFalse(flag);\n            flag = this.KnapsackSimplified_DP_Tabulated_Eager(weights, 7);\n            Assert.IsTrue(flag);\n            flag = this.KnapsackSimplified_DP_Tabulated_Eager(weights, 1);\n            Assert.IsTrue(flag);\n\n            flag = this.KnapsackSimplified_DP_Memoization_Lazy(weights, 10);\n            Assert.IsTrue(flag);\n            flag = this.KnapsackSimplified_DP_Memoization_Lazy(weights, 3);\n            Assert.IsFalse(flag);\n            flag = this.KnapsackSimplified_DP_Memoization_Lazy(weights, 7);\n            Assert.IsTrue(flag);\n            flag = this.KnapsackSimplified_DP_Memoization_Lazy(weights, 1);\n            Assert.IsTrue(flag);\n\n            flag = this.KnapsackSimplified_OverlappedSubPromblems_OptimalSubstructure(weights, 10);\n            Assert.IsTrue(flag);\n            flag = this.KnapsackSimplified_OverlappedSubPromblems_OptimalSubstructure(weights, 3);\n            Assert.IsFalse(flag);\n            flag = this.KnapsackSimplified_OverlappedSubPromblems_OptimalSubstructure(weights, 7);\n            Assert.IsTrue(flag);\n            flag = this.KnapsackSimplified_OverlappedSubPromblems_OptimalSubstructure(weights, 1);\n            Assert.IsTrue(flag);\n\n\n            flag = this.KnapsackRecursive(weights, 10, knapsack: out bag);\n            Assert.IsTrue(flag);\n            Assert.IsTrue(bag.Contains(5));\n            Assert.IsTrue(bag.Contains(4));\n            Assert.IsTrue(bag.Contains(1));\n            Assert.IsTrue(bag.Count == 3);\n            flag = this.KnapsackRecursive(weights, 3, knapsack: out bag);\n            Assert.IsFalse(flag);\n            flag = this.KnapsackRecursive(weights, 7, knapsack: out bag);\n            Assert.IsTrue(flag);\n            Assert.IsTrue(bag.Contains(7));\n            Assert.IsTrue(bag.Count == 1);\n            flag = this.KnapsackRecursive(weights, 1, knapsack: out bag);\n            Assert.IsTrue(flag);\n            Assert.IsTrue(bag.Contains(1));\n            Assert.IsTrue(bag.Count == 1);\n\n            weights = new int[] { 11, 8, 7, 6, 5 };\n            flag = this.KnapsackSimplifiedProblemIterativeUsingStack(weights, 20, knapsack: out bag);\n            Assert.IsTrue(bag.Contains(8));\n            Assert.IsTrue(bag.Contains(7));\n            Assert.IsTrue(bag.Contains(5));\n            Assert.IsTrue(bag.Count == 3);\n            flag = this.KnapsackSimplifiedProblemIterativeUsingStack(weights, 27, knapsack: out bag);\n            Assert.IsFalse(flag);\n            flag = this.KnapsackSimplifiedProblemIterativeUsingStack(weights, 11, knapsack: out bag);\n            Assert.IsTrue(flag);\n            Assert.IsTrue(bag.Contains(11));\n            Assert.IsTrue(bag.Count == 1);\n            flag = this.KnapsackSimplifiedProblemIterativeUsingStack(weights, 5, knapsack: out bag);\n            Assert.IsTrue(flag);\n            Assert.IsTrue(bag.Contains(5));\n            Assert.IsTrue(bag.Count == 1);\n\n            flag = this.KnapsackRecursive(weights, 20, knapsack: out bag);\n            Assert.IsTrue(bag.Contains(8));\n            Assert.IsTrue(bag.Contains(7));\n            Assert.IsTrue(bag.Contains(5));\n            Assert.IsTrue(bag.Count == 3);\n            flag = this.KnapsackRecursive(weights, 27, knapsack: out bag);\n            Assert.IsFalse(flag);\n            flag = this.KnapsackRecursive(weights, 11, knapsack: out bag);\n            Assert.IsTrue(flag);\n            Assert.IsTrue(bag.Contains(11));\n            Assert.IsTrue(bag.Count == 1);\n            flag = this.KnapsackRecursive(weights, 5, knapsack: out bag);\n            Assert.IsTrue(flag);\n            Assert.IsTrue(bag.Contains(5));\n            Assert.IsTrue(bag.Count == 1);\n        }\n</code></pre>\n"},{"answer_id":59711107,"body":"<pre><code>def knpsack(weight , value , k , index=0 , currweight=0):\n    if(index&gt;=len(weight)):\n        return 0\ntake = 0\ndontake = 0\nif(currweight+weight[index] &lt;= k):\n    take = value[index]  + \n         knpsack(weight,value,k,index+1,currweight+weight[index])\ndontake = knpsack(weight,value,k,index+1,currweight)\nreturn max(take,dontake)\n</code></pre>\n"},{"answer_id":76309462,"body":"<p>Here is another one</p>\n<pre><code>    static int[] values = new int[] {1,3,5,6};\nstatic int[] weights = new int[] {2,3,4,5};\nstatic int W = 8;\n\nprivate static int calculate(int i, int W, int cur) {\n    // this second check on wts is required so that if there is no space if we try this weight, dont proceed\n    if (i == values.length || W - weights[i] &lt;= 0) return cur;\n    return Math.max(calculate(i+1, W, cur), calculate(i+1, W - weights[i], cur + values[i]));\n}\n\npublic static void main(String[] args) {\n    System.out.println(calculate(0, W, 0));\n}\n</code></pre>\n"}],"last_activity_date":1684785076,"question_id":7774769,"body":"<p>This is my task</p>\n\n<blockquote>\n  <p>The Knapsack Problem is a classic in computer science. In its simplest\n  form it involves trying to fit items of different weights into a\n  knapsack so that the knapsack ends up with a specified total weight.\n  You don't need to fit in all the items. For example, suppose you want\n  your knapsack to weigh exactly 20 pounds, and you have five items,\n  with weights of 11, 8, 7, 6, and 5 pounds. For small numbers of items,\n  humans are pretty good at solving this problem by inspection. So you\n  can probably figure out that only the 8, 7, and 5 combination of items\n  adds up to 20.</p>\n</blockquote>\n\n<p>I really don't know where to begin writing this algorithm. I understand recursion when applied to factorials and triangle numbers. However I'm lost right now.</p>\n"},{"comments":[{"comment_id":134563807,"body":"Is this a modular app? If so, check your <code>POM</code> and <code>modular-info.java</code>."},{"comment_id":134563951,"body":"What does modular mean? I&#39;m just trying to make a game based on the guide on YouTube - that&#39;s it"},{"comment_id":134563985,"body":"Create your base project starting with one of the flows from <a href=\"https://openjfx.io/openjfx-docs/https://openjfx.io/openjfx-docs/\" rel=\"nofollow noreferrer\">here</a>."},{"comment_id":134564001,"body":"module ColdWindBlows { \trequires java.desktop; \trequires javafx.controls; \trequires javafx.swing; } modular-info.java"},{"comment_id":134564046,"body":"What version of <code>Java</code> are you using? What version of <code>JavaFX</code> are you using? See <a href=\"https://stackoverflow.com/questions/28582102/java-swing-component-cannot-be-resolved\" title=\"java swing component cannot be resolved\">stackoverflow.com/questions/28582102/&hellip;</a>"},{"comment_id":134564457,"body":"Note: I would stick to the filename given in the Java Language Specification <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-7.html#jls-7.7-500\" rel=\"nofollow noreferrer\">7.7. Module Declarations</a>:  <code>module-info.java</code>"},{"comment_id":134564844,"body":"Don&#39;t mix JavaFX and Swing.  If your &quot;guide&quot; on YouTube does that, then find a new guide to follow."},{"comment_id":134566078,"body":"See also this related <a href=\"https://stackoverflow.com/a/37935114/230513\">example</a>."}],"last_activity_date":1684785064,"question_id":76308953,"body":"<p>I can't understand. I can't find what the problem is. After inheriting the <code>JPanel</code> class, 2 errors occur.</p>\n<pre><code>package mainpack;\n\nimport javax.swing.JPanel;\n\npublic class MyPanel extends JPanel {\n    final int origTile = 64;\n}\n</code></pre>\n<p>1 error on 1 line(package mainpack;):</p>\n<pre><code>Multiple markers at this line\n    - The type javax.accessibility.AccessibleContext cannot be resolved. It is indirectly referenced from required .class files\n    - The type javax.swing.JComponent cannot be resolved. It is indirectly referenced from required .class files\n</code></pre>\n<p>2 error on 5 lines(public class MyPanel extends JPanel):</p>\n<pre><code>The hierarchy of the type MyPanel is inconsistent\n</code></pre>\n<p>What should I do?</p>\n<p>I tried renaming the class, but nothing changed in the end. Deleted and added the JDK again.</p>\n"},{"answers":[{"comments":[{"comment_id":58137752,"body":"Just hit this too. A 405 or 404 would suit me just fine."},{"comment_id":58139762,"body":"Yeah that was a little frustrating.  By the way, for other readers, you need &quot;spring-boot-starter-hateoas&quot; on your class-path (or the equivalent pull-ins) to get /actuator to be exposed as a rest-URL.  Otherwise, you just have to know the endpoints off the top of your head and can&#39;t get them listed there :("}],"answer_id":35041288,"body":"<p>Answering my own question to help others in the future.  I'm a chump... The <code>/actuator</code> URL lists all available commands, and all of them work based on a <code>GET</code> request.</p>\n\n<p>The <code>/shutdown</code> URL actually requires a <code>HTTP POST</code> to be sent to it in order to activate it though.  I didn't see this noted anywhere in the docs.</p>\n\n<p><strong>Sample CURL Command:</strong></p>\n\n<pre><code>&gt; curl -X POST http://hostname:8003/shutdown\n</code></pre>\n\n<p><strong>Output Of Shutdown Command:</strong></p>\n\n<pre><code>&lt;SingletonMap&gt;&lt;message&gt;Shutting down, bye...&lt;/message&gt;&lt;/SingletonMap&gt;\n</code></pre>\n"}],"last_activity_date":1684784999,"question_id":35040912,"body":"<p><strong>Background Information</strong></p>\n\n<p>I have a Spring Boot web application using Actuator for the production utilities.</p>\n\n<p>The application works fine, and the management port works great.  I can browse statistics, check health etc.  I also enabled the remote shut-down endpoint, and it properly shows up in the localhost:{mgmt_port}/actuator list of endpoints.</p>\n\n<p><strong>My Problem</strong></p>\n\n<p>When I go to localhost:{mgmt_port}/shutdown though, I see:</p>\n\n<pre><code>&lt;Map&gt;\n    &lt;timestamp&gt;1453905900007&lt;/timestamp&gt;\n    &lt;status&gt;500&lt;/status&gt;\n    &lt;error&gt;Internal Server Error&lt;/error&gt;\n    &lt;exception&gt;org.springframework.web.HttpRequestMethodNotSupportedException&lt;/exception&gt;\n    &lt;message&gt;Request method 'GET' not supported&lt;/message&gt;\n    &lt;path&gt;/shutdown&lt;/path&gt;\n&lt;/Map&gt;\n</code></pre>\n\n<p><strong>Useful Information</strong></p>\n\n<ul>\n<li><p>The whole application still seems to be running after hitting the shut-down link.  I can still pull data from my custom application endpoints.</p></li>\n<li><p>The management URL provided by Spring actuator also seems to still be running fine after hitting shut down. </p></li>\n</ul>\n\n<p><strong>Console Output Before Issue</strong></p>\n\n<blockquote>\n  <p>10:01:42.496 [main] INFO  o.s.b.c.e.t.TomcatEmbeddedServletContainer -\n  Tomcat started on port(s): 8002 (http) 10:01:42.499 [main] INFO \n  com.xyz.api.Main - Started Main in 5.956 seconds (JVM\n  running for 6.381)</p>\n</blockquote>\n\n<p><strong>Console Output After Issue</strong></p>\n\n<blockquote>\n  <p>10:03:29.090 [http-nio-8003-exec-1] INFO \n  o.a.c.c.C.[Tomcat-1].[localhost].[/] - Initializing Spring\n  FrameworkServlet 'dispatcherServlet' 10:03:29.090\n  [http-nio-8003-exec-1] INFO  o.s.web.servlet.DispatcherServlet -\n  FrameworkServlet 'dispatcherServlet': initialization started\n  10:03:29.126 [http-nio-8003-exec-1] INFO \n  o.s.web.servlet.DispatcherServlet - FrameworkServlet\n  'dispatcherServlet': initialization completed in 36 ms 10:03:29.151\n  [http-nio-8003-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] -\n  Servlet.service() for servlet [dispatcherServlet] in context with path\n  [] threw exception [Request method 'GET' not supported] with root\n  cause org.springframework.web.HttpRequestMethodNotSupportedException:\n  Request method 'GET' not supported\n          at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.handleNoMatch(RequestMappingInfoHandlerMapping.java:204)\n  ~[spring-webmvc-4.2.4.RELEASE.jar!/:4.2.4.RELEASE]\n          at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.lookupHandlerMethod(AbstractHandlerMethodMapping.java:382)\n  ~[spring-webmvc-4.2.4.RELEASE.jar!/:4.2.4.RELEASE]\n          at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:322)\n  ~[spring-webmvc-4.2.4.RELEASE.jar!/:4.2.4.RELEASE]\n          at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:60)\n  ~[spring-webmvc-4.2.4.RELEASE.jar!/:4.2.4.RELEASE]\n          at org.springframework.web.servlet.handler.AbstractHandlerMapping.getHandler(AbstractHandlerMapping.java:351)\n  ~[spring-webmvc-4.2.4.RELEASE.jar!/:4.2.4.RELEASE]\n          at org.springframework.boot.actuate.autoconfigure.EndpointWebMvcChildContextConfiguration$CompositeHandlerMapping.getHandler(EndpointWebMvcChildContextConfiguration.java:212)\n  ~[spring-boot-actuator-1.3.2.RELEASE.jar!/:1.3.2.RELEASE]\n          at org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1120)\n  ~[spring-webmvc-4.2.4.RELEASE.jar!/:4.2.4.RELEASE]\n          at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:932)\n  ~[spring-webmvc-4.2.4.RELEASE.jar!/:4.2.4.RELEASE]\n          at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:893)\n  ~[spring-webmvc-4.2.4.RELEASE.jar!/:4.2.4.RELEASE]\n          at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:969)\n  ~[spring-webmvc-4.2.4.RELEASE.jar!/:4.2.4.RELEASE]\n          at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:860)\n  ~[spring-webmvc-4.2.4.RELEASE.jar!/:4.2.4.RELEASE]\n          at javax.servlet.http.HttpServlet.service(HttpServlet.java:622)\n  ~[tomcat-embed-core-8.0.30.jar!/:8.0.30]\n          at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:845)\n  ~[spring-webmvc-4.2.4.RELEASE.jar!/:4.2.4.RELEASE]\n          at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n  ~[tomcat-embed-core-8.0.30.jar!/:8.0.30]\n          at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:291)\n  ~[tomcat-embed-core-8.0.30.jar!/:8.0.30]\n          at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\n  ~[tomcat-embed-core-8.0.30.jar!/:8.0.30]\n          at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:212)\n  ~[tomcat-embed-core-8.0.30.jar!/:8.0.30]\n          at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\n  [tomcat-embed-core-8.0.30.jar!/:8.0.30]\n          at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\n  [tomcat-embed-core-8.0.30.jar!/:8.0.30]\n          at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141)\n  [tomcat-embed-core-8.0.30.jar!/:8.0.30]\n          at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\n  [tomcat-embed-core-8.0.30.jar!/:8.0.30]\n          at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\n  [tomcat-embed-core-8.0.30.jar!/:8.0.30]\n          at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:521)\n  [tomcat-embed-core-8.0.30.jar!/:8.0.30]\n          at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1096)\n  [tomcat-embed-core-8.0.30.jar!/:8.0.30]\n          at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:674)\n  [tomcat-embed-core-8.0.30.jar!/:8.0.30]\n          at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1500)\n  [tomcat-embed-core-8.0.30.jar!/:8.0.30]\n          at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1456)\n  [tomcat-embed-core-8.0.30.jar!/:8.0.30]\n          at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [na:1.8.0_51]\n          at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [na:1.8.0_51]\n          at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n  [tomcat-embed-core-8.0.30.jar!/:8.0.30]\n          at java.lang.Thread.run(Unknown Source) [na:1.8.0_51]</p>\n</blockquote>\n"},{"last_activity_date":1684784459,"question_id":76309403,"body":"<p>java android application does not receive a notification on android 12 and 13 when I use the package <code>'com.onesignal:OneSignal:3.12.2'</code>  now after upgrading the package to <code>com.onesignal:OneSignal:[4.0.0, 4.99.99]</code>  I still do not receive a notification. Can anyone help me find a solution to my problem?</p>\n"},{"comments":[{"comment_id":133197080,"body":"What exactly do you mean with <code>extending java.lang</code> and why do you want tp do that? Have you tried splitting <code>&lt;arg&gt;--patch-module java.base=src&lt;&#47;arg&gt;</code> into <code>&lt;arg&gt;--patch-module&lt;&#47;arg&gt;&lt;arg&gt;java.base=src&lt;&#47;arg&gt;</code>?"},{"comment_id":133197269,"body":"Because one of my classes is using the <code>package private</code> constructor of the String.class to avoid copying the char[] array. It&#39;s something I&#39;m looking to remove as the process of migration from JDK 1.8 to JDK 19.  Until then to get back to <code>--patch-module</code> - yes I tried splitting it up and it doesn&#39;t work. As I said <code>--patch-module</code> option is not in a BASIC group of Options for JavacTool argument options."},{"comment_id":133197701,"body":"Why do you need to the package private constructor instead of just using a reference to the original string? Modifying the <code>java.base</code> module for things like that is...a very bad idea"},{"comment_id":133198540,"body":"Try with <code>fork</code> options of m-compiler-p <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#fork\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-compiler-plugin/&hellip;</a>"},{"comment_id":133200687,"body":"@SlawomirJaranowski did that - it still uses JavacTool just as a separate process from the main one."},{"comment_id":133200706,"body":"@dan1st &#39;cause I want to avoid double allocation of the humongous objects on the heap when converting <code>char[]</code> to <code>String</code> - and I can&#39;t find a <code>String</code> constructor that allows me to pass <code>char[]</code> and reuse it - all of them underneath do the <code>copy</code> to a newly allocated array."},{"comment_id":133200809,"body":"Then you should probably think about implementing another way (e.g. using <code>StringBuilder</code>) instead of relying on unsupported and inaccessible features that require patching the java.base module. Aside from that, the <a href=\"https://github.com/openjdk/jdk/blob/d6716d2e5471ee794df8833430dd3171b565f78e/src/java.base/share/classes/java/lang/String.java#L4503\" rel=\"nofollow noreferrer\">package private constructor using a <code>char[]</code></a> <b>still copies all the data</b> /allocates a new object with it because <code>String</code> uses a <code>byte[]</code>."},{"comment_id":133200832,"body":"Also, creating strings with custom arrays compromises JDK safeguards/guarantees resulting in bugs that are very hard to debug."},{"comment_id":133200965,"body":"It is true since JDK 9 - prior to it Java used char[] (can&#39;t copy source code in the comment it clutters the response). With regards to the &quot;cleverness&quot; of the idea - I agree but it&#39;s another topic - StringBuilder creates a copy of a String thus duplicating amount of heap usage."},{"comment_id":133203515,"body":"You don&#39;t want to copy the array, therefore you use a method that is much more expensive. Doesn&#39;t sound like a great idea to me."},{"comment_id":133203948,"body":"Want to thank @dan1st for challenging the idea - made me dig down into <code>String</code> changes since JDK 1.7 and actually ended up refactoring the piece requiring that private constructor. Since they moved to <code>byte[]</code> I managed to refactor dependent methods to provide byte[] in the first place and remove that <code>char[]</code> altogether from the middle."},{"comment_id":133203954,"body":"Not sure if the question should remain open - <code>Javac API</code> still does not allow for <code>--patch-module</code> compiler option to be used through Maven 3?"},{"comment_id":133207034,"body":"Next options to try: <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#forceJavacCompilerUse\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-compiler-plugin/&hellip;</a>"},{"comment_id":133207715,"body":"You should set <code>&lt;maven.compiler.release&gt;8&lt;&#47;maven.compiler.release&gt;</code> while building with JDK19 also remove <code>package private constructor of the String.class to avoid copying the char[] array.</code>... there is a reason why a constructor of a class is package private... means do not use it... If everything build ... lift the version to 19..."},{"comment_id":133208917,"body":"I hope you refactored it in a way that doesn&#39;t require calling private or package-private members. Because you should <i>really</i> not do that unless you want your program to completely break beyond all repair."},{"comment_id":133209208,"body":"Code served its purpose for the past 8 years in production ... time to move on. Basically that code converted <code>byte[]</code> to <code>char[]</code> and it avoided making another copy of a <code>char[]</code> by using normal constructor. That&#39;s why it used <code>package private String(char[], boolean)</code>. Now since String support <code>byte[]</code> constructor I just let the <code>String(byte[], int, int, Charset)</code> constructor makes it&#39;s own <code>char[]</code> - memory footprint remains the same, no <code>package private</code> and thus moved the entire library into normal JAR packaging."},{"comment_id":133348710,"body":"Where does the <code>byte[]</code> array come from? In case of an external source, note that when you read a file into a <code>String</code> via <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/file/Files.html#readString(java.nio.file.Path,java.nio.charset.Charset)\" rel=\"nofollow noreferrer\"><code>Files.readString(path［,charset］)</code></a> there might be even less copying. In either case, it’s a good idea to use the builtin charset conversion, as it is highly optimized (for the commonly used charsets) and may use tricks, ordinary application code can’t do, but without compatibility issues."}],"answers":[{"answer_id":76309372,"body":"<p>Maven parses the argument as one long argument with embedded whitespace.</p>\n<p>This is what it is supposed to look like:</p>\n<pre><code>&lt;compilerArgs&gt;\n    &lt;arg&gt;--patch-module&lt;/arg&gt;\n    &lt;arg&gt;java.base=src&lt;/arg&gt;\n&lt;/compilerArgs&gt;\n</code></pre>\n<p>See the <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#compilerArgs\" rel=\"nofollow noreferrer\">Maven documentation</a> for example.</p>\n"}],"last_activity_date":1684784171,"question_id":75493155,"body":"<p>Maven 3.9.0 invalid flag <code>--patch-module</code> is what I get when I run <code>mvn clean compile</code> on my project that extends <code>java.lang</code> package. When I run <code>javac --patch-module java.base=src &lt;path-to-source&gt;</code> all is good.</p>\n<p>The reason is - Maven uses <code>com.sun.tools.javac.api.JavacTool</code> which when parsing <code>&lt;compilerArgs&gt;</code> is using only the <code>BASIC</code> Option group and <code>--patch-module</code> is in the <code>FILEMANAGER</code> group. This raises an <code>illegal flag</code> exception during <code>mvn clean compile</code>.</p>\n<p>Does anyone know how I can get it to work with Maven? I'd prefer not to make my CI pipeline using <code>javac</code> command line tool.</p>\n<p>Project structure is like:\nsrc -&gt; main -&gt; java -&gt; java.lang -&gt; </p>\n<p><code>pom.xml</code> looks like:</p>\n<pre><code>        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.10.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${java.source.sdk}&lt;/source&gt;\n                    &lt;target&gt;${java.source.sdk}&lt;/target&gt;\n                    &lt;compilerArgs&gt;\n                        &lt;arg&gt;--patch-module java.base=src&lt;/arg&gt;\n                    &lt;/compilerArgs&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n</code></pre>\n<p>Maven version:</p>\n<pre><code>Maven home: /opt/homebrew/Cellar/maven/3.9.0/libexec\nJava version: 18, vendor: Oracle Corporation, runtime: /Users/&lt;username&gt;/Library/Java/JavaVirtualMachines/openjdk-18/Contents/Home\nDefault locale: en_RS, platform encoding: UTF-8\nOS name: &quot;mac os x&quot;, version: &quot;12.6.2&quot;, arch: &quot;aarch64&quot;, family: &quot;mac&quot;\n</code></pre>\n<p>Used JDK 19 -&gt; same result. Used Maven 3.10.1 -&gt; same result.</p>\n<p>Full error is:</p>\n<p><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project commons-bootstrap: Fatal error compiling: error: invalid flag: --patch-module java.base=src -&gt; [Help 1]</code></p>\n<p>Exception stacktrace:</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: error: invalid flag: --patch-module java.base=src\n    at com.sun.tools.javac.main.Arguments.reportDiag (Arguments.java:889)\n    at com.sun.tools.javac.main.Arguments.doProcessArgs (Arguments.java:395)\n    at com.sun.tools.javac.main.Arguments.processArgs (Arguments.java:347)\n    at com.sun.tools.javac.main.Arguments.init (Arguments.java:246)\n    at com.sun.tools.javac.api.JavacTool.getTask (JavacTool.java:191)\n    at com.sun.tools.javac.api.JavacTool.getTask (JavacTool.java:119)\n    at com.sun.tools.javac.api.JavacTool.getTask (JavacTool.java:68)\n    at org.codehaus.plexus.compiler.javac.JavaxToolsCompiler.compileInProcess (JavaxToolsCompiler.java:135)\n    at org.codehaus.plexus.compiler.javac.JavacCompiler.performCompile (JavacCompiler.java:182)\n    at org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1209)\n    at org.apache.maven.plugin.compiler.CompilerMojo.execute (CompilerMojo.java:198)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:126)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:342)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:330)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:213)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:175)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.access$000 (MojoExecutor.java:76)\n    at org.apache.maven.lifecycle.internal.MojoExecutor$1.run (MojoExecutor.java:163)\n    at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute (DefaultMojosExecutionStrategy.java:39)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:160)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:105)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:73)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:53)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:118)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:260)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:172)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:100)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:821)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:270)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\n    at jdk.internal.reflect.DirectMethodHandleAccessor.invoke (DirectMethodHandleAccessor.java:104)\n    at java.lang.reflect.Method.invoke (Method.java:577)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n</code></pre>\n"},{"answers":[{"answer_id":71996799,"body":"<p>If you use ManyToMany relationship, It calls the Parent and the Child entity recursively when you try to get List of it. There must be ignorance in child entity like:</p>\n<p>In Parent entity you could call @JsonManagedReference</p>\n<p>In Child entity you could call @JsonBackReference</p>\n<p>Documentation is here:\n<a href=\"https://www.baeldung.com/jackson-bidirectional-relationships-and-infinite-recursion#managed-back-reference\" rel=\"nofollow noreferrer\">Bidirectional Relationships</a></p>\n<pre><code>public class User {\n    public int id;\n    public String name;\n\n    @JsonManagedReference\n    public List&lt;Item&gt; userItems;\n}\n\npublic class Item {\n    public int id;\n    public String itemName;\n\n    @JsonBackReference\n    public User owner;\n}\n</code></pre>\n<p>Or you can use @JsonIgnore on top of the Parent declaration in Child entity. Some of the case it gets worst when you use JsonIgnore.</p>\n<p>Documentation is here:\n<a href=\"https://www.baeldung.com/jackson-bidirectional-relationships-and-infinite-recursion#managed-back-reference\" rel=\"nofollow noreferrer\">Jackson Ignore Properties</a></p>\n<pre><code>public class MyDto {\n\n    private String stringValue;\n    @JsonIgnore\n    private int intValue;\n    private boolean booleanValue;\n\n    public MyDto() {\n        super();\n    }\n}\n</code></pre>\n<p>Or use @JsonIgnoreProperties when you need to ignore many fields</p>\n<pre><code>@JsonIgnoreProperties(value = { &quot;intValue&quot; })\npublic class MyDto {\n\n    private String stringValue;\n    private int intValue;\n    private boolean booleanValue;\n\n    public MyDto() {\n        super();\n    }\n}\n</code></pre>\n<p>!Enjoy</p>\n"}],"last_activity_date":1684783385,"question_id":71996608,"body":"<p>I have a problem with my Spring application- am practicing ManyToMany Relationship.\nI made two Entity- student, and groups for them- everything is good but when am trying to display them in postman i have spaghetti result like :</p>\n<p>{&quot;id&quot;:4,&quot;lastName&quot;:&quot;guzik&quot;,&quot;groups&quot;:[{&quot;id&quot;:1,&quot;groupName&quot;:&quot;grupka&quot;,&quot;students&quot;:\n....(shorter version, its about 1000 lines)\n[{&quot;id&quot;:1,&quot;lastName&quot;:&quot;smith&quot;,&quot;groups&quot;:[{}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}{&quot;timestamp&quot;:&quot;2022-04-25T08:25:31.387+00:00&quot;,&quot;status&quot;:200,&quot;error&quot;:&quot;OK&quot;,&quot;path&quot;:&quot;/api/student/4&quot;}</p>\n<p>What am doing wrong ?</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api&quot;)\npublic class MainController{\n    @Autowired\n    GroupRepo groupRepo;\n    @Autowired\n    StudentRepo studentRepo;\n\n    @GetMapping(&quot;/student/{id}&quot;)\n    ResponseEntity&lt;?&gt; getStudent(@PathVariable long id){\n        Optional&lt;Students&gt; student=studentRepo.findById(id);\n        return ResponseEntity.ok().body(student);\n    }\n    @GetMapping(&quot;/group/{id}&quot;)\n    ResponseEntity&lt;?&gt; getGroup(@PathVariable long id){\n        Optional&lt;Groupssss&gt; group=groupRepo.findById(id);\n        return ResponseEntity.ok().body(group);\n    }\n    @GetMapping(&quot;/student/{id}/groups&quot;)\n    ResponseEntity&lt;?&gt; studentGroups(@PathVariable long id){\n        Students student=studentRepo.findById(id).orElseThrow(()-&gt; new UsernameNotFoundException(&quot;student not found&quot;));\n        return ResponseEntity.ok().body(student.getGroups());\n    }\n    @PostMapping(&quot;/add&quot;)\n    @Transactional\n    ResponseEntity&lt;?&gt; addStudentToGroup(@RequestHeader long id) throws Exception{\n        Students student=studentRepo.findById(id)\n                .orElseThrow(()-&gt; new UsernameNotFoundException(&quot;student not found&quot;));\n\n        Groupssss group=groupRepo.findByGroupName(&quot;grupka&quot;).orElseThrow(Exception::new);\n\n        student.addGroup(group);\n        studentRepo.save(student);\n\n        return ResponseEntity.ok().build();\n    }\n\n@Entity\npublic class Groupssss {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n\n    private String groupName;\n\n    @ManyToMany(fetch = FetchType.LAZY,\n            cascade = {\n                    CascadeType.PERSIST,\n                    CascadeType.MERGE\n            },\n            mappedBy = &quot;groups&quot;)\n    private Set&lt;Students&gt; students=new HashSet&lt;&gt;();\n\n    public void setGroupName(String groupName) {\n        this.groupName = groupName;\n    }\n\n    public void setStudents(Set&lt;Students&gt; students) {\n        this.students = students;\n    }\n\n    public Set&lt;Students&gt; getStudents() {\n        return students;\n    }\n\n    public String getGroupName() {\n        return groupName;\n    }\n    public long getId() {\n        return id;\n    }\n    public void setId(long id) {\n        this.id = id;\n    }\n\n\n}\n\n@Entity\n@Table(name=&quot;students&quot;)\npublic class Students {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    long id;\n\n    String firstName;\n    String lastName;\n\n    @ManyToMany(fetch = FetchType.LAZY,\n            cascade = {\n                    CascadeType.PERSIST,\n                    CascadeType.MERGE\n            })\n    @JoinTable(name=&quot;student_group&quot;,\n            joinColumns = @JoinColumn(name=&quot;student_id&quot;),\n            inverseJoinColumns = @JoinColumn(name=&quot;group_id&quot;))\n    Set&lt;Groupssss&gt; groups=new HashSet&lt;&gt;();\n\n    public Students(){}\n\n    public Students(String firstName, String lastName){\n        this.firstName=firstName;\n        this.lastName=lastName;\n    }\n\n    public void addGroup(Groupssss group){\n        this.groups.add(group);\n        group.getStudents().add(this);\n    }\n\n    public Set&lt;Groupssss&gt; getGroups() {\n        return groups;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public String getName() {\n        return firstName;\n    }\n\n    public void setGroups(Set&lt;Groupssss&gt; groups) {\n        this.groups = groups;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public void setName(String firstName) {\n        this.firstName = firstName;\n    }\n    public long getId() {\n        return id;\n    }\n    public void setId(long id) {\n        this.id = id;\n    }\n}\n</code></pre>\n"},{"last_activity_date":1684783198,"question_id":76309300,"body":"<p>I have a bucket in europe-central2 but experiencing bad performance. Now we started to use direct access by links of <a href=\"https://storage.googleapis.com/bucket/..\" rel=\"nofollow noreferrer\">https://storage.googleapis.com/bucket/..</a>. but the response times is ~150ms for a 100kB file. Can it be improved somehow? Initially we used google cloud sdk storage but that was not good either.</p>\n"},{"comments":[{"comment_id":134541450,"body":"Lets say num is 5. <code>doubt(num--)</code> is same as calling <code>doubt(5)</code>, whereas both of <code>doubt(num-1)</code> and <code>doubt(--num)</code> are the same as calling <code>doubt(4)</code> and num inside the nested call is now 4... and so on"}],"answers":[{"answer_id":76295803,"body":"<pre><code>    doubt1(num--);\n</code></pre>\n<p>is internally implemented as</p>\n<pre><code>    int tmp = num;\n    num = num - 1;\n    doubt1(tmp);\n</code></pre>\n<p>That is, it recursively calls the <code>doubt1</code> method with the original value and therefore the condition <code>num == 0</code> is never reached.</p>\n"},{"answer_id":76295839,"body":"<p>When you invoke a method, the arguments are evaluated, and the resulting values are assigned as the initial values of the method's parameters.  The expressions <code>num--</code> and <code>--num</code> have the same side effect on <code>num</code>, but that is immaterial to the method invocation.  The two evaluate to different values: the former to the value of num <em>before</em> it is decremented, and the latter to the value of <code>num</code> <em>after</em> it is decremented.  The order of the operator relative to the operand is mnemonic for that.</p>\n<p>Thus, with</p>\n<pre><code>int n = 1;\nsome_method(n--);\n</code></pre>\n<p>the value passed to <code>some_method()</code> is 1, but with</p>\n<pre><code>int n = 1;\nsome_method(--n);\n</code></pre>\n<p>the value passed to <code>some_method()</code> is 0.</p>\n<p>In both cases, however, the value 0 is stored in <code>n</code> before execution of the body of <code>some_method()</code> commences.</p>\n"},{"answer_id":76295885,"body":"<p>First, with the unary decrement operator, the operation is occurring after, or before, the <em>statement</em>.<br />\nAs opposed to after, or before, the <em>expression</em>.</p>\n<p>So, in this situation, there will be a difference between <code>num--</code> and <code>--num</code>.</p>\n<ul>\n<li><p><code>doubt(num--)</code> is decrementing after the call statement, and not after the parameter expression.</p>\n</li>\n<li><p><code>double(--num)</code>, the opposite is happening, the decrement is happening before the parameter expression.</p>\n</li>\n</ul>\n<p>Essentially, from a compiler's stand-point, for the <code>doubt(--num)</code> statement, you have the following.</p>\n<ol>\n<li>Get <code>num</code></li>\n<li>Decrement <code>num</code></li>\n<li>Apply <code>num</code> as <code>doubt</code> parameter</li>\n<li>Execute <code>doubt</code> with parameter value</li>\n</ol>\n<p>Alternately, with <code>doubt(num--)</code> you have the following.</p>\n<ol>\n<li>Get <code>num</code></li>\n<li>Apply <code>num</code> as <code>doubt</code> parameter</li>\n<li>Decrement <code>num</code> (which has no effect, since the parameter value was already set)</li>\n<li>Execute <code>doubt</code> with parameter value</li>\n</ol>\n<p>Essentially, for the <code>doubt(num--)</code> statement, after the compiler has <code>num</code>, and is ready to call <code>doubt</code>, it will then decrement <code>num</code>.<br />\nAs opposed to having <code>num</code>, then decrementing, and then calling <code>doubt</code>.</p>\n"}],"last_activity_date":1684783170,"question_id":76295775,"body":"<p>This works fine because we are using the prefix decrement operator in the recursive call !</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    doubt1(5);\n}\n</code></pre>\n<p>Prefix Decrement:</p>\n<pre class=\"lang-java prettyprint-override\"><code>static void doubt(int num)\n{\n    if(num==0)\n        return;\n    System.out.println(num);\n    doubt(--num);\n}\n</code></pre>\n<p>Postfix Decrement:</p>\n<pre class=\"lang-java prettyprint-override\"><code>static void doubt1(int num)\n{\n    if(num==0)\n        return;\n    System.out.println(num);\n    doubt1(num--);\n}\n</code></pre>\n<p>But when we use the postfix decrement it can lead to stack over flow error , I understand why it's causing the error , but I want to know , if we use <code>num-1</code> in the recursive call it doesn't give the overflow error , my question is -&gt; why it's not giving the error coz it calculating the <code>num-1</code> and passing the value to the recursive call but not calculating the <code>num--</code> in the call ?</p>\n<p>Want the explanation why it calculating the <code>num-1</code> not <code>num--</code> in the recursive call ? Not why it's happening !</p>\n"},{"answers":[{"comments":[{"comment_id":99389044,"body":"I downloaded it from open jdk directly also <code>keytool -cacerts -list | find &quot;Zertifikat&quot; &#47;c</code> prints out 80"},{"comment_id":99389089,"body":"Then you have to manually verify which certificate in the trust chain for <code>google.de</code> is causing the problem and debug the problem."},{"comment_id":99389557,"body":"@Alex: Are you using a shared Internet connection such as a business, school, or other organization? Run <code>keytool -printcert -sslserver google.de</code> to see exactly what cert chain you are getting, and what CA it uses. (<i>I</i> get Google Internet Authority G3 under GlobalSign Root CA - R2.)"},{"comment_id":99389844,"body":"I just installed a new openjdk version and purged the last one... and still the same. I am on a home Internet connection. And this is what your command ouputs on my side <a href=\"https://pastebin.com/PJNU8nEE\" rel=\"nofollow noreferrer\">pastebin.com/PJNU8nEE</a>"}],"answer_id":56395151,"body":"<p>You should verify root certificates inside the <code>cacerts</code> keystore. The file is stored in <code>JAVA_HOME/jre/lib/security/cacerts</code> (or <code>JAVA_HOME/lib/security/cacerts</code> in newer Java versions). As per <a href=\"https://dzone.com/articles/openjdk-10-now-includes-root-ca-certificates\" rel=\"nofollow noreferrer\">OpenJDK 10 Now Includes Root CA Certificates</a> post you can use <code>keytool</code> command to count them:</p>\n<pre class=\"lang-none prettyprint-override\"><code>&gt;jdk-10\\bin\\keytool -cacerts -list | find &quot;Certificate&quot; /c\nEnter keystore password:  changeit\n80\n</code></pre>\n<p>Most likely your Java installation is corrupted and you should reinstall. Do note that OpenJDK is provided by multiple vendors and it could be that you are using an installer which doesn't install the root certificates.</p>\n"},{"answer_id":56396080,"body":"<p>Ended up installing oracle jdk 10 (also 10.0.2) and that works </p>\n\n<pre><code>C:\\Users\\Alexander\\Downloads&gt;java \"SSLPoke\" google.de 443\nSuccessfully connected\n</code></pre>\n"}],"last_activity_date":1684782934,"question_id":56395019,"body":"<p>I installed OpenJDK 10. What I did was just unpack it, set the PATH variable and the JAVA_HOME variable.</p>\n\n<p>Java even rejects the certificate of google.de (and all others I tried). I tested this by some dummy class that tries to connect. Outcome is:</p>\n\n<pre><code>C:\\Users\\Alexander\\Downloads&gt;java SSLPoke google.de 443\nsun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n        at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:385)\n        at java.base/sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:290)\n        at java.base/sun.security.validator.Validator.validate(Validator.java:264)\n        at java.base/sun.security.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:343)\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:226)\n        at java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:133)\n        at java.base/sun.security.ssl.ClientHandshaker.checkServerCerts(ClientHandshaker.java:1947)\n        at java.base/sun.security.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1777)\n        at java.base/sun.security.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:264)\n        at java.base/sun.security.ssl.Handshaker.processLoop(Handshaker.java:1098)\n        at java.base/sun.security.ssl.Handshaker.processRecord(Handshaker.java:1026)\n        at java.base/sun.security.ssl.SSLSocketImpl.processInputRecord(SSLSocketImpl.java:1137)\n        at java.base/sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1074)\n        at java.base/sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:973)\n        at java.base/sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1402)\n        at java.base/sun.security.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:733)\n        at java.base/sun.security.ssl.AppOutputStream.write(AppOutputStream.java:67)\n        at java.base/sun.security.ssl.AppOutputStream.write(AppOutputStream.java:81)\n        at SSLPoke.main(SSLPoke.java:31)\nCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n        at java.base/sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141)\n        at java.base/sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126)\n        at java.base/java.security.cert.CertPathBuilder.build(CertPathBuilder.java:297)\n        at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:380)\n        ... 18 more\n</code></pre>\n\n<p>Found a lot on the net how to add special certs to java but i think in my java installation something is wrong in general.</p>\n\n<p>So my question is what could cause such a thing???</p>\n"},{"comments":[{"comment_id":134564394,"body":"Why you can not run the application with some package in debug? At most the log collector will ignore those. Why do you need to do this?"}],"last_activity_date":1684782402,"question_id":76308088,"body":"<p>I have a library in my app that is logging everything at debug level. I cannot run my application with log level to set to debug for all or a subset of classes. This is  because the tool we use to collect logs from the machines ignores any messages logged below the INFO level. Is there a way to configure log4j2 to intercept the debug level messages and log them at info?</p>\n"},{"last_activity_date":1684782374,"question_id":69831969,"body":"<p>Recent Microsoft patch has broken our Java client connectivity to OPC server. Microsoft raised Authentication level to Packet Integrity. we are using Utgard java OPC library to connect to OPC server which internally uses Jinterop java based COM library. with the patch Our client is not able to add subscription groups to listen to the data changes on the OPC server. We couldn't find where in the library the authentication level is configured. if we can configure it ti DEFAULT the issue will be resolved.</p>\n<p>Please let me know if you have any pointers on this.</p>\n<pre><code>JISession session = JISession.createSession(ipAddress,userName,pasword);\nJIComServer  comServer = new JIComServer(JIClassId.valueOf(classId), address, session);\nIJIComObject instance = comServer.createInstance();\nIJIComObject opcServer = new OPCServer(instance);\n//after we will create access base groups and add them to the server, during attaching handler it is failing.\n</code></pre>\n<p>ERROR\n*JIException: The RPC server is unavailable. Please check if the COM server is up and running and that route to the COM Server is accessible (A simple &quot;Ping&quot; to the Server machine would do). Also please confirm if the Windows Firewall is not blocking DCOM access. [0x800706BA]\n<code>at org.jinterop.dcom.core.JIComServer.call(JIComServer.java:1004) at org.jinterop.dcom.core.JIComServer.call(JIComServer.java:951) at org.jinterop.dcom.core.JIComObjectImpl.call(JIComObjectImpl.java:293) at org.jinterop.dcom.core.JIComObjectImpl.call(JIComObjectImpl.java:159) at org.jinterop.dcom.core.JIFrameworkHelper.attachEventHandler(JIFrameworkHelper.java:285) at org.openscada.opc.dcom.da.impl.OPCGroupStateMgt.attach(OPCGroupStateMgt.java:179)</code>\n*</p>\n"},{"comments":[{"comment_id":4452598,"body":"Is Config class defined as a spring bean?"},{"comment_id":4452678,"body":"no? How would I do that with annotations?"},{"comment_id":4452792,"body":"I tried using &quot;@Component&quot; and &quot;@Controller&quot; on the class and neither worked"},{"comment_id":4452801,"body":"How its working in <code>Controller</code> then? What&#39;s different in your Controller?"},{"comment_id":4452811,"body":"That is what is so perplexing to me... the Config class is in the same package and everything... the only difference is that with my Controller that works I actually have a request mapping."}],"answers":[{"comments":[{"comment_id":4452849,"body":"Ahhh yeah that is the problem... I&#39;m calling the constructor myself.  How then, could I access these properties?  If I can&#39;t access these properties, that basically means I need to find some other way to load configuration, as the Spring properties loader just won&#39;t cut it if those properties are only available in certain scenarios."},{"comment_id":4452866,"body":"@Polaris878: Let the Spring instantiate it. Do we have any issues with that? Or do it yourself using <code>ResourceBundle</code>."}],"answer_id":4130642,"body":"<p>As its working with <code>@Controller</code>, it seems you are instantiating <code>Config</code> yourself. Let the Spring instantiate it.</p>\n"},{"comments":[{"comment_id":4459136,"body":"Hey skaffman, thanks for the advise...  The issue is that I&#39;m instantiating <code>Config</code> from a JSP.  I&#39;m not sure if I can find a way around that?  Maybe by using some sort of factory?"},{"comment_id":4459668,"body":"@Polaris878: My suggestion should still work for JSP-instantiated objects (any any object instantiated via reflection)"},{"comment_id":4465640,"body":"+1. I seize to know about Spring in that detail. Didn&#39;t touch it for years. Stupid workplace."},{"comment_id":20212899,"body":"+1 Oh my... this saves me! Was trying to read property files and wasn&#39;t sure why @Value was giving null"},{"comment_id":117592713,"body":"I tried all the guides, checked config like 50 times, used all the possible annotations.. Nearly went crazy, and then I decided to test if a controller sees the property.. Yes! And the service - too! In my case, that was actually the object used in the service initialized with <code>new</code> :D"},{"comment_id":126865528,"body":"Thanks, that was it. I was trying to instantiate a new object rather than autowire the class and let Spring do the work."}],"answer_id":4131838,"body":"<p>If instances of <code>Config</code> are being instantiated manually via <code>new</code>, then Spring isn't getting involved, and so the annotations will be ignored.</p>\n\n<p>If you can't change your code to make Spring instantiate the bean (maybe using a <code>prototype</code>-scoped bean), then the other option is to use Spring's load-time classloader weaving functionality (see <a href=\"http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/aop.html#aop-atconfigurable\" rel=\"noreferrer\">docs</a>). This is some low-level AOP which allows you to instantiate objects as you normally would, but Spring will pass them through the application context to get them wired up, configured, initialized, etc.</p>\n\n<p>It doesn't work on all platforms, though, so read the above documentation link to see if it'll work for you.</p>\n"},{"answer_id":10360087,"body":"<p>Add <code>&lt;context:spring-configured /&gt;</code> to you application context file.</p>\n\n<p>Then add the <code>@Configurable</code> annotation to <code>Config</code> class.</p>\n"},{"comments":[{"comment_id":89300376,"body":"what is myProperties here. could you please explain."},{"comment_id":96996556,"body":"It was #2 in my case. Switching from declaration as <code>new</code> to <code>@Autowired</code> solved my problem."},{"comment_id":133831355,"body":"I can confirm the properties are being set in my <code>@Service</code>class, however when I try to reference those fields by pulling it into another class via <code>@Autowired private MyService myservice</code>, those fields are now null.  Why is this happening?"}],"answer_id":18403937,"body":"<p>I had similar issues but was a newbie to Spring.\nI was trying to load properties into an @Service, and tried to use @Value to retrieve the property value with...</p>\n\n<pre><code>@Autowired\npublic @Value(\"#{myProperties['myValue']}\") String myValue;\n</code></pre>\n\n<p>I spend a whole day trying various combinations of annotations, but it always returned null.\nIn the end the answer as always is obvious after the fact.</p>\n\n<p>1) make sure Spring is scanning your class for annotations by including the package hierachy\nIn your servlet.xml (it will scan everything below the base value you insert.</p>\n\n<p></p>\n\n<p>2) Make sure you are NOT 'new'ing the class that you just told Spring to look at. Instead, you use @Autowire in the @Controller class. </p>\n\n<p>Everything in Spring is a Singleton, and what was happening was Spring loaded the values into its Singleton, then I had 'new'ed another instance of the class which did not contain the newly loaded values so it was always null. </p>\n\n<p>Instead in  the @Controller use...</p>\n\n<pre><code>@Autowired\nprivate MyService service; \n</code></pre>\n\n<p>Debugging...\nOne thing I did to find this was to extend my Service as follows...</p>\n\n<pre><code>@Service\npublic class MyService implements InitializingBean \n</code></pre>\n\n<p>Then put in debug statements in...</p>\n\n<pre><code>@Override\npublic void afterPropertiesSet() throws Exception {\n// TODO Auto-generated method stub\nLOGGER.debug(\"property myValue:\" + myValue);        \n}\n</code></pre>\n\n<p>Here I could see the value being set on initialization, and later when I printed it in a method it was null, so this was a good clue for me that it was not the same instance.</p>\n\n<p>Another clue to this error was that Tomcat complained of Timeouts trying to read from the Socket with Unable to parse HTTPheader... This was because Spring had created an instance of the service and so had I, so my one was doing the real work, and Spring was timing out on its instance.</p>\n"},{"comments":[{"comment_id":134564321,"body":"I think that maybe since your fields are <code>static</code>, you were running into a <a href=\"https://stackoverflow.com/a/76309224/1357094\">similar issue</a> that I did."},{"comment_id":134564434,"body":"in other words:  if your fields were not static, you might be able to do field annotation with <code>@Value</code>, instead of your method-level annotation (and maybe not even need setter methods altogether)."}],"answer_id":50442814,"body":"<p>You can also make your properties <code>private</code>, make sure your class is a Spring bean using <code>@Service</code> or <code>@Component</code> annotations so it always gets instantiated and finally add setter methods annotated with <code>@Value</code> . This ensures your properties will be assigned the values specified in your application.properties or yml config files.</p>\n<pre><code>@Service\npublic class Config {\n    private static String myProperty;\n\n    private static String myOtherProperty;\n\n    @Value(&quot;${my.value}&quot;)    \n    public void setMyProperty(String myValue) {\n    this.myProperty = myValue;}\n\n    @Value(&quot;${other.value}&quot;)\n    public void setMyOtherProperty(String otherValue) {\n    this.myOtherProperty = otherValue;}\n\n    //rest of your code...\n}\n</code></pre>\n"},{"comments":[{"comment_id":109961410,"body":"Great finding! In my case, I was overshading the regular spring boot dependencies with &quot;org.springframework.boot&quot; plugin"},{"comment_id":126058480,"body":"what is the correct annotation? this should be provided in an answer"},{"comment_id":126073490,"body":"I added the correct import to the answer"}],"answer_id":53729183,"body":"<p>See my answer <a href=\"https://stackoverflow.com/a/53729162/2434726\">here</a>.</p>\n<p>I ran into the same symptoms (<code>@Value</code>-annotated fields being <code>null</code>) but with a different underlying issue:</p>\n<p><code>import com.google.api.client.util.Value;</code></p>\n<p>Ensure that you are importing the correct <code>@Value</code> annotation class! Especially with the convenience of IDEs nowadays, this is a VERY easy mistake to make (I am using IntelliJ, and if you auto-import too quickly without reading WHAT you are auto-importing, you might waste a few hours like I did).</p>\n<p>The correct import is:</p>\n<p><code>org.springframework.beans.factory.annotation.Value</code></p>\n"},{"answer_id":71875574,"body":"<p>In my case in my unit test, executeScenarioRequest always is null</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RunWith(SpringRunner.class)\n@ExtendWith(MockitoExtension.class)\nclass ScenarioServiceTestOld {\n\n    @Value(&quot;classpath:scenario/SampleScenario.json&quot;)\n    Resource executeScenarioRequest;\n</code></pre>\n<p>Change <code>@ExtendWith(MockitoExtension.class)</code> to <code>@ExtendWith(SpringExtension.class)</code></p>\n"},{"answer_id":76309224,"body":"<p>Try to make sure the fields on your Bean, that want to be instantiated by <code>@Value</code>, are <strong>NOT <code>static</code></strong> (instead are <code>instance</code>).  I think something to do with the Spring Context loaded, needed for the Annotations to work, does not happen by the time of <code>static initialization</code> (and instead needs to have an instance loaded into Spring Context).</p>\n<p>This:</p>\n<pre><code>@Value(&quot;${my.property.name}&quot;)\nString myProperty\n</code></pre>\n<p>NOT this:</p>\n<pre><code>@Value(&quot;${my.property.name}&quot;)\nstatic String myProperty\n</code></pre>\n"}],"last_activity_date":1684782373,"question_id":4130486,"body":"<p>So, I have a simple properties file with the following entries:</p>\n\n<pre><code>my.value=123\nanother.value=hello world\n</code></pre>\n\n<p>This properties file is being loaded using a <code>PropertyPlaceHolderConfigurer</code>, which references the properties file above.</p>\n\n<p>I have the following class, for which I'm trying to load these properties in to like so:</p>\n\n<pre><code>public class Config\n{\n    @Value(\"${my.value}\")\n    private String mValue;\n\n    @Value(\"${another.value}\")\n    private String mAnotherValue;\n\n    // More below...\n}\n</code></pre>\n\n<p>The problem is that, <code>mValue</code> and <code>mAnotherValue</code> are ALWAYS null... yet in my Controllers, the value is being loaded just fine.  What gives?</p>\n"},{"comments":[{"comment_id":39476051,"body":"Java enums are not equivalent to enums in other languages. They are not meant to have a particular &quot;order&quot; and thus no concept of the &quot;next&quot; one."},{"comment_id":39476165,"body":"@Quirliom  <a href=\"http://stackoverflow.com/questions/3820149/enum-values-is-an-order-of-returned-enums-deterministic\" title=\"enum values is an order of returned enums deterministic\">stackoverflow.com/questions/3820149/&hellip;</a>"},{"comment_id":39476306,"body":"@Zhuiden yes the .values method exists but also uses Reflection and thus I wouldn&#39;t consider it a good way to do thing."}],"answers":[{"comments":[{"comment_id":39477678,"body":"in my case there is no way in creating an instance of enum."},{"comment_id":39477813,"body":"@Dmitrii You already have an instance. In fact you have 8 instances: one for each planet. That&#39;s what enum constants are: instances of the enum&#39;s class."},{"comment_id":39477929,"body":"i use this enum from outer class:  import static Planet.*;  setNextCurrent();  all i need from here to see what exactly currentPlanet is"},{"comment_id":39477967,"body":"@Dmitrii It doesn&#39;t matter that the import is static. Each constant is still an instance of the enum class, even though it&#39;s a static <i>member</i> of the class. Just try it and you&#39;ll see it works: <code>Planet p = MERCURY; p = p.getNext(); System.out.println(p)</code>."}],"answer_id":25324080,"body":"<p>That's not the right way to use an enum. You should not have a <code>boolean isCurrent</code> on each enum constant.</p>\n\n<p>Instead, have a <code>Planet currentPlanet</code> variable in one place (not on the enum):</p>\n\n<pre><code>Planet currentPlanet = Planet.MERCURY;\n</code></pre>\n\n<p>When you want to get the next one do:</p>\n\n<pre><code>currentPlanet = currentPlanet.getNext();\n</code></pre>\n"},{"comments":[{"comment_id":39477462,"body":"thx, but someFunction() is not static and i still can&#39;t use this without creating an instance of this enum. this code sample just snippet from all enum, and there is too much of logic in application based on static import."},{"comment_id":39478134,"body":"<code>Planet.MARS</code> is an instance of the enum, and if you&#39;re out of ideas, then so is <code>Planet.values()[0]</code>"},{"comment_id":39478767,"body":"i know about this, i mean in outer classes i use simple construction setNext() and then every class, which imported this enum as static, will be get current state via getCurrent()."},{"comment_id":39478850,"body":"oh you want a singleton selected field for the enum. You can hack that in easily by making the <code>Planet planet;</code> be a field variable of the enum itself"},{"comment_id":39479323,"body":"Well I had to make that static, but I think it works pretty okay."},{"comment_id":39479856,"body":"nice hack, changed return values()[(ordinal() + 1) % values().length]; and it works like a champ, ty."}],"answer_id":25324114,"body":"<p>I hope you do realize that you could just have something like the following:</p>\n\n<pre><code>public enum Planet { \n    MERCURY, VENUS, EARTH, MARS, JUPITER, SATURN, URANUS, NEPTUNE; \n\n    public Planet getNext() {\n        return this.ordinal() &lt; Planet.values().length - 1\n            ? Planet.values()[this.ordinal() + 1]\n            : null;\n    }\n}\n\nprivate Planet planet;\n\npublic void someFunction()\n{\n    planet = Planet.MARS;\n    planet = planet.getNext();\n    if(planet != null)\n    {\n        doStuff();\n    }\n}\n</code></pre>\n\n<p>And of course, you can just use a switch-case statement with the enum based on whichever is selected in the field variable: <a href=\"https://stackoverflow.com/questions/8108980/java-using-enum-with-switch-statement\">Java using enum with switch statement</a></p>\n\n<p>A boolean variable to determine which one is \"currently selected\" isn't necessary at all.</p>\n\n<p>EDIT: Based on your comment, you want a singleton instance of Planet. Luckily enough, you can use the enum itself for that:</p>\n\n<pre><code>public enum Planet { \n    MERCURY, VENUS, EARTH, MARS, JUPITER, SATURN, URANUS, NEPTUNE; \n\n    private static Planet currentPlanet = MERCURY;\n\n    public static Planet getCurrentPlanet()\n    {\n        return currentPlanet;\n    }\n\n    public static boolean setToNext() {\n        boolean retVal = this.ordinal() &lt; Planet.values().length - 1;\n        currentPlanet = this.ordinal() &lt; Planet.values().length - 1\n                ? Planet.values()[this.ordinal() + 1]\n                : Planet.values()[0];\n        return retVal; //returns false when it was the last element of the enum\n    }\n}\n\n\npublic void doSomething()\n{\n    Planet planet;\n    do\n    {\n        planet = Planet.getCurrentPlanet();\n        //do things with planet, like write out their names\n        System.out.println(planet.name());\n    }\n    while(Planet.setToNext());\n}\n</code></pre>\n"},{"comments":[{"comment_id":39513046,"body":"yeah, that&#39;s pretty much what I added in my edit, but I also made it possible to iterate through all enum values using the setNext() function so that there would be an indicator that you&#39;ve processed every element."}],"answer_id":25326265,"body":"<pre><code>    public enum Planet {\n        EARTH,\n        MARS;\n\n        public static Planet current = EARTH;\n\n        Planet() {\n        }\n\n        public Planet getNext() {\n            return values()[(ordinal() + 1) % values().length];\n        }\n\n        public static void setNext(){\n            current = current.getNext();\n        }\n\n        public static Planet getCurrent(){\n            return current;\n        }\n\n\n    }\n\nimport static com.test.Planet.*;\n\n    public class Main {\n        public static void main(String[] args){\n            getCurrent();\n            setNext();\n        }\n    }\n</code></pre>\n"}],"last_activity_date":1684781778,"question_id":25323916,"body":"<pre><code>public enum Planet { \n    MERCURY(false),\n    VENUS(false),\n    EARTH(false),\n    MARS(false),\n    JUPITER(false),\n    SATURN(false),\n    URANUS(false),\n    NEPTUNE(false); \n}\n\n    public boolean isCurrent;\n\n    Planet(boolean isCurrent){\n       this.isCurrent = isCurrent;\n    }\n\n    public static void next(){\n    if(planet == VENUS){\n        VENUS.isCurrent = false;\n        EARTH.isCurrent = true;\n        MARS.isCurrent = false;\n        JUPITER.isCurrent = false;\n        SATURN.isCurrent = false;\n        URANUS.isCurrent = false;\n        NEPTUNE.isCurrent = false;\n    }\n    if(planet == EARTH){\n        VENUS.isCurrent = false;\n        EARTH.isCurrent = false;\n        MARS.isCurrent = true;\n        JUPITER.isCurrent = false;\n        SATURN.isCurrent = false;\n        URANUS.isCurrent = false;\n        NEPTUNE.isCurrent = false;\n    }\n...  \n}\n</code></pre>\n\n<p>i found this solution,</p>\n\n<pre><code>private enum Planet { MERCURY, VENUS, EARTH, MARS, JUPITER, SATURN, URANUS, NEPTUNE;\n    public Planet getNext() {\n        return this.ordinal() &lt; Planet.values().length - 1\n            ? Planet.values()[this.ordinal() + 1]\n            : null;\n    }\n}\n</code></pre>\n\n<p>but i'm unable to use <strong>this</strong> cuz this enumeration is imported as static in other classes;</p>\n\n<p>For now i use follow construction:</p>\n\n<pre><code> public static Planet setNewCurrent(){\n    for(Planet planet : Planet.values()){\n        if(planet == VENUS){\n            VENUS.isCurrent = false;\n            EARTH.isCurrent = true;\n            MARS.isCurrent = false;\n            JUPITER.isCurrent = false;\n            SATURN.isCurrent = false;\n            URANUS.isCurrent = false;\n            NEPTUNE.isCurrent = false;\n        }\n        if(planet == EARTH){\n            VENUS.isCurrent = false;\n            EARTH.isCurrent = false;\n            MARS.isCurrent = true;\n            JUPITER.isCurrent = false;\n            SATURN.isCurrent = false;\n            URANUS.isCurrent = false;\n            NEPTUNE.isCurrent = false;\n        }\n...\n    }\n}   \n</code></pre>\n\n<p>Does anyone know some convenient way to getNextPlanet() like this </p>\n\n<pre><code>planet.getNext().isCurrent = true;\n</code></pre>\n"},{"answers":[{"comments":[{"comment_id":80028178,"body":"Is there a way for me to create a class instead of repeating the same code for every class?"},{"comment_id":80028186,"body":"I tried creating a static class, but i have problem with getSupportFragmentManager"},{"comment_id":80068977,"body":"pass the SupportFragmentManager instance to the custom static method as an argument."}],"answer_id":45539740,"body":"<p>This is the code snippet used to forward to the <code>detail page</code>.</p>\n\n<pre><code> if (mTwoPane) {\n                    Bundle arguments = new Bundle();\n                    arguments.putString(ItemDetailFragment.ARG_ITEM_ID, holder.mItem.id);\n                    ItemDetailFragment fragment = new ItemDetailFragment();\n                    fragment.setArguments(arguments);\n                    getSupportFragmentManager().beginTransaction()\n                            .replace(R.id.item_detail_container, fragment)\n                            .commit();\n                } else {\n                    Context context = v.getContext();\n                    Intent intent = new Intent(context, ItemDetailActivity.class);\n                    intent.putExtra(ItemDetailFragment.ARG_ITEM_ID, holder.mItem.id);\n\n                    context.startActivity(intent);\n                }\n</code></pre>\n\n<p>You can forward to any page by changing the value of  <code>arguments.putString(ItemDetailFragment.ARG_ITEM_ID, holder.mItem.id);</code></p>\n\n<p>Use the above snippets in the <code>onClick</code> events of <code>next</code> and <code>prev</code> buttons. cheers :)</p>\n"}],"last_activity_date":1684781693,"question_id":45539547,"body":"<p>I have created a sample app using the \"<em>Master / Detail flow</em>\" activity. I have added two buttons, <strong>Next</strong> and <strong>Prev</strong> to the detail activity. How to I set programmatically the buttons actions instead having to go back and forth between the <strong>List</strong>  and <strong>detail</strong>?</p>\n\n<p><a href=\"https://i.stack.imgur.com/Rswzu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Rswzu.png\" alt=\"app&#39;s screenshot\"></a></p>\n\n<p><strong>item_detail.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n              android:layout_width=\"match_parent\"\n              android:layout_height=\"match_parent\"\n              xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n              android:orientation=\"vertical\"&gt;\n\n    &lt;LinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:paddingStart=\"30dp\"\n        android:paddingEnd=\"30dp\"\n        android:weightSum=\"4\"\n        android:gravity=\"end\"\n        android:orientation=\"horizontal\"&gt;\n\n        &lt;Button\n            android:id=\"@+id/button_prev\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_weight=\"1\"\n            android:text=\"Prev\"/&gt;\n\n        &lt;Button\n            android:id=\"@+id/button_next\"\n            android:layout_width=\"0dp\"\n            android:layout_height=\"wrap_content\"\n            android:layout_weight=\"1\"\n            android:text=\"Next\"/&gt;\n    &lt;/LinearLayout&gt;\n\n    &lt;TextView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n              xmlns:tools=\"http://schemas.android.com/tools\"\n              android:id=\"@+id/item_detail\"\n              style=\"?android:attr/textAppearanceLarge\"\n              android:layout_width=\"match_parent\"\n              android:layout_height=\"match_parent\"\n              android:padding=\"16dp\"\n              android:textIsSelectable=\"true\"\n              tools:context=\"co.test.app.sample.itemapplication.ItemDetailFragment\"/&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n<p><strong>activity_item_detail.xml</strong></p>\n\n<pre><code>&lt;android.support.design.widget.CoordinatorLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n                                                 xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n                                                 xmlns:tools=\"http://schemas.android.com/tools\"\n                                                 android:layout_width=\"match_parent\"\n                                                 android:layout_height=\"match_parent\"\n                                                 android:fitsSystemWindows=\"true\"\n                                                 tools:context=\"co.test.app.sample.itemapplication.ItemDetailActivity\"\n                                                 tools:ignore=\"MergeRootFrame\"&gt;\n\n    &lt;android.support.design.widget.AppBarLayout\n        android:id=\"@+id/app_bar\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"@dimen/app_bar_height\"\n        android:fitsSystemWindows=\"true\"\n        android:theme=\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\"&gt;\n\n        &lt;android.support.design.widget.CollapsingToolbarLayout\n            android:id=\"@+id/toolbar_layout\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:fitsSystemWindows=\"true\"\n            app:contentScrim=\"?attr/colorPrimary\"\n            app:layout_scrollFlags=\"scroll|exitUntilCollapsed\"\n            app:toolbarId=\"@+id/toolbar\"&gt;\n\n            &lt;android.support.v7.widget.Toolbar\n                android:id=\"@+id/detail_toolbar\"\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"?attr/actionBarSize\"\n                app:layout_collapseMode=\"pin\"\n                app:popupTheme=\"@style/ThemeOverlay.AppCompat.Light\"/&gt;\n        &lt;/android.support.design.widget.CollapsingToolbarLayout&gt;\n\n    &lt;/android.support.design.widget.AppBarLayout&gt;\n\n    &lt;android.support.v4.widget.NestedScrollView\n        android:id=\"@+id/item_detail_container\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        app:layout_behavior=\"@string/appbar_scrolling_view_behavior\"&gt;\n\n    &lt;/android.support.v4.widget.NestedScrollView&gt;\n\n&lt;/android.support.design.widget.CoordinatorLayout&gt;\n</code></pre>\n\n<p><strong>DummyContent.java</strong></p>\n\n<pre><code>package co.test.app.sample.itemapplication.dummy;\n\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\n/**\n * Helper class for providing sample content for user interfaces created by\n * Android template wizards.\n * &lt;p&gt;\n * TODO: Replace all uses of this class before publishing your app.\n */\npublic class DummyContent {\n\n    /**\n     * An array of sample (dummy) items.\n     */\n    public static final List&lt;DummyItem&gt; ITEMS = new ArrayList&lt;DummyItem&gt;();\n\n    /**\n     * A map of sample (dummy) items, by ID.\n     */\n    public static final Map&lt;String, DummyItem&gt; ITEM_MAP = new HashMap&lt;String, DummyItem&gt;();\n\n    private static final int COUNT = 25;\n\n    static {\n        // Add some sample items.\n        for (int i = 1; i &lt;= COUNT; i++) {\n            addItem(createDummyItem(i));\n        }\n    }\n\n    private static void addItem(DummyItem item) {\n        ITEMS.add(item);\n        ITEM_MAP.put(item.id, item);\n    }\n\n    private static DummyItem createDummyItem(int position) {\n        return new DummyItem(String.valueOf(position), \"Item \" + position, makeDetails(position));\n    }\n\n    private static String makeDetails(int position) {\n        StringBuilder builder = new StringBuilder();\n        builder.append(\"Details about Item: \").append(position);\n        for (int i = 0; i &lt; position; i++) {\n            builder.append(\"\\nMore details information here.\");\n        }\n        return builder.toString();\n    }\n\n    /**\n     * A dummy item representing a piece of content.\n     */\n    public static class DummyItem {\n        public final String id;\n        public final String content;\n        public final String details;\n\n        public DummyItem(String id, String content, String details) {\n            this.id = id;\n            this.content = content;\n            this.details = details;\n        }\n\n        @Override\n        public String toString() {\n            return content;\n        }\n    }\n}\n</code></pre>\n\n<p><strong>ItemDetailActivity.java</strong></p>\n\n<pre><code>package co.test.app.sample.itemapplication;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.support.design.widget.FloatingActionButton;\nimport android.support.design.widget.Snackbar;\nimport android.support.v7.widget.Toolbar;\nimport android.view.View;\nimport android.support.v7.app.AppCompatActivity;\nimport android.support.v7.app.ActionBar;\nimport android.view.MenuItem;\n\n/**\n * An activity representing a single Item detail screen. This\n * activity is only used narrow width devices. On tablet-size devices,\n * item details are presented side-by-side with a list of items\n * in a {@link ItemListActivity}.\n */\npublic class ItemDetailActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_item_detail);\n        Toolbar toolbar = (Toolbar) findViewById(R.id.detail_toolbar);\n        setSupportActionBar(toolbar);\n\n        // Show the Up button in the action bar.\n        ActionBar actionBar = getSupportActionBar();\n        if (actionBar != null) {\n            actionBar.setDisplayHomeAsUpEnabled(true);\n        }\n\n        // savedInstanceState is non-null when there is fragment state\n        // saved from previous configurations of this activity\n        // (e.g. when rotating the screen from portrait to landscape).\n        // In this case, the fragment will automatically be re-added\n        // to its container so we don't need to manually add it.\n        // For more information, see the Fragments API guide at:\n        //\n        // http://developer.android.com/guide/components/fragments.html\n        //\n        if (savedInstanceState == null) {\n            // Create the detail fragment and add it to the activity\n            // using a fragment transaction.\n            Bundle arguments = new Bundle();\n            arguments.putString(ItemDetailFragment.ARG_ITEM_ID,\n                    getIntent().getStringExtra(ItemDetailFragment.ARG_ITEM_ID));\n            ItemDetailFragment fragment = new ItemDetailFragment();\n            fragment.setArguments(arguments);\n            getSupportFragmentManager().beginTransaction()\n                    .add(R.id.item_detail_container, fragment)\n                    .commit();\n        }\n    }\n\n    @Override\n    public boolean onOptionsItemSelected(MenuItem item) {\n        int id = item.getItemId();\n        if (id == android.R.id.home) {\n            // This ID represents the Home or Up button. In the case of this\n            // activity, the Up button is shown. For\n            // more details, see the Navigation pattern on Android Design:\n            //\n            // http://developer.android.com/design/patterns/navigation.html#up-vs-back\n            //\n            navigateUpTo(new Intent(this, ItemListActivity.class));\n            return true;\n        }\n        return super.onOptionsItemSelected(item);\n    }\n}\n</code></pre>\n\n<p><strong>ItemListActivity.java</strong></p>\n\n<pre><code>package co.test.app.sample.itemapplication;\n\nimport android.content.Context;\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.support.annotation.NonNull;\nimport android.support.v7.app.AppCompatActivity;\nimport android.support.v7.widget.RecyclerView;\nimport android.support.v7.widget.Toolbar;\nimport android.support.design.widget.FloatingActionButton;\nimport android.support.design.widget.Snackbar;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.TextView;\n\n\nimport co.test.app.sample.itemapplication.dummy.DummyContent;\n\nimport java.util.List;\n\n/**\n * An activity representing a list of Items. This activity\n * has different presentations for handset and tablet-size devices. On\n * handsets, the activity presents a list of items, which when touched,\n * lead to a {@link ItemDetailActivity} representing\n * item details. On tablets, the activity presents the list of items and\n * item details side-by-side using two vertical panes.\n */\npublic class ItemListActivity extends AppCompatActivity {\n\n    /**\n     * Whether or not the activity is in two-pane mode, i.e. running on a tablet\n     * device.\n     */\n    private boolean mTwoPane;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_item_list);\n\n        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);\n        setSupportActionBar(toolbar);\n        toolbar.setTitle(getTitle());\n\n        FloatingActionButton fab = (FloatingActionButton) findViewById(R.id.fab);\n        fab.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                Snackbar.make(view, \"Replace with your own action\", Snackbar.LENGTH_LONG)\n                        .setAction(\"Action\", null).show();\n            }\n        });\n\n        View recyclerView = findViewById(R.id.item_list);\n        assert recyclerView != null;\n        setupRecyclerView((RecyclerView) recyclerView);\n\n        if (findViewById(R.id.item_detail_container) != null) {\n            // The detail container view will be present only in the\n            // large-screen layouts (res/values-w900dp).\n            // If this view is present, then the\n            // activity should be in two-pane mode.\n            mTwoPane = true;\n        }\n    }\n\n    private void setupRecyclerView(@NonNull RecyclerView recyclerView) {\n        recyclerView.setAdapter(new SimpleItemRecyclerViewAdapter(DummyContent.ITEMS));\n    }\n\n    public class SimpleItemRecyclerViewAdapter\n            extends RecyclerView.Adapter&lt;SimpleItemRecyclerViewAdapter.ViewHolder&gt; {\n\n        private final List&lt;DummyContent.DummyItem&gt; mValues;\n\n        public SimpleItemRecyclerViewAdapter(List&lt;DummyContent.DummyItem&gt; items) {\n            mValues = items;\n        }\n\n        @Override\n        public ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n            View view = LayoutInflater.from(parent.getContext())\n                    .inflate(R.layout.item_list_content, parent, false);\n            return new ViewHolder(view);\n        }\n\n        @Override\n        public void onBindViewHolder(final ViewHolder holder, int position) {\n            holder.mItem = mValues.get(position);\n            holder.mIdView.setText(mValues.get(position).id);\n            holder.mContentView.setText(mValues.get(position).content);\n\n            holder.mView.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View v) {\n                    if (mTwoPane) {\n                        Bundle arguments = new Bundle();\n                        arguments.putString(ItemDetailFragment.ARG_ITEM_ID, holder.mItem.id);\n                        ItemDetailFragment fragment = new ItemDetailFragment();\n                        fragment.setArguments(arguments);\n                        getSupportFragmentManager().beginTransaction()\n                                .replace(R.id.item_detail_container, fragment)\n                                .commit();\n                    } else {\n                        Context context = v.getContext();\n                        Intent intent = new Intent(context, ItemDetailActivity.class);\n                        intent.putExtra(ItemDetailFragment.ARG_ITEM_ID, holder.mItem.id);\n\n                        context.startActivity(intent);\n                    }\n                }\n            });\n        }\n\n        @Override\n        public int getItemCount() {\n            return mValues.size();\n        }\n\n        public class ViewHolder extends RecyclerView.ViewHolder {\n            public final View mView;\n            public final TextView mIdView;\n            public final TextView mContentView;\n            public DummyContent.DummyItem mItem;\n\n            public ViewHolder(View view) {\n                super(view);\n                mView = view;\n                mIdView = (TextView) view.findViewById(R.id.id);\n                mContentView = (TextView) view.findViewById(R.id.content);\n            }\n\n            @Override\n            public String toString() {\n                return super.toString() + \" '\" + mContentView.getText() + \"'\";\n            }\n        }\n    }\n}\n</code></pre>\n"},{"answers":[{"answer_id":47824079,"body":"<p>Just check the value of guess and if it doesn't satisfy the requirements ask again like this</p>\n\n<pre><code>    int guess = input.nextInt(); //user's guess / HiLo\n\n    //invalid user entry\n    while(guess != 1 &amp;&amp; guess != 2) \n    {\n        System.out.println(\"Invalid entry\"); // print incorrect guess entry input\n        System.out.println(\"To guess higher enter [1], or to guess lower, enter [2].\");\n        guess = input.nextInt(); //reset scanner \"input\"\n    }\n</code></pre>\n\n<p>Something like this will work for anything entered by the user where we grab the entire line and see if it matches a digit, if it does then we parse the input into an integer and report if the value was not a 1 or 2 and continue to ask for input until the user enters the desired value of a 1 or 2</p>\n\n<pre><code>      int guess = 0;\n      while(guess != 1 &amp;&amp; guess != 2)\n      {\n          String inputFromUser = input.nextLine();\n          if(inputFromUser.matches(\"\\\\d+\"))\n          {\n              guess = Integer.parseInt(inputFromUser);\n              if(guess != 1 &amp;&amp; guess != 2)\n                  System.out.println(\"Value must be either a 1 or 2\");\n          }\n          else\n              System.out.println(\"Invalid entry\");\n      }\n</code></pre>\n"}],"last_activity_date":1684781625,"question_id":47823962,"body":"<p>I have created a game that prints a random roll number between 1 &amp; 10. The system then asks the user if they want to guess higher [1] or lower [2] for a second roll number. Based on their guess the system will print either \"Draw!\", \"You guessed incorrectly.\" or \"You guessed correctly.\". The program then prompts the user as to whether they would like to restart the program (yes [y]) using a while loop.</p>\n\n<p>However, now I am trying to validate the integer 'Guess' user input so that only [1]/[2] can be entered respectively. I am having difficulty setting these conditions using the hasNext() method using while loop. My program now doesn't continue after inserting the while loop upon correct or incorrect user entry.</p>\n\n<p>See \"//invalid user entry\" block</p>\n\n<p>Code:</p>\n\n<pre><code>public static void main(String args[]) {\n    String replay = \"y\";\n    Scanner input = new Scanner (System.in);\n    while(replay.equals(\"y\"))\n    {\n\n        //roll one\n        int rNum1 = (int)(Math.random() * 11); //declare random roll one,  gives result between 1 and 10\n\n        //print roll one\n        System.out.println(\"You roll the 10-sided die.\"); \n        System.out.println(\"It lands on \" + rNum1 + \".\");\n        System.out.println(); //space\n\n        //User guess\n        System.out.println(\"Will a second die roll higher or lower?\");\n        System.out.println(\"To guess higher enter [1], or to guess lower, enter [2].\");\n\n        //roll two\n        int rNum2 = (int)(Math.random() * 11); //declare random roll two\n        int guess = input.nextInt(); //user's guess / HiLo\n\n        //invalid user entry\n        while(!input.hasNextInt() || (guess != 1 &amp;&amp; guess != 2)) \n        {\n            System.out.println(\"Invalid entry\"); // print incorrect guess entry input\n            System.out.println(\"To guess higher enter [1], or to guess lower, enter [2].\");\n            input.next(); //reset scanner \"input\"\n        }\n\n        //print roll two\n        System.out.println(); //space\n        System.out.println(\"You roll the die again.\"); \n        System.out.println(\"It lands on \" + rNum2 + \".\");\n        System.out.println(); //space\n\n\n        if (guess == 1) //guessed higher\n        {\n            if (rNum1 == rNum2)\n            {\n                System.out.println(\"Draw!\");\n            }\n            else if (rNum1 &gt; rNum2)\n            {\n                System.out.println(\"You guessed wrongly.\");\n            }\n            else\n            {\n                System.out.println(\"You guessed correctly!\");\n            }\n        }\n\n        if (guess == 2) //guessed lower\n        {\n            if (rNum1 == rNum2)\n            {\n                System.out.println(\"Draw!\");\n            }\n            else if (rNum1 &gt; rNum2)\n            {\n                System.out.println(\"You guessed correctly!\");\n            }\n            else\n            {\n                System.out.println(\"You guessed wrongly.\");\n            }\n        }\n        System.out.println(\"Would you like to play again? Enter [y] for yes.\");\n        replay = input.nextLine();\n    }\n}\n</code></pre>\n"},{"comments":[{"comment_id":134564189,"body":"check <a href=\"https://cassiomolin.com/2019/06/10/using-http-patch-in-spring/\" rel=\"nofollow noreferrer\">cassiomolin.com/2019/06/10/using-http-patch-in-spring</a>"}],"last_activity_date":1684781592,"question_id":76309049,"body":"<p>I want convert List object to JsonPatch. So that i can pass it into @PatchMapping method along with UUID to patch some Employee attributers.</p>\n<pre><code>[\n    {\n        &quot;op&quot;: &quot;replace&quot;,\n        &quot;path&quot;: &quot;/firstName&quot;,\n        &quot;value&quot;: &quot;Bob&quot;\n    },\n    {\n        &quot;op&quot;: &quot;replace&quot;,\n        &quot;path&quot;: &quot;/lastName&quot;,\n        &quot;value&quot;: &quot;Mayo&quot;\n    },\n    {\n        &quot;op&quot;: &quot;replace&quot;,\n        &quot;path&quot;: &quot;/department&quot;,\n        &quot;value&quot;: &quot;HR&quot;\n    }\n]\n</code></pre>\n<p>convert a List of Employee object into jsonPatch.</p>\n"},{"comments":[{"comment_id":134564758,"body":"Do you realize no one here will be able to help with an issue so abstractly described?"}],"last_activity_date":1684781530,"question_id":76309127,"body":"<p>We facing one issue about in Rest API passing the document in base64 format along with some other data and final request type as JSON. Sometimes request is capture in tomcat server but payload alone NULL.</p>\n<p>We've NGINX as load balance and then Apache Service Mix after that only tomcat server is present.</p>\n<p>Using Tomcat 8.5</p>\n<p>Kindly provide your suggestion to resolve.</p>\n<p>I've tried to increase the RAM size to 32 GB but it fails.</p>\n"},{"last_activity_date":1684781385,"question_id":76309108,"body":"<p><strong>I have an Android App build with Android Studio. This app only shows a WebView:</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n\n    &lt;WebView\n        android:id=&quot;@+id/webview&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot; /&gt;\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p><strong>Below is the code of my mainActivity:</strong></p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    private WebView myWebView;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        myWebView=(WebView) findViewById(R.id.webview);\n        myWebView.setWebViewClient(new WebViewClient());\n        myWebView.loadUrl(&quot;URL HERE&quot;);\n        WebSettings webSettings=myWebView.getSettings();\n        webSettings.setJavaScriptEnabled(true);\n\n        webSettings.setDomStorageEnabled(true);\n        webSettings.setDatabaseEnabled(true);\n\n        CookieManager.getInstance().setAcceptCookie(true);\n        CookieManager.getInstance().setAcceptThirdPartyCookies(myWebView, true);\n\n    }\n\n    @Override\n    public void onBackPressed() {\n        if (myWebView.canGoBack()) {\n            myWebView.goBack();\n        } else {\n            super.onBackPressed();\n        }\n    }\n\n}\n</code></pre>\n<p>If I put random website in the WebView that has a remember me functionality on the login page, this works just fine. But when I put in the URL of my Blazor Server App, the remember me does not work. One time it worked for like half a day, but then I got logged out and it never worked again.</p>\n<p>My Blazor Server uses the standard Authentication of Blazor Server App with IdentityUsers (Authentication type: <code>Individual Accounts</code>)</p>\n<p><strong>How can I solve this?</strong></p>\n"},{"comments":[{"comment_id":134514541,"body":"In Java <code>ZoneInfo</code> has this code <code>aliases.put(&quot;MST&quot;, &quot;America&#47;Denver&quot;);</code>, instead of MST try to use the city instead"},{"comment_id":134514866,"body":"java&#39;s output is correct: the purpose of different names for the same TZ (MDT/MST in your case) is just to provide extra information to a <b>human</b> whether date/time specified is affected by DST or not."},{"comment_id":134518135,"body":"This is happening because ZonedDateTime.parse uses ZonedDateTime.from, whose <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/ZonedDateTime.html#from(java.time.temporal.TemporalAccessor)\" rel=\"nofollow noreferrer\">documentation</a> states: “The conversion will first obtain a ZoneId from the temporal object, falling back to a ZoneOffset if necessary.”  So &quot;MST&quot; is converted to a ZoneId, which always has DST rules in effect."},{"comment_id":134521484,"body":"Can&#39;t you fix that using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatterBuilder.html#appendZoneText-java.time.format.TextStyle-java.util.Set-\" rel=\"nofollow noreferrer\"><code>DateTimeFormatterBuilder.appendZoneText(TextStyle, Set)</code></a> giving America/Phoenix or another time zone not using summer time (DST)? I believe so and would recommend it."},{"comment_id":134546499,"body":"Good proposal. Unfortunately this method adds <code>new ZoneTextPrinterParser</code> and not replace the existed class that has <code>preferredZone=null</code> which is trying to parse invalid index"},{"comment_id":134562997,"body":"I don’t think java.time is able to parse a summer time aware time zone name or abbreviation and give us the information whether it indicated summer time (DST) or not, which is probably a flaw in the design. But if we only need to make sure MST is parsed as MST without summer time, we can specify to prefer a zone that uses MST all year, for example America/Dawson_Creek or America/Fort_Nelson. You probably know already which time zone is appropriate for your situation."},{"comment_id":134563008,"body":"While I don’t know how it’s implemented, <a href=\"https://rextester.com/EDGDAL31804\" rel=\"nofollow noreferrer\">here is how to parse your texts using <code>DateTimeFormatterBuilder.appendZoneText(TextStyle, Set&lt;ZoneId&gt;)</code></a> and getting MST every time (offset -7) and never MDT (-6). We should of course leave out <code>zzz</code> form the format pattern string when specifying the zone in the other way. As you can see, the code works."},{"comment_id":134563032,"body":"In my code I don’t use <code>LocalDateTime</code> for the UTC time, and I recommend that you don’t either. Use either an <code>Instant</code> or (richer) an <code>OffsetDateTime</code> in UTC. My code shows both options."},{"comment_id":134566779,"body":"Stepping a step back you should not try to parse three letter time zone abbreviations. While I know of no other interpretation of MST than North American Mountain Standard Time (for example America/Edmonton), most of the most used abbreviations are ambiguous meaning that you cannot determine the conversion to UTC."}],"answers":[{"comments":[{"comment_id":134515992,"body":"The question is not asking how to compensate for the behavior.  The question is asking how to properly parse a string whose timezone ID explicitly states it is not in Daylight Saving Time.  (Side note: you should fix your answer’s formatting.)"},{"comment_id":134564419,"body":"<i>treats the MST timezone as MDT and does not take daylight saving into account</i> It may not have been crystal clear from the question, but the problem was the exact opposite: The code <i>takes</i> daylight saving time into account even in the case where <i>MST</i> states that it should not. So your code fixes nothing. Also your <code>if</code> part and your <code>else</code> part are equivalent, so your <code>if</code>/ <code>else</code> is useless."}],"answer_id":76280095,"body":"<p>First and foremost, let's define the error in the provided snippet.</p>\n<p>I realize that the snippet above treats the MST timezone as MDT and does not take daylight saving into account. I hope you understand that.</p>\n<p>Now, let's fix the issue, you can use the ZoneId class to specify the time zone with daylight saving. Use this updated version of the timestampConverter method and that should work for both MST and MDT:</p>\n<pre><code>static LocalDateTime timestampConverter(String timestamp) {\nZonedDateTime zonedDateTime = ZonedDateTime.parse(timestamp,EVENT_TIMESTAMP_FORMATTER);\n    if(zonedDateTime.getZone().getRules().isDaylightSavings(zonedDateTime.toInstant())){\n    zonedDateTime.toInstant().atZone(ZoneOffset.UTC).toLocalDateTime();\n    }else{\n        return zonedDateTime.withZoneSameInstant(ZoneOffset.UTC).toLocalDateTime();\n    }\n}\n</code></pre>\n<p>This should fix the challenge you are currently going through! And if you need more clarification... Don't hesitate. Happy Coding!</p>\n"},{"comments":[{"comment_id":134563515,"body":"Good explanation. The overloaded <code>DateTimeFormatterBuilder.appendZoneText](TextStyle, Set&lt;ZoneId&gt;)</code> worked for me. I wonder why it did not for you. <a href=\"https://rextester.com/EDGDAL31804\" rel=\"nofollow noreferrer\">Here’s my online demo</a>."},{"comment_id":134563836,"body":"@OleV.V. I haven’t looked at the source, but I did see in the docs that the resolution of timezones is based on locale.  Perhaps MST is considered unambiguous for me since I’m using a US locale, but is considered ambiguous elsewhere."},{"comment_id":134563945,"body":"Thanks for thinking along. Well, I explicitly specified <code>Locale.US;</code> on the formatter that worked for me. Java version, then? I believe I have had this working in earlier Java versions too. And a lot of zones are printed as MST (more than 5), so “not ambiguous” doesn’t make a lot of sense to me. I will keep wondering. :-) (Yes, locale-specific time zone names and abbreviations exist, which we should obviously be able to parse too.)"},{"comment_id":134564013,"body":"Did you simply get America/Denver even if you specified America/Arizona as preferred? (If you try parsing into a <code>ZonedDateTime</code> and printing it)."},{"comment_id":134566896,"body":"@OleV.V. Yes, I get America/Denver, but I’m not specifying America/Phoenix.  I was using ZoneId.of(&quot;MST&quot;, Map.of(&quot;MST&quot;, &quot;UTC-07:00&quot;)), which I see now returns a ZoneId which is not associated with the ID &quot;MST&quot; at all.  Using America/Phoenix definitely solves this particular problem.  I guess I was hoping there was a general solution that could be applied to any timezone where one wished to suppress the use of DST."},{"comment_id":134567008,"body":"I am not ruling out a general solution completely, but with java.time it will be complicated. And you would still have the problem of for example EST, EDT, CST, CDT and PST being ambiguous."}],"answer_id":76282818,"body":"<p>This is happening because ZonedDateTime.parse uses ZonedDateTime.from, whose <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/ZonedDateTime.html#from(java.time.temporal.TemporalAccessor)\" rel=\"nofollow noreferrer\">documentation</a> states:</p>\n<blockquote>\n<p>The conversion will first obtain a ZoneId from the temporal object, falling back to a ZoneOffset if necessary.</p>\n</blockquote>\n<p>So <code>MST</code> is converted to a ZoneId, which always has DST rules in effect.</p>\n<p>I had hoped that <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/format/DateTimeFormatterBuilder.html#appendZoneText(java.time.format.TextStyle,java.util.Set)\" rel=\"nofollow noreferrer\">the version of DateTimeFormatterBuilder.appendZoneText</a> which accepts preferred zone overrides might help, but it doesn’t.  The preferred zones are only consulted for zone IDs which are considered ambiguous, and apparently MST is not considered ambiguous.</p>\n<p>I couldn’t find any way for a single DateTimeFormatter to do what you want, but you can at least provide zone overrides when looking up a zone explicitly, using <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/ZoneId.html#of(java.lang.String,java.util.Map)\" rel=\"nofollow noreferrer\">the two-argument ZoneId.of method</a>:</p>\n<pre><code>static DateTimeFormatter EVENT_TIMESTAMP_FORMATTER = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n\nprivate static final Map&lt;String, String&gt; nonDSTOverrides = Map.of(\n        &quot;PST&quot;, &quot;UTC-08:00&quot;,\n        &quot;MST&quot;, &quot;UTC-07:00&quot;,\n        &quot;CST&quot;, &quot;UTC-06:00&quot;,\n        &quot;EST&quot;, &quot;UTC-05:00&quot;);\n\nstatic LocalDateTime timestampConverter(String timestamp) {\n    int lastSpace = timestamp.lastIndexOf(' ');\n    if (lastSpace &lt; 0) {\n        throw new DateTimeParseException(\n            &quot;Text must contain a space before the timezone.&quot;, timestamp, 0);\n    }\n\n    String localPart = timestamp.substring(0, lastSpace);\n    String zonePart = timestamp.substring(lastSpace + 1);\n\n    return ZonedDateTime.of(\n            LocalDateTime.parse(localPart, EVENT_TIMESTAMP_FORMATTER),\n            ZoneId.of(zonePart, nonDSTOverrides))\n        .withZoneSameInstant(ZoneOffset.UTC)\n        .toLocalDateTime();\n}\n</code></pre>\n"},{"comments":[{"comment_id":134538353,"body":"Thamks for the contribution. It&#39;s a pretty ugly solution IMHO. And if all you want is a <code>LocalDateTime</code>, this is more complicated than needed for that."},{"comment_id":134547120,"body":"@OleV.V. I would be glad if you could provide a better <i>working</i> solution than this. Or at least a definition of why this is ugly"},{"comment_id":134563137,"body":"Thanks for the request. <a href=\"https://rextester.com/EDGDAL31804\" rel=\"nofollow noreferrer\">Here is the way I recommend</a>. What I don’t like about your code is you are assuming offset -07:00 without validating that it said <code>MST</code> in the string. If the string some days comes with a different time zone, your conversion could be way off, and no one may notice or when they do, they will be at a loss to tell how and why. My code doesn’t validate either, but it converts correctly from other time zones too."}],"answer_id":76283139,"body":"<p>I used this code to achieve the -07:00 conversion all the time.</p>\n<pre><code>    LocalDateTime timestampConverter(String timestamp) {\n        return ZonedDateTime.parse(timestamp, EVENT_TIMESTAMP_FORMATTER)\n                // Java conversion treats MST as MDT which observe daylight saving\n                .withZoneSameLocal(ZoneId.of(ZONE_OFFSET))\n                .withZoneSameInstant(ZoneOffset.UTC)\n                .toLocalDateTime();\n    }\n</code></pre>\n"}],"last_activity_date":1684781275,"question_id":76279794,"body":"<p>I need to convert the timestamp to UTC.\nTimestamp has the MST timezone, which is specified in the timestamp</p>\n<p>Examples of observed conversions:</p>\n<ul>\n<li>2023-03-20 08:53:19 MST -&gt; 2023-03-20T14:53:19     (-6)</li>\n<li>2023-01-20 08:53:19 MST -&gt; 2023-01-20T15:53:19     (-7)</li>\n</ul>\n<pre><code>static DateTimeFormatter EVENT_TIMESTAMP_FORMATTER = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss zzz&quot;);\n\nstatic LocalDateTime timestampConverter(String timestamp) {\n    return ZonedDateTime.parse(timestamp, EVENT_TIMESTAMP_FORMATTER)\n            .withZoneSameInstant(ZoneOffset.UTC)\n            .toLocalDateTime();\n}\n</code></pre>\n<p>MDT offset from UTC is -6:00 hours</p>\n<p>MST offset from UTC is -7:00 hours</p>\n<p>Problem:\nJava conversion treats MST as MDT which observe daylight saving</p>\n<p>For example JS library doesn't have this problem:</p>\n<pre><code>console.log(new Date(&quot;2023-03-20 08:53:19 MST&quot;).toUTCString()); // Mon, 20 Mar 2023 15:53:19 GMT\n</code></pre>\n<p>Question:\nWhy logic is different from the standard behavior ?</p>\n"},{"comments":[{"comment_id":134530588,"body":"Have you considered constructing a DateTimeFormatter for each format and then trying each one in turn?"},{"comment_id":134530926,"body":"I was actually looking for a solution in java the way we have in JS. just with d = new Date() &amp; then d.getDate(), d.getMonth() .. so on"},{"comment_id":134530938,"body":"Even in JS, the input format of what you parse matters. <code>new Date()</code> is just the current date, it&#39;s not parsing anything there."},{"comment_id":134530972,"body":"The example <code>08-05-2023</code> is quite dangerous because one cannot reliably derive if it is <code>MM-dd-uuuu</code> or <code>dd-MM-uuuu</code>. Those would both be parseable by a <code>DateTimeFormatter</code>, but the results will be significantly different."},{"comment_id":134530975,"body":"But within new Date() constructor you can pass any date format &amp; it will give you a generic date object which have those methods"},{"comment_id":134530985,"body":"Do not use the <code>java.util</code> package for dates. Use the <code>java.time</code> package that was introduced in Java 8. See my response below."},{"comment_id":134534900,"body":"@DikshaGoyal <i>But within new Date() constructor you can pass any date format &amp; it will give you a generic date object which have those methods</i> -- This is incorrect. Look at your example above. Try passing in 08-05-2023, like you showed, and see what JavaScript gives you. It will not work."},{"comment_id":134534941,"body":"You tagged your question simpledateformat, but you should unconditionally avoid using <code>SimpleDateFormat</code> and <code>Date</code>. Those clauses were troublesome and are long outdated. Do use java.time and its <code>DateTimeFormatter</code> and other classes."},{"comment_id":134534993,"body":"Your first format unlike the others includes an offset from UTC. In which time zone do you want the date in that case? And in the other cases, do you want to use the same time zone that was understood in the original string?"},{"comment_id":134543166,"body":"This Question was closed for the wrong reason. This is not an opinion-based question. It is however a duplicate of other Questions on how to parse date-time inputs with various formats. Voting to re-open."},{"comment_id":134543185,"body":"Duplicate of <a href=\"https://stackoverflow.com/q/51587242/642706\">this</a>, <a href=\"https://stackoverflow.com/q/19137007/642706\">this</a>, <a href=\"https://stackoverflow.com/q/4024544/642706\">this</a>, and more."}],"answers":[{"comments":[{"comment_id":134531653,"body":"Please be aware that parsing month names is <code>Locale</code> sensitive"},{"comment_id":134531941,"body":"@user16320675 I added <code>.withLocale(Locale.ENGLISH)</code> to the offending formatters above."},{"comment_id":134543198,"body":"Good Answer, but this has already been covered on multiple other existing Questions."},{"comment_id":134543216,"body":"In real work, the locale should likely need to specify a culture and possibly a sub-culture. Date-time formats (abbreviation, punctuation, capitalization) can vary across various English-speaking places."}],"answer_id":76289597,"body":"<p>You can iterate over known formats and skip ones that throw a <code>DateTimeParseException</code>.</p>\n<p><strong>Note:</strong> If you are parsing just a date string into a <code>LocalDateTime</code>, you will need to build the formatter and specify that the time portion is optional.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.time.LocalDateTime;\nimport java.time.format.*;\nimport java.time.temporal.ChronoField;\nimport java.util.*;\n\npublic class DateParser {\n    public static void main(String[] args) {\n        System.out.println(normalizeDate(&quot;2023-05-09T05:55:07Z&quot;)); // 2023-05-09\n        System.out.println(normalizeDate(&quot;2023-04-30&quot;)); // 2023-04-30\n        System.out.println(normalizeDate(&quot;08-05-2023&quot;)); // 2023-08-05\n        System.out.println(normalizeDate(&quot;2023-05-09 00:00:00&quot;)); // 2023-05-09\n        System.out.println(normalizeDate(&quot;31-Dec-2021&quot;)); // 2021-12-31\n        System.out.println(normalizeDate(&quot;&quot;)); // null\n    }\n\n    public static String normalizeDate(String rawDateTimeString) {\n        return Optional.ofNullable(parseDateString(rawDateTimeString))\n                .map(displayFormat::format)\n                .orElse(null);\n    }\n\n    private static LocalDateTime parseDateString(String dateString) {\n        for (DateTimeFormatter formatter : knownFormats) {\n            try {\n                return LocalDateTime.parse(dateString, formatter);\n            } catch (DateTimeParseException e) {\n                continue;\n            }\n        }\n        return null;\n    }\n\n    private static final List&lt;DateTimeFormatter&gt; knownFormats = Arrays.asList(\n            DateTimeFormatter.ISO_DATE_TIME,\n            dateOnlyFormatter(&quot;yyyy-MM-dd&quot;),\n            dateOnlyFormatter(&quot;MM-dd-yyyy&quot;),\n            DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;),\n            dateOnlyFormatter(&quot;dd-MMM-yyyy&quot;).withLocale(Locale.ENGLISH));\n\n    private static DateTimeFormatter dateOnlyFormatter(String datePattern) {\n        // Credit: https://stackoverflow.com/a/40175568/1762224\n        return new DateTimeFormatterBuilder()\n                .appendPattern(datePattern)\n                .optionalStart()\n                .appendPattern(&quot; HH:mm&quot;)\n                .optionalEnd()\n                .parseDefaulting(ChronoField.HOUR_OF_DAY, 0)\n                .parseDefaulting(ChronoField.MINUTE_OF_HOUR, 0)\n                .toFormatter();\n    }\n\n    private static final DateTimeFormatter displayFormat = DateTimeFormatter.ISO_DATE;\n}\n</code></pre>\n<p>Here is a modified version that is simpler as Devin suggested. It ignores the concept of time entirely, and only focuses on date when parsing. It removes the need for the <code>dateOnlyFormatter</code> method (as seen above).</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.time.LocalDate;\nimport java.time.format.*;\nimport java.util.*;\n\npublic class DateParser {\n    public static void main(String[] args) {\n        System.out.println(normalizeDate(&quot;2023-05-09T05:55:07Z&quot;)); // 2023-05-09\n        System.out.println(normalizeDate(&quot;2023-04-30&quot;)); // 2023-04-30\n        System.out.println(normalizeDate(&quot;08-05-2023&quot;)); // 2023-08-05\n        System.out.println(normalizeDate(&quot;2023-05-09 00:00:00&quot;)); // 2023-05-09\n        System.out.println(normalizeDate(&quot;31-Dec-2021&quot;)); // 2021-12-31\n        System.out.println(normalizeDate(&quot;&quot;)); // null\n    }\n\n    public static String normalizeDate(String rawDateTimeString) {\n        return Optional.ofNullable(parseDateString(rawDateTimeString))\n                .map(displayFormat::format)\n                .orElse(null);\n    }\n\n    private static LocalDate parseDateString(String dateString) {\n        for (DateTimeFormatter formatter : knownFormats) {\n            try {\n                return LocalDate.parse(dateString, formatter);\n            } catch (DateTimeParseException e) {\n                continue;\n            }\n        }\n        return null;\n    }\n\n    private static final List&lt;DateTimeFormatter&gt; knownFormats = Arrays.asList(\n            DateTimeFormatter.ISO_DATE_TIME,\n            DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;),\n            DateTimeFormatter.ofPattern(&quot;MM-dd-yyyy&quot;),\n            DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;),\n            DateTimeFormatter.ofPattern(&quot;dd-MMM-yyyy&quot;).withLocale(Locale.ENGLISH));\n\n    private static final DateTimeFormatter displayFormat = DateTimeFormatter.ISO_DATE;\n}\n</code></pre>\n"},{"comments":[{"comment_id":134531615,"body":"Please be aware that parsing month names is <code>Locale</code> sensitive; and that <code>Z</code> can stand for a time zone, not necessarily the literal <code>Z</code>"},{"comment_id":134543154,"body":"<i>Never</i> put quote marks around the <code>Z</code> in a date-time formatting pattern. The quotes mean &quot;expect but ignore this text&quot;. Ignoring that text is restless as the presence of a <code>Z</code> means &quot;An offset from UTC of zero hours-minutes-seconds&quot;. You are discarding valuable information, with no benefit in return. I must down-vote on a solution that recommends data loss."}],"answer_id":76289726,"body":"<p>This method is simple and easy to decipher. Here is all that the parseDateTime function does:</p>\n<ol>\n<li>Sets the output format</li>\n<li>Sets all possible input formats</li>\n<li>Iterates over each input format until the correct one is found</li>\n<li>Returns the date/time in the specified output format</li>\n</ol>\n<blockquote>\n<p><strong>Note</strong> If the String passed into the function is not in one of the 5 specified input formats, then it will return null. This should make it easy to see if it was successful or not!</p>\n</blockquote>\n<p>If you need more information to help add more formats, here is the DateTimeFormatter Documentation: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ISO_DATE\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ISO_DATE</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.time.*;\nimport java.time.format.DateTimeFormatter;\n\npublic class Main {\n     public static void main(String[] args) {\n        String[] inputDates = {\n                &quot;2023-04-30T05:55:07Z&quot;,\n                &quot;2023-04-30&quot;,\n                &quot;30-04-2023&quot;,\n                &quot;2023-04-30 00:00:00&quot;,\n                &quot;30-Apr-2023&quot;\n        };\n\n        for(String date : inputDates)\n            System.out.println(date + &quot;\\t-&gt;\\t&quot; + parseDateTime(date));\n    }\n\n\n    private static String parseDateTime(String currentDate){\n        //Desired Output Pattern\n        DateTimeFormatter outputFormat = DateTimeFormatter.ofPattern(&quot;dd-MM-yyyy&quot;);\n\n        //All Possible Input Patterns\n        DateTimeFormatter[] formatters = {\n            DateTimeFormatter.ISO_LOCAL_DATE,\n            DateTimeFormatter.ofPattern(&quot;dd-MM-yyyy&quot;),\n            DateTimeFormatter.ofPattern(&quot;dd-MMM-yyyy&quot;),\n            DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;),\n            DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd'T'HH:mm:ss'Z'&quot;)\n        };\n\n        //Iterate over each pattern until it finds the correct one\n        for(DateTimeFormatter currFormatter : formatters){\n            try{\n                return LocalDate.parse(currentDate, currFormatter).format(outputFormat);\n            } catch(Exception ignored){\n                //Current formatter did not work, so lets try the next one\n            }\n        }\n        return null; // String was not one of those 5 formats\n    }\n}```\n</code></pre>\n"}],"last_activity_date":1684781097,"question_id":76289312,"body":"<p>I have a use case where I have date in the following formats,</p>\n<ol>\n<li>2023-05-09T05:55:07Z</li>\n<li>2023-04-30</li>\n<li>08-05-2023</li>\n<li>2023-05-09 00:00:00</li>\n<li>31-Dec-2021</li>\n</ol>\n<p>Irrespective of the input format I have a requirement to convert it to <code>dd-mm-yyyy</code> format. How can I convert it in JDK11? I tried different libraries but got no luck.</p>\n"},{"comments":[{"comment_id":134558926,"body":"OK, I&#39;ve managed to fix the problem. It was a misconfiguration of the connectionpool in Quarkus. But now I&#39;m facing another problem, which I didn&#39;t have before I had setup a connectionpool: debezium tries to execute &quot;IDENTIFY_SYSTEM&quot; query, and this doesn&#39;t work and it&#39;s not recognized as a valid statement. The only way I could make this query work manually is by running &quot;psql &quot;replication=database&quot; -c &quot;IDENTIFY_SYSTEM;&quot;, but how do you configure this in debezium then ?"},{"comment_id":134558945,"body":"Another thing I&#39;ve noticed is that my connectionpool class, is created/initialized many times. I was expecting to be initialized only once."}],"answers":[{"answer_id":76309062,"body":"<p>I've finally configured a connection pool in the hope that this would solve the connection/restart problems we have with Debezium. But alas, we still have the same issue that Debezium occassionaly after a long run, cannot connect to the database anymore with throwing:</p>\n<pre><code>Producer failure: org.postgresql.util.PSQLException: Database connection failed when reading from copy\n</code></pre>\n<p>Anyways, for anyone who is interested in the solution, here it is.</p>\n<p>Note that Debezium runs different queries to gather information, and 1 of these queries require additional jdbc properties to work. That's why you see a split in the code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DebeziumConnectionPoolConfig implements JdbcConnection.ConnectionFactory {\n\n    @Override\n    public Connection connect(JdbcConfiguration config) {       \n        Log.infof(&quot;Debezium connectionPool initializing...&quot;);\n\n        try {\n            var replication = config.getString(&quot;replication&quot;);\n            if (isNullOrEmpty(replication)) {\n                Log.debugf(&quot;Returning Connection from Agroal ConnectionPool&quot;);\n\n                return CDI.current().select(AgroalDataSource.class).get().getConnection().unwrap(BaseConnection.class);\n            } else {\n                // If replication is in the config, then Debezium uses this to perform the following query: IDENTIFY_SYSTEM.\n                // To perform this query, a lot of other config properties need to be provided. And these properties are\n                // only needed for running this query. If these properties are used as default, then normal queries cannot be performed.\n                // That's why agroal is used as the default connectionpool and only during startup when Debezium needs to run IDENTIFY_SYSTEM,\n                // a single manual connection is returned.\n                Log.debugf(&quot;Returning connection from DriverManager&quot;);\n\n                var url = &quot;quarkus.datasource.jdbc.url&quot;;\n                return DriverManager.getConnection(ConfigProvider.getConfig().getValue(url, String.class), config.asProperties());\n            }\n        } catch (SQLException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>And my application.properties:</p>\n<pre><code># AGROAL CONFIG\nquarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5435/postgres\nquarkus.datasource.username=postgres\nquarkus.datasource.password=postgres\n\n# DEBEZIUM CONFIG\nconnector.class=io.debezium.connector.postgresql.PostgresConnector\ndatabase.connection.factory.class=org.acme.dbz.config.DebeziumConnectionPoolConfig\ndatabase.dbname=postgres\ndatabase.hostname=localhost\ndatabase.user=postgres\ndatabase.password=postgres\ndatabase.port=5435\n</code></pre>\n"}],"last_activity_date":1684780831,"question_id":76288087,"body":"<p>I want to configure a connectionpool, because I'm getting a lot of connection retry errors from Debezium after a while:</p>\n<pre><code>Producer failure: org.postgresql.util.PSQLException: Database connection failed when reading from copy\n    at org.postgresql.core.v3.QueryExecutorImpl.readFromCopy(QueryExecutorImpl.java:1166)\n    at org.postgresql.core.v3.CopyDualImpl.readFromCopy(CopyDualImpl.java:44)\n    at org.postgresql.core.v3.replication.V3PGReplicationStream.receiveNextData(V3PGReplicationStream.java:160)\n</code></pre>\n<p>So I digged in the source code and I found out that it provides some configuration for a connectionpool, but I can't get it working properly.</p>\n<p>This is what I have currently, and btw Im using Quarkus 2.16.7, Debezium 2.2.1.Final and Posgres 14:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Startup\npublic class DebeziumConnectionPoolConfig implements JdbcConnection.ConnectionFactory {\n\n    @Inject\n    AgroalDataSource datasource;\n\n    @Override\n    public Connection connect(JdbcConfiguration jdbcConfiguration) throws SQLException {    \n        return this.datasource.getConnection();       \n    }\n}\n</code></pre>\n<p>And I have the folling configuration in my application.properties:</p>\n<pre><code>quarkus.datasource.db-kind=postgresql\nquarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5435/postgres\nquarkus.datasource.username=postgres\nquarkus.datasource.password=postgres\n\n# DEBEZIUM\nname=my-cdc\ndatabase.connection.factory.class=org.acme.dbz.config.DebeziumConnectionPoolConfig\nconnector.class=io.debezium.connector.postgresql.PostgresConnector\ndatabase.dbname=postgres\ndatabase.hostname=localhost\ndatabase.user=postgres\ndatabase.password=postgres\ndatabase.port=5435\n</code></pre>\n<p>And I'm getting connection validation errors during startup:</p>\n<pre><code> ERROR [io.deb.con.pos.PostgresConnector] (executor-thread-0) Failed testing connection for jdbc:postgresql://localhost:5435/postgres with user 'postgres': org.p\nostgresql.util.PSQLException: Connection to localhost:5435 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.\n        at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:342)\n        at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:54)\n        at org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:253)\n        at org.postgresql.Driver.makeConnection(Driver.java:434)\n        at org.postgresql.Driver.connect(Driver.java:291)\n        at io.debezium.jdbc.JdbcConnection.lambda$patternBasedFactory$1(JdbcConnection.java:241)\n        at io.debezium.jdbc.JdbcConnection$ConnectionFactoryDecorator.connect(JdbcConnection.java:127)\n        at io.debezium.jdbc.JdbcConnection.connection(JdbcConnection.java:873)\n        at io.debezium.connector.postgresql.PostgresConnector.validateConnection(PostgresConnector.java:90)\n</code></pre>\n"},{"comments":[{"comment_id":57272159,"body":"Did you read the documentation for the method you&#39;re calling? The comment in your own code says that the upper bound is exclusive (&quot;excl&quot;)... how would you expect to get an answer of 11 if <code>nextInt(10)</code> can only return a value up to 9, and you&#39;re adding 1 to that?"},{"comment_id":57272206,"body":"Yeah i realize now i made a stupid mistake. I did read it, but it didn&#39;t sink in for some reason. Sorry for the bad post."},{"comment_id":57272229,"body":"you  follow this post it is already discuss <a href=\"http://stackoverflow.com/questions/363681/generating-random-integers-in-a-range-with-java\" title=\"generating random integers in a range with java\">stackoverflow.com/questions/363681/&hellip;</a>                                                                                                                            <a href=\"http://stackoverflow.com/questions/20389890/generating-a-random-number-between-1-and-10-java\" title=\"generating a random number between 1 and 10 java\">stackoverflow.com/questions/20389890/&hellip;</a>"},{"comment_id":57272751,"body":"@SeanM - if you consider it a bad post, you can always delete it using the link under the question. Welcome to StackOverflow!"},{"comment_id":57273196,"body":"Thank you for the warm welcome ahaha. I have a lot to learn! Unfortunately I can&#39;t delete it any more."}],"answers":[{"answer_id":34763409,"body":"<p>Read the Javadoc. <code>rn.nextInt(10)</code> generates numbers from 0 to 9. Adding 1 gives you a range from 1 to 10.</p>\n\n<blockquote>\n  <p>Returns a pseudorandom, uniformly distributed int value between 0 (inclusive) and the specified value <strong>(exclusive)</strong></p>\n</blockquote>\n"}],"last_activity_date":1684780771,"question_id":34763387,"body":"<p>I don't understand why it wouldn't generate upwards of 11.</p>\n\n<p>Here is my tester code:</p>\n\n<pre><code>import java.util.Random;\n\npublic class randomNumberTest\n{\n    public static void main(String[] args)\n    {\n         Random rn = new Random();\n         //tests random number generator (between 1(inc) and 10(excl))\n         for(int i =0; i &lt; 100; i++)\n         {\n             int answer = rn.nextInt(10) + 1;\n             System.out.println(answer);\n         }\n    }\n}\n</code></pre>\n"},{"comments":[{"comment_id":134544319,"body":"So....what is going wrong?"},{"comment_id":134547815,"body":"Check this out about JSONDeserializationSchema &amp; Flink: &lt;br&gt; <a href=\"https://stackoverflow.com/a/62072265/17530250\">stackoverflow.com/a/62072265/17530250</a>"}],"answers":[{"answer_id":76309047,"body":"<p>You're on the right track. One way you can resolve this is being calling:</p>\n<p><code>.setValueOnlyDeserializer(new TradeEventDeserializationSchema())</code></p>\n<p>Your <code>TradeEventDeserializationSchema</code> would be a custom deserializer, which would use something like Jackson's <code>ObjectMapper</code> to deserialize each incoming event, e.g.:</p>\n<pre><code>public class TradeEventDeserializationSchema extends AbstractDeserializationSchema&lt;Event&gt; {\n\n    private static final long serialVersionUID = 1L;\n\n    private transient ObjectMapper objectMapper;\n\n    /**\n     * For performance reasons it's better to create on ObjectMapper in this open method rather than\n     * creating a new ObjectMapper for every record.\n     */\n    @Override\n    public void open(InitializationContext context) {\n        // JavaTimeModule is needed for Java 8 data time (Instant) support\n        objectMapper = JsonMapper.builder().build().registerModule(new JavaTimeModule());\n    }\n\n    /**\n     * If our deserialize method needed access to the information in the Kafka headers of a\n     * KafkaConsumerRecord, we would have implemented a KafkaRecordDeserializationSchema instead of\n     * extending AbstractDeserializationSchema.\n     */\n    @Override\n    public Event deserialize(byte[] message) throws IOException {\n        return objectMapper.readValue(message, Event.class);\n    }\n}\n</code></pre>\n<p>Event is this case would be your event POJO.</p>\n<p>You can find more details and an example at <a href=\"https://docs.immerok.cloud/docs/how-to-guides/development/deserializing-json-from-kafka-to-apache-flink-pojo/\" rel=\"nofollow noreferrer\">https://docs.immerok.cloud/docs/how-to-guides/development/deserializing-json-from-kafka-to-apache-flink-pojo/</a></p>\n"}],"last_activity_date":1684780740,"question_id":76293739,"body":"<pre><code>package org.example;\n\n    import org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\n    import org.apache.flink.connector.kafka.source.KafkaSource;\n    import org.apache.flink.connector.kafka.source.enumerator.initializer.OffsetsInitializer;\n    import org.apache.flink.formats.json.JsonDeserializationSchema;\n    \n    \n    import org.apache.flink.api.common.eventtime.WatermarkStrategy;\n    \n    import static org.apache.flink.streaming.api.functions.sink.filesystem.rollingpolicies.OnCheckpointRollingPolicy.build;\n    \n    \n    public class DataStreamJob {\n        public static void main(String[] args) throws Exception {\n            final StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n    \n            KafkaSource&lt;String&gt; source = KafkaSource.&lt;String&gt;builder()\n                    .setBootstrapServers(&quot;localhost:19092&quot;)\n                    .setTopics(&quot;1000pepeusdt&quot;,&quot;1000pepeusdtt&quot;)\n                    .setStartingOffsets(OffsetsInitializer.earliest())\n    **\\\\the error is on this line**.setValueOnlyDeserializer(new JsonDeserializationSchema&lt;&gt;(TradeEvent.class))\n                    .build();\n    \n            env.fromSource(source, WatermarkStrategy.noWatermarks(), &quot;Kafka Source&quot;)\n                    .print();\n    \n            // Execute the job\n            env.execute(&quot;Kafka Consumer Example&quot;);\n        }\n    }\n</code></pre>\n<p>This is what I'm trying to</p>\n<pre><code>consume: {\n&quot;e&quot;:&quot;aggTrade&quot;\n&quot;E&quot;:1684547379069\n&quot;a&quot;:30161410\n&quot;s&quot;:&quot;1000PEPEUSDT&quot;\n&quot;p&quot;:&quot;0.0015036&quot;\n&quot;q&quot;:&quot;665070&quot;\n&quot;f&quot;:70012793\n&quot;l&quot;:70012793\n&quot;T&quot;:1684547378913\n&quot;m&quot;:true\n}\n</code></pre>\n"},{"comments":[{"comment_id":49328239,"body":"Can you give more specific details about how these Entities are associated to each other? Are you using the <code>@JoinColumn</code> or <code>mappedBy</code> method of linking, or perhaps this is a <code>@PrimaryKeyJoinColumn</code>?"},{"comment_id":49392459,"body":"I added it on the code."}],"answers":[{"comments":[{"comment_id":49391738,"body":"Good solution, but I think the Vlad answer is easy to maintain."}],"answer_id":30633255,"body":"<p>Yes it can be done without performing join and using JPA query. Check out the following code snippet:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\nclass Entity1 {\n   ...\n   @OneToOne(...)\n   @JoinColumn(name=\"entity2ID\")\n   private Entity2 entity2;\n   @Column(name=\"entity2ID\", nullable=true, insertable=true, updatable=true)\n   private Long entity2ID;\n   ...\n}\n</code></pre>\n\n<p>Simply map the joining column in entity as insertable/updatable as FALSE. The Make sure that you absolutely not provide setter method for xyz or joining column. Once this is done you can use following query:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT e FROM Entity1 e WHERE e.entity2ID IS NULL\n</code></pre>\n\n<p>This won't perform any joins as you are querying for joining column directly.</p>\n"},{"comments":[{"comment_id":49392338,"body":"It worked. Have you learned this reading any special documentation? I would like to understand it better."},{"comment_id":49392684,"body":"It&#39;s standard SQL. Any <a href=\"http://www.w3schools.com/sql/\" rel=\"nofollow noreferrer\">SQL tutorial</a> will probably cover this."},{"comment_id":49394717,"body":"I wast talking about the JPQL. In SQL I did correctly."},{"comment_id":49396080,"body":"I don&#39;t know if there&#39;s a reference doc covering it."}],"answer_id":30636390,"body":"<p>You can simply run this JPQL query:</p>\n\n<pre><code>SELECT e1 \nFROM Entity1 e1 \nLEFT JOIN e1.entity2 e2\nWHERE e2 IS NULL\n</code></pre>\n\n<p>The <code>LEFT JOIN</code> is what you were looking for.</p>\n"}],"last_activity_date":1684780245,"question_id":30630642,"body":"<p>I have <code>Entity1</code> and <code>Entity2</code>. They have a OneToOne nullable relationship.</p>\n\n<pre><code>@Entity\nclass Entity1 {\n\n   @Id\n   @Column(name = \"id\")\n   private Long id;\n\n   @OneToOne(fetch = FetchType.LAZY, cascade = CascadeType.ALL, mappedBy = \"entity2\")\n   @JoinColumn(nullable = true)    \n   private Entity2 entity2;\n   ...\n}\n</code></pre>\n\n<p><strong>How can I query all <code>Entity1</code> objects that has a null <code>entity2</code>?</strong></p>\n\n<p>Because if I do:</p>\n\n<pre><code>SELECT e FROM Entity1 e WHERE e.entity2 IS NULL\n</code></pre>\n\n<p>JPA engine do a JOIN between the two tables and put a useless WHERE clausule (<code>WHERE entity_id = NULL</code>). Resuming, it executes an useless native SQL.\nHow can </p>\n\n<p><strong>Current solution:</strong></p>\n\n<p>Reading the OpenJPA documentation, I found that Native Queries should be used to workaround JPA limitations. I can get it very easy using native query and I'm currently doing it, but I would like to avoid to use it.</p>\n"},{"comments":[{"comment_id":134563983,"body":"Pass your own UriTemplateHandler to setUriTemplateHandler() ?"},{"comment_id":134564205,"body":"Any of examples of how that can be done? Not finding much."},{"comment_id":134566538,"body":"Have you tried the UriComponentBuilder for building the URL? maybe something like this: <code>UriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(&quot;https:&#47;&#47;&lt;URL&gt;&#47;api&#47;v1&#47;query&zwnj;&#8203;&quot;).queryParam(&quot;query&zwnj;&#8203;&quot;, &quot;count by(__name__) ({__name__=~&#39;.+&#39;})&quot;);</code> then you can pass the URL to your <code>exchange</code> or <code>getForObject</code> calls like this <code>builder.build().encode().toUri()</code>"}],"last_activity_date":1684780031,"question_id":76308978,"body":"<p>I have a Spring Boot Java application that needs to make a REST GET call to a service to retrieve some information. I keep running into problems and I suspect it is because the call has embedded curly braces (<code>{</code> and <code>}</code>). For example, here is the REST call:</p>\n<pre><code>GET https://&lt;URL&gt;/api/v1/query?query=count by(__name__) ({__name__=~'.+'})\n</code></pre>\n<p>Note: The query value is Prometheus query language (PromQL). It is valid and works fine (as long as it's URL encoded) in Postman.</p>\n<p>At first I was URL encoding the query parameter value in my app as well and that was causing other strange errors. We wondered whether there was double encoding going on, so I turned off the encoding part and passed it as-is. Now I get the following error:</p>\n<pre><code>[ERROR] 2023-05-22 13:14:12.663 [http-nio-8080-exec-1] org.apache.juli.logging.DirectJDKLog.log(DirectJDKLog.java:175) - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.IllegalArgumentException: Not enough variable values available to expand '__name__=~'.+''] with root cause\njava.lang.IllegalArgumentException: Not enough variable values available to expand '__name__=~'.+''\n</code></pre>\n<p>If I understand correctly, the curly braces signify a query parameter that's provided when the GET call is made. However, in this case, the curly braces are <strong>not</strong> intended as a parameter placeholder for the REST call, but rather needs to be passed on as-is so that Prometheus can process the query.</p>\n<p>The code making the call does not attempt to pass any parameters.</p>\n<p>Is there a way to have <code>RestTemplate</code> not try to interpret the curly braces as parameter placeholders?</p>\n"},{"answers":[{"comments":[{"comment_id":134083972,"body":"After changing, I had to click &quot;File -&gt; Sync Project with Fradle files&quot; to kick off the update.  Probably a restart would do the same. Also, the version 7.0 was correct but is always changing, we had success picking the latest from the list at <a href=\"https://services.gradle.org/distributions/\" rel=\"nofollow noreferrer\">services.gradle.org/distributions</a>"}],"answer_id":68248913,"body":"<p>I've had a similar problem with an old BungeeCord plugin, which used Gradle 4.10. In my case - it seems like that old Gradle doesn't work properly with Java 16, so I've manually changed contents of <code>gradle/wrapper/gradle-wrapper.properties</code> file to use Gradle 7.0.</p>\n<p><strong>Old file:</strong></p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-4.10-bin.zip\n</code></pre>\n<p><strong>New file:</strong></p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-7.0-bin.zip\n</code></pre>\n<p>Now it works ok, no more Gradle errors.</p>\n"},{"answer_id":70303374,"body":"<p>It seems like it can be cause by different things.</p>\n<p>I solved it changing the JDK to the embedded android JDK and adding it to the path and <code>JAVA_HOME</code> environement variables.</p>\n"},{"answer_id":74034569,"body":"<p>I got this error in IntellJ when opening an Android project that someone sent me. It's a Gradle error and I'm not sure of the root cause. I <em>think</em> it's no Gradle JVM set in the .idea folder of whoever sent me the project.</p>\n<p>My fix was explicitly set the Gradle JVM in IntelliJ in File -&gt; Settings -&gt; Build, Execution &amp; Development -&gt; Build Tools -&gt; Gradle and set it to 11, or whatever. It's the same fix as another answer from me <a href=\"https://stackoverflow.com/a/71580720/467509\">over here</a></p>\n"},{"answer_id":75399880,"body":"<p>I faced the same error while using a download project. Here the problem is with the version compatibility of Java and Gradle. The project was using Gradle 4.10.1 and my Gradle JDK was 17 which caused the error, I just changed my Gradle JDK to version 11. This solved the error for me.</p>\n<p>Solution:\nGo to File -&gt; Project Structure -&gt; Project. and note your Gradle Version. <a href=\"https://i.stack.imgur.com/yKczF.png\" rel=\"nofollow noreferrer\">Gradle Version</a></p>\n<p>Now go to this link: <a href=\"https://docs.gradle.org/current/userguide/compatibility.html#:%7E:text=A%20Java%20version%20between%208,used%20for%20compile%20or%20test.\" rel=\"nofollow noreferrer\">Compatibility Matrix - Gradle User Manual</a> and look for a close enough Java version. <a href=\"https://i.stack.imgur.com/9ruQO.png\" rel=\"nofollow noreferrer\">Compatibility Matrix</a></p>\n<p>Now go to File -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Build Tools -&gt; Gradle. Under Gradle JDK click Download JDK.<a href=\"https://i.stack.imgur.com/N99a7.png\" rel=\"nofollow noreferrer\">Gradle JDK</a></p>\n<p>Select the version and Download then Apply. <a href=\"https://i.stack.imgur.com/vSG0O.png\" rel=\"nofollow noreferrer\">Select Download</a></p>\n<p>Rebuild the Project now.</p>\n"},{"answer_id":76308350,"body":"<p>This Issue Caused by older gradle distributionUrl to solve it</p>\n<p>go to  gradle-wrapper.properties</p>\n<p>and replace the distributionUrl:</p>\n<p><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-7.5-bin.zip</code></p>\n"}],"last_activity_date":1684779152,"question_id":67919565,"body":"<p>I try to build my gradle project and I get the following error:</p>\n<p><code>1:36 PM  Gradle sync failed: Unable to make field private static final java.util.Map java.lang.ProcessEnvironment.theCaseInsensitiveEnvironment accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @7d417077 (5 s 556 ms)</code></p>\n<p><a href=\"https://hastebin.com/iwovoroman.php\" rel=\"nofollow noreferrer\">build.gradle</a> file</p>\n<p>and no, I do not know gradle and no I am not planning on learning it, but I have no chioce. Thanks in advance</p>\n"},{"comments":[{"comment_id":134561747,"body":"Your <code>BaseServiceTest</code> is missing the <code>@SpringBootTest</code> annotation. Without it, spring features do not work."},{"comment_id":134562063,"body":"@YevheniiSemenov I revised it but nothing changed. I still got the error <code>java.lang.NullPointerException: Cannot invoke &quot;org.springframework.http.ResponseEntity.getBody()&quot; because &quot;responseEntity&quot; is null</code>"},{"comment_id":134562158,"body":"You should also make your constants not static, define getters for them and inject <code>Constants</code> bean to your tests through <code>@Autowire</code> instead of using it directly."},{"comment_id":134562401,"body":"@YevheniiSemenov I got the right url and api key from there as last. Thank you for your response."},{"comment_id":134562609,"body":"You can upvote my comments if I helped you :)"}],"answers":[{"comments":[{"comment_id":134562523,"body":"Accessing the <code>application-test.yml</code> requires loaded application context and unit test runs in isolated environment without the application context. This is why we use @SpringBootTest annotation to load up application context and access the application properties file."}],"answer_id":76308227,"body":"<p>After I added @SpingBootTest annotation in BaseServiceTest and clicked &quot;Invalid Cache&quot; , the issue was disappeared.</p>\n<p>Here is BaseServiceTest shown below</p>\n<pre><code>@SpringBootTest\n@ExtendWith(MockitoExtension.class)\n@ActiveProfiles(value = &quot;test&quot;)\npublic abstract class BaseServiceTest {\n\n}\n</code></pre>\n"}],"last_activity_date":1684778860,"question_id":76307807,"body":"<p>I have a problem to write the JUnit Test with the usage of resttemplate.</p>\n<p>When I run the testCalculateRate, I got this error message shown below</p>\n<pre class=\"lang-java prettyprint-override\"><code>java.lang.NullPointerException: Cannot invoke &quot;org.springframework.http.ResponseEntity.getBody()&quot; because &quot;responseEntity&quot; is null\n</code></pre>\n<p>Next, I debug the code</p>\n<p><code>getExchangeUrl</code> returns this null2023-05-22?symbols=USD%2CGBP&amp;base=EUR as <code>EXCHANGE_API_BASE_URL</code> returns null. <code>EXCHANGE_API_API_KEY</code> also returns null.</p>\n<p>Here is the Constants shown below</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class Constants {\n\n    public static String EXCHANGE_API_BASE_URL;\n    public static String EXCHANGE_API_API_KEY;\n\n    public static String EXCHANGE_CACHE_NAME;\n    public static Integer EXCHANGE_API_CALL_LIMIT;\n\n    @Value(&quot;${exchange-api.api-url}&quot;)\n    public void setExchangeApiBaseUrl(String apiUrl) {\n        EXCHANGE_API_BASE_URL = apiUrl;\n    }\n\n    @Value(&quot;${exchange-api.api-key}&quot;)\n    public void setExchangeApiKey(String apiKey) {\n        EXCHANGE_API_API_KEY = apiKey;\n    }\n\n    @Value(&quot;${exchange-api.cache-name}&quot;)\n    public void setExchangeCacheName(String cacheName) {\n        EXCHANGE_CACHE_NAME = cacheName;\n    }\n\n    @Value(&quot;${exchange-api.api-call-limit}&quot;)\n    public void setExchangeApiCallLimit(Integer apiCallLimit) {\n        EXCHANGE_API_CALL_LIMIT = apiCallLimit;\n    }\n\n}\n</code></pre>\n<p>Here is the relevant part of application-test.yml</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>exchange-api:\n  api-url: https://api.apilayer.com/exchangerates_data/\n  api-key: ${EXCHANGE_API_API_KEY:default-key}\n  api-call-limit: 60\n  cache-name: exchanges\n  cache-ttl: 10000\n</code></pre>\n<p>Here RateServiceTest shown below</p>\n<pre class=\"lang-java prettyprint-override\"><code>    import static com.exchangeapi.currencyexchange.constants.Constants.EXCHANGE_API_API_KEY;\n    import static com.exchangeapi.currencyexchange.constants.Constants.EXCHANGE_API_BASE_URL;\n    \n    class RateServiceTest extends BaseServiceTest {\n    \n        @Mock\n        private RateRepository rateRepository;\n    \n        @Mock\n        private RestTemplate restTemplate;\n    \n        @InjectMocks\n        private RateService rateService;\n    \n        @Test\n        void testCalculateRate() {\n    \n            // Initialize mocks\n            MockitoAnnotations.openMocks(this);\n    \n            // Mocked data\n            EnumCurrency base = EnumCurrency.EUR;\n            List&lt;EnumCurrency&gt; targets = Arrays.asList(EnumCurrency.USD, EnumCurrency.GBP);\n            LocalDate date = LocalDate.of(2023, 5, 22);\n    \n            // Mocked rate entity\n            RateEntity mockedRateEntity = new RateEntity();\n            mockedRateEntity.setBase(base);\n            mockedRateEntity.setDate(date);\n            Map&lt;EnumCurrency, Double&gt; rates = new HashMap&lt;&gt;();\n            rates.put(EnumCurrency.USD, 1.2);\n            rates.put(EnumCurrency.GBP, 0.9);\n            mockedRateEntity.setRates(rates);\n    \n            // Mock repository behavior\n            when(rateRepository.findOneByDate(date)).thenReturn(Optional.of(mockedRateEntity));\n    \n            // Mock API response\n            RateResponse mockedRateResponse = RateResponse.builder()\n                    .base(base)\n                    .rates(rates)\n                    .date(date)\n                    .build();\n    \n            // Create a HttpHeaders object and set the &quot;apikey&quot; header\n            HttpHeaders headers = new HttpHeaders();\n            headers.add(&quot;apikey&quot;, EXCHANGE_API_API_KEY);\n    \n            // Create a mock response entity with the expected headers and body\n            ResponseEntity&lt;RateResponse&gt; mockedResponseEntity = ResponseEntity.ok()\n                    .headers(headers)\n                    .body(mockedRateResponse);\n    \n            // Mock RestTemplate behavior\n            when(restTemplate.exchange(\n                    anyString(),\n                    eq(HttpMethod.GET),\n                    any(HttpEntity.class),\n                    eq(RateResponse.class)\n            )).thenReturn(mockedResponseEntity);\n    \n            // Call the method\n            RateDto result = rateService.calculateRate(base, targets, date);\n    \n            // Verify repository method was called\n            verify(rateRepository, times(1)).findOneByDate(date);\n    \n            // Verify API call was made\n            String expectedUrl = getExchangeUrl(date, base, targets);\n            HttpHeaders expectedHeaders = new HttpHeaders();\n            expectedHeaders.add(&quot;apikey&quot;, EXCHANGE_API_API_KEY);\n            HttpEntity&lt;String&gt; expectedHttpEntity = new HttpEntity&lt;&gt;(expectedHeaders);\n            verify(restTemplate, times(1)).exchange(\n                    eq(expectedUrl),\n                    eq(HttpMethod.GET),\n                    eq(expectedHttpEntity),\n                    eq(RateResponse.class)\n            );\n    \n            // Verify the result\n            assertThat(result.getBase()).isEqualTo(base);\n            assertThat(result.getDate()).isEqualTo(date);\n            assertThat(result.getRates()).hasSize(2);\n            assertThat(result.getRates()).containsExactlyInAnyOrder(\n                    new RateInfoDto(EnumCurrency.USD, 1.2),\n                    new RateInfoDto(EnumCurrency.GBP, 0.9)\n            );\n        }\n    \n        private String getExchangeUrl(LocalDate rateDate, EnumCurrency base, List&lt;EnumCurrency&gt; targets) {\n    \n            String symbols = String.join(&quot;%2C&quot;, targets.stream().map(EnumCurrency::name).toArray(String[]::new));\n            return EXCHANGE_API_BASE_URL + rateDate + &quot;?symbols=&quot; + symbols + &quot;&amp;base=&quot; + base;\n        }\n    }\n</code></pre>\n<p>How can I fix the issue?</p>\n<p>Here is the repo : <a href=\"https://github.com/Rapter1990/currencyexchange\" rel=\"nofollow noreferrer\">Link</a></p>\n"},{"last_activity_date":1684778796,"question_id":76307692,"body":"<p>I'm planning to read in the itemReader each repetitive <code>Data</code> node as a String to then in the itemProcessor read each String node using <code>org.dom4j.Document document = DocumentHelper.parseText(item);</code> for an easier processing:</p>\n<pre><code>&lt;Data_Collection&gt;\n    &lt;Data&gt;\n        &lt;!-- Nested bunch of elements --&gt;\n    &lt;/Data&gt;\n    &lt;Data&gt;\n        &lt;!-- Nested bunch of elements --&gt;\n    &lt;/Data&gt; \n&lt;/Data_Collection&gt;\n</code></pre>\n<p>But when I use below code the reader has for value only: <code>\\n</code></p>\n<pre><code>@Bean\n@StepScope\npublic StaxEventItemReader&lt;String&gt; reader(@Value(&quot;#{jobParameters['inputXml']}&quot;) String inputXml) {                     \n    \n    StaxEventItemReader&lt;String&gt; reader = new StaxEventItemReader&lt;&gt;();\n    \n    try {\n        Map&lt;String, Class&lt;?&gt;&gt; aliases = new HashMap&lt;&gt;();\n        aliases.put(&quot;Data&quot;, String.class);\n        \n        XStreamMarshaller unmarshaller = new XStreamMarshaller();\n        unmarshaller.setAliases(aliases);           \n        \n        reader.setName(&quot;itemReader&quot;);\n        reader.setResource(new FileSystemResource(inputXml));\n        reader.setFragmentRootElementName(&quot;Data&quot;);\n        reader.setUnmarshaller(unmarshaller);\n    } catch (Exception e) {\n        log.error(&quot;Error while reading: {}&quot;, e.getMessage());\n    }\n    \n    return reader;\n}\n</code></pre>\n<p>What am I doing wrong here?</p>\n"},{"comments":[{"comment_id":112074147,"body":"Does this help ? <a href=\"https://stackoverflow.com/questions/37671467/lombok-requiredargsconstructor-not-working\" title=\"lombok requiredargsconstructor not working\">stackoverflow.com/questions/37671467/&hellip;</a> and if you want to inject already available beans withing spring context e.g. any repository just making them final will inject them. <code>private final SomeRepository repository</code>"},{"comment_id":112074214,"body":"In this case its not compiling. In my case it gives error as: Parameter 0 of constructor in com.abc.Test required a bean of type &#39;java.lang.String&#39; that could not be found"},{"comment_id":112074252,"body":"did you annotate the String variable as @NonNull ?"},{"comment_id":112074600,"body":"Don&#39;t add Lombok for this. It&#39;s expecting a String bean, not a value to be injected from properties. Use <code>@Value(&quot;${xyz&quot;})</code> on the constructor paramter.   You <i>can</i> use lombok, but it gets really messy to apply annotations to the consturctor. See <code>onConstructor</code> documentation,"},{"comment_id":124939023,"body":"As of Spring 4.3 <a href=\"https://stackoverflow.com/questions/68538851/lombok-and-autowired/70653475#70653475\" title=\"lombok and autowired\">stackoverflow.com/questions/68538851/lombok-and-autowired/&hellip;</a>"}],"answers":[{"answer_id":63624251,"body":"<p>The <code>@Service</code> annotation needs to be removed and the bean must be created in a <code>@Configuration</code> class with a <code>@Bean</code> annotated method returning that class type.</p>\n<pre class=\"lang-java prettyprint-override\"><code>//Test.java\npackage com.abc;\n\nimport lombok.RequiredArgsConstructor;\nimport lombok.ToString;\n\n@RequiredArgsConstructor\n@ToString\npublic class Test {\n\nprivate final String str;\nprivate String str5;\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>//DemoApplication.java\npackage com.abc;\n\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.Bean;\n\n@SpringBootApplication\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n\n    @Bean\n    Test buildTest(@Value(&quot;${xyz}&quot;) String value) {\n        return new Test(value);\n    }\n\n}\n\n</code></pre>\n<p>note: <code>@SpringBootApplication</code> implies <code>@Configuration</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>//DemoApplicationTests.java\npackage com.abc;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\n\n@SpringBootTest\nclass DemoApplicationTests {\n\n    @Autowired\n    com.abc.Test test;\n\n    @Test\n    void contextLoads() {\n        System.out.println(test);\n    }\n\n}\n</code></pre>\n<pre><code>#application.properties\nxyz=print me\n</code></pre>\n<p><strong>Result:</strong></p>\n<pre><code>Test(str=print me, str5=null)\n</code></pre>\n"},{"answer_id":64592703,"body":"<p>In this case I think you are better off either annotating the field :</p>\n<pre><code>@Service\npublic class Test{\n\n    @Value(&quot;${xyz}&quot;)\n    private String str;\n\n    private String str5;\n\n    // more code\n}\n</code></pre>\n<p>or defining explicitly the constructor with an annotated parameter:</p>\n<pre><code>@Service\npublic class Test{\n\n    private final String str;\n\n    private String str5;\n\n    public Test(@Value(&quot;${xyz}&quot;) String str) {\n        this.str = str;\n    }\n    // more code\n}\n</code></pre>\n<p>And if you have other <em>final</em> fields you can combine lombok constructor generation with field annotation like this as noted in <a href=\"https://stackoverflow.com/questions/52321988\">Best practice for @Value fields, Lombok, and Constructor Injection?</a></p>\n<pre><code>@RequiredArgsConstructor\n@Service\npublic class Test{\n\n    @Value(&quot;${xyz}&quot;)\n    private String str;\n\n    private final String str5;\n\n    // more code\n}\n</code></pre>\n"}],"last_activity_date":1684778790,"question_id":63380477,"body":"<p>I have a class with lombok @RequiredArgsConstructor:</p>\n<pre><code>@RequiredArgsConstructor\n@Service\npublic class Test{\n\nprivate final String str;\nprivate String str5;\n\n// more code\n\n}\n</code></pre>\n<p>In non-spring boot we provide in xml as:</p>\n<pre><code>&lt;bean id=&quot;Test&quot; class=&quot;com.abc.Test&quot;&gt;\n        &lt;constructor-arg index=&quot;0&quot; value=&quot;${xyz}&quot;/&gt;\n    &lt;/bean&gt;\n</code></pre>\n<p>how to achieve same from spring boot may be via application.properties but how to inject</p>\n"},{"comments":[{"comment_id":134563528,"body":"It only creates white space when its aspect ratio is too tall to remain square otherwise. It looks to me it does a rather good job. The only other thing you could do is to constrain to always square by using a resize listener"}],"last_activity_date":1684777875,"question_id":76308774,"body":"<p>Resizing application window creates black space and tears. I am a beginner programmer trying to create a simple chessboard that scales appropriately when you drag the borders of the window to resize. I was able to achieve this for the most part, however dragging the window creates a lot of artifacts and black space, and sometimes when releasing the mouse the frame does not properly fit the panel.</p>\n<p><a href=\"https://drive.google.com/drive/folders/17xHYEM6Q79uhsJABeZL3ssnrH9dyIgOK?usp=sharing\" rel=\"nofollow noreferrer\">Try it Yourself</a></p>\n<p>Source Code</p>\n<pre><code>import java.awt.*;\nimport javax.swing.*;\nimport java.awt.event.ComponentAdapter;\nimport java.awt.event.ComponentEvent;\nimport java.awt.event.ComponentListener;\n\npublic class Hello\n{ \n    public static void main(String[] args) \n    {\n        SwingUtilities.invokeLater(() -&gt; {\n            Board bd = new Board();\n        });\n        \n    }\n}\n\nclass ChessBoardPanel extends JPanel {\n    private boolean white = false;\n    public int cellSize;\n\n    ChessBoardPanel(int chessBoardSize) {\n        cellSize = chessBoardSize / 8;\n    }\n//draw the ChessBoard\n    @Override\n    protected void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        for (int i = 0; i &lt; 8; i++) {\n            for (int j = 0; j &lt; 8; j++) {\n                if (white)\n                    g.setColor(new Color(232, 191, 174));\n                else\n                    g.setColor(new Color(92, 52, 36));\n                g.fillRect(i * cellSize, j * cellSize, cellSize, cellSize);\n                white = !white;\n            }\n            white = !white;\n        }\n    }\n}\n\nclass Board {\n    int chessBoardSize = 512;\n    JFrame frame = new JFrame(&quot;Chess Board&quot;);\n    ChessBoardPanel panel = new ChessBoardPanel(chessBoardSize);\n    //listens for when the application is resized\n    ComponentAdapter ca = new ComponentAdapter() {\n        @Override\n        public void componentResized(ComponentEvent e) {\n            //resize panel by repainting\n            Insets insets = frame.getInsets();\n            chessBoardSize = frame.getSize().width - insets.left - insets.right;\n            panel.cellSize = chessBoardSize / 8;\n            panel.repaint();\n            //fit frame to panel\n            Dimension prefDimension = new Dimension(panel.cellSize * 8, panel.cellSize * 8);\n            panel.setPreferredSize(prefDimension);\n            frame.pack();\n        };\n    };\n    \n    Board() {\n        frame.addComponentListener(ca);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        Dimension prefDimension = new Dimension(panel.cellSize * 8, panel.cellSize * 8);\n        panel.setPreferredSize(prefDimension);\n        frame.getContentPane().add(panel);\n        frame.pack();\n        frame.setVisible(true);\n        frame.setLocationRelativeTo(null);\n        panel.repaint(); // Call repaint to trigger paintComponent\n    }\n}\n\n\n</code></pre>\n<p>My suspicion is that the problem lies within the Component Adapter where I set the preferred Dimensions to the dimensions of the chessboard and then re-pack the frame to fit the panel. I liked this idea because originally you could drag the width or height of the frame and it would create additional white space that I didn't want to see. If you see any egregious coding practices here feel free to educate me.</p>\n"},{"comments":[{"comment_id":134563597,"body":"That is not an exception, it is a path to a Java source file. What are the actual code, the actual exception and error message, and the actual gradle configuration?"},{"comment_id":134568063,"body":"Please provide enough code so others can better understand or reproduce the problem."}],"last_activity_date":1684777821,"question_id":76308769,"body":"<p>I'm pretty new to Gradle so excuse my confusion.</p>\n<p>I've put the MySQL Java Connector from Maven Repos to my Gradle dependencies inside build.gradle,\nbut when I try this : Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;); I get this exception: /home/charming/Porkramming/javaApps/chatApplication/app/src/main/java/charming/actualCode/App.java</p>\n<p>I can run ./gradlew build succesfully, and there's even mysql-connector-8.0.32.jar file in gradle build/lib directory.</p>\n<p>I've tried following a lot of tutorials, but most of them resort to manual download and editing classPath through the IDE, which I both don't want to do, and I don't really know how to do since I'm using VSCode as my IDE and i'm not sure where I could configure the java class build path.</p>\n"},{"comments":[{"comment_id":134564729,"body":"<code>if (runThreads)                         input = new DataInputStream(socket.getInputStream());</code> Remove that statement. You already opened it just before the while loop."},{"comment_id":134564742,"body":"You cannot use a Toast() there where you read or write to sockets."},{"comment_id":134564754,"body":"<code>then receive it back from the server through another socket </code> ? What do you mean with &#39;another socket&#39;? Where do you have it?"},{"comment_id":134565691,"body":"@blackapps I&#39;m going to be honest, I don&#39;t even know why the <code>if (runThreads)</code> line was there, but  I removed it and it didn&#39;t fix it. Regarding the Toast(), removing it also didn&#39;t fix the issue. I&#39;ve realised that the first time that the fragment is loaded, it works perfectly, but the issue arises for every other time which the fragment is opened apart from the first time"}],"last_activity_date":1684777720,"question_id":76308749,"body":"<p>I am trying to request information through a socket on an Android client and then receive it back from the server through another socket but I am not receiving the information sent from server on the client side.</p>\n<p>This is the code for my client on Android:</p>\n<pre><code>public View onCreateView(@NonNull LayoutInflater inflater,\n                             ViewGroup container, Bundle savedInstanceState)\n    {\n        binding = FragmentBinding.inflate(inflater, container, false);\n\n        runThreads = true;\n        new ResponseListener().start();\n        queryAllOrders();\n\n        return binding.getRoot();\n    }\n\n    private void queryAllOrders()\n    {\n        try\n        {\n            if (socket != null)\n            {\n                DataOutputStream output = new DataOutputStream(socket.getOutputStream());\n                output.writeUTF(&quot;§§Q0&quot;);\n                output.flush();\n                Toast.makeText(getContext(), &quot;Orders queried successfully&quot;, Toast.LENGTH_SHORT).show();\n            }\n            else\n                Toast.makeText(getContext(), &quot;Error querying orders&quot;, Toast.LENGTH_SHORT).show();\n        }\n        catch (IOException e)\n        {\n            e.printStackTrace();\n            Toast.makeText(getContext(), &quot;Error querying orders&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n\n    private static class ResponseListener extends Thread\n    {\n        @Override\n        public void run()\n        {\n            try\n            {\n                DataInputStream input = new DataInputStream(socket.getInputStream());;\n                while (runThreads)\n                {\n                    String mes = input.readUTF();\n                    if (mes.startsWith(&quot;§§R0&quot;))\n                    {\n                        ContextCompat.getMainExecutor(MainApplication.getAppContext()).execute(() -&gt;\n                                Toast.makeText(MainApplication.getAppContext(), &quot;Response received successfully&quot;, Toast.LENGTH_SHORT).show());\n                        System.out.println(&quot;Response received successfully | Message: &quot; + mes);\n                    }\n                    if (runThreads)\n                        input = new DataInputStream(socket.getInputStream());\n                }\n                input.close();\n            } catch (Exception e)\n            {\n                e.printStackTrace();\n            }\n        }\n    }\n\n    @Override\n    public void onDestroyView()\n    {\n        super.onDestroyView();\n        binding = null;\n        runThreads = false;\n    }\n}\n</code></pre>\n<p>And this is the thread on my server which detects an input:</p>\n<pre><code>    private static class ClientInput extends Thread\n    {\n        private final int clientId;\n        private final Socket socket;\n\n        DataInputStream input;\n        DataOutputStream output;\n\n        public ClientInput(int clientId, Socket socket) throws IOException\n        {\n            this.clientId = clientId;\n            this.socket = socket;\n\n            input = new DataInputStream(socket.getInputStream());\n            output = new DataOutputStream(socket.getOutputStream());\n        }\n\n        @Override\n        public void run()\n        {\n            try\n            {\n                while (runThreads)\n                {\n                    String mes = input.readUTF();\n\n                    if (mes.startsWith(&quot;§§Q&quot;))\n                    {\n                        if (mes.charAt(3) == '0')\n                        {\n                            StringBuilder response = new StringBuilder(&quot;§§R0%&quot;);\n                            for (Order order : orders)\n                            {\n                                response.append(order.toString());\n                                response.append(&quot;%&quot;);\n                            }\n                            response.deleteCharAt(response.length() - 1);\n                            serverWrite(&quot;\\nSent all orders to client with ID: &quot; + clientId + &quot; | Host : &quot; +  socket.getInetAddress().getCanonicalHostName());\n                            serverWrite(&quot;Orders: &quot; + response);\n                            output.writeUTF(response.toString());\n                            output.flush();\n                        }\n                    }\n                }\n            } catch (IOException e)\n            {\n                if (e.getMessage() == null)\n                    serverWrite(&quot;\\nConnection with a client lost&quot;);\n                else\n                {\n                    if (e.getMessage().equals(&quot;Connection reset&quot;))\n                        serverWrite(&quot;\\nConnection with a client lost&quot;);\n                    else\n                        e.printStackTrace();\n                }\n            }\n        }\n    }\n</code></pre>\n<p>When I open the fragment on the client, it sends the request to the server and on the server-side, I see that a response is sent back to the client. However, I don't receive that response on the client and the code stays on the <code>input.readUTF()</code>.</p>\n"},{"last_activity_date":1684777603,"question_id":76308686,"body":"<p>In my Flink project, there are two topics that I join query on both of them:</p>\n<pre><code>   StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n   StreamTableEnvironment tableEnv = StreamTableEnvironment.create(env);\n\n   env.setStateBackend(new EmbeddedRocksDBStateBackend());\n   env.getCheckpointConfig().setCheckpointStorage(&quot;file:///...&quot;);\n\nKafkaSource&lt;DataFileChunk&gt; src1 = KafkaSource.&lt;DataFileChunk&gt;builder().            \n setBootstrapServers(&quot;pkc-ep9mm.us-east-2.aws.confluent.cloud:9092&quot;).setTopics(&quot;topic1&quot;).... \n\nKafkaSource&lt;DataFileChunk&gt; src2 = KafkaSource.&lt;DataFileChunk&gt;builder().            \n setBootstrapServers(&quot;pkc-ep9mm.us-east-2.aws.confluent.cloud:9092&quot;).setTopics(&quot;topic2).... \n</code></pre>\n<p>Following there are two corresponding dataStreams and process Functions:</p>\n<pre><code>DataStream&lt;DataFileChunk&gt; stream1 = env.fromSource(src1, WatermarkStrategy.noWatermarks(), &quot;TBL1&quot;);\n\nDataStream&lt;DataFileChunk&gt; stream2 = env.fromSource(src2, WatermarkStrategy.noWatermarks(), &quot;TBL2&quot;);```\n\n tableEnv.createTemporaryView(&quot;TBL1&quot;, rawDataStream);\n tableEnv.createTemporaryView(&quot;TBL2&quot;, bkgdDataStream);\n\nString join_query = &quot;select ....&quot;;\nTable join_table = tableEnv.sqlQuery(data_query);\n\nDataStream&lt;Row&gt; join_stream = tableEnv.toDataStream(raw_table);\n\njoin_stream.process(new DataProcessor()).setParallelism(4);\n</code></pre>\n<p>My ProcessFunction class:</p>\n<pre><code>public class DataProcessor\n        extends ProcessFunction&lt;Row, List&lt;double[][][]&gt;&gt; implements CheckpointedFunction, SinkFunction&lt;Tuple2&lt;double[][][], double[][][]&gt;&gt; {\n\n    @Override\n    public void processElement(Row row, ProcessFunction&lt;Row, List&lt;double[][][]&gt;&gt;.Context context, Collector&lt;List&lt;double[][][]&gt;&gt; collector) throws Exception {\n\nint id = Integer.parseInt(&quot;&quot; + row.getField(0));\nString data_chunk1 = &quot;&quot; + row.getField(1);\nString total_chunk2 = &quot;&quot; + row.getField(2);\nint chunk_size = Integer.parseInt(&quot;&quot; + row.getField(3));\n\ndouble[][][] p_data1 = analyzeData(id, data_chunk1, chunk_size);\ndouble[][][] p_data2 = analyzeData(id, data_chunk2, chunk_size);\n\nlistState.add(new Tuple2&lt;&gt;(p_data1, p_data2));\n\n//        TODO: \n//         1. Ensure to consume all data and add them to the listSate \n//         2. Iterate over listSate...\n//         3. Clean listState\n}\n\n    private transient ListState&lt;Tuple2&lt;double[][][], double[][][]&gt;&gt; listState;\n    \n    @Override\n    public void initializeState(FunctionInitializationContext context) throws Exception {\n        ListStateDescriptor&lt;Tuple2&lt;double[][][], double[][][]&gt;&gt; descriptor =\n                new ListStateDescriptor&lt;&gt;(\n                        &quot;buffered-elements&quot;,\n                        TypeInformation.of(new TypeHint&lt;&gt;() {\n                        }));\n\n        listState = context.getOperatorStateStore().getListState(descriptor);\n    }\n}\n</code></pre>\n<p>listState does not provide me with a method to figure out what's the size of the list. So, I will have two options:</p>\n<p>Option 1: Figuring out that somehow all data are consumed and then iterate over the listState (but don't know how to do that...)</p>\n<p>Option 2: Calculation the size of the list in another state (i.e. ValueState). From this option, by reading <a href=\"https://nightlies.apache.org/flink/flink-docs-master/docs/dev/datastream/fault-tolerance/state/\" rel=\"nofollow noreferrer\">this article</a> I learned a bit about <strong>ValueState</strong> and <strong>Keyed DataStream</strong>.</p>\n<p>So, I think I will need to follow these steps:</p>\n<ol>\n<li>Creating a KeySelector. I tried this but it might be wrong:</li>\n</ol>\n<pre><code>join_stream.keyBy((KeySelector&lt;Row, Integer&gt;) row -&gt; Integer.parseInt(&quot;&quot; + row.getField(0)));\n</code></pre>\n<ol start=\"2\">\n<li>Initializing a ValueState somehow as it needs to be pointed out to my listSate to get the size of listSate anytime.**</li>\n</ol>\n<p>So, I don't know how to implement the above steps.</p>\n"},{"comments":[{"comment_id":134563101,"body":"there are tests running with <code>couchbase&#47;server:enterprise-7.0.3</code> but no <code>couchbase:enterprise-7.1.4</code>. IIRC those are different somehow"}],"last_activity_date":1684777546,"question_id":76300676,"body":"<p>Hello I am having some issue starting this image (couchbase:enterprise-7.1.4), using Testcontainers. This is the way I start the container:</p>\n<pre><code> private static final DockerImageName COUCHBASE_IMAGE_ENTERPRISE = DockerImageName\n            .parse(&quot;couchbase:enterprise-7.1.4&quot;)\n            .asCompatibleSubstituteFor(&quot;couchbase/server&quot;);\n\n@Container\n    private static final CouchbaseContainer container = new CouchbaseContainer(COUCHBASE_IMAGE_ENTERPRISE)\n            .withCredentials(&quot;Administrator&quot;, &quot;password&quot;)\n            .withBucket(new BucketDefinition(BUCKET_NAME).withPrimaryIndex(true).withFlushEnabled(true))\n            .withStartupTimeout(Duration.ofMinutes(2));\n</code></pre>\n<p>This is the error that I experience randomly.</p>\n<pre><code>org.testcontainers.containers.ContainerLaunchException: Container startup failed for image couchbase:enterprise-7.1.4\n\n    at org.testcontainers.containers.GenericContainer.doStart(GenericContainer.java:349)\n    at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:322)\n    at org.testcontainers.junit.jupiter.TestcontainersExtension$StoreAdapter.start(TestcontainersExtension.java:274)\n    at org.testcontainers.junit.jupiter.TestcontainersExtension$StoreAdapter.access$200(TestcontainersExtension.java:261)\n    at org.testcontainers.junit.jupiter.TestcontainersExtension.lambda$null$3(TestcontainersExtension.java:76)\n    at org.junit.jupiter.engine.execution.ExtensionValuesStore.lambda$getOrComputeIfAbsent$4(ExtensionValuesStore.java:86)\n    at org.junit.jupiter.engine.execution.ExtensionValuesStore$MemoizingSupplier.computeValue(ExtensionValuesStore.java:223)\n    at org.junit.jupiter.engine.execution.ExtensionValuesStore$MemoizingSupplier.get(ExtensionValuesStore.java:211)\n    at org.junit.jupiter.engine.execution.ExtensionValuesStore$StoredValue.evaluate(ExtensionValuesStore.java:191)\n    at org.junit.jupiter.engine.execution.ExtensionValuesStore$StoredValue.access$100(ExtensionValuesStore.java:171)\n    at org.junit.jupiter.engine.execution.ExtensionValuesStore.getOrComputeIfAbsent(ExtensionValuesStore.java:89)\n    at org.junit.jupiter.engine.execution.NamespaceAwareStore.getOrComputeIfAbsent(NamespaceAwareStore.java:53)\n    at org.testcontainers.junit.jupiter.TestcontainersExtension.lambda$startContainers$4(TestcontainersExtension.java:76)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.testcontainers.junit.jupiter.TestcontainersExtension.startContainers(TestcontainersExtension.java:76)\n    at org.testcontainers.junit.jupiter.TestcontainersExtension.beforeAll(TestcontainersExtension.java:56)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeBeforeAllCallbacks$12(ClassBasedTestDescriptor.java:395)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeBeforeAllCallbacks(ClassBasedTestDescriptor.java:395)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:211)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:84)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:148)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)\nCaused by: org.rnorth.ducttape.RetryCountExceededException: Retry limit hit with exception\n    at org.rnorth.ducttape.unreliables.Unreliables.retryUntilSuccess(Unreliables.java:88)\n    at org.testcontainers.containers.GenericContainer.doStart(GenericContainer.java:334)\n    ... 57 more\nCaused by: org.testcontainers.containers.ContainerLaunchException: Could not create/start container\n    at org.testcontainers.containers.GenericContainer.tryStart(GenericContainer.java:553)\n    at org.testcontainers.containers.GenericContainer.lambda$doStart$0(GenericContainer.java:344)\n    at org.rnorth.ducttape.unreliables.Unreliables.retryUntilSuccess(Unreliables.java:81)\n    ... 58 more\nCaused by: java.lang.RuntimeException: Could not perform request against couchbase HTTP endpoint \n    at org.testcontainers.couchbase.CouchbaseContainer.doHttpRequest(CouchbaseContainer.java:790)\n    at org.testcontainers.couchbase.CouchbaseContainer.renameNode(CouchbaseContainer.java:400)\n    at org.testcontainers.couchbase.CouchbaseContainer.timePhase(CouchbaseContainer.java:802)\n    at org.testcontainers.couchbase.CouchbaseContainer.containerIsStarting(CouchbaseContainer.java:341)\n    at org.testcontainers.containers.GenericContainer.containerIsStarting(GenericContainer.java:703)\n    at org.testcontainers.containers.GenericContainer.tryStart(GenericContainer.java:479)\n    ... 60 more\nCaused by: java.io.IOException: unexpected end of stream on http://localhost:54155/...\n    at org.testcontainers.shaded.okhttp3.internal.http1.Http1ExchangeCodec.readResponseHeaders(Http1ExchangeCodec.kt:202)\n    at org.testcontainers.shaded.okhttp3.internal.connection.Exchange.readResponseHeaders(Exchange.kt:106)\n    at org.testcontainers.shaded.okhttp3.internal.http.CallServerInterceptor.intercept(CallServerInterceptor.kt:79)\n    at org.testcontainers.shaded.okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at org.testcontainers.shaded.okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.kt:34)\n    at org.testcontainers.shaded.okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at org.testcontainers.shaded.okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.kt:95)\n    at org.testcontainers.shaded.okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at org.testcontainers.shaded.okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.kt:83)\n    at org.testcontainers.shaded.okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at org.testcontainers.shaded.okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.kt:76)\n    at org.testcontainers.shaded.okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.kt:109)\n    at org.testcontainers.shaded.okhttp3.internal.connection.RealCall.getResponseWithInterceptorChain$okhttp(RealCall.kt:201)\n    at org.testcontainers.shaded.okhttp3.internal.connection.RealCall.execute(RealCall.kt:154)\n    at org.testcontainers.couchbase.CouchbaseContainer.doHttpRequest(CouchbaseContainer.java:788)\n    ... 65 more\n    Suppressed: java.io.IOException: unexpected end of stream on http://localhost:54155/...\n        ... 80 more\n    Caused by: java.io.EOFException: \\n not found: limit=0 content=…\n        at org.testcontainers.shaded.okio.RealBufferedSource.readUtf8LineStrict(RealBufferedSource.kt:332)\n        at org.testcontainers.shaded.okhttp3.internal.http1.HeadersReader.readLine(HeadersReader.kt:29)\n        at org.testcontainers.shaded.okhttp3.internal.http1.Http1ExchangeCodec.readResponseHeaders(Http1ExchangeCodec.kt:178)\n        ... 79 more\n    Suppressed: java.io.IOException: unexpected end of stream on http://localhost:54155/...\n        ... 80 more\n    Caused by: java.io.EOFException: \\n not found: limit=0 content=…\n        at org.testcontainers.shaded.okio.RealBufferedSource.readUtf8LineStrict(RealBufferedSource.kt:332)\n        at org.testcontainers.shaded.okhttp3.internal.http1.HeadersReader.readLine(HeadersReader.kt:29)\n        at org.testcontainers.shaded.okhttp3.internal.http1.Http1ExchangeCodec.readResponseHeaders(Http1ExchangeCodec.kt:178)\n        ... 79 more\nCaused by: java.io.EOFException: \\n not found: limit=0 content=…\n    at org.testcontainers.shaded.okio.RealBufferedSource.readUtf8LineStrict(RealBufferedSource.kt:332)\n    at org.testcontainers.shaded.okhttp3.internal.http1.HeadersReader.readLine(HeadersReader.kt:29)\n    at org.testcontainers.shaded.okhttp3.internal.http1.Http1ExchangeCodec.readResponseHeaders(Http1ExchangeCodec.kt:178)\n    ... 79 more\n</code></pre>\n<p>Has anyone experienced such issue?</p>\n<p>Here you can find the full code: <a href=\"https://github.com/RosarioB/spring-boot-rest-api-couchbase-crud/tree/basic_crud\" rel=\"nofollow noreferrer\">https://github.com/RosarioB/spring-boot-rest-api-couchbase-crud/tree/basic_crud</a> The test class is CustomerRepositoryTest.</p>\n<p>I have tried to use various methods on the container but with little success.</p>\n"},{"comments":[{"comment_id":134536856,"body":"I don&#39;t think you need synchronization. If you&#39;re not mutating, the only issue is safe publication, which you can address by making it <code>volatile</code>."},{"comment_id":134538393,"body":"Can we assume that <code>list</code> is actually <code>private</code> and that this class contains no other methods that access or mutate the <code>list</code> variable or the <code>List</code> that it refers to?"}],"answers":[{"comments":[{"comment_id":134536900,"body":"You also don&#39;t need <code>volatile</code> if you&#39;re using <code>unmodifiableList()</code>."},{"comment_id":134536995,"body":"@shmosel I think you&#39;d still need it for the publication across threads, right? Not so much for the contents themselves (they&#39;re accessed internally via a <code>final</code>), but to guarantee that the other thread even sees the new reference in a timely fashion."},{"comment_id":134537137,"body":"Good point. But the list itself is thread-safe, so it could be useful in cases where immediate visibility is not a requirement, e.g. Guava&#39;s <code>@LazyInit</code> fields."},{"comment_id":134537359,"body":"What if there are multiple threads trying to call refresh()?"},{"comment_id":134537711,"body":"@eriee Without <code>synchronized</code>, they will both execute at the same time, and then whichever happens to write to <code>list</code> last will &quot;win.&quot; With <code>synchronized</code>, it&#39;ll be similar except that the refreshes will all be one at a time. Either way, you may be hitting your DB more than you want, in which case you may want a separate <code>lastUpdated</code> field so you can do rate limiting. In that case, you probably do want <code>synchronized</code>, so that &quot;check lastUpdated, fetch list, update lastUpdated is atomic."},{"comment_id":134537720,"body":"In all of those cases, if <code>last</code> is either an AtomicReference or <code>volatile</code>, the get does not need to be synchronized; if it&#39;s neither (as in your code snippet above), it should be. But there&#39;s also no harm in having both be synchronized even if the field is AtomicReference or volatile, so if you find that easier to reason about, you should feel free to add synchronized to both!"}],"answer_id":76292800,"body":"<p>Yes, what you have will work.</p>\n<p>If you don't need to coordinate the list's refresh with any other state, you could also use a <code>final AtomicReference&lt;List&lt;Foo&gt;&gt;</code>, or even use a <code>volatile List&lt;Foo&gt;</code>. In either of those cases, you would not need to mark your methods as <code>synchronized</code>: both <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/concurrent/atomic/AtomicReference.html\" rel=\"nofollow noreferrer\"><code>AtomicReference</code></a> and <code>volatile</code> have cross-reference memory guarantees, as long as the object being assigned/set to the field isn't mutated after that assignment.</p>\n<p>For that to work, it's crucial that the <code>List</code> isn't mutated, <em>and</em> that none of its <code>Foo</code>s are (unless they're thread-safe). If it were me, I would wrap the List in a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Collections.html#unmodifiableList(java.util.List)\" rel=\"nofollow noreferrer\"><code>Collections.unmodifiableList</code></a> or some other unmodifiable list such as <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/List.html#copyOf(java.util.Collection)\" rel=\"nofollow noreferrer\"><code>List.copyOf</code></a>, and add a comment to the effect of &quot;this needs to be unmodifiable for thread-safety&quot;, so that someone else doesn't later change that without realizing what they're breaking. (It'll be hard to write a unit test that detects that error — more likely, you'll just hit in prod, unpredictably.)</p>\n"},{"comments":[{"comment_id":134551496,"body":"Great callout with the iteration style! And just to round it out a bit more, if someone wants to use the <code>for (int i=</code> style, they still can if they first copy the <code>list</code> to a local reference (<code>List&lt;Foo&gt; local = list</code>), and then iterate over that."},{"comment_id":134563235,"body":"updated the question to make list <code>private</code> and add for-loop logic."}],"answer_id":76293985,"body":"<p>People have suggested using <code>volatile</code> or an <code>AtomicReference</code> as an alternative to <code>synchronized</code> or a <code>Lock</code>.</p>\n<p>If you do this, the correctness / thread-safety will depend on <em>how</em> the <code>getFoo</code> method &quot;loops&quot; the list.  For example:</p>\n<pre><code>    private volatile List&lt;Foo&gt; list = new ArrayList&lt;&gt;();\n\n    public Foo getFoo(Condition x) {\n        for (Foo foo: list) {\n           ...\n        }\n    }\n</code></pre>\n<p>will be OK because the <code>list</code> variable is read exactly once, but</p>\n<pre><code>    public Foo getFoo(Condition x) {\n        for (int i = 0; i &lt; list.size(); i++) {\n           Foo f = list.get(i);\n           ...\n        }\n    }\n</code></pre>\n<p>will not be OK.  This can be addressed by assigning <code>list</code> to a local variable and iterating <em>that</em>.</p>\n<p>Correctness / thread-safety will also depend on whether or not <code>getFoo</code> is specified to return a <code>Foo</code> that is (still) in the list when <code>getFoo</code> returns.  Consider what happens if <code>refresh()</code> is called while a <code>getFoo</code> is in progress.  If we use <code>synchronized</code> (as per the original code) then the <code>getFoo</code> returns a <code>Foo</code> that is still in the list at the point of return.  If we don't, then <code>getFoo</code> may return a list that has already been removed from the list.  Indeed, you could imagine a scenario with 3 threads like this:</p>\n<pre><code>    Thread 1 calls getFoo(c)\n    Thread 2 calls refresh which empties the list\n    Thread 2 refresh completes\n    Thread 3 calls getFoo(c)\n    Thread 3 quickly returns null because no Foo matches in the new list\n    ...\n    time passes\n    ...\n    Thread 1 returns a non-null matching Foo from the old list\n</code></pre>\n<p>There is also the issue of whether <code>list</code> or the <code>List</code> that it refers to can be accessed via other routes; e.g. since the example shows <code>list</code> as not declared as <code>private</code>, it could be accessed and even mutated from another class.  (This can be addressed too.)</p>\n<hr />\n<p>Thread-safety is a surprisingly rubbery concept.  The normal definition is that code that is correct when there is only one thread is also correct in all situations where two or more threads.  In this case, &quot;correct&quot; means that it (provably) satisfies the formal requirements for the code.</p>\n<p>But here we don't have either a clear statement of the formal requirements or complete versions of the code.   So therefore we cannot say <strong>with 100% certainty</strong> that <em>any</em> of the versions is thread-safe.</p>\n"}],"last_activity_date":1684776979,"question_id":76292701,"body":"<p>I need to implement a list as the following:</p>\n<pre><code>private List&lt;Foo&gt; list = new ArrayList&lt;&gt;();\n\npublic synchronized Foo getFoo(Condition condition) {\n    // loop the list and get a foo that meets the condition\n    for (Foo foo: list) {\n        if(condition.check(foo)) {\n            return foo;\n        }\n    }\n    return null;\n}\n\npublic synchronized void refresh() {\n    list = new ArrayList&lt;&gt;(fetchFromDB());\n}\n</code></pre>\n<p>Is there better way to avoid synchronized method to make the read and instantiate thread safe? I think CopyOnWriteArrayList won't help here because there are no mutative operations on the same list and every time we just create a new list. Am I right?</p>\n<hr />\n<p>UPDATED: to clarify, the list will only be fully set by the refresh() method, there is no other mutation to the list.</p>\n"},{"last_activity_date":1684776073,"question_id":76308580,"body":"<p>In the following example Quarkus cannot let you @Inject a service in something static. When something is static it means that is defined within the method. So you should not @Inject something into a static method.</p>\n<pre><code>public static void method(){\n@Inject\nService service;\n\nservice.serviceMethod()\n}\n\n</code></pre>\n"},{"last_activity_date":1684775978,"question_id":76303663,"body":"<p>When I ran the test runner file using junit, I'm not able to get method suggestions of step definition on the console.</p>\n<p>This is my test Runner file.</p>\n<pre><code>@RunWith(Cucumber.class)\n@CucumberOptions(features=&quot;src/main/java/features&quot;, glue=&quot;stepdef&quot;\npublic class TestRunner {\n}\n</code></pre>\n"},{"comments":[{"comment_id":134153490,"body":"Can you add your main class for this project? It seems to be coming from some configuration in there somewhere."},{"comment_id":134153571,"body":"@grekier I have added the main class, but I have not modified that file at all so not sure it will help"},{"comment_id":134153676,"body":"I see... that&#39;s definitively not the issue... Do you have any other classes annotated with <code>@Configuration</code> or <code>@Import</code> maybe? BTW, class name should start with an uppercase in Java"},{"comment_id":134154312,"body":"Oh  thats not the actual class name, I just put that there for confidentiality purposes.  and yes I do have another config file, but its for my dynamoDB configuration. and that works fine"},{"comment_id":134169476,"body":"So I&#39;m not sure where it is coming from but, in any cases, the error is caused because something somewhere is annotated with something that needs AmazonRdsInstanceConfiguration and it isn&#39;t there. Obviously you could add <code>spring-cloud-aws-jdbc</code> as a dependency but, if it is not in use, it would be better to figure out why it&#39;s expected"},{"comment_id":134184936,"body":"Yea that was what I found when looking into it, but it seems that adding that dependency requires you to use things that I don&#39;t need, and thus throws even more errors at me"}],"answers":[{"answer_id":76308558,"body":"<p><em>I don't have enough reputations to provide as a comment, so forced to give what worked for me as an answer.</em></p>\n<p>I got the same error while working on a project. I updated my application-local.yml like below which resolved it.</p>\n<pre><code>cloud:\n  aws:\n    rds:\n      enabled: false\n</code></pre>\n<p>I feel this is just a fix to the problem but not actually figuring out the root cause behind the issue. I'll update when I get more info on the issue.</p>\n"}],"last_activity_date":1684775891,"question_id":76066726,"body":"<p>I am trying to get my spring application to run with Amazon SES but keep getting an exception during the build process saying &quot;java.lang.ClassNotFoundException: io.awspring.cloud.jdbc.config.annotation.AmazonRdsInstanceConfiguration&quot; I was following an example online at <a href=\"https://stackabuse.com/guide-to-simple-email-service-aws-ses-with-spring-boot-and-spring-cloud/\" rel=\"nofollow noreferrer\">https://stackabuse.com/guide-to-simple-email-service-aws-ses-with-spring-boot-and-spring-cloud/</a></p>\n<p>Here is my Config file</p>\n<pre><code>import com.amazonaws.auth.AWSStaticCredentialsProvider;\nimport com.amazonaws.auth.BasicAWSCredentials;\nimport com.amazonaws.services.simpleemail.AmazonSimpleEmailService;\nimport com.amazonaws.services.simpleemail.AmazonSimpleEmailServiceClientBuilder;\nimport io.awspring.cloud.ses.SimpleEmailServiceMailSender;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.mail.MailSender;\n\n@Configuration\npublic class AmazonSESConfig {\n\n    @Value(&quot;${amazon.aws.accessKey}&quot;)\n    private String accessKey;\n    @Value(&quot;${amazon.aws.secretKey}&quot;)\n    private String secretKey;\n\n    @Value(&quot;${amazon.aws.region}&quot;)\n    private String region;\n\n    @Bean\n    public AmazonSimpleEmailService amazonSimpleEmailService() {\n        BasicAWSCredentials credentials = new BasicAWSCredentials(accessKey, secretKey);\n        return AmazonSimpleEmailServiceClientBuilder\n                .standard()\n                .withCredentials(new AWSStaticCredentialsProvider(credentials))\n                .withRegion(region)\n                .build();\n\n    }\n\n    @Bean\n    public MailSender mailSender(AmazonSimpleEmailService amazonSimpleEmailService) {\n        return new SimpleEmailServiceMailSender(amazonSimpleEmailService);\n    }\n}\n</code></pre>\n<p>Here is my properties file</p>\n<pre><code>amazon.aws.accessKey=ACCESS_KEY\namazon.aws.secretKey=SECRET_KEY\namazon.aws.region=ca-central-1\n</code></pre>\n<p>Here is my service file</p>\n<pre><code>@Service\npublic class CorrespondenceService {\n\n    @Autowired\n    private MailSender mailSender;\n\n    public void sendMail(){\n    \n        SimpleMailMessage simpleMailMessage = new SimpleMailMessage();\n        simpleMailMessage.setFrom(&quot;testFromEmail@test.com&quot;);\n        simpleMailMessage.setTo(&quot;testToEmail@test.com&quot;);\n        simpleMailMessage.setSubject(&quot;Test&quot;);\n        simpleMailMessage.setText(&quot;This email is a test&quot;);\n\n        mailSender.send(simpleMailMessage);\n\n\n    }\n\n}\n</code></pre>\n<p>Finally here is the error from the console.</p>\n<pre><code>java.lang.IllegalArgumentException: Could not find class [io.awspring.cloud.jdbc.config.annotation.AmazonRdsInstanceConfiguration]\n        at org.springframework.util.ClassUtils.resolveClassName(ClassUtils.java:334) ~[spring-core-5.3.19.jar:5.3.19]\n        at org.springframework.core.annotation.TypeMappedAnnotation.adapt(TypeMappedAnnotation.java:446) ~[spring-core-5.3.19.jar:5.3.19]\n        at org.springframework.core.annotation.TypeMappedAnnotation.getValue(TypeMappedAnnotation.java:369) ~[spring-core-5.3.19.jar:5.3.19]\n        at org.springframework.core.annotation.TypeMappedAnnotation.asMap(TypeMappedAnnotation.java:284) ~[spring-core-5.3.19.jar:5.3.19]\n        at org.springframework.core.annotation.AbstractMergedAnnotation.asAnnotationAttributes(AbstractMergedAnnotation.java:193) ~[spring-core-5.3.19.jar:5.3.19]\n        at org.springframework.core.type.AnnotatedTypeMetadata.getAnnotationAttributes(AnnotatedTypeMetadata.java:106) ~[spring-core-5.3.19.jar:5.3.19]\n        at org.springframework.core.type.AnnotatedTypeMetadata.getAnnotationAttributes(AnnotatedTypeMetadata.java:81) ~[spring-core-5.3.19.jar:5.3.19]\n        at org.springframework.context.annotation.AnnotationConfigUtils.attributesFor(AnnotationConfigUtils.java:285) ~[spring-context-5.3.19.jar:5.3.19]\n        at org.springframework.context.annotation.AnnotationBeanNameGenerator.determineBeanNameFromAnnotation(AnnotationBeanNameGenerator.java:103) ~[spring-context-5.3.19.jar:5.3.19]\n        at org.springframework.context.annotation.AnnotationBeanNameGenerator.generateBeanName(AnnotationBeanNameGenerator.java:82) ~[spring-context-5.3.19.jar:5.3.19]\n        at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.registerBeanDefinitionForImportedConfigurationClass(ConfigurationClassBeanDefinitionReader.java:169) ~[spring-context-5.3.19.jar:5.3.19]\n        at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:150) ~[spring-context-5.3.19.jar:5.3.19]\n        at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:129) ~[spring-context-5.3.19.jar:5.3.19]\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:343) ~[spring-context-5.3.19.jar:5.3.19]\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:247) ~[spring-context-5.3.19.jar:5.3.19]\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:311) ~[spring-context-5.3.19.jar:5.3.19]\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:112) ~[spring-context-5.3.19.jar:5.3.19]\n        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:746) ~[spring-context-5.3.19.jar:5.3.19]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:564) ~[spring-context-5.3.19.jar:5.3.19]\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:145) ~[spring-boot-2.6.7.jar:2.6.7]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740) ~[spring-boot-2.6.7.jar:2.6.7]\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415) ~[spring-boot-2.6.7.jar:2.6.7]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:303) ~[spring-boot-2.6.7.jar:2.6.7]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1312) ~[spring-boot-2.6.7.jar:2.6.7]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1301) ~[spring-boot-2.6.7.jar:2.6.7]\n        at *MY APPLICATION PATH*(MyApplication.java:10) ~[classes/:na]\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\n        at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.6.7.jar:2.6.7]\nCaused by: java.lang.ClassNotFoundException: io.awspring.cloud.jdbc.config.annotation.AmazonRdsInstanceConfiguration\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641) ~[na:na]\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188) ~[na:na]\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]\n        at java.base/java.lang.Class.forName0(Native Method) ~[na:na]\n        at java.base/java.lang.Class.forName(Class.java:495) ~[na:na]\n        at java.base/java.lang.Class.forName(Class.java:474) ~[na:na]\n        at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:145) ~[spring-boot-devtools-2.6.7.jar:2.6.7]\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]\n        at java.base/java.lang.Class.forName0(Native Method) ~[na:na]\n        at java.base/java.lang.Class.forName(Class.java:495) ~[na:na]\n        at java.base/java.lang.Class.forName(Class.java:474) ~[na:na]\n        at org.springframework.util.ClassUtils.forName(ClassUtils.java:284) ~[spring-core-5.3.19.jar:5.3.19]\n        at org.springframework.util.ClassUtils.resolveClassName(ClassUtils.java:324) ~[spring-core-5.3.19.jar:5.3.19]\n        ... 28 common frames omitted\n\n</code></pre>\n<p>Here is the main class</p>\n<pre><code>import org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class EmailApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(EmailApplication.class, args);\n    }\n\n}\n</code></pre>\n"},{"comments":[{"comment_id":134562084,"body":"What does dropped test mean? Failed? Skipped? Interrupted? Brand new tests?"},{"comment_id":134562120,"body":"Oh, I apologize for the inaccuracy. I was only referring to failed tests. The ones that didn&#39;t pass last time."},{"comment_id":134562476,"body":"This is what an IDE is good at"},{"comment_id":134562613,"body":"and this is what maven seems to be bad at) but the problem remains"},{"comment_id":134562658,"body":"While you can do it for &quot;multi modules&quot; (<code>mvn &lt;args&gt; -rf :my-module</code> ..at least is logged after a failed mm-build), there seems no such option on test base.."},{"comment_id":134562748,"body":"@xerx593 Oh, well, at least it potentially works somewhere) thanks"},{"comment_id":134562808,"body":"the closest (but far from desired) I could get with maven-surefire: <a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/examples/rerun-failing-tests.html\" rel=\"nofollow noreferrer\">maven.apache.org/surefire/maven-surefire-plugin/examples/&hellip;</a> Hi &amp; Welcome! :)"},{"comment_id":134562869,"body":"@xerx593 thank you, also glad to meet) but rightly pointed out - far from the desired)"}],"last_activity_date":1684775426,"question_id":76307943,"body":"<p>I have a set of autotests on junit 5, maven, java. I need to write a script or method that checks if there are failed tests from previous execution. And if there are such tests, then run them.</p>\n<p>In my TestWatcher I get a list of fallen tests, but I don't understand how to tell maven to only run them. I know of an option to run tests via mvn test -Dtest=&quot;TestClass1, TestClass2&quot;, but this is not an option if there are, for example, 20 tests.</p>\n<p>The @RepeatedTest junit annotations, as well as the surefire rerunFailingTestsCount property, are not appropriate because they are triggered immediately on a dropped test. Which is good, of course, but not for this specific task.</p>\n"},{"answers":[{"answer_id":76308494,"body":"<p>I tried the same code in a dummy project and see that it alteast compiles without any issue. Of course, I did not run this.</p>\n<p><a href=\"https://i.stack.imgur.com/le4Fc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/le4Fc.png\" alt=\"Eclipse build - Simple Project\" /></a></p>\n<p>Hope this helps you!.</p>\n"}],"last_activity_date":1684775332,"question_id":76226457,"body":"<p>I'm trying to return profile data from the the currently logged in user in teamcenter 13 3 using java 11.0.17 and Eclipse 2013 3. I've tried the method submitted a while ago (<a href=\"https://stackoverflow.com/a/21730281/14287068\">https://stackoverflow.com/a/21730281/14287068</a>) but I've got problems with imports because either <em>com.teamcenter.rac.aif.AIFUtilit</em> and <em>com.teamcenter.rac.aif.AbstractAIFSessio</em> does not exist and I cannot use them.</p>\n<p>Does anyone have any idea how to do this or provide some documentation because Siemens is not really helping.</p>\n"},{"last_activity_date":1684775167,"question_id":76308480,"body":"<p>Is it possible to mark kafka stream processor classes as spring bean like @Component and inject some managed business logic ?</p>\n<pre><code>@Component\n@Scope(&quot;prototype&quot;) // is this necessary?\npublic class TestProcessor implements Processor&lt;Long, String, Long, Integer&gt; {\n    @Autowired\n    private AnotherSpringComponentBean bean2;\n\n    public TestProcessor(SpringBeanObject bean) {\n\n    }\n\n    @Override\n    public void init(ProcessorContext&lt;Long, Integer&gt; context) {\n        Processor.super.init(context);\n\n    }\n\n    @Override\n    public void process(Record&lt;Long, String&gt; record) {\n        //forward code\n        bean2.doLogic();\n        bean.doJob();\n    }\n}\n</code></pre>\n<p>In case of a topic with 20 partitions, I configure the num.stream.thread value to 20.\nWell, what i dont understand is how stream threads work with those processors managed by mean. Are they creating new processor object instances for their task executor? or every stream thread is constructed using TestTopology class?</p>\n<p>Im not sure if I explained my question though</p>\n<p>topology</p>\n<pre><code>@Component\npublic class TestTopology {\n    @Autowired\n    private ApplicationContext ctx;\n\n    @Autowired\n    void start(StreamsBuilder streamsBuilder, SpringBeanObject bean) {\n        Topology t = streamsBuilder.build();\n        t.addSource(&quot;inTopic&quot;).addProcessor(&quot;processor1&quot;, () -&gt; new TestProcessor(bean)).addSink(&quot;outTopic&quot;, &quot;processor1&quot;);\n    }\n}\n</code></pre>\n"},{"comments":[{"comment_id":134562828,"body":"What is the question?"},{"comment_id":134562837,"body":"I don&#39;t know how to add the ai component in the computer user"},{"comment_id":134562891,"body":"@AbdullahMalik: In that case you&#39;d either (1) define the logic which the computer would use to determine its next move and implement that logic, or (2) begin researching AI and how you would model it to &quot;learn&quot; from game data that you provide to it.  Currently this question is really too broad to be meaningfully answered here."},{"comment_id":134564745,"body":"The <i>intelligence</i> (not that much needed, simple math) in that game is to take all flags if less than 4 left; otherwise leave 4 flags for the opponent... to be able to leave 4 flags, you must leave 8 on previous <i>round</i>... and to be able to leave 8, you must leave 12 in the <i>round</i> before that... and so on"}],"last_activity_date":1684775026,"question_id":76308460,"body":"<p>I want to add an Ai component in the 21 flags game I created. So far I have the computer randomly selecting 1, 2, or 3 flags with no goal of winning. I want to add an Ai component that would allow me to play against the computer to 21 flags. Every time I enter a value from 1 to 3, it tells what flags are remaining after the values of 1,2 or 3 are entered given the number of flags inputted. After I type and enter the flags. The computer selects an amount of flags and given the remainder.</p>\n<pre><code> import java.util.*;\n\npublic class TwentyOneFlagsDriver {\npublic static void main(String args[]) {\n    Scanner in = new Scanner(System.in);\n    System.out.println(&quot;How many flags would you like to play with?&quot;);\n    int length = in.nextInt();\n    while (length &lt; 1 || length &gt; 21) {\n        System.out.println(&quot;Invalid number of flags. Please choose a number between 1 and 21.&quot;);\n        length = in.nextInt();\n    }\n    TOF game = new TOF(length);\n    game.play();\n}\n}\n\nclass TOF {\nprivate int numFlags;\nprivate boolean player;\nScanner in;\n\npublic TOF(int numFlags) {\n    this.numFlags = numFlags;\n    in = new Scanner(System.in);\n}\n\npublic void play() {\n    System.out.println(&quot;As seen on Survivor Thailand, this game was played as 21 Flags.&quot;);\n    System.out.println(&quot;There are two teams. Each team can take from 1-3 flags.&quot;);\n    System.out.println(&quot;The team to take the last flag wins.&quot;);\n    System.out.println(&quot;You will be playing against the computer.&quot;);\n    System.out.println(&quot;Type YES if you'd like to go first.&quot;);\n    String response = in.next();\n    char firstLetter = response.charAt(0);\n    if (firstLetter == 'y' || firstLetter == 'Y')\n        player = true;\n    System.out.println(&quot;There are &quot; + numFlags + &quot; flags.&quot;);\n    while (numFlags &gt;= 0) {\n        if (player) {\n            System.out.println(&quot;How many flags would you like to take?&quot;);\n            int user = in.nextInt();\n            while (user &lt;= 0 || user &gt; 3) {\n                System.out.println(&quot;INVALID NUMBER. How many flags would you like to pick up?&quot;);\n                user = in.nextInt();\n            }\n            numFlags -= user;\n            if (numFlags &lt;= 0) {\n                System.out.println(&quot;YOU WIN!&quot;);\n                return;\n            }\n            player = false;\n        } else {\n            int computer = (int) (Math.random() * 3 + 1);\n            if (computer &gt; numFlags)\n                computer = numFlags;\n            if (computer == 1)\n                System.out.println(&quot;The computer takes 1 flag.&quot;);\n            else if (computer == 2)\n                System.out.println(&quot;The computer takes 2 flags.&quot;);\n            else\n                System.out.println(&quot;The computer takes 3 flags.&quot;);\n            numFlags -= computer;\n            if (numFlags &lt;= 0) {\n                System.out.println(&quot;YOU LOSE!&quot;);\n                return;\n            }\n            player = true;\n        }\n        if (numFlags &gt; 0)\n            System.out.println(&quot;Number of flags remaining: &quot; + numFlags);\n    }\n}\n}\n</code></pre>\n"},{"last_activity_date":1684774942,"question_id":76244325,"body":"<p>I have tried integrating Quarkus start and end with message using Smallrye Kafka.\nBut i am getting following error when i create kafka connections</p>\n<pre><code> Failed to start quarkus: java.lang.RuntimeException: io.quarkus.builder.BuildException: Build failure: Build failed due to errors\n        [error]: Build step io.quarkus.arc.deployment.ArcProcessor#validate threw an exception: javax.enterprise.inject.spi.DeploymentException: javax.enterprise.inject.UnsatisfiedResolutionException: Unsatisfied dependency for type org.kie.kogito.event.EventEmitter and qualifiers [@Default]\n        - java member: com.example.MyendMessageProducer_1#emitter\n        - declared on CLASS bean [types=[org.kie.kogito.services.event.impl.AbstractMessageProducer&lt;io.example.models.Location&gt;, java.lang.Object, com.example.MyendMessageProducer_1], qualifiers=[@Default, @Any], target=com.example.MyendMessageProducer_1]\n        The following beans match by type, but none have matching qualifiers:\n                - Bean [class=org.kie.kogito.app.SampleeventsEventEmitter, qualifiers=[@SampleeventsQualifier, @Any]]\n        at io.quarkus.arc.processor.BeanDeployment.processErrors(BeanDeployment.java:1209)\n        at io.quarkus.arc.processor.BeanDeployment.init(BeanDeployment.java:275)\n        at io.quarkus.arc.processor.BeanProcessor.initialize(BeanProcessor.java:134)\n        at io.quarkus.arc.deployment.ArcProcessor.validate(ArcProcessor.java:494)\n        at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n        at io.quarkus.deployment.ExtensionLoader$3.execute(ExtensionLoader.java:944)\n        at io.quarkus.builder.BuildContext.run(BuildContext.java:277)\n        at org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\n        at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2449)\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1478)\n        at java.base/java.lang.Thread.run(Thread.java:1589)\n        at org.jboss.threads.JBossThread.run(JBossThread.java:501)\n</code></pre>\n<p>I have added the addons pom dependency for messaging</p>\n<pre><code> &lt;dependency&gt;\n      &lt;groupId&gt;org.kie.kogito&lt;/groupId&gt;\n      &lt;artifactId&gt;kogito-addons-quarkus-messaging&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>The below are my properties for Kafka topics</p>\n<pre><code>mp.messaging.incoming.kogito_incoming_stream.connector=smallrye-kafka\nmp.messaging.incoming.kogito_incoming_stream.topic=sample-events\nmp.messaging.incoming.kogito_incoming_stream.value.deserializer=org.apache.kafka.common.serialization.StringDeserializer\nmp.messaging.incoming.kogito_incoming_stream.auto.offset.reset=earliest\n\nmp.messaging.incoming.kogito_incoming_event.connector=smallrye-kafka\nmp.messaging.incoming.kogito_incoming_event.topic=new-event\nmp.messaging.incoming.kogito_incoming_event.value.deserializer=org.apache.kafka.common.serialization.StringDeserializer\nmp.messaging.incoming.kogito_incoming_event.auto.offset.reset=earliest\n\nmp.messaging.outgoing.sample-events.connector=smallrye-kafka\nmp.messaging.outgoing.sample-events.topic=sample-events\nmp.messaging.outgoing.sample-events.value.serializer=org.apache.kafka.common.serialization.StringSerializer\n\nmp.messaging.outgoing.sample_new_event.connector=smallrye-kafka\nmp.messaging.outgoing.sample_new_event.topic=new-event\nmp.messaging.outgoing.sample_new_event.value.serializer=org.apache.kafka.common.serialization.StringSerializer\n\nquarkus.reactive-messaging.auto-connector-attachment=true\n</code></pre>\n<p>The below are my versions of various dependencies</p>\n<pre><code> &lt;compiler-plugin.version&gt;3.8.1&lt;/compiler-plugin.version&gt;\n    &lt;maven.compiler.release&gt;11&lt;/maven.compiler.release&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;quarkus.platform.artifact-id&gt;quarkus-bom&lt;/quarkus.platform.artifact-id&gt;\n    &lt;quarkus.platform.group-id&gt;io.quarkus.platform&lt;/quarkus.platform.group-id&gt;\n    &lt;quarkus.platform.version&gt;2.10.2.Final&lt;/quarkus.platform.version&gt;\n    &lt;skipITs&gt;true&lt;/skipITs&gt;\n    &lt;surefire-plugin.version&gt;3.0.0-M7&lt;/surefire-plugin.version&gt;\n</code></pre>\n<p>Any idea on this?</p>\n"},{"comments":[{"comment_id":134556844,"body":"The problem is probably because you have it in a <code>@Transactional</code> method. It will not update from DB as long as your are in the same transaction. You would need to fetch this after transaction is completed."},{"comment_id":134556881,"body":"@grekier Even though I delete <code>@Transactional</code> it still doesn&#39;t update while method is executing but it&#39;s updated after"},{"comment_id":134557229,"body":"WHy should it? You aren&#39;t reloading <code>B</code> so why should it magically have <code>A</code> added to that representation?"},{"comment_id":134557351,"body":"@M.Deinum Reloading <code>B</code> with flush() method doesnt work"},{"comment_id":134557876,"body":"<code>flush</code> isn&#39;t a reload. You need to either call <code>refresh</code> with the entity or <code>flush</code> and <code>clear</code> the entitymanager and then reload <code>B</code>. Your edit isn&#39;t reloading either as it will take it from the first level cache. Part of your problem is that you aren&#39;t really managing the bi-directional relation ship, you are setting only 1 half and not the other."},{"comment_id":134562810,"body":"Thank you @M.Deinum <code>entityManager.refresh(a)</code> works fine. Is there any other way to make it work? For example calling second findEntityByUsername(username) without entity manager and without <code>@Transaction</code>? Since it&#39;s not annotated with <code>@Transaction</code> then Hibernate is not commiting the SQL statement under one commit, am I right?"},{"comment_id":134568595,"body":"It has nothing to do with <code>@Transactional</code> but your lack of understanding how hibernate works. Either manage both sides of the relation (when adding it to the colleciton, set the reference on the other side as well and/or vice-versa) or refresh the entity."}],"answers":[{"comments":[{"comment_id":134557345,"body":"I updated my question. Now I&#39;m reloading both tables but it doesn&#39;t. Also another call to method doesn&#39;t work"},{"comment_id":134557946,"body":"Very mysterious.. I have updated my answer with a suggestion."},{"comment_id":134562829,"body":"Somehow it still didn&#39;t work, I edited question and updated the code and new service class like you suggested me too."}],"answer_id":76304965,"body":"<p>Try wrapping the repo save() calls in @Transactional methods in a new service class. They need to be a a separate service to support transactional proxy.</p>\n"}],"last_activity_date":1684774679,"question_id":76304418,"body":"<p>Method in service is responsible for saving A Entity. A entity has @ManyToOne relation with B Entity. <br>\nA Entity</p>\n<pre><code>@Entity\npublic class A {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @ManyToOne\n    private B b;\n</code></pre>\n<p>B Entity</p>\n<pre><code>@Entity\npublic class B {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @OneToMany(mappedBy = &quot;A&quot;, cascade = CascadeType.REMOVE)\n    private List&lt;A&gt; A;\n\n</code></pre>\n<p>A Service method</p>\n<pre><code>    @Transactional\n    @Override\n    public ADTO createA (String username) {\n        B b = findEntityByUsername(username);\n        log.info(&quot;ACTUAL NUMBER OF A = {}&quot;, b.getA().size());\n        A a = AMapper.buildA(b);\n        ARepository.save(a);\n        log.info(&quot;ACTUAL NUMBER OF A = {}&quot;, b.getA().size());\n        return AMapper.buildADTO(a);\n    }\n</code></pre>\n<p>While executing createA method, I'm calling ARepository.save to save entity, then im checking it in log if size of list changed, but it didn't. When I call createA method once again then it shows that the size of list changed and entity was saved. I want to have it in real time not after method was executed.\n<br><br>\nEDIT\n<br>\nEntity manager refresh method <code>entityManager.refresh(b);</code> helped me to refresh A entity to get updated size List of A entity. But to make it work I need <code>@Transaction</code> annotation on <code>createA()</code> method. <br>\nWrapping repo save() method in separate class to support transactional proxy didnt work.</p>\n<pre><code>@Service\n@Transactional\n@RequiredArgsConstructor\npublic class ASaveService {\n\n    private final ARepository aRepository;\n\n    public void saveA(A a) {\n        aRepository.save(a);\n    }\n}\n</code></pre>\n<p>This is what works now</p>\n<pre><code>    @Transactional\n    @Override\n    public ADTO createA (String username) {\n        B b = findEntityByUsername(username);\n        log.info(&quot;ACTUAL NUMBER OF A = {}&quot;, b.getA().size());\n        A a = AMapper.buildA(b);\n        ARepository.save(a);\n        entityManager.refresh(a);\n        log.info(&quot;ACTUAL NUMBER OF A = {}&quot;, b.getA().size());\n        return AMapper.buildADTO(a);\n    }\n</code></pre>\n<p>Is there any other way to make it work? For example calling second <code>findEntityByUsername(username)</code> without entity manager?</p>\n"},{"comments":[{"comment_id":134562772,"body":"Is the question about Java or Kotlin?"},{"comment_id":134563058,"body":"Welcome to stackoverflow. Please check <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, then <a href=\"https://stackoverflow.com/posts/76308408/edit\">edit</a> your question and add your code. Looks like you&#39;re having problems with Gradle, not Kotlin? In that case, also add the Gradle tag and your build script."},{"comment_id":134563847,"body":"You&#39;ll need to edit your question to paste in the text of your build.gradle file for us to be able to debug it."}],"last_activity_date":1684774584,"question_id":76308408,"body":"<ul>\n<li>Exception is:\norg.gradle.api.plugins.UnknownPluginException: Plugin [id: 'org.jetbrains.kotlin.multiplatform', version: '1.8.21'] was not found in any of the following sources:</li>\n</ul>\n<ul>\n<li>Gradle Core Plugins (plugin is not in 'org.gradle' namespace)</li>\n<li>Plugin Repositories (could not resolve plugin artifact 'org.jetbrains.kotlin.multiplatform:org.jetbrains.kotlin.multiplatform.gradle.plugin:1.8.21')\nSearched in the following repositories:</li>\n</ul>\n<p>i tried to print hello world and i an getting following error</p>\n"},{"last_activity_date":1684774413,"question_id":76300982,"body":"<p>i am trying to visualize DAG graph data through java Sockets (Server-Client) i used Flask to create a web Application . The Client Should is sending the DAG graph data to the server and the server send these data to flask and flask it gonna visualize them using Cytoscape.js. it seems that everythings is running well the server the client the flask and everything it printed to console , but no graph is beeing displayed  i mean it shows no DAG graph on the page when i run the server then the Flask and then the client , also on web Console no error is given , and still not showing and displaying the graph , why is that ? and how i can lets the graph to be displayed ?</p>\n<pre><code>server : import java.io.*;\nimport java.net.*;\n\npublic class Server {\n    private String message;\n\n    public void run() {\n        try (ServerSocket serverSocket = new ServerSocket(12345)) { // The Server class sets up a server socket on port\n                                                                    // 12345 using ServerSocket.\n            System.out.println(&quot;Server is running and waiting for client to connect...&quot;);\n            while (true) {\n                Socket socket = serverSocket.accept(); // waits for a client to connect\n                System.out.println(&quot;Client is connected&quot;);\n\n                BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream())); // reader to\n                                                                                                        // read incoming\n                                                                                                        // messages from\n                                                                                                        // Cleint\n\n                message = in.readLine(); // read the message from client and store it in the message variable.\n\n                System.out.println(&quot;Received message from client: &quot; + message);\n\n                // Send the message to the Flask app using a GET request. It opens a connection\n                // to the URL, sends the request, and disconnects.\n                URL url = new URL(&quot;http://localhost:5000/send_message?message=&quot; + message);\n                HttpURLConnection con = (HttpURLConnection) url.openConnection();\n                con.setRequestMethod(&quot;GET&quot;);\n                con.getResponseCode();\n                con.disconnect();\n\n                // Send the message back to the client as a response\n                PrintWriter out = new PrintWriter(socket.getOutputStream(), true);\n                out.println(message);\n\n                socket.close(); // close the socket\n                System.out.println(&quot;Server is running and waiting for client to next message...&quot;);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public String getMessage() {\n        return message;\n    }\n\n    // New method to return the message\n    public String getMessageResponse() {\n        return &quot;Message from client: &quot; + message;\n    }\n\n    public static void main(String[] args) {\n        Server server = new Server();\n        server.run();\n    }\n}\n2- Client : \nimport java.io.*;\nimport java.net.*;\n\npublic class Client {\n    public static void main(String[] args) {\n        try (Socket socket = new Socket(&quot;localhost&quot;, 12345)) {\n            PrintWriter out = new PrintWriter(socket.getOutputStream(), true);\n            out.println(&quot;node:1,node:2,relation:1-&gt;2&quot;);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n3-app.py : import json\nfrom flask import Flask, render_template, request\nimport urllib.parse\n\napp = Flask(__name__)\n\nnodes = {}\nedges = []\n\n\n@app.route(&quot;/&quot;)\ndef index():\n    print(&quot;nodes:&quot;, nodes)\n    print(&quot;edges:&quot;, edges)\n    return render_template(\n        &quot;index.html&quot;, nodes=json.dumps(nodes), edges=json.dumps(edges)\n    )\n\n\n@app.route(&quot;/receive_message&quot;)\ndef receive_message():\n    message = request.args.get(&quot;message&quot;)\n    print(&quot;Received message:&quot;, message)\n    return message\n\n\n@app.route(&quot;/send_message&quot;)\ndef send_message():\n    global nodes, edges\n\n    message = urllib.parse.unquote(request.args.get(&quot;message&quot;))\n    message_type, message_data = message.split(&quot;:&quot;, 1)\n\n    if message_type == &quot;node&quot;:\n        node_id = message_data\n        if node_id not in nodes:\n            nodes[node_id] = {&quot;id&quot;: node_id, &quot;label&quot;: node_id}\n    elif message_type == &quot;relation&quot;:\n        source_id, target_id = message_data.split(&quot;-&gt;&quot;)\n        if source_id not in nodes:\n            nodes[source_id] = {&quot;id&quot;: source_id, &quot;label&quot;: source_id}\n        if target_id not in nodes:\n            nodes[target_id] = {&quot;id&quot;: target_id, &quot;label&quot;: target_id}\n        edges.append(\n            {\n                &quot;id&quot;: f&quot;{source_id}-{target_id}&quot;,\n                &quot;source&quot;: source_id,\n                &quot;target&quot;: target_id,\n            }\n        )\n\n    return &quot;Message received and processed successfully.&quot;\n\n\nif __name__ == &quot;__main__&quot;:\n    app.run(debug=True)\n4-index.html : &lt;!DOCTYPE html&gt;\n&lt;html&gt;\n\n&lt;head&gt;\n    &lt;title&gt;DAG Graph Visualization&lt;/title&gt;\n    &lt;script src=&quot;https://unpkg.com/cytoscape/dist/cytoscape.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://unpkg.com/dagre/dist/dagre.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://unpkg.com/cytoscape-dagre/cytoscape-dagre.js&quot;&gt;&lt;/script&gt;\n\n    &lt;style&gt;\n        #cy {\n            height: 600px;\n            width: 800px;\n            display: block;\n        }\n    &lt;/style&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;div id=&quot;cy&quot;&gt;&lt;/div&gt;\n\n    &lt;script&gt;\n        // Retrieve the nodes and edges data passed from the Flask app\n        var nodes = JSON.parse('{{ nodes | safe }}');\n        var edges = JSON.parse('{{ edges | safe }}');\n\n        // Create a new Cytoscape instance\n        var cy = cytoscape({\n            container: document.getElementById('cy'),\n            elements: {\n                nodes: nodes,\n                edges: edges\n            },\n            layout: {\n                name: 'dagre'\n            },\n            style: [\n                // Define your graph styling here\n                {\n                    selector: 'node',\n                    style: {\n                        'background-color': 'blue',\n                        'label': 'data(label)'\n                    }\n                },\n                {\n                    selector: 'edge',\n                    style: {\n                        'width': 2,\n                        'line-color': 'black'\n                    }\n                }\n            ]\n        });\n\n        console.log('nodes:', nodes);\n        console.log('edges:', edges);\n\n        // Use the dagre layout\n        cy.layout({\n            name: 'dagre'\n        }).run();\n    &lt;/script&gt;\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>\n"},{"comments":[{"comment_id":134235577,"body":"Please print out the value of &quot;fileLines.get(i)&quot;. I am afraid the value of &quot;fileLines.get(i)&quot;  is not the one you mentioned."},{"comment_id":134244321,"body":"You should really use an XML parser."},{"comment_id":134249983,"body":"Okay, sure but can you tell me why I&#39;m having the error so I have something to work with Mark? This is the second program that i&#39;m using XML tags in, so I cant understand why &lt;/Price&gt;&lt;Product&gt; in my xml tag is giving me a error?"},{"comment_id":134250011,"body":"Stone, the fileLines.get(i) is returning a string representation of product. Specifically:  it returns &lt;Index&gt;1&lt;/Index&gt;&lt;Price&gt;$18.38&lt;/Price&gt;&lt;Product&gt;Takis Fuego, 1 Ounce (46 Pack)&lt;/Product&gt;&lt;SoldBy&gt; Sam&#39;s Club&lt;/SoldBy&gt;&lt;href&gt;<a href=\"https://www.google.com/shopping/product/14559077146163012667?hl=en&amp;sxsrf=ALiCzsb1Gfl32-pXt32h0QkkE-T57FtdxA:1670964406762&amp;psb=1&amp;q=takis&amp;prds=eto:15330784880350744537_0,pid:15387764403936018691,rsk:PC_15179594788466925291&amp;sa=X&amp;ved=0ahUKEwjPgJuOvsj-AhUJGlkFHSQsBpcQ8gIIpgooAA&lt;/href\" rel=\"nofollow noreferrer\">google.com/shopping/product/&hellip;</a>&gt; when i = 0. The index tag starts at one."},{"comment_id":134250113,"body":"You are doing <code>fileLines.get(i)</code> to get one line and then <code>fileLines.indexOf(&quot;&lt;&#47;Price&gt;&quot;)</code> which searches all the lines, which seems wrong - what is <code>fileLines</code>, exactly?"},{"comment_id":134250226,"body":"Sorry, so what I&#39;m trying to do is make my program read a .txt file containing a list of products. Each product is one line in the file with xml tags used to separate each part of the product.  After each line is read, its put into a list of strings I&#39;m calling fileLines. So specifically: I&#39;m retrieving 1 product as a string, breaking down the line using <code>substring();</code> with  <code>filelines.indexOf();</code> to refer to the start and end of the substring containing the price."},{"comment_id":134250747,"body":"Well, do you see the problem? <code>fileLines</code> is a <i>list of multiple strings</i>. You get the <i>string</i> at index i. Then you try to find &quot;&lt;/Price&gt;&quot; in the <i>list</i> instead of within the <i>string</i> itself."},{"comment_id":134250766,"body":"Then why is my starting index <code>&lt;Price&gt;</code> fine, its in the same substring?"},{"comment_id":134250788,"body":"It&#39;s not. <code>fileLines.indexOf(&quot;&lt;Price&gt;&quot;.trim()) + &quot;&lt;Price&gt;&quot;.trim().length()</code> -&gt; indexOf give you -1 again + the length of the string (7) gives you 6 (as shown in your error) but it should be 16 based on your actual string."},{"comment_id":134257281,"body":"Why not using an XM parser again?"}],"answers":[{"answer_id":76248871,"body":"<p>Turns out the answer was annoyingly simple: Each time the loop executes the program looks at a string in the list <code>fileLines</code> to parse the data.</p>\n<p>The problem occurs when I set the start and end lengths of the index, I needed to include <code>get(i)</code> to the command to make sure it was looking at a specific line:</p>\n<pre><code>int psi = fileLines.get(i).indexOf(&quot;&lt;Price&gt;&quot;);\nint pei = fileLines.get(i).indexOf(&quot;&lt;/Price&gt;&quot;);\nprice = fileLines.get(i).substring(psi + &quot;&lt;Price&gt;&quot;.length(), pei);\nSystem.out.println(price);\n</code></pre>\n<p>Sorry if I did not explain myself well.</p>\n"},{"answer_id":76297862,"body":"<p>I've created a method to parse the value within the <code>Price</code> element.<br />\nI'm using <code>+ 7</code> here, because the length of the text, <code>&lt;Price&gt;</code>, is 7 characters.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String price(String xml) {\n    return xml.substring(xml.indexOf(&quot;&lt;Price&gt;&quot;) + 7, xml.indexOf(&quot;&lt;/Price&gt;&quot;));\n}\n</code></pre>\n<p>You can then utilize the method from within your <code>buildGUIFile</code>, as follows.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static void buildGUIFile() throws IOException {\n    List&lt;String&gt; fileLines = Files.readAllLines(fileName);\n    for (int i = 0; i &lt; (fileLines.size()); i++) {\n        resNum = i + 1;\n        price = price(fileLines.get(i).trim());\n    }\n}\n</code></pre>\n<p>Furthermore, if you wanted the <code>price</code> method to return a <code>float</code> or <code>double</code> value, you could use the following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>float price(String xml) {\n    String string = xml.substring(xml.indexOf(&quot;&lt;Price&gt;&quot;) + 8, xml.indexOf(&quot;&lt;/Price&gt;&quot;));\n    return Float.parseFloat(string);\n}\n</code></pre>\n"}],"last_activity_date":1684774370,"question_id":76115373,"body":"<p>I'm having issues parsing this line of XML text:</p>\n<pre><code>&lt;Index&gt;1&lt;/Index&gt;&lt;Price&gt;$18.38&lt;/Price&gt;&lt;Product&gt;Takis Fuego, 1 Ounce (46 Pack)&lt;/Product&gt;&lt;SoldBy&gt; Sam's Club&lt;/SoldBy&gt;&lt;href&gt;https://www.google.com/shopping/product/14559077146163012667?hl=en&amp;sxsrf=ALiCzsb1Gfl32-pXt32h0QkkE-T57FtdxA:1670964406762&amp;psb=1&amp;q=takis&amp;prds=eto:15330784880350744537_0,pid:15387764403936018691,rsk:PC_15179594788466925291&amp;sa=X&amp;ved=0ahUKEwjPgJuOvsj-AhUJGlkFHSQsBpcQ8gIIpgooAA&lt;/href&gt;\n</code></pre>\n<p>This is the code responsible for parsing the text:</p>\n<pre><code>`private static void buildGUIFile() throws IOException {\n        \n        List&lt;String&gt; fileLines = Files.readAllLines(fileName);\n        for (int i = 0; i &lt; (fileLines.size()); i++) {\n            resNum = i + 1;\n            int beginIndex = fileLines.indexOf(&quot;&lt;Price&gt;&quot;);\n            int endIndex = fileLines.indexOf(&quot;&lt;/Price&gt;&quot;);\n            try {\n\nprice = fileLines.get(i).trim().substring(fileLines.indexOf(&lt;Price&gt;&quot;.trim()) + &quot;&lt;Price&gt;&quot;.trim().length(), fileLines.indexOf(&quot;&lt;/Price&gt;&quot;.trim()));\n\n            } catch (StringIndexOutOfBoundsException e) {\n                System.out.println(&quot;endIndex&quot; + endIndex);\n                e.printStackTrace();\n            }`\nThis is the code that formats each product in fileName:\n`public String xmlString() {\n        String str = &quot;&lt;Index&gt;&quot; + resultNum + &quot;&lt;/Index&gt;&quot; + &quot;&lt;Price&gt;&quot; + Price + &quot;&lt;/Price&gt;&quot; + &quot;&lt;Product&gt;&quot; + Product\n                + &quot;&lt;/Product&gt;&quot; + &quot;&lt;SoldBy&gt; &quot; + Company + &quot;&lt;/SoldBy&gt;&quot; + &quot;&lt;href&gt;&quot; + link + &quot;&lt;/href&gt;&quot;;\n        return str;\n</code></pre>\n<p>This is the stack trace when I run the program, calling the fileName:</p>\n<pre><code>java.lang.StringIndexOutOfBoundsException: begin 6, end -1, length 355\n    at java.base/java.lang.String.checkBoundsBeginEnd(String.java:4601)\n    at java.base/java.lang.String.substring(String.java:2704)\n    at SeerWebCrawler.buildGUIFile(SeerWebCrawler.java:133)\n    at SeerWebCrawler.main(SeerWebCrawler.java:58)\n</code></pre>\n<p>Now specifically the endindex of the substring appears to be what's causing the problem, I just don't understand what I am doing wrong here. Any help would be appreciated.</p>\n"},{"answers":[{"answer_id":76308368,"body":"<p>You are looking at the wrong SOA API for a revise usecase. The SOA API <code>reviseObject</code> from <code>DataManagement</code> is what you should be using instead. You would specify the base item revision on which you are deriving a new revision and the API would hand you over the created revision in the output container - <code>reviseOutputMap</code> to be more precise.</p>\n<pre><code>DEBUG: 18:43:46,297 - CommunicationMonitorView.callMade:-1\n[Call]  XXXXXXXXX.62715.03.600019154.00093 Internal-Core-2008-06-DataManagement:reviseObject (549 bytes)\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;ReviseObjectInput xmlns=&quot;http://teamcenter.com/Schemas/Internal/Core/2008-06/DataManagement&quot; deepCopyRequired=&quot;1&quot;&gt;        \n    &lt;info clientId=&quot;Ro8ASD1fL_4pcBAAAAAAAAAAAAA&quot; description=&quot;&quot; name=&quot;Test OOTB&quot; newRevId=&quot;B&quot; xmlns=&quot;http://teamcenter.com/Schemas/Core/2008-06/DataManagement&quot;&gt;    &lt;baseItemRevision uid=&quot;Ro8ASD1fL_4pcB&quot;/&gt;                \n        &lt;newItemRevisionMasterProperties&gt;                        \n            &lt;form uid=&quot;AAAAAAAAAAAAAA&quot;/&gt;                    \n        &lt;/newItemRevisionMasterProperties&gt;            \n    &lt;/info&gt;\n&lt;/ReviseObjectInput&gt;\n</code></pre>\n<p>The sample response:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;ns1:ReviseResponse2 xmlns:ns1=&quot;http://teamcenter.com/Schemas/Core/2008-06/DataManagement&quot; xmlns:ns0=&quot;http://teamcenter.com/Schemas/Soa/2006-03/Base&quot;&gt;\n    &lt;ns1:reviseOutputMap key=&quot;RoKASD1fL_4pcBAAAAAAAAAAAAA&quot;&gt;\n        &lt;ns1:value&gt;\n            &lt;ns1:newItemRev uid=&quot;wnBASD3ML_4pcB&quot; className=&quot;ItemRevision&quot; type=&quot;ItemRevision&quot;/&gt;\n            &lt;ns1:relatedObjects action=&quot;0&quot; isSecondary=&quot;0&quot;&gt;\n                &lt;ns1:relatedObject uid=&quot;wLLASD3ML_4pcB&quot; className=&quot;Form&quot; type=&quot;ItemRevision Master&quot;/&gt;\n            &lt;/ns1:relatedObjects&gt;\n        &lt;/ns1:value&gt;\n    &lt;/ns1:reviseOutputMap&gt;\n    &lt;ns0:ServiceData&gt;\n.\n.\n.\n</code></pre>\n"}],"last_activity_date":1684774266,"question_id":74876403,"body":"<p>How to create next ItemRevision for exists Item?</p>\n<p>I'm looks docs and see that I cant use CreateItems function, I must use CreateObject.</p>\n<pre><code>TCSession session = (TCSession) AIFUtility.getDefaultSession();\nDataManagementService dmservice = DataManagementService.getService(session);\n\nCreateInput irev = new CreateInput();\nirev.boName = &quot;ItemRevision&quot;;\nirev.stringProps.put( &quot;object_desc&quot;, &quot;object_desc&quot; );\nirev.stringProps.put( &quot;object_name&quot;, &quot;object_name_test&quot; );\nirev.stringProps.put( &quot;item_revision_id&quot;, &quot;01&quot; );\n\nCreateIn[] ci = new CreateIn[1];\nci[0] = new CreateIn();\nci[0].data = irev;\nci[0].clientId = Integer.valueOf(1).toString();\n\nCreateResponse cr = dmservice.createObjects(ci);\n</code></pre>\n<p>But the error dissappers:\n&quot;Wrong symbol NULL object (in object) - required object not exists&quot;</p>\n<p>It means that I must set some attribute to revision which must be link to existing Item.</p>\n<p>How can I do it? Thanks</p>\n<p>Trying to create ItemRevision without creating Item</p>\n"},{"last_activity_date":1684774124,"question_id":76308361,"body":"<p>Hello I am deploying an EAR on Payara Server, the EAR contains some WARs and some other modules. In one of the WARs I have a JAX-RS REST API, I wanted to generate an OpenAPI document, I saw that Payara generates it by default by using Eclipse MicroProfile, but the problem is that the resulting OpenAPI doesn't have any paths listed despite that I have a few working methods that I have annotated with @GET and @POST in my API WAR.</p>\n<p>I added my RestApplication class that extends Application like so:</p>\n<pre><code>@ApplicationPath(&quot;/api&quot;)\npublic class RestApplication extends Application {\n}\n</code></pre>\n<p>And my endpoint class looks like so:</p>\n<pre><code>@Path(&quot;/example&quot;)\npublic class ExampleResource {\n\n    @GET\n    @Path(&quot;/ping&quot;)\n    public Response ping() {\n        return Response.status(Response.Status.OK).entity(&quot;Ping works&quot;).build();\n    }\n}\n</code></pre>\n<p>The REST API works as expected but the resulting openapi.yaml is:</p>\n<pre><code>openapi: 3.0.0\ninfo:\n  title: Deployed Resources\n  version: 1.0.0\nservers:\n- url: http://192.168.5.5:8080/__wstx-services\n  description: Default Server.\n- url: https://192.168.5.5:8181/__wstx-services\n  description: Default Server.\npaths: {}\ncomponents: {}\n</code></pre>\n<p>So the endpoint is not present in the OpenAPI documentation, am I missing something?</p>\n"},{"last_activity_date":1684773629,"question_id":76308300,"body":"<p>I have created a quarkus app with multiple BPMN's having start messages and end messages.\nThe below is my application.properties for messaging</p>\n<pre><code>kafka.bootstrap.servers=0.0.0.0\\:9092\nmp.messaging.incoming.endSales.auto.offset.reset=earliest\nmp.messaging.incoming.endSales.connector=smallrye-kafka\nmp.messaging.incoming.endSales.topic=endSales\nmp.messaging.incoming.endSales.value.deserializer=org.apache.kafka.common.serialization.StringDeserializer\nmp.messaging.outgoing.kogito-processinstances-events.connector=smallrye-kafka\nmp.messaging.outgoing.kogito-processinstances-events.topic=kogito-processinstances-events\nmp.messaging.outgoing.kogito-processinstances-events.value.serializer=org.apache.kafka.common.serialization.StringSerializer\nmp.messaging.outgoing.kogito-usertaskinstances-events.connector=smallrye-kafka\nmp.messaging.outgoing.kogito-usertaskinstances-events.topic=kogito-usertaskinstances-events\nmp.messaging.outgoing.kogito-usertaskinstances-events.value.serializer=org.apache.kafka.common.serialization.StringSerializer\nmp.messaging.outgoing.kogito-variables-events.connector=smallrye-kafka\nmp.messaging.outgoing.kogito-variables-events.topic=kogito-variables-events\nmp.messaging.outgoing.kogito-variables-events.value.serializer=org.apache.kafka.common.serialization.StringSerializer\nmp.messaging.outgoing.kogito_outgoing_stream.connector=smallrye-kafka\nmp.messaging.outgoing.kogito_outgoing_stream.topic=endSales\nmp.messaging.outgoing.kogito.outgoing_stream.value.serializer=org.apache.kafka.common.serialization.StringSerializer\nmp.messaging.outgoing.kogito_outgoing_newEnds.connector=smallrye-kafka\nmp.messaging.outgoing.kogito_outgoing_newEnds.topic=newEnds\nmp.messaging.outgoing.kogito_outgoing_newEnds.value.serializer=org.apache.kafka.common.serialization.StringSerializer\nmp.messaging.outgoing.kogito_outgoing_sudoku.connector=smallrye-kafka\nmp.messaging.outgoing.kogito_outgoing_sudoku.topic=sudoku\nmp.messaging.outgoing.kogito_outgoing_sudoku.value.serializer=org.apache.kafka.common.serialization.StringSerializer\n</code></pre>\n<p>This throws me the following error during build time</p>\n<pre><code> java.lang.IllegalArgumentException: SRMSG00071: Invalid channel configuration -  the `connector` attribute must be set for channel `kogito`\n        at io.smallrye.reactive.messaging.providers.impl.ConnectorConfig.lambda$new$0(ConnectorConfig.java:50)\n        at java.base/java.util.Optional.orElseThrow(Optional.java:403)\n        at io.smallrye.reactive.messaging.providers.impl.ConnectorConfig.lambda$new$1(ConnectorConfig.java:50)\n        at java.base/java.util.Optional.orElseGet(Optional.java:364)\n        at io.smallrye.reactive.messaging.providers.impl.ConnectorConfig.&lt;init&gt;(ConnectorConfig.java:49)\n        at io.smallrye.reactive.messaging.providers.impl.ConfiguredChannelFactory.lambda$extractConfigurationFor$0(ConfiguredChannelFactory.java:85)\n        at java.base/java.lang.Iterable.forEach(Iterable.java:75)\n        at io.smallrye.reactive.messaging.providers.impl.ConfiguredChannelFactory.extractConfigurationFor(ConfiguredChannelFactory.java:74)\n        at io.smallrye.reactive.messaging.providers.impl.ConfiguredChannelFactory.initialize(ConfiguredChannelFactory.java:101)\n        at io.smallrye.reactive.messaging.providers.impl.ConfiguredChannelFactory_Subclass.initialize$$superforward1(Unknown Source)\n        at io.smallrye.reactive.messaging.providers.impl.ConfiguredChannelFactory_Subclass$$function$$4.apply(Unknown Source)\n        at io.quarkus.arc.impl.AroundInvokeInvocationContext.proceed(AroundInvokeInvocationContext.java:54)\n        at io.quarkus.arc.runtime.devconsole.InvocationInterceptor.proceed(InvocationInterceptor.java:62)\n        at io.quarkus.arc.runtime.devconsole.InvocationInterceptor.monitor(InvocationInterceptor.java:49)\n        at io.quarkus.arc.runtime.devconsole.InvocationInterceptor_Bean.intercept(Unknown Source)\n        at io.quarkus.arc.impl.InterceptorInvocation.invoke(InterceptorInvocation.java:41)\n        at io.quarkus.arc.impl.AroundInvokeInvocationContext.perform(AroundInvokeInvocationContext.java:41)\n        at io.quarkus.arc.impl.InvocationContexts.performAroundInvoke(InvocationContexts.java:32)\n        at io.smallrye.reactive.messaging.providers.impl.ConfiguredChannelFactory_Subclass.initialize(Unknown Source)\n        at io.smallrye.reactive.messaging.providers.impl.ConfiguredChannelFactory_ClientProxy.initialize(Unknown Source)\n        at java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)\n        at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1845)\n        at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\n        at io.smallrye.reactive.messaging.providers.extension.MediatorManager.start(MediatorManager.java:192)\n</code></pre>\n<p>Also are there any channel naming conventions related to kafka topics for Kogito messages in Quarkus?</p>\n"},{"answers":[{"answer_id":76308288,"body":"<p>I not sure where your confusion lies - the graphql query is just a string from the point of view of Java - you just need to build the string dynamically.</p>\n<p>So in response to your first question (how to pass a parameter):</p>\n<pre><code>String MyValue=&quot;java&quot;;\nGraphQLRequest request = GraphQLRequest.builder()\n                .query(&quot;query {\\n&quot; +\n                       &quot; testAPI(query:\\&quot;&quot;+MyValue+&quot;\\&quot;) {\\n&quot; +\n...\n</code></pre>\n<p>In a similar manner the fields returned by the query can be controlled by building this string dynamically like:</p>\n<pre><code>String fields;\nif (briefVersion) fields=&quot;  page \\n pageCount \\n&quot;\nelse fields=&quot;  page \\n pageCount \\n ...{all the rest of the fields}&quot;\nGraphQLRequest request = GraphQLRequest.builder()\n                .query(&quot;query {\\n&quot; +\n                       &quot; testAPI(query:\\&quot;&quot;+MyValue+&quot;\\&quot;) {\\n&quot; +\n                       fields +\n                       &quot;}&quot;;\n</code></pre>\n<p>So basically the graphQL query is just a string and you can treat it like a string; build it with a string builder (or String.join) and generally play with it as you wish before submitting it to graphql.</p>\n<p>This is a bit different to the way it works in typescript/js where the graphql queries are preprocessed.</p>\n"}],"last_activity_date":1684773520,"question_id":76304503,"body":"<p>I want to construct below query and pass params dynamically in Java.</p>\n<pre><code>query {\n testAPI(query:&quot;java&quot;) {\n    page \n    pageCount \n    documents {\n      id\n      ... on Document {\n        title\n        updated\n        subjects{\n            id\n            name\n            url\n        }\n        rating {\n            average\n            count\n        }\n        categories {\n            id\n            name\n            url\n            subcategories {\n                id\n                name\n                url\n            }\n        }\n        images {\n            px100x100\n        }\n      }\n    }\n  }\n}\n\n</code></pre>\n<p>I am using below dependencies in my pom</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.graphql-java-kickstart&lt;/groupId&gt;\n            &lt;artifactId&gt;graphql-webclient-spring-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;1.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>below is the code snippet, the way I am doing it right now,</p>\n<pre><code>        WebClient webClient = WebClient.builder()\n                .baseUrl(&quot;http://test.com/graphql&quot;)\n                .build();\n        GraphQLWebClient graphqlClient = GraphQLWebClient.newInstance(webClient, objectMapper);\n\n        GraphQLRequest request = GraphQLRequest.builder()\n                .query(&quot;query {\\n&quot; +\n                        &quot; testAPI(query:\\&quot;java\\&quot;) {\\n&quot; +\n                        &quot;    page \\n&quot; +\n                        &quot;    pageCount \\n&quot; +\n                        &quot;    documents {\\n&quot; +\n                        &quot;      id\\n&quot; +\n                        &quot;      ... on Document {\\n&quot; +\n                        &quot;        title\\n&quot; +\n                        &quot;        updated\\n&quot; +\n                        &quot;        subjects{\\n&quot; +\n                        &quot;            id\\n&quot; +\n                        &quot;            name\\n&quot; +\n                        &quot;            url\\n&quot; +\n                        &quot;        }\\n&quot; +\n                        &quot;        rating {\\n&quot; +\n                        &quot;            average\\n&quot; +\n                        &quot;            count\\n&quot; +\n                        &quot;        }\\n&quot; +\n                        &quot;        categories {\\n&quot; +\n                        &quot;            id\\n&quot; +\n                        &quot;            name\\n&quot; +\n                        &quot;            url\\n&quot; +\n                        &quot;            subcategories {\\n&quot; +\n                        &quot;                id\\n&quot; +\n                        &quot;                name\\n&quot; +\n                        &quot;                url\\n&quot; +\n                        &quot;            }\\n&quot; +\n                        &quot;        }\\n&quot; +\n                        &quot;        images {\\n&quot; +\n                        &quot;            px100x100\\n&quot; +\n                        &quot;        }\\n&quot; +\n                        &quot;      }\\n&quot; +\n                        &quot;    }\\n&quot; +\n                        &quot;  }\\n&quot; +\n                        &quot;}\\n&quot;)\n                .build();\n        GraphQLResponse block = graphqlClient.post(request)\n                .block();\n</code></pre>\n<p>Currently the search criteria in the query is a hard coded value(java). I need to achieve following things</p>\n<ol>\n<li>Make the search criteria dynamic. (Primary objective)</li>\n<li>Make the query construction dynamic i.e adding the required fields dynamically. (Secondary Objective)</li>\n</ol>\n"},{"comments":[{"comment_id":134554047,"body":"Also you have an eror with <code>if (temp==j);</code>"},{"comment_id":134555349,"body":"<code>count=0;</code> is also in the wrong loop... or/and <i>setting</i> <code>output[i]</code> wrong -- but I am <b>assuming</b> a lot since the question does not state the intention of that code, actually the whole is not explaining much, just the title"}],"answers":[{"comments":[{"comment_id":134554422,"body":"Besides that, the <code>;</code> after <code>if (temp==j)</code>breaks the if-clause"}],"answer_id":76303110,"body":"<p>Your <code>temp</code> assignment of <code>temp = temp % 10</code> is yielding a <code>4</code> on it's first assignment, thus returns 4 for every subsequent assignment.</p>\n<p>Thus, the <code>while</code> condition of <code>temp &gt; 0</code> is always true.</p>\n<p>This is resulting in an infinite loop.</p>\n<p>I have re-factored your code, in an effort to demonstrate a simpler solution.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] a = { 1024, 256, 99, 128, 105 };\nint[] output = new int[10];\nfor (int value : a) {\n    for (char digit : String.valueOf(value).toCharArray())\n        output[Character.digit(digit, 10)]++;\n}\nSystem.out.println(Arrays.toString(output));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>[2, 3, 3, 0, 1, 2, 1, 0, 1, 2]\n</code></pre>\n"}],"last_activity_date":1684773384,"question_id":76303048,"body":"<p>input: int[] : 1024,256,99,128,105\noutput: int : 2</p>\n<p>0:2</p>\n<p>1:3</p>\n<p>2:3</p>\n<p>3:0</p>\n<p>4:1</p>\n<p>5:2</p>\n<p>6:1</p>\n<p>7:0</p>\n<p>8:1</p>\n<p>9:2</p>\n<p>As 1 and 2 are most occuring digits but 2 is large, we will return 2</p>\n<pre><code>class Main {\n    public static void main(String args[]) {\n        // Your code goes here\n        int[] a = {1024,256,99};\n        int[] output = new int[10];\n        int count = 0;\n        for(int j=0; j&lt;=9; j++){\n            for(int i=0;i&lt;a.length;i++){\n                count=0;\n                int temp = a[i];\n                while(temp&gt;0){\n                    temp=temp%10;\n                    if (temp==j);\n                    count++;\n                }\n                output[i]=count;\n            }\n            System.out.print(Arrays.toString(output));\n        }\n    }\n    }\n</code></pre>\n"},{"comments":[{"comment_id":134562544,"body":"you sure there is nothing in the standalone.xml ?  What if you go to the admin console"},{"comment_id":134562698,"body":"It&#39;s a remote JVM and the admin console is not setup yet. I have also confirmed via management CLI and the above war is not showing up in deployment folder."},{"comment_id":134562921,"body":"Strange.  maybe stop the service, delete the tmp folder and re-deploy?"},{"comment_id":134563400,"body":"Tried the above steps. Still seeing the same error in logs."},{"comment_id":134566072,"body":"What version of WildFly are you using? How did you undeploy the application?"},{"comment_id":134569272,"body":"Wildfly 26. We install rpms and have a script which adds/removes wars"}],"last_activity_date":1684773300,"question_id":76308256,"body":"<p>The following error keeps showing up in server logs:</p>\n<pre><code>DEBUG [org.jboss.as.controller.management-operation] (management-handler-thread - 97) WFLYCTL0017: Operation (&quot;read-resource&quot;) failed - address: ([(&quot;deployment&quot; =&gt; &quot;something.war&quot;)]) - failure description: &quot;WFLYCTL0216: Management resource '[(\\&quot;deployment\\&quot; =&gt; \\&quot;something.war\\&quot;)]' not found&quot;\n</code></pre>\n<p><code>something.war</code> was undeployed and it was confirmed to not be existing in the deployments folder. Expectation was to not see metrics gathering messages from server for this war.</p>\n<p>How can I fix the above issue?</p>\n"},{"comments":[{"comment_id":134568440,"body":"Are you sure that your device is connected to the internet?"}],"last_activity_date":1684773281,"question_id":76308247,"body":"<p>I have OnFailure and OnSuccess listeners to a get call in FireBase, with my FireBase permissions set allow to all (for debug). However, none of these listeners are ever fired. The user is authenticated successfully as well. Here's the code:</p>\n<pre><code> Globals.db = FirebaseFirestore.getInstance();\n    DocumentReference user = null;\n    if (!Globals.testMode)\n    user = Globals.db.collection(&quot;users&quot;).document(email.getText().toString());\n    else user = Globals.db.collection(&quot;users&quot;).document(Globals.testEmail);\n    System.out.println(&quot;DebugMode01: &quot; + Globals.fireAuth.toString());\n\n\nif (Globals.fireAuth.getCurrentUser() != null){\n    System.out.printf(&quot;The user instance is correct.&quot;);\n}\n\n\n\n    user.get().addOnSuccessListener(userDocument -&gt; {\n        Globals.initUser((String)userDocument.get(&quot;email&quot;),(String)userDocument.get(&quot;fname&quot;), (String)userDocument.get(&quot;lname&quot;));\n        warning.setVisibility(View.INVISIBLE);\n        Globals.endLoad();\n        Toast.makeText(LoginActivity.this, &quot;Login success!&quot;, Toast.LENGTH_LONG).show();\n    }).addOnFailureListener( x -&gt; {\n        Globals.endLoad();\n        warning.setText(&quot;Invalid error instance with the server.&quot;);\n        warning.setVisibility(View.VISIBLE);\n    }).addOnCanceledListener(() -&gt; {\n        warning.setText(&quot;This process was cancelled.&quot;);\n        Globals.endLoad();\n        warning.setVisibility(View.VISIBLE);\n    });\n</code></pre>\n<p>Why is this?</p>\n"},{"comments":[{"comment_id":134562308,"body":"No <code>break</code> statements for cases 1, 2, and 3."}],"last_activity_date":1684772458,"question_id":76308161,"body":"<p>Hello everyone I'm still studying java since I haven't used it for a long time. I found this exercise around and I didn't understand why the result is: one two three two three done</p>\n<pre><code>   public class Main{\n    public static void main(String[] args){\n      for(int i = 0; i &lt; 3; i++) { \n        switch(i) { \n            case 0: break; \n            case 1: System.out.print(&quot;one &quot;); \n            case 2: System.out.print(&quot;two &quot;); \n            case 3: System.out.print(&quot;three &quot;); \n     } \n   } \n    System.out.println(&quot;done&quot;);\n    }\n   }\n\n</code></pre>\n<pre><code> 1° STEP i=0 --&gt;nothing;\n 2° STEP i=1 --&gt;print one ;\n 3° STEP i=2 --&gt;print two ;\n</code></pre>\n<p>so my output should be: one two done; Why otput is:one two three two three done?</p>\n"},{"comments":[{"comment_id":134551472,"body":"You need to show evidence that what you claim is true. Update your question to show your settings for the screens mentioned in your question, and also show a screen shot of your code demonstrating that NetBeans is not working correctly. Without any evidence your question may be closed."},{"comment_id":134562513,"body":"I posted pictures in the link"},{"comment_id":134563787,"body":"The final screenshot of your code shows the opposite of what you claim: NetBeans is highlighting errors and showing suggestions. It looks like you have a bunch of statements that are outside of any class, which you probably intended to put within the <code>main()</code> method. Can you clarify exactly what you expect NetBeans to be doing that it isn&#39;t doing? Be very specific."}],"last_activity_date":1684772366,"question_id":76301230,"body":"<p>Suddenly the hints and highlights on Netbeans stopped working for me. It won't show suggestions on imports and it won't highlights errors. I've checked &gt;Preferences &gt;Editor and form what I can tell Code Completion, Code Templates, Hints and Highligthing are all selected. I checked some older posts here and also tried to delete the index in the caches folder. I've discarded my project and started over, uninstalled and installed Netbeans and restarted my laptop at few times now but the issue is still there.  Any suggestions?</p>\n<p><a href=\"https://imgur.com/a/aeB0FfW\" rel=\"nofollow noreferrer\">https://imgur.com/a/aeB0FfW</a></p>\n<p>Edit:</p>\n<p>I've attached pictures in the link.</p>\n"},{"comments":[{"comment_id":127073569,"body":"Are the activities set to <code>exported=&quot;true&quot;</code>?"},{"comment_id":127073609,"body":"yes, in the manifest there&#39;s exported=&quot;true&quot;"},{"comment_id":127073625,"body":"Did you try <code>Intent.FLAG_IMMUTABLE</code>"},{"comment_id":127073780,"body":"Where? on the button&#39;s intent? yes."},{"comment_id":127073799,"body":"Hey, how are you able to use <code>this</code> in the <code>Intent openApp = new Intent(this, MainActivity.class);</code>?"},{"comment_id":127073830,"body":"<code>this</code> is the <code>Service</code>&#39;s context, tried also using <code>getAppContext()</code> and <code>getBaseContext()</code>, but it didn&#39;t work"},{"comment_id":127073849,"body":"Huh? You are trying to open it from the <code>BroadcastReceiver</code> or from the <code>Service</code>? I am a bit confused right now"},{"comment_id":127073871,"body":"from the <code>Service</code>."},{"comment_id":127073883,"body":"Why not open it from the <code>BroadcastReceiver</code>? And how are you getting the click listener for the buttons? You need a pending intent and only 1 works at a time"},{"comment_id":127073941,"body":"I&#39;m not using a <code>BroadcastReceiver</code>. When the button is clicked, a <code>Service</code> intent is called, but with the action of the button, and when the service is started with this action I want to open the <code>MainActivity</code>, amongst other things"},{"comment_id":127073975,"body":"how are you getting the click listener for the buttons? A pending intent? Can you share the code for that class?"},{"comment_id":127074039,"body":"yes, a <code>PendingIntent</code>. I&#39;d soon share the code for the button, but the whole class is too much code... It&#39;s the <code>TimerService</code> from my previous questions"},{"comment_id":127074050,"body":"ok. So, from the buttons in the notification, you are not doing the pause and start thing which I gave in the repo?"},{"comment_id":127074134,"body":"nope. I only need a stop button."},{"comment_id":127074170,"body":"Ok. Share the code for that buttons"},{"comment_id":127074296,"body":"shared it. but again, I believe this code is irrelevant, the button reacts to the user clicking on it..."},{"comment_id":127075811,"body":"@Sambhav.K do you manage to succeed in doing it? are you able to open an <code>Activity</code> from the background when clicking a notifications button?"},{"comment_id":127075909,"body":"Sorry I had gone for some urgent work. Im back now. So, you want to open the main activity when you press the stop button?"},{"comment_id":127075919,"body":"yes, that&#39;s what I&#39;m trying to do(:"},{"comment_id":127075923,"body":"ok. Let em give an answer. Just 5 mins 🙂"}],"answers":[{"comments":[{"comment_id":127076153,"body":"it gives me a red line under <code>startActivity()</code>, saying &quot;<code>This intent launches a Service which launches activities; this indirection is bad for performance, and activities should be launched directly from the notification</code>&quot;"},{"comment_id":127076180,"body":"Let me edit this and give another answer"},{"comment_id":127076352,"body":"Does my answer help you now @NitzanDaloomy?"},{"comment_id":127080489,"body":"After reading your suggestion, I don&#39;t understand - where&#39;s the code for opening the activity?"},{"comment_id":127080590,"body":"not only this, I find it really hard to understand what&#39;s going on - what&#39;s the <code>createNotificationActionButton()</code> method is for, why is it better than how I did it, and how it actually works... where did you register your broadcast? I really got lost in here"},{"comment_id":127085754,"body":"@NitzanDaloomy. I will answer your questions here ~~~ <code>where&#39;s the code for opening the activity?</code>: I forgot to add the part to open the activity. I have added it now. <code>where did you register your broadcast?</code>: Also I had forgotten to register it in the service. I have added it. <code>what&#39;s the createNotificationActionButton() method is for?</code> It is used to make an action button for the notification. <code>why is it better than how I did I</code>: I can&#39;t say that. Your method is good for u and my method is good for me. But, I&#39;d prefer never to open activities from the service. Instead use Broadcast Receivers."},{"comment_id":127085774,"body":"And lastly <code>and how it actually works</code>: It works with a easy method. First we have an intent in the activity which will be used to start and stop the service. When, we click the button in the notification, it sends a broadcast to the <code>StopwatchNotificationActionReceiver</code> class. There, when it receives a broadcast, it stops the service from the intent of the main activity and then opens the main activity. <b>Hope I have answered all your questions</b>"},{"comment_id":127097835,"body":"Tried what you suggested again, and again a red line jumped, with the same error, this tome under <code>addAction()</code> method: &quot;<code>This intent launches a BroadcastReceiver which launches activities; this indirection is bad for performance, and activities should be launched directly from the notification</code>&quot;"},{"comment_id":127097959,"body":"also tried to run this although there&#39;s a red line, and the activity just didn&#39;t open"},{"comment_id":127116181,"body":"Now. I want to know whether or not you want to stop the timer on click of the stop button? If you want to stop, then use the broadcast receiver as mentioned by me or else just use a pending intent for that."},{"comment_id":127116838,"body":"I want to stop the timer, and open the app so I can do some other stuff that I can only do inside my app. That&#39;s why I need to be able to open the activity intent from outside the app. stopping the service was never a problem..."},{"comment_id":127118223,"body":"Sorry for the late reply. Yes. My answer is edited according to that. Try that code"},{"comment_id":127118284,"body":"Or even try the simple method given by me at the bottom"},{"comment_id":127118506,"body":"Both of them show the same red lines I mentioned before :( (and they don&#39;t work)"},{"comment_id":127118819,"body":"Is it possible for you to open the activity and in the activity stop the timer"},{"comment_id":127118877,"body":"In the meantime, if I cannot find a way to open the app using the stop button, I just won&#39;t show a button, and the user will have to go into the app and then stop the service. It would be better if they could just click the stop button and then it will all happen automatically for the users though, and that&#39;s why I brought up this question"},{"comment_id":127121679,"body":"found half a solution (: check out my answer to see it."},{"comment_id":127139112,"body":"I have edited my answer. Look into the <code>Edit</code> section]"},{"comment_id":127167455,"body":"Hi @NitzanDaloomy. No response yet. Is there any error still?"},{"comment_id":127173523,"body":"Hi, sorry to answer just now, a busy weekend. I&#39;ve seen your solution but didn&#39;t see anything that&#39;s supposed to solve my problem... check my answer (the one below yours), it explains why the activity won&#39;t open... if you have anything to solve what I referred to at the end of my answer that&#39;ll be great (: thanks for the help!"},{"comment_id":127173681,"body":"@NitzanDaloomy NP. Yes. I did see your answer. I have also solved ur problem. What I have done is that open the activity with an extra. In the <code>onResume()</code> I check if the extra is <code>r</code>. If yes, I stop the service and also stop the timer. You can view the result below it. That will do the task for you i guess."},{"comment_id":127175270,"body":"But I don&#39;t get it. in order to get to <code>onResume()</code>, you have to open the app, and this requires the permissions, as I mentioned... Do you claim to solve the problem without the required permissions? and also to be able to open the app even if it&#39;s killed?"},{"comment_id":127176759,"body":"Yes indeed @NitzanDaloomy. Try it out. It works like charm. But, did u check the sample video? You can see the result there"},{"comment_id":127180961,"body":"Oh, great, I&#39;ll try that out as soon as I can! Thanks(:"},{"comment_id":127181003,"body":"Also, instead of stopping the service when I&#39;m in the app, I&#39;m not stopping it - the service is the main and only timer that runs, so I guess there&#39;s no need to use <code>onResume()</code> anymore?"},{"comment_id":127184454,"body":"hmmmm. So, you can remove the <code>stopService()</code> method in the <code>onResume()</code>. That will do the task"},{"comment_id":127205625,"body":"Any updates @NitzanDaloomy?"},{"comment_id":127207761,"body":"tried your code, it makes sense that it&#39;ll work, and it does. but it&#39;s not what I tried to do. I&#39;m trying to open the activity from the service at any time. In addition to the regular timer, I have a <code>CountdownTimer</code>, and in its <code>onFinish()</code> I&#39;m opening the activity, so opening the app from the service is required, and not from the notification. Anyway, it&#39;s a great way for opening the app using the notifications button. So I&#39;ll give you an upvote for that, but still, my solution solves better my problem. hope it&#39;ll get figured out how to solve it completely."},{"comment_id":127208019,"body":"Now. That becomes another question i guess. I have answered your question of opening activity from action button. What u r asking now is different. Why not ask another question?"},{"comment_id":127210809,"body":"I&#39;ll upload another answer then. I&#39;ll update you when I do it (:"},{"comment_id":127220685,"body":"I&#39;ve uploaded another <a href=\"https://stackoverflow.com/q/71998322/8099601\">question</a>"},{"comment_id":127221095,"body":"are you the one who upvoted to it?"},{"comment_id":127240463,"body":"No. Not me. @NitzanDaloomy"},{"comment_id":127250966,"body":"Man :/ so who did it... I just can&#39;t understand why would someone do it without at least explaining... what&#39;s the point of it if it doesn&#39;t come with an explanation?"}],"answer_id":71913906,"body":"<p>You can try to receive the click in a <code>BroadcastReceiver</code> and then open activity from there.</p>\n<ol>\n<li>Try this to add a action button o your notification:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>timerNotificationBuilder.addAction(createNotificationActionButton(&quot;STOP&quot;);\n</code></pre>\n<p>Where the <code>createNotificationActionButton</code> method is this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public NotificationCompat.Action createNotificationActionButton(String text){\n        Intent intent = new Intent(this, StopwatchNotificationActionReceiver.class);\n\n        @SuppressLint(&quot;InlinedApi&quot;) PendingIntent pendingIntent = PendingIntent.getBroadcast(this, new Random().nextInt(100), intent, PendingIntent.FLAG_IMMUTABLE);\n\n        return new NotificationCompat.Action(0, text, pendingIntent);\n    }\n</code></pre>\n<ol start=\"2\">\n<li>Create a class named <code>StopwatchNotificationActionReceiver</code> and make it extent a <code>BroadcastReceiver</code>. This is the code for that class:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>import android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.util.Log;\n\npublic class StopwatchNotificationActionReceiver extends BroadcastReceiver {\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        PrefUtil.setIsRunningInBackground(context, false);\n        PrefUtil.setTimerSecondsPassed(context, 0);\n        PrefUtil.setWasTimerRunning(context, false);\n        context.stopService(MainActivity.serviceIntent);\n        Intent activityIntent = new Intent(context, MainActivity.class);\n        activityIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n        context.startActvity(activityIntent);\n    }\n}\n</code></pre>\n<p>Also you need to register that receiver in your manifest like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;receiver android:name=&quot;StopwatchNotificationActionReceiver&quot;/&gt;\n</code></pre>\n<ol start=\"3\">\n<li>Where the <code>MainActivity.serviceIntent</code> is a public static variable which looks like this:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>public static Intent serviceIntent;\n</code></pre>\n<p>And this intent is only used to start the service like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//In onCreate\nserviceIntent = new Intent(this, TimerService.class);\n\n//In onPause\nPrefUtil.setTimerSecondsPassed(this,seconds);\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n                startForegroundService(serviceIntent);\n            }\n</code></pre>\n<p>Or you can try the simple method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (action != null &amp;&amp; action.equals(ACTION_STOP_SERVICE)) {\n    Context context = this;\n    Intent activityIntent = new Intent(context, MainActivity.class);\n        activityIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n        context.startActvity(activityIntent);\n    killService();\n}\n</code></pre>\n<h3>Edit</h3>\n<hr />\n<p>Another solution is here. Again. You need to refer to my <a href=\"https://github.com/sambhav2358/Backgroud-Stopwatch-Android\" rel=\"nofollow noreferrer\">repo</a> as I have made changes to the files in order to complete your task.  In the service class, refer to <a href=\"https://github.com/sambhav2358/Backgroud-Stopwatch-Android/blob/498b70196cfa92095a250d4013050e9806341322/app/src/main/java/com/sambhav2358/testing/TimerService.java#L177\" rel=\"nofollow noreferrer\">this</a> method. There, I start the activity if the action is reset(r). Or else, it opens the broadcast receiver. Then, in the activity, I receive that extra in the <a href=\"https://github.com/sambhav2358/Backgroud-Stopwatch-Android/blob/498b70196cfa92095a250d4013050e9806341322/app/src/main/java/com/sambhav2358/testing/MainActivity.java#L154\" rel=\"nofollow noreferrer\"><code>onResume()</code> method</a>. If the reset button is not clicked, it opens the <a href=\"https://github.com/sambhav2358/Backgroud-Stopwatch-Android/blob/main/app/src/main/java/com/sambhav2358/testing/StopwatchNotificationActionReceiver.java\" rel=\"nofollow noreferrer\">Receiver class</a>.</p>\n<p>And as always, you can view the result of the app <a href=\"https://gifyu.com/image/SL0ZR\" rel=\"nofollow noreferrer\">from here</a>.</p>\n<p>I hope that code will do your work.</p>\n"},{"answer_id":71940559,"body":"<p>I found it! See <a href=\"https://stackoverflow.com/a/59067224/8099601\">this answer</a>.<br />\nThis answer suggests enabling <code>ScreeanOverlay</code> settings because as of Android 10 and later you can no longer open an activity from the background just by calling the lines I've used.<br />\nTo make it work, you'd have to add this permission through your <code>Manifest.xml</code>:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot;/&gt;\n</code></pre>\n<p>And then the user would have to enable the <code>Display over other apps</code> setting.<br />\nI searched for an option to get the user to this setting more easily and found <a href=\"https://stackoverflow.com/a/40355440/8099601\">this answer</a>.<br />\nThis answer gives a code that redirects the user to the <code>Display over other apps</code> setting</p>\n<pre><code>if (!Settings.canDrawOverlays(this)) {\n    Intent intent = new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION, Uri.parse(&quot;package:&quot; + getPackageName()));\n    startActivityForResult(intent, 0);\n}\n</code></pre>\n<p>and then I guide the user with the notification's content (text) on how to enable the setting.<br />\nOnce the setting is enabled, The lines I've used before work.\\</p>\n<p>So, problem solved?</p>\n<h2>Not Completely Solved</h2>\n<p>this whole configuration described above works, but only if the app is not killed.<br />\nIf the app was killed and I try the method listed above, the app joins the recent apps list, but won't open and show up.<br />\nA solution that solves this issue as well will be accepted as an answer instead of this one.</p>\n"}],"last_activity_date":1684771902,"question_id":71911095,"body":"<p>I'm trying to open the <code>MainActivity</code> when the user clicks a button in my notification, while the app is only running in the background with a service. When the button is clicked, these lines are triggered in the <code>Service</code> class:</p>\n<pre><code>Intent openApp = new Intent(this, MainActivity.class);\nopenApp.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\nstartActivity(openApp);\n</code></pre>\n<p>I've checked it, and the lines are triggered, so there's no problem in reacting to the button's click, the <code>Activity</code> won't open though.</p>\n<p>Any suggestions? Why isn't this working for me and how can I make it work?</p>\n<h2>Edit</h2>\n<p>I was asked for some more code, so in my <code>onStartCommand()</code> inside my <code>Service</code>, if it starts with a stop-action within its <code>intent</code>, I call the <code>killService()</code> method, which kills the <code>Service</code>, starts the <code>MainActivity</code> and do some other stuff:</p>\n<pre><code>if (action != null &amp;&amp; action.equals(ACTION_STOP_SERVICE)) {\n    killService();\n}\n</code></pre>\n<p>To set the <code>Notification</code>s button, I use this code:</p>\n<pre><code>Intent stopActionIntent = new Intent(this, TimerService.class);\n        stopActionIntent.setAction(ACTION_STOP_SERVICE);\n        PendingIntent stopActionPendingIntent = PendingIntent.getService(this, 1, stopActionIntent, PendingIntent.FLAG_IMMUTABLE);\n\ntimerNotificationBuilder.addAction(R.drawable.stop, &quot;Stop&quot;, stopActionPendingIntent);\n</code></pre>\n<p>And as I said, the button already reacts to the user clicking on it, so that's not the problem.</p>\n"},{"comments":[{"comment_id":134560673,"body":"You may want to look into <a href=\"https://www.baeldung.com/spring-415-unsupported-mediatype\" rel=\"nofollow noreferrer\">Unsupported Media Type</a>"},{"comment_id":134560696,"body":"You aren&#39;t saving yourself from any work, infact you are actually taking up more work by only returning/forcing JSON."},{"comment_id":134561668,"body":"client&#39;s content type might be <code>xml</code> but at the same time it can <code>accept</code> <code>html</code> or other types. I want to ignore <code>accept</code> header as well"},{"comment_id":134561751,"body":"@RickyMutschlechner and when I use <code>consumes = {&quot;application&#47;json&quot;}</code> it still returns html response."},{"comment_id":134566701,"body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"answer_id":76308064,"body":"<p>I was able to achieve what I want using <code>produces={&quot;application/json&quot;}</code></p>\n<p>see <a href=\"https://www.baeldung.com/spring-rest-custom-media-type\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-rest-custom-media-type</a> for more info</p>\n<p><a href=\"https://i.stack.imgur.com/ZSxDq.png\" rel=\"nofollow noreferrer\">here is the response</a></p>\n"}],"last_activity_date":1684771865,"question_id":76307182,"body":"<p>I want my spring boot application only to return response in json format.</p>\n<p>Spring boot decides the response type according to request <code>accept</code> header. It deserializes response according to the header (json, xml or html)</p>\n<p>I know that my client works with json only. So there is no point for me to respond in xml and html formats.</p>\n<p>If I am capable of returning xml and html responses, I expect my client to receive json response as well. Why do I have to prepare the response in xml, why don't my client is unable to understand json messages?</p>\n<p>You may think that you have more than one client, you save work from all of them but I have more than one API as well so I also need to save work from myself as well...</p>\n<p>Assume the client is also a spring boot application. There is no point sending <code>xml</code> or <code>json</code> responses since both will deserialize to the same model object. So why is it my duty to prepare <code>html</code> or <code>xml</code> response? I want my application to be as simple as possible and these different response formats bring pointless complexity in my application. Or is it so?</p>\n<p>So how can I configure this in spring boot?</p>\n<p>Thanks in advance.</p>\n<p>I want to disable xml and html responses. Simply return <code>404</code> when these kind of requests are received or inform the client that this server only supports <code>json</code> response type (actually there should be a specific status code for this situation)</p>\n<p>Or since <code>HTTP/1.1</code> servers are allowed to return responses which are not acceptable according to the <code>accept</code> headers sent in the request, ignore the <code>accept</code> header and return <code>json</code> response. (<a href=\"https://stackoverflow.com/a/15027174/17968709\">https://stackoverflow.com/a/15027174/17968709</a>)</p>\n<p>So how can I configure this in spring boot?</p>\n"},{"comments":[{"comment_id":10645036,"body":"See Fab&#39;s answer for a solution that works when paths include spaces. Also, note that some answers below address the question in the title (jar path), some address the question itself (path of folder containing jar), and some provide paths to classes inside the jar file."},{"comment_id":23735066,"body":"Beware when using in ANT! ============== I call String path = SomeClass.class.getProtectionDomain().getCodeSource().getLoc&zwnj;&#8203;ation().getPath(); and get: /C:/apache-ant-1.7.1/lib/ant.jar Not very useful!"},{"comment_id":23735068,"body":"Interesting. The original code in which I used this was never run in ant, so it isn&#39;t an issue for me."},{"comment_id":53640559,"body":"@Dino Fancellu, i experienced exactly what you described. Works during dev, fails when built to jar."}],"answers":[{"comments":[{"comment_id":753159,"body":"My JAR file is obfuscated, so this answer does not solve my problem. But I haven&#39;t specified that in the question, so this is still a valid answer."},{"comment_id":753222,"body":"If it&#39;s obfuscated, use Test.class.getName() and do appropriate munging."},{"comment_id":92612944,"body":"If there are no resources, <code>NPE</code> is thrown"},{"comment_id":92613847,"body":"@WhiteAngel: It shouldn&#39;t. I&#39;d expect that to print <code>null</code> instead, as <code>loader.getResource</code> would return null. If you tried to dereference the result instead of passing it to <code>System.out.println</code>, <i>then</i> it would throw an NPE. It&#39;s pretty rare that you don&#39;t know what resources are available though - and in cases where you <i>don&#39;t</i> know that, you can just add a null check in the normal way."},{"comment_id":92614008,"body":"@JonSkeet So, you think that your solution that works in some particular case is a viable solution?"},{"comment_id":92614552,"body":"@WhiteAngel: I think a solution that works <i>for the question that was asked</i> is fine. Can you give an example where asking the ClassLoader of a class for the resource <b>of that class</b> would return null? That&#39;s the question that was being asked. It&#39;s not about some arbitrary resource that may or may not be present. (And as I pointed out before, the code I presented wouldn&#39;t throw an NPE. If you&#39;re seeing one, that would be in some other code that dereferenced the result.)"},{"comment_id":92614900,"body":"@JonSkeet there are so many problems with your answer: 1. There will be no <code>NPE</code> because you didn&#39;t answer on the question that was asked (path to JAR dir was asked and you answered on absolutely different question: path to class). 2. As pointed by others, and I got the same issue, it doesn&#39;t work for applets. 3. Returned path is not of canonical path representation at all: <code>jar:file:&#47;listener&#47;build&#47;libs&#47;listener-1.0.0-all.jar!&#47;shared&zwnj;&#8203;&#47;Test.class</code>."},{"comment_id":92615068,"body":"@WhiteAngel: 1) The last line of my post indicates that you&#39;d need to look at the URL and pick that apart to get the jar file. I agree it&#39;s not the most complete answer, but I don&#39;t think it&#39;s really so bad to be worth arguing about (especially 10 years later...) 2) Applets weren&#39;t mentioned in any comments <i>here</i> - strangely enough, I don&#39;t have time to look at all comments on all answers on questions that I happened to post an answer to. 3) Again, I link to the format of the jar URL."},{"comment_id":92615112,"body":"@WhiteAngel: Is it the best answer I&#39;ve ever written? Nope. Is it as bad as you&#39;re making it out to be? No, I don&#39;t think so. (Particularly in terms of the claims you made around it throwing an NPE, which it doesn&#39;t.) I would suggest you add your own answer instead of making a fuss about this one. That would be a more positive approach."}],"answer_id":320554,"body":"<p>Use ClassLoader.getResource() to find the URL for your current class.</p>\n\n<p>For example:</p>\n\n<pre><code>package foo;\n\npublic class Test\n{\n    public static void main(String[] args)\n    {\n        ClassLoader loader = Test.class.getClassLoader();\n        System.out.println(loader.getResource(\"foo/Test.class\"));\n    }\n}\n</code></pre>\n\n<p>(This example taken from <a href=\"https://stackoverflow.com/questions/227486/find-where-java-class-is-loaded-from\">a similar question</a>.)</p>\n\n<p>To find the directory, you'd then need to take apart the URL manually. See the <a href=\"http://java.sun.com/docs/books/tutorial/deployment/jar/jarclassloader.html\" rel=\"nofollow noreferrer\">JarClassLoader tutorial</a> for the format of a jar URL.</p>\n"},{"comments":[{"comment_id":18478290,"body":"The <code>toURI()</code> step is vital to avoid problems with special characters, including spaces and pluses.  The correct one-liner is: <code>return new File(MyClass.class.getProtectionDomain().getCodeSource().get&zwnj;&#8203;Location().toURI());</code>  Using <code>URLDecoder</code> does not work for many special characters. See my answer below for further details."},{"comment_id":45663516,"body":"toURI() seems to break paths run from a network share."},{"comment_id":53640513,"body":"Note: this returns the path including the name of jar file"},{"comment_id":62964734,"body":"Doesn&#39;t this point to the jar file, instead of the running directory? You will have to do a on the result getParentFile() for this work."},{"comment_id":81413633,"body":"@F.O.O. [A] Yes, it get&#39;s point to JAR file [B] No, it has No Relationship to the working directory.  Prove this by running <code>java -Duser.dir=TotallyDiffDir -cp [myjarpath] [myappclasspath]</code>: &#39;user.dir&#39; sets the current working directory, and this answer returns where code is in classpath"},{"comment_id":83093966,"body":"whats the point of the getPath() call? Why not simply construct the File from teh URI?"},{"comment_id":86204508,"body":"Also, <code>getProtectionDomain</code> is null if you are getting your class from a stracktrace: <code>val strace = Thread.currentThread().getStackTrace; val path = strace(1).getClass.getProtectionDomain</code>"},{"comment_id":96548309,"body":"Using this method with up to Java 8; placing this method in a class that is in a external Jar, loaded via class-path, then the path of the external jar will be given instead of the actual running Jar."},{"comment_id":115530311,"body":"this answer have a lot of upvot, I think is because of the date, but now a days this doesn&#39;t work, you will get a straigh exception when invoking the new File(URI), .toURI can also be null"},{"comment_id":123523040,"body":"It doesn&#39;t work on windows. The path contains a preceding slash, e.g. <code>&#47;c:&#47;documents </code> which is illegal for window file."}],"answer_id":320595,"body":"<pre><code>return new File(MyClass.class.getProtectionDomain().getCodeSource().getLocation()\n    .toURI()).getPath();\n</code></pre>\n\n<p>Replace \"MyClass\" with the name of your class.</p>\n\n<p>Obviously, this will do odd things if your class was loaded from a non-file location.</p>\n"},{"comments":[{"comment_id":4527451,"body":"That path string still needs to be simplified to your need. <code>String path = new File(getClass().getResource(&quot;&quot;).getPath()).getParentFile().g&zwnj;&#8203;etParent(); File jarDir = new File(path.substring(5));</code>"},{"comment_id":18825742,"body":"Both <code>getResource(&quot;&quot;)</code> and <code>getResource(&quot;.&quot;)</code> failed in my tests, when the class resided within a JAR file; both invocations returned null."},{"comment_id":69551293,"body":"This throws <code>NullPointerException</code>."}],"answer_id":4189058,"body":"<pre><code>String path = getClass().getResource(\"\").getPath();\n</code></pre>\n\n<p>The path always refers to the resource within the jar file.</p>\n"},{"comments":[{"comment_id":6469268,"body":"&quot;It should work in either Windows or Unix.&quot;  but will fail in any applet and every app. launched using JWS."}],"answer_id":5667601,"body":"<p>This method, called from code in the archive, returns the folder where the .jar file is. It should work in either Windows or Unix.</p>\n\n<pre><code>\n  private String getJarFolder() {\n    String name = this.getClass().getName().replace('.', '/');\n    String s = this.getClass().getResource(\"/\" + name + \".class\").toString();\n    s = s.replace('/', File.separatorChar);\n    s = s.substring(0, s.indexOf(\".jar\")+4);\n    s = s.substring(s.lastIndexOf(':')-1);\n    return s.substring(0, s.lastIndexOf(File.separatorChar)+1);\n  } \n\n</code></pre>\n\n<p>Derived from code at: <a href=\"http://www.rgagnon.com/javadetails/java-0391.html\" rel=\"nofollow\">Determine if running from JAR</a></p>\n"},{"comments":[{"comment_id":69551257,"body":"There are several built-in ways to decode the path. No need to write your own code."}],"answer_id":5678263,"body":"<p>Actually here is a better version - the old one failed if a folder name had a space in it.</p>\n\n<pre><code>  private String getJarFolder() {\n    // get name and path\n    String name = getClass().getName().replace('.', '/');\n    name = getClass().getResource(\"/\" + name + \".class\").toString();\n    // remove junk\n    name = name.substring(0, name.indexOf(\".jar\"));\n    name = name.substring(name.lastIndexOf(':')-1, name.lastIndexOf('/')+1).replace('%', ' ');\n    // remove escape characters\n    String s = \"\";\n    for (int k=0; k&lt;name.length(); k++) {\n      s += name.charAt(k);\n      if (name.charAt(k) == ' ') k += 2;\n    }\n    // replace '/' with system separator char\n    return s.replace('/', File.separatorChar);\n  }\n</code></pre>\n\n<p>As for failing with applets, you wouldn't usually have access to local files anyway. I don't know much about JWS but to handle local files might it not be possible to download the app.?</p>\n"},{"comments":[{"comment_id":9312768,"body":"One more note: While calling this function from the Jar, the name of the jar is appended at the end for me, therefore had to execute: path.substring(0, path.lastIndexOf(&quot;/&quot;) + 1);"},{"comment_id":12681848,"body":"/ isn&#39;t necessarily the path separator. You should do (new File(path)).getParentFile().getPath() instead."},{"comment_id":12770415,"body":"No problems with JAR file name being appended here. The UTF conversion seems to be the perfect solution in combination with @Iviggiani one&#39;s (<code>URLDecoder.decode(ClassLoader.getSystemClassLoader().getRes&zwnj;&#8203;ource(&quot;.&quot;).getPath()&zwnj;&#8203;, &quot;UTF-8&quot;);</code>) on Linux. However, I didn&#39;t try on Windows."},{"comment_id":13671126,"body":"Thank you, this allowed me to load files external to my JAR with FileInputStream in both Linux and Windows. Just had to add the decodedpath in front of the filename..."},{"comment_id":14774808,"body":"I regularly package files inside my executable jars (executables, more frequently default settings ) to make little utility tools.  The most important thing for me is to have a tool robust, that doesn&#39;t need external info and doesn&#39;t rely on anything but itself, so this is a great snippet for me!  Thanks"},{"comment_id":17880060,"body":"Beware: it is not recommended to use <code>URLDecoder</code> to decode special characters. In particular, characters like <code>+</code> will be erroneously decoded to spaces. See my answer for details."},{"comment_id":21768390,"body":"This is the best solution(Fab&#39;s)... I wrote String path = URLDecoder.decode([MyClass].class.getProtectionDomain().getC&zwnj;&#8203;odeSource().getLocat&zwnj;&#8203;ion().getPath(), &quot;UTF-8&quot;);"},{"comment_id":26118331,"body":"@LilianA.Moraru That&#39;s equivalent."},{"comment_id":45663531,"body":"This solution also works with a network share, the other answer&#39;s used the function toURI(), which cuts off the first part of the share path."},{"comment_id":107504133,"body":"This solution does not work on Windows. The accepted answer works though."},{"comment_id":116050341,"body":"If you use <code>URLDecoder.decode(path, StandardCharsets.UTF_8)</code> introduced in Java 10, you won&#39;t have to handle the <code>UnsupportedEncodingException</code>."}],"answer_id":6849255,"body":"<p>Best solution for me:</p>\n\n<pre><code>String path = Test.class.getProtectionDomain().getCodeSource().getLocation().getPath();\nString decodedPath = URLDecoder.decode(path, \"UTF-8\");\n</code></pre>\n\n<p>This should solve the problem with spaces and special characters.</p>\n"},{"comments":[{"comment_id":33653718,"body":"This works better for me, cause it gives the path of the Jar, not of the class!"},{"comment_id":106391365,"body":"Worked for me too. Combine with Fab&#39;s answer and it get better!"},{"comment_id":121217511,"body":"I concur, it&#39;s better as it returns the .jar, not the class the .jar calls."}],"answer_id":7060464,"body":"<p>You can also use:</p>\n\n<pre><code>CodeSource codeSource = YourMainClass.class.getProtectionDomain().getCodeSource();\nFile jarFile = new File(codeSource.getLocation().toURI().getPath());\nString jarDir = jarFile.getParentFile().getPath();\n</code></pre>\n"},{"comments":[{"comment_id":9192110,"body":"Did you try that in an applet, or an app. launched using Java Web Start?  My understanding is that it will fail in both situations (even if the app. is trusted)."},{"comment_id":12144015,"body":"This solution can only return the location of &quot;.&quot; <i>within</i> the JAR file, not the location <i>of</i> the JAR file."},{"comment_id":17880083,"body":"Beware: it is not recommended to use <code>URLDecoder</code> to decode special characters. In particular, characters like <code>+</code> will be erroneously decoded to spaces. See my answer for details."},{"comment_id":82766359,"body":"In Spring boot, it will throw <code>NullPointerException</code>"},{"comment_id":92613037,"body":"You will have <code>NPE</code> if there are no resources in JAR."}],"answer_id":7579697,"body":"<p>the selected answer above is not working if you run your jar by click on it from Gnome desktop environment (not from any script or terminal).</p>\n\n<p>Instead, I have fond that the following solution is working everywhere:</p>\n\n<pre><code>    try {\n        return URLDecoder.decode(ClassLoader.getSystemClassLoader().getResource(\".\").getPath(), \"UTF-8\");\n    } catch (UnsupportedEncodingException e) {\n        return \"\";\n    }\n</code></pre>\n"},{"comments":[{"comment_id":17880070,"body":"Beware: it is not recommended to use <code>URLDecoder</code> to decode special characters. In particular, characters like <code>+</code> will be erroneously decoded to spaces. See my answer for details."},{"comment_id":25706872,"body":"Using special characters in file names is not recommended."},{"comment_id":69551273,"body":"<code>URLDecoder</code>, despite its name, is for decoding URL and form parameter names and values, not URLs."}],"answer_id":9924414,"body":"<p>Here's upgrade to other comments, that seem to me incomplete for the specifics of </p>\n\n<blockquote>\n  <p>using a relative \"folder\" outside .jar file (in the jar's same\n  location):</p>\n</blockquote>\n\n<pre><code>String path = \n  YourMainClassName.class.getProtectionDomain().\n  getCodeSource().getLocation().getPath();\n\npath = \n  URLDecoder.decode(\n    path, \n    \"UTF-8\");\n\nBufferedImage img = \n  ImageIO.read(\n    new File((\n        new File(path).getParentFile().getPath()) +  \n        File.separator + \n        \"folder\" + \n        File.separator + \n        \"yourfile.jpg\"));\n</code></pre>\n"},{"comments":[{"comment_id":27429304,"body":"+1; the best answer to date: it will return the path using the correct notation for the OS. (e.g. \\ for windows)."},{"comment_id":95024090,"body":"Regarding security, I believe I found that Java WebStart did not allow this."}],"answer_id":12733172,"body":"<p>To obtain the <code>File</code> for a given <code>Class</code>, there are two steps:</p>\n\n<ol>\n<li>Convert the <code>Class</code> to a <code>URL</code></li>\n<li>Convert the <code>URL</code> to a <code>File</code></li>\n</ol>\n\n<p>It is important to understand both steps, and not conflate them.</p>\n\n<p>Once you have the <code>File</code>, you can call <code>getParentFile</code> to get the containing folder, if that is what you need.</p>\n\n<h2>Step 1: <code>Class</code> to <code>URL</code></h2>\n\n<p>As discussed in other answers, there are two major ways to find a <code>URL</code> relevant to a <code>Class</code>.</p>\n\n<ol>\n<li><p><code>URL url = Bar.class.getProtectionDomain().getCodeSource().getLocation();</code></p></li>\n<li><p><code>URL url = Bar.class.getResource(Bar.class.getSimpleName() + \".class\");</code></p></li>\n</ol>\n\n<p>Both have pros and cons.</p>\n\n<p>The <code>getProtectionDomain</code> approach yields the base location of the class (e.g., the containing JAR file). However, it is possible that the Java runtime's security policy will throw <code>SecurityException</code> when calling <code>getProtectionDomain()</code>, so if your application needs to run in a variety of environments, it is best to test in all of them.</p>\n\n<p>The <code>getResource</code> approach yields the full URL resource path of the class, from which you will need to perform additional string manipulation. It may be a <code>file:</code> path, but it could also be <code>jar:file:</code> or even something nastier like <code>bundleresource://346.fwk2106232034:4/foo/Bar.class</code> when executing within an OSGi framework. Conversely, the <code>getProtectionDomain</code> approach correctly yields a <code>file:</code> URL even from within OSGi.</p>\n\n<p>Note that both <code>getResource(\"\")</code> and <code>getResource(\".\")</code> failed in my tests, when the class resided within a JAR file; both invocations returned null. So I recommend the #2 invocation shown above instead, as it seems safer.</p>\n\n<h2>Step 2: <code>URL</code> to <code>File</code></h2>\n\n<p>Either way, once you have a <code>URL</code>, the next step is convert to a <code>File</code>. This is its own challenge; see <a href=\"http://weblogs.java.net/blog/kohsuke/archive/2007/04/how_to_convert.html\" rel=\"noreferrer\">Kohsuke Kawaguchi's blog post about it</a> for full details, but in short, you can use <code>new File(url.toURI())</code> as long as the URL is completely well-formed.</p>\n\n<p>Lastly, I would <em>highly discourage</em> using <code>URLDecoder</code>. Some characters of the URL, <code>:</code> and <code>/</code> in particular, are not valid URL-encoded characters. From the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/net/URLDecoder.html\" rel=\"noreferrer\">URLDecoder</a> Javadoc:</p>\n\n<blockquote>\n  <p>It is assumed that all characters in the encoded string are one of the following: \"a\" through \"z\", \"A\" through \"Z\", \"0\" through \"9\", and \"-\", \"_\", \".\", and \"*\". The character \"%\" is allowed but is interpreted as the start of a special escaped sequence.</p>\n  \n  <p>...</p>\n  \n  <p>There are two possible ways in which this decoder could deal with illegal strings. It could either leave illegal characters alone or it could throw an IllegalArgumentException. Which approach the decoder takes is left to the implementation.</p>\n</blockquote>\n\n<p>In practice, <code>URLDecoder</code> generally does not throw <code>IllegalArgumentException</code> as threatened above. And if your file path has spaces encoded as <code>%20</code>, this approach may appear to work. However, if your file path has other non-alphameric characters such as <code>+</code> you will have problems with <code>URLDecoder</code> mangling your file path.</p>\n\n<h2>Working code</h2>\n\n<p>To achieve these steps, you might have methods like the following:</p>\n\n<pre><code>/**\n * Gets the base location of the given class.\n * &lt;p&gt;\n * If the class is directly on the file system (e.g.,\n * \"/path/to/my/package/MyClass.class\") then it will return the base directory\n * (e.g., \"file:/path/to\").\n * &lt;/p&gt;\n * &lt;p&gt;\n * If the class is within a JAR file (e.g.,\n * \"/path/to/my-jar.jar!/my/package/MyClass.class\") then it will return the\n * path to the JAR (e.g., \"file:/path/to/my-jar.jar\").\n * &lt;/p&gt;\n *\n * @param c The class whose location is desired.\n * @see FileUtils#urlToFile(URL) to convert the result to a {@link File}.\n */\npublic static URL getLocation(final Class&lt;?&gt; c) {\n    if (c == null) return null; // could not load the class\n\n    // try the easy way first\n    try {\n        final URL codeSourceLocation =\n            c.getProtectionDomain().getCodeSource().getLocation();\n        if (codeSourceLocation != null) return codeSourceLocation;\n    }\n    catch (final SecurityException e) {\n        // NB: Cannot access protection domain.\n    }\n    catch (final NullPointerException e) {\n        // NB: Protection domain or code source is null.\n    }\n\n    // NB: The easy way failed, so we try the hard way. We ask for the class\n    // itself as a resource, then strip the class's path from the URL string,\n    // leaving the base path.\n\n    // get the class's raw resource path\n    final URL classResource = c.getResource(c.getSimpleName() + \".class\");\n    if (classResource == null) return null; // cannot find class resource\n\n    final String url = classResource.toString();\n    final String suffix = c.getCanonicalName().replace('.', '/') + \".class\";\n    if (!url.endsWith(suffix)) return null; // weird URL\n\n    // strip the class's path from the URL string\n    final String base = url.substring(0, url.length() - suffix.length());\n\n    String path = base;\n\n    // remove the \"jar:\" prefix and \"!/\" suffix, if present\n    if (path.startsWith(\"jar:\")) path = path.substring(4, path.length() - 2);\n\n    try {\n        return new URL(path);\n    }\n    catch (final MalformedURLException e) {\n        e.printStackTrace();\n        return null;\n    }\n} \n\n/**\n * Converts the given {@link URL} to its corresponding {@link File}.\n * &lt;p&gt;\n * This method is similar to calling {@code new File(url.toURI())} except that\n * it also handles \"jar:file:\" URLs, returning the path to the JAR file.\n * &lt;/p&gt;\n * \n * @param url The URL to convert.\n * @return A file path suitable for use with e.g. {@link FileInputStream}\n * @throws IllegalArgumentException if the URL does not correspond to a file.\n */\npublic static File urlToFile(final URL url) {\n    return url == null ? null : urlToFile(url.toString());\n}\n\n/**\n * Converts the given URL string to its corresponding {@link File}.\n * \n * @param url The URL to convert.\n * @return A file path suitable for use with e.g. {@link FileInputStream}\n * @throws IllegalArgumentException if the URL does not correspond to a file.\n */\npublic static File urlToFile(final String url) {\n    String path = url;\n    if (path.startsWith(\"jar:\")) {\n        // remove \"jar:\" prefix and \"!/\" suffix\n        final int index = path.indexOf(\"!/\");\n        path = path.substring(4, index);\n    }\n    try {\n        if (PlatformUtils.isWindows() &amp;&amp; path.matches(\"file:[A-Za-z]:.*\")) {\n            path = \"file:/\" + path.substring(5);\n        }\n        return new File(new URL(path).toURI());\n    }\n    catch (final MalformedURLException e) {\n        // NB: URL is not completely well-formed.\n    }\n    catch (final URISyntaxException e) {\n        // NB: URL is not completely well-formed.\n    }\n    if (path.startsWith(\"file:\")) {\n        // pass through the URL as-is, minus \"file:\" prefix\n        path = path.substring(5);\n        return new File(path);\n    }\n    throw new IllegalArgumentException(\"Invalid URL: \" + url);\n}\n</code></pre>\n\n<p>You can find these methods in the <a href=\"https://github.com/scijava/scijava-common\" rel=\"noreferrer\">SciJava Common</a> library:</p>\n\n<ul>\n<li><a href=\"https://github.com/scijava/scijava-common/blob/scijava-common-2.62.1/src/main/java/org/scijava/util/ClassUtils.java#L296-L355\" rel=\"noreferrer\">org.scijava.util.ClassUtils</a></li>\n<li><a href=\"https://github.com/scijava/scijava-common/blob/scijava-common-2.62.1/src/main/java/org/scijava/util/FileUtils.java#L221-L268\" rel=\"noreferrer\">org.scijava.util.FileUtils</a>.</li>\n</ul>\n"},{"answer_id":15831228,"body":"<pre><code>public static String dir() throws URISyntaxException\n{\n    URI path=Main.class.getProtectionDomain().getCodeSource().getLocation().toURI();\n    String name= Main.class.getPackage().getName()+\".jar\";\n    String path2 = path.getRawPath();\n    path2=path2.substring(1);\n\n    if (path2.contains(\".jar\"))\n    {\n        path2=path2.replace(name, \"\");\n    }\n    return path2;}\n</code></pre>\n\n<p>Works good on Windows</p>\n"},{"comments":[{"comment_id":63053574,"body":"Don’t do that.  URL.getPath() <i>does not</i> return a filename and it will fail in a lot of circumstances, such as file paths with spaces in them."}],"answer_id":16775059,"body":"<p>I had the the same problem and I solved it that way:</p>\n\n<pre><code>File currentJavaJarFile = new File(Main.class.getProtectionDomain().getCodeSource().getLocation().getPath());   \nString currentJavaJarFilePath = currentJavaJarFile.getAbsolutePath();\nString currentRootDirectoryPath = currentJavaJarFilePath.replace(currentJavaJarFile.getName(), \"\");\n</code></pre>\n\n<p>I hope I was of help to you.</p>\n"},{"comments":[{"comment_id":83327353,"body":"This will not work. If on Linux, the toUri() method will throw an exception, and you will not reach the else part, for linux."},{"comment_id":111502779,"body":"broken for anonymous class"}],"answer_id":18341646,"body":"<p>The only solution that works for me on Linux, Mac and Windows:</p>\n\n<pre><code>public static String getJarContainingFolder(Class aclass) throws Exception {\n  CodeSource codeSource = aclass.getProtectionDomain().getCodeSource();\n\n  File jarFile;\n\n  if (codeSource.getLocation() != null) {\n    jarFile = new File(codeSource.getLocation().toURI());\n  }\n  else {\n    String path = aclass.getResource(aclass.getSimpleName() + \".class\").getPath();\n    String jarFilePath = path.substring(path.indexOf(\":\") + 1, path.indexOf(\"!\"));\n    jarFilePath = URLDecoder.decode(jarFilePath, \"UTF-8\");\n    jarFile = new File(jarFilePath);\n  }\n  return jarFile.getParentFile().getAbsolutePath();\n}\n</code></pre>\n"},{"comments":[{"comment_id":29005242,"body":"As a note, Path is available starting in Java 7."}],"answer_id":18482428,"body":"<p>I'm surprised to see that none recently proposed to use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html\" rel=\"noreferrer\"><code>Path</code></a>. Here follows a citation: \"<em>The <code>Path</code> class includes various methods that can be used to obtain information about the path, access elements of the path, convert the path to other forms, or extract portions of a path</em>\"</p>\n\n<p>Thus, a good alternative is to get the <code>Path</code> objest as:</p>\n\n<pre><code>Path path = Paths.get(Test.class.getProtectionDomain().getCodeSource().getLocation().toURI());\n</code></pre>\n"},{"answer_id":21938309,"body":"<p>I tried to get the jar running path using </p>\n\n<pre><code>String folder = MyClassName.class.getProtectionDomain().getCodeSource().getLocation().getPath();\n</code></pre>\n\n<p><em>c:\\app>java -jar application.jar</em></p>\n\n<p>Running the jar application named \"application.jar\", on Windows in the folder \"<em>c:\\app</em>\", the value of the String variable \"folder\" was \"<em>\\c:\\app\\application.jar</em>\" and I had problems testing for path's correctness  </p>\n\n<pre><code>File test = new File(folder);\nif(file.isDirectory() &amp;&amp; file.canRead()) { //always false }\n</code></pre>\n\n<p>So I tried to define \"test\" as:</p>\n\n<pre><code>String fold= new File(folder).getParentFile().getPath()\nFile test = new File(fold);\n</code></pre>\n\n<p>to get path in a right format like \"<em>c:\\app</em>\" instead of \"<em>\\c:\\app\\application.jar</em>\" and I noticed that it work.</p>\n"},{"answer_id":22160106,"body":"<p>I write in Java 7, and test in Windows 7 with Oracle's runtime, and Ubuntu with the open source runtime. This works perfect for those systems:</p>\n\n<p>The path for the parent directory of any running jar file (assuming the class calling this code is a direct child of the jar archive itself):</p>\n\n<pre><code>try {\n    fooDir = new File(this.getClass().getClassLoader().getResource(\"\").toURI());\n} catch (URISyntaxException e) {\n    //may be sloppy, but don't really need anything here\n}\nfooDirPath = fooDir.toString(); // converts abstract (absolute) path to a String\n</code></pre>\n\n<p>So, the path of foo.jar would be:</p>\n\n<pre><code>fooPath = fooDirPath + File.separator + \"foo.jar\";\n</code></pre>\n\n<p>Again, this wasn't tested on any Mac or older Windows</p>\n"},{"comments":[{"comment_id":63053891,"body":"URL.getPath() does not do what you think it does. Any special characters will be percent-encoded."}],"answer_id":30244209,"body":"<p>The <code>getProtectionDomain</code> approach might not work sometimes e.g. when you have to find the jar for some of the core java classes (e.g in my case <code>StringBuilder</code> class within IBM JDK), however following works seamlessly:</p>\n\n<pre><code>public static void main(String[] args) {\n    System.out.println(findSource(MyClass.class));\n    // OR\n    System.out.println(findSource(String.class));\n}\n\npublic static String findSource(Class&lt;?&gt; clazz) {\n    String resourceToSearch = '/' + clazz.getName().replace(\".\", \"/\") + \".class\";\n    java.net.URL location = clazz.getResource(resourceToSearch);\n    String sourcePath = location.getPath();\n    // Optional, Remove junk\n    return sourcePath.replace(\"file:\", \"\").replace(\"!\" + resourceToSearch, \"\");\n}\n</code></pre>\n"},{"answer_id":30381871,"body":"<p>I have another way to get the String location of a class.</p>\n\n<pre><code>URL path = Thread.currentThread().getContextClassLoader().getResource(\"\");\nPath p = Paths.get(path.toURI());\nString location = p.toString();\n</code></pre>\n\n<p>The output String will have the form of <br></p>\n\n<pre><code>C:\\Users\\Administrator\\new Workspace\\...\n</code></pre>\n\n<p>The spaces and other characters are handled, and in the form without <code>file:/</code>. So will be easier to use.</p>\n"},{"answer_id":33242475,"body":"<p>The simplest solution is to pass the path as an argument when running the jar.</p>\n\n<p>You can automate this with a shell script (.bat in Windows, .sh anywhere else):</p>\n\n<pre><code>java -jar my-jar.jar .\n</code></pre>\n\n<p>I used <code>.</code> to pass the current working directory.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>You may want to stick the jar file in a sub-directory so users don't accidentally click it. Your code should also check to make sure that the command line arguments have been supplied, and provide a good error message if the arguments are missing.</p>\n"},{"comments":[{"comment_id":69551286,"body":"<code>java.class.path</code> can be multivalued. <i>One</i> those values will certainly provide the directory or JAR file where the current class is located, but which one?"},{"comment_id":73929422,"body":"I confirm , I tried other solutions, but never get the jar filename. This works very simply ! thanks - +1"}],"answer_id":33473211,"body":"<p>For getting the path of running jar file I have studied the above solutions and tried all methods which exist some difference each other. If these code are running in Eclipse IDE they all should be able to find the path of the file including the indicated class and open or create an indicated file with the found path.</p>\n\n<p>But it is tricky, when run the runnable jar file directly or through the command line, it will be failed as the path of jar file gotten from the above methods will give an internal path in the jar file, that is it always gives a path as</p>\n\n<p>rsrc:project-name (maybe I should say that it is the package name of the main class file - the indicated class)</p>\n\n<p>I can not convert the rsrc:... path to an external path, that is when run the jar file outside the Eclipse IDE it can not get the path of jar file.</p>\n\n<p>The only possible way for getting the path of running jar file outside Eclipse IDE is </p>\n\n<pre><code>System.getProperty(\"java.class.path\")\n</code></pre>\n\n<p>this code line may return the living path (including the file name) of the running jar file (note that the return path is not the working directory), as the java document and some people said that it will return the paths of all class files in the same directory, but as my tests if in the same directory include many jar files, it only return the path of running jar (about the multiple paths issue indeed it happened in the Eclipse).</p>\n"},{"answer_id":34261049,"body":"<p>Something that is frustrating is that when you are developing in Eclipse <code>MyClass.class.getProtectionDomain().getCodeSource().getLocation()</code> returns the <code>/bin</code> directory which is great, but when you compile it to a jar, the path includes the <code>/myjarname.jar</code> part which gives you illegal file names. </p>\n\n<p>To have the code work both in the ide and once it is compiled to a jar, I use the following piece of code:</p>\n\n<pre><code>URL applicationRootPathURL = getClass().getProtectionDomain().getCodeSource().getLocation();\nFile applicationRootPath = new File(applicationRootPathURL.getPath());\nFile myFile;\nif(applicationRootPath.isDirectory()){\n    myFile = new File(applicationRootPath, \"filename\");\n}\nelse{\n    myFile = new File(applicationRootPath.getParentFile(), \"filename\");\n}\n</code></pre>\n"},{"comments":[{"comment_id":69551309,"body":"It can be a directory, if you&#39;re loading your classes from a filesystem instead of a JAR file, e.g. when debugging."}],"answer_id":37747707,"body":"<p>Other answers seem to point to the code source which is Jar file location which is not a directory.</p>\n\n<p>Use</p>\n\n<pre><code>return new File(MyClass.class.getProtectionDomain().getCodeSource().getLocation().toURI().getPath()).getParentFile();\n</code></pre>\n"},{"answer_id":37949237,"body":"<p>Not really sure about the others but in my case it didn't work with a \"Runnable jar\" and i got it working by fixing codes together from phchen2 answer and another from this link :<a href=\"https://stackoverflow.com/questions/320542/how-to-get-the-path-of-a-running-jar-file?lq=1\">How to get the path of a running JAR file?</a>\nThe code:</p>\n\n<pre><code>               String path=new java.io.File(Server.class.getProtectionDomain()\n                .getCodeSource()\n                .getLocation()\n                .getPath())\n          .getAbsolutePath();\n       path=path.substring(0, path.lastIndexOf(\".\"));\n       path=path+System.getProperty(\"java.class.path\");\n</code></pre>\n"},{"answer_id":39229561,"body":"<p>I had to mess around a lot before I finally found a working (and short) solution. <br>\nIt is possible that the <code>jarLocation</code> comes with a prefix like <code>file:\\</code> or <code>jar:file\\</code>, which can be removed by using <code>String#substring()</code>.</p>\n\n<pre><code>URL jarLocationUrl = MyClass.class.getProtectionDomain().getCodeSource().getLocation();\nString jarLocation = new File(jarLocationUrl.toString()).getParent();\n</code></pre>\n"},{"answer_id":44071072,"body":"<p><strong>Mention that it is checked only in <code>Windows</code> but i think it works perfect on other Operating Systems [<code>Linux,MacOs,Solaris</code>] :).</strong></p>\n\n<hr>\n\n<p>I had <strong>2</strong> <code>.jar</code> files in the same directory . I wanted from the one <code>.jar</code> file to start the other <code>.jar</code> file which is in the same directory.</p>\n\n<p>The problem is that when you start it from the <code>cmd</code> the current directory is <code>system32</code>.</p>\n\n<hr>\n\n<blockquote>\n  <p>Warnings!</p>\n</blockquote>\n\n<ul>\n<li>The below seems to work pretty well in all the test i have done even\nwith folder name <code>;][[;'57f2g34g87-8+9-09!2#@!$%^^&amp;()</code> or <code>()%&amp;$%^@#</code>\nit works well.</li>\n<li>I am using the <code>ProcessBuilder</code> with the below as following:</li>\n</ul>\n\n<p>🍂..</p>\n\n<pre><code>//The class from which i called this was the class `Main`\nString path = getBasePathForClass(Main.class);\nString applicationPath=  new File(path + \"application.jar\").getAbsolutePath();\n\n\nSystem.out.println(\"Directory Path is : \"+applicationPath);\n\n//Your know try catch here\n//Mention that sometimes it doesn't work for example with folder `;][[;'57f2g34g87-8+9-09!2#@!$%^^&amp;()` \nProcessBuilder builder = new ProcessBuilder(\"java\", \"-jar\", applicationPath);\nbuilder.redirectErrorStream(true);\nProcess process = builder.start();\n\n//...code\n</code></pre>\n\n<hr>\n\n<p>🍂<code>getBasePathForClass(Class&lt;?&gt; classs)</code>:</p>\n\n<pre><code>    /**\n     * Returns the absolute path of the current directory in which the given\n     * class\n     * file is.\n     * \n     * @param classs\n     * @return The absolute path of the current directory in which the class\n     *         file is.\n     * @author GOXR3PLUS[StackOverFlow user] + bachden [StackOverFlow user]\n     */\n    public static final String getBasePathForClass(Class&lt;?&gt; classs) {\n\n        // Local variables\n        File file;\n        String basePath = \"\";\n        boolean failed = false;\n\n        // Let's give a first try\n        try {\n            file = new File(classs.getProtectionDomain().getCodeSource().getLocation().toURI().getPath());\n\n            if (file.isFile() || file.getPath().endsWith(\".jar\") || file.getPath().endsWith(\".zip\")) {\n                basePath = file.getParent();\n            } else {\n                basePath = file.getPath();\n            }\n        } catch (URISyntaxException ex) {\n            failed = true;\n            Logger.getLogger(classs.getName()).log(Level.WARNING,\n                    \"Cannot firgue out base path for class with way (1): \", ex);\n        }\n\n        // The above failed?\n        if (failed) {\n            try {\n                file = new File(classs.getClassLoader().getResource(\"\").toURI().getPath());\n                basePath = file.getAbsolutePath();\n\n                // the below is for testing purposes...\n                // starts with File.separator?\n                // String l = local.replaceFirst(\"[\" + File.separator +\n                // \"/\\\\\\\\]\", \"\")\n            } catch (URISyntaxException ex) {\n                Logger.getLogger(classs.getName()).log(Level.WARNING,\n                        \"Cannot firgue out base path for class with way (2): \", ex);\n            }\n        }\n\n        // fix to run inside eclipse\n        if (basePath.endsWith(File.separator + \"lib\") || basePath.endsWith(File.separator + \"bin\")\n                || basePath.endsWith(\"bin\" + File.separator) || basePath.endsWith(\"lib\" + File.separator)) {\n            basePath = basePath.substring(0, basePath.length() - 4);\n        }\n        // fix to run inside netbeans\n        if (basePath.endsWith(File.separator + \"build\" + File.separator + \"classes\")) {\n            basePath = basePath.substring(0, basePath.length() - 14);\n        }\n        // end fix\n        if (!basePath.endsWith(File.separator)) {\n            basePath = basePath + File.separator;\n        }\n        return basePath;\n    }\n</code></pre>\n"},{"answer_id":46116016,"body":"<p>This code worked for me:</p>\n\n<pre><code>private static String getJarPath() throws IOException, URISyntaxException {\n    File f = new File(LicensingApp.class.getProtectionDomain().().getLocation().toURI());\n    String jarPath = f.getCanonicalPath().toString();\n    String jarDir = jarPath.substring( 0, jarPath.lastIndexOf( File.separator ));\n    return jarDir;\n  }\n</code></pre>\n"},{"answer_id":55279816,"body":"<p>Have tried several of the solutions up there but none yielded correct results for the (probably special) case that the runnable jar has been exported with \"Packaging external libraries\" in Eclipse. For some reason all solutions based on the ProtectionDomain do result in null in that case.</p>\n\n<p>From combining some solutions above I managed to achieve the following working code:</p>\n\n<pre><code>String surroundingJar = null;\n\n// gets the path to the jar file if it exists; or the \"bin\" directory if calling from Eclipse\nString jarDir = new File(ClassLoader.getSystemClassLoader().getResource(\".\").getPath()).getAbsolutePath();\n\n// gets the \"bin\" directory if calling from eclipse or the name of the .jar file alone (without its path)\nString jarFileFromSys = System.getProperty(\"java.class.path\").split(\";\")[0];\n\n// If both are equal that means it is running from an IDE like Eclipse\nif (jarFileFromSys.equals(jarDir))\n{\n    System.out.println(\"RUNNING FROM IDE!\");\n    // The path to the jar is the \"bin\" directory in that case because there is no actual .jar file.\n    surroundingJar = jarDir;\n}\nelse\n{\n    // Combining the path and the name of the .jar file to achieve the final result\n    surroundingJar = jarDir + jarFileFromSys.substring(1);\n}\n\nSystem.out.println(\"JAR File: \" + surroundingJar);\n</code></pre>\n"},{"comments":[{"comment_id":123831839,"body":"This solution does not work if you&#39;re calling on that jar using an absolute command like this: /home/program/java8/bin/java -jar /home/program/myjar.jar  It points to /home/ directory instead of jar directory in this case. I tested it"},{"comment_id":126282664,"body":"If I&#39;m not mistaken, this just returns the current working directory."}],"answer_id":56887852,"body":"<p>Try this:</p>\n\n<pre><code>String path = new File(\"\").getAbsolutePath();\n</code></pre>\n"},{"answer_id":58986478,"body":"<p>This code worked for me to identify if the program is being executed inside a JAR file or IDE:</p>\n\n<pre><code>private static boolean isRunningOverJar() {\n    try {\n        String pathJar = Application.class.getResource(Application.class.getSimpleName() + \".class\").getFile();\n\n        if (pathJar.toLowerCase().contains(\".jar\")) {\n            return true;\n        } else {\n            return false;\n        }\n    } catch (Exception e) {\n        return false;\n    }\n}\n</code></pre>\n\n<p>If I need to get the Windows full path of JAR file I am using this method:</p>\n\n<pre><code>    private static String getPathJar() {\n        try {\n            final URI jarUriPath =\n                    Application.class.getResource(Application.class.getSimpleName() + \".class\").toURI();\n            String jarStringPath = jarUriPath.toString().replace(\"jar:\", \"\");\n            String jarCleanPath  = Paths.get(new URI(jarStringPath)).toString();\n\n            if (jarCleanPath.toLowerCase().contains(\".jar\")) {\n                return jarCleanPath.substring(0, jarCleanPath.lastIndexOf(\".jar\") + 4);\n            } else {\n                return null;\n            }\n        } catch (Exception e) {\n            log.error(\"Error getting JAR path.\", e);\n            return null;\n        }\n    }\n</code></pre>\n\n<p>My complete code working with a Spring Boot application using <code>CommandLineRunner</code> implementation, to ensure that the application always be executed within of a console view (Double clicks by mistake in JAR file name), I am using the next code:</p>\n\n<pre><code>@SpringBootApplication\npublic class Application implements CommandLineRunner {\n    public static void main(String[] args) throws IOException {\n        Console console = System.console();\n\n        if (console == null &amp;&amp; !GraphicsEnvironment.isHeadless() &amp;&amp; isRunningOverJar()) {\n            Runtime.getRuntime().exec(new String[]{\"cmd\", \"/c\", \"start\", \"cmd\", \"/k\",\n                    \"java -jar \\\"\" + getPathJar() + \"\\\"\"});\n        } else {\n            SpringApplication.run(Application.class, args);\n        }\n    }\n\n    @Override\n    public void run(String... args) {\n        /*\n        Additional code here...\n        */\n    }\n\n    private static boolean isRunningOverJar() {\n        try {\n            String pathJar = Application.class.getResource(Application.class.getSimpleName() + \".class\").getFile();\n\n            if (pathJar.toLowerCase().contains(\".jar\")) {\n                return true;\n            } else {\n                return false;\n            }\n        } catch (Exception e) {\n            return false;\n        }\n    }\n\n    private static String getPathJar() {\n        try {\n            final URI jarUriPath =\n                    Application.class.getResource(Application.class.getSimpleName() + \".class\").toURI();\n            String jarStringPath = jarUriPath.toString().replace(\"jar:\", \"\");\n            String jarCleanPath  = Paths.get(new URI(jarStringPath)).toString();\n\n            if (jarCleanPath.toLowerCase().contains(\".jar\")) {\n                return jarCleanPath.substring(0, jarCleanPath.lastIndexOf(\".jar\") + 4);\n            } else {\n                return null;\n            }\n        } catch (Exception e) {\n            return null;\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"comment_id":126234436,"body":"Is this available only in java 1.12 onwards?"},{"comment_id":128081281,"body":"No, this will work for older versions as well."},{"comment_id":128678038,"body":"The current working directory is not always the same as the executed jar directory"},{"comment_id":128814206,"body":"<code>new File(&quot;.&quot;).getCanonicalPath()</code> Will always give you the path where the class (inside the jar) is being executed (called) from"},{"comment_id":133575502,"body":"The 1st option does not answer the question &quot;How to get the path of a running JAR file?&quot; but only to getting &quot;current working directory&quot;. It may or may not be the same."}],"answer_id":62979122,"body":"<p>If you are really looking for a simple way to get the folder in which your JAR is located you should use this implementation.\nSolutions like this are hard to find and many solutions are no longer supported, many others provide the path of the file instead of the actual directory. This is easier than other solutions you are going to find and works for Java version 1.12.</p>\n<pre><code>new File(&quot;.&quot;).getCanonicalPath()\n</code></pre>\n<p>This implementation assumes that the working directory (the one the user is standing when executing the jar) is the same as the executed JAR if this is not the case you can use this other one\nGathered from the other answers:</p>\n<pre><code>String localPath=new File(getClass().getProtectionDomain().getCodeSource().getLocation().toURI()).getParentFile().getPath()+&quot;\\\\&quot;; \n</code></pre>\n<p>Both will return a String with this format:</p>\n<pre><code>&quot;C:\\Users\\User\\Desktop\\Folder\\&quot;\n</code></pre>\n<p>In a simple and concise line.</p>\n"},{"comments":[{"comment_id":125631895,"body":"Confirmed. This solution works for Spring Boot."}],"answer_id":65349441,"body":"<p>The above methods didn't work for me in my Spring environment, since Spring shades the actual classes into a package called BOOT-INF, thus not the actual location of the running file. I found another way to retrieve the running file through the <code>Permissions</code> object which have been granted to the running file:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic static Path getEnclosingDirectory() {\n    return Paths.get(FileUtils.class.getProtectionDomain().getPermissions()\n            .elements().nextElement().getName()).getParent();\n}\n</code></pre>\n"},{"answer_id":67000570,"body":"<p>For something stupid simple, all you need is this one line:</p>\n<p>For Windows users, change &quot;pwd&quot; to &quot;cd&quot;</p>\n<pre><code>runCommand(&quot;pwd&quot;);\n</code></pre>\n<p>And just throw this method into the class:</p>\n<pre><code>public static String runCommand(String command) {\n    StringBuilder sb = new StringBuilder();\n    try {\n        ProcessBuilder pb = new ProcessBuilder(command);\n        final Process p = pb.start();\n        BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));\n        String line;\n        sb.append(br.read());\n        while ((line= br.readLine()) != null) sb.append(line).append(&quot;\\n&quot;);\n    }\n    catch (IOException e) {e.printStackTrace();}\n    return sb.toString();\n}\n</code></pre>\n"},{"answer_id":70051410,"body":"<p>For the jar file path:</p>\n<pre><code>String jarPath = new File(MyClass.class.getProtectionDomain().getCodeSource().getLocation()\n    .toURI()).getPath();\n</code></pre>\n<p>For getting the directory path of that jar file:</p>\n<pre><code>String dirPath = new File(MyClass.class.getProtectionDomain().getCodeSource().getLocation()\n                        .toURI()).getParent();\n</code></pre>\n<p>The results of the two lines above are like this:</p>\n<blockquote>\n<p>/home/user/MyPrograms/myapp/myjar.jar  (value of jarPath)</p>\n</blockquote>\n<blockquote>\n<p>/home/user/MyPrograms/myapp  (value of dirPath)</p>\n</blockquote>\n"}],"last_activity_date":1684771845,"question_id":320542,"body":"<p>My code runs inside a JAR file, say <strong>foo.jar</strong>, and I need to know, in the code, in which folder the running <strong>foo.jar</strong> is.</p>\n\n<p>So, if <strong>foo.jar</strong> is in <code>C:\\FOO\\</code>, I want to get that path no matter what my current working directory is.</p>\n"},{"comments":[{"comment_id":75518140,"body":"Its unlikely to be due to a background thread-  the entire point of a background thread is that it happens on another timeslice so other threads don&#39;t become unresponsive.  Unless you have insane amounts of locking between them, your problem is elsewhere.  I&#39;d profile your app instead and see where your app is spending time."}],"answers":[{"comments":[{"comment_id":75613106,"body":"Try adb commands: adb kill-server and adb start-server, more adb commands details look at <a href=\"https://developer.android.com/studio/command-line/adb.html?hl=ch-us\" rel=\"nofollow noreferrer\">this</a>"}],"answer_id":44254749,"body":"<p>You can use <code>DDMS</code> to monitor the <code>Threads</code> at runtime. Look at the <code>DDMS</code> <a href=\"https://developer.android.com/studio/profile/ddms.html#running\" rel=\"nofollow noreferrer\"> document </a>.</p>\n"},{"comments":[{"comment_id":75518177,"body":"There&#39;s profilers built into android studio, no need to use home rolled inaccurate solutions like logs of time."},{"comment_id":75518328,"body":"@GabeSechan Can you help me on how to use those profilers"},{"comment_id":75518407,"body":"@Ezio Way past my bedtime.  But start reading up on it at <a href=\"https://developer.android.com/studio/profile/traceview.html\" rel=\"nofollow noreferrer\">developer.android.com/studio/profile/traceview.html</a>   It basically will keep track of how much time you spend in every function of your app, how many times they&#39;re all called, how much time is spend in functions called by every function, etc.  Its a valuable tool.  It will degrade performance a bit more while running it, but for this purpose it shouldn&#39;t matter."}],"answer_id":44255040,"body":"<p>I'm not sure about how can you see threads but you can try following</p>\n\n<ul>\n<li>Enable Strict mode in developer setting, you will see screen flashing red on heavy operations.</li>\n<li>Add logs to your thread and print progress with time, by this you can know which method is taking time.</li>\n</ul>\n\n<p>More on strict mode here:\n<a href=\"https://developer.android.com/reference/android/os/StrictMode.html\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/os/StrictMode.html</a></p>\n"},{"answer_id":44255218,"body":"<p>You can use the build in tools to profile the app.</p>\n\n<p>See here : <a href=\"https://developer.android.com/studio/profile/traceview.html\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/profile/traceview.html</a></p>\n"},{"answer_id":76308057,"body":"<p>I'm not sure whether you can monitor the threads, but you may get the active Thread count of an app.</p>\n<pre><code>Log.d(&quot;ThreadCount : &quot;,&quot;&quot;+Thread.activeCount());\n</code></pre>\n"}],"last_activity_date":1684771653,"question_id":44254289,"body":"<p>I have an android application where I am performing some operations in background threads. For some reason my app becomes extremely slow and unresponsive after being used for few minutes. I am suspecting that it is because of some background thread, so I want to monitor the threads that my app is creating. However, I couldn't find a suitable tool where I can see and monitor those threads. Is there any way I monitor the background threads  at runtime.</p>\n"},{"comments":[{"comment_id":41268658,"body":"Use the Eclipse debugger.  Set a breakpoint and step through the code to see where behavior fails to meet your assumptions about what&#39;s happening."},{"comment_id":41268718,"body":"Possible <a href=\"http://stackoverflow.com/q/19871955/2587435\">duplicate</a>"},{"comment_id":41268769,"body":"Keep it at the same level as your source / bin directory and try."},{"comment_id":41270963,"body":"Any time you have an exception thrown, post the stacktrace.  Any time you have a problem that can be illustrated with a small example that can be compiled and run, post the example.  &quot;Tried all the suggestions&quot; and &quot;Nothing is working&quot; are not substitutes for giving explicit information on what happens and when."}],"answers":[{"answer_id":26300028,"body":"<p>Creating <code>File</code> with a relative path is always kind of risky. Either use an absolute path like /my/absolute/path or use a different method to get your file.</p>\n\n<p>Also, why not using this constructor : <code>Scanner(File source)</code></p>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#Scanner(java.io.File)\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#Scanner(java.io.File)</a></p>\n\n<p>Or better, use this one : <code>Scanner(InputStream source)</code></p>\n\n<p>And then, use getResourceAsStream to properly retrieve your file</p>\n\n<pre><code>InputStream is = getClass().getClassLoader().getResourceAsStream(\"PhoneRecords.txt\");\nScanner sc = new Scanner(is);\n</code></pre>\n"},{"answer_id":26300032,"body":"<p>Try to put your file here.</p>\n\n<pre><code>---&gt;bin\n---&gt;src\n---&gt;PhoneRecords.txt\n</code></pre>\n\n<p>or specify the location of the file. For instance, </p>\n\n<pre><code>String path = \"C:\\\\MyFiles\\\\PhoneRecords.txt\";\nFile inFile = new File(path);\n</code></pre>\n"},{"answer_id":26300224,"body":"<p>Did you enable the input in the eclipse console? Scanner caused me some problems when used from the eclipse console before..</p>\n\n<p><img src=\"https://i.stack.imgur.com/3wfUb.png\" alt=\"enter image description here\"></p>\n\n<p>Source: <a href=\"https://stackoverflow.com/a/22471175/441907\">https://stackoverflow.com/a/22471175/441907</a></p>\n"},{"answer_id":26300226,"body":"<p>If the files are put under src try loading from class path</p>\n\n<pre><code>Scanner scanner=new Scanner(YourClass.class.getResourceAsStream(\"/package/...pathtofile\");\n</code></pre>\n"}],"last_activity_date":1684771455,"question_id":26299842,"body":"<p>Okay so I scoured this site and a few others looking for the answer to this problem and tried all of the suggestions. Nothing is working and it keeps throwing the <code>File not found exception</code>.</p>\n\n<pre><code>File inFile = new File(\"PhoneRecords.txt\");\nString path = inFile.getAbsolutePath();\n try {\n    System.setIn(new FileInputStream(path));\n} catch (FileNotFoundException e) {\n    e.printStackTrace();\n}\nScanner sc = new Scanner(System.in);\n</code></pre>\n\n<p>After this it tries to use the Scanner in a method below.</p>\n\n<pre><code>public static PhoneCall readNextPhoneCall(Scanner sc){\n  return new PhoneCall (sc.nextDouble(), sc.nextInt());\n}\n</code></pre>\n\n<p>The text file is in the same directory that I am working in and I double made sure that I name it correctly in my code. Please Help.</p>\n"},{"comments":[{"comment_id":126042506,"body":"I have the same question. Did you find a solution? Also do you know <i>why</i> <code>&quot;nullable&quot;: true</code> hasn&#39;t been made the default for optional properties?"},{"comment_id":126049914,"body":"@Snackoverflow I haven&#39;t found anything built-in, so I&#39;ve been using the <a href=\"https://stackoverflow.com/a/69310599/1108305\"><code>OpenApiCustomizer</code></a> approach.  And I don&#39;t know why they made the decision to make things nullable by default."},{"comment_id":126062283,"body":"This is especially interesting for Kotlin, because there you have explicit nullable or non-nullable types. Turns out if you have a nullable property, then springdoc-openapi makes it optional (not required) but still not nullable. So according to the schema you can omit the property from JSON, but you may not have its value <code>null</code>. As of now, I am still not sure whether this is intended or a bug. Haven&#39;t really found any explanation online."}],"answers":[{"comments":[{"comment_id":126042459,"body":"Note that you should handle <code>ComposedSchema</code> types differently. For example, if your schema has an <code>allOf</code> attribute with an object inside, the properties of that nested object should also be processed. The above code does not do so and just skips them because their <code>getProperties()</code> will return <code>null</code>."},{"comment_id":126049949,"body":"@Snackoverflow That is likely true, and something I&#39;ll have to play around with when I get the opportunity.  My code doesn&#39;t use <code>ComposedSchema</code> currently, so I haven&#39;t run into this myself."}],"answer_id":69310599,"body":"<p>One solution is to create a springdoc-openapi <a href=\"https://javadoc.io/static/org.springdoc/springdoc-openapi-common/1.5.10/org/springdoc/core/customizers/OpenApiCustomiser.html\" rel=\"nofollow noreferrer\"><code>OpenApiCustomiser</code></a> Spring bean which sets all properties to <code>nullable</code> unless they are in the list of <code>required</code> properties.  This approach benefits from the built-in springdoc-openapi support for <code>@NotNull</code> and other such annotations, since the <code>required</code> property will have been calculated in the standard manner based on the presence of such properties.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import io.swagger.v3.oas.models.OpenAPI;\nimport io.swagger.v3.oas.models.media.Schema;\nimport org.springdoc.core.customizers.OpenApiCustomiser;\nimport org.springframework.stereotype.Component;\nimport java.util.Map;\n\n@Component\npublic class NullableIfNotRequiredOpenApiCustomizer implements OpenApiCustomiser {\n    @Override\n    @SuppressWarnings({&quot;rawtypes&quot;, &quot;unchecked&quot;})\n    public void customise(OpenAPI openApi) {\n        for (Schema schema : openApi.getComponents().getSchemas().values()) {\n            if (schema.getProperties() == null) {\n                continue;\n            }\n\n            ((Map&lt;String, Schema&gt;) schema.getProperties()).forEach((String name, Schema value) -&gt; {\n                if (schema.getRequired() == null || !schema.getRequired().contains(name)) {\n                    value.setNullable(true);\n                }\n            });\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"comment_id":134562047,"body":"Yep, that&#39;s something I mentioned in my question, and something I didn&#39;t want to have to do for every single property: &quot;It is trivial to manually mark any individual property as nullable: just add <code>@Schema(nullable = true)</code> to the field or accessor. However, in a large model with multiple properties, I would rather this be automatically determined in the same manner as the <code>required</code> property.&quot;"},{"comment_id":134562236,"body":"Makes sense. In that case, I would consider creating an own custom class annotation that will apply the nullable part to all fields, if they don&#39;t have a <code>@Schema</code> annotation already. Not sure how much work that would be though."}],"answer_id":76305114,"body":"<p>You could directly annotate your attribute with <code>@Schema</code>. The key here is that both <code>nullable</code> and <code>requiredMode</code> will have to bet set.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import io.swagger.v3.oas.annotations.media.Schema;\nimport javax.validation.constraints.NotNull;\n\npublic class RequiredExample {\n    @NotNull\n    private String key;\n\n    @Schema(nullable = true, requiredMode = Schema.RequiredMode.REQUIRED)\n    private String value;\n\n    public String getKey() { return key; }\n    public void setKey(String key) { this.key = key; }\n    public String getValue() { return value; }\n    public void setValue(String value) { this.value = value; }\n}\n</code></pre>\n<p>For some context, <a href=\"https://github.com/anymaniax/orval/issues/862\" rel=\"nofollow noreferrer\">this</a> was my exact use case.</p>\n"}],"last_activity_date":1684771448,"question_id":69310598,"body":"<p>The <a href=\"https://springdoc.org\" rel=\"nofollow noreferrer\">springdoc-openapi</a> library automatically marks certain properties as <a href=\"https://swagger.io/docs/specification/data-models/data-types/#required\" rel=\"nofollow noreferrer\">required</a> in the generated OpenAPI documentation.  For instance, properties annotated as <code>@NotNull</code> will be included in the list of required properties in the generated YAML file.</p>\n<p>One thing the library does not do is mark optional properties as <a href=\"https://swagger.io/docs/specification/data-models/data-types/#null\" rel=\"nofollow noreferrer\"><code>nullable: true</code></a>.  However, by default a Spring Boot application will accept <code>null</code> in requests and return <code>null</code> in responses for optional properties.  This means that there is a discrepancy between the OpenAPI documentation and the behavior of the endpoint.</p>\n<p>It is trivial to manually mark any individual property as nullable: just add <code>@Schema(nullable = true)</code> to the field or accessor.  However, in a large model with multiple properties, I would rather this be automatically determined in the same manner as the <code>required</code> property.  Namely, if the property is not required, I would want it to be <code>nullable</code>, and vice versa.</p>\n<p>How can I get my optional properties marked as <code>nullable: true</code> in OpenAPI documentation generated by springdoc-openapi?</p>\n<h2>Example</h2>\n<pre class=\"lang-java prettyprint-override\"><code>import io.swagger.v3.oas.annotations.media.Schema;\nimport javax.validation.constraints.NotNull;\n\npublic class RequiredExample {\n    @NotNull\n    private String key;\n\n    private String value;\n\n    public String getKey() { return key; }\n    public void setKey(String key) { this.key = key; }\n    public String getValue() { return value; }\n    public void setValue(String value) { this.value = value; }\n}\n</code></pre>\n<h2>Generated OpenAPI documentation:</h2>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;components&quot;: {\n  &quot;schemas&quot;: {\n    &quot;RequiredExample&quot;: {\n      &quot;required&quot;: [\n        &quot;key&quot;\n      ],\n      &quot;type&quot;: &quot;object&quot;,\n      &quot;properties&quot;: {\n        &quot;key&quot;: {\n          &quot;type&quot;: &quot;string&quot;\n        },\n        &quot;value&quot;: {\n          &quot;type&quot;: &quot;string&quot;\n        }\n      }\n    }\n  }\n}\n</code></pre>\n<h2>Desired OpenAPI documentation:</h2>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;components&quot;: {\n  &quot;schemas&quot;: {\n    &quot;RequiredExample&quot;: {\n      &quot;required&quot;: [\n        &quot;key&quot;\n      ],\n      &quot;type&quot;: &quot;object&quot;,\n      &quot;properties&quot;: {\n        &quot;key&quot;: {\n          &quot;type&quot;: &quot;string&quot;\n        },\n        &quot;value&quot;: {\n          &quot;type&quot;: &quot;string&quot;\n          &quot;nullable&quot;: true\n        }\n      }\n    }\n  }\n}\n</code></pre>\n"},{"last_activity_date":1684771234,"question_id":76308000,"body":"<p>What is the best API Geolocation to use in web apps and mobile apps?</p>\n<p>except for Google map Geolocation API because one of my team doesn't like the idea to use an google map geolocation api. i need some answer and i preferred some free tools that i can use.</p>\n"},{"answers":[{"comments":[{"comment_id":134570178,"body":"Thanks for the word of advice and the workaround hack, which we can use until we restructured to use different entities."}],"answer_id":76307970,"body":"<p>Don't use the same entity for multiple Spring Data modules. As you notice, this is an accident waiting to happen.</p>\n<p>You could implement a <code>BeforeConvertCallback</code> (see the <a href=\"https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#elasticsearch.entity-callbacks\" rel=\"nofollow noreferrer\">reference documentation</a>) and set the <code>myDate</code> property to null, so it won't be sent to Elasticsearch.</p>\n"}],"last_activity_date":1684771024,"question_id":76307510,"body":"<p>Using spring-data(-elasticsearch), I want to persist a property to a PSQL DB but not to Elasticsearch, i.e. the opposite to this question: <a href=\"https://stackoverflow.com/questions/71843478/spring-data-how-to-ignore-field-for-relational-database-but-not-in-elasticsearc\">Spring data: How to ignore field for relational database but not in elasticsearch?</a></p>\n<p>In other words:</p>\n<ul>\n<li>when inserting this entity into ES, ignore <code>myDate</code></li>\n<li>when inserting this entity into a DB, persist <code>myDate</code></li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(&quot;example&quot;)\n@Document(indexName = &quot;example&quot;)\npublic class Example implements Serializable {\n  \n  @Column(name = &quot;my_date&quot;)\n  @xyz\n  private Instant myDate;\n\n}\n</code></pre>\n<p>What should take the place of <code>@xyz</code> ? Is this possible at all?</p>\n<ul>\n<li><code>@org.springframework.data.annotation.Transient</code> excludes the property from both PSQL and ES</li>\n<li><code>@JsonIgnore</code> does nothing</li>\n</ul>\n"},{"comments":[{"comment_id":97891218,"body":"Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> (you get a badge!), have a look around, and read through the <a href=\"https://stackoverflow.com/help\">help center</a>, in particular <a href=\"/help/how-to-ask\"><i>How do I ask a good question?</i></a>, <a href=\"/help/dont-ask\"><i>What types of questions should I avoid asking?</i></a>, and <a href=\"/help/on-topic\"><i>What topics can I ask about here?</i></a> This question is <b>far</b> to broad and open-ended for SO&#39;s Q&amp;A format."},{"comment_id":97891276,"body":"Hi @T.J.Crowder. I can re-format the question if its needed. But I believe I am quite specific in my question. I am asking how can I refactor the above code by using layered architecture. If it is not possible, that&#39;s fine but if in case it is, I would like to know how."},{"comment_id":97891413,"body":"The format of the question isn&#39;t the problem, the content of the question is. There are hundreds of different possible equally-valid answers. The Node.js ecosystem is rich and varied, there&#39;s no one way you do this. Please do see the links above, in particular <a href=\"/help/dont-ask\">this one</a>. It&#39;s not that it&#39;s not a perfectly reasonable question to ask, it&#39;s just not suited to the format of <i>this</i> site."},{"comment_id":97891722,"body":"Although I&#39;d personally love to see some discussions on this topic, this question is indeed quite broad, that could need a series of blogs to properly answer. Paradigm introduce by framework like spring boot is more or less language agnostic. You might as well ask, how is spring boot designed so to make such layered architecture possible, in java, without even mentioning js. Knowing that answer, I could probably write a similar framework from scratch in js then."},{"comment_id":97891853,"body":"@hackape makes sense. But in that case, how do you handle large NodeJS projects ? Or NodeJs not used at the same scale as that of Java ?"},{"comment_id":97891895,"body":"Not like it&#39;s a bad question through. @TJCrowder Just curious, where do you suggest to be a proper place to raise a question like this one?"},{"comment_id":97891913,"body":"similar question is discussed to some extent here <a href=\"https://stackoverflow.com/questions/5178334/folder-structure-for-a-node-js-project\" title=\"folder structure for a node js project\">stackoverflow.com/questions/5178334/&hellip;</a>"},{"comment_id":97892120,"body":"Hi @naga-elixir-jar, This is more of code organization rather than logic separation. The top comment suggests we move our ORM models to a separate folder and express endpoints to controller. But the original problem still persists. The Business logic to handle the DB call is still being performed in the controller."},{"comment_id":97892154,"body":"Hmm, I&#39;m not the best guy to answer your question. Not that experienced in backend js, but I&#39;ll try. Js community embrace things that&#39;s light-weighted. We got runtime that has native support for first class function, event loop and such. This way we tend to naturally seek solution in patterns like pipeline chaining, observable stream, pub/sub. We too have separation of concern, but just not like java style."},{"comment_id":97892268,"body":"Take express.js app for example. You can have multiple layers of middlewares handling one request. You can delegate to external service in middleware. You could say that our style is more functional-ish, as opposed to object oriented."},{"comment_id":97892377,"body":"@hackape . I made myself familiar with those patterns but somehow I still can&#39;t understand how Node handles code re-use. For ex- in Java, Say I have a service class which returns Users whose status is True. And in one controller class, I will be returning that. Now, if need arises to include another controller class that needs to return users whose status is True but only limit the returned values to top 5, then that controller ca re-use the existing service. I don&#39;t know how this can be done in Node though !! Only way is to create a function which can be referenced by multiple endpoints."},{"comment_id":97892542,"body":"Found similar discussion on SO - <a href=\"https://stackoverflow.com/questions/41875617/building-enterprise-app-with-node-express\" title=\"building enterprise app with node express\">stackoverflow.com/questions/41875617/&hellip;</a>"},{"comment_id":97892558,"body":"^ you know what, this is a concrete question to ask. Why not rephrase your question and add some java code example, then we discuss what&#39;s the mainstream js way to tackle the code re-use problem."},{"comment_id":97893011,"body":"@hackape Edited. Please take a look."},{"comment_id":97893604,"body":"&quot;<i>Only way is to create a function which can be referenced by multiple endpoints.</i>&quot; - yes, that&#39;s precisely what you would do. (When need arises, otherwise YAGNI). You can put such functions in their own modules, files, or even write them as classes if you prefer that. I don&#39;t understand why you think this is not sufficient or scalable, or why you don&#39;t consider it to separate concerns."},{"comment_id":97903273,"body":"@Bergi The reason is simple. Either I will have all or none. I do not want to hand-pick functions for pieces of logic that I feel could be re-used in the future. Either that should be the norm i.e write the business logic in functions and call them from the controllers or we do not have them at all and continue with the existing model. Selecting pieces of code here and there and wrapping them into functions does not actually seem very nice. There has to be a standard way to do this."},{"comment_id":97904116,"body":"@BouhayanDev one of the thing that throw me away in java is, you&#39;re <i>forced</i> to create a class before using a function. I don&#39;t get the point why <i>grouping</i> functions within class suddenly make it more reusable. I&#39;m happy with scattered functions loosely grouped by well-named files, aka modules in js. Don&#39;t take me wrong, it&#39;s just I genuinely don&#39;t see the difference. What&#39;s the fundamental upside of using a class as a &quot;foldler&quot; against modules."},{"comment_id":97904155,"body":"However I do see upside of this function-all-over-the-place approach: I get to compose/composite them freely w/o worrying about their owning class. To me that seems much more reusable."},{"comment_id":97904162,"body":"@hackape It just derives from the OOPS concept where the reasoning goes something like this - functions are analogous to behaviors whereas classes are analogous to real-life entities (ex TV, projector etc). Now, does it make sense to allow functionality without defining the container/owner of the functionality ? It doesn&#39;t. Hence this bundling of functions in class. However, I will agree with you, functionality wise there does not seem to be an issue whether I use module/class to hold my functions"},{"comment_id":97904413,"body":"@BoudhayanDev my day job is authoring large scale web app, like WebIDE. I also find it more natural in many scenarios to use class, esp when exposing APIs to other parties. This upside roots in 2 reasons, a) state persistency, b) classes are indexed/symbolised/searchable in IDE, while files are not."},{"comment_id":97904493,"body":"I think you are feeling conceptual discomfort facing multi-paradigm goodness in js land. Java does have some burden going functional programming, but not in js. FP or OOP, I just go with whichever fits, depending on use case."},{"comment_id":97904848,"body":"Yes that is the case here. i was thinking of replicating an existing Spring application using Node. But seems like Node was coupling all the layers into one single file. But I&#39;ll try destructuring it."},{"comment_id":97909915,"body":"@BoudhayanDev &quot;<i>Either I will have all or none.</i>&quot; - well if you want, you can of course always put everything in separate functions. It&#39;s just a convention, and you are encouraged to do what you feel comfortable with. The advantage of a loose style (instead of being forced by a framework to follow a particular model) is that it scales much better from simple and inlined to complex and separated. You only use what you need."}],"answers":[{"comments":[{"comment_id":97903837,"body":"This would definitely work. But yes, I&#39;ll agree with you here that using classes to structure code in Node seems an ugly version of Java :p What I would like to know, is this really how large projects in Node are handled ? Or am I wrong in assuming the importance of layered architecture. Also, by &#39;it doesn&#39;t scale&#39; in my earlier comment I meant that, for me to separate out the logic from controller, I will need to write all that logic in a service class/function. But this abstraction needs to be done for all cases where there is a business logic. We can&#39;t cherry-pick function as we want"},{"comment_id":97903880,"body":"Also, what are your thoughts regarding the DB related ops ? Like if I have to persist/fetch something from DB, I will invoke the sql client connector and execute the query in NodeJs. This piece of logic can go directly in the service class. Is there a way to abstract this as well ? So, I am assuming to mock the repository behavior, we can create another module that basically has all the CRUD operations defined for a particular Entity in the form of functions. And these functions are then invoked in service layer. Then there would be clear separation of - Controller -&gt; Service -&gt; Repo ?"},{"comment_id":97903923,"body":"Lastly, why don&#39;t NodeJs tutorials/resources talk about this ? Is it  because Node isn&#39;t used for large scale projects where such problems would be encountered or there is an alternative strategy to handle such problems ?"},{"comment_id":97904619,"body":"@BoudhayanDev 1. Hopefully answered in the comments under the question, don&#39;t see why cherry-pick fn unacceptable, maybe you just want to pass a bunch of related functions all at once, in that case you can wrap them in a plain object."},{"comment_id":97904655,"body":"@BoudhayanDev 2. I personally agree w/ your &quot;assumption&quot;, but again, im more a frontend guy, not best guy to answer."},{"comment_id":97904749,"body":"@BoudhayanDev 3. 2 reasons, 1st maybe they did talk about these, like in the other SO post you found, but you just don&#39;t recognize cus them looks unlike spring boot. 2nd such &quot;rigid&quot; and commonly agreed approach doesn&#39;t exist in js, in java this is prominent largely because spring boot is so dominant, and plus it&#39;s battery included. Express.js is dominated but no battery included, so everyone brings their own battery. Because the ease of multi-paradigm in js. People tend to use whatever solves their problem. Spring boot-ish setup for small project is simple overkill."},{"comment_id":97904833,"body":"And btw you&#39;re wrong about nodejs not for large-scale. taobao.com (Chinese amazon) use nodejs extensively. Imagine their PV and complexity."},{"comment_id":97904934,"body":"Like I said, I do not have much experience in Node so cannot say whether it is the right tool for big projects but having read your answers I agree that Node/Express has its own way to handle things. This reminds of another framework that I tried out couple of years back - called Flask (in Python). This pattern of not enforcing strict responsibilities to classes/functions seems to be common in all dynamically typed languages. I guess I&#39;ll just adapt to the Node way of doing things rather than trying to complicate it by following Java&#39;s code structuring."},{"comment_id":97905050,"body":"@Boudhayan Dev yeah sure. It&#39;s always good to try out new stuff, broadens your horizon."},{"comment_id":98166033,"body":"Yes, just do it nodejs way. By interpolating another layer of complexity with the node apps to follow some other architectural principle is not justified imho.  You can ofc abstract out per-Entity service layer classes, but due to what dynamic nature of language offers you, and what the driver you are using for DB is, you can also get fair amount of metadata for generating these classes.  You should take a look at knex.js and see what that can do for you ;)"}],"answer_id":55598866,"body":"<p>UserService.js</p>\n\n<pre><code>import { userDetailRepository } from '../models/user';\n\nclass UserService {\n    getUserDetail (status) {\n        const userDetail  = UserDetailRepository.findUserDetailByStatus(status);\n        return userDetail;\n    }\n}\n\nexport const userService = new UserService();\n</code></pre>\n\n<p>UserController.js</p>\n\n<pre><code>import { userService } from '../services/user';\n\n@RouterAdapter\nclass UserController {\n  @GetMapping(\"/getUserDetails\")\n  getUserDetail() {\n    return userService.getUserDetail(true);\n  }\n  @GetMapping(\"/getUserDetailsTop10\")\n  getUserDetailsTop10() {\n    return userService.getUserDetail(true).slice(10);\n  }\n}\n\nexport const userController = new UserController();\n</code></pre>\n\n<p>app.js</p>\n\n<pre><code>import * as express from 'express';\nimport { userController } from './controllers/user';\n\nconst app = express();\napp.set('view engine','hbs');\n\napp.use(userController);\n\napp.listen(3000, () =&gt; {\n    console.log(\"Started server on port : 3000\");\n});\n</code></pre>\n\n<p>I intentionally \"warp\" my js code to match with java style so perhaps you feel at home. Personally I don't write js this way, I prefer using function way more than class.</p>\n\n<p>I did not include the implementation of two decorators (<code>@RouterAdapter, @GetMapping</code>) I used, that's a detail not related to the discussion. I can assure you this is doable in js. The only thing missing is that js doesn't have runtime method overload, so I have to name 2 diff controller methods.</p>\n\n<p>The point I'm making here is that design patterns are mostly language agnostic. If you're familiar with the lang, you can always find a way to handle separation of concern well.</p>\n\n<p>Now I intentionally use class in above example, but a function acting as a UserService doesn't make it less reusable. I don't see why you think \"it doesn't scale\".</p>\n"},{"comments":[{"comment_id":97903977,"body":"Hi. This approach would work. At least we have separated out the BL from controller. But what would you suggest to further split out the service module ? So, in my opinion it is always better to keep the DB related queries in a separate module/class. For ex - getUsers, saveUsers, getUserByID etc are all DB (ORM or otherwise) queries. So, if I am separating this out, does it make sense to introduce another module to abstract these queries ? Because I am not sure if using modules is the right way to do it mainly because I am new to JS. But I would love to know your thoughts."},{"comment_id":98165835,"body":"It&#39;s not particularly tied to modules the thing that you are trying to achieve. It&#39;s related to your architectural decisions.  In my example, I have put <code>await db.find(&#39;users&#39;, {...})</code> in comment, but haven&#39;t said where it comes from.  Certainly at the top of your module, you would have to <code>require(&#39;.&#47;db&#39;)</code>, and in db.js module, implement your logic against database. Would it be implementing ORM or just using driver directly, it&#39;s up to you. But you would have to expose something out for BL. Hope it got that cleared out. Feel free to ask more."}],"answer_id":55599266,"body":"<p>An idea:</p>\n\n<pre><code>const express = require('express');\n\nconst app = express();\nconst { userDetails } = require('./usersBusinessLogic.js')\napp.set('view engine','hbs');\n\napp.get('/getUserDetails', async (req, res) =&gt;{\n  const limit = parseInt(req.query.limit || '0')\n  if (IsNaN(limit)) {\n    res.status(400)\n    return res.end('limit expected to be a number')\n  }\n  const detailsResponse = await userDetails({ limit })\n  res.send();\n});\n</code></pre>\n\n<p>And then you write your logic as <code>function userDetails({ limit, ...rest } = { limit: 0 })</code>.</p>\n\n<p>In another file i.e. <code>usersBusinessLogic.js</code>:</p>\n\n<pre><code>async function userDetails({ limit, ...restOfTheOptions } = { limit: 0 }) {\n  console.log({ limit, restOfTheOptions }) // TODO logic here.\n  // const result = await db.find('users', {...})\n  // return serialize(result)\n}\n\n// function serialize(result) {\n//  return JSON.stringify(result)\n// }\n\nmodule.exports = {\n  userDetails\n}\n</code></pre>\n\n<p>After which you can call <code>GET /userDetails</code> or <code>GET /userDetails?limit=10</code>.</p>\n\n<p>Let me know what do you think.</p>\n"},{"comments":[{"comment_id":97903758,"body":"Hi @Ian Segers , totally agree with you. I could go ahead and abstract the business logic in a separate module and then call from the controllers and that would work. But I would love to see NodeJs tutorials actually enforcing this. However, I am not sure how would I separate out the DB queries from the separate module (service functions). I would love to see a well structured NodeJS project that follows these coding standard."}],"answer_id":55601503,"body":"<p>Not really an answer... but some thoughts, as I come from C# and started as a NodeJs developer 3 years ago.</p>\n\n<p><strong>Dependency Injection</strong></p>\n\n<p>This is (sadly) rarely used in many NodeJs projects that I see. There are some npm modules that provide this feature, but none of them have convinced me with a proper approach and API. Dependency Injection is still perfectly possible, only, a bit uglier because of some boilerplate code you have to write. So sadly no easy <code>@autowire</code> approaches. So yes you can do Dependency Injection like with Spring, but not as convenient. But let my opinion not stop you from researching Dependency Injection libraries for node.</p>\n\n<p><strong>Architecture</strong></p>\n\n<p>You can still use the concepts of DTOs, Repositories, Services and Controllers. Only for some (odd) reason, the majority of tutorials and guides out there forget about common sense architecture and just throw everything within a single controller. Don't let them seduce you in forgetting about the concepts you learned in Java. Not that OOP and Java doesn't have flaws, but there is a difference in \"writing JavaScript style code\" and \"let's forget about proper architecture all together\".</p>\n\n<p>Do note that you might see some more \"functional programming\" patterns rise in the NodeJs community, which is not bad (but neither is OOP).</p>\n\n<blockquote>\n  <p>How to structure large projects having multiple endpoints and DB\n  transactions.</p>\n</blockquote>\n\n<p>Ignore the bad examples you see out there, just follow your gut feeling from your Java experience how to structure your code, with the right layers, responsibilities and Design Patterns. Only keep in mind that you don't have interfaces and there is no easy alternative to that. So you'll have to learn to work your way around that, but you can still write elegant code without them.</p>\n\n<p><strong>Middleware</strong></p>\n\n<p>Middleware is a common concept for NodeJs applications, they are similary-ish to the proxy/aspect oriented programming style. You might find example projects with excessive amount of middleware, don't let yourself be tempted by that either. Middleware is good for auth/serialisation/headers/security but not for business logic. I've seen middleware hell and middleware driven development, it ain't pretty.</p>\n\n<p><strong>Repository</strong></p>\n\n<p>A lot of people use directly the MongoDb/Mongoose/SQL client without using the adapter pattern like Repository, leaking MongoDb queries all over their solution.</p>\n\n<p>My advice for you would be, just use the same structure and approach you are familiar with, but with the tools that JavaScript gives you. I genuinely love JavaScript, but it makes me cringe when I look at the lack of design and architecture that I see in the mainstream resources, sure small projects and PoC's don't need extensive design, but often when project grow, they don't clean up. How you structure a project should be agnostic to the language and framework you are writing in.</p>\n\n<p>Happy coding 😄</p>\n"},{"answer_id":76307925,"body":"<p><strong>&lt;TL;DR&gt;</strong>\nYou can do it with <a href=\"https://www.npmjs.com/package/express-beans\" rel=\"nofollow noreferrer\">express-beans</a>.</p>\n<p>You can generate a project with <code>npm create express-beans-server</code> and try by yourself.\n<strong>&lt;/TL;DR&gt;</strong></p>\n<p>I know, it's an old question but it is worth to respond anyway because I was used to SpringBoot and then I wrote a lot of microservices in express.js. Express is a very well designed framework because it is simple and performant but if you have to write multiple endpoints and logic can be a real mess to organize your code. Fortunately in the near future decorators will be officially part of ECMAScript standard and I wrote a simple library to wrap up an express app and use decorators like <code>@Bean</code> to declare a Singleton just like SpringBoot.</p>\n<p>Just write an ExampleRouter.ts (it is typescript but it can be used also in js files):</p>\n<pre><code>import { Request, Response } from 'express';\nimport { InjectBean, Route, RouterBean } from 'express-beans';\nimport ExampleService from '../services/ExampleService';\n\n@RouterBean('/example')\nexport default class ExampleRouter {\n  @InjectBean(ExampleService)\n  private exampleService!: ExampleService;\n\n  @Route('GET', '/hello')\n  getHello(_req: Request, res: Response) {\n    res.end(this.exampleService.example());\n  }\n}\n</code></pre>\n<p>Then an ExampleService.ts as follows:</p>\n<pre><code>import { Bean } from 'express-beans';\n\n@Bean\nexport default class ExampleService {\n  private msg: string;\n\n  constructor() {\n    this.msg = 'hello world!';\n  }\n\n  example() {\n    return this.msg;\n  }\n}\n</code></pre>\n<p>et voilà!</p>\n<p>All information and documentation (and code) is available on <a href=\"https://github.com/spaghiajoeojo/express-beans\" rel=\"nofollow noreferrer\">GitHub</a> with MIT license</p>\n"}],"last_activity_date":1684770720,"question_id":55597337,"body":"<p>I have been trying to learn NodeJS for quite some time now. All the books and tutorials seems to follow similar pattern of  structuring their code. Example -</p>\n\n<pre><code>const express = require('express');\n\nconst app = express();\napp.set('view engine','hbs');\n\napp.get('/', (req, res) =&gt;{\n    res.render('index');\n});\n\napp.get('/getName', (req, res) =&gt;{\n    // Mock DB call to fetch Name\n    res.render('displayName');\n});\n\n\napp.listen(3000, () =&gt; {\n    console.log(\"Started server on port : 3000\");\n});\n</code></pre>\n\n<p>As you can see above, the /getName controller is performing DB call as well as returning the view. So the business logic as well as the CRUD operation is being done at the same place.</p>\n\n<p>I come from the world of <code>JAVA</code> and there we do it slightly differently. For example, a <code>Spring Boot</code> application would contain the following structure -</p>\n\n<ul>\n<li>DTO</li>\n<li>Repository</li>\n<li>Service</li>\n<li>Controller</li>\n</ul>\n\n<p>So, <code>controller</code> classes are the actual endpoints which do not perform any business logic but call the underlying <code>service</code> class to handle all that. The <code>service</code> classes implement the business logic and persist/fetch data required for it with the help of the <code>repository</code> classes. The repository on the other hand handles the <code>CRUD</code> operations.</p>\n\n<p>This seemed like a sane way to develop software. Given that each class has their defined roles, it becomes really easy to handle any change.</p>\n\n<p>I understand the <code>NodeJs</code> is a dynamic but -</p>\n\n<p><strong>1. Is there a way to separate out the functionality like we do in <code>Spring</code> ? If not,</strong></p>\n\n<p><strong>2. How to structure large projects having multiple endpoints and DB transactions.</strong></p>\n\n<p>Regards</p>\n\n<hr>\n\n<p><strong>EDIT -</strong></p>\n\n<p>Consider the following scenario - </p>\n\n<p><em>I have a requirement, where I need to fetch a list of users from the database whose status is True ( assume status is a boolean field in the model ).</em></p>\n\n<p>In Java -</p>\n\n<pre><code>@Service\npublic class UserService {\n\n    @Autowired\n    UserDetailRepository userDetailRepository;\n\n    @Override\n    public UserDetail getUserDetail (boolean status) {\n        UserDetail userDetail  = UserDetailRepository .findUserDetailByStatus(status);\n        return userDetail  ;\n    }\n</code></pre>\n\n<p>Controller.java -</p>\n\n<pre><code>@GetMapping(\"/getUserDetails\")\n        public ArrayList&lt;UserDetail&gt; getUserDetail(){\n\n        return UserService.getUserDetail(true);\n}\n</code></pre>\n\n<p><em>Now, if the requirement changes and there needs to be a new endpoint that returns only top 10 user details whose status is true. In that case, we can add a new controller and just limit the returned results to 10. We can make use of the same business logic/ service class.</em></p>\n\n<p>Controller.java</p>\n\n<pre><code>@GetMapping(\"/getUserDetailsTop10\")\n            public ArrayList&lt;UserDetail&gt; getUserDetail(){\n\n            List&lt;UserDetails&gt; users = UserService.getUserDetail(true);\n            // Filter the list to send top 10\n            // return users .\n    }\n</code></pre>\n\n<p>If I have to implement the same use case in NodeJS, I'll have to write the business logic to fetch the user twice -</p>\n\n<pre><code>const express = require('express');\n\nconst app = express();\napp.set('view engine','hbs');\n\napp.get('/getUserDetails', (req, res) =&gt;{\n    // Call DB and get users whose status is True\n    res.send(userdetails);\n});\n\napp.get('/getUserDetailsTop10', (req, res) =&gt;{\n    // Call DB and get users whose status is True\n    // Filter the returned results and limit the result to 10 values only\n    res.send(userdetails);\n});\n\n\napp.listen(3000, () =&gt; {\n    console.log(\"Started server on port : 3000\");\n});\n</code></pre>\n\n<p>At best, I can abstract away this logic into a function, that will return a list of users with status True but then again this approach is not very scalable. There has to be a complete separation of Business logic from controller.</p>\n"},{"answers":[{"answer_id":76307924,"body":"<p>Create a mock of <code>SomeService</code>, inject it into <code>SomeController</code> (via constructor or setter).</p>\n<p>Set up the mock behaviour with when/thenReturns. Eg:</p>\n<pre><code>when(someServiceMock.someMethod()).thenReturn(&quot;foo bar&quot;)\n</code></pre>\n<p>Call <code>SomeController.someMethod()</code> and check the result.</p>\n<p>If you are Spring then you can take this further by using <code>WebMvcTest</code> with an <code>@Autowired MockMvc</code></p>\n<pre><code>@WebMvcTest(controllers = SomeController.class)\n</code></pre>\n<p>To call the actual path and http method, headers, etc.</p>\n<pre><code>mockMvc.perform(get(&quot;...&quot;).andExpect(status().isOk());\n</code></pre>\n"}],"last_activity_date":1684770704,"question_id":76307702,"body":"<p>I want to learn how to unit test API gateway endpoints, or just in general, before deploying the API.\nFor example, how could I test something like:</p>\n<pre><code>public class someController {\n\n     private SomeService someService;\n\n     @GET\n     @Path(&quot;...&quot;)\n     public String someMethod(){\n        return someService.someMethod();\n     }\n\n}\n</code></pre>\n<p>someSerivce:</p>\n<pre><code>public class SomeService{\n   public String someMethod(){\n   //make http request to api gateway\n   return json string\n   }\n\n}\n</code></pre>\n<p>How would I test &quot;someService&quot; class. I assume the &quot;someController&quot; class would just ensure &quot;someMethod&quot; is being called by making use of Mockito <code>verify(someService).someMethod();</code></p>\n"},{"comments":[{"comment_id":134561919,"body":"I think exe4j can bundle your jar and a JRE, I haven&#39;t used it for a will though"},{"comment_id":134561969,"body":"No need for <a href=\"https://technojeeves.com/index.php/aliasjava1/111-making-native-installable-apps-with-java-9\" rel=\"nofollow noreferrer\">3rd party</a>"}],"last_activity_date":1684770572,"question_id":76307907,"body":"<p>I was wondering how I could package my .jar into a single clickable .exe file, that contains all java related stuff to run, dropping the need for installing JRE.\nThe solution I found was to do it using launch4j and having the .exe inside a folder with the JRE but I was wondering whether I could just bundle the JRE into the .exe witout the need to have it in the same folder as the JRE needed.</p>\n"},{"comments":[{"comment_id":52343824,"body":"I&#39;ve done exactly what you&#39;ve described.  I wrote mine using a combination of Java and PL/SQL.  For Java, I use Eclipse (I can&#39;t imagine doing Java/BO development without it).  For scheduling, I run it in BO as a Program Object."}],"answers":[{"answer_id":32222915,"body":"<p>A few things I'd like to remark:</p>\n\n<ul>\n<li><p>Write your app in Java, especially if you're more comfortable with that language already. While the BOBJ SDK is largely available in .NET as well, for some reason it has always played second fiddle. Perhaps this has something to do with the fact that a very large part of the server codebase is written in Java as well, but that's just speculation.</p></li>\n<li><p>While you can create an external app and schedule that using the Windows Scheduler, you could just as well implement the Program Object interface and publish your program as an object (a Program Object) inside of the BusinessObjects repository and schedule it using the built-in scheduling features. This also means that you can automatically have it notify you when it finishes, or fails, etc.</p></li>\n<li><p>The purpose of your program (collecting information regarding users, user groups and documents) is quite straightforward. Keep in mind that you can test your queries using the Query Builder (web application that is deployed with BusinessObjects, the URL depends on the version you're using). </p></li>\n<li><p>Query results only return 1000 records by default; if you need more, add the TOP xxx argument to your SELECT statement (were xxx is the maximum number of records you expect to retrieve).</p></li>\n<li><p>Relationships (e.g. between users and user groups) are calculated on the fly by the CMS, so this is an expensive operation. When you query relationships, they will be returned as a list of integers, corresponding to the IDs of the objects they relate to.</p></li>\n</ul>\n\n<p>Here are some resources that may help you:</p>\n\n<ul>\n<li><a href=\"http://scn.sap.com/docs/DOC-8777\" rel=\"nofollow\">SAP BOBJ SDK documentation</a> - you'll need to look at the documentation that relates to the <em>SAP BusinessObjects BI Platform</em>.</li>\n<li><a href=\"http://scn.sap.com/community/bi-platform/java-sdk\" rel=\"nofollow\">Java SDK Application Development forum</a></li>\n<li><a href=\"https://support.sap.com/home.html\" rel=\"nofollow\">SAP Support Portal</a> - The SAP notes can contains example code from time to time to help you out. You'll need an S-ID to search them to (meaning you need an active support contract).</li>\n<li><a href=\"http://scn.sap.com/docs/DOC-50604\" rel=\"nofollow\">Sample Java code</a></li>\n</ul>\n"}],"last_activity_date":1684770184,"question_id":32218333,"body":"<p>I'm looking to write an app that extracts info from the CMS.  This will get just all the users and user groups, and it will get all the reports and their paths.  I can worry about getting more later.  Maybe I can deploy it once and it will update nightly.  I was going to write it in Java and not .NET, I feel a bit more comfortable in Java. Although I do love Visual Studio, the last couple times I set it up it was a real pain if I didn't have the latest and greatest MSDN subscription to go with it.</p>\n\n<ol>\n<li><p>I know I can just create an application that sits on the BOE box and schedule it with windows scheduler.  Has anyone done this before with an SAP BI SDK app?</p></li>\n<li><p>While I appreciate knowing all the possible ways of doing something, I'm not looking here to get all of the ways to do this.  Unless there is a single best practice that pretty much everyone does.</p></li>\n</ol>\n\n<p>Thanks!</p>\n"},{"answers":[{"comments":[{"comment_id":52413384,"body":"I tried giving file permission mode chmod 777 to .business objects folder in the home directory. Tomcat is using the same owner as that of the accessed file (.business objects) in home directory. I could notice that the web application is not able to access any folder outside tomcat directory."},{"comment_id":52413619,"body":"Giving file permission on a directory is not enough. You should explicitly <code>chmod</code> on required file (<code>clusterinfo.properties</code> in your case as I assume you didn&#39;t <code>chmod</code> the directory with <code>-R</code> option?)."}],"answer_id":32266498,"body":"<p>Did you try to grant more permissions on this file with <code>chmod</code>. \nThe exception explicitly says that its <code>java.io.filePermission</code>. So the problem is that jvm can't read your properties file because your OS prevents it from doing so based on the file permissions. \nYou can see file permissions with <code>ls -l filepath</code>. \nI vaguely remember that you had to change owner of the accesed files in order for tomcat to work so <code>chown tomcat7 \\home\\&lt;user account of tomcat&gt;\\.businessobjects\\clusterinfo.properties</code> wouldn't hurt, but I don't remember if it was only applicable to deployed artifacts like *.war files or such.</p>\n"}],"last_activity_date":1684770162,"question_id":32254887,"body":"<p>We have tomcat 7.0.55 in our Unix server. We have deployed web applications manually inside webapps folder of tomcat instance. By default the <code>clusterinfo.1200.properties</code> and log4j logs are stored in <code>.businessobjects</code> folder under home directory of the user account in which tomcat runs.</p>\n<p>While accessing the InfoView web application we get the below error</p>\n<blockquote>\n<p>&quot;AccessControlException:&quot;java.io.filePermission:Access Denied \\home&lt;user account of tomcat&gt;.businessobjects\\clusterinfo.properties&quot;</p>\n</blockquote>\n<p>Tomcat 7 has restriction to access the file outside the tomcat directory on the first logon. However on refreshing the page we are able to access the application.</p>\n<p>I have tried the following steps.</p>\n<ol>\n<li>stopped the tomcat instance</li>\n<li>Moved <code>.buisnessobjects</code> from home directory to inside tomcat installed directory.</li>\n<li>Created symlink as <code>.businessobjects</code> in home directory to point to the folder inside tomcat directory.</li>\n<li>Started the tomcat instance.</li>\n</ol>\n<p>It works. But I need to know where the configuration change has to be made in web application to place the clusterinfo property file and log4j file inside tomcat directory.</p>\n<p>I am a novice in Java. Please let me know the file and its location to make this changes.</p>\n<p>Desperately looking for a solution :-(</p>\n"},{"last_activity_date":1684770023,"question_id":76307844,"body":"<p>I have the following entites in java:</p>\n<pre><code>A {\n Long id;\n List&lt;B&gt; elements\n}\n\nB {\n Long id;\n String name;\n}\n</code></pre>\n<p>I want to write a query where I can retrieve all of the rows from table 'A' where it's element has a certain 'name' value. So if the filter value is X, and the Entity 'Q' from table 'A' has two relation in table 'B', like {id=1, name=X}, {id=2, name=Y}, then I want both of them in the parsed java object. Let me show you and example:</p>\n<pre><code>A table\n\nid\n1\n2\n3\n4\n5\n\nB table\nid  name    A_id\n1   X       1\n2   Y       1\n3   X       2\n4   W       4\n5   X       3\n6   X       4\n7   Y       5\n</code></pre>\n<p>If I am filtering for name=X, the result should be like this:</p>\n<pre><code>[\n    {\n        id=1; \n        elements=[\n            {id=1, name=X}, \n            {id=2, name=Y}\n        ]\n    },\n    {\n        id=2; \n        elements=[\n            {id=3, name=X}\n        ]\n    },\n    {\n        id=3; \n        elements=[\n            {id=5, name=X}\n        ]\n    },\n    {\n        id=4; \n        elements=[\n            {id=4, name=W},\n            {id=6, name=X}\n        ]\n    }\n]\n</code></pre>\n<p>Is there any single sql query where I can achive this? I don't want to employ EAGER fetching method.</p>\n"},{"comments":[{"comment_id":134551267,"body":"try a <code>Long</code> and add <code>@NotNull</code>, otherwise <code>null -&gt; 0 -&gt; valid</code> makes totally sense"},{"comment_id":134551278,"body":"(if you want to allow <code>0</code> and not allow <code>null</code> that&#39;s the way to go..)"}],"answers":[{"answer_id":76307833,"body":"<p>for long value you cannot set null because its not wrapper . for test that send 0 for amount .\nfor strings in your dto test @NotEmpty</p>\n"}],"last_activity_date":1684769959,"question_id":76301625,"body":"<p>I'm trying to make some validations for the DTOs in my spring application, when i send a request with blank or null values it should throw an exception, but its not doing it and it goes into the method. This is what i have</p>\n<pre><code>@AllArgsConstructor\n@RestController\n@Validated\npublic class AccountController implements AccountAPI {\n    private final AccountService accountService;\n    @Override\n    public AccountResponseDTO save(@RequestBody @Valid AccountCreateDTO account){\n        return accountService.save(account);\n    }\n\n    @Override\n    public AccountResponseDTO withdraw(@RequestBody @Valid TransactionAccountDTO transaction){\n        return accountService.withdraw(transaction);\n    }\n\n    @Override\n    public AccountResponseDTO deposit(@RequestBody @Valid TransactionAccountDTO transaction){\n        return accountService.deposit(transaction);\n    }\n\n    @Override\n    public TransferResponseDTO transfer(@RequestBody @Valid TransferRequestDTO transaction){\n        return accountService.transfer(transaction);\n    }\n\n    @Override\n    public AccountResponseDTO enableAccount(@PathVariable String accountNumber){\n        return accountService.enableAccount(accountNumber);\n    }\n\n    @Override\n    public AccountResponseDTO disableAccount(@PathVariable String accountNumber){\n        return accountService.disableAccount(accountNumber);\n    }\n    @Override\n    public void testPath(@Valid @RequestBody TransferRequestDTO transaction){\n        System.out.println(&quot;It got here!&quot;);\n    }\n\n\n}\n</code></pre>\n<p>I'm using the testPath to &quot;test&quot; the validations to avoid problems with the service if the null or blank values go through.</p>\n<pre><code>@Getter\n@Setter\n@AllArgsConstructor\n@Builder\npublic class TransferRequestDTO {\n    @NotBlank\n    private String originAccountNumber;\n    @NotBlank\n    private String destinationAccountNumber;\n    @Min(value = 0)\n    private long amount;\n}\n</code></pre>\n<p>This is the DTO and when I try something like this in postmant:</p>\n<pre><code>{\n    &quot;originAccountNumber&quot;:&quot;&quot;,\n    &quot;destinationAccountNumber&quot;:&quot;&quot;,\n    &quot;amount&quot;:null\n}\n</code></pre>\n<p>It prints the line inside the method when it should throw an exception for the validations</p>\n<p>I tried adding this to the pom (dependencies) but the problem its not gone</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Also i tried adding @Validated in the controller class but nothing, am i missing something?</p>\n"}]}