{
  "items": [
    {
      "answers": [
        {
          "answer_id": 76297259,
          "body": "<p>I tried &quot;android&quot; for password and it worked.</p>\n"
        }
      ],
      "last_activity_date": 1684615005,
      "question_id": 76297248,
      "body": "<p>I'm trying to use SpotifySDK and I'm following their tutorial. Here they wanted me to get an application fingerprint using keytool, here <a href=\"https://developer.spotify.com/documentation/android/tutorials/application-fingerprints\" rel=\"nofollow noreferrer\">https://developer.spotify.com/documentation/android/tutorials/application-fingerprints</a>.</p>\n<p>I'm using a bash terminal and I'm typing this according to their tutorial:  &quot;C:\\Program Files\\Java\\jdk-20\\bin\\keytool.exe&quot; -alias androiddebugkey -keystore ~/.android/debug.keystore -list -v | grep SHA1</p>\n<p>It's asking for a password which I don't know, I tried with random and &quot;changeit&quot; but it's returning nothing. How can I get this SHA fingerprint?</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134543684,
          "body": "&quot;...multiple executors will call deleteRecursively() to delete the same directory...&quot; is significant/can explain the issue"
        },
        {
          "comment_id": 134543775,
          "body": "Print the exit code so you know when the sub-process failed, and print the error message which you have ignored. You may find that your file handling code is not closing after writes and that prevents deletes."
        },
        {
          "comment_id": 134543848,
          "body": "I am trying to print out. Even if file is not closing, rm -rf from other thread would succeed, right? rm -rf is only decreasing refcount in inode, IIUC.   @xerx593 that is bad, we are fixing it. But even though I think rm should work. I am actually more worried about 1 executor removed the directory for other executors."
        },
        {
          "comment_id": 134545653,
          "body": "I replayed the issue by using 2 terminals: 1. for i in <code>seq 1 1000</code>; do mkdir -p /tmp/dirtest; touch /tmp/dirtest/$i; done 2. rm -rf /tmp/dirtest 2nd terminal will return rm: /tmp/dirtest: Permission denied. So, permission denied does not necessarily mean privilege. The current code is bad. Thanks."
        }
      ],
      "last_activity_date": 1684614055,
      "question_id": 76297006,
      "body": "<p>We have a production env that <a href=\"https://github.com/apache/spark/blob/master/common/network-common/src/main/java/org/apache/spark/network/util/JavaUtils.java#L177\" rel=\"nofollow noreferrer\">this line</a> throw out exception. It is triggered from <a href=\"https://github.com/apache/spark/blob/bc6f69a988f13e5e22cb055e60693a545f0cbadb/core/src/main/scala/org/apache/spark/util/ShutdownHookManager.scala#LL65C15-L65C32\" rel=\"nofollow noreferrer\">here</a>. It is some spark job running in EMR. I can not paste source code here. We basically use spark ShutdownHookManager to register directories we want to remove when executor exits. Our code currently register same directory for all executors under same job(application_xxx). So, multiple executors will call deleteRecursively() to delete the same directory when they exit (this is bad, we are fixing it).</p>\n<ol>\n<li><p>I can not imagine how rm -rf could fail. The only chance is permission issue, but highly unlikely because everything runs with yarn. Can someone give us some suggestion? Even if the files are used elsewhere rm -rf should succeed.</p>\n</li>\n<li><p>I don't really follow the code in <a href=\"https://github.com/apache/spark/blob/master/common/network-common/src/main/java/org/apache/spark/network/util/JavaUtils.java#L177\" rel=\"nofollow noreferrer\">1</a>. IIUC, deleteRecursivelyUsingUnixNative() starts a child process to call rm -rf. But how could this change internal data inside File? It seems file.exists() will always return true. (maybe some exists function check something like inode again? )</p>\n</li>\n</ol>\n<p>This happens in heavy node, causing us file not removed. Probably also cause us loosing resources. But I want to know how this got started.</p>\n<p>Thanks.</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134538035,
          "body": "Some unit test frameworks might be able to do this.  However I usually avoid making things private that I need to test, so I&#39;m not really sure which ones to use specifically in this case.  Look around!"
        },
        {
          "comment_id": 134538041,
          "body": "If  it is just a test ,you can  modify <code>Class2</code>  be a inner static class temporary ,so that you can instantiate class2 and test your method. In general , wo often use some test framework like junit , here is <a href=\"https://junit.org/junit5/\" rel=\"nofollow noreferrer\">doc</a>"
        },
        {
          "comment_id": 134538631,
          "body": "You shouldn&#39;t test private methods or classes directly; test them through observable behaviour of package private (or higher) classes and methods."
        },
        {
          "comment_id": 134538689,
          "body": "There must be some code in <code>Class1</code> that calls that method in <code>Class2</code>.  That&#39;s the code that you should be testing."
        },
        {
          "comment_id": 134543621,
          "body": "Yes, there&#39;s a code in Class1 which calls methods of Class2, but somehow that couldn&#39;t be tested."
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 134538197,
              "body": "&#39;should be moved into another class to promote reusability.&#39; is some weird verbiage. The essence of it is: &quot;If you want to test a private method, then that&#39;s a very strong indication that method should not be private&quot;. Same applies to private classes, of course. OP: You can have package private, too. Test code has no issues accessing those."
            },
            {
              "comment_id": 134543627,
              "body": "Here, the issue is for private classes, not private methods. Of course, there should be rarely some private class within another class, but since it is there, we can&#39;t change it for now, and think of a way to solve the issue"
            },
            {
              "comment_id": 134543734,
              "body": "@GlidingSwords997 I think that&#39;s what the documentation is inferring.  If you have a situation where this is occurring, then it&#39;s more logical to re-evaluate the structure."
            },
            {
              "comment_id": 134543856,
              "body": "@GlidingSwords997, I&#39;ve provided an abstraction using reflection, if you&#39;d like to take a look."
            }
          ],
          "answer_id": 76293589,
          "body": "<p>You could use reflection, I was able to get the following to work.</p>\n<p>Consider the following, <code>Class1</code>, and <code>Class</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Class1 {\n    private class Class2 {\n        int a1;\n        void method() {\n            System.out.println(&quot;value&quot;);\n        }\n    }\n}\n</code></pre>\n<p>The following method will return an instance of <code>Class2</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Class1.Class2 instance() throws ReflectiveOperationException {\n    Class1 class1 = new Class1();\n    Class&lt;?&gt; object = Class1.class.getDeclaredClasses()[0];\n    Constructor&lt;?&gt; constructor = object.getDeclaredConstructors()[0];\n    constructor.setAccessible(true);\n    return (Class1.Class2) constructor.newInstance(class1);\n}\n</code></pre>\n<p>Additionally, from the JUnit4 Frequently Asked Questions.</p>\n<p><a href=\"https://junit.org/junit4/faq.html#atests_11\" rel=\"nofollow noreferrer\">JUnit4 - How do I test private methods?</a></p>\n<blockquote>\n<p>Testing private methods may be an indication that those methods should be moved into another class to promote reusability.</p>\n<p>But if you must...</p>\n<p>If you are using JDK 1.3 or higher, you can use reflection to subvert the access control mechanism with the aid of the <a href=\"http://sourceforge.net/projects/privaccessor/\" rel=\"nofollow noreferrer\">PrivilegedAccessor</a>. For details on how to use it, read <a href=\"http://www.onjava.com/pub/a/onjava/2003/11/12/reflection.html\" rel=\"nofollow noreferrer\">this article</a>.</p>\n<p>If you are using JDK 1.6 or higher and you annotate your tests with @Test, you can use Dp4j to inject reflection in your test methods. For details on how to use it, see <a href=\"http://dp4j.com/testscript\" rel=\"nofollow noreferrer\">this test script</a>.</p>\n</blockquote>\n"
        },
        {
          "comments": [
            {
              "comment_id": 134543631,
              "body": "Since its a code written by someone else, we can&#39;t change the source code. Had it been protected or static, there would be no issue"
            }
          ],
          "answer_id": 76293604,
          "body": "<p>If the access modifier of the embedded class were combined with a public getter, then it'd be more feasible and reliable. Also, it would force you to have a new instance every time <code>retrieveClass()</code> is called.</p>\n<p>Say...</p>\n<pre><code>public class Class1 { \n  private class Class2 { \n   int a1; \n   void method ();\n  }\n   public Class2 retrieveClass() { \n     return new Class2();\n }  \n} \n</code></pre>\n<p>Even if you had reflection handle it behind the scenes with a sort of mocking type of behavior, It may work but also I would not rely on that wonky code. Since you need it testable.</p>\n<p>Alternatively, these may be the undesired workarounds to go by:</p>\n<pre><code>   Method method = TargetClass.getDeclaredMethod(methodName, argClasses);\n   method.setAccessible(true);\n   return method.invoke(targetObject, argObjects);\n\n\n   Class obj = test.getClass(); // create an object of the class named Class\n\n   Field field = obj.getDeclaredField(&quot;fieldname&quot;); // access the private variable\n\n   field.setAccessible(true); // make private field accessible\n\n   field.set(test,&quot;value&quot;); // setting a field value\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684614005,
      "question_id": 76293532,
      "body": "<p>There is a public class in which a private class has been written with some properties and methods. Now, we want to write test cases for this private class but since it's a private class, we can't create an instance of that class. I tried using reflection utils, but that can help only for private methods of public classes.</p>\n<pre><code>public class Class1{\n\n   private class Class2{\n      int a1;\n       void method ()\n    }\n}\n</code></pre>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134543790,
          "body": "If you don&#39;t get a decent answer soon, consider creating and posting a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> program, one that condenses your code and your problem into the smallest program possible, small enough to be allowed to be posted in your question as code-formatted text, one that compiles and runs for us without modification, one that demonstrates your problem for us, and also that has no code that is not essential for the above. Please check out the link which explains what this useful tool is and how it can help both you and us."
        },
        {
          "comment_id": 134543833,
          "body": "Having this line within your SwingWorker constructor, <code>this.panel = panel;</code> concerns me and makes me wonder why you have this within the SwingWorker. Could this be an indication that code is being called that is not truly Swing thread-safe?"
        },
        {
          "comment_id": 134543873,
          "body": "Side note (not related to the actual problem), but this, <code>public class SomeWorker extends SwingWorker&lt;int [],Void&gt; {</code> would use generics better if written as <code>public class SomeWorker extends SwingWorker&lt;List&lt;Integer&gt;, Void&gt; {</code> using a <code>java.util.List&lt;Integer&gt;</code> instead of <code>int[]</code> generic parameter."
        },
        {
          "comment_id": 134543887,
          "body": "@HovercraftFullOfEels i know this would be better, however this is not related to the problem i have"
        },
        {
          "comment_id": 134543903,
          "body": "Which is why I stated that this was a &quot;side note&quot; or &quot;side recommendation&quot; in my comment"
        },
        {
          "comment_id": 134543906,
          "body": "Regardless, lack of a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> <i>is</i> related to our not yet being best able to help you"
        },
        {
          "comment_id": 134544144,
          "body": "You should &quot;publish&quot; the results as the progress changes. You should not directly update the progress bar from the SwingWorker. Check out: <a href=\"https://stackoverflow.com/a/64196256/131872\">stackoverflow.com/a/64196256/131872</a> for an example."
        },
        {
          "comment_id": 134544222,
          "body": "@camickr, maybe I&#39;m missing something, but I don&#39;t see the OP doing that. Rather, they are calling <code>setProgress(...)</code> a method of SwingWorker that sets its progress property. They then listen for changes to that property within the controller, and the controller code is being called on the EDT, unless they have other badness that is not being shown."
        },
        {
          "comment_id": 134544286,
          "body": "Myself, I&#39;d make my &quot;view&quot; implement an interface, say, MyObserver, and only have the controller interact with it through the interface."
        },
        {
          "comment_id": 134545141,
          "body": "@HovercraftFullOfEels <i>but I don&#39;t see the OP doing that.</i> - that was my suggestion. That maybe they should be doing that. But I see in the SwingWorker API they use use the setProgress(...) and the PropertyChangeListener, which I have never done before, So I guess my suggestion was off topic (although, I&#39;ve never had a problem publishing values)."
        },
        {
          "comment_id": 134545170,
          "body": "@camickr: both paths will work and are safe. Myself, when I did more Swing coding (in the past) I would much prefer to use the PropertyChangeListener rather than publish/process, since this would allow lower coupling, and this way, the SwingWorker could be written to be totally ignorant of the GUI code, and the same worker could be used with different GUI programs."
        },
        {
          "comment_id": 134545214,
          "body": "@HovercraftFullOfEels - In this case since you only need an int value I guess the setProgress() works. However, I&#39;m not seeing how this can be used for other data you need to publish, or does the publish also generate a PropertyChangeEvent with the data published accessible using the getNewValue() method?"
        },
        {
          "comment_id": 134545289,
          "body": "@camickr: You are correct: it doesn&#39;t work for other data. For that I usually create my own &quot;bound property&quot;, using a String constant, and then that too is listened to by property change listeners."
        }
      ],
      "last_activity_date": 1684613464,
      "question_id": 76297159,
      "body": "<p>My question is that I have 2 Worker classes (where each of them is dedicated to sort an array using different algorithms) and a Controller that is in charge of checking if a button has been pressed and executing both Worker classes. The problem is that in the JPanel I have a progress bar (JProgressBar) for each one of those Worker, but the values are not updated in them.</p>\n<p>These are both Workers (only the call to setProgress):</p>\n<pre><code>public class WorkerSelection extends SwingWorker&lt;int [],Void&gt; {\n\n    public WorkerSelection (int [] a, Panel panel) {\n        listToBeSorted = a.clone();\n        N = a.length;\n        this.panel = panel;\n    }\n\n    @Override\n    public int [] doInBackground () throws Exception {\n        startTime = System.currentTimeMillis();\n\n        int progress = 0;\n        int totalIt = N - 1;\n\n        setProgress(0);\n\n        // rest of the code\n\n        for (int i = 0; i &lt; totalIt; i++) {\n        \n            // rest of the code\n\n            progress++;\n            int percentage = (progress * 100 / totalIt);\n            setProgress(percentage);\n        }\n        return listToBeSorted;\n    }\n\n    public void done () {\n        // rest of the code\n    }\n}\n\n</code></pre>\n<pre><code>public class WorkerBubble extends SwingWorker&lt;int [],Void&gt; {\n    // attributes and constructor ...\n\n    @Override\n    public int [] doInBackground () {\n        startTime = System.currentTimeMillis();\n\n        int progress = 0;\n        int totalIt = N - 1;\n        setProgress(0);\n\n        for (int i = 0; i &lt; totalIt; i++) {\n\n            // rest of the code\n\n            progress++;\n            int percentage = (progress * 100 / totalIt);\n            setProgress(percentage);\n        }\n        return listToBeSorted;\n    }\n\n    public void done () {\n        // rest of the code\n    }\n}\n\n</code></pre>\n<p>And finally this is the Controller code:</p>\n<pre><code>public class MyController implements ActionListener, PropertyChangeListener {\n   // attributes and actionPerformed method ...\n\n    @Override\n    public void propertyChange (PropertyChangeEvent evt) {\n        if (evt.getPropertyName().equals(&quot;progress&quot;)) {\n            System.out.println(&quot;PCHANGE DETECTED&quot;);\n            int currentProgress = (Integer) evt.getNewValue();\n            if (evt.getSource() instanceof WorkerSelection) {\n                panel.setMyProgressSel(currentProgress);\n            } else if (evt.getSource() instanceof WorkerBubble) {\n                panel.setMyProgressBub(currentProgress);\n            }\n        }\n    }\n\n}\n\n</code></pre>\n"
    },
    {
      "comments": [
        {
          "comment_id": 20518485,
          "body": "Looks like a duplicate [post][1], came up as top result in google        [1]: <a href=\"http://stackoverflow.com/questions/4098161/problems-with-java3d-lib-configuration\" title=\"problems with java3d lib configuration\">stackoverflow.com/questions/4098161/&hellip;</a>"
        },
        {
          "comment_id": 20519149,
          "body": "that one isnt mine but thank you, i actually did see this before"
        },
        {
          "comment_id": 51644597,
          "body": "Java3D 1.5.2 is obsolete, rather use Java3D 1.6.0. See my comment below."
        }
      ],
      "answers": [
        {
          "answer_id": 61012653,
          "body": "<p>If I set \n    export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/lib/jni \nit works.</p>\n"
        }
      ],
      "last_activity_date": 1684612885,
      "question_id": 14677079,
      "body": "<p>I have a project in eclipse, runs perfectly fine in the ide when I click run, but I need to export it into a runnable jar file which also works fine. But when I try to run it it throws an exception:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.UnsatisfiedLinkError: no j3dcore-ogl in java.library.path\n    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1856)\n    at java.lang.Runtime.loadLibrary0(Runtime.java:845)\n    at java.lang.System.loadLibrary(System.java:1084)\n    at javax.media.j3d.NativePipeline$1.run(NativePipeline.java:231)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at javax.media.j3d.NativePipeline.loadLibrary(NativePipeline.java:200)\n    at javax.media.j3d.NativePipeline.loadLibraries(NativePipeline.java:157)\n    at javax.media.j3d.MasterControl.loadLibraries(MasterControl.java:987)\n    at javax.media.j3d.VirtualUniverse.&lt;clinit&gt;(VirtualUniverse.java:299)\n    at javax.media.j3d.GraphicsConfigTemplate3D.getBestConfiguration(GraphicsConfigTemplate3D.java:321)\n    at java.awt.GraphicsDevice.getBestConfiguration(GraphicsDevice.java:207)\n    at com.sun.j3d.exp.swing.JCanvas3D.&lt;init&gt;(JCanvas3D.java:228)\n    at com.sun.j3d.exp.swing.JCanvas3D.&lt;init&gt;(JCanvas3D.java:178)\n    at mainproject.MainPanel.&lt;init&gt;(MainPanel.java:72)\n    at mainproject.MainWindow.&lt;init&gt;(MainWindow.java:42)\n    at mainproject.MainWindow.main(MainWindow.java:23)\n</code></pre>\n\n<p>I have been googling it for 2 days now, tons of results, none helpful.\nI export it by going to <code>file-&gt;export-&gt;java-&gt;Runnable jar file-&gt;i bubble extract required libraries into generated jar</code>, choose the correct configuration, save the file in a specified folder, then it saves just fine. Or at least so I think. The <code>java.library.path</code> goes to the <code>jre lib folder</code>, but when i run it in eclipse it goes to the .so for j3d, i tried changing it using <code>System.setProperty</code> but to no success. I have a feeling that is the problem, but when I tried to fix it nothing happened. I'm using the most up to date <code>java3d library (1.5.2 I believe)</code>. </p>\n\n<p>Any suggestions?</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134543702,
          "body": "Can you explain how it is not working? What do you see?"
        },
        {
          "comment_id": 134543772,
          "body": "could you give more context about how is the website? could you provide what is the expected behaviour? are you getting an error message? I suggest to read <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a> and <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">How to create a Minimal, Reproducible Example</a>"
        }
      ],
      "last_activity_date": 1684611594,
      "question_id": 76297045,
      "body": "<p>I am trying to use Implicit Wait on a website but its not working i have shared the code below.</p>\n<p>Can someone please help that am i doing any mistake or is there any pre-requisite to apply implicit or explicit wait?</p>\n<pre><code>    WebDriverManager.chromedriver().setup();\nWebDriver driver = new ChromeDriver();\n    \ndriver.manage().timeouts().implicitlyWait(Duration.ofSeconds(20));\ndriver.get(&quot;https://www.letskodeit.com/practice&quot;);\n\nWebElement alert = driver.findElement(By.xpath(&quot;//input[@id='alertbtn']&quot;));\n//type.sendKeys(&quot;Testing&quot;);\n\nalert.click();\n</code></pre>\n"
    },
    {
      "comments": [
        {
          "comment_id": 24844785,
          "body": "Do you have all the required libs in your project? using maven?"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 24844940,
              "body": "I added the mimepull-1.3.jar and jersey-multipart-1.8.jar. But still getting exception."
            },
            {
              "comment_id": 24845054,
              "body": "Where have you added? Make sure those are available at run-time"
            },
            {
              "comment_id": 24845055,
              "body": "SEVERE: Missing dependency for method public java.lang.String com.homebulletin.resources.NoticeResources.uploadNotices(jav&zwnj;&#8203;a.io.InputStream) at parameter at index 0   SEVERE: Method, public java.lang.String com.homebulletin.resources.NoticeResources.uploadNotices(jav&zwnj;&#8203;a.io.InputStream), annotated with POST of resource, class com.homebulletin.resources.NoticeResources, is not recognized as valid resource method. Jun 18, 2013 11:41:24 AM org.apache.catalina.core.ApplicationContext log"
            },
            {
              "comment_id": 24845069,
              "body": "I added them in the WEb-INF -&gt; lib folder of the project"
            },
            {
              "comment_id": 24845100,
              "body": "@Android Also make sure that the version of your  jersey-multipart jar should be same as the version of jersey bundle jar"
            },
            {
              "comment_id": 24845335,
              "body": "jersey-bundle-1.8.jar and jersey-multipart-1.8.jar &amp; mimepull-1.3.jar &amp; jersey-server-1.8.jar but still getting exception."
            },
            {
              "comment_id": 24845776,
              "body": "I put the jersey-bundle-1.14.jar &amp;  jersey-multipart-1.14.jar but in java source code I am getting error &quot;import com.sun.jersey.multipart can not resolved&quot;"
            },
            {
              "comment_id": 24845937,
              "body": "+1 thanks problem resolved it was problem of versions of jar files."
            },
            {
              "comment_id": 24846461,
              "body": "How can i save the photo on the server folder. Please share if you have any idea of this"
            },
            {
              "comment_id": 24846475,
              "body": "@Android post a new question ;-)"
            },
            {
              "comment_id": 53748779,
              "body": "What if I am not using MAVEN?"
            },
            {
              "comment_id": 53749855,
              "body": "@JiajuShen you will have to download all required jars manually. In my pre-maven days, i used google and the following website to find jars: <a href=\"http://www.findjar.com/index.x\" rel=\"nofollow noreferrer\">findjar.com/index.x</a>"
            }
          ],
          "answer_id": 17161572,
          "body": "<p>It seems your missing few jars in your project.Try adding these to your project:</p>\n<blockquote>\n<p><strong>jersey-multipart.jar</strong></p>\n<p><strong>mimepull.jar</strong></p>\n</blockquote>\n<p>If you are using maven, you can add this dependency:</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;com.sun.jersey.contribs&lt;/groupId&gt;\n        &lt;artifactId&gt;jersey-multipart&lt;/artifactId&gt;\n        &lt;version&gt;1.8&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Change the version of jar if you need</p>\n<p><strong>Also make sure that the version of your jersey-multipart jar should be same as the version of jersey bundle jar</strong></p>\n"
        },
        {
          "answer_id": 27355410,
          "body": "<p>Replace your <code>web.xml</code> with this code:</p>\n\n<pre><code>&lt;servlet&gt;\n    &lt;servlet-name&gt;Jersey Web Application&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;  org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher&lt;/servlet-class&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n&lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;Jersey Web Application&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 52276828,
              "body": "+1 In my case the reason for error was, I was using <code>@FormParam</code> in method which was listening to <code>@GET</code> method."
            },
            {
              "comment_id": 57799007,
              "body": "I lost couple of hours digging everything and i was this annotation.. Thank you!"
            }
          ],
          "answer_id": 30533427,
          "body": "<p>Forgetting to add <code>@POST</code> or <code>@Get</code> on top of the method name will also cause this error</p>\n"
        },
        {
          "answer_id": 31177184,
          "body": "<p>I met this problem because I did not have no parameter constructor in my class </p>\n\n<pre><code>@Path(\"/deviceconfigs\")\npublic class DeviceConfigInterface extends ComInterfaceGen&lt;DeviceConfigApi&gt; {\n    public DeviceConfigInterface(Class&lt;DeviceConfigApi&gt; type) {\n        super(DeviceConfigApi.class);\n    }\n}.\n</code></pre>\n\n<p>When I used no parameter constructor, the problem is solved.</p>\n"
        },
        {
          "answer_id": 33174105,
          "body": "<p>I have seen exactly the same error when using <code>@FormParam</code> (which expects <code>@POST</code>) with <code>@GET</code> parameters.</p>\n\n<p>Hope it will help someone as it wasn't very intuitive to find out.</p>\n"
        },
        {
          "answer_id": 42087883,
          "body": "<blockquote>\n  <p>com.sun.jersey.spi.inject.Errors$ErrorMessagesException</p>\n</blockquote>\n\n<p>occured when I had two <code>@GET</code> methods with the same path but different query params.</p>\n\n<p>Also it may happen if you rename your controller class, do <code>mvn install</code> without <code>mvn clean</code> and put war file to <code>/webapps</code> folder.</p>\n"
        },
        {
          "answer_id": 43424341,
          "body": "<p>I had a similar problem as I missed out to add a \"Consumes\" annotation for my POST method. Hope it helps someone.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 74615585,
              "body": "And what is your proposed solution to the problem? In what way does this answer the question?"
            },
            {
              "comment_id": 85146094,
              "body": "@luk2302 I think he gave a suggestion about what may be wrong, I don&#39;t see what he could have explained more in this particular case."
            }
          ],
          "answer_id": 43787163,
          "body": "<p>It faced me the same error because having same @Path annotations with the same path names( strings).</p>\n\n<pre><code>@Path('samepath')   /// samepath cause Jersey Error at run time.\n/* Method 1*/\n\n@Path('samepath')\n/* Method 2 */\n</code></pre>\n"
        },
        {
          "answer_id": 51182895,
          "body": "<p>I know it's to late. But updating it here for future references. \nBetter check the  jar versions. \nI had the same issue. I was using the 1.16 version of jersey core and server, but this one i added with 1.18. It gave the same error. But then I realized and changed to 1.16 then worked fine. </p>\n\n<p>It doesn't work with different versions.</p>\n"
        },
        {
          "answer_id": 61391029,
          "body": "<p>There are multiple potential reasons therefore, just mentioning the most common ones</p>\n\n<ul>\n<li>you are lacking some JAR files</li>\n<li>you have multiple java methods with the same @Path annotation and the same HTTP methods (i.e. with different params or query params)</li>\n<li>you have a web service method with an invalid response or request param type (i.e. a annotation class as parameter class or other weird stuff)</li>\n</ul>\n"
        },
        {
          "answer_id": 61589705,
          "body": "<p>Sometimes you specified @FormDataParam instead @QueryParam in GET method, in my case that was the problem.</p>\n"
        }
      ],
      "last_activity_date": 1684611506,
      "question_id": 17161285,
      "body": "<p>I am using the Jersey API for the web services. I am sending the multipart data from client to server. I am getting exception when web services start to execute.</p>\n\n<pre><code>@POST\n@Path(\"uploadphoto\")\n@Consumes(MediaType.MULTIPART_FORM_DATA)\n@Produces(\"text/plain\")\npublic String uploadNotices(@FormDataParam(\"file\") InputStream uploadedInputStream, @FormDataParam(\"file\") FormDataContentDisposition fileDetail) {\n    String uploadedFileLocation = \"d:/\" + fileDetail.getFileName();\n    // save it\n    try {\n        writeToFile(uploadedInputStream, uploadedFileLocation);\n    } catch(Exception e) {\n        return \"no\";\n    }\n    return \"yes\";\n}\n\n// save uploaded file to new location\nprivate void writeToFile(InputStream uploadedInputStream, String uploadedFileLocation) throws Exception {\n    OutputStream out = new FileOutputStream(new File(uploadedFileLocation));\n    int read = 0;\n    byte[] bytes = new byte[1024];\n\n    out = new FileOutputStream(new File(uploadedFileLocation));\n    while ((read = uploadedInputStream.read(bytes)) != -1) {\n        out.write(bytes, 0, read);\n    }\n    out.flush();\n    out.close();\n}\n</code></pre>\n\n<p>Stacktrace:</p>\n\n<pre><code>SEVERE: The following errors and warnings have been detected with resource and/or provider classes:\n  SEVERE: Missing dependency for method public java.lang.String com.homebulletin.resources.NoticeResources.uploadNotices(java.io.InputStream,com.sun.jersey.core.header.FormDataContentDisposition) at parameter at index 0\n  SEVERE: Missing dependency for method public java.lang.String com.homebulletin.resources.NoticeResources.uploadNotices(java.io.InputStream,com.sun.jersey.core.header.FormDataContentDisposition) at parameter at index 1\n  SEVERE: Method, public java.lang.String com.homebulletin.resources.NoticeResources.uploadNotices(java.io.InputStream,com.sun.jersey.core.header.FormDataContentDisposition), annotated with POST of resource, class com.homebulletin.resources.NoticeResources, is not recognized as valid resource method.\nJun 18, 2013 10:55:17 AM org.apache.catalina.core.ApplicationContext log\nSEVERE: StandardWrapper.Throwable\ncom.sun.jersey.spi.inject.Errors$ErrorMessagesException\n    at com.sun.jersey.spi.inject.Errors.processErrorMessages(Errors.java:170)\n    at com.sun.jersey.spi.inject.Errors.postProcess(Errors.java:136)\n    at com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:199)\n    at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:765)\n    at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:760)\n    at com.sun.jersey.spi.container.servlet.ServletContainer.initiate(ServletContainer.java:489)\n    at com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.initiate(ServletContainer.java:319)\n    at com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:609)\n    at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:210)\n    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:374)\n    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:557)\n    at javax.servlet.GenericServlet.init(GenericServlet.java:212)\n    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1161)\n    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:806)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)\n    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)\n    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)\n    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)\n    at java.lang.Thread.run(Unknown Source)\n\nJun 18, 2013 10:55:17 AM org.apache.catalina.core.StandardWrapperValve invoke\nSEVERE: Allocate exception for servlet Home Bulletin\ncom.sun.jersey.spi.inject.Errors$ErrorMessagesException\n    at com.sun.jersey.spi.inject.Errors.processErrorMessages(Errors.java:170)\n    at com.sun.jersey.spi.inject.Errors.postProcess(Errors.java:136)\n    at com.sun.jersey.spi.inject.Errors.processWithErrors(Errors.java:199)\n    at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:765)\n    at com.sun.jersey.server.impl.application.WebApplicationImpl.initiate(WebApplicationImpl.java:760)\n    at com.sun.jersey.spi.container.servlet.ServletContainer.initiate(ServletContainer.java:489)\n    at com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.initiate(ServletContainer.java:319)\n    at com.sun.jersey.spi.container.servlet.WebComponent.load(WebComponent.java:609)\n    at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:210)\n    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:374)\n    at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:557)\n    at javax.servlet.GenericServlet.init(GenericServlet.java:212)\n    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1161)\n    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:806)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)\n    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)\n    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)\n    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)\n    at java.lang.Thread.run(Unknown Source)\n</code></pre>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134543122,
          "body": "Why do you need a library if a single line already resolves your problem? What is missing in your question?"
        },
        {
          "comment_id": 134543248,
          "body": "It isn&#39;t clear what you are trying to do. What you have shown isn&#39;t a way to replace single backslash with three backslash, it is a way to prefix every quote with three backslash."
        },
        {
          "comment_id": 134544687,
          "body": "So, what do you have against using the standard library / API, as you did in your example?"
        }
      ],
      "last_activity_date": 1684611426,
      "question_id": 76296786,
      "body": "<p>I want to replace single backslash with three backslash. I want to do this by using some java library .</p>\n<p>I have tried this :</p>\n<pre><code>class A {\n    public static void main(String[] args) {\n        String s = &quot;ABC \\&quot;foo xyz \\&quot;&quot;;\n        String res = s.replace(&quot;\\&quot;&quot;, &quot;\\\\\\\\\\\\\\&quot;&quot;);\n        System.out.println(res);\n    }\n}\n</code></pre>\n<p>It is working but I want to do it by using some java library. I tried the below apache library but it is not working.</p>\n<pre><code>String escaped = StringEscapeUtils.escapeJava(s1);\n</code></pre>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134543600,
          "body": "There&#39;s a lot of code here already, and while somebody may of course always happen to spot the problem, the chances of that go drastically up if you do debugging on your local system and provide us with the results of that. So: If you set a breakpoint on each line of the code you shared, run the code in a debugger, and then check the value of each variable on each line, which is the <b>first</b> line that doesn&#39;t do what you expect it to do?"
        },
        {
          "comment_id": 134543601,
          "body": "If you&#39;r new to debugging Android apps: the Android docs have a great page on <a href=\"https://developer.android.com/studio/debug\" rel=\"nofollow noreferrer\">debugging your app</a> to get you started with, including the section on <a href=\"https://developer.android.com/studio/debug#breakPoints\" rel=\"nofollow noreferrer\">working with breakpoints</a> and <a href=\"https://developer.android.com/studio/debug#variablesAndWatches\" rel=\"nofollow noreferrer\">inspecting varialbles</a>."
        }
      ],
      "last_activity_date": 1684611344,
      "question_id": 76296968,
      "body": "<p>I'm writing an app similar to Blablacar in Android Studio and Firebase. So far you can set rides, make reservations, etc. I need to implement the messaging system. So far, the messages get sent (i can see it on the firebase console) but the class that is implementing all of this doesn't manage to retrieve them from the database.</p>\n<p>This is the class for the message thread:</p>\n<pre><code>public class MessageThreadActivity extends AppCompatActivity {\n    private RecyclerView recyclerViewMessages;\n    private EditText editTextMessage;\n    private Button buttonSendMessage;\n    private CollectionReference conversationsRef;\n    private CollectionReference messagesRef;\n    private String conversationId;\n    private String currentUserId;\n    private MessageAdapter messageAdapter;\n    private List&lt;Message&gt; messageList;\n\n    private static Passenger passenger;\n    private static Ride ride;\n\n    public static void setPassenger(Passenger p) {\n        passenger = p;\n    }\n\n    public static void setRide(Ride r) {\n        ride = r;\n    }\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_message_thread);\n        messageList = new ArrayList&lt;&gt;();\n        recyclerViewMessages = findViewById(R.id.recyclerViewMessages);\n        editTextMessage = findViewById(R.id.editTextMessage);\n        buttonSendMessage = findViewById(R.id.buttonSendMessage);\n\n        currentUserId = User.getSessionUser().getUsername();\n\n        // Get a reference to the &quot;conversations&quot; collection in Firestore\n        conversationsRef = FirebaseFirestore.getInstance().collection(&quot;conversations&quot;);\n\n        // Retrieve the conversation document from Firestore or create a new one\n        getOrCreateConversation();\n\n        buttonSendMessage.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                String messageText = editTextMessage.getText().toString().trim();\n                if (!messageText.isEmpty()) {\n                    // Create a new message object\n                    String messageId = messagesRef.document().getId();\n                    Message message = new Message(messageId, messageText, currentUserId);\n\n                    // Save the message to Firestore\n                    messagesRef.document(messageId).set(message)\n                            .addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n                                @Override\n                                public void onComplete(@NonNull Task&lt;Void&gt; task) {\n                                    if (task.isSuccessful()) {\n                                        // Clear the message input field\n                                        editTextMessage.setText(&quot;&quot;);\n                                    } else {\n                                        // Handle the error while saving the message\n                                        Log.e(&quot;MessageThreadActivity&quot;, &quot;Failed to send message: &quot; + task.getException().getMessage());\n                                    }\n                                }\n                            });\n                }\n            }\n        });\n    }\n\n    // Retrieve the conversation document from Firestore or create a new one\n    private void getOrCreateConversation() {\n        // Create a query to find the conversation between the passenger and driver\n        Query query = conversationsRef\n                .whereEqualTo(&quot;passengerId&quot;, passenger.getPassengerId())\n                .whereEqualTo(&quot;driverId&quot;, ride.getDriverId());\n\n        // Execute the query\n        query.get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\n            @Override\n            public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\n                if (task.isSuccessful()) {\n                    QuerySnapshot snapshot = task.getResult();\n                    if (snapshot != null &amp;&amp; !snapshot.isEmpty()) {\n                        // Existing conversation found\n                        DocumentSnapshot document = snapshot.getDocuments().get(0);\n                        conversationId = document.getId();\n                        Conversation conversation = document.toObject(Conversation.class);\n                        setUpUI(conversation);\n                    } else {\n                        // Conversation not found, create a new one\n                        createNewConversation();\n                    }\n                } else {\n                    // Handle any errors that occur while retrieving data\n                    Log.e(&quot;MessageThreadActivity&quot;, &quot;Failed to retrieve conversation: &quot; + task.getException().getMessage());\n                }\n            }\n        });\n    }\n\n    // Create a new conversation in the database\n    private void createNewConversation() {\n        // Create a new Conversation object with necessary data\n        Conversation conversation = new Conversation();\n        conversation.setPassengerId(passenger.getPassengerId());\n        conversation.setDriverId(ride.getDriverId());\n\n        // Add the conversation to the &quot;conversations&quot; collection in Firestore\n        conversationsRef.add(conversation).addOnCompleteListener(new OnCompleteListener&lt;DocumentReference&gt;() {\n            @Override\n            public void onComplete(@NonNull Task&lt;DocumentReference&gt; task) {\n                if (task.isSuccessful()) {\n                    // Conversation created successfully\n                    DocumentReference conversationRef = task.getResult();\n                    conversationId = conversationRef.getId();\n                    setUpUI(conversation);\n                } else {\n                    // Handle the error while creating the conversation\n                    Log.e(&quot;MessageThreadActivity&quot;, &quot;Failed to create conversation: &quot; + task.getException().getMessage());\n                }\n            }\n        });\n    }\n\n    private void setUpUI(Conversation conversation) {\n        // Get a reference to the &quot;messages&quot; collection of the conversation in Firestore\n        messagesRef = conversationsRef.document(conversationId).collection(&quot;messages&quot;);\n\n        // Set up a query to retrieve the messages in chronological order\n        Query query = messagesRef.orderBy(&quot;timestamp&quot;);\n\n        // Create a message adapter\n        messageAdapter = new MessageAdapter(messageList);\n\n        // Set up the RecyclerView with a LinearLayoutManager\n        LinearLayoutManager layoutManager = new LinearLayoutManager(this);\n        recyclerViewMessages.setLayoutManager(layoutManager);\n        recyclerViewMessages.setAdapter(messageAdapter);\n\n        // Listen for changes in the query\n        query.addSnapshotListener(this, new EventListener&lt;QuerySnapshot&gt;() {\n            @Override\n            public void onEvent(@Nullable QuerySnapshot snapshots, @Nullable FirebaseFirestoreException e) {\n                if (e != null) {\n                    // Handle any errors that occur while listening for updates\n                    Log.e(&quot;MessageThreadActivity&quot;, &quot;Failed to listen for messages: &quot; + e.getMessage());\n                    return;\n                }\n\n                // Clear the message list\n                messageList.clear();\n\n                // Iterate through the document snapshots and add messages to the list\n                for (DocumentSnapshot snapshot : snapshots) {\n                    Message message = new Message(snapshot.getString(&quot;id&quot;), snapshot.getString(&quot;text&quot;), snapshot.getString(&quot;senderId&quot;));\n                    if (message != null) {\n                        messageList.add(message);\n                    }\n                }\n\n                // Notify the adapter that the data has changed\n                messageAdapter.notifyDataSetChanged();\n\n                if (messageList.size() &gt; 0) {\n                    // Scroll to the bottom of the RecyclerView\n                    recyclerViewMessages.scrollToPosition(messageList.size() - 1);\n                }\n            }\n        });\n\n        // Retrieve the initial set of messages\n        query.get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\n            @Override\n            public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\n                if (task.isSuccessful()) {\n                    // Clear the message list before adding new messages\n                    messageList.clear();\n\n                    // Iterate through the document snapshots and add messages to the list\n                    for (DocumentSnapshot snapshot : task.getResult()) {\n                        Message message = new Message(snapshot.getString(&quot;id&quot;), snapshot.getString(&quot;text&quot;), snapshot.getString(&quot;senderId&quot;));\n                        if (message != null) {\n                            messageList.add(message);\n                        }\n                    }\n\n                    // Notify the adapter that the data has changed\n                    messageAdapter.notifyDataSetChanged();\n\n                    if (messageList.size() &gt; 0) {\n                        // Scroll to the bottom of the RecyclerView\n                        recyclerViewMessages.scrollToPosition(messageList.size() - 1);\n                    }\n                } else {\n                    // Handle any errors that occur while retrieving data\n                    Log.e(&quot;MessageThreadActivity&quot;, &quot;Failed to retrieve messages: &quot; + task.getException().getMessage());\n                }\n            }\n        });\n    }\n}\n</code></pre>\n<p>The messages are retrieved in setUpUI. The variables conversation and conversationId are ok, but in onEvent shapshots contains no documents, it doesn't iterate once through the for.</p>\n<p>Could you please help? If i should provide more portions of code, please let me know. I have no idea what i'm doing wrong here.</p>\n<p>I tried using the query, tried using ListenerRegistration instead to no avail, i'm not sure what else to try. The snapshots still contain no documents.</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134539543,
          "body": "Have you read the error message? <code>&#39;com.example.grademanagement_hamzarami.models.Student.module&zwnj;&#8203;s&#39; is &#39;mappedBy&#39; a property named &#39;student&#39; which does not exist in the target entity &#39;com.example.grademanagement_hamzarami.models.Module&#39;</code>"
        },
        {
          "comment_id": 134540168,
          "body": "&quot;you are using jakarta&quot;..but (in Student): <code>import javax.persistence..</code> this is &quot;contradictory&quot; (to what i imagine under &quot;using jakarta&quot;)"
        },
        {
          "comment_id": 134541053,
          "body": "@xerx593 I thought i could use both libraries in the same time but even I remove javax and use jakarta instead in all classes the error still the same."
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 134541174,
              "body": "Thanks for your comment, I really appreciate it, but even after I modify the relationships the problem still the same. I&#39;ve added &quot;Module&quot; and &quot;Subject&quot; classes for more details."
            },
            {
              "comment_id": 134541347,
              "body": "You have not used everything required from <a href=\"https://www.baeldung.com/jpa-many-to-many\" rel=\"nofollow noreferrer\">baeldung.com/jpa-many-to-many</a>"
            },
            {
              "comment_id": 134542123,
              "body": "I&#39;ve added &quot;JoinTable&quot; and I made some changes but it didn&#39;t works"
            }
          ],
          "answer_id": 76294985,
          "body": "<p>Your Module @Entity lacks a student field so your module table lacks this column.</p>\n<p>However, I suspect that your have a model problem.</p>\n<p>The relationship between Student and Module is ManyToMany (aka associative), ie a Student can enrole in many Modules and a Module can be presented to many Students.</p>\n<p><a href=\"https://www.baeldung.com/jpa-many-to-many\" rel=\"nofollow noreferrer\">This</a> almost the same model if you substitute Course of Module.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 134541997,
              "body": "I&#39;ve added &quot;mappedBy = &quot;students&quot; and used Set instead of List but the error still the same"
            }
          ],
          "answer_id": 76295765,
          "body": "<p>Modify Student entity like this:</p>\n<pre><code>@JsonManagedReference\n@ManyToMany(mappedBy = &quot;students&quot;)\nprivate List&lt;Module&gt; modules;\n</code></pre>\n<p>And also you should use Set instead of List for all the relations.</p>\n<p>EDIT: Each entity must have getters and setters for each and every field.</p>\n"
        }
      ],
      "last_activity_date": 1684611341,
      "question_id": 76294528,
      "body": "<p>I'am using jakarta and when I run the app the &quot;Student&quot; and &quot;Teacher&quot; tables didn't created and only the &quot;User&quot; table is created. What could be the problem ?</p>\n<h2>User class</h2>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import jakarta.persistence.*;\n\nimport java.io.Serializable;\n\n@Entity\npublic class User implements Serializable {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(nullable = false, updatable = false)\n    private Long id;\n    private String first_name;\n    private String last_name;\n\n\n    public User(String first_name, String last_name) {\n        this.first_name = first_name;\n        this.last_name = last_name;\n    }\n\n    public User() {}\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<h2>Student class</h2>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import com.fasterxml.jackson.annotation.JsonManagedReference;\nimport jakarta.persistence.*;\n\nimport java.io.Serializable;\nimport java.util.Set;\n\n\n@Entity\npublic class Student extends User implements Serializable {\n\n    @Id\n    @GeneratedValue(strategy = jakarta.persistence.GenerationType.IDENTITY)\n    @Column(nullable = false, updatable = false)\n    private Long id;\n\n    private String first_name;\n    private String last_name;\n\n    @JsonManagedReference\n    @ManyToMany(mappedBy = \"students\")\n@JoinTable(\n        name = \"student_module\",\n        joinColumns = @JoinColumn(name = \"student_id\"),\n        inverseJoinColumns = @JoinColumn(name = \"module_id\"))\nprivate Set&lt;Module&gt; modules;\n\n    private double moyenneGenerale;\n\n\n    public Student(String first_name, String last_name) {\n        super(first_name, last_name);\n    }\n\n    public Student() {\n    }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<h2>Module class:</h2>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import jakarta.persistence.*;\n\nimport java.io.Serializable;\nimport java.util.Set;\n\n@Entity\npublic class Module implements Serializable {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(nullable = false, updatable = false)\n    private Long id;\n\n    @OneToMany\n    private Set&lt;Subject&gt; subjects;\n\n    @ManyToMany(mappedBy = \"modules\")\n    private Set&lt;Student&gt; students;\n\n\n    public Module(Set&lt;Subject&gt; subjects) {\n\n    }\n\n    public Module() {}\n\n\n    public Long getId() {\n        return id;\n    }\n\n    public Set&lt;Subject&gt; getSubjects() {\n        return subjects;\n    }\n\n    public void setSubjects(Set&lt;Subject&gt; subjects) {\n        this.subjects = subjects;\n    }\n\n    public void calculMoyenne() {\n\n    }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<h2>Subject class:</h2>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import jakarta.persistence.*;\n\n@Entity\npublic class Subject {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(nullable = false, updatable = false)\n    private Long id;\n    private String name;\n    private int coefficient;\n\n    @ManyToOne\n    @JoinColumn(name = \"module_id\")\n    private Module module;\n\n\n    public Subject(String name, int coefficient, Module module) {\n        this.name = name;\n        this.coefficient = coefficient;\n        this.module = module;\n    }\n\n    public Subject() {}\n\n\n    public Long getId() {\n        return id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public int getCoefficient() {\n        return coefficient;\n    }\n\n    public void setCoefficient(int coefficient) {\n        this.coefficient = coefficient;\n    }\n\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<blockquote>\n<p>ERROR 7576 --- [           main]\nj.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA\nEntityManagerFactory: Collection\n'com.example.grademanagement_hamzarami.models.Student.modules' is\n'mappedBy' a property named 'student' which does not exist in the\ntarget entity 'com.example.grademanagement_hamzarami.models.Module'</p>\n</blockquote>\n<blockquote>\n<p>Error creating bean with name 'entityManagerFactory' defined in class\npath resource\n[org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]:\nCollection\n'com.example.grademanagement_hamzarami.models.Student.modules' is\n'mappedBy' a property named 'student' which does not exist in the\ntarget entity 'com.example.grademanagement_hamzarami.models.Module'</p>\n</blockquote>\n"
    },
    {
      "comments": [
        {
          "comment_id": 28058779,
          "body": "What? drjava is telling you something--what is it? Who says you&#39;re missing a variable? What does an empty parenthesis have to do with anything?"
        }
      ],
      "answers": [
        {
          "answer_id": 18993497,
          "body": "<blockquote>\n  <p>I'm in the final stages of testing before I release the alpha version of a program I am writing.</p>\n</blockquote>\n\n<p>You're creating a professional application? Please do tell us more about this.</p>\n\n<hr>\n\n<blockquote>\n  <p>I understand what drjava is telling me, that I'm missing a variable, but I also don't understand because I never made a variable under the name \"()\". I'm not even sure you can set any type of variable to a open-close parenthesis. </p>\n</blockquote>\n\n<p>When posting questions here, if you have an error message from the compiler, please post the entire error message with your question. Don't paraphrase it. And indicate by obvious comment in your code, i.e., <code>// ****** error here *****</code> where the error is occurring.</p>\n\n<hr>\n\n<blockquote>\n  <p>Anyways I was testing and while it works, it doesn't the way I want it to. I entered into the scanner \"Mr. B.\" without the quotes of course. The program did not print the B. I'm thinking it might be the space in between Mr. and B, because other inputs with a space did the same.</p>\n</blockquote>\n\n<p>Don't use <code>Scanner#next()</code> which gets only the next token -- the next word before reaching whitespace (here, Mr.), and will not get the rest of the text on the line. Instead use <code>Scanner#nextLine()</code> which gets you the whole line. </p>\n\n<p>For example:</p>\n\n<pre><code>Scanner ownersname = new Scanner(System.in);\n// String sownersname = ownersname.next(); // *** not this ***\nString sownersname = ownersname.nextLine(); // *** but rather this ***\nSystem.out.println(sownersname + \"? That is a nice name.\");\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p>I can not release a version of my program knowing there is a GIANT glitch in the code. </p>\n</blockquote>\n\n<p>Seriously, you're creating a professional application? I'm not yet at that stage, which is why I ask.</p>\n\n<hr>\n\n<blockquote>\n  <p>I'm wondering why, and I tried to fix it by changing ownersname.next(); to ownersname.nextLine and ownersname.next and ownersname.nextScanner and ownername.nextScanner. This is where the error comes in, when it says it can't find the variable until I change it back to it's original code, which is below.</p>\n</blockquote>\n\n<p>I'd be curious to see your <code>nextLine()</code> method attempt, because that is the solution. Perhaps you were trying to call the method without using the method parenthesis. </p>\n\n<p>I also assume that you're familiar with the Java API and have looked up the Scanner entry for it. If you did, you would see right away that there is no <code>nextScanner()</code> method for this class. This is one reason I have to wonder about your making a professional application at your stage. Again, I don't feel that I'm at the stage yet to create one yet, so please don't take this as an insult, just a curiosity. </p>\n"
        }
      ],
      "last_activity_date": 1684611153,
      "question_id": 18993483,
      "body": "<p>I'm in the final stages of testing before I release the alpha version of a program I am writing. This may be a silly question but I just can't seem to figure it out. I understand what drjava is telling me, that I'm missing a variable, but I also don't understand because I never made a variable under the name \"()\". I'm not even sure you can set any type of variable to a open-close parenthesis. Anyways I was testing and while it works, it doesn't the way I want it to. I entered into the scanner \"Mr. B.\" without the quotes of course. The program did not print the B. I'm thinking it might be the space in between Mr. and B, because other inputs with a space did the same. I can not release a version of my program knowing there is a GIANT glitch in the code. I'm wondering why, and I tried to fix it by changing ownersname.next(); to ownersname.nextLine and ownersname.next and ownersname.nextScanner and ownername.nextScanner. This is where the error comes in, when it says it can't find the variable until I change it back to it's original code, which is below.</p>\n\n<pre><code>Scanner ownersname = new Scanner(System.in);\n   String sownersname = ownersname.next();\n   System.out.println(sownersname + \"? That is a nice name.\");\n</code></pre>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134032206,
          "body": "Shouldn&#39;t those properties have <code>value=&quot;true&quot;</code>/<code>value=&quot;false&quot;</code> instead of <code>value=&quot;Boolean.TRUE&quot;</code>/<code>value=&quot;Boolean.FALSE&quot;</code>?"
        },
        {
          "comment_id": 134054707,
          "body": "also tried like you said, and same result, anyway both should work, this format is used throughout our reports for other parameters in other report and seem to work with this format..."
        }
      ],
      "answers": [
        {
          "answer_id": 76055806,
          "body": "<p>I found this Jasper Reports spec :</p>\n<p><a href=\"https://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/fill/TextMeasurer.html\" rel=\"nofollow noreferrer\">https://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/fill/TextMeasurer.html</a></p>\n<p>Talking about most ot the available parameters for wraping text , and added  the property :</p>\n<pre><code>&lt;property name=&quot;net.sf.jasperreports.text.truncate.at.char&quot; value=&quot;false&quot;/&gt;\n</code></pre>\n<p>based on what I could understand from the specs this tell jasper not to break at caracters, but only a words... And the issue is solved !</p>\n<p>full Text field is now like this :</p>\n<pre><code>&lt;textField textAdjust=&quot;ScaleFont&quot; isBlankWhenNull=&quot;true&quot;&gt;\n                &lt;reportElement stretchType=&quot;ElementGroupBottom&quot; x=&quot;10&quot; y=&quot;124&quot; width=&quot;771&quot; height=&quot;396&quot; isPrintInFirstWholeBand=&quot;true&quot; isPrintWhenDetailOverflows=&quot;true&quot; uuid=&quot;bb2d4ab6-fc46-4edd-87ad-18dc4d32d461&quot;&gt;\n                    &lt;property name=&quot;net.sf.jasperreports.print.keep.full.text&quot; value=&quot;false&quot;/&gt;\n                    &lt;property name=&quot;net.sf.jasperreports.text.save.line.breaks&quot; value=&quot;true&quot;/&gt;\n                    &lt;property name=&quot;net.sf.jasperreports.export.pdf.force.linebreak.policy&quot; value=&quot;true&quot;/&gt;\n                    &lt;property name=&quot;net.sf.jasperreports.text.truncate.at.char&quot; value=&quot;false&quot;/&gt;\n                &lt;/reportElement&gt;\n                &lt;textElement textAlignment=&quot;Center&quot; verticalAlignment=&quot;Middle&quot; markup=&quot;html&quot;&gt;\n                    &lt;font size=&quot;136&quot; isBold=&quot;true&quot; fontName=&quot;Helvetica&quot;/&gt;\n                &lt;/textElement&gt;\n                &lt;textFieldExpression&gt;&lt;![CDATA[$P{letrero}]]&gt;&lt;/textFieldExpression&gt;\n    &lt;/textField&gt;\n</code></pre>\n<p>Hope this will help anyone with a similar issue !</p>\n<p>EDIT : This configuration solved the issue in some but not all situations, if the text fits on 2 lines by wrapping one carater of the first word Jasper will still prefer to do that than to slightly reduce the font, but now, at least, if the  one caracter wrapping was occuring on a second or third line the behaviour is now as expected and jasper will rather slighlty reduce font size than wrapping one single digit to a new line... I guess the &quot;ScaleFont&quot; algorithm and the &quot;Truncate&quot; policy are just having having  difficulties working together. So if anyone finds a better solution working always, I am still interested in a better answer than the one I found.</p>\n<p>EDIT 2 : Final Solution found, the issue was a font issue, adding : fontName=&quot;Helvetica&quot; in the text element works so far. I think that without specifying a font Jasper sets the scaling required based on its default font, and then the if the pdf has the liberty to choose a slightly different font, the scaling defined by Jasper might not give the expected effect. Well just asuming this part...</p>\n"
        }
      ],
      "last_activity_date": 1684611113,
      "question_id": 75988239,
      "body": "<p>I have a Java project that compiles a Jasper XML on the fly and then exports to PDF.</p>\n<p>In one of the text field I need JasperReports not to cut the words, and rather to adapt the font size. The font size change works fine, when text is large Jasper reduces the font and wraps the text, but the &quot;do not cut words&quot; part does not work, many times, the PDF will end up with the text over several lines, but the wrapping will cut words in very illogical part, even sometime just leaving one letter of a word on the next line. Can you tell me what I am doing wrong?</p>\n<p>I have added and tested all the parameters I found in the Jasper documentation and with Google about breaking words, but none, or any combination of them changes the results.</p>\n<p>The text field culprit is here:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;textField textAdjust=&quot;ScaleFont&quot; isBlankWhenNull=&quot;true&quot;&gt;\n    &lt;reportElement stretchType=&quot;ElementGroupBottom&quot; x=&quot;10&quot; y=&quot;124&quot; width=&quot;771&quot;\n     height=&quot;396&quot; isPrintInFirstWholeBand=&quot;true&quot; isPrintWhenDetailOverflows=&quot;true&quot;\n     uuid=&quot;bb2d4ab6-fc46-4edd-87ad-18dc4d32d461&quot;&gt;\n        &lt;property name=&quot;net.sf.jasperreports.print.keep.full.text&quot; value=&quot;Boolean.TRUE&quot;/&gt;\n        &lt;property name=&quot;net.sf.jasperreports.print.html.wrap.break.word&quot; value=&quot;Boolean.FALSE&quot;/&gt;\n        &lt;property name=&quot;net.sf.jasperreports.text.save.line.breaks&quot; value=&quot;Boolean.FALSE&quot;/&gt;\n    &lt;/reportElement&gt;\n    &lt;textElement textAlignment=&quot;Center&quot; verticalAlignment=&quot;Middle&quot; markup=&quot;html&quot;&gt;\n        &lt;font size=&quot;140&quot; isBold=&quot;true&quot;/&gt;\n    &lt;/textElement&gt;\n    &lt;textFieldExpression&gt;&lt;![CDATA[$P{letrero}]]&gt;&lt;/textFieldExpression&gt;\n&lt;/textField&gt;\n</code></pre>\n<p>The Java part that generate the report is here:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    parameters.put(JRJpaQueryExecuterFactory.PARAMETER_JPA_ENTITY_MANAGER, entityManager);\n    JasperReport report = JasperCompileManager.compileReport(Util.getFileInClassPathAsInputStream(&quot;/web/report/name-sign.jrxml&quot;));\n    \n    JasperPrint print = JasperFillManager.fillReport(report, parameters, new JREmptyDataSource());\n    \n    return JasperExportManager.exportReportToPdf(print);\n} catch (JRException ex) {\n    ex.printStackTrace();\n    logger.error( ex.getMessage());\n}\nreturn null;\n</code></pre>\n"
    },
    {
      "answers": [
        {
          "comments": [
            {
              "comment_id": 16663420,
              "body": "Thanks O.D, I&#39;ve never had to do such a thing until now. I wrote the test to write a file that will be sent to other vendors in production code. My test writes the file to disk for me to send to vendors to get approval, once approved the test won&#39;t be needed but could be useful later when something changes and need to &quot;re-approve&quot; the output."
            },
            {
              "comment_id": 16663869,
              "body": "but why are you using a &quot;unit test&quot; for such purpose? I think even have a separate class with main() method to serve for such purpose is even more appropriate than abusing unit test"
            }
          ],
          "answer_id": 12400310,
          "body": "<p>I would write a routine which determines where the file should be written to, which i unitest afterwards, in general i try to avoid (as possible) accessing persistent data in unittests, like file IO or database access, this has performance reasons and others too.</p>\n\n<p>Take a look at this asnwer: <a href=\"https://stackoverflow.com/a/8032504/395659\">https://stackoverflow.com/a/8032504/395659</a></p>\n"
        },
        {
          "answer_id": 12400500,
          "body": "<p>Temporary files should be created into temporary directory. Retrieve it using call <code>System.getProperty(\"java.io.tmpdir\")</code></p>\n\n<p>Temporary file should be temporary, i.e. should be removed when it is not needed. To acheive this do not forget to delete it in <code>finally</code> block or in code that runs after the test, i.e.:</p>\n\n<pre><code>File tmpFile = ...\ntry {\n   // deal with tempFile\n} finally {\n    tempFile.delete();\n}\n</code></pre>\n\n<p>and/or</p>\n\n<pre><code>public class MyTestCase {\n    private File tmpFile = null;\n\n    @Before\n    public void setUp() {\n        tmpFile = ...;\n    }\n\n    @Test\n    public void setUp() {\n        // deal with tmpFile\n    }\n\n    @After\n    public void setUp() {\n        tmpFile.delete();\n    }\n}\n</code></pre>\n\n<p>Use <code>File.createTempFile(String prefix, String suffix)</code> if it is possible, i.e. you can then use file with special name generated by <code>createTempFile()</code>.</p>\n\n<p>Use <code>file.deleteOnExit()</code>. This creates hook that removes file automatically when JVM is terminated. The file will remain only if JVM was killed with <code>kill -9</code>, so it did not have a chance to run shutdown code. </p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 16663666,
              "body": "Thanks Bohemian, I actually want the file to remain around after exit, so I can send it on to the vendor. I suppose the system temp directory is fine though I did hope to have it in the target directory."
            },
            {
              "comment_id": 16663732,
              "body": "I&#39;ve just attempted this and it turns out the file is in such an obscure place it wouldn&#39;t be wise to use. Ended up in <code>&#47;var&#47;folders&#47;xf&#47;scvh7yr11m1glr4b663n1hcsnv5lf0&#47;T&#47;test2614442&zwnj;&#8203;099335581603.xml</code>"
            },
            {
              "comment_id": 16664529,
              "body": "@BrettRyan No problem - you can specify the directory that is used for temp files - see edited answer"
            },
            {
              "comment_id": 16665999,
              "body": "Thanks Bohemian, I do see merit in being able to set the temp directory, though I do like the ability of having this in a reliable location under the target directory as opposed to requiring a specific location existing on the machine."
            }
          ],
          "answer_id": 12400600,
          "body": "<p>No need to reinvent the wheel...</p>\n\n<p>The JDK provides a way to a create temporary file, and a way to automatically delete it on exit:</p>\n\n<pre><code>File file = File.createTempFile( \"some-prefix\", \"some-ext\");\nfile.deleteOnExit();\n</code></pre>\n\n<p>Use the file and it will be deleted automatically when your test finishes. That's all there is to it.</p>\n\n<p>To specify the directory to use for temporary files, use the overloaded method:</p>\n\n<pre><code>File file = File.createTempFile( \"prefix\", \"ext\", new File(\"/some/dir/path\"));\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 16663795,
              "body": "Thanks maba, this is a similar problem to Bohemian, the file ends up in an obscure location. I actually want the file after the test finishes."
            },
            {
              "comment_id": 16664050,
              "body": "@BrettRyan OK, updated with how to change working directory for the surefire plugin. That should do the trick."
            },
            {
              "comment_id": 16665977,
              "body": "Fantastic, thanks maba, that&#39;s perfect and will always be consistent on all machines that the test is run on."
            },
            {
              "comment_id": 35378703,
              "body": "Thanks for leaving the original answer. Thats what I needed."
            },
            {
              "comment_id": 70391385,
              "body": "JUNIT does not guarantee automatic  deletion you have to do it   @Rule public TemporaryFolder folder = TemporaryFolder.builder().assureDeletion().build();"
            },
            {
              "comment_id": 73220051,
              "body": "@maba <a href=\"http://junit.org/junit4/javadoc/4.12/org/junit/rules/TemporaryFolder.html\" rel=\"nofollow noreferrer\">JUnit TemporaryFolder</a>. Please clarify the above comment. It does seem not to guarantee deletion."
            },
            {
              "comment_id": 79437218,
              "body": "For JUnit5, see <a href=\"http://www.codeaffine.com/2016/04/06/replace-rules-in-junit5/\" rel=\"nofollow noreferrer\">this article</a>"
            }
          ],
          "answer_id": 12400605,
          "body": "<p>You could try to use <a href=\"http://junit.org/junit4/javadoc/latest/org/junit/rules/TemporaryFolder.html\" rel=\"noreferrer\">TemporaryFolder</a> JUnit @Rule as described <a href=\"http://garygregory.wordpress.com/2010/01/20/junit-tip-use-rules-to-manage-temporary-files-and-folders/\" rel=\"noreferrer\">here</a></p>\n<blockquote>\n<p>The <a href=\"http://junit.org/junit4/javadoc/latest/org/junit/rules/TemporaryFolder.html\" rel=\"noreferrer\">TemporaryFolder</a> creates a folder in the default temporary file directory specified by the system property java.io.tmpdir. The method newFile creates a new file in the temporary directory and newFolder creates a new folder.</p>\n<p>When the test method finishes, JUnit automatically deletes all files and directories in and including the TemporaryFolder. JUnit guarantees to delete the resources, whether the test passes or fails.</p>\n</blockquote>\n<hr />\n<p><strong>After Question Updated</strong></p>\n<p>You can change the working directory used by <a href=\"http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#workingDirectory\" rel=\"noreferrer\"><code>maven-surefire-plugin</code></a>.</p>\n<pre><code>&lt;plugins&gt;\n    [...]\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.12.3&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;workingDirectory&gt;${project.build.directory}&lt;/workingDirectory&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    [...]\n&lt;/plugins&gt;\n</code></pre>\n<p>You can change that working directory to anything you need for your tests like <code>${project.build.directory}/my_special_dir/</code>.</p>\n<p>The working directory in surefire plugin only affects tests being run and ONLY for tests being conducted by maven. If you run your tests from within an IDE the working directory will be something else.</p>\n"
        },
        {
          "answer_id": 12400608,
          "body": "<p>You will want to be able to run your tests both from an IDE as well as from Maven, so best practice is to write your tests so that they do not assume they are being run within Maven.</p>\n\n<p>One of the best ways to deal with temporary files is using <a href=\"http://garygregory.wordpress.com/2010/01/20/junit-tip-use-rules-to-manage-temporary-files-and-folders/\" rel=\"nofollow\">junit rules</a>. This allows you to rely on the rule to clean up for you.</p>\n"
        },
        {
          "answer_id": 12403431,
          "body": "<p>To state it beforehand, I am strongly against doing such things in unit test.  I haven't really tried this but it should work:</p>\n\n<p>Assume you are using surefire plugin, from the document it quoted that you can access the base directory of project under test by <code>System.getProperty(\"basedir\")</code>.  Get it and create files under basedir/target.</p>\n\n<p>A more \"appropriate\" way (as we may have chance that we configured output directory to something else, you can change the surefire  plugin config to something like this:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;version&gt;2.6&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;systemPropertyVariables&gt;\n            &lt;myOutDir&gt;${project.build.outputDirectory}&lt;/myOutDir&gt;\n        &lt;/systemPropertyVariables&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>Then you can get the actual output directory by <code>System.getProperty(\"myOutDir\")</code> in your test.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 134543444,
              "body": "This is the most elegant and modern solution currently."
            }
          ],
          "answer_id": 72318174,
          "body": "<p>Since JUnit 5 you can use <a href=\"https://junit.org/junit5/docs/5.4.1/api/org/junit/jupiter/api/io/TempDir.html\" rel=\"nofollow noreferrer\">@TempDir</a>. It will be deleted (including its content) after the test(s).</p>\n<p>either one temporary directory for every test:</p>\n<pre><code>@Test\nvoid testWithTempFiles(@TempDir Path tempDir) \n    Path file = tempDir.resolve(&quot;temp_file.txt&quot;);\n    ...\n}\n\n</code></pre>\n<p>or a single one for all tests in the class:</p>\n<pre><code>@TempDir\nstatic Path tempDir\n\n@Test\nvoid testWithTempFiles() \n    Path file = tempDir.resolve(&quot;temp_file.txt&quot;);\n    ...\n}\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684610059,
      "question_id": 12400243,
      "body": "<p>I have written a unit test that writes a file to the file-system, given no path it writes to the working directory; so if executed from the project directory it writes in the project root, if in the projects parent directory it writes to the parents root directory.</p>\n\n<p>So what is the correct way to write to the target directory? Quite possibly a directory inside the target directory?</p>\n\n<p>If I quite simply specify <code>target/</code> with the file it will write to the parent projects target instead of the projects target.</p>\n\n<p><strong>UPDATE</strong>: I actually want the file after the test finishes. The file is for an extraction format for third-parties that needs to be sent to the third parties. The test can be switched on/off to allow me to only run if the format of the file changes for re-approval. It's not a huge problem where the file goes, but I would like something that's easy to find.</p>\n"
    },
    {
      "last_activity_date": 1684609886,
      "question_id": 76296946,
      "body": "<p>I using this code to perform inserts :</p>\n<pre><code>  try (Connection connection = info.getDataSource().getConnection();\n             PreparedStatement statement = connection.prepareStatement(sql);\n        ) {\n            int counter = 0;\n            \n\n            for (Detail row : reporting) {\n                statement.clearParameters();\n                statement.setString(2, row.getInsertionId());\n                ......\n                if(counter % 10000){\n\n                 statement.executeBatch();\n                 statement.clearBatch();\n                }\n          counter++;\n      }\n</code></pre>\n<p>This code is working very good for postgresql but for Azure SQL the inserts are very slow almost 10x more time then postgresql</p>\n<p>Then i added this statement <code>connection.setAutoCommit(false);</code> , Boom the Azure SQL become very fast as good as Postgresql\nI am doing this in the block :</p>\n<pre><code>           statement.executeBatch();\n            connection.commit();\n            statement.clearBatch();\n</code></pre>\n<p>My Question why this is drastic effect on Azure SQL but for Postgresql it has not major effect. Postgresql was very fast without this optimisation why Azure SQL needed this line of code ?</p>\n"
    },
    {
      "answers": [
        {
          "comments": [
            {
              "comment_id": 28608876,
              "body": "Ok, I set nextItem to head in the next(), the next() method returns the first element but calling next element returns the same element. Looks like with every next() call it resets nextItem to head."
            },
            {
              "comment_id": 28609180,
              "body": "Ah ok! I then set head to nextItem before I returned the lastReturned. It works, thanks for bringing the unassigned nextItem to my attention!"
            }
          ],
          "answer_id": 19315627,
          "body": "<p>I don't see where you assign values to <code>private DoubleLinkedNode&lt;E&gt; nextItem;</code> when you create iterator.\nI cannot see the whole code. So I assume that <code>nextItem</code> is null or its <code>next</code> field is null.</p>\n"
        }
      ],
      "last_activity_date": 1684609624,
      "question_id": 19315256,
      "body": "<p>This is a homework question. I have a Double Linked Node class, Circular Double Linked List class which implements <code>Iterable</code>, and a Iterator class that implements Iterator. I understand the concept of an iterator where an implicit cursor sits between two nodes and on a call to <code>next()</code> it returns the node it just jumped over. I created a test class with a new list object. I then created an iterator and called next, I received the correct <code>No Such Element exception</code> but when I added some nodes to the list I received a <code>Null Pointer Exception</code> instead of it returning the last returned node. How can I correct this?</p>\n\n<p>My Node class:</p>\n\n<pre><code>public class DoubleLinkedNode&lt;E&gt;{\nprivate E data;\n\nprivate DoubleLinkedNode&lt;E&gt; next;\n\nprivate DoubleLinkedNode&lt;E&gt; prev;\n\n\npublic DoubleLinkedNode(E data, DoubleLinkedNode&lt;E&gt; next, DoubleLinkedNode&lt;E&gt; prev){\n    this.data = data;\n    this.next = next;\n    this.prev = prev;\n}\n/**\n * Used to construct a node that points to null for its prev and next.\n * @param data Data is a generic variable to be stored in the node.\n */\npublic DoubleLinkedNode(E data){\n    this(data, null, null);\n} \n\n\n//getters\npublic E getData(){\n    return data;\n}\n\npublic DoubleLinkedNode&lt;E&gt; getNext(){\n    return next;\n}\n\npublic DoubleLinkedNode&lt;E&gt; getPrev(){\n    return prev;\n}\n//setters\npublic void setData(E data){\n    this.data = data;\n}\n\npublic void setNext(DoubleLinkedNode&lt;E&gt; next){\n    this.next = next;\n}\n\npublic void setPrev(DoubleLinkedNode&lt;E&gt; prev){\n    this.prev = prev;\n}\n\n@Override public String toString(){\n    if(data == null){\n        return null;\n    }\n    else{\n        return data.toString();\n    }\n}\n\n}\n</code></pre>\n\n<p>The List class with the private inner Iterator class:</p>\n\n<pre><code>import java.util.Iterator;\nimport java.util.ListIterator;\nimport java.util.NoSuchElementException;\n\n\npublic class CircularDoubleLinkedList&lt;E&gt; implements Iterable&lt;E&gt;{\n\nprivate int size;   \nprivate DoubleLinkedNode&lt;E&gt; head;\n\n\npublic CircularDoubleLinkedList(){\n    this.head = null;\n    this.size = 0;      \n}       \n/**\n * Adds an item to the end of the list.\n * \n * @param data The Data that is to be stored in the node.\n */ \npublic void add(E data){    \n    DoubleLinkedNode&lt;E&gt; newNode = new DoubleLinkedNode&lt;E&gt;(data);\n    if(this.head == null){\n        newNode.setNext(newNode);\n        newNode.setPrev(newNode);\n        this.head = newNode;\n        this.size++;\n        //if list is empty create a new node and insert\n    }\n    else{\n        DoubleLinkedNode&lt;E&gt; temp = this.head.getPrev();\n        this.head.getPrev().setNext(newNode);\n        this.head.setPrev(newNode);\n        newNode.setPrev(temp);\n        newNode.setNext(this.head);     \n        this.size++;\n    }\n}\n/**\n * Which adds an item at the specified index.\n * \n * @param index The index in which the new Node is added. \n * @param data The data which is to be stored in the node.\n */\npublic void add(int index, E data){\n    int currIndex = 0;\n    DoubleLinkedNode&lt;E&gt; currNode = this.head;\n    DoubleLinkedNode&lt;E&gt; nextNode = this.head.getNext();\n    DoubleLinkedNode&lt;E&gt; prevNode = this.head.getPrev();\n    DoubleLinkedNode&lt;E&gt; newNode = new DoubleLinkedNode&lt;E&gt;(data);\n    if(index == 0){\n        prevNode.setNext(newNode);\n        currNode.setPrev(newNode);\n        newNode.setPrev(prevNode);\n        newNode.setNext(currNode);\n        this.head = newNode;\n        this.size++;    \n    }\n    else if (index &gt; 0){        \n        while(currIndex != this.size){\n            if(currIndex != index%size){\n                currIndex++;\n                currNode = currNode.getNext();\n                nextNode = nextNode.getNext();\n                prevNode = prevNode.getNext();                  \n            }else{              \n                newNode.setPrev(prevNode);\n                newNode.setNext(currNode);\n                prevNode.setNext(newNode);\n                currNode.setPrev(newNode);\n                currNode = newNode;\n                this.size++;\n                break;                                      \n            }\n        }       \n    }\n    else if (index &lt; 0){\n        while(currIndex != -this.size){\n            if(currIndex != index%size){\n                currIndex--;\n                currNode = currNode.getPrev();\n                prevNode = prevNode.getPrev();\n                nextNode = nextNode.getPrev();\n            }else{              \n                newNode.setNext(nextNode);\n                newNode.setPrev(currNode);\n                currNode.setNext(newNode);\n                nextNode.setPrev(newNode);          \n                currNode = newNode;\n                this.size++;\n                break;                                      \n            }\n        }   \n    }\n}\n/**\n * Returns the data stored at the specified index.\n * \n * @param index The index determines the node whose data is returned.\n * @return Returns the data of the node at the index.\n */\npublic E get(int index){//returns the data stored at the specified index\n    int currIndex = 0;\n    DoubleLinkedNode&lt;E&gt; currNode = this.head;\n    E temp = null;      \n    if(index == 0){//zero case          \n        temp = currNode.getData();\n    }\n    else if(index &gt; 0){//positive           \n        while(currIndex != this.size){\n            if(currIndex != index%size){\n                currIndex++;\n                currNode = currNode.getNext();                              \n            }else{                              \n                temp = currNode.getData();\n                break;                                      \n            }\n        }   \n    }\n    else if(index &lt; 0){//negative       \n        while(currIndex != -this.size){\n            if(currIndex != index%size){\n                currIndex--;\n                currNode = currNode.getPrev();\n            }else{              \n                temp = currNode.getData();\n                break;                                      \n            }\n        }           \n    }\n    return temp;\n}   \n/**\n * Which removes and returns an item from the list.\n * \n * @param index Removes the node at the current index.\n * @return Returns the data of the removed node.\n */\npublic E remove(int index){//which removes and returns an item from the list\n    int currIndex = 0;\n    DoubleLinkedNode&lt;E&gt; currNode = this.head;\n    DoubleLinkedNode&lt;E&gt; nextNode = this.head.getNext();\n    DoubleLinkedNode&lt;E&gt; prevNode = this.head.getPrev();\n    E temp = null;  \n    if(index == 0){\n        temp = currNode.getData();\n        prevNode.setNext(currNode.getNext());\n        nextNode.setPrev(currNode.getPrev());\n        this.head = nextNode;\n        size--;\n    }\n    else if(index &gt; 0){//positive           \n        while(currIndex != this.size){\n            if(currIndex != index%size){\n                currIndex++;\n                currNode = currNode.getNext();\n                nextNode = nextNode.getNext();\n                prevNode = prevNode.getNext();                  \n            }else{                              \n                temp = currNode.getData();\n                prevNode.setNext(currNode.getNext());\n                nextNode.setPrev(currNode.getPrev());\n                currNode = nextNode;\n                size--;\n                break;                                      \n            }\n        }   \n    }\n    else if(index &lt; 0){//negative       \n        while(currIndex != -this.size){\n            if(currIndex != index%size){\n                currIndex--;\n                currNode = currNode.getPrev();\n                prevNode = prevNode.getPrev();\n                nextNode = nextNode.getPrev();\n            }else{              \n                temp = currNode.getData();\n                prevNode.setNext(currNode.getNext());\n                nextNode.setPrev(currNode.getPrev());\n                currNode = prevNode;\n                size--;\n                break;                                      \n            }\n        }           \n    }\n    return temp;\n} \n/**\n * Returns the size.\n * \n * @return\n */\npublic int size(){\n    return size;\n}\n@Override public String toString(){\n    String str = \"[\";\n    int index = 0;\n    DoubleLinkedNode&lt;E&gt; curr = head;\n    if(size == 0){\n        return \"There is no one here to kill.\";         \n    }else{      \n        while (index &lt;this.size) {\n            str += curr.getData();  \n            curr = curr.getNext();\n            index++;\n                if (index&lt;this.size) {\n                    str += \", \";\n                }\n        }\n            str += \"]\";\n    }\n    return str;\n  } \n@Override\npublic Iterator&lt;E&gt; iterator() {\n\n    return new CircularDoubleIterator();\n}   \n// Iterator inner class begins\nprivate class CircularDoubleIterator implements ListIterator&lt;E&gt; {\n\n    private DoubleLinkedNode&lt;E&gt; nextItem;//reference to next item\n    private int index = 0;\n    private DoubleLinkedNode&lt;E&gt; lastReturned;// the last node to be returned by prev() or next()\n                                            // reset to null after a remove() or add()\n\n    @Override\n    public E next() {\n        if(!hasNext()){\n            throw new NoSuchElementException(\"No such element.\");\n        }\n        else{\n                            nextItem = head; //edited 11Sept13\n            lastReturned = nextItem.getNext();\n            nextItem = nextItem.getNext();\n                            head = nextItem; //edited 11Sept13\n            index++;\n            return lastReturned.getData();\n\n\n        }\n    }\n\n    @Override\n    public E previous() {\n        if(!hasPrevious()){\n            throw new NoSuchElementException(\"No such element.\");\n        }\n        else{       \n\n        index--;\n\n        return ;\n        }\n    }\n\n    @Override\n    public int nextIndex() {\n        return index;\n    }\n\n    @Override\n    public int previousIndex() {\n        return index-1;\n    }\n    @Override \n    public boolean hasNext() {  \n        return size != 0;\n    }\n\n    @Override\n    public boolean hasPrevious() {      \n        return size!= 0;\n    }\n    @Override\n    public void remove() {\n    }\n\n    @Override\n    public void set(E theData) {\n        if(lastReturned == null){\n            throw new IllegalStateException();\n        }\n        else{\n        }\n\n    }\n\n    @Override\n    public void add(E theData) {\n        if(size == 0){              \n        }\n        else if(size != 0){\n        }\n\n    }\n\n}\n\n//Iterator inner class ends\n}\n</code></pre>\n"
    },
    {
      "comments": [
        {
          "comment_id": 22118802,
          "body": "If you read the introduction of the javadoc, the cursor is placed between items."
        },
        {
          "comment_id": 22118819,
          "body": "@assylias I am aware of that, thanks a lot for reminding it though."
        },
        {
          "comment_id": 22118862,
          "body": "let&#39;s say you cursor is before n-th element, <code>next</code> will return <code>n</code> and place the cursor after the n-th element. If you call <code>previous</code>, it will return <code>n</code> again and place the cursor before the n-th element, etc. So your assumption <i>I guess that it&#39;s due that after iterator.next() the &quot;cursor&quot; goes in the next position automatically after having returned the current element?</i> is correct."
        },
        {
          "comment_id": 22118948,
          "body": "@assylias thanks a lot for confirming it. cheers!"
        }
      ],
      "last_activity_date": 1684609523,
      "question_id": 15598297,
      "body": "<p>So by reading this from <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/ListIterator.html#next%28%29\" rel=\"nofollow\">http://docs.oracle.com/javase/6/docs/api/java/util/ListIterator.html#next%28%29</a></p>\n\n<p><em>emphasized text</em></p>\n\n<blockquote>\n  <p>E next()</p>\n\n<pre><code>Returns the next element in the list. This method may be called repeatedly\n</code></pre>\n  \n  <p>previous to go back and forth. (<strong>Note that alternating calls to next\n  and previous will return the same element repeatedly</strong>.)</p>\n</blockquote>\n\n<p>I understand what they mean with </p>\n\n<blockquote>\n  <p><strong>Note that alternating calls to next\n  and previous will return the same element repeatedly</strong></p>\n</blockquote>\n\n<p>However I haven't found in the javadoc how it happens. I guess that it's due that after <code>iterator.next()</code> the \"cursor\" goes in the next position automatically after having returned the current element? Might be? So in that case a call to <code>iterator.previous()</code> would just return the same element and set back the cursor to where it was prior to calling <code>iterator.next()</code>. </p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134546370,
          "body": "You have to escape the &#39;=&#39; sign with &#39;%3D&#39; , otherwise Camel will use it as separator for the component params: &quot;ldap:ldapConnection?base=ou%3Dusers,dc%3Dexample,...&quot;"
        }
      ],
      "last_activity_date": 1684609474,
      "question_id": 76296920,
      "body": "<p>I'm currently working on an Apache Camel project and I'm having trouble using the LDAP component for query operations. I'm using Apache Camel version 3.20.4 and the Spring Boot starter.</p>\n<p>I have followed the documentation and configured the LDAP component in my code.\nBut it is giving me an error as &quot;Caused by: javax.naming.directory.InvalidSearchFilterException: Empty filter; remaining name 'ou=users,dc=example,dc=com'&quot;.</p>\n<p>Following are maven dependencies</p>\n<ol>\n<li>apache-camel-core- version 3.20.4</li>\n<li>apache-camel-ldap -version 3.20.4</li>\n</ol>\n<p>Following is code which I am trying</p>\n<pre><code>    public void configure() throws Exception {\n        getContext().setAllowUseOriginalMessage(true);\n        DirContext dirContext = createLdapConnection();\n        getContext().getRegistry().bind(&quot;ldapConnection&quot;, dirContext);\n\n\n        from(&quot;direct:start&quot;)\n                .log(&quot;LDAP Component Started&quot;)\n                .to(&quot;ldap:ldapConnection?base=ou=users,dc=example,dc=com&amp;scope=subtree&quot;)\n                .process(exchange -&gt; {\n                    String result = exchange.getIn().getBody(String.class);\n                    System.out.println(result);\n                });\n    }\n    private static DirContext createLdapConnection() throws NamingException {\n        Hashtable&lt;String, Object&gt; env = new Hashtable&lt;&gt;();\n        env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\n        env.put(Context.PROVIDER_URL, &quot;ldap://localhost:10389&quot;);\n        env.put(Context.URL_PKG_PREFIXES, &quot;com.sun.jndi.url&quot;);\n        env.put(Context.REFERRAL, &quot;ignore&quot;);\n        env.put(Context.SECURITY_AUTHENTICATION, &quot;simple&quot;);\n        env.put(Context.SECURITY_PRINCIPAL, &quot;uid=admin,ou=system&quot;);\n        env.put(Context.SECURITY_CREDENTIALS, &quot;password&quot;);\n        return new InitialDirContext(env);\n    }\n</code></pre>\n<p>I tried another</p>\n<pre><code>.to(&quot;ldap:ldapConnection?base=ou=users,dc=example,dc=com&amp;filter=(objectClass=inetOrgPerson)&quot;)\n</code></pre>\n<p>Could anyone please guide me on how to properly use the Apache Camel LDAP component or Spring LDAP for query operations? Are there any additional configuration settings or considerations that I might be missing? Any help would be greatly appreciated.</p>\n"
    },
    {
      "answers": [
        {
          "comments": [
            {
              "comment_id": 22981227,
              "body": "This is not good for me. Putting code at the end or in a finally block assumes I know which code made the error, ie, it assumes I know the remaining code to be run at the end or in the finally block, which is not the case. Also, it will only trigger once, rather than for every error as Resume Next does. Thanks for the quick response, though."
            },
            {
              "comment_id": 22981325,
              "body": "The <code>on error resume next</code> just says to continue with the next line in the case of an error. If you&#39;re not sure what happened and you just want to continue with the next line, regardless of what line caused an error, then you apparently want to just ignore errors? It&#39;s hard to handle an exception correctly if you don&#39;t know what caused it, so just continuing on seems ill advised. You can do this by wrapping each line with a try/catch block and just having an empty catch that swallows the exception but I would advise against this since you should probably do something if an exception occurs."
            },
            {
              "comment_id": 22981451,
              "body": "I am currently doing just that, wrapping each line with a try catch block. So I should be more specific, it is SQL code; lots of table adds and drops. For my purposes, I don&#39;t need to handle the error, I just need a printout of the exception and for it to continue to try and add and drop more tables."
            }
          ],
          "answer_id": 16095618,
          "body": "<p>Just put the code that you want to run regardless of any error after the catch block.</p>\n\n<pre><code>try {\n    // stuff that could cause error\n} catch(Exception e) {\n    // handle error\n}\n\n// do stuff\n</code></pre>\n\n<p>If you're going to throw an exception from the catch block but you still want the \"do stuff\" code to run, you can put it in a finally block like this:</p>\n\n<pre><code>try {\n    // stuff that could cause error\n} catch(Exception e) {\n    // throw exception here\n} finally {\n  // do stuff that will run even when the exception is thrown\n}\n</code></pre>\n"
        },
        {
          "answer_id": 25368066,
          "body": "<p>There is no equivalent in Java, to VB resume statements; in VB depending on the error case, you can choose to resume at a particular label within your code, in order to re-run the code after fixing the error, similar to a goto statement; this is not possible in java, except when you're inside a loop, then you can use the continue to a defined label block.</p>\n"
        }
      ],
      "last_activity_date": 1684609466,
      "question_id": 16095539,
      "body": "<p>In VB, for error catching there is </p>\n\n<pre><code>Public Sub MySub()\n    On Error GoTo Errr\n    'do stuff\nErrr:\n    'handle error\n    Resume Next\nEnd Sub\n</code></pre>\n\n<p>which uses the magnificent Resume Next command. </p>\n\n<p>In Java, you have a try catch block</p>\n\n<pre><code>try \n{\n//some code\n}\ncatch (Exception e)\n{\n//handle error\n}\n</code></pre>\n\n<p>which seems to be equivalent to the VB error catching, but specifically without the Resume Next option, so Java just quits the entire code block after the error, instead of trying to run the rest of the code after the error. Is there any way to get the power of Resume Next in Java? Thanks!</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134531147,
          "body": "What kind of compression is that? It doesn&#39;t seem to be gzip"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 134533022,
              "body": "So what kind of compression is used in that key?"
            },
            {
              "comment_id": 134533093,
              "body": "@g00se - Compressed/Uncompressed key means in this context a format for a public EC key. A public EC key is an EC point (x, y). The concatenation of x and y coordinate preceded by a 0x04 byte is called uncompressed, the x coordinate preceded by a 0x02 (for an even y coordinate) or 0x03 (for an odd y coordinate) is called compressed format. So both posted keys are compressed EC keys, s. e.g. <a href=\"https://crypto.stackexchange.com/a/70759\">here</a>."
            }
          ],
          "answer_id": 76290700,
          "body": "<p>One option is BouncyCastle and the following implementation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.StringWriter;\nimport java.util.HexFormat;\nimport org.bouncycastle.asn1.x9.X9ObjectIdentifiers;\nimport org.bouncycastle.util.io.pem.PemObject;\nimport org.bouncycastle.util.io.pem.PemWriter;\nimport org.bouncycastle.asn1.sec.SECObjectIdentifiers;\nimport org.bouncycastle.asn1.x509.AlgorithmIdentifier;\nimport org.bouncycastle.asn1.x509.SubjectPublicKeyInfo;\n...\nbyte[] compressedKey = HexFormat.of().parseHex(&quot;03CD26952CFFB40A3C2B7E41BE80F02F8A21BA73958ED22276CC28D7BBAA1AA07A&quot;);\nAlgorithmIdentifier algId = new AlgorithmIdentifier(X9ObjectIdentifiers.id_ecPublicKey, SECObjectIdentifiers.secp256k1);\nSubjectPublicKeyInfo subjectPublicKeyInfo = new SubjectPublicKeyInfo(algId, compressedKey);\nStringWriter sw = new StringWriter(); \ntry (PemWriter pw = new PemWriter(sw)) {\n    pw.writeObject (new PemObject (&quot;PUBLIC KEY&quot;, subjectPublicKeyInfo.getEncoded(&quot;DER&quot;)));  \n}\nSystem.out.println(sw.toString());\n</code></pre>\n<p>This results e.g. for the compressed key:</p>\n<pre class=\"lang-none prettyprint-override\"><code>0252972572d465d016d4c501887b8df303eee3ed602c056b1eb09260dfa0da0ab2\n</code></pre>\n<p>in the following X.509/SPKI PEM key:</p>\n<pre class=\"lang-none prettyprint-override\"><code>-----BEGIN PUBLIC KEY-----\nMDYwEAYHKoZIzj0CAQYFK4EEAAoDIgACUpclctRl0BbUxQGIe43zA+7j7WAsBWse\nsJJg36DaCrI=\n-----END PUBLIC KEY-----\n</code></pre>\n<p>The PEM key can be loaded with an ASN.1 parser, e.g. <a href=\"https://lapo.it/asn1js/\" rel=\"nofollow noreferrer\">https://lapo.it/asn1js/</a>. The encapsulated key corresponds to the compressed key.</p>\n<hr />\n<p>Note that the import of an X.509/SPKI EC key with a compressed key is not always supported (e.g. JCA/JCE: <em>Invalid EC key / Only uncompressed point format supported</em>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>Security.addProvider(new BouncyCastleProvider()); // Commenting out causes an exception: Invalid EC key / Only uncompressed point format supported\nString spkiDerWithCompressed = &quot;MDYwEAYHKoZIzj0CAQYFK4EEAAoDIgADzSaVLP+0CjwrfkG+gPAviiG6c5WO0iJ2zCjXu6oaoHo=&quot;;\nKeyFactory kf = KeyFactory.getInstance(&quot;EC&quot;);\nX509EncodedKeySpec keySpecX509 = new X509EncodedKeySpec(Base64.getDecoder().decode(spkiDerWithCompressed));\nPublicKey publicKey = (ECPublicKey) kf.generatePublic(keySpecX509);\nString spkiDerWithUncompressed = Base64.getEncoder().encodeToString(publicKey.getEncoded());\nSystem.out.println(spkiDerWithUncompressed); // MFYwEAYHKoZIzj0CAQYFK4EEAAoDQgAEzSaVLP+0CjwrfkG+gPAviiG6c5WO0iJ2zCjXu6oaoHr7WDbGHaR3hDq6+PtVm4+G5gWiYCWrh3fxe4ahjeW3Sw==\n</code></pre>\n<hr />\n<p>For completeness: A conversion of the compressed key into an uncompressed key is possible with BouncyCastle, e.g.:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.bouncycastle.asn1.x9.X9ECParameters;\nimport org.bouncycastle.asn1.x9.ECNamedCurveTable;\nimport org.bouncycastle.math.ec.ECPoint;\n...     \nbyte[] compressedKey = HexFormat.of().parseHex(&quot;0252972572d465d016d4c501887b8df303eee3ed602c056b1eb09260dfa0da0ab2&quot;);\nX9ECParameters x9Params = ECNamedCurveTable.getByName(&quot;secp256k1&quot;);\nECPoint ecpoint = x9Params.getCurve().decodePoint(compressedKey);\nbyte[] uncompressedKey = ecpoint.getEncoded(false);\n</code></pre>\n<p>An X.509/SPKI PEM key encapsulating the uncompressed key can be generated using the same code that was used for the compressed key.</p>\n"
        }
      ],
      "last_activity_date": 1684608923,
      "question_id": 76289621,
      "body": "<p>I have compressed public keys for <code>ECDSA</code> for curve <code>secp256k1</code></p>\n<blockquote>\n<p>0252972572d465d016d4c501887b8df303eee3ed602c056b1eb09260dfa0da0ab2\n0318ed2e1ec629e2d3dae7be1103d4f911c24e0c80e70038f5eb5548245c475f50</p>\n</blockquote>\n<p>I need to convert these to pem format in same compressed way using java. I tried to write pem format using <code>SubjectPublicKeyInfo</code>. But it is not giving me expected results.</p>\n"
    },
    {
      "answers": [
        {
          "comments": [
            {
              "comment_id": 134546635,
              "body": "Hello @R4N, thanks for the response but I am still getting the same error. It is strange, because it&#39;s happening only on this endpoint. I tried to add request body to different endpoint, then it works."
            }
          ],
          "answer_id": 76292768,
          "body": "<p>You're attempting to map a json object to a json array (the json sample you provided starts and ends with curly braces <code>{}</code>)</p>\n<p>If you're controlling the json, you should be able to switch the format to something like this if you want to map it directly to a json array of EstatePropertyCreatorDto's:</p>\n<pre><code>[\n        {\n            &quot;id&quot;: &quot;8bd050b0-6578-443a-8e22-bf48318734ce&quot;,\n            &quot;title&quot;: &quot;test title&quot;,\n            &quot;type&quot;: &quot;APARTMENT&quot;,\n            &quot;floor&quot;: &quot;5&quot;,\n            &quot;details&quot;: &quot;This details should be aware of!&quot;\n        },\n        {\n            &quot;id&quot;: &quot;69786c5f-e35a-476d-82de-1d5833a12818&quot;,\n            &quot;title&quot;: &quot;test title for 2nd&quot;,\n            &quot;type&quot;: &quot;GARAGE&quot;,\n            &quot;alias&quot;: &quot;jamie garage&quot;,\n            &quot;floor&quot;: &quot;1&quot;,\n            &quot;details&quot;: &quot;Details for Jamie Garage&quot;\n        },\n        {\n            &quot;id&quot;: &quot;c935f330-eebe-4d35-818d-d2248fc8ca9e&quot;,\n            &quot;title&quot;: &quot;test title for 3rd&quot;,\n            &quot;type&quot;: &quot;OFFICE&quot;,\n            &quot;floor&quot;: &quot;2&quot;,\n            &quot;details&quot;: &quot;Details for Jamie office&quot;,\n            &quot;commonParts&quot;: &quot;Office common parts&quot;\n        }\n    ]\n</code></pre>\n<p>In which case it should be able to be mapped to the straight json array</p>\n<p>If you're not controlling the json, you'll need an additional wrapper class along these lines:</p>\n<pre><code>public class MappedObject {\n\n    public MappedObject() {\n    }\n\n    List&lt;EstatePropertyCreatorDto&gt; estateProperties;\n\n    public List&lt;EstatePropertyCreatorDto&gt; getEstateProperties() {\n        return estateProperties;\n    }\n\n    public void setEstateProperties(List&lt;EstatePropertyCreatorDto&gt; estateProperties) {\n        this.estateProperties = estateProperties;\n    }\n}\n</code></pre>\n<p>which should allow the json object to be properly mapped and the list be filled/mapped with the estateProperties jsonArray</p>\n"
        }
      ],
      "last_activity_date": 1684608920,
      "question_id": 76292553,
      "body": "<p>POST Request with <code>@RequestBody</code> of <code>List&lt;T&gt;</code> -&gt; then I am getting the Json Parse Error Cannot deserialize value of type <code>java.util.ArrayList&lt;&quot;my path to the DTO class&quot;&gt;</code> from Object value <code>(token JsonToken.START_OBJECT); </code></p>\n<p>nested exception is</p>\n<blockquote>\n<p>com.fasterxml.jackson.databind.exc.MismatchedInputException</p>\n</blockquote>\n<p>Here is my DTO</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@ToString\npublic class EstatePropertyCreatorDto {\n\n    private UUID id;\n    private String title;\n    @NotNull private PropertyTypes type;\n    @Null private String alias;\n    @NotNull private String floor;\n    @NotNull private String details;\n    @Null private String commonParts;\n}\n</code></pre>\n<p>And Here is my controller method:</p>\n<pre><code>\n    @PostMapping(&quot;/{buildingId}/properties&quot;)\n    public List&lt;EstatePropertyCreatorDto&gt; addPropertiesToBuilding(@PathVariable UUID buildingId, @RequestBody List&lt;EstatePropertyCreatorDto&gt; estateProperties) {\n        buildingService.addPropertiesToBuilding(buildingId, estateProperties);\n\n        return List.of(&quot;Once I reach the method I will implement the return&quot;);\n    }\n</code></pre>\n<p>And here is my post request body:</p>\n<pre><code>  {\n    &quot;estateProperties&quot;: [\n        {\n            &quot;id&quot;: &quot;8bd050b0-6578-443a-8e22-bf48318734ce&quot;,\n            &quot;title&quot;: &quot;test title&quot;,\n            &quot;type&quot;: &quot;APARTMENT&quot;,\n            &quot;floor&quot;: &quot;5&quot;,\n            &quot;details&quot;: &quot;This details should be aware of!&quot;\n        },\n        {\n            &quot;id&quot;: &quot;69786c5f-e35a-476d-82de-1d5833a12818&quot;,\n            &quot;title&quot;: &quot;test title for 2nd&quot;,\n            &quot;type&quot;: &quot;GARAGE&quot;,\n            &quot;alias&quot;: &quot;jamie garage&quot;,\n            &quot;floor&quot;: &quot;1&quot;,\n            &quot;details&quot;: &quot;Details for Jamie Garage&quot;\n        },\n        {\n            &quot;id&quot;: &quot;c935f330-eebe-4d35-818d-d2248fc8ca9e&quot;,\n            &quot;title&quot;: &quot;test title for 3rd&quot;,\n            &quot;type&quot;: &quot;OFFICE&quot;,\n            &quot;floor&quot;: &quot;2&quot;,\n            &quot;details&quot;: &quot;Details for Jamie office&quot;,\n            &quot;commonParts&quot;: &quot;Office common parts&quot;\n        }\n    ]\n  }\n</code></pre>\n<p>Then I am getting the following error:</p>\n<pre><code>Cannot deserialize value of type `java.util.ArrayList&lt;&gt; from Object value (token `JsonToken.START_OBJECT`); nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException\n</code></pre>\n"
    },
    {
      "comments": [
        {
          "comment_id": 10757920,
          "body": "I guess the wizard of the coast casted a spella gainst you so every single io operation you do will fail. Provide the code which cause the exception otherwise we will not be abel to help you"
        },
        {
          "comment_id": 10757925,
          "body": "Well, the client has rejected/closed the connection. You&#39;d need the client logs to see what was the cause."
        },
        {
          "comment_id": 10758037,
          "body": "@andreapier since, this exception seems to be network related, I can not provide the source code. thanks for the answer (and the joke) though"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 85596061,
              "body": "in my situation the reverse proxy had a time-out set really short so it killed the connection before it was done."
            },
            {
              "comment_id": 105122089,
              "body": "@Adam, can you please add your solution as an answer?"
            }
          ],
          "answer_id": 8658179,
          "body": "<blockquote>\n  <p>java.io.IOException: Connection reset by peer</p>\n</blockquote>\n\n<p>The other side has abruptly aborted the connection in midst of a transaction. That can have many causes which are not controllable from the server side on. E.g. the enduser decided to shutdown the client or change the server abruptly while still interacting with your server, or the client program has crashed, or the enduser's internet connection went down, or the enduser's machine crashed, etc, etc.</p>\n"
        },
        {
          "answer_id": 8665730,
          "body": "<p>To expand on BalusC's answer, any scenario where the sender continues to write after the peer has stopped reading and closed its socket will produce this exception, as will the peer closing while it still had unread data in its own socket receive buffer. In other words, an application protocol error. For example, if you write something to the peer that the peer doesn't understand, and then it closes its socket in protest, and you then continue to write, the peer's TCP stack will issue an RST, which results in this exception and message at the sender.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 15425503,
              "body": "It doesn&#39;t mean only that, and it isn&#39;t confined to just Netty either."
            },
            {
              "comment_id": 29062681,
              "body": "I don&#39;t understand. WorM posted the stack trace with a read operation but all answers explain writing problem."
            },
            {
              "comment_id": 60596077,
              "body": "Link not working. This one is: <a href=\"https://github.com/xitrum-framework/xitrum/blob/master/src/main/scala/xitrum/handler/inbound/BadClientSilencer.scala\" rel=\"nofollow noreferrer\">BadClientSilencer</a>. Helped me!"
            }
          ],
          "answer_id": 8681400,
          "body": "<p>java.io.IOException in Netty means your game server tries to send data to a client, but that client has closed connection to your server.</p>\n<p>And that exception is not the only one! There're several others. See <a href=\"https://github.com/xitrum-framework/xitrum/blob/master/src/main/scala/xitrum/handler/inbound/BadClientSilencer.scala\" rel=\"nofollow noreferrer\">BadClientSilencer</a> in Xitrum. I had to add that to prevent those errors from messing my log file.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 63218968,
              "body": "Doesn&#39;t answer the question in any way."
            },
            {
              "comment_id": 86750795,
              "body": "And cancel before or after close is redundant."
            }
          ],
          "answer_id": 28645076,
          "body": "<p>For me useful code witch help me was <a href=\"http://rox-xmlrpc.sourceforge.net/niotut/src/NioServer.java\" rel=\"nofollow\">http://rox-xmlrpc.sourceforge.net/niotut/src/NioServer.java</a></p>\n\n<p>// The remote forcibly closed the connection, cancel</p>\n\n<p>// the selection key and close the channel.</p>\n\n<pre><code>    private void read(SelectionKey key) throws IOException {\n            SocketChannel socketChannel = (SocketChannel) key.channel();\n\n            // Clear out our read buffer so it's ready for new data\n            this.readBuffer.clear();\n\n            // Attempt to read off the channel\n            int numRead;\n            try {\n                numRead = socketChannel.read(this.readBuffer);\n            } catch (IOException e) {\n                // The remote forcibly closed the connection, cancel\n                // the selection key and close the channel.\n                key.cancel();\n                socketChannel.close();\n                return;\n            }\n\n            if (numRead == -1) {\n                // Remote entity shut the socket down cleanly. Do the\n                // same from our end and cancel the channel.\n                key.channel().close();\n                key.cancel();\n                return;\n            }\n...\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 52909034,
              "body": "You could add some hint on how to &quot;rectify&quot; and do those &quot;checks&quot; to improve that answer."
            },
            {
              "comment_id": 52914958,
              "body": "Hi <a href=\"http://stackoverflow.com/users/890537/m02ph3u5\">stackoverflow.com/users/890537/m02ph3u5</a>  1. server side , you could increase the time out between server and data source. 2. could improve the server session time out . 3.Could improve apache time out for request to server. 4.improving Keep Alive Timeout."
            },
            {
              "comment_id": 63218995,
              "body": "He is getting the exception while reading from the server. Your answer doesn&#39;t make sense."
            }
          ],
          "answer_id": 32525238,
          "body": "<p>There are lot of factors , first see whether server returns the result, then check between server and client.</p>\n\n<p>rectify them from server side first,then check the writing condition between server and client ! </p>\n\n<p>server side rectify the time outs between the datalayer and server \nfrom client side rectify the time out and number of available connections ! </p>\n"
        },
        {
          "answer_id": 54217193,
          "body": "<blockquote>\n  <p>java.io.IOException: Connection reset by peer</p>\n</blockquote>\n\n<p>In my case, the problem was with PUT requests (GET and POST were passing successfully).</p>\n\n<p>Communication went through VPN tunnel and ssh connection. And there was a firewall with default restrictions on PUT requests... PUT requests haven't been passing throughout, to the server... </p>\n\n<p>Problem was solved after exception was added to the firewall for my IP address.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 122982376,
              "body": "It can&#39;t mean that. You can&#39;t have a &#39;connection reset&#39; error unless you can first have a connection. You got a connection <i>refused</i>."
            }
          ],
          "answer_id": 64597246,
          "body": "<p>It can also mean that the server is completely inaccessible - I was getting this when trying to hit a server that was offline</p>\n<p>My client was configured to connect to localhost:3000, but no server was running on that port.</p>\n"
        },
        {
          "answer_id": 76294881,
          "body": "<p>If this happens when using Rider, when building a Docker container. Make sure all you changes are pushed to git, delete your local repo and clone everything again to start from a fresh state. This might have to do with file permissions being messed up but this fixed it immediately for me</p>\n"
        }
      ],
      "last_activity_date": 1684608828,
      "question_id": 8658118,
      "body": "<pre><code>ERROR GServerHandler  - java.io.IOException: Connection reset by peer\njava.io.IOException: Connection reset by peer\n        at sun.nio.ch.FileDispatcher.read0(Native Method)\n        at sun.nio.ch.SocketDispatcher.read(Unknown Source)\n        at sun.nio.ch.IOUtil.readIntoNativeBuffer(Unknown Source)\n        at sun.nio.ch.IOUtil.read(Unknown Source)\n        at sun.nio.ch.SocketChannelImpl.read(Unknown Source)\n        at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:323)\n        at org.jboss.netty.channel.socket.nio.NioWorker.processSelectedKeys(NioWorker.java:282)\n        at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:202)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n        at java.lang.Thread.run(Unknown Source)\n</code></pre>\n\n<p>This log is from a game server implemented using netty. What can cause this exception ? </p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134543268,
          "body": "You have asked this before. Why are you acting as nothing happened? You got an answer."
        }
      ],
      "answers": [
        {
          "answer_id": 76296876,
          "body": "<p>You do not need any permission.</p>\n<p>And why you are talking about a server is a puzzle.</p>\n<p>(This answer is given looking at the subject of your post only).</p>\n"
        }
      ],
      "last_activity_date": 1684608782,
      "question_id": 76295409,
      "body": "<p>I am trying to create an application that will allow users to get an overview of all the PDF files (PDF files only) in their phone's storage on my app and they should be able to select any of the PDF files of their choice to be able to read only. The user should be able to do this without an internet connection, so my app will not be a client app. My app has to work for sdk 21 and all above sdks. This is my current code so far in my MainActivty.java class:</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    private PdfAdapter pdfAdapter;\n    private List&lt;File&gt; pdfList;\n    private RecyclerView recyclerView;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        runtimePermission();\n    }\n\n    private void runtimePermission() {\n        Dexter.withContext(MainActivity.this).withPermission(Manifest.permission.READ_EXTERNAL_STORAGE)\n                .withListener(new PermissionListener() {\n                    @Override\n                    public void onPermissionGranted(PermissionGrantedResponse permissionGrantedResponse) {\n                        displayPdf();\n                    }\n\n                    @Override\n                    public void onPermissionDenied(PermissionDeniedResponse permissionDeniedResponse) {\n                        Toast.makeText(MainActivity.this, &quot;Permission is Required&quot;, Toast.LENGTH_SHORT).show();\n                    }\n\n                    @Override\n                    public void onPermissionRationaleShouldBeShown(PermissionRequest permissionRequest, PermissionToken permissionToken) {\n                        permissionToken.continuePermissionRequest();\n                    }\n                }).check();\n\n    }\n\n    public ArrayList&lt;File&gt; findPdf (File file)\n    {\n        ArrayList&lt;File&gt; arrayList = new ArrayList&lt;&gt;();\n        File[] files = file.listFiles();\n\n        for (File singleFile: files)\n        {\n            if (singleFile.isDirectory() &amp;&amp; singleFile.isHidden()) {\n                arrayList.addAll(findPdf(singleFile));\n            }\n            else {\n                if (singleFile.getName().endsWith(&quot;.pdf&quot;)){\n                    arrayList.add(singleFile);\n                }\n            }\n        }\n        return arrayList;\n    }\n    private void displayPdf() {\n        recyclerView = findViewById(R.id.recycler_view);\n        recyclerView.setHasFixedSize(true);\n        recyclerView.setLayoutManager(new GridLayoutManager(this, 3));\n        pdfList = new ArrayList&lt;&gt;();\n        pdfList.addAll(findPdf(Environment.getExternalStorageDirectory()));\n        pdfAdapter = new PdfAdapter(this, pdfList);\n        recyclerView.setAdapter(pdfAdapter);\n    }\n}\n</code></pre>\n<p>The only uses permission I have in my manifest file is READ_EXTERNAL_STORAGE permission, I am using 'com.karumi:dexter:6.2.3' as my implementation for runtime permission as it simplifies the process. My minSDK is 32, targetSDK 32 and compileSDK is 33. I also have a PDFAdapter and PDFViewHolder as the other two java classes in my android studio project. What changes should I make in order to achieve my goal?</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134290888,
          "body": "This seems like a not great idea to use annotations.  Can you tell us your goal?  What will you use this annotation for?"
        },
        {
          "comment_id": 134291003,
          "body": "This annotation is inside jakarta xml bind (so can&#39;t be changed) and the ultimate goal is to get rid of the copy-paste"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 134290987,
              "body": "The problem is jakarta internally uses this <code>@XmlElement</code> annotation, so new annotations won&#39;t work. There is probably no way out of this, so thanks anyway"
            }
          ],
          "answer_id": 76148740,
          "body": "<p>An annotation can take a list of arguments.  However the arguments are not dynamic and can't be added to or changed once defined</p>\n<pre><code>@interface ClassInfo{\n   // Note use of array\n   String[] myList();\n}\n\n@ClassInfo( myList = {&quot;Larry&quot;, &quot;Moe&quot;, &quot;Curly&quot;} )\npublic class MyClass {}\n</code></pre>\n<p>That list is static, you'd have to define subtypes of <code>MyClass</code> (or something) to make a different <code>myList</code> on each sub-type.</p>\n"
        }
      ],
      "last_activity_date": 1684608338,
      "question_id": 76148682,
      "body": "<p>I would like to reuse a bunch of the same annotations multiple times. But I can't just create another annotation by applying them because they lack <code>@Target({ElementType.ANNOTATION_TYPE})</code>.\nThis annotation is inside Jakarta XML Binding (so can't be changed) and the goal is to get rid of the copy-paste.</p>\n<p>I have an <code>operand</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@XmlElements({\n        @XmlElement(name = &quot;element1&quot;, type = Element1.class),\n        @XmlElement(name = &quot;element2&quot;, type = Element2.class),\n        @XmlElement(name = &quot;element3&quot;, type = Element3.class)\n})\nprivate MyOperand operand;\n</code></pre>\n<p>but another class has the same annotation on that field</p>\n<pre class=\"lang-java prettyprint-override\"><code>@XmlElements({\n        @XmlElement(name = &quot;element1&quot;, type = Element1.class),\n        @XmlElement(name = &quot;element2&quot;, type = Element2.class),\n        @XmlElement(name = &quot;element3&quot;, type = Element3.class)\n})\nprivate List&lt;MyOperand&gt; operands;\n</code></pre>\n<p>I made a base class with that field and annotations for at least two classes which both have <code>List&lt;MyOperand&gt;</code>.</p>\n<p>What is a better way?</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 54879273,
          "body": "What is the code of nextInorder method ?"
        },
        {
          "comment_id": 54879403,
          "body": "private static &lt;T&gt; Node&lt;T&gt; nextInorder(Node&lt;T&gt; p)   {       if(p.right != null)        {           p = p.right;           while(p.left != null)           {               p = p.left;           }           return p;       }       while(p != null)       {           if(p.parent != null &amp;&amp; p.parent.venstre == p)           {               return p.parent;           }            p = p.parent;       }       return p;   }"
        }
      ],
      "last_activity_date": 1684607991,
      "question_id": 33549725,
      "body": "<p>I have some problems when it comes to the next()-method in my LeafNodeIterator-class. \nFirst of all a leaf node is a node with <strong>no children</strong> in a binary search tree.(Not sure if leafnode is the right english word for it...)</p>\n\n<p>In the constructor I've moved my pointer <em>p</em> to the first leafnode using this method:</p>\n\n<pre><code>  private BladnodeIterator()  // constructor\n{\n  if(root == null) return;\n  firstleafnode(root);\n}\n\nprivate void firstleafnode(Node&lt;T&gt; p)\n{\n    while(p != null)\n    {\n        if(p.left == null &amp;&amp; p.right == null)\n            return;\n\n        p = nextInorder(p);\n    }\n}\n\n\nThe \"nextInorder(p)\"-method just moves p to the next Node in Inorder-order.\n</code></pre>\n\n<p>My question when it comes to the next()-method, which is supposed to return a leafnode-value, and move p to the next leafnode(or null if there are no more leafnodes), is how to code it? Either way I try it I end up doing it wrong. </p>\n\n<p>My apologies if the question or code is unclear.</p>\n\n<p>EDIT:\nThe code for the nextinorder-method:</p>\n\n<pre><code>    private static &lt;T&gt; Node&lt;T&gt; nextInorder(Node&lt;T&gt; p)\n  {\n      if(p.right != null) \n      {\n          p = p.right;\n          while(p.left != null)\n          {\n              p = p.left;\n          }\n          return p;\n      }\n      while(p != null)\n      {\n          if(p.parent != null &amp;&amp; p.parent.left == p)\n          {\n              return p.parent;\n          }\n           p = p.parent;\n      }\n      return p;\n  }\n</code></pre>\n"
    },
    {
      "last_activity_date": 1684607987,
      "question_id": 76296659,
      "body": "<p>If you think its fun or educational to troubleshoot it together please join:</p>\n<p><a href=\"https://teams.microsoft.com/l/meetup-join/19%3ameeting_NmQyNzBmY2YtNDdmOS00NzQ4LThlMzItM2NhOGY5MmJhZmZk%40thread.v2/0?context=%7b%22Tid%22%3a%226e93a626-8aca-4dc1-9191-ce291b4b75a1%22%2c%22Oid%22%3a%22429bdd64-de2b-4e1f-99e8-511b538346a5%22%7d\" rel=\"nofollow noreferrer\">Teams links to me</a></p>\n<ul>\n<li><strong>Java selenium test framework opening/closing with an error and cant instantiate a class:(</strong>\n<a href=\"https://i.stack.imgur.com/ZvoDC.png\" rel=\"nofollow noreferrer\">TestNG result</a></li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/YOTHE.png\" rel=\"nofollow noreferrer\">Console during run initiate chrome webdriver</a></p>\n<p><strong>What ive done so far:</strong>\nThe no instantiation error might be caused by a webdriver issue, or vice versa. There is also a chance this is totally unrelated to the Assessor step definition steps being show in the unimplemented steps folder.\nI rarely get errors their so I think its something obvious being overlook.</p>\n<p>Also notable is that The steps that aren't being executed are also in the Unimplemented steps stepdefinition file before the browser closes.</p>\n<p>Browser opens and doesnt sendkeys for login, which had been working for over 100+ runs.\nI have checked all the related Pageobjectfiles which class cant get instantiated (Failed to instantiate class stepDefinitions.Reviewer.ReviewAssessment&quot;&gt;)there are no errors in the code so its hard to figure out what is off only unexpected unused messages</p>\n<p><a href=\"https://i.stack.imgur.com/RUagn.png\" rel=\"nofollow noreferrer\">its weird that when calling the class it says the imports are unsused. it is used in a method in the file with no errors and workings doesnt give error without importing it</a></p>\n<p><a href=\"https://i.stack.imgur.com/ZTzjs.png\" rel=\"nofollow noreferrer\">Same here, the class is also used</a>.</p>\n<p><a href=\"https://i.stack.imgur.com/4qzU0.png\" rel=\"nofollow noreferrer\">also weird that my user.dir var is not used in my webdriver utilclass</a>\nI dont remember changing it.</p>\n<p><a href=\"https://i.stack.imgur.com/sOymn.png\" rel=\"nofollow noreferrer\">Console output showing failed init and below it the testcase that fails to perform a window resize with chromedriver</a></p>\n<p><strong>General info</strong>\n<strong>Build info:</strong> version: '3.141.59'\n<strong>revision:</strong> 'e82be7d358', time: '2018-11-14T08:17:03'\nSystem info:\n<strong>host:</strong> 'RB932308', ip: '172.21.202.46', os.name: 'Windows 10', os.arch: 'amd64', os.version: '**10.0' <strong>java.version:</strong> '1.8.0_361'\n<strong>Driver info</strong>: org.openqa.selenium.chrome.ChromeDriver\nCapabilities acceptInsecureCerts: false\nbrowser Name: chrome,\nbrowserVersion: 113.0.5672.127,\n<strong>chromedriverVersion:</strong> **113.0.5672.63\n<a href=\"https://i.stack.imgur.com/JC0Qa.png\" rel=\"nofollow noreferrer\">run error related to runparralel</a></p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134385600,
          "body": "Without adding necessary snippets it would be hard to understand the cause!"
        },
        {
          "comment_id": 134386123,
          "body": "Thanks for your comment, added a snippet of the code calling the camera.  I didn&#39;t include the <code>onActivityResult</code> part because the app crashes prior to this method."
        },
        {
          "comment_id": 134453613,
          "body": "Are you using <code>new Runnable()</code> or thread executed <code>run(){}</code> anywhere in your code?  The error you&#39;re getting is <i>almost</i> always caused by not properly using <code>runOnUiThread(new Runnable(){</code>"
        },
        {
          "comment_id": 134474399,
          "body": "Yes, I have Runnables in my code (for things that should happen off the main thread), but not for anything UI related.  Also, if the app was crashing in one of my Runnables, it should have shown in the stack trace, wouldn&#39;t it?"
        },
        {
          "comment_id": 134501415,
          "body": "add code snippet for better clarification."
        },
        {
          "comment_id": 134506692,
          "body": "&quot; onResume isn&#39;t called before the crash&quot;  onResume() is called after onActivityResult() method, though not necessarily immediately after"
        },
        {
          "comment_id": 134510855,
          "body": "Usually this happened when you process something using background thread and at the same time you accessing the UI. UI running on separate thread called main thread. To access UI, you need to use <code>runOnUIThread</code> or if you use <code>AsyncTask</code> to process the photo, you need to put UI logic in <code>onPostExecute</code>. Can you share your onActivityResult?"
        },
        {
          "comment_id": 134520495,
          "body": "@VivekGupta, you&#39;re right, onActivityResult() is called before onResume() (for some reason I thought it&#39;s the other way). However, onStart() isn&#39;t called before the crash either so it&#39;s safe to assume onActivityResult() isn&#39;t called either. Plus I can see from the logs that onActivityResult() hasn&#39;t ran before the crash."
        },
        {
          "comment_id": 134521043,
          "body": "can you show code where you consumed the returned uri? "
        },
        {
          "comment_id": 134532303,
          "body": "@Tako All what you want in one place :)   <a href=\"https://developer.android.com/training/camerax/take-photo\" rel=\"nofollow noreferrer\">developer.android.com/training/camerax/take-photo</a>"
        },
        {
          "comment_id": 134536180,
          "body": "@issamux do you suggest I implement a camera activity instead of using the device&#39;s camera app?"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 134475572,
              "body": "Thanks for your answer, but where? Non of my code is being called after the camera is closed and before the crash. The activity haven&#39;t even resumed yet."
            },
            {
              "comment_id": 134498403,
              "body": "you need to fix implement of onActivityResult method. For quick test, remove this method and test it, if there is no problem implement your code with Activity.runOnUiThread"
            },
            {
              "comment_id": 134503442,
              "body": "onActivityResult is not executed before the app crashes. Also, isn&#39;t onActivityResult called on the main thread anyway?"
            }
          ],
          "answer_id": 76252690,
          "body": "<p>Usually this error happens with background tasks like network processing, so they use different threads. So to fix this, use <code>Activity.runOnUiThread</code> method from views original activity.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 134475484,
              "body": "That&#39;s interesting. I want to start ActivityResultLaunchers, but they are only implemented in AppCompatActivity while my app uses plain old Activity. I should migrate to AppCompat I guess.  Although, I wonder if you can rationalize why would it have anything to do with the thread issue? Or is it just a gut feeling?"
            }
          ],
          "answer_id": 76253034,
          "body": "<p>Use the below code. It should work fine. Anyway, startActivityForResult() is deprecated.</p>\n<pre><code>ActivityResultLauncher&lt;Intent&gt; cameraActivityResultLauncher;\n\ncameraActivityResultLauncher = registerForActivityResult(\n            new ActivityResultContracts.StartActivityForResult(),\n            new ActivityResultCallback&lt;ActivityResult&gt;() {\n                @Override\n                public void onActivityResult(ActivityResult result) {\n                    if (result.getResultCode() == Activity.RESULT_OK) {\n                        // There are no request codes\n                        Intent data = result.getData();\n                        Bitmap img = (Bitmap)data.getExtras().get(&quot;data&quot;);\n                        imageView.setImageBitmap(img);\n                    }\n                }\n            });\n\nIntent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\ncameraActivityResultLauncher.launch(cameraIntent);\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 134496095,
              "body": "Thanks for your suggestions.  I wasn&#39;t able to directly debug because it never crashes on my device, only on users devices (sigh). What I can do is add logs, redeploy to the play store and look at the new logs when the app crashes. That&#39;s how I figured that onConfigurationChanged is called on the same thread the created the view. Unfortunately I can&#39;t use this method to add logs to checkThread(). Config changes while the app is in the foreground doesn&#39;t cause any problems"
            },
            {
              "comment_id": 134506567,
              "body": "@Tako You are welcome. First of all, you should try your best to replicate the crash, that&#39;s almost mandatory so you can undertsand it and then validate your fix.  You said thare are other stack traces similar to this one. Can you share them? Maybe there is more info we can get from them.  Do you keep any reference to a view in the activity or any other class? This could be caused by a memory leak. It&#39;s just a guess."
            },
            {
              "comment_id": 134520333,
              "body": "Believe me, I tried replicating it for many hours with no luck. I only ask stuff on SO when I&#39;m desperate. I added 2 more stack trace variants I&#39;m seeing. I keep refs to views inside the Activity, but nowhere outside the Activity, that shouldn&#39;t cause any problem, right?"
            }
          ],
          "answer_id": 76267649,
          "body": "<p>You can try debugging. For some reason the mThread field in the ViewRootImpl instance is not the same as the thread the config change is notified on. This is the method where the exception is thrown from:</p>\n<pre><code>void checkThread() {\n        if (mThread != Thread.currentThread()) {\n            throw new CalledFromWrongThreadException(\n                    &quot;Only the original thread that created a view hierarchy can touch its views.&quot;);\n        }\n    }\n</code></pre>\n<p>It could be that the field was set to null or changed, or maybe the thread did change. Maybe Samsung has modified said class.</p>\n<p>Also try triggering a config change without leaving the app and see what happens.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 134525336,
              "body": "I&#39;m so glad to hear some else is have encountered a similar crash on Samsung devices only, I feel much less crazy now, lol. But if the problem is an object that was claimed by the OS, would you expect to see a NullReferenceException or something?  I know my app handles well cases where MainActivity is destroyed when while the camera is open. This happens quite often. Also, I already have configChanges=&quot;orientation|screenSize&quot; set for my activity."
            },
            {
              "comment_id": 134526534,
              "body": "@Tako Hi, check my edited answer. It&#39;s one more step to do if things don&#39;t work with the previous solution. Since there is some problem by OEM handling the intent of camera capture, we can&#39;t do anything except trying different solutions and finding the perfect one, lol."
            },
            {
              "comment_id": 134535952,
              "body": "That&#39;s an interesting suggestion. I&#39;ll give it a try and report back!"
            },
            {
              "comment_id": 134538049,
              "body": "@Tako Yes, sure. Let me know if it&#39;s working or not."
            }
          ],
          "answer_id": 76285936,
          "body": "<p>Yes. It does happen with only samsung devices. I faced that issue once upon a time.</p>\n<p>Here is what happens when you capture a picture</p>\n<ol>\n<li><code>Open a camara intent to capture a picture</code></li>\n<li><code>Take picture</code></li>\n<li><code>Return to your activity or fragment</code></li>\n<li><code>Get captured image &amp; use it</code></li>\n</ol>\n<p>This is a usual lifecycle of an image capture using device camera.</p>\n<p><strong>Now Samsung devices running on android 13 (Don't know about lower versions, I don't have one with lower versions, so) have a problem that if you take a picture using camera intent in portrait and then return to the activity or fragment with landscape orientation then it destroys the previous objects on configuration change.</strong></p>\n<p>It also happens even if you capture picture in portrait, then rotate device in landscape mode and then again rotate it to the portrait mode and come back to the activity, because of configuration change as I mentioned above.</p>\n<p>So, here is my take on that which is working just fine. I now apply it to all my apps containing such functionality.</p>\n<p><strong>1. Fix activity orientation in manifest with traditional method providing fixed screen orientation either <code>portrait</code> or <code>landscape</code> according to your need</strong></p>\n<pre><code>&lt;activity\n    android:name=&quot;.activity.MainActivity&quot;\n    android:screenOrientation=&quot;portrait&quot; /&gt;\n</code></pre>\n<p><strong>2. If you have responsive screen which can either be portrait or landscape on device orientation changes, then add this <code>config</code> to the <code>activity tag</code> in Manifest</strong></p>\n<pre><code>&lt;activity\n    android:name=&quot;.activity.MainActivity&quot;\n    android:configChanges=&quot;orientation|screenSize&quot;/&gt;\n</code></pre>\n<p><strong>So now, you will have the objects created before launching camera intent undestroyed when you return back to your activity after taking picture.</strong></p>\n<p><strong>EDIT:</strong></p>\n<p>If you've already put the configurations in the <code>Manifest</code>, then you can go one step ahead as in did in some of my apps.</p>\n<p><strong>When user launches camera, set screen orientation to <code>portrait</code> programmatically,</strong></p>\n<pre><code>setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);\n</code></pre>\n<p><strong>Then, when user returns to the activity, then release the portrait lock by setting the orientation you've already set.</strong></p>\n<p>So, it won't rotate your device orientation while in camera screen.</p>\n"
        },
        {
          "answer_id": 76287725,
          "body": "<p>basically, the CalledFromWrongThreadException exception occurs when attempting to touch views from different threads than the one that created the view hierarchy.\nso for that solution, you can call this like that</p>\n<pre><code>private void takePhoto(Uri outputUri) {\n    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n    intent.putExtra(MediaStore.EXTRA_OUTPUT, outputUri);\n    startActivityForResult(intent, TAKE_PHOTO_REQUEST_CODE);\n}\n\nprivate void handleTakePhoto() {\n    new Handler(Looper.getMainLooper()).post(new Runnable() {\n        @Override\n        public void run() {\n            takePhoto(outputUri); \n        }\n    });\n}\n</code></pre>\n"
        },
        {
          "answer_id": 76296811,
          "body": "<p>If you need full control over Image and camera just follow this official android documentation : <a href=\"https://developer.android.com/training/camerax/take-photo\" rel=\"nofollow noreferrer\">https://developer.android.com/training/camerax/take-photo</a>\nOtherwise follow this steps</p>\n<p>1 - Request permission</p>\n<pre><code>  private val requestSinglePermissionLauncher = \n registerForActivityResult(ActivityResultContracts.RequestPermission()) { isGranted -&gt;\nif (isGranted) {\n    // permission granted , ok\n} else {\n    // Permission Denied , follow google recommendation for this cases...\n  }\n}\n</code></pre>\n<p>2 - Code invocation be like this :</p>\n<pre><code> requestSinglePermissionLauncher.launch(Manifest.permission.CAMERA)\n</code></pre>\n<p>3- use the pre-built &quot;TakePicture&quot; contract :</p>\n<pre><code>private val getCameraImage =  \nregisterForActivityResult(ActivityResultContracts.TakePicture()) { success -&gt;\nif (success) {\n    //get image uri : $uri\n  }\n}\n</code></pre>\n<p>Full code :</p>\n<pre><code> private val getCameraImage = \nregisterForActivityResult(ActivityResultContracts.TakePicture()) { success -&gt;\nif (success) {\n    //get image uri : $uri\n  }\n}    \nprivate val requestSinglePermissionLauncher = \nregisterForActivityResult(ActivityResultContracts.RequestPermission()) { isGranted -&gt;\nif (isGranted) {\n    // you should provide an uri : where to store your image\n     getCameraImage.launch(uri)\n} else {\n    // Permission Denied , follow google recommendation for this cases...\n  }\n}\n// some where in code\nrequestSinglePermissionLauncher.launch(Manifest.permission.CAMERA) \n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684607652,
      "question_id": 76203347,
      "body": "<p>My app allows users to take pictures by using the device's default camera app, like so:</p>\n<pre><code>    private void takePhoto(Uri outputUri) {\n        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n        intent.putExtra(MediaStore.EXTRA_OUTPUT, outputUri);\n        startActivityForResult(intent, TAKE_PHOTO_REQUEST_CODE);\n    }\n\n</code></pre>\n<p>Looking at crash logs, I'm seeing lots of app crashes happening around what seems to be the app resuming after taking a photo.<br />\nThe exception and stack trace:</p>\n<pre><code>Fatal Exception: android.view.ViewRootImpl$CalledFromWrongThreadException\nOnly the original thread that created a view hierarchy can touch its views.\nandroid.view.ViewRootImpl.checkThread (ViewRootImpl.java:11379)\nandroid.view.ViewRootImpl.requestLayout (ViewRootImpl.java:2562)\nandroid.view.ViewRootImpl.updateConfiguration (ViewRootImpl.java:6324)\nandroid.app.ActivityThread.handleActivityConfigurationChanged (ActivityThread.java:6925)\nandroid.app.servertransaction.ActivityConfigurationChangeItem.execute (ActivityConfigurationChangeItem.java:53)\nandroid.app.servertransaction.ActivityTransactionItem.execute (ActivityTransactionItem.java:45)\nandroid.app.servertransaction.TransactionExecutor.executeCallbacks (TransactionExecutor.java:135)\nandroid.app.servertransaction.TransactionExecutor.execute (TransactionExecutor.java:95)\nandroid.app.ActivityThread$H.handleMessage (ActivityThread.java:2571)\nandroid.os.Handler.dispatchMessage (Handler.java:106)\nandroid.os.Looper.loopOnce (Looper.java:226)\nandroid.os.Looper.loop (Looper.java:313)\nandroid.app.ActivityThread.main (ActivityThread.java:8741)\njava.lang.reflect.Method.invoke (Method.java)\ncom.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:571)\ncom.android.internal.os.ZygoteInit.main (ZygoteInit.java:1067)\n</code></pre>\n<p>There are a few different variants of the stack trace, but they all go through some configuration change which led me to believe the user must be rotating the device while taking the picture and the app crashes when it's returning to the foreground in a different orientation.<br />\nMy app's activity has <code>android:configChanges=&quot;orientation|screenSize&quot;</code> in its manifest because it's containing a WebView, but it's not doing anything during <code>onConfigurationChanged</code>.<br />\nWhile investigating the crash I added logs to print the thread name and ID to the main lifecycle methods as well as to <code>onConfigurationChanged</code>. I found that <code>onConfigurationChanged</code> called right before the app crashes on the same main thread as <code>onCreate</code> is called. <code>onStart</code> and <code>onResume</code> aren't called before the crash.<br />\nTo add more mystery to the whole thing, the crash happens only on Samsung devices (but on a verity of phones/tables models).<br />\nEven though I don't think my app is doing anything unique or unusual I couldn't find any similar reports online.</p>\n<p>Any ideas/suggestions would be appreciated!</p>\n<p><strong>Edit</strong><br />\nAdding more stack trace variants:</p>\n<pre><code>Fatal Exception: android.view.ViewRootImpl$CalledFromWrongThreadException\nOnly the original thread that created a view hierarchy can touch its views.\nandroid.view.ViewRootImpl.checkThread (ViewRootImpl.java:11586)\nandroid.view.ViewRootImpl.requestLayout (ViewRootImpl.java:2648)\nandroid.view.View.requestLayout (View.java:27612)\nandroid.view.View.requestLayout (View.java:27612)\nandroid.view.View.requestLayout (View.java:27612)\nandroid.view.View.requestLayout (View.java:27612)\nandroid.view.View.requestLayout (View.java:27612)\nandroid.view.View.requestLayout (View.java:27612)\nandroid.view.View.requestLayout (View.java:27612)\nandroid.widget.TextView.onConfigurationChanged (TextView.java:4706)\nandroid.view.View.dispatchConfigurationChanged (View.java:16145)\nandroid.view.ViewGroup.dispatchConfigurationChanged (ViewGroup.java:1654)\nandroid.view.ViewGroup.dispatchConfigurationChanged (ViewGroup.java:1654)\nandroid.view.ViewGroup.dispatchConfigurationChanged (ViewGroup.java:1654)\nandroid.view.ViewGroup.dispatchConfigurationChanged (ViewGroup.java:1654)\nandroid.view.ViewGroup.dispatchConfigurationChanged (ViewGroup.java:1654)\nandroid.view.ViewGroup.dispatchConfigurationChanged (ViewGroup.java:1654)\nandroid.view.ViewRootImpl.updateConfiguration (ViewRootImpl.java:6502)\nandroid.app.ActivityThread.handleActivityConfigurationChanged (ActivityThread.java:6941)\nandroid.app.servertransaction.ActivityConfigurationChangeItem.execute (ActivityConfigurationChangeItem.java:53)\nandroid.app.servertransaction.ActivityTransactionItem.execute (ActivityTransactionItem.java:45)\nandroid.app.servertransaction.TransactionExecutor.executeCallbacks (TransactionExecutor.java:135)\nandroid.app.servertransaction.TransactionExecutor.execute (TransactionExecutor.java:95)\nandroid.app.ActivityThread$H.handleMessage (ActivityThread.java:2574)\nandroid.os.Handler.dispatchMessage (Handler.java:106)\nandroid.os.Looper.loopOnce (Looper.java:226)\nandroid.os.Looper.loop (Looper.java:313)\nandroid.app.ActivityThread.main (ActivityThread.java:8757)\njava.lang.reflect.Method.invoke (Method.java)\ncom.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:571)\ncom.android.internal.os.ZygoteInit.main (ZygoteInit.java:1067)\n</code></pre>\n<pre><code>Fatal Exception: android.view.ViewRootImpl$CalledFromWrongThreadException\nOnly the original thread that created a view hierarchy can touch its views.\nandroid.view.ViewRootImpl.checkThread (ViewRootImpl.java:11586)\nandroid.view.ViewRootImpl.requestLayout (ViewRootImpl.java:2648)\nandroid.view.View.requestLayout (View.java:27612)\nandroid.view.View.requestLayout (View.java:27612)\nandroid.view.View.requestLayout (View.java:27612)\nandroid.view.View.requestLayout (View.java:27612)\nandroid.view.View.requestLayout (View.java:27612)\nandroid.view.View.requestLayout (View.java:27612)\nandroid.view.View.requestLayout (View.java:27612)\nandroid.widget.TextView.onConfigurationChanged (TextView.java:4706)\nandroid.view.View.dispatchConfigurationChanged (View.java:16145)\nandroid.view.ViewGroup.dispatchConfigurationChanged (ViewGroup.java:1654)\nandroid.view.ViewGroup.dispatchConfigurationChanged (ViewGroup.java:1654)\nandroid.view.ViewGroup.dispatchConfigurationChanged (ViewGroup.java:1654)\nandroid.view.ViewGroup.dispatchConfigurationChanged (ViewGroup.java:1654)\nandroid.view.ViewGroup.dispatchConfigurationChanged (ViewGroup.java:1654)\nandroid.view.ViewGroup.dispatchConfigurationChanged (ViewGroup.java:1654)\nandroid.view.ViewRootImpl.updateConfiguration (ViewRootImpl.java:6502)\nandroid.app.ActivityThread.handleActivityConfigurationChanged (ActivityThread.java:6941)\nandroid.app.ActivityThread$ActivityClientRecord$1.onConfigurationChanged (ActivityThread.java:797)\nandroid.view.ViewRootImpl.performConfigurationChange (ViewRootImpl.java:6462)\nandroid.view.ViewRootImpl.handleResized (ViewRootImpl.java:2424)\nandroid.view.ViewRootImpl.-$$Nest$mhandleResized\nandroid.view.ViewRootImpl$ViewRootHandler.handleMessageImpl (ViewRootImpl.java:6728)\nandroid.view.ViewRootImpl$ViewRootHandler.handleMessage (ViewRootImpl.java:6697)\nandroid.os.Handler.dispatchMessage (Handler.java:106)\nandroid.os.Looper.loopOnce (Looper.java:226)\nandroid.os.Looper.loop (Looper.java:313)\nandroid.app.ActivityThread.main (ActivityThread.java:8757)\njava.lang.reflect.Method.invoke (Method.java)\ncom.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:571)\ncom.android.internal.os.ZygoteInit.main (ZygoteInit.java:1067)\n</code></pre>\n"
    },
    {
      "comments": [
        {
          "comment_id": 11089704,
          "body": "Could you please edit your question to include punctuation. Its really hard to understand what your question is."
        }
      ],
      "answers": [
        {
          "answer_id": 8873377,
          "body": "<p>Put <code>keyboard.nextLine()</code> after this line:</p>\n\n<pre><code>int answer=keyboard.nextInt();\n</code></pre>\n\n<p>This is a common problem that usually happens when you use <code>nextLine()</code> method after <code>nextInt()</code> method of <code>Scanner</code> class.</p>\n\n<p>What actually happens is that when the user enters an integer at <code>int answer = keyboard.nextInt();</code>, the scanner will take the digits only and leave the new-line character <code>\\n</code>. So you need to do a trick by calling <code>keyboard.nextLine();</code> just to discard that new-line character and then you can call <code>String input = keyboard.nextLine();</code> without any problem.</p>\n"
        }
      ],
      "last_activity_date": 1684607487,
      "question_id": 8873351,
      "body": "<p>The problem is I cant read the variable input with next() cause when I try to split (.split\" \") every whitespace then the array just get the first two words I type so I had to use keyboard.nextLine() and the splitting process works the way it should work and I get all the words in the array but the problem is that If I use nextLine() then I have to create another keyboard object to read the first variable (answer) and that is the only way I can make it work here is the code</p>\n\n<pre><code>    Scanner keyboard=new Scanner(System.in);\n    Scanner keyboard2=new Scanner(System.in);//just to make answer word\n\n    int answer=keyboard.nextInt();//if I don't use the keyboard2 here then the program will not work as it should work, but if I use next() instead of nextLine down there this will not be a problem but then the splitting part is a problem(this variable counts number of lines the program will have).\n\n    int current=1;\n    int left=0,right=0,forward=0,back=0;\n\n    for(int count=0;count&lt;answer;count++,current++)\n    {\n        String input=keyboard.nextLine();\n        String array[]=input.split(\" \");\n        for (int counter=0;counter&lt;array.length;counter++)\n        {\n            if (array[counter].equalsIgnoreCase(\"left\"))\n            {\n                left++;\n            }\n            else if (array[counter].equalsIgnoreCase(\"right\"))\n            {     \n                right++;\n            }\n            else if (array[counter].equalsIgnoreCase(\"forward\"))\n            {\n                forward++;   \n            }\n            else if (array[counter].equalsIgnoreCase(\"back\"))\n            {     \n                back++;\n            }\n        }\n\n   }\n}\n</code></pre>\n\n<p>Thanks :)</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 17628133,
          "body": "Are you reading the data from a file or user input?"
        },
        {
          "comment_id": 17628383,
          "body": "Exactly. The function of a scanner is to deliver you tokens and <i>ignore</i> the white space. If you need to process every character, you can&#39;t use an input mechanism that doesn&#39;t give them all to you. It sounds like you need to write yourself a fully fledged scanner of your own as in a hand-written compiler scanner. More details about your problem as opposed to the non-working solution will yield better answers."
        },
        {
          "comment_id": 17629441,
          "body": "The function of a scanner is to deliver you tokens and IGNORE the delimiter(which is by default <code>space</code>)."
        },
        {
          "comment_id": 17630771,
          "body": "Updated with more info on my main task."
        }
      ],
      "answers": [
        {
          "answer_id": 12995147,
          "body": "<p>Use a <code>BufferedReader</code> to read a line of input, then iterate the string in a <code>for</code> loop, working with each <code>char</code>.<br>\nYou can check whether a character is a whitespace by <code>Character.isWhitespace(char c)</code>.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 17630006,
              "body": "Hey, sorry for not understanding this off the bat, but why is using scanner with a delimiter of &quot;&#39;&quot; any different/better than using it with &quot;&quot; as the delimiter, for the purposes of grabbing whitespace? As well, why is this inefficient?"
            }
          ],
          "answer_id": 12995195,
          "body": "<pre><code>Scanner scanner = new Scanner(file).useDelimiter(\"'\")\n</code></pre>\n\n<p>But this is highly inefficient. The better way forward would be: to read character by character:</p>\n\n<pre><code>private static void readCharacters(Reader reader)\n        throws IOException {\n    int r;\n    while ((r = reader.read()) != -1) {\n        char ch = (char) r;\n        doSomethingWithChar(ch);\n    }\n}\n</code></pre>\n\n<p>Also see <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html\" rel=\"nofollow\">HERE</a></p>\n"
        },
        {
          "answer_id": 35675096,
          "body": "<p>Try <code>.useDelimiter(\"(\\\\b|\\\\B)\")</code></p>\n\n<p>It will use boundaries of every characters as delimiter.</p>\n\n<p>The following code will print exactly what user typed.\nNo character will be ignored, including whitespaces.</p>\n\n<pre><code>Scanner charScanner = new Scanner( System.in ).useDelimiter( \"(\\\\b|\\\\B)\" ) ;\nwhile( charScanner.hasNext() ) \n    System.out.print( charScanner.next() ) ;\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 99406914,
              "body": "Simple and Best solution!"
            }
          ],
          "answer_id": 42384006,
          "body": "<p>instead of </p>\n\n<pre><code>scanner.next();\n</code></pre>\n\n<p>use</p>\n\n<pre><code>scanner.nextLine();\n</code></pre>\n\n<p>This way you solve the problem with delimiters.</p>\n"
        }
      ],
      "last_activity_date": 1684607465,
      "question_id": 12994342,
      "body": "<p>I have a scanner, and have set the delimiter to \"\", but it still won't read whitespaces with the next() method. I know that nextline() works, but I need to examine every character in the input individually, including whitespace; it's for a complex data analysis problem. I'm stumped, though. Google has turned up nothing.</p>\n\n<p>Can anyone help me with this? I'm thinking of reversing the whitespace into a special character, then for the purposes of analyzing the character, reverse it back into a space, contained in a string... That seems way overkill though! Is there a more elegant way of doing this?</p>\n\n<p>EDIT: My main task is, take a String, and go over it character-by-character, multiple times, to examine the data for various tasks. You will have to examine it many times, one character at a time, and so I thought the scanner class would be my best bet since it can be easy to work with (for me at least). That's my task. Is there an easier way to go about this?</p>\n"
    },
    {
      "answers": [
        {
          "comments": [
            {
              "comment_id": 31042571,
              "body": "Thank you for your answer. But to use <code>String.split()</code>, I need first to get the complete string but to do so I need to scan my text so it does not improve the code, does it? After modifying my regex as you said, I do not have empty entry anymore, but I do not understand your explanation:  <code>you have two line endings next to each other</code>: How is it possible?"
            },
            {
              "comment_id": 31042876,
              "body": "AAAA BBBG GREZZ  ADFG GTRE  There are 2 line endings between those two lines, so when you split it finds the empty string on the empty line."
            }
          ],
          "answer_id": 20718551,
          "body": "<p>Just use <code>String#split()</code> with a suitable delimiter (it sounds like in this case you just need <code>\"[ \\\\n]+\"</code> (that's a space and a \\n) but you may want to tweak that a bit, for example you might want to split on all whitespace.</p>\n\n<p>The reason for the empty entry in the list is because you are just scanning for a single character of whitespace. This gets matched twice when you have two line endings next to each other. You need to modify the regex so it matches more than one character.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 31042489,
              "body": "First thank you for your answer. Regarding the stop condition, it actually do not see any other way to do this but it looks like patch-up job to me.  The thing is that I do not understand why <code>scan3.HasNext()</code> returns true when there is nothing more (and I pressed the <code>Enter</code> button)"
            },
            {
              "comment_id": 31042530,
              "body": "@user3125129: because if it did returned false, then it would be completely non-functioning, because it would be unable to wait for user input. How would it differentiate between awaiting for input and done with input? Think on this a little bit and it will be clear to you."
            }
          ],
          "answer_id": 20718590,
          "body": "<p>Your <code>+</code> appears to be in the wrong place. Try instead using <code>scan3.useDelimiter(\"[\\\\s\\\\n]+\");</code> </p>\n\n<p>Regarding, </p>\n\n<blockquote>\n  <p>As you might have noticed, I add the string \"STOP\" at the end in order to stop the loop because the condition scan3.HasNext() always returns \"true\", is it the only way to proceed?</p>\n</blockquote>\n\n<p>What other way would you wish to proceed? What other stop condition do you propose to use? </p>\n"
        }
      ],
      "last_activity_date": 1684607428,
      "question_id": 20718530,
      "body": "<p>I have serious issues to understand how the scanner class works. Indeed, I would like from this input:</p>\n\n<p>AAAA BBBG GREZZ</p>\n\n<p>ADFG GTRE</p>\n\n<p>FREZZ</p>\n\n<p>to have this ouput as an ArrayList:\n[AAAA, BBBG, GREZZ, ADFG, GTRE, FREZZ]</p>\n\n<p>My code is the following:</p>\n\n<pre><code>System.out.println(\"list of words?\");\nScanner scan3 = new Scanner(System.in);\nscan3.useDelimiter(\"[\\\\s+\\\\n]\");\nArrayList&lt;String&gt; test = new ArrayList&lt;String&gt;();\nwhile(scan3.hasNext()){\n  String temp = scan3.next();\n  if(temp.equals(\"STOP\")){\n     break;\n  }else{\n     test.add(temp);\n  }\n}\nSystem.out.println(test);\n</code></pre>\n\n<p>My input is:</p>\n\n<p>AAAA BBBG GREZZ</p>\n\n<p>ADFG GTRE</p>\n\n<p>FREZZ STOP</p>\n\n<p>And my ouput is:\n[AAAA, BBBG, GREZZ, , ADFG, GTRE, , FREZZ]</p>\n\n<p>My question is twofold:</p>\n\n<ul>\n<li>Why do I have an empty element inserted in the list (which is I beleive related to the new line)?</li>\n<li>As you might have noticed, I add the string \"STOP\" at the end in order to stop the loop because the condition scan3.HasNext() always returns \"true\", is it the only way to proceed?</li>\n</ul>\n\n<p>Many thanks for your help.</p>\n"
    },
    {
      "answers": [
        {
          "answer_id": 27236822,
          "body": "<p>try adding </p>\n\n<blockquote>\n  <p>File filePath = new File(\".txt\");</p>\n</blockquote>\n\n<p>before Scanner file</p>\n"
        }
      ],
      "last_activity_date": 1684607290,
      "question_id": 27221591,
      "body": "<p>I'm having a problem while using a \n   Scanner file = new Scanner(filePath);\nmy file is organised as so</p>\n\n<p>Question x.y<br>\nAnswer1<br>\nAnswer2<br>\nAnswer3<br>\nAnswer4<br>\nHint: Hint to Question x.y Level z Genere t  </p>\n\n<p>I'm quite new to java and in all of this project I've used\n   .next(string pattern) \nto return a string that includes the parrtern and arrives to the end of the line but i continue to get mismatch exceptions.. i don't really get what\n<a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html\" rel=\"nofollow\">https://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html</a>\ndefines as token and for this reason i don't know how to handle it..</p>\n\n<p>my code is</p>\n\n<pre><code>public Question getQuestion(String filePath)\n{\n    ArrayList questions = new ArrayList();\n\n    Scanner file = new Scanner(filePath);\n    String questionInFile = \"Question\";\n    while(file.hasNextLine())\n        questions.add(questionInFile+file.next(questionInFile));\n    Random rg = new Random();\n    String Q = (String)questions.get(rg.nextInt(10)+1);\n    file.close();\n    ArrayList&lt;String&gt; answer=getAnswers(filePath, Q);\n    String correctAnswer=answer.get(0);\n\n    return new Question(Q, answer, correctAnswer);\n\n\n}\n</code></pre>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134544245,
          "body": "By definition, an encrypted stream is indistinguishable from random bits.  Whatever this is, it has been encrypted and then encoded into a limited set of characters... but doesn&#39;t look like Base64.  You will have to ask the site owner, and this question is off-topic for StackOverflow."
        }
      ],
      "last_activity_date": 1684607245,
      "question_id": 76296785,
      "body": "<p>I'm doing a crawl project, it's not illegal, I got permission from the original author.</p>\n<p>The following response was received while crawling.</p>\n<pre><code>HTTP/1.1 200 OK\nDate: Sat, 20 May 2023 18:02:19 GMT\nServer: Apache\nSet-Cookie: WMONID=5IsO1BQKe2v;Expires=Sun, 19-May-2024 18:02:19 GMT;Path=/\nSet-Cookie: JSESSIONID=j32xPsKT1o1tSvHBRlRSOW60IFnK3tMJtjOBjBOVPoa1NiB8xfjqdoEqOmIORRTT;Path=/\nContent-Length: 558\nConnection: close\nContent-Type: text/html;charset=MS949\n\n\n\n\n\napinit=11,MDIwGhMABBYCBE267ygn4LocXQ/Op0R+rFpSp49eBBTztww8dcL0fF2LOUXLosKtJ2nfug==,UEc7RncHdnRgfnN7KXcDFRELFB0zJhBAc20Pb15LZBpTawBhUAUZVlJlZBVwch4TSFEjDlllCHZ9f242QE5nRXoaWhhWQF45Qz14TDpDZn9qfG96Ym9IAAFdTE8PehxkMi4Mf1YKOBtTJGUhHBgBRmZ3axpCW1pDWUUoNQMoEWVsc3J1BUN9U3dVXkwYcVdCbHJuRmFRLGpoaGgtYWBOIkICRkwUYxNPenoPMEMPbUpIbEBvSwEeUzNiak5WSlEID1NtUnM0XmB3dnx5UBN+QXlJc0BNQRAJbnFrC2lMYy5GRzBobnddEgJOR0ALJ0BWcWQOdAM3OFRRbUxzUBpCU3NjeQobU0oYRVk0JnUoDnApZWJuSlF+HDRKbR8ORA8SZ2hjCDlbcHxzKHh+YjkJAER+DREXfElZQn0JaERXYgEfUhosRh4bD2x3fUBPXwcUXUFuDVs9BHZob25p,\n</code></pre>\n<p>Looking at the history, the next request requires the following data:</p>\n<pre><code>POST /m/common/PCOMAppProtectVerifyJ.jsp HTTP/1.1\nSet-Cookie: WMONID=5IsO1BQKe2v;Expires=Sun, 19-May-2024 18:02:19 GMT;Path=/\nSet-Cookie: JSESSIONID=j32xPsKT1o1tSvHBRlRSOW60IFnK3tMJtjOBjBOVPoa1NiB8xfjqdoEqOmIORRTT;Path=/\nContent-Length: 421\nContent-Type: application/x-www-form-urlencoded\nHost: m.iros.go.kr\nConnection: close\nUser-Agent: Apache-HttpClient/UNAVAILABLE (java 1.4)\nCookie: WMONID=5IsO1BQKe2v; JSESSIONID=j32xPsKT1o1tSvHBRlRSOW60IFnK3tMJtjOBjBOVPoa1NiB8xfjqdoEqOmIORRTT\nCookie2: $Version=1\n\ndata=MDIwGhMABBYCArpCFKlY9%2B3yf4jD0Xj0cGl6OhDHBBTRFS2fd9HuVXG2WejTGEOz9Z6GMjMzXVOTts6IykIkqt6pPovJf1A6af7Wo9gjKbyKJ0%2BJAbPrFjRZCLzUJN91rDQz1TqnAiHpklisAZO8P4I7DyL4kcJlzESXMhRoXqEWGrwoBMtcIZCY9U65aoJ0NoFDjCrRtLjz02OUgDc28NPK1KFXzUeyETiOg7Ync7Jm7dld7sneUuRc9msG%2FNdfbPkgQ%2BtvdHvcUatRz9UdrqlKtD0Tsv%2BGYMJVFP9eVI8rybBgmHtd53bNB%2B3YMKZsxOR1CRprNNSZyXZriH7bDVGR5nOnYMkeW3dld6yvW6jV9Q0kp8OAecPJuTWRVgIOr5XeAQDRESpP6DBSCpGZ\n</code></pre>\n<p>Is there a way to know with what logic the data in this request is encrypted and what data is combined with only the request history above?</p>\n<p>Or, I would like to know if there is any other information or documentation that might be helpful.</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 46248592,
          "body": "Put your variable defs right where you use them: <code>int year = input.nextInt()</code>. Don&#39;t stockpile them at the top."
        },
        {
          "comment_id": 46248639,
          "body": "@deafprogrammer24  I have a solution to your program. see if it works for you."
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 46250315,
              "body": "I am not sure to follow up what you suggest. I mean, why are all results in integer type? Does it mean I have to use nextInt() every time I scan?"
            }
          ],
          "answer_id": 29000441,
          "body": "<p>Try:</p>\n\n<pre><code>input.nextLine();   //this is totally useless and just eats up the rest of the line\n</code></pre>\n\n<p>after nextInt() and before nextLine(). It works.</p>\n\n<p><strong>Problem:</strong>\nIn your code it does exactly what you tell it to. It takes in the integer and then continues on to the nextLine(). This is the <strong>same</strong> line. The nextInt() doesn't automatically go onto the next line. As such you can use nextLine() to eat up the end line. </p>\n\n<p><strong>Solution:</strong>\nsc.nextInt() eats up the integer, but not the new line. If you take the next line (same as nextInt()) it will go on to the real information on the next line and not skip a question.</p>\n\n<p>Output:</p>\n\n<pre><code>Please enter the year of birth to add: 199\nPlease enter full name to add: 1234\nPlease enter a city to add: 1235123\nPlease enter the state to add: 1234123\n</code></pre>\n\n<p>Hope this helps.</p>\n"
        }
      ],
      "last_activity_date": 1684607224,
      "question_id": 29000420,
      "body": "<p>I have a problem with a scanner. I want the program to read strings and an integer. I have two different situations. For example, my program asks the user to enter the year of birth, full name, and city. </p>\n\n<pre><code>Scanner input = new Scanner(System.in);\nint year;\nString name;\nString city;\nString state;\n\nSystem.out.print(\"Please enter the year of birth to add: \");\nyear = input.nextInt();\n\nSystem.out.print(\"Please enter full name to add: \");\nname = input.nextLine();\n\nSystem.out.print(\"Please enter a city to add: \");\ncity = input.nextLine();\n\nSystem.out.println(\"Please enter the state to add: );\nstate = input.next();\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Please enter the year of birth to add: 22\nPlease enter full name to add: Please enter a city to add: Denver\n</code></pre>\n\n<p>The first situation is the program skips the question and ask the next question. Without <code>nextLine</code>, it will receive an exception.</p>\n\n<p>For the second situation, supposed if the city has two or more spaces(ex. San Francisco, New York City...), will the <code>nextLine</code> help or not? It seems similar with the first situation. I know <code>nextLine</code> will read a string with spaces, but it still cause a problem otherwise. I could not solve this issue. </p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 52202359,
          "body": "It somehow, works for me. What is the error that you are getting?"
        },
        {
          "comment_id": 52202578,
          "body": "@MohitKanwar: there&#39;s no error message, but it <b>is</b> skipping a line. It automatically goes to the line that states that the password entered is not correct. Please check it and see. Also, why are folks down-voting a legitimate question?"
        },
        {
          "comment_id": 52203378,
          "body": "@HovercraftFullOfEels  Ohh. I missed it because the message sequence looked logical. Showing number of characters required for a password just after requesting to create one. :D   Understood the problem now."
        },
        {
          "comment_id": 52203486,
          "body": "@HovercraftFullOfEels   People are downvoting this question as the description is not very clear. I have tried to edit it, If it makes any better. Please approve."
        },
        {
          "comment_id": 52204044,
          "body": "@MohitKanwar: so approved."
        }
      ],
      "answers": [
        {
          "answer_id": 32157112,
          "body": "<p>This:</p>\n\n<pre><code>clavier.findWithinHorizon(\".\", 0).charAt(0);\n</code></pre>\n\n<p>Does not handle the End-Of-Line (EOL) token, and so it is swallowed in your next call to <code>clavier.nextLine()</code>, messing you up. One solution is to call <code>clavier.nextLine()</code> immediately after the line above</p>\n\n<pre><code>adult= clavier.findWithinHorizon(\".\", 0).charAt(0);\nclavier.nextLine(); // to handle and dispose the EOL token\n</code></pre>\n\n<p>or simply use nextLine in the code above:</p>\n\n<pre><code>adult = clavier.nextLine().charAt(0);\n</code></pre>\n"
        },
        {
          "answer_id": 32157644,
          "body": "<p>The problem is with this line</p>\n\n<pre><code>clavier.findWithinHorizon(\".\", 0).charAt(0);\n</code></pre>\n\n<p>As per the documentation for this method</p>\n\n<blockquote>\n  <p><p>If horizon is <code>0</code>, then the horizon is ignored and\n       * this method continues to search through the input looking for the\n       * specified pattern without bound. In this case it may buffer all of\n       * the input searching for the pattern.</p>\n</blockquote>\n\n<p>Hence, instead of using that, you may use the following code.\nI have basically converted <code>char adult</code> to  <code>String adult</code> and used <code>nextLine()</code> method as in other cases of yours.</p>\n\n<pre><code> import java.util.Scanner;\n\nclass mmm {\n\n    public static void main(String[] args) {\n        Scanner clavier = new Scanner(System.in);\n        String name;\n        String password;\n        String time;\n        String adult;\n\n        System.out.println(\"Hello,create your username:\\t\");\n        name = clavier.nextLine();\n        System.out.println(\"Welkom \" + name);\n\n        System.out.println(\"Do you have more than 18 years? (Yes/No)\");\n\n        //adult = clavier.findWithinHorizon(\".\", 0).charAt(0);\n        adult = clavier.nextLine();\n        if (adult.equalsIgnoreCase(\"y\")) {\n            System.out.println(\"you are adult\");\n        } else {\n            System.exit(0);\n\n        }\n\n        System.out.println(\"create your password:\\t\");\n\n        password = clavier.nextLine();\n\n        while ((password.length() &lt; 6) || (password.length() &gt; 10)) {\n            System.out\n                    .println(\"please create a password between 6 and 10 letters\");\n            password = clavier.nextLine();\n        }\n\n        String password2;\n        System.out.println(\"Please write your password again\");\n        password2 = clavier.nextLine();\n        while (!password2.equals(password)) {\n            System.out.println(\"your passwords aren't the same\");\n            password2 = clavier.nextLine();\n        }\n        System.out.println(\"acount create\");\n\n    }\n}\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684607211,
      "question_id": 32157022,
      "body": "<p>While running the following code, and when I answer the question: Do you have more than 18years it directly say :  </p>\n\n<blockquote>\n  <p>-you are a adult<br>\n  -create your password<br>\n  -please create a password between 6 and 10 letters</p>\n</blockquote>\n\n<p>Whereas It should have stopped at create your password. waited for my input, and if that input length is out of range, the next message should be shown.</p>\n\n<p>But it doesn't waits for my input and displays the next message.</p>\n\n<p>when I delete the question:\nDo you have more than 18 years? (Yes/No) </p>\n\n<p>the program work perfectly.</p>\n\n<pre><code>import java.util.Scanner;\n\nclass ScannerTest {\n    public static void main(String[] args) {\n        Scanner clavier = new Scanner(System.in);\n        String name;\n        String password;\n        String time;\n        char adult;\n\n        System.out.println(\"Hello,create your username:\\t\");\n        name = clavier.nextLine();\n\n        System.out.println(\"Welkom \" + name);\n        System.out.println(\"Do you have more than 18 years? (Yes/No)\");\n        adult = clavier.findWithinHorizon(\".\", 0).charAt(0);\n\n        if (adult == 'y' || adult == 'Y') {\n            System.out.println(\"you are adult\");\n        } else {\n            System.exit(0);\n        }\n\n        System.out.println(\"create your password:\\t\");\n        password = clavier.nextLine();\n        while ((password.length() &lt; 6) || (password.length() &gt; 10)) {\n            System.out.println(\"please create a password between 6 and 10 letters\");\n            password = clavier.nextLine();\n        }\n\n        String password2;\n        System.out.println(\"Please write your password again\");\n        password2 = clavier.nextLine();\n        while (!password2.equals(password)) {\n            System.out.println(\"your passwords aren't the same\");\n            password2 = clavier.nextLine();\n        }\n        System.out.println(\"acount create\");\n    }\n}\n</code></pre>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134541450,
          "body": "Lets say num is 5. <code>doubt(num--)</code> is same as calling <code>doubt(5)</code>, whereas both of <code>doubt(num-1)</code> and <code>doubt(--num)</code> are the same as calling <code>doubt(4)</code> and num inside the nested call is now 4... and so on"
        }
      ],
      "answers": [
        {
          "answer_id": 76295803,
          "body": "<pre><code>    doubt1(num--);\n</code></pre>\n<p>is internally implemented as</p>\n<pre><code>    int tmp = num;\n    num = num - 1;\n    doubt1(tmp);\n</code></pre>\n<p>That is, it recursively calls the <code>doubt1</code> method with the original value and therefore the condition <code>num == 0</code> is never reached.</p>\n"
        },
        {
          "answer_id": 76295839,
          "body": "<p>When you invoke a method, the arguments are evaluated, and the resulting values are assigned as the initial values of the method's parameters.  The expressions <code>num--</code> and <code>--num</code> have the same side effect on <code>num</code>, but that is immaterial to the method invocation.  The two evaluate to different values: the former to the value of num <em>before</em> it is decremented, and the latter to the value of <code>num</code> <em>after</em> it is decremented.  The order of the operator relative to the operand is mnemonic for that.</p>\n<p>Thus, with</p>\n<pre><code>int n = 1;\nsome_method(n--);\n</code></pre>\n<p>the value passed to <code>some_method()</code> is 1, but with</p>\n<pre><code>int n = 1;\nsome_method(--n);\n</code></pre>\n<p>the value passed to <code>some_method()</code> is 0.</p>\n<p>In both cases, however, the value 0 is stored in <code>n</code> before execution of the body of <code>some_method()</code> commences.</p>\n"
        },
        {
          "answer_id": 76295885,
          "body": "<p>First, with the unary decrement operator, the operation is occurring after, or before, the <em>statement</em>.<br />\nAs opposed to after, or before, the <em>expression</em>.</p>\n<p>So, in this situation, there will be a difference between <code>num--</code> and <code>--num</code>.</p>\n<ul>\n<li><p><code>doubt(num--)</code> is decrementing after the call statement, and not after the parameter expression.</p>\n</li>\n<li><p><code>double(--num)</code>, the opposite is happening, the decrement is happening before the parameter expression.</p>\n</li>\n</ul>\n<p>Essentially, from a compiler's stand-point, for the <code>doubt(--num)</code> statement, you have the following.</p>\n<ol>\n<li>Get <code>num</code></li>\n<li>Decrement <code>num</code></li>\n<li>Apply <code>num</code> as <code>doubt</code> parameter</li>\n<li>Execute <code>doubt</code> with parameter value</li>\n</ol>\n<p>Alternately, with <code>doubt(num--)</code> you have the following.</p>\n<ol>\n<li>Get <code>num</code></li>\n<li>Apply <code>num</code> as <code>doubt</code> parameter</li>\n<li>Decrement <code>num</code> (which has no effect, since the parameter value was already set)</li>\n<li>Execute <code>doubt</code> with parameter value</li>\n</ol>\n<p>Essentially, for the <code>doubt(num--)</code> statement, after the compiler has <code>num</code>, and is ready to call <code>doubt</code>, it will then decrement <code>num</code>.<br />\nAs opposed to having <code>num</code>, then decrementing, and then calling <code>doubt</code>.</p>\n"
        }
      ],
      "last_activity_date": 1684607143,
      "question_id": 76295775,
      "body": "<p>This works fine because we are using the prefix decrement operator in the recursive call !\nPrefix Decrement:</p>\n<pre><code> public static void main(String[] args) {\n        doubt1(5);\n    }\n    static void doubt(int num)\n    {\n        if(num==0)\n            return;\n        System.out.println(num);\n        doubt(--num);\n    }\n</code></pre>\n<p>Postfix Decrement:</p>\n<pre><code>static void doubt1(int num)\n    {\n        if(num==0)\n            return;\n        System.out.println(num);\n        doubt1(num--);\n    }\n</code></pre>\n<p>But when we use the postfix decrement it can lead to stack over flow error , I understand why it's causing the error , but I want to know , if we use <code>num-1</code> in the recursive call it doesn't give the overflow error , my question is -&gt; why it's not giving the error coz it calculating the <code>num-1</code> and passing the value to the recursive call but not calculating the <code>num--</code> in the call ?</p>\n<p>Want the explanation why it calculating the <code>num-1</code> not <code>num--</code> in the recursive call ? Not why it's happening !</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 67597141,
          "body": "BTW you&#39;ve got an integer division issue - use <code>double Celsius = 5&#47;9.0 * (fahrenheit-32);</code>"
        }
      ],
      "answers": [
        {
          "answer_id": 40164113,
          "body": "<p>You'e confusing <code>String</code> with <code>java.util.Scanner</code>. Parse the string returned from <code>showInputDialog</code></p>\n\n<pre><code>fahrenheit = Double.parseDouble(input);\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684607082,
      "question_id": 40164084,
      "body": "<p>symbol: method nextDouble</p>\n\n<p>nextDouble \"error\"</p>\n\n<p>Can any one help me to fix that ?</p>\n\n<pre><code>    double fahrenheit;\n\n    String input = JOptionPane.showInputDialog(null, \"Enter the Fahrenheit degre : \");\n\n    fahrenheit = input.nextDouble();\n\n    double Celsius = 5/9 * (fahrenheit-32);\n\n    JOptionPane.showMessageDialog(null, \" in Celsius : \" + Celsius);\n</code></pre>\n"
    },
    {
      "answers": [
        {
          "comments": [
            {
              "comment_id": 2576024,
              "body": "Thank you for declaring map to be Map instead of HashMap - not enough sample code encourages the use of interfaces!  But I would consider using an EnumMap instead of HashMap for efficiency."
            }
          ],
          "answer_id": 2570279,
          "body": "<p>You're probably better off using a Map rather than a List, you can use the enum as the key and get the values out.</p>\n\n<pre><code>Map&lt;YourEnumType,ValueType&gt; map = new HashMap&lt;YourEnumType,ValueType&gt;();\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 2576016,
              "body": "#1 - I don&#39;t get why map/lookup() are necessary since, as you point out, there is already a valueOf() method that does the same thing. Is lookup() more efficient?  #2 - if lookup() is useful, it doesn&#39;t look thread-safe - better to move the init code to a static initializer block right after the decl of map."
            },
            {
              "comment_id": 2577352,
              "body": "Right on both counts; the example is trivial. In actual use, a <code>Map</code> only makes sense when the benefit of O(1) lookup outweighs the cost of construction. The size may be inferred from <code>EnumSet.allOf(Key.class)</code>. I&#39;ve updated the example to use a static initializer."
            },
            {
              "comment_id": 2586552,
              "body": "Thanks so much for your quick responses guys, and especially the example.  I&#39;m going to try an EnumMap, as suggested."
            }
          ],
          "answer_id": 2570374,
          "body": "<p>@Tom's recommendation to use <code>Map</code> is the preferred approach. Here's a trivial example that constructs such a <code>Map</code> for use by a static <code>lookup()</code> method.</p>\n\n<pre><code>private enum Season {\n\n    WINTER, SPRING, SUMMER, FALL;\n    private static Map&lt;String, Season&gt; map = new HashMap&lt;String, Season&gt;();\n    static {\n        for (Season s : Season.values()) {\n            map.put(s.name(), s);\n        }\n    }\n\n    public static Season lookup(String name) {\n        return map.get(name);\n    }\n}\n</code></pre>\n\n<p>Note that every <code>enum</code> type has two implicitly declared static <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.9.3\" rel=\"nofollow noreferrer\">methods</a>:</p>\n\n<pre><code>public static E[] values();\npublic static E valueOf(String name);\n</code></pre>\n\n<p>The <code>values()</code> method returns an array that is handy for constructing the <code>Map</code>. Alternatively, the array may be searched directly. The methods are implicit; they will appear in the <a href=\"http://java.sun.com/javase/6/docs/technotes/tools/solaris/javadoc.html\" rel=\"nofollow noreferrer\"><code>javadoc</code></a> of your <code>enum</code> when it is generated.</p>\n\n<p>Addendum: As suggested by @Bert F, an <a href=\"http://java.sun.com/javase/6/docs/api/java/util/EnumMap.html\" rel=\"nofollow noreferrer\"><code>EnumMap</code></a> may be advantageous. See <a href=\"http://java.sun.com/docs/books/effective/\" rel=\"nofollow noreferrer\"><em>Effective Java Second Edition</em></a>, <em>Item 33: Use EnumMap instead of ordinal indexing</em>, for a compelling example of using <a href=\"http://java.sun.com/javase/6/docs/api/java/util/EnumMap.html\" rel=\"nofollow noreferrer\"><code>EnumMap</code></a> to associate <code>enum</code>s.</p>\n"
        }
      ],
      "last_activity_date": 1684606739,
      "question_id": 2570265,
      "body": "<p>I'm not too experienced with Java yet, and I'm hoping someone can steer me in the right direction because right now I feel like I'm just beating my head against a wall...</p>\n\n<p>The first class is called MeasuredParams, and it's got 40+ numeric fields (height, weight, waistSize, wristSize - some int, but mostly double).  The second class is a statistical classifier called Classifier.  It's been trained on a subset of the MeasuredParams fields.  The names of the fields that the Classifier has been trained on is stored, in order, in an array called reqdFields.</p>\n\n<p>What I need to do is load a new array, toClassify, with the values stored in the fields from MeasuredParams that match the field list (including order) found in reqdFields.  I can make any changes necessary to the MeasuredParams class, but I'm stuck with Classifier as it is.</p>\n\n<p>My brute-force approach was to get rid of the fields in MeasuredParams and use an arrayList instead, and store the field names in an Enum object to act as an index pointer.  Then loop through the reqdFields list, one element at a time, and find the matching name in the Enum object to find the correct position in the arrayList.  Load the value stored at that positon into toClassify, and then continue on to the next element in reqdFields.</p>\n\n<p>I'm not sure how exactly I would search through the Enum object - it would be a lot easier if the field names were stored in a second arrayList.  But then the index positions between the two would have to stay matched, and I'm back to using an Enum.  I think.  I've been running around in circles all afternoon, and I keep thinking there must be an easier way of doing it.  I'm just stuck right now and can't see past what I've started.</p>\n\n<p>Any help would be GREATLY appreciated.  Thanks so much!</p>\n\n<p>Michael</p>\n"
    },
    {
      "answers": [
        {
          "answer_id": 76178165,
          "body": "<p>Make a map that maps specific types to specific implementations of a generalized <code>translate</code>. Assuming you're okay with getting a generics warning you end up <code>@SuppressWarnings</code> ignoring, you can just make the types work fine, too. A tricky aspect of all this is that types can still have subtypes, so you're sort of stuck having to loop through all supertypes with your map. Looks something like this:</p>\n<pre><code>private final Map translators = new HashMap&lt;&gt;(); // intentionally raw.\n\npublic &lt;E&gt; void register(Class&lt;E&gt; type, Function&lt;? super E, String&gt; translator) {\n  this.translators.put(type, translator);\n}\n\npublic String translate(Object o) {\n  Class&lt;?&gt; t = o.getClass(); // NPE intentional\n  while (t != null) {\n    Object translator = translators.get(t);\n    if (translator != null) {\n      return (String) ((Function) translator).apply(o);\n    }\n    t = t.getSuperclass();\n  }\n  throw new IllegalArgumentException(&quot;No translator available to translate &quot; + o.getClass()):\n}\n\nregister(Integer.class, Integer::toString);\nregister(InputStream.class, i -&gt; &quot;Hello, World!&quot;);\nregister(LocalDate.class, ld -&gt; myFancyDateFormatter.format(ld));\n\ntranslate(LocalDate.of(2022, 4, 1));\n</code></pre>\n<p>Generics can't do the job of linking together the idea that every key in your <code>translators</code> map is related to a typevar in the associated value, hence you have to eat some generics warnings. The code cannot itself cause heap corruption and all the warnings-generating shenanigans are strictly limited to <code>private</code> aspects of this class, i.e. you <code>@SuppressWarnings</code> those away (and it is safe to do so), and it won't bother the rest of your code base.</p>\n<p>If you want a default 'fallback' translator, no problem! Simply add a translator for <code>Object</code>, e.g. <code>register(Object.class, Object::toString);</code>.</p>\n<p>NB: WARNING - do not use interface types. I suggest you add a check for this (check if the <code>Class&lt;E&gt; type</code> arg is an interface, and throw an <code>IllegalArgumentException</code>). Alternatively, you need to expand the code considerably and use recursion or a queue because any given type needs to add not just its superclass to the queue, but also all its interfaces (which can have multiple parent interfaces and so on. Fortunately you can't have loops in types so you won't have to worry about loops in such structures).</p>\n"
        }
      ],
      "last_activity_date": 1684606731,
      "question_id": 76178124,
      "body": "<p>I have a base abstract class with multiple <code>translate</code> functions of different types, which I want to be able to be overridden.\nI want to create a generic translator for a <code>List</code> of any of these types. It should look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>protected &lt;T&gt; String translate(final List&lt;T&gt; list) {\n    if (list == null) {\n        return &quot;&quot;;\n    }\n    return conditionWrapper(\n            list.stream()\n                    // function with the same name for multiple classes as input\n                    .map(this::translate)\n                    .collect(Collectors.toList())\n    );\n}\n</code></pre>\n<p>But Java cannot resolve every <code>translate</code> possible here.</p>\n<p>The best way I came up with is to make another function:</p>\n<pre class=\"lang-java prettyprint-override\"><code>protected String translateHelper(final Object o) {\n    if (o instance of A) {\n        return translate((A) o);\n    } else if (o instance of B) {\n        return translate((B) o);\n    } else if ...\n    ...\n}\n</code></pre>\n<p>But it would be a pain for performance or readability, as there are many classes.</p>\n<p>Or I can make all of these classes implement some interface:</p>\n<pre class=\"lang-java prettyprint-override\"><code>protected interface Translatable {\n    String translate();\n}\n</code></pre>\n<p>But then I will be forced to implement that method inside these classes.<br />\nSometimes you can't even change them, or it would be bad for changing them for a test case.</p>\n<p>I need these <code>translate</code> functions, so they can be overridden in subclasses, with every <code>translate</code> function of a class reusing the <code>.translate()</code> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>protected &lt;T extends Translatable&gt; String translate(final List&lt;T&gt; list) {\n    if (list == null) {\n        return &quot;&quot;;\n    }\n    return conditionWrapper(\n            list.stream()\n                    .map(Translatable::translate)\n                    .collect(Collectors.toList())\n    );\n}\n\nprotected final class ArgumentTranslator implements Translatable {\n    final Argument argument;\n\n    public ArgumentTranslator(final Argument value) {\n        this.argument = value;\n    }\n\n    @Override\n    public String translate() {\n        return &quot;something&quot;;\n    }\n}\n\nprotected String translate(final Argument argument) {\n    return new ArgumentTranslator(argument).translate();\n}\n</code></pre>\n<p><code>translate</code> for a list is called so (which can be simplified with other functions)</p>\n<pre class=\"lang-java prettyprint-override\"><code>this.translate(\n        values.argument()\n                .stream()\n                .map(ArgumentTranslator::new)\n                .collect(Collectors.toList())\n)\n</code></pre>\n<p>What is better than such a bunch of <code>instanceof</code>s or boilerplate <code>translate</code>s?</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 43977368,
          "body": "I&#39;m surprised Java allows this, being a stricter language than its predecessors.  Errors in casting can lead to critical failure, as was the case with Ariane5 Flight 501 where a 64-bit float cast to a 16-bit integer resulted in the crash."
        },
        {
          "comment_id": 54733887,
          "body": "In a flight control system written in Java, this would be the least of your worries @SQLDiver"
        },
        {
          "comment_id": 59802365,
          "body": "Actually <code>i+=(long)j;</code> even will compile fine."
        },
        {
          "comment_id": 77399293,
          "body": "I think Douglas Crockford wins the argument after all... This behavior is terrible and lots of languages have similar problems around conversions."
        },
        {
          "comment_id": 78533884,
          "body": "@Tharindu that&#39;s consistent though, since the whole expression gets casted, so it&#39;s the same as as <code>i = (int)(i + (long)j);</code>"
        },
        {
          "comment_id": 79572312,
          "body": "The constant push by one set of developers for accuracy and another for ease of use is really interesting.   We almost need two versions of the language, one that is amazingly precise and one that is easy to use.  Pushing Java from both directions moves it towards being unsuitable for either group."
        },
        {
          "comment_id": 92656275,
          "body": "@RossDrew Why is that not a good idea?"
        },
        {
          "comment_id": 92656361,
          "body": "@Tharindu What did you excpect? You are casting <code>j</code> to <code>long</code>, but <code>j</code> is already a <code>long</code>, so your casting doesn&#39;t do anything."
        },
        {
          "comment_id": 92845952,
          "body": "if it did require casting, where would you put it? <code>i += (int) f;</code> casts f before addition, so it&#39;s not equivalent. <code>(int) i += f;</code> casts the result after assignment, not equivalent either. there would be no place to put a cast that would signify that you want to cast the value after adding, but before assignment."
        },
        {
          "comment_id": 95455310,
          "body": "&quot;it&#39;s floating point is not precise&quot; let&#39;s correct that-&gt; &quot;floating point is not precise&quot; (Java follows IEEE floating point standard). If you use floating point when calculations and you haven&#39;t analysed whether the error is within the bounds required for your application, and your application is critical, you are the one to blame - not the language."
        },
        {
          "comment_id": 102076700,
          "body": "@RossDrew The Ariane5 was a space rocket."
        },
        {
          "comment_id": 115123714,
          "body": "This is a huge source of bugs in Java."
        },
        {
          "comment_id": 119878013,
          "body": "@BillK no, we do not need two versions. We only need the one version for accuracy. The &quot;ease of use&quot; is an illusion.  If you opt for features that provide &quot;ease of use&quot; you invariably end up paying for them hundredfold in maintenance costs.  Let me point you to good old edsgar: <a href=\"https://www.cs.utexas.edu/users/EWD/transcriptions/EWD06xx/EWD667.html\" rel=\"nofollow noreferrer\">cs.utexas.edu/users/EWD/transcriptions/EWD06xx/EWD667.html</a> (search for &quot;ease of programming&quot; in the text.)"
        },
        {
          "comment_id": 119973712,
          "body": "@MikeNakis The lack of paying attention to ease of use has lead to people not being interested in or even hating java--especially new users.  This has lead to quite a few easy to use &amp; inaccurate languages along the line of ruby/groovy.  Kotlin seems to be a good balance of a usable static language, but it&#39;s yet another response to Java not moving towards usability.  (Don&#39;t get me wrong, I LOVE Java and they have made inroads towards usability such as not requiring two wrapper classes to read a text file, it just may be too late)."
        },
        {
          "comment_id": 129244503,
          "body": "As already mentionned, there is no good place to put a cast so the only other option would be to make it error and then you would have to use the long expression <code>i = (int)(i + j)</code>. Probably the best option would be to have a compiler option to generate a warning or error..."
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 16887547,
              "body": "So <code>i+=j</code> compiles as I checked myself, but it would result in loss of precision right? If that&#39;s the case, why doesn&#39;t it allow it to happen in i=i+j also? Why bug us there?"
            },
            {
              "comment_id": 16889030,
              "body": "@ronnieaka: I&#39;m guessing that the language designers felt that in one case (<code>i += j</code>), it is safer to assume that the loss of precision is desired as opposed to the other case (<code>i = i + j</code>)"
            }
          ],
          "answer_id": 8710685,
          "body": "<p>As always with these questions, the JLS holds the answer. In this case <a href=\"http://docs.oracle.com/javase/specs/jls/se14/html/jls-15.html#jls-15.26.2\" rel=\"noreferrer\">15.26.2 Compound Assignment Operators</a>. An extract:</p>\n\n<blockquote>\n  <p>A compound assignment expression of the form <code>E1&nbsp;op=&nbsp;E2</code> is equivalent to <code>E1&nbsp;=&nbsp;(T)((E1)&nbsp;op&nbsp;(E2))</code>, where <code>T</code> is the type of <code>E1</code>, except that <code>E1</code> is evaluated only once.</p>\n</blockquote>\n\n<p>An example cited from <a href=\"http://docs.oracle.com/javase/specs/jls/se14/html/jls-15.html#jls-15.26.2\" rel=\"noreferrer\">15.26.2</a></p>\n\n<blockquote>\n  <p>[...] the following code is correct:</p>\n\n<pre><code>short x = 3;\nx += 4.6;\n</code></pre>\n  \n  <p>and results in x having the value 7 because it is equivalent to:</p>\n\n<pre><code>short x = 3;\nx = (short)(x + 4.6);\n</code></pre>\n</blockquote>\n\n<p>In other words, your assumption is correct.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 10840773,
              "body": "In this case, the &quot;implicit cast&quot; could be lossy. In reality, as @LukasEder states in his answer, the cast to <code>int</code> is performed <i>after</i> the <code>+</code>. The compiler would (should?) throw a warning if it really did cast the <code>long</code> to <code>int</code>."
            }
          ],
          "answer_id": 8710688,
          "body": "<p>you need to cast from <code>long</code> to <code>int</code> <code>explicitly</code> in case of <code>i = i + l</code>  then it will compile and give correct output. like </p>\n\n<pre><code>i = i + (int)l;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>i = (int)((long)i + l); // this is what happens in case of += , dont need (long) casting since upper casting is done implicitly.\n</code></pre>\n\n<p>but in case of <code>+=</code> it just works fine because the operator implicitly does the type casting from type of right variable to type of left variable so need not cast explicitly.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 74109663,
              "body": "Or more fun: &quot;int x=33333333; x+=1.0f;&quot;."
            },
            {
              "comment_id": 91830401,
              "body": "@supercat , what trickery is this? A widening conversion that is incorrectly rounded, followed by an addition that doesn&#39;t actually change the result, casting to int again to produce a result that is most unexpected for normal human minds."
            },
            {
              "comment_id": 91835814,
              "body": "@neXus: IMHO, the conversion rules should have treated <code>double-&gt;float</code> as widening, on the basis that values of type <code>float</code> identify real numbers less specifically than those of type <code>double</code>.  If one views <code>double</code> as a complete postal address and <code>float</code> as a 5-digit postal code, it&#39;s possible to satisfy a request for a postal code given a complete address, but it&#39;s not possible to accurately specify a request for a complete address given just a postal code.  Converting a street address to a postal code is a lossy operation, <i>but</i>..."
            },
            {
              "comment_id": 91835919,
              "body": "...someone who needs a complete address wouldn&#39;t generally be asking for just a postal code.  Conversion from <code>float-&gt;double</code> is equivalent to converting US postal code 90210 with &quot;US Post Office, Beverly Hills CA 90210&quot;."
            }
          ],
          "answer_id": 8710717,
          "body": "<p>Very good question. The <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.26.2\" rel=\"noreferrer\">Java Language specification</a> confirms your suggestion.</p>\n\n<blockquote>\n  <p>For example, the following code is correct:</p>\n\n<pre><code>short x = 3;\nx += 4.6;\n</code></pre>\n  \n  <p>and results in x having the value 7 because it is equivalent to:</p>\n\n<pre><code>short x = 3;\nx = (short)(x + 4.6);\n</code></pre>\n</blockquote>\n"
        },
        {
          "comments": [
            {
              "comment_id": 26653986,
              "body": "Can you tell me which classfile this is?"
            },
            {
              "comment_id": 26656071,
              "body": "@hexafraction: what you mean by class file? if you asking about the class file i mentioned in my post than it&#39;s the complied version of your java class"
            },
            {
              "comment_id": 26663200,
              "body": "Oh, you mentioned &quot;the&quot; class file code, which led me to believe a specific classfile was involved. I understand what you mean now."
            },
            {
              "comment_id": 45385138,
              "body": "@Bogdan That shouldn&#39;t be a problem with properly used fonts. A programmer which chooses whe wrong font for programming should clearly think about how to proceed..."
            },
            {
              "comment_id": 45401064,
              "body": "@glglgl I disagree that one should rely on font to distinguish in those cases... but everybody has the freedom to choose what thinks is best."
            },
            {
              "comment_id": 45412747,
              "body": "On some old MATLAB version, the default font size was one which made O and 0 look the same in Times New Roman, as well as 1 and l. It was always the first step that I did to change the font sie to something useful..."
            }
          ],
          "answer_id": 8710746,
          "body": "<p>Yes,</p>\n\n<p>basically when we write</p>\n\n<pre><code>i += l; \n</code></pre>\n\n<p>the compiler converts this to </p>\n\n<pre><code>i = (int)(i + l);\n</code></pre>\n\n<p>I just checked the <code>.class</code> file code.</p>\n\n<p>Really a good thing to know</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 36007105,
              "body": "@AkshatAgarwal ch is a char. 65 * 1.5 = 97.5 -&gt; Got it?"
            },
            {
              "comment_id": 36813637,
              "body": "Yeah, but I can just see some beginner coming here, reading this, and going away thinking that you can convert any character from upper case to lower case by multiplying it by 1.5."
            },
            {
              "comment_id": 36822007,
              "body": "@DavidWallace Any character as long as it is <code>A</code> ;)"
            },
            {
              "comment_id": 59705247,
              "body": "@PeterLawrey &amp; @DavidWallace I will reveal your <b>secret</b>- <code>ch += 32</code>  =D"
            }
          ],
          "answer_id": 8710747,
          "body": "<p>A good example of this casting is using *= or /=</p>\n\n<pre><code>byte b = 10;\nb *= 5.7;\nSystem.out.println(b); // prints 57\n</code></pre>\n\n<p>or</p>\n\n<pre><code>byte b = 100;\nb /= 2.5;\nSystem.out.println(b); // prints 40\n</code></pre>\n\n<p>or</p>\n\n<pre><code>char ch = '0';\nch *= 1.1;\nSystem.out.println(ch); // prints '4'\n</code></pre>\n\n<p>or</p>\n\n<pre><code>char ch = 'A';\nch *= 1.5;\nSystem.out.println(ch); // prints 'a'\n</code></pre>\n"
        },
        {
          "answer_id": 8710752,
          "body": "<p>The problem here involves type casting.</p>\n\n<p>When you add int and long, </p>\n\n<ol>\n<li>The int object is casted to long &amp; both are added and you get long object.</li>\n<li>but long object cannot be implicitly casted to int. So, you have to do that explicitly.</li>\n</ol>\n\n<p>But <code>+=</code> is coded in such a way that it does type casting. <code>i=(int)(i+m)</code></p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 27251828,
              "body": "Hey, but <code>long</code> is 2 times larger than <code>float</code>."
            },
            {
              "comment_id": 27561875,
              "body": "A <code>float</code> can&#39;t hold every possible <code>int</code> value, and a <code>double</code> can&#39;t hold every possible <code>long</code> value."
            },
            {
              "comment_id": 29498022,
              "body": "What do you mean by &quot;safely converted&quot; ? From latter part of the answer I can deduce that you  meant automatic conversion ( implicit cast ) which is of course not true in case of float -&gt; long. float pi = 3.14f; long b = pi; will result in compiler error."
            },
            {
              "comment_id": 56590279,
              "body": "You&#39;d be better off differentiating floating point primitive types with integer primitive types. They&#39;re not the same thing."
            },
            {
              "comment_id": 74109966,
              "body": "Java has simplistic conversion rules that require the use of casts in many patterns where behavior without casts would otherwise match expectations, but doesn&#39;t require casts in many patterns that are usually erroneous.  For example, a compiler will accept <code>double d=33333333+1.0f;</code> without complaint, even though the result 33333332.0 would likely not be what was intended (incidentally, the arithmetically-correct answer of 33333334.0f would be representable as either <code>float</code> or <code>int</code>)."
            }
          ],
          "answer_id": 14473282,
          "body": "<p>In Java type conversions are performed automatically when the type of the expression on the right hand side of an assignment operation can be safely promoted to the type of the variable on the left hand side of the assignment. Thus we can safely assign:  </p>\n\n<pre> byte -> short -> int -> long -> float -> double. </pre>  \n\n<p>The same will not work the other way round. For example we cannot automatically convert a long to an int because the first requires more storage than the second and consequently information may be lost. To force such a conversion we must carry out an explicit conversion.<br>\n<a href=\"http://way2java.com/casting-operations/data-type-casting-type-conversion/\" rel=\"noreferrer\">Type - Conversion</a></p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 44299319,
              "body": "Thanks for the insight regarding the comparison of the <code>op</code> use in C++ to its use in Java. I always like seeing these bits of trivia and I do think they contribute something to the conversation that may often be left out."
            },
            {
              "comment_id": 85982766,
              "body": "However the question itself <i>is</i> interesting, asking this <i>in an interview</i> is stupid. It does not prove that the person can produce a good quality code - it just proves that he had enough patience to prepare for an Oracle certificate exam. And &quot;avoiding&quot; the incompatible types by using a dangerous auto-conversion and thus hiding the possible overflow error, probably even <i>proves</i> that the person is not able to produce probable a good quality code. Damn the Java authors for all these auto-conversions and auto-boxing and all!"
            }
          ],
          "answer_id": 27247364,
          "body": "<p>Sometimes, such a question can be asked at an interview.</p>\n\n<p>For example, when you write:</p>\n\n<pre><code>int a = 2;\nlong b = 3;\na = a + b;\n</code></pre>\n\n<p>there is no automatic typecasting. In C++ there will not be any error compiling the above code, but in Java you will get something like <code>Incompatible type exception</code>.</p>\n\n<p>So to avoid it, you must write your code like this:</p>\n\n<pre><code>int a = 2;\nlong b = 3;\na += b;// No compilation error or any exception due to the auto typecasting\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 57144026,
              "body": "Compound assignment operators perform a narrowing conversion of the result of the binary operation, not the right-hand operand. So in your example, &#39;a += b&#39; is not equivalent to &#39;a = a + (int) b&#39; but, as explained by other answers here, to &#39;a = (int)(a + b)&#39;."
            }
          ],
          "answer_id": 30699499,
          "body": "<p>The main difference is that with <code>a = a + b</code>, there is no typecasting going on, and so the compiler gets angry at you for not typecasting. But with <code>a += b</code>, what it's really doing is typecasting <code>b</code> to a type compatible with <code>a</code>. So if you do </p>\n\n<pre><code>int a=5;\nlong b=10;\na+=b;\nSystem.out.println(a);\n</code></pre>\n\n<p>What you're really doing is: </p>\n\n<pre><code>int a=5;\nlong b=10;\na=a+(int)b;\nSystem.out.println(a);\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 90614479,
              "body": "I think a more interesting case might be <code>int someInt = 16777217; float someFloat = 0.0f; someInt += someFloat;</code>.  Adding zero to <code>someInt</code> shouldn&#39;t affect its value, but promoting <code>someInt</code> to <code>float</code> may change its value."
            }
          ],
          "answer_id": 34863187,
          "body": "<p>Subtle point here...</p>\n\n<p>There is an implicit typecast for <code>i+j</code> when <code>j</code> is a double and <code>i</code> is an int.\nJava <strong>ALWAYS</strong> converts an integer into a double when there is an operation between them.</p>\n\n<p>To clarify <code>i+=j</code> where <code>i</code> is an integer and <code>j</code> is a double can be described as</p>\n\n<pre><code>i = &lt;int&gt;(&lt;double&gt;i + j)\n</code></pre>\n\n<p>See: <a href=\"https://www.cs.cmu.edu/~pattis/15-1XX/15-200/lectures/voe/lecture.html#ImplicitConversion\" rel=\"noreferrer\">this description of implicit casting</a></p>\n\n<p>You might want to typecast <code>j</code> to <code>(int)</code> in this case for clarity.</p>\n"
        },
        {
          "answer_id": 55066886,
          "body": "<p>Java Language Specification <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.26.2\" rel=\"noreferrer\">defines <code>E1 op= E2</code> to be equivalent to <code>E1 = (T) ((E1) op (E2))</code> where <code>T</code> is a type of <code>E1</code> and <code>E1</code> is evaluated once</a>.</p>\n\n<p>That's a technical answer, but you may be wondering why that's a case. Well, let's consider the following program.</p>\n\n<pre><code>public class PlusEquals {\n    public static void main(String[] args) {\n        byte a = 1;\n        byte b = 2;\n        a = a + b;\n        System.out.println(a);\n    }\n}\n</code></pre>\n\n<p>What does this program print?</p>\n\n<p>Did you guess 3? Too bad, this program won't compile. Why? Well, it so happens that addition of bytes in Java <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-5.html#jls-5.6.2\" rel=\"noreferrer\">is defined to return an <code>int</code></a>. This, I believe was because the Java Virtual Machine doesn't define byte operations to save on bytecodes (there is a limited number of those, after all), using integer operations instead is an implementation detail exposed in a language.</p>\n\n<p>But if <code>a = a + b</code> doesn't work, that would mean <code>a += b</code> would never work for bytes if it <code>E1 += E2</code> was defined to be <code>E1 = E1 + E2</code>. As the previous example shows, that would be indeed the case. As a hack to make <code>+=</code> operator work for bytes and shorts, there is an implicit cast involved. It's not that great of a hack, but back during the Java 1.0 work, the focus was on getting the language released to begin with. Now, because of backwards compatibility, this hack introduced in Java 1.0 couldn't be removed.</p>\n"
        }
      ],
      "last_activity_date": 1684606659,
      "question_id": 8710619,
      "body": "<p>Until today, I thought that for example:</p>\n\n<pre><code>i += j;\n</code></pre>\n\n<p>Was just a shortcut for:</p>\n\n<pre><code>i = i + j;\n</code></pre>\n\n<p>But if we try this:</p>\n\n<pre><code>int i = 5;\nlong j = 8;\n</code></pre>\n\n<p>Then <code>i = i + j;</code> will not compile but <code>i += j;</code> will compile fine.</p>\n\n<p>Does it mean that in fact <code>i += j;</code> is a shortcut for something like this\n<code>i = (type of i) (i + j)</code>?</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 3520844,
          "body": "@Shervin Encouraging nulls makes the code less understandable and less reliable."
        },
        {
          "comment_id": 14300015,
          "body": "Not using null is superior to most other suggestions here. Throw exceptions, don&#39;t return or allow nulls. BTW - &#39;assert&#39; keyword is useless, because it&#39;s disabled by default. Use an always-enabled failure mechanism"
        },
        {
          "comment_id": 24270661,
          "body": "You can create class that will check for null values or null object. That will help you improving reuse-ability.. <a href=\"http://stackoverflow.com/a/16833309/1490962\">stackoverflow.com/a/16833309/1490962</a>"
        },
        {
          "comment_id": 28546303,
          "body": "use <a href=\"http://projectlombok.org/\" rel=\"nofollow noreferrer\">Lombok</a>, you got <a href=\"http://projectlombok.org/features/NonNull.html\" rel=\"nofollow noreferrer\">@NotNull</a>"
        },
        {
          "comment_id": 39394988,
          "body": "Isn&#39;t there are Design Pattern that speaks about making a null-object? So when instantiating a new object, you always use this null object (same super class, same [but empty] methods) and later on you set the object to the full object when you need it. You might want to check out a similar question: <a href=\"https://stackoverflow.com/questions/9162371/what-are-good-light-weight-design-patterns-for-avoid-nulls-in-java?rq=1\" title=\"what are good light weight design patterns for avoid nulls in java\">stackoverflow.com/questions/9162371/&hellip;</a> and this info about the Null Object Pattern: <a href=\"https://en.wikipedia.org/wiki/Null_Object_pattern\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Null_Object_pattern</a>"
        },
        {
          "comment_id": 60423263,
          "body": "Nulls should be avoided in high-level code. Tony Hoare, who invented null references, calls them &quot;a billion-dollar mistake&quot;. Take a look <a href=\"http://www.softwaregeek.net/2016/04/how-to-avoid-null-checks-in-java.html\" rel=\"nofollow noreferrer\">here</a> for some ideas."
        },
        {
          "comment_id": 63439111,
          "body": "Seems to be in Java 8: static Objects.isNull(Object o) <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Objects.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/Objects.html</a>"
        },
        {
          "comment_id": 72139761,
          "body": "How about wrapping the object with Optional . Use optional where ever you see possibility of nulls"
        },
        {
          "comment_id": 120493140,
          "body": "The most common misuse of null is people returning null instead of an empty collection. That drives me crazy each time. Stop using nulls, and you&#39;ll live in a better world. Also, spread your code with <code>final</code> keyword and you&#39;ll live in a even better world."
        },
        {
          "comment_id": 126780372,
          "body": "@Abhishekkapoor Optionals are not meant to be used as parameters or return values. They&#39;re only to be used in functional programming (e.g. streams)."
        },
        {
          "comment_id": 128840170,
          "body": "@Abhishekkapoor Using Option on input parameters is an understandable idea, but it&#39;s actually a very bad idea in practice. I have a blog about this where I give several examples, all taken from production code, where this practices causes more trouble than it&#39;s worth. If you&#39;re interested, read it at <a href=\"https://github.com/SwingGuy1024/Blog/blob/master/Bad%20Uses%20of%20Optional.md\" rel=\"nofollow noreferrer\">github.com/SwingGuy1024/Blog/blob/master/&hellip;</a>"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 1525273,
              "body": "Problem is that usually you loose context as the NullPointerException does not indicate WHICH variable was null, and you may have several &quot;.&quot;-operations on the line.  Using &quot;if (foo == null) throw new RuntimeException(&quot;foo == null&quot;)&quot; allows you to state explicitly WHAT was wrong, giving your stack trace much more value to those who have to fix it."
            },
            {
              "comment_id": 5218513,
              "body": "With Andersen - I would love Java&#39;s exception system to be able to include the name of a variable that&#39;s being worked upon, so that NullPointerExceptions would not only indicate the line the exception occurred on, but also the variable name. This should work just fine in unobfuscated software."
            },
            {
              "comment_id": 22890506,
              "body": "I had a professor that preached against method call chaining. His theory was that you should be wary of call chains that were longer than 2 methods. I don&#39;t know if that&#39;s a hard rule, but it definitely removes most of the problems with NPE stack traces."
            },
            {
              "comment_id": 132884805,
              "body": "@RustyTheBoyRobot You could just put each call on the chain on its own line. That way you can still chain until the cows come home, but you know exactly where things went awry."
            }
          ],
          "answer_id": 271553,
          "body": "<p>Rather than Null Object Pattern -- which has its uses -- you might consider situations where the null object is a bug.</p>\n\n<p>When the exception is thrown, examine the stack trace and work through the bug.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 72069008,
              "body": "No, <a href=\"http://stackoverflow.com/a/21245984/3779853\">do not use assertions in production code</a>."
            }
          ],
          "answer_id": 271557,
          "body": "<ul>\n<li>If you consider an object should not be null (or it is a bug) use an assert.</li>\n<li>If your method doesn't accept null params say it in the javadoc and use an assert.</li>\n</ul>\n\n<p>You have to check for object != null only if you want to handle the case where the object may be null...</p>\n\n<p>There is a proposal to add new annotations in Java7 to help with null / notnull params:\n<a href=\"http://tech.puredanger.com/java7/#jsr308\" rel=\"noreferrer\">http://tech.puredanger.com/java7/#jsr308</a></p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 24730588,
              "body": "But then you have to assume <code>equals</code> (could be any method) will handle null correctly. Really all this is doing is passing the responsibility to someone else (or another method)."
            },
            {
              "comment_id": 26216028,
              "body": "@Supericy Basically yes, but <code>equals</code> (or whatever method) has to check for <code>null</code> anyway. Or state explicitly that it does not."
            }
          ],
          "answer_id": 271576,
          "body": "<p>Sometimes, you have methods that operate on its parameters that define a symmetric operation:</p>\n\n<pre><code>a.f(b); &lt;-&gt; b.f(a);\n</code></pre>\n\n<p>If you know b can never be null, you can just swap it. It is most useful for equals:\nInstead of <code>foo.equals(\"bar\");</code> better do <code>\"bar\".equals(foo);</code>.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 1993029,
              "body": "Also you can use the more generic version from Apache Commons, quite useful at the start of methods to check params I find.   Validate.notNull( object, &quot;object must not be null&quot;);  <a href=\"http://commons.apache.org/lang/apidocs/org/apache/commons/lang/Validate.html\" rel=\"nofollow noreferrer\">commons.apache.org/lang/apidocs/org/apache/commons/lang/&hellip;</a>"
            },
            {
              "comment_id": 82421359,
              "body": "@monojohnny  does Validate use Assert statements into?. i ask that because Assert may be activate / deactivate on JVM and it&#39;s suggest do not use in production."
            },
            {
              "comment_id": 83233569,
              "body": "Don&#39;t think so - I believe it just throws a RuntimeException if validation fails"
            }
          ],
          "answer_id": 271587,
          "body": "<p>Depending on what kind of objects you are checking you may be able to use some of the classes in the apache commons such as: <a href=\"http://commons.apache.org/lang/\" rel=\"noreferrer\">apache commons lang</a> and <a href=\"http://commons.apache.org/collections/\" rel=\"noreferrer\">apache commons collections</a></p>\n\n<p>Example: </p>\n\n<pre><code>String foo;\n...\nif( StringUtils.isBlank( foo ) ) {\n   ///do something\n}\n</code></pre>\n\n<p>or (depending on what you need to check):</p>\n\n<pre><code>String foo;\n...\nif( StringUtils.isEmpty( foo ) ) {\n   ///do something\n}\n</code></pre>\n\n<p>The StringUtils class is only one of many; there are quite a few good classes in the commons that do null safe manipulation.</p>\n\n<p>Here follows an example of how you can use null vallidation in JAVA when you include apache library(commons-lang-2.4.jar)</p>\n\n<pre><code>public DOCUMENT read(String xml, ValidationEventHandler validationEventHandler) {\n    Validate.notNull(validationEventHandler,\"ValidationHandler not Injected\");\n    return read(new StringReader(xml), true, validationEventHandler);\n}\n</code></pre>\n\n<p>And if you are using Spring, Spring also has the same functionality in its package, see library(spring-2.4.6.jar) </p>\n\n<p>Example on how to use this static classf from spring(org.springframework.util.Assert)</p>\n\n<pre><code>Assert.notNull(validationEventHandler,\"ValidationHandler not Injected\");\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 8355749,
              "body": "What&#39;s the point in throwing IllegalArgumentException? I think NullPointerException would be clearer, and that would also be thrown if you don&#39;t do the null-check yourself. I&#39;d either use assert or nothing at all."
            },
            {
              "comment_id": 8451120,
              "body": "It&#39;s unlikely that every other value than null is acceptable. You could have IllegalArgumentException, OutOfRageException etc etc. Sometimes this makes sense. Other times you end up creating a lot of exception classes that doesn&#39;t add any value, then you just use IllegalArgumentException. It doesn&#39;t makes sense to have one exception for null-input, and another one for everything else."
            },
            {
              "comment_id": 8571644,
              "body": "Yes, I agree to fail-fast-principle, but in the example given above, the value is not passed on, but is the object on which a method shall be called. So it fails equallys fast, and adding a null check just to throw an exception that would be thrown anyway at the same time and place doesn&#39;t seem to make debugging any easier."
            },
            {
              "comment_id": 10323356,
              "body": "I agree with @Axel in that IllegalArgumentException implies (as I use it anyway) that a precondition for the argument does not hold as it pertains to a <i>constraint</i> on the parameter. A null parameter is usually just &quot;a general error in programming&quot; and not an application/API specific constraint. To maintain a defensive fail-fast strategy, there&#39;s nothing stopping anyone for checking for a null and throwing a NullPointerException... which exactly conveys what happened, namely, &quot;you didn&#39;t program it right&quot; :)"
            },
            {
              "comment_id": 16538947,
              "body": "&quot;A null parameter is usually just &quot;a general error in programming&quot; and not an application/API specific constraint.&quot; Naive. You can use this as a security hole to DoS or attempt to gain stacktrace info (if such information is not supressed). <a href=\"http://osvdb.org/show/osvdb/67379\" rel=\"nofollow noreferrer\">osvdb.org/show/osvdb/67379</a>   If your API is public and you don&#39;t explicitly define the boundaries you accept--both through API docs and whatever tools you can use to ensure validity of the contract-- the caller&#39;s free to do whatever they want. <b>You</b> are the one who didn&#39;t program right then, not the caller."
            },
            {
              "comment_id": 22590312,
              "body": "A security hole? The JDK is full of code like this. If you don&#39;t want the user to see stacktraces, then just disable them. No one implied that the behaviour is not documented. MySQL is written in C where dereferencing null pointers is undefined behaviour, nothing like throwing an exception."
            },
            {
              "comment_id": 23034519,
              "body": "<code>throw new IllegalArgumentException(&quot;object==null&quot;)</code>"
            },
            {
              "comment_id": 24735455,
              "body": "@myplacedk I think it does make sense to have a different exception for null values passed in that from improper values passed in. The two are usually results of different types of programming errors. Null values usually arise from some required computation not happening, while other problems usually arise from required computations being incorrect."
            },
            {
              "comment_id": 48513976,
              "body": "@Axel the whole point of using anything other than RuntimeException is the descriptiveness of the Exception. Why IllegalArgumentException over NullPointerException? Because when you are debugging an exception caused by this, the IllegalArgumentException is abundantly more obvious, especially when you put a message on it. This especially applies to enterprise applications when NullPointerExceptions creep up (yes, these happen in enterprise applications). In this same example, the programmer may not have control over whether or not assertions get processed by the JVM."
            },
            {
              "comment_id": 65203727,
              "body": "1/2 I have to agree that a <code>IllegalArgumentException</code> is better than a plain-vanilla <code>NPE</code> for these type of situations. I see a NPE as an indication that somewhere in the code, something unsafely de-referenced an expression that happened to be null (assuming all known and declared preconditions and invariants were met). An illegal argument exception OTH tells me a well-known precondition or invariant was not met."
            },
            {
              "comment_id": 65203849,
              "body": "2/2 - That is, a NPE tells me there is a yet-undocumented null bug within the method (or within the methods it calls) or that there is a null precondition that we have not coded for. An illegal argument exception tells there is a bug <i>outside</i> of this method lying somewhere along the call chain that leads to the current method. Sticking to this pattern (within reason obviously), it does lead to faster root-cause analysis of errors (specially the nasty, intertwined ones.)"
            },
            {
              "comment_id": 74710692,
              "body": "Throwing <code>NullPointerException</code> is the Java convention. See e.g. <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Objects.html#requireNonNull-T-\" rel=\"nofollow noreferrer\"><code>Objects.requireNonNull</code></a> which is <i>&quot;primarily for doing parameter validation in methods and constructors&quot;</i> and throws <code>NullPointerException</code>. There is also simply the doc for <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/NullPointerException.html\" rel=\"nofollow noreferrer\"><code>NullPointerException</code></a> which states that <i>&quot;applications should throw instances of this class to indicate other illegal uses of the <code>null</code> object&quot;</i>."
            },
            {
              "comment_id": 133538090,
              "body": "Agree with @luis.espinal on the differential uses of NPE and IAE.  However, this suggests - to me at least - that Java is really lacking a <code>NullArgumentException</code> as a subclass of <code>IllegalArgumentException</code>."
            }
          ],
          "answer_id": 271616,
          "body": "<h2>If null-values are not allowed</h2>\n\n<p>If your method is called externally, start with something like this:</p>\n\n<pre><code>public void method(Object object) {\n  if (object == null) {\n    throw new IllegalArgumentException(\"...\");\n  }\n</code></pre>\n\n<p>Then, in the rest of that method, you'll know that <code>object</code> is not null.</p>\n\n<p>If it is an internal method (not part of an API), just document that it cannot be null, and that's it.</p>\n\n<p>Example:</p>\n\n<pre><code>public String getFirst3Chars(String text) {\n  return text.subString(0, 3);\n}\n</code></pre>\n\n<p>However, if your method just passes the value on, and the next method passes it on etc. it could get problematic. In that case you may want to check the argument as above.</p>\n\n<h2>If null is allowed</h2>\n\n<p>This really depends. If find that I often do something like this:</p>\n\n<pre><code>if (object == null) {\n  // something\n} else {\n  // something else\n}\n</code></pre>\n\n<p>So I branch, and do two completely different things. There is no ugly code snippet, because I really need to do two different things depending on the data. For example, should I work on the input, or should I calculate a good default value?</p>\n\n<hr>\n\n<p>It's actually rare for me to use the idiom \"<code>if (object != null &amp;&amp; ...</code>\".</p>\n\n<p>It may be easier to give you examples, if you show examples of where you typically use the idiom.</p>\n"
        },
        {
          "answer_id": 271617,
          "body": "<p>Asking that question points out that you may be interested in error handling strategies.  How and where to handle errors is a pervasive architectural question.  There are several ways to do this.</p>\n<p>My favorite: allow the Exceptions to ripple through - catch them at the 'main loop' or in some other function with the appropriate responsibilities.  Checking for error conditions and handling them appropriately can be seen as a specialized responsibility.</p>\n<p>Sure do have a look at Aspect Oriented Programming, too - they have neat ways to insert <code>if( o == null ) handleNull()</code> into your bytecode.</p>\n"
        },
        {
          "answer_id": 271735,
          "body": "<p>Wherever you pass an array or a Vector, initialise these to empty ones, instead of null.  - This way you can avoid lots of checking for null and all is good :)</p>\n\n<pre><code>public class NonNullThing {\n\n   Vector vectorField = new Vector();\n\n   int[] arrayField = new int[0];\n\n   public NonNullThing() {\n\n      // etc\n\n   }\n\n}\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 124582657,
              "body": "Nice answer, especially mentioning asserts. I came from C and use them constantly. As to Null Objects, they are NOT a silver bullet. I have often spent hours debugging code which turned out to be a Null Object being used, doing nothing (or returning its defaults) when a NPE would have been indicated the problem much more clearly. So then you&#39;ll have to do a &quot;Null Object check&quot; instead of a null check, and haven&#39;t won anything, actually lost clarity. Nowadays, if I can&#39;t avoid null, I just document it clearly and that&#39;s it."
            },
            {
              "comment_id": 128792814,
              "body": "Writing <code>this.bar = Objects.requireNonNull(bar);</code> is a good use of this method, because you&#39;re not about to use <code>this.bar</code>. This way, you get the exception when an invalid null object is being passed, rather than when you try to use it. But, it often gets used this way:     <code>Objects.requireNonNull(getThing()).doThingStuff();</code> Here, the call to <code>Objects.requireNonNull()</code> doesn&#39;t change the behavior at all, it throws the NPE either way. It is best used when you are saving an object for later use. In my second example, the exception is useful. It helps track down the bug."
            },
            {
              "comment_id": 128851733,
              "body": "Should we suggest using exceptions for control flow though? While it&#39;s technically a solution that works, programmers should remember that exceptions should only be used to catch unexpected situations. When validating a user&#39;s input, invalid input should ideally not lead to exceptions being thrown."
            }
          ],
          "answer_id": 271874,
          "body": "<p>This to me sounds like a reasonably common problem that junior to intermediate developers tend to face at some point: they either don't know or don't trust the contracts they are participating in and defensively overcheck for nulls.  Additionally, when writing their own code, they tend to rely on returning nulls to indicate something thus requiring the caller to check for nulls.</p>\n<p>To put this another way, there are two instances where null checking comes up:</p>\n<ol>\n<li><p>Where null is a valid response in terms of the contract; and</p>\n</li>\n<li><p>Where it isn't a valid response.</p>\n</li>\n</ol>\n<p>(2) is easy.  As of Java 1.7 you can use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Objects.html#requireNonNull(T)\" rel=\"noreferrer\"><code>Objects.requireNonNull(foo)</code></a>. (If you are stuck with a previous version then <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/language/assert.html\" rel=\"noreferrer\"><code>assert</code>ions</a> may be a good alternative.)</p>\n<p>&quot;Proper&quot; usage of this method would be like below. The method returns the object passed into it and throws a <code>NullPointerException</code> if the object is null. This means that the returned value is always non-null. The method is primarily intended for validating parameters.</p>\n<pre><code>public Foo(Bar bar) {\n    this.bar = Objects.requireNonNull(bar);\n}\n</code></pre>\n<p>It can also be used like an <code>assert</code>ion though since it throws an exception if the object is null. In both uses, a message can be added which will be shown in the exception. Below is using it like an assertion and providing a message.</p>\n<pre><code>Objects.requireNonNull(someobject, &quot;if someobject is null then something is wrong&quot;);\nsomeobject.doCalc();\n</code></pre>\n<p>Generally throwing a specific exception like <code>NullPointerException</code> when a value is null but shouldn't be is favorable to throwing a more general exception like <code>AssertionError</code>. This is the approach the Java library takes; favoring <code>NullPointerException</code> over <code>IllegalArgumentException</code> when an argument is not allowed to be null.</p>\n<p>(1) is a little harder.  If you have no control over the code you're calling then you're stuck.  If null is a valid response, you have to check for it.</p>\n<p>If it's code that you do control, however (and this is often the case), then it's a different story.  Avoid using nulls as a response.  With methods that return collections, it's easy: return empty collections (or arrays) instead of nulls pretty much all the time.</p>\n<p>With non-collections it might be harder.  Consider this as an example: if you have these interfaces:</p>\n<pre><code>public interface Action {\n  void doSomething();\n}\n\npublic interface Parser {\n  Action findAction(String userInput);\n}\n</code></pre>\n<p>where Parser takes raw user input and finds something to do, perhaps if you're implementing a command line interface for something.  Now you might make the contract that it returns null if there's no appropriate action.  That leads the null checking you're talking about.</p>\n<p>An alternative solution is to never return null and instead use the <a href=\"https://en.wikipedia.org/wiki/Null_Object_pattern\" rel=\"noreferrer\">Null Object pattern</a>:</p>\n<pre><code>public class MyParser implements Parser {\n  private static Action DO_NOTHING = new Action() {\n    public void doSomething() { /* do nothing */ }\n  };\n\n  public Action findAction(String userInput) {\n    // ...\n    if ( /* we can't find any actions */ ) {\n      return DO_NOTHING;\n    }\n  }\n}\n</code></pre>\n<p>Compare:</p>\n<pre><code>Parser parser = ParserFactory.getParser();\nif (parser == null) {\n  // now what?\n  // this would be an example of where null isn't (or shouldn't be) a valid response\n}\nAction action = parser.findAction(someInput);\nif (action == null) {\n  // do nothing\n} else {\n  action.doSomething();\n}\n</code></pre>\n<p>to</p>\n<pre><code>ParserFactory.getParser().findAction(someInput).doSomething();\n</code></pre>\n<p>which is a much better design because it leads to more concise code.</p>\n<p>That said, perhaps it is entirely appropriate for the findAction() method to throw an Exception with a meaningful error message -- especially in this case where you are relying on user input.  It would be much better for the findAction method to throw an Exception than for the calling method to blow up with a simple NullPointerException with no explanation.</p>\n<pre><code>try {\n    ParserFactory.getParser().findAction(someInput).doSomething();\n} catch(ActionNotFoundException anfe) {\n    userConsole.err(anfe.getMessage());\n}\n</code></pre>\n<p>Or if you think the try/catch mechanism is too ugly, rather than Do Nothing your default action should provide feedback to the user.</p>\n<pre><code>public Action findAction(final String userInput) {\n    /* Code to return requested Action if found */\n    return new Action() {\n        public void doSomething() {\n            userConsole.err(&quot;Action not found: &quot; + userInput);\n        }\n    }\n}\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 7073436,
              "body": "I agree - only in that situation. I can&#39;t stand programmers that have taken this to the next unnecessary level and write if (null != myVar)... just looks ugly to me and serves no purpose!"
            },
            {
              "comment_id": 9112892,
              "body": "This is a particular example, probably the most used, of a general good practice: if you know it, always do <code>&lt;object that you know that is not null&gt;.equals(&lt;object that might be null&gt;);</code>. It works for other methods other than <code>equals</code> if you know the contract and those methods can handle <code>null</code> parameters."
            },
            {
              "comment_id": 28243298,
              "body": "This is the first example I have seen of <a href=\"http://www.codinghorror.com/blog/2012/07/new-programming-jargon.html\" rel=\"nofollow noreferrer\">Yoda Conditions</a> that actually makes sense"
            },
            {
              "comment_id": 36232608,
              "body": "NullPointerExceptions are thrown for a reason. They are thrown because an object is null where it shouldn&#39;t be. It is the programmers job to FIX this, not HIDE the problem."
            },
            {
              "comment_id": 55628422,
              "body": "This only hides the problem. What if you are using  <code>foo</code> later on? If a variable shouldn&#39;t be null, but is...your app needs to get a NPE so you as the developer can actually fix the underlying reason."
            }
          ],
          "answer_id": 275869,
          "body": "<p>Only for this situation -</p>\n\n<p>Not checking if a variable is null before invoking an equals method (a string compare example below):</p>\n\n<pre><code>if ( foo.equals(\"bar\") ) {\n // ...\n}\n</code></pre>\n\n<p>will result in a <code>NullPointerException</code> if <code>foo</code> doesn't exist.</p>\n\n<p>You can avoid that if you compare your <code>String</code>s like this:</p>\n\n<pre><code>if ( \"bar\".equals(foo) ) {\n // ...\n}\n</code></pre>\n"
        },
        {
          "answer_id": 288524,
          "body": "<p>I've tried the <code>NullObjectPattern</code> but for me is not always the best way to go. There are sometimes when a \"no action\" is not appropiate.</p>\n\n<p><code>NullPointerException</code> is a <em>Runtime exception</em> that means it's developers fault and with enough experience it tells you exactly where is the error.</p>\n\n<p>Now to the answer:</p>\n\n<p>Try to make all your attributes and its accessors as private as possible or avoid to  expose them to the clients at all. You can have the argument values in the constructor of course, but by reducing the scope you don't let the client class pass an invalid value. If you need to modify the values, you can always create a new <code>object</code>.  You check the values in the constructor only <strong>once</strong> and in the rest of the methods you can be almost sure that the values are not null.</p>\n\n<p>Of course, experience is the better way to understand and apply this suggestion.</p>\n\n<p>Byte!</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 687430,
              "body": "mmm, what is the difference? p.getAge() would throw the same NPE with less overhead and a clearer stack trace. What am I missing?"
            },
            {
              "comment_id": 718130,
              "body": "It is better to throw an IllegalArgumentException(&quot;e == null&quot;) in your example as it clearly indicates that it is a programmer-intended exception (along with enough information to actually allow the maintainer to identify the problem).  NullPointerExceptions should be reserved for the JVM, as it then clearly indicates that this was unintentional (and usually happens somewhere hard to identify)"
            },
            {
              "comment_id": 5570462,
              "body": "This is now part of Google Guava."
            },
            {
              "comment_id": 13234275,
              "body": "Smells like over-engineering to me. Just let the JVM throw an NPE and don&#39;t clutter your code with this junk."
            },
            {
              "comment_id": 18487290,
              "body": "I like it and open most methods and constructors with explicit checks on the arguments; if there is an error, methods always fail on the first few lines and I know the offending reference without finding something like <code>getThing().getItsThing().getOtherThing().wowEncapsulationIsB&zwnj;&#8203;roken().setLol(&quot;hi&quot;)&zwnj;&#8203;;</code>"
            },
            {
              "comment_id": 39390256,
              "body": "Java 1.7 added the <code>java.util.Objects.requireNonNull</code> method (amongst others) that does exactly this. It&#39;s such a common idiom that I&#39;m amazed it took this long!"
            },
            {
              "comment_id": 93003825,
              "body": "just for interest... what is the difference between checkNotNull(bla).foo() and bla.foo() if both may throw a NPE in case of null? zero benefits, right?"
            },
            {
              "comment_id": 100792549,
              "body": "@gorefest <code>checkNotNull</code> returns the value, so you can assign your fields in constructor with it. E.g. <code>this.foo = checkNotNull(foo)</code>, also more readable (it shows you want to enforce non nulls, not some random method call), also what if the param has no methods to call, or methods require many arguments. Lastly <code>checkNotNull</code> supports custom error message."
            }
          ],
          "answer_id": 397740,
          "body": "<p>The Google collections framework offers a good and elegant way to achieve the null check.</p>\n\n<p>There is a method in a library class like this:</p>\n\n<pre><code>static &lt;T&gt; T checkNotNull(T e) {\n   if (e == null) {\n      throw new NullPointerException();\n   }\n   return e;\n}\n</code></pre>\n\n<p>And the usage is (with <code>import static</code>):</p>\n\n<pre><code>...\nvoid foo(int a, Person p) {\n   if (checkNotNull(p).getAge() &gt; a) {\n      ...\n   }\n   else {\n      ...\n   }\n}\n...\n</code></pre>\n\n<p>Or in your example:</p>\n\n<pre><code>checkNotNull(someobject).doCalc();\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 718115,
              "body": "I think this is wrong.  There should be a way to specify that a given variable is ALWAYS non-null."
            },
            {
              "comment_id": 1188327,
              "body": "Update: the proposal will not make Java7. See <a href=\"http://blogs.sun.com/darcy/entry/project_coin_final_five\" rel=\"nofollow noreferrer\">blogs.sun.com/darcy/entry/project_coin_final_five</a> ."
            },
            {
              "comment_id": 4807915,
              "body": "But on the same page, see the link to <a href=\"http://types.cs.washington.edu/jsr308/\" rel=\"nofollow noreferrer\">types.cs.washington.edu/jsr308</a> for info about using the Checker framework to add the @Nullable and @NonNull type annotations in Java 7."
            },
            {
              "comment_id": 13759049,
              "body": "Interesting idea but the choice of syntax is absurd; I don&#39;t want a codebase full of question marks pinned into every joint."
            },
            {
              "comment_id": 20906944,
              "body": "This operator exists in <a href=\"http://groovy.codehaus.org/Operators#Operators-SafeNavigationOperator\" rel=\"nofollow noreferrer\">Groovy</a>, so those who want to use it still have that as an option."
            },
            {
              "comment_id": 43682548,
              "body": "Optional was added to Java8"
            },
            {
              "comment_id": 53622754,
              "body": "This is the most ingenious idea I&#39;ve seen. It should be added to every sensible language of the C syntax. I&#39;d rather &quot;pin question marks&quot; everywhere than scroll through screenful of lines or dodge &quot;guard clauses&quot; all day."
            },
            {
              "comment_id": 61196583,
              "body": "Tony Hoare apologised for inventing <code>null</code>. But an even bigger mistake is to pick a strategy, to stick to it for over 20 years until billions lines of code are written, to then finally change your mind. This <code>.?</code> was like a last chance to keep java &quot;clean&quot;. It&#39;s a very simple syntactical solution. But instead they prefer to throw in a handful of different <code>@Nullable</code> and <code>Option</code> classes, empty collections, empty objects. The goal was to make nullability easier. But instead they added many layers of complexity. In the end, this will split the java community and will drive it to distruction."
            },
            {
              "comment_id": 74898410,
              "body": "Kotlin has the null safe call operators, too. <a href=\"https://kotlinlang.org/docs/reference/null-safety.html#safe-calls\" rel=\"nofollow noreferrer\">kotlinlang.org/docs/reference/null-safety.html#safe-calls</a>"
            },
            {
              "comment_id": 124582760,
              "body": "@bvdb I totally agree (except of your criticism of empty objects, because these things exit). Also, no need to apologize for &quot;null&quot; IMO -- to me, it&#39;s a totally natural feature of references, and I&#39;m okay with it. I&#39;m absolutely not OK with Oracle refusing to deal with it -- the &quot;.?&quot; syntax is so neat and concise and clear, I really don&#39;t get why they persist in providing baroque, cumbersome, ineffective pseudo-solutions."
            },
            {
              "comment_id": 124605708,
              "body": "@FranzD. I&#39;ve wrote a more elaborate post about this here: <a href=\"https://stackoverflow.com/questions/26529091/null-check-in-java-8-elvis-operator/67014059#67014059\" title=\"null check in java 8 elvis operator\">stackoverflow.com/questions/26529091/&hellip;</a>"
            }
          ],
          "answer_id": 452820,
          "body": "<p>Wow, I almost hate to add another answer when we have 57 different ways to recommend the <code>NullObject pattern</code>, but I think that some people interested in this question may like to know that there is a proposal on the table for Java 7 to add <a href=\"http://tech.puredanger.com/java7/#null\" rel=\"noreferrer\">\"null-safe handling\"</a>&mdash;a streamlined syntax for if-not-equal-null logic.</p>\n\n<p>The example given by Alex Miller looks like this:</p>\n\n<pre><code>public String getPostcode(Person person) {  \n  return person?.getAddress()?.getPostcode();  \n}  \n</code></pre>\n\n<p>The <code>?.</code> means only de-reference the left identifier if it is not null, otherwise evaluate the remainder of the expression as <code>null</code>. Some people, like Java Posse member Dick Wall and the <a href=\"http://blog.joda.org/2008/12/jdk-7-language-changes-devoxx-votes_3751.html\" rel=\"noreferrer\">voters at Devoxx</a> really love this proposal, but there is opposition too, on the grounds that it will actually encourage more use of <code>null</code> as a sentinel value.</p>\n\n<hr>\n\n<p><em>Update:</em> An <a href=\"http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/000047.html\" rel=\"noreferrer\">official proposal</a> for a null-safe operator in Java 7 has been submitted under <a href=\"http://openjdk.java.net/projects/coin/\" rel=\"noreferrer\">Project Coin.</a> The syntax is a little different than the example above, but it's the same notion.</p>\n\n<hr>\n\n<p><em>Update:</em> The null-safe operator proposal didn't make it into Project Coin. So, you won't be seeing this syntax in Java 7.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 91693787,
              "body": "I am not familiar with Nice, but Kotlin implements the same idea, have nullable and not-null types build into the language&#39;s type system. A lot more concise than Optionals or null Object pattern."
            }
          ],
          "answer_id": 1202969,
          "body": "<p>Ultimately, the only way to completely solve this problem is by using a different programming language:</p>\n\n<ul>\n<li>In Objective-C, you can do the equivalent of invoking a method on <code>nil</code>, and absolutely nothing will happen. This makes most null checks unnecessary, but it can make errors much harder to diagnose.</li>\n<li>In <a href=\"http://nice.sourceforge.net/safety.html#id2487946\" rel=\"noreferrer\">Nice</a>, a Java-derived language, there are two versions of all types: a potentially-null version and a not-null version. You can only invoke methods on not-null types. Potentially-null types can be converted to not-null types through explicit checking for null. This makes it much easier to know where null checks are necessary and where they aren't.</li>\n</ul>\n"
        },
        {
          "comments": [
            {
              "comment_id": 7037844,
              "body": "Indeed, the Option pattern is awesome. Some Java equivalents exist. Guava contains a limited version of this called Optional which leaves out most of the functional stuff. In Haskell, this pattern is called Maybe."
            },
            {
              "comment_id": 8911858,
              "body": "@Luca Molteni: You&#39;re absolutely right, I already commented on the post to request expanding it. :)"
            },
            {
              "comment_id": 23194192,
              "body": "An Optional class will be available in Java 8"
            },
            {
              "comment_id": 23195349,
              "body": "...and it doesn&#39;t (yet) have map nor flatMap: <a href=\"http://download.java.net/jdk8/docs/api/java/util/Optional.html\" rel=\"nofollow noreferrer\">download.java.net/jdk8/docs/api/java/util/Optional.html</a>"
            },
            {
              "comment_id": 29368433,
              "body": "The Optional pattern doesn&#39;t solve anything; instead of one potentially null object, now you have two."
            },
            {
              "comment_id": 30618761,
              "body": "Also, look at Functional Guava Extensions (fugue). This library also has its own Option."
            },
            {
              "comment_id": 59132166,
              "body": "Guava&#39;s <code>Optional</code> is not good in this case as <code>transform</code> throws an NPE when the function returns <code>null</code>."
            }
          ],
          "answer_id": 2064441,
          "body": "<h2>If undefined values are not permitted:</h2>\n\n<p>You might configure your IDE to warn you about potential null dereferencing. E.g. in Eclipse, see <em>Preferences > Java > Compiler > Errors/Warnings/Null analysis</em>.</p>\n\n<h2>If undefined values are permitted:</h2>\n\n<p><em>If you want to define a new API where undefined values make sense</em>, use the <a href=\"http://www.codecommit.com/blog/scala/the-option-pattern\" rel=\"noreferrer\">Option Pattern</a> (may be familiar from functional languages). It has the following advantages:</p>\n\n<ul>\n<li>It is stated explicitly in the API whether an input or output exists or not.</li>\n<li>The compiler forces you to handle the \"undefined\" case.</li>\n<li><a href=\"http://james-iry.blogspot.com/2007/08/martians-vs-monads-null-considered.html\" rel=\"noreferrer\">Option is a monad</a>, so there is no need for verbose null checking, just use map/foreach/getOrElse or a similar combinator to safely use the value <a href=\"http://blog.tackley.net/2010/09/option-in-scala-vs-null-in-java.html\" rel=\"noreferrer\">(example)</a>.</li>\n</ul>\n\n<p>Java 8 has a built-in <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"noreferrer\"><code>Optional</code></a> class (recommended); for earlier versions, there are library alternatives, for example <a href=\"http://code.google.com/p/guava-libraries/wiki/UsingAndAvoidingNullExplained\" rel=\"noreferrer\">Guava</a>'s <a href=\"https://google.github.io/guava/releases/19.0/api/docs/com/google/common/base/Optional.html\" rel=\"noreferrer\"><code>Optional</code></a> or <a href=\"http://code.google.com/p/functionaljava\" rel=\"noreferrer\">FunctionalJava</a>'s <a href=\"http://www.functionaljava.org/javadoc/4.4/functionaljava/fj/data/Option.html\" rel=\"noreferrer\"><code>Option</code></a>. But like many functional-style patterns, using Option in Java (even 8) results in quite some boilerplate, which you can reduce using a less verbose JVM language, e.g. Scala or Xtend.</p>\n\n<p><em>If you have to deal with an API which might return nulls</em>, you can't do much in Java. Xtend and Groovy have the <a href=\"https://www.eclipse.org/xtend/documentation.html#operators\" rel=\"noreferrer\">Elvis operator</a> <code>?:</code> and the <a href=\"https://www.eclipse.org/xtend/documentation.html#nullSafeFeatureCalls\" rel=\"noreferrer\">null-safe dereference operator</a> <code>?.</code>, but note that this returns null in case of a null reference, so it just \"defers\" the proper handling of null.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 2831298,
              "body": "<code>@NotNull</code>, <code>@Nullable</code> and other nullness annotations are part of <a href=\"http://jcp.org/en/jsr/detail?id=305\" rel=\"nofollow noreferrer\">JSR 305</a>. You can also use them to detect potential problems with tools like <a href=\"http://findbugs.sourceforge.net/\" rel=\"nofollow noreferrer\">FindBugs</a>."
            },
            {
              "comment_id": 7706486,
              "body": "I find it strangely annoying that the <code>@NotNull</code> &amp; <code>@Nullable</code> interfaces live in the package <code>com.sun.istack.internal</code>. (I guess I associate com.sun with warnings about using a proprietary API.)"
            },
            {
              "comment_id": 8861305,
              "body": "code portability goes null with jetbrains.I would think twice(square) before tying down to ide level.Like Jacek S said they are part of JSR any way which I thought was JSR303 by the way."
            },
            {
              "comment_id": 16006500,
              "body": "Why doesn&#39;t the 2nd one compile though?"
            },
            {
              "comment_id": 16048122,
              "body": "I really don&#39;t think that using a custom compiler is a viable solution to this problem."
            },
            {
              "comment_id": 21981559,
              "body": "The good thing about annotations, which <code>@NotNull</code> and <code>@Nullable</code> are is that they nicely degrade when the source code is built by a system that doesn&#39;t understand them. So, in effect, the argument that the code is not portable may be invalid - if you use a system that supports and understands these annotations, you get the added benefit of stricter error checking, otherwise you get less of it but your code should still build fine, and the quality of your running program is THE SAME, because these annotations were not enforced at runtime anyway. Besides, all compilers are custom ;-)"
            },
            {
              "comment_id": 33610057,
              "body": "in your example you call <code>helloWorld</code> twice. This is terrible. you have no idea what could be the consequences !"
            },
            {
              "comment_id": 36377280,
              "body": "@Mechanicalsnail becuase it only ever returns &quot;hello world&quot;, and can never return null."
            },
            {
              "comment_id": 40837415,
              "body": "@JacekS Just for information - for Android development, As of version 19.1 of the Android support library, <code>@NotNull</code> and <code>@Nullable</code> annotation support has been added. So basically all Android developer can take advantage of it. It won&#39;t be IDE specific anymore. More information regarding support annotations here - <a href=\"http://tools.android.com/tech-docs/support-annotations\" rel=\"nofollow noreferrer\">tools.android.com/tech-docs/support-annotations</a>"
            },
            {
              "comment_id": 44999339,
              "body": "Arguments against <code>@Nullable</code>/<code>@NotNull</code> for &quot;compatibility&quot; are missing the point. They are only there to help tools (from a static analysis) ensure that these basic contracts are met - they do <i>not</i> replace proper null handling, when such is appropriate per the contract (or possible per the input source). While it would be <i>awesome</i> if Java and C# (and the run-times) actually supported not-null reference types in the Type System, using better static analysis tooling (and explicit annotated contracts) goes a long way to reduce the 100 trillion dollar mistake that is Algo, is Java, is C# .."
            },
            {
              "comment_id": 49890792,
              "body": "Netbeans also has support for <code>@NotNull</code> and <code>@Nullable</code>."
            },
            {
              "comment_id": 51312364,
              "body": "It&#39;s worth noting that TYPE_USE annotations (since Java 8) let you treat null annotations as an integral part of the type system, including in particular generics. This means that conceptually <b>all contract violations can be detected by the compiler</b>. Eclipse supports this since Java 8 was released, see <a href=\"http://help.eclipse.org/topic/org.eclipse.jdt.doc.user/tasks/task-using_null_type_annotations.htm\" rel=\"nofollow noreferrer\">help.eclipse.org/topic/org.eclipse.jdt.doc.user/tasks/&hellip;</a>"
            },
            {
              "comment_id": 76040645,
              "body": "What error message does the second example give (in IntelliJ IDEA)?"
            },
            {
              "comment_id": 86783334,
              "body": "This should now be the primary answer, I believe the accepted answer was accepted before these annotations were available.  I wonder if there is a way to get it promoted to the top at least..."
            },
            {
              "comment_id": 86783421,
              "body": "@mwfearnley I believe the comment on the second answer was incorrect, Nullable is more of a warning to the developer and I don&#39;t think the compiler proves that it can be null (Since an overridden method could return null).  What it DOES mean is that it can&#39;t be passed to a NotNull without being protected by a null check."
            },
            {
              "comment_id": 86783490,
              "body": "By the way, the implementations of the checkers are not all consistent!  Eclipse&#39;s checker is a good deal better than IntelliJ&#39;s (although I&#39;ve been using IntelliJ&#39;s, it&#39;s definitely better than nothing).  Eclipses has much better handling of un-annotated variables. <a href=\"https://stackoverflow.com/questions/48349393/can-i-make-intellij-nonnull-nullable-annotations-act-like-eclipse?noredirect=1\" title=\"can i make intellij nonnull nullable annotations act like eclipse\">stackoverflow.com/questions/48349393/&hellip;</a>"
            },
            {
              "comment_id": 128792883,
              "body": "In the second example, IntelliJ tells you that you&#39;re applying the <code>@Nullable</code> annotation to a method that will never return null."
            },
            {
              "comment_id": 128840183,
              "body": "@JavaKaBaby Code portability does NOT suffer with JetBrains. All JetBrains does is make NullPointerExceptions a compile-time error instead of a runtime error. Building with another compiler won&#39;t change the behavior of the code at all, it just delays the reporting of the bug until runtime. The code ports just fine. This is an understandable gut-reaction to any suggestion to use some compiler-specific solution, but in this case, when you think it through, you&#39;ll see that this is still a viable option. And now that other compilers support this, it&#39;s becoming even more viable."
            }
          ],
          "answer_id": 2386013,
          "body": "<p>If you use (or planning to use) a Java IDE like <a href=\"https://www.jetbrains.com/idea/\" rel=\"noreferrer\">JetBrains IntelliJ IDEA</a>, <a href=\"https://www.eclipse.org/\" rel=\"noreferrer\">Eclipse</a> or <a href=\"https://netbeans.org/\" rel=\"noreferrer\">Netbeans</a> or a tool like findbugs then you can use annotations to solve this problem.</p>\n\n<p>Basically, you've got <code>@Nullable</code> and <code>@NotNull</code>.</p>\n\n<p>You can use in method and parameters, like this:</p>\n\n<pre><code>@NotNull public static String helloWorld() {\n    return \"Hello World\";\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>@Nullable public static String helloWorld() {\n    return \"Hello World\";\n}\n</code></pre>\n\n<p>The second example won't compile (in IntelliJ IDEA).</p>\n\n<p>When you use the first <code>helloWorld()</code> function in another piece of code:</p>\n\n<pre><code>public static void main(String[] args)\n{\n    String result = helloWorld();\n    if(result != null) {\n        System.out.println(result);\n    }\n}\n</code></pre>\n\n<p>Now the IntelliJ IDEA compiler will tell you that the check is useless, since the <code>helloWorld()</code> function won't return <code>null</code>, ever.</p>\n\n<p>Using parameter</p>\n\n<pre><code>void someMethod(@NotNull someParameter) { }\n</code></pre>\n\n<p>if you write something like:</p>\n\n<pre><code>someMethod(null);\n</code></pre>\n\n<p>This won't compile.</p>\n\n<p>Last example using <code>@Nullable</code></p>\n\n<pre><code>@Nullable iWantToDestroyEverything() { return null; }\n</code></pre>\n\n<p>Doing this</p>\n\n<pre><code>iWantToDestroyEverything().something();\n</code></pre>\n\n<p>And you can be sure that this won't happen. :)</p>\n\n<p>It's a nice way to let the compiler check something more than it usually does and to enforce your contracts to be stronger. Unfortunately, it's not supported by all the compilers.</p>\n\n<p>In IntelliJ IDEA 10.5 and on, they added support for any other <code>@Nullable</code> <code>@NotNull</code> implementations.</p>\n\n<p>See blog post <em><a href=\"https://blog.jetbrains.com/idea/2011/03/more-flexible-and-configurable-nullublenotnull-annotations/\" rel=\"noreferrer\">More flexible and configurable @Nullable/@NotNull annotations</a></em>.</p>\n"
        },
        {
          "answer_id": 2874026,
          "body": "<p>For utility classes, you can check that parameters are not null.</p>\n\n<p>In all other cases, you may not have to. Use encapsulation as much as possible, thus reducing the places you feel tempted to check for null.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 3656666,
              "body": "Mh, why that? Please don&#39;t feel any defensive, I&#39;d just like to learn more about Java :)"
            },
            {
              "comment_id": 7549874,
              "body": "@Mudu As a general rule, I prefer the expression in an if statement to be a more &quot;positive&quot; statement, rather than a &quot;negative&quot; one. So if I saw <code>if (!something) { x(); } else { y(); }</code> I would be inclined to refactor it as <code>if (something) { y(); } else { x(); }</code> (though one could argue that <code>!= null</code> is the more positive option...). But more importantly, the important part of the code is not wrapped inside <code>{}</code>s and you have one level less of indentation for most of the method. I don&#39;t know if that was fastcodejava&#39;s reasoning but that would be mine."
            },
            {
              "comment_id": 56341893,
              "body": "This is what I tend to do as well.. Keeps the code clean in my opinon."
            },
            {
              "comment_id": 110573126,
              "body": "@MatrixFrog Yeah that makes the code cleaner and easily readable, as you see the important code (when everything function without errors) first."
            }
          ],
          "answer_id": 3499225,
          "body": "<p>In addition to using <code>assert</code> you can use the following:</p>\n\n<pre><code>if (someobject == null) {\n    // Handle null here then move on.\n}\n</code></pre>\n\n<p>This is slightly better than:</p>\n\n<pre><code>if (someobject != null) {\n    .....\n    .....\n\n\n\n    .....\n}\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 8485465,
              "body": "What&#39;s wrong with this method, I think @tltester just want to give a default value if the it&#39;s null, which make sense."
            },
            {
              "comment_id": 47475928,
              "body": "There is such a method in Apache commons-lang: <code>ObjectUtils.defaultIfNull()</code>. There is one more general: <code>ObjectUtils.firstNonNull()</code>, which can be used to implement a degrading strategy: <code>firstNonNull(bestChoice, secondBest, thirdBest, fallBack);</code>"
            }
          ],
          "answer_id": 3925191,
          "body": "<pre><code>public static &lt;T&gt; T ifNull(T toCheck, T ifNull) {\n    if (toCheck == null) {\n           return ifNull;\n    }\n    return toCheck;\n}\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 16006562,
              "body": "-1. That&#39;s even worse. Now instead of crashing if you forget to test, your program silently propagates an incorrect value."
            }
          ],
          "answer_id": 5023357,
          "body": "<p>Another suggestion is to program defensively - where your classes/functions provide default values that are known and safe, and where null is reserved for true errors/exceptions.</p>\n\n<p>For example, instead of functions that return Strings returning null when there is a problem (say converting a number to a string), have them return an empty String (\"\"). You still have to test the return value before proceeding, but there would be no special cases for exceptions. An additional benefit of this style of programming is that your program will be able to differentiate and respond accordingly between normal operations and exceptions.</p>\n"
        },
        {
          "answer_id": 5266443,
          "body": "<p>You can use <a href=\"http://findbugs.sourceforge.net\" rel=\"nofollow noreferrer\">FindBugs</a>. They also have an <a href=\"http://en.wikipedia.org/wiki/Eclipse_%28software%29\" rel=\"nofollow noreferrer\">Eclipse</a> plugin) that helps you find duplicate null checks (among other things), but keep in mind that sometimes you should opt for defensive programming. There is also <a href=\"http://code.google.com/p/cofoja/\" rel=\"nofollow noreferrer\">Contracts for Java</a> which may be helpful.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 9957008,
              "body": "Absolutely. Applications that just throw the error and crash are of higher quality because there is no doubt when they are not working. Applications that swallow the errors at best degrade gracefully but usually don&#39;t work in ways that are difficult to notice and don&#39;t get fixed. And when the problem is noticed they are much harder to debug."
            }
          ],
          "answer_id": 5311857,
          "body": "<p>Common \"problem\" in Java indeed.</p>\n\n<p>First, my thoughts on this:</p>\n\n<p>I consider that it is bad to \"eat\" something when NULL was passed where NULL isn't a valid value. If you're not exiting the method with some sort of error then it means nothing went wrong in your method which is not true. Then you probably return null in this case, and in the receiving method you again check for null, and it never ends, and you end up with \"if != null\", etc..</p>\n\n<p>So, IMHO, null must be a critical error which prevents further execution (that is, where null is not a valid value).</p>\n\n<p>The way I solve this problem is this:</p>\n\n<p>First, I follow this convention:</p>\n\n<ol>\n<li>All public methods / API always check its arguments for null</li>\n<li>All private methods do not check for null since they are controlled methods (just let die with nullpointer exception in case it wasn't handled above)</li>\n<li>The only other methods which do not check for null are utility methods. They are public, but if you call them for some reason, you know what parameters you pass. This is like trying to boil water in the kettle without providing water...</li>\n</ol>\n\n<p>And finally, in the code, the first line of the public method goes like this:</p>\n\n<pre><code>ValidationUtils.getNullValidator().addParam(plans, \"plans\").addParam(persons, \"persons\").validate();\n</code></pre>\n\n<p>Note that addParam() returns self, so that you can add more parameters to check.</p>\n\n<p>Method <code>validate()</code> will throw checked <code>ValidationException</code> if any of the parameters is null (checked or unchecked is more a design/taste issue, but my <code>ValidationException</code> is checked).</p>\n\n<pre><code>void validate() throws ValidationException;\n</code></pre>\n\n<p>The message will contain the following text if, for example, \"plans\" is null:</p>\n\n<p>\"<strong>Illegal argument value null is encountered for parameter [plans]</strong>\"</p>\n\n<p>As you can see, the second value in the addParam() method (string) is needed for the user message, because you cannot easily detect passed-in variable name, even with reflection (not subject of this post anyway...).</p>\n\n<p>And yes, we know that beyond this line we will no longer encounter a null value so we just safely invoke methods on those objects.</p>\n\n<p>This way, the code is clean, easy maintainable and readable.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 17549406,
              "body": "better to use assertions, i.e Contract.notNull(abc, &quot;abc must be non-null, did it fail to load during xyz?&quot;); - this is a more compact way than doing an if (abc!=null) { throw new RuntimeException...}"
            }
          ],
          "answer_id": 6101200,
          "body": "<p>I'm a fan of &quot;fail fast&quot; code. Ask yourself - are you doing something useful in the case where the parameter is null? If you don't have a clear answer for what your code should do in that case... i.e. - it should never be null in the first place, then ignore it and allow a <code>NullPointerException</code> to be thrown. The calling code will make just as much sense of an NPE as it would an <code>IllegalArgumentException</code>, but it'll be easier for the developer to debug and understand what went wrong if an NPE is thrown rather than your code attempting to execute some other unexpected contingency logic - which ultimately results in the application failing anyway.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 25657276,
              "body": "Michael Feathers has written an short and interesthing text about approaches like the one you mentioned:  <a href=\"http://manuelp.newsblur.com/site/424/\" rel=\"nofollow noreferrer\">manuelp.newsblur.com/site/424</a>"
            },
            {
              "comment_id": 110642758,
              "body": "If there&#39;s anything I appreciated most about this answer, it&#39;s the &quot;careful design&quot; tip. Whether it boils down to writing code, fixing bugs or checking for nullity, it&#39;s DAMN CRUCIAL to make an overall good design and organisation in code, to avoid many redundancies that we still have to deal with today because of bad design choices made a long time ago..."
            }
          ],
          "answer_id": 7140229,
          "body": "<p>I like articles from Nat Pryce. Here are the links:</p>\n\n<ul>\n<li><a href=\"http://www.natpryce.com/articles/000778.html\" rel=\"noreferrer\">Avoiding Nulls with Polymorphic Dispatch</a></li>\n<li><a href=\"http://www.natpryce.com/articles/000777.html\" rel=\"noreferrer\">Avoiding Nulls with \"Tell, Don't Ask\" Style</a></li>\n</ul>\n\n<p>In the articles there is also a link to a Git repository for a Java Maybe Type which I find interesting, but I don't think it alone could decrease the\nchecking code bloat. After doing some research on the Internet, I think <strong>!= null</strong> code bloat could be decreased mainly by careful design.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 10126096,
              "body": "If you&#39;re constantly going to negate the return value, wouldn&#39;t it be better to simply write a function <code>isNotNull</code>?  Doesn&#39;t that more clearly indicate your intent?"
            },
            {
              "comment_id": 10126240,
              "body": "@TMN: your are right, ideally I&#39;d like to have both a <code>isNull</code> and <code>isNotNull</code> method."
            },
            {
              "comment_id": 21526482,
              "body": "I fail to see how this is more concise than &quot;someobject != null&quot;."
            },
            {
              "comment_id": 74898232,
              "body": "Compile-time and run-time dev tools like findbugs will have a harder time identifying duplicate null checks. Also, you better hope Java inlines that isNull function,"
            }
          ],
          "answer_id": 7847199,
          "body": "<p>One more alternative:</p>\n\n<p>The following simple function helps to hide the null-check (I don't know why, but I haven't found it as part of the same <em>common</em> library):</p>\n\n<pre><code>public static &lt;T&gt; boolean isNull(T argument) {\n    return (argument == null);\n}\n</code></pre>\n\n<p>You could now write</p>\n\n<pre><code>if (!isNull(someobject)) {\n    someobject.doCalc();\n}\n</code></pre>\n\n<p>which is IMO a better way of expressing <code>!= null</code>.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 16006472,
              "body": "Just because it was <i>intended</i> to mean &quot;no data&quot; doesn&#39;t mean it <i>should</i> be used. The language implementation of <code>null</code> sucks."
            },
            {
              "comment_id": 27724300,
              "body": "Catching <code>NullPointerException</code> and returning <code>null</code> is horrible to debug. You end up with NPE later on anyway, and it&#39;s really hard to figure out what was originally null."
            },
            {
              "comment_id": 29847708,
              "body": "The problem with your example is that getPhotoOfThePerson really has no business deciding whether or not to return a photo or how to deal with a null person -- a straightforward reading of the method name indicates that it returns a photo of a person.  It shouldn&#39;t return null because it doesn&#39;t (and shouldn&#39;t) know how the caller will handle a null photo.  The caller on the other hand should know what to do when the person is null.  Java doesn&#39;t have null propogation, which would eliminate the problem, as then it would know enough about how nulls are handled to go ahead and use it."
            },
            {
              "comment_id": 29949417,
              "body": "I&#39;d downvote if I had the reputation. Not only is null not necessary, it&#39;s a hole in the type system. Assigning a Tree to a List is a type error because trees are not values of type List; by that same logic, assigning null should be a type error because null is not a value of type Object, or any useful type for that matter. <a href=\"http://en.wikipedia.org/wiki/Tony_Hoare\" rel=\"nofollow noreferrer\">Even the man that invented null</a> considers it his &quot;billion-dollar mistake&quot;. The notion of &quot;a value that might be a value of type T OR nothing&quot; is its own type, and should be represented as such (e.g. Maybe&lt;T&gt; or Optional&lt;T&gt;)."
            },
            {
              "comment_id": 34735578,
              "body": "As of &quot;Assigning a Tree to a List&quot; you were not talking about Java, did you? Because Java is &#39;compile time strict type&#39; language (it&#39;s memory model differ from C++, C# though). Java compiler will not give you an opportunity to assign Tree to a List."
            },
            {
              "comment_id": 34738391,
              "body": "As of &quot;Maybe&lt;T&gt; or Optional&lt;T&gt;&quot; you still need to write code like <code>if (maybeNull.hasValue()) {...}</code> so what is the difference with <code>if (maybeNull != null)) {...}</code>?"
            },
            {
              "comment_id": 34738895,
              "body": "As of &quot;Java doesn&#39;t have null propagation, which would eliminate the problem&quot;, usually propagation is about &#39;exceptional cases&#39;. But data availability or non-availability is a common business flow in most cases. If it is something exceptional in data non-availability (which is dictated by business) you should explicitly throw reasonable exception with a reasonable message. Null propagation (with line number inside?..) would be really horrible as for me."
            },
            {
              "comment_id": 34739517,
              "body": "As of &quot;catching NullPointerException and returning null is horrible to debug. You end up with NPE later on anyway, and it&#39;s really hard to figure out what was originally null&quot;. I&#39;m totally agree! In those cases you should write a dozen of &#39;if&#39; statements or throw NPE if business logic imply data in-place, or use null-safe operator from new Java. But there are cases when I don&#39;t care about what exact step give me null. For example calculating some values for the user just before showing on the screen when you do expect data could be missing."
            },
            {
              "comment_id": 42190814,
              "body": "@MykhayloAdamovych: The benefit of <code>Maybe&lt;T&gt;</code> or <code>Optional&lt;T&gt;</code> isn&#39;t in the case where your <code>T</code> might be null, but in the case where it should never be null.  If you have a type that explicitly means &quot;this value <i>might</i> be null -- use with caution&quot;, and you use and return such a type consistently, then whenever you see a plain old <code>T</code> in your code, you can assume it is never null.  (Course, this would be a lot more useful if enforceable by the compiler.)"
            },
            {
              "comment_id": 43671399,
              "body": "Agree. But you&#39;ll not reduce &#39;checks for emptiness&#39; in your code (the topic we are discussing), you&#39;ll be more safe though but it comes at a price."
            },
            {
              "comment_id": 45030097,
              "body": "&quot;Even the man that invented null considers it his &quot;billion-dollar mistake&quot; - null was there before anything was invented. One can invent set of rules to deal with it in specific way but this will be &#39;just another functionally complete system&#39;. I would like to know how much would it cost to deal with subtle bugs in such non fail fast system. May be we are close to compare such systems because of new trends."
            },
            {
              "comment_id": 45082482,
              "body": "&quot;The notion of &quot;a value that might be a value of type T OR nothing&quot; is its own type, and should be represented as such (e.g. Maybe&lt;T&gt; or Optional&lt;T&gt;)&quot; - you may think that all references in Java are Optional&lt;T&gt; and you may switch to DefinetlyInitialized&lt;T&gt; by for using underused final keyword or introduce Mandatory&lt;T&gt;. So what&#39;s the difference?.. Anyway I like current Java defaults more because things around us are rather optional. It is optional for &#39;the kettle to be filled with water before cooking&#39;, and that &#39;there is some fuel in the car before you leave&#39; etc."
            },
            {
              "comment_id": 64316923,
              "body": "Currently reading some Oracle Database Reference about &#39;Null Values in Arithmetic Expressions&#39;. It states: &#39;If any column value in an arithmetic expression is null, the result is null. For example, if you attempt to perform division by zero, you get an error. However, if you divide a number by null, the result is a null or unknown.&#39; But don&#39;t mind, this is totally not logical, there should be some silly guy somewhere at Oracle and he must be fired till these days..."
            },
            {
              "comment_id": 65172861,
              "body": "@MykhayloAdamovych: If meaningful values for array items will become known in arbitrary sequence, and it will be necessary to read some array items before meaningful values have been assigned to all of them, it will generally not be possible to statically rule out the possibility that items will be read before a meaningful value has been determined.  If Hoare doesn&#39;t like nulls, I&#39;m curious what kind of default value or behavior he&#39;d prefer?  Trapping when a null is read from the array might sometimes be better than waiting until it is dereferenced, but would make it impossible to copy..."
            },
            {
              "comment_id": 65172937,
              "body": "...a partially-populated array by iteratively copying the items therein.  The only other choices I can see is to say that attempting to dereference a pointer read from an array slot that hasn&#39;t yet been written will access some default object (which would for most purposes seem rather silly) or will have C-style &quot;Undefined Behavior&quot;.  I&#39;d say trapping null pointers are better than any alternative I can see."
            },
            {
              "comment_id": 77809319,
              "body": "@MykhayloAdamovych see how Swift does it, which is how many others did before. If Java simply didn&#39;t have null, you&#39;d have no way to store a null into a field/variable; to handle the case where it&#39;s optional, you&#39;d have to have an Optional&lt;T&gt;. And you ask - what would that gain? Wouldn&#39;t you need as many checks? No, you wouldn&#39;t, because the compiler would ensure that every non-Optional was never null, and more than half our checks are with objects that never should be null and never are, or if they are then that&#39;s a bug that would either be caught by the compiler or exposed by the interface."
            },
            {
              "comment_id": 78450527,
              "body": "@entonio i don&#39;t follow, After the compiler ensures that the Optional (or what ever) is not null then what?  Are you saying that the Person application is designed to never encounter a situation where someone does not have a girlfriend?  How does the application handle those scenarios, are there multiple types of Person, maybe we create 2 types of Person, LonelyPerson and ShackledPerson?"
            },
            {
              "comment_id": 78530426,
              "body": "@entonio, Java has Optional&lt;T&gt;, that is non-final reference. And Java&#39;s compiler ensures that every final is initialized. And you would have the same amount of checks if you are senior enough not to write boilerplate code because &#39;emptiness&#39; is a <i>business notion</i>. And Java&#39;s Optional&lt;T&gt; is free from <code>get()</code> and <code>put()</code> boilerplate."
            }
          ],
          "answer_id": 8212184,
          "body": "<p>Null is not a 'problem'. It is an integral part of a <a href=\"http://en.wikipedia.org/wiki/Functional_completeness\" rel=\"noreferrer\">complete</a> modeling tool set. Software aims to model the complexity of the world and null bears its burden. <strong>Null indicates 'No data' or 'Unknown'</strong> in Java and the like. So it is appropriate to use nulls for these purposes. I don't prefer the 'Null object' pattern; I think it rise the '<a href=\"http://en.wikipedia.org/wiki/Who_will_guard_the_guards%3F\" rel=\"noreferrer\">who will guard\nthe guardians</a>' problem. <br/>\nIf you ask me what is the name of my girlfriend I'll tell you that I have no girlfriend. In the Java language I'll return null. \nAn alternative would be to throw meaningful exception to indicate some problem that can't be (or don't want to be) solved right there and delegate it somewhere higher in the stack to retry or report data access error to the user.  </p>\n\n<ol>\n<li><p><strong>For an 'unknown question' give 'unknown answer'.</strong> (Be null-safe where this is correct from business point of view) Checking arguments for null once inside a method before usage relieves multiple callers from checking them before a call.</p>\n\n<pre><code>public Photo getPhotoOfThePerson(Person person) {\n    if (person == null)\n        return null;\n    // Grabbing some resources or intensive calculation\n    // using person object anyhow.\n}\n</code></pre>\n\n<p>Previous leads to normal logic flow to get no photo of a non-existent girlfriend from my photo library.</p>\n\n<pre><code>getPhotoOfThePerson(me.getGirlfriend())\n</code></pre>\n\n<p>And it fits with new coming Java API (looking forward)</p>\n\n<pre><code>getPhotoByName(me.getGirlfriend()?.getName())\n</code></pre>\n\n<p>While it is rather 'normal business flow' not to find photo stored into the DB for some person, I used to use pairs like below for some other cases</p>\n\n<pre><code>public static MyEnum parseMyEnum(String value); // throws IllegalArgumentException\npublic static MyEnum parseMyEnumOrNull(String value);\n</code></pre>\n\n<p>And don't loathe to type <code>&lt;alt&gt; + &lt;shift&gt; + &lt;j&gt;</code> (generate javadoc in Eclipse) and write three additional words for you public API. This will be more than enough for all but those who don't read documentation.</p>\n\n<pre><code>/**\n * @return photo or null\n */\n</code></pre>\n\n<p>or</p>\n\n<pre><code>/**\n * @return photo, never null\n */\n</code></pre></li>\n<li><p><strong>This is rather theoretical case and in most cases you should prefer java null safe API (in case it will be released in another 10 years), but <code>NullPointerException</code> is subclass of an <code>Exception</code>.</strong> Thus it is a form of <code>Throwable</code> that indicates conditions that a reasonable application might want to catch (<a href=\"http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java/lang/Exception.html\" rel=\"noreferrer\">javadoc</a>)! To use the first most advantage of exceptions and separate error-handling code from 'regular' code (<a href=\"http://docs.oracle.com/javase/tutorial/essential/exceptions/advantages.html\" rel=\"noreferrer\">according to creators of Java</a>) it is appropriate, as for me, to catch <code>NullPointerException</code>.</p>\n\n<pre><code>public Photo getGirlfriendPhoto() {\n    try {\n        return appContext.getPhotoDataSource().getPhotoByName(me.getGirlfriend().getName());\n    } catch (NullPointerException e) {\n        return null;\n    }\n}\n</code></pre>\n\n<p>Questions could arise:</p>\n\n<p>Q. What if <code>getPhotoDataSource()</code> returns null?<br>\nA. It is up to business logic. If I fail to find a photo album I'll show you no photos. What if appContext is not initialized? This method's business logic puts up with this. If the same logic should be more strict then throwing an exception it is part of the business logic and explicit check for null should be used (case 3). The <strong>new Java Null-safe API fits better here to specify selectively what implies and what does not imply to be initialized</strong> to be fail-fast in case of programmer errors.</p>\n\n<p>Q. Redundant code could be executed and unnecessary resources could be grabbed.<br>\nA. It could take place if <code>getPhotoByName()</code> would try to open a database connection, create <code>PreparedStatement</code> and use the person name as an SQL parameter at last. The approach <em>for an unknown question gives an unknown answer</em> (case 1) works here. Before grabbing resources the method should check parameters and return 'unknown' result if needed.</p>\n\n<p>Q. This approach has a performance penalty due to the try closure opening.<br>\nA. Software should be easy to understand and modify firstly. Only after this, one could think about performance, and only if needed! and where needed! (<a href=\"http://www.amazon.co.uk/Code-Complete-Practical-Handbook-Construction/dp/0735619670/ref=dp_ob_title_bk\" rel=\"noreferrer\">source</a>), and many others).</p>\n\n<p>PS. This approach will be as reasonable to use as the <em>separate error-handling code from \"regular\" code</em> principle is reasonable to use in some place. Consider the next example:</p>\n\n<pre><code>public SomeValue calculateSomeValueUsingSophisticatedLogic(Predicate predicate) {\n    try {\n        Result1 result1 = performSomeCalculation(predicate);\n        Result2 result2 = performSomeOtherCalculation(result1.getSomeProperty());\n        Result3 result3 = performThirdCalculation(result2.getSomeProperty());\n        Result4 result4 = performLastCalculation(result3.getSomeProperty());\n        return result4.getSomeProperty();\n    } catch (NullPointerException e) {\n        return null;\n    }\n}\n\npublic SomeValue calculateSomeValueUsingSophisticatedLogic(Predicate predicate) {\n    SomeValue result = null;\n    if (predicate != null) {\n        Result1 result1 = performSomeCalculation(predicate);\n        if (result1 != null &amp;&amp; result1.getSomeProperty() != null) {\n            Result2 result2 = performSomeOtherCalculation(result1.getSomeProperty());\n            if (result2 != null &amp;&amp; result2.getSomeProperty() != null) {\n                Result3 result3 = performThirdCalculation(result2.getSomeProperty());\n                if (result3 != null &amp;&amp; result3.getSomeProperty() != null) {\n                    Result4 result4 = performLastCalculation(result3.getSomeProperty());\n                    if (result4 != null) {\n                        result = result4.getSomeProperty();\n                    }\n                }\n            }\n        }\n    }\n    return result;\n}\n</code></pre>\n\n<p>PPS. For those fast to downvote (and not so fast to read documentation) I would like to say that I've never caught a null-pointer exception (NPE) in my life. But this possibility was <strong>intentionally designed</strong> by the Java creators because NPE is a subclass of <code>Exception</code>. We have a precedent in Java history when <code>ThreadDeath</code> is an <code>Error</code> not because it is actually an application error, but solely because it was not intended to be caught! How much NPE fits to be an <code>Error</code> than <code>ThreadDeath</code>! But it is not.</p></li>\n<li><p><strong>Check for 'No data' only if business logic implies it.</strong></p>\n\n<pre><code>public void updatePersonPhoneNumber(Long personId, String phoneNumber) {\n    if (personId == null)\n        return;\n    DataSource dataSource = appContext.getStuffDataSource();\n    Person person = dataSource.getPersonById(personId);\n    if (person != null) {\n        person.setPhoneNumber(phoneNumber);\n        dataSource.updatePerson(person);\n    } else {\n        Person = new Person(personId);\n        person.setPhoneNumber(phoneNumber);\n        dataSource.insertPerson(person);\n    }\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>public void updatePersonPhoneNumber(Long personId, String phoneNumber) {\n    if (personId == null)\n        return;\n    DataSource dataSource = appContext.getStuffDataSource();\n    Person person = dataSource.getPersonById(personId);\n    if (person == null)\n        throw new SomeReasonableUserException(\"What are you thinking about ???\");\n    person.setPhoneNumber(phoneNumber);\n    dataSource.updatePerson(person);\n}\n</code></pre>\n\n<p>If appContext or dataSource is not initialized unhandled runtime NullPointerException will kill current thread and will be processed by <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.UncaughtExceptionHandler.html\" rel=\"noreferrer\">Thread.defaultUncaughtExceptionHandler</a> (for you to define and use your favorite logger or other notification mechanizm). If not set, <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/ThreadGroup.html#uncaughtException(java.lang.Thread,%20java.lang.Throwable)\" rel=\"noreferrer\">ThreadGroup#uncaughtException</a> will print stacktrace to system err. One should monitor application error log and open Jira issue for each unhandled exception which in fact is application error. Programmer should fix bug somewhere in initialization stuff.</p></li>\n</ol>\n"
        },
        {
          "comments": [
            {
              "comment_id": 39229826,
              "body": "@CodyGuldner Right, Cody. I provided a relevant quote from the link to give more context."
            }
          ],
          "answer_id": 9845966,
          "body": "<p>Guava, a very useful core library by Google, has a nice and useful API to avoid nulls. I find <a href=\"http://code.google.com/p/guava-libraries/wiki/UsingAndAvoidingNullExplained\" rel=\"noreferrer\">UsingAndAvoidingNullExplained</a> very helpful.</p>\n\n<p>As explained in the wiki:</p>\n\n<blockquote>\n  <p><code>Optional&lt;T&gt;</code> is a way of replacing a nullable T reference with a\n  non-null value. An Optional may either contain a non-null T reference\n  (in which case we say the reference is \"present\"), or it may contain\n  nothing (in which case we say the reference is \"absent\"). It is never\n  said to \"contain null.\"</p>\n</blockquote>\n\n<p>Usage:</p>\n\n<pre><code>Optional&lt;Integer&gt; possible = Optional.of(5);\npossible.isPresent(); // returns true\npossible.get(); // returns 5\n</code></pre>\n"
        },
        {
          "answer_id": 9846141,
          "body": "<p>You can also use the Checker Framework (with JDK 7 and beyond) to statically check for null values. This might solve a lot of problems, but requires running an extra tool that currently only works with OpenJDK AFAIK. <a href=\"https://checkerframework.org/\" rel=\"nofollow noreferrer\">https://checkerframework.org/</a></p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 21526376,
              "body": "Agreed, albeit only conceptually. Yeah, one should HAVE A PLAN. But then you need programmers who CAN MAKE PLANS and have the ability to think logically and develop and maintain consistent patterns. And then there are employers whose main focus is money and wages ;-). And then start having a look at the JPA spec to get an impression of what constitutes a consistent pattern/plan and what it requires to develop and/or document it."
            },
            {
              "comment_id": 27731830,
              "body": "This answer is relevant for C++ but not for a garbage collected language like Java."
            },
            {
              "comment_id": 28024110,
              "body": "I respectfully disagree. Good memory handling in JAVA ( or almost any other language) will give you many benefits. From better stability as nullpointers reduced, better performance as lower memory footprint, to better design as relationships are better controlled.  I will suggest that the sloppy memory management of many JAVA applications leds to frequent NPEs and memory leaks."
            },
            {
              "comment_id": 29391088,
              "body": "I most emphatically agree with what you wrote, and think it very unfortunate that Java makes no distinction between references that encapsulate ownership and those which do not.  Those who would argue &quot;that&#39;s what GC is for&quot; miss a critical point: GC avoids the need for <i>immutable</i> objects to have owners, and it also <i>eliminates</i> the possibility of a dangling reference to a deleted object turning into a reference to some other arbitrary object (as can happen in C++).  It&#39;s hard to write correct code, however, if more than one object encapsulates a mutable object&#39;s state as part of its own."
            },
            {
              "comment_id": 29391152,
              "body": "My preferred way of thinking of things is to say that references can encapsulate identity, mutable state, both, or neither.  Additionally, references can encapsulate mutable state either because they identify an immutable object, or because the object they identify will never be exposed to anything that might mutate it.  It&#39;s too bad Java has no concept of such distinctions, since things like equality checking and cloning could be handled 99% automatically if it did."
            },
            {
              "comment_id": 40486292,
              "body": "I believe what you suggest will only address a small subset of null pointer problems in Java, and will not solve the original problem described here."
            },
            {
              "comment_id": 46039499,
              "body": "It might be more relevant than you think. More info: <a href=\"http://www.ibm.com/developerworks/library/j-jtp06243/\" rel=\"nofollow noreferrer\">ibm.com/developerworks/library/j-jtp06243</a>   :)"
            },
            {
              "comment_id": 47926094,
              "body": "<i>&quot;[.............]You will never have a null pointer anywhere, or someone is violating the rules.&quot;</i> That one violating the rules is precisely the point of the question. Or you write 100% of your code without using a single library?"
            },
            {
              "comment_id": 47973421,
              "body": "Of course, you can not control other people&#39;s code. But the rules still apply, and are useful. Other wise, its like saying  that, RUST ( <a href=\"http://cmr.github.io/blog/2013/08/13/rust-by-concept/\" rel=\"nofollow noreferrer\">cmr.github.io/blog/2013/08/13/rust-by-concept</a> ) will never work if it needs to access any library. So, indeed that&#39;s a problem, but following pointer ownership can greatly reduce the risk."
            }
          ],
          "answer_id": 11478811,
          "body": "<p>OK, I now this has been technically answered a million times but I have to say this because this is an un-ending discussion with Java programmers.</p>\n\n<p>Sorry but I disagree will almost all of above. The reason we have to be testing for null in Java is because must Java programmers dont know how to handle memory. </p>\n\n<p>I say this because I have a long experience programming in C++ and we dont do this. In other words, you dont need to. And note that, in Java, if you hit a dangling pointer you get a normal exception; in C++ this exception normally is not caught and terminates the program.</p>\n\n<p>Dont want to do this? Then follow some simple rules ala C/C++.</p>\n\n<p>Dont instantiate things so easily, <em>think</em> that every \"new\" can get you in lots of trouble and FOLLOW these simple rules.</p>\n\n<p>A class shall access memory in only 3 ways -></p>\n\n<ol>\n<li><p>It can \"HAVE\" class members, and they will follow these rules:</p>\n\n<ol>\n<li>ALL \"HAS\" members are created \"new\" in the constructor.</li>\n<li>You will close /de allocate in destructor or equivalent close()\nfunction in Java for that same class and in NO other.</li>\n</ol></li>\n</ol>\n\n<p>This means that you need to have in mind (just like Java does) who is the owner or parent of each resource and respect that ownership.  An object is only deleted by the class who created it. Also -></p>\n\n<ol start=\"2\">\n<li><p>Some members will be \"USED\" but not own or \"HAVE\". This are \"OWN\" in another class and passed as arguments to the constructor. Since these are owned by another class, we will NEVER delete or close this, only the parent can.</p></li>\n<li><p>A method in a class can also  instantiate local objects for internal use which will NEVER pass out side of the class, or they should have been normal \"has\" objects.</p></li>\n</ol>\n\n<p>Finally for all this to work, you need to have a disciplined design with classes in hierarchy form and making no cycles.</p>\n\n<p>Under this design, AND following the above rules, there is no way that a child class in a hierarchy design will ever access a pointer which was destroyed, because that means that a parent was destroyed before a child, which the hierarchical acyclic design will not allow it.</p>\n\n<p>Finally, also remember when starting your system you should build from top to bottom of the hierarchy and destroy bottom to top. You will never have a null pointer anywhere, or someone is violating the rules.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 21526406,
              "body": "Actually, your example constitutes code bloat: the first line is superfluous because the NPE would be thrown in the second line. ;-)"
            },
            {
              "comment_id": 21530189,
              "body": "True. A better example would be if the second line were <code>doCalc(someObject)</code>."
            },
            {
              "comment_id": 21532407,
              "body": "Depends. If you are the author of doCalc(), I&#39;d suggest putting the check into that method&#39;s body (if possible). And then you most likely will call someObject.someMethod() where again there is no need to check for null. :-)"
            },
            {
              "comment_id": 21608270,
              "body": "Well, if you are not the author of <code>doCalc()</code>, and it doesn&#39;t immediately throw NPE when given null, you&#39;d need to check for null and throw NPE yourself. That&#39;s what <code>Objects.requireNonNull()</code> is for."
            },
            {
              "comment_id": 28114498,
              "body": "It&#39;s not just code bloat. Better to check up front than halfway through a method that causes side effects or uses time/space."
            },
            {
              "comment_id": 38715467,
              "body": "I probably wouldn&#39;t have thrown an NPE, when I&#39;m argument checking for nulls I usually throw an IllegalArgumentException, and it&#39;s not a bad thing to do at the very top, if you assume this.child = child will &quot;catch&quot; it, you aren&#39;t being explicit in your code, a refactor could make it really tough to catch where the null originated.  Code bloat is much better than magic, any day."
            },
            {
              "comment_id": 41235320,
              "body": "The <code>Objects.requireNonNull(object, string)</code> version (where you can pass an error message as 2nd argument) is more useful than the single-arg version (the latter probably just added for the sake of completeness), especially when you&#39;re using it to check multiple argument values. Say you had to check 3 arguments for null, this would reduce your code from 3 if/then-throw blocks (separated by empty lines), to 3 single lines not needing empty lines."
            }
          ],
          "answer_id": 11896966,
          "body": "<p>Java 7 has a new <code>java.util.Objects</code> utility class on which there is a <code>requireNonNull()</code> method. All this does is throw a <code>NullPointerException</code> if its argument is null, but it cleans up the code a bit. Example:</p>\n\n<pre><code>Objects.requireNonNull(someObject);\nsomeObject.doCalc();\n</code></pre>\n\n<hr>\n\n<p>The method is most useful for <a href=\"https://stackoverflow.com/questions/3322638/is-it-okay-to-throw-nullpointerexception-programatically\">checking</a> just before an assignment in a constructor, where each use of it can save three lines of code:</p>\n\n<pre><code>Parent(Child child) {\n   if (child == null) {\n      throw new NullPointerException(\"child\");\n   }\n   this.child = child;\n}\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>Parent(Child child) {\n   this.child = Objects.requireNonNull(child, \"child\");\n}\n</code></pre>\n"
        },
        {
          "answer_id": 12390983,
          "body": "<p>I prefer this</p>\n\n<pre><code>public void simpleFunc(SomeObject someObject){\n    someObject = someObject != null ? someObject : new SomeObject(null);\n    someObject.doSomething();\n}\n</code></pre>\n\n<p>Of course in my example SomeObject handles gracefully a null parameter. For example logging such event and doing nothing more.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 17917404,
              "body": "why would this be downvoted? in my experience, this is far superior to the other approaches, would love to know why not"
            },
            {
              "comment_id": 26139774,
              "body": "I agree, this approach prevents problems related to nulls, rather than fixing them by speckling code null checks everywhere."
            },
            {
              "comment_id": 30874026,
              "body": "The problem with this approach is that if name is never set, it has the value &quot;&lt;unknown&gt;&quot;, which behaves like a set value. Now let&#39;s say I need to check if name was never set (unknown), I have to do a string comparison against the special value &quot;&lt;unknown&gt;&quot;."
            },
            {
              "comment_id": 44686309,
              "body": "True good point Steve. What I often do is have that value as a constant, e.g. public static final String UNSET=&quot;__unset&quot; ... private String field = UNSET ...   then   private boolean isSet() { return UNSET.equals(field); }"
            },
            {
              "comment_id": 82425650,
              "body": "IMHO, This is a implementation of Null Object Pattern with a yourself implementation  of Optional (Contract). How it behaves on persistence class class? I do not see applicable in that case."
            },
            {
              "comment_id": 82523325,
              "body": "@Kurapika - agree. I think &quot;never use null&quot; is not entirely practical in Java.  But 99% of the time, it is, and is to be encouraged imo. I like what I see with languages like Kotlin that address this problem."
            }
          ],
          "answer_id": 12946734,
          "body": "<p>Just don't ever use null. Don't allow it.</p>\n\n<p>In my classes, most fields and local variables have non-null default values, and I add contract statements (always-on asserts) everywhere in the code to make sure this is being enforced (since it's more succinct, and more expressive than letting it come up as an NPE and then having to resolve the line number, etc.).</p>\n\n<p>Once I adopted this practice, I noticed that the problems seemed to fix themselves. You'd catch things much earlier in the development process just by accident and realize you had a weak spot..  and more importantly.. it helps encapsulate different modules' concerns, different modules can 'trust' each other, and no more littering the code with <code>if = null else</code> constructs!</p>\n\n<p>This is defensive programming and results in much cleaner code in the long run. Always sanitize the data, e.g. here by enforcing rigid standards, and the problems go away.</p>\n\n<pre><code>class C {\n    private final MyType mustBeSet;\n    public C(MyType mything) {\n       mustBeSet=Contract.notNull(mything);\n    }\n   private String name = \"&lt;unknown&gt;\";\n   public void setName(String s) {\n      name = Contract.notNull(s);\n   }\n}\n\n\nclass Contract {\n    public static &lt;T&gt; T notNull(T t) { if (t == null) { throw new ContractException(\"argument must be non-null\"); return t; }\n}\n</code></pre>\n\n<p>The contracts are like mini-unit tests which are always running, even in production, and when things fail, you know why, rather than a random NPE you have to somehow figure out.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 82426731,
              "body": "are you proposing intercept each method of entire app?"
            }
          ],
          "answer_id": 13676682,
          "body": "<p>You can use an interceptor before the method call. That is what <a href=\"https://en.wikipedia.org/wiki/Aspect-oriented_programming\" rel=\"nofollow\">aspect-oriented programming</a> focus on.</p>\n\n<p>Suppose M1(Object test) is a method and M2 is a method where we apply an aspect before a method call, <code>M2(Object test2)</code>. If <code>test2 != null</code> then call M1, otherwise do another thing. It works for all methods with whom you want to apply an aspect for. If you want to apply an aspect for an instance field and constructor you can use <a href=\"https://en.wikipedia.org/wiki/AspectJ\" rel=\"nofollow\">AspectJ</a>. <a href=\"http://en.wikipedia.org/wiki/Spring_Framework\" rel=\"nofollow\">Spring</a> can also be the best choice for a method aspect.</p>\n"
        },
        {
          "answer_id": 14253016,
          "body": "<p>First of all, we can't really remove all null conditions. We can reduce them using <code>@NotNull</code> and <code>@Nullable</code> annotations (<strong>as mentioned already</strong>). But this needs to be backed by some framework. This is where <a href=\"http://oval.sourceforge.net\" rel=\"nofollow\">OVal</a> can help.</p>\n\n<p>The basic idea is object/parameters/constructor should always satisfy preconditions. You can have a whole lot of preconditions such as <code>Nullable</code>, <code>NotNull</code> and OVal would take care that an object should be in a consistent state when invoked.</p>\n\n<p>I guess OVal internally uses AspectJ to validate the preconditions.</p>\n\n<pre><code>@Guarded\npublic class BusinessObject\n{\n  public BusinessObject(@NotNull String name)\n  {\n    this.name = name;\n  }\n\n  ...\n}\n</code></pre>\n\n<p>For example,</p>\n\n<pre><code>// Throws a ConstraintsViolatedException because parameter name is null\nBusinessObject bo = new BusinessObject(null);\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 24174736,
              "body": "Google&#39;s guava has an optional implimention for Java 6+."
            },
            {
              "comment_id": 41234970,
              "body": "It&#39;s <i>very</i> important to emphasise that using Optional only with ifPresent() does <i>not</i> add much value above normal null checking. It&#39;s core value is that it is a monad that can be used in function chains of map/flapMap, which achieves results similar to the Elvis operator in Groovy mentioned elsewhere. Even without this usage, though, I find the orElse/orElseThrow syntax also very useful."
            },
            {
              "comment_id": 56084324,
              "body": "This blog has a good entry on Optional <a href=\"http://winterbe.com/posts/2015/03/15/avoid-null-checks-in-java/\" rel=\"nofollow noreferrer\">winterbe.com/posts/2015/03/15/avoid-null-checks-in-java</a>"
            },
            {
              "comment_id": 84920786,
              "body": "I really never understood why people are so happy with this boilerplate code <a href=\"https://dzone.com/articles/java-8-elvis-operator\" rel=\"nofollow noreferrer\">dzone.com/articles/java-8-elvis-operator</a>"
            },
            {
              "comment_id": 85314626,
              "body": "Why people have tendency to do this <code>if(optional.isPresent()){ optional.get(); }</code> instead of <code>optional.ifPresent(o -&gt; { ...})</code>"
            },
            {
              "comment_id": 90504695,
              "body": "So, other than the API contractual hints, it&#39;s really just about catering to functional programmers who enjoy chaining methods endlessly."
            },
            {
              "comment_id": 118610603,
              "body": "I know this post is old, but above example is a wrong use of Java 8&#39;s features imho. Do not combine imperative code with optionals like that. When having a fruit list + a name to search for, use the Streaming API: <code>fruits.stream().filter(f -&gt; name.equals(f.getName()).findFirst().map(Fruit::getName).orE&zwnj;&#8203;lse(&quot;empty-name&quot;);</code>."
            }
          ],
          "answer_id": 16218718,
          "body": "<p>With Java 8 comes the new <code>java.util.Optional</code> class that arguably solves some of the problem. One can at least say that it improves the readability of the code, and in the case of public APIs make the API's contract clearer to the client developer.</p>\n\n<p>They work like that:</p>\n\n<p>An optional object for a given type (<code>Fruit</code>) is created as the return type of a method. It can be empty or contain a <code>Fruit</code> object:</p>\n\n<pre><code>public static Optional&lt;Fruit&gt; find(String name, List&lt;Fruit&gt; fruits) {\n   for (Fruit fruit : fruits) {\n      if (fruit.getName().equals(name)) {\n         return Optional.of(fruit);\n      }\n   }\n   return Optional.empty();\n}\n</code></pre>\n\n<p>Now look at this code where we search a list of <code>Fruit</code> (<code>fruits</code>) for a given Fruit instance:</p>\n\n<pre><code>Optional&lt;Fruit&gt; found = find(\"lemon\", fruits);\nif (found.isPresent()) {\n   Fruit fruit = found.get();\n   String name = fruit.getName();\n}\n</code></pre>\n\n<p>You can use the <code>map()</code> operator to perform a computation on--or extract a value from--an optional object.  <code>orElse()</code> lets you provide a fallback for missing values.</p>\n\n<pre><code>String nameOrNull = find(\"lemon\", fruits)\n    .map(f -&gt; f.getName())\n    .orElse(\"empty-name\");\n</code></pre>\n\n<p>Of course, the check for null/empty value is still necessary, but at least the developer is conscious that the value might be empty and the risk of forgetting to check is limited.</p>\n\n<p>In an API built from scratch using <code>Optional</code> whenever a return value might be empty, and returning a plain object only when it cannot be <code>null</code> (convention), the client code might abandon null checks on simple object return values...</p>\n\n<p>Of course <code>Optional</code> could also be used as a method argument, perhaps a better way to indicate optional arguments than 5 or 10 overloading methods in some cases.</p>\n\n<p><code>Optional</code> offers other convenient methods, such as <code>orElse</code> that allow the use of a default value, and <code>ifPresent</code> that works with <a href=\"https://en.wikipedia.org/wiki/Anonymous_function\" rel=\"noreferrer\">lambda expressions</a>.</p>\n\n<p>I invite you to read this article (my main source for writing this answer) in which the <code>NullPointerException</code> (and in general null pointer) problematic as well as the (partial) solution brought by <code>Optional</code> are well explained: <em><a href=\"http://java.dzone.com/articles/java-optional-objects\" rel=\"noreferrer\">Java Optional Objects</a></em>.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 25263554,
              "body": "<a href=\"http://stackoverflow.com/questions/1386275/why-is-java-vector-class-considered-obsolete-or-deprecated\" title=\"why is java vector class considered obsolete or deprecated\">stackoverflow.com/questions/1386275/&hellip;</a>"
            },
            {
              "comment_id": 28005501,
              "body": "+1  This I agree with. You should never return half initialized objects. Jaxb related code and bean code is notiroius for this. It is bad practice. All collections should be initialized, and all objects should exist with (ideally) no null references.  Consider a object that has a collection in it.  Checking that the object is not null, that the collection is not null and that the collection does not contain null objects is unreasonable and foolish."
            }
          ],
          "answer_id": 17109182,
          "body": "<ol>\n<li>Never initialise variables to null.</li>\n<li>If (1) is not possible, initialise all collections and arrays to empty collections/arrays.</li>\n</ol>\n\n<p>Doing this in your own code and you can avoid != null checks.</p>\n\n<p>Most of the time null checks seem to guard loops over collections or arrays, so just initialise them empty, you won't need any null checks.</p>\n\n<pre><code>// Bad\nArrayList&lt;String&gt; lemmings;\nString[] names;\n\nvoid checkLemmings() {\n    if (lemmings != null) for(lemming: lemmings) {\n        // do something\n    }\n}\n\n\n\n// Good\nArrayList&lt;String&gt; lemmings = new ArrayList&lt;String&gt;();\nString[] names = {};\n\nvoid checkLemmings() {\n    for(lemming: lemmings) {\n        // do something\n    }\n}\n</code></pre>\n\n<p>There is a tiny overhead in this, but it's worth it for cleaner code and less NullPointerExceptions.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 38274707,
              "body": "I don&#39;t like <code>CollectionUtils.isEmpty</code> and <code>StringUtils.isEmpty</code> as they also do a null check, which is not implied by the method name."
            }
          ],
          "answer_id": 19714883,
          "body": "<p>We have been using Apache libraries (Apache Commons) for this issue.</p>\n\n<pre><code>ObjectUtils.equals(object, null)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>CollectionUtils.isEmpty(myCollection);\n</code></pre>\n\n<p>or </p>\n\n<pre><code>StringUtils.isEmpty(\"string\");\n</code></pre>\n\n<p>I like the previous answer before, as a practice, of providing initial default values or empty sets for collections to minimize the need.</p>\n\n<p>These can be simple uses that keep you from having NullPointerException or using an empty collection.  This doesnt answer the question for what to do with the null object, but these provide some checks for basic validations of the object or collection. </p>\n\n<p>Hope this helps. </p>\n"
        },
        {
          "answer_id": 21391466,
          "body": "<p>The way to avoid unnecessary <code>null-checks</code> is simple to state:</p>\n\n<p><code>You need to know which variables can be null, and which cannot, and you need to be confident about which category a given variable fall into.</code></p>\n\n<p>But, although it can be stated simply enough, achieving it is harder. The key lies in the <code>confident</code> part, because how can you be sure that a variable can't be null?</p>\n\n<p>There are no quick-fix, easy answers to this, but here are some pointers:</p>\n\n<ol>\n<li><p>Clean code. The most important thing for being able to reason about the behaviour of a piece of code is that it is written in a matter that is easy to understand. Name your variables based on what they represent, name your methods after what they do, apply the <code>Single responsibility principle</code> (the <code>S</code> in <code>SOLID</code>: <a href=\"http://en.wikipedia.org/wiki/SOLID_(object-oriented_design)\" rel=\"nofollow\">http://en.wikipedia.org/wiki/SOLID_(object-oriented_design)</a>, it means that each piece of code should have a single responsibility, and do this and nothing else). Once your code is clean, it is much easier to reason about it, also across multiple tiers/layers of code. With messy code, trying to understand what a method does might make you forget why you are reading the method in the first place. (Tip: Read \"Clean Code\" by Robert C. Martin)</p></li>\n<li><p>Avoid returning <code>null</code> values. If a <code>null</code> value would keep your program from functioning correctly, throw an <code>exception</code> instead (make sure to add the appropriate error-handling.) Cases where returning a <code>null</code> value might be acceptable is for instance trying to fetch an object from the database. In these cases, write code that handles the <code>null</code> values, and make a note behind your ear that here we have something that might return <code>null</code>. Handle returned <code>null</code> values as close to the caller of the method returning <code>null</code> as possible (don't just blindly pass it back up the call-chain.)</p></li>\n<li><p>Never EVER pass explicit <code>null</code> values as parameters (at least not across classes). If you are ever in a position where passing a <code>null</code>-parameter is the only option, creating a new method that does not have this parameter is the way to go. </p></li>\n<li><p>Validate your input! Identify the \"entry-points\" to your application. They can everything from webservices, REST-services, remote EJB classes, controllers, etc. For each method in these entry-points, ask yourself: \"Will this method execute correctly if this parameter is null?\" If the answer is no, add <code>Validate.notNull(someParam, \"Can't function when someParam is null!\");</code>. This will throw an <code>IllegalArgumentException</code> if the required parameter is missing. The good thing about this type of validation in the entry-points, is that you can then easily assume in the code being executed from the entry-point, that this variable will never be null! Also, if this fails, being at the entry-point, debugging is made a lot easier than it would if you just got a <code>NullPointerException</code> deep down in your code, since a failure like this can only mean one thing: The client didn't send you all the required information. In most cases you want to validate all input parameters, if you find yourself in a position where you need to allow a lot of <code>null</code>-values, it might be a sign of a badly designed interface, which needs refactoring/additions to suite the needs of the clients.</p></li>\n<li><p>When working with <code>Collection</code>s, return an empty one rather than null! </p></li>\n<li><p>When working with a database, utilize <code>not null</code>-constraints. In that way, you'll know that a value read from the database cannot be null, and you won't have to check for it.</p></li>\n<li><p>Structure your code and stick with it. Doing this allows you to make assumptions about the behaviour of the code, for instance if all input to your application is validated, then you can assume that these values will never be null. </p></li>\n<li><p>If you are not already doing it, write automated tests of your code. By writing tests, you will reason about your code, and you will also become more confident that it does what it's supposed to. Also, automated tests guards you from blunders during refactoring, by letting you know immediatly that this piece of code is not doing what it used to.</p></li>\n</ol>\n\n<p>You still have to null-check of course, but it can trimmed down to the bare minimum (i.e. the situation where <em>know</em> you might be getting a null-value, instead of everywhere just to be sure.) When it comes to null-checks, i actually prefer to use the ternary operator (but use with care, when you start nesting them they come really messy.)</p>\n\n<pre><code>public String nullSafeToString(final Object o) {\n    return o != null ? o.toString() : \"null\";\n}\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 54645620,
              "body": "<code>javax</code> is, by definition, <i>not</i> &quot;core Java&quot;."
            }
          ],
          "answer_id": 21726959,
          "body": "<p>May I answer it more generally!</p>\n\n<p>We <strong>usually</strong> face this issue when the methods get the parameters in the way we not expected (bad method call is programmer's fault). For example: you expect to get an object, instead you get a null. You expect to get an String with at least one character, instead you get an empty String ...</p>\n\n<p>So there is no difference between:</p>\n\n<pre><code>if(object == null){\n   //you called my method badly!\n</code></pre>\n\n<p>}</p>\n\n<p>or</p>\n\n<pre><code>if(str.length() == 0){\n   //you called my method badly again!\n}\n</code></pre>\n\n<p>They both want to make sure that we received valid parameters, before we do any other functions.</p>\n\n<p>As mentioned in some other answers, to avoid above problems you can follow the <strong>Design by contract</strong> pattern. Please see <a href=\"http://en.wikipedia.org/wiki/Design_by_contract\">http://en.wikipedia.org/wiki/Design_by_contract</a>. </p>\n\n<p>To implement this pattern in java, you can use core java annotations like <strong>javax.annotation.NotNull</strong> or use more sophisticated libraries like <strong>Hibernate Validator</strong>.</p>\n\n<p>Just a sample:</p>\n\n<pre><code>getCustomerAccounts(@NotEmpty String customerId,@Size(min = 1) String accountType)\n</code></pre>\n\n<p>Now you can safely develop the core function of your method without needing to check input parameters, they guard your methods from unexpected parameters.</p>\n\n<p>You can go a step further and make sure that only valid pojos could be created in your application. (sample from hibernate validator site)</p>\n\n<pre><code>public class Car {\n\n   @NotNull\n   private String manufacturer;\n\n   @NotNull\n   @Size(min = 2, max = 14)\n   private String licensePlate;\n\n   @Min(2)\n   private int seatCount;\n\n   // ...\n}\n</code></pre>\n"
        },
        {
          "answer_id": 22211014,
          "body": "<p>I find Guava Preconditions to be very useful in this case. I don't like leaving nulls to null pointer exception since the only way to understand an NPE is by locating the line number. Line numbers in production version and development version can be different.</p>\n\n<p>Using Guava Preconditions, I can check null parameters and define a meaningful exception message in one line.</p>\n\n<p>For example,</p>\n\n<pre><code>Preconditions.checkNotNull(paramVal, \"Method foo received null paramVal\");\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 58070686,
              "body": "Ad. 4. It is not very useful - when you check if a pointer is null, you probably want to call a method on it. Calling a method on null gives you the same behavior - NullPointerException."
            },
            {
              "comment_id": 133734686,
              "body": "Approach 4 is superfluous and already covered by <code>Objects.requireNonNull()</code>"
            }
          ],
          "answer_id": 23021801,
          "body": "<p>This is the most common error occurred for most of the developers.</p>\n\n<p>We have number of ways to handle this.</p>\n\n<p><strong>Approach 1:</strong></p>\n\n<pre><code>org.apache.commons.lang.Validate //using apache framework\n</code></pre>\n\n<p>notNull(Object object, String message) </p>\n\n<p><strong>Approach 2:</strong></p>\n\n<pre><code>if(someObject!=null){ // simply checking against null\n}\n</code></pre>\n\n<p><strong>Approach 3:</strong></p>\n\n<pre><code>@isNull @Nullable  // using annotation based validation\n</code></pre>\n\n<p><strong>Approach 4:</strong></p>\n\n<pre><code>// by writing static method and calling it across whereever we needed to check the validation\n\nstatic &lt;T&gt; T isNull(someObject e){  \n   if(e == null){\n      throw new NullPointerException();\n   }\n   return e;\n}\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 58070988,
              "body": "The solution with &quot;hasBackground()&quot; has one drawback - it&#39;s not thread-safe. If you need to call two methods instead of one, you need to synchronize the whole sequence in multi-threaded environment."
            },
            {
              "comment_id": 58079152,
              "body": "@pkalinow You made a contrived example only to point out that this solution has a drawback. If code is not meant to run in multithreaded application then there is no drawback. I could put at you probably 90% of your code that is not thread safe. We&#39;re not speaking here about this aspect of code, we&#39;re speaking about design pattern. And multithreading is a topic on its own."
            },
            {
              "comment_id": 58113391,
              "body": "Of course in a single-thread application it&#39;s not a problem. I&#39;ve given that comment because sometimes it is a problem."
            },
            {
              "comment_id": 58114436,
              "body": "@pkalinow If you study this topic closer you will find out that Null Object design pattern won&#39;t fix the multithreading problems. So it&#39;s irrelevant. And to be honest, I&#39;ve found places where this pattern would fit in nicely, so my original answer is a bit wrong, actually."
            }
          ],
          "answer_id": 23031015,
          "body": "<p>I highly disregard answers that suggest using the null objects in every situation. This pattern may break the contract and bury problems deeper and deeper instead of solving them, not mentioning that used inappropriately will create another pile of boilerplate code that will require future maintenance.</p>\n\n<p>In reality if something returned from a method can be null and the calling code has to make decision upon that, there should an earlier call that ensures the state. </p>\n\n<p>Also keep in mind, that null object pattern will be memory hungry if used without care. For this - the instance of a NullObject should be shared between owners, and not be an unigue instance for each of these.</p>\n\n<p>Also I would not recommend using this pattern where the type is meant to be a primitive type representation - like mathematical entities, that are not scalars: vectors, matrices, complex numbers and POD(Plain Old Data) objects, which are meant to hold state in form of Java built-in types. In the latter case you would end up calling getter methods with arbitrary results. For example what should a NullPerson.getName() method return? </p>\n\n<p>It's worth considering such cases in order to avoid absurd results.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 105294546,
              "body": "There&#39;s a null check in above code - <code>if(homeServices != null) {</code> which can be changed to <code>homeServices.ifPresent(h -&gt; &#47;&#47;action)</code>;"
            }
          ],
          "answer_id": 29887121,
          "body": "<p>This is a very common problem for every Java developer. So there is official support in Java&nbsp;8 to address these issues without cluttered code.</p>\n\n<p>Java 8 has introduced <code>java.util.Optional&lt;T&gt;</code>. It is a container that may or may not hold a non-null value. Java 8 has given a safer way to handle an object whose value may be null in some of the cases. It is inspired from the ideas of <a href=\"http://en.wikipedia.org/wiki/Haskell_%28programming_language%29\" rel=\"noreferrer\">Haskell</a> and <a href=\"http://en.wikipedia.org/wiki/Scala_%28programming_language%29\" rel=\"noreferrer\">Scala</a>.</p>\n\n<p>In a nutshell, the Optional class includes methods to explicitly deal with the cases where a value is present or absent. However, the advantage compared to null references is that the Optional&lt;T> class forces you to think about the case when the value is not present. As a consequence, you can prevent unintended null pointer exceptions.</p>\n\n<p>In above example we have a home service factory that returns a handle to multiple appliances available in the home. But these services may or may not be available/functional; it means it may result in a NullPointerException. Instead of adding a null <code>if</code> condition before using any service, let's wrap it in to Optional&lt;Service>.</p>\n\n<p>WRAPPING TO OPTION&lt;T></p>\n\n<p>Let's consider a method to get a reference of a service from a factory. Instead of returning the service reference, wrap it with Optional. It lets the API user know that the returned service may or may not available/functional, use defensively</p>\n\n<pre><code>public Optional&lt;Service&gt; getRefrigertorControl() {\n      Service s = new  RefrigeratorService();\n       //...\n      return Optional.ofNullable(s);\n   }\n</code></pre>\n\n<p>As you see <code>Optional.ofNullable()</code> provides an easy way to get the reference wrapped. There are another ways to get the reference of Optional, either <code>Optional.empty()</code> &amp; <code>Optional.of()</code>. One for returning an empty object instead of retuning null and the other to wrap a non-nullable object, respectively.</p>\n\n<p>SO HOW EXACTLY IT HELPS TO AVOID A NULL CHECK?</p>\n\n<p>Once you have wrapped a reference object, Optional provides many useful methods to invoke methods on a wrapped reference without NPE.</p>\n\n<pre><code>Optional ref = homeServices.getRefrigertorControl();\nref.ifPresent(HomeServices::switchItOn);\n</code></pre>\n\n<p>Optional.ifPresent invokes the given Consumer with a reference if it is a non-null value. Otherwise, it does nothing.</p>\n\n<pre><code>@FunctionalInterface\npublic interface Consumer&lt;T&gt;\n</code></pre>\n\n<p>Represents an operation that accepts a single input argument and returns no result. Unlike most other functional interfaces, Consumer is expected to operate via side-effects.\nIt is so clean and easy to understand. In the above code example, <code>HomeService.switchOn(Service)</code> gets invoked if the Optional holding reference is non-null.</p>\n\n<p>We use the ternary operator very often for checking null condition and return an alternative value or default value. Optional provides another way to handle the same condition without checking null. Optional.orElse(defaultObj) returns defaultObj if the Optional has a null value. Let's use this in our sample code:</p>\n\n<pre><code>public static Optional&lt;HomeServices&gt; get() {\n    service = Optional.of(service.orElse(new HomeServices()));\n    return service;\n}\n</code></pre>\n\n<p>Now HomeServices.get() does same thing, but in a better way. It checks whether the service is already initialized of not. If it is then return the same or create a new New service. Optional&lt;T>.orElse(T) helps to return a default value.</p>\n\n<p>Finally, here is our NPE as well as null check-free code:</p>\n\n<pre><code>import java.util.Optional;\npublic class HomeServices {\n    private static final int NOW = 0;\n    private static Optional&lt;HomeServices&gt; service;\n\npublic static Optional&lt;HomeServices&gt; get() {\n    service = Optional.of(service.orElse(new HomeServices()));\n    return service;\n}\n\npublic Optional&lt;Service&gt; getRefrigertorControl() {\n    Service s = new  RefrigeratorService();\n    //...\n    return Optional.ofNullable(s);\n}\n\npublic static void main(String[] args) {\n    /* Get Home Services handle */\n    Optional&lt;HomeServices&gt; homeServices = HomeServices.get();\n    if(homeServices != null) {\n        Optional&lt;Service&gt; refrigertorControl = homeServices.get().getRefrigertorControl();\n        refrigertorControl.ifPresent(HomeServices::switchItOn);\n    }\n}\n\npublic static void switchItOn(Service s){\n         //...\n    }\n}\n</code></pre>\n\n<p>The complete post is <em><a href=\"http://ydtech.blogspot.in/2015/04/npe-as-well-as-null-check-free-code.html\" rel=\"noreferrer\">NPE as well as Null check-free code  Really?</a></em>.</p>\n"
        },
        {
          "answer_id": 33216446,
          "body": "<p>You can couple your Class with Unit Testing using a framework like JUnit.\nThis way your code will be clean (no useless checkings) and you will be sure your instances wont be null.</p>\n\n<p>This is one good reason (of many) to use Unit Testing.</p>\n"
        },
        {
          "answer_id": 33763493,
          "body": "<p>It is possible to define util methods which handles nested null-checks in an almost pretty way with Java 8 lambdas.</p>\n\n<pre><code>void example() {\n    Entry entry = new Entry();\n    // This is the same as H-MANs solution \n    Person person = getNullsafe(entry, e -&gt; e.getPerson());    \n    // Get object in several steps\n    String givenName = getNullsafe(entry, e -&gt; e.getPerson(), p -&gt; p.getName(), n -&gt; n.getGivenName());\n    // Call void methods\n    doNullsafe(entry, e -&gt; e.getPerson(), p -&gt; p.getName(), n -&gt; n.nameIt());        \n}\n\n/** Return result of call to f1 with o1 if it is non-null, otherwise return null. */\npublic static &lt;R, T1&gt; R getNullsafe(T1 o1, Function&lt;T1, R&gt; f1) {\n    if (o1 != null) return f1.apply(o1);\n    return null; \n}\n\npublic static &lt;R, T0, T1&gt; R getNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, R&gt; f2) {\n    return getNullsafe(getNullsafe(o0, f1), f2);\n}\n\npublic static &lt;R, T0, T1, T2&gt; R getNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, T2&gt; f2, Function&lt;T2, R&gt; f3) {\n    return getNullsafe(getNullsafe(o0, f1, f2), f3);\n}\n\n\n/** Call consumer f1 with o1 if it is non-null, otherwise do nothing. */\npublic static &lt;T1&gt; void doNullsafe(T1 o1, Consumer&lt;T1&gt; f1) {\n    if (o1 != null) f1.accept(o1);\n}\n\npublic static &lt;T0, T1&gt; void doNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Consumer&lt;T1&gt; f2) {\n    doNullsafe(getNullsafe(o0, f1), f2);\n}\n\npublic static &lt;T0, T1, T2&gt; void doNullsafe(T0 o0, Function&lt;T0, T1&gt; f1, Function&lt;T1, T2&gt; f2, Consumer&lt;T2&gt; f3) {\n    doNullsafe(getNullsafe(o0, f1, f2), f3);\n}\n\n\nclass Entry {\n    Person getPerson() { return null; }\n}\n\nclass Person {\n    Name getName() { return null; }\n}\n\nclass Name {\n    void nameIt() {}\n    String getGivenName() { return null; }\n}\n</code></pre>\n\n<p><i><sup>(This answer was first posted <a href=\"https://stackoverflow.com/questions/4390141/java-operator-for-checking-null-what-is-it-not-ternary/33711967#33711967\">here</a>.)</sup></i></p>\n"
        },
        {
          "answer_id": 34304851,
          "body": "<p>Java 8 now has Optional class that wraps the object in consideration and if a value is present, isPresent() will return true and get() will return the value.</p>\n\n<p><a href=\"http://www.oracle.com/technetwork/articles/java/java8-optional-2175753.html\" rel=\"nofollow\">http://www.oracle.com/technetwork/articles/java/java8-optional-2175753.html</a></p>\n"
        },
        {
          "answer_id": 34996504,
          "body": "<p>I follow below guidelines to avoid null checks.</p>\n\n<ol>\n<li><p>Avoid <strong><em>lazy initialization</em></strong> of member variables as much as possible. Initialize the variables in declaration itself. This will handle NullPointerExceptions. </p></li>\n<li><p>Decide on <strong><em>mutability</em></strong> of member variables early in the cycle. Use language constructs like <code>final</code> keyword effectively. </p></li>\n<li><p>If you know that augments for method won't be changed, declare them as <code>final</code>.</p></li>\n<li><p>Limit the <strong><em>mutation</em></strong> of data as much as possible. Some variables can be created in a constructor and can never be changed. <strong><em>Remove public setter methods unless they are really required</em></strong>.</p>\n\n<p>E.g. Assume that one class in your application (<code>A.java</code>) is maintaining a collection like <code>HashMap</code>.  Don't provide <code>public</code> getter method in A.java and allow <code>B.java</code> to directly add an element in <code>Map</code>. Instead provide an API in <code>A.java</code>, which adds an element into collection. </p>\n\n<pre><code>// Avoid\na.getMap().put(key,value)\n\n//recommended\n\npublic void addElement(Object key, Object value){\n       // Have null checks for both key and value here : single place\n       map.put(key,value);\n}\n</code></pre></li>\n<li><p>And finally, use <code>try{} catch{} finally{}</code> blocks at right places effectively.</p></li>\n</ol>\n"
        },
        {
          "comments": [
            {
              "comment_id": 120925219,
              "body": "you said, &quot;This is especially handy for long chains of possible null values&quot;. Can you please explain how?"
            }
          ],
          "answer_id": 36167495,
          "body": "<p>Probably the best alternative for Java 8 or newer is to use the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"noreferrer\"><code>Optional</code></a> class. </p>\n\n<pre><code>Optional stringToUse = Optional.of(\"optional is there\");\nstringToUse.ifPresent(System.out::println);\n</code></pre>\n\n<p>This is especially handy for long chains of possible null values. Example:</p>\n\n<pre><code>Optional&lt;Integer&gt; i = Optional.ofNullable(wsObject.getFoo())\n    .map(f -&gt; f.getBar())\n    .map(b -&gt; b.getBaz())\n    .map(b -&gt; b.getInt());\n</code></pre>\n\n<p>Example on how to throw exception on null:</p>\n\n<pre><code>Optional optionalCarNull = Optional.ofNullable(someNull);\noptionalCarNull.orElseThrow(IllegalStateException::new);\n</code></pre>\n\n<p>Java 7 introduced the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Objects.html#requireNonNull(T,%20java.lang.String)\" rel=\"noreferrer\"><code>Objects.requireNonNull</code></a> method which can be handy when something should be checked for non-nullness. Example:</p>\n\n<pre><code>String lowerVal = Objects.requireNonNull(someVar, \"input cannot be null or empty\").toLowerCase();\n</code></pre>\n"
        },
        {
          "answer_id": 38207227,
          "body": "<p>In Java 8 you can use type <code>T</code> for local-variable/field/method-argument/method-return-type if it never assigned <code>null</code> (and do not check for <code>null</code>) or type <code>Optional&lt;T&gt;</code> if it can be <code>null</code>. Then use method <code>map</code> for processing <code>T -&gt;</code> and method <code>flatMap</code> for processing <code>T -&gt; Optional&lt;R&gt;</code>:</p>\n\n<pre><code>class SomeService {\n    @Inject\n    private CompanyDao companyDao;\n\n    // return Optional&lt;String&gt;\n    public Optional&lt;String&gt; selectCeoCityByCompanyId0(int companyId) {\n        return companyDao.selectById(companyId)\n                .map(Company::getCeo)\n                .flatMap(Person::getHomeAddress)\n                .flatMap(Address::getCity);\n    }\n\n    // return String + default value\n    public String selectCeoCityByCompanyId1(int companyId) {\n        return companyDao.selectById(companyId)\n                .map(Company::getCeo)\n                .flatMap(Person::getHomeAddress)\n                .flatMap(Address::getCity)\n                .orElse(\"UNKNOWN\");\n    }\n\n    // return String + exception\n    public String selectCeoCityByCompanyId2(int companyId) throws NoSuchElementException {\n        return companyDao.selectById(companyId)\n                .map(Company::getCeo)\n                .flatMap(Person::getHomeAddress)\n                .flatMap(Address::getCity)\n                .orElseThrow(NoSuchElementException::new);\n    }\n}\n\ninterface CompanyDao {\n    // real situation: no company for such id -&gt; use Optional&lt;Company&gt; \n    Optional&lt;Company&gt; selectById(int id);\n}\n\nclass Company {\n    // company always has ceo -&gt; use Person \n    Person ceo;\n    public Person getCeo() {return ceo;}\n}\n\nclass Person {\n    // person always has name -&gt; use String\n    String firstName;\n    // person can be without address -&gt; use Optional&lt;Address&gt;\n    Optional&lt;Address&gt; homeAddress = Optional.empty();\n\n    public String getFirstName() {return firstName;}   \n    public Optional&lt;Address&gt; getHomeAddress() {return homeAddress;}\n}\n\nclass Address {\n    //  address always contains country -&gt; use String\n    String country;\n    //  city field is optional -&gt; use Optional&lt;String&gt;\n    Optional&lt;String&gt; city = Optional.empty();\n\n    String getCountry() {return country;}    \n    Optional&lt;String&gt; getCity() {return city;}\n}\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 67786967,
              "body": "You are just modifying the check. No real benefit is received. Even though we put extra efforts to implement the suggested pattern, the code is still not clean."
            },
            {
              "comment_id": 104143674,
              "body": "If you implement the Null Object Pattern, instead of returning null, you should return the NullObject. This way, you don&#39;t need the check. Just call <code>object.doCalc()</code>. If the object is the NullObject instance, the <code>doCalc()</code> won&#39;t do anything. It will be just an empty implementation of the method."
            },
            {
              "comment_id": 113942164,
              "body": "You know, you&#39;re basically replacing Null, with your own version of Null, then saying use this version of Null, so you don&#39;t have to use the other one that came with the language  :)"
            }
          ],
          "answer_id": 39848137,
          "body": "<p>Null object pattern can be used as a solution for this problem. For that, the class of the someObject should be modified. </p>\n\n<pre><code>public abstract class SomeObject {\n   public abstract boolean isNil();\n}\n\npublic class NullObject extends SomeObject {\n   @Override\n   public boolean isNil() {\n      return true;\n   }\n}\npublic class RealObject extends SomeObject {\n   @Override\n   public boolean isNil() {\n      return false;\n   }\n}\n</code></pre>\n\n<p>Now istead of checking,</p>\n\n<pre><code> if (someobject != null) {\n    someobject.doCalc();\n}\n</code></pre>\n\n<p>We can use,</p>\n\n<pre><code>if (!someObject.isNil()) {\n   someobject.doCalc();\n}\n</code></pre>\n\n<p>Reference : <a href=\"https://www.tutorialspoint.com/design_pattern/null_object_pattern.htm\" rel=\"nofollow\">https://www.tutorialspoint.com/design_pattern/null_object_pattern.htm</a></p>\n"
        },
        {
          "answer_id": 40840957,
          "body": "<p>Since <code>Java 7</code> the class <code>java.util.Objects</code> exists.</p>\n\n<p>But since <code>Java 8</code>, you can use <code>Objects.isNull(var)</code> and <code>Objects.nonNull(var)</code> methods of <code>Objects</code> class to do the null pointer check.</p>\n\n<p>For example,</p>\n\n<pre><code>String var1 = null;\nDate var2 = null;\nLong var3 = null;\n\nif(Objects.isNull(var1) &amp;&amp; Objects.isNull(var2) &amp;&amp; Objects.isNull(var3))\n    System.out.println(\"All Null\");\nelse if (Objects.nonNull(var1) &amp;&amp; Objects.nonNull(var2) &amp;&amp; Objects.nonNull(var3))\n    System.out.println(\"All Not Null\");\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 76914876,
              "body": "This is not much diferent from <code>myObject == null</code> and was introduced in Java8 for <code>Predicates</code> in the lambda feature."
            },
            {
              "comment_id": 92483833,
              "body": "Objects.isNull() is available since Java8 (not Java7)"
            },
            {
              "comment_id": 92497213,
              "body": "@RealHowTo Thankd for pointing it out, I have updated the answer, Actually <code>Objects</code> is introduced in java7, <code>isNull</code> added to it later."
            },
            {
              "comment_id": 127678420,
              "body": "This is a poor usage example for <code>Objects.isNull</code>. The <code>filter</code> here is superfluous. <code>Optional.ofNullable()</code> will return <code>Optional.empty()</code> if <code>name</code> is <code>null</code>, so you could just do: <code>String nonNullValue = Optional.ofNullable(name).orElse(&quot;DefaultName&quot;);</code>"
            }
          ],
          "answer_id": 44902405,
          "body": "<p>If you are using java8 or later go for the <code>isNull(yourObject)</code> from <code>java.util.Objects</code>.</p>\n<p>Example:-</p>\n<pre><code>String myObject = null;\n\nObjects.isNull(myObject); //will return true\n</code></pre>\n<p>Usage: The below code returns a non null value (if the name is not null then that value will be returned else the default value will be returned).</p>\n<pre><code>final String name = &quot;Jobin&quot;;\nString nonNullValue = Optional.ofNullable(name).orElse(&quot;DefaultName&quot;);\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 133734765,
              "body": "It should be noted, that <code>Optionals</code> are supposed to be used primarily for return values, as empty Objects to work without consecutive <code>NPE</code> problems, not as a replacement for null checks e. g. in legacy or conventional code."
            }
          ],
          "answer_id": 46644408,
          "body": "<p><strong>Java 8 has introduced a new class Optional in java.util package.</strong></p>\n\n<p><strong>Advantages of Java 8 Optional:</strong></p>\n\n<p>1.) Null checks are not required.<br>\n2.) No more NullPointerException at run-time.<br>\n3.) We can develop clean and neat APIs.  </p>\n\n<p><strong>Optional</strong> - A container object which may or may not contain a non-null value. If a value is present, isPresent() will return true and get() will return the value.</p>\n\n<p>For more details find here oracle docs :-\n<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html</a></p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 83597555,
              "body": "explain very well"
            }
          ],
          "answer_id": 47285263,
          "body": "<p>All in all to avoid statement</p>\n<pre><code>if (object != null) {\n    ....\n}\n</code></pre>\n<ol>\n<li><p>since java 7 you can use <code>Objects</code> methods:</p>\n<p>Objects.isNull(object)</p>\n<p>Objects.nonNull(object)</p>\n<p>Objects.requireNonNull(object)</p>\n<p>Objects.equals(object1, object2)</p>\n</li>\n<li><p>since java 8 you can use Optional class (<a href=\"https://stackoverflow.com/questions/23454952/uses-for-optional\">when to use</a>)</p>\n</li>\n</ol>\n<p><code>object.ifPresent(obj -&gt; ...);</code> java 8</p>\n<p><code>object.ifPresentOrElse(obj -&gt; ..., () -&gt; ...);</code> java 9</p>\n<ol start=\"3\">\n<li><p>rely on method contract (<a href=\"https://minds.coremedia.com/2012/10/31/jsr-305-nonnull-and-guava-preconditions/\" rel=\"noreferrer\">JSR 305</a>) and use <a href=\"http://findbugs.sourceforge.net/\" rel=\"noreferrer\">Find Bugs</a>. Mark your code with annotations <code>@javax.annotation.Nullable</code> and <code>@javax.annotation.Nonnnul</code>. Also Preconditions are available.</p>\n<p>Preconditions.checkNotNull(object);</p>\n</li>\n<li><p>In special cases (for example for Strings and Collections) you can use apache-commons (or Google guava) utility methods:</p>\n</li>\n</ol>\n<blockquote>\n<p>public static boolean isEmpty(CharSequence cs) //apache CollectionUtils</p>\n<p>public static boolean isEmpty(Collection coll) //apache StringUtils</p>\n<p>public static boolean isEmpty(Map map) //apache MapUtils</p>\n<p>public static boolean isNullOrEmpty(@Nullable String string) //Guava Strings</p>\n</blockquote>\n<ol start=\"5\">\n<li>When you need to assign default value when null use apache commons lang</li>\n</ol>\n<blockquote>\n<p>public static Object defaultIfNull(Object object, Object defaultValue)</p>\n</blockquote>\n"
        },
        {
          "answer_id": 47986378,
          "body": "<p>One Option you have</p>\n\n<ul>\n<li><p>Use <a href=\"https://checkerframework.org/api/org/checkerframework/checker/nullness/qual/RequiresNonNull.html\" rel=\"nofollow noreferrer\">checker framework</a>'s @RequiresNonNull on methods. for ex you get this if you call a method annotated as such, with a null argument. It will fail during compile, even before your code runs! since at runtime it will be NullPointerException</p>\n\n<pre><code>@RequiresNonNull(value = { \"#1\" })\nstatic void check( Boolean x) {\n    if (x) System.out.println(\"true\");\n    else System.out.println(\"false\");\n}\n\npublic static void main(String[] args) {\n\n\n    check(null);\n\n}\n</code></pre></li>\n</ul>\n\n<p>gets </p>\n\n<pre><code>[ERROR] found   : null\n[ERROR] required: @Initialized @NonNull Boolean\n[ERROR] -&gt; [Help 1]\n</code></pre>\n\n<p>There are other methods like Use Java 8's Optional, Guava Annotations, Null Object pattern etc. Does not matter as long as you obtain your goal of avoiding !=null</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 129057768,
              "body": "At first blush, this looks like a great answer to the problem I&#39;m having, but it suffers from the design-flaw of &quot;don&#39;t use exceptions to control behavior&quot;.  Essentially, it only works because it relies on the &#39;resolve(..)&quot; method intentionally generating an NPE, catching it, and then dealing with it to alter behavior.  That&#39;s just bad.   Might still use it, but looking for a better way."
            }
          ],
          "answer_id": 48671389,
          "body": "<p>With Java 8, you could pass a supplier to a helper method like below,</p>\n\n<pre><code>if(CommonUtil.resolve(()-&gt; a.b().c()).isPresent()) {\n\n}\n</code></pre>\n\n<p>Above replaces boiler plate code like below,</p>\n\n<pre><code>if(a!=null &amp;&amp; a.b()!=null &amp;&amp; a.b().c()!=null) {\n\n}\n</code></pre>\n\n<p>//CommonUtil.java</p>\n\n<pre><code> public static &lt;T&gt; Optional&lt;T&gt; resolve(Supplier&lt;T&gt; resolver) {\n        try {\n            T result = resolver.get();\n            return Optional.ofNullable(result);\n        } catch (NullPointerException var2) {\n            return Optional.empty();\n        }\n    }\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 89600423,
              "body": "you can see there are a lot of answers with many upvotes, what is special about your answer?"
            },
            {
              "comment_id": 89600563,
              "body": "I just wanted to add a few more functions made available with <code>Java 9</code>."
            },
            {
              "comment_id": 89601298,
              "body": "then emphasize on it with a bold font at the beginning of your post"
            }
          ],
          "answer_id": 51311500,
          "body": "<p>You can avoid most a lot to avoid <code>NullPointerException</code> by just following most of the others answers to the Question, I just want to add few <strong>more ways which have been introduced in  <code>Java 9</code></strong> to handle this scenario gracefully and also showcase a few of the older ones can also be used and thus reducing your efforts.</p>\n\n<ol>\n<li><p><code>public static boolean isNull(Object obj)</code></p>\n\n<p>Returns true if the provided reference is null otherwise returns\nfalse.</p>\n\n<p>Since Java 1.8</p></li>\n<li><p><code>public static boolean nonNull(Object obj)</code></p>\n\n<p>Returns true if the provided reference is non-null otherwise returns\nfalse.</p>\n\n<p>Since Java 1.8</p></li>\n<li><p><code>public static &lt;T&gt; T requireNonNullElse(T obj, T defaultObj)</code></p>\n\n<p>Returns the first argument if it is non-null and otherwise returns\nthe non-null second argument.</p>\n\n<p>Since Java 9</p></li>\n<li><p><code>public static &lt;T&gt; T requireNonNullElseGet(T obj, Supplier&lt;? extends T&gt; supplier)</code></p>\n\n<p>Returns the first argument if it is non-null and otherwise returns the non-null value of supplier.get().</p>\n\n<p>Since Java 9</p></li>\n<li><p><code>public static &lt;T&gt; T requireNonNull(T obj, Supplier&lt;String&gt; messageSupplier)</code></p>\n\n<p>Checks that the specified object reference is not null and throws a customized NullPointerException otherwise.</p>\n\n<p>Since Java 1.8</p></li>\n</ol>\n\n<p>Further details about the above functions can be found <a href=\"https://docs.oracle.com/javase/9/docs/api/java/util/Objects.html#isNull-java.lang.Object-\" rel=\"noreferrer\">here</a>.</p>\n"
        },
        {
          "answer_id": 51939089,
          "body": "<p><a href=\"https://kotlinlang.org\" rel=\"nofollow noreferrer\">Kotlin</a> with null safety is elegant alternative, but it means a larger change.</p>\n"
        },
        {
          "answer_id": 54017256,
          "body": "<p>Functional approach may help to wrap the repetitive null checks and execute anonymous code like the below sample.</p>\n\n<pre><code>    BiConsumer&lt;Object, Consumer&lt;Object&gt;&gt; consumeIfPresent  = (s,f) -&gt;{\n        if(s!=null) {\n            f.accept(s);\n        }\n    };\n\n    consumeIfPresent.accept(null, (s)-&gt; System.out.println(s) );\n    consumeIfPresent.accept(\"test\", (s)-&gt; System.out.println(s));\n\n    BiFunction&lt;Object, Function&lt;Object,Object&gt;,Object&gt; executeIfPresent  = (a,b) -&gt;{\n        if(a!=null) {\n            return b.apply(a);\n        }\n        return null;\n    };\n    executeIfPresent.apply(null, (s)-&gt; {System.out.println(s);return s;} );\n    executeIfPresent.apply(\"test\", (s)-&gt; {System.out.println(s);return s;} );\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 101217519,
              "body": "You can get the value by using <code>map</code> combined with <code>get</code> or any of the other methods for getting the value in the Optional, instead of <code>ifPresent</code>."
            }
          ],
          "answer_id": 56145630,
          "body": "<p>Another alternative to the != null check is (if you can't get rid of it design-wise):</p>\n\n<pre><code>Optional.ofNullable(someobject).ifPresent(someobject -&gt; someobject.doCalc());\n</code></pre>\n\n<p>or</p>\n\n<pre><code>Optional.ofNullable(someobject).ifPresent(SomeClass::doCalc);\n</code></pre>\n\n<p>With SomeClass being someobject's type.</p>\n\n<p>You can't get a return value back from doCalc() though, so only useful for void methods.</p>\n"
        },
        {
          "answer_id": 56543966,
          "body": "<p>Java 8 has introduced a new class Optional in <code>java.util</code> package. It is used to represent a value is present or absent. The main advantage of this new construct is that No more too many null checks and <code>NullPointerException</code>. It avoids any runtime <code>NullPointerExceptions</code> and supports us in developing clean and neat Java APIs or Applications. Like <code>Collections</code> and <code>arrays</code>, it is also a Container to hold at most one value.</p>\n<p>Below are some useful link you can follow</p>\n<p><a href=\"https://www.mkyong.com/java8/java-8-optional-in-depth/\" rel=\"nofollow noreferrer\">https://www.mkyong.com/java8/java-8-optional-in-depth/</a></p>\n<p><a href=\"https://dzone.com/articles/java-8-optional-avoid-null-and\" rel=\"nofollow noreferrer\">https://dzone.com/articles/java-8-optional-avoid-null-and</a></p>\n"
        },
        {
          "answer_id": 63325067,
          "body": "<p>You can make one generic Method for object and string so that you can use it through out in your application-\nThis could help you and your colleagues :\nCreate a class eg. StringUtilities and add the method eg. getNullString</p>\n<pre><code>public static String getNullString(Object someobject)\n{\n   if(null==someobject )\n        return null;\n\n   else if(someobject.getClass().isInstance(&quot;&quot;) &amp;&amp; \n          (((String)someobject).trim().equalsIgnoreCase(&quot;null&quot;)|| \n          ((String)someobject).trim().equalsIgnoreCase(&quot;&quot;)))\n        return null;\n\n   else if(someobject.getClass().isInstance(&quot;&quot;))\n        return (String)someobject;\n\n   else\n        return someobject.toString().trim();\n}\n</code></pre>\n<p>And simply call this method as,</p>\n<pre><code>if (StringUtilities.getNullString(someobject) != null)\n{ \n  //Do something\n}\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 120847015,
              "body": "Is myvar a boolean or a String in this case? I&#39;m having trouble figuring out what you mean by <code>!myvar</code> if <code>myvar.length()</code> is present. Is that perhaps the way null is checked for in other languages?"
            },
            {
              "comment_id": 120853849,
              "body": "@Brian_Entei !myvar should resolve to (myvar != true), and since NULL is never equal to anything, if it is NULL, it will resolve correctly and !myvar should catch it. I believe this is viable in most languages. Basically I&#39;m checking to make sure it&#39;s not null, if it is, that short-circuits the secondary check for length. If it is not null, then it checks the length of the variable. In this case it would be a string. More the overall null check vs. exception, I didn&#39;t pay too much attention on the language."
            },
            {
              "comment_id": 120859734,
              "body": "Ah, I see. In Java, attempting to use a <code>!</code> operator on anything other than a primitive boolean (or a Boolean object with auto-unboxing) or an expression would result in a syntax error and wouldn&#39;t compile, so I was confused. Thanks for the clarification."
            },
            {
              "comment_id": 120891673,
              "body": "@Brian_Entei Interesting! Thank you, now I&#39;m realizing since the answer was for Java, I should have taken more care to stick to Java syntax. Sorry!"
            }
          ],
          "answer_id": 64437815,
          "body": "<p>The best way to avoid Null Checks in Java, is to properly handle and use exceptions. Null Checks in my experience have become more common and required as you move closer to the front-end, because it's closer to the user who may supply invalid information through the UI (such as, no value, being submitted for a field).</p>\n<p>One may argue that you should be able to control what the UI is doing, lest you forget most UI is done through a third party library of some kind, which for example, may return either NULL or an Empty String for a blank text box, depending on the situation or the library.</p>\n<p>You can combine the two like this:</p>\n<pre><code>try\n{\n  myvar = get_user_supplied_value(); \n  if (myvar == null || myvar.length() == 0) { alert_the_user_somehow(); return; };\n\n  process_user_input(myvar);\n} catch (Exception ex) {\n  handle_exception(ex);\n}\n</code></pre>\n<p>Another approach people take is to say:</p>\n<pre><code>if (myvar &amp;&amp; myvar.length() &gt; 0)  { };\n</code></pre>\n<p>You could also throw an exception (which is what I prefer)</p>\n<pre><code>if (myvar == null || myvar.length() == 0) {\n throw new Exception(&quot;You must supply a name!&quot;);\n};\n</code></pre>\n<p>But that's up to you.</p>\n"
        },
        {
          "answer_id": 64455793,
          "body": "<p>There has a good way to check the null value from JDK.\nIt is Optional.java that has a sea of methods to resolve these problems. Such as follow:</p>\n<pre><code>    /**\n     * Returns an {@code Optional} describing the specified value, if non-null,\n     * otherwise returns an empty {@code Optional}.\n     *\n     * @param &lt;T&gt; the class of the value\n     * @param value the possibly-null value to describe\n     * @return an {@code Optional} with a present value if the specified value\n     * is non-null, otherwise an empty {@code Optional}\n     */\n    public static &lt;T&gt; Optional&lt;T&gt; ofNullable(T value) {\n        return value == null ? empty() : of(value);\n    }\n</code></pre>\n<pre><code>    /**\n     * Return {@code true} if there is a value present, otherwise {@code false}.\n     *\n     * @return {@code true} if there is a value present, otherwise {@code false}\n     */\n    public boolean isPresent() {\n        return value != null;\n    }\n</code></pre>\n<pre><code>    /**\n     * If a value is present, invoke the specified consumer with the value,\n     * otherwise do nothing.\n     *\n     * @param consumer block to be executed if a value is present\n     * @throws NullPointerException if value is present and {@code consumer} is\n     * null\n     */\n    public void ifPresent(Consumer&lt;? super T&gt; consumer) {\n        if (value != null)\n            consumer.accept(value);\n    }\n</code></pre>\n<p>It is really, really useful to help javer.</p>\n"
        },
        {
          "answer_id": 64747393,
          "body": "<pre><code>public class Null {\n\npublic static void main(String[] args) {\n    String str1 = null;\n    String str2 = &quot;&quot;;\n\n    if(isNullOrEmpty(str1))\n        System.out.println(&quot;First string is null or empty.&quot;);\n    else\n        System.out.println(&quot;First string is not null or empty.&quot;);\n\n    if(isNullOrEmpty(str2))\n        System.out.println(&quot;Second string is null or empty.&quot;);\n    else\n        System.out.println(&quot;Second string is not null or empty.&quot;);\n}\n\npublic static boolean isNullOrEmpty(String str) {\n    if(str != null &amp;&amp; !str.isEmpty())\n        return false;\n    return true;\n}\n}\n</code></pre>\n<p>Output</p>\n<pre><code>str1 is null or empty.\nstr2 is null or empty.\n</code></pre>\n<p>In the above program, we've two strings str1 and str2. str1 contains null value and str2 is an empty string.</p>\n<p>We've also created a function isNullOrEmpty() which checks, as the name suggests, whether the string is null or empty. It checks it using a null check using != null and isEmpty() method of string.</p>\n<p>In plain terms, if a string isn't a null and isEmpty() returns false, it's not either null or empty. Else, it is.</p>\n<p>However, the above program doesn't return empty if a string contains only whitespace characters (spaces). Technically, isEmpty() sees it contains spaces and returns false. For string with spaces, we use the string method trim() to trim out all the leading and trailing whitespace characters.</p>\n"
        },
        {
          "answer_id": 69973748,
          "body": "<p><code>Objects.isNull(null)</code>\nIf you are using Java8 then you can try this code.</p>\n<blockquote>\n<p>Try using below code if you are not using Java8</p>\n</blockquote>\n<pre><code>Object ob=null;\nif(ob==null){ **do something}\n</code></pre>\n"
        },
        {
          "answer_id": 72436784,
          "body": "<p>Personally, I would either go with <a href=\"https://stackoverflow.com/a/271553/6210975\">jim-nelson's answer</a> or if I do find a null check is convenient for a specific context I would incorporate <a href=\"https://stackoverflow.com/a/271553/6210975\">lombok</a> into my project and use the <a href=\"https://projectlombok.org/features/NonNull\" rel=\"nofollow noreferrer\">@NonNull</a> annotation.</p>\n<p>Example:</p>\n<pre><code>import lombok.NonNull;\n\npublic class NonNullExample extends Something {\n  private String name;\n  \n  public NonNullExample(@NonNull Person person) {\n    super(&quot;Hello&quot;);\n    this.name = person.getName();\n  }\n}\n</code></pre>\n<p>Even the <a href=\"https://projectlombok.org/features/NonNull\" rel=\"nofollow noreferrer\">@NonNull</a> preface mention:</p>\n<ul>\n<li><em>or: How I learned to stop worrying and love the NullPointerException.</em></li>\n</ul>\n"
        }
      ],
      "last_activity_date": 1684606441,
      "question_id": 271526,
      "body": "<p>I use <code>x != null</code> to avoid <a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/NullPointerException.html\" rel=\"noreferrer\"><code>NullPointerException</code></a>. Is there an alternative?</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (x != null) {\n    // ...\n}\n</code></pre>\n"
    },
    {
      "comments": [
        {
          "comment_id": 15107031,
          "body": "The real answer is to always, always use seconds since an epoch for logging, like the Unix epoch, with 64 bit integer representation (signed, if you want to allow stamps before the epoch). Any real-world time system has some non-linear, non-monotonic behaviour like leap hours or daylight savings."
        },
        {
          "comment_id": 41375681,
          "body": "A great video about these kind of things: <a href=\"http://www.youtube.com/watch?v=-5wpm-gesOY\" rel=\"nofollow noreferrer\">youtube.com/watch?v=-5wpm-gesOY</a>"
        },
        {
          "comment_id": 50423566,
          "body": "And another from the same guy, @Thorbj&#248;rnRavnAndersen: <a href=\"https://www.youtube.com/watch?v=Uqjg8Kk1HXo\" rel=\"nofollow noreferrer\">youtube.com/watch?v=Uqjg8Kk1HXo</a> (Leap seconds). (This one is from Tom Scott&#39;s own YouTube channel, not from Computerphile.)"
        },
        {
          "comment_id": 112954628,
          "body": "@Phil H &quot;seconds since the epoch&quot; (i.e. Unix time) is non-linear as well, in the sense that POSIX seconds are not SI seconds and vary in length"
        },
        {
          "comment_id": 127427353,
          "body": "POSIX seconds may vary in length, but stepping is a permissible and not uncommon implementation option too. That is, the difference between timestamps one second apart can be zero when a leap second is added, or negative if the timestamps are less than one second apart. So, Unix time has non-monotonic behavior like other real-world time systems, and isn&#39;t a panacea."
        },
        {
          "comment_id": 129714885,
          "body": "I am amazed, nobody has wondered how this question even came to your mind? You already knew the answer and wanted to share with others? Or you read one of those &quot;magical programming&quot; articles which highlighted this surprising result. Otherwise who would fall upon two exact timestamps from 84 years ago, which could cause this."
        },
        {
          "comment_id": 129812204,
          "body": "@PhilH The rule to &quot;always, always use seconds since an epoch&quot;, which almost everyone does indeed follow, is probably going to lead to the abolition of <a href=\"https://en.wikipedia.org/wiki/Leap_second\" rel=\"nofollow noreferrer\">leap seconds</a>.  Seconds-since-an-epoch representations are mildly but significantly and indeed fundamentally flawed, in that they do not and cannot properly represent <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"nofollow noreferrer\">UTC</a> as currently defined.  But it&#39;s so hard to fix this problem with our computer programs that we&#39;re probably going to make a change to the real world, instead."
        }
      ],
      "answers": [
        {
          "answer_id": 6841479,
          "body": "<p>It's a time zone change on December 31st in Shanghai.</p>\n<p>See <a href=\"http://www.timeanddate.com/worldclock/clockchange.html?n=237&amp;year=1927\" rel=\"noreferrer\">this page</a> for details of 1927 in Shanghai. Basically at midnight at the end of 1927, the clocks went back 5 minutes and 52 seconds. So &quot;1927-12-31 23:54:08&quot; actually happened twice, and it looks like Java is parsing it as the <em>later</em> possible instant for that local date/time - hence the difference.</p>\n<p>Just another episode in the often weird and wonderful world of time zones.</p>\n<p><strong>If rebuilt with version 2013a of <a href=\"https://github.com/nodatime/nodatime/blob/master/src/NodaTime.Demo/StackOverflowExamples.cs#L68\" rel=\"noreferrer\">TZDB</a></strong>, The original question would no longer demonstrate quite the same behaviour. In 2013a, the result would be 358 seconds, with a transition time of 23:54:03 instead of 23:54:08.</p>\n<p>I only noticed this because I'm collecting questions like this in Noda Time, in the form of <a href=\"https://github.com/nodatime/nodatime/blob/master/src/NodaTime.Demo/StackOverflowExamples.cs#L68\" rel=\"noreferrer\">unit tests</a>... The test has now been changed, but it just goes to show - not even historical data is safe.</p>\n<p><strong>In TZDB 2014f</strong>, the time of the change has moved to 1900-12-31, and it's now a mere 343 second change (so the time between <code>t</code> and <code>t+1</code> is 344 seconds, if you see what I mean).</p>\n<hr />\n<p>To answer a question around a transition at 1900... it looks like the Java time zone implementation treats <em>all</em> time zones as simply being in their standard time for any instant before the start of 1900 UTC:</p>\n<pre><code>import java.util.TimeZone;\n\npublic class Test {\n    public static void main(String[] args) throws Exception {\n        long startOf1900Utc = -2208988800000L;\n        for (String id : TimeZone.getAvailableIDs()) {\n            TimeZone zone = TimeZone.getTimeZone(id);\n            if (zone.getRawOffset() != zone.getOffset(startOf1900Utc - 1)) {\n                System.out.println(id);\n            }\n        }\n    }\n}\n</code></pre>\n<p>The code above produces no output on my Windows machine. So any time zone which has any offset other than its standard one at the start of 1900 will count that as a transition. TZDB itself has some data going back earlier than that, and doesn't rely on any idea of a &quot;fixed&quot; standard time (which is what <code>getRawOffset</code> assumes to be a valid concept) so other libraries needn't introduce this artificial transition.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 114993233,
              "body": "It happens twice a year anywhere that observes DST."
            },
            {
              "comment_id": 126604036,
              "body": "This one is not DST, I think. It&#39;s only 10 minutes back, and only once. At the same time, DST related changes can happen twice a year... or 4 times a year (due to Ramadan). or even once a year in some setups. No rule there :)"
            },
            {
              "comment_id": 134006205,
              "body": "Generally it doesn&#39;t happen like this with DST these days, because the clock changes are done at 1am or 2am, to make sure that no change in date happens, and dates are not repeated."
            }
          ],
          "answer_id": 6841572,
          "body": "<p>You've encountered a <a href=\"http://timeanddate.com/worldclock/clockchange.html?n=237&amp;year=1927\" rel=\"noreferrer\">local time discontinuity</a>:</p>\n\n<blockquote>\n  <p>When local standard time was about to reach Sunday, 1. January 1928,\n  00:00:00 clocks were turned backward 0:05:52 hours to Saturday, 31.\n  December 1927, 23:54:08 local standard time instead</p>\n</blockquote>\n\n<p>This is not particularly strange and has happened pretty much everywhere at one time or another as timezones were switched or changed due to political or administrative actions.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 114309259,
              "body": "None of these points would affect this result - it falls squarely under the third bullet point - and moreover, this is a time several decades before UTC was even defined, and thus can not really meaningfully be expressed in UTC."
            }
          ],
          "answer_id": 6858453,
          "body": "<p>The moral of this strangeness is:</p>\n\n<ul>\n<li>Use dates and times in UTC wherever possible.</li>\n<li>If you can not display a date or time in UTC, always indicate the time-zone.</li>\n<li>If you can not require an input date/time in UTC, require an explicitly indicated time-zone.</li>\n</ul>\n"
        },
        {
          "answer_id": 6884599,
          "body": "<p>When incrementing time you should convert back to UTC and then add or subtract. Use the local time only for display.</p>\n<p>This way you will be able to walk through any periods where hours or minutes happen twice.</p>\n<p>If you converted to UTC, add each second, and convert to local time for display. You would go through 11:54:08 p.m. <a href=\"http://en.wikipedia.org/wiki/Local_mean_time\" rel=\"noreferrer\">LMT</a> - 11:59:59 p.m. LMT and then 11:54:08 p.m. <a href=\"https://en.wikipedia.org/wiki/China_Standard_Time\" rel=\"noreferrer\">CST</a> - 11:59:59 p.m. CST.</p>\n"
        },
        {
          "answer_id": 10612572,
          "body": "<p>Instead of converting each date, you can use the following code: </p>\n\n<pre><code>long difference = (sDt4.getTime() - sDt3.getTime()) / 1000;\nSystem.out.println(difference);\n</code></pre>\n\n<p>And then see that the result is:</p>\n\n<pre><code>1\n</code></pre>\n"
        },
        {
          "answer_id": 20906129,
          "body": "<p>As explained by others, there's a time discontinuity there. There are two possible timezone offsets for <code>1927-12-31 23:54:08</code> at <code>Asia/Shanghai</code>, but only one offset for <code>1927-12-31 23:54:07</code>. So, depending on which offset is used, there's either a one second difference or a 5 minutes and 53 seconds difference.</p>\n\n<p>This slight shift of offsets, instead of the usual one-hour daylight savings (summer time) we are used to, obscures the problem a bit.</p>\n\n<p>Note that the 2013a update of the timezone database moved this discontinuity a few seconds earlier, but the effect would still be observable.</p>\n\n<p>The new <code>java.time</code> package on Java 8 let use see this more clearly, and provide tools to handle it. Given:</p>\n\n<pre><code>DateTimeFormatterBuilder dtfb = new DateTimeFormatterBuilder();\ndtfb.append(DateTimeFormatter.ISO_LOCAL_DATE);\ndtfb.appendLiteral(' ');\ndtfb.append(DateTimeFormatter.ISO_LOCAL_TIME);\nDateTimeFormatter dtf = dtfb.toFormatter();\nZoneId shanghai = ZoneId.of(\"Asia/Shanghai\");\n\nString str3 = \"1927-12-31 23:54:07\";  \nString str4 = \"1927-12-31 23:54:08\";  \n\nZonedDateTime zdt3 = LocalDateTime.parse(str3, dtf).atZone(shanghai);\nZonedDateTime zdt4 = LocalDateTime.parse(str4, dtf).atZone(shanghai);\n\nDuration durationAtEarlierOffset = Duration.between(zdt3.withEarlierOffsetAtOverlap(), zdt4.withEarlierOffsetAtOverlap());\n\nDuration durationAtLaterOffset = Duration.between(zdt3.withLaterOffsetAtOverlap(), zdt4.withLaterOffsetAtOverlap());\n</code></pre>\n\n<p>Then <code>durationAtEarlierOffset</code> will be one second, while <code>durationAtLaterOffset</code> will be five minutes and 53 seconds.</p>\n\n<p>Also, these two offsets are the same:</p>\n\n<pre><code>// Both have offsets +08:05:52\nZoneOffset zo3Earlier = zdt3.withEarlierOffsetAtOverlap().getOffset();\nZoneOffset zo3Later = zdt3.withLaterOffsetAtOverlap().getOffset();\n</code></pre>\n\n<p>But these two are different:</p>\n\n<pre><code>// +08:05:52\nZoneOffset zo4Earlier = zdt4.withEarlierOffsetAtOverlap().getOffset();\n\n// +08:00\nZoneOffset zo4Later = zdt4.withLaterOffsetAtOverlap().getOffset();\n</code></pre>\n\n<p>You can see the same problem comparing <code>1927-12-31 23:59:59</code> with <code>1928-01-01 00:00:00</code>, though, in this case, it is the earlier offset that produces the longer divergence, and it is the earlier date that has two possible offsets.</p>\n\n<p>Another way to approach this is to check whether there's a transition going on. We can do this like this:</p>\n\n<pre><code>// Null\nZoneOffsetTransition zot3 = shanghai.getRules().getTransition(ld3.toLocalDateTime);\n\n// An overlap transition\nZoneOffsetTransition zot4 = shanghai.getRules().getTransition(ld3.toLocalDateTime);\n</code></pre>\n\n<p>You can check whether the transition is an overlap where there's more than one valid offset for that date/time or a gap where that date/time is not valid for that zone id - by using the <code>isOverlap()</code> and <code>isGap()</code> methods on <code>zot4</code>.</p>\n\n<p>I hope this helps people handle this sort of issue once Java 8 becomes widely available, or to those using Java 7 who adopt the JSR 310 backport.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 128470532,
              "body": "MAYBE for display I&#39;m not sure I&#39;d want to use your software otherwise, and I live in GMT which is close enough to UTC for half the year."
            },
            {
              "comment_id": 132499908,
              "body": "@mjaggard GMT is at most 1s appart of UTC for the <i>entire</i> year ;)"
            },
            {
              "comment_id": 132607225,
              "body": "Sorry @&#201;tienneMiret to be clear I meant &quot;I live in GMT ... for half the year&quot;"
            }
          ],
          "answer_id": 21840785,
          "body": "<p>I'm sorry to say, but the time discontinuity has moved a bit in</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_6_.28December_11.2C_2006.29\" rel=\"noreferrer\">JDK 6</a> two years ago, and in <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_7_.28July_28.2C_2011.29\" rel=\"noreferrer\">JDK 7</a> just recently in <a href=\"https://en.wikipedia.org/wiki/Java_version_history#cite_note-131\" rel=\"noreferrer\">update 25</a>.</p>\n\n<p>Lesson to learn: avoid non-UTC times at all costs, except maybe for display.</p>\n"
        },
        {
          "answer_id": 27153569,
          "body": "<p><code>IMHO</code> the pervasive, <em>implicit</em> localization in Java is its single largest design flaw. It may be intended for user interfaces, but frankly, who really uses Java for user interfaces today except for some IDEs where you can basically ignore localization because programmers aren't exactly the target audience for it. You can fix it (especially on Linux servers) by:</p>\n<ul>\n<li>export <code>LC_ALL=C TZ=UTC</code></li>\n<li>set your system clock to UTC</li>\n<li>never use localized implementations unless absolutely necessary (ie for display only)</li>\n</ul>\n<p>To the <a href=\"https://www.jcp.org/\" rel=\"noreferrer\">Java Community Process</a> members I recommend:</p>\n<ul>\n<li>make localized methods, not the default, but require the user to explicitly request localization.</li>\n<li>use <code>UTF-8/UTC</code> as the <em>FIXED</em> default instead because that's simply the default today. There is no reason to do something else, except if you want to produce threads like this.</li>\n</ul>\n<p>I mean, come on, aren't global static variables an anti-OO pattern? Nothing else is those pervasive defaults given by some rudimentary environment variables.......</p>\n"
        },
        {
          "answer_id": 54621415,
          "body": "<p>As others said, it's a time change in 1927 in Shanghai.</p>\n<p>It was <code>23:54:07</code> in Shanghai, in the local standard time, but then after 5 minutes and 52 seconds, it turned to the next day at <code>00:00:00</code>, and then local standard time changed back to <code>23:54:08</code>. So, that's why the difference between the two times is 343 seconds, not 1 second, as you would have expected.</p>\n<p>The time can also mess up in other places like the US. The US has Daylight Saving Time. When the Daylight Saving Time starts the time goes forward 1 hour. But after a while, the Daylight Saving Time ends, and it goes backward 1 hour back to the standard time zone. So sometimes when comparing times in the US the difference is about <code>3600</code> seconds not 1 second.</p>\n<p>But there is something different about these two-time changes. The latter changes continuously and the former was just a change. It didn't change back or change again by the same amount.</p>\n<p><strong>It's better to use UTC unless if needed to use non-UTC time like in display.</strong></p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 123176364,
              "body": "The original code is dividing the milliseconds by 1000 in order to convert to seconds. So the output certainly can be 1 (and is 1 in most time zones)."
            },
            {
              "comment_id": 123177044,
              "body": "Strange you should mention time zones as there are no &quot;good&quot; official time comparators before the atomic clock, only general agreements using astronomy. To relate any date (at absolute best) before  the atomic clock to a java TZ (has current TZ database runtime updates for zones and calendar systems) is a farce. Using java TZ for time calc before runtime version database is a farce caused by there being no true zoning for accurate usage before the installed TZ database JRE file version. See historians and forensics for a TZ and custom zone implementations."
            }
          ],
          "answer_id": 69685761,
          "body": "<p>It cannot ever be &quot;1&quot; as the result because <strong>getTime() returns long milliseconds not seconds</strong> (of which 353 milliseconds is a fair point but the epoch for Date is started at 1970 not the 1920's).\ncmmnt: The API section you are using is largely considered deprecated.\n<a href=\"http://windsolarhybridaustralia.x10.mx/httpoutputtools-tomcat-java.html\" rel=\"nofollow noreferrer\">http://windsolarhybridaustralia.x10.mx/httpoutputtools-tomcat-java.html</a></p>\n"
        }
      ],
      "last_activity_date": 1684606299,
      "question_id": 6841333,
      "body": "<p>If I run the following program, which parses two date strings referencing times 1 second apart and compares them:</p>\n<pre><code>public static void main(String[] args) throws ParseException {\n    SimpleDateFormat sf = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);  \n    String str3 = &quot;1927-12-31 23:54:07&quot;;  \n    String str4 = &quot;1927-12-31 23:54:08&quot;;  \n    Date sDt3 = sf.parse(str3);  \n    Date sDt4 = sf.parse(str4);  \n    long ld3 = sDt3.getTime() /1000;  \n    long ld4 = sDt4.getTime() /1000;\n    System.out.println(ld4-ld3);\n}\n</code></pre>\n<p><strong>The output is:</strong></p>\n<pre><code>353\n</code></pre>\n<p>Why is <code>ld4-ld3</code>, not <code>1</code> (as I would expect from the one-second difference in the times), but <code>353</code>?</p>\n<p>If I change the dates to times 1 second later:</p>\n<pre><code>String str3 = &quot;1927-12-31 23:54:08&quot;;  \nString str4 = &quot;1927-12-31 23:54:09&quot;;  \n</code></pre>\n<p>Then <code>ld4-ld3</code> will be <code>1</code>.</p>\n<hr />\n<p><strong>Java version:</strong></p>\n<pre class=\"lang-none prettyprint-override\"><code>java version &quot;1.6.0_22&quot;\nJava(TM) SE Runtime Environment (build 1.6.0_22-b04)\nDynamic Code Evolution Client VM (build 0.2-b02-internal, 19.0-b04-internal, mixed mode)\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>Timezone(`TimeZone.getDefault()`):\n\nsun.util.calendar.ZoneInfo[id=&quot;Asia/Shanghai&quot;,\noffset=28800000,dstSavings=0,\nuseDaylight=false,\ntransitions=19,\nlastRule=null]\n\nLocale(Locale.getDefault()): zh_CN\n</code></pre>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134536549,
          "body": "does your IDE show a warningabout the duplication?"
        },
        {
          "comment_id": 134540194,
          "body": "@eduyayo no my IDE doesnt show warning"
        }
      ],
      "answers": [
        {
          "answer_id": 76296695,
          "body": "<p>One solution is to group together multiple mapping annotations into a custom annotation. For example, you can create an annotation for ignoring audit mappings:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Target({ElementType.METHOD})\n@Retention(RUNTIME)\n@Mapping(target = &quot;createdAt&quot;, ignore = true)\n@Mapping(target = &quot;updatedAt&quot;, ignore = true)\n@Mapping(target = &quot;createdBy&quot;, ignore = true)\n@Mapping(target = &quot;modifiedBy&quot;, ignore = true)\npublic @interface IgnoreAuditMapping {}\n</code></pre>\n<p>The annotation can be used in mappers to reduce duplication:</p>\n<pre><code>@Mapper(config = MapperConfiguration.class)\npublic interface CategoryMapper {\n    ...\n\n    @IgnoreAuditMapping\n    @Mapping(target = &quot;id&quot;, ignore = true)\n    @Mapping(target = &quot;quizzes&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.createdAt&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.updatedAt&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.createdBy&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.modifiedBy&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.id&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.quizzes&quot;, ignore = true)\n    Category toCategory(final CategoryDto categoryDto);\n\n    ...\n}\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684606056,
      "question_id": 76292575,
      "body": "<p>There are ways how can I remove the same ignore mapping without reapeated @Mapping annotations on different methods, for example audit fields in one short annotation or interface like IgnoreMappingAuditionFields or other ways?\nSo what ways you can recommend for resolve this problem?</p>\n<pre><code>@Mapper(config = MapperConfiguration.class)\npublic interface CategoryMapper {\n    CategoryDto toDto(final Category category);\n\n    @Mapping(target = &quot;createdAt&quot;, ignore = true)\n    @Mapping(target = &quot;updatedAt&quot;, ignore = true)\n    @Mapping(target = &quot;createdBy&quot;, ignore = true)\n    @Mapping(target = &quot;modifiedBy&quot;, ignore = true)\n    @Mapping(target = &quot;id&quot;, ignore = true)\n    @Mapping(target = &quot;quizzes&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.createdAt&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.updatedAt&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.createdBy&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.modifiedBy&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.id&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.quizzes&quot;, ignore = true)\n    Category toCategory(final CategoryDto categoryDto);\n\n    @Mapping(target = &quot;createdAt&quot;, ignore = true)\n    @Mapping(target = &quot;updatedAt&quot;, ignore = true)\n    @Mapping(target = &quot;createdBy&quot;, ignore = true)\n    @Mapping(target = &quot;modifiedBy&quot;, ignore = true)\n    @Mapping(target = &quot;id&quot;, ignore = true)\n    @Mapping(target = &quot;quizzes&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.createdAt&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.updatedAt&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.createdBy&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.modifiedBy&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.id&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.quizzes&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory&quot;, ignore = true)\n    @Mapping(target = &quot;childCategories&quot;, ignore = true)\n    Category toDomain(final CategoryCreationRequest categoryCreationRequest);\n}\n</code></pre>\n<p>Remove repeated fields</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134542908,
          "body": "That&#39;s because the code only prints the name of the class after loading it. What are you trying to do? What is missing?"
        },
        {
          "comment_id": 134542929,
          "body": "Have you tried using <code>Class&lt;?&gt; c = Class.forName(className)</code>.  Instead of <code>cl.loadClass</code>?"
        },
        {
          "comment_id": 134543130,
          "body": "As @aled states, you&#39;re only seeing the class&#39;s name because that is all that your code shows: <code>c.getName()</code>. You never try to create an object from the retrieved class, at least not in the code shown, and so cannot say whether or not the code is working."
        }
      ],
      "last_activity_date": 1684605998,
      "question_id": 76296676,
      "body": "<p>How can I fetch a class object from a Jar? I'm trying to get the class object from a jar file and then build it into an interface object.</p>\n<p><a href=\"https://i.stack.imgur.com/kGSOE.png\" rel=\"nofollow noreferrer\">Kinda like this (The TestAmber is a Interface)</a></p>\n<pre><code>public static void main(String[] args) throws IOException, ClassNotFoundException {\n        try {\n            File pathToJar = new File(&quot;C:\\\\Users\\\\harpr\\\\Documents\\\\Dokumente DHBW\\\\TestRechner\\\\out\\\\artifacts\\\\TestRechner_jar\\\\TestRechner.jar&quot;);\n\n            JarFile jarFile;\n            jarFile = new JarFile(pathToJar);\n            Enumeration&lt;JarEntry&gt; e = jarFile.entries();\n\n            URL[] urls = {new URL(&quot;jar:file:&quot; + pathToJar + &quot;!/&quot;)};\n            URLClassLoader cl = URLClassLoader.newInstance(urls);\n\n            while (e.hasMoreElements()) {\n                JarEntry je = e.nextElement();\n                if (je.isDirectory() || !je.getName().endsWith(&quot;.class&quot;) || !je.getName().startsWith(&quot;TestAmber&quot;)) {\n                    continue;\n                }\n                // -6 because of .class\n                String className = je.getName().substring(0, je.getName().length() - 6);\n                className = className.replace('/', '.');\n                System.out.println(&quot;Checking for class &quot; + className);\n                Class c = cl.loadClass(className);\n\n\n                System.out.println(&quot;Class object &quot; + c.getName());\n\n            }\n        } catch (IOException | ClassNotFoundException e1) {\n            // TODO Auto-generated catch block\n            e1.printStackTrace();\n        }\n    }`\n</code></pre>\n<p>I tried something like This but I only get the Name of the class</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134545480,
          "body": "I don&#39;t think your interpretation is correct. Let&#39;s say you set the refresh time to 1 minute and the expire time to 2 minutes. If you make a request after the 1 minute mark and before the 2 minute mark, you should get back the existing (stale) value immediately while it starts refreshing the value in the background (and stale values will be returned until either the refresh completes or the expire time occurs, whichever is first). However, if no requests are issued within 2 minutes of the last time the key was loaded...sure, you&#39;ll hit the expire time instead and be hit with a blocking call."
        },
        {
          "comment_id": 134547809,
          "body": "that&#39;s what I first thought when I implemented the cache but i when looking at the metrics (I tracked time to call <code>get()</code>) it seems it is not constant and follows the time to read from DB."
        },
        {
          "comment_id": 134547820,
          "body": "I also thought increasing the <code>expireAfterWrite</code> but I don;t think it would help as I found there are tons (&gt; 100k range) of loads (I track the metric for the count of cache load) in contrast to evictions, so it is not like the cache is waiting for rows to expire to load them but probably it is doing the load when <code>get()</code> is called on keys needed refresh."
        },
        {
          "comment_id": 134547832,
          "body": "And looking at the code in <a href=\"https://github.com/google/guava/blob/master/guava/src/com/google/common/cache/LocalCache.java#L2200\" rel=\"nofollow noreferrer\">LocalCache.java#waitForLoadingValue()</a> it does seem to be a blocking call!"
        }
      ],
      "last_activity_date": 1684605759,
      "question_id": 76296669,
      "body": "<p>I'm trying to use Guava cache with async loading of values and have non-blocking get(). Because I do load values from DB so it is pretty expensive, it would be OK to serve temporally out-dated data until new data is loaded in the background but not OK to block when trying to read from cache.</p>\n<p>I first tried using <code>refreshAfterWrite</code> with <code>expireAfterWrite</code> but it does not seem to achieve what I'm looking to do. It seems from the documentation of <a href=\"https://github.com/google/guava/wiki/CachesExplained#refresh\" rel=\"nofollow noreferrer\">refreshAfterWrite</a>, entries needed refresh will not be remove until read which makes the call to <code>cache.get()</code> blocking!</p>\n<blockquote>\n<p>Automatically timed refreshing can be added to a cache using CacheBuilder.refreshAfterWrite(long, TimeUnit). In contrast to expireAfterWrite, refreshAfterWrite will make a key eligible for refresh after the specified duration, but a refresh will only be actually initiated when the entry is queried.</p>\n</blockquote>\n<p>This is how i'm creating the cache, I define a loader like this:</p>\n<pre class=\"lang-scala prettyprint-override\"><code>class DbCacheLoader() extends CacheLoader[K, V] {\n  override def load(key: K): V = {\n    // read from DB\n  }\n}\n</code></pre>\n<p>Then, I tried using the <code>refreshOnWrite</code> option to build the cache like this</p>\n<pre class=\"lang-scala prettyprint-override\"><code>val syncLoader = new DbCacheLoader()\nval val cacheLoader = CacheLoader.asyncReloading(syncLoader, threadPool)\nval cache: LoadingCache[K, V] = CacheBuilder.newBuilder()\n  .refreshAfterWrite(timeout, TimeUnit.MILLISECONDS)  // timeout\n  .expireAfterWrite(hardTimeout, TimeUnit.MILLISECONDS) // hard timeout\n  .concurrencyLevel(threadPoolSize * 10)\n  .recordStats()\n  .build[K, V](cacheLoader)\n</code></pre>\n<p>How can I have non-blocking <code>get()</code> with Guava cache?</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 132292293,
          "body": "I didn&#39;t double check this, but can&#39;t you do <code>Untitled.Untitled2.class</code>?"
        },
        {
          "comment_id": 132292307,
          "body": "@MikeKim Because that is not the question. I would like the capability to get an inner class of any random class that contains the inner class of a certain name by using the name of the inner class. The code in the question is simply to demonstrate my unsuccessful attempt at this."
        },
        {
          "comment_id": 132292377,
          "body": "I personally don&#39;t can&#39;t really think of any usefull use case for that. Like, what would be the advantage of being able to type <code>Untitled.class.getField(&quot;Untitled2&quot;).getField(&quot;x&quot;).getInt(nu&zwnj;&#8203;ll)</code> in your code opposed to just using <code>Untitled.Untitled2.x</code>?"
        },
        {
          "comment_id": 132292543,
          "body": "Does this work for your purpose? <code>Class [] dc = Untitled.class.getDeclaredClasses();             System.out.println(Arrays.toString (dc));</code>  See <a href=\"https://stackoverflow.com/questions/3357478/java-get-reference-to-a-static-class-using-reflection\" title=\"java get reference to a static class using reflection\">stackoverflow.com/questions/3357478/&hellip;</a>"
        },
        {
          "comment_id": 132293034,
          "body": "@OHGODSPIDERS I would not literally type <code>Untitled.class.getField(&quot;Untitled2&quot;).getField(&quot;x&quot;).getInt(nu&zwnj;&#8203;ll)</code> instead of <code>Untitled.Untitled2.x</code>, but if I have a <code>Class</code> variable containing one of many known classes with an <code>x</code> field or is extending a class with an <code>x</code> field, I want to be able to get the value of the <code>x</code> field."
        },
        {
          "comment_id": 132293453,
          "body": "To expand my previous comment: <code>Class [] dc = Untitled.class.getDeclaredClasses(); for (Class c : dc ) {  System.out.println (&quot;Class: &quot; + c + &quot;. Fields: &quot;);  Field []  fld  = c.getDeclaredFields();  for (Field f : fld) {  System.out.println (&quot;\\t&quot; + f + &quot;; value: &quot; + f.getInt(f));   }    }</code>"
        },
        {
          "comment_id": 133471617,
          "body": "The dupe does not <i>really</i> answer the question even though it specifies another (better) way to achieve a possible use case for this question."
        },
        {
          "comment_id": 134063234,
          "body": "I have added more duplicates."
        }
      ],
      "last_activity_date": 1684605403,
      "question_id": 74966505,
      "body": "<p>Is there a way to get an inner class of a certain name as a <code>java.lang.Class</code> of any class that contains the inner class of that name?</p>\n<p>Using <code>getField</code> does not work. I am trying to obtain the value of <code>Untitled2.class</code> from the value of <code>Untitled.class</code> using the name of <code>&quot;Untitled2&quot;</code>. There does not seem to be <code>Class getInnerClass(String name)</code> method in <code>java.lang.Class</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Untitled {\n    public static int x = 10;\n    static class Untitled2 extends Untitled {\n        public static int x = 11;\n    }\n    public static void main(String[] args) {\n        try {\n            System.out.println(Untitled.class.getField(&quot;Untitled2&quot;).getField(&quot;x&quot;).getInt(null));\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; java.lang.RuntimeException: java.lang.NoSuchFieldException: Untitled2\n    at Untitled.main(Untitled.java:10)\nCaused by: java.lang.NoSuchFieldException: Untitled2\n    at java.base/java.lang.Class.getField(Class.java:2000)\n    at Untitled.main(Untitled.java:8)\n</code></pre>\n<p>This exception is happening because inner classes are apparently not considered fields. How do I get an inner class by name in Java?</p>\n<p>The question <a href=\"https://stackoverflow.com/q/70324/16217248\">Java inner class and static nested class</a> does contain much useful information about Java inner and nested classes but <strong>did not specify how to do what I am trying</strong>.</p>\n<p><a href=\"https://stackoverflow.com/a/471775/16217248\"><code>getDeclaredClasses()</code></a> and <a href=\"https://stackoverflow.com/a/471759/16217248\"><code>getClasses()</code></a> return a list of classes. <strong>Is there a more direct way to obtain the class of the specified name without obtaining a list and searching?</strong></p>\n<p><a href=\"https://stackoverflow.com/a/8909013/16217248\"><code>Class.forName(Untitled.class.getName()+&quot;$Untitled2&quot;)</code></a> works and is better but relies on string concatenation to locate the class amongst all classes. <strong>Is there a more direct way?</strong></p>\n<p>What is the most direct way to obtain an inner class by name using reflection in Java?</p>\n"
    },
    {
      "last_activity_date": 1684605255,
      "question_id": 76296487,
      "body": "<p>I am learning about <strong>Spring Boot, JPA and Hibernate.</strong> I created 3 entities- Book, Author and Publication. Here are the entity codes-</p>\n<pre><code>@Entity\n@Data\npublic class Book {\n\n    //....other fields\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;publication_id&quot;, nullable = false)\n    private Publication publication;\n\n    @lombok.EqualsAndHashCode.Exclude\n    @ManyToMany(fetch = FetchType.LAZY)\n    @JoinTable(name = &quot;Book_Author&quot;, joinColumns = @JoinColumn(name = &quot;book_id&quot;, referencedColumnName = &quot;Book_id&quot;), inverseJoinColumns = @JoinColumn(name = &quot;author_id&quot;, referencedColumnName = &quot;Author_id&quot;))\n    private Set&lt;Author&gt; authors=new HashSet&lt;&gt;();\n}\n</code></pre>\n<pre><code>@Entity\n@Data\npublic class Author {\n    \n   //....other fields\n\n    @lombok.EqualsAndHashCode.Exclude\n    @ManyToMany(mappedBy = &quot;authors&quot;,fetch = FetchType.EAGER)\n    private Set&lt;Book&gt; books=new HashSet&lt;&gt;();\n}\n</code></pre>\n<pre><code>@Entity\n@Data\npublic class Publication {\n\n   //.... other fields\n\n    @lombok.EqualsAndHashCode.Exclude\n    @OneToMany(mappedBy = &quot;publication&quot;, cascade = { CascadeType.REFRESH, CascadeType.PERSIST, CascadeType.MERGE,\n            CascadeType.DETACH })\n    private Set&lt;Book&gt; books = new HashSet&lt;&gt;();\n}\n\n</code></pre>\n<p><strong>Note-</strong> I am using Lazy Loading for Author and Publication in Book.<br />\nNow, here is a scenario for database queries for <strong>fetching the book by id.</strong></p>\n<pre><code> @Override\n    public BookDto getBook(int id) {\n        Book book=this.bookRepository.findById(id).get(); //1.\n        Publication publication=book.getPublication(); //2.\n        System.out.println(&quot;publisher id: &quot;+publication.getId()); //3.\n        Set&lt;Author&gt; authors=book.getAuthors(); //4.\n        return this.bookToDto(book); //5.\n    }\n</code></pre>\n<p>I am using Lazy Loading to load <strong>Publication and Set&lt; Authors &gt;.</strong></p>\n<ul>\n<li>When line 1. gets executed, I get the following query-</li>\n</ul>\n<pre><code>Hibernate: \n    select\n        b1_0.book_id,\n        b1_0.book_name,\n        b1_0.isbn,\n        b1_0.publication_id,\n        b1_0.publication_date\n    from\n        book b1_0\n    where\n        b1_0.book_id=?\n</code></pre>\n<p>I understand this that <strong>Author</strong> and <strong>Publication</strong> did not get fetched because of Lazy Loading.</p>\n<ul>\n<li>When line 2. gets executed, I do not get any database query. Instead, what I get is a <strong>HibernateProxy</strong> object for <strong>Publication.</strong> Here is a screenshot to claim my argument-<br />\n<a href=\"https://i.stack.imgur.com/evtM8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/evtM8.png\" alt=\"enter image description here\" /></a></li>\n<li>When line 3. gets executed, I get the id of the <strong>Publication</strong> printed in console. I can't figure out what exactly happend here. It seems that the Publication object got fetched without a hibernate query getting printed in console. Also, what is <strong>HibernateProxy</strong> object.<br />\n<a href=\"https://i.stack.imgur.com/CRdYJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CRdYJ.png\" alt=\"enter image description here\" /></a></li>\n<li>When line 4. gets executed I get the following queries-</li>\n</ul>\n<pre><code>Hibernate: \n    select\n        a1_0.book_id,\n        a1_1.author_id,\n        a1_1.first_name,\n        a1_1.last_name,\n        a1_1.mobile_number\n    from\n        book_author a1_0\n    join\n        author a1_1\n            on a1_1.author_id=a1_0.author_id\n    where\n        a1_0.book_id=?\nHibernate: \n    select\n        b1_0.author_id,\n        b1_1.book_id,\n        b1_1.book_name,\n        b1_1.isbn,\n        b1_1.publication_id,\n        b1_1.publication_date\n    from\n        book_author b1_0\n    join\n        book b1_1\n            on b1_1.book_id=b1_0.book_id\n    where\n        b1_0.author_id=?\nHibernate: \n    select\n        p1_0.id,\n        p1_0.publication_name,\n        p1_0.registration_number\n    from\n        publication p1_0\n    where\n        p1_0.id=?\nHibernate: \n    select\n        b1_0.author_id,\n        b1_1.book_id,\n        b1_1.book_name,\n        b1_1.isbn,\n        b1_1.publication_id,\n        b1_1.publication_date\n    from\n        book_author b1_0\n    join\n        book b1_1\n            on b1_1.book_id=b1_0.book_id\n    where\n        b1_0.author_id=?\n</code></pre>\n<p>Now, I can't understand why I get the <strong>Publication</strong> fetched here when I fetched the <strong>Author.</strong><br />\nPlease help me understand what exactly is happening here and how entities are getting fetched. Also, what is <strong>HibernateProxy</strong> all about?<br />\nPlease help me understand this! I came across this question, but cannot understand why Publication Details are fetched when Author is fetched. <a href=\"https://stackoverflow.com/questions/25340606/what-does-the-hibernate-proxy-object-contain\">What does the Hibernate proxy object contain?</a></p>\n"
    },
    {
      "last_activity_date": 1684605157,
      "question_id": 76295812,
      "body": "<p>My backend REST method works fine when I test it in Postman, but when I try to pass the arguments from the frontend I get a 415 &quot;Content-Type 'application/octet-stream' is not supported.&quot; error.</p>\n<p>Here is my backend method:</p>\n<pre><code>@ResponseStatus(HttpStatus.CREATED)\n    @PostMapping\n    @Operation(summary = &quot;Publish a new message&quot;, security = @SecurityRequirement(name = &quot;apiKey&quot;))\n    public ResponseEntity&lt;ResponseMessage&gt; create (\n        @Valid @RequestPart MessageInquiryDto messageDto,\n        @RequestPart MultipartFile file\n    ) {\n        LOGGER.info(&quot;POST /api/v1/messages body: {}&quot;, messageDto);\n        messageMapper.messageToDetailedMessageDto(\n            messageService.publishMessage(file, messageMapper.messageInquiryDtoToMessage(messageDto)));\n        String message;\n        try {\n            storageService.save(file);\n\n            message = &quot;Uploaded file successfully: &quot; + file.getOriginalFilename();\n            return ResponseEntity.status(HttpStatus.OK).body(new ResponseMessage(message));\n        } catch (Exception e) {\n            message = &quot;Did not upload file, but saved url to message: &quot; + file.getOriginalFilename() + &quot;. Error: &quot; + e.getMessage();\n            return ResponseEntity.status(HttpStatus.EXPECTATION_FAILED).body(new ResponseMessage(message));\n        }\n}\n</code></pre>\n<p>This is the create method in the Angular service layer:</p>\n<pre><code>createMessageService(message: Message, image: File): Observable&lt;HttpEvent&lt;any&gt;&gt; {\n    const formData = new FormData();\n    formData.append('messageDto', JSON.stringify(message));\n    formData.append('file', image);\n    formData.forEach(file =&gt; console.log('File: ', file));\n\n    const req = new HttpRequest('POST', this.messageBaseUri, formData, {\n      reportProgress: true,\n      // headers: new HttpHeaders().append('Accept', 'multipart/form-data'),\n      responseType: 'json'\n    });\n\n    return this.httpClient.request(req);\n}\n</code></pre>\n<p>I tried making it accept multipart/form-data, but then I get a 500 Internal Server Error.</p>\n<p>This would be my logic in the news component:</p>\n<pre><code>private createMessage(message: Message) {\n    if (this.selectedFiles) {\n      console.log(this.selectedFiles.item(0));\n      const file: File | null = this.selectedFiles.item(0);\n      console.log('file:');\n      console.log(file);\n\n      if (file) {\n        this.currentFile = file;\n        this.messageService.createMessageService(this.currentMessage, this.currentFile).subscribe({\n          next: (event: any) =&gt; {\n            if (event instanceof HttpResponse) {\n              // this.message = event.body.message;\n              this.fileInfos = this.messageService.getFiles();\n            }\n          },\n          error: (err: any) =&gt; {\n            console.log(err);\n            this.currentFile = undefined;\n          }\n        });\n     }\n     this.selectedFiles = undefined;\n    }\n}\n\nselectFile(event: any): void {\n    console.log(event.target.files[0]);\n    this.selectedFiles = event.target.files;\n}\n</code></pre>\n<pre><code>&lt;div class=&quot;form-group d-flex flex-column&quot; *ngIf=&quot;!currentMessage.id&quot;&gt;\n            &lt;label class=&quot;form-label&quot;&gt;Upload Image&lt;/label&gt;\n            &lt;input type=&quot;file&quot; name=&quot;image&quot; class=&quot;form-control&quot; id=&quot;inputImage&quot; accept=&quot;image/*&quot;\n                   (change)=&quot;selectFile($event)&quot;&gt;\n&lt;/div&gt;\n\n&lt;button type=&quot;button&quot; (click)=&quot;addMessage(messageForm); messageForm.valid &amp;&amp; modal.dismiss('add message')&quot; id=&quot;add-msg&quot; class=&quot;btn btn-success&quot; *ngIf=&quot;!currentMessage.id&quot;&gt;Add message&lt;/button&gt;\n</code></pre>\n<p>I hope you get the HTML code out of context, it shouldn't be a Problem.\nAny help would be appreciated.</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 52004770,
          "body": "How do you authenticate your users? What is the AuthenticationProvider, and what is the Filter?"
        },
        {
          "comment_id": 52005937,
          "body": "Ok, you a custom AuthenticationFilter not far from a UsernamePasswordAuthenticationFilter. It is common to use a DaoAuthenticationProvider with that. Did you configure <code>setForcePrincipalAsString(True) </code> (or set <code>forcePrincipalAsString</code> to true) anywhere?"
        },
        {
          "comment_id": 52006259,
          "body": "@SergeBallesta No I didn&#39;t use those methods"
        },
        {
          "comment_id": 52007328,
          "body": "With the shown code and a default (or common) configuration, <code>SecurityContextHolder.getContext().getAuthentication().getPr&zwnj;&#8203;incipal()</code> should return the <code>User</code> object provided by <code>MyUserDetailsService</code>. You should try to use a debugger to follow a full authentication request (after downloading sources for SpringSecurity)"
        },
        {
          "comment_id": 52007401,
          "body": "Or do you have anything (a filter or ?) that would use the authentication object to set the request Principal to the user name ?"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 52004567,
              "body": "I am getting an instance of WebAuthenticationDetails instead of UserDetails."
            }
          ],
          "answer_id": 32052526,
          "body": "<p>You just went one step foo far. <code>SecurityContextHolder.getContext().getAuthentication()</code> returns an <code>Authentication</code> object. <strong>You</strong> should know how you authenticated the user, and what can the the concrete class implementing <code>Authentication</code>. Assuming it is a subclass of <code>AbstractAuthenticationToken</code> (all Spring provided implementation are), and <code>getDetails()</code> returns a <code>UserDetails</code>, you can just use:</p>\n\n<pre><code>AbstractAuthenticationToken auth = (AbstractAuthenticationToken)\n    SecurityContextHolder.getContext().getAuthentication();\nUserDetails details = (UserDetails) auth.getDetails();\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 52004743,
              "body": "I am getting username but not user Object."
            },
            {
              "comment_id": 52005117,
              "body": "I think you have to check the next paragraph after the mentioned above <a href=\"http://docs.spring.io/spring-security/site/docs/4.0.2.RELEASE/reference/htmlsingle/#tech-userdetailsservice\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/site/docs/4.0.2.RELEASE/&hellip;</a> to get user details using UserDetailsService"
            }
          ],
          "answer_id": 32052882,
          "body": "<p>you can use it like </p>\n\n<pre><code>Object principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();\n\nif (principal instanceof UserDetails) {\nString username = ((UserDetails)principal).getUsername();\n} else {\nString username = principal.toString();\n}\n</code></pre>\n\n<p>it is in spring security reference <a href=\"http://docs.spring.io/spring-security/site/docs/4.0.2.RELEASE/reference/htmlsingle/#obtaining-information-about-the-current-user\" rel=\"noreferrer\">http://docs.spring.io/spring-security/site/docs/4.0.2.RELEASE/reference/htmlsingle/#obtaining-information-about-the-current-user</a></p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 62426958,
              "body": "<a href=\"http://www.mkyong.com/spring-security/get-current-logged-in-username-in-spring-security/\" rel=\"nofollow noreferrer\">Also a mkyong how-to w/ slightly more details.</a>"
            },
            {
              "comment_id": 65259474,
              "body": "How to get the user&#39;s id?"
            },
            {
              "comment_id": 65259831,
              "body": "There is a username (String) field in the User/UserDetails class/interface, if your user&#39;s id is the username."
            },
            {
              "comment_id": 84048936,
              "body": "I am getting java.lang.ClassCastException. please help me"
            },
            {
              "comment_id": 133124477,
              "body": "Can any of the objects in between be null?"
            }
          ],
          "answer_id": 36936819,
          "body": "<pre><code>SecurityContextHolder.getContext().getAuthentication().getPrincipal();\n</code></pre>\n\n<p>Returns the current user object. This can be <code>User</code>, <code>UserDetails</code> or your <em>custom user</em> object. \nYou will need to cast the return object to <code>UserDetails</code> or your own  user object if it is a custom one.</p>\n\n<p>OR you can inject <code>Authentication</code> or <code>Principal</code> directly in to your controllers.\nPrinciple is your <code>UserDetails</code>/custom user object.</p>\n\n<p>Note: <code>UserDetails</code> is an interface</p>\n"
        },
        {
          "answer_id": 53220968,
          "body": "<p>You can simply inject the Authentication Interface to your Controller and get the username of the logged in user, like below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @GetMapping(value = &quot;/username&quot;)\n    @ResponseBody\n    public String currentUserName(Authentication authentication) {\n    \n        if (authentication != null)\n            return authentication.getName();\n        else\n            return &quot;&quot;;\n    }\n</code></pre>\n"
        },
        {
          "answer_id": 63828702,
          "body": "<p>Since version 5.2 you can use <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/core/annotation/CurrentSecurityContext.html\" rel=\"noreferrer\">CurrentSecurityContext</a> annotation to get the current user authentication:</p>\n<pre><code>@GetMapping(&quot;/authentication&quot;)\npublic Object authentication(@CurrentSecurityContext(expression=&quot;authentication&quot;)\n                             Authentication authentication) {\n    return authentication.getDetails();\n}\n</code></pre>\n<p>or even:</p>\n<pre><code>@GetMapping(&quot;/hello&quot;)\npublic String hello(@CurrentSecurityContext(expression=&quot;authentication.name&quot;)\n                    String username) {\n    return &quot;Hello, &quot; + username + &quot;!&quot;;\n}\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 131670437,
              "body": "This is totally unclear.  Do I need both of those things?  Either/or?  What do I do with those things?  Where do I put them?  Is it in a controller?  A service?  Please provide substantially more detail.  As it stands this is not an answer."
            }
          ],
          "answer_id": 64092861,
          "body": "<p>You can get current login user via:</p>\n<ol>\n<li><p><code>@Authenticationprincipal</code></p>\n</li>\n<li><p><code>SecurityContextHolder.getContext().getAuthentication().getPrinciple()</code></p>\n</li>\n</ol>\n"
        },
        {
          "comments": [
            {
              "comment_id": 115087505,
              "body": "You didn&#39;t answer the initial question: &quot;how to get the UserDetails object?&quot;"
            },
            {
              "comment_id": 115124087,
              "body": "@GetMapping(&quot;update&quot;)     public String updateProfil(Authentication authentication ) {     \tUser u= userRepository.findByUsername(authentication.getName()).get(&zwnj;&#8203;);     \tSystem.out.println(u.getGender());     \treturn &quot;update&quot;;          }"
            },
            {
              "comment_id": 115124151,
              "body": "<code>@Controller public class HomeController {  \t@Autowired  \tUserRepository userRepository; \tprivate UserPrincipalDetailsService userPrincipalDetailsService; \tpublic HomeController(UserPrincipalDetailsService userPrincipalDetailsService) { \t\tthis.userPrincipalDetailsService=userPrincipalDetailsServi&zwnj;&#8203;ce; \t}      @GetMapping(&quot;&quot;)     public String updateProfil(Authentication authentication ) {     \tUser u= userRepository.findByUsername(authentication.getName()).get(&zwnj;&#8203;);     \t&#47;&#47;you can get anything from the object     \tSystem.out.println(u.getGender());     \treturn &quot; &quot;; }}  </code>"
            },
            {
              "comment_id": 131668207,
              "body": "@KhalidTamine this should be either another answer, or an edit to an existing answer, but not a comment."
            }
          ],
          "answer_id": 65097650,
          "body": "<p>If you want to get all the attributes of your current user , first go to the class that implements <code>UserDetails</code> , more likely its called <code>UserPrincipal</code> and write a get method for each attribute like : <code>getAge()</code>, seconde go to you HTML  file and write this</p>\n<pre><code>&lt;span th:text=&quot;${#request.userPrincipal.principal.age}&gt; &lt;/span&gt;\n</code></pre>\n<p>And by the way you dont need to add any ModelAttribute in your controller\nHope it fix the problem , and you can ask me</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 131668148,
              "body": "This should be a comment, not an answer."
            }
          ],
          "answer_id": 65231879,
          "body": "<p>This may be a good article to read.\nThe article shows how to get the user information in a Spring application, starting with the common static access mechanism, followed by several better ways to inject the principal.</p>\n<p><a href=\"https://www.baeldung.com/get-user-in-spring-security\" rel=\"nofollow noreferrer\">https://www.baeldung.com/get-user-in-spring-security</a></p>\n"
        },
        {
          "answer_id": 66499732,
          "body": "<p>you need to downcast principal to its implemented class, then you can extract context object which you set in securityContext.</p>\n<pre><code> AbstractAuthenticationToken a = (AbstractAuthenticationToken) request.getUserPrincipal();\n UserContext context = (UserContext) a.getPrincipal();\n</code></pre>\n"
        },
        {
          "answer_id": 66768445,
          "body": "<p>I solved this problem by using <code>SecurityContextHolder</code> and <code>Authentication.getName()</code> :</p>\n<pre><code>import org.springframework.security.core.Authentication;\nimport org.springframework.security.core.context.SecurityContextHolder;\n        \nAuthentication authentication = SecurityContextHolder.getContext().getAuthentication();\n\nString login = authentication.getName();\n\nUser user = usersService.getUserByLogin(login);\n</code></pre>\n"
        },
        {
          "answer_id": 69807650,
          "body": "<p>This solution worked for me with spring boot 2.5</p>\n<p>First, define a <code>User</code> <code>Principal</code> class</p>\n<pre><code>public class UserPrincipal implements UserDetails {\n\n    private static final long serialVersionUID = 1L;\n    private User user;\n\n    public User getUser() {\n        return user;\n    }\n\n    public void setUser(User user) {\n        this.user = user;\n    }\n    // other methods ....\n}\n</code></pre>\n<p>Second, define a <code>User</code> class:</p>\n<pre><code>public class User {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    Long id;\n    String username;\n    String password;\n    //getters ans setters ...\n}\n</code></pre>\n<p>Third, define a <code>UserAuth</code> class:</p>\n<pre><code> public class UserAuth {\n    \n     public String getUsername()\n     {\n         UserPrincipal principal \n             = (UserPrincipal)SecurityContextHolder\n                 .getContext()\n                 .getAuthentication()\n                 .getPrincipal();\n         return principal.getUser().getUsername();\n    }\n}\n</code></pre>\n<p>Finally, you can auto-wire the <code>UserAuth</code> class as needed.</p>\n"
        },
        {
          "answer_id": 70653961,
          "body": "<p>So almost every answer seems correct and feasible, kudos to all contributors, but to remove boilerplate code, could be useful and easy:\nmake an Interface and its implementation that will contain all utility methods, and then simply <code>@Autowire</code> that.</p>\n<pre><code>public interface AuthHelper {\n    Authentication getAuthentication();\n    public String getName();\n    public UserDetails getUserDetails()\n}\n@Component\npublic class AuthHelperImpl implements AuthHelper {\n\n    @Override\n    public Authentication getAuthentication() {\n        return SecurityContextHolder.getContext().getAuthentication();\n    }\n    public String getName() {\n        return getAuthentication().getName();\n    }\n    public UserDetails getUserDetails() {\n        return (UserDetails) getAuthentication().getPrincipal();\n    }\n//and more utilities you need\n//you can also cast with UserPrincipal\n}\n</code></pre>\n<p>now, at controllers:</p>\n<pre><code>@Controller\npublic class DemoController {\n    @Autowired\n    private AuthHelper authHelper;\n\n    @RequestMapping(value = &quot;/username&quot;, method = RequestMethod.GET)\n    @ResponseBody\n    public String currentUserNameSimple() {\n        return authHelper.getName;\n    }\n}\n</code></pre>\n"
        },
        {
          "answer_id": 76296548,
          "body": "<pre><code>public class User implements UserDetails {\n\n    private String firstname;\n    private String lastname;\n\n}\n</code></pre>\n<p>assuming you have a custom user implementing UserDetails class</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/user&quot;)\nclass UsersController {\n\n    @GetMapping\n    public User fetchUser(@AuthenticationPrincipal User user) {\n        return user;\n    }\n}\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684604731,
      "question_id": 32052076,
      "body": "<p>I am using Spring security version 3.1.4.RELEASE.\nHow can I access the current logged in user object?</p>\n<pre><code>SecurityContextHolder.getContext().getAuthentication().getPrincipal()\n</code></pre>\n<p>returns user name, not user object. So how can I use the returned Username and get the UserDetails object?</p>\n<p>I have tried the following code:</p>\n<pre><code>public UserDetails getLoggedInUser(){\n\n    final Authentication auth = SecurityContextHolder.getContext().getAuthentication();\n    if (auth != null &amp;&amp; auth.isAuthenticated() &amp;&amp; !(auth instanceof AnonymousAuthenticationToken))\n    {\n        if(auth.getDetails() !=null)\n            System.out.println(auth.getDetails().getClass());\n        if( auth.getDetails() instanceof UserDetails)\n        {\n            System.out.println(&quot;UserDetails&quot;);\n        }\n        else\n        {\n            System.out.println(&quot;!UserDetails&quot;);\n        }\n    }\n    return null;\n}\n</code></pre>\n<p>Following is the result:</p>\n<pre><code>[2015-08-17 19:44:46.738] INFO  http-bio-8443-exec-423   System.out    class org.springframework.security.web.authentication.WebAuthenticationDetails \n[2015-08-17 19:44:46.738] INFO  http-bio-8443-exec-423   System.out    !UserDetails\n</code></pre>\n<p>AuthenticationFilter class as follows:</p>\n<pre><code>public class CustomUsernamePasswordAuthenticationFilter extends AbstractAuthenticationProcessingFilter {\n    public static final String SPRING_SECURITY_FORM_USERNAME_KEY = &quot;j_username&quot;;\n    public static final String SPRING_SECURITY_FORM_PASSWORD_KEY = &quot;j_password&quot;;\n    public static final String SPRING_SECURITY_LAST_USERNAME_KEY = &quot;SPRING_SECURITY_LAST_USERNAME&quot;;\n    private String usernameParameter = SPRING_SECURITY_FORM_USERNAME_KEY;\n    private String passwordParameter = SPRING_SECURITY_FORM_PASSWORD_KEY;\n    private boolean postOnly = true;\n\n    public CustomUsernamePasswordAuthenticationFilter() {\n        super(&quot;/j_spring_security_check&quot;);\n    }\n\n    public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException {\n        if (postOnly &amp;&amp; !request.getMethod().equals(&quot;POST&quot;)) {\n            throw new AuthenticationServiceException(&quot;Authentication method not supported: &quot; + request.getMethod());\n        }\n\n        String username = obtainUsername(request);\n        String password = obtainPassword(request);\n        if (username == null) {\n            username = &quot;&quot;;\n        }\n        if (password == null) {\n            password = &quot;&quot;;\n        }\n        username = username.trim();\n        UsernamePasswordAuthenticationToken authRequest = new UsernamePasswordAuthenticationToken(username, password);\n\n        // Allow subclasses to set the &quot;details&quot; property\n        setDetails(request, authRequest);\n        if(this.getAuthenticationManager()==null){\n            logger.info(&quot;Authentication manager is null.&quot;);\n        } else {\n            logger.info(&quot;Authentication manager was &quot;+this.getAuthenticationManager().getClass().getName()); \n        }\n        return this.getAuthenticationManager().authenticate(authRequest);\n    }\n\n    protected String obtainPassword(HttpServletRequest request) {\n        return request.getParameter(passwordParameter);\n    }\n\n    protected String obtainUsername(HttpServletRequest request) {\n        return request.getParameter(usernameParameter);\n    }\n\n    protected void setDetails(HttpServletRequest request, UsernamePasswordAuthenticationToken authRequest) {\n        authRequest.setDetails(authenticationDetailsSource.buildDetails(request));\n    }\n\n    public void setUsernameParameter(String usernameParameter) {\n        this.usernameParameter = usernameParameter;\n    }\n\n    public void setPasswordParameter(String passwordParameter) {\n        this.passwordParameter = passwordParameter;\n    }\n\n    public void setPostOnly(boolean postOnly) {\n        this.postOnly = postOnly;\n    }\n\n    public final String getUsernameParameter() {\n        return usernameParameter;\n    }\n\n    public final String getPasswordParameter() {\n        return passwordParameter;\n    }\n}\n</code></pre>\n<p>AuthenticationProvider as follows:</p>\n<pre><code>@Component\npublic class CustomAuthenticationProvider extends AbstractUserDetailsAuthenticationProvider {\n    private MyUserDetailsService userDetailsService;\n\n    public MyUserDetailsService getUserDetailsService() {\n        return userDetailsService;\n    }\n\n    public void setUserDetailsService(MyUserDetailsService userDetailsService) {\n        this.userDetailsService = userDetailsService;\n    }\n\n    @Override\n    protected void additionalAuthenticationChecks(UserDetails arg0,\n            UsernamePasswordAuthenticationToken arg1)\n            throws AuthenticationException {\n\n    }\n\n    @Override\n    protected UserDetails retrieveUser(String arg0,\n            UsernamePasswordAuthenticationToken arg1)\n            throws AuthenticationException {\n        return userDetailsService.loadUserByUsername(arg0);\n    }\n}\n</code></pre>\n<p>UserDetails class as follows:</p>\n<pre><code>    public class MyUserDetailsService implements UserDetailsService {       \n    private final Map&lt;String, UserDetails&gt; usersList;\n    \n    public MyUserDetailsService() {\n        Collection&lt;GrantedAuthority&gt; authorityList;\n        final SimpleGrantedAuthority supervisorAuthority = new SimpleGrantedAuthority(&quot;supervisor&quot;);\n        final SimpleGrantedAuthority userAuthority = new SimpleGrantedAuthority(&quot;user&quot;);\n        usersList = new TreeMap&lt;String, UserDetails&gt;();\n\n        authorityList = new ArrayList&lt;GrantedAuthority&gt;();\n        authorityList.add(supervisorAuthority);\n        authorityList.add(userAuthority);\n        usersList.put(&quot;admin&quot;, new User(&quot;admin&quot;, &quot;admin&quot;, authorityList));\n\n        authorityList = new ArrayList&lt;GrantedAuthority&gt;();\n        authorityList.add(userAuthority);\n        usersList.put(&quot;peter&quot;, new User(&quot;peter&quot;, &quot;password123&quot;, authorityList));\n\n        //probably don't use this in production\n        for(Map.Entry&lt;String, UserDetails&gt; user : usersList.entrySet()){\n            logger.info(user.getValue().toString());\n        }\n    }\n\n    @Override\n    public UserDetails loadUserByUsername(String username)throws UsernameNotFoundException {\n        UserDetails ud = usersList.get(username);\n        if (ud != null) {\n            logger.info(&quot;loadUserByUsername: found match, returning &quot;\n                    + ud.getUsername() + &quot;:&quot; + ud.getPassword() + &quot;:&quot;\n                    + ud.getAuthorities().toString());\n            return new User(ud.getUsername(), ud.getPassword(),\n                    ud.getAuthorities());\n        }\n\n        logger.info(&quot;loadUserByUsername: did not find match, throwing UsernameNotFoundException&quot;);\n        throw new UsernameNotFoundException(username);\n    }\n}\n</code></pre>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134542237,
          "body": "All code and errors needs to be in the question, not external links, please."
        },
        {
          "comment_id": 134542276,
          "body": "@OldProgrammer but code is big enough"
        },
        {
          "comment_id": 134542310,
          "body": "Is it? It is debatable. Maybe it is not appropriate for Stackoverlow if you can&#39;t show the code"
        },
        {
          "comment_id": 134542314,
          "body": "then write a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"
        },
        {
          "comment_id": 134542320,
          "body": "@OldProgrammer i write  minimal reproducible example, but class still big enough"
        },
        {
          "comment_id": 134542489,
          "body": "Post the code here, please, not on pastebin."
        },
        {
          "comment_id": 134542561,
          "body": "@HovercraftFullOfEels  edited"
        },
        {
          "comment_id": 134542564,
          "body": "@Reilas  edited post"
        },
        {
          "comment_id": 134542566,
          "body": "@OldProgrammer edited code"
        }
      ],
      "last_activity_date": 1684603631,
      "question_id": 76296247,
      "body": "<pre><code>\npublic abstract sealed class ServerMessage implements Serializable\n        permits ServerMessage.NewMessage {\n    public static final XStream xStream = new XStream();\n    private final ErrorType errorType;\n \n    protected ServerMessage(ErrorType errorType) {\n        this.errorType = errorType;\n    }\n \n \n    public ErrorType getErrorType() {\n        return errorType;\n    }\n \n    public enum ErrorType {\n        ERROR, SUCCESS\n    }\n\n\n    public static final class NewMessage extends ServerMessage {\n        private final TextMessage message;\n \n        public NewMessage(TextMessage message) {\n            super(ErrorType.SUCCESS);\n            this.message = message;\n        }\n \n        public TextMessage getMessage() {\n            return message;\n        }\n    }\n \n}\n</code></pre>\n<p>There is such a sealed class\nHow to serialize and deserialize such a class via Jackson?\nAlso for the root tag to be equal to the ErrorType group in xml format\nJust tried\n<code>xmlMapper.writeValueAsString(msg); var xmlString = &quot;1asdasd&quot;; ServerMessage msg = xmlMapper.readValue(xmlString, ServerMessage.class);</code></p>\n<p>Such an errorjackson.databind.exc.MismatchedInputException: Cannot deserialize value of type <code>org.example.ServerMessage$ErrorType</code> from Object value (token <code>JsonToken.FIELD_NAME</code>)</p>\n<p>expect correct deserialize and custom root tag based error type field</p>\n"
    },
    {
      "last_activity_date": 1684603573,
      "question_id": 76296503,
      "body": "<p>I am trying to make an event driven database and application interaction. Basically what I want is the database to tell the application that something has changed in the database, and I'll implement an action listener in my application.</p>\n<p>I want the database to generate an exception after a 'student' has been inserted, but the exception is generated before the data for the new 'student' is actually inserted, so before the statement.executeUpdate(newStudent) method. Making the insertion unsuccessful. Here is my SQL code:</p>\n<pre><code>DELIMITER $$\nCREATE TRIGGER after_insert_trigger\nAFTER INSERT ON student\nFOR EACH ROW\nBEGIN\n    -- Trigger logic here:\n    -- Perform actions or operations when the trigger fires\n    SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'New data added to student table';\nEND$$\nDELIMITER ;\n</code></pre>\n<p>java code:</p>\n<pre><code>public void addStudent() {\n    try {\n        statement = connection.createStatement();\n\n        int id = 3;\n        String name = &quot;Johnny&quot;;\n        int age = 21;\n\n        String newStudent = &quot;INSERT INTO student (id, name, age) VALUES (&quot; + id + &quot;, '&quot; + name + &quot;', &quot; + age + &quot;)&quot;;\n\n        statement.executeUpdate(newStudent);\n        System.out.println(name + &quot; inserted&quot;);\n\n        statement.close();\n    } catch (Exception e) {\n        handleException(e);\n    }\n}\n</code></pre>\n<p>Also are there any better ways to implement an event driven database-application communication model?</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 104854821,
          "body": "as you said just add @JsonInclude(Include.NON_NULL) at the DTO level."
        },
        {
          "comment_id": 104908079,
          "body": "@dassum adding  <code>@JsonInclude(JsonInclude.Include.NON_NULL)</code> does nothing"
        },
        {
          "comment_id": 104912673,
          "body": "can you share your DTO? Where did you put @JsonInclude(Include.NON_NULL)?"
        },
        {
          "comment_id": 104914313,
          "body": "@Lemmy I have updated the question"
        },
        {
          "comment_id": 104914707,
          "body": "<code>but where condition 2 is not met empty object fields are returned.</code> What is condition 2? There are no empty objects here."
        },
        {
          "comment_id": 104914822,
          "body": "fields &quot;creditId&quot; and after are from different microservice. Within my controller (which as of yet are not displayed) contains optional fields, where you are able to provide parameters on which filtered result will be given. So if you enter parameters creditMode(profileCredit) 0 and username(profile) you should be returned data depending on what you requested @ChristopherSchneider"
        },
        {
          "comment_id": 104914890,
          "body": "<code>if (theCreditDto != null)             theDTO.setCredit(theCreditDto);         else if (theCreditDto == null){             theDTO = null;         }</code> To get null I added this @ChristopherSchneider"
        },
        {
          "comment_id": 104915045,
          "body": "Again, there are no empty objects here. There are <code>int</code> values that are zero, if that&#39;s what you&#39;re talking about. <code>int</code> is not an object. <code>0</code> is the default value on an <code>int</code>. If these values are nullable, they need to be <code>Integer</code>."
        },
        {
          "comment_id": 104915444,
          "body": "I have updated from abstract <code>double</code> and primitive <code>int</code> to <code>Double</code> and <code>Integer</code>, now those fields don&#39;t show up whatsoever if they don&#39;t meet the condition. Well spotted @ChristopherSchneider"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 104948402,
              "body": "Thanks! Helped a lot"
            }
          ],
          "answer_id": 59377886,
          "body": "<p>Your \"objects\" which are elements can't be directly removed from a Page. What you can do is, get the content from the page, that will be a list and then remove the the element from the list according to your condition , then create a new Page with the data fields required for a Page.</p>\n\n<p>Instead of </p>\n\n<pre><code>    @Override\npublic Page&lt;ProfileCreditDTO&gt; findProfileBySelectedParameters(String username, Integer gender, Integer profileType, Integer orientation, Boolean online, Double profileCredit, Integer creditMode, Double creditTotal, Pageable pageable) {\n    Page&lt;Profile&gt; searchData= profileRepository.findByAllParameters(username, gender, profileType, orientation, online, pageable);\n    Page&lt;ProfileCreditDTO&gt; searchProfileData=null;\n    if(searchData != null)\n        searchProfileData = searchData.map(x -&gt; this.convertProfileToProfileCreditDTO(x, profileCredit, creditMode, creditTotal));\n    return searchProfileData;\n}\n</code></pre>\n\n<p>try</p>\n\n<pre><code>   @Override\npublic Page&lt;ProfileCreditDTO&gt; findProfileBySelectedParameters(String username, Integer gender, Integer profileType, Integer orientation, Boolean online, Double profileCredit, Integer creditMode, Double creditTotal, Pageable pageable) {\n    Page&lt;Profile&gt; searchData= profileRepository.findByAllParameters(username, gender, profileType, orientation, online, pageable);\n    Page&lt;ProfileCreditDTO&gt; searchProfileData=null;\n    if(searchData != null)\n        searchProfileData = searchData.map(x -&gt; this.convertProfileToProfileCreditDTO(x, profileCredit, creditMode, creditTotal));\n\n    List modifiedAppList = searchProfileData.getContent().stream().filter(v -&gt; v !=null).collect(Collectors.toList()); //Will filter your search result and put it into a list\n\n    Page&lt;ProfileCreditDTO&gt; filteredList = new PageImpl&lt;&gt;(modifiedAppList, new PageRequest(0, searchProfileData.getSize()), searchProfileData.getTotalElements()); //Will put your filtered list back into page\n\n    return  filteredList; //Returns filtered result\n\n}\n</code></pre>\n\n<p>Got the answer for this question from <a href=\"https://stackoverflow.com/questions/51401929/spring-data-rest-how-to-remove-an-element-from-a-page\">Spring Data Rest - How to remove an element from a Page?</a> only amended the code and bit of the wording, as answer was already spot on ;)</p>\n"
        },
        {
          "answer_id": 67937527,
          "body": "<p><strong>add this</strong></p>\n<pre><code>@JsonInclude(JsonInclude.Include.NON_NULL)\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684603544,
      "question_id": 59326842,
      "body": "<p>I have a Java implementation Override method which returns DTO object results from 2 microservices depending on entered parameters.</p>\n<p>I am able to get filtered search results however where the 2nd service conditions were not met I receive 'null' I would want to achieve a results where null objects are not returned whatsoever.How am I able to return results which meet all specified parameters?</p>\n<p>Below I have provided screenshot of response I receive using &quot;Swagger&quot; and the code snipped which does all the magic.</p>\n<p>Would I require to use ObjectMapper or something like <code>@JsonInclude(Include.NON_NULL)</code>, however can I use it within service implantation and with DTO objects?</p>\n<p>Any further suggestions or idea bouncing would be appreciated.</p>\n<p>I have further build on my previous question <a href=\"https://stackoverflow.com/questions/59304182/java-pass-variable-into-mapped-dto-method\">Java pass variable into mapped DTO method?</a></p>\n<p>Swagger response:</p>\n<p><a href=\"https://i.stack.imgur.com/9dS2m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9dS2m.png\" alt=\"enter image description here\" /></a></p>\n<p>Code snippet:</p>\n<pre><code>    @Override\npublic Page&lt;ProfileCreditDTO&gt; findProfileBySelectedParameters(String username, Integer gender, Integer profileType, Integer orientation, Boolean online, Double profileCredit, Integer creditMode, Double creditTotal, Pageable pageable) {\n    Page&lt;Profile&gt; searchData= profileRepository.findByAllParameters(username, gender, profileType, orientation, online, pageable);\n    Page&lt;ProfileCreditDTO&gt; searchProfileData=null;\n    if(searchData != null)\n        searchProfileData = searchData.map(x -&gt; this.convertProfileToProfileCreditDTO(x, profileCredit, creditMode, creditTotal));\n    return searchProfileData;\n}\n\n\npublic ProfileCreditDTO convertProfileToProfileCreditDTO(final Profile theProfile, Double profileCredit, Integer creditMode, Double creditTotal)  {\n    if(theProfile == null)\n        return null;\n    ProfileCreditDTO theDTO= new ProfileCreditDTO();\n    theDTO.setProfile(theProfile);\n    CreditDTO theCreditDto = profileCreditClient.findClientByProfileId(theProfile.getId(), profileCredit, creditMode, creditTotal);\n    log.error(String.valueOf(theCreditDto));\n    if (theCreditDto != null)\n        theDTO.setCredit(theCreditDto);\n    else {\n        return null;\n    }\n\n    return theDTO;\n}\n</code></pre>\n<p><strong>Updated</strong></p>\n<p>I have tried adding <code>@JsonInclude(Include.NON_NULL)</code> into ProfileCredit DTO still nothing, also have added same thing into CreditDTO.</p>\n<p>ProfileCredit DTO:</p>\n<pre><code> @Data\n@AllArgsConstructor\n@NoArgsConstructor\n@ToString\n@JsonInclude(JsonInclude.Include.NON_NULL)\npublic class ProfileCreditDTO {\n    // profile fields\n    private Long profileId;\n    @Size(min = 2, max = 50)\n    private String username;\n    private Integer gender;\n    private Integer profileType;\n    private Integer orientation;\n    private boolean online;\n\n\n    // Credit fields\n    private Long creditId;\n    @Column(unique = true)\n    private Double profileCredit;  //X\n    private Integer creditMode;\n    private Integer creditCheck;\nprivate Double creditTotal;\n\n/**\n * set the profile derived data\n * @param profile\n */\npublic void setProfile(final Profile profile){\n    this.setProfileId(profile.getId());\n    this.setUsername(profile.getUsername());\n    this.setGender(profile.getGender());\n    this.setProfileType(profile.getProfileType());\n    this.setOrientation(profile.getOrientation());\n    this.setOnline(profile.isOnline());\n}\n\n/**\n * Set the credit aspect\n * @param credit\n */\npublic void setCredit(final CreditDTO credit){\n    this.setCreditId(credit.getId());\n    this.setProfileId(credit.getProfileId());\n    this.setProfileCredit(credit.getProfileCredit());\n    this.setCreditMode(credit.getCreditMode());\n    this.setCreditTotal(credit.getCreditTotal());\n\n}\n</code></pre>\n<p>When I don't specify <code>return null;</code> within implementation, the response looks like this. As you can see all objects gets returned which meets condition 1 but where condition 2 is not met empty object fields are returned.</p>\n<p><a href=\"https://i.stack.imgur.com/JZXfK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JZXfK.png\" alt=\"enter image description here\" /></a></p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134542506,
          "body": "Don&#39;t use images for text information, which is everything you shared"
        },
        {
          "comment_id": 134542610,
          "body": "Please read <a href=\"//meta.stackoverflow.com/q/285551\">Why should I not upload images of code/data/errors.</a> ... and replace the images in the question with text.  (If you don&#39;t fix this, your question is liable to be closed.)"
        }
      ],
      "answers": [
        {
          "answer_id": 76296499,
          "body": "<p>You might need to start your springboot application first. If you haven't started it, look for a tutorial on how to run springboot applications and follow that then apply it to your case.</p>\n"
        }
      ],
      "last_activity_date": 1684603517,
      "question_id": 76296471,
      "body": "<p><strong>Apache conf:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/VTWuh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VTWuh.png\" alt=\"Apache conf\" /></a></p>\n<p><strong>Error Logs from Apache:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/Ay91o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ay91o.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>etc/hosts:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/h1Ioc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h1Ioc.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>proyect path:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/gfee1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gfee1.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>proyect structure:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/dQHYi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dQHYi.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>app.yaml from proyect:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/RWkX2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RWkX2.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>pom.xml from proyect:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/AUXJp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AUXJp.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/xLqG9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xLqG9.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/BadJX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BadJX.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>resources from my proyect:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/c1Mrl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c1Mrl.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>application.properties:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/VyM9N.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VyM9N.png\" alt=\"enter image description here\" /></a></p>\n<p><em><strong>Error:</strong></em></p>\n<p><a href=\"https://i.stack.imgur.com/btqxP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/btqxP.png\" alt=\"enter image description here\" /></a></p>\n<p><em><strong>Error on web:</strong></em></p>\n<p><a href=\"https://i.stack.imgur.com/r33F7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r33F7.png\" alt=\"enter image description here\" /></a></p>\n<p>(I am using thymeleaf in html, and my html files are in src/main/resources/templates)</p>\n<p>(I am using mysql database from the cloud, i already verified that the problem does not come from there)</p>\n<p>(My css files are in src/main/resources/static)</p>\n<p>(I am using apache2)</p>\n<p>(i installed maven)</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 64431249,
          "body": "Shouldn&#39;t that be: <code>for(Iterator&lt;DifferentObject&gt; it=HP.get(k).iterator();it.hasNext();){</code>? What is iterator in this context?"
        },
        {
          "comment_id": 64431772,
          "body": "an ArrayList&lt;&gt; Iterator? of a custom object, is a truck class not much in it, id, capacity."
        },
        {
          "comment_id": 64431924,
          "body": "You&#39;ve got a simple typographical error in your for loop as noted in my comment above."
        },
        {
          "comment_id": 64431933,
          "body": "It should be <code>it.hasNext()</code> not <code>iterator.hasNext()</code>"
        },
        {
          "comment_id": 64447573,
          "body": "ah yes, that is a error i did coping the code here, is not present on the code itself, the class is quite large and theres a lot of context nessesary to understant the hole class, but my point is, that really is the same code right?"
        },
        {
          "comment_id": 64447845,
          "body": "Sorry for responding to my self, i think i found the error but i still cant make much sense of it."
        }
      ],
      "last_activity_date": 1684603272,
      "question_id": 38517447,
      "body": "<p>So i was working on a simple Java code</p>\n\n<p>i have this: </p>\n\n<pre><code>HashMap&lt;ObjectKey,ArrayList&lt;DifferentObject&gt;&gt; HP;\n</code></pre>\n\n<p>So i used it how i wanted and it worked heres the first code:</p>\n\n<pre><code>FillHashMap(HP);\nfor(ObjectKey k:HP.keySet()){\n    ArrayList&lt;DifferentObject&gt; temp=HP.get(k);\n    for(Iterator&lt;DifferentObject&gt; it=temp.iterator(); it.hasNext();){\n        if(it.hasNext()){\n            DifferentObject OB=iterator.next();\n            if(OB.Data&lt;OtherData &amp;&amp; OB.Time&lt;CurrentTime){\n                it.remove();\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>And it works like a charm, so i went out to clean my code a bit make it more presentable and now it looks like this:</p>\n\n<pre><code>FillHashMap(HP);\nfor(Object k:HP.keySet()){\n  for(Iterator&lt;DifferentObject&gt; it=HP.get(k).iterator();it.hasNext();){\n      DifferentObject OB=it.next(); (*)\n      if(Condition(OB)){\n           it.remove();\n      }\n}      \n}\n</code></pre>\n\n<p>And then i get the ConcurrentModificationException on the line with the (*)\nThe other method that changes HP is FillHashMap and its already over by the time it reaches the for-each cycle, it really is the same code right?</p>\n\n<p>Then why is giving me the error now?</p>\n\n<p>Any remote help or suggestion would be apreciated. Thank you.</p>\n\n<p>EDIT: So i went back to FillHashMap method:</p>\n\n<pre><code>FillHashMap(HashMap HP){\n   Differentobject x=new DifferentObject(); \n   for(iterator over hashmap){\n       ArrayList&lt;Different Object&gt; temp= HP.get(k);\n       temp.SetSomething(int a);\n       temp.add(x)\n   }\n</code></pre>\n\n<p>}</p>\n\n<p>if i comment the temp.add the error is gone, offcourse the program is not doing what is suppoused to do anymore, but at least now i now where it is.</p>\n\n<p>By the time the loop of the 2 bit of code executes, FillHashMap should be over, but i guess its not.</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 68817296,
          "body": "can you show the input format ?"
        },
        {
          "comment_id": 68817300,
          "body": "Add <code>scan.useDelimiter(System.getProperty(&quot;line.separator&quot;));</code>"
        },
        {
          "comment_id": 68817371,
          "body": "my recommendation would be to just make one call to  String p = scan.nextLine(); for each line. Then analyze the string and break it into the components you need."
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 68817491,
              "body": "and why would I do that ? There is a downvote on this answer as well."
            },
            {
              "comment_id": 68817525,
              "body": "whoever is downvoting please leave comments as well. Thanks"
            },
            {
              "comment_id": 68817648,
              "body": "exactly, whoever is downvoting please leave comments."
            },
            {
              "comment_id": 68818335,
              "body": "I was about to up vote this to save your rep, but I just tried testing your code and it crashes anytime you enter an input. Also, I was not the one who down voted it"
            },
            {
              "comment_id": 68818779,
              "body": "@holycatcrusher well I have mentioned the input format before the code, if it&#39;s in that format, it won&#39;t crash."
            },
            {
              "comment_id": 68818977,
              "body": "true. I actually think I may have accidentally run the other guys code twice. Saving up vote granted, lol. Not sure who is doing the down voting"
            }
          ],
          "answer_id": 40797848,
          "body": "<p>You should use <code>nextLine</code> and then convert it to your expected types.</p>\n\n<p>In above scenario read the line then cast it to an integer, because <code>next</code> and <code>nextInt</code> just read the input before a whitespace occurred. So when you are calling <code>nextInt</code> it will just consume the number and leave the <code>newLine</code> character which will be consumed in <code>nextLine</code>.</p>\n\n<p>From the question, it looks like this is how you are going to read inputs input.</p>\n\n<ol>\n<li>First integer.</li>\n<li>Second a string line. </li>\n<li>Third line will have two words separated by space.</li>\n</ol>\n\n<p>This is what your code should be.</p>\n\n<pre><code>    Scanner scan = new Scanner(System.in);\n    int x = Integer.parseInt(scan.nextLine()); //read line and then cast to integer\n    System.out.println(\"p\");\n    String p = scan.nextLine();\n    System.out.println(\"q m\");\n    String[] linesParts = scan.nextLine().split(\" \"); // read the whole line and then split it.\n    String q = linesParts[0];\n    String m = linesParts[1];\n</code></pre>\n"
        },
        {
          "answer_id": 40798170,
          "body": "<p>This is the solution to the problem I'd use. The above comment by Tahir Hussain Mirwould likely be the cause of the problem </p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Scanner;\n\npublic class app {\npublic static void main(String[] args) {\n    // declare scanner\n    Scanner scan = new Scanner(System.in);\n\n    // what ever number you need, it could be calculated\n    int numberOfInputLines = 3;\n\n    // the list of the lines entered\n    ArrayList&lt;String[]&gt; list = new&lt;String[]&gt; ArrayList();\n\n    // add each line to the list\n    for (int i = 0; i &lt; numberOfInputLines; i++) {\n        // get entire line as a single string\n        String input = scan.nextLine();\n        // split the line into tokens, and store the array in the array list\n        String[] result = input.split(\"\\\\s\");\n        list.add(result);\n\n    }\n\n    // iterate through each line\n    for (int i = 0; i &lt; list.size(); i++) {\n\n        // iterate through the line\n        for (int j = 0; j &lt; list.get(i).length; j++) {\n            if (isInteger(list.get(i)[j]) == true) {\n                // do what you want if the input is an int\n                //to show it works\n                System.out.println(\"int: \" + list.get(i)[j]);\n\n            } else {\n                // do what you want if a the token inputed is a string\n                //to show it works\n                System.out.println(\"String: \" + list.get(i)[j]);\n\n            }\n\n        }\n\n    }\n\n}\n\n// greasy way to check if is an int\nprivate static boolean isInteger(String s) {\n    try {\n        Integer.parseInt(s);\n    } catch (NumberFormatException e) {\n        return false;\n    } catch (NullPointerException e) {\n        return false;\n    }\n    // only got here if we didn't return false\n    return true;\n}\n\n}\n</code></pre>\n"
        },
        {
          "answer_id": 40798201,
          "body": "<p>Before using them, try to check the doc's.\n<br>\n<b>Reason :</b><br></p>\n\n<blockquote>\n  <p><b>Scanner.nextLine :</b>  The java.util.Scanner.nextLine() method advances this scanner past the current line and returns the input that was skipped. This method returns the rest of the current line, excluding any line separator at the end. The position is set to the beginning of the next line.Since this method continues to search through the input looking for a line separator, it may buffer all of the input searching for the line to skip if no line separators are present.</p>\n</blockquote>\n\n<p>While, this is not Applicable to <b>Scanner.nextInt</b>\n<br></p>\n\n<p>Hence, the Scanner.nextInt method does not consume the last newline character of your input, and thus that newline is consumed in the next call to Scanner.nextLine.</p>\n\n<p>Basic <b>Solution</b> would be to use blank Scanner.nextLine after Scanner.nextInt just to consume rest of that line including newline.</p>\n\n<p><b>For Example</b></p>\n\n<pre><code>int myVal1 = input.nextInt();\ninput.nextLine(); \nString myStr1 = input.nextLine();\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684603201,
      "question_id": 40797756,
      "body": "<p>When I use scan.nextLine(), input boxes don't work properly. If it's scan.next() ,works perfectly.But Why? Ain't I supposed to use scan.nextLine() for string?  </p>\n\n<pre><code>import java.util.Scanner;\npublic class Test{\npublic static void main(String[] args){\n\n    Scanner scan = new Scanner(System.in);\n    int x = scan.nextInt();\n    System.out.println(\"p\");\n    String p = scan.nextLine();\n    System.out.println(\"q\");\n    String q = scan.next();\n    System.out.println(\"m\");\n    String m = scan.next();\n    }  \n}\n</code></pre>\n"
    },
    {
      "answers": [
        {
          "answer_id": 41777668,
          "body": "<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html\" rel=\"nofollow noreferrer\">Scanner-API</a> says </p>\n\n<blockquote>\n  <p>The next() and hasNext() methods and their primitive-type companion\n  methods (such as nextInt() and hasNextInt()) first skip any input that\n  matches the delimiter pattern, and then attempt to return the next\n  token. Both hasNext and next methods may block waiting for further\n  input. Whether a hasNext method blocks has no connection to whether or\n  not its associated next method will block.</p>\n</blockquote>\n\n<p>So you will step into your while-body when one line has been entered.</p>\n\n<p>Write something like</p>\n\n<pre><code>String next = \"\";\nwhile (!next.equals(\"quit\")) {\n    System.out.println(\"Type anything other than quit to keep inputting. \");\n    next = sc.nextLine();\n}\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684603146,
      "question_id": 41777613,
      "body": "<p>I realize that hasNext() is used to check if there is going to be a next input, but my hasNext prompts for an input for some reason. This is my code:</p>\n\n<pre><code>Scanner sc = new Scanner(System.in);\n\nwhile (!sc.hasNext(\"quit\")) {\n    System.out.println(\"Type anything other than quit to keep inputting. \");\n    sc.nextLine();\n}\n</code></pre>\n\n<p>What my program does right off the bat is it makes me type something (before the prompt to type), and then the prompt to \"type anything other than quit\" pops up and the program works properly. However, I don't want that first blank input. Why does this pop up and how do I fix it? </p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 105415306,
          "body": "Did you stop the existing gradle daemons after modifying <code>gradle.properties</code>?"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 107396403,
              "body": "If it doesn&#39;t work, also try adding <code>android:largeHeap=&quot;true&quot;</code> in <code>&lt;application</code> tag in <code>AndroidManifes.xml</code>"
            },
            {
              "comment_id": 109939669,
              "body": "this was great when upgrading Gradle while going for Android Studio 4.0, thanks a bunch!"
            },
            {
              "comment_id": 127431213,
              "body": "I have added the official document link so that you can know why change the config like this. @JCraine"
            },
            {
              "comment_id": 127431233,
              "body": "@dolphin Thank you Dolphin! I deleted my comment to edit/resubmit right when you replied. I appreciate the follow up :)"
            }
          ],
          "answer_id": 59628176,
          "body": "<p>I add <code>gradle.properties</code> file in my root project dir,and add this config:</p>\n<pre><code>org.gradle.jvmargs=-Xmx4096M\n</code></pre>\n<p>works. From the error message we can know the Daemon JVM spcace exhausted. This is the Gradle <a href=\"https://docs.gradle.org/current/userguide/build_environment.html\" rel=\"nofollow noreferrer\">official docuemnt</a> about this config:</p>\n<blockquote>\n<p>Specifies the JVM arguments used for the Gradle Daemon. The setting is\nparticularly useful for configuring JVM memory settings for build\nperformance. This does not affect the JVM settings for the Gradle\nclient VM. The default is -Xmx512m &quot;-XX:MaxMetaspaceSize=256m&quot;.</p>\n</blockquote>\n"
        },
        {
          "answer_id": 66759059,
          "body": "<p>Maybe it will help other users as well.</p>\n<p>I received, somewhat, this error when I did a <code>gradlew clean</code> on the <code>android</code> directory and forgot to go back with <code>cd ..</code> and I run the command of starting the app inside <code>android</code> directory when it shouldn't.</p>\n<p>The solution is to go back from <code>android</code> directory and run the start command in the root directory of your app.</p>\n"
        },
        {
          "answer_id": 74143183,
          "body": "<p>Note that if you can't modify the <code>gradle.properties</code> file for whatever reason (e.g. I modified a <code>gitlab-ci.yml</code> file's script for a CICD pipeline issue that couldn't be reproduced locally), you can use a command line flag (with a <code>-D</code> prefix) as referenced in the &quot;official document&quot; above by @Dolphin.</p>\n<pre><code>-Dorg.gradle.jvmargs=-Xmx4096M\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684602855,
      "question_id": 59624003,
      "body": "<p>When I build multi module java project using gradle 6.0,when I add >30 modules.Throw this error:</p>\n\n<pre><code>Gradle Daemon started in 2 s 267 ms\n\n&gt; Configure project :soa-misc\n\"/opt/dabai/tools/jdk1.8.0_211/jre/lib/ext/\"\nnull\nExpiring Daemon because JVM heap space is exhausted\nDaemon will be stopped at the end of the build after running out of JVM memory\nExpiring Daemon because JVM heap space is exhausted\nExpiring Daemon because JVM heap space is exhausted\nExpiring Daemon because JVM heap space is exhausted\nExpiring Daemon because JVM heap space is exhausted\nExpiring Daemon because JVM heap space is exhausted\nExpiring Daemon because JVM heap space is exhausted\nExpiring Daemon because JVM heap space is exhausted\nExpiring Daemon because JVM heap space is exhausted\nExpiring Daemon because JVM heap space is exhausted\nExpiring Daemon because JVM heap space is exhausted\nExpiring Daemon because JVM heap space is exhausted\nDaemon is stopping immediately JVM garbage collector thrashing and after running out of JVM memory\n</code></pre>\n\n<p>What I am tried to add parameter in my <code>$HOME/.gradle/gradle.properties</code>:</p>\n\n<pre><code>org.gradle.jvmargs=-Xmx8096m -XX:MaxPermSize=8096m -XX:+HeapDumpOnOutOfMemoryError\n</code></pre>\n\n<p>But the problem not solved,what should I do to fix?</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 64244926,
          "body": "Better if you can share your SQL script which creates MYDB. SELECT * FROM ALBUM instead of SELECT * FROM MYDB.ALBUM. The problem could be with the username and password. By default the password is empty with username as &quot;sa&quot;, case insensitive."
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 77651694,
              "body": "I was using PGSQL and running tests with HSQL. I was testing a service but another service was still connected to the PGSQL database. This is what caused the error for me: Having the PGSQL running while trying to test the service with HSQL. After I stopped the PGSQL instance, the error was gone."
            },
            {
              "comment_id": 89327994,
              "body": "In my case it was caused by wrong order of test run/cleanup scripts. Tests was not finished while DB was cleaned up. I&#39;ve got this cryptic errors a lot of times randomly and fixed it by properly ordering of cleanup scripts."
            },
            {
              "comment_id": 113136089,
              "body": "I ran into this error due to a keyword used for a column name. This error however was not showing up correctly until I set the <code>sql.syntax_*</code> on the connection url as stated below by Damien MIRAS and savier."
            }
          ],
          "answer_id": 38416286,
          "body": "<p><code>user lacks privilege or object not found</code> can have multiple causes, the most obvious being you're accessing a table that does not exist. A less evident reason is that, when you run your code, the connection to a file database URL actually can create a DB. The scenario you're experiencing might be you've set up a DB using HSQL Database Manager, added tables and rows, but it's not this specific instance your Java code is using. You may want to check that you don't have multiple copies of these files: <code>mydb.log</code>, <code>mydb.lck</code>, <code>mydb.properties</code>, etc in your workspace. In the case your Java code did create those files, the location depends on how you run your program. In a Maven project run inside Netbeans for example, the files are stored alongside the pom.xml.</p>\n"
        },
        {
          "answer_id": 47217777,
          "body": "<p>I had the error <code>user lacks privilege or object not found</code> while trying to create a table in an empty in-memory database.\nI used <code>spring.datasource.schema</code> and the problem was that I missed a semicolon in my SQL file after the \"CREATE TABLE\"-Statement (which was followed by \"CREATE INDEX\").</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 84526566,
              "body": "CREATE TABLE DATA_LATEST_BY ( \tDATASRC\t\tVARCHAR(5)\tNOT NULL, \tDATE_LATEST\tVARCHAR(10)\tNOT NULL );    I am using the above script but still I am getting same issue"
            },
            {
              "comment_id": 122559831,
              "body": "Thank u i used this WHERE FACILITYID= &quot;+value1+&quot; to WHERE FACILITYID= &#39;&quot;+value1+&quot;&#39;&quot;"
            }
          ],
          "answer_id": 47748914,
          "body": "<p>If you've tried all the other answers on this question, then it is most likely that you are facing a case-sensitivity issue.</p>\n\n<p>HSQLDB is case-sensitive by default. If you don't specify the double quotes around the name of a schema or column or table, then it will by default convert that to uppercase. If your object has been created in uppercase, then you are in luck. If it is in lowercase, then you will have to surround your object name with double quotes.</p>\n\n<p>For example:</p>\n\n<pre><code>CREATE MEMORY TABLE \"t1\"(\"product_id\" INTEGER NOT NULL)\n</code></pre>\n\n<p>To select from this table you will have to use the following query</p>\n\n<pre><code>select \"product_id\" from \"t1\"\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 105717472,
              "body": "Had the same issue with <code>date_sub</code> function. Updating HSQL to 2.5.0 solved this for me."
            }
          ],
          "answer_id": 50785663,
          "body": "<p>I had similar issue with the error '<code>org.hsqldb.HsqlException: user lacks privilege or object not found: DAYS_BETWEEN</code>' turned out <code>DAYS_BETWEEN</code> is not recognized by hsqldb as a function. use DATEDIFF instead.</p>\n\n<pre><code>DATEDIFF ( &lt;datetime value expr 1&gt;, &lt;datetime value expr 2&gt; )\n</code></pre>\n"
        },
        {
          "answer_id": 51377244,
          "body": "<p>As said by a previous response there is many possible causes. One of them is that the table isn't created because of syntax incompatibility. <strong>If specific DB vendor syntax or specific capability is used,  HSQLDB will not recognize it</strong>. Then while the creation code is executed you could see that the table is not created for this syntax reason. For exemple if the entity is annoted with <code>@Column(columnDefinition = \"TEXT\")</code> the creation of the table will fail.</p>\n\n<p><strong>There is a work around</strong> which tell to HSQLDB to be in a compatible mode\nfor pgsl you should append your connection url with that </p>\n\n<pre><code>\"spring.datasource.url=jdbc:hsqldb:mem:testdb;sql.syntax_pgs=true\"\n</code></pre>\n\n<p>and for <strong>mysql</strong> with </p>\n\n<pre><code>\"spring.datasource.url=jdbc:hsqldb:mem:testdb;sql.syntax_mys=true\"\n</code></pre>\n\n<p><strong>oracle</strong> </p>\n\n<pre><code>\"spring.datasource.url=jdbc:hsqldb:mem:testdb;sql.syntax_ora=true\" \n</code></pre>\n\n<p>note there is variant depending on your configuration \nit could be <code>hibernate.connection.url=</code> or <code>spring.datasource.url=</code>\nfor those who don't use the hibernate schema creation but a SQL script you should use this kind of syntax in your script</p>\n\n<pre><code>SET DATABASE SQL SYNTAX ORA TRUE;\n</code></pre>\n\n<p>It will also fix issues due to vendor specific syntax in SQL request such as <strong>array_agg</strong> for <strong>posgresql</strong></p>\n\n<p><strong>Nota bene</strong> : The the problem occurs very early when the code parse the model to create the schema and then is hidden in many lines of logs, then the unitTested code crash with a confusing and obscure exception \"user lacks privilege or object not found error\" which does not point the real problem at all. So make sure to read all the trace from the beginning and fix all possible issues</p>\n"
        },
        {
          "answer_id": 52031333,
          "body": "<p>When running a HSWLDB server. for example your java config file has:</p>\n\n<p><code>hsql.jdbc.url = jdbc:hsqldb:hsql://localhost:9005/YOURDB;sql.enforce_strict_size=true;hsqldb.tx=mvcc</code></p>\n\n<p>check to make sure that your set a <code>server.dbname.#</code>. for example my server.properties file:</p>\n\n<pre><code>    server.database.0=eventsdb \n    server.dbname.0=eventsdb \n    server.port=9005\n</code></pre>\n"
        },
        {
          "answer_id": 54853660,
          "body": "<p>I was inserting the data in hsql db using following script </p>\n\n<pre><code>INSERT INTO Greeting (text) VALUES (\"Hello World\");\n</code></pre>\n\n<p>I was getting issue related to the <strong>Hello World</strong> object not found and HSQL database user lacks privilege or object not found error</p>\n\n<p>which I changed into the below script </p>\n\n<pre><code>INSERT INTO Greeting (text) VALUES ('Hello World');\n</code></pre>\n\n<p>And now it is working fine.</p>\n"
        },
        {
          "answer_id": 55577296,
          "body": "<p>I bumped into kind of the same problem recently. We are running a grails application and someone inserted a SQL script into the BootStrap file (that's the entry point for grails). That script was supposed to be run only in the production environment, however because of bad logic it was running in test as well. So the error I got was:   </p>\n\n<pre><code>User lacks privilege or object not found:\n</code></pre>\n\n<p>without any more clarification...</p>\n\n<p>I just had to make sure the script was not run in the test environment and it fixed the problem for me, though it took me 3 hours to figure it out. I know it is very, very specific issue but still if I can save someone a couple of hours of code digging that would be great.</p>\n"
        },
        {
          "answer_id": 56226338,
          "body": "<p>I was having the same mistake. In my case I was forgetting to put the apas in the strings.</p>\n\n<p>I was doing <code>String test = \"inputTest\";</code></p>\n\n<p>The correct one is <code>String test = \"'inputTest'\";</code></p>\n\n<p>The error was occurring when I was trying to put something in the database</p>\n\n<pre><code>connection.createStatement.execute(\"INSERT INTO tableTest values(\" + test +\")\";\n</code></pre>\n\n<p>In my case, just put the quotation marks <code>'</code> to correct the error.</p>\n"
        },
        {
          "answer_id": 57146183,
          "body": "<p>In my case the error occured because i did NOT put the TABLE_NAME into double quotes \"TABLE_NAME\" and had the oracle schema prefix.</p>\n\n<p>Not working:</p>\n\n<pre><code>SELECT * FROM FOOSCHEMA.BAR_TABLE\n</code></pre>\n\n<p>Working:</p>\n\n<pre><code>SELECT * FROM \"BAR_TABLE\"\n</code></pre>\n"
        },
        {
          "answer_id": 57755468,
          "body": "<p>had this issue with concatenating variables in insert statement. this worked</p>\n\n<pre><code>// var1, var3, var4 are String variables\n// var2 and var5 are Integer variables\nresult = statement.executeUpdate(\"INSERT INTO newTable VALUES ('\"+var1+\"',\"+var2+\",'\"+var3+\"','\"+var4+\"',\"+var5 +\")\");\n</code></pre>\n"
        },
        {
          "answer_id": 59037264,
          "body": "<p>In my case the issue was caused by the absence (I'd commented it out by mistake) of the following line in <code>persistence.xml</code>:</p>\n\n<pre><code>&lt;property name=\"hibernate.hbm2ddl.auto\" value=\"update\"/&gt;\n</code></pre>\n\n<p>which prevented Hibernate from emitting the DDL to create the required schema elements...</p>\n\n<p>(different Hibernate wrappers will have different mechanisms to specify properties; I'm using JPA here)</p>\n"
        },
        {
          "answer_id": 59564179,
          "body": "<p>I had this error while trying to run my application without specifying the \"Path\" field in Intellij IDEA data source (database) properties. Everything else was configured correctly.</p>\n\n<p>I was able to run scripts in IDEA database console and they executed correctly, but without giving a path to the IDEA, it was unable to identify where to connect, which caused errors. </p>\n"
        },
        {
          "answer_id": 60253833,
          "body": "<p>You have to run the Database in server mode and connect.Otherwise it wont connect from external application and give error similar to user lacks privilege.\nAlso change the url of database in spring configuration file accordingly when running DB in server mode.</p>\n\n<p>Sample command to run DB in server mode\n$java -cp lib/hsqldb.jar org.hsqldb.server.Server --database.0 file:data/mydb --dbname.0 Test</p>\n\n<p>Format of URL in configuration file\njdbc:hsqldb:hsql://localhost/Test</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 110959315,
              "body": "spring.datasource.url=jdbc:hsqldb:mem:cleapp;sql.syntax_mys=&zwnj;&#8203;true spring.datasource.username=sa  spring.datasource.password= spring.jpa.database=HSQL spring.jpa.database-platform=org.hibernate.dialect.HSQLDiale&zwnj;&#8203;ct spring.jpa.hibernate.ddl-auto=none spring.jpa.hibernate.naming.implicit-strategy=org.hibernate.&zwnj;&#8203;boot.model.naming.Im&zwnj;&#8203;plicitNamingStrategy&zwnj;&#8203;LegacyJpaImpl spring.jpa.hibernate.naming.physical-strategy=org.hibernate.&zwnj;&#8203;boot.model.naming.Ph&zwnj;&#8203;ysicalNamingStrategy&zwnj;&#8203;StandardImpl"
            },
            {
              "comment_id": 110961892,
              "body": "Please don&#39;t extend your answer via your comments. If you have useful information that readers should be aware of, <b>edit</b> your answer to include that information. This is especially useful here where the extra information would really benefit from the code formatting options available to you via markdown (which is only available in a post, and not a comment)."
            }
          ],
          "answer_id": 62745660,
          "body": "<p>Add these two extra properties:</p>\n<pre><code>spring.jpa.hibernate.naming.implicit-strategy=\norg.hibernate.boot.model.naming.ImplicitNamingStrategyLegacyJpaImpl\n\nspring.jpa.hibernate.naming.physical-strategy=\norg.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl\n</code></pre>\n"
        },
        {
          "answer_id": 66862725,
          "body": "<p>In my case, one of the columns had the name 'key' with the missing @Column(name = &quot;key&quot;) annotation so that in the logs you could see the query that created the table but in fact it was not there. So be careful with column names</p>\n"
        },
        {
          "answer_id": 67826112,
          "body": "<p>For what it's worth - I had this same problem.  I had a column named 'TYPE', which I renamed to 'XTYPE' and a column named ORDER which I renamed to 'XORDER' and the problem went away.</p>\n"
        },
        {
          "answer_id": 68353216,
          "body": "<p>Yet another reason could be a misspelt field name. If your actual table has an id column named albumid and you'd used album_id, then too this could occur.</p>\n<p>As another anwer remarked, case differences in field names too need to be taken care of.</p>\n"
        },
        {
          "answer_id": 69015982,
          "body": "<p>I faced the same issue and found there was more than one PersistenceUnit (ReadOnly and ReadWrite) , So the tables in HSQLDDB created using a schema from one persistence unit resulted in exception(HSQL database user lacks privilege or object not found error) being thrown when accessed from other persistence unit .It happens when tables are created from one session in JPA and accessed from another session</p>\n"
        },
        {
          "answer_id": 72226924,
          "body": "<p>In my case the table <code>MY_TABLE</code> was in the schema <code>SOME_SCHEMA</code>. So calling select/insert etc. directly didn't work. To fix:</p>\n<ol>\n<li>add file <code>schema.sql</code> to the <code>resources</code> folder</li>\n<li>in this file add the line <code>CREATE SCHEMA YOUR_SCHEMA_NAME;</code></li>\n</ol>\n"
        },
        {
          "answer_id": 76296441,
          "body": "<p>Had the same problem. In my case when setting up the database.</p>\n<p>If I created the database via a SQL client the creation succeeded, but when I tried to create the same SQL DDL from Java I got this weird error, which is not really helpful.</p>\n<p>I decided to split up the SQL DDL statements into separate CREATE statements and did this the trick. Now all tables and indices were created without any problems.</p>\n<p>BTW it does not matter if I use executeUpdate(DDL) or execute(DDL). Both fail with the same error message, unless I split those statements up.</p>\n<p>INSERTing multiple statements works without any problems. I do not understand this inconsistent behaviour.</p>\n"
        }
      ],
      "last_activity_date": 1684602676,
      "question_id": 38415734,
      "body": "<p>I am trying to use <strong>hsqldb-2.3.4</strong> to connect from Spring applicastion.</p>\n\n<p>I created data base using the following details</p>\n\n<pre><code>Type : HSQL Database Engine Standalone\nDriver: org.hsqldb.jdbcDriver\nURL: jdbc:hsqldb:file:mydb\nUserName: SA\nPassword: SA\n</code></pre>\n\n<p>I created a table named <strong>ALBUM</strong> under \"MYDB\" schema</p>\n\n<p>In spring configuration file:</p>\n\n<pre><code>&lt;bean id=\"jdbcTemplate\"\n    class=\"org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate\"&gt;\n    &lt;constructor-arg ref=\"dbcpDataSource\" /&gt;\n&lt;/bean&gt;\n\n&lt;bean id=\"dbcpDataSource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n    &lt;property name=\"driverClassName\" value=\"org.hsqldb.jdbcDriver\" /&gt;\n    &lt;property name=\"url\" value=\"jdbc:hsqldb:file:mydb\" /&gt;\n    &lt;property name=\"username\" value=\"SA\" /&gt;\n    &lt;property name=\"password\" value=\"SA\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>And in my spring controller I am doing <code>jdbcTemplate.query(\"SELECT * FROM MYDB.ALBUM\", new AlbumRowMapper());</code></p>\n\n<p>And It gives me exception:</p>\n\n<pre><code>org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; bad SQL grammar [SELECT * FROM MYDB.ALBUM]; nested exception is java.sql.SQLSyntaxErrorException: user lacks privilege or object not found: ALBUM\norg.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:982)\norg.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:861)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:622)\norg.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\norg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n</code></pre>\n\n<p>If I execute same query through SQL editor of hsqldb it executes fine.  Can you please help me with this.</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 107717064,
          "body": "now It&#39;s more clear. Thanks @Mahmoud Ben Hassine ."
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 107808115,
              "body": "Thanks, @Mahmoud Ben Hassine It seems a solution is perfectly working. Please share the approach to debug.?Since you are using the reader in a multi-threaded step, a thread could have closed the current file..:-   Why this behaviour won&#39;t appear when I am using only FlatFileItemReader..?"
            },
            {
              "comment_id": 107823330,
              "body": "did it @Mahmoud Ben Hassine and if you think the question is valid, please vote up or vote down beside the question"
            }
          ],
          "answer_id": 60922099,
          "body": "<p>Since you are using the reader in a multi-threaded step, a thread could have closed the current file while another thread is trying to read from that file at the same time. You need to synchronize access to your reader with a <code>SynchronizedItemStreamReader</code>:</p>\n\n<pre><code>@Bean\npublic SynchronizedItemStreamReader&lt;Customer&gt; multiResourceItemReader() {\n    System.out.println(\"In multiResourceItemReader\");\n    MultiResourceItemReader&lt;Customer&gt; reader = new MultiResourceItemReader&lt;&gt;();\n    reader.setDelegate(customerItemReader());\n    reader.setResources(inputFiles);\n\n    SynchronizedItemStreamReader&lt;Customer&gt; synchronizedItemStreamReader = new SynchronizedItemStreamReader&lt;&gt;();\n    synchronizedItemStreamReader.setDelegate(reader);\n    return synchronizedItemStreamReader;\n}\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684601728,
      "question_id": 60883344,
      "body": "<p>I want to process multiple files sequentially and each file needs to be processed with the help of multiple threads so used the spring batch   FlatFileItemReader and TaskExecutor and it seems to be working fine for me. As mentioned in the requirement we have to process multiple files,  so along with FlatFileItemReader, I am using MultiResourceItemReader which will take a number of files and process one by one where I am facing issues. Can someone help me what is the cause of exception? What is the approach to fix it..?</p>\n\n<pre><code>org.springframework.batch.item.ReaderNotOpenException: Reader must be open before it can be read.\n   at org.springframework.batch.item.file.FlatFileItemReader.readLine(FlatFileItemReader.java:195) ~[spring-batch-infrastructure-3.0.5.RELEASE.jar:3.0.5.RELEASE]\n   at org.springframework.batch.item.file.FlatFileItemReader.doRead(FlatFileItemReader.java:173) ~[spring-batch-infrastructure-3.0.5.RELEASE.jar:3.0.5.RELEASE]\n   at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.read(AbstractItemCountingItemStreamItemReader.java:88) ~[spring-batch-infrastructure-3.0.5.RELEASE.jar:3.0.5.RELEASE]\n   at org.springframework.batch.item.file.MultiResourceItemReader.readFromDelegate(MultiResourceItemReader.java:140) ~[spring-batch-infrastructure-3.0.5.RELEASE.jar:3.0.5.RELEASE]\n   at org.springframework.batch.item.file.MultiResourceItemReader.readNextItem(MultiResourceItemReader.java:119)\n</code></pre>\n\n<p>customer2.csv</p>\n\n<pre><code>200,Zoe,Nelson,1973-01-12 17:19:30\n201,Vivian,Love,1951-10-31 08:57:08\n202,Charde,Lang,1967-02-23 12:24:26\n</code></pre>\n\n<p>customer3.csv</p>\n\n<pre><code>400,Amelia,Osborn,1972-05-09 09:21:22\n401,Gemma,Finch,1989-09-25 23:00:59\n402,Orli,Slater,1959-03-30 15:54:32\n403,Donovan,Beasley,1986-06-18 14:50:30\n</code></pre>\n\n<p>customer4.csv</p>\n\n<pre><code>600,Zelenia,Henson,1982-07-03 03:28:39\n601,Thomas,Mathews,1954-11-21 20:34:03\n602,Kevyn,Whitney,1984-09-21 06:24:25\n603,Marny,Leon,1984-06-10 21:32:09\n604,Jarrod,Gay,1960-06-22 19:11:04\n</code></pre>\n\n<p>customer5.csv</p>\n\n<pre><code>800,Imogene,Lee,1966-10-19 17:53:44\n801,Mira,Franks,1964-03-08 09:47:43\n802,Silas,Dixon,1953-04-11 01:37:51\n803,Paloma,Daniels,1962-06-14 17:01:02\n</code></pre>\n\n<p>My code:</p>\n\n<pre><code>@Bean\npublic MultiResourceItemReader&lt;Customer&gt; multiResourceItemReader() {\n\n    System.out.println(\"In multiResourceItemReader\");\n    MultiResourceItemReader&lt;Customer&gt; reader = new MultiResourceItemReader&lt;&gt;();\n    reader.setDelegate(customerItemReader());\n    reader.setResources(inputFiles);\n    return reader;\n}\n\n@Bean\npublic FlatFileItemReader&lt;Customer&gt; customerItemReader() {\n    FlatFileItemReader&lt;Customer&gt; reader = new FlatFileItemReader&lt;&gt;();\n    DefaultLineMapper&lt;Customer&gt; customerLineMapper = new DefaultLineMapper&lt;&gt;();\n    DelimitedLineTokenizer tokenizer = new DelimitedLineTokenizer();\n    tokenizer.setNames(new String[] {\"id\", \"firstName\", \"lastName\", \"birthdate\"});\n    customerLineMapper.setLineTokenizer(tokenizer);\n    customerLineMapper.setFieldSetMapper(new CustomerFieldSetMapper());\n    customerLineMapper.afterPropertiesSet();\n    reader.setLineMapper(customerLineMapper);\n    return reader;\n}\n</code></pre>\n\n<p>bellow snippet working fine while using below :</p>\n\n<pre><code>@Bean\npublic Step step1() {\n    return stepBuilderFactory.get(\"step1\")\n            .&lt;Customer, Customer&gt;chunk(100).\n            reader(customerItemReader())\n            .writer(customerItemWriter()).taskExecutor(taskExecutor()).throttleLimit(10)\n            .build();\n}\n}\n</code></pre>\n\n<p>bellow snippet is not working getting  above mentioned exception</p>\n\n<pre><code>@Bean\npublic Step step1() {\n    return stepBuilderFactory.get(\"step1\")\n            .&lt;Customer, Customer&gt;chunk(100).\n            reader(multiResourceItemReader())\n            .writer(customerItemWriter()).taskExecutor(taskExecutor()).throttleLimit(10)\n            .build();\n}\n</code></pre>\n"
    },
    {
      "comments": [
        {
          "comment_id": 68462798,
          "body": "tbh this is my friend&#39;s code so I&#39;m kinda confused too ... sorry in advanced to whatever will be commented towards how he coded it. I&#39;m just helping him but I too am not too knowledgeable in Java xD"
        },
        {
          "comment_id": 68462800,
          "body": "Your last <code>i++</code> when adding to the list make <code>j=i</code> start after the last item in the <code>while</code> loop for case 2."
        },
        {
          "comment_id": 68462825,
          "body": "In your Pos class, which of these lines are line 69?"
        },
        {
          "comment_id": 68462986,
          "body": "line 69 would be total=total+prod[j].prodTotal; @mdewit"
        },
        {
          "comment_id": 68463077,
          "body": "Edit: bradimus is right. You will be accessing an uninitialised product on this line: total=total+prod[j].prodTotal. This due to j having been set to i, after i has been incremented. So basically you are trying to access the element after the one that you allocated with prod[i] = new Product (pname,price,quant,ptotal);"
        },
        {
          "comment_id": 68463119,
          "body": "oh my god i didn&#39;t see his comment. i&#39;m so sorry. it&#39;s pretty late here and my eyes are burning. let me change it real quick"
        },
        {
          "comment_id": 68463260,
          "body": "The problem is that you are initialize j with two (value of i) in your second case. After it you want to get the second element of your array (total=total+prod[j].prodTotal;)  --&gt; Nullpointer because an array starts counting at zero and not one! Just change your line to:  total=total+prod[j-1].prodTotal; and it should work for your described case."
        },
        {
          "comment_id": 68463646,
          "body": "OMG @endkugelfang thank you so much. And the other guys too mdewit and bradimus. I get it now xD oh dear... I&#39;m really sorry for not getting it directly in the first place. I&#39;m still a student with low knowledge of these things but I&#39;m trying to work my way to the top hehe. Thanks guys!"
        },
        {
          "comment_id": 68463868,
          "body": "so the only problem I have now is math. Since #2 adds all the total, it would then add again all totals when I input another product.   e.g. I press &#39;1&#39; and input. Total of 1 is 500. I press &#39;2&#39; and see all total as 500. I press &#39;1&#39; again and Total of this &#39;1&#39; is 600. I press &#39;2&#39; then all total becomes 500+500(another 500 huhu because it&#39;s running the equation again i think) + 600 which makes it 1600 when the answer is supposed to be 500+600 = 1100 ------ i&#39;ll try to solve it. thanks again guys!! :D &lt;3"
        }
      ],
      "last_activity_date": 1684601552,
      "question_id": 40614353,
      "body": "<p>I'm very new to java and I know I'm learning this in a very bad way. So, I've understood a bit like how to print and stuff (I'm so sorry I'm totally new to java). Anyways, I'm creating a POS (Point of Sale) system.</p>\n\n<p>So in my current code when you run this in cmd/console</p>\n\n<p>You will see 2 choices (1 &amp; 0)\nbut it has actually 3 choices,(1,2 &amp; 0).</p>\n\n<p>1- Add Item to List</p>\n\n<p>2- Total of everything (need to add items first [1])</p>\n\n<p>0- Exit</p>\n\n<p>After adding a product/item to the list, it would loop back to the transaction part (1,2 &amp; 0) part. Everything was ok until I inputted \"2\"\nwhich then placed me with an error of:</p>\n\n<pre><code>'Exception in thread \"main\" java.lang.NullPointException at Pos.main(Pos.java:69)'\n</code></pre>\n\n<p>while my friend who I was chatting with at Facebook used this online compiler and it says this:</p>\n\n<pre><code>'java.util.Scanner.throwFor(Scanner.java:862)\n    at java.util.Scanner.next(Scanner.java:1485)\n    at java.util.Scanner.nextInt(Scanner.java:2117)\n    at java.util.Scanner.nextInt(Scanner.java:2076)\n    at Pos.main(Pos.java:47)'\n</code></pre>\n\n<p>(the main reason why I placed so many imports)</p>\n\n<p>please help a rookie out :--(</p>\n\n<p>I've been searching around stackoverflow and google but nothing seems to work or maybe my knowledge level is just too low to understand those.</p>\n\n<p>anyways, my current goal is for when i press '2' it will get the total of all totals from the items at the transaction area that i've added. So basically pressing '1' at the transaction area means you're ordering something. And when I press '2' then there goes your bill (total) or something like that.</p>\n\n<pre><code>import java.*;\nimport java.util.*;\nimport java.util.Scanner;\nimport java.lang.*;\nimport java.io.*;\n\nclass Product {\n      private String prodName;\n      private double prodPrice;\n      private int quantity;\n      public double prodTotal;\n\n\n  // constructor\n      public Product(String prodName, double prodPrice,int quantity,double prodTotal) {\n      this.prodName = prodName;\n      this.prodPrice = prodPrice;\n      this.quantity = quantity;\n      this.prodTotal = prodTotal;\n   }\n\n       // getter\n       public String getprodName() { return prodName; }\n       public double getprodPrice() { return prodPrice; }\n       public int getquantity() { return quantity; }\n       public double getprodTotal() { return prodTotal; }\n\n       // setter\n\n       public void setprodName(String prodName) { this.prodName = prodName; }\n       public void setprodPrice(double prodPrice) { this.prodPrice = prodPrice; }\n       public void setquantity(int quantity) {this.quantity = quantity; }\n       public void setprodTotal(double prodTotal) {this.prodTotal = prodTotal; }\n    }\npublic class Pos{\n\n\n        public static void main (String args[])\n        {\n\n        String pname;\n        double price;\n        int quant,choice,j,i=0;\n        double ptotal, total=0;\n\n        Product[] prod = new Product[100];\n\n        do{\n            System.out.println(\"\\n1 - Add Item to List\\n0 - Exit\\n\");\n            Scanner inputReader= new Scanner( System.in );\n            choice=inputReader.nextInt();\n            switch(choice){\n                case 1:\n                    System.out.println(\"Enter product name: \");\n                    pname = inputReader.next();\n                    System.out.println(\"Enter price: \");\n                    price = inputReader.nextDouble();\n                    System.out.println(\"Enter quantity: \");\n                    quant = inputReader.nextInt();\n                    ptotal = price*quant;\n                    ptotal = Math.round(ptotal * 100.0) / 100.0;\n                    System.out.println(\"\\nProduct: \"+pname+\"\\tPrice: P\"+price+\"\\tQuantity: \"+quant+\"\\tTotal: P\"+ptotal);\n                    prod[i] = new Product (pname,price,quant,ptotal);\n                    i++;\n                        break;\n                case 2:\n                    j=i;\n                    while(j&gt;0){\n                        total=total+prod[j].prodTotal;\n                        j--;\n                    }\n                    System.out.println(\"Overall Total: \"+total);\n                        break;\n                case 0:\n                    break;\n                    }\n        }while(choice!=0);\n        //System.out.println(\"\\nProduct: \"+prodName+\"\\tPrice: \"+prodPrice+\"\\tQuantity: \"+quantity);\n        }\n\n\n    }\n</code></pre>\n"
    },
    {
      "answers": [
        {
          "answer_id": 42485438,
          "body": "<p>You have to add an extra parameter in the message content for identifying the type. Then create notification manager with different activity based on that type value.</p>\n\n<p>ex:</p>\n\n<pre><code>switch (type){\ncase 1:\n\n notification manager for activity A\n\nbreak:\n\ncase 2:\n\n notification manager for activity B\n\nbreak:\n\n}\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684601407,
      "question_id": 42479611,
      "body": "<p>i want my application should give me notification and on clicking on notification another activity should open  like whatsapp notifications<br>\nthis is my code c an anyone help?????   </p>\n\n<pre><code> public class MyFirebaseMessagingService extends FirebaseMessagingService {\n        @Override\n        public void onMessageReceived(RemoteMessage remoteMessage) {\n            //    sendNotification(remoteMessage.getNotification().getBody());\n            //Bundle bundle=new Bundle();\n            //bundle.putString(\"msgBody\",remoteMessage.getNotification().getBody());\n            //intent use for start this activity after click on notification\n            Intent intent = new Intent(getApplicationContext(),Secondactivity.class);\n            String valu=remoteMessage.getNotification().getBody();\n            intent.putExtra(\"notificationmessage\",valu);\n**strong text**            //here we are telling system after clicking you have to come on mainactivity\n            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n            //here we are giving rights to main activity.FLAG_ONE_SHOT useful to indicate this pending intent can use only once\n            PendingIntent pendingintent=PendingIntent.getActivity(this,0,intent,PendingIntent.FLAG_ONE_SHOT);\n            //notificationcompat useful for creating notification layout\n            NotificationCompat.Builder notificationbuilder=new  NotificationCompat.Builder(this);\n            notificationbuilder.setContentText(remoteMessage.getNotification().getBody());\n            notificationbuilder.setContentTitle(\"FCM NOTIFICATION\");\n            notificationbuilder.setSmallIcon(R.mipmap.ic_launcher);\n            notificationbuilder.setAutoCancel(true);\n            notificationbuilder.setContentIntent(pendingintent);\n\n            NotificationManager notificationManager= (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);\n            notificationManager.notify(0,notificationbuilder.build());\n\n        }\n</code></pre>\n"
    },
    {
      "comments": [
        {
          "comment_id": 90106294,
          "body": "What is the exact question/problem? (Have you noticed that you&#39;re calling <code>scrollableResults.next()</code> where you probably shouldn&#39;t?)"
        },
        {
          "comment_id": 90111635,
          "body": "@ernest_k I updated it to be more clear about my question. I&#39;m just unsure how to implement this."
        },
        {
          "comment_id": 90112023,
          "body": "I probably didn&#39;t fully understand what you&#39;re aiming at. But it sounds like this <i>might</i> be a case where &quot;preparing&quot; the next element should be a separate step. The pattern that is occasionally used here: 1. define a <code>private T next;</code>. 2. Implement <code>hasNext</code> as <code>next!=null</code>. 3. create a method <code>prepareNext</code> that will compute the next element to be returned. 4. In the constructor, do <code>this.next=prepareNext()</code>. 5. In <code>next</code>, do <code>T result=next; this.next=prepareNext(); return result;</code>. If you think that this can solve your issue, I&#39;ll try to convert this into an answer."
        }
      ],
      "last_activity_date": 1684601279,
      "question_id": 51570022,
      "body": "<p>I need to override iterator's <code>next()</code> function in my wrapper class so that each time I call <code>next()</code>, it will iterate through the <code>ScrollableResults</code>, add details, and ultimately return the unique record. </p>\n\n<p>Because of how things are already set in place, each record with the same sequence number should be exactly the same <em>except</em> for the detail name and detail value. I need to add these details to the same record (that's what <code>record.addDetail(name, value)</code> does) and ultimately return that unique record. Here's a breakdown of what needs to happen for my custom <code>next()</code>:</p>\n\n<ol>\n<li><p>Iterate through <code>scrollableResults</code>, adding detail name and detail value to the unique record (it can add to either unique ones).</p></li>\n<li><p>Once the cursor comes across a different sequence number, it should break out of the loop and return the unique record/object.</p></li>\n<li>Once returned, the next call to <code>next()</code> will start the process all over again except the cursor will pick up where it left off and <code>previousSequence</code> should also pick up where it left off.</li>\n</ol>\n\n<p><strong>Wrapper.java:</strong></p>\n\n<pre><code>public class Wrapper&lt;T&gt; implements Iterable&lt;T&gt;, AutoCloseable {\n\n    private ScrollableResults scrollableResults;\n    private Session session;\n\n    public Wrapper(ScrollableResults scrollableResults, Session session) {\n        this.scrollableResults = scrollableResults;\n        this.session = session;\n    }\n\n    public Iterator&lt;T&gt; iterator() { return new WrapperIterator(); }\n\n    @Override\n    public void close() {\n        scrollableResults.close();\n    }\n\n    public class WrapperIterator implements Iterator&lt;T&gt; {\n\n        private Integer previousSequence;\n\n        @Override\n        public boolean hasNext() {\n            boolean hasNext = scrollableResults.next();\n            return hasNext;\n        }\n\n        /**\n         * This next() method should return the next UNIQUE record.\n         * But before returning the unique record, it should add all the appropriate details to the respective record.\n         */\n        @Override\n        public T next() {\n            boolean hasNext = scrollableResults.next();\n            if (!hasNext) {\n                throw new NoSuchElementException();\n            }\n            // For previousSequence, first result needs to be retrieved explicitly\n            Object[] row = (Object[]) scrollableResults.get();\n            Record record = (Record) row[0];\n            Integer currentSequence = previousSequence = record.getSequence();\n            String detailName = (String) row[1];\n            String detailValue = (String) row[2];\n            record = setDetails(record, detailName, detailValue);\n\n            Object[] mainRow = row;\n\n            // First one should always be unique since it's starting a new set of records of same sequence.\n            while(scrollableResults.next()) {\n                 // Get record\n                row = (Object[]) scrollableResults.get();\n                record = (Record) row[0];\n                // Update current sequence\n                currentSequence = record.getSequence();\n                // If current sequence is different from previous sequence, break\n                // First result needs to be accounted for\n                if(!currentSequence.equals(previousSequence)) {\n                    previousSequence = currentSequence;\n                    session.evict(row);\n                    return (T) row;\n                }\n                // Add detail\n                detailName = (String) row[1];\n                detailValue = (String) row[2];\n                record = setDetails(record, detailName, detailValue);\n            }\n            previousSequence = currentSequence;\n            return (T) mainRow;\n        }\n\n        private Record setDetails(Record record, String detailName, String detailValue) {\n            record.addDetail(detailName, detailValue);\n            return record;\n        }\n    }\n}\n</code></pre>\n\n<p>I've been trying to implement this and this is as far as I got. My current approach traverses and puts in details just fine but <strong>my problem is in returning the right row. Since current sequence needs to be checked with the previous sequence, I can't return the very last record before the new sequence record since the cursor will be already past it.</strong></p>\n\n<p>Any recommendation on how I could fix this? Anything would be greatly appreciated!</p>\n\n<p><strong><em>NOTE:</strong> The iterator <strong>CANNOT</strong> traverse backwards. The scroll mode has been set to FORWARD_ONLY due to PSQL bug of the scroll mode needing to be FORWARD_ONLY.</em></p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134540874,
          "body": "You should provide a minimal reproducible example for Stackoverlow."
        },
        {
          "comment_id": 134541611,
          "body": "The emphasis in the above comment should be on the <i>minimal</i> aspect."
        }
      ],
      "last_activity_date": 1684601041,
      "question_id": 76295359,
      "body": "<pre><code>`    \n    ------ Encyption.jar ---------------\n\n    // configured to take key, nonce, filenames and path from command line\n    public class EncrAll {\n    \n        public static void Encrypt(String hexkey1, String nonce, String path, ArrayList filenames) {\n            // 256-bit key\n            byte[] key = Hex.decode(hexkey1);\n    \n            System.out.println(&quot;EncrAll: Encryption key&quot;);\n            for(int i=0;i&lt;key.length;i++) {\n                System.out.print(key[i]+&quot; &quot;);\n            }\n            System.out.println();\n            // 8-byte nonce\n            byte[] iv = Hex.decode(nonce);\n            System.out.println(&quot;EncrAll: Encyption nonce&quot;);\n            for(int i=0;i&lt;iv.length;i++) {\n                System.out.print(iv[i]+&quot; &quot;);\n            }\n            System.out.println();\n    \n            ChaChaEngine engine = new ChaChaEngine();\n            engine.init(true, new ParametersWithIV(new KeyParameter(key), iv));\n            ArrayList originalFilesToBeDeletd = new ArrayList();\n    \n            try {\n    \n                // iterating over the filenames to encrypt them one by one\n                for (int i = 0; i &lt; filenames.size(); i++) {\n    //              File file = new File(path.concat(&quot;\\\\&quot;).concat((String) filenames.get(i)));\n                    File file = new File(path + File.separator + (String) filenames.get(i));\n    \n    //              String filename = path.concat(&quot;\\\\&quot;).concat((String) filenames.get(i));\n                    String filename = path + File.separator + (String) filenames.get(i);\n    \n                    FileInputStream fis = null;\n                    FileOutputStream fop = null;\n                    try {\n    \n                        fis = new FileInputStream(file);\n                        byte[] plaintextBytes = new byte[(int) file.length()];\n                        fis.read(plaintextBytes);\n    \n                        byte[] ciphertext = new byte[plaintextBytes.length];\n                        engine.processBytes(plaintextBytes, 0, plaintextBytes.length, ciphertext, 0);\n    \n                        // Giving the encrypted file a new name/extension\n                        fop = new FileOutputStream(filename.concat(&quot;.encr&quot;));\n                        fop.write(ciphertext);\n                        File file1 = new File(filename.concat(&quot;.encr&quot;));\n    \n                        if (file1.exists()) {\n                            System.out.println(&quot;adding file &quot; + filename + &quot; path for deletion&quot;);\n    \n                            // adding filenames for deletion once they are successfully encrypted\n                            originalFilesToBeDeletd.add(file.getAbsolutePath());\n                        } else {\n                            System.out.println(&quot;File &quot; + file1 + &quot; does not exist&quot;);\n                        }\n    \n                    } catch (IOException ioe) {\n                        ioe.printStackTrace();\n                    } finally {\n    \n                        try {\n                            if (fis != null) {\n                                fis.close();\n                            }\n                            if (fop != null) {\n                                fop.close();\n                            }\n    \n                        } catch (IOException ioe) {\n                            ioe.printStackTrace();\n                        }\n                    }\n                }\n            }\n    \n            catch (Exception e) {\n                System.out.println(&quot;Error in encrypting files&quot;);\n                e.printStackTrace();\n            }\n    \n            deleteOriginalFiles(originalFilesToBeDeletd);\n        }\n    \n        private static boolean deleteOriginalFiles(ArrayList originalFilesToBeDeletd) {\n            File f;\n            boolean allDeleted = true;\n            for (int i = 0; i &lt; originalFilesToBeDeletd.size(); i++) {\n                f = new File((String) originalFilesToBeDeletd.get(i));\n                System.out.println(f.getAbsolutePath());\n                try {\n                    f.delete();\n    \n                    if (f.exists()) {\n                        System.out.println(&quot;File &quot; + f.getName() + &quot; is not deleted&quot;);\n                        allDeleted = false;\n                    } else {\n                        System.out.println(&quot;File &quot; + f.getName() + &quot; is deleted successfully&quot;);\n                    }\n                } catch (SecurityException se) {\n                    se.printStackTrace();\n                }\n            }\n    \n            return allDeleted;\n        }\n    \n    \n        private static String toHex(String input) {\n            StringBuffer hexString = new StringBuffer();\n    \n            for (int i = 0; i &lt; input.length(); i++) {\n                char c = input.charAt(i);\n                String hexKey = Integer.toHexString(c).toUpperCase();\n                hexString.append(hexKey);\n            }\n    \n            return hexString.toString();\n        }\n    \n    \n        private static boolean checkInputKey(String provided_key) {\n    \n            if (provided_key.length() == 16 || provided_key.length() == 32) {\n                return true;\n            }\n    \n            else {\n                System.out.println(&quot;Key must be either 16 chars or 32 chars long&quot;);\n                return false;\n            }\n    \n        }\n    \n        private static boolean checkFilePath(String path) throws NullPointerException {\n            boolean exists = false;\n            try {\n                File file = new File(path);\n                exists = file.exists();\n            } catch (NullPointerException npe) {\n                System.out.println(&quot;Path does not exist&quot;);\n                npe.printStackTrace();\n            }\n            return exists;\n    \n        }\n    \n    \n         * getting all the files present at &quot;path&quot; and filtering &quot;.txt&quot; files(i.e\n         * non-encrypted files) from them and returning that list\n         */\n    \n        private static ArrayList toBeEncryptedFiles(String path) throws SecurityException, NullPointerException {\n            String[] list = null;\n            ArrayList txtFiles = new ArrayList();\n    \n            try {\n                File file = new File(path);\n                list = file.list();\n                for (int i = 0; i &lt; list.length; i++) {\n                    if (list[i].endsWith(&quot;.txt&quot;)) {\n                        txtFiles.add(list[i]);\n                    }\n                }\n    \n            }\n    \n            catch (NullPointerException npe) {\n                npe.printStackTrace();\n            } catch (SecurityException sc) {\n                sc.printStackTrace();\n            }\n    \n            return txtFiles;\n        }\n    \n        private static void init(String key,String nonce) {\n            EncrAll e = new EncrAll();\n    \n            ArrayList filenames = null;\n            BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n    \n            try {\n    \n                // getting key and nonce from config file\n                System.out.println(key);\n                String fetched_key = toHex(key);\n    \n                String fetched_nonce = nonce;\n    \n                System.out.println(fetched_key);\n                System.out.println(fetched_nonce);\n                System.out.println(&quot;enter the absolute file path \\n&quot;);\n                String path = br.readLine();\n    \n    //          System.out.println(&quot;enter a key \\n&quot;);\n    //          provided_key = br.readLine();\n    \n                // checking if the fetched key and provided path is valid\n                boolean checkKey = checkInputKey(fetched_key);\n                boolean checkPath = checkFilePath(path);\n    \n                if (!checkPath) {\n                    System.out.println(&quot;some issue with path&quot;);\n                }\n    \n                if (checkKey &amp;&amp; checkPath) {\n    \n                    // since key and path is valid getting the list of files to encrypt\n                    filenames = toBeEncryptedFiles(path);\n    \n                    // passing the key ,path and filenames to encrypt\n    //              Encrypt(hexKey, fetched_nonce, path, filenames);\n                    Encrypt(fetched_key,fetched_nonce,path,filenames);\n                } else {\n                    System.out.println(&quot;exiting&quot;);\n                }\n    \n            } catch (IOException ioe) {\n    \n                ioe.printStackTrace();\n            }\n    \n        }\n    \n        public static void main(String[] args) {\n            System.out.println(&quot;In EncrAll&quot;);\n            String key=args[0];\n            String nonce=args[1];\n            init(key,nonce);\n    \n    \n    }\n    }\n    \n    \n    -------- Decrytpion.jar -----------\n    \n    public class DecrAll {\n    \n        public static void DecryptAll(String hexkey1, String nonce, String path, ArrayList filenames) {\n    \n            System.out.println(&quot;DecrAll: Decryption key&quot;);\n            // 256-bit key\n            byte[] key = Hex.decode(hexkey1);\n    \n            System.out.println(&quot;decryption key&quot;);\n            for(int i=0;i&lt;key.length;i++) {\n                System.out.print(key[i]+&quot; &quot;);\n            }\n            System.out.println();\n    \n            System.out.println(&quot;DecrAll: Decryption nonce&quot;);\n            // 8-byte nonce\n            byte[] iv = Hex.decode(nonce);\n            for(int i=0;i&lt;iv.length;i++) {\n                System.out.print(iv[i]+&quot; &quot;);\n            }\n            System.out.println();\n    \n            ChaChaEngine engine = new ChaChaEngine();\n            engine.init(false, new ParametersWithIV(new KeyParameter(key), iv));\n            ArrayList encryptedFilesToBeDeletd = new ArrayList();\n            try {\n    \n                // iterating over the filenames to encrypt them one by one\n                for (int i = 0; i &lt; filenames.size(); i++) {\n                    FileInputStream fis = null;\n                    FileOutputStream fop = null;\n    \n                    try {\n    File(path.concat(&quot;\\\\&quot;).concat((String) filenames.get(i)));\n                        File file = new File(path + File.separator + (String) filenames.get(i));\n    \n                        String filename = path + File.separator + (String) filenames.get(i);\n                        fis = new FileInputStream(file);\n                        byte[] encryptedBytes = new byte[(int) file.length()];\n                        fis.read(encryptedBytes);\n    \n                        byte[] decryptedBytes = new byte[encryptedBytes.length];\n                        engine.processBytes(encryptedBytes, 0, encryptedBytes.length, decryptedBytes, 0);\n    \n                        // Giving the encrypted file a new name/extension\n                        String unEncfile=filename.substring(0, filename.indexOf(&quot;.encr&quot;));\n                        fop = new FileOutputStream(unEncfile);\n                        fop.write(decryptedBytes);\n                        File file1 = new File(unEncfile);\n    \n                        if (file1.exists()) {\n                            System.out.println(&quot;adding file &quot; + filename + &quot; path for deletion&quot;);\n    \n                            // adding filenames for deletion once they are successfully encrypted\n                            encryptedFilesToBeDeletd.add(file.getAbsolutePath());\n                        } else {\n                            System.out.println(&quot;File &quot; + file1 + &quot; does not exist&quot;);\n                        }\n    \n                    } catch (IOException ioe) {\n                        ioe.printStackTrace();\n                    } finally {\n    \n                        try {\n                            if (fis != null) {\n                                fis.close();\n                            }\n                            if (fop != null) {\n                                fop.close();\n                            }\n    \n                        } catch (IOException ioe) {\n                            ioe.printStackTrace();\n                        }\n                    }\n                }\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n    \n            deleteEncryptedFiles(encryptedFilesToBeDeletd);\n    \n        }\n    \n        private static boolean deleteEncryptedFiles(ArrayList encryptedFilesToBeDeletd) {\n    \n            File f;\n            boolean allDeleted = true;\n            for (int i = 0; i &lt; encryptedFilesToBeDeletd.size(); i++) {\n                f = new File((String) encryptedFilesToBeDeletd.get(i));\n                System.out.println(f.getAbsolutePath());\n                try {\n                    f.delete();\n    \n                    if (f.exists()) {\n                        System.out.println(&quot;File &quot; + f.getName() + &quot; is not deleted&quot;);\n                        allDeleted = false;\n                    } else {\n                        System.out.println(&quot;File &quot; + f.getName() + &quot; is deleted successfully&quot;);\n                    }\n                } catch (SecurityException se) {\n                    se.printStackTrace();\n                }\n            }\n    \n            return allDeleted;\n        }\n    \n        private static String toHex(String input) {\n            StringBuffer hexString = new StringBuffer();\n    \n            for (int i = 0; i &lt; input.length(); i++) {\n                char c = input.charAt(i);\n                String hexKey = Integer.toHexString(c).toUpperCase();\n                hexString.append(hexKey);\n            }\n    \n            return hexString.toString();\n        }\n    \n        private static boolean checkInputKey(String provided_key) {\n    \n            if (provided_key.length() == 16 || provided_key.length() == 32) {\n                return true;\n            }\n    \n            else {\n                System.out.println(&quot;Not a valid key&quot;);\n                return false;\n            }\n    \n        }\n    \n        private static boolean checkFilePath(String path) {\n            boolean exists = false;\n            try {\n                File file = new File(path);\n                exists = file.exists();\n            } catch (NullPointerException npe) {\n                npe.printStackTrace();\n            }\n            return exists;\n    \n        }\n    \n        private String getKey() {\n            Properties properties = new Properties();\n            InputStream inputStream = null;\n            String key = &quot;&quot;;\n            try {\n                inputStream = getClass().getResourceAsStream(&quot;/Config.properties&quot;);\n                properties.load(inputStream);\n                key = properties.getProperty(&quot;CURRENT_KEY&quot;);\n    \n            } catch (IOException ioe) {\n                ioe.printStackTrace();\n            } catch (IllegalArgumentException iae) {\n                iae.printStackTrace();\n            }\n            return key;\n        }\n    \n        private String getNonce() {\n            Properties properties = new Properties();\n            InputStream inputStream = null;\n            String nonce = &quot;&quot;;\n            try {\n                inputStream = getClass().getResourceAsStream(&quot;/Config.properties&quot;);\n                properties.load(inputStream);\n                nonce = properties.getProperty(&quot;CURRENT_NONCE&quot;);\n    \n            } catch (IOException ioe) {\n                ioe.printStackTrace();\n            } catch (IllegalArgumentException iae) {\n                iae.printStackTrace();\n            }\n            return nonce;\n        }\n    \n        /*\n         * getting all the files present at &quot;path&quot; and filtering &quot;.txt&quot; files(i.e\n         * non-encrypted files) from them and returning that list\n         */\n        private static ArrayList toBeDecryptedFiles(String path) {\n            String[] list = null;\n            ArrayList decryptFiles = new ArrayList();\n    \n            try {\n                File file = new File(path);\n                list = file.list();\n                for (int i = 0; i &lt; list.length; i++) {\n                    if (list[i].endsWith(&quot;.txt.encr&quot;)) {\n                        decryptFiles.add(list[i]);\n                    }\n                }\n    \n            }\n    \n            catch (NullPointerException npe) {\n                npe.printStackTrace();\n            } catch (SecurityException sc) {\n                sc.printStackTrace();\n            }\n    \n            return decryptFiles;\n        }\n    \n        public static void init(String key, String nonce) {\n            String provided_nonce = nonce;\n            String provided_key = key;\n            System.out.println(provided_key);\n            System.out.println(provided_nonce);\n            DecrAll d = new DecrAll();\n    \n            ArrayList filenames = null;\n            BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n    \n            try {\n    \n            \n                System.out.println(&quot;enter the absolute file path \\n&quot;);\n                String path = br.readLine();\n    \n    \n                // checking if the fetched key and provided path is valid\n                boolean checkKey = checkInputKey(provided_key);\n                boolean checkPath = checkFilePath(path);\n    \n                if (!checkPath) {\n                    System.out.println(&quot;some issue with path&quot;);\n                }\n    \n                if (checkKey &amp;&amp; checkPath) {\n                    String hexKey = toHex(provided_key);\n                    System.out.println(hexKey);\n                    System.out.println(&quot;length:&quot; + hexKey.length() + &quot; size in bits: &quot; + hexKey.length() * 4);\n    \n                    // since key and path is valid getting the list of files to encrypt\n                    filenames = toBeDecryptedFiles(path);\n                    System.out.println(filenames.size());\n    \n                    // passing the key ,path and filenames to encrypt\n                    DecryptAll(hexKey, provided_nonce, path, filenames);\n                } else {\n                    System.out.println(&quot;exiting&quot;);\n                }\n    \n            } catch (IOException e) {\n    \n                e.printStackTrace();\n            }\n    \n        }\n    \n        public static void main(String[] args) {\n            System.out.println(&quot;Inside DecrAll&quot;);\n            String key = args[0];\n            String nonce = args[1];\n            init(key, nonce);\n    //\n        }\n    }`\n</code></pre>\n<p>I am working on a project where I am using chacha20 library with java 1.3 to encrypt and decrypt files on a user provided path. I created two jars Encryption.jar and Decryption.jar and tested it on windows platform and it is working as expected but while using the same jar files in Linuxmint the decryption process is not working correctly.\nTried going through my code and replaced all possible code segments to more platform independent code. But still facing the same issue.</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 124627427,
          "body": "still looking for a solution that could work with gradle 3.0"
        },
        {
          "comment_id": 124637133,
          "body": "Does it work fine from command line outside IDE?"
        },
        {
          "comment_id": 132607873,
          "body": "When it says &quot;Cannot use connection to Gradle distribution &#39;xxxx&#39; as it has been stopped&quot; I simply closed the project, quit android studio, and then relaunched Android Studio and opened the project and it worked, i.e., Gradle was not stopped and I could continue."
        }
      ],
      "answers": [
        {
          "answer_id": 75146234,
          "body": "<p>When it says &quot;Cannot use connection to Gradle distribution 'xxxx' as it has been stopped&quot; I simply closed the project, quit android studio, and then relaunched Android Studio and opened the project and it worked, i.e., Gradle was not stopped and I could continue.</p>\n"
        },
        {
          "answer_id": 76296255,
          "body": "<p>I just clicked <strong>Reload Gradle Project</strong> as shown in the picture and the issue is gone.</p>\n<p><a href=\"https://i.stack.imgur.com/AUfOT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AUfOT.png\" alt=\"enter image description here\" /></a></p>\n"
        }
      ],
      "last_activity_date": 1684600487,
      "question_id": 70456950,
      "body": "<p>so I have never had this happen before, I am trying to load a gradle project in IntelliJ idea, but I keep getting this following error.</p>\n<pre><code>Cannot use connection to Gradle distribution 'https://services.gradle.org/distributions/gradle-3.0-bin.zip' as it has been stopped.\n</code></pre>\n<p>Here is the logs of the gradle process</p>\n<pre><code>Download https://services.gradle.org/distributions/gradle-3.0-bin.zip finished, took 14 s 732 ms (69.3 MB)\n7:49:01 AM: Execution finished 'wrapper'.\n</code></pre>\n<p>Could not find anything on google that was useful.</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 82985425,
          "body": "what is the problem with the code that you have ?"
        }
      ],
      "answers": [
        {
          "answer_id": 48008674,
          "body": "<p>You need to set a <a href=\"https://developer.android.com/reference/android/media/MediaPlayer.html#setOnCompletionListener(android.media.MediaPlayer.OnCompletionListener)\" rel=\"nofollow noreferrer\">completion listener</a>:</p>\n\n<pre><code>mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {\n    void onCompletion(MediaPlayer mp) {\n        // Play next song\n    }\n});\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 82985591,
              "body": "OP is already using the random function"
            },
            {
              "comment_id": 82985643,
              "body": "using a new Random object each time the method is called is a bad idea"
            },
            {
              "comment_id": 82986028,
              "body": "Thanks for pointing out. I have edited my answer"
            },
            {
              "comment_id": 82987009,
              "body": "@Abhay You have, but you are still creating new Random objects. Add Random random = new Random() as a member of MainActivity and use it instead."
            },
            {
              "comment_id": 82987798,
              "body": "Thanks for aswering, but it&#39;s not working, after the song is finished it doesn&#39;t play the next random song. Do I need to call the OnCompletion method inside onCreate? @Abhay Tomar"
            },
            {
              "comment_id": 82988597,
              "body": "@djalmafreestyler you need to set the onCompletionListener both in onCreate() and onCompletion(): mediaPlayer.setOnCompletionListener(this);"
            },
            {
              "comment_id": 83067332,
              "body": "@O.O.Balance you are right. and thanks for pointing out. I have edited the answer. @djalmaffreestyler just write  <code>mediaPlayer.setOnCompletionListener(this);</code> inside your onCreate() method."
            },
            {
              "comment_id": 83075468,
              "body": "@AbhayTomar Sorry, I don&#39;t see the changes - your code still instantiates new Random objects in two places."
            },
            {
              "comment_id": 83085834,
              "body": "@O.O.Balance Check it now"
            },
            {
              "comment_id": 83087007,
              "body": "@AbhayTomar in your getRandom() method, you instantiate a new Random object every time it is called. Introducing an int randomSong makes no difference. Instead, declare a private Random random, initialise it once and use it every time in getRandom()."
            },
            {
              "comment_id": 83089703,
              "body": "Applied changes, thanks @O.O.Balance"
            }
          ],
          "answer_id": 48008716,
          "body": "<p>Try this, You need to implement <code>MediaPlayer.OnCompletionListener</code> interface\nin your activity</p>\n\n<pre><code>public class MainActivity extends AppCompatActivity implements MediaPlayer.OnCompletionListener {\n    private MediaPlayer mediaPlayer;\n    private int songs[];\n    private int randomSong;\n    private Random random = new Random();\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        mediaPlayer.setOnCompletionListener(this);\n        songs = new int[]{\n                R.raw.track1,\n                R.raw.track2,\n                R.raw.track3,\n                R.raw.track4,\n                R.raw.track5,\n                R.raw.track6,\n                R.raw.track7,\n                R.raw.track8,\n                R.raw.track9,\n                R.raw.track10,\n                R.raw.track11,\n                R.raw.track12,\n                R.raw.track13,\n                R.raw.track14,\n                R.raw.track15,\n                R.raw.track16,\n                R.raw.track17,\n        };\n\n\n        randomSong = getRandom(songs);\n        mediaPlayer = MediaPlayer.create(this, songs[randomSong]);\n        mediaPlayer.start();\n    }\n\n    @Override\n    public void onCompletion(MediaPlayer mediaPlayer) {\n        randomSong = getRandom(songs);\n        mediaPlayer = MediaPlayer.create(this, songs[randomSong]);\n        mediaPlayer.start();\n    }\n\n    public int getRandom(int[] array) {\n        return random.nextInt(array.length);\n    }\n}\n</code></pre>\n"
        },
        {
          "answer_id": 48008726,
          "body": "<p>You can use a listener to run a callback when the song has finished playing:</p>\n\n<pre><code>setOnCompletionListener(MediaPlayer.OnCompletionListener listener)\n</code></pre>\n\n<p>Also, to ensure randomness, I strongly recommend not using a new <code>Random</code> object each time you need a random number. Rather, declare a variable <code>random</code> and use that for all your randomness needs.</p>\n"
        }
      ],
      "last_activity_date": 1684600444,
      "question_id": 48008622,
      "body": "<p>I have an array of songs, My app play songs randomly when an activity is open but when the song is finished I would like to play another random song from the array, does anyone can help with it?</p>\n\n<pre><code>public MediaPlayer mediaPlayer;\nprivate int songs[];\n</code></pre>\n\n<p><br></p>\n\n<pre><code>songs = new int[] {\n    R.raw.track1,\n    R.raw.track2,\n    R.raw.track3,\n    R.raw.track4,\n    R.raw.track5,\n    R.raw.track6,\n    R.raw.track7,\n    R.raw.track8,\n    R.raw.track9,\n    R.raw.track10,\n    R.raw.track11,\n    R.raw.track12,\n    R.raw.track13,\n    R.raw.track14,\n    R.raw.track15,\n    R.raw.track16,\n    R.raw.track17,\n};\n\n\nint randomSong =  new Random().nextInt(songs.length);\nmediaPlayer = MediaPlayer.create(this, songs[randomSong]);\nmediaPlayer.start();\n</code></pre>\n"
    },
    {
      "last_activity_date": 1684600346,
      "question_id": 76296222,
      "body": "<p>I'm trying to start a tomEE server and deploy a simple webapp.</p>\n<p>I'm using Hibernate as the provider for jpa and postgres</p>\n<p>When i deploy the .war it gives me these errors (the stack is long i just put the severe):</p>\n<pre><code> SEVERE [http-nio-8080-exec-3] jdk.internal.reflect.NativeMethodAccessorImpl.invoke Error destroying child org.apache.catalina.LifecycleException: An invalid Lifecycle transition was attempted ([before_destroy]) for component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/servlet-jsp-jdbc-jpa]] in state [STARTING_PREP]\n---------------------\nSEVERE [http-nio-8080-exec-3] org.apache.openejb.assembler.classic.Assembler.destroyApplication undeployException original cause java.lang.Exception: deployment not found: servlet-jsp-jdbc-jpa.Comp669096535\n-------------------------\nSEVERE [http-nio-8080-exec-3] org.apache.openejb.assembler.classic.Assembler.destroyApplication undeployException original cause java.lang.Exception: persistence-unit: pu 1912458056localhost: Name &quot;openejb/PersistenceUnit/pu 1912458056localhost&quot; not found. \n.... \nCaused by: javax.naming.NameNotFoundException: Name &quot;openejb/PersistenceUnit/pu 1912458056localhost&quot; not found.\n---------------------------\nSEVERE [http-nio-8080-exec-3] org.apache.tomee.catalina.TomcatWebAppBuilder.startInternal Unable to deploy collapsed ear in war StandardEngine[Catalina].StandardHost[localhost].StandardContext[/servlet-jsp-jdbc-jpa] org.apache.openejb.OpenEJBException: Creating application failed: C:\\apache-tomee-microprofile-9.0.0\\webapps\\servlet-jsp-jdbc-jpa: UUID \n.......... \nCaused by: java.lang.NoSuchFieldError: UUID\n----------------------------\nSEVERE [http-nio-8080-exec-3] jdk.internal.reflect.NativeMethodAccessorImpl.invoke Error deploying web application archive [C:\\apache-tomee-microprofile-9.0.0\\webapps\\servlet-jsp-jdbc-jpa.war] java.lang.IllegalStateException: Error starting child \n........ \nCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/servlet-jsp-jdbc-jpa]] .............. \nCaused by: org.apache.tomee.catalina.TomEERuntimeException: org.apache.openejb.OpenEJBException: Creating application failed: C:\\apache-tomee-microprofile-9.0.0\\webapps\\servlet-jsp-jdbc-jpa: UUID \n.........\n Caused by: org.apache.openejb.OpenEJBException: Creating application failed: C:\\apache-tomee-microprofile-9.0.0\\webapps\\servlet-jsp-jdbc-jpa: UUID \n.......... \nCaused by: java.lang.NoSuchFieldError: UUID \n.........\n</code></pre>\n<p>The structure is:</p>\n<ul>\n<li><p>webapp</p>\n<ul>\n<li><p>META-INF</p>\n<ul>\n<li><p>persistence.xml</p>\n</li>\n<li><p>context.xml</p>\n</li>\n</ul>\n</li>\n<li><p>WEB-INF</p>\n<ul>\n<li>web.xml</li>\n</ul>\n<p>classes (where i put all the compiled classes)</p>\n<ul>\n<li><p>lib</p>\n<ul>\n<li>hibernate-core-6.2.2.Final.jar</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>index.html</p>\n</li>\n</ul>\n</li>\n</ul>\n<p>persistence.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;persistence version=&quot;2.2&quot;\n             xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence\n                                 http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd&quot;&gt;\n\n    &lt;!-- NO JNDI --&gt;\n    &lt;persistence-unit name=&quot;pu&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\n        &lt;provider&gt;org.hibernate.jpa.HibernatePersistenceProvider&lt;/provider&gt;\n        &lt;properties&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.driver&quot; value=&quot;org.postgresql.Driver&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.url&quot; value=&quot;jdbc:postgresql://localhost/MVC?currentSchema=public&amp;amp;ssl=false&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.user&quot; value=&quot;******&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.password&quot; value=&quot;********&quot;/&gt;\n            &lt;property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot; /&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n\n&lt;/persistence&gt;\n</code></pre>\n<p>context.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Context path=&quot;/servlet-jsp-jdbc-jpa&quot; &gt;\n&lt;/Context&gt;\n</code></pre>\n<p>web.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app&gt;\n    &lt;display-name&gt;servlet_jsp_jdbc_jpa&lt;/display-name&gt;\n&lt;/web-app&gt;\n</code></pre>\n<p>These are the classes that are using the persistence-unit</p>\n<pre><code>package jpa;\n\nimport jakarta.persistence.EntityManagerFactory;\nimport jakarta.persistence.Persistence;\nimport jakarta.persistence.PersistenceUnit;\n\npublic class PersistenceManager {\n\n    //@PersistenceUnit(unitName=&quot;JTA-pu&quot;)\n    private static final EntityManagerFactory emf;\n\n    static {\n        emf = Persistence.createEntityManagerFactory(&quot;pu&quot;);\n    }\n\n    private PersistenceManager() {\n    }\n\n    public static EntityManagerFactory getEmf() {\n        return emf;\n    }\n}\n</code></pre>\n<pre><code>package filters;\n\nimport jakarta.persistence.EntityManager;\nimport jakarta.persistence.EntityManagerFactory;\nimport jakarta.persistence.PersistenceContext;\nimport jakarta.persistence.PersistenceUnit;\nimport jakarta.servlet.*;\nimport jakarta.servlet.annotation.WebFilter;\nimport jakarta.servlet.http.HttpFilter;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\nimport jpa.PersistenceManager;\n\nimport java.io.IOException;\n\n@WebFilter(value=&quot;/*&quot;)\npublic class SessionBinderFilter extends HttpFilter {\n\n    // @PersistenceUnit(unitName=&quot;JTA-pu&quot;)\n    private EntityManagerFactory emf = PersistenceManager.getEmf();\n\n    // @PersistenceContext(unitName=&quot;JTA-pu&quot;)\n    private EntityManager em = emf.createEntityManager();\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) throws IOException, ServletException {\n\n        if (!(request instanceof HttpServletRequest) || !(response instanceof HttpServletResponse)) {\n            throw new ServletException(&quot;non-HTTP request or response&quot;);\n        }\n\n        request.setAttribute(&quot;EntityManager&quot;, em);\n\n        filterChain.doFilter(request, response);\n\n        if (em.isOpen()) {\n            em.close();\n        }\n    }\n}\n</code></pre>\n<p>I can t understand the problem because i'm quite new on jpa and i searched a lot but i didn t find anything.</p>\n<p>I tried also with JTA and RESOURCE_LOCAL with JNDI but nothing works, the problem is the same.</p>\n<p>Any suggest or information is appreciated</p>\n"
    },
    {
      "last_activity_date": 1684600275,
      "question_id": 76296211,
      "body": "<p>I have layout of a recycler view adapter where it shows lot of colors in grid view , basically what i want is that when the view is clicked i want to zoom it out little bit and give it some shadow against all the other views as shown in below image , i appreciate your help in advance .</p>\n<ul>\n<li>This is example image</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/e6cUr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/e6cUr.png\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li>Layout item</li>\n</ul>\n<pre><code>\n&lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;&gt;\n\n    &lt;View\n        android:id=&quot;@+id/colorView&quot;\n        android:layout_width=&quot;30dp&quot;\n        android:layout_height=&quot;30dp&quot;\n        android:layout_margin=&quot;0dp&quot; /&gt;\n\n&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;\n\n</code></pre>\n<ul>\n<li>My adapter class</li>\n</ul>\n<pre><code>\n  public class SwatchedAdapter extends RecyclerView.Adapter&lt;SwatchedAdapter.ViewHolder&gt; {\n    \n    private final ArrayList&lt;ColorsModel&gt; colorsList;\n\n    public SwatchedAdapter(ArrayList&lt;ColorsModel&gt; colorsList){\n        this.colorsList = colorsList;\n    }\n\n    static class ViewHolder extends RecyclerView.ViewHolder {\n        private View view;\n        public ViewHolder(@NonNull View itemView) {\n            super(itemView);\n            view = itemView.findViewById(R.id.colorView);\n        }\n    }\n\n    @NonNull\n    @Override\n    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.color_palette_item,parent,false);\n        return new ViewHolder(view);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {\n        ColorsModel model = colorsList.get(position);\n        holder.view.setBackgroundColor(Color.parseColor(model.getHexColor()));\n        holder.view.setOnClickListener(v -&gt; {\n            v.setScaleX(0.6f);\n            v.setScaleY(0.6f);\n            if(listener != null){\n                if(holder.getAdapterPosition() != RecyclerView.NO_POSITION){\n                    listener.onPicked(model.getHexColor());\n                }\n            }\n        });\n\n    }\n\n    @Override\n    public int getItemCount() {\n        return colorsList.size();\n    }\n\n\n    private OnColorPickListener listener;\n    public interface OnColorPickListener {\n        void onPicked(String hexColor);\n    }\n    public void onItemClick(OnColorPickListener listener){\n        this.listener = listener;\n    }\n\n}\n</code></pre>\n"
    },
    {
      "answers": [
        {
          "answer_id": 46528008,
          "body": "<p>Sounds like you have a 32/64-bit problem. Presumably previously you were using a 32-bit OS and 32-bit Java etc.</p>\n\n<p>Now you are using a 64-bit Java which needs a 64-bit DLL (presumably because it is itself 64-bit). But whatever framework you are using has a fixed name and is looking for the 32-bit library. If you want to fix that you'll need to change whatever it is that has the fixed name, presumably ghost4j.</p>\n\n<p>This isn't a Ghostscript question and I can't tell you how to change Ghost4j I'm afraid. You could use a 32-bit Java installation or, as you've already done, simply rename the DLL.</p>\n"
        }
      ],
      "last_activity_date": 1684599327,
      "question_id": 46526296,
      "body": "<p>I have a project in which I use: ghost4j (0.3.3) and gsdll32.dll.</p>\n<p>But new Operation System (Win 10) are 64 and Swing Application (Java 1.6) return error Unable to load library 'gsdll32'.</p>\n<p>I downloaded file gsdll64 and if I changed the name to gsdll32 everything works properly.\nNotwithstanding, I want to use file with right name (gsdll64).</p>\n<p>I tried to change version of ghost4j, unfortunately it still evokes gsdll32.</p>\n<p>P.S. Sorry for my English</p>\n<p>Somebody can help me?</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134542210,
          "body": "Your question is &quot;do I have to remember this logic ?&quot; What logic? And how would we know if you have to remember it or not."
        },
        {
          "comment_id": 134542429,
          "body": "Its not clear what you want, the strategy you have shown isn&#39;t going to work if there are more than one odd number of repetitions of any of the values. Example <code>{ 2, 2, 2, 5 }</code>"
        },
        {
          "comment_id": 134544766,
          "body": "Is it supposed to be guaranteed that there will be only one value in the array that occurs exactly once and every other value in the array will occur exactly twice? When You had a value that occurred more than twice, was that an allowable example? Or was it a mistake someone made in creating test data?"
        }
      ],
      "last_activity_date": 1684599167,
      "question_id": 76296152,
      "body": "<pre><code>int[] nums = {1, 1, 3, 5, 4, 4, 5}; int single = 0;\n\nfor (int num : nums) {\n    single = single ^ num;\n}\n\nSystem.out.println(single); \n</code></pre>\n<p>I want to print a number from the array that is repeated only once. Rest of numbers are repeated twice. E.g int[] nums = {6,5,2,5,2,8,3,8,6}; // output will be 3.</p>\n<p>I know how given program is working internally. I'm confused that do I have to remember this logic ? when the number is repeated more than twice then program is showing undesired results</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134541472,
          "body": "Please don&#39;t use images for text here."
        }
      ],
      "answers": [
        {
          "answer_id": 76295844,
          "body": "<p>You are not adding the Jar file to the classpath when executing your class. Add -cp File.Jar to the command line, where file.jar is the real name of the driver jar.</p>\n"
        },
        {
          "answer_id": 76295910,
          "body": "<p>there are a couple of errors in your code:</p>\n<p>In the <code>Driver class</code> name: It should be <code>Driver</code> instead of <code>Drive</code>. The correct line should be:</p>\n<pre><code>Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n</code></pre>\n<p>Make sure your <code>Database Name</code>, <code>Port Number</code>, <code>username</code> &amp; <code>password</code> are correct. I have used <code>finally</code> additional in your code for closing the connection.</p>\n<p>Here is the updated version of your code :</p>\n<pre><code>import java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.SQLException;\nimport java.util.logging.Level;\nimport java.util.logging.Logger;\n\npublic class App {\n    public static void main(String[] args) {\n        App pro = new App();\n        pro.createConnection();\n    }\n\n    void createConnection() {\n        Connection con = null;\n        try {\n            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n            con = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/mydb&quot;, &quot;root&quot;, &quot;root&quot;);\n            System.out.print(&quot;testinggg&quot;);\n        } catch (ClassNotFoundException ex) {\n            Logger.getLogger(App.class.getName()).log(Level.SEVERE, null, ex);\n        } catch (SQLException ex) {\n            Logger.getLogger(App.class.getName()).log(Level.SEVERE, null, ex);\n        } finally {\n            if (con != null) {\n                try {\n                    con.close();\n                } catch (SQLException ex) {\n                    Logger.getLogger(App.class.getName()).log(Level.SEVERE, null, ex);\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684598882,
      "question_id": 76295793,
      "body": "<p>java.lang.ClassNotFoundException: com.mysql.jdbc.Driver</p>\n<pre><code>import java.sql.Connection; \nimport java.sql.DriverManager;\nimport java.sql.SQLException;\nimport java.util.logging.Level; \nimport java.util.logging.Logger;\n\n\npublic class App {\npublic static void main(String[] args) {\n    App pro = new App();\n    pro.createConnection(); \n}\n    \n    void createConnection(){ \n        try{\n            Class.forName(&quot;com.mysql.cj.jdbc.Drive&quot;);\n            Connection con = \n  DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/mydb&quot;, &quot;root&quot;,&quot;root&quot;); \n            System.out.print(&quot;testinggg&quot;);\n        }catch(ClassNotFoundException ex){\n            \n Logger.getLogger(App.class.getName()).log(Level.SEVERE, null, ex);\n        } catch (SQLException ex){\n            \n Logger.getLogger(App.class.getName()).log(Level.SEVERE, null, ex);\n        }\n    }\n\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/8ukC1.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nim very new to database, and just trying to learn it. in the img i copied here, you can see the code and the error: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver. i already add the connector jar file but still getting error. idk how am i going to fix it\nim using vs code btw</p>\n"
    },
    {
      "answers": [
        {
          "comments": [
            {
              "comment_id": 134541000,
              "body": "I see. I tried that earlier but had some strange things happen, like i had to click multiple times for it to actually recognize the click.  Can it be due to an internal issue with the <code>mouseListener</code> and <code>mouseEvent</code>?"
            },
            {
              "comment_id": 134541014,
              "body": "@nortain32: It is extremely unlikely that the bug that you&#39;re describing has its origin in Java itself. <i>Always</i> assume that the bug is in <i>your</i> code, until solidly proven otherwise."
            },
            {
              "comment_id": 134541145,
              "body": "@nortain32: although I will suggest that you avoid listening to mouseClicked and instead listen to mousePressed or mouseReleased. For mouseclicked to work, the mouse shouldn&#39;t move between press and release which can result in the issue that you&#39;re describing. This is not a problem for the other two methods of the MouseListener."
            },
            {
              "comment_id": 134541177,
              "body": "Oh I see. Yeah, maybe that&#39;s what&#39;s causing it. Another thing - the click also seem to only work when in the inner while loop, i add a <code>Thread.sleep(1)</code>, to lower the times per second it runs. Do you have any idea if it&#39;s related to the problem I described earlier?"
            },
            {
              "comment_id": 134541185,
              "body": "@nortain32: Swing GUI code should not have and should <i>never</i> have a <code>Thread.sleep</code> within it. This type of code risks blocking the Swing event thread which will freeze the entire program, including all graphics, making it completely non-responsive. Re-think that code."
            },
            {
              "comment_id": 134541399,
              "body": "I updated the code and the question. Mind taking a look?"
            },
            {
              "comment_id": 134541414,
              "body": "??? @nortain32: you have not appeared to have made any changes based on my suggestions. You still have Thread.sleep, still have the while loop."
            },
            {
              "comment_id": 134541468,
              "body": "Yeah, I think I undertstood you wrong. Im updating now."
            },
            {
              "comment_id": 134541476,
              "body": "@nortain32: understand that you will likely need to almost completely re-write your program"
            },
            {
              "comment_id": 134541505,
              "body": "Yeah, I see. But what I still don&#39;t understand is why does it only work if I do <code>Thread.sleep(1)</code> (I changed to <code>mousePressed</code>.  When rewriting the program, I would need another way to do it, so I need to be able to answer this question first."
            },
            {
              "comment_id": 134541537,
              "body": "@nortain32: without the thread sleep, you have a &quot;tight&quot; while loop, one that completely hogs the CPU, that blocks the event thread, and prevents any Swing GUI interaction or drawing."
            },
            {
              "comment_id": 134541543,
              "body": "@nortain32: for example..."
            },
            {
              "comment_id": 134541729,
              "body": "Amazing. You helped me a lot to understand it better. Thank you!"
            }
          ],
          "answer_id": 76295186,
          "body": "<p>You're falling into a common trap for programmers who are new to creating event-driven programs: you're coding this as if it were a linear console program, for example one that uses Scanner based on System.in and println, using a while loop to allow the code to do repetitive action, when this will simply not work in GUI coding. Instead, you should wait for user input by listening for user <em>events</em> such as ActionListeners to listen for button presses, or MouseListeners for mouse actions, and you should remove the while loop. Instead of a while loop, base the program's response to the user's input on the <em><strong>state</strong></em> of the program, the values held by key state fields. The key paradigms to use are:</p>\n<ul>\n<li>Event-driven programming, and</li>\n<li>The State Design Pattern</li>\n</ul>\n<p>So here, those fields could be something like:</p>\n<ul>\n<li><code>private boolean whitesTurn;</code> -- if true listen for white to make moves. If false, ignore white's input</li>\n<li><code>private ChessCell firstClick;</code> this could hold the cell that gets the first click. If null, then the player hasn't made a first click yet, but if it isn't null and holds a viable chess board cell (however your define it), then a first click has been made and the next click may be on the second location</li>\n</ul>\n<p>For a example, please see the code below. Note however that for the sake of brevity, this example does not use M-V-C -- Model-View-Controller, which I do recommend that you use.</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport java.awt.event.MouseEvent;\nimport java.awt.image.BufferedImage;\nimport javax.swing.*;\n\npublic class TestChess {\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new Runnable() {\n            public void run() {\n                createAndShowGUI();\n            }\n\n            private void createAndShowGUI() {\n                JFrame frame = new JFrame(&quot;Simple Chess&quot;);\n                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n                frame.add(new GameBoardPanel());\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n            }\n        });\n    }\n}\n</code></pre>\n<pre><code>class GameBoardPanel extends JPanel {\n    public static final String WHITE = &quot;WHITE&quot;;\n    public static final String BLACK = &quot;BLACK&quot;;\n    public static final int ROWS = 8;\n    public static final int COLS = 8;\n    private JPanel[][] board = new JPanel[ROWS][COLS];\n    private JPanel boardPanel = new JPanel(new GridLayout(ROWS, COLS));\n    private JLabel whitePiece;\n    private JLabel blackPiece;\n    private JLabel statusLabel = new JLabel(WHITE);\n    private boolean isWhiteTurn = true;\n    private ChessCellPanel firstSelectedCell = null;\n\n    public GameBoardPanel() {\n        whitePiece = new JLabel(createIcon(new Color(240, 240, 240)));\n        blackPiece = new JLabel(createIcon(new Color(20, 20, 20)));\n\n        setLayout(new GridLayout(ROWS, COLS));\n        MyMouse myMouse = new MyMouse();\n        for (int row = 0; row &lt; ROWS; row++) {\n            for (int col = 0; col &lt; COLS; col++) {\n                ChessCellPanel cellPanel = new ChessCellPanel(row, col);\n                cellPanel.addMouseListener(myMouse);\n                boardPanel.add(cellPanel);\n                board[row][col] = cellPanel;\n            }\n        }\n\n        addPiece(ROWS - 1, COLS - 1, whitePiece);\n        addPiece(0, 0, blackPiece);\n\n        JPanel statusPanel = new JPanel();\n        statusPanel.add(new JLabel(&quot;Turn: &quot;));\n        statusPanel.add(statusLabel);\n\n        setLayout(new BorderLayout());\n        add(boardPanel);\n        add(statusPanel, BorderLayout.PAGE_END);\n    }\n\n    private class MyMouse extends MouseAdapter {\n        @Override\n        public void mousePressed(MouseEvent e) {\n            ChessCellPanel cellPanel = (ChessCellPanel) e.getSource();\n            if (cellPanel.getComponents().length &gt; 0 &amp;&amp; firstSelectedCell == null) {\n                JLabel piece = (JLabel) cellPanel.getComponent(0);\n                if (piece == (isWhiteTurn ? whitePiece : blackPiece)) {\n                    firstSelectedCell = cellPanel;\n                    cellPanel.setBackground(Color.YELLOW);\n                }\n            } else if (firstSelectedCell != null) {\n                if (cellPanel == firstSelectedCell) {\n                    firstSelectedCell.setBackground(cellPanel.getCellColor());\n                    firstSelectedCell = null;\n                } else {\n                    cellPanel.removeAll();\n                    cellPanel.add(firstSelectedCell.getComponent(0));\n                    firstSelectedCell.removeAll();\n                    firstSelectedCell.setBackground(firstSelectedCell.getCellColor());\n                    firstSelectedCell = null;\n                    isWhiteTurn = !isWhiteTurn;\n                    statusLabel.setText(isWhiteTurn ? WHITE : BLACK);\n                }\n                boardPanel.revalidate();\n                boardPanel.repaint();\n            }\n        }\n    }\n\n    private void addPiece(int i, int j, JLabel piece) {\n        ChessCellPanel cellPanel = (ChessCellPanel) board[i][j];\n        cellPanel.add(piece);\n    }\n\n    private Icon createIcon(Color color) {\n        int width = ChessCellPanel.CELL_SIZE - 20;\n        int height = ChessCellPanel.CELL_SIZE - 20;\n        BufferedImage img = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);\n        Graphics2D g2d = img.createGraphics();\n        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n        g2d.setColor(color);\n        g2d.fillOval(4, 4, width - 8, height - 8);\n        g2d.setStroke(new BasicStroke(3f));\n        g2d.setColor(Color.BLACK);\n        g2d.drawOval(4, 4, width - 8, height - 8);\n        g2d.dispose();\n        return new ImageIcon(img);\n    }\n\n}\n</code></pre>\n<pre><code>class ChessCellPanel extends JPanel {\n    public static final int CELL_SIZE = 100;\n    private static final Color LIGHT_COLOR = new Color(240, 217, 181);\n    private static final Color DARK_COLOR = new Color(181, 136, 99);\n    private int row;\n    private int col;\n    private Color cellColor;\n\n    public ChessCellPanel(int row, int col) {\n        this.row = row;\n        this.col = col;\n        this.cellColor = (row + col) % 2 == 0 ? LIGHT_COLOR : DARK_COLOR;\n        setBackground(cellColor);\n        setLayout(new GridBagLayout());\n    }\n\n    public int getRow() {\n        return row;\n    }\n\n    public int getCol() {\n        return col;\n    }\n\n    public Color getCellColor() {\n        return cellColor;\n    }\n\n    @Override\n    public Dimension getPreferredSize() {\n        return new Dimension(CELL_SIZE, CELL_SIZE);\n    }\n}\n</code></pre>\n<hr />\n<p>The key to this example is in the MouseListener (actually a MouseAdapter) which does the following:</p>\n<ol>\n<li>Gets the JPanel that was clicked</li>\n<li>Checks\n<ul>\n<li>if the JPanel holds a component, a JLabel</li>\n<li>also if the key state variable, <code>firstSelectedCell</code> is null, if no chess piece has been selected</li>\n</ul>\n</li>\n<li>If the cell holds a piece and first selected cell is null, then\n<ul>\n<li>checks the &quot;color&quot; of the piece and whose turn it is.</li>\n<li>If color and turn match, it then sets the <code>firstSelectedCell</code> state field with this cell</li>\n<li>Show that the cell has been selected (here set its background color)</li>\n</ul>\n</li>\n<li>Otherwise, if firstSelectedCell isn't null, then,\n<ul>\n<li>a chess piece has already been selected</li>\n<li>this is now the <em>second</em> mouse press</li>\n</ul>\n</li>\n<li>If the cell for the second press is the same as the first press, oops</li>\n<li>Otherwise we're good:\n<ul>\n<li>remove the chess piece from the first cell</li>\n<li>move it to the second cell</li>\n<li>reset firstSelectedCell to null</li>\n<li>toggle <code>isWhiteTurn</code></li>\n<li>Change status label to show that it is white's turn</li>\n</ul>\n</li>\n<li>Tell the layout managers to re-layout components, and request that the chess board be re-painted</li>\n</ol>\n<pre><code>@Override\npublic void mousePressed(MouseEvent e) {\n    ChessCellPanel cellPanel = (ChessCellPanel) e.getSource(); //1\n    \n    // 2\n    if (cellPanel.getComponents().length &gt; 0 &amp;&amp; firstSelectedCell == null) {\n        // 3\n        JLabel piece = (JLabel) cellPanel.getComponent(0);\n        if (piece == (isWhiteTurn ? whitePiece : blackPiece)) {\n            firstSelectedCell = cellPanel;\n            cellPanel.setBackground(Color.YELLOW);\n        }\n    } else if (firstSelectedCell != null) {\n        // 4\n        if (cellPanel == firstSelectedCell) {\n            // 5\n            firstSelectedCell.setBackground(cellPanel.getCellColor());\n            firstSelectedCell = null;\n        } else {\n            // 6\n            cellPanel.removeAll();\n            cellPanel.add(firstSelectedCell.getComponent(0));\n            firstSelectedCell.removeAll();\n            firstSelectedCell.setBackground(firstSelectedCell.getCellColor());\n            firstSelectedCell = null;\n            isWhiteTurn = !isWhiteTurn;\n            statusLabel.setText(isWhiteTurn ? WHITE : BLACK);\n        }\n        // 7\n        boardPanel.revalidate();\n        boardPanel.repaint();\n    }\n}\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684598778,
      "question_id": 76295163,
      "body": "<p>I am trying to build a chess game with a GUI interface using Java's Swing library. When I start the game, a window with the chess board opens.</p>\n<p>What I'm stuck on, is that each time, I want to wait for the current player to make a move, and not run the while loop infinitely, since this is not very efficient.</p>\n<p>Here's the code and explanation afterwards:</p>\n<pre><code>private void startGame()\n{\n    while (!board.terminalBoard())\n    {\n        Move movePlayed = null;\n\n        // whilist making the move returns false, meaning we cant do it...\n        while (canMakeMove(movePlayed))\n        {\n            // TODO: Implement the getting move here\n        }\n        \n        // If move is okay, make it\n        board.movePiece(movePlayed.getStart(), movePlayed.getEnd());\n    \n        // Repaint the chessboard\n        chessboard.loadImages(board);\n        chessboard.repaintBoard();\n\n        currColor ^= Piece.BLACK;\n    }\n}\n</code></pre>\n<p>In the inner while loop, while the move the was played by the user is invalid, it iterates again and should wait for another move.\nWhat I do not understand is how I can wait for the player to make a move.</p>\n<p>In my case, a player can make a move by clicking 2 times on the board - source square and destination square. And then my function checks if it is valid.</p>\n<p>How do I wait for the user to click 2 times on the Java Swing window?</p>\n<hr />\n<p>Edited code:\nThe thing is, if i remove the thread.sleep like you said, the app does not respond to my clicks.</p>\n<pre><code>private void startGame()\n    {\n        while (!board.terminalBoard())\n        {\n            Move movePlayed = chessboard.getMove(board);\n\n            // whilist making the move returns false, meaning we cant do it...\n            if(canMakeMove(movePlayed))\n            {\n                // If move is okay, make it\n                board.movePiece(movePlayed.getStart(), movePlayed.getEnd());\n            \n                // Repaint the chessboard\n                chessboard.loadImages(board);\n                chessboard.repaintBoard();\n\n                currColor ^= Piece.BLACK;\n            }\n\n            /* try {\n                Thread.sleep(1);\n            } catch (InterruptedException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            } */\n        }\n    }\n</code></pre>\n"
    },
    {
      "comments": [
        {
          "comment_id": 133240486,
          "body": "What is the problem exactly? Cant you determine lat,lon? Or cant you send them? Or cant you receive them?"
        },
        {
          "comment_id": 133240515,
          "body": "<code>keep return 0,0 in latitude and longitude </code> Whic function are you calling that returns 0,0?"
        },
        {
          "comment_id": 133240535,
          "body": "<code>But the longitude and latitude return 0,0 in my URL. </code> Sooy, but i do not understand that sentence."
        },
        {
          "comment_id": 133240674,
          "body": "my app is about sending an sms with an url (with longitude and latitude). I call the methode <code>onSuccess</code> . The sms sent but the logitude and latitude are 0. This the url that has sent : <b><a href=\"http://maps.google.com/maps?saddr=0.0,0.0\" rel=\"nofollow noreferrer\">maps.google.com/maps?saddr=0.0,0.0</a></b>"
        },
        {
          "comment_id": 133240785,
          "body": "<code>smsBody.append(Uri.parse(uri));</code> Why mess around with Uri? Better: <code>smsBody.append(uri);</code> And sorry uri is no uri but an url."
        },
        {
          "comment_id": 133241170,
          "body": "i did that but it&#39;s still the same."
        },
        {
          "comment_id": 133241222,
          "body": "So you send <code>saddr=0.0,0.0 </code>. Why? Also i had three questions in my first comment. You could answer them one by one as now i dont know what&#39;s happening."
        },
        {
          "comment_id": 133241329,
          "body": "the ptoblem is i don&#39;t get my current location (lon and lat)"
        },
        {
          "comment_id": 133241339,
          "body": "yes i cant dtermine lat and lon it keep give 0 in lat and lon"
        },
        {
          "comment_id": 133241353,
          "body": "Well then why talking abouty sending an sms? You will not send an sms if you cannot get your location we think. So change your post. Remove the snms stuff and tell your app cannot determine location. As it is now you blame the sms thing. Very confusing."
        },
        {
          "comment_id": 133241356,
          "body": "When i sent SMS this is the URL that i get :  maps.google.com/maps?saddr=0.0,0.0"
        },
        {
          "comment_id": 133241365,
          "body": "i should get the current lon and lat in my URL but instead i get 0.0 , 0.0"
        },
        {
          "comment_id": 133241379,
          "body": "If you get 0.0,0.0 then you sent 0.0,0.0. Check for null&#39;s before sending an sms."
        },
        {
          "comment_id": 133241437,
          "body": "how i can sheck for null&#39;s"
        },
        {
          "comment_id": 133241468,
          "body": "if ( currentLocation.getLatitude() == 0) ..."
        },
        {
          "comment_id": 133241485,
          "body": "<code>double lat = object.getLatitude(); double lng = object.getLongitude();</code> You are not using those values. After that you call onSuccess() where you use other variables."
        }
      ],
      "answers": [
        {
          "answer_id": 75520494,
          "body": "<p>You are creating an instance of <code>Location</code> yourself:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Location object = new Location(&quot;service Provider&quot;);\n</code></pre>\n<p>That will have a location of 0,0 because you did not tell it where the location is.</p>\n<p>If you are expecting to actually get the device location, you cannot create the instance of <code>Location</code> yourself, as you are doing. You need to <a href=\"https://developer.android.com/reference/android/location/LocationManager\" rel=\"nofollow noreferrer\">use <code>LocationManager</code></a> to obtain the <code>Location</code>.</p>\n"
        }
      ],
      "last_activity_date": 1684597930,
      "question_id": 75518801,
      "body": "<p>I am trying to get longitude and latitude and send it via SMS to saved contact. But the longitude and latitude return 0,0 in my URL.\nHow can I fix that? I tried some solution that I found here but it doesn't work for me.</p>\n<p>This is my code:</p>\n<pre><code>protected void onCreate(Bundle savedInstanceState) {\n\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    // check for runtime permissions\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) == PackageManager.PERMISSION_DENIED) {\n            requestPermissions(new String[]{Manifest.permission.ACCESS_FINE_LOCATION, Manifest.permission.SEND_SMS, Manifest.permission.READ_CONTACTS}, 100);\n        }\n    }\n\n    // this is a special permission required only by devices using\n    // Android Q and above. The Access Background Permission is responsible\n    // for populating the dialog with &quot;ALLOW ALL THE TIME&quot; option\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n        requestPermissions(new String[]{Manifest.permission.ACCESS_BACKGROUND_LOCATION}, 100);\n    }\n\n\n\n    button1 = findViewById(R.id.Button1);\n    listView = (ListView) findViewById(R.id.ListView);\n    db = new DbHelper(this);\n    list = db.getAllContacts();\n    customAdapter = new CustomAdapter(this, list);\n    listView.setAdapter(customAdapter);\n    send = findViewById(R.id.send);\n\n    button1.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            // calling of getContacts()\n            if (db.count() != 5) {\n                Intent intent = new Intent(Intent.ACTION_PICK, ContactsContract.Contacts.CONTENT_URI);\n                startActivityForResult(intent, PICK_CONTACT);\n            } else {\n                Toast.makeText(MainActivity.this, &quot;Can't Add more than 5 Contacts&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    });\n    send.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            Location object = new Location(&quot;service Provider&quot;);\n            double lat = object.getLatitude(); double lng = object.getLongitude();\n            onSuccess(object);\n        }\n    });\n\n}\n\npublic void onSuccess(Location currentLocation) {\n\n    String uri = &quot;http://maps.google.com/maps?saddr=&quot; + currentLocation.getLatitude()+&quot;,&quot;+currentLocation.getLongitude();\n    StringBuffer smsBody = new StringBuffer();\n    smsBody.append(Uri.parse(uri));\n        // get the SMSManager\n        SmsManager smsManager = SmsManager.getDefault();\n\n        // get the list of all the contacts in Database\n        DbHelper db = new DbHelper(MainActivity.this);\n        List&lt;ContactModel&gt; list = db.getAllContacts();\n\n        // send SMS to each contact\n        for (ContactModel c : list) {\n            String message = &quot;Hey, &quot; + c.getName() + &quot;I am in DANGER, i need help. Please urgently reach me out. Here are my coordinates.\\n &quot; + uri;\n            smsManager.sendTextMessage(c.getPhoneNo(), null, message, null, null);\n        }\n}\n@Override\npublic void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n    super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n    if (requestCode == 100) {\n        if (grantResults[0] == PackageManager.PERMISSION_DENIED) {\n            Toast.makeText(this, &quot;Permissions Denied!\\n Can't use the App!&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n}\n\n@Override\nprotected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n\n    // get the contact from the PhoneBook of device\n    switch (requestCode) {\n        case (PICK_CONTACT):\n            if (resultCode == Activity.RESULT_OK) {\n\n                Uri contactData = data.getData();\n                Cursor c = managedQuery(contactData, null, null, null, null);\n                if (c.moveToFirst()) {\n\n                    String id = c.getString(c.getColumnIndexOrThrow(ContactsContract.Contacts._ID));\n                    String hasPhone = c.getString(c.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER));\n                    String phone = null;\n                    try {\n                        if (hasPhone.equalsIgnoreCase(&quot;1&quot;)) {\n                            Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID + &quot; = &quot; + id, null, null);\n                            phones.moveToFirst();\n                            phone = phones.getString(phones.getColumnIndex(&quot;data1&quot;));\n                        }\n                        String name = c.getString(c.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));\n                        db.addcontact(new ContactModel(0, name, phone));\n                        list = db.getAllContacts();\n                        customAdapter.refresh(list);\n                    } catch (Exception ex) {\n                    }\n                }\n            }\n            break;\n    }\n}\n</code></pre>\n<p>And I am using Oreo version for Android. And for manifest: SEND_SMS , INTERNET , ACCESS_COARSE_LOCATION , ACCESS_FINE_LOCATION , READ_CONTACTS.</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 94568385,
          "body": "Note, though, (if you&#39;ve been using python3.x) that in Java, dividing two integers will always use floor division."
        },
        {
          "comment_id": 94568418,
          "body": "Java int division is not quite the same as Python&#39;s floor division. <code>&#47;&#47;</code> rounds towards negative infinity. Java int division rounds towards zero. But <code>5 &#47; 2</code> in Java will give you 2, if that is what you&#39;re after."
        },
        {
          "comment_id": 103475268,
          "body": "You are looking for <code>Math.floorDiv()</code>."
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 103475174,
              "body": "This isn&#39;t even correct. <code>Math.floor(a &#47; b)</code> gives the same result as <code>a &#47; b</code> when <code>a</code> and <code>b</code> have type <code>int</code>. In Python <code>5 &#47;&#47; -2</code> gives <code>-3</code> where in Java <code>Math.floor(5 &#47; -2)</code> gives <code>-2.0</code>."
            }
          ],
          "answer_id": 53860353,
          "body": "<p>You can do</p>\n\n<pre><code>double val = 5 / 2;\nint answer = Math.floor(val);\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>int answer = Math.floorDiv(5, 2);\n</code></pre>\n\n<p>If you were to call <code>System.out.println(answer);</code> the output would be</p>\n\n<blockquote>\n  <p>2</p>\n</blockquote>\n"
        },
        {
          "answer_id": 60224666,
          "body": "<p>You can easily use Math.floorDiv() method.\nFor example:</p>\n\n<pre><code>int a = 15, b = 2; \nSystem.out.println(Math.floorDiv(a, b));\n// Expected output: 7\n</code></pre>\n"
        },
        {
          "answer_id": 72417682,
          "body": "<p>If you're using integers in the division and you cast the solution to another integer (by storing the result in another integer variable), the division is already a floor division:</p>\n<pre><code>int a = 5;\nint b = 2;\nint c = 5/2;\nSystem.out.println(c);\n&gt;&gt; 2\n</code></pre>\n<p>As khelwood stated, it also works with negative values but the rounding is done towards 0. For example, -1.7 would be rounded to -1.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 132826678,
              "body": "Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/75260612/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."
            }
          ],
          "answer_id": 75260612,
          "body": "<p>use floorDiv()</p>\n<pre><code>int x = 10;\nint y = 3;\nSystem.out.println(Math.floorDiv(x,y));\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684596288,
      "question_id": 53860132,
      "body": "<p>I know that in Python you can do floor division like this:</p>\n<pre><code>5 // 2 #2\n</code></pre>\n<p>The <code>//</code> is used for something totally different in Java. Is there any way to do floor division in Java?</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 123634984,
          "body": "try to downgrade java version to 7 if you are using newer version. sometimes it happens because of that (Hence it is not worked for me may be because of some other dependencies conflict )"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 123635078,
              "body": "yes, sometimes this is the standard  steps for resolve gradle dependencies error. clean , build and delete cache. but it is not worked for me as I also mentioned it in my Question. also follows  same steps that you provided in   <a href=\"https://stackoverflow.com/questions/55756647/duplicate-classes-from-androidx-and-com-android-support/55756749#55756749\" title=\"duplicate classes from androidx and com android support\">stackoverflow.com/questions/55756647/&hellip;</a>"
            }
          ],
          "answer_id": 69850947,
          "body": "<p>Usually I encountered this duplicate error(s) whenever I tried to migrate to a newer version especially in your case, migrating to <a href=\"https://developer.android.com/jetpack/androidx/migrate\" rel=\"nofollow noreferrer\">androidx</a>.</p>\n<p>I recommend you to clean and rebuild, and delete those from your <code>./gradle</code>  and <code>/build</code> folders to avoid those import/dependencies duplicate issues.  I previously referred to <a href=\"https://stackoverflow.com/a/55756749/3970630\">this</a> fix as well and everything is running again.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 129473979,
              "body": "Are you <i>sure</i> that your problem was with CheckDuplicatesRunnable reporting &quot;Duplicate class&quot;?  That has nothing to do with the amount of memory you provide Gradle."
            }
          ],
          "answer_id": 72265438,
          "body": "<p>I was able to fix the issue by addding below line in gradle.properties file.</p>\n<pre><code>org.gradle.jvmargs=-Xmx4608m\n</code></pre>\n"
        },
        {
          "answer_id": 76295846,
          "body": "<p>For me the error was caused by the combination of several factors.\nI changed in the app gradle:</p>\n<pre><code> compileOptions {\n    sourceCompatibility JavaVersion.VERSION_17\n    targetCompatibility JavaVersion.VERSION_17\n}\nkotlinOptions {\n    jvmTarget = '17'\n}\n</code></pre>\n<p>and then changed the version of Kotlin in build.gradle to :</p>\n<pre><code>id 'org.jetbrains.kotlin.android' version '1.8.10' apply false\n</code></pre>\n<p>finally, don't forget the compose options if you use compose to the corresponding version based on the Kotlin version, for this case:</p>\n<pre><code>composeOptions {\n    kotlinCompilerExtensionVersion '1.4.3'\n}\n</code></pre>\n<p>And that solve this error for me.</p>\n"
        }
      ],
      "last_activity_date": 1684594590,
      "question_id": 69738328,
      "body": "<p>Having this Error while trying to debug the application</p>\n<p>also updated these two properties in Gradle.properties</p>\n<pre><code>android.useAndroidX=true\nandroid.enableJetifier=true\n</code></pre>\n<p>using</p>\n<pre><code>android {\n    compileSdkVersion 30\n    buildToolsVersion &quot;28.0.3&quot;\n    defaultConfig {\n       \n        minSdkVersion 23\n        targetSdkVersion 30\n        versionCode 192\n        versionName &quot;2.2.57&quot;\n}\n</code></pre>\n<blockquote>\n<p>Execution failed for task ':app:checkDebugDuplicateClasses'.</p>\n<blockquote>\n<p>A failure occurred while executing com.android.build.gradle.internal.tasks.CheckDuplicatesRunnable\nDuplicate class androidx.collection.LruCache found in modules collection-1.1.0 (androidx.collection:collection:1.1.0) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.accessibilityservice.AccessibilityServiceInfoCompat\nfound in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.app.ActivityCompat found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.app.NavUtils found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.app.NotificationCompat found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.app.NotificationCompat$Builder found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.app.ServiceCompat found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.app.ShareCompat found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.app.ShareCompat$IntentBuilder found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.app.ShareCompat$IntentReader found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.app.TaskStackBuilder found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.content.IntentCompat found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.content.pm.ActivityInfoCompat found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.database.DatabaseUtilsCompat found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.os.ParcelableCompat found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.os.ParcelableCompatCreatorCallbacks found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.util.DebugUtils found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.util.LogWriter found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.util.TimeUtils found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.view.AccessibilityDelegateCompat found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.view.MenuCompat found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.view.MenuItemCompat found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.view.MotionEventCompat found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.view.VelocityTrackerCompat found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.view.ViewCompat found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.view.ViewConfigurationCompat found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.view.ViewGroupCompat found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.view.accessibility.AccessibilityEventCompat found in\nmodules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.view.accessibility.AccessibilityManagerCompat found in\nmodules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.view.accessibility.AccessibilityManagerCompat$AccessibilityStateChangeListenerCompat\nfound in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.view.accessibility.AccessibilityNodeInfoCompat found in\nmodules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.view.accessibility.AccessibilityRecordCompat found in\nmodules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.core.widget.EdgeEffectCompat found in modules core-1.3.2-runtime (androidx.core:core:1.3.2) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.cursoradapter.widget.CursorAdapter found in modules cursoradapter-1.0.0-runtime\n(androidx.cursoradapter:cursoradapter:1.0.0) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.cursoradapter.widget.CursorAdapter$ChangeObserver found in\nmodules cursoradapter-1.0.0-runtime\n(androidx.cursoradapter:cursoradapter:1.0.0) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.cursoradapter.widget.CursorAdapter$MyDataSetObserver found in\nmodules cursoradapter-1.0.0-runtime\n(androidx.cursoradapter:cursoradapter:1.0.0) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.cursoradapter.widget.CursorFilter found in modules cursoradapter-1.0.0-runtime\n(androidx.cursoradapter:cursoradapter:1.0.0) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.cursoradapter.widget.CursorFilter$CursorFilterClient found in\nmodules cursoradapter-1.0.0-runtime\n(androidx.cursoradapter:cursoradapter:1.0.0) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.cursoradapter.widget.ResourceCursorAdapter found in modules\ncursoradapter-1.0.0-runtime\n(androidx.cursoradapter:cursoradapter:1.0.0) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.cursoradapter.widget.SimpleCursorAdapter found in modules cursoradapter-1.0.0-runtime\n(androidx.cursoradapter:cursoradapter:1.0.0) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.cursoradapter.widget.SimpleCursorAdapter$CursorToStringConverter\nfound in modules cursoradapter-1.0.0-runtime\n(androidx.cursoradapter:cursoradapter:1.0.0) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.cursoradapter.widget.SimpleCursorAdapter$ViewBinder found in\nmodules cursoradapter-1.0.0-runtime\n(androidx.cursoradapter:cursoradapter:1.0.0) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.BackStackRecord found in modules fragment-1.2.5-runtime (androidx.fragment:fragment:1.2.5) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.BackStackState found in modules fragment-1.2.5-runtime (androidx.fragment:fragment:1.2.5) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.BackStackState$1 found in modules fragment-1.2.5-runtime (androidx.fragment:fragment:1.2.5) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.DialogFragment found in modules fragment-1.2.5-runtime (androidx.fragment:fragment:1.2.5) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.Fragment found in modules fragment-1.2.5-runtime (androidx.fragment:fragment:1.2.5) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.Fragment$InstantiationException found in modules\nfragment-1.2.5-runtime (androidx.fragment:fragment:1.2.5) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.Fragment$SavedState found in modules fragment-1.2.5-runtime (androidx.fragment:fragment:1.2.5)\nand jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.Fragment$SavedState$1 found in modules fragment-1.2.5-runtime (androidx.fragment:fragment:1.2.5)\nand jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.FragmentActivity found in modules fragment-1.2.5-runtime (androidx.fragment:fragment:1.2.5) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.FragmentManager found in modules fragment-1.2.5-runtime (androidx.fragment:fragment:1.2.5) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.FragmentManager$BackStackEntry found in modules\nfragment-1.2.5-runtime (androidx.fragment:fragment:1.2.5) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.FragmentManager$OnBackStackChangedListener found\nin modules fragment-1.2.5-runtime (androidx.fragment:fragment:1.2.5)\nand jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.FragmentManagerImpl found in modules fragment-1.2.5-runtime (androidx.fragment:fragment:1.2.5)\nand jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.FragmentManagerState found in modules fragment-1.2.5-runtime (androidx.fragment:fragment:1.2.5)\nand jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.FragmentManagerState$1 found in modules fragment-1.2.5-runtime\n(androidx.fragment:fragment:1.2.5) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.FragmentPagerAdapter found in modules fragment-1.2.5-runtime (androidx.fragment:fragment:1.2.5)\nand jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.FragmentState found in modules fragment-1.2.5-runtime (androidx.fragment:fragment:1.2.5) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.FragmentState$1 found in modules fragment-1.2.5-runtime (androidx.fragment:fragment:1.2.5) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.FragmentStatePagerAdapter found in modules fragment-1.2.5-runtime\n(androidx.fragment:fragment:1.2.5) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.FragmentTransaction found in modules fragment-1.2.5-runtime (androidx.fragment:fragment:1.2.5)\nand jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.ListFragment found in modules fragment-1.2.5-runtime (androidx.fragment:fragment:1.2.5) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.ListFragment$1 found in modules fragment-1.2.5-runtime (androidx.fragment:fragment:1.2.5) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.ListFragment$2 found in modules fragment-1.2.5-runtime (androidx.fragment:fragment:1.2.5) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.fragment.app.SuperNotCalledException found in modules fragment-1.2.5-runtime\n(androidx.fragment:fragment:1.2.5) and\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1)\nDuplicate class androidx.loader.app.LoaderManager found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nloader-1.0.0-runtime (androidx.loader:loader:1.0.0)\nDuplicate class androidx.loader.app.LoaderManager$LoaderCallbacks found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nloader-1.0.0-runtime (androidx.loader:loader:1.0.0)\nDuplicate class androidx.loader.app.LoaderManagerImpl found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nloader-1.0.0-runtime (androidx.loader:loader:1.0.0)\nDuplicate class androidx.loader.app.LoaderManagerImpl$LoaderInfo found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nloader-1.0.0-runtime (androidx.loader:loader:1.0.0)\nDuplicate class androidx.loader.content.AsyncTaskLoader found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nloader-1.0.0-runtime (androidx.loader:loader:1.0.0)\nDuplicate class androidx.loader.content.AsyncTaskLoader$LoadTask found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nloader-1.0.0-runtime (androidx.loader:loader:1.0.0)\nDuplicate class androidx.loader.content.CursorLoader found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nloader-1.0.0-runtime (androidx.loader:loader:1.0.0)\nDuplicate class androidx.loader.content.Loader found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nloader-1.0.0-runtime (androidx.loader:loader:1.0.0)\nDuplicate class androidx.loader.content.Loader$ForceLoadContentObserver found in\nmodules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nloader-1.0.0-runtime (androidx.loader:loader:1.0.0)\nDuplicate class androidx.loader.content.Loader$OnLoadCompleteListener found in modules\njetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nloader-1.0.0-runtime (androidx.loader:loader:1.0.0)\nDuplicate class androidx.loader.content.ModernAsyncTask found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nloader-1.0.0-runtime (androidx.loader:loader:1.0.0)\nDuplicate class androidx.loader.content.ModernAsyncTask$1 found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nloader-1.0.0-runtime (androidx.loader:loader:1.0.0)\nDuplicate class androidx.loader.content.ModernAsyncTask$2 found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nloader-1.0.0-runtime (androidx.loader:loader:1.0.0)\nDuplicate class androidx.loader.content.ModernAsyncTask$3 found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nloader-1.0.0-runtime (androidx.loader:loader:1.0.0)\nDuplicate class androidx.loader.content.ModernAsyncTask$4 found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nloader-1.0.0-runtime (androidx.loader:loader:1.0.0)\nDuplicate class androidx.loader.content.ModernAsyncTask$AsyncTaskResult found in\nmodules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nloader-1.0.0-runtime (androidx.loader:loader:1.0.0)\nDuplicate class androidx.loader.content.ModernAsyncTask$InternalHandler found in\nmodules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nloader-1.0.0-runtime (androidx.loader:loader:1.0.0)\nDuplicate class androidx.loader.content.ModernAsyncTask$Status found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nloader-1.0.0-runtime (androidx.loader:loader:1.0.0)\nDuplicate class androidx.loader.content.ModernAsyncTask$WorkerRunnable found in\nmodules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nloader-1.0.0-runtime (androidx.loader:loader:1.0.0)\nDuplicate class androidx.localbroadcastmanager.content.LocalBroadcastManager found in\nmodules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nlocalbroadcastmanager-1.0.0-runtime\n(androidx.localbroadcastmanager:localbroadcastmanager:1.0.0)\nDuplicate class androidx.localbroadcastmanager.content.LocalBroadcastManager$1 found\nin modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nlocalbroadcastmanager-1.0.0-runtime\n(androidx.localbroadcastmanager:localbroadcastmanager:1.0.0)\nDuplicate class androidx.localbroadcastmanager.content.LocalBroadcastManager$BroadcastRecord\nfound in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nlocalbroadcastmanager-1.0.0-runtime\n(androidx.localbroadcastmanager:localbroadcastmanager:1.0.0)\nDuplicate class androidx.localbroadcastmanager.content.LocalBroadcastManager$ReceiverRecord\nfound in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nlocalbroadcastmanager-1.0.0-runtime\n(androidx.localbroadcastmanager:localbroadcastmanager:1.0.0)\nDuplicate class androidx.viewpager.widget.PagerAdapter found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nviewpager-1.0.0-runtime (androidx.viewpager:viewpager:1.0.0)\nDuplicate class androidx.viewpager.widget.PagerTitleStrip found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nviewpager-1.0.0-runtime (androidx.viewpager:viewpager:1.0.0)\nDuplicate class androidx.viewpager.widget.PagerTitleStrip$PageListener found in\nmodules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nviewpager-1.0.0-runtime (androidx.viewpager:viewpager:1.0.0)\nDuplicate class androidx.viewpager.widget.ViewPager found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nviewpager-1.0.0-runtime (androidx.viewpager:viewpager:1.0.0)\nDuplicate class androidx.viewpager.widget.ViewPager$1 found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nviewpager-1.0.0-runtime (androidx.viewpager:viewpager:1.0.0)\nDuplicate class androidx.viewpager.widget.ViewPager$2 found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nviewpager-1.0.0-runtime (androidx.viewpager:viewpager:1.0.0)\nDuplicate class androidx.viewpager.widget.ViewPager$ItemInfo found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nviewpager-1.0.0-runtime (androidx.viewpager:viewpager:1.0.0)\nDuplicate class androidx.viewpager.widget.ViewPager$LayoutParams found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nviewpager-1.0.0-runtime (androidx.viewpager:viewpager:1.0.0)\nDuplicate class androidx.viewpager.widget.ViewPager$OnAdapterChangeListener found in\nmodules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nviewpager-1.0.0-runtime (androidx.viewpager:viewpager:1.0.0)\nDuplicate class androidx.viewpager.widget.ViewPager$OnPageChangeListener found in\nmodules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nviewpager-1.0.0-runtime (androidx.viewpager:viewpager:1.0.0)\nDuplicate class androidx.viewpager.widget.ViewPager$PagerObserver found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nviewpager-1.0.0-runtime (androidx.viewpager:viewpager:1.0.0)\nDuplicate class androidx.viewpager.widget.ViewPager$SavedState found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nviewpager-1.0.0-runtime (androidx.viewpager:viewpager:1.0.0)\nDuplicate class androidx.viewpager.widget.ViewPager$SavedState$1 found in modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nviewpager-1.0.0-runtime (androidx.viewpager:viewpager:1.0.0)\nDuplicate class androidx.viewpager.widget.ViewPager$SimpleOnPageChangeListener found\nin modules jetified-ViewPagerIndicator-2.4.1-runtime\n(com.github.JakeWharton:ViewPagerIndicator:2.4.1) and\nviewpager-1.0.0-runtime (androidx.viewpager:viewpager:1.0.0)</p>\n</blockquote>\n</blockquote>\n<p>Is version downgrading is the only Sloution?</p>\n<p>Thank you.</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134535731,
          "body": "To merge the 2 lists into a new one, loop through them, comparing elements and only add the greater of the 2 to the new list. Repeat until you&#39;ve gone to the end of each list. Be sure to handle the case of different length lists. Note: sort the lists <i>first</i>."
        }
      ],
      "answers": [
        {
          "answer_id": 76292171,
          "body": "<p>It's simple,\nIn Case your's input is sorted Linked List then use merge algo (not merge sort, just merge algo) to sort two Linked List.</p>\n<blockquote>\n<p><a href=\"https://www.geeksforgeeks.org/merge-two-sorted-linked-lists/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/merge-two-sorted-linked-lists/</a></p>\n</blockquote>\n<p>Merge algo sorts two list(in your case) to an single list in O(m+n) time complexity. What You are doing will take O(mlogm + nlogn + m + n)</p>\n<p>Hence use merge algo and be efficient.</p>\n<p>Happy Coding :)</p>\n<p>And leet Code is a platform that let's you practice from basics.\nThey want to teach pointer and merge algo with this question.</p>\n"
        }
      ],
      "last_activity_date": 1684594582,
      "question_id": 76292056,
      "body": "<p>I want to merge two sorted linked-lists (21 leetcode) but I don't want to define ListNode. I need to use LinkedList which is defined in Java and I think its methods are enough for solving any problem about it. ( I am very new in leetcode and I don't know why ListNode is defined at the top of the code in leetcode, when we already have it in Java). Anyway, I created two linked lists and sorted them. Now I need to create another node as tempNode and currentNode for merging these two sorted linked lists. Would you please help me with that?</p>\n<pre><code>ListNode temp_Node= new ListNode(0);\n\nListNode current_Node= temp_Node;\n \n</code></pre>\n<p>Also I dont know how to use val like</p>\n<pre class=\"lang-java prettyprint-override\"><code>while (list1 != null &amp;&amp; list2 != null) {\n    if (list1.val &lt; list2.val) {\n        current_Node.next = list1;\n        list1 = list1.next;\n    }\n}\n</code></pre>\n<p>Would you please help me? Here is my code.</p>\n<pre><code>package MergeTwoSortedLists;\n\n     import java.util.ArrayList;\n     import java.util.Arrays;\n     import java.util.Collections;\n     import java.util.Comparator;\n     import java.util.LinkedList;\n     import java.util.Scanner;\n\n     public class Driver\n     {\n         public static void main(String[] args)\n        {\n          Scanner scanner= new Scanner(System.in);\n          String str1= scanner.nextLine();\n          String str2= scanner.nextLine();\n       \n          String[] str_arr1=str1.split(&quot; &quot;);;\n          String[] str_arr2=str2.split(&quot; &quot;);`\n          LinkedList&lt;String&gt; lnk_List3= new LinkedList&lt;String&gt;();\n          LinkedList&lt;String&gt; lnk_List4= new LinkedList&lt;String&gt;();\n          for (int i=0; i&lt;str_arr1.length; i++) {\n             lnk_List3.add(str_arr1[i]);\n          }\n          for(int i=0; i&lt;str_arr2.length; i++) {\n            lnk_List4.add(str_arr2[i]);\n          }\n          Collections.sort(lnk_List1);\n          Collections.sort(lnk_List2);\n       }\n     }\n</code></pre>\n<p>Thank you.</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 65356590,
          "body": "which container are you using ? Jetty, tomcat, nginx, undertow... ?"
        },
        {
          "comment_id": 130248327,
          "body": "correct answer is <code>server.tomcat.threads.max</code> as @Couper comment below"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 65356628,
              "body": "Thanks a lot , Alex. I&#39;m using tomcat. I&#39;ll try and update"
            },
            {
              "comment_id": 65357358,
              "body": "Hi Alex , is there a way to print the default value in my app?"
            },
            {
              "comment_id": 65357519,
              "body": "Not that I know of. I mean, server.tomcat.max-threads&#39;s default value is definitely 0, so it comes down to tomcat&#39;s value. What I would do If I were you is to try with a really big value (server.tomcat.max-threads=1000) and see if it makes a difference."
            },
            {
              "comment_id": 93125436,
              "body": "@PunterVicky why do you need print it? Add application.properties to your resources dir and set there amout of thread."
            },
            {
              "comment_id": 94205609,
              "body": "You can inject <code>@Autowired private ServerProperties serverProperties;</code>, then see <code>serverProperties.tomcat.maxThreads</code>. But if you don&#39;t set it, the default value is 0 (<code>private int maxThreads = 0;</code>)"
            },
            {
              "comment_id": 96612140,
              "body": "You can add spring boot actuator dependency to your project. Its a great tool that gives you a lot of environment information. The endpoint /env will provide you environment properties."
            },
            {
              "comment_id": 113953428,
              "body": "Thank you very much! My application was spamming the MySQL server with useless sleeping threads. Now, I am able the control the threads."
            },
            {
              "comment_id": 121869474,
              "body": "Since Spring Boot 2.3 the correct property is <code>server.tomcat.threads.max</code>."
            },
            {
              "comment_id": 128284548,
              "body": "can someone please update the answer based on @Couper&#39;s comment above"
            }
          ],
          "answer_id": 39002238,
          "body": "<p>This setting is derived from the embedded container (tomcat, jetty...).</p>\n<p><strong>Tomcat's number of threads</strong></p>\n<p>You may specify this property in your application.properties</p>\n<pre><code>server.tomcat.threads.max=400\n</code></pre>\n<p>You say you counted 20 threads, however according to this <a href=\"https://stackoverflow.com/questions/25399400/maximum-client-request-thread-pool-size-in-spring\">other stackoverflow question/answer</a>, the default number of thread should be 200 with tomcat, since server.tomcat.max-threads's default value is 0. See <a href=\"https://tomcat.apache.org/tomcat-8.0-doc/config/http.html\" rel=\"nofollow noreferrer\">tomcat's documentation</a>:</p>\n<blockquote>\n<p>The maximum number of request processing threads to be created by this Connector, which therefore determines the maximum number of simultaneous requests that can be handled. If not specified, this attribute is set to 200. If an executor is associated with this connector, this attribute is ignored as the connector will execute tasks using the executor rather than an internal thread pool.</p>\n</blockquote>\n<p>Also, the property for:</p>\n<ul>\n<li><p><strong>undertow</strong>: <code>server.undertow.worker-threads</code></p>\n</li>\n<li><p><strong>jetty</strong>: <code>server.jetty.acceptors</code></p>\n</li>\n</ul>\n<p>You'll find the list of properties in <a href=\"http://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html\" rel=\"nofollow noreferrer\">Spring's documentation</a></p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 97537465,
              "body": "The documentation changed in the meantime and now states &quot;20&quot;. So the observed behavior matches the documentation."
            },
            {
              "comment_id": 101316844,
              "body": "I was going to ask how to use it, but looks like there is flag in spring boot server.http2.enabled=true"
            },
            {
              "comment_id": 116068643,
              "body": "It&#39;s important to notice that &quot;maxConcurrentStreamExecution&quot; refers to concurrent streams of a single connection over the HTTP 2 protocol, not the maximum connections that the container can accept."
            }
          ],
          "answer_id": 50103782,
          "body": "<p>While the accepted answer is very useful, I recently experienced what I believe to be the same problem as the original poster. This is the only search result I could find that directly correlated with my experience, so I thought I'd add my solution in case it helps someone.</p>\n\n<p>In my case, the observed concurrency limit of 20 was imposed by the default setting of 20 for the<code>maxConcurrentStreamExecution</code> property in <code>org.apache.coyote.http2.Http2Protocol</code>.</p>\n\n<p>If you're experiencing this problem and you're using HTTP/2, there's a good chance that increasing <code>maxConcurrentStreamExecution</code> will help.</p>\n\n<p>You can find more info in the <a href=\"https://tomcat.apache.org/tomcat-9.0-doc/config/http2.html\" rel=\"noreferrer\">Tomcat Configuration Reference</a>, which actually states that this should be set to 200 by default (not 20). You can definitely see the default setting of 20 in <code>org.apache.coyote.http2.Http2Protocol</code>, though, so I'm not sure if this is a typo or just something that presents itself differently in the embedded version of Tomcat.</p>\n"
        },
        {
          "answer_id": 51981349,
          "body": "<p>Increase <code>maxConcurrentStreamExecution</code> (set 200) for HTTP/2 in Spring Boot 2:</p>\n\n<pre><code>@Bean\npublic WebServerFactoryCustomizer&lt;TomcatServletWebServerFactory&gt; containerCustomizer() {\n    return new WebServerFactoryCustomizer&lt;TomcatServletWebServerFactory&gt;() {\n        @Override\n        public void customize(TomcatServletWebServerFactory factory) {\n            factory.addConnectorCustomizers(new TomcatConnectorCustomizer() {\n                @Override\n                public void customize(Connector connector) {\n                    Arrays.stream(connector.getProtocolHandler().findUpgradeProtocols())\n                        .filter(upgradeProtocol -&gt; upgradeProtocol instanceof Http2Protocol)\n                        .map(upgradeProtocol -&gt; (Http2Protocol) upgradeProtocol)\n                        .forEach(http2Protocol -&gt; http2Protocol.setMaxConcurrentStreamExecution(200));\n                }\n            });\n        }\n    };\n}\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 103421579,
              "body": "What is the difference between <code>accept-count</code> and <code>max-connections</code>? Shouldn&#39;t the <code>accept-count</code> be greater than <code>max-connections</code>?"
            },
            {
              "comment_id": 103453868,
              "body": "<code>accept-count</code> is the connection request in the queue that waiting for process, this is the queue size.<code>max-connections</code> means the max connection count that can process at the same time, this is max connection size.  Normally, <code>max-connections</code> should be greater than <code>accept-count</code>."
            },
            {
              "comment_id": 117733432,
              "body": "@Bruce server.tomcat.max-threads=200 if Maximum amount of worker threads is 200 then it can concurrently process 200 req at any time then how?"
            }
          ],
          "answer_id": 56125838,
          "body": "<p>Maybe, you can have a look at the <a href=\"https://docs.spring.io/spring-boot/docs/2.0.9.RELEASE/reference/htmlsingle/#common-application-properties\" rel=\"noreferrer\">springboot's config</a></p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>server.tomcat.accept-count=100 # Maximum queue length for incoming connection requests when all possible request processing threads are in use.\nserver.tomcat.additional-tld-skip-patterns= # Comma-separated list of additional patterns that match jars to ignore for TLD scanning.\nserver.tomcat.background-processor-delay=10s # Delay between the invocation of backgroundProcess methods. If a duration suffix is not specified, seconds will be used.\nserver.tomcat.basedir= # Tomcat base directory. If not specified, a temporary directory is used.\nserver.tomcat.max-connections=10000 # Maximum number of connections that the server accepts and processes at any given time.\nserver.tomcat.max-http-header-size=0 # Maximum size in bytes of the HTTP message header.\nserver.tomcat.max-http-post-size=2097152 # Maximum size in bytes of the HTTP post content.\nserver.tomcat.max-threads=200 # Maximum amount of worker threads.\nserver.tomcat.min-spare-threads=10 # Minimum amount of worker threads.\nserver.tomcat.port-header=X-Forwarded-Port # Name of the HTTP header used to override the original port value.\nserver.tomcat.protocol-header= # Header that holds the incoming protocol, usually named \"X-Forwarded-Proto\".\nserver.tomcat.protocol-header-https-value=https # Value of the protocol header indicating whether the incoming request uses SSL.\nserver.tomcat.redirect-context-root=true # Whether requests to the context root should be redirected by appending a / to the path.\nserver.tomcat.remote-ip-header= # Name of the HTTP header from which the remote IP is extracted. For instance, `X-FORWARDED-FOR`.\nserver.tomcat.resource.cache-ttl= # Time-to-live of the static resource cache.\nserver.tomcat.uri-encoding=UTF-8 # Character encoding to use to decode the URI.\nserver.tomcat.use-relative-redirects= # Whether HTTP 1.1 and later location headers generated by a call to sendRedirect will use relative or absolute redirects.\n\n</code></pre>\n"
        },
        {
          "answer_id": 57401400,
          "body": "<p>If you have actuator you can see the metrics</p>\n\n<p>/actuator/metrics/tomcat.threads.config.max</p>\n\n<pre class=\"lang-json prettyprint-override\"><code>{\n  \"name\": \"tomcat.threads.config.max\",\n  \"description\": null,\n  \"baseUnit\": null,\n  \"measurements\": [{\n    \"statistic\": \"VALUE\",\n    \"value\": 200.0\n  }],\n  \"availableTags\": [{\n    \"tag\": \"name\",\n    \"values\": [\"http-nio-8080\"]\n  }]\n}\n</code></pre>\n\n\n\n<p>The actual value tomcat decided to create?\n/actuator/metrics/tomcat.threads.current</p>\n\n<p>you may see 10 there depending on the load</p>\n\n<p>spring boot never seems to fully use max-threads\nyou can however start with more</p>\n\n<pre><code>server:\n   tomcat:\n     min-spare-threads: 40\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684594492,
      "question_id": 39002090,
      "body": "<p>I developed a microservice using Spring Boot. I was performance testing the  service by stubbing the backend calls. When I looked at the thread count , I see that the maximum number of threads that created to the service is 20 at any point in time even though the number of calls made is much higher. Are there any limitations with respect to number of calls that can be made to a microservice developed using Spring Boot. Please can you guide in what steps I need to follow to troubleshoot / increase the number of connections accepted by the service?</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134545203,
          "body": "Perhaps something is calling <code>DataSource.getDataSource()</code> before junit calls <code>setup()</code>. You can add some logging to check this. It isn&#39;t clear why you have written the <code>init</code> method. Why do you think that <code>init</code> will have any effect? Do you understand how your <code>DataSource.getDataSource()</code> method works? That <code>ds</code> is <code>static</code> and that it will only call <code>initdatabase()</code> once?"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 134541416,
              "body": "Never did anything like that. Could you show with an example?"
            },
            {
              "comment_id": 134541455,
              "body": "This exceeds a Stackoverlow answer. You can search for Java Singleton Testing and find lots of articles. For example <a href=\"https://www.baeldung.com/java-singleton\" rel=\"nofollow noreferrer\">baeldung.com/java-singleton</a>"
            }
          ],
          "answer_id": 76295772,
          "body": "<p>Instead of using system properties to configure the database make your classore easily configurable and testable. You could implement a singleton pattern and an initializing method for example.</p>\n<p>Having said that, using a different database for production than for testing may not reproduce the exact behavior.</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 134541593,
              "body": "According to the condition of the assignment, implementation is required in one method, without the use application.properties.  That is, from these two methods to make one. `    @BeforeAll     static void setup() {...}       @BeforeEach     void init() {...}`"
            }
          ],
          "answer_id": 76295831,
          "body": "<p>I understand that you want to configure a different datasource for tests. This can be done without any code just by providing a different <code>application.properties</code> file.</p>\n<p>Assuming your <code>application.properties</code> are in the <code>src/main/resources</code>. Make a copy of it and put it in the folder <code>src/test/resources</code>. In this file you can modify the properties for the tests. They will be found only by the tests. Application will still use the original file.</p>\n"
        }
      ],
      "last_activity_date": 1684594417,
      "question_id": 76295701,
      "body": "<p>Good day. My project has a DataSource class that implements the database connection parameters, as well as the initialization of the database connection:</p>\n<pre><code>public class DataSource {\n    private static HikariConfig config = new HikariConfig();\n    private static HikariDataSource ds;\n \n    public static HikariDataSource getDataSource() {\n        if (ds == null) {\n            config.setJdbcUrl(System.getProperty(&quot;jdbcUrl&quot;,&quot;jdbc:postgresql://localhost:5433/postgres&quot;));\n            config.setUsername(System.getProperty(&quot;jdbcUser&quot;,&quot;postgres&quot;));\n            config.setPassword(System.getProperty(&quot;jdbcPassword&quot;,&quot;postgres&quot;));\n            ds = new HikariDataSource(config);\n \n            initDatabase();\n        }\n        return ds;\n    }\n \n    private static void initDatabase() {\n        try {\n            DatabaseConnection connection = new JdbcConnection(ds.getConnection());\n            Database database = DatabaseFactory.getInstance().findCorrectDatabaseImplementation(connection);\n            Liquibase liquibase = new Liquibase(\n                    System.getProperty(&quot;liquibaseFile&quot;,&quot;liquibase.xml&quot;),\n                    new ClassLoaderResourceAccessor(),\n                    database);\n            liquibase.update(new Contexts());\n        } catch (SQLException | LiquibaseException e) {\n            throw new RuntimeException(e);\n        }\n    }\n \n    public static Connection getConnection() throws SQLException {\n        return ds.getConnection();\n    }\n}\n</code></pre>\n<p>The JUnit library is used to develop unit tests for project dao methods. A base class has been created with the help of which the parameters for connecting to the database are redefined (in this case, to H2):</p>\n<pre><code>public class Base {\n \n    @BeforeAll\n    static void setup() {\n        System.setProperty(&quot;jdbcUrl&quot;, &quot;jdbc:h2:mem:test_&quot; + UUID.randomUUID());\n        System.setProperty(&quot;jdbcUser&quot;, &quot;sa&quot;);\n        System.setProperty(&quot;jdbcPassword&quot;, &quot;&quot;);\n        System.setProperty(&quot;liquibaseFile&quot;, &quot;liquibase_test.xml&quot;);\n    }\n \n    @BeforeEach\n    void init() {\n        setup();\n    }\n}\n</code></pre>\n<p>How can I make sure that System.setProperty properties are redefined within a single method? It is important that the behavior of the method is similar to that of @BeforeEach instead of the @BeforeAll annotation.\nI tried to put @BeforeEach instead of @BeforeAll, removing static, but when the test is executed, the postgress database is accessed, and not H2, as required by the condition.</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134537572,
          "body": "Debug with <code>mvn -X ...</code> and confirm your theory first."
        },
        {
          "comment_id": 134537574,
          "body": "Have you tried <code>mvn -U clean install </code> ?"
        },
        {
          "comment_id": 134537630,
          "body": "you know that mvn clean install -o work in offline assuming you build the other project has -SNAPSHOT if not you can always do the ugly way build the Jar and define in dependency the systemPath to the jar himself"
        },
        {
          "comment_id": 134539091,
          "body": "I would recommend to take a deep look into <a href=\"https://maven.apache.org/resolver/remote-repository-filtering.html\" rel=\"nofollow noreferrer\">maven.apache.org/resolver/remote-repository-filtering.html</a>"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 134539455,
              "body": "systemPath is nearly always a bad idea."
            }
          ],
          "answer_id": 76293429,
          "body": "<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;groupId&lt;/groupId&gt;\n  &lt;artifactId&gt;artifactId&lt;/artifactId&gt;\n  &lt;version&gt;version&lt;/version&gt;\n  &lt;scope&gt;system&lt;/scope&gt;\n  &lt;systemPath&gt;file path/jar-file.jar&lt;/systemPath&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>You can Add this into your <code>pom.xml</code> file then update your project.</p>\n"
        },
        {
          "answer_id": 76294563,
          "body": "<p>First of all: Version ranges like <code>(0,0),</code> are evil.</p>\n<p>Sure, they are allowed in Maven, but they cause all kind of pain, and they are considered deprecated by many.</p>\n<p>So, what should you do?</p>\n<p>If your project Y and project X are so tightly coupled that project Y always needs the latest version of project X, you usually set up a multi-module project with both of them. Then you always build both together, problem solved.</p>\n<p>If this is not the way for you to go, you can use a <code>-SNAPSHOT</code> version of project X in project Y while developing. This allows for easier updates because you do not always need to change the version of the dependency when you rebuild X. Beware, though, that if you build the same SNAPSHOT versions locally and on the build server, it might be confusing which one actually &quot;wins&quot; and is drawn, depending on the specified update policy.</p>\n"
        }
      ],
      "last_activity_date": 1684594269,
      "question_id": 76293171,
      "body": "<p>might be best explained with an example</p>\n<ul>\n<li><p>I have 2 custom maven projects (let's call them projectX and projectY).</p>\n</li>\n<li><p>projectY is dependent on projectX. projectX has been added to projectY via</p>\n<pre><code> &lt;dependency&gt;\n     &lt;groupId&gt;com.projectx.core&lt;/groupId&gt;\n     &lt;artifactId&gt;projectx.core&lt;/artifactId&gt;\n     &lt;version&gt;(0.0),&lt;/version&gt;\n &lt;/dependency&gt;\n</code></pre>\n</li>\n<li><p>In projectX, I made some changes to the Constants.java and added a new public constant.</p>\n</li>\n<li><p>I've built projectX (via mvn clean install) and I can see the latest version of the project somewhere in $HOME/.m2/repository.</p>\n</li>\n<li><p>I'm trying to access this new constant in projectY but it's not working. I'm getting this error =&gt; &quot;cannot find symbol: insert-constant-name-here&quot;</p>\n</li>\n<li><p>It seems to me that projectY is still referencing an older version of projectX. I believe projectY is still referencing whatever is the latest version of projectX that's available in our remote mvn repo.</p>\n</li>\n<li><p>I have a feeling that if I build projectX and pushed this to the remote mvn repo, everything will be working fine. I cannot do this yet as I need to do more changes in projectX.</p>\n</li>\n</ul>\n<p>Any ideas on how to fix? Thanks</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134534831,
          "body": "In Java, a <code>byte</code> is signed, so it&#39;s range is from -128 to 127."
        },
        {
          "comment_id": 134541467,
          "body": "Have you tried stepping through this with a debugger yet?"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 134547353,
              "body": "The problem was with the 255. Now the code works perfect, thx a lot for the tips i appreciate it so much. I&#39;ll take notes to avoid repeating this error."
            }
          ],
          "answer_id": 76292070,
          "body": "<p>In Java, a <code>byte</code> value is signed, so its range is from -128 to 127.<br />\nAs opposed to a range of 0 to 255.</p>\n<p>There are two approaches you can take.  I'll demonstrate both.</p>\n<p>As a solution, you can reduce your check value, on line 13, of <code>count &lt; 255</code> to 127.<br />\nFor added persistence, you can use <code>Byte.MAX_VALUE</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (nextByte == currentByte &amp;&amp; count &lt; 127) {\n    count++;\n} else {\n    os.write((byte) count);\n    os.write((byte) currentByte);\n    count = 1;\n}\n</code></pre>\n<p>Or, you can bit-mask your <code>count</code> value in the <code>decompression</code> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>count = currentByte &amp; 0xff;\n</code></pre>\n<p>This will return positive values for negative <code>byte</code> values.<br />\nFor example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>-1 &amp; 0xff == 255\n</code></pre>\n<p>Additionally, as a recommendation, you can reduce both your <code>compress</code> and <code>decompress</code> methods.</p>\n<p>Place the <code>compress</code> contents within a try-finally block.<br />\nThat way, you can close your streams in the event of an <code>IOException</code> occurring.<br />\nAnd, increase the scope of <code>nextByte</code>, by bringing its declaration outside of the <code>while</code> loop.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void compress(InputStream is, OutputStream os) throws IOException {\n    try {\n        int currentByte = is.read();\n        int nextByte;\n        int count = 1;\n        while (currentByte != -1) {\n            nextByte = is.read();\n            if (nextByte == currentByte &amp;&amp; count &lt; 255)\n                count++;\n            else {\n                os.write((byte) count);\n                os.write((byte) currentByte);\n                count = 1;\n            }\n            currentByte = nextByte;\n        }\n    } finally {\n        os.flush();\n        is.close();\n        os.close();\n    }\n}\n</code></pre>\n<p>As for the <code>decompress</code> method, same situation, place the contents within a try-finally block.<br />\nYour <code>currentByte</code> assignment can be placed within the <code>while</code> condition statement.<br />\nAnd, you can utilize the <code>Arrays.fill</code> method to populate the <code>bytes</code> array.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void decompress(InputStream is, OutputStream os) throws IOException {\n    try {\n        int currentByte;\n        int count, value;\n        byte[] bytes;\n        while ((currentByte = is.read()) != -1) {\n            count = currentByte &amp; 0xff;\n            value = is.read();\n            bytes = new byte[count];\n            Arrays.fill(bytes, (byte) value);\n            os.write(bytes);\n        }\n    } finally {\n        os.flush();\n        is.close();\n        os.close();\n    }\n}\n</code></pre>\n<p>As an added measure, just to demonstrate what's happening when assigning a value greater than 127 to a <code>byte</code>.<br />\nConsider the following, we'll start at 125 and increment by 1, 4 times, to get to 129.</p>\n<pre class=\"lang-java prettyprint-override\"><code>byte value;\nString binary;\nfor (int count = 1; count &lt; 5; count++) {\n    value = (byte) (125 + count);\n    System.out.printf(&quot;+%d, &quot;, count);\n    System.out.printf(&quot;value= %4d, &quot;, value);\n    binary = &quot;%8s&quot;.formatted(Integer.toBinaryString(value));\n    binary = binary.substring(binary.length() - 8);\n    System.out.printf(&quot;%s%n&quot;, binary);\n}\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>+1, value=  126,  1111110\n+2, value=  127,  1111111\n+3, value= -128, 10000000\n+4, value= -127, 10000001\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684593997,
      "question_id": 76291622,
      "body": "<p>How can I make the test work? I don't encounter the error in my code. Java is new to me and I am just learning it. I know that the issue is related to the array, but I don't know how to fix it.</p>\n<p>Error of decompress:</p>\n<blockquote>\n<p>&quot;array lengths differed, expected.length=2 actual.length=5; arrays\nfirst differed at element [2]; &quot;</p>\n</blockquote>\n<p>Error of compress:</p>\n<blockquote>\n<p>&quot;array lengths differed, expected.length=3 actual.length=2; arrays\nfirst differed at element [0]; &quot;</p>\n</blockquote>\n<p>The code:</p>\n<pre><code>import java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\n\npublic class RLE {\n    public static void compress(InputStream is, OutputStream os) throws IOException {\n        int currentByte = is.read();\n        int count = 1;\n\n        while (currentByte != -1) {\n            int nextByte = is.read();\n\n            if (nextByte == currentByte &amp;&amp; count &lt; 255) {\n                count++;\n            } else {\n                os.write((byte) count);\n                os.write((byte) currentByte);\n                count = 1;\n            }\n\n            currentByte = nextByte;\n        }\n\n        os.flush();\n        is.close(); \n        os.close(); \n    }\n\n    public static void decompress(InputStream is, OutputStream os) throws IOException {\n        int currentByte = is.read();\n\n        while (currentByte != -1) {\n            int count = currentByte;\n            int value = is.read();\n\n            byte[] bytes = new byte[count];\n            for (int i = 0; i &lt; count; i++) {\n                bytes[i] = (byte) value;\n            }\n\n            os.write(bytes);\n            currentByte = is.read();\n        }\n\n        os.flush();\n        is.close(); \n        os.close(); \n    }\n}\n</code></pre>\n<p>The test:</p>\n<pre><code>import java.io.*;\n\nimport static org.junit.Assert.*;\n\npublic class RLETest {\n\n    private void test1(byte[] expected, byte[] input) throws Exception {\n        ByteArrayOutputStream bos = new ByteArrayOutputStream();\n        RLE.compress(new ByteArrayInputStream(input), bos);\n        assertArrayEquals(expected, bos.toByteArray());\n    }\n\n    private void test2(byte[] expected, byte[] input) throws Exception {\n        ByteArrayOutputStream bos = new ByteArrayOutputStream();\n        RLE.decompress(new ByteArrayInputStream(input), bos);\n        assertArrayEquals(expected, bos.toByteArray());\n    }\n\n    @org.junit.Test\n    public void compress() throws Exception {\n        test1(new byte[]{1,1,4}, new byte[]{1,1,1,1,1,1});\n        test1(new byte[]{1,1,0}, new byte[]{1,1});\n        test1(new byte[]{1,2,3}, new byte[]{1,2,3});\n        test1(new byte[]{1, 1, 0, 2, 2, 0, 3, 3, 0}, new byte[]{1, 1, 2, 2, 3, 3});\n        test1(new byte[]{1, 2, 3, 3, 1, 4}, new byte[]{1, 2, 3, 3, 3, 4});\n        test1(new byte[]{1,2,3,3,0}, new byte[]{1, 2, 3, 3});\n\n        byte[]ar;\n\n        ar = new byte[260];\n        for (int i = 0; i &lt; ar.length; i++) {\n            ar[i] = 100;\n        }\n\n        test1(new byte[]{100,100,(byte) 255, 100, 100, 1}, ar);\n\n        ar = new byte[550];\n        for (int i = 0; i &lt; ar.length; i++) {\n            ar[i] = 100;\n        }\n\n        test1(new byte[]{100,100,(byte) 255, 100, 100, (byte) 255, 100, 100, 34}, ar);\n    }\n\n    @org.junit.Test\n    public void decompress() throws Exception {\n        test2(new byte[]{5,5}, new byte[]{5,5,0});\n        test2(new byte[]{1,2,3}, new byte[]{1,2,3});\n        test2(new byte[]{1,2,2,3}, new byte[]{1,2,2,0,3});\n        test2(new byte[]{1,2,3,3,3,3}, new byte[]{1,2,3,3,2});\n        test2(new byte[]{5}, new byte[]{5});\n        test2(new byte[]{1,1,2,2,3,3,4,4}, new byte[]{1,1,0,2,2,0,3,3,0,4,4,0});\n\n        byte[]ar;\n\n        ar = new byte[202];\n        for (int i = 0; i &lt; ar.length; i++) {\n            ar[i] = 55;\n        }\n\n        test2(ar, new byte[]{55,55,(byte)200});\n\n        ar = new byte[259];\n        for (int i = 0; i &lt; ar.length; i++) {\n            ar[i] = 55;\n        }\n\n        test2(ar, new byte[]{55,55,(byte)255, 55, 55, 0});\n    }\n\n}\n</code></pre>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134536344,
          "body": "Read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">this article</a> for tips on debugging your code."
        },
        {
          "comment_id": 134536455,
          "body": "Look out for line separators"
        },
        {
          "comment_id": 134536466,
          "body": "How is [1, 2] the correct output for the given input? Can you please provide the problem link?"
        },
        {
          "comment_id": 134537067,
          "body": "Don&#39;t use a BufferedReader; use a Scanner."
        }
      ],
      "answers": [
        {
          "answer_id": 76292880,
          "body": "<pre><code>public static char[][] readMaze(Path file) throws IOException {\n    return Files.lines(file).map(String::toCharArray).toArray(char[][]::new);\n}\n</code></pre>\n<p>will read your maze without needing any header. Just store the maze itself.</p>\n<p>Your problem arises from reading the line separators. These are present, as not consumed by <code>readLine</code> calls</p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 134537196,
              "body": "You can reduce the double for-loop to a single one <code>int row = 0; for (String line : allLines) map[row++] = line.toCharArray();</code>"
            }
          ],
          "answer_id": 76292933,
          "body": "<p>Your problem seems to be in the logic related to reading the file and storing it in the map.</p>\n<p>You can simply read the text file and store all the lines.</p>\n<p>Then, total row = number of lines</p>\n<p>And total column = size of first line</p>\n<p>In this way, you won't have to open the file multiple times.</p>\n<p>About reading each line to store in the char array =&gt;</p>\n<p>As your input contains spaces and newlines, it would be better to use <code>reader.readline()</code> instead of <code>reader.read()</code>.</p>\n<p>Read more about read() and readLine() from below:</p>\n<p><a href=\"https://stackoverflow.com/questions/43190995/bufferedreader-read-not-working\">BufferedReader read() not working</a></p>\n<p><a href=\"https://stackoverflow.com/questions/34446847/bufferedreader-will-not-read-final-line-of-input\">BufferedReader will not read final line of input</a></p>\n<p>However, you can also use simpler logic like below sample code to read the file and store it:</p>\n<pre><code>private static char[][] getMapFromFile() throws IOException {\n\n    List &lt; String &gt; allLines = Files.readAllLines(Paths.get(filePath));\n    int totalRows = allLines.size();\n    int totalColumns = allLines.get(0).length();\n\n    char[][] map = new char[totalRows][totalColumns];\n\n    for (int i = 0; i &lt; totalRows; i++) {\n        String currentLine = allLines.get(i);\n        for (int j = 0; j &lt; totalColumns; j++) {\n            map[i][j] = currentLine.charAt(j);\n        }\n    }\n    return map;\n}\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 134541441,
              "body": "Thank you! This solution is really cool."
            },
            {
              "comment_id": 134541463,
              "body": "@ErikVM, you&#39;re welcome, I&#39;m glad it helped."
            }
          ],
          "answer_id": 76293005,
          "body": "<p>I was able to produce the correct map, and <code>[1, 2]</code> as a starting-point with the following code; adapted from yours.</p>\n<p>I created a <code>Maze</code> class, with a <code>map</code> method to populate the <code>map</code>, <code>rows</code>, and <code>columns</code> fields.<br />\nAdditionally, I created a <code>startingPoint</code> method to return an <code>int[]</code> of the starting point row and column indices.<br />\nFinally, I created an overridden <code>toString</code> method for printing the maze.</p>\n<p>You can utilize <code>Arrays.binarySearch</code> to find <code>X</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Maze {\n    File file;\n    char[][] map;\n    int rows, columns;\n\n    Maze(String path) throws IOException {\n        file = new File(path);\n        map();\n    }\n\n    void map() throws IOException {\n        StringBuilder string = new StringBuilder();\n        String line;\n        try (BufferedReader reader = new BufferedReader(new FileReader(file))) {\n            String newline = System.lineSeparator();\n            rows = 0;\n            while ((line = reader.readLine()) != null) {\n                if (rows++ != 0) string.append(newline);\n                string.append(line);\n                columns = line.length();\n            }\n        }\n        BufferedReader reader = new BufferedReader(new StringReader(string.toString()));\n        map = new char[rows][columns];\n        int index = 0;\n        while ((line = reader.readLine()) != null)\n            map[index++] = line.toCharArray();\n    }\n\n    int[] startPoint() {\n        int index = 0;\n        int column;\n        for (char[] row : map) {\n            if ((column = Arrays.binarySearch(row, 'X')) &gt; 0)\n                return new int[] { index, column };\n            index++;\n        }\n        return null;\n    }\n\n    @Override\n    public String toString() {\n        StringBuilder string = new StringBuilder();\n        String newline = System.lineSeparator();\n        for (char[] row : map)\n            string.append(row).append(newline);\n        return string.toString();\n    }\n}\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>11111\n1 X 1\n1 1 1\n1   1\n111 1\n\n[1, 2]\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684593798,
      "question_id": 76292452,
      "body": "<p>I'm converting a text file into a two dimensional char array and getting indexes of specific chars.</p>\n<p>I have this task where I need to read the map which is text file, and find the shortest route out. So far I converted the text file into a char array, but if I'm printing out the map on console, some of the chars are missing. For some reason I don't understand, I'm not getting correct location for the starting point.</p>\n<p>My idea to use same logic I found about binary maze. If you read this and think I'm doing something completely stupid, then please let me know.</p>\n<p>First, I created two methods to get how many rows and columns there are in the map:</p>\n<pre><code>private static int getRowsOfTheMap() throws IOException {\n    int rows = 0;\n    BufferedReader reader = getReader(filePath);\n    while (reader.readLine() != null) rows++;\n    reader.close();\n    return rows;\n}\n\nprivate static int getColumnsOfTheMap() throws IOException {\n    BufferedReader reader = getReader(filePath);\n    String firstRow = reader.readLine();\n\n    return firstRow.length();\n}\n</code></pre>\n<p>Then, I created a method to get the map as 2D char array:</p>\n<pre><code>private static char[][] getMapFromFile() throws IOException {\n\n    char[][] map = new char[getRowsOfTheMap()][getColumnsOfTheMap()];\n\n    BufferedReader reader = getReader(filePath);\n\n    for (int i = 0; i &lt; map.length; i++) {\n        for (int j = 0; j &lt; map[0].length; j++) {\n            map[i][j] = (char) reader.read();\n        }\n    }\n    return map;\n}\n</code></pre>\n<p>And method for getting starting point:</p>\n<pre><code>private static int[] getStartingPoint(char[][] map) {\n    int[] startingPoint = {\n        -1,\n        -1\n    };\n    for (int i = 0; i &lt; map.length; i++) {\n        for (int j = 0; j &lt; map[i].length; j++) {\n            if (map[i][j] == 'X') {\n                startingPoint[0] = i;\n                startingPoint[1] = j;\n            }\n        }\n    }\n    return startingPoint;\n}\n</code></pre>\n<p>Map from the text file and map output.</p>\n<p><a href=\"https://i.stack.imgur.com/Yucpc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Yucpc.png\" alt=\"The map from the text file:\" /></a> <a href=\"https://i.stack.imgur.com/xV1wE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xV1wE.png\" alt=\"Map after I converted it into char array\" /></a></p>\n<p>And with location expected is [1,2] actual is [1,3]</p>\n"
    },
    {
      "last_activity_date": 1684593762,
      "question_id": 76295779,
      "body": "<p>I wrote a maven plugin and use also logging based on <code>org.apache.maven.plugin.logging.Log</code>. Info i sent and also errors do well, but no debug info although debug info from elsewhere can be seen. I use with <code>-e</code> option and with <code>-debug</code> option.</p>\n<p>I use both maven and the maven plugin api with version 3.9.1.</p>\n"
    },
    {
      "answers": [
        {
          "comments": [
            {
              "comment_id": 109036182,
              "body": "It doesn&#39;t explain why it could cause the exception. It could solve the problem, but explain why"
            },
            {
              "comment_id": 109182655,
              "body": "response.getOutputStream () tries to make a bulk copy of the file and causes saturation of the resources of the response. While the response.getWriter () can divide the content and write it sequentially."
            }
          ],
          "answer_id": 61640663,
          "body": "<p>I had the same problem, thinking it was the response timeout I modified the implementation, replacing </p>\n\n<blockquote>\n  <p>OutputStream responseOutPutStream = response.getOutputStream();</p>\n</blockquote>\n\n<p>with</p>\n\n<blockquote>\n  <p>try (PrintWriter pw = response.getWriter()) {\n  // your logic here\n  }</p>\n</blockquote>\n\n<p>this way it works.</p>\n"
        }
      ],
      "last_activity_date": 1684593758,
      "question_id": 57707115,
      "body": "<p>I'm trying to download a file in my application, but following exception is thrown:</p>\n\n<blockquote>\n  <p>org.apache.catalina.connector.ClientAbortException:\n  java.io.IOException: An existing connection was forcibly closed by the\n  remote host</p>\n</blockquote>\n\n<p>I've read most of related questions on SO, specially <a href=\"https://stackoverflow.com/questions/45482585/java-io-ioexception-an-existing-connection-was-forcibly-closed-by-the-remote-ho\">this one</a>, but none helped me to get through this exception.</p>\n\n<p>Code:</p>\n\n<pre><code>response.setContentType(mimeType);\nresponse.setContentLength((int) file.length());\nresponse.addHeader(\"Content-Disposition\", \"attachment; filename=\\\"\" + file.getName() + \"\\\"\");\n\nInputStream inputStream = new FileInputStream(file);\nOutputStream responseOutPutStream = response.getOutputStream();\n\nbyte buffer[] = new byte[32 * 1024];\nint bytes;\nwhile ((bytes = inputStream.read(buffer)) != -1) {\n    responseOutPutStream.write(buffer, 0, bytes);\n}\nresponseOutPutStream.flush();\ninputStream.close();\nresponseOutPutStream.close();\n</code></pre>\n\n<p><code>mimeType</code>is <code>application/octet-stream</code></p>\n\n<p>also, I implemented this code using <code>FileCopyUtils.copy(inputStream, responseOutPutStream);</code> but same result.</p>\n\n<p>The request is sent from <em>ExtJS</em> application using <code>&lt;a&gt;</code> tag.</p>\n\n<p>We tried to send a <strong>Get</strong> request via <em>Ajax</em>, but that didn't solve to problem.</p>\n\n<p>There's almost 2 days since i'm searching and debugging, couldn't find any way to solve this problem.</p>\n\n<p>how to fix this?</p>\n\n<p>Best Regards</p>\n\n<hr>\n\n<p><strong>EDIT:</strong></p>\n\n<p>more information: I use Spring Boot as underlying framework and the code above is called in a controller class (annotated with <code>@Controller</code> annotation)</p>\n"
    },
    {
      "answers": [
        {
          "answer_id": 76295702,
          "body": "<p>If your MongoDB query is returning the correct number of documents, but they are all identical, it could be due to a couple of reasons:</p>\n<ol>\n<li><p>Query criteria: Ensure that your query criteria are correctly specified to retrieve the desired documents. If your query is too broad or missing specific conditions, it might return multiple identical documents that match the criteria. Double-check your query filters and make sure they are correctly defined.</p>\n</li>\n<li><p>Mapping configuration: Verify that your mapping configuration with Morphia is accurate. Morphia is an Object Document Mapping (ODM) library for MongoDB, and it helps map Java objects to MongoDB documents. Ensure that your entity classes are properly annotated with the correct annotations and that the mapping is correctly configured. In particular, pay attention to any field or property that might be causing duplicate values across documents.</p>\n</li>\n<li><p>Data integrity: Check the data in your MongoDB collection to ensure that it doesn't contain duplicate documents with the same values. It's possible that the issue is not related to the query or mapping but rather to the data itself. Review your data insertion process and ensure that you're not unintentionally inserting duplicate documents.</p>\n</li>\n<li><p>Unique indexes: Consider adding unique indexes to relevant fields in your MongoDB collection. Unique indexes enforce uniqueness for a particular field or combination of fields, preventing duplicate values from being inserted. By adding unique indexes, you can ensure that duplicate documents with the same values are not stored in your collection.</p>\n</li>\n</ol>\n<p>By investigating these aspects, you should be able to identify and address the issue of receiving identical documents in your MongoDB query results.</p>\n"
        }
      ],
      "last_activity_date": 1684592609,
      "question_id": 76295646,
      "body": "<p>im working on a social media backend in java. I decide to work with MongoDB and morphia for the contant management. Everytime i open up a query for finding documents it finds the right amount of documents but the query is full of the identical document. Can anybody help?</p>\n<p>Ive searched everywhere for a solution but this seems like its not very popular</p>\n"
    },
    {
      "last_activity_date": 1684592586,
      "question_id": 76295696,
      "body": "<p>I am new to designing APIs and seeking guidance from all. I read about idempotency and I want to understand whether it is always required or it depends on the whether we are okay with having duplicate resources?</p>\n<p>I am designing a multi-page form where a customer will input information in multiple pages and can navigate between pages using Previous/Next buttons. The final page will have multiple file input fields and against each the customer will upload a file. After successful upload, he/she will submit the form.</p>\n<p>To model this flow I have created a class <code>CustomerInfo</code> which holds all the information entered by the customer. For the file upload part, <code>CustomerInfo</code> has a list of document ids. When a file is uploaded, the API uploads the document to s3 and creates an entry into a table which holds information regarding the document like document type and generates a new document id. This document id is also the key of the S3 object. I store this document id in <code>CustomerInfo</code> object.</p>\n<p><strong>So does the API handling the document upload need to be idempotent? Is it okay to have multiple entries? Or, Should it create one single entry in the table and for request with same customerId and documentType, it should overwrite the previous document in S3 and update that same table record and not create a new record?</strong></p>\n<p>Lets think of a scenario where for one input field, the customer uploads a file and then re-uploads another file, or the first upload failed and the customer reties the upload, then multiple entries will be created in the document table but it does not matter to me if I have duplicate records, as long as I am able to store the final document id correctly on the <code>CustomerInfo</code> object. Or, in this case also, do I need to implement some kind of idempotency so that only one document id is generated for a particular customer and document type and in case of re-uploads and retries, I overwrite this one entry?</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134541339,
          "body": "place <code>@lombok.EqualsAndHashCode.Exclude</code> over set fields, or replace <code>@Data</code> with <code>@Getter</code> and <code>@Setter</code> an implement reliable <code>#equals</code> and <code>#hashCode</code> methods."
        },
        {
          "comment_id": 134541862,
          "body": "Placing lombok.EqualsAndHashCode.Exclude worked for me. Can somebody explain why this issue occurs and how lombok.EqualsAndHashCode.Exclude works here? Thank You."
        }
      ],
      "last_activity_date": 1684592516,
      "question_id": 76295691,
      "body": "<p>I am working on a Spring Boot Project. I have 3 entities-</p>\n<pre><code>@Entity\n@Data\npublic class Author {\n    \n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    @Column(name=&quot;Author_id&quot;)\n    private int id;\n\n    @Column(name=&quot;First_name&quot;,nullable = false)\n    private String firstName;\n    @Column(name=&quot;Last_name&quot;,nullable = false)\n    private String lastName;\n    @Column(name=&quot;Mobile_number&quot;,nullable = false, unique = true,length = 10)\n    private long mobileNo;\n\n    @ManyToMany(mappedBy = &quot;authors&quot;,fetch = FetchType.EAGER)\n    // List&lt;Book&gt; books=new ArrayList&lt;&gt;();\n    private Set&lt;Book&gt; books=new HashSet&lt;&gt;();\n}\n\n</code></pre>\n<pre><code>package com.ayushsingh.demojpa.entity;\n\nimport java.sql.Date;\nimport java.util.ArrayList;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Set;\n\nimport com.fasterxml.jackson.annotation.JsonFormat;\n\nimport jakarta.persistence.CascadeType;\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.FetchType;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.JoinColumn;\nimport jakarta.persistence.JoinTable;\nimport jakarta.persistence.ManyToMany;\nimport jakarta.persistence.ManyToOne;\nimport lombok.Data;\n\n@Entity\n@Data\npublic class Book {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = &quot;Book_id&quot;)\n    private int id;\n\n    @Column(name = &quot;Book_name&quot;,nullable = false, unique = true)\n    private String bookName;\n\n    @Column(name = &quot;Publication_date&quot;,nullable = false)\n    @JsonFormat(shape=JsonFormat.Shape.STRING, pattern=&quot;yyyy-MM-dd&quot;)\n    private Date publishDate;\n\n    @Column(name = &quot;ISBN&quot;,nullable = false, unique = true)\n    private String isbn;\n\n    @ManyToOne \n    @JoinColumn(name = &quot;publication_id&quot;, nullable = false)\n    private Publication publication;\n\n    @ManyToMany(fetch = FetchType.EAGER)\n    @JoinTable(name = &quot;Book_Author&quot;, joinColumns = @JoinColumn(name = &quot;book_id&quot;, referencedColumnName = &quot;Book_id&quot;), inverseJoinColumns = @JoinColumn(name = &quot;author_id&quot;, referencedColumnName = &quot;Author_id&quot;))\n    // private List&lt;Author&gt; authors = new ArrayList&lt;&gt;();\n    private Set&lt;Author&gt; authors=new HashSet&lt;&gt;();\n}\n</code></pre>\n<pre><code>package com.ayushsingh.demojpa.entity;\n\nimport java.util.ArrayList;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Set;\n\n\nimport jakarta.persistence.CascadeType;\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.OneToMany;\nimport lombok.Data;\n\n@Entity\n@Data\npublic class Publication {\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n    @Column(name=&quot;Publication_name&quot;,nullable = false,unique = true)\n    private String name;\n\n    @Column(name=&quot;Registration_number&quot;,nullable = false, unique = true)\n    private String regNumber;\n\n    @OneToMany(mappedBy = &quot;publication&quot;,cascade={CascadeType.REFRESH,CascadeType.PERSIST,CascadeType.MERGE,CascadeType.DETACH})\n    // List&lt;Book&gt; books=new ArrayList&lt;&gt;();\n    private Set&lt;Book&gt; books=new HashSet&lt;&gt;();\n}\n\n</code></pre>\n<p>DTO Classes-</p>\n<pre><code>package com.ayushsingh.demojpa.dto;\n\nimport java.sql.Date;\nimport java.util.ArrayList;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Set;\n\n\nimport lombok.Data;\n\n@Data\npublic class BookDto {\n\n    private int id;\n\n    private String bookName;\n\n    private Date publishDate;\n\n    private String isbn;\n\n  \n    private PublicationDto publication;\n\n   \n    // private List&lt;AuthorDto&gt; authors = new ArrayList&lt;&gt;();\n        private Set&lt;AuthorDto&gt; authors=new HashSet&lt;&gt;();\n}\n</code></pre>\n<pre><code>package com.ayushsingh.demojpa.dto;\n\nimport java.util.ArrayList;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Set;\n\nimport lombok.Data;\n\n@Data\npublic class AuthorDto {\n\n    private int id;\n    private String firstName;\n    private String lastName;\n    private long mobileNo;\n    // List&lt;BookDto&gt; books=new ArrayList&lt;&gt;();\n    // Set&lt;BookDto&gt; books=new HashSet&lt;&gt;();\n}\n</code></pre>\n<pre><code>package com.ayushsingh.demojpa.dto;\n\nimport java.util.ArrayList;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Set;\n\n\nimport com.ayushsingh.demojpa.entity.Book;\n\nimport lombok.Data;\n\n@Data\npublic class PublicationDto {\n\n    private int id;\n    private String name;\n\n    private String regNumber;\n    // List&lt;BookDto&gt; books=new ArrayList&lt;&gt;();\n    // HashSet&lt;BookDto&gt; books=new HashSet&lt;&gt;();\n}  \n</code></pre>\n<p>When using Model Mapper, I get error when converting the entities to dtos. But, with List everything works fine.</p>\n<pre><code>023-05-20T19:28:57.369+05:30 ERROR 8632 --- [nio-8086-exec-6] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: force initializing collection loading   \n2023-05-20T19:28:57.388+05:30 ERROR 8632 --- [nio-8086-exec-6] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.hibernate.AssertionFailure: force initializing collection loading] with root cause  \n\norg.hibernate.AssertionFailure: force initializing collection loading\n        at org.hibernate.collection.spi.AbstractPersistentCollection.forceInitialization(AbstractPersistentCollection.java:811) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\n        at org.hibernate.engine.internal.StatefulPersistenceContext.initializeNonLazyCollections(StatefulPersistenceContext.java:1003) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\n        at org.hibernate.engine.internal.StatefulPersistenceContext.initializeNonLazyCollections(StatefulPersistenceContext.java:989) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\n</code></pre>\n<p>Please help me resolve this error. Please note- When using List/ArrayList, everything works fine with the same code. Problem arises with HashSet.</p>\n"
    },
    {
      "answers": [
        {
          "answer_id": 76295684,
          "body": "<pre><code>\nconfigurations.all {\n        resolutionStrategy {\n            eachDependency {\n                if ((requested.group == &quot;org.jetbrains.kotlin&quot;) &amp;&amp; (requested.name.startsWith(&quot;kotlin-stdlib&quot;))) {\n                    useVersion(&quot;1.6.10&quot;)\n                }\n            }\n        }\n    }\n\n</code></pre>\n<p>this fixed the issue</p>\n"
        }
      ],
      "last_activity_date": 1684592387,
      "question_id": 76295411,
      "body": "<p>I was trying to create a multi activity app with firebase auth and database, but during build, i kept encountering Duplicate Class error</p>\n<p>This is my error log</p>\n<pre><code>Duplicate class kotlin.collections.jdk8.CollectionsJDK8Kt found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk8-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.7.20)\nDuplicate class kotlin.internal.jdk7.JDK7PlatformImplementations found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk7-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.7.20)\nDuplicate class kotlin.internal.jdk7.JDK7PlatformImplementations$ReflectSdkVersion found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk7-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.7.20)\nDuplicate class kotlin.internal.jdk8.JDK8PlatformImplementations found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk8-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.7.20)\nDuplicate class kotlin.internal.jdk8.JDK8PlatformImplementations$ReflectSdkVersion found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk8-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.7.20)\nDuplicate class kotlin.io.path.DirectoryEntriesReader found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk7-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.7.20)\nDuplicate class kotlin.io.path.ExperimentalPathApi found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk7-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.7.20)\nDuplicate class kotlin.io.path.FileVisitorBuilder found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk7-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.7.20)\nDuplicate class kotlin.io.path.FileVisitorBuilderImpl found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk7-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.7.20)\nDuplicate class kotlin.io.path.FileVisitorImpl found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk7-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.7.20)\nDuplicate class kotlin.io.path.LinkFollowing found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk7-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.7.20)\nDuplicate class kotlin.io.path.PathNode found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk7-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.7.20)\nDuplicate class kotlin.io.path.PathRelativizer found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk7-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.7.20)\nDuplicate class kotlin.io.path.PathTreeWalk found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk7-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.7.20)\nDuplicate class kotlin.io.path.PathTreeWalk$bfsIterator$1 found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk7-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.7.20)\nDuplicate class kotlin.io.path.PathTreeWalk$dfsIterator$1 found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk7-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.7.20)\nDuplicate class kotlin.io.path.PathTreeWalkKt found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk7-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.7.20)\nDuplicate class kotlin.io.path.PathWalkOption found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk7-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.7.20)\nDuplicate class kotlin.io.path.PathsKt found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk7-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.7.20)\nDuplicate class kotlin.io.path.PathsKt__PathReadWriteKt found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk7-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.7.20)\nDuplicate class kotlin.io.path.PathsKt__PathUtilsKt found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk7-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.7.20)\nDuplicate class kotlin.jdk7.AutoCloseableKt found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk7-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.7.20)\nDuplicate class kotlin.jvm.jdk8.JvmRepeatableKt found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk8-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.7.20)\nDuplicate class kotlin.jvm.optionals.OptionalsKt found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk8-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.7.20)\nDuplicate class kotlin.random.jdk8.PlatformThreadLocalRandom found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk8-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.7.20)\nDuplicate class kotlin.streams.jdk8.StreamsKt found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk8-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.7.20)\nDuplicate class kotlin.streams.jdk8.StreamsKt$asSequence$$inlined$Sequence$1 found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk8-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.7.20)\nDuplicate class kotlin.streams.jdk8.StreamsKt$asSequence$$inlined$Sequence$2 found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk8-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.7.20)\nDuplicate class kotlin.streams.jdk8.StreamsKt$asSequence$$inlined$Sequence$3 found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk8-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.7.20)\nDuplicate class kotlin.streams.jdk8.StreamsKt$asSequence$$inlined$Sequence$4 found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk8-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.7.20)\nDuplicate class kotlin.text.jdk8.RegexExtensionsJDK8Kt found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk8-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.7.20)\nDuplicate class kotlin.time.jdk8.DurationConversionsJDK8Kt found in modules jetified-kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and jetified-kotlin-stdlib-jdk8-1.7.20 (org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.7.20)\n\n</code></pre>\n<p>this is my build.gradle file</p>\n<pre><code>plugins {\n    id 'com.android.application'\n    id 'org.jetbrains.kotlin.android'\n    id 'com.google.gms.google-services'\n}\n\nandroid {\n    namespace 'com.example.gpsmeasurementapp'\n    compileSdk 33\n\n    defaultConfig {\n        applicationId &quot;com.example.gpsmeasurementapp&quot;\n        minSdk 30\n        targetSdk 33\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n        vectorDrawables {\n            useSupportLibrary true\n        }\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n    kotlinOptions {\n        jvmTarget = '1.8'\n    }\n    buildFeatures {\n        compose true\n    }\n    composeOptions {\n        kotlinCompilerExtensionVersion '1.3.2'\n    }\n    packagingOptions {\n        resources {\n            excludes += '/META-INF/{AL2.0,LGPL2.1}'\n        }\n    }\n}\n\ndependencies {\n    implementation 'androidx.core:core-ktx:1.10.1'\n    implementation 'androidx.lifecycle:lifecycle-runtime-ktx:2.6.1'\n    implementation 'androidx.activity:activity-compose:1.7.1'\n    implementation 'androidx.compose.ui:ui'\n    implementation 'androidx.compose.ui:ui-graphics'\n    implementation 'androidx.compose.ui:ui-tooling-preview'\n    implementation 'androidx.compose.material3:material3'\n    implementation 'com.google.firebase:firebase-auth-ktx:22.0.0'\n    implementation 'com.google.firebase:firebase-auth:22.0.0'\n    implementation 'com.google.firebase:firebase-analytics-ktx'\n    implementation platform('androidx.compose:compose-bom:2022.10.00')\n    implementation platform('com.google.firebase:firebase-bom:32.0.0')\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n    implementation 'com.google.firebase:firebase-database-ktx'\n    androidTestImplementation 'androidx.compose.ui:ui-test-junit4'\n    debugImplementation 'androidx.compose.ui:ui-tooling'\n    debugImplementation 'androidx.compose.ui:ui-test-manifest'\n    def nav_version = &quot;2.5.3&quot;\n    implementation &quot;androidx.navigation:navigation-compose:$nav_version&quot;\n\n}\n</code></pre>\n<p>I have tried removing duplicate dependencies but the problem persists\nI have added <code>android.enableJetifier=true</code> as i saw it in another question but the same errors are shown</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 126679691,
          "body": "Any solution to this usecase?"
        }
      ],
      "answers": [
        {
          "answer_id": 53036404,
          "body": "<p>My first inclination is <em>not to mock this</em>: It looks like <code>startAsync</code> is a part of MyClassImplementRunner's public API, and that you should be testing these pieces together. In a test class like MyClassImplementRunnerTest, it makes sense to treat the system under test as MyClassImplementRunner without trying to split it up. Otherwise, it's very easy to lose track of <em>what you're testing</em>, including <em>what is real</em> versus <em>what is a mock</em>.</p>\n\n<p>If there is any <em>external</em> condition that MyClassImplementRunner is looking for, you can mock that dependency, which would likely cause your CompletableFuture to return immediately; however, you've only shown us a single String parameter.</p>\n\n<p>That said, it's possible that <code>startAsync</code> contains logic that you'd like to test exhaustively without a real MyClassImplementRunner. In that case, you could create an overload for testing, possibly with limited visibility or <a href=\"https://google.github.io/guava/releases/23.0/api/docs/com/google/common/annotations/VisibleForTesting.html\" rel=\"nofollow noreferrer\">test-only annotations</a> to indicate that it shouldn't be called in production.</p>\n\n<pre><code>public static CompletableFuture&lt;Void&gt; startAsync(String param1) {\n  return startAsync(new MyClassImplementRunner(param1);\n}\n\n/** Package-private, for a test class in the same package. */\n@VisibleForTesting static CompletableFuture&lt;Void&gt; startAsync(Runnable task) {\n\n  return CompletableFuture.runAsync(task).whenComplete(\n      (response, throwable) -&gt; {\n        //some code when complete\n    });\n}\n</code></pre>\n\n<p>By splitting this up, you can now run <code>startAsync(new Runnable())</code> in tests to simulate an instantly-succeeding task, and run <code>startAsync(() -&gt; { throw new RuntimeException(); })</code> to simulate an instantly-failing task. This allows you to test <code>startAsync</code> independently from MyClassImplementRunner.</p>\n\n<p>It may not seem wise to refactor for testing or to introduce test-only methods, and this is a fair assessment: Purely speaking, MyClassImplementRunner <em>should</em> be tested exactly as consumers would run it, without mocking. However, if you're saying it is much more convenient in tests to run with a different Runnable than MyClassImplementRunner, you are in control of the code and you can prepare for this by including the appropriate flexiblity (\"testing seam\") in the code you control. In fact, if <code>startAsync</code> is a separate-enough method that it can take an arbitrary Runnable, you may choose to separate it out to be a separate method with separate testing.</p>\n"
        },
        {
          "answer_id": 53082798,
          "body": "<p>Extract the code you execute in <code>whenComplete</code> to a field and provide a constructor to replace it.</p>\n\n<pre><code>class Runner implement Runnable {\n\n  private final String param;\n  private final BiConsumer&lt;Void, Throwable&gt; callback;\n\n  public Runner(String param) {\n    this.param = param;\n    this.callback = this::callbackFunction;\n  }\n\n  Runner(String param, BiConsumer&lt;Void, Throwable&gt; callback) {\n    this.param = param;\n    this.callback = callback;\n  }\n\n  public void run() {\n    CompletableFuture.runAsync(task).whenComplete(callback);\n  }\n\n  private void callbackFunction(Void result, Throwable throwable) {\n    //some code when complete\n  }\n}\n</code></pre>\n\n<p>The test will look as follows:</p>\n\n<pre><code>class RunnerTest {\n\n  @Test\n  void test() {\n    new Runner(\"param\", (response, throwable) -&gt; /* mocked behavior */).run();\n  }\n}\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684591686,
      "question_id": 53021545,
      "body": "<p>I want to mock that some code is being called when a <code>CompletableFuture</code> has completed successfully.</p>\n\n<p>I have this class:</p>\n\n<pre><code>public class MyClassImplementRunner implements Runnable {\n\n    private final String param1;\n\n    public MyClassImplementRunner(String param1) {\n        this.param1 = param1;\n    }\n\n    public static CompletableFuture&lt;Void&gt; startAsync(String param1) {\n\n        return CompletableFuture.runAsync(\n            new MyClassImplementRunner(param1)).whenComplete(\n            (response, throwable) -&gt; {\n                //some code when complete\n            });\n\n        @Override\n        public void run () {\n            //the runnable code\n        }\n    }\n}\n</code></pre>\n\n<p>In my Junit (using Mockito and Java 8), I need to mock that<br></p>\n\n<pre><code>//some code when complete \n</code></pre>\n\n<p>is called when Future is completed successfully.</p>\n\n<p>Could you provide some indications on how to achieve this?</p>\n"
    },
    {
      "last_activity_date": 1684591361,
      "question_id": 76279935,
      "body": "<p>As standard <code>KeyboardView</code> is depricated since api&gt;29, I am trying to implement a custom view layout for a custom system-wide soft-keyboard. I have followed <a href=\"https://stackoverflow.com/questions/57634572/how-do-i-implement-custom-view-for-keyboard-after-keyboard-has-been-deprecated\"><strong>this</strong></a> instruction for creating the keyboard layout. The keyboard itself works fine (provide input to desired input field).</p>\n<p>I am running this test on android 11.</p>\n<p><strong>Problem is when I open the keyboard in landscape mode or change the device orientation to landscape while typing, it shows up over the entire input field when the keyboard suppose to push the input field up.But in portrait mode the keyboard appears as expected as any standard keyboard</strong>. Here are some examples:</p>\n<blockquote>\n<p><strong>sms app (portrait): keyboard push the input field up as expected.</strong></p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/HlDML.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HlDML.png\" alt=\"enter image description here\" /></a></p>\n<blockquote>\n<p><strong>sms app (landscape) : keyboard shows up on top of the input field making it not visible to user and doesn't push the input field up.</strong></p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/oLW2b.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oLW2b.png\" alt=\"enter image description here\" /></a></p>\n<blockquote>\n<p><strong>youtube app (portrait) : Keyboard push the input field up as expected</strong></p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/Uwmmd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Uwmmd.png\" alt=\"enter image description here\" /></a></p>\n<blockquote>\n<p><strong>But in landscape mode keyboard covers the input field.</strong></p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/y9UMb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/y9UMb.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>How to resolve this issue? Any help would be appreciated.</strong></p>\n<p><strong>Here is the layout xml file for the keyboard :</strong></p>\n\n<pre><code>&lt;LinearLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:id=&quot;@+id/keyboard_view&quot;\n    android:orientation=&quot;vertical&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_alignParentBottom=&quot;true&quot;&gt;\n\n    &lt;LinearLayout\n        android:orientation=&quot;horizontal&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;48dp&quot;&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/btn_shift&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:tag=&quot;SHIFT&quot;\n            android:text=&quot;SHFT&quot; /&gt;\n        &lt;Button\n            android:id=&quot;@+id/btn_G&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:tag=&quot;G&quot;\n            android:text=&quot;g&quot; /&gt;\n        &lt;Button\n            android:id=&quot;@+id/btn_3&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;match_parent&quot;\n            android:tag=&quot;3&quot;\n            android:text=&quot;3&quot; /&gt;\n    &lt;/LinearLayout&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n<p><strong>Here is the java implementation of <code>InputMethodService</code> :</strong></p>\n<pre><code>package com.example.keyboardproject;\nimport android.inputmethodservice.InputMethodService;\nimport android.view.View;\nimport android.view.inputmethod.InputConnection;\nimport android.widget.Button;\n\npublic class TestIME extends InputMethodService implements View.OnClickListener{\n    View myKeyboardView;\n    @Override\n    public View onCreateInputView() {\n        myKeyboardView = getLayoutInflater().inflate(R.layout.my_keyboard_layout,null);\n        Button btn3 = myKeyboardView.findViewById(R.id.btn_3);\n        btn3.setOnClickListener(this);\n        return myKeyboardView;\n    }\n\n    @Override\n    public void onClick(View v){\n        InputConnection ic = getCurrentInputConnection();\n        if(v instanceof Button){\n            String clickedKeyText = ((Button) v).getText().toString();\n            ic.commitText(clickedKeyText,1);\n        }\n    }\n}\n</code></pre>\n"
    },
    {
      "answers": [
        {
          "answer_id": 76295592,
          "body": "<p>This issue was resolved by disabling OpenTelemetry for the application. Obviously, we wanted to be able to collect metrics for the deployed application, but this was a temporary fix.\nWe resolved the OTel issue by upgrading the OTel Java Agent to v1.22. thehttps://stackoverflow.com/questions/75746779/conflicts-between-springboot-jersey-and-splunk-otel-collector</p>\n"
        }
      ],
      "last_activity_date": 1684590893,
      "question_id": 75416778,
      "body": "<p>I am trying to run a Spring boot application on a Kubernetes cluster. Locally, the application runs and is available. I can hit endpoints on the local version. However, when deployed, the endpoints are not reachable.</p>\n<p>Java 17</p>\n<p>Spring Boot 3.0.2</p>\n<p>spring-boot-starter-actuator 3.0.2</p>\n<p>There is not a clear reason why the endpoints are not available. The only error I'm seeing in the logs is regarding metrics.</p>\n<pre><code>{&quot;app&quot;:&quot;MyApi&quot;,&quot;ts&quot;:&quot;2023-02-10T22:25:49.141+00:00&quot;,&quot;logger&quot;:&quot;org.springframework.boot.SpringApplication&quot;,&quot;level&quot;:&quot;ERROR&quot;,&quot;class&quot;:&quot;org.springframework.boot.SpringApplication&quot;,&quot;method&quot;:&quot;reportFailure&quot;,&quot;file&quot;:&quot;SpringApplication.java&quot;,&quot;line&quot;:820,&quot;thread&quot;:&quot;main&quot;,&quot;stack&quot;:&quot;org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'processorMetrics' defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/SystemMetricsAutoConfiguration.class]: Failed to instantiate [io.micrometer.core.instrument.binder.system.ProcessorMetrics]: Factory method 'processorMetrics' threw exception with message: null\\n\\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)\\n\\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:491)\\n\\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1324)\\n\\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1161)\\n\\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561)\\n\\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\\n\\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\\n\\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\\n\\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\\n\\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\\n\\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961)\\n\\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915)\\n\\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)\\n\\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\\n\\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)\\n\\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)\\n\\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\\n\\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)\\n\\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)\\n\\tat com.mystuff.sync.myapi.MyApiApplication.main(MyApiApplication.java:12)\\n\\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(NativeMethodAccessorImpl.java)\\n\\tat jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\\n\\tat jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\\n\\tat java.lang.reflect.Method.invoke(Method.java:568)\\n\\tat org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\\n\\t... 3 frames truncated\\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [io.micrometer.core.instrument.binder.system.ProcessorMetrics]: Factory method 'processorMetrics' threw exception with message: null\\n\\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)\\n\\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\\n\\t... 27 common frames omitted\\nCaused by: java.lang.NullPointerException: null\\n\\tat java.util.Objects.requireNonNull(Objects.java:208)\\n\\tat sun.nio.fs.UnixFileSystem.getPath(UnixFileSystem.java:263)\\n\\tat java.nio.file.Path.of(Path.java:147)\\n\\tat java.nio.file.Paths.get(Paths.java:69)\\n\\tat jdk.internal.platform.CgroupUtil.lambda$readStringValue$1(CgroupUtil.java:67)\\n\\tat java.security.AccessController.doPrivileged(AccessController.java:569)\\n\\tat jdk.internal.platform.CgroupUtil.readStringValue(CgroupUtil.java...&quot;,&quot;msg&quot;:&quot;Application run failed&quot;}\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'processorMetrics' defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/SystemMetricsAutoConfiguration.class]: Failed to instantiate [io.micrometer.core.instrument.binder.system.ProcessorMetrics]: Factory method 'processorMetrics' threw exception with message: null\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:491)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1324)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1161)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)\n    at com.mystuff.sync.myapi.MyApiApplication.main(MyApiApplication.java:12)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:95)\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\n    at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65)\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [io.micrometer.core.instrument.binder.system.ProcessorMetrics]: Factory method 'processorMetrics' threw exception with message: null\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\n    ... 27 more\nCaused by: java.lang.NullPointerException\n    at java.base/java.util.Objects.requireNonNull(Objects.java:208)\n</code></pre>\n<p>Is there a way to disable collection of metrics? I have seen posts regarding this, and setting <code>management.endpoint.metrics.enabled=false</code> for spring-boot-actuator, but this has had no effect.</p>\n"
    },
    {
      "answers": [
        {
          "answer_id": 76295567,
          "body": "<p>Since you're using spring-boot and it's fairly simple to create database functionality with spring data <a href=\"https://spring.io/guides/gs/accessing-data-jpa/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/accessing-data-jpa/</a> I'd suggest to create either a special 'getByParentId' and/or 'deleteByParentId' and call the methods seperate from code.</p>\n"
        }
      ],
      "last_activity_date": 1684590626,
      "question_id": 76286393,
      "body": "<p>I'm trying to cascade create and delete entity with bidirectional self reference, but it's not working.</p>\n<ul>\n<li><p>When cascade type is ALL - entity is creating but not removing;</p>\n</li>\n<li><p>When cascade type is REMOVE - entity is removing but not creating;</p>\n</li>\n<li><p>Can't use fetch = Lazy because I need to validate all fields before removing, and anyway I need to get all child fields;</p>\n</li>\n</ul>\n<p>Using Spring 3 and Postgresql</p>\n<p><strong>Entity:</strong></p>\n<pre><code>@Entity\n@Getter\n@Setter\n@Table(name = &quot;field&quot;)\npublic class Field {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;, nullable = false)\n    @JdbcTypeCode(SqlTypes.BIGINT)\n    private Long id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;parent_field_id&quot;)\n    private Field parentField;\n\n    @OneToMany(mappedBy = &quot;parentField&quot;, fetch = FetchType.EAGER, cascade =  CascadeType., orphanRemoval = true)\n    private Set&lt;Field&gt; childFields = new HashSet&lt;&gt;();\n\n}\n</code></pre>\n<p><strong>Test code:</strong></p>\n<pre><code>final Field firstLevel = createField(&quot;firstLevel&quot;);\nfinal Field secondLevel = createField(&quot;secondLevel&quot;);\nsecondLevel.setParentField(firstLevel);\nfirstLevel.getChildFields().add(secondLevel);\n\nfinal Field thirdLevel = createField(&quot;thirdLevel&quot;);\nthirdLevel.setParentField(secondLevel);\nsecondLevel.getChildFields().add(thirdLevel);\nfieldRepo.save(firstLevel);\n\n// Checking child fields saved\nfinal Field filedWithChild = fieldRepo.findById(1L).get();\nfiledWithChild.getChildFields().forEach(field -&gt; Assert.isTrue(field.getId() != null));\n\n// Trying to remove second level\nlog.info(&quot;Prepare to delete&quot;);\nfieldRepo.deleteById(2L);\nfinal Optional&lt;Field&gt; byId = fieldRepo.findById(2L);\nAssert.isTrue(byId.isEmpty(),&quot;Second level was not removed&quot;);\n</code></pre>\n<p><strong>The logs show that after the deletion there is no sql delete request itself</strong></p>\n<pre><code>2023-05-19T10:56:55.109+05:00  INFO 31018 --- [  restartedMain] c.e.springbatchtest.app.SpringBatch      : Prepare to delete\n2023-05-19T10:56:55.110+05:00 DEBUG 31018 --- [  restartedMain] org.hibernate.SQL                        : select f1_0.id,c1_0.parent_field_id,c1_0.id,c1_0.name,f1_0.name,p1_0.id,p1_0.name,p1_0.parent_field_id from field f1_0 left join field c1_0 on f1_0.id=c1_0.parent_field_id left join field p1_0 on p1_0.id=f1_0.parent_field_id where f1_0.id=?\nHibernate: select f1_0.id,c1_0.parent_field_id,c1_0.id,c1_0.name,f1_0.name,p1_0.id,p1_0.name,p1_0.parent_field_id from field f1_0 left join field c1_0 on f1_0.id=c1_0.parent_field_id left join field p1_0 on p1_0.id=f1_0.parent_field_id where f1_0.id=?\n2023-05-19T10:56:55.112+05:00 DEBUG 31018 --- [  restartedMain] org.hibernate.SQL                        : select c1_0.parent_field_id,c1_0.id,c1_0.name from field c1_0 where c1_0.parent_field_id=?\nHibernate: select c1_0.parent_field_id,c1_0.id,c1_0.name from field c1_0 where c1_0.parent_field_id=?\n2023-05-19T10:56:55.114+05:00 DEBUG 31018 --- [  restartedMain] org.hibernate.SQL                        : select c1_0.parent_field_id,c1_0.id,c1_0.name from field c1_0 where c1_0.parent_field_id=?\nHibernate: select c1_0.parent_field_id,c1_0.id,c1_0.name from field c1_0 where c1_0.parent_field_id=?\n2023-05-19T10:56:55.120+05:00 DEBUG 31018 --- [  restartedMain] org.hibernate.SQL                        : select f1_0.id,c1_0.parent_field_id,c1_0.id,c1_0.name,f1_0.name,p1_0.id,p1_0.name,p1_0.parent_field_id from field f1_0 left join field c1_0 on f1_0.id=c1_0.parent_field_id left join field p1_0 on p1_0.id=f1_0.parent_field_id where f1_0.id=?\nHibernate: select f1_0.id,c1_0.parent_field_id,c1_0.id,c1_0.name,f1_0.name,p1_0.id,p1_0.name,p1_0.parent_field_id from field f1_0 left join field c1_0 on f1_0.id=c1_0.parent_field_id left join field p1_0 on p1_0.id=f1_0.parent_field_id where f1_0.id=?\n2023-05-19T10:56:55.122+05:00 DEBUG 31018 --- [  restartedMain] org.hibernate.SQL                        : select c1_0.parent_field_id,c1_0.id,c1_0.name from field c1_0 where c1_0.parent_field_id=?\nHibernate: select c1_0.parent_field_id,c1_0.id,c1_0.name from field c1_0 where c1_0.parent_field_id=?\n2023-05-19T10:56:55.124+05:00 DEBUG 31018 --- [  restartedMain] org.hibernate.SQL                        : select c1_0.parent_field_id,c1_0.id,c1_0.name from field c1_0 where c1_0.parent_field_id=?\nHibernate: select c1_0.parent_field_id,c1_0.id,c1_0.name from field c1_0 where c1_0.parent_field_id=?\n</code></pre>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134540588,
          "body": "That will depend entirely on your definition of &quot;the app is closed&quot;. <code>AlarmManager</code> is designed for use when your process is not running, and so that part should work fine. However, there will times when your app is in a state where your alarms get cancelled, such as when the user clicks &quot;Force Stop&quot; in the Settings app&#39;s page for your app. Depending on the device manufacturer, other user actions may also cancel your alarms."
        },
        {
          "comment_id": 134540746,
          "body": "Thank you for your response @CommonsWare. The code I provided does not show a notification when I exit the app or when the app is closed. But when I start the app, it suddenly shows the notification."
        }
      ],
      "answers": [
        {
          "answer_id": 76295566,
          "body": "<p>Actually, this method should work. I made the same feature in my project. But after comparing our approach I see a few differences. Instead <code>alarmManager.setExact</code> use <code>alarmManager.setRepeating</code> as you need this Push to repeat. <strong>Also, there is no guarantee that Push will be sent exactly in a specific second.</strong> It could be later. Just wait some time. Here is my working example for sending Push every weekend. Maybe you find something useful for you.</p>\n<pre><code>private void initLocalPushNotificationBroadcast() {\n    AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);\n    Intent intent = new Intent(this, AlarmReceiver.class);\n    PendingIntent broadcast = PendingIntent.getBroadcast(this, 11100, intent, PendingIntent.FLAG_UPDATE_CURRENT | PendingIntent.FLAG_IMMUTABLE);\n    long time = Utils.getStartCurrentWeekInMilliseconds(1) - Utils.MILLISECONDS_IN_15_HOUR;\n    alarmManager.setRepeating(\n            AlarmManager.RTC_WAKEUP,\n            time,\n            AlarmManager.INTERVAL_DAY * 7,\n            broadcast);\n}\n\n\npublic static long getStartCurrentWeekInMilliseconds(int offsetFromCurrentWeek) {\n    Calendar cal = Calendar.getInstance();\n    cal.setTimeZone(TIME_ZONE);\n    cal.set(Calendar.HOUR_OF_DAY, 0);\n    cal.clear(Calendar.MINUTE);\n    cal.clear(Calendar.SECOND);\n    cal.clear(Calendar.MILLISECOND);\n    // get start of this week in milliseconds\n    cal.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY);\n    // start of the week\n    cal.add(Calendar.WEEK_OF_YEAR, offsetFromCurrentWeek);\n    return cal.getTimeInMillis();\n}\n</code></pre>\n<p>Call <code>initLocalPushNotificationBroadcast</code> in <code>onCreate</code> method in Application class.</p>\n<p>And here is AlarmReceiver:</p>\n<pre><code>class AlarmReceiver : BroadcastReceiver() {\n\noverride fun onReceive(context: Context, intent: Intent?) {\n\n    val resultIntent = Intent(context, RankingActivity::class.java)\n    resultIntent.putExtra(WEEKLY_PERFORMANCE_EVENT, true)\n    resultIntent.putExtra(MainActivity.PN_RECEIVED_DATE, System.currentTimeMillis())\n    val backIntent = Intent(context, MainActivity::class.java)\n    backIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK)\n    val pendingIntent = PendingIntent.getActivities(context, 0, arrayOf(backIntent, resultIntent), PendingIntent.FLAG_ONE_SHOT or PendingIntent.FLAG_IMMUTABLE)\n\n    val builder = Notification.Builder(context)\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n        builder.setChannelId(channelId)\n    }\n    val notification = builder.setContentTitle(&quot;Weekly performance&quot;)\n        .setContentText(&quot;Content.&quot;)\n        .setAutoCancel(true)\n        .setSmallIcon(R.mipmap.ic_launcher)\n        .setContentIntent(pendingIntent)\n        .build()\n\n    val notificationManager = context.getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager\n\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n        val channel = NotificationChannel(\n            channelId,\n            &quot;Weekly performance&quot;,\n            IMPORTANCE_DEFAULT\n        )\n        notificationManager.createNotificationChannel(channel)\n    }\n\n    notificationManager.notify(KSConfig.PUSH_ACTION.LOCAL_WEEKLY_PERFORMANCE, notification)\n}\n\ncompanion object {\n    val channelId = MyFMessagingService.NOTIFICATION_CHANNEL_ID + KSConfig.PUSH_ACTION.LOCAL_WEEKLY_PERFORMANCE\n}\n\n}\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684590624,
      "question_id": 76295296,
      "body": "<p>I am new to Android development, and I'm unsure if it's possible or not. I have an Android yoga app that operates offline without relying on a server. Every weekend, I need to show my users only a few notifications sentences stored within the app. I am looking for a way to achieve this without relying on a server for implementation.</p>\n<p>I am trying with this method, but it only works when the app is opened. and does not work when the app is closed. Is there any way for it to work even when the app is closed?</p>\n<p>`</p>\n<pre><code>// setting up the notification \n// Set the desired date and time for the notification \n\nCalendar calendar = Calendar.getInstance(); \ncalendar.set(Calendar.YEAR, 2023); \ncalendar.set(Calendar.MONTH, Calendar.MAY); \ncalendar.set(Calendar.DAY_OF_MONTH, 20); \ncalendar.set(Calendar.HOUR_OF_DAY, 11); \ncalendar.set(Calendar.MINUTE, 1); \ncalendar.set(Calendar.SECOND, 0);\n\n// Create a new PendingIntent for the BroadcastReceiver\nIntent intent = new Intent(this, AlarmReceiver.class);\nPendingIntent pendingIntent = PendingIntent.getBroadcast(\n        this,\n        0,\n        intent,\n        PendingIntent.FLAG_IMMUTABLE\n);\n\n\n// Get the AlarmManager and schedule the alarm\nAlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);\nalarmManager.setExact(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent);`\n</code></pre>\n<p><strong>AlarmReceiver.java</strong></p>\n<pre><code>public class AlarmReceiver extends BroadcastReceiver { \n\n\n\n    @Override \n    public void onReceive(Context context, Intent intent) { \n        // Handle the alarm trigger here, show the notification \n        showNotification(context); \n    }\n\n\n    private void showNotification(Context context) {\n        // Create the notification channel (if not already created)\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            NotificationChannel channel = new NotificationChannel(\n                    &quot;channel_id&quot;,\n                    &quot;Channel Name&quot;,\n                    NotificationManager.IMPORTANCE_DEFAULT\n            );\n            NotificationManager notificationManager = context.getSystemService(NotificationManager.class);\n            notificationManager.createNotificationChannel(channel);\n        }\n    \n        // Create the notification\n        NotificationCompat.Builder builder = new NotificationCompat.Builder(context, &quot;channel_id&quot;)\n                .setContentTitle(&quot;Yoga App&quot;)\n                .setContentText(&quot;Take a moment for yourself and unwind with a soothing yoga session in our app today&quot;)\n                .setSmallIcon(R.drawable.ic_launcher)\n                .setAutoCancel(true);\n    \n        NotificationManagerCompat notificationManager = NotificationManagerCompat.from(context);\n        notificationManager.notify(0, builder.build());\n}}`\n</code></pre>\n<p>I tried this method but it only worked when the app is open. Is there any way that it can work even when the app is closed?</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134537895,
          "body": "I&#39;m trying to understand the logic, it does not appear that you&#39;ll need the nested for-loops.  Each subsequent loop is only iterating once."
        },
        {
          "comment_id": 134540990,
          "body": "<i>I first read the information from a file to an ArrayList</i>  - The DefaultTableModel use a Vector of Vectors to hold the data. So currently your code would have 3 references to the data: 1) the ArrayList, 2) the Array and 3) the Vectors. No need for 3 copies. Instead, create a custom <code>CourseTableModel</code> that uses the ArrayList to hold the data. See the example from <a href=\"https://tips4java.wordpress.com/2008/11/21/row-table-model/\" rel=\"nofollow noreferrer\">Row Table Model</a> on how to create the custom model."
        }
      ],
      "answers": [
        {
          "answer_id": 76293490,
          "body": "<p>You don't need the nested for-loops.</p>\n<p>What you can do is iterate once, for each item in <code>listOfCourses</code>, setting each secondary index to the according column.</p>\n<p>I changed <code>i</code> to <code>row</code> for clarity.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Object[][] data = new Object[listOfCourses.size()][5];\nfor (int row = 0; row &lt; listOfCourses.size(); row++) {\n    data[row][0] = yearInWord(listOfCourses.get(row).getYear());\n    data[row][1] = termInWord(listOfCourses.get(row).getTerm());\n    data[row][2] = listOfCourses.get(row).getCourseCode();\n    data[row][3] = listOfCourses.get(row).getCourseName();\n    data[row][4] = listOfCourses.get(row).getUnits();\n}\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 134541486,
              "body": "Hey, that&#39;s my for-loop re-write!  I&#39;m just kidding, glad it helped."
            }
          ],
          "answer_id": 76293671,
          "body": "<p>I've reproduce your code as I understood like this:</p>\n<pre><code>package answer;\n\nimport javax.swing.*;\nimport javax.swing.table.DefaultTableModel;\n\nimport java.awt.event.*;\nimport java.util.ArrayList;\nimport java.util.List;\n\nclass MyAnswer extends JFrame {\n\n    public MyAnswer() {\n        super(&quot;Stackoverflow answer&quot;);\n        WindowListener l = new WindowAdapter() {\n            public void windowClosing(WindowEvent e) {\n                System.exit(0);\n            }\n        };\n\n        getContentPane()\n                .add(createTable());\n\n        addWindowListener(l);\n        setSize(800, 800);\n        setVisible(true);\n    }\n\n    public JTable createTable() {\n        final List&lt;Course&gt; listOfCourses = getCourses();\n        Object[][] data = new Object[listOfCourses.size()][5];\n        for (int i = 0; i &lt; listOfCourses.size(); i++) {\n            for (int j = 0; j &lt; 1; j++) {\n                data[i][j] = yearInWord(listOfCourses.get(i).getYear());\n                for (int k = 1; k &lt; 2; k++) {\n                    data[i][k] = termInWord(listOfCourses.get(i).getTerm());\n                    for (int l = 2; l &lt; 3; l++) {\n                        data[i][l] = listOfCourses.get(i).getCourseCode();\n                        for (int m = 3; m &lt; 4; m++) {\n                            data[i][m] = listOfCourses.get(i).getCourseName();\n                            for (int n = 4; n &lt; 5; n++) {\n                                data[i][n] = listOfCourses.get(i).getUnits();\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        JTable myTable = new JTable(\n                new DefaultTableModel(data, new String[] { &quot;Year&quot;, &quot;Term&quot;, &quot;Course No.&quot;, &quot;Course Title&quot;, &quot;Units&quot; }));\n        myTable.setSize(700, 400);\n        return myTable;\n    }\n\n    private String yearInWord(int year) {\n        return year + &quot;&quot;;\n    }\n\n    private String termInWord(int term) {\n        return term + &quot;&quot;;\n    }\n\n    public List&lt;Course&gt; getCourses() {\n        final List&lt;Course&gt; courses = new ArrayList&lt;&gt;();\n        courses.add(new Course(1, 1, &quot;CFE 101&quot;, &quot;GOD'S JOURNEY WITH HIS PEOPLE&quot;, 3));\n        courses.add(new Course(1, 2, &quot;CFE 102&quot;, &quot;CHRISTIAN MORALITY IN OUR TIMES&quot;, 2));\n        courses.add(new Course(1, 3, &quot;CFE 102&quot;, &quot;CATHOLIC FOUNDATION OF MISSION&quot;, 1));\n        return courses;\n    }\n\n    public static void main(String[] args) {\n        new MyAnswer();\n    }\n}\n</code></pre>\n<p>And <strong>Course</strong> class is like this:</p>\n<pre><code>package answer;\n\npublic class Course {\n    private final int year;\n    private final int term;\n    private final String courseCode;\n    private final String courseName;\n    private final int units;\n\n    public Course(int year, int term, String courseCode, String courseName, int units) {\n        this.year = year;\n        this.term = term;\n        this.courseCode = courseCode;\n        this.courseName = courseName;\n        this.units = units;\n    }\n\n    public int getYear() {\n        return year;\n    }\n\n    public int getTerm() {\n        return term;\n    }\n\n    public String getCourseCode() {\n        return courseCode;\n    }\n\n    public String getCourseName() {\n        return courseName;\n    }\n\n    public int getUnits() {\n        return units;\n    }\n    \n    public Object[] getDefaultModel() {\n        return new String[] {\n            this.year + &quot;&quot;,\n            this.term + &quot;&quot;,\n            this.courseCode,\n            this.courseCode,\n            this.units + &quot;&quot;\n        };\n    }\n}\n</code></pre>\n<p>So, I've the result as expected:\n<a href=\"https://i.stack.imgur.com/cGPd9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cGPd9.png\" alt=\"my answer screenshoot\" /></a></p>\n<p>To debug your code, please let us know all your code. How you read the file? How your course class look like? Can you upload your file content?</p>\n<p>Anyway, your code need to be refactored. All nested loop is not necessary because your loop step is always 1. Then, your code should be like:</p>\n<pre><code>Object[][] data = new Object[listOfCourses.size()][5];\nfor (int row = 0; row &lt; data.length; row++) {\n    data[row][0] = yearInWord(listOfCourses.get(row).getYear());\n    data[row][1] = termInWord(listOfCourses.get(row).getTerm());\n    data[row][2] = listOfCourses.get(row).getCourseCode();\n    data[row][3] = listOfCourses.get(row).getCourseName();\n    data[row][4] = listOfCourses.get(row).getUnits();\n}\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684590150,
      "question_id": 76293415,
      "body": "<p>Using IntelliJ IDEA, I used the Swing UI Designer to design a program that would display student information through a table. The problem is that the data won't appear on my JTable. What I did was first read the information from a file to an ArrayList and then to make it appear on the JTable I put all the information from the ArrayList to a multidimensional array. I tried testing it on a separate program and the elements are there. It just won't appear on my JTable for this program.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Object[][] data = new Object[listOfCourses.size()][5];\nfor (int i = 0; i &lt; listOfCourses.size(); i++) {\n    for (int j = 0; j &lt; 1; j++) {\n        data[i][j] = yearInWord(listOfCourses.get(i).getYear());\n        for (int k = 1; k &lt; 2; k++) {\n            data[i][k] = termInWord(listOfCourses.get(i).getTerm());\n            for (int l = 2; l &lt; 3; l++) {\n                data[i][l] = listOfCourses.get(i).getCourseCode();\n                for (int m = 3; m &lt; 4; m++) {\n                    data[i][m] = listOfCourses.get(i).getCourseName();\n                    for (int n = 4; n &lt; 5; n++) {\n                        data[i][n] = listOfCourses.get(i).getUnits();\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>courseTable.setModel(new DefaultTableModel(data, new String[]{&quot;Year&quot;, &quot;Term&quot;, &quot;Course No.&quot;, &quot;Course Title&quot;, &quot;Units&quot;}));\n</code></pre>\n<p>I have tried checking if the elements of the array are read by using println in another program. So the elements are in the array but they just won't appear in my JTable. I have also tried manually making an array such as</p>\n<pre class=\"lang-java prettyprint-override\"><code>Object[][] trial = {\n    { yearInWord(1), termInWord(1), &quot;CFE 101&quot;, &quot;GOD'S JOURNEY WITH HIS PEOPLE&quot;, 3 },\n    { yearInWord(1), termInWord(2), &quot;CFE 102&quot;, &quot;CHRISTIAN MORALITY IN OUR TIMES&quot;, 2 },\n    { yearInWord(1), termInWord(3), &quot;CFE 103&quot;, &quot;CATHOLIC FOUNDATION OF MISSION&quot;, 1 }\n};\n</code></pre>\n<p>and then replacing data with trial in the setModel line of code then it was able to show the contents of the trial array. Since there are many Courses in my listOfCourses, I can't just manually encode each of them.</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 66371048,
          "body": "You need to compile all classes on the classpath with the <code>-cp</code> argument to <code>javac</code>"
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 66371341,
              "body": "Most developers prefer an IDE to write and compile code, by the way"
            },
            {
              "comment_id": 66371609,
              "body": "@cricket_007 Experienced developers that is. There is a lot of merit for beginners to do things manually - to understand what an IDE will do for you.  And keep in mind: eclipse is still a complex product. I think most people learning a new programming language have enough to look into already; so I wouldnt add the burden of exploring eclipse to that bill (unless one has used it in the past)."
            },
            {
              "comment_id": 66371672,
              "body": "@GhostCat I agree we all start somewhere. I think that a Princeton course would teach one around an IDE at somepoint, though. At least they provide helper scripts to compile&amp;run the code"
            }
          ],
          "answer_id": 39528241,
          "body": "<p>Following the examples on <a href=\"http://algs4.cs.princeton.edu/code/\" rel=\"noreferrer\">http://algs4.cs.princeton.edu/code/</a>, I appended <code>-algs4</code> to both the <code>javac</code> and <code>java</code> commands. Now it seems to work:</p>\n\n<pre><code>kurt@kurt-ThinkPad:~/algs4/PercolationTest$ javac-algs4 PercolationTest.java\nkurt@kurt-ThinkPad:~/algs4/PercolationTest$ java-algs4 PercolationTest\nHello, world!\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684589693,
      "question_id": 39528162,
      "body": "<p>I'm trying to complete the first assignment of the Coursera course <a href=\"https://www.coursera.org/learn/introduction-to-algorithms\" rel=\"nofollow noreferrer\">Algorithms I</a>. As I'm using Linux, I followed the instructions on <a href=\"http://algs4.cs.princeton.edu/linux/\" rel=\"nofollow noreferrer\">http://algs4.cs.princeton.edu/linux/</a> and created a <code>~/algs4</code> directory. The test programs seem to work; for example, the command</p>\n\n<pre><code>kurt@kurt-ThinkPad:~$ java-algs4 edu.princeton.cs.algs4.StdDraw\n</code></pre>\n\n<p>generates the image below.</p>\n\n<p><a href=\"https://i.stack.imgur.com/6qUUR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6qUUR.png\" alt=\"enter image description here\"></a></p>\n\n<p>Next, I'm trying to run a test program in a subdirectory of <code>~/algs4</code>:</p>\n\n<pre><code>import edu.princeton.cs.algs4.In;\nimport edu.princeton.cs.algs4.StdDraw;\n\npublic class PercolationTest {\n  public static void main(String[] args) {\n    System.out.println(\"Hello, world!\");\n  }\n}\n</code></pre>\n\n<p>However, if I try to compile this I get the following errors:</p>\n\n<pre><code>kurt@kurt-ThinkPad:~/algs4/PercolationTest$ javac PercolationTest.java\nPercolationTest.java:3: error: package edu.princeton.cs.algs4 does not exist\nimport edu.princeton.cs.algs4.In;\n                             ^\nPercolationTest.java:4: error: package edu.princeton.cs.algs4 does not exist\nimport edu.princeton.cs.algs4.StdDraw;\n                             ^\n2 errors\n</code></pre>\n\n<p>This way of importing does seem consistent with what is explained on <a href=\"http://algs4.cs.princeton.edu/code/\" rel=\"nofollow noreferrer\">http://algs4.cs.princeton.edu/code/</a>, so I'm having trouble seeing what I did wrong. Any ideas?</p>\n"
    },
    {
      "answers": [
        {
          "comments": [
            {
              "comment_id": 129006039,
              "body": "Thanks for your reply, but in imho it doesn&#39;t answer my question why FastApi scales better horizontally than Spring Boot for crud applications."
            },
            {
              "comment_id": 129006360,
              "body": "It doesnt, Fastapi doesnt scale better horizontally per se than Spring Boot. The reasoning of your buddy does not make any sense at all, especially on the because its single threaded part, that is what my answer tries (but fails) to explain."
            }
          ],
          "answer_id": 73027651,
          "body": "<p>FastAPI is a fast framework, and you can quickly (and easily) create API backends in it. To be honest, if you are a Java developer, I would recommend Quarkus or something for building a REST API, not FastAPI. FastAPI is a fantastic tool, absolutely great if you are already in the Python ecosystem.</p>\n<p>When it goes about multithreading; Java is 'real' multithreading where as Python is very much not. Java threads will run concurrently; two tasks can and will be executed at the same time. In Python, within one Python process, this is (nearly) impossible. The reason for this is GIL (google it, there is ton's of stuff out there on how it works). The result is; even if you use 'real' threads in Python, code is still not executed concurrently but rather serially, where the interpreter (big difference to Java) is jumping from one call stack to another constantly.</p>\n<p>As to what you refer to as 'logical threads', I think you mean the asynchronous capability of Python. This is basically the same as using threads (not really, but on an abstract level they are very similar); tasks are not run concurrently. There is just one thread that constantly switches between tasks. Tasks will yield back control to the event loop (the object that coordinates tasks and decides what is executed in which order), and another task is further executed until that task yields control, etc. It is basically the same kind of execution pattern as with threads within Python.</p>\n<p>Comparing a Python framework to a Java framework is just weird in my opinion. They are both useful and cool, but not really competitors.</p>\n"
        },
        {
          "answer_id": 73186628,
          "body": "<p>The issues with Java threads in the question are addressed by the project Loom, which is planned for inclusion in a future Jdk. It is very well explained here <a href=\"https://www.baeldung.com/openjdk-project-loom\" rel=\"noreferrer\">https://www.baeldung.com/openjdk-project-loom</a> :</p>\n<blockquote>\n<p>Presently, Java relies on OS implementations for both the continuation [of threads] and the scheduler [for threads].</p>\n<p>Now, in order to suspend a continuation, it's required to store the entire call-stack. And similarly, retrieve the call-stack on resumption. Since the OS implementation of continuations includes the native call stack along with Java's call stack, it results in a heavy footprint.</p>\n<p>A bigger problem, though, is the use of OS scheduler. Since the scheduler runs in kernel mode, there's no differentiation between threads. And it treats every CPU request in the same manner. (...)\nFor example, consider an application thread which performs some action on the requests and then passes on the data to another thread for further processing. Here, it would be better to schedule both these threads on the same CPU. But since the [OS] scheduler is agnostic to the thread requesting the CPU, this is impossible to guarantee.</p>\n</blockquote>\n<p>The question really boils down to <a href=\"https://stackoverflow.com/q/9964899/838494\">Why are OS threads considered expensive?</a></p>\n"
        },
        {
          "comments": [
            {
              "comment_id": 129634851,
              "body": "Beware that Python can run in parallel simply by running multiple processes (containers), so it&#39;s false that it&#39;s not possible with Python. This way Python processes that utilize x processors can handle more requests than a Java process that utilizes x processors. That&#39;s what&#39;s meant by horizontal scaling. Interesting benchmark though, +1."
            },
            {
              "comment_id": 130601572,
              "body": "True, but certain technics known from jvm (not java specific) world cannot be applied then. For instance - for jvm many threads can share some cache. This is huge advantage if you can cache some things.  The need for external cache can be applied much later (when you hit the scale) In python if you want to share some state between multiple python processes you need external state (database or cache) from the very beginning.  Many python advocates advertise python is easy - but it&#39;s harder when you go beyond &quot;hello world&quot; stateless microservice."
            }
          ],
          "answer_id": 73395887,
          "body": "<p>It very much depends on what your threads are doing.\nImagine that your request is calling some external endpoint. Most of the time your java thread (which is heavy) is just doing nothing.\nIs it a problem? Depends. In java ecosystem threads are not created on the fly, that problem is solved in any decent framework with threadpools.</p>\n<p>But still thread stack size occupies memory. If you would have 1000 threads (or 1000 concurent requests) in a thread pool waiting for IO operation your memory might go beyond 1GB easily.</p>\n<p>For such particular scenario some async / await abstraction could utilise memory much better. Whether all task would be executed faster is a different story and depends on many factors.</p>\n<p>So truly you need to go deeper, what scaling you are talking about? memory? or speed of execution of all operations (which usually also involve some cpu).</p>\n<p>Not neglectable pros of java is that requests handled by threads can run in parallel and utilize many processors while in python this is simply <strong>not</strong> possible.</p>\n<p>FastAPI and their async await model is easy to use, cuts developer off from threading model and from thinking about concurrency. Unfortunately it also means smaller control in case this is needed.</p>\n<p>Just calling async method in python is not making any code execution faster. In the end under the hood there is one event loop that runs on one Cpu only.</p>\n<p>Depending on the usecase it's good enough and efficient or just the opposite.</p>\n<p>Usually people from Python ecosystem are hyped against heavy java and just use argument that it's faster / lighter without seeing other cons.</p>\n<p>Here also a link to tease you a bit with typical webapp performance comparison across few frameworks (in web / rest scenarios)</p>\n<p><a href=\"https://www.travisluong.com/fastapi-vs-fastify-vs-spring-boot-vs-gin-benchmark/\" rel=\"nofollow noreferrer\">https://www.travisluong.com/fastapi-vs-fastify-vs-spring-boot-vs-gin-benchmark/</a></p>\n"
        }
      ],
      "last_activity_date": 1684589489,
      "question_id": 73026698,
      "body": "<p>I'm a Java Spring boot developer and I develop 3-tier crud applications. I talked to a guy who seemed knowledgeable on the subject, but I didn't get his contact details. He was advocating for Python's FastApi, because horizontally it scales better than Spring boot. One of the reasons he mentioned is that FastApi is single-threaded. When the thread encounters a database lookup (or other work the can be done asyncly), it picks up other work to later return to the current work when the database results have come in. In Java, when you have many requests pending, the thread pool may get exhausted.</p>\n<p>I don't understand this reasoning a 100%. Let me play the devil's advocate. When the Python program encounters an async call, it must somehow store the program pointer somewhere, to remember where it needs to continue later. I know that that place where the program pointer is stored is not at all a thread, but I have to give it some name, so let's call it a &quot;logical thread&quot;. In Python , you can have many logical threads that are waiting. In Java, you can have a thread pool with many real threads that are waiting. To me, the only difference seems to be that Java's threads are managed at the operating system level, whereas Python's &quot;logical threads&quot; are managed by Python or FastApi. Why are real threads that are waiting in a thread pool so much more expensive than logical threads that are waiting? If most of my threads are waiting, why can't I just increase the thread pool size to avoid exhaustion?</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134459936,
          "body": "Create a new <code>class ContractResult { Contract contract; MappingJacksonValue mappingJacksonValue }</code>, then return that."
        },
        {
          "comment_id": 134459963,
          "body": "Why not try to return them in a map(or array)?"
        }
      ],
      "last_activity_date": 1684589224,
      "question_id": 76245811,
      "body": "<p>below i mentioned is  my Restcontroller class\ni want to return a multiple object , how to do?</p>\n<pre><code>// Saving the Data\n    @PostMapping(&quot;/buyContractRequest&quot;)\n    public ResponseEntity&lt;Contract&gt; saveOneContract(@RequestBody Contract contract) {\n\n        try {\n            contract.setOrderId(UUID.randomUUID().toString());\n            Date date = new Date();\n            contract.setTimestamp(date);\n            Contract save = contractService.saveOne(contract);\n    \n              MappingJacksonValue mappingJacksonValue = new MappingJacksonValue(save);\n\n             SimpleBeanPropertyFilter filter = SimpleBeanPropertyFilter.filterOutAllExcept\n                                               (&quot;buyerId&quot;,&quot;timestamp&quot;,&quot;category&quot;,&quot;orderId&quot;);\n            FilterProvider filters = new SimpleFilterProvider().addFilter(&quot;ContractFilter&quot;,filter);\n            mappingJacksonValue.setFilters(filters);\n\n            return ResponseEntity.of(Optional.of(save,mappingJacksonValue));\n        } catch (Exception e) {\n            e.printStackTrace();\n            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).build();\n        }\n    }\n</code></pre>\n<p>in above example i am trying to return mappingJacksonValue and save also multiple i want to return</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134540777,
          "body": "There is no Ops.index[this.i] in the code. It doesn&#39;t seem that the error message is correct. Did you edit it? Please add the full error message and exception stack trace formatted as code to the question."
        },
        {
          "comment_id": 134540787,
          "body": "<i>public static PriIndex index[]=new PriIndex[100];</i> when you&#39;re printing that array, each element should be non-null (at least until the &#39;end&#39;) as well as the array being non-null. Test each element for null before printing"
        }
      ],
      "answers": [
        {
          "answer_id": 76295439,
          "body": "<p>The NullPointerException arises because you're trying to access an object that has not been initialized yet. The object at <code>Ops.index[this.i]</code> is null because no <code>PriIndex</code> object has been assigned to it yet.</p>\n<p>The issue lies in the <code>insert</code> method of your code. Specifically, when you're attempting to shift the elements of the <code>index</code> array, you're assigning <code>index[i]</code> the value of <code>index[i-1]</code> before making sure that <code>index[i-1]</code> isn't null.</p>\n<p>Here's how you can fix this issue:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for(i=indsize;i&gt;0;i--){\n    if(id.compareTo(index[i-1].id)&lt;0) // Access index[i-1] only if it's not null.\n        index[i]=index[i-1];\n    else break;\n}\nindex[i] = new PriIndex(id, String.valueOf(pos)); // This line creates a new PriIndex object and assigns it to index[i].\nindsize++;\n</code></pre>\n<p>You need to do the same for the <code>sindex</code> array:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for(i=sindsize;i&gt;0;i--){\n    if(name.compareTo(sindex[i-1].name)&lt;0) // Access sindex[i-1] only if it's not null.\n        sindex[i]=sindex[i-1];\n    else break;\n}\nsindex[i] = new SecIndex(id, name); // This line creates a new SecIndex object and assigns it to sindex[i].\nsindsize++;\n</code></pre>\n<p>This should resolve your NullPointerException. Note that you should also consider implementing a better exception handling strategy. Rather than catching all exceptions and printing them, it would be better to catch specific exceptions and handle them accordingly.</p>\n<p>Also, you can remove the <code>ifile.close();</code> calls in the <code>write</code> and <code>swrite</code> methods. You don't need to close these resources manually because you're using a try-with-resources block, which automatically closes resources when they're no longer needed.</p>\n"
        }
      ],
      "last_activity_date": 1684588689,
      "question_id": 76295406,
      "body": "<pre><code>class Employee{\n    String name,id,city,dept,sal,phone,project;\n}\n\nclass PriIndex{\n    String id;\n    String loc;\n    public PriIndex(String id, String loc) {\n            this.id = id;\n            this.loc = loc;\n        }\n}\n\nclass SecIndex{\n    String id,name;\n    public SecIndex(String id, String name) {\n            this.id = id;\n            this.name = name;\n        }\n}\n\npublic class Ops {\n    \n    \n    int indsize=0,sindsize=0,i;\n    int rcount=0;\n    public static Employee e=new Employee();\n    public static PriIndex index[]=new PriIndex[100];\n    public static SecIndex sindex[]=new SecIndex[100];\n    public static int arr[]=new int[100];\n    \n    \n    void write(){\n         try (BufferedWriter ifile = new BufferedWriter(new FileWriter(&quot;index.txt&quot;,true))) {\n           \n         for(i=0;i&lt;indsize;i++){\n            String data=index[i].id+&quot;|&quot;+index[i].loc+&quot;\\n&quot;;\n            ifile.write(data);\n         }\n         ifile.close();\n         }\n         catch(Exception e){}\n    }\n    \n    void swrite(){\n         try (BufferedWriter ifile = new BufferedWriter(new FileWriter(&quot;SecondayIndex.txt&quot;,true))) {\n           \n         for(i=0;i&lt;sindsize;i++){\n            String data=sindex[i].name+&quot;|&quot;+sindex[i].id+&quot;\\n&quot;;\n            ifile.write(data);\n         }\n         ifile.close();\n         }\n         catch(Exception e){}\n    }\n    \n    int insert(String name,String id,String dept, String city,String sal,String ph,String pro){\n        if(search(name)!=-1){\n            return -1;\n        }\n        String data = name+&quot;|&quot;+id+&quot;|&quot;+dept+&quot;|&quot;+city+&quot;|&quot;+sal+&quot;|&quot;+ph+&quot;|&quot;+pro;\n        for(i=indsize;i&gt;0;i--){\n            if(id.compareTo(index[i].id)&lt;0)\n                index[i]=index[i-1];\n            else break;\n        }\n        \n        try{\n        RandomAccessFile rec=new RandomAccessFile(&quot;employee.txt&quot;,&quot;rw&quot;);\n        rec.seek(rec.length());\n        long pos=rec.getFilePointer();\n        rec.writeBytes(data+&quot;\\n&quot;);\n        index[i] = new PriIndex(id, String.valueOf(pos));\n        indsize++;\n        \n        for(i=sindsize;i&gt;0;i--){\n            if(name.compareTo(sindex[i].name)&lt;0)\n                sindex[i]=sindex[i-1];\n            else break;\n        }\n        sindex[i] = new SecIndex(id, name);\n        sindsize++;\n        write();\n        swrite();\n        rec.close();\n        \n        }\n\n   \n        catch(Exception e){System.out.println(e);}\n    return 0;\n    \n    }\n}\n</code></pre>\n<p>This is a part of my school project. While inserting, I'm able to insert in to the employee file but i cant seem to write to the index file.\nI'm getting hit by this exception - java.lang.NullPointerException: Cannot assign field &quot;loc&quot; because &quot;Ops.index[this.i]&quot; is null</p>\n<p>please help!</p>\n<p>the project has an emmployee file and 2 index files. The index files must be sorted and also initialized in an array</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 108634383,
          "body": "Try using the <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/core/context/ReactiveSecurityContextHolder.html\" rel=\"nofollow noreferrer\">ReactiveSecurityContextHolder</a>"
        },
        {
          "comment_id": 108636862,
          "body": "Hi, @EleftheriaStein-Kousathana, Thanks for your response, actually I tried that in the first place however if you check the ServletBearerExchangeFilterFunction implementation you will see that it uses exactly ReactiveSecurityContextHolder. And it is still empty."
        },
        {
          "comment_id": 108728106,
          "body": "<code>@AuthenticationPrincipal</code> uses the <code>ReactiveSecurityContextHolder</code>, and my understanding is that that is working as expected. It may be helpful to take a look at this <a href=\"https://github.com/spring-projects/spring-security/issues/5207\" rel=\"nofollow noreferrer\">github issue</a>. If you are able to reproduce this behaviour in a minimal sample, then I could help with debugging."
        },
        {
          "comment_id": 108730058,
          "body": "@EleftheriaStein-Kousathana, So now I know the &quot;issue&quot; if I can call it issue,   I am configuring my Security in above-mentioned way.  ``` .oauth2ResourceServer()  .jwt();  ``` So the problem here is that Spring-Security assumes that you are going stateless when you are a ResourceServer and they use UNconfigurable NoOpServerSecurityContextRepository which is just Mono.empty(). What is for me interesting if I can somehow still keep using same setup and get a benefit of <code>ServletBearerExchangeFilterFunction</code>."
        }
      ],
      "answers": [
        {
          "answer_id": 76295427,
          "body": "<p>You have to use the ReactiveSecurityContextHolder and chain it to the response of your Rest controller.</p>\n<p>Your RestController needs to return a Mono or Flux for that as well.</p>\n<p>e.g.</p>\n<pre><code>return ReactiveSecurityContextHolder.getContext()\n    .map { securityContext -&gt; securityContext.authentication }\n    .map { authentication -&gt; authentication.principal }\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684588593,
      "question_id": 61405182,
      "body": "<p>I have this strange issue with Spring Cloud Security with the reactive stack. I setup Spring Cloud Gateway and at the same time, I made it be a RsourceServer so all incoming requests will have JWT granted from Firebase in this case. Here are some snapshots from my configuration.</p>\n\n<p><code>application.yml</code> Set JWK and Issuer, to tell spring security how JWT's should be validated.</p>\n\n<pre><code>spring:\n  security:\n    oauth2:\n      resourceserver:\n        jwt:\n          jwk-set-uri: https://www.googleapis.com/service_accounts/v1/jwk/securetoken@system.gserviceaccount.com\n          issuer-uri: https://securetoken.google.com/${project_name}\n</code></pre>\n\n<p><code>SecurityConfig</code></p>\n\n<pre><code>    @EnableWebFluxSecurity\n    public class SecurityConfig {\n\n      @Bean\n      public SecurityWebFilterChain securityWebFilterChain(ServerHttpSecurity http) {\n        // @formatter:off\n        http\n            .csrf().disable()\n            .authorizeExchange()\n            .pathMatchers(\"/public\").permitAll()\n            .anyExchange().authenticated().and()\n            .oauth2ResourceServer()\n            .jwt();\n        return http.build();\n        // @formatter:on\n      }\n    }\n</code></pre>\n\n<p>and finally the controller</p>\n\n<p><code>TestController</code> just for test purposes I created Controller to check if security context is set or not.</p>\n\n<pre><code>@RestController\n@Slf4j\npublic class TestController {\n\n  @GetMapping(\"/public\")\n  public String getPublic() {\n    if (SecurityContextHolder.getContext().getAuthentication() != null) {\n      throw new IllegalStateException(\"Public API should not have any AuthContext\");\n    }\n\n    return \"All shiny you got your PUBLIC data!\";\n  }\n\n  @GetMapping(\"/private\")\n  public String getPrivate(@AuthenticationPrincipal Jwt jwt) {\n    log.info(jwt.getTokenValue());    //in here jwt present as should be\n    if (SecurityContextHolder.getContext().getAuthentication() == null) {\n      throw new IllegalStateException(\"Oops.... Private API should have AuthContext\");\n    }\n\n    return \"All shiny you got your PRIVATE data!\";\n  }\n\n}\n</code></pre>\n\n<p>So I am super frustrated and hope someone can help me out here. according to all Spring Security docs, I dug into it seems to me that I should have my security context saved when JWT is valid.</p>\n\n<p>The main purpose is to be able to use <code>ServletBearerExchangeFilterFunction</code> Which tries to get Authentication and token out of it and pass it downstream to other services in WebClient.\nHowever, it is NULL. </p>\n\n<p><a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html5/#bearer-token-propagation\" rel=\"noreferrer\">Bearer Token Propagation</a> here it is clearly written that SecurityContext should be valid at that point already.</p>\n\n<p>Any suggestions would be appreciated a lot.</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 119373059,
          "body": "The problem is that Reactor actually forbids calling <code>block</code> in Schedulers not explicitly marked as compatible with blocking code. I do not find detailed doc about that, but I think that. you have to use either <code>subscribeOn(Schedulers.boundedElastic())</code> or <code>.share()</code> method on your flux before block call. The difference in behaviour might come from the fact that in one case, block function triggers pipeline in current thread (non reactive scheduler), but in your test, you try to call <code>canDoIt</code> from a reactive stack, so the executing thread comes from a reactive scheduler."
        },
        {
          "comment_id": 119431394,
          "body": "I tried both with <code>subscribeOn</code> and <code>share</code> but I still get the same error. Please note that the error does not appear with <code>WebClient</code>, it appears only with <code>WebTestClient</code>."
        },
        {
          "comment_id": 119439755,
          "body": "Maybe I miss/misunderstand something. Can you please make an edit with your attempt to use share and subscribeOn ? Also, the failing piece of code using WebTestClient and <code>flatMap</code> would be nice. It would help me to dig further and adapt my answer."
        },
        {
          "comment_id": 119439878,
          "body": "Also, I&#39;ve made a rather generic answer because I was not too sure, but If I have the failing code (well, a minimal reproducible example of it), I will be able to make an answer really focused on your use-case."
        }
      ],
      "answers": [
        {
          "answer_id": 67546131,
          "body": "<p>Given the assumption that you cannot modify the checkMyObjectInImperativeWay to return a Mono:</p>\n<pre class=\"lang-java prettyprint-override\"><code>   private Boolean canDoIt(Parameter param) {\n        final AtomicBoolean result= new AtomicBoolean();\n        myService.getMyObjectInReactiveWay(param)\n                .map(myObject -&gt; myService.checkMyObjectInImperativeWay(myObject))\n                .subscribe((mono) -&gt; result.set(mono));\n        return result.get();\n    }\n</code></pre>\n"
        },
        {
          "comments": [
            {
              "comment_id": 119431595,
              "body": "I am afraid I fail to see how this solution fits my needs: in your <code>subscribeOnAndWait</code> you use a <code>Mono&lt;Boolean&gt;</code> and return <code>void</code>, I need to return a <code>Boolean</code> to the outside caller."
            },
            {
              "comment_id": 119439676,
              "body": "My example consider the <code>blockingFunction</code> to be equivalent to your <code>canDoIt</code> function. When this function is called from a reactive context, it might the error you are seeing. To avoid that, the call to the function must be wrapped back in a Mono (in my example <code>blockingMono</code>), and that Mono must be scheduled on the bounded elastic scheduler. Note that, if it is not possible to identify or modify places where your <code>canDoIt</code> function is injected back to a reactive context, things become more complicated."
            },
            {
              "comment_id": 132479958,
              "body": "plase take a look <a href=\"https://stackoverflow.com/questions/75058585/block-blockfirst-blocklast-are-blocking-which-is-not-supported-in-thread\" title=\"block blockfirst blocklast are blocking which is not supported in thread\">stackoverflow.com/questions/75058585/&hellip;</a>"
            },
            {
              "comment_id": 134540763,
              "body": "I&#39;m just curious to know why it works, in particular what is exactly <code>Schedulers.boundedElastic()</code> and why without <code>.subscribe()</code> it does not work."
            },
            {
              "comment_id": 134542521,
              "body": "@MarcoSulla I use subscribe because I&#39;ve done an example program, and I need to start the reactive pipeline manually.. In a Spring app, you just return the publisher back, and Spring will trigger it itself. As for Schedulers.boundedElastic, I cannot really provide a better description than official API doc (linked in references). It is a worker pool that can spawn a lot of threads/workers, to cope with blocking calls inside a reactive chain."
            }
          ],
          "answer_id": 67549756,
          "body": "<p>I validate my comment. <code>block()</code> checks if the calling thread is compatible with blocking code (thread external to reactor, or a thread of a specific reactor scheduler like <code>Schedulers.boundedElastic()</code>).</p>\n<p>There's 2 ways to handle blocking calls in the middle of a reactive stack:</p>\n<ul>\n<li>Use the <em>share</em> operator on publisher you will block upon. Be careful, the share operator caches the value internally.</li>\n<li>Force <code>block()</code> call to be executed on a blocking compatible scheduler using <code>scheduleOn</code> or <code>publishOn</code>. Beware, this operators should not be called on the publisher that directly call <code>block()</code>, but on the publisher that will &quot;wrap&quot; the block call (see example below).</li>\n</ul>\n<p>Some references:</p>\n<ul>\n<li><a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/scheduler/Schedulers.html\" rel=\"nofollow noreferrer\">The schedulers API doc</a> summaries available types of schedulers, and tells which ones are designed for blocking calls.</li>\n<li><a href=\"https://projectreactor.io/docs/core/release/reference/#faq.wrap-blocking\" rel=\"nofollow noreferrer\">Reference guide section about blocking call wrapping</a></li>\n<li><a href=\"https://projectreactor.io/docs/core/release/api/reactor/core/publisher/Mono.html#share--\" rel=\"nofollow noreferrer\">share() operator documentation</a></li>\n</ul>\n<p>And a minimal reproducible example (tested on v3.4.6) giving this output:</p>\n<pre><code>Ok context: not running from reactor Threads\nvalue is true\nProblematic stack: working with scheduler not compatible with blocking call\nERROR: block()/blockFirst()/blockLast() are blocking, which is not supported in thread parallel-2\nBad way to subscribe on a blocking compatible scheduler\nERROR: block()/blockFirst()/blockLast() are blocking, which is not supported in thread parallel-4\nBad way to publish on blocking compatible scheduler\nERROR: block()/blockFirst()/blockLast() are blocking, which is not supported in thread parallel-6\nPossible workaround: share the reactive stream before blocking on it\nIt worked\nRight way to subscribe on blocking compatible scheduler\nIt worked\nRight way to publish on blocking compatible scheduler\nIt worked\n</code></pre>\n<p>Here comes the code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import reactor.core.publisher.Mono;\nimport reactor.core.scheduler.Schedulers;\n\nimport java.time.Duration;\nimport java.util.concurrent.Callable;\nimport java.util.function.Supplier;\n\npublic class BlockingWorkaround {\n\n    public static void main(String[] args) throws Exception {\n        System.out.println(&quot;Ok context: not running from reactor Threads&quot;);\n        System.out.println(&quot;value is &quot;+blockingFunction());\n\n        System.out.println(&quot;Problematic stack: working with scheduler not compatible with blocking call&quot;);\n        executeAndWait(() -&gt; blockingFunction());\n\n        System.out.println(&quot;Bad way to subscribe on a blocking compatible scheduler&quot;);\n        executeAndWait(() -&gt; blockingFunctionUsingSubscribeOn());\n\n        System.out.println(&quot;Bad way to publish on blocking compatible scheduler&quot;);\n        executeAndWait(() -&gt; blockingFunctionUsingPublishOn());\n\n        System.out.println(&quot;Possible workaround: share the reactive stream before blocking on it&quot;);\n        executeAndWait(() -&gt; blockingFunctionShared());\n\n        System.out.println(&quot;Right way to subscribe on blocking compatible scheduler&quot;);\n        subscribeOnAndWait(() -&gt; blockingFunction());\n\n        System.out.println(&quot;Right way to publish on blocking compatible scheduler&quot;);\n        publishOnAndWait(() -&gt; blockingFunction());\n    }\n\n    static Boolean blockingFunction() {\n        return delay()\n                .flatMap(delay -&gt; Mono.just(true))\n                .block();\n    }\n\n    static Boolean blockingFunctionShared() {\n        return delay()\n                .flatMap(delay -&gt; Mono.just(true))\n                .share() // Mono result is cached internally\n                .block();\n    }\n\n    static Boolean blockingFunctionUsingSubscribeOn() {\n        return delay()\n                .subscribeOn(Schedulers.boundedElastic())\n                .flatMap(delay -&gt; Mono.just(true))\n                .block();\n    }\n\n    static Boolean blockingFunctionUsingPublishOn() {\n        return delay()\n                .flatMap(delay -&gt; Mono.just(true))\n                .publishOn(Schedulers.boundedElastic())\n                .block();\n    }\n\n    static Mono&lt;Long&gt; delay() {\n        return Mono.delay(Duration.ofMillis(10));\n    }\n\n    private static void executeAndWait(Supplier&lt;Boolean&gt; blockingAction) throws InterruptedException {\n        delay()\n                .map(it -&gt; blockingAction.get())\n                .subscribe(\n                        val -&gt; System.out.println(&quot;It worked&quot;),\n                        err -&gt; System.out.println(&quot;ERROR: &quot; + err.getMessage())\n                );\n\n        Thread.sleep(100);\n    }\n\n    private static void subscribeOnAndWait(Callable&lt;Boolean&gt; blockingAction) throws InterruptedException {\n        final Mono&lt;Boolean&gt; blockingMono = Mono.fromCallable(blockingAction)\n                .subscribeOn(Schedulers.boundedElastic()); // Upstream is executed on given scheduler\n\n        delay()\n                .flatMap(it -&gt; blockingMono)\n                .subscribe(\n                        val -&gt; System.out.println(&quot;It worked&quot;),\n                        err -&gt; System.out.println(&quot;ERROR: &quot; + err.getMessage())\n                );\n\n        Thread.sleep(100);\n    }\n\n    private static void publishOnAndWait(Supplier&lt;Boolean&gt; blockingAction) throws InterruptedException {\n        delay()\n                .publishOn(Schedulers.boundedElastic()) // Cause downstream to be executed on given scheduler\n                .map(it -&gt; blockingAction.get())\n                .subscribe(\n                        val -&gt; System.out.println(&quot;It worked&quot;),\n                        err -&gt; System.out.println(&quot;ERROR: &quot; + err.getMessage())\n                );\n\n        Thread.sleep(100);\n    }\n}\n</code></pre>\n"
        },
        {
          "answer_id": 76295383,
          "body": "<p>Decrypting <a href=\"https://stackoverflow.com/q/67534602/1763602\">amanin's answer</a>, this is her/his TL;DR:</p>\n<pre><code>Scheduler scheduler = Schedulers.boundedElastic();\n\nMono\n    .fromCallable(myMono::block)\n    .subscribeOn(scheduler)\n    .subscribe(val -&gt; {});\n</code></pre>\n<p>Where <code>myMono</code> is the <code>Mono</code> to block.</p>\n<p>I'm just curious to know why it works, in particular what is exactly <code>Schedulers.boundedElastic()</code> and why without <code>.subscribe()</code> it does not work.</p>\n"
        }
      ],
      "last_activity_date": 1684588374,
      "question_id": 67534602,
      "body": "<p>The following function:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private Boolean canDoIt(Parameter param) {\n  return myService\n      .getMyObjectInReactiveWay(param)\n      .map(myObject -&gt; myService.checkMyObjectInImperativeWay(myObject))\n      .block();\n}\n</code></pre>\n<p>is working fine at runtime, but when testing a flow which uses it using <code>WebTestClient</code> I get the following error:</p>\n<pre><code>java.lang.IllegalStateException: block()/blockFirst()/blockLast() are blocking, which is not supported in thread parallel-1\n    at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:83) ~[reactor-core-3.4.1.jar:3.4.1]\n    Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \nAssembly trace from producer [reactor.core.publisher.MonoFlatMap] :\n    reactor.core.publisher.Mono.flatMap\n</code></pre>\n<p>I know I am not supposed to use <code>block()</code> but I have not other choice: the function has to return a <code>Boolean</code> (not a <code>Mono&lt;Boolean&gt;</code>). Perhaps there is an alternative way to write it which doesn't use <code>block()</code>.</p>\n<p>Is there a way I can make <code>WebTestClient</code> not throw that error?</p>\n<p>Using Reactor Core version <code>3.4.6</code>.</p>\n"
    },
    {
      "answers": [
        {
          "comments": [
            {
              "comment_id": 134537032,
              "body": "Hi Ben, Thanks for the reply. I checked my <code>getStructureAt</code>. Which is the code below.  <code>public StructureStart getStructureAt(BlockPos p_207786_, ConfiguredStructureFeature&lt;?, ?&gt; p_207787_) {       for(StructureStart structurestart : this.startsForFeature(SectionPos.of(p_207786_), p_207787_)) {          if (structurestart.getBoundingBox().isInside(p_207786_)) {             return structurestart;          }       }</code> Am I missing something else perhaps?"
            },
            {
              "comment_id": 134540675,
              "body": "You said, the error is: <b>The error being &quot;Expected 2 arguments but found 3&quot;</b>. This is because you are calling <code>getStructureAt</code> with 3 Arguments. But the boolean argument is not used (anymore). You need to call: <code>structureFeatureManager().getStructureAt(pos&#47;*, false*&#47;, structure);</code> (without the boolean parameter) I edited my answer"
            }
          ],
          "answer_id": 76291906,
          "body": "<p>The only method you are calling with 3 arguments is:</p>\n<pre><code>structurePos = level.structureFeatureManager().getStructureAt(pos, false, structure);\n</code></pre>\n<p>So, it looks like the method <code>getStructureAt</code> has changed.</p>\n<p>And when reading this: <a href=\"https://nekoyue.github.io/ForgeJavaDocs-NG/javadoc/1.18.2/net/minecraft/world/level/StructureFeatureManager.html\" rel=\"nofollow noreferrer\">https://nekoyue.github.io/ForgeJavaDocs-NG/javadoc/1.18.2/net/minecraft/world/level/StructureFeatureManager.html</a></p>\n<p>The <strong>new</strong> <code>getStructureAt</code> is:</p>\n<pre><code>StructureStart getStructureAt(BlockPos p_207786_, ConfiguredStructureFeature&lt;?,?&gt; p_207787_)\n</code></pre>\n<p>(no more second boolean argument)</p>\n<p>So, you need to change the call :</p>\n<pre><code>//from:\nstructurePos = level.structureFeatureManager().getStructureAt(pos, false, structure);\n//to\nstructurePos = level.structureFeatureManager().getStructureAt(pos, structure);\n</code></pre>\n<p>Cheers!</p>\n"
        }
      ],
      "last_activity_date": 1684587898,
      "question_id": 76291771,
      "body": "<p>As the title states I'm trying to port a mod from 1.17.1 to 1.18.2. Haven't coded in a few years and I'm currently stuck with this final issue.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private boolean isTower(ServerLevel level, BlockPos pos) {\n  LOGGER.info(&quot;Checking for tower...&quot;);\n  StructureFeature&lt;?&gt; structure;\n  StructureStart structurePos;\n\n  for (String s : Arrays.asList(&quot;tower&quot;, &quot;ice_tower&quot;, &quot;jungle_tower&quot;, &quot;derelict_tower&quot;, &quot;derelict_grass_tower&quot;, &quot;ocean_tower&quot;, &quot;ocean_warm_tower&quot;)) {\n    structure = ForgeRegistries.STRUCTURE_FEATURES.getValue(ResourceLocation.tryParse(TOWERS_MODID + &quot;:&quot; + s));\n    if (structure == null) {\n      continue;\n  }\n  structurePos = level.structureFeatureManager().getStructureAt(pos, false, structure);\n  if (structurePos.isValid()) {\n    // Manhattan distance without Y coord\n    float f = (float) Math.abs(pos.getX() - structurePos.getLocatePos().getX());\n    float f1 = (float) Math.abs(pos.getZ() - structurePos.getLocatePos().getZ());\n    if (f + f1 &lt;= 30) {\n      return true;\n    }\n  }\n}\n</code></pre>\n<p>The error being &quot;Expected 2 arguments but found 3&quot; because of the code below.</p>\n<pre class=\"lang-java prettyprint-override\"><code>structurePos = level.structureFeatureManager().getStructureAt(pos, false, structure);\nif (structurePos.isValid()) {\n  // Manhattan distance without Y coord\n  float f = (float) Math.abs(pos.getX() - structurePos.getLocatePos().getX());\n  float f1 = (float) Math.abs(pos.getZ() - structurePos.getLocatePos().getZ());\n  if (f + f1 &lt;= 30) {\n    return true;\n  }\n}\n</code></pre>\n<p>Has anyone run into this or does anyone know what exactly to change in the code above in order to resolve the issue?</p>\n<p>I already looked into the changes between:</p>\n<ul>\n<li><a href=\"https://nekoyue.github.io/ForgeJavaDocs-NG/javadoc/1.17.1/net/minecraft/world/level/levelgen/structure/StructureStart.html\" rel=\"nofollow noreferrer\">https://nekoyue.github.io/ForgeJavaDocs-NG/javadoc/1.17.1/net/minecraft/world/level/levelgen/structure/StructureStart.html</a></li>\n<li><a href=\"https://nekoyue.github.io/ForgeJavaDocs-NG/javadoc/1.18.2/net/minecraft/world/level/levelgen/structure/StructureStart.html\" rel=\"nofollow noreferrer\">https://nekoyue.github.io/ForgeJavaDocs-NG/javadoc/1.18.2/net/minecraft/world/level/levelgen/structure/StructureStart.html</a></li>\n</ul>\n<p>but I haven't been able to figure it out.</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 134540713,
          "body": "Capitalization matters. You are checking only for lowercase vowels and entering only uppercase vowels, and so your code is not taking this into account."
        },
        {
          "comment_id": 134540717,
          "body": "add <code>str = str.toLowerCase();</code> to the top of the method, for example, or make your vowel chars more inclusive, to include lowercase and uppercase letters."
        },
        {
          "comment_id": 134540727,
          "body": "or do <code>if (&quot;AEIOUaeiou&quot;.indexOf(str.charAt(i)) &gt; -1) {</code> as per <a href=\"https://stackoverflow.com/a/55073585/\">this answer to a similar question</a>"
        },
        {
          "comment_id": 134541119,
          "body": "For future reference please check out <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>. It won&#39;t solve your direct problem, but it will give you steps that you can follow that should help you solve it yourself, or even if that is not successful, then at least help you to better isolate your problem"
        }
      ],
      "last_activity_date": 1684587781,
      "question_id": 76295373,
      "body": "<p>i'm noob in coding but i'm trying to improve my logic building so when i tried to solve this problem i got stuck with this and could not find any solution to do it so i want someone to please help ..</p>\n<p>code:-</p>\n<pre><code>package com;\n\npublic class P1 {\n    public static void printChar(String str) {\n        for (int i = 0; i &lt; str.length(); i++) {\n            if (str.charAt(i) == 'a' || str.charAt(i) == 'e' || str.charAt(i) == 'i' || str.charAt(i) == 'o'\n                    || str.charAt(i) == 'u') {\n                System.out.println(str.charAt(i));\n            }\n        }\n        System.out.println(); \n    }\n\n    public static void main(String[] args) {\n        String str = &quot;SANJAY&quot;;\n        printChar(str);\n    }\n}\n</code></pre>\n"
    },
    {
      "answers": [
        {
          "comments": [
            {
              "comment_id": 134541535,
              "body": "I also tried this by using  System.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;, keystorePassword); where keystorePassword is initialized into constructor :  keystorePassword = environment.getProperty(&quot;server.ssl.key-store-password&quot;);"
            },
            {
              "comment_id": 134546443,
              "body": "do you think the problem is that i must use the encryped password?"
            },
            {
              "comment_id": 134547998,
              "body": "The system property is not usually encrypted. I don&#39;t know if you are using something else."
            }
          ],
          "answer_id": 76295363,
          "body": "<p>The error:</p>\n<pre><code>Caused by: java.security.KeyManagementException: problem accessing trust store\n</code></pre>\n<p>Seems to be caused by an issue trying to access the trust store file. You didn't mention setting the trust store password, which is a different configuration in Java than the key store password. If you are setting the configurations with with <code>System.setProperty()</code> then you could try:</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;, myTrustStorePassword).\n</code></pre>\n"
        }
      ],
      "last_activity_date": 1684587649,
      "question_id": 76294134,
      "body": "<p>I managed to connect using LDAP but if I use the LDAPS version I recevied some errors on runtime. The password for key-store-password is ok and on my code I used <code>System.setProperty(&quot;javax.net.ssl.trustStore&quot;, path_to_file</code>).</p>\n<p>I have the keystore file stored on my project and I also tried to run <code>-Djavax.net.debug=ssl</code> but I didn't receive any relevant information on stack trace.</p>\n<p>Also I tried to use the decrypted pass for <code>key-store-password</code> and <code>user-password</code> on my application.yml file. I didn't find any other helpful information on internet so maybe you got an idea about why is happening this :)</p>\n<p>This is the full stack trace for ldaps:</p>\n<pre><code>Caused by: java.security.NoSuchAlgorithmException: Error constructing implementation (algorithm: Default, provider: SunJSSE, class: sun.security.ssl.SSLContextImpl$DefaultSSLContext)\n at java.base/java.security.Provider$Service.newInstance(Provider.java:1868)\n at java.base/sun.security.jca.GetInstance.getInstance(GetInstance.java:236)\n at java.base/sun.security.jca.GetInstance.getInstance(GetInstance.java:164)\n at java.base/javax.net.ssl.SSLContext.getInstance(SSLContext.java:185)\n at java.base/javax.net.ssl.SSLContext.getDefault(SSLContext.java:110)\n at java.base/javax.net.ssl.SSLSocketFactory.getDefault(SSLSocketFactory.java:83)\n at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n at java.naming/com.sun.jndi.ldap.Connection.createSocket(Connection.java:294)\n ... 167 more\nCaused by: java.security.KeyManagementException: problem accessing trust store\n at java.base/sun.security.ssl.SSLContextImpl$DefaultManagersHolder.&lt;clinit&gt;(SSLContextImpl.java:942)\n at java.base/sun.security.ssl.SSLContextImpl$DefaultSSLContext.&lt;init&gt;(SSLContextImpl.java:1111)\n at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\n at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\n at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\n at java.base/java.security.Provider$Service.newInstanceOf(Provider.java:1879)\n at java.base/java.security.Provider$Service.newInstanceUtil(Provider.java:1886)\n at java.base/java.security.Provider$Service.newInstance(Provider.java:1861)\n ... 177 more\n    \n    Caused by: java.net.SocketException: java.security.NoSuchAlgorithmException: Error constructing implementation (algorithm: Default, provider: SunJSSE, class: sun.security.ssl.SSLContextImpl$DefaultSSLContext)\n    \n     at java.base/javax.net.ssl.DefaultSSLSocketFactory.throwException(SSLSocketFactory.java:267)\n    \n     at java.base/javax.net.ssl.DefaultSSLSocketFactory.createSocket(SSLSocketFactory.java:274)\n    \n     at java.naming/com.sun.jndi.ldap.Connection.createSocket(Connection.java:304)\n    \n     at java.naming/com.sun.jndi.ldap.Connection.&lt;init&gt;(Connection.java:232)\n    \n     ... 166 more\n</code></pre>\n<p>Thanks in advance for any help!</p>\n"
    },
    {
      "comments": [
        {
          "comment_id": 41455197,
          "body": "how you call it, which url, parameters.. details man.."
        }
      ],
      "answers": [
        {
          "comments": [
            {
              "comment_id": 41483869,
              "body": "yes. thank you for response. and i resolved this issue. i used onclick in jsp. and now i have new issue <a href=\"http://stackoverflow.com/questions/26418560/how-to-get-id-based-on-login-user-when-i-click-link\" title=\"how to get id based on login user when i click link\">stackoverflow.com/questions/26418560/&hellip;</a>"
            }
          ],
          "answer_id": 26403984,
          "body": "<p>As I see, probably you call /addProfile.htm without the id parameter and parseInt throws the NPE in this line:</p>\n\n<p><code>int id = Integer.parseInt(request.getParameter(\"id\"));</code></p>\n"
        }
      ],
      "last_activity_date": 1684587630,
      "question_id": 26402875,
      "body": "<p>I'm getting error as <code>Request processing failed; nested exception is java.lang.NumberFormatException: null</code>.</p>\n\n<p>Here is my code:</p>\n\n<pre><code> @Controller\n @RequestMapping(\"/customerAdmin\")\n public class CustomerAdmincontroller {\n        @InitBinder\n        public void initBinder(WebDataBinder binder) {\n            binder.registerCustomEditor(Customer.class, \"customer\", new PropertyEditorSupport() {@\n                Override\n                public void setAsText(String customer) {\n      setValue(new Customer(Integer.parseInt(customer)));\n                }\n            });\n        }\n\n        @RequestMapping(value = \"/addProfile.htm\", method = RequestMethod.GET)\n        public ModelAndView addProfileForm(ModelMap model, HttpServletRequest request) {\n            int id = Integer.parseInt(request.getParameter(\"id\"));\n            System.out.println(id);\n            Profile profile = new Profile();\n            Customer customer = new Customer(id);\n            profile.setCustomer(customer);\n            model.addAttribute(\"profile\", profile);\n            ModelAndView mav = new ModelAndView(\"addProfile\");\n            return mav;\n        }\n}\n</code></pre>\n\n<p>Am getting error as</p>\n\n<blockquote>\n  <p>Oct 16, 2014 4:31:47 PM  invoke</p>\n  \n  <p>SEVERE: Servlet.service() for servlet [dispatcherServlet] in context\n   with path [/CustomerPortal] threw exception [Request processing\n   failed; nested exception is java.lang.NumberFormatException: null]\n   with root cause</p>\n</blockquote>\n\n<p>when i run the project this error already show and i see this error in this Here but still it's error for me. any one can help me ?\nMy controler :</p>\n\n<pre><code>@Autowired\n    addozv stdDAO;\n\n    private ServletRequest request;\n    @SuppressWarnings({ \"null\"})  \n          @RequestMapping(value=\"/addadmins\" , method = RequestMethod.POST)\n           public void addadmins(ModelMap model, HttpServletRequest requ) {\n               String username = requ.getParameter(\"username\");\n               String password = requ.getParameter(\"password\");\n               String nozv = requ.getParameter(\"nozv\");\n               String namefamily = requ.getParameter(\"namefamily\");\n               String codemely = requ.getParameter(\"codemely\");\n               String father = requ.getParameter(\"father\");\n               String adress = requ.getParameter(\"adress\");\n               String telephone = requ.getParameter(\"telephone\");\n               admins adm=new admins();\n               adm.setUsername(username);\n               adm.setPassword(password);\n               adm.setNozv(Integer.parseInt(nozv));\n               adm.setNamefamily(namefamily);\n               adm.setCodemely(Integer.parseInt(codemely));\n               adm.setFather(father);\n               adm.setAdress(adress);\n               adm.setTelephone(Integer.parseInt(telephone));  \n               stdDAO.add(adm);\n</code></pre>\n\n<p>Jdbc :</p>\n\n<pre><code>@Override\n    public void add(admins adm) {\n        String sql = \"INSERT INTO admins \" +\n                \"username, password, nozv, namefamily, codemely, father, adress, telephone) VALUES (?, ?, ?, ?, ?, ?, ?, ?)\";\n        Connection conn = null;\n        try{\n            conn = dataSource.getConnection();\n            PreparedStatement ps=conn.prepareStatement(sql);\n            ps.setString(1, adm.getUsername());\n            ps.setString(2, adm.getPassword());\n            ps.setInt(3, adm.getNozv());\n            ps.setString(4, adm.getNamefamily());\n            ps.setInt(5, adm.getCodemely());\n            ps.setString(6, adm.getFather());\n            ps.setString(7, adm.getAdress());\n            ps.setInt(8, adm.getTelephone());\n            ps.executeUpdate();\n            ps.close();\n            } catch (SQLException e) {\n                throw new RuntimeException(e);\n\n            } finally {\n                if (conn != null) {\n                    try {\n                conn.close();\n            } catch (SQLException e) {}\n        }       \n}\n</code></pre>\n\n<p>and in jsp page it's true i don't know why already it's Error in this page.\nbefore this code i'm writing this code:</p>\n\n<pre><code>@SuppressWarnings(\"null\")\n   @RequestMapping(value=\"/addozvv\" , method = RequestMethod.GET)\n   public String addozv(ModelMap model) {\n      model.addAttribute(\"title\", \"ozv\");\n\n\n      return \"addozvv\";\n   }\n\n   @SuppressWarnings(\"null\")\n   @RequestMapping(value=\"/addozvv\" , method = RequestMethod.POST)\n   public void showPageSaveozv(ModelMap model, HttpServletRequest req) {\n       String Id = req.getParameter(\"nozviat\");\n       String namefamily = req.getParameter(\"namefamily\");\n       String codemely = req.getParameter(\"codemely\");\n       String father = req.getParameter(\"father\");\n       String adress = req.getParameter(\"adress\");\n       String otelephone = req.getParameter(\"otelephone\");\n       String znamefamily = req.getParameter(\"znamefamily\");\n       String zcodemely = req.getParameter(\"zcodemely\");\n       String office = req.getParameter(\"office\");\n       String ztelephone = req.getParameter(\"ztelephone\");\n\n      /////////////\n      ozviat ozv = new ozviat();\n\n      ozv.setId(Integer.parseInt(Id));   \n      ozv.setNamefamily(namefamily); \n\n    ozv.setCodemely(Integer.parseInt(codemely));  \n      ozv.setFather(father);   \n      ozv.setAdress(adress);  \n      ozv.setOtelephone(Integer.parseInt(otelephone));   \n      ozv.setZnamefamily(znamefamily);   \n      ozv.setZcodemely(Integer.parseInt(zcodemely));   \n      ozv.setOffice(office); \n      ozv.setZtelephone(Integer.parseInt(ztelephone)); \n      stdDAO.insert(ozv);\n\n\n   }\n</code></pre>\n\n<p>but when i Run the project it's ture but other one it's a error    </p>\n"
    }
  ]
}