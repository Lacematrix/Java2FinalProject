{"items":[{"comments":[{"comment_id":28540427,"body":"I&#39;m not sure I&#39;m reading the log correctly, but it looks like your Eclipse Helios install is a 64-bit version, and the Flash Builder plug-in is 32-bit.  Can you verify or refute this?  I know that trying to run a mismatched set will give you errors, but I don&#39;t know which ones."}],"answers":[{"comments":[{"comment_id":28525027,"body":"i have changed java version to 1.6 which is installed in my system . but still same issue is persist."}],"answer_id":19264620,"body":"<blockquote>\n  <p>Java was started but returned exit code=13</p>\n</blockquote>\n\n<p>error is caused when you are attempting to start Eclipse using the wrong version of the Java Virtual Machine (JVM). </p>\n\n<p>Your eclipse.ini file contains a java version which is different from the one installed/set on your machine.</p>\n\n<p>Here are some recommendations to correct this error:</p>\n\n<p><a href=\"http://www.ehow.com/how_4784069_terminated-exit-code-error-eclipse.html\" rel=\"nofollow\">http://www.ehow.com/how_4784069_terminated-exit-code-error-eclipse.html</a></p>\n"},{"comments":[{"comment_id":28520746,"body":"I had installed java 1.6 version. In eclipse it is showing as 1.5 version. now where can to add in eclipse configuration."},{"comment_id":28520895,"body":"Open the <code>eclipse.ini</code> and see the parameter <code>Dosgi.requiredJavaVersion=1.6</code>. <code>1.6</code>  is mine. Set what ever you want  to set."},{"comment_id":28521012,"body":"@suresh:- i have tried the same but doesn&#39;t work and getting same error."},{"comment_id":28521223,"body":"@RaviKChowdary did you change the parameter in eclipse.ini?"},{"comment_id":28521339,"body":"@Jhanvi :- where to change the parameter?"},{"comment_id":28521471,"body":"refer this: <a href=\"http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.jst.j2ee.doc.user%2Ftopics%2Ftchangejavalevel.html\" rel=\"nofollow noreferrer\">help.eclipse.org/indigo/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/2540548/how-do-i-get-eclipse-to-use-a-different-compiler-version-for-java\" title=\"how do i get eclipse to use a different compiler version for java\">stackoverflow.com/questions/2540548/&hellip;</a>"}],"answer_id":19264626,"body":"<p>Check your java version with command : java -version</p>\n\n<p>And then compare it with the version of java shown in your error message of eclipse.</p>\n\n<p>Maybe the version of of java that your eclipse support will be different from the installed java on your system.</p>\n"}],"last_activity_date":1684354156,"question_id":19264583,"body":"<p>I have installed flash builder plugin and i choose eclipse which i have.</p>\n\n<p>While opening Falsh builder plugin with eclipse, getting error and showed a screen shot of the error message.</p>\n\n<p><img src=\"https://i.stack.imgur.com/WavUh.png\" alt=\"http://img856.imageshack.us/img856/5366/chpp.png\"></p>\n\n<p>But if i open only eclipse it is working fine and no errors..\nCan i know the reason and required any changes in eclipse or flash builder?</p>\n"},{"comments":[{"comment_id":28334557,"body":"please, provide some code representing your table to provide you proper selectors."},{"comment_id":28334751,"body":"please also clarify which language you are using (Java) and if you are using WebDriver or not (Selenium IDE?)."},{"comment_id":28335185,"body":"Java and Selenium IDE."}],"answers":[{"comments":[{"comment_id":28347867,"body":"unfortunately this is useless if he is using Selenium IDE."},{"comment_id":28347885,"body":"also, you could shorten that code to <code>int size = driver.findElements().size()</code>"}],"answer_id":19155710,"body":"<p>I would suggest the following:</p>\n\n<p>1) make list of elements of your table (e.g if you need to count your row count then select any row using appropriate selector).</p>\n\n<p>2) then create list of web elements</p>\n\n<pre><code>List&lt;WebElement&gt; columnElments = driver.findElements(By.cssSelector(\"...blablabla...\"));\nint rowNumer = columnElmments.size();\n</code></pre>\n\n<p>or either:</p>\n\n<pre><code>@FindBy\n            (how = How.CSS, using = \"blablablba\")\nList&lt;WebElement&gt; col;\n\nint rowNumer =col.size();\n</code></pre>\n\n<p>Hope you got the idea</p>\n"},{"answer_id":20188354,"body":"<p>To store Number of rows into table you can use <code>storeXpathCount</code></p>\n\n<pre><code>storeXpathCount | id=listBalances | NumberOfRows\necho  | ${NumberOfRows}\n</code></pre>\n\n<p>storeXpathCount will store rows count into variable NumberOfRows\nAnd echo will return count.</p>\n"}],"last_activity_date":1684354156,"question_id":19155430,"body":"<p>I have a table with \"n\" number of rows. I need to count them, how to do?</p>\n\n<p>Example:- My table looks like the below entry.</p>\n\n<pre><code>Type        Balance Date received       Date returned   Payment method  Amount\nGeneral     Default 10/01/2013 08:53:20                 Cash            $ 10.00\n\nHTML of my table looks like this. &lt;th&gt; is table title row and &lt;td&gt; are the entries done by the user. Everytime the user add the new entry, the count will increase and display a message \"3 found for account 6478 \". where 3 is no of rows in the table.   \n&lt;fieldset&gt;\n&lt;table id=\"listBalances\" class=\"listTable\" width=\"100%\"&gt;\n&lt;thead&gt;\n&lt;tr&gt;\n&lt;th&gt;Type&lt;/th&gt;\n&lt;th&gt;Balance&lt;/th&gt;\n&lt;th&gt;Date received&lt;/th&gt;\n&lt;th&gt;Date returned&lt;/th&gt;\n&lt;th&gt;Payment method&lt;/th&gt;\n&lt;th&gt;Amount&lt;/th&gt;\n&lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n&lt;tr class=\"alt\"&gt;\n&lt;td&gt;General Deposit&lt;/td&gt;\n&lt;td&gt;Default for RTB&lt;/td&gt;\n&lt;td&gt;09/30/2013 06:58:41&lt;/td&gt;\n&lt;td/&gt;\n&lt;td&gt;Cash&lt;/td&gt;\n&lt;td&gt;$ 5.00&lt;/td&gt;\n</code></pre>\n"},{"comments":[{"comment_id":134506748,"body":"It&#39;s not really clear what you&#39;re asking, but Cosmos DB&#39;s Gremlin API is accessed in the same manner as any other gremlin-based graph database (e.g. same SDKs). Also, you linked a few different help articles, but nobody should need to visit/read those to understand your question. What&#39;s your specific issue? Please edit to clarify."},{"comment_id":134516544,"body":"sorry @DavidMakogon if I wasn&#39;t clear ... Stephen answered down there ... which seems to be: no solution! :-("}],"answers":[{"answer_id":76275727,"body":"<p>I believe you are asking how to send Gremlin bytecode queries to CosmosDB, but are finding that you can only send strings-based queries. If that is correct, note that CosmosDB does not currently support bytecode based requests, so you are in fact limited to strings. CosmosDB has a long open issue about this <a href=\"https://github.com/Azure/azure-cosmos-dotnet-v2/issues/439\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"last_activity_date":1684353051,"question_id":76275061,"body":"<p>For now we are using the very simplified and not near reality approach that Azure officially lets one play: <a href=\"https://learn.microsoft.com/en-us/azure/cosmos-db/gremlin/quickstart-java\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/cosmos-db/gremlin/quickstart-java</a>.</p>\n<p>But we need to use gremlin in a scriptive manner ... like this:</p>\n<p><code>g.V().has()...</code></p>\n<p>... not as a string script query that is then submited:</p>\n<pre class=\"lang-java prettyprint-override\"><code>static final String gremlinQueries[] = new String[] {\n            &quot;g.addV('person').property('id', 'thomas').as('tom'),\n            &quot;g.addV('person').property('id', 'mary').as('may'),\n            &quot;g.addE('friends').from('tom').to('may')&quot; };\n\n(...)\n\nfor (String query : gremlinQueries) {\n\n   ResultSet results = client.submit(query);\n}\n\nfor (Result result : resultList) {\n   result.toString()\n}\n</code></pre>\n<p>I already tried to use Tinkerpop Documentation guides:</p>\n<p><a href=\"https://tinkerpop.apache.org/docs/current/reference/#gremlin-java\" rel=\"nofollow noreferrer\">https://tinkerpop.apache.org/docs/current/reference/#gremlin-java</a>\n<a href=\"https://tinkerpop.apache.org/docs/current/reference/#connecting-gremlin\" rel=\"nofollow noreferrer\">https://tinkerpop.apache.org/docs/current/reference/#connecting-gremlin</a></p>\n"},{"comments":[{"comment_id":134507522,"body":"You can use Java type <code>long</code>, which is 64 bits wide.  That it is a signed integer type would be an issue in C or C++, but it should not present a problem in Java.  For example, <code>1L &lt;&lt; 63</code> is well-defined in Java."},{"comment_id":134507586,"body":"Side note: there is one unsigned primitive type in Java: <code>char</code> is a 16-bit unsigned integer.  Not that I think that helps you."},{"comment_id":134507642,"body":"There are also classes like <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/BitSet.html\" rel=\"nofollow noreferrer\"><code>BitSet</code></a> that can help when your goal is to have an easier time. If you want to keep memory space to a minimum it&#39;s probably better to go with sometimes slightly awkward bit operations. E.g. keep in mind that java automatically widens <code>0xFF</code> to a full 32bit int"},{"comment_id":134507667,"body":"Are you actually doing bit operations? Otherwise you should use objects that better represent the domain of the problem. You have more tools for that in Java than in C, like objects, enums."},{"comment_id":134507742,"body":"Like @aled suggests… Enums in Java are much more powerful and flexible than seen in most other languages. An enum in Java can have state (member fields), constructors, and methods. So each enum object per square can store its color, and store what piece rests on it, if you so choose. And <code>EnumSet</code> &amp; <code>EnumMap</code> can very efficiently store a collection of enum objects."},{"comment_id":134507755,"body":"I wouldn&#39;t tend to use enums here, if only because chessboards are best expressed as grids with numeric coordinates.  There&#39;s specific advantage to be gained by sticking to numbers."},{"comment_id":134508890,"body":"That long is signed, is problem in Java for me, because I&#39;m not able to handle with the last bit properly, or at least I personely don&#39;t know how to manage it."},{"comment_id":134508899,"body":"I am doing bit operations, that&#39;s the point why to use bitboards, there is a far faster moves generator and so on."},{"comment_id":134509231,"body":"The last bit works exactly like all the other bits, you just have to use <code>&gt;&gt;&gt;</code> instead of <code>&gt;&gt;</code>."},{"comment_id":134510222,"body":"Off-topic:  Although Java doesn&#39;t  have an <code>unsigned</code> type, it does have some support. Check out the methods in the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Long.html\" rel=\"nofollow noreferrer\">Long API</a> .  There is a brief <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html\" rel=\"nofollow noreferrer\">bitwise operators tutorial</a> ."}],"answers":[{"answer_id":76275719,"body":"<p>Signedness doesn't actually make a significant difference to using numbers as bit masks -- at least, not in Java.</p>\n<p>You can use a <code>long</code> just fine, even though it is signed.  <code>1L &lt;&lt; 63</code> works.  Just note that you will want to use <code>&gt;&gt;&gt;</code> instead of <code>&gt;&gt;</code> to when shifting your mask right.</p>\n<p>Note that if you want to store <em>more</em> than 64 bits, you may wish to use <code>java.util.BitSet</code>, which is designed specifically as a bitmap that scales as necessary.</p>\n"}],"last_activity_date":1684352942,"question_id":76275571,"body":"<p>I'm programming a chess engine in Java and I would like to represent all pieces positions in one variable called bitmap or bitboard. In C++ I would simply use unsigned long, or so-called uint64_t. But because there are no unsigned variables in Java (as far as I know), what is some efficient way, how to implement this method?</p>\n<p>I tried everything I was able to think of</p>\n"},{"comments":[{"comment_id":105697224,"body":"Hi, welcome to Stack Overflow. Please see this example of <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">how to create a Minimal, Reproducible Example</a>"}],"answers":[{"answer_id":59835417,"body":"<p>There are a few ways in which you can pass <code>Environment Variables</code> in a cloud foundry </p>\n\n<ol>\n<li>Using the set-env variable command using cf commandline: The general syntax is <code>cf set-env APP_NAME ENV_VAR_NAME ENV_VAR_VALUE</code></li>\n<li><p>Using Manifest file: If you are using manifest file with <code>cf push</code> you can set the environamet valriables in it like so. Official documenttaion can be found <a href=\"https://docs.cloudfoundry.org/devguide/deploy-apps/manifest-attributes.html#env-block\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p><code>env:\n    ENV_VARIABLE1: value1\n    ENV_VARIABLE1: value2</code></p></li>\n<li><p>Using mtar descriptor: This might be specific to SAP Cloud Foundry, if you are using SAP Cloud platrom and are deploying applications as <code>mtar</code>, in the mtar deployment descriptor, you can set the <code>PROPERTIES</code> field in under the deployment section to add additional env varables. Additional documentation can be found <a href=\"https://github.com/cloudfoundry-incubator/multiapps-controller/wiki/Deployment-Descriptor\" rel=\"nofollow noreferrer\">here</a>. e.g.</p>\n\n<p><code>properties:\n      POPULATE_ALBUM_REPOSITORY: true</code></p></li>\n</ol>\n"},{"answer_id":76275673,"body":"<p>Adding to the answer above you can use also:</p>\n<pre><code>cf set-env myapplication env1=val1 env2=val2 env3=val3 ...\n</code></pre>\n<p>where <code>...</code> is another set of <code>env=val</code> to set more than one variable in the same line</p>\n<p>For large JSON variables you can use:</p>\n<pre><code>export MYVAR=`cat mylarge.json`\ncf set-env myapplication MIKEVAR &quot;$MYVAR&quot;\n</code></pre>\n<p>Finally, in order to rewrite the entire configuration you can use the following example:</p>\n<pre><code>cf curl -X PUT /v2/apps/&lt;app-guid&gt; -d '{&quot;environment_json&quot;:{&quot;ENV1&quot;:&quot;VAL1&quot;, &quot;ENV2&quot;: &quot;VAL2&quot;}}'\n</code></pre>\n<p>That overwrites everything and replaces it with what is in the JSON, so if you have existing env variables you'd have to include those as well as the new ones you want to set.</p>\n"}],"last_activity_date":1684352557,"question_id":59776499,"body":"<p>I have a java application. Which needs json object to start the app. In my local environment I pass this through VM options but not able to figure out this in cloud foundry. </p>\n\n<p>I tried passing in .profile file but it did not work. In this file I provide export variablename=\"{jsonObject}\" </p>\n\n<p>Any help will be appreciated.</p>\n\n<p>Thank you</p>\n"},{"comments":[{"comment_id":134499560,"body":"Please note that SO is an english-only site. Also there are too many infos missing. You said that your code doesn&#39;t do what it should. <i>What</i> should it do? Where is your code? What is expected and what is actually happening?"},{"comment_id":134499664,"body":"Sorry first time here"},{"comment_id":134500219,"body":"<i>&quot;... for some reason, filtering for the earliest and latest Easter Sunday doesn&#39;t seem to work.&quot;</i> - Tell us explicitly what output you are expecting and what output you are getting.   And the inputs ..."},{"comment_id":134500482,"body":"Which Easter?  In the Western world, Easter in 2023 was April 9th.  In the Orthodox world, April 16th."},{"comment_id":134500643,"body":"The easter sunday of the Western world. I`m in europe."},{"comment_id":134501661,"body":"I know that Easter can occur between March 22 and April 25 inclusive.  But its date is determined by the first full moon of Spring.  Your code may well be computing that but using single letters for values does not really explain what you&#39;re doing.  I presume you will fully document your code but you should also use meaningful variable names."},{"comment_id":134502919,"body":"@WJS I think at least some of the variables are taken from <a href=\"https://en.wikipedia.org/wiki/Date_of_Easter#Gauss&#39;s_Easter_algorithm\" rel=\"nofollow noreferrer\">this algorithm</a> or the ones that follow it."},{"comment_id":134505805,"body":"@VGR Yep.  Interesting article which I may study at some point. But the OP&#39;s problem was using <code>isBefore</code> and <code>isAfter</code> to check for differences which also include the year.  The OP only wants day of year differences."}],"answers":[{"comments":[{"comment_id":134571460,"body":"Thanks for the help. By using the comparator the code finaly works. I struggled for at least 1,5 Weeks to find a solution for my problem."}],"answer_id":76273603,"body":"<p>One problem is that you are incrementing years. And using the <code>isBefore</code> and <code>isAfter</code> methods also include the year which is incorrectly reporting <code>min</code> and <code>max</code> dates for Easter. Example. <code>2023-04-09 isBefore 2024-03-31</code> from a date perspective but not from a <code>month/day</code> perspective. Note: I had to print the actual values you were comparing to see what was going on and at first it wasn't obvious to me.  <em>Print statements are your friend when it comes to debugging</em>.  So you just compare the day of the year to previous days of the year for Easter. So here is what I did.</p>\n<ul>\n<li>define a comparator to compare month and day using the day of year.</li>\n<li>initialize your <code>min</code> and <code>max</code> to the current year date for Easter.</li>\n<li>then starting with '1', increment your years.</li>\n</ul>\n<pre><code>int x = 20;\n\nint currentYear = 2023;\nComparator&lt;LocalDate&gt; comp = Comparator.comparing(LocalDate::getDayOfYear);\n\nLocalDate ostersonntag = berechneOstersonntag(currentYear);\nLocalDate spätesterOstersonntag = ostersonntag;\nLocalDate frühesterOstersonntag = ostersonntag;\n\n    for (int i = 0; i &lt; x; i++) {\n       ostersonntag = berechneOstersonntag(currentYear + \n    i);\n\n        if (comp.compare(ostersonntag, spätesterOstersonntag) &gt; 0) {\n            spätesterOstersonntag = ostersonntag;\n        } else if (comp.compare(ostersonntag, frühesterOstersonntag) &lt; 0) {\n            frühesterOstersonntag = ostersonntag;\n        }\n    }\n\n    System.out.println(&quot;Spaetester Ostersonntag: &quot; + \n    spätesterOstersonntag);\n    System.out.println(&quot;Fruehester Ostersonntag: &quot; + \n    frühesterOstersonntag);     \n}\n</code></pre>\n<p>prints</p>\n<pre><code>Spaetester Ostersonntag: 2038-04-25\nFruehester Ostersonntag: 2035-03-25\n</code></pre>\n<p>Note:  Another issue is that you and I are using different calculations to determine Easter. I used <a href=\"https://en.wikipedia.org/wiki/Date_of_Easter#Gauss%27s_Easter_algorithm\" rel=\"nofollow noreferrer\">this algorithm</a> posted by @VGR.  I verified the above using <a href=\"https://www.census.gov/data/software/x13as/genhol/easter-dates.html#par_textimage_1067001717\" rel=\"nofollow noreferrer\">Easter Dates</a></p>\n"}],"last_activity_date":1684351843,"question_id":76270769,"body":"<p>&quot;I have been assigned the task of programming a calculator in Java (C# would also work) that, based on the current year and user input, outputs the dates for the earliest and latest Easter Sunday. The program should work in such a way that the user enters a number representing the number of years to be checked in the future. The current year is 2023. The output should then display the earliest and latest dates on which Easter Sunday occurred within the specified number of years.</p>\n<p>Unfortunately, my code doesn't seem to solve it. The calculation of Easter Sundays is correct, but for some reason, filtering for the earliest and latest Easter Sunday doesn't seem to work.&quot;</p>\n<pre><code>        import java.time.LocalDate;\n        import java.util.Scanner;\n\n        public class Ostersonntag3 {\n        public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n\n        System.out.print(&quot;Bitte geben Sie eine Anzahl an Jahren ein: &quot;);\n        int x = scanner.nextInt();\n\n        LocalDate spätesterOstersonntag = LocalDate.MAX;\n        LocalDate frühesterOstersonntag = LocalDate.MIN;\n\n        int currentYear = 2023;\n\n        for (int i = 0; i &lt; x; i++) {\n            LocalDate ostersonntag = berechneOstersonntag(currentYear + \n        i);\n\n            if (ostersonntag.isBefore(spätesterOstersonntag)) {\n                spätesterOstersonntag = ostersonntag;\n            }\n\n            if (ostersonntag.isAfter(frühesterOstersonntag)) {\n                frühesterOstersonntag = ostersonntag;\n            }\n        }\n\n        System.out.println(&quot;Spaetester Ostersonntag: &quot; + \n        spätesterOstersonntag);\n        System.out.println(&quot;Fruehester Ostersonntag: &quot; + \n        frühesterOstersonntag);\n\n        scanner.close();\n        }\n \n        private static LocalDate berechneOstersonntag(int jahr) {\n        int a = jahr % 19;\n        int b = jahr % 4;\n        int c = jahr % 7;\n        int m = (8 * (jahr / 100) + 13) / 25 - 2;\n        int s = jahr / 100 - jahr / 400 - 2;\n        int n = (6 + s) % 7;\n        int d = (m + 19 * a) % 30;\n\n        if (d == 29) {\n            d = 28;\n        }\n\n        if (d == 28 &amp;&amp; a &gt;= 11) {\n            d = 27;\n        }\n\n        int e = (2 * b + 4 * c + 6 * d + n) % 7;\n\n        int tag = 21 + d + e + 1;\n        int monat;\n\n        if (tag &gt; 31) {\n            tag = tag % 31;\n            monat = 4;\n        } else {\n            monat = 3;\n        }\n\n        return LocalDate.of(jahr, monat, tag);\n        }\n        }\n</code></pre>\n<p>The Input is as you can see a number (int) and the Output that i want is a date (for example 2023.04.22, etc.) the dates should represent the earliest and latest easter sunday in the amount of years the user put in.\nBut the Output does not seem to be giving me the correct dates:\n[(for example the input is 20; the output is 2023.04.16 as the latest easter sunday and 2023.04.20 is the date for the closest easter sunday)\n(But if the Input is 200; the output is 2023.04.16 for the latest and 2023.04.14 for the earliest easter sunday)\n(And if the input is 30; the output is 2023.04.16 for the latest and 2023.03.31 for the earliest easter sunday)].\nThis does not make sense for me like at all??</p>\n"},{"comments":[{"comment_id":134507839,"body":"What is an &quot;obj file&quot; in the context of this question? What is not working? What is the expected result? Can you explain how to reproduce the issue? Please read <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>."}],"last_activity_date":1684350837,"question_id":76275262,"body":"<p>I want to extract a model from an obj file without any libraries, I wrote this code to extract the model and render it using opengl.\nI am trying to render the model and it shows the model but not completely.\nThere seems to be a problem in the parser code but I can't find it.</p>\n<p><a href=\"https://i.stack.imgur.com/uDVjw.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<pre><code>public static OBJModel loadObjModels(String fileName, String imageName)\n    {\n        List&lt;Vector3f&gt; vertices = new ArrayList&lt;&gt;();\n        List&lt;Vector2f&gt; textures = new ArrayList&lt;&gt;();\n        List&lt;Vector3f&gt; normals = new ArrayList&lt;&gt;();\n        List&lt;Integer&gt; indices = new ArrayList&lt;&gt;();\n    \n        ArrayList&lt;Float&gt; nArray = new ArrayList&lt;&gt;();\n        ArrayList&lt;Float&gt; tArray = new ArrayList&lt;&gt;();\n        \n        try (InputStream stream = OBJLoader.class.getClassLoader().getResourceAsStream(&quot;resources/objs/&quot; + fileName);\n             java.util.Scanner scanner = new java.util.Scanner(stream))\n        {\n            while (scanner.hasNext())\n            {\n                String line = scanner.nextLine();\n                line = line.replace(&quot;  &quot;, &quot; &quot;);\n                String[] parts = line.split(&quot; &quot;);\n                if(line.startsWith(&quot;v &quot;))\n                {\n                    updateMinMax(Float.parseFloat(parts[1]), Float.parseFloat(parts[2]), Float.parseFloat(parts[3]));\n                    vertices.add(new Vector3f(Float.parseFloat(parts[1]), Float.parseFloat(parts[2]), Float.parseFloat(parts[3])));\n                }\n                \n                else if(line.startsWith(&quot;vt &quot;))\n                {\n                    textures.add(new Vector2f(Float.parseFloat(parts[1]), Float.parseFloat(parts[2])));\n                }\n                \n                else if(line.startsWith(&quot;vn &quot;))\n                {\n                    normals.add(new Vector3f(Float.parseFloat(parts[1]), Float.parseFloat(parts[2]), Float.parseFloat(parts[3])));\n                }\n                \n                else if(line.startsWith(&quot;f &quot;))\n                {\n                    String[] vertex1 = parts[1].split(&quot;/&quot;);\n                    String[] vertex2 = parts[2].split(&quot;/&quot;);\n                    String[] vertex3 = parts[3].split(&quot;/&quot;);\n                    prepareVertex(vertex1, tArray, nArray, indices, textures, normals);\n                    prepareVertex(vertex2, tArray, nArray, indices, textures, normals);\n                    prepareVertex(vertex3, tArray, nArray, indices, textures, normals);\n                \n                    \n                    \n                    if(parts.length == 5)\n                    {\n                        String[] vertex4 = parts[4].split(&quot;/&quot;);\n                        \n                        prepareVertex(vertex1, tArray, nArray, indices, textures, normals);\n                        prepareVertex(vertex3, tArray, nArray, indices, textures, normals);\n                        prepareVertex(vertex4, tArray, nArray, indices, textures, normals);\n                    }\n                \n                }\n            }\n        }\n        catch (IOException ex)\n        {\n            System.out.println(ex.getMessage());\n        }\n        \n        float[] vArray = new float[indices.size() * 8];\n        \n        int[] indicesArray = new int[indices.size()];\n    \n        \n        \n        int tmp = 0;\n        for(int i = 0; i &lt; indices.size(); i ++)\n        {\n            vArray[tmp ++] = vertices.get(indices.get(i)).x - (xMax + xMin)/2;\n            vArray[tmp ++] = vertices.get(indices.get(i)).y - (yMax + yMin)/2;\n            vArray[tmp ++] = vertices.get(indices.get(i)).z - (zMax + zMin)/2;\n            vArray[tmp ++] = tArray.get(i * 2);\n            vArray[tmp ++] = tArray.get(i * 2 + 1);\n            vArray[tmp ++] = nArray.get(i * 3);\n            vArray[tmp ++] = nArray.get(i * 3 + 1);\n            vArray[tmp ++] = nArray.get(i * 3 + 2);\n        }\n    \n        System.out.println(indicesArray.length);\n    \n        StringBuilder result = new StringBuilder();\n        \n        for (int i = 0; i &lt; vArray.length; i++)\n        {\n            if ((i % 8 == 0) &amp;&amp; (i != 0))\n            {\n                result.append(&quot;\\n&quot;);\n            }\n            result.append(vArray[i]).append(&quot; &quot;);\n        }\n        \n        Path path = Paths.get(&quot;D:\\\\text.txt&quot;);\n        \n        try\n        {\n            Files.writeString(path, result.toString(), StandardCharsets.UTF_8);\n        }\n    \n        // Catch block to handle the exception\n        catch (IOException ex)\n        {\n            System.out.print(&quot;Invalid Path&quot;);\n        }\n    \n    \n    \n        for(int i = 0; i &lt; indices.size(); i ++)\n        {\n            indicesArray[i] = indices.get(i);\n        }\n        \n        return new OBJModel(vArray, indicesArray, imageName, 8, yMax - yMin);\n    }\n    \n    private static void prepareVertex\n            (String[] stringBinding, ArrayList&lt;Float&gt; tArray, ArrayList&lt;Float&gt; nArray, List&lt;Integer&gt; indices, List&lt;Vector2f&gt; textures, List&lt;Vector3f&gt; normals)\n    {\n        int currentVertexIndex = Integer.parseInt(stringBinding[0]) - 1;\n        indices.add(currentVertexIndex);\n        Vector2f currentTexture = textures.get(Integer.parseInt(stringBinding[1]) - 1);\n        Vector3f currentNormal = normals.get(Integer.parseInt(stringBinding[2]) - 1);\n        tArray.add(currentTexture.x);\n        tArray.add(currentTexture.y);\n        nArray.add(currentNormal.x);\n        nArray.add(currentNormal.y);\n        nArray.add(currentNormal.z);\n    }\n    \n    private static void updateMinMax(float x, float y, float z)\n    {\n        xMin = Math.min(xMin, x);\n        xMax = Math.max(xMax, x);\n        yMin = Math.min(yMin, y);\n        yMax = Math.max(yMax, y);\n        zMin = Math.min(zMin, z);\n        zMax = Math.max(zMax, z);\n    }\n  \n</code></pre>\n"},{"comments":[{"comment_id":134509712,"body":"I don&#39;t really understand what you&#39;re asking, but can&#39;t you just add a <code>boolean allowNull</code> attribute to the validation annotation and implement it? Or perhaps make optional fields <code>Optional&lt;String&gt;</code>, which also requires implementation, but more strongly telegraphs that it is optional (I have done this and it worked very well)."}],"last_activity_date":1684350669,"question_id":76275480,"body":"<p>I have some fields which I want to be validated only for certain validation groups. Also I want these field to be optional, meaning that they can contain null, but otherwise they should have valid value.</p>\n<p>example:</p>\n<pre><code>class Test{\n    @CustomValidation1\n    private String alwaysValidatedField;\n\n    @CustomValidation2(groups = A.class)\n    private String mandatoryFieldForGroupA;\n    \n    @CustomValidation2(groups = {B.class, C.class})\n    private String optionalFieldForGroupB_C;\n    \n    interface A{}\n    interface B{}\n    interface C{}\n}\n</code></pre>\n<p>Is there any way other than creating additional custom validations that do the same but allows null values?</p>\n"},{"comments":[{"comment_id":134505303,"body":"A simple google returns the following link for MODULES_SILENT_SHELL_DEBUG:  <a href=\"https://modules.readthedocs.io/en/stable/module.html#mconfig-silent_shell_debug\" rel=\"nofollow noreferrer\">modules.readthedocs.io/en/stable/&hellip;</a>  So it looks like the value of MODULES_SILENT_SHELL_DEBUG is messing up something within Helidon which could be trying to introspect the property value looking for ${} expressions to expand."}],"answers":[{"answer_id":76274685,"body":"<p><code>MODULES_SILENT_SHELL_DEBUG</code> appears to be an <a href=\"https://modules.readthedocs.io/en/stable/module.html#mconfig-silent_shell_debug\" rel=\"nofollow noreferrer\">environment variable</a> defined to a shell script in your specific shell. If you look carefully, you will notice an expression &quot;<code>${IFS+x}</code>&quot; which matches the syntax of <a href=\"https://helidon.io/docs/v3/#/se/config/advanced-configuration#filters-and-overrides\" rel=\"nofollow noreferrer\">token expected by Helidon</a>. This is unfortunate but it looks like you would need to unset the environment variables carrying token-like expressions: ${ref} if you want to use environment variables as a configuration source (which you are very likely to need for any K8s deployments)</p>\n<p>If this is a VM, resetting the offending envs in the execution shell might be a workaround. If this happens within the docker image, consider using a different base image that does not contain those modules.</p>\n<p>Meanwhile, you may try your luck by filing a bug report on Helidon config requesting Helidon to ignore token-like expressions for values derived from environment and system properties, as it is highly unlikely they are substitution tokens.</p>\n"},{"answer_id":76275464,"body":"<p>It seems that you have some exported shell function in your environment.</p>\n<p>You can try to remove environment variables with names like <code>BASH_FUNC_</code>, either manually, one by one or with something like this:</p>\n<p><code>unset -f $(env | cut -d '=' -f1 | grep BASH_FUNC_)</code></p>\n"}],"last_activity_date":1684350553,"question_id":76274101,"body":"<p>I have a helidon MP java project with helidon 3.1.0 and I'm facing the issue below when I'm trying to run the generated jar file in oracle linux 8 machine where as same jar file works in other machines. Here are the details.\njava version: 17.0.6\nhelidon version: 3.1.0\nOS : Oracle linux 8\nThanks for your support in advance.</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.ExceptionInInitializerError\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.fromBuildTimeInitializer(ContainerInstanceHolder.java:65)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.lambda$get$1(ContainerInstanceHolder.java:56)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.access(ContainerInstanceHolder.java:91)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.get(ContainerInstanceHolder.java:53)\n    at io.helidon.microprofile.cdi.HelidonContainer.instance(HelidonContainer.java:48)\n    at io.helidon.microprofile.server.Server$Builder.build(Server.java:190)\n    at io.helidon.microprofile.server.Server.create(Server.java:83)\n    at oracle.communications.sam.performance.KpiApplication.main(KpiApplication.java:61)\nCaused by: org.jboss.weld.exceptions.DefinitionException: Exception List with 1 exceptions:\nException 0 :\njava.util.NoSuchElementException: Property IFS+x used in expression () { unset _mlshdbg;\n if [ &quot;${MODULES_SILENT_SHELL_DEBUG:-0}&quot; = '1' ]; then\n case &quot;$-&quot; in\n *v*x*)\n set +vx;\n _mlshdbg='vx'\n ;;\n *v*)\n set +v;\n _mlshdbg='v'\n ;;\n *x*)\n set +x;\n _mlshdbg='x'\n ;;\n *)\n _mlshdbg=''\n ;;\n esac;\n fi;\n unset _mlre _mlIFS;\n if [ -n &quot;${IFS+x}&quot; ]; then\n _mlIFS=$IFS;\n fi;\n IFS=' ';\n for _mlv in ${MODULES_RUN_QUARANTINE:-};\n do\n if [ &quot;${_mlv}&quot; = &quot;${_mlv##*[!A-Za-z0-9_]}&quot; -a &quot;${_mlv}&quot; = &quot;${_mlv#[0-9]}&quot; ]; then\n if [ -n &quot;`eval 'echo ${'$_mlv'+x}'`&quot; ]; then\n _mlre=&quot;${_mlre:-}${_mlv}_modquar='`eval 'echo ${'$_mlv'}'`' &quot;;\n fi;\n _mlrv=&quot;MODULES_RUNENV_${_mlv}&quot;;\n _mlre=&quot;${_mlre:-}${_mlv}='`eval 'echo ${'$_mlrv':-}'`' &quot;;\n fi;\n done;\n if [ -n &quot;${_mlre:-}&quot; ]; then\n eval `eval ${_mlre} /usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash '&quot;$@&quot;'`;\n else\n eval `/usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash &quot;$@&quot;`;\n fi;\n _mlstatus=$?;\n if [ -n &quot;${_mlIFS+x}&quot; ]; then\n IFS=$_mlIFS;\n else\n unset IFS;\n fi;\n unset _mlre _mlv _mlrv _mlIFS;\n if [ -n &quot;${_mlshdbg:-}&quot; ]; then\n set -$_mlshdbg;\n fi;\n unset _mlshdbg;\n return $_mlstatus\n} does not exist\n    at io.helidon.config.mp.MpConfigImpl.lambda$format$14(MpConfigImpl.java:421)\n    at java.base/java.util.Optional.orElseThrow(Optional.java:403)\n    at io.helidon.config.mp.MpConfigImpl.format(MpConfigImpl.java:421)\n    at io.helidon.config.mp.MpConfigImpl.processExpressions(MpConfigImpl.java:399)\n    at io.helidon.config.mp.MpConfigImpl.resolveReferences(MpConfigImpl.java:379)\n    at io.helidon.config.mp.MpConfigImpl.lambda$findConfigValue$12(MpConfigImpl.java:340)\n    at java.base/java.util.Optional.map(Optional.java:260)\n    at io.helidon.config.mp.MpConfigImpl.findConfigValue(MpConfigImpl.java:340)\n    at io.helidon.config.mp.MpConfigImpl.optionalValue(MpConfigImpl.java:191)\n    at io.helidon.config.mp.MpConfigImpl.getOptionalValue(MpConfigImpl.java:131)\n    at io.helidon.config.mp.MpConfigProviderResolver$ConfigDelegate.getOptionalValue(MpConfigProviderResolver.java:356)\n    at io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.initializeMasterProperties(AbstractDataSourceExtension.java:233)\n    at io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.afterBeanDiscovery(AbstractDataSourceExtension.java:293)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:95)\n    at org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:85)\n    at org.jboss.weld.injection.MethodInvocationStrategy$SimpleMethodInvocationStrategy.invoke(MethodInvocationStrategy.java:168)\n    at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:330)\n    at org.jboss.weld.event.ExtensionObserverMethodImpl.sendEvent(ExtensionObserverMethodImpl.java:123)\n    at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:308)\n    at org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:286)\n    at jakarta.enterprise.inject.spi.ObserverMethod.notify(ObserverMethod.java:125)\n    at org.jboss.weld.util.Observers.notify(Observers.java:166)\n    at org.jboss.weld.event.ObserverNotifier.notifySyncObservers(ObserverNotifier.java:285)\n    at org.jboss.weld.event.ObserverNotifier.notify(ObserverNotifier.java:273)\n    at org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:177)\n    at org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:171)\n    at org.jboss.weld.bootstrap.events.AbstractContainerEvent.fire(AbstractContainerEvent.java:53)\n    at org.jboss.weld.bootstrap.events.AbstractDefinitionContainerEvent.fire(AbstractDefinitionContainerEvent.java:44)\n    at org.jboss.weld.bootstrap.events.AfterBeanDiscoveryImpl.fire(AfterBeanDiscoveryImpl.java:75)\n    at org.jboss.weld.bootstrap.WeldStartup.deployBeans(WeldStartup.java:467)\n    at org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:86)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.init(HelidonContainerImpl.java:214)\n    at io.helidon.common.context.Contexts.runInContext(Contexts.java:137)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.initInContext(HelidonContainerImpl.java:135)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.create(HelidonContainerImpl.java:127)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.lambda$createContainer$2(BuildTimeInitializer.java:63)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.accessContainer(BuildTimeInitializer.java:72)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.createContainer(BuildTimeInitializer.java:62)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.&lt;clinit&gt;(BuildTimeInitializer.java:37)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.fromBuildTimeInitializer(ContainerInstanceHolder.java:65)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.lambda$get$1(ContainerInstanceHolder.java:56)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.access(ContainerInstanceHolder.java:91)\n    at io.helidon.microprofile.cdi.ContainerInstanceHolder.get(ContainerInstanceHolder.java:53)\n    at io.helidon.microprofile.cdi.HelidonContainer.instance(HelidonContainer.java:48)\n    at io.helidon.microprofile.server.Server$Builder.build(Server.java:190)\n    at io.helidon.microprofile.server.Server.create(Server.java:83)\n    at oracle.communications.sam.performance.KpiApplication.main(KpiApplication.java:61)\n\n    at org.jboss.weld.bootstrap.events.AbstractDefinitionContainerEvent.fire(AbstractDefinitionContainerEvent.java:46)\n    at org.jboss.weld.bootstrap.events.AfterBeanDiscoveryImpl.fire(AfterBeanDiscoveryImpl.java:75)\n    at org.jboss.weld.bootstrap.WeldStartup.deployBeans(WeldStartup.java:467)\n    at org.jboss.weld.bootstrap.WeldBootstrap.deployBeans(WeldBootstrap.java:86)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.init(HelidonContainerImpl.java:214)\n    at io.helidon.common.context.Contexts.runInContext(Contexts.java:137)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.initInContext(HelidonContainerImpl.java:135)\n    at io.helidon.microprofile.cdi.HelidonContainerImpl.create(HelidonContainerImpl.java:127)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.lambda$createContainer$2(BuildTimeInitializer.java:63)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.accessContainer(BuildTimeInitializer.java:72)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.createContainer(BuildTimeInitializer.java:62)\n    at io.helidon.microprofile.cdi.BuildTimeInitializer.&lt;clinit&gt;(BuildTimeInitializer.java:37)\n    ... 8 more\n    Suppressed: java.util.NoSuchElementException: Property IFS+x used in expression () { unset _mlshdbg;\n if [ &quot;${MODULES_SILENT_SHELL_DEBUG:-0}&quot; = '1' ]; then\n case &quot;$-&quot; in\n *v*x*)\n set +vx;\n _mlshdbg='vx'\n ;;\n *v*)\n set +v;\n _mlshdbg='v'\n ;;\n *x*)\n set +x;\n _mlshdbg='x'\n ;;\n *)\n _mlshdbg=''\n ;;\n esac;\n fi;\n unset _mlre _mlIFS;\n if [ -n &quot;${IFS+x}&quot; ]; then\n _mlIFS=$IFS;\n fi;\n IFS=' ';\n for _mlv in ${MODULES_RUN_QUARANTINE:-};\n do\n if [ &quot;${_mlv}&quot; = &quot;${_mlv##*[!A-Za-z0-9_]}&quot; -a &quot;${_mlv}&quot; = &quot;${_mlv#[0-9]}&quot; ]; then\n if [ -n &quot;`eval 'echo ${'$_mlv'+x}'`&quot; ]; then\n _mlre=&quot;${_mlre:-}${_mlv}_modquar='`eval 'echo ${'$_mlv'}'`' &quot;;\n fi;\n _mlrv=&quot;MODULES_RUNENV_${_mlv}&quot;;\n _mlre=&quot;${_mlre:-}${_mlv}='`eval 'echo ${'$_mlrv':-}'`' &quot;;\n fi;\n done;\n if [ -n &quot;${_mlre:-}&quot; ]; then\n eval `eval ${_mlre} /usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash '&quot;$@&quot;'`;\n else\n eval `/usr/bin/tclsh /usr/share/Modules/libexec/modulecmd.tcl bash &quot;$@&quot;`;\n fi;\n _mlstatus=$?;\n if [ -n &quot;${_mlIFS+x}&quot; ]; then\n IFS=$_mlIFS;\n else\n unset IFS;\n fi;\n unset _mlre _mlv _mlrv _mlIFS;\n if [ -n &quot;${_mlshdbg:-}&quot; ]; then\n set -$_mlshdbg;\n fi;\n unset _mlshdbg;\n return $_mlstatus\n} does not exist\n        at io.helidon.config.mp.MpConfigImpl.lambda$format$14(MpConfigImpl.java:421)\n        at java.base/java.util.Optional.orElseThrow(Optional.java:403)\n        at io.helidon.config.mp.MpConfigImpl.format(MpConfigImpl.java:421)\n        at io.helidon.config.mp.MpConfigImpl.processExpressions(MpConfigImpl.java:399)\n        at io.helidon.config.mp.MpConfigImpl.resolveReferences(MpConfigImpl.java:379)\n        at io.helidon.config.mp.MpConfigImpl.lambda$findConfigValue$12(MpConfigImpl.java:340)\n        at java.base/java.util.Optional.map(Optional.java:260)\n        at io.helidon.config.mp.MpConfigImpl.findConfigValue(MpConfigImpl.java:340)\n        at io.helidon.config.mp.MpConfigImpl.optionalValue(MpConfigImpl.java:191)\n        at io.helidon.config.mp.MpConfigImpl.getOptionalValue(MpConfigImpl.java:131)\n        at io.helidon.config.mp.MpConfigProviderResolver$ConfigDelegate.getOptionalValue(MpConfigProviderResolver.java:356)\n        at io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.initializeMasterProperties(AbstractDataSourceExtension.java:233)\n        at io.helidon.integrations.datasource.cdi.AbstractDataSourceExtension.afterBeanDiscovery(AbstractDataSourceExtension.java:293)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:95)\n        at org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:85)\n        at org.jboss.weld.injection.MethodInvocationStrategy$SimpleMethodInvocationStrategy.invoke(MethodInvocationStrategy.java:168)\n        at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:330)\n        at org.jboss.weld.event.ExtensionObserverMethodImpl.sendEvent(ExtensionObserverMethodImpl.java:123)\n        at org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:308)\n        at org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:286)\n        at jakarta.enterprise.inject.spi.ObserverMethod.notify(ObserverMethod.java:125)\n        at org.jboss.weld.util.Observers.notify(Observers.java:166)\n        at org.jboss.weld.event.ObserverNotifier.notifySyncObservers(ObserverNotifier.java:285)\n        at org.jboss.weld.event.ObserverNotifier.notify(ObserverNotifier.java:273)\n        at org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:177)\n        at org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:171)\n        at org.jboss.weld.bootstrap.events.AbstractContainerEvent.fire(AbstractContainerEvent.java:53)\n        at org.jboss.weld.bootstrap.events.AbstractDefinitionContainerEvent.fire(AbstractDefinitionContainerEvent.java:44)\n        ... 19 more```\n</code></pre>\n"},{"comments":[{"comment_id":66863989,"body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/25317804/using-powermockito-whennew-is-not-getting-mocked-and-original-method-is-called\">Using PowerMockito.whenNew() is not getting mocked and original method is called</a>"}],"answers":[{"comments":[{"comment_id":66865459,"body":"I should not create any new object in service method?"},{"comment_id":66865639,"body":"I am saying: when you use <b>new</b> you loose the ability to (easily!) control your objects. So, avoiding calls to <i>new</i> <b>can</b> make your code better. As said: A) read about <b>dependency injection</b> and B) watch those videos; at least the first ones ..."}],"answer_id":39785103,"body":"<p>You created <strong>hard to test</strong> code there, for absolutely no good reason.\nWhat is breaking your neck is that small little call to <strong>new B1</strong> in your service class.</p>\n\n<p>If you would be using <strong>dependency injection</strong> for that object; then you would absolutely not need to deal with powermock and mocking inherited methods. Because then you could simply create a \"mock\" B1; pass that to your service; and then you have <strong>full</strong> control over what will be happening during your test. </p>\n\n<p>So, the viable alternative here might be to avoid complex test setup by simply improving your production code to be easier to test.</p>\n\n<p>Watch those <a href=\"https://www.youtube.com/playlist?list=PLD0011D00849E1B79\" rel=\"nofollow\">videos</a> to better understand what I am talking about!</p>\n"}],"last_activity_date":1684350435,"question_id":39784841,"body":"<p>I want to test my <code>Service</code> class method <code>testB1Method2</code> by mocking overridden method <code>a1Method2</code> of class <code>B1</code>. I do not want to change anything in class <code>A1</code> and <code>B1</code>. I am using mockito 1.9.0 and powermockito 1.4.12. The following code I am trying:</p>\n\n<p>UnitTestService class:</p>\n\n<pre><code>import static org.mockito.Mockito.*;\n\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.mockito.Mockito;\nimport org.mockito.MockitoAnnotations;\nimport org.powermock.api.mockito.PowerMockito;\nimport org.testng.Assert;\nimport org.testng.annotations.Test;\n\npublic class UnitTestService {\n\n    @Mock\n    B1 b1;\n    @InjectMocks\n    Service service = new Service();\n\n    @Test\n    public void testB1Method2() throws Exception {\n        MockitoAnnotations.initMocks(this);\n        when(b1.a1Method2()).thenReturn(\"mockvalue\");\n        PowerMockito.whenNew(B1.class).withArguments(Mockito.any()).thenReturn(b1);\n        String output = service.serviceMethod();\n        System.out.println(\"=====\" + output);\n        Assert.assertTrue(\"mockvalue\".equalsIgnoreCase(output), \"testA1Method2 failed!\");\n    }\n\n}\n</code></pre>\n\n<p>Service class:</p>\n\n<pre><code>public class Service {\n\n    public String serviceMethod() {\n        B1 b1 = new B1(\"some data\");\n        return b1.a1Method2();\n    }\n\n}\n</code></pre>\n\n<p>class A1:</p>\n\n<pre><code>public abstract class A1 {\n\n    public A1(String data) {\n        //doing many thing with data\n    }\n\n    public String a1Method1() {\n        return \"from a1Method1\";\n    }\n\n    public String a1Method2() {\n        return \"from a1Method2\";\n    }\n\n}\n</code></pre>\n\n<p>B1 class:</p>\n\n<pre><code>public class B1 extends A1 {\n\n    public B1(String data) {\n        super(data);\n    }\n\n    @Override\n    public String a1Method1() {\n        return \"a1Method1 from B1 class\";\n    }\n\n}\n</code></pre>\n\n<p>I am running class <code>UnitTestService</code> using testNG in eclipse. And here actual method in class B1 <code>a1Method2</code> is getting called as it is printing \"=====from a1Method2\" in console. ie: here it seems mockito is not able to mock this method.</p>\n\n<p>What code change should I make in <code>UnitTestService</code> class to mock class B1 <code>a1Method2</code> ?</p>\n"},{"comments":[{"comment_id":134506811,"body":"your &quot;End Date&quot; is in seconds, what you calculate is in milliseconds. <code>book.endDate * 1000</code> might fix your issue. E.g. <code>1684159940</code> when treated as millis would be Tue Jan 20 1970 11:49:19 UTC so it&#39;s way past 1 week ago (see <a href=\"https://currentmillis.com/\" rel=\"nofollow noreferrer\">currentmillis.com</a> for example)"},{"comment_id":134507200,"body":"Yes, you are right, I was actually keeping it as a unix timestamp in the object. However, the Unix timestamp is a value in seconds. I had forgotten that. Thanks for giving me your valuable time."}],"answers":[{"comments":[{"comment_id":134507147,"body":"Thank you for taking your valuable time to help me. I guess I&#39;m too tired to see the numbers."}],"answer_id":76275195,"body":"<p>The date from the book -which is really a timestamp- doesn't include milliseconds. Notice that the length has 3 less digits. Multiply it by 1000 to make it comparable to the other timestamp.</p>\n"},{"comments":[{"comment_id":134507168,"body":"Thank you for taking your valuable time to help me."}],"answer_id":76275399,"body":"<p>It appears that <code>book.endDate</code> is returning an incorrectly computed value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>long endDateMillis = book.endDate;\n</code></pre>\n<blockquote>\n<p>I/System.out: End Date: 1684159940</p>\n</blockquote>\n<p>Essentially, it is off by a multiple of 1000.</p>\n<p>You can fix this either within the <code>book</code> object class, or simply multiply <code>endDateMillis</code> by 1000.</p>\n<pre class=\"lang-java prettyprint-override\"><code>long endDateMillis = book.endDate * 1000L;\n</code></pre>\n"}],"last_activity_date":1684349925,"question_id":76275130,"body":"<p>I am working on a project where the user adds a completion date when adding a book. I save it in an object called <code>FinishedBooks</code> with the completion date and other data of the book. I list these books in another activity. I have a filter button in the corner of the screen. This button will list the books that have been finished in the last week. I wrote a method for this before, here is my method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void lastWeekFilter(List&lt;FinishedBooks&gt; finishedBooks) {\n    List&lt;FinishedBooks&gt; lastWeekList = new ArrayList&lt;&gt;();\n\n    // take now time\n    long currentTimeMillis = System.currentTimeMillis();\n\n    // Calculate the time one week ago\n    long oneWeekMillis = 7L * 24L * 60L * 60L * 1000L;\n    long oneWeekAgoMillis = currentTimeMillis - oneWeekMillis;\n\n    // Check each item in the list\n    for (FinishedBooks book : finishedBooks) {\n        long endDateMillis = book.endDate;\n\n        System.out.println(&quot;End Date: &quot; + endDateMillis);\n        System.out.println(&quot;One Week Ago Millis: &quot; + oneWeekAgoMillis);\n        System.out.println(&quot;******************************&quot;);\n\n        // If the due date falls within the last 1 week, add the item to the filteredList\n        if (endDateMillis &gt;= oneWeekAgoMillis &amp;&amp; endDateMillis &lt;= currentTimeMillis) {\n            lastWeekList.add(book);\n        }\n    }\n    finishedBooksAdapter.setLastWeekFilter(lastWeekList);\n}\n</code></pre>\n<p>My code didn't work as I wanted, it never enters the if block. So I used a <code>System.out.println();</code> to see if the values meet the if conditions. Here's my logcat output:</p>\n<pre><code>I/System.out: End Date: 1684159940\nI/System.out: One Week Ago Millis: 1683740684856\nI/System.out: ******************************\nI/System.out: End Date: 1683987159\nI/System.out: One Week Ago Millis: 1683740684856\nI/System.out: ******************************\n</code></pre>\n<p>Although my incoming data meets the conditions, the object I want is not included in the list. It does not enter the if block. <code>lastWeekList.size()</code> returns 0.</p>\n<p>I am grateful for your help in advance.</p>\n<p>I was expecting the conditions to be met and these objects to be listed, but the list remains empty.</p>\n"},{"last_activity_date":1684349812,"question_id":76275388,"body":"<p>Estoy migrando una kb de GX17U3 a GX17U11 tengo 2 problemas en el ambiente de desarrollo:</p>\n<ol>\n<li><p>En el back con el componente captcha, solo me funciona cuando por el navegador se accede con la url &quot;Localhost&quot;, pero si lo hago con la IP o el nombre de la máquina se genera el error: &quot;ERROR para el propietario del sitio: El dominio no es válido para la clave del sitio&quot;.</p>\n</li>\n<li><p>Al generar el apk en Android veo comunicación desde el browser al Back, pero al tratar de subir la app me sale Internal server error 500-, que aún no logro decifrar en que consiste dado que no tiene que ver con Android ni con el backend como tal.</p>\n</li>\n</ol>\n<p>Muchas gracias.</p>\n<p>Solucionar el par de errores.</p>\n"},{"comments":[{"comment_id":134495163,"body":"So basically you want a way to compare 2 Columns with Map type?"},{"comment_id":134506952,"body":"Yes @HoangMinhQuangFX15045"}],"last_activity_date":1684348981,"question_id":76266757,"body":"<p>I have two datasets (baseline and dataset) in this Structure:</p>\n<pre><code>public static final StructType SCHEMA =  new StructType()\n.add(KEY, StringType, false)\n.add(DATASETS, createMapType(StringType, createArrayType(StringType)), true);\n\n// Find rows (just same keys) in newDataset (dataset) that are in oldDataset(baseline) but with different values\nDataset&lt;Row&gt; joined = dataset\n.join(baselineData, dataset.col(KEY).equalTo(baselineData.col(KEY)), &quot;inner&quot;)\n.withColumn(&quot;datasets_baseline&quot;, baselineData.col(DATASETS))\n.withColumn(&quot;datasets_new&quot;, dataset.col(DATASETS))\n.drop(baselineData.col(DATASETS))\n.drop(dataset.col(DATASETS));\n</code></pre>\n<p>I couldn't do datasets_baseline.notEqualTo(datasets_new) because it is a map type.</p>\n<p>Is there any other option to get what I am looking for ?</p>\n<p>Tried this :</p>\n<pre><code>Dataset&lt;Row&gt; newRows = joined     \n.select(col(KEY), \nexpr(&quot;arrays_zip(datasets_baseline, datasets_new) as datasets_diff&quot;))     \n.filter(expr(&quot;exists(transform(datasets_diff, x -&gt; exists(transform(x, y -&gt; y._1 != y._2))), element -&gt; element)&quot;)\n.join(dataset, dataset.col(KEY).equalTo(joined.col(KEY)), &quot;inner&quot;)\n.select(dataset.col(KEY), dataset.col(DATASETS)); \n</code></pre>\n<p>but different values implies different in order inside the list (map's value) so this doesn't work for me.</p>\n"},{"comments":[{"comment_id":37589639,"body":"<a href=\"http://www.oracle.com/technetwork/java/javase/locales-137662.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/java/javase/locales-137662.html</a>"}],"answers":[{"answer_id":24319555,"body":"<p>Try this:   </p>\n\n<pre><code>NumberFormat brl = NumberFormat.getCurrencyInstance(Locale.forLanguageTag(\"pt_BR\"));\n</code></pre>\n"},{"answer_id":76275263,"body":"<p>UPDATING 2023 (KOTLIN):</p>\n<p>When I tried to use &quot;Locale.forLanguageTag(&quot;pt_BR&quot;)&quot; it didn't work for me, it's not formatting correctly and it's showing an unknown character:</p>\n<p><a href=\"https://i.stack.imgur.com/sngK5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sngK5.png\" alt=\"unknown character appearing when using Locale.forLanguageTag(&quot;pt_BR&quot;)\" /></a></p>\n<p>So I googled and used the following code and it worked:</p>\n<pre><code>val brl = NumberFormat.getCurrencyInstance(Locale(&quot;pt&quot;, &quot;BR&quot;))\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/uHulP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uHulP.png\" alt=\"Brazil currency character displayed correctly by using Locale(&quot;pt&quot;, &quot;BR&quot;)\" /></a></p>\n"}],"last_activity_date":1684348824,"question_id":24319420,"body":"<pre><code>public  double showinbrl(double amount, double rate) {\n        double amountinbrl = amount * rate; \n        NumberFormat brl = NumberFormat.getCurrencyInstance(Locale.BRAZIL); \n        brl.format(amountinbrl);\n        return amountinbrl;\n    }\n</code></pre>\n\n<p>how to get the locale for the different countries... i cant find locale for brazil..</p>\n"},{"comments":[{"comment_id":134505161,"body":"As <code>secret_number</code> is a VARCHAR, its value should be enclosed in quotes.  However, far better would be to use PreparedStatement instead to handle that for you - that is more secure (preventing SQL injection attacks), and also handles eg if your value includes a quote character itself."},{"comment_id":134505226,"body":"Your CREATE TABLE statement is missing a closing <code>)</code> character. The syntax error gives you a clue by saying <code>...near &#39;&#39; at line 1</code>, meaning it got confused at the end, expecting a closing parenthesis, but there was none. Normally the syntax error shows what follows the position it got confused, but in this case that&#39;s the end of your statement, so there is nothing following."},{"comment_id":134505298,"body":"You are trying to insert <code>NULL</code> into both of your columns, but the first one, <code>id</code>, has a <code>NOT NULL</code> constraint."},{"comment_id":134505547,"body":"@racraman and Bill Karwin Both of your solutions were the issue. I will look into using a prepared statement as well, Thanks for the help!"},{"comment_id":134505566,"body":"@JettoMart&#237;nez it does work with the Null values as that field is auto incremented, and it hasn&#39;t been an issue, but thank you for the insight as well!"}],"answers":[{"comments":[{"comment_id":134505605,"body":"The quotation marks around the secretNumber were the main issue, as well as I was missing a closing &quot;)&quot; in my create table statement. Thank you for the insight!"},{"comment_id":134506708,"body":"Try not to construct the SQL string like that. Instead, use PrepareStatement. It will remove syntax or escaping problems while at the same time protecting you from SQL injection attacks."}],"answer_id":76274432,"body":"<p>Since you have created the column <code>secretNumber</code> as a <code>VARCHAR(20)</code> I would check to make sure <code>secretNumber</code> is at most 20 characters long before adding it.</p>\n<p>On line 30 you have the following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>secretNumber = &quot;R&quot; + env + id + randomDigit;\n</code></pre>\n<p>So, you can either use the debugger, or on line 31 you can put the following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (secretNumber.length() &gt; 20) throw new Exception();\n</code></pre>\n<p>If that doesn't work, you can try single-quotes around the values, I guess.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String updateSecretNumber = \n   &quot;UPDATE secret_number_generator &quot; +\n   &quot;SET secret_number = '&quot; + secretNumber + &quot;' &quot; +\n   &quot;WHERE id = '&quot; + id + &quot;'&quot;;\n</code></pre>\n<p>Additionally, a semi-colon at the end of a single statement is not required.</p>\n"},{"answer_id":76275178,"body":"<p>While the previous example gives you the desired result it can easily break on malicious variable values. This version is hardened against SQL injection:</p>\n<p>Use a PreparedStatement like so:</p>\n<pre><code>PreparedStatement ps = connection.prepareStatement(\n    &quot;UPDATE secret_number_generator &quot; +\n    &quot;SET secret_number = ? &quot; +\n    &quot;WHERE id = ?&quot;;\nps.setString(1, secretNumber);\nps.setString(2, id);\nint count = ps.executeUpdate();\nSystem.out.println(&quot;updated %d rows&quot;, count);\n</code></pre>\n"}],"last_activity_date":1684348065,"question_id":76274143,"body":"<p>Im building a java microservice that uses AWS Aurora Mysql for some operations. the code connects to the database fine and the first 3 queries I had were throwing a similar error till I realized I was missing semicolons. The final query (the update statement) however is still giving me the same syntax error even with the semi colon and I can't seem to figure out why.</p>\n<p>here is the code below</p>\n<pre><code>try {\n            conn = DriverManager.getConnection(jdbcUrl);\n\n            setupStatement = conn.createStatement();\n            idInsertStatement = conn.createStatement();\n            secretNumberUpdateStatement = conn.createStatement();\n\n            String createTableIfNotExists = &quot;CREATE TABLE IF NOT EXISTS secret_number_generator(id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY, secret_number VARCHAR(20);&quot;;\n\n            String generateSecretId = &quot;INSERT INTO secret_number_generator VALUES(null,null);&quot;;\n            \n            String getLastRecordId = &quot;SELECT id FROM secret_number_generator ORDER BY id DESC LIMIT 1;&quot;;\n            \n            setupStatement.addBatch(createTableIfNotExists);\n            idInsertStatement.addBatch(generateSecretId);\n            setupStatement.executeBatch();\n            idInsertStatement.executeBatch();\n            readStatement = conn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_READ_ONLY);\n            resultSet = readStatement.executeQuery(getLastRecordId);\n         \n            while(resultSet.next()){\n                id = String.valueOf(resultSet.getLong(&quot;id&quot;));\n            }\n\n            /*\n              Logic for setting up secretNumber\n            */\n\n            }\n            secretNumber = &quot;R&quot; + env + id + randomDigit;\n            \n            String updateSecretNumber = &quot;UPDATE secret_number_generator SET secret_number = &quot; + secretNumber + &quot; WHERE id = &quot; + id + &quot;;&quot;;\n            \n            secretNumberUpdateStatement.addBatch(updateSecretNumber);\n            secretNumberUpdateStatement.executeBatch();\n\n            resultSet.close();\n            setupStatement.close();\n            idInsertStatement.close();\n            secretNumberUpdateStatement.close();\n            readStatement.close();\n            conn.close();\n\n        } catch (SQLException ex) {\n            // Handle any errors\n            System.out.println(&quot;SQLException: &quot; + ex.getMessage());\n            System.out.println(&quot;SQLState: &quot; + ex.getSQLState());\n            System.out.println(&quot;VendorError: &quot; + ex.getErrorCode());\n        } finally {\n            System.out.println(&quot;Closing the connection.&quot;);\n            if (conn != null) try { conn.close(); } catch (SQLException ignore) {}\n        }\n</code></pre>\n<p>The error I am getting for that update query is</p>\n<pre><code>SQLException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1\n</code></pre>\n<p>as mentioned the same error was showing for the previous queries before I add a semicolon at the end of them, now only shows for the final one.</p>\n"},{"comments":[{"comment_id":134506883,"body":"You changed your package structure as well, which is not covered by Spring Boot and thus it isn&#39;t detecting the entities anymore."},{"comment_id":134507085,"body":"Adding an annotation to include the package in the search path fron <a href=\"https://stackoverflow.com/questions/39539508/spring-data-entities-in-different-packages\" title=\"spring data entities in different packages\">stackoverflow.com/questions/39539508/&hellip;</a> did not help. I think I still have to remove the duplicate dependency"},{"comment_id":134555150,"body":"If it is the same you don&#39;t need to remove it. I would suggest to make it compile only instead of implementation."}],"last_activity_date":1684348014,"question_id":76275013,"body":"<p>In relation to <a href=\"https://stackoverflow.com/questions/76268254/does-it-matter-if-an-entity-for-a-jpa-repository-is-defined-in-another-gradle-pr\">this</a> question, I have encountered a problem.</p>\n<p>I have two projects, a <code>authlib</code> and a <code>server</code>. <code>server</code> is a spring boot 2.4.4 project with java, and <code>authlib</code> is a Kotlin project meant to be used as a library to facilitate web requests to the <code>server</code>.</p>\n<p>I decided to move the entity classes from the <code>server</code> to the <code>authlib</code>, so I could use them directly when handling the web requests and didn't have to define basically duplicate classes. I use <code>javax.persistence</code> for the entity definitions and stuff, so I added the dependency to the build.gradle.kts of the authlib:</p>\n<pre><code>dependencies {\n    implementation(kotlin(&quot;stdlib&quot;))\n    implementation(&quot;org.projectlombok:lombok:1.18.18&quot;)\n    implementation(&quot;com.fasterxml.jackson.core:jackson-databind:2.9.6&quot;)\n\n    // https://mvnrepository.com/artifact/javax.persistence/persistence-api\n    implementation(&quot;javax.persistence:persistence-api:1.0.2&quot;)\n}\n</code></pre>\n<p>The <code>server</code> uses the <code>authlib</code> project like this:</p>\n<pre><code>dependencies {\n    implementation(project(&quot;:authlib&quot;))\n\n    implementation(&quot;net.dv8tion:JDA:5.0.0-alpha.12&quot;)\n    implementation(&quot;com.github.theholywaffle:teamspeak3-api:1.3.0&quot;)\n\n    implementation(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-freemarker&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-validation&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-mail&quot;)\n    implementation(&quot;org.jboss.aerogear:aerogear-otp-java:1.0.0&quot;)\n    implementation(&quot;org.mindrot:jbcrypt:0.4&quot;)\n    implementation(&quot;org.mariadb.jdbc:mariadb-java-client:1.5.7&quot;)\n    implementation(&quot;com.google.code.gson:gson:2.9.0&quot;)\n    //implementation(&quot;com.google.api-client:google-api-client:1.32.1&quot;)\n    //implementation(&quot;com.google.oauth-client:google-oauth-client-jetty:1.32.1&quot;)\n    //implementation(&quot;com.google.apis:google-api-services-youtube:v3-rev20210811-1.32.1&quot;)\n\n    compileOnly(&quot;org.projectlombok:lombok&quot;)\n    runtimeOnly(&quot;mysql:mysql-connector-java&quot;)\n    annotationProcessor(&quot;org.projectlombok:lombok&quot;)\n\n\n    testImplementation(&quot;org.springframework.boot:spring-boot-starter-test&quot;)\n    testImplementation(&quot;org.springframework.security:spring-security-test&quot;)\n    testImplementation(&quot;io.springfox:springfox-boot-starter:3.0.0&quot;)\n    testImplementation(&quot;io.springfox:springfox-swagger2:3.0.0&quot;)\n    testImplementation(&quot;io.springfox:springfox-swagger-ui:2.9.2&quot;)\n}\n</code></pre>\n<p>This seemed all fine and dandy to me, except for the fact I had to provide a version number to the <code>javax.persistence</code> in the authlib. I thought this would be handled automatically, but oh well. I then built the project and ran it, and it indeed gave me a version conflict:</p>\n<pre><code>Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n\nAn attempt was made to call a method that does not exist. The attempt was made from the following location:\n    org.hibernate.jpa.boot.internal.PersistenceUnitInfoDescriptor.getValidationMode(PersistenceUnitInfoDescriptor.java:88)\n\nThe following method did not exist:\n    javax.persistence.spi.PersistenceUnitInfo.getValidationMode()Ljavax/persistence/ValidationMode;\n\nThe method's class, javax.persistence.spi.PersistenceUnitInfo, is available from the following locations:\n    jar:file:/workspace/BOOT-INF/lib/persistence-api-1.0.2.jar!/javax/persistence/spi/PersistenceUnitInfo.class\n    jar:file:/workspace/BOOT-INF/lib/jakarta.persistence-api-2.2.3.jar!/javax/persistence/spi/PersistenceUnitInfo.class\n\nThe class hierarchy was loaded from the following locations:\n    javax.persistence.spi.PersistenceUnitInfo: file:/workspace/BOOT-INF/lib/persistence-api-1.0.2.jar\n\n</code></pre>\n<p>I understand that the problem lies in me basically including two different versions of the persistence api in my server project. However, I do not know how to fix this. Do I have to remove the dependency <code>javax.persistence</code> from my <code>implementation(project(&quot;:authlib&quot;))</code>? Or is there some other way to prevent this from happening?</p>\n<p>EDIT:</p>\n<p>I decided to try to include the exact version of the jakarta.persistence api in my <code>authlib</code> and that did something. However, the error indicates that the problem is unchanged and the persistence api is still present twice:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean\n with name 'entityManagerFactory' defined in class path resource \n[org/springframework/boot/autoconfigure/orm/jpa\n/HibernateJpaConfiguration.class]: Invocation of init method failed; nested \nexception is org.hibernate.AnnotationException: @OneToOne or @ManyToOne on \nnet.xxx.auth.entity.UserSession.user references an unknown entity: \nnet.xxx.authlib.entity.User\n\n</code></pre>\n"},{"last_activity_date":1684347936,"question_id":76274433,"body":"<p>My program needs to add files to a github repo. I've looked into JGit, but it's been extremely confusing. I just want to:\nGive the program the url of my repository.\nCreate a file with a certain name with some contents.\nCommit the file to the repository.</p>\n<p>How do I do this?! After tons of searching I thought you needed to clone the repository from github, then make your edits, then &quot;push&quot; it back to github. But I couldn't even get the clone command to work!</p>\n"},{"answers":[{"comments":[{"comment_id":131895393,"body":"Hi, thanks for the answer.  But unfortunately, I have tried all the level corrections and other hint parameters.  The result is still the same, I can&#39;t generate qr version 1. There is an online generator with the same result but after trying the same properties I still get NG result. <a href=\"https://www.morovia.com/free-online-barcode-generator/qrcode-maker.php\" rel=\"nofollow noreferrer\">morovia.com/free-online-barcode-generator/qrcode-maker.php</a>"}],"answer_id":74730965,"body":"<p>QR Codes have some redundancy built in to correct for damaged QR codes. When creating a QR code, you may choose the level of error correction. The higher the level, the more information must be included in the QR code for redundancy and thus the larger the QR code must be. It appears that the level of error correction in your reference is lower than in the QR code you created. You may want to have a look at <a href=\"https://stackoverflow.com/a/11968724/5736633\">this StackOverflow answer</a> to see how this can be specified in Z-Xing.</p>\n"},{"comments":[{"comment_id":131907002,"body":"Thank you sir, this is what I mean, I have done several ways but haven&#39;t found a way to do the compression in question, can you give an example maybe?"},{"comment_id":132004921,"body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/74737723/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"answer_id":74737723,"body":"<p>If I checked your expected QR Code have size 41x41 modules which is using version 6.\nThe version 6 have only one alignment pattern. Your data contains of 1244 bits and the version 6 only have maximum size 1,088 bits for mixed data bits with lower (L) error correction. So, the exception raised because your data is bigger than maximum capacity of QR Code in Version 6 below.\nThe most possible version for your data is version 7 that have 1,248 bits capacity with lower error correction. But this version have more than one alignment pattern.\nI suggest you to try to compress your data to lower your size of data.\n<a href=\"https://i.stack.imgur.com/YVrGQ.png\" rel=\"nofollow noreferrer\">Version 6 Size Description source: https://www.qrcode.com/en/about/version.html</a></p>\n"}],"last_activity_date":1684347425,"question_id":74729019,"body":"<p>I need to implement an old system that doesn't have source code.\nThe system prints labels with the following qrcode output: (QR version 6 41x41, <strong>alignment patterns</strong> only 1)</p>\n<p><a href=\"https://i.stack.imgur.com/9OJv0.png?s=128\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9OJv0.png?s=128\" alt=\"Version 1\" /></a></p>\n<p>I tried to make the program in Java using the Zxing library.\nHowever, the resulting output has different as with previous below: (QR version &gt;= 7,<strong>alignment patterns</strong> = 6)</p>\n<p><a href=\"https://i.stack.imgur.com/z1PTw.png?s=175\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z1PTw.png?s=175\" alt=\"Version 2\" /></a></p>\n<p>Even if both reading scanners will produce the same output and character length (154@char)</p>\n<pre><code>&quot;H 4A91K       BB7998  M11AU10406   CBU 4A91471     H 000160        69H 69578 00009Y000                            @N                                      &quot;\n</code></pre>\n<p>Maybe, it seems related to the qr lower version.\nI tried to make a lower qr.version but got the following error:</p>\n<pre><code>com.google.zxing.WriterException: Data too big for requested version\n    at com.google.zxing.qrcode.encoder.Encoder.encode(Encoder.java:123)\n    at com.google.zxing.qrcode.QRCodeWriter.encode(QRCodeWriter.java:78)\n</code></pre>\n<p>Can anyone help me how to make qrcode output same as version 1 (<strong>alignment patterns</strong> only 1) ?</p>\n<p>Thank you for your support.</p>\n"},{"answers":[{"comments":[{"comment_id":75323257,"body":"how to do reverse operation of the above like str=str.replace(&quot;\\&quot;,&quot;//&quot;);"},{"comment_id":75325016,"body":"@srinivasgowda if you mean you want to replace forward slashes with backslashes, just swap the parameters: <code>str = str.replace(&quot;&#47;&quot;, &quot;\\\\&quot;);</code>"},{"comment_id":75325481,"body":"No for single backward slash(&#41; to double forward slash(//)"},{"comment_id":75325728,"body":"@sri <code>str = str.replace(&quot;\\\\&quot;, &quot;&#47;&#47;&quot;);</code>"},{"comment_id":90946667,"body":"how to replace it globally"},{"comment_id":90947263,"body":"@Umashankar please read my answer: <code>replace()</code> replaces <b>all</b> occurrences - ie &quot;globally&quot;"}],"answer_id":6805035,"body":"<p>In java, use this:</p>\n\n<pre><code>str = str.replace(\"\\\\\", \"/\");\n</code></pre>\n\n<p>Note that the regex version of replace, ie <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29\" rel=\"noreferrer\"><code>replaceAll()</code></a>, is not required here; <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29\" rel=\"noreferrer\"><code>replace()</code></a> still replaces all occurrences of the search term, but it searches for <em>literal</em> Strings, not regex matches.</p>\n"},{"comments":[{"comment_id":8080047,"body":"You need to escape the backslash."}],"answer_id":6805045,"body":"<p>If you have:</p>\n\n<p><code>String s = \"c:\\\\upload\\\\date\\\\csv\\\\sample.csv\";</code></p>\n\n<p>In Java, you can just use:</p>\n\n<p><code>s = s.replace(\"\\\\\", \"/\");</code></p>\n\n<p>Which will make s equal to:</p>\n\n<p><code>c:/upload/date/csv/sample.csv</code></p>\n"},{"answer_id":6805072,"body":"<p>The String.replace(CharSequence, CharSequence) example provided by @PaulPRO and @Bohemian will work, but its better to use the String.replace(char, char) version. Slightly faster. Though you won't have a noticeable speed difference, its better to do such optimisations where possible.</p>\n\n<pre><code>String replacedStr = str.replace('\\\\', '/');\n</code></pre>\n"},{"answer_id":76275091,"body":"<p>For double back slash (&quot;\\\\&quot;)</p>\n<p>For Java you can use string.replaceAll(&quot;\\\\\\\\&quot;,&quot;/&quot;)</p>\n<p>&amp;</p>\n<p>For Kotlin you can use string.replace(&quot;\\\\\\\\&quot;.toRegex(),&quot;/&quot;)</p>\n"}],"last_activity_date":1684347353,"question_id":6805028,"body":"<p>I'm importing a CSV file to MySQL database. This can be done using <code>java.mysql</code> support for forward slash in file path. If user gives the path </p>\n\n<pre><code>c:\\upload\\date\\csv\\sample.csv\n</code></pre>\n\n<p>MySQL doesn't support this type of path pattern. I want to search for backslashes in the path and replace them with a forward slash, to give this:</p>\n\n<pre><code>  c:/upload/date/csv/sample.csv\n</code></pre>\n\n<p>How is that done?</p>\n"},{"comments":[{"comment_id":134508789,"body":"May sound silly but have you tried a global search <code>(?:type|data|reason)=(\\d+)</code> Or even <code>(?:(?&lt;=type=)|(?&lt;=data=)|(?&lt;=reason=))\\d+</code>"},{"comment_id":134509591,"body":"@sln that is similar to lemon&#39;s first suggestion, but I have a requirement of keeping the initial string in the regex <code>&#47;sometexthere&#47;moretexthere?</code>. unless you can improve on his answer and suggest a regex with an expression that is only in front of <code>&#47;sometexthere&#47;moretexthere?</code> , like the one I came up with in my question. if I am not being clear, I man a regex with the first part of the text without any expression - just literal text, and the right side of it only containing expression(s)"},{"comment_id":134521212,"body":"if <i><code>a requirement of keeping the initial string in the regex</code></i> then you&#39;re doing it the wrong way as seen here <a href=\"https://regex101.com/r/mlNDrf/1\" rel=\"nofollow noreferrer\">regex101.com/r/mlNDrf/1</a> .  In fact, the only way this can be done is using the <code>\\G</code> anchor <a href=\"https://regex101.com/r/hGacBg/1\" rel=\"nofollow noreferrer\">regex101.com/r/hGacBg/1</a> . And forget about using lookbehinds to only match <i>digits</i> in the group[0], not even possible. The best you can do is to only capture the digits. In my example I also captured the type. I give this a term called <i><code>regex span</code></i> It&#39;s unavoidable. If you want more explanation, ask, but I think you get the point."},{"comment_id":134530853,"body":"@sln it wouldn&#39;t be only to match digits. Although in the examples I used only digits, the capture group is actually <code>([0-9a-z:.%\\-]+)</code> so alphanumeric with colon, percentage, and minus sign. As I understand from your explanation then it would be better to just focus on the part after the static string I mentioned with a regex like the one you suggested. Issue with that is it would be part of validating a specific string that starts with that initial part, that&#39;s why I want to keep it in the regex. It&#39;s ok if what I want is not possible exactly, it&#39;s just a limitation of regex."},{"comment_id":134533366,"body":"I think if you had clicked the links and examined the regexs in the tester, as you were reading my comment you would understand. But you didn&#39;t which seems evident. The regex you think works is just an initial <i>Group</i> of alternations matching  <code>garbage?</code> or <code>&amp;</code>,  preceding another <i>Group</i> of alternations <code>type</code> or <code>data</code> or <code>reason</code> followed by some characters in a class. I assume your definition of static text means what, a text literal must exist before any of these groups can match ? Because <code>but I have a requirement of keeping the initial string</code> is <i>OPTIONAL</i> in the regex you think works."},{"comment_id":134533420,"body":"And fwiw, regex has no <i>limitation</i> for what you need it for using the Java 8 engine. There is no need for assertions to isolate what you would like to keep, that&#39;s what capture groups  are for."},{"comment_id":134536875,"body":"@sln I did click them at the time I replied, I understood I can&#39;t make it work just with a plain literal suffix like I hoped for, you even explained that was not possible. Doing the other way (your second link) ends up being the same as the other user&#39;s answer, and by that I mean it puts a regex at the suffix string thus going back to the same point you explained earlier. I did not ignore your examples, and I am sorry if it looked that way."},{"comment_id":134536883,"body":"And if I am still being kinda confusing by what I was trying to say, I mean a plain suffix with no regex, just literally <code>&#47;sometexthere&#47;moretexthere?</code> with absolutely no regex operators anywhere in that suffix, followed by whichever regex could work for my purpose. You explained it very well: <code>In fact, the only way this can be done is using the \\G anchor</code>"},{"comment_id":134536888,"body":"I believe at that point, since I can&#39;t make it happen exactly how I wanted, I would be better off checking if the string starts first with that suffix, and then do a match of the rest as a separate operation using the examples you and the other user provided."},{"comment_id":134550624,"body":"The general reality of regex&#39;s is that running separate ones means they are disconnected and are not related to each other in space-time. Its like a Picasso vs a da Vinci. One does not flow from the other, there is a discontinuity, it&#39;s the kind of logic that software engineers working for SpaceX use.. why they all crash. Using the <code>\\G</code> anchor insures the literal text exists before the other variables are matched. Continuous, one flows from the other. <a href=\"https://regex101.com/r/YfQWBC/1\" rel=\"nofollow noreferrer\">regex101.com/r/YfQWBC/1</a> vs <a href=\"https://regex101.com/r/G4jhCD/1\" rel=\"nofollow noreferrer\">regex101.com/r/G4jhCD/1</a>, both capture Group 1, both are natural."},{"comment_id":134550655,"body":"Note that since <code>\\G</code> is a continuous match, the text between the text to be matched can be <i>validated</i> to conform to the allowed characters. Note that SO has hundreds and hundreds examples of usage of the <code>\\G</code> anchor. Try to look at those."},{"comment_id":134553907,"body":"I&#39;ve been appreciating all the knowledge you&#39;ve been teaching me, and there is a lot of new stuff about regular expressions I didn&#39;t know about before - which I will definitely employ down the road now. Unfortunately for this specific case it doesn&#39;t work for me, I found that I was trying to over-simplify something that was in its foundation over-complicated. This exchange with you and the other user allowed me to understand that and work on a better strategy for what I was working with. I&#39;m still using the regex I learned, but in a far more effective way now thanks to all of your help!"}],"answers":[{"comments":[{"comment_id":134506530,"body":"Unfortunately I cannot use a plain word boundary or any string, I need the regex to also match that start of the string <code>&#47;sometexthere&#47;moretexthere</code> as well as explicitly state what kind of values/characters the values can be <code>([0-9a-z:.%\\-]+)</code> and I am not able to do that with your example, I tried replacing <code>\\b</code> and <code>\\d+</code> respectively but failed."},{"comment_id":134506540,"body":"Have you tried the updated regex?"},{"comment_id":134506556,"body":"I did after I replied, did not see the edit in time, but there is still the digits left - it&#39;s not just digits, it&#39;s a group of possible characters <code>([0-9a-z:.%\\-]+)</code> although I know I used only numbers in my examples, it can contain more than numbers. Also thanks for explaining each step of your suggestion, it really helps."},{"comment_id":134506570,"body":"Seems like just replacing <code>\\d+</code> with <code>([0-9a-z:.%\\-]+)</code> is enough, thanks! Could you update your answer with that change?"}],"answer_id":76274976,"body":"<p>If you know in advance that your string will be located after one of the three keywords &quot;type&quot;, &quot;data&quot; or &quot;reason&quot;, you can directly use them with lookarounds to catch your required numbers.</p>\n<pre><code>(?&lt;=(?:/sometexthere/moretexthere\\?|&amp;)\\b(?:type|data|reason)\\b=)([0-9a-z:.%\\-]+)\n</code></pre>\n<p>Regex Explanation:</p>\n<ul>\n<li><code>(?&lt;=(?:/sometexthere/moretexthere\\?|&amp;)\\b(?:type|data|reason)\\b=)</code>:  lookaround\n<ul>\n<li><code>(?:/sometexthere/moretexthere\\?|&amp;)</code>: non-capturing group with your path or &quot;&amp;&quot;</li>\n<li><code>\\b</code>: word boundary</li>\n<li><code>(?:type|data|reason)</code>: non-capturing group with one of the three words</li>\n<li><code>\\b</code>: word boundary</li>\n<li><code>=</code>: &quot;equals&quot; sign</li>\n</ul>\n</li>\n<li><code>([0-9a-z:.%\\-]+)</code>: your match</li>\n</ul>\n<p>Check the demo <a href=\"https://regex101.com/r/0bsdzk/1\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"last_activity_date":1684346973,"question_id":76274901,"body":"<p>Trying to understand how to come up with a regex that allows a capture group containing variations to match all of its variations found in a string.</p>\n<p>Example of the string as follows:</p>\n<p><code>/sometexthere/moretexthere?type=1234&amp;data=56357782&amp;noextract=6532</code></p>\n<p>Goal is to return <code>1234</code> and <code>56357782</code> but not <code>6532</code> using a pattern similar to the following, which is how far I was able to get:</p>\n<p><code>/sometexthere/moretexthere\\?(?:&amp;?(?:type|data|reason)=([0-9a-z:.%\\-]+)*)+</code></p>\n<p>Another example string would be</p>\n<p><code>/sometexthere/moretexthere?data=56357782&amp;noextract=6532&amp;type=1234</code></p>\n<p>And would return <code>56357782</code> and <code>1234</code> but not <code>6532</code></p>\n<p>And another example</p>\n<p><code>/sometexthere/moretexthere?reason=1234</code></p>\n<p>And would return <code>1234</code></p>\n<p>The goal is to return the value that is part of the <code>(type|data|reason)</code> variations, so whenever there is a type, data, or reason - regardless of their order - in the string it will return the value that is in front of each one of them, not just the first/last match it finds.</p>\n<p>Unfortunately the best regex I could come up with, exemplified above, is only returning the single last match of the string and not including any other matches before.</p>\n<p>Don't know if it can have any relevance, but this is meant to be used in Android Java/Kotlin.</p>\n"},{"answers":[{"answer_id":76273977,"body":"<p>That documentation seems a bit out of date as setPlsqlIndexTable is deprecated in ojdbc8.  I can confirm that the example in the documentation does not work, but if you have t_indices defined in a package, then you can use the setObject and createOracleArray method with OracleData.</p>\n<pre class=\"lang-sql prettyprint-override\"><code>    create or replace package pkg_test\n    as \n        type t_indices is table of pls_integer index by pls_integer;\n    end;\n</code></pre>\n<p>Then the call would go through something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>    void exampleCall() {\n\n        // set up connection\n\n        //inputs\n        int[] values = {1, 2, 3};\n  \n        // I'm assuming you'd probably just call a procedure instead of \n        // running an anonymous block, but idea is the same.\n        OracleCallableStatement procin = (OracleCallableStatement)\n          conn.prepareCall(&quot;declare \\n&quot; +\n                           &quot;a_indices   pkg_test.t_indices;\\n&quot; +\n                           &quot;begin\\n&quot; +\n                           &quot;  a_indices := ?;\\n&quot; +\n                           &quot;end;&quot;\n                          );\n\n        procin.setObject(1, (OracleData) arg0 -&gt; ((OracleConnection) arg0).createOracleArray(&quot;PKG_TEST.T_INDICES&quot;, values));\n\n        procin.execute();\n    }\n</code></pre>\n<p>I will note that with an associative array like this, converting from the array will mean using a zero-based index.  Instead, you could set up values as a <code>Map&lt;Integer, Integer&gt;</code> and have the keys line up with the usual one-based index.  And for associative arrays indexed by VARCHAR2(XX), then use <code>Map&lt;String, Integer&gt;</code> as your values.</p>\n<p>Here's the docs for more details\n<a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/19/jjdbc/Oracle-object-types.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/database/oracle/oracle-database/19/jjdbc/Oracle-object-types.html</a></p>\n"}],"last_activity_date":1684346612,"question_id":56634669,"body":"<p>When I try to pass a Java array of int to Oracle PLSQL, I get an exception. I use the example that is in the docs, but for me it's not working.</p>\n\n<p>I'm using JDK 1.8 and ojdbc8 to an Oracle 18 XE database.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>  @Test\n  void flush() {\n    try {\n      final Driver     oraDriver    = new OracleDriver();\n      System.out.println(\"Driver Major version is \"+oraDriver.getMajorVersion());\n      final Properties myProperties = new Properties();\n      myProperties.setProperty(\"user\", \"kafka\");\n      myProperties.setProperty(\"password\", \"kafka\");\n      Connection conn = oraDriver.connect(JDBC_URL, myProperties);\n      OracleCallableStatement procin = (OracleCallableStatement)\n          conn.prepareCall(\"declare type t_indices is table of pls_integer index by pls_integer;\\n\" +\n                           \"a_indices   t_indices;\\n\" +\n                           \"begin\\n\" +\n                           \"  a_indices := ?;\\n\" +\n                           \"end;\"\n                          );\n// Associative Array bind value\n      int[] values = {1, 2, 3};\n\n// maximum length of the Associative Array bind value. This\n// value defines the maximum possible \"currentLen\" for batch\n// updates. For standalone binds, \"maxLen\" should be the\n// same as \"currentLen\".\n      int maxLen = values.length;\n\n// actual size of the Associative Array bind value\n      int currentLen = values.length;\n\n// Associative Array element type\n      int elemSqlType = OracleTypes.NUMBER;\n\n// Associative Array element length in case the element type\n// is CHAR, VARCHAR or RAW. This value is ignored for other\n// types.\n      int elemMaxLen = 0;\n\n// set the value\n      procin.setPlsqlIndexTable(1, values,\n                                maxLen, currentLen,\n                                elemSqlType, elemMaxLen);\n\n// execute the call\n      procin.execute();\n    }\n    catch (Exception e) {\n      throw new ConnectException(e);\n    }\n  }\n</code></pre>\n\n<p>This is based on the example in, chapter \"Accessing PL/SQL Associative Arrays\". <a href=\"https://docs.oracle.com/database/121/JJDBC/oraint.htm#JJDBC28179\" rel=\"nofollow noreferrer\">https://docs.oracle.com/database/121/JJDBC/oraint.htm#JJDBC28179</a> .</p>\n\n<p>The output / error text is below. I expected no error. What is the solution?</p>\n\n<pre><code>C:\\Ls\\java\\jdk1.8.0\\bin\\java.exe ...\nDriver Major version is 18\n\norg.apache.kafka.connect.errors.ConnectException: java.sql.SQLException: ORA-06550: Regel 4, kolom 16:\nPLS-00382: Uitdrukking heeft onjuist type..\nORA-06550: Regel 4, kolom 3:\nPL/SQL: Statement ignored.\n\n\n    at nl.ave.kafka.connect.oracle.OracleBatchedOutputWriterTest.flush(OracleBatchedOutputWriterTest.java:230)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:675)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:117)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:185)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:181)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:128)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:135)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at java.util.ArrayList.forEach(ArrayList.java:1257)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at java.util.ArrayList.forEach(ArrayList.java:1257)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:229)\n    at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:197)\n    at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:211)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:191)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69)\n    at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\n    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\n    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\nCaused by: java.sql.SQLException: ORA-06550: Regel 4, kolom 16:\nPLS-00382: Uitdrukking heeft onjuist type..\nORA-06550: Regel 4, kolom 3:\nPL/SQL: Statement ignored.\n\n    at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:494)\n    at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:446)\n    at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1052)\n    at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:537)\n    at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:255)\n    at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:610)\n    at oracle.jdbc.driver.T4CCallableStatement.doOall8(T4CCallableStatement.java:249)\n    at oracle.jdbc.driver.T4CCallableStatement.doOall8(T4CCallableStatement.java:82)\n    at oracle.jdbc.driver.T4CCallableStatement.executeForRows(T4CCallableStatement.java:924)\n    at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1136)\n    at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3640)\n    at oracle.jdbc.driver.T4CCallableStatement.executeInternal(T4CCallableStatement.java:1318)\n    at oracle.jdbc.driver.OraclePreparedStatement.execute(OraclePreparedStatement.java:3752)\n    at oracle.jdbc.driver.OracleCallableStatement.execute(OracleCallableStatement.java:4242)\n    at oracle.jdbc.driver.OraclePreparedStatementWrapper.execute(OraclePreparedStatementWrapper.java:1079)\n    at nl.ave.kafka.connect.oracle.OracleBatchedOutputWriterTest.flush(OracleBatchedOutputWriterTest.java:227)\n    ... 51 more\nCaused by: Error : 6550, Position : 113, Sql = declare type t_indices is table of pls_integer index by pls_integer;\na_indices   t_indices;\nbegin\n  a_indices := :1 ;\nend;, OriginalSql = declare type t_indices is table of pls_integer index by pls_integer;\na_indices   t_indices;\nbegin\n  a_indices := ?;\nend;, Error Msg = ORA-06550: Regel 4, kolom 16:\nPLS-00382: Uitdrukking heeft onjuist type..\nORA-06550: Regel 4, kolom 3:\nPL/SQL: Statement ignored.\n\n    at oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:498)\n    ... 66 more\n\n\nProcess finished with exit code -1\n</code></pre>\n"},{"last_activity_date":1684346326,"question_id":76274732,"body":"<p>I write spring contract test and want to reuse controller tests. In super class init @MockBean field, i need to delete this mock in child class that functionality call real method and send request to contract mock. How do i do it?</p>\n<p>I try use <code>Mockito.reset(client)</code> but after this client return null and does not call real method.</p>\n<p>I try use <code>Mockito.mock(client, CALLS_REAL_METHODS)</code> this result same.</p>\n<p>I try use <code>when(client).thenCallRealMethod()</code> but this throws exception <code>(Cannot call abstract real method in java object)</code></p>\n"},{"comments":[{"comment_id":714856,"body":"You actually have to write a bit of code to do this, and the details depend on the format of the private key you are trying to import. What format is your key? Can you explain what tools you used to generate the key and certificate that you have?"},{"comment_id":104836551,"body":"For two-way SSL (client and server certificate) with Spring Boot see <a href=\"https://stackoverflow.com/a/59317888/548473\">stackoverflow.com/a/59317888/548473</a>"}],"answers":[{"comments":[{"comment_id":43167304,"body":"According to CoverosGene&#39;s answer keytool supports it since Java 6. This is the <a href=\"http://cunning.sharp.fm/2008/06/importing_private_keys_into_a.html\" rel=\"nofollow noreferrer\">link</a> he provided"},{"comment_id":58366055,"body":"For what it&#39;s worth, for all the noise on this subject, the best link is @Matej&#39;s &#39;workaround&#39; link to this 2008 post: <a href=\"http://cunning.sharp.fm/2008/06/importing_private_keys_into_a.html\" rel=\"nofollow noreferrer\">cunning.sharp.fm/2008/06/importing_private_keys_into_a.html</a>"},{"comment_id":65120351,"body":"KeyMan doesn&#39;t seem all that user-friendly to me."},{"comment_id":90493477,"body":"Broken link. Please include the details of the solution directly into the answer :-("}],"answer_id":907515,"body":"<p>Believe or not, keytool does not provide such basic functionality like importing private key to keystore. You can try this <a href=\"http://web.archive.org/web/20190426215445/http://cunning.sharp.fm/2008/06/importing_private_keys_into_a.html\" rel=\"noreferrer\">workaround</a> with merging PKSC12 file with private key to a keystore:</p>\n<pre><code>keytool -importkeystore \\\n  -deststorepass storepassword \\\n  -destkeypass keypassword \\\n  -destkeystore my-keystore.jks \\\n  -srckeystore cert-and-key.p12 \\\n  -srcstoretype PKCS12 \\\n  -srcstorepass p12password \\\n  -alias 1\n</code></pre>\n<p>Or just use more user-friendly <a href=\"https://www.ibm.com/developerworks/mydeveloperworks/groups/service/html/communityview?communityUuid=6fb00498-f6ea-4f65-bf0c-adc5bd0c5fcc\" rel=\"noreferrer\">KeyMan</a> from IBM for keystore handling instead of keytool.</p>\n"},{"answer_id":909345,"body":"<p>Yes, it's indeed a sad fact that keytool has no functionality to import a private key.</p>\n\n<p>For the record, at the end I went with the solution described <a href=\"https://web.archive.org/web/20160106102307/http://www.agentbob.info/agentbob/79-AB.html\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"comments":[{"comment_id":28022410,"body":"The answer by @reto contains the contents of this link."},{"comment_id":30523436,"body":"As stated by @Mafuba, you must still create a separate pkcs12 keystore with non-java tool like openssl - then this can be imported into a jks store by keytool as stated in the answer by reto."},{"comment_id":74566034,"body":"One thing that makes this a good answer is the fact that the input certs are clearly specified in the brackets."},{"comment_id":108151426,"body":"FWIW, the output of step 1 should already be usable as a Java keystore (so step 2 may not be required - unless you <i>do</i> need to import the cert+key into an <i>existing</i> keystore) - as already mentioned in a previous answer by @jaco0646"},{"comment_id":116686872,"body":"You may skip password in first step and set password in second step as &quot;&quot; i.e. -srcstorepass &quot;&quot;"}],"answer_id":2141229,"body":"<p>Keytool in Java 6 does have this capability: <a href=\"http://cunning.sharp.fm/2008/06/importing_private_keys_into_a.html\" rel=\"noreferrer\">Importing private keys into a Java keystore using keytool</a></p>\n\n<p>Here are the basic details from that post.</p>\n\n<ol>\n<li><p>Convert the existing cert to a PKCS12 using OpenSSL. A password is required when asked or the 2nd step will complain.</p>\n\n<pre><code>openssl pkcs12 -export -in [my_certificate.crt] -inkey [my_key.key] -out [keystore.p12] -name [new_alias] -CAfile [my_ca_bundle.crt] -caname root\n</code></pre></li>\n<li><p>Convert the PKCS12 to a Java Keystore File.</p>\n\n<pre><code>keytool -importkeystore -deststorepass [new_keystore_pass] -destkeypass [new_key_pass] -destkeystore [keystore.jks] -srckeystore [keystore.p12] -srcstoretype PKCS12 -srcstorepass [pass_used_in_p12_keystore] -alias [alias_used_in_p12_keystore]\n</code></pre></li>\n</ol>\n"},{"comments":[{"comment_id":14217345,"body":"Make sure you put a password on the p12 file - otherwise you&#39;ll get a null reference exception when you try to import it. (In case anyone else had this headache)"},{"comment_id":15218619,"body":"After creating my key and CSR with openssl, and then trying to make it work with Jetty, this did the trick. Many thinks!"},{"comment_id":20699468,"body":"In my case at step one the option <code>-CAfile ca.crt -caname root</code> didn&#39;t correctly output the CA certificates. Instead I used <code>-certfile concatenedCAFiles.pem</code>"},{"comment_id":28022376,"body":"Don&#39;t forget to use the <code>-chain</code> argument with openssl to include the full certificate chain in your pfx/p12 file if you want that in your key store."},{"comment_id":30006042,"body":"In a Windows environment, <code>pvk2pfx</code> (a standard VS tool available in the VS <code>cmd</code> prompt) will spit out a <code>.pfx</code>--equivalent to a <code>.p12</code>. @jocull&#39;s advice is still relevant; put a password on it. No <code>openssl</code> needed."},{"comment_id":30527874,"body":"Adding to openssl pkcs12 -chain comment by @Mufaba. Trust-chain certificates are missing from &quot;keytool -list&quot; unless you use the <i>verbose</i> option like &quot;keytool -list -v ...&quot; This was confusing me because keytool said only one certificate imported and -list was not showing my chain until I added -v to it. With -v you will see &quot;Certificate chain length: #&quot; <i>AND</i> &quot;Certificate[#]&quot;. Note that -caname is unnecessary because JKS chain ignores alias for trust-chain."},{"comment_id":36369005,"body":"I get the following error: keytool error: java.lang.Exception: Alias &lt;...&gt; does not exist"},{"comment_id":36895998,"body":"@JonTirsen: did you use the same alias in both calls (I used <code>some-alias</code> in the example)? If you did: could you please create a pastebin/gist listing of all steps and their full output."},{"comment_id":41018032,"body":"For Tomcat in particular it&#39;s imperative that the <b>keystore</b> and the <b>key</b> passwords are same. When you import a <code>.p12</code> the key will have the password of the original <code>.p12.</code> Tomcat will fail with <code>java.security.UnrecoverableKeyException: Cannot recover key</code>.    In other words: if you need to execute <code>-deststorepass changeit -srcstorepass some-password</code> with <b>different</b> passwords, then you <b>must</b> include <code>-destkeypass changeit</code> (with same password as <code>-deststorepass</code>)"},{"comment_id":44490224,"body":"Lifesaver about the REQUIREMENT to use deststorepass and destkeypass  parameters. For those of us that hate passing passwords into the command string for all to see/archive, not a way around it this time I guess."},{"comment_id":44549110,"body":"If you end up with the error message &quot;Error unable to get local issuer certificate getting chain.&quot; while using the <code>-chain</code> option, you need to import the CA Root and maybe also the CA Intermediate Certficates like described here: <a href=\"http://gagravarr.org/writing/openssl-certs/others.shtml#ca-openssl\" rel=\"nofollow noreferrer\">gagravarr.org/writing/openssl-certs/others.shtml#ca-openssl</a> into the openssl Certficate folder"},{"comment_id":62400075,"body":"@Nicholi for all -*pass you can add &quot;:file [file]&quot; and not put password on command line, i.e. -deststorepass:file .kp"},{"comment_id":73532738,"body":"Great answer! In my case there were 2 CA&#39;s in the chain so I needed to merge the CA&#39;s pem files in one and that to the -CAfile parameter (toghether with -chain)"},{"comment_id":89412820,"body":"The <code>p12</code> file produced by <code>openssl</code> is already a Java keystore. Step 2 simply merges this new keystore into an existing one, which is only necessary if you <i>have</i> an existing (old) keystore. Am I missing something here?"},{"comment_id":97054569,"body":"@reto, Do you know why i running the one step and did not happen anythings, this is a long execution?"},{"comment_id":97068730,"body":"@GavrielCohen the command should complete immediately. You probably forgot -in or -inkey and the system is assuming you want to paste that part via stdin. Check your command carefully. Maybe you are also forgetting an &#39;\\&#39; at the end of a line."},{"comment_id":97940373,"body":"Here is the pkcs12 creation with passwords: <code>openssl pkcs12 -export -in server.crt -inkey server.key                -out server.p12 -name [some-alias]                -passin pass:some-password -passout pass:some-password                -CAfile ca.crt -caname root</code>"},{"comment_id":101597485,"body":"Suggesting it is important to add a password on the keystore while not adding it in the command makes things rather confusing."},{"comment_id":103439117,"body":"For me it was important to use the full chain in PEM format as input file for the openssl command (-in server.crt). This means to concatenate CA certificate, personal certificate, private key in a single file (the format with `-----BEGIN CERTIFICATE-----&#39;...) and use it in place of &quot;server.crt&quot;. This allowed me to obtain a jks file with the complete certificate chain (i.e. &quot;Certificate chain length: 2&quot;)"},{"comment_id":104836613,"body":"Thanks! I&#39;ve get valid keystore at step 1,  so step 2 was redudant for me. Here is full  description <a href=\"https://stackoverflow.com/a/59317888/548473\">stackoverflow.com/a/59317888/548473</a>"},{"comment_id":116685600,"body":"You do not need password on source p12 file. You can pass empty password to keytool program just add parameter -srcstorepass &quot;&quot;."},{"comment_id":133150040,"body":"If you get: <code>Error unable to get issuer certificate getting chain.</code> make sure you have the full chain: root + intermediate + your-cert. You can download the root and intermediate certificates from the Certificate Authority web site."}],"answer_id":8224863,"body":"<p>I used the following two steps which I found in the comments/posts linked in the other answers:</p>\n<p><strong>Step one: Convert the x.509 cert and key to a pkcs12 file</strong></p>\n<pre><code>openssl pkcs12 -export -in server.crt -inkey server.key \\\n               -out server.p12 -name [some-alias] \\\n               -CAfile ca.crt -caname root\n</code></pre>\n<p><strong>Note:</strong> Make sure you put a password on the pkcs12 file - otherwise you'll get a null pointer exception when you try to import it. (In case anyone else had this headache). (<strong>Thanks  jocull!</strong>)</p>\n<p><strong>Note 2:</strong> You might want to add the <code>-chain</code> option to preserve the full certificate chain. (<strong>Thanks Mafuba</strong>)</p>\n<p><strong>Step two: Convert the pkcs12 file to a Java keystore</strong></p>\n<pre><code>keytool -importkeystore \\\n        -deststorepass [changeit] -destkeypass [changeit] -destkeystore server.keystore \\\n        -srckeystore server.p12 -srcstoretype PKCS12 -srcstorepass some-password \\\n        -alias [some-alias]\n</code></pre>\n<p><strong>Finished</strong></p>\n<p><strong>OPTIONAL Step zero: Create self-signed certificate</strong></p>\n<pre><code>openssl genrsa -out server.key 2048\nopenssl req -new -out server.csr -key server.key\nopenssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt\n</code></pre>\n<p><strong>FAQ: I get error <code>IOException: keystore password was incorrect</code></strong></p>\n<p>If you are using OpenSSL 3.0 and a JDK newer than Java8u302 and get the following error:</p>\n<pre><code>keytool error: java.io.IOException: keystore password was incorrect\n</code></pre>\n<p>You might caught in a change pf default cypher within openssl. <a href=\"https://stackoverflow.com/a/72501767/102200\">This Stack Overflow Answer</a> provides an answer. Maybe thank Thomas with an upvote.</p>\n"},{"comments":[{"comment_id":40116518,"body":"However, Bruno mentioned that this hostname verifier is wrong: &quot;Your hostname verifier is wrong, session.getPeerHost() doesn&#39;t return the name in the certificate, but the name you connected with (i.e. the urlHostName here), so that&#39;s always going to be true. You&#39;re always returning true anyway. –  Bruno&quot;.  It worked for me though, but I would appreciate if somebody shows me how to write a good host name verifier."},{"comment_id":40116814,"body":"Of course it will &quot;work&quot; for you, since it will never produce an error, even when it should. Leave the default hostname verifier used by <code>HttpsURLConnection</code> instead of trying to writing your own. (Another problem with your example is that you&#39;re using the same keystore as a keystore and a truststore, which isn&#39;t always a good idea...)"}],"answer_id":25670408,"body":"<p>In my case I had a pem file which contained two certificates and an encrypted private key to be used in mutual SSL authentication.\nSo my pem file looked like this:</p>\n\n<pre><code>-----BEGIN CERTIFICATE-----\n...\n-----END CERTIFICATE-----\n-----BEGIN RSA PRIVATE KEY-----\nProc-Type: 4,ENCRYPTED\nDEK-Info: DES-EDE3-CBC,C8BF220FC76AA5F9\n...\n-----END RSA PRIVATE KEY-----\n-----BEGIN CERTIFICATE-----\n...\n-----END CERTIFICATE-----\n</code></pre>\n\n<p>Here is what I did:</p>\n\n<p>Split the file into three separate files, so that each one contains just one entry, \nstarting with \"---BEGIN..\" and ending with \"---END..\" lines. Lets assume we now have three files: cert1.pem cert2.pem and pkey.pem</p>\n\n<p>Convert pkey.pem into DER format using openssl and the following syntax:</p>\n\n<p><code>openssl pkcs8 -topk8 -nocrypt -in pkey.pem -inform PEM -out pkey.der -outform DER</code></p>\n\n<p>Note, that if the private key is encrypted you need to supply a password( obtain it from the supplier of the original pem file )\nto convert to DER format, \nopenssl will ask you for the password like this: \"enter a pass phraze for pkey.pem: \"\nIf conversion is successful, you will get a new file called \"pkey.der\"</p>\n\n<p>Create a new java key store and import the private key and the certificates:</p>\n\n<pre><code>String keypass = \"password\";  // this is a new password, you need to come up with to protect your java key store file\nString defaultalias = \"importkey\";\nKeyStore ks = KeyStore.getInstance(\"JKS\", \"SUN\");\n\n// this section does not make much sense to me, \n// but I will leave it intact as this is how it was in the original example I found on internet:   \nks.load( null, keypass.toCharArray());\nks.store( new FileOutputStream ( \"mykeystore\"  ), keypass.toCharArray());\nks.load( new FileInputStream ( \"mykeystore\" ),    keypass.toCharArray());\n// end of section..\n\n\n// read the key file from disk and create a PrivateKey\n\nFileInputStream fis = new FileInputStream(\"pkey.der\");\nDataInputStream dis = new DataInputStream(fis);\nbyte[] bytes = new byte[dis.available()];\ndis.readFully(bytes);\nByteArrayInputStream bais = new ByteArrayInputStream(bytes);\n\nbyte[] key = new byte[bais.available()];\nKeyFactory kf = KeyFactory.getInstance(\"RSA\");\nbais.read(key, 0, bais.available());\nbais.close();\n\nPKCS8EncodedKeySpec keysp = new PKCS8EncodedKeySpec ( key );\nPrivateKey ff = kf.generatePrivate (keysp);\n\n\n// read the certificates from the files and load them into the key store:\n\nCollection  col_crt1 = CertificateFactory.getInstance(\"X509\").generateCertificates(new FileInputStream(\"cert1.pem\"));\nCollection  col_crt2 = CertificateFactory.getInstance(\"X509\").generateCertificates(new FileInputStream(\"cert2.pem\"));\n\nCertificate crt1 = (Certificate) col_crt1.iterator().next();\nCertificate crt2 = (Certificate) col_crt2.iterator().next();\nCertificate[] chain = new Certificate[] { crt1, crt2 };\n\nString alias1 = ((X509Certificate) crt1).getSubjectX500Principal().getName();\nString alias2 = ((X509Certificate) crt2).getSubjectX500Principal().getName();\n\nks.setCertificateEntry(alias1, crt1);\nks.setCertificateEntry(alias2, crt2);\n\n// store the private key\nks.setKeyEntry(defaultalias, ff, keypass.toCharArray(), chain );\n\n// save the key store to a file         \nks.store(new FileOutputStream ( \"mykeystore\" ),keypass.toCharArray());\n</code></pre>\n\n<p>(optional) Verify the content of your new key store:</p>\n\n<p><code>keytool -list -keystore mykeystore -storepass password</code></p>\n\n<blockquote>\n  <p>Keystore type: JKS Keystore provider: SUN</p>\n  \n  <p>Your keystore contains 3 entries</p>\n  \n  <p>cn=...,ou=...,o=.., Sep 2, 2014, trustedCertEntry, Certificate\n  fingerprint (SHA1): 2C:B8: ...</p>\n  \n  <p>importkey, Sep 2, 2014, PrivateKeyEntry, Certificate fingerprint\n  (SHA1): 9C:B0: ...</p>\n  \n  <p>cn=...,o=...., Sep 2, 2014, trustedCertEntry, Certificate fingerprint\n  (SHA1): 83:63: ...</p>\n</blockquote>\n\n<p>(optional) Test your certificates and private key from your new key store against your SSL server:\n( You may want to enable debugging as an VM option:  -Djavax.net.debug=all )</p>\n\n<pre><code>        char[] passw = \"password\".toCharArray();\n        KeyStore ks = KeyStore.getInstance(\"JKS\", \"SUN\");\n        ks.load(new FileInputStream ( \"mykeystore\" ), passw );\n\n        KeyManagerFactory kmf = KeyManagerFactory.getInstance(\"SunX509\");\n        kmf.init(ks, passw);\n\n        TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\n        tmf.init(ks);\n        TrustManager[] tm = tmf.getTrustManagers();\n\n        SSLContext sclx = SSLContext.getInstance(\"TLS\");\n        sclx.init( kmf.getKeyManagers(), tm, null);\n\n        SSLSocketFactory factory = sclx.getSocketFactory();\n        SSLSocket socket = (SSLSocket) factory.createSocket( \"192.168.1.111\", 443 );\n        socket.startHandshake();\n\n        //if no exceptions are thrown in the startHandshake method, then everything is fine..\n</code></pre>\n\n<p>Finally register your certificates with    HttpsURLConnection if plan to use it:</p>\n\n<pre><code>        char[] passw = \"password\".toCharArray();\n        KeyStore ks = KeyStore.getInstance(\"JKS\", \"SUN\");\n        ks.load(new FileInputStream ( \"mykeystore\" ), passw );\n\n        KeyManagerFactory kmf = KeyManagerFactory.getInstance(\"SunX509\");\n        kmf.init(ks, passw);\n\n        TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());\n        tmf.init(ks);\n        TrustManager[] tm = tmf.getTrustManagers();\n\n        SSLContext sclx = SSLContext.getInstance(\"TLS\");\n        sclx.init( kmf.getKeyManagers(), tm, null);\n\n        HostnameVerifier hv = new HostnameVerifier()\n        {\n            public boolean verify(String urlHostName, SSLSession session)\n            {\n                if (!urlHostName.equalsIgnoreCase(session.getPeerHost()))\n                {\n                    System.out.println(\"Warning: URL host '\" + urlHostName + \"' is different to SSLSession host '\" + session.getPeerHost() + \"'.\");\n                }\n                return true;\n            }\n        };\n\n        HttpsURLConnection.setDefaultSSLSocketFactory( sclx.getSocketFactory() );\n        HttpsURLConnection.setDefaultHostnameVerifier(hv);\n</code></pre>\n"},{"comments":[{"comment_id":116044926,"body":"I like this script because it takes care of the complete ecosystem, especially how to handle the intermediate CA cert. Other answers, while very helpful in handling the leaf cert and the corresponding private key, doesn&#39;t spell out how to handle the intermediate CA cert."}],"answer_id":31664724,"body":"<p>And one more:</p>\n\n<pre><code>#!/bin/bash\n\n# We have:\n#\n# 1) $KEY : Secret key in PEM format (\"-----BEGIN RSA PRIVATE KEY-----\") \n# 2) $LEAFCERT : Certificate for secret key obtained from some\n#    certification outfit, also in PEM format (\"-----BEGIN CERTIFICATE-----\")   \n# 3) $CHAINCERT : Intermediate certificate linking $LEAFCERT to a trusted\n#    Self-Signed Root CA Certificate \n#\n# We want to create a fresh Java \"keystore\" $TARGET_KEYSTORE with the\n# password $TARGET_STOREPW, to be used by Tomcat for HTTPS Connector.\n#\n# The keystore must contain: $KEY, $LEAFCERT, $CHAINCERT\n# The Self-Signed Root CA Certificate is obtained by Tomcat from the\n# JDK's truststore in /etc/pki/java/cacerts\n\n# The non-APR HTTPS connector (APR uses OpenSSL-like configuration, much\n# easier than this) in server.xml looks like this \n# (See: https://tomcat.apache.org/tomcat-6.0-doc/ssl-howto.html):\n#\n#  &lt;Connector port=\"8443\" protocol=\"org.apache.coyote.http11.Http11Protocol\"\n#                SSLEnabled=\"true\"\n#                maxThreads=\"150\" scheme=\"https\" secure=\"true\"\n#                clientAuth=\"false\" sslProtocol=\"TLS\"\n#                keystoreFile=\"/etc/tomcat6/etl-web.keystore.jks\"\n#                keystorePass=\"changeit\" /&gt;\n#\n\n# Let's roll:    \n\nTARGET_KEYSTORE=/etc/tomcat6/foo-server.keystore.jks\nTARGET_STOREPW=changeit\n\nTLS=/etc/pki/tls\n\nKEY=$TLS/private/httpd/foo-server.example.com.key\nLEAFCERT=$TLS/certs/httpd/foo-server.example.com.pem\nCHAINCERT=$TLS/certs/httpd/chain.cert.pem\n\n# ----\n# Create PKCS#12 file to import using keytool later\n# ----\n\n# From https://www.sslshopper.com/ssl-converter.html:\n# The PKCS#12 or PFX format is a binary format for storing the server certificate,\n# any intermediate certificates, and the private key in one encryptable file. PFX\n# files usually have extensions such as .pfx and .p12. PFX files are typically used \n# on Windows machines to import and export certificates and private keys.\n\nTMPPW=$$ # Some random password\n\nPKCS12FILE=`mktemp`\n\nif [[ $? != 0 ]]; then\n  echo \"Creation of temporary PKCS12 file failed -- exiting\" &gt;&amp;2; exit 1\nfi\n\nTRANSITFILE=`mktemp`\n\nif [[ $? != 0 ]]; then\n  echo \"Creation of temporary transit file failed -- exiting\" &gt;&amp;2; exit 1\nfi\n\ncat \"$KEY\" \"$LEAFCERT\" &gt; \"$TRANSITFILE\"\n\nopenssl pkcs12 -export -passout \"pass:$TMPPW\" -in \"$TRANSITFILE\" -name etl-web &gt; \"$PKCS12FILE\"\n\n/bin/rm \"$TRANSITFILE\"\n\n# Print out result for fun! Bug in doc (I think): \"-pass \" arg does not work, need \"-passin\"\n\nopenssl pkcs12 -passin \"pass:$TMPPW\" -passout \"pass:$TMPPW\" -in \"$PKCS12FILE\" -info\n\n# ----\n# Import contents of PKCS12FILE into a Java keystore. WTF, Sun, what were you thinking?\n# ----\n\nif [[ -f \"$TARGET_KEYSTORE\" ]]; then\n  /bin/rm \"$TARGET_KEYSTORE\"\nfi\n\nkeytool -importkeystore \\\n   -deststorepass  \"$TARGET_STOREPW\" \\\n   -destkeypass    \"$TARGET_STOREPW\" \\\n   -destkeystore   \"$TARGET_KEYSTORE\" \\\n   -srckeystore    \"$PKCS12FILE\" \\\n   -srcstoretype  PKCS12 \\\n   -srcstorepass  \"$TMPPW\" \\\n   -alias foo-the-server\n\n/bin/rm \"$PKCS12FILE\"\n\n# ----\n# Import the chain certificate. This works empirically, it is not at all clear from the doc whether this is correct\n# ----\n\necho \"Importing chain\"\n\nTT=-trustcacerts\n\nkeytool -import $TT -storepass \"$TARGET_STOREPW\" -file \"$CHAINCERT\" -keystore \"$TARGET_KEYSTORE\" -alias chain\n\n# ----\n# Print contents\n# ----\n\necho \"Listing result\"\n\nkeytool -list -storepass \"$TARGET_STOREPW\" -keystore \"$TARGET_KEYSTORE\"\n</code></pre>\n"},{"comments":[{"comment_id":59186431,"body":"Just linking to your own library (or utility) is not a good answer. Linking to it, explaining why it solves the problem, providing code using it to do so and disclaiming makes for a better answer. See: <a href=\"//meta.stackexchange.com/questions/94022/\">How can I link to an external resource in a community-friendly way?</a>"},{"comment_id":59232431,"body":"Not sure what you mean by &quot;disclaim&quot;, but I added an example."},{"comment_id":59235607,"body":"Great! That&#39;s a canned comment, so part didn&#39;t apply - disclaim means to report your affiliation with the linked product or service, which you did with &quot;I put together...&quot;"}],"answer_id":35756294,"body":"<p>Previous answers point out correctly that you can only do this with the standard JDK tools by converting the JKS file into PKCS #12 format first.  If you're interested, I put together a compact utility to import OpenSSL-derived keys into a JKS-formatted keystore without having to convert the keystore to PKCS #12 first: <a href=\"http://commandlinefanatic.com/cgi-bin/showarticle.cgi?article=art049\" rel=\"nofollow\">http://commandlinefanatic.com/cgi-bin/showarticle.cgi?article=art049</a></p>\n\n<p>You would use the linked utility like this:</p>\n\n<pre><code>$ openssl req -x509 -newkey rsa:2048 -keyout localhost.key -out localhost.csr -subj \"/CN=localhost\"\n</code></pre>\n\n<p>(sign the CSR, get back localhost.cer)</p>\n\n<pre><code>$ openssl rsa -in localhost.key -out localhost.rsa\nEnter pass phrase for localhost.key:\nwriting RSA key\n$ java -classpath . KeyImport -keyFile localhost.rsa -alias localhost -certificateFile localhost.cer -keystore localhost.jks -keystorePassword changeit -keystoreType JKS -keyPassword changeit\n</code></pre>\n"},{"answer_id":38375992,"body":"<p>You can use these steps to import the key to an existing keystore. The instructions are combined from answers in this thread and other sites. These instructions worked for me (the java keystore):  </p>\n\n<ol>\n<li>Run </li>\n</ol>\n\n<p><code>openssl pkcs12 -export -in yourserver.crt -inkey yourkey.key -out server.p12 -name somename -certfile yourca.crt -caname root</code></p>\n\n<p>(If required put the -chain option. Putting that failed for me).\nThis will ask for the password - you must give the correct password else you will get an error\n(heading error or padding error etc).  </p>\n\n<ol start=\"2\">\n<li>It will ask you to enter a new password - you must enter a password here - enter anything but remember it. (Let us assume you enter Aragorn).  </li>\n<li>This will create the server.p12 file in the pkcs format.  </li>\n<li>Now to import it into the <code>*.jks</code> file run:<br>\n<code>\nkeytool -importkeystore -srckeystore server.p12 -srcstoretype PKCS12\n-destkeystore yourexistingjavakeystore.jks -deststoretype JKS -deststorepass existingjavastorepassword -destkeypass existingjavastorepassword\n</code><br>\n(Very important  - do not leave out the deststorepass and the destkeypass parameters.)  </li>\n<li>It will ask you for the src key store password. Enter Aragorn and hit enter.\nThe certificate and key is now imported into your existing java keystore.  </li>\n</ol>\n"},{"answer_id":41132539,"body":"<p>Based on the answers above, here is how to create a brand new keystore for your java based web server, out of an independently created Comodo cert and private key using keytool (requires JDK 1.6+)</p>\n\n<ol>\n<li><p>Issue this command and at the password prompt enter somepass - 'server.crt' is your server's cert and 'server.key' is the private key you used for issuing the CSR:<code>\nopenssl pkcs12 -export -in server.crt -inkey server.key -out server.p12 -name www.yourdomain.com -CAfile AddTrustExternalCARoot.crt -caname \"AddTrust External CA Root\"</code></p></li>\n<li><p>Then use keytool to convert the p12 keystore into a jks keystore:<code>\nkeytool -importkeystore -deststorepass somepass -destkeypass somepass -destkeystore keystore.jks -srckeystore server.p12 -srcstoretype PKCS12 -srcstorepass somepass</code></p></li>\n</ol>\n\n<p>Then import the other two root/intermediate certs you received from Comodo:</p>\n\n<ol start=\"3\">\n<li><p>Import COMODORSAAddTrustCA.crt:<code>\nkeytool -import -trustcacerts -alias cert1 -file COMODORSAAddTrustCA.crt -keystore keystore.jks</code>    </p></li>\n<li><p>Import COMODORSADomainValidationSecureServerCA.crt:<code>\nkeytool -import -trustcacerts -alias cert2 -file COMODORSADomainValidationSecureServerCA.crt -keystore keystore.jks</code></p></li>\n</ol>\n"},{"answer_id":44302747,"body":"<p>First convert to p12:</p>\n\n<pre><code>openssl pkcs12 -export -in [filename-certificate] -inkey [filename-key] -name [host] -out [filename-new-PKCS-12.p12]\n</code></pre>\n\n<p>Create new JKS from p12:</p>\n\n<pre><code>keytool -importkeystore -deststorepass [password] -destkeystore [filename-new-keystore.jks] -srckeystore [filename-new-PKCS-12.p12] -srcstoretype PKCS12\n</code></pre>\n"},{"answer_id":53989618,"body":"<p>Just make a PKCS12 keystore, Java can use it directly now. In fact, if you list a Java-style keystore, keytool itself alerts you to the fact that PKCS12 is now the preferred format.</p>\n\n<pre><code>openssl pkcs12 -export -in server.crt -inkey server.key \\\n               -out server.p12 -name [some-alias] \\\n               -CAfile ca.crt -caname root -chain\n</code></pre>\n\n<p>You should have received all three files (server.crt, server.key, ca.crt) from your certificate provider. I am not sure what \"-caname root\" actually means, but it seems to have to be specified that way.</p>\n\n<p>In the Java code, make sure to specify the right keystore type.</p>\n\n<pre><code>KeyStore.getInstance(\"PKCS12\")\n</code></pre>\n\n<p>I got my comodo.com-issued SSL certificate working fine in NanoHTTPD this way.</p>\n"},{"answer_id":54208558,"body":"<p>If you have a PEM file (e.g. <code>server.pem</code>) containing:</p>\n\n<ul>\n<li>the trusted certificate</li>\n<li>the private key</li>\n</ul>\n\n<p>then you can import the certificate and key into a JKS keystore like this:</p>\n\n<p><strong>1</strong>) Copy the private key from the PEM file into an ascii file (e.g. <code>server.key</code>)</p>\n\n<p><strong>2</strong>) Copy the cert from the PEM file into an ascii file (e.g. <code>server.crt</code>)</p>\n\n<p><strong>3</strong>) Export the cert and key into a PKCS12 file:</p>\n\n<pre><code>$ openssl pkcs12 -export -in server.crt -inkey server.key \\\n                 -out server.p12 -name [some-alias] -CAfile server.pem -caname root\n</code></pre>\n\n<ul>\n<li><strong>the PEM file can be used as the argument to the <code>-CAfile</code> option</strong>.</li>\n<li>you are prompted for an 'export' password.</li>\n<li>if doing this in git bash then add <code>winpty</code> to the start of the command so the export password can be entered.</li>\n</ul>\n\n<p><strong>4</strong>) Convert the PKCS12 file to a JKS keystore:</p>\n\n<pre><code>$ keytool -importkeystore -deststorepass changeit -destkeypass changeit \\\n          -destkeystore keystore.jks  -srckeystore server.p12 -srcstoretype PKCS12 \\\n          -srcstorepass changeit\n</code></pre>\n\n<ul>\n<li>the <code>srcstorepass</code> password should match the export password from step 3)</li>\n</ul>\n"},{"comments":[{"comment_id":130799509,"body":"Step 1 was all I needed for a 1and1.com / ionos.com cert which provided a private key along with both root and intermediate certs."}],"answer_id":55220360,"body":"<p>What I was trying to achieve was using already provided private key and certificate to sign message that was going someplace that needed to make sure that the message was coming from me (private keys sign while public keys encrypt).</p>\n\n<p>So if you already have a .key file and a .crt file?</p>\n\n<p>Try this:</p>\n\n<p><strong>Step1:</strong> Convert the key and cert to .p12 file</p>\n\n<pre><code>openssl pkcs12 -export -in certificate.crt -inkey privateKey.key -name alias -out yourconvertedfile.p12\n</code></pre>\n\n<p><strong>Step 2:</strong> Import the key and create a .jsk file with a single command</p>\n\n<pre><code>keytool -importkeystore -deststorepass changeit -destkeystore keystore.jks -srckeystore umeme.p12 -srcstoretype PKCS12\n</code></pre>\n\n<p><strong>Step 3:</strong> In your java:</p>\n\n<pre><code>char[] keyPassword = \"changeit\".toCharArray();\n\nKeyStore keyStore = KeyStore.getInstance(\"JKS\");\nInputStream keyStoreData = new FileInputStream(\"keystore.jks\");\n\nkeyStore.load(keyStoreData, keyPassword);\nKeyStore.ProtectionParameter entryPassword = new KeyStore.PasswordProtection(keyPassword);\nKeyStore.PrivateKeyEntry privateKeyEntry = (KeyStore.PrivateKeyEntry)keyStore.getEntry(\"alias\", entryPassword);\n\nSystem.out.println(privateKeyEntry.toString());\n</code></pre>\n\n<p>If you need to sign some string using this key do the following:</p>\n\n<p>Step 1: Convert the text you want to encrypt</p>\n\n<pre><code>byte[] data = \"test\".getBytes(\"UTF8\");\n</code></pre>\n\n<p>Step 2: Get base64 encoded private key</p>\n\n<pre><code>keyStore.load(keyStoreData, keyPassword);\n\n//get cert, pubkey and private key from the store by alias\nCertificate cert = keyStore.getCertificate(\"localhost\");\nPublicKey publicKey = cert.getPublicKey();\nKeyPair keyPair = new KeyPair(publicKey, (PrivateKey) key);\n\n//sign with this alg\nSignature sig = Signature.getInstance(\"SHA1WithRSA\");\nsig.initSign(keyPair.getPrivate());\nsig.update(data);\nbyte[] signatureBytes = sig.sign();\nSystem.out.println(\"Signature:\" + Base64.getEncoder().encodeToString(signatureBytes));\n\nsig.initVerify(keyPair.getPublic());\nsig.update(data);\n\nSystem.out.println(sig.verify(signatureBytes));\n</code></pre>\n\n<p><em>References:</em></p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/906402/how-to-import-an-existing-x509-certificate-and-private-key-in-java-keystore-to-u\">How to import an existing x509 certificate and private key in Java keystore to use in SSL?</a></li>\n<li><a href=\"http://tutorials.jenkov.com/java-cryptography/keystore.html\" rel=\"noreferrer\">http://tutorials.jenkov.com/java-cryptography/keystore.html</a></li>\n<li><a href=\"http://www.java2s.com/Code/Java/Security/RetrievingaKeyPairfromaKeyStore.htm\" rel=\"noreferrer\">http://www.java2s.com/Code/Java/Security/RetrievingaKeyPairfromaKeyStore.htm</a></li>\n<li><a href=\"https://stackoverflow.com/questions/7224626/how-to-sign-string-with-private-key\">How to sign string with private key</a></li>\n</ol>\n\n<p><strong>Final program</strong></p>\n\n<pre><code>public static void main(String[] args) throws Exception {\n\n    byte[] data = \"test\".getBytes(\"UTF8\");\n\n    // load keystore\n    char[] keyPassword = \"changeit\".toCharArray();\n\n    KeyStore keyStore = KeyStore.getInstance(\"JKS\");\n    //System.getProperty(\"user.dir\") + \"\" &lt; for a file in particular path \n    InputStream keyStoreData = new FileInputStream(\"keystore.jks\");\n    keyStore.load(keyStoreData, keyPassword);\n\n    Key key = keyStore.getKey(\"localhost\", keyPassword);\n\n    Certificate cert = keyStore.getCertificate(\"localhost\");\n\n    PublicKey publicKey = cert.getPublicKey();\n\n    KeyPair keyPair = new KeyPair(publicKey, (PrivateKey) key);\n\n    Signature sig = Signature.getInstance(\"SHA1WithRSA\");\n\n    sig.initSign(keyPair.getPrivate());\n    sig.update(data);\n    byte[] signatureBytes = sig.sign();\n    System.out.println(\"Signature:\" + Base64.getEncoder().encodeToString(signatureBytes));\n\n    sig.initVerify(keyPair.getPublic());\n    sig.update(data);\n\n    System.out.println(sig.verify(signatureBytes));\n}\n</code></pre>\n"},{"answer_id":55270701,"body":"<p>in a case of Elliptic Curve and answer the question <em>import an existing x509 certificate and private key in Java keystore</em>, you may want to have a look also to this thread <a href=\"https://stackhttps://stackoverflow.com/a/55269325/3785184\" rel=\"nofollow noreferrer\">How to read EC Private key in java which is in .pem file format</a></p>\n"},{"comments":[{"comment_id":128718707,"body":"I created and installed a LetsEncrypt SSL onto Tomcat, thanks to this."}],"answer_id":56666663,"body":"<h1>Using Let's Encrypt certificates</h1>\n<p>Assuming you've created your certificates and private keys with <a href=\"https://letsencrypt.org/\" rel=\"nofollow noreferrer\">Let's Encrypt</a> in <code>/etc/letsencrypt/live/you.com</code>:</p>\n<h2>1. Create a <a href=\"https://en.wikipedia.org/wiki/PKCS_12\" rel=\"nofollow noreferrer\">PKCS #12</a> file</h2>\n<pre><code>openssl pkcs12 -export -in fullchain.pem -inkey privkey.pem -out pkcs.p12 \\\n        -name letsencrypt\n</code></pre>\n<p>This combines your SSL certificate <code>fullchain.pem</code> and your private key <code>privkey.pem</code> into a single file, <code>pkcs.p12</code>.</p>\n<p>You'll be prompted for a password for <code>pkcs.p12</code>.</p>\n<p>The <code>export</code> option specifies that a PKCS #12 file will be created rather than parsed (according to <a href=\"https://linux.die.net/man/1/pkcs12\" rel=\"nofollow noreferrer\">the manual</a>).</p>\n<h2>2. Create the Java keystore</h2>\n<pre><code>keytool -importkeystore -destkeystore keystore.jks -srckeystore pkcs.p12 \\\n        -srcstoretype PKCS12 -alias letsencrypt\n</code></pre>\n<p>If <code>keystore.jks</code> doesn't exist, it will be created containing the <code>pkcs.12</code> from the previous step. Otherwise, you'll import <code>pkcs.12</code> into the existing keystore.</p>\n<hr />\n<p>These instructions are derived from the <a href=\"https://web.archive.org/web/20191231103924/https://maximilian-boehm.com/en-gb/blog/create-a-java-keystore-jks-from-lets-encrypt-certificates-1884000/\" rel=\"nofollow noreferrer\">blog post</a> &quot;Create a Java Keystore (.JKS) from Let's Encrypt Certificates&quot; by Maximilian Böhm.</p>\n<p><a href=\"https://certbot.eff.org/docs/using.html#where-are-my-certificates\" rel=\"nofollow noreferrer\">Here's more</a> on the different kind of files in <code>/etc/letsencrypt/live/you.com/</code>.</p>\n"},{"answer_id":68123071,"body":"<p>If you have received a combined cert and key in a single .pem file, like the MongoDB Atlas' authentication, then,</p>\n<p>Open the <code>pem</code> file with a text editor and split them into two files, for example <code>cert.pem</code> and <code>key.pem</code> (where you can make a split is very clear in the file) and then use the <code>openssl</code> command to create a single p12 format file like this:</p>\n<pre><code> openssl pkcs12 -export -out server.p12 -name test\\\n -in cert.pem -inkey key.pem\n</code></pre>\n<p>I am using Java 8 and as it turns out at least in Java 8 or later the resulting p12 (<code>server.p12</code>) is now the keystore file so you can use it directly without a need to use the <code>keytool</code> if you do not need to add any more certs to it.</p>\n"}],"last_activity_date":1684345973,"question_id":906402,"body":"<p>I have this in an ActiveMQ config:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;sslContext&gt;\n        &lt;sslContext keyStore=\"file:/home/alex/work/amq/broker.ks\"  \n keyStorePassword=\"password\" trustStore=\"file:${activemq.base}/conf/broker.ts\" \n trustStorePassword=\"password\"/&gt;\n&lt;/sslContext&gt;\n</code></pre>\n\n<p>I have a pair of X.509 cert and a key file.</p>\n\n<p>How do I import those two in order to use them in SSL and SSL+stomp connectors? All examples I could google always generate the key themselves, but I already have a key.</p>\n\n<p>I have tried</p>\n\n<pre><code>keytool -import  -keystore ./broker.ks -file mycert.crt\n</code></pre>\n\n<p>but this only imports the certificate and not the key file and results in</p>\n\n<pre><code>2009-05-25 13:16:24,270 [localhost:61612] ERROR TransportConnector - Could not accept connection : No available certificate or key corresponds to the SSL cipher suites which are enabled.\n</code></pre>\n\n<p>I have tried concatenating the cert and the key but got the same result.</p>\n\n<p>How do I import the key?</p>\n"},{"comments":[{"comment_id":134500671,"body":"Can you try running without Docker? Do you have the same issue?"},{"comment_id":134500688,"body":"I don&#39;t understand why you&#39;re using <code>RUN bash -c &#39;touch &#47;parallel.jar&#39;</code>. What are you aiming for?"}],"answers":[{"comments":[{"comment_id":134515270,"body":"Thanks for the suggestion, I created a jar file using <code>shadowJar</code>. I am able to run the jar file in my system but when I try to run it in the container getting an error <code>Error: Unable to access jarfile parallel.jar io.confluent.developer.ParallelConsumerApplication</code> docker last line is <code>ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;parallel.jar io.confluent.developer.ParallelConsumerApplication&quot;]</code>"},{"comment_id":134522369,"body":"I think you meant <code>&quot;parallel.jar&quot;, &quot;...&quot;]</code> (separate arguments)? But also, <code>java -jar</code> command doesn&#39;t accept a classname , only a JAR file. Anything afterwards is passed as a plain string into <code>String[] args</code> of the JAR&#39;s own <code>MainClass</code>... Plus, you seem to have ignored my recommendation to use Jib and not write a Dockerfile at all"},{"comment_id":134525693,"body":"I will be taking a look at the Jib as well. It&#39;s just that I was already using the ShadowJar to create the jar file so though of using it to create the docker image. In my local once the jar is created I run the jar by passing the class like this <code>java -cp build&#47;libs&#47;paralelConsumer.jar io.confluent.developer.ParallelConsumerApplication</code> where <code>io.confluent.developer.ParallelConsumerApplication</code> is the class which contains the main function if I don&#39;t mention the main class I get the error <code>no main manifest attribute</code>. So while creating the jar where can I mention about the main class"},{"comment_id":134529863,"body":"The main class should be an option in the shadowJar config in your grade file. <code>java -cp</code> takes a class name, yes. <code>java -jar</code> does not"}],"answer_id":76274929,"body":"<p>Gradle doesn't include dependencies, by default. You'd get the same error when running <code>java jar</code> outside of the container.</p>\n<p>You need to use shadow plugin to get dependencies packaged in your JAR.</p>\n<p>Alternatively, don't write a Dockerfile manually... Use <code>jib-gradle-plugin</code>. Plus, it'll create a more optimized Docker image, which doesn't create an Uber JAR like the shadow plugin would.</p>\n"}],"last_activity_date":1684345964,"question_id":76271198,"body":"<p>I am getting an error while running a docker image. I have created a core java application using gradle.</p>\n<p>using <code>docker build</code> command to create the docker image and while running the docker image I am getting the following error</p>\n<pre><code>Error: A JNI error has occurred, please check your installation and try again\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/kafka/clients/consumer/Consumer\n        at java.lang.Class.getDeclaredMethods0(Native Method)\n        at java.lang.Class.privateGetDeclaredMethods(Class.java:2701)\n        at java.lang.Class.privateGetMethodRecursive(Class.java:3048)\n        at java.lang.Class.getMethod0(Class.java:3018)\n        at java.lang.Class.getMethod(Class.java:1784)\n        at sun.launcher.LauncherHelper.validateMainClass(LauncherHelper.java:650)\n        at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:632)\nCaused by: java.lang.ClassNotFoundException: org.apache.kafka.clients.consumer.Consumer\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:387)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n        ... 7 more\n</code></pre>\n<p>I can see that the error is due to missing kafka consumer library, but I am not able to understand what I have missed in the docker file which is causing this issue.</p>\n<p>Here is the dockerfile</p>\n<pre><code>FROM openjdk:8\nADD build/libs/*.jar parallel.jar\n\nRUN bash -c 'touch /parallel.jar'\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;parallel.jar&quot;]\n</code></pre>\n<p>Before I ran the <code>docker build</code> command, I made sure to run the <code>gradle clean build</code> command.</p>\n<p>Here are the dependencies I have used in <code>build.gradle</code></p>\n<pre><code>    implementation &quot;io.confluent.parallelconsumer:parallel-consumer-core:0.5.2.4&quot;\n    implementation &quot;org.apache.avro:avro:1.11.1&quot;\n    implementation &quot;io.confluent:kafka-avro-serializer:3.3.0&quot;\n    implementation &quot;org.springframework.boot:spring-boot-starter-web&quot;\n    implementation &quot;org.codehaus.jackson:jackson-core-asl:1.9.13&quot;\n    implementation &quot;org.codehaus.jackson:jackson-mapper-asl:1.9.13&quot;\n    implementation &quot;org.apache.commons:commons-lang3:3.12.0&quot;\n    implementation &quot;org.slf4j:slf4j-simple:2.0.0&quot;\n    implementation &quot;me.tongfei:progressbar:0.9.3&quot;\n    implementation 'org.awaitility:awaitility:4.2.0'\n    implementation(&quot;log4j:log4j:1.2.17&quot;)\n</code></pre>\n"},{"comments":[{"comment_id":134485025,"body":"What queries does it fire ? Can you provide a bit more information ?"},{"comment_id":134485053,"body":"<code>userRepository.findById(userId)</code> should only execute 1 query - something like <code>SELECT * FROM table WHERE id = userId</code>."},{"comment_id":134485089,"body":"please update question with query logs."},{"comment_id":134485411,"body":"<code>findById</code> isn&#39;t the problem, your mapping is the problem and the fact that you are using <code>Lombok</code>. Don&#39;t use Lombok with entities that only results in trouble. Write your own proper equals/hashcode method as well as toString. THe one generated by Lombok is wrong for JPA usage. I would suggest you start with that and see if it improves, how to write a proper equals/hashCode for JPA can be found <a href=\"https://vladmihalcea.com/the-best-way-to-implement-equals-hashcode-and-tostring-with-jpa-and-hibernate/\" rel=\"nofollow noreferrer\">here</a>. If you want to use lombok only use <code>@Getter</code>/<code>@Setter</code> but not <code>@Data</code>."},{"comment_id":134490932,"body":"Please provide the generated SQL and <code>SHOW CREATE TABLE</code>."},{"comment_id":134506363,"body":"Please show the code that is using this (so the controller, service etc.)."}],"answers":[{"comments":[{"comment_id":134505557,"body":"I have made the changes that you showed me but it is still firing so many queries when I try issueRepository.findById(issueId). Logs are like 2023-05-17T22:21:00.421+05:30 DEBUG 72248 --- [nio-8080-exec-3] org.hibernate.SQL                        : select i1_0.id,i1_0.community_id,i1_0.date_created,i1_0.description&zwnj;&#8203;,i1_0.is_open,i1_0.t&zwnj;&#8203;itle,i1_0.user_id from issue i1_0 org.hibernate.SQL                       : select u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.passw&zwnj;&#8203;ord,u1_0.role from user u1_0 where u1_0.id=? so many more"},{"comment_id":134506330,"body":"Did you also include the <code>toString</code> and did it for all entities? Make sure you aren&#39;t logging the entities if you haven&#39; overridden the <code>toString</code>. That being said if you are using this <code>User</code> directly in your controller it will serialize all the fields and thus lazy load all the other fields as well. Finally I would probably remove all the not needed collections from the user, or at least make them uni-directional (so remove them from the <code>User</code>) instead of bi-directional. Why would the user need to access the comments, issues etc. etc. directly, you can query them if needed!"}],"answer_id":76262778,"body":"<p>First stop using <code>@Data</code> (or better Lombok all together) with JPA entities. When using <code>@Data</code> it will generate an <code>equals</code>/<code>hashCode</code>/<code>toString</code> method including all collections (which are lazy) in your entity. (I wrote <a href=\"https://deinum.biz/2019-02-13-Lombok-Data-Ojects-Arent-Entities/\" rel=\"nofollow noreferrer\">a blog</a> about it about 4 years ago and yet we still haven't learned).</p>\n<p>Those <code>hashCode</code> and <code>equals</code> method are important as those are used to determine if an object is already in the cache or not. Now to calculate the <code>hashCode</code> what do you think will happen.... Exactly queries, queries and some more queries.</p>\n<p>I would suggest to create a <code>BaseEntity</code> which include a regular <code>hashCode</code>, <code>equals</code> and basic <code>toString</code> method. Then let all your entities extend this base class.</p>\n<p>Next replace the <code>@Data</code> with only <code>@Getter</code>/<code>@Setter</code> to generate the getters/setters.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@MappedSuperclass\n@Getter\npublic abstract BaseEntity {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.AUTO)\n  private Long id;\n\n  @Override\n  public int hashCode() {\n    return getClass().hashCode();\n  }\n  \n  @Override\n  public boolean equals(Object o) {\n    if (this == o) return true;\n \n    if (getClass().isInstance(o) &amp;&amp; o instanceof BaseEntity other) {\n      return this.id != null &amp;&amp; Objects.equals(this.id, other.id);\n    }\n    return false;\n  }\n\n  @Override\n  public String toString() {\n    return String.format(&quot;%s [id=%d]&quot;, getClass().getSimpleName(), this.id);\n  }  \n}\n</code></pre>\n<p>Now for example let your <code>Comment</code> class extend this and drop the usage of <code>@Data</code>.</p>\n<pre><code>@AllArgsConstructor\n@Getter\n@Setter\n@Entity\n@NoArgsConstructor\n@Table(name = &quot;comment&quot;)\npublic class Comment extends BaseEntity {\n\n    private String content;\n\n    @ManyToOne\n    private User user;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;issue_id&quot;)\n    private Issue issue;\n\n    private LocalDate dateCreated;\n}\n</code></pre>\n<p>This should already reduce the number of queries that are being issued. Another optimization you could do is to use bytecode enhancements to lazy load the <code>Issue</code> in the <code>Comment</code> (the sample ofcourse applies to other fields that can be lazy loaded). But this requires bytecode enhancements.</p>\n"}],"last_activity_date":1684345689,"question_id":76262339,"body":"<p>I am developing REST application using spring boot and I am trying to optimize the performance of the queries. I am currently using findById from the repositories which is causing performance issues. Code is given below:</p>\n<p>User Entity</p>\n<pre><code>@AllArgsConstructor\n@NoArgsConstructor\n@Data\n@Builder\n@Entity\n@Table(name=&quot;user&quot;, uniqueConstraints = @UniqueConstraint(columnNames = &quot;email&quot;))\n@JsonIgnoreProperties({&quot;comments&quot;})\npublic class User implements UserDetails {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n\n    @NotEmpty(message = &quot;first name should not be empty&quot;)\n    @Column(name = &quot;first_name&quot;)\n    private String firstName;\n\n    @NotEmpty(message = &quot;last name should not be empty&quot;)\n    @Column(name = &quot;last_name&quot;)\n    private String lastName;\n\n    @Email(message = &quot;Not a valid email&quot;)\n    private String email;\n\n    @NotEmpty\n//    @Pattern(regexp = &quot;^(?=.*[a-z])(?=.*[A-Z])(?=.*\\\\d)(?=.*[#$@!%&amp;*?])[A-Za-z\\\\d#$@!%&amp;*?]{8,}$&quot;,\n//            message =&quot;1 Uppercase, 1 Lowercase, 1 special character, 1 number, Min 8 characters &quot;)\n    @Size(min = 8, message = &quot;password should have at least 8 characters&quot;)\n    private String password;\n\n    @Enumerated(EnumType.STRING)\n    private Role role;\n\n    @OneToMany(mappedBy = &quot;user&quot;,\n            cascade = CascadeType.ALL)\n    private Set&lt;Comment&gt; comments = new HashSet&lt;&gt;();\n\n    @ManyToMany(mappedBy = &quot;assignees&quot;)\n    private Set&lt;Issue&gt; issues = new HashSet&lt;&gt;();\n\n    @ManyToMany(mappedBy = &quot;voters&quot;)\n    private Set&lt;Issue&gt; votedIssues = new HashSet&lt;&gt;();\n\n    @ManyToMany(mappedBy = &quot;members&quot;)\n    private Set&lt;Community&gt; communities = new HashSet&lt;&gt;();\n\n    @ManyToMany(mappedBy = &quot;requestingMembers&quot;)\n    private Set&lt;Community&gt; requestedCommunities = new HashSet&lt;&gt;();\n\n    @OneToMany(mappedBy = &quot;admin&quot;, cascade = CascadeType.ALL)\n    private Set&lt;Community&gt; communitiesCreated = new HashSet&lt;&gt;();\n\n    @Override\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        return List.of(new SimpleGrantedAuthority(role.name()));\n    }\n\n    @Override\n    public String getUsername() {\n        return email;\n    }\n\n    @Override\n    public boolean isAccountNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isAccountNonLocked() {\n        return true;\n    }\n\n    @Override\n    public boolean isCredentialsNonExpired() {\n        return true;\n    }\n\n    @Override\n    public boolean isEnabled() {\n        return true;\n    }\n}\n</code></pre>\n<p>Issue Entity</p>\n<pre><code>@AllArgsConstructor\n@Data\n@Entity\n@NoArgsConstructor\n@Table(name=&quot;issue&quot;)\npublic class Issue {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String title;\n    private String description;\n    private LocalDate dateCreated;\n    private boolean isOpen;\n\n    @ManyToOne\n    private User user;\n\n    @OneToMany(mappedBy = &quot;issue&quot;, cascade = CascadeType.ALL)\n    private List&lt;Comment&gt; comments = new ArrayList&lt;&gt;();\n\n    @ManyToMany(cascade = CascadeType.ALL)\n    private List&lt;User&gt; voters = new ArrayList&lt;&gt;();\n\n    @ManyToMany(cascade = CascadeType.ALL)\n    private List&lt;User&gt; assignees = new ArrayList&lt;&gt;();\n\n    @ManyToOne\n    @JoinColumn(name = &quot;community_id&quot;)\n    private Community community;\n\n}\n</code></pre>\n<p>Comment Entity</p>\n<pre><code>\n@AllArgsConstructor\n@Data\n@Entity\n@NoArgsConstructor\n@Table(name = &quot;comment&quot;)\npublic class Comment {\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String content;\n\n    @ManyToOne\n    private User user;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;issue_id&quot;)\n    private Issue issue;\n\n    private LocalDate dateCreated;\n}\n</code></pre>\n<p>Role Enum</p>\n<pre><code>public enum Role {\n    CUSTOMER(&quot;CUSTOMER&quot;),\n    EXPERT(&quot;EXPERT&quot;),\n    ADMIN(&quot;ADMIN&quot;);\n\n    private String role;\n\n    Role(String role) {\n        this.role = role;\n    }\n\n    public String getRoleName() {\n        return role;\n    }\n}\n</code></pre>\n<p>When I do a userRepository.findById(userId) there are so many select queries being fired. I am looking for a way to optimize the queries so that findById produces result in less queries. Currenlty it is making so many queries just for one api request for example :</p>\n<pre><code>2023-05-16T16:21:48.837+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from user u1_0 where u1_0.id=?\n2023-05-16T16:21:48.911+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\n2023-05-16T16:21:48.921+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.927+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.930+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\n2023-05-16T16:21:48.932+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\n2023-05-16T16:21:48.933+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\n2023-05-16T16:21:48.936+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\n2023-05-16T16:21:48.937+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\n2023-05-16T16:21:48.938+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select m1_0.communities_id,m1_1.id,m1_1.email,m1_1.first_name,m1_1.last_name,m1_1.password,m1_1.role from community_members m1_0 join user m1_1 on m1_1.id=m1_0.members_id where m1_0.communities_id=?\n2023-05-16T16:21:48.938+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.940+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.941+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\n2023-05-16T16:21:48.942+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\n2023-05-16T16:21:48.943+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\n2023-05-16T16:21:48.944+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\n2023-05-16T16:21:48.945+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select m1_0.communities_id,m1_1.id,m1_1.email,m1_1.first_name,m1_1.last_name,m1_1.password,m1_1.role from community_members m1_0 join user m1_1 on m1_1.id=m1_0.members_id where m1_0.communities_id=?\n2023-05-16T16:21:48.945+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\n2023-05-16T16:21:48.946+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.community_id,i1_0.id,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue i1_0 left join user u1_0 on u1_0.id=i1_0.user_id where i1_0.community_id=?\n2023-05-16T16:21:48.947+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\n2023-05-16T16:21:48.947+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\n2023-05-16T16:21:48.948+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.949+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\n2023-05-16T16:21:48.950+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\n2023-05-16T16:21:48.951+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\n2023-05-16T16:21:48.951+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\n2023-05-16T16:21:48.952+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=?\n2023-05-16T16:21:48.953+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.content,c1_0.date_created,i1_0.id,c2_0.id,c2_0.user_id,c2_0.description,c2_0.name,i1_0.date_created,i1_0.description,i1_0.is_open,i1_0.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from comment c1_0 left join issue i1_0 on i1_0.id=c1_0.issue_id left join community c2_0 on c2_0.id=i1_0.community_id left join user u1_0 on u1_0.id=i1_0.user_id where c1_0.user_id=?\n2023-05-16T16:21:48.953+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select i1_0.assignees_id,i1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,i1_1.date_created,i1_1.description,i1_1.is_open,i1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_assignees i1_0 join issue i1_1 on i1_1.id=i1_0.issues_id left join community c1_0 on c1_0.id=i1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=i1_1.user_id where i1_0.assignees_id=?\n2023-05-16T16:21:48.954+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select v1_0.voters_id,v1_1.id,c1_0.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_0.description,c1_0.name,v1_1.date_created,v1_1.description,v1_1.is_open,v1_1.title,u1_0.id,u1_0.email,u1_0.first_name,u1_0.last_name,u1_0.password,u1_0.role from issue_voters v1_0 join issue v1_1 on v1_1.id=v1_0.voted_issues_id left join community c1_0 on c1_0.id=v1_1.community_id left join user a1_0 on a1_0.id=c1_0.user_id left join user u1_0 on u1_0.id=v1_1.user_id where v1_0.voters_id=?\n2023-05-16T16:21:48.954+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.members_id,c1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,c1_1.description,c1_1.name from community_members c1_0 join community c1_1 on c1_1.id=c1_0.communities_id left join user a1_0 on a1_0.id=c1_1.user_id where c1_0.members_id=?\n2023-05-16T16:21:48.955+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select r1_0.requesting_members_id,r1_1.id,a1_0.id,a1_0.email,a1_0.first_name,a1_0.last_name,a1_0.password,a1_0.role,r1_1.description,r1_1.name from community_requesting_members r1_0 join community r1_1 on r1_1.id=r1_0.requested_communities_id left join user a1_0 on a1_0.id=r1_1.user_id where r1_0.requesting_members_id=?\n2023-05-16T16:21:48.955+05:30 DEBUG 63236 --- [nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.user_id,c1_0.id,c1_0.description,c1_0.name from community c1_0 where c1_0.user_id=? \n</code></pre>\n<p><strong>I am expecting just one or two select queries.</strong></p>\n"},{"comments":[{"comment_id":134506276,"body":"What is IEntityDataSaver and how is it related to ClientPlayerEntity?"}],"last_activity_date":1684345654,"question_id":76079357,"body":"<p>here is the project repository: <a href=\"https://github.com/magistr-of-code/New-Story\" rel=\"nofollow noreferrer\">https://github.com/magistr-of-code/New-Story</a></p>\n<p>If you run a project you have errors but only on login to the world.</p>\n<p>The main error is here:</p>\n<blockquote>\n<p>java.lang.ClassCastException: class\nnet.minecraft.client.network.ClientPlayerEntity cannot be<br />\ncast to class net.mds.newstory.util.IEntityDataSaver\n(net.minecraft.client.network.ClientPlayerEntity and\nnet.mds.newstory.util.IEntityDataSaver are in unnamed module of loader\nnet.fabricmc.loader.impl.launch.knot.KnotClassLoader</p>\n</blockquote>\n<p>I have tried watching this tutorial <a href=\"https://www.youtube.com/watch?v=GBWhBx7e19I&amp;list=PLKGarocXCE1EeLZggaXPJaARxnAbUD8Y_&amp;index=16\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=GBWhBx7e19I&amp;list=PLKGarocXCE1EeLZggaXPJaARxnAbUD8Y_&amp;index=16</a></p>\n"},{"answers":[{"comments":[{"comment_id":134532059,"body":"Ah got it, thanks a bunch! Sadly cannot give you any points for the answer, so this will suffice and I will focus on that when programming :D"}],"answer_id":76274875,"body":"<p>You can't make a 2-block-tall block. You have to make two separate blocks or block states - one for the top and one for the bottom.</p>\n<p>For example, the game only calls your block's <code>canReplace</code> function when <em>your block</em> is replaced. It doesn't call it if the player replaces the air block on top of your block because that's not your block. So you have to put one of your blocks in that spot and not try to pretend there's one when there isn't.</p>\n<p>Your block has a GUI, so it probably has a bunch of tile entity data. You will find it convenient to pick one half (e.g. the bottom) to store the data, and make the top one be a completely boring block that, when you right-click it, acts like you right-clicked the bottom one instead. And if one half sees that the other half is missing, it breaks.</p>\n"}],"last_activity_date":1684345514,"question_id":76138601,"body":"<p>Thank you for any help in advance and sorry if this way to simple.</p>\n<p>Versioning: MC 1.19.3, Fabric\nJSON is either a singular one for 2 Tall Block or a Top and Bottom Half</p>\n<p>So i want to create a GUI displaying Block, which is 2 Blocks tall. I got the Collision working, but it's still rendering only and not interactable/eats Blocks when placed from above.</p>\n<p>I have read about Custom Entities and or Tiling (Like with doors), but nothing for something simple like my issue.</p>\n<p>My current working Class looks as follows and works for the bottom Block. I am using the singular JSON currently.</p>\n<pre><code>public class VendingMachineBlock extends Block {\n    private static final VoxelShape SHAPE = Block.createCuboidShape(0, 0, 0, 16, 32, 16);\n\n    public VendingMachineBlock() {\n        super(Settings.of(Material.METAL)\n                .nonOpaque()\n                .strength(4.0f)\n                .requiresTool()\n                .sounds(BlockSoundGroup.METAL)\n        );\n    }\n\n    public VoxelShape getOutlineShape(BlockState state, BlockView world, BlockPos pos, ShapeContext context) {\n        return SHAPE;\n    }\n\n    public VoxelShape getCollisionShape(BlockState state, BlockView world, BlockPos pos, ShapeContext context) {\n        return SHAPE;\n    }\n\n    @Override\n    public boolean canReplace(BlockState state, ItemPlacementContext context) {\n        BlockPos pos = context.getBlockPos();\n        if (context.getWorld().getBlockState(pos.down()).isOf(this)) {\n            // Prevent block placement in the top part of the VendingMachineBlock\n            return false;\n        }\n        return super.canReplace(state, context);\n    }\n\n    @Override\n    public ActionResult onUse(BlockState state, World world, BlockPos pos, PlayerEntity player, Hand hand, BlockHitResult hit) {\n        double relativeHitY = hit.getPos().y - pos.getY();\n        if (relativeHitY &gt; 0.5 || relativeHitY &lt; 0) {\n            // Player is interacting with the top or bottom part of the VendingMachineBlock\n            if (!world.isClient) {\n                player.sendMessage(Text.of(&quot;Hello, world!&quot;), false);\n            }\n            return ActionResult.SUCCESS;\n        }\n        return super.onUse(state, world, pos, player, hand, hit);\n    }\n}\n</code></pre>\n<p>I have looked at various videos and even asked Bing AI to find resources for me, but neither the official Docs nor the videos have shown a solution for this &quot;simple&quot; issue. Most of what i have found were dynamic animations of floating blocks above, or far outdated stuff.</p>\n<p>Thanks again for reading and sorry if i am just unknowledged. Just trying to get startet with Java and MC Modding again.</p>\n<p>All the best,\nCap</p>\n"},{"comments":[{"comment_id":126906088,"body":"why you insert <code>XHeaderAuthenticationFilter</code> one time using <code>FilterRegistrationBean</code> and another time using <code>addFilterBefore</code>?"},{"comment_id":126906118,"body":"@hatefalipoor I&#39;ve included the beans. I have added using FilterRegistrationBean because the filter was getting called multiple times."}],"answers":[{"answer_id":71814175,"body":"<p>The way you register <code>XHeaderAuthenticationFilter</code> in <code>FilterRegistrationBean</code> causes the problem because you yourself create the <code>XHeaderAuthenticationFilter</code> with <code>new</code> not <code>Spring</code> with all resolving DI stuff. change your code like:</p>\n<pre><code>@Autowired\nXHeaderAuthenticationFilter xHeaderAuthenticationFilter;\n\n@Bean\npublic FilterRegistrationBean filterRegistrationBean() {\n    FilterRegistrationBean registrationBean = new FilterRegistrationBean();\n    registrationBean.setFilter(xHeaderAuthenticationFilter);\n    return registrationBean;\n}\n</code></pre>\n<p>Same applies if you want to register <code>XHeaderAuthenticationFilter</code> using <code>addFilterBefore</code></p>\n"},{"comments":[{"comment_id":134506387,"body":"If you want to do injection they need to be a bean, there is one thing you need to take care of (and this is mentioned in the documentation as well, but who reads that) that you need a <code>FilterRegistrationBean</code> if you use this only in your security filter chain."},{"comment_id":134506572,"body":"ahh so you would define a filterregistrationbean and add filters there, map them to urls without needing to call addFilter in the filterchain?"},{"comment_id":134506731,"body":"No. You would disable them with the <code>FilterRegistationBean</code> so that they don&#39;t get added to the regular filter chain. It is just the other way around."}],"answer_id":76274861,"body":"<p>I don't know whether this will be relevant to you but I would avoid making your onceperrequest filters a bean.</p>\n<p>We had a problem which took us one week to figure out that for multiple security configurations which are mapped to specific antMatchers, adding a bean filter to one security chain would also trigger the filter in another security chain. Even with with the addFilter line commented! We never called addFilter in our code yet this filter was still picked up.</p>\n"}],"last_activity_date":1684345454,"question_id":71813844,"body":"<p>I'm not being able to inject beans into my <code>OncePerRequestFilter</code>. Here's the <code>XHeaderAuthenticationFilter</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Component\npublic class XHeaderAuthenticationFilter extends OncePerRequestFilter {\n\n  public XHeaderAuthenticationFilter() {\n    SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);\n  }\n\n  @Autowired private JwtUtils jwtUtils; // null\n  @Autowired private UserService userService; // null\n\n  @Override\n  @SneakyThrows\n  protected void doFilterInternal(\n      HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) {\n\n    String path = request.getRequestURI();\n    if (new AntPathMatcher().match(&quot;/getToken&quot;, path)\n        || HttpMethod.OPTIONS.name().equalsIgnoreCase(request.getMethod())) {\n      filterChain.doFilter(request, response);\n      return;\n    }\n\n    String jwt = parseJwt(request);\n    jwtUtils.validateJwtToken(jwt); // NullPointerException here\n\n    // ...\n\n    filterChain.doFilter(request, response);\n  }\n}\n\n</code></pre>\n<p>And here the registration part:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Bean\n  public FilterRegistrationBean filterRegistrationBean() {\n    FilterRegistrationBean registrationBean = new FilterRegistrationBean();\n    registrationBean.setFilter(new XHeaderAuthenticationFilter());\n    registrationBean.setEnabled(false);\n    return registrationBean;\n  }\n</code></pre>\n<p>I set <code>enabled</code> to false as the filter was getting called multiple times. I'm new to SpringSecurity and need much exposure to the concept. I also want to add the configuration part just in case I did something wrong there:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @Override\n  protected void configure(HttpSecurity http) throws Exception {\n    http.cors()\n        .and()\n        .csrf()\n        .disable()\n        .sessionManagement()\n        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n        .and()\n        .authorizeRequests()\n        .antMatchers(&quot;/getToken&quot;)\n        .permitAll()\n        .anyRequest()\n        .authenticated()\n        .and()\n        .exceptionHandling()\n        .authenticationEntryPoint(new HttpStatusEntryPoint(HttpStatus.UNAUTHORIZED))\n        .and()\n        .addFilterBefore(\n            new XHeaderAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);\n  }\n</code></pre>\n<p>There are a lot of fixes for this issue but none worked for me. I don't know where I'm going wrong.</p>\n<h2>Update 1</h2>\n<p>Including JwtUtils:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\npublic class JwtUtils {\n\n  @Value(&quot;${security.jwtSecret}&quot;)\n  private String jwtSecret;\n\n  @Value(&quot;${security.jwtExpirationMs}&quot;)\n  private int jwtExpirationMs;\n\n  public String getJWTToken(String username) {}\n\n  public boolean validateJwtToken(String authToken) {}\n\n  public Claims getAllClaimsFromToken(String token) {}\n}\n\n</code></pre>\n<p>and UserService:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class UserServiceImpl implements UserService {\n\n  @Autowired private UserRepository userRepository;\n\n  @Override\n  public User saveUser(UserModel userModel) {}\n\n  @Override\n  public UserModel findUserByEmail(String email) {}\n\n  @Override\n  public UserListViewResponse findAllUsers(Specification&lt;User&gt; userSpecification, Pageable paging) {}\n\n  @Override\n  public UserModel deleteUser(String email) {}\n\n  private UserListViewResponse populateUserListViewResponse(Page&lt;User&gt; pagedResult) {}\n\n  private List&lt;User&gt; filterAdmins(List&lt;User&gt; userEntityList) {}\n</code></pre>\n"},{"comments":[{"comment_id":17804599,"body":"<a href=\"http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html</a>"},{"comment_id":26345887,"body":"System.out.println(Math.round(Math.cos(Math.toRadians(90)));"},{"comment_id":134521727,"body":"I’m voting to close this question because this is how floating point arithmetic works.  <a href=\"https://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html</a>"}],"answers":[{"comments":[{"comment_id":17804626,"body":"That&#39;s the expected IEEE 574 floating point behavior, I wouldn&#39;t call it an &#39;&#39;issue&#39;&#39;. See Esailija&#39;s comment."},{"comment_id":17804668,"body":"@ignis The value of Math.cos() is required to be within 1ulp of the correct result. No amount of Goldberg can explain that away."},{"comment_id":17805087,"body":"While I did not vote down your answer, I think the downvote comes from how you stated it. By implying this is an &quot;issue&quot;, a loss of precision, as opposed to the expected result working with floating point arithmetic, you confuse things."},{"comment_id":17805131,"body":"OK, it&#39;s not an issue, I removed the word and explained it a little bit differently."}],"answer_id":13100168,"body":"<p>The value is very close to the correct result. It seems like a loss of precision in the floating point operations of transforming degrees to radians.</p>\n"},{"comments":[{"comment_id":17804629,"body":"cos x-pi/2 = sin x ~= x at smaller values and unfortunately 90/180*pi - just that much off of the actual value of pi/2."}],"answer_id":13100182,"body":"<p>See the Javadoc. \"The conversion from degrees to radians is generally inexact.\"</p>\n"},{"answer_id":13100229,"body":"<p>From trigonometry:</p>\n\n<pre><code>sin x ~= x, for small values of x\nsin x = cos x+pi/2\n</code></pre>\n\n<p>Because pi/2 can't be represented exactly in IEEE-754 Floating point, it means, that it must be off by some value x, i.e it is represented by pi/2 +- x, where x &lt; the least significant bit in the floating point system. Which in this case is 2^-53 = 1.1102e-16.</p>\n\n<p>In this particular case x ~= 6.123233995736766E-17, which is about 55% of the maximum error.\nSo, it's a rather good result...</p>\n"},{"answer_id":13101100,"body":"<p>Standing temporarily on a soapbox, I think people are confused about the concepts of <a href=\"http://www.mathsisfun.com/accuracy-precision.html\" rel=\"nofollow\">accuracy versus precision</a>. Is this an issue as some have said? Is it a problem? A bug? Or is it an expected behavior of floating point arithmetic?</p>\n\n<p>90 degrees is a number that is representable perfectly as an integer, even though a double. But pi/2 radians is a real number that is not represented exactly, so that representation will be slightly inaccurate. The loss is in accuracy. The fact is, this is expected behavior. We should never trust the least significant bits of a result.</p>\n\n<p>Next, when we compute the value of a trigonometric function, there MAY be an additional loss of accuracy. We don't get exactly the result that we know to be true in a symbolic sense. Thus sin(pi/3) may not be exactly sqrt(3)/2, but then we can't represent sqrt(3)/2 exactly anyway. All of this is expected, and is behavior that should be dealt with by good code, not trusting the LSBs of those numbers.</p>\n"},{"answer_id":76274696,"body":"<p>As value of PI is irrational because of that value of trigonometry function giving approximate value. For precise value in calculator use this:</p>\n<p>public class MyClass {\npublic static void main(String args[]) {</p>\n<pre><code>  double b1=Math.cos(Math.toRadians(90));\n  //approximate value \n  System.out.println(b1);\n  //exact value   System.out.println(String.format(&quot;%.15f&quot;,b1));\n  // I recommend you to using it upto 15f for precisely value\n  double b2=Math.sin(Math.toRadians(30));\n  //approximate value \n  System.out.println(b2);\n  //exact value\n  System.out.println(String.format(&quot;%.15f&quot;,b2));\n}\n</code></pre>\n<p>}</p>\n"}],"last_activity_date":1684344199,"question_id":13100144,"body":"<p>I've got a little Problem with the <code>Math.cos()</code> method. I know, I have to convert the angle to Radians before using <code>Math.cos()</code>. But if I just do:</p>\n\n<pre><code>System.out.println(Math.cos(Math.toRadians(90));\n</code></pre>\n\n<p>It outputs: 6.123233995736766E-17</p>\n\n<p><code>Math.sin()</code> is working well.</p>\n"},{"comments":[{"comment_id":134505449,"body":"Please explain clearly what you are trying to do. What is the exact problem description?"},{"comment_id":134505468,"body":"This is not obvious how you want to sort the remainingList ? please clarify what you want to achieve."},{"comment_id":134505664,"body":"You&#39;re using <code>k &lt; list.size() - 1</code> as the condition of your for-loop, are you sure you want the <code>- 1</code>?"},{"comment_id":134505698,"body":"it is a card game , i have my Players Object inside an ArrayList&lt;Players&gt;. at the end of a round i have to remove the winning player and let other player keep doing a last round, following the order"},{"comment_id":134505714,"body":"So, you&#39;re looking to place any players before the removed player, to the end of the list?"},{"comment_id":134505732,"body":"@Reilas that&#39;s what i wanted to ask, thank you. I m&#39;not that good at summarizing :)"}],"answers":[{"answer_id":76274579,"body":"<p>Instead of creating too many variable to track your iteration, creating new List from existing using subList method might be efficient. For sake of simplicity, I am taking list of integer below:</p>\n<pre><code>List&lt;Integer&gt; integerList = List.of(1,2,3,4,5);\nInteger objToRemove = 5;\nint removeObjectIndex = integerList.indexOf(objToRemove);\nList&lt;Integer&gt; finalList = new ArrayList&lt;&gt;(integerList.subList(removeObjectIndex + 1, integerList.size()));\nfinalList.addAll(integerList.subList(0, removeObjectIndex));\nSystem.out.println(finalList);\n</code></pre>\n"},{"answer_id":76274675,"body":"<p>This will remove the specified player, and place any players that were before that player, to the end of the list.</p>\n<p>Keep in mind, this presumes that <code>player</code> exists.</p>\n<pre class=\"lang-java prettyprint-override\"><code>void removePlayer(Players player) {\n    int indexOf = list.indexOf(player);\n    List&lt;Players&gt; sublist = new ArrayList&lt;&gt;(list.subList(0, indexOf));\n    remainingList = new ArrayList&lt;&gt;(list);\n    Iterator&lt;Players&gt; iterator = remainingList.iterator();\n    int index = 0;\n    while (iterator.hasNext() &amp;&amp; index &lt;= indexOf) {\n        iterator.next();\n        iterator.remove();\n        index++;\n    }\n    remainingList.addAll(sublist);\n}\n</code></pre>\n"}],"last_activity_date":1684344039,"question_id":76274356,"body":"<p>i need to sort the elements of an ArrayList oredering from the elements who is next to the removed one.</p>\n<p>somethink like this:</p>\n<p>if i have\nArraylist list = [ obj1 , obj2 , obj3, obj4 ]</p>\n<p>and i remove from the list obj2, i have to remain with a list ordered like this:</p>\n<p>Arraylist remainingList = [ obj3, obj4, obj1  ]</p>\n<p>i tryed a for cycle with 2 variables that iterates list.size()-1 times\nobj is the element i dont need in remainingLIst</p>\n<pre><code>   for(int i=list.indexOf(obj),  k= 0 ; k&lt;list.size()-1; k++)\n    {\n        if (i==giocatori.size()) i=0;\n        else i++;\n        remainingList.add(List.get(i));\n    }\n</code></pre>\n<p>is there a more efficent way to to this?</p>\n"},{"comments":[{"comment_id":134524893,"body":"I can&#39;t understand what you want to do, you have properties file with values and you want to access these properties in the code ?"},{"comment_id":134555872,"body":"Hi, thanks for the response! What I&#39;m trying to do is to keep my application.properties absolutely clean, without any properties there. With most of the cases until now, I&#39;m able to find a way to expose the specific configuration bean, instead of writing into the properties file, but I found it very difficult for some conf beans, as I&#39;m unable to &#39;browse&#39; all of the spring beans. So I&#39;m searching a universal way to configure these properties, without adding them to app.properties file.  Thanks!"}],"last_activity_date":1684343058,"question_id":76274551,"body":"<p>In our team, we agreed that we are gonna use all of the configurations as a code (let's Say AppConfiguration class) i.e :</p>\n<pre><code>@Value(&quot;${spring.datasource.url:jdbc:postgresql://localhost:5432/postgres}&quot;);\nprivate String jdbcUrl;\n</code></pre>\n<p>and later use them to configure beans with this value:</p>\n<pre><code>@Bean\n@Primary\n@ConfigurationProperties(prefix = &quot;spring.datasource.configuration&quot;)\npublic DataSource teamDataSource() {\n        return dataSourceProperties().initializeDataSourceBuilder().build();\n}\n\n@Bean\n@Primary\npublic DataSourceProperties telemetryControlServiceDataSourceProperties() {\n    DataSourceProperties dataSourceProperties = new DataSourceProperties();\n    dataSourceProperties.setUrl(appConfig.getJdbcUrl());\n....\n    return dataSourceProperties;\n}\n</code></pre>\n<p><strong>My Question:</strong>\nAs configuration properties rise, I can't put anything in application.properties files per our agreement, and I have to search for pojos for @ConfigurationProperties which I could not find sometimes. Is there a general/universal way for exposing all kinds of configuration properties from applications.properties?\nI.e I'm able to find some of the actuator properties, but most of them I cannot:</p>\n<pre><code>management.endpoints.web.base-path=/debug\nmanagement.endpoints.web.exposure.include=*\nmanagement.endpoints.web.exposure.exclude=env,beans\nmanagement.endpoint.health.show-details=always\nmanagement.endpoint.metrics.enabled=true\nmanagement.endpoint.prometheus.enabled=true\nmanagement.endpoint.loggers.enabled=true\n</code></pre>\n"},{"comments":[{"comment_id":134505672,"body":"because that is one of the main features of Object Oriented programming - since <code>Derived</code> is extending <code>Base</code>, it has all members of <code>Base</code> (and eventually some more), so it can be used as <code>Base</code>. (Maybe better example <code>Cat</code> extends <code>Animal</code> , so I can assign an instance of <code>Cat</code> to a variable of type <code>Animal</code> - a <code>Cat</code> is an <code>Animal</code> (and some more specific characteristics)"},{"comment_id":134505898,"body":"&quot;Why is java allowing me to assign a reference of child to base class&quot;  Because you&#39;re allowed to do this in Java."},{"comment_id":134519711,"body":"Your final example won&#39;t compile, you cannot call <code>b.poo();</code> via <code>Base b</code>"}],"answers":[{"comments":[{"comment_id":134506328,"body":"I&#39;m getting how it can be done / the features java is providing for this approach.Is there a reason why programmers generally use this approach."},{"comment_id":134506371,"body":"cant they use the Derived reference instead of using the base class reference. I mean Isn&#39;t it restricting the access only to the variables or methods available in base class ?"}],"answer_id":76274536,"body":"<p>This is called <a href=\"https://en.wikipedia.org/wiki/Polymorphism_(computer_science)\" rel=\"nofollow noreferrer\">polymorphism</a>. Any derived class can necessarily be considered an instance of a parent class (without explicit casting).</p>\n<p>The methods you can call and fields you can access depend on the static type of the object. In the case of <code>Base b = new Derived();</code>, the static type of <code>b</code> is <code>Base</code>, so you can only call methods visible on <code>Base</code>. New methods defined in <code>Derived</code> cannot be used.</p>\n"}],"last_activity_date":1684342906,"question_id":76274470,"body":"<pre><code>class Base {\n    public void show() {\n        System.out.println(&quot;Base class show() method called&quot;);\n    }\n}\n\nclass Derived extends Base {\n    public void show() {\n        System.out.println(&quot;Derived class show () method called&quot;);\n    }\n}\n\npublic class Main {\npublic static void main(String[] args) {\n    Base b = new Derived();//why is java allowing me to create an object of child class\n    b.show();              //how can the Base class hold and use the reference of child\n    }                              \n}\n</code></pre>\n<p>What if I create an new method in the child class ??\nWill the parent class still be able to access the new method ??</p>\n<pre><code>class Derived extends Base {\n    public void show() {\n        System.out.println(&quot;Derived class show () method called&quot;);\n    }\n    public void poo() {\n        System.out.println(&quot;take a poo&quot;);\n    }\n}\n\npublic class Main {\npublic static void main(String[] args) {\n    Base b = new Derived();\n    b.show();   \n        b.poo(); \n    }                              \n}\n</code></pre>\n<p>Why is java allowing me to assign a reference of child to base class and not throwing any warnings or errors.</p>\n"},{"comments":[{"comment_id":134505819,"body":"Java doesn&#39;t do any importing for you - your IDE does. Usually the IDE offers a choice of classes when several match. It would be helpful to provide more details - like which IDE, your project structure and build tool (e.g. Maven or Gradle)"},{"comment_id":134506064,"body":"the <code>Card</code> class apparently is in the unnamed package (no <code>package</code> statement) - such a class cannot be imported (and creating such classes should better be avoided) -- see <a href=\"https://stackoverflow.com/questions/283816/how-to-access-java-classes-in-the-default-package\">How to access java-classes in the default-package?</a> or <a href=\"https://stackoverflow.com/questions/33645950/import-package-with-no-name-java\">Import package with no name Java</a>"},{"comment_id":134506198,"body":"To clarify your question, what are the names of the folders within the <code>src</code> folder?"},{"comment_id":134506241,"body":"user16320675 is right, make sure you have a declaring <code>package</code> statement at the top of your classes."},{"comment_id":134506573,"body":"user16320675 is right. Card class was outside of my package, so my new class couldn&#39;t access its methods, even if they were made static. I had in <code>src</code> folder: <code>Card</code> class and a package with another classes, like <code>GameController</code>, <code>Ranking</code>, <code>Poker</code> and so on. And I was trying to acces Card<code>s methods from </code>Poker` class."}],"last_activity_date":1684342891,"question_id":76274534,"body":"<p>In 'src' package I have a public class called 'Card' with a public static method (showed below). In 'src' package, I created another folder, and inside a new public class, sowhen I try to declare a list of cards (private List deck;), java makes wrong class import (import javax.smartcardio.Card;). How can I import 'Card' class from 'src'? Thanks in advance!</p>\n<pre><code>public class Card implements Comparable&lt;Card&gt;{\n//...statements\npublic static Comparator&lt;Card&gt; sortCards() {\nreturn Comparator.comparing(Card::getRank).thenComparing(Card::getSuit);\n}\n//statements\n}\n</code></pre>\n"},{"comments":[{"comment_id":73590219,"body":"Pretty much you have to iterate.  You can use streams but for small lists they are not efficient."},{"comment_id":73590327,"body":"You are using an imperative language. Therefore, explicit iterations are the way to go. If you don&#39;t like writing loops, go with a functional language such as Scala. There you could use a simple one-liner and have it."},{"comment_id":73590395,"body":"Could you elaborate more on the difference between the two, perhaps as an answer?"},{"comment_id":73590590,"body":"@MatthiasFax, you do not need to explicitly iterate if using Java 8&#39;s streaming API, which is functional in nature."},{"comment_id":73590810,"body":"@jrahhali Yes, you can use streams, but they are not performant. Java is not made for it, the Streaming API is just built &quot;around&quot;, not from the bottom up. They are not performant and in my view also ugly and difficult to read."},{"comment_id":73590990,"body":"@MatthiasFax, I agree with you that the streaming API is built around the core language and not from the bottom up, but it does allow you to use functional idioms, and therefore, not have to explicit iterate.  The &#39;explicit iterating&#39; was the only point I was addressing."}],"answers":[{"answer_id":43260835,"body":"<p>java 8:</p>\n\n<pre><code>String[] names = Arrays.asStream(people).map(Person::getName).asArray(String[]::new);\n</code></pre>\n"},{"comments":[{"comment_id":73591298,"body":"Since OP would accept <code>List</code> as result type (<i>&quot;For example, to create an array or <b>list</b> of just names or hair color&quot;</i>), a for-each loop adding to a <code>List&lt;String&gt;</code> would be another nice option to show, for completeness, i.e. <code>for (Person p : people) { names.add(p.name); }</code>"},{"comment_id":73591431,"body":"@Andreas ah yup! I was gunna do a <code>List&lt;String&gt;</code> initially but didn&#39;t notice that in the question"}],"answer_id":43260942,"body":"<p>Two options:</p>\n\n<ol>\n<li>Iteration</li>\n<li>Streams (<em>Java 8</em>)</li>\n</ol>\n\n<p><em><strong>Iteration</strong></em></p>\n\n<pre><code>List&lt;String&gt; names = new ArrayList&lt;&gt;();\nfor (Person p : people) {\n    names.add(p.name);\n}\n</code></pre>\n\n<p><em><strong>Streams</strong></em></p>\n\n<pre><code>String[] names = Arrays.stream(people).map(p -&gt; p.name).toArray(size -&gt; new String[people.length]);\n</code></pre>\n"},{"answer_id":43261794,"body":"<p>You are seeking a functional feature in an initially imperative-only language Java. As already mentioned in other answers, since Java 8, you also have functional elements (e.g., streams). However, they are not yet recommended to be used. This <a href=\"https://blog.jooq.org/2015/12/08/3-reasons-why-you-shouldnt-replace-your-for-loops-by-stream-foreach/\" rel=\"nofollow noreferrer\">blog post</a> explains the disadvantages of streams over loops (i.e., performance, readability, maintainability).</p>\n\n<p>If you are looking for functional and safe code without such major implications, try Scala:</p>\n\n<pre><code>case class Person(name: String)\nval persons = Array(Person(\"george\"), Person(\"michael\"), Person(\"dexter\"))\nval personNames = persons.map(_.name)\n</code></pre>\n\n<p>The main difference is that this Scala code is simple to read and it is comparably performant as a Java code that uses a loop because the translated Scala-to-Java code uses a while loop internally.</p>\n"},{"answer_id":76274522,"body":"<pre><code>List&lt;Integer&gt; vendorIdList = ledgersList.stream().map(Ledger::getVendorId).collect(Collectors.toList());\n</code></pre>\n"}],"last_activity_date":1684342778,"question_id":43260752,"body":"<p>Say I have a person object with properties such as <code>name</code>, <code>hair color</code>, and <code>eye color</code>. I have the following array <code>Person[] people</code> that contains instances of person objects.</p>\n\n<p>I know I can get the <code>name</code> property of one the <code>Person</code> objects with </p>\n\n<pre><code>// create a new instance of Person\nPerson george = new Person('george','brown','blue');\n// &lt;&lt;&lt; make a people array that contains the george instance here... &gt;&gt;&gt;\n// access the name property\nString georgesName = people[0].name;\n</code></pre>\n\n<p>But what if I want to access the <code>name</code> property of everyone without using indexes? For example, to create an array or list of just names or hair color? Do I have to manually iterate through my <code>people</code> array? Or is there something cool in Java like <code>String[] peopleNames = people.name</code>?</p>\n"},{"comments":[{"comment_id":5393935,"body":"Some devices come with a doc viewer. Galaxy Tab does, I am not sure how many of the total devices out there do though."}],"answers":[{"comments":[{"comment_id":44155567,"body":"Apache POI does not work on Android."},{"comment_id":51780508,"body":"yes it is not working in Android.."},{"comment_id":63039087,"body":"@hitesh141 can you post an example?"},{"comment_id":76064828,"body":"@Jason  why  Apache poi is not working in android please give some explanation."},{"comment_id":86403693,"body":"It works on Android, but you should waste a lot of time for configuring it. Download this project : <a href=\"https://github.com/andruhon/android5xlsx\" rel=\"nofollow noreferrer\">github.com/andruhon/android5xlsx</a>"},{"comment_id":87356763,"body":"As far as I know Apache POI is for creating ,reading and updating the documents, but how to use it for viewing documents."}],"answer_id":4855286,"body":"<p>Most of the Microsoft Document viewers are heavy and expensive.</p>\n\n<p>If you want to create a viewer yourself, you should take a look at <a href=\"https://poi.apache.org/\" rel=\"noreferrer\">Apache POI</a>.</p>\n"},{"comments":[{"comment_id":83098932,"body":"Now it not available.  400. That’s an error.  The requested URL was not found on this server. That’s all we know."},{"comment_id":128588443,"body":"This is not an option is the user has no internet connection or in case of handling high sensitive data documents. PDFTron comes here."}],"answer_id":5266527,"body":"<p>Since most of the documents we need to display are already hosted on the web, we opted to use an embedded web view that opens the document using <a href=\"http://docs.google.com/viewer\" rel=\"noreferrer\">google docs viewer</a>.  </p>\n\n<p>We still have a few locally stored documents though that this approach doesn't work with.  For these, our solution was to rely on the support of existing apps. After spending some more time with Android, It seems that most devices come equipped with some sort of document/pdf reading capability installed fresh out of the box.  In the event that they don't have a capable app, we direct them to a market search for a free reader.  </p>\n"},{"comments":[{"comment_id":81889247,"body":"joseph, please suggest me any demo link."},{"comment_id":81889688,"body":"@OmInfowaveDevelopers <a href=\"http://smartoffice.artifex.com/\" rel=\"nofollow noreferrer\">smartoffice.artifex.com</a> has links to Google Play &amp; iOS App Store apps that show you what SmartOffice can do, or email sosales@artifex.com to get an evaluation SDK."},{"comment_id":87356669,"body":"In smartOffice official site there is no documentation and sdk provided to integrate it in app. And I have got no response from their contact support. @JosephH"},{"comment_id":87369830,"body":"@Nainal I don&#39;t know why that would be - if you drop me an email at my home address ( joseph@heenan.me.uk ) I&#39;ll make sure someone gets in touch."}],"answer_id":34540302,"body":"<p>Unfortunately there's no built in Android control to edit MS Office files, or even to display them! It's a pretty big omission given iOS has built in support for displaying Office files (albeit the iOS one often displays more complex documents incorrectly). There don't seem to be viewer app consistently enough available to rely on (and they may not provide the kind of user experience you're hoping for either).</p>\n<p>If you want to display or edit docx etc <strong>within</strong> your android application, you have to embed some third party code that adds this functionality. I'm not aware of any pre-packaged open source code that can do this, so unless you want to build/port a solution yourself you will need to commercially license something.</p>\n<p>As others have noted, there are some open source projects in this area, but they're not packaged/ported to Android. If you did manage to get them ported and integrated, they'd add a huge overhead to your Android app download (eg. 80+ megabytes) and you'd need to then add a mobile suitable UI for them (see <a href=\"https://play.google.com/store/apps/details?id=com.andropenoffice&amp;hl=en_GB\" rel=\"nofollow noreferrer\">https://play.google.com/store/apps/details?id=com.andropenoffice&amp;hl=en_GB</a> for an example of a port with ui that I personally think is not suitable/user friendly for an Android application.)</p>\n<p>One such SDK that I'm familiar with which solves this problem is based on the SmartOffice application:</p>\n<p><a href=\"https://artifex.com/products-smart-office-overview/\" rel=\"nofollow noreferrer\">https://artifex.com/products-smart-office-overview/</a></p>\n<p>It's available as an secure embeddable library that supports both display and (optionally) editing of Office documents. You can contact sosales@artifex.com for licensing information.</p>\n<p>Disclosure: One of my jobs involves working on the SmartOffice code.</p>\n"},{"answer_id":34541409,"body":"<pre><code>You can use this example for read MS word document file in android application.\nI give a link below, you follow this for example.\n &lt;https://github.com/AsposeShowcase/Document_Viewer_and_Converter_for_Android&gt;\n\nAnd follow below link for Aspose Word library for android.\n &lt;http://www.aspose.com/android/word-component.aspx&gt;\n\n**You Mostly use for this to Read Ms word document.**\nI hope, you will using these Library and make you application better.\nBest of Luck.\n\n\n[1]: http://www.aspose.com/android/word-component.aspx\n</code></pre>\n"},{"comments":[{"comment_id":60155630,"body":"Whilst this may theoretically answer the question, <a href=\"//meta.stackoverflow.com/q/8259\">it would be preferable</a> to include the essential parts of the answer here, and provide the link for reference."}],"answer_id":36263759,"body":"<p>A suitable solution might be using Jword in the link below. It's not free but easy to use.\n<a href=\"http://www.independentsoft.de/jword/index.html\" rel=\"nofollow\">http://www.independentsoft.de/jword/index.html</a></p>\n\n<p>Using the library is as simple as this sample code</p>\n\n<pre><code>private String docxRead(String filePath) {\n    try {\n        WordDocument doc = new WordDocument(filePath);\n        String text = doc.toText();\n        return text;\n    }\n    catch (Exception e) {\n        Toast.makeText(context, e.getMessage(), Toast.LENGTH_SHORT).show();\n        e.printStackTrace();\n    }\n    return \"\";\n}    \n</code></pre>\n"}],"last_activity_date":1684342710,"question_id":4854947,"body":"<p>Does anyone know of a good Java Microsoft Office API capable or running on an Android?  I know there is an OpenOffice Java API, but I haven't heard of anyone using it on Android.</p>\n\n<p>I know that using intents is another option, but how common are pre-installed office viewers on the varying Android distributions?  Would it be reasonable for a developer to expect the user to have one of these viewers installed?  Is it reasonable to request that they install one of these applications if they don't already have one?</p>\n"},{"comments":[{"comment_id":134502295,"body":"Please inlcude some code in your question. It&#39;s very hard to give you help otherwise."},{"comment_id":134502325,"body":"Welcome to Stack Overflow! Please clarify your specific problem or add additional details to highlight exactly what you need. As it&#39;s currently written, it’s hard to tell exactly what you&#39;re asking. See the <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask page</a> for help clarifying this question. Include the desired behavior, a specific problem or error and the shortest code necessary to reproduce the issue. See: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">How to create a Minimal, Complete, and Verifiable example</a>."}],"last_activity_date":1684342346,"question_id":76272537,"body":"<p>I have code for a button</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {\n       //Place holder for action\n    } \n</code></pre>\n<p>I would like to make another class to call into it so it will automatically open up a metric table in cameo.\nI am very new to Java coding so this is starting to get frustrating</p>\n<p>I'm trying to use</p>\n<pre class=\"lang-java prettyprint-override\"><code>BrowserTabTree activeTree = browser.getActiveTree();\n</code></pre>\n<p>for a start but not getting the right syntax for it</p>\n"},{"comments":[{"comment_id":30575099,"body":"Pretty much smoke and mirrors.  Lots of <code>native</code> methods that dork around in the innards of objects.  A <code>native</code> method pretty much can do anything it wants."}],"answers":[{"answer_id":20462012,"body":"<p>The main entry point of any Reflection activity is the <code>Class</code> class. From it you can get <code>Method</code>, <code>Field</code>, <code>Class</code>, <code>Constructor</code>, and <code>Annotation</code> instances.</p>\n\n<p>If you look at the source code, you will notice that to retrieve any of the above, Java has to make a <a href=\"https://stackoverflow.com/questions/6101311/what-is-the-native-keyword-in-java-for\"><code>native</code></a> call. For example,</p>\n\n<pre><code>private native Field[]       getDeclaredFields0(boolean publicOnly);\nprivate native Method[]      getDeclaredMethods0(boolean publicOnly);\nprivate native Constructor&lt;T&gt;[] getDeclaredConstructors0(boolean publicOnly);\nprivate native Class&lt;?&gt;[]   getDeclaredClasses0();\nprivate native byte[] getRawAnnotations(); // get converted to Annotation instances later\n</code></pre>\n\n<p>The implementation is done in native C code (and/or C++). Each JDK might differ, but you can look up the source code if it's available and you have patience. Details on the OpenJDK source code can be found <a href=\"https://stackoverflow.com/questions/12594046/java-native-method-source-code\">in this question</a>.</p>\n"}],"last_activity_date":1684342327,"question_id":20461851,"body":"<p>The Java 7 Language Specifications say pretty early on:</p>\n\n<blockquote>\n  <p>\"this specification does not describe reflection in any detail.\"</p>\n</blockquote>\n\n<p>I'm wondering just that: how is Reflection implemented in Java? </p>\n\n<p>I'm not asking how it's used, and I understand there might not be as specific an answer I'm looking for, but any information would be much appreciated.</p>\n\n<p>I've found this on Stackoverflow, the analogous question about C#: <a href=\"https://stackoverflow.com/questions/15105575/how-is-reflection-implemented-in-c\">How is reflection implemented in C#?</a></p>\n"},{"comments":[{"comment_id":134493300,"body":"The endpoints look aligned on the domain; they look offset on the range by about what I&#39;d expect for a stacked renderer."},{"comment_id":134493345,"body":"So, you guess the problem is the range of the renderers? Will check it out"},{"comment_id":134505221,"body":"So, your tip did the trick. If you please, post it as an answer so I can accept it, and then I will post the code editing the question. Thank you @trashgod"}],"answers":[{"answer_id":76274276,"body":"<p>In the chart <a href=\"https://i.stack.imgur.com/zyLgY.png\" rel=\"nofollow noreferrer\">shown</a>, the endpoints look aligned on the domain, but they appear offset on the range by about what I'd expect for a stacked renderer. The exact solution, seen <a href=\"https://stackoverflow.com/q/76266902/230513\">here</a>, modifies a second axis, also seen <a href=\"https://stackoverflow.com/a/13362809/230513\">here</a>. Also consider a <code>CombinedDomainCategoryPlot</code>, mentioned <a href=\"https://stackoverflow.com/search?q=user%3A230513%20CombinedDomainCategoryPlot\">here</a>.</p>\n"}],"last_activity_date":1684342294,"question_id":76266902,"body":"<p>I am developing a graphic representation of some info.\nThe two lines have the same starting value, so they should be starting in the same position on the chart. But, one of them is starting a lot below the other.\nI don´t know what I am missing here. Can someone please give a hand?\nThanks in advance.\n(The values / datasets are coming from another method, just asume that the lines have the same initial value)</p>\n<p><a href=\"https://i.stack.imgur.com/zyLgY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zyLgY.png\" alt=\"enter image description here\" /></a></p>\n<p>The snippet of code where the lines (and bars) are rendered.</p>\n<pre><code>private JFreeChart createChart(List&lt;SpartaConsolidadoDistribuidora&gt; listCons, int idCenario, String usina) {\n    //Cria o Renderer das StackBars.\n    GroupedStackedBarRenderer renderer = new GroupedStackedBarRenderer();\n    KeyToGroupMap map = new KeyToGroupMap(&quot;G1&quot;);\n    \n    int g = 1;\n    for (int j = 0; j &lt; 5; j++) {\n        for (int i = 0; i &lt; contratos.size(); i++) {\n            map.mapKeyToGroup(contratos.get(i), &quot;G&quot; + g);\n        }\n        g++;\n    }\n    \n    renderer.setSeriesToGroupMap(map);\n    \n    renderer.setItemMargin(0.0);\n    Paint p1 = new GradientPaint(0.0f, 0.0f, azul, 0.0f, 0.0f, azul);\n    renderer.setSeriesPaint(0, p1);\n    renderer.setSeriesPaint(7, p1);\n    renderer.setSeriesPaint(14, p1);\n    renderer.setSeriesPaint(21, p1);\n    renderer.setSeriesPaint(28, p1);\n    renderer.setSeriesPaint(35, p1);\n    renderer.setSeriesPaint(42, p1);\n     \n    Paint p2 = new GradientPaint(0.0f, 0.0f, roxo, 0.0f, 0.0f, roxo);\n    renderer.setSeriesPaint(1, p2);\n    renderer.setSeriesPaint(8, p2);\n    renderer.setSeriesPaint(15, p2);\n    renderer.setSeriesPaint(22, p2);\n    renderer.setSeriesPaint(29, p2);\n    renderer.setSeriesPaint(36, p2);\n    renderer.setSeriesPaint(43, p2);\n    \n    Paint p3 = new GradientPaint(0.0f, 0.0f, verde, 0.0f, 0.0f, verde);\n    renderer.setSeriesPaint(2, p3);\n    renderer.setSeriesPaint(9, p3);\n    renderer.setSeriesPaint(16, p3);\n    renderer.setSeriesPaint(23, p3);\n    renderer.setSeriesPaint(30, p3);\n    renderer.setSeriesPaint(37, p3);\n    renderer.setSeriesPaint(44, p3);\n\n    Paint p4 = new GradientPaint(0.0f, 0.0f, rosa, 0.0f, 0.0f, rosa);\n    renderer.setSeriesPaint(3, p4);\n    renderer.setSeriesPaint(10, p4);\n    renderer.setSeriesPaint(17, p4);\n    renderer.setSeriesPaint(24, p4);\n    renderer.setSeriesPaint(31, p4);\n    renderer.setSeriesPaint(38, p4);\n    renderer.setSeriesPaint(45, p4);\n    \n    Paint p5 = new GradientPaint(0.0f, 0.0f, amarelo, 0.0f, 0.0f, amarelo);\n    renderer.setSeriesPaint(4, p5);\n    renderer.setSeriesPaint(11, p5);\n    renderer.setSeriesPaint(18, p5);\n    renderer.setSeriesPaint(25, p5);\n    renderer.setSeriesPaint(32, p5);\n    renderer.setSeriesPaint(39, p5);\n    renderer.setSeriesPaint(46, p5);\n    \n    Paint p6 = new GradientPaint(0.0f, 0.0f, azulClaro, 0.0f, 0.0f, azulClaro);\n    renderer.setSeriesPaint(5, p6);\n    renderer.setSeriesPaint(12, p6);\n    renderer.setSeriesPaint(19, p6);\n    renderer.setSeriesPaint(26, p6);\n    renderer.setSeriesPaint(33, p6);\n    renderer.setSeriesPaint(40, p6);\n    renderer.setSeriesPaint(47, p6);\n    \n    Paint p7 = new GradientPaint(0.0f, 0.0f, azulEscuro, 0.0f, 0.0f, azulEscuro);\n    renderer.setSeriesPaint(6, p7);\n    renderer.setSeriesPaint(13, p7);\n    renderer.setSeriesPaint(20, p7);\n    renderer.setSeriesPaint(27, p7);\n    renderer.setSeriesPaint(34, p7);\n    renderer.setSeriesPaint(41, p7);\n    renderer.setSeriesPaint(49, p7);\n\n    renderer.setGradientPaintTransformer(new StandardGradientPaintTransformer(GradientPaintTransformType.HORIZONTAL));\n    \n    SubCategoryAxis domainAxis = new SubCategoryAxis(&quot;&quot;);\n    \n    List&lt;CategoryDataset&gt; listDS = createDatasets(listCons, idCenario);\n    \n    CategoryPlot plot = new CategoryPlot();\n    \n    plot.setDataset(listDS.get(0));\n    plot.setRenderer(renderer);\n    plot.setDomainAxis(domainAxis);\n    \n    NumberAxis nAxis = new NumberAxis(&quot;MWm&quot;);\n    nAxis.setAutoRange(true);\n    nAxis.setTickUnit(new NumberTickUnit(100000));\n    plot.setRangeAxis(nAxis);\n    plot.setFixedLegendItems(createLegendItems());\n    \n    plot.setOrientation(PlotOrientation.VERTICAL);\n    plot.setRangeGridlinesVisible(true);\n    plot.setDomainGridlinesVisible(true);\n            \n    //Agora crio o segundo renderer - Line - LINE 1 RENDER\n    CategoryItemRenderer renderer2 = new LineAndShapeRenderer();\n    renderer2.setSeriesStroke(0, new BasicStroke(4));\n    renderer2.setSeriesPaint(0, preto);\n    plot.setDataset(1, listDS.get(1));\n    plot.setRenderer(1, renderer2);\n    \n    final ValueAxis rangeAxis2 = new NumberAxis(&quot;&quot;);\n    rangeAxis2.setTickLabelsVisible(false);\n    plot.setRangeAxis(1, rangeAxis2);\n    plot.getRangeAxis().setAutoRange(true);\n    \n    //Agora crio o terceiro renderer - Line - LINE 2 RENDER\n    CategoryItemRenderer renderer3 = new LineAndShapeRenderer();\n    renderer3.setSeriesStroke(0, new BasicStroke(4));\n    renderer3.setSeriesPaint(0, vermelho);\n    plot.setDataset(2, listDS.get(2));\n    plot.setRenderer(2, renderer3);\n    plot.mapDatasetToRangeAxis(2, 1);\n    \n    plot.setDatasetRenderingOrder(DatasetRenderingOrder.FORWARD);\n    \n    final JFreeChart chart = new JFreeChart(plot);\n    chart.setTitle(usina);\n    \n    return chart;\n}\n</code></pre>\n<p><strong>EDIT:</strong></p>\n<p>As the tip provided by @trashgod in the comments, here is the snippet that did the trick:</p>\n<pre><code>NumberAxis nAxis = new NumberAxis(&quot;MWm&quot;);\n    nAxis.setAutoRange(true);\n    nAxis.setLabelFont(new Font(&quot;Arial Black&quot;,0, 18));\n    nAxis.setTickUnit(tickUnit);\n    nAxis.setTickLabelsVisible(true);\n    \n    plot.setRangeAxis(nAxis);\n    plot.setFixedLegendItems(createLegendItems());\n            \n    //Agora crio o segundo renderer - Line\n    CategoryItemRenderer renderer2 = new LineAndShapeRenderer();\n    renderer2.setSeriesStroke(0, new BasicStroke(4));\n    renderer2.setSeriesPaint(0, vermelho);\n    \n    plot.setDataset(1, listDS.get(1));\n    plot.setRenderer(1, renderer2);\n    \n    NumberAxis rangeAxis2 = new NumberAxis(&quot;&quot;);\n    rangeAxis2.setAutoRange(true);\n    rangeAxis2.setTickUnit(tickUnit);\n    rangeAxis2.setTickUnit(new NumberTickUnit(1000000), false, false);\n    rangeAxis2.setAutoTickUnitSelection(true);\n    rangeAxis2.setTickLabelsVisible(false);\n    \n    plot.setRangeAxis(1, rangeAxis2);\n    \n    //Agora crio o terceiro renderer - Line\n    CategoryItemRenderer renderer3 = new LineAndShapeRenderer();\n    renderer3.setSeriesStroke(0, new BasicStroke(4));\n    renderer3.setSeriesPaint(0, preto);\n    \n    plot.setDataset(2, listDS.get(2));\n    plot.setRenderer(2, renderer3);\n</code></pre>\n"},{"comments":[{"comment_id":134505670,"body":"Have you modified the eclipse.ini file? -1 usually means invalid arguments, and <code>--add-modules=ALL-SYSTEM</code> is not a valid argument for Java 1.8."},{"comment_id":134518902,"body":"What exactly prevents you from upgrading?"}],"last_activity_date":1684341938,"question_id":76274408,"body":"<p>I need to use eclipse-java-2019-03-R-win32-x86_64 with WebSphere 8.5.\nwhen open eclipse it show error &quot;java virtual machine launcher&quot;\nI follow up solve method from google 3 method is still unable.</p>\n<p>1.Insert variable\nVariable name (1): _JAVA_OPTIONS\nVariable name (2):  –Xmx512M</p>\n<p>2.Run JAVA on Administator</p>\n<p>3.Re-install JAVA</p>\n<p>Please see error below picture\n<a href=\"https://i.stack.imgur.com/WGm25.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Remark:Eclipse 2023 is can be used normally.</p>\n<p>I want to use Eclipse 2019-03R in normally</p>\n"},{"comments":[{"comment_id":134504572,"body":"<code>replaceAll(&quot;\\r\\n&quot;, &quot;&quot;);</code> has a limited scope - basically Windows line separators that are &#39;error free&#39;. <code>replaceAll(&quot;[\\r\\n]&quot;, &quot;&quot;);</code> would be better"},{"comment_id":134504594,"body":"Changing any character after signing may break the signature."},{"comment_id":134504654,"body":"Thanks for your answer. I did it but  it still throws invalid signature  when i try to to validate the file."},{"comment_id":134504776,"body":"thanks @aled i deleted all the  changes after signing but still  invalid"},{"comment_id":134505117,"body":"You haven&#39;t told us <i>how</i> you&#39;re testing the signature"},{"comment_id":134505315,"body":"I have to send the  signed XML to the server of the entity  that  gave me the  certificate but i want to know if  my  code meet all of the criteria that  the entity told me that they need for this  to be valid   because  I&#39;m a c# developer and  i did it on c# and worked perfectly   but in java  with the same XML  I&#39;m generating different SignatureValue and DigestValue."},{"comment_id":134505405,"body":"Wouldn&#39;t hurt to post the C#. There are many things that could break it - right from the start, e.g. the encoding with which it&#39;s read"},{"comment_id":134505610,"body":"That doesn&#39;t help me but might help someone else ;)"},{"comment_id":134505653,"body":"It&#39;s okey thanks for your help @g00se"},{"comment_id":134505849,"body":"Have you inspected in detail the differences in the C# and Java output?"},{"comment_id":134506563,"body":"The only difference in the output file generated is the SignatureValue and DigestValue."}],"last_activity_date":1684341883,"question_id":76273811,"body":"<p>I have this java code with which I can sign an XML file with a .p12 certificate.</p>\n<p>The requirements for this signature are the signatureMethod and the digetsMethod need to use sha256 as the encryption algorithm.</p>\n<p>The DigestValue should be the Property that contains the value encoded in Base 64 format of the summary of the object described by the Uri property in the reference tag.</p>\n<p>In this case, what changes should we make in order to meet all of this requirements. Also the requirement needs that the xml does not preserve white spaces.</p>\n<p>Currently I am getting invalid signature when I test the signed XML.</p>\n<p>Here is my code bellow so far:</p>\n<pre><code>package xmlCreateSignature;\nimport java.io.*;\nimport java.security.*;\nimport java.security.cert.Certificate;\nimport java.security.cert.CertificateException;\nimport java.util.Collections;\nimport javax.xml.XMLConstants;\nimport javax.xml.crypto.*;\nimport javax.xml.crypto.dom.*;\nimport javax.xml.crypto.dsig.*;\nimport javax.xml.crypto.dsig.dom.*;\nimport javax.xml.crypto.dsig.keyinfo.*;\nimport javax.xml.crypto.dsig.spec.C14NMethodParameterSpec;\nimport javax.xml.crypto.dsig.spec.TransformParameterSpec;\nimport javax.xml.parsers.*;\nimport javax.xml.transform.*;\nimport javax.xml.transform.dom.*;\nimport javax.xml.transform.stream.*;\nimport org.w3c.dom.Element;\nimport org.w3c.dom.Node;\n\npublic class testesas { \n  public static  void main(String[] args) throws Exception {\n      \n System.setProperty(&quot;com.sun.org.apache.xml.internal.security.ignoreLineBreaks&quot;, &quot;true&quot;);\n String pass =&quot;pass&quot; ;\n // Load the XML document\n DocumentBuilderFactory dbf =  DocumentBuilderFactory.newInstance( );\n  \n dbf.setIgnoringElementContentWhitespace(true);\n// dbf.setNamespaceAware(false);\n dbf.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\n DocumentBuilder builder = dbf.newDocumentBuilder();\n\n org.w3c.dom.Document doc = builder.parse(new File(&quot;./documents/request.xml&quot;));\n doc.getDocumentElement().normalize();\n\n // Load the certificate and private key from the .p12 file\n String providerName=&quot;SunJSSE&quot;;\n KeyStore ks = KeyStore.getInstance(&quot;PKCS12&quot;, providerName);\n ks.load(new FileInputStream(&quot;./documents/4300648_identity.p12&quot;), pass.toCharArray());\n String alias = (String) ks.aliases().nextElement();\n PrivateKey privateKey = (PrivateKey) ks.getKey(alias, pass.toCharArray());\n Certificate cert = ks.getCertificate(alias);\n\n // Create a DOM XMLSignatureFactory that will be used to generate the signature\n XMLSignatureFactory fac = XMLSignatureFactory.getInstance(&quot;DOM&quot;);\n\n  // Create a Reference to the whole document, using SHA256 digest algorithm\n  Reference ref = fac.newReference(&quot;&quot;, fac.newDigestMethod(DigestMethod.SHA256, null),\n Collections.singletonList(\n         fac.newTransform(Transform.ENVELOPED, (TransformParameterSpec) null)), null, null);\n\n // Create a SignedInfo with the above Reference\n SignedInfo si = fac.newSignedInfo( \n fac.newCanonicalizationMethod(CanonicalizationMethod.INCLUSIVE,\n(C14NMethodParameterSpec) null), fac.newSignatureMethod(SignatureMethod.RSA_SHA256 , null),\nCollections.singletonList(ref));\n\n // Create a KeyInfo with the certificate information\n KeyInfoFactory kif = fac.getKeyInfoFactory();\n\n X509Data x509d = kif.newX509Data(Collections.singletonList(cert));\n KeyInfo ki = kif.newKeyInfo(Collections.singletonList(x509d));\n\n // Create a new XML signature and sign the document with the private key\n DOMSignContext dsc = new DOMSignContext(privateKey, doc.getDocumentElement());\n XMLSignature signature = fac.newXMLSignature(si, ki);\n \n signature.sign(dsc);\n\n // Save the signed document to a file\n TransformerFactory tf = TransformerFactory.newInstance();\n Transformer trans = tf.newTransformer();\n\n StreamResult result = new StreamResult(new FileOutputStream(&quot;./documents/response.xml&quot;));\n \n\n trans.transform(new DOMSource(doc), result);\n System.out.println(&quot;XML document signed successfully.&quot;);\n  \n  } \n}\n</code></pre>\n<p><strong>Bellow code is a fully functional C# code that is  generating valid signatures but for this case I need this to be generated on java</strong></p>\n<pre><code>//this is the class that generates the XML signed\n  using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Runtime.Intrinsics.X86;\nusing System.Security.Cryptography.X509Certificates;\nusing System.Security.Cryptography.Xml;\nusing System.Text;\nusing System.Threading.Tasks;\nusing System.Xml;\n\nnamespace ConsoleApp2\n{\n     class xmlSign\n    {\n\n\n      \n\n        public XmlDocument SignXmlWithP12(XmlDocument? xmlDoc, X509Certificate2 cert)\n        {\n            //Obtenemos la llave privada del certificado\n            var llavePrivada = cert.PrivateKey;\n            //Creamos un SignedXml object que contendrá el documento.\n            SignedXml xmlFirmado = new SignedXml(xmlDoc);\n            //Atachamos la llave privada al SignedXml document.\n            xmlFirmado.SigningKey = llavePrivada;\n            //Creamos una referencia del documento a ser firmado.\n            Reference reference = new Reference(); \n            reference.Uri   = &quot;&quot;; //Todo el documento\n                  //Agregamos un enveloped transformation a la referencia.\n            XmlDsigEnvelopedSignatureTransform env = new\n            XmlDsigEnvelopedSignatureTransform(true);\n            reference.AddTransform(env);\n            //Agregamos la referencia al SignedXml object.\n            xmlFirmado.AddReference(reference);\n            //Creamos un KeyInfo object.\n            KeyInfo keyInfo = new KeyInfo();\n            //Cargamos el certificado dentro de un KeyInfoX509Data object\n            //y luego lo añadimos al KeyInfo object.\n            KeyInfoX509Data clause = new KeyInfoX509Data();\n            //Opcionalmente se podría agregar el Subject del certificado\n            //clause.AddSubjectName(cert.Subject);\n            clause.AddCertificate(cert);\n            keyInfo.AddClause(clause);\n            //Asignamos el KeyInfo object al SignedXml object.\n            xmlFirmado.KeyInfo = keyInfo; //Procedemos a\n            //computar la firma.\n                xmlFirmado.ComputeSignature();\n            //Obtenemos la representación del XML firmado y la guardamos en un\n          //  XmlElement object\n            XmlElement xmlFirmaDigital = xmlFirmado.GetXml();\n            //Adicionamos el elemento de la firma al documento XML.\n            xmlDoc.DocumentElement.AppendChild(xmlDoc.ImportNode(xmlFirmaDigital, true));\n            \n            return xmlDoc;\n        }\n\n\n\n\n\n\n      \n\n\n    }\n}\n\n \n\n\n// this is the main class\n\n\nusing ConsoleApp2;\nusing System.Security.Cryptography.X509Certificates;\nusing System.Xml;\n\nxmlSign xmlsignedDOC= new xmlSign();\nXmlDocument doc = new XmlDocument(  );\n\ndoc.PreserveWhitespace = false;\ndoc.Load(&quot;C:\\\\Users\\\\FelixRojas\\\\source\\\\repos\\\\ConsoleApp2\\\\ConsoleApp2\\\\docs\\\\request.xml&quot;);\n\n\n\nX509Certificate2 cert =\n\n    new X509Certificate2(\n\n\n        fileName: &quot;C:\\\\Users\\\\FelixRojas\\\\source\\\\repos\\\\ConsoleApp2\\\\ConsoleApp2\\\\docs\\\\4300648_identity.p12&quot;,\n        password:\n\n        &quot;pass&quot;\n\n        );\n   \n\ndoc = xmlsignedDOC.SignXmlWithP12(doc, cert) ;\n\n\ndoc.Save(&quot;C:\\\\Users\\\\FelixRojas\\\\source\\\\repos\\\\ConsoleApp2\\\\ConsoleApp2\\\\docs\\\\request.xml&quot;);\n\n</code></pre>\n<p>I am able to generate the signed xml, but the digestValue and the SignatureValue are different that what are expected to be, and this results in invalid signature when I test it.</p>\n"},{"comments":[{"comment_id":134505535,"body":"What version of Spring Boot do you use?"},{"comment_id":134518702,"body":"I found a problem. Instead of &quot;public&quot; modificator on Controller&#39;‎s methods I used &quot;private&quot;. So it didn&#39;‎t work."}],"answers":[{"answer_id":76273861,"body":"<p>The service needs to be injected before using</p>\n<pre><code>@Autowired\nprivate final MediaContentServiceImpl service;\n</code></pre>\n<p>The same applies to the other dependencies, e.g. repositories</p>\n"}],"last_activity_date":1684341730,"question_id":76273769,"body":"<p>I am creating Spring Boot App.\nThere I have MediaContent Entity:</p>\n<pre><code>@Entity\n@AllArgsConstructor\n@NoArgsConstructor\n@Data\n@Table(name = &quot;media_content&quot;)\npublic class MediaContent extends AbstractEntity{\n\n    @Column(unique = true)\n    private String name;\n    @Column\n    @Lob\n    private byte[] video;\n    @Column\n    @Lob\n    private byte[] previewImage;\n    @Column\n    private String description;\n    @Column\n    @Enumerated(value = EnumType.STRING)\n    private Status status;\n\n    @ManyToOne(cascade = CascadeType.REFRESH, fetch = FetchType.EAGER)\n    @JoinColumn\n    private User user;\n\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;content&quot;)\n    private List&lt;Like&gt; likes = new ArrayList&lt;&gt;();\n\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;content&quot;)\n    private List&lt;MediaComments&gt; comments = new ArrayList&lt;&gt;();\n\n    public enum Status{\n        ACCEPTED, REJECTED, UNDER_REVIEW\n        }\n}\n</code></pre>\n<p>Also I have MediaConentRepository, Service and Service Implementation</p>\n<pre><code>public interface MediaContentRepository extends JpaRepository&lt;MediaContent, UUID&gt; {\n    MediaContent findMediaContentByName(String name);\n}\n</code></pre>\n<pre><code>public interface MediaContentService {\n\n    List&lt;MediaContent&gt; findAllContent();\n\n    List&lt;MediaComments&gt; findAllComments(MediaContent content);\n\n    Integer getAllLikes(MediaContent content);\n\n    boolean isLiked(MediaContent content, Principal principal);\n\n    User getUserByPrincipal(Principal principal);\n\n    MediaContent findContentById(UUID id);\n\n    void updateMediaContent(MediaContent content, MultipartFile imageFile, MultipartFile videoFile) throws IOException;\n\n    void addMediaContent(Principal principal, MediaContent content, MultipartFile imageFile, MultipartFile videoFile) throws IOException;\n\n    boolean deleteMediaContent(User user, UUID id);\n}\n</code></pre>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class MediaContentServiceImpl implements MediaContentService {\n\n    private final MediaContentRepository repository;\n    private final UserRepository userRepository;\n    private final MediaCommentsRepository commentsRepository;\n\n    @Override\n    public List&lt;MediaContent&gt; findAllContent() {\n        return repository.findAll().stream().filter(content -&gt; content.getStatus()== MediaContent.Status.ACCEPTED).collect(Collectors.toList());\n    }\n\n    @Override\n    public List&lt;MediaComments&gt; findAllComments(MediaContent content) {\n        List&lt;MediaComments&gt; commentList = new ArrayList&lt;&gt;();\n        commentsRepository.findAll().forEach(comments -&gt; {\n            if(comments.getMediaID().equals(content.getUuid())){\n                commentList.add(comments);\n            }\n        });\n        return commentList;\n    }\n\n    @Override\n    public Integer getAllLikes(MediaContent content) {\n        return content.getLikes().size();\n    }\n\n    @Override\n    public boolean isLiked(MediaContent content, Principal principal) {\n        User user = userRepository.findUserByUsername(principal.getName());\n        if(content.getLikes().stream().filter(like-&gt;like.getUser()==user).count() == 1){\n            return true;\n        }\n        return false;\n    }\n\n    @Override\n    public MediaContent findContentById(UUID id) {\n        return repository.findById(id).orElse(null);\n    }\n\n    @Override\n    public void updateMediaContent(MediaContent content, MultipartFile imageFile, MultipartFile videoFile) throws IOException {\n        MediaContent content1 = repository.findById(content.getUuid()).orElse(null);\n        if(content1!=null){\n            byte[] imageBytes = imageFile.getBytes();\n            content.setPreviewImage(imageBytes);\n            byte[] videoBytes = videoFile.getBytes();\n            content.setVideo(videoBytes);\n            content.setStatus(MediaContent.Status.UNDER_REVIEW);\n            repository.delete(content1);\n            repository.save(content);\n        } else{\n            log.error(&quot;not such content1 in database&quot;);\n        }\n    }\n\n    @Override\n    public void addMediaContent(Principal principal, MediaContent content, MultipartFile imageFile, MultipartFile videoFile) throws IOException {\n        User user = getUserByPrincipal(principal);\n        if(user.getRole() == User.Role.ADMIN){\n            content.setStatus(MediaContent.Status.ACCEPTED);\n        }\n        content.setUser(user);\n        byte[] imageBytes = imageFile.getBytes();\n        byte[] videoBytes = videoFile.getBytes();\n        content.setVideo(videoBytes);\n        content.setPreviewImage(imageBytes);\n        repository.save(content);\n    }\n\n    @Override\n    public User getUserByPrincipal(Principal principal) {\n        if (principal == null) return new User();\n        return userRepository.findUserByUsername(principal.getName());\n    }\n\n    @Override\n    public boolean deleteMediaContent(User user, UUID id) {\n        MediaContent content = repository.findById(id).orElse(null);\n        if(content!=null){\n            if(content.getUser().getUuid().equals(user.getUuid())){\n                repository.delete(content);\n                return true;\n            }\n            log.error(&quot;Media content with id = {} is not found&quot;, id);\n\n        } else{\n            log.error(&quot;not such content in database&quot;);\n        }\n        return false;\n    }\n}\n</code></pre>\n<p>I want to get all my media content. I wrote 2 different methods for RestController:</p>\n<pre><code>@RestController\n@RequiredArgsConstructor\npublic class MediaContentController {\n    private final MediaContentServiceImpl service;\n\n    @PermitAll\n    @GetMapping(&quot;/media&quot;)\n    @ResponseBody\n    private List&lt;MediaContentResponse&gt; getAllMediaContents(){\n        List&lt;MediaContent&gt; contentList = service.findAllContent();\n        List&lt;MediaContentResponse&gt; list = new ArrayList&lt;&gt;();\n        contentList.forEach(content -&gt; {\n            list.add(new MediaContentResponse(\n                    content.getUuid(), content.getName(), content.getDescription(), content.getUser()\n            ));\n        });\n        return list;\n    }\n\n    @PermitAll\n    @GetMapping(&quot;/media&quot;)\n    public ResponseEntity&lt;List&lt;MediaContent&gt;&gt; getAll(){\n        List&lt;MediaContent&gt; mediaContents = service.findAllContent();\n        return ResponseEntity.ok(mediaContents);\n    }\n}\n</code></pre>\n<p>but in first case I have this exception &quot;Cannot invoke &quot;org.example.service.impl.MediaContentServiceImpl.findAllContent()&quot; because &quot;this.service&quot; is null&quot;. when I use the second one, I get data</p>\n<p>Please, help me, where is the problem? I have exception like this in my other controllers. I tried to remove some annotations, change RestController to Controller, but all this didn<code>t help me.</code>your text`</p>\n"},{"comments":[{"comment_id":104104795,"body":"&#39;How could I configure the LocalStackContainer to accept requests without any credentials validation going on?&#39;    - I don&#39;t think you can because you&#39;re trying to make requests to aws secretsmanager which requires valid aws credentials"},{"comment_id":118005093,"body":"@Ira Re, I am also facing the same issue. did you find any solution?"},{"comment_id":118018453,"body":"I don&#39;t exactly remember how the error was solved. I can see now that my LocalStackContainer has two other env vars: .withEnv(&quot;HOSTNAME&quot;, &quot;<a href=\"https://secretsmanager.eu-west-1.amazonaws.com&quot;\" rel=\"nofollow noreferrer\">secretsmanager.eu-west-1.amazonaws.com&quot;</a>) .withEnv(&quot;LOCALSTACK_HOSTNAME&quot;, &quot;<a href=\"https://secretsmanager.eu-west-1.amazonaws.com&quot;\" rel=\"nofollow noreferrer\">secretsmanager.eu-west-1.amazonaws.com&quot;</a>) Not sure though, if that&#39;s what I was missing."},{"comment_id":118051425,"body":"Thanks for the quick reply. I have tried but still, I get the same error. Could you please have a look <a href=\"https://github.com/testcontainers/testcontainers-java/issues/3926\" rel=\"nofollow noreferrer\">github.com/testcontainers/testcontainers-java/issues/3926</a>."},{"comment_id":118055604,"body":"@Ira Re instead of secretsmanager.eu-west-1.amazonaws.com I use localhost.. – unknown 2 hours ago   Delete"},{"comment_id":118069912,"body":"@Ira Re, it would be great if you post the answer here with a sample working code"},{"comment_id":118111373,"body":"you can find the working sample here <a href=\"https://stackoverflow.com/questions/66811893/localstack-throws-the-security-token-included-in-the-request-is-invalid\" title=\"localstack throws the security token included in the request is invalid\">stackoverflow.com/questions/66811893/&hellip;</a>"},{"comment_id":118262014,"body":"Thanks for posting the answer here. Sorry, didn&#39;t have time to get to it earlier."}],"answers":[{"answer_id":70429727,"body":"<p>Assuming you prefer spring boot test and junit5 over alternatives, <code>@DynamicPropertySource</code> can be quite handy here</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final LocalStackContainer LOCALSTACK = ...;\n\n@DynamicPropertySource\nstatic void setCredentials(DynamicPropertyRegistry registry) {\n    var credentials = LOCALSTACK.getDefaultCredentialsProvider().getCredentials();\n    registry.add(&quot;cloud.aws.region.static&quot;, () -&gt; &quot;eu-central-1&quot;);\n    registry.add(&quot;cloud.aws.credentials.access-key&quot;, () -&gt; credentials.getAWSAccessKeyId());\n    registry.add(&quot;cloud.aws.credentials.secret-key&quot;, () -&gt; credentials.getAWSSecretKey());\n    registry.add(&quot;cloud.aws.s3.endpoint&quot;, () -&gt; LOCALSTACK.getEndpointOverride(S3));\n}\n</code></pre>\n<p>Also please doublecheck you've overridden the endpoints you rely on (s3 in my example), otherwise you may request real AWS API instead of the containerized one</p>\n"}],"last_activity_date":1684341565,"question_id":58914341,"body":"<p>I have following code snippet, that is supposed to run in a AWS Lambda function:</p>\n\n<pre><code>AWSSecretsManager client = AWSSecretsManagerClientBuilder.standard().withRegion(AWS_REGION).build();\nGetSecretValueRequest getSecretValueRequest = new GetSecretValueRequest().withSecretId(SECRET_NAME);\nGetSecretValueResult secretValue = client.getSecretValue(getSecretValueRequest);\n</code></pre>\n\n<p>As the lambda function is going to be run in the same VPC as the secret manager I don't have to provide credentials (<code>AWS_ACCESS_KEY_ID</code>, <code>AWS_SECRET_ACCESS_KEY</code>) for it.</p>\n\n<p>I use Localstack with Testcontainers for integration tests and set up the secret in the test setup like this:</p>\n\n<pre><code>AWSSecretsManager secretsManager = AWSSecretsManagerClientBuilder.standard()\n        .withEndpointConfiguration(secretsmanager.getEndpointConfiguration(SECRETSMANAGER))\n        .withCredentials(secretsmanager.getDefaultCredentialsProvider())\n        .build();\nString secretString = \"{'engine':'mysql','port':\" + mysql.getMappedPort(3306) + \",'host':'\" + mysql.getContainerIpAddress() + \"'}\";\nCreateSecretRequest request = new CreateSecretRequest().withName(\"aurora\")\n        .withSecretString(secretString)\n        .withRequestCredentialsProvider(secretsmanager.getDefaultCredentialsProvider());\nsecretsManager.createSecret(request);\n</code></pre>\n\n<p>Now the test crashes with an error:</p>\n\n<pre><code>com.amazonaws.services.secretsmanager.model.AWSSecretsManagerException: \nThe security token included in the request is invalid. \n(Service: AWSSecretsManager; \nStatus Code: 400; Error Code: \nUnrecognizedClientException; \nRequest ID: ...\n</code></pre>\n\n<p>Here is also the definition of the localstack container used in the test:</p>\n\n<pre><code>@ClassRule\npublic static LocalStackContainer secretsmanager = new LocalStackContainer(\"0.10.4\")\n    .withServices(LocalStackContainer.Service.SECRETSMANAGER)\n    .withEnv(\"DEFAULT_REGION\", \"eu-west-1\")\n    .withExposedPorts(4584);\n</code></pre>\n\n<p>How could I configure the LocalStackContainer to accept requests without any credentials validation going on?</p>\n"},{"answers":[{"comments":[{"comment_id":134500626,"body":"can you please suggest me how to write code vice versa  output will be my input and output should be like my input"},{"comment_id":134501948,"body":"<code>JSONArray</code> is <code>Iterable</code>, therefore instead of using an index, you can directly iterate using <code>notification.forEach</code>."}],"answer_id":76259274,"body":"<p>Simple way to convert a for loop into Stream is to use IntStream with forEach method. The solution defers based on the version of JSON Library that you are using. Older version throws exception that needs to be handled within the Lambda, something like below:</p>\n<pre><code>JSONObject nameJson = new JSONObject();\nJSONObject sectionJson=new JSONObject();\nIntStream.range(0, notification.length()).forEach(index -&gt; {\n    try {\n        nameJson.put(notification.getJSONObject(index).get(&quot;language&quot;).toString(),notification.getJSONObject(index).get(&quot;name&quot;).toString());\n        sectionJson.put(notification.getJSONObject(index).get(&quot;language&quot;).toString(),notification.getJSONObject(index).get(&quot;section&quot;).toString());\n    } catch (JSONException e) {\n        throw new RuntimeException(e);\n    }\n});\n\n</code></pre>\n<p>Newer version of the JSON Library does not throw Exception on get method, sample code that works with org.json:json:20230227 version looks like below:</p>\n<pre><code>JSONObject nameJson = new JSONObject();\nJSONObject sectionJson=new JSONObject();\nIntStream.range(0, notification.length()).mapToObj(notification::getJSONObject).forEach(jsonObject -&gt; {\n    nameJson.put(jsonObject.getString(&quot;language&quot;),jsonObject.getString(&quot;name&quot;));\n    sectionJson.put(jsonObject.getString(&quot;language&quot;),jsonObject.getString(&quot;section&quot;));\n});\n</code></pre>\n<p>For performing reverse, assuming that you have nameJson and sectionJson objects handy you can try something like (works with latest version of org.json:json):</p>\n<pre><code>List&lt;JSONObject&gt; jsonObjectList = nameJson.keySet().stream().map(language -&gt; {\n    JSONObject notificationJson = new JSONObject();\n    notificationJson.put(&quot;name&quot;, nameJson.getString(language));\n    notificationJson.put(&quot;section&quot;, sectionJson.getString(language));\n    return notificationJson.put(&quot;language&quot;, language);\n}).collect(Collectors.toList());\nJSONArray notificationsJson = new JSONArray().putAll(jsonObjectList);\n</code></pre>\n"}],"last_activity_date":1684341394,"question_id":76248485,"body":"<p>I'm very new to Java 8 lambdas... I want to write a lambda function that takes a JSONArray, goes over its JSONObjects and creates a Json object of certain field.</p>\n<p>For example, a function that takes the JSONArray:</p>\n<pre><code>&quot;students&quot;: [\n    {\n            &quot;name&quot;: &quot;tom&quot;,\n            &quot;section&quot;: &quot;A&quot;,\n            &quot;language&quot;:&quot;english&quot;\n        \n    },\n    {\n            &quot;name&quot;: &quot;john&quot;,\n            &quot;section&quot;: &quot;B&quot;,\n            &quot;language&quot;:&quot;dutch&quot;\n    },\n    {\n           &quot;name&quot;: &quot;sam&quot;,\n            &quot;section&quot;: &quot;C&quot;,\n            &quot;language&quot;:&quot;spanish&quot;\n    }]\n</code></pre>\n<p>My output should be like-</p>\n<pre><code>nameJson : {&quot;english&quot;:&quot;tom&quot;,&quot;dutch&quot;:&quot;john&quot;,&quot;spanish&quot;:&quot;sam&quot;}\nsectionJson: {&quot;english&quot;:&quot;A&quot;,&quot;dutch&quot;:&quot;B&quot;,&quot;spanish&quot;:&quot;C&quot;}\n</code></pre>\n<pre><code>JSONArray notification=json.optJSONArray(&quot;studentData&quot;);\nJSONObject nameJson = new JSONObject();\nJSONObject sectionJson=new JSONObject();\nfor (int i=0;i&lt;notification.length();i++){\n    nameJson.put(notification.getJSONObject(i).get(&quot;language&quot;).toString(),notification.getJSONObject(i).get(&quot;name&quot;).toString());\n    sectionJson.put(notification.getJSONObject(i).get(&quot;language&quot;).toString(),notification.getJSONObject(i).getString(&quot;section&quot;).toString());\n    \n}\n</code></pre>\n<p>Please help me out to write using lambda and streams</p>\n"},{"answers":[{"answer_id":76274329,"body":"<p>I was having the same error on a <strong><code>Multi-Modular</code></strong> Android Project.</p>\n<p>I had the app module with 3 other modules.</p>\n<p>In each module I had specified <strong><code>coreLibraryDesugaringEnabled true</code></strong> on the compile options - see last line on this snippet.</p>\n<pre><code>compileOptions {\n        sourceCompatibility JavaVersion.VERSION_18\n        targetCompatibility JavaVersion.VERSION_18\n        coreLibraryDesugaringEnabled true\n    }\n</code></pre>\n<p>The way to get around this error in a Multi-Modular Project is to leave <code>coreLibraryDesugaringEnabled true</code> just on the app module file.</p>\n<p>You should remove it in all other modules together with dependencies implementation.</p>\n"}],"last_activity_date":1684341333,"question_id":67998260,"body":"<p>i'm getting the following error message.\nTrying to read a xls file using apache poi (version 5.0.0).\nI'm quit new working with java and android studio so maybe i am just to dumb to see, what went wrong.</p>\n<p>hope someone can help me. ^^</p>\n<p>(if you need more infos, code or something like this, just ask for it. I'm not sure, what you need to solve my problem.)</p>\n<p><strong>Error</strong></p>\n<pre><code>&gt; Transform artifact poi-5.0.0.jar (project :poi-5.0.0) with DexingWithClasspathTransform\nAGPBI: {&quot;kind&quot;:&quot;error&quot;,&quot;text&quot;:&quot;com.android.tools.r8.a: MethodHandle.invoke and MethodHandle.invokeExact are only supported starting with Android O (--min-api 26)&quot;,&quot;sources&quot;:[{&quot;file&quot;:&quot;C:\\\\Users\\\\nikla\\\\AndroidStudioProjects\\\\controlling_szenario\\\\poi-5.0.0\\\\build\\\\.transforms\\\\74c17dc26c0bf73dd6362c9c309eb5e9\\\\jetified-poi-5.0.0.jar&quot;}],&quot;tool&quot;:&quot;D8&quot;}\n\n&gt; Task :app:mergeLibDexDebug FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:mergeLibDexDebug'.\n&gt; Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\n   &gt; Failed to transform poi-5.0.0.jar (project :poi-5.0.0) to match attributes {artifactType=android-dex, dexing-enable-desugaring=true, dexing-incremental-transform=false, dexing-is-debuggable=true, dexing-min-sdk=23, org.gradle.libraryelements=jar, org.gradle.usage=java-runtime}.\n      &gt; Execution failed for DexingWithClasspathTransform: C:\\Users\\nikla\\AndroidStudioProjects\\controlling_szenario\\poi-5.0.0\\build\\.transforms\\74c17dc26c0bf73dd6362c9c309eb5e9\\jetified-poi-5.0.0.jar.\n         &gt; Error while dexing.\n</code></pre>\n<p><strong>build.gradle</strong></p>\n<pre><code>plugins {\n    id 'com.android.application'\n}\n\nandroid {\n    compileSdkVersion 30\n    buildToolsVersion &quot;30.0.3&quot;\n\n    defaultConfig {\n        applicationId &quot;com.example.controlling_szenario&quot;\n        minSdkVersion 26\n        targetSdkVersion 30\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n        multiDexEnabled true\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.3.0'\n    implementation 'com.google.android.material:material:1.3.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.4'\n    implementation project(path: ':poi-5.0.0')\n    testImplementation 'junit:junit:4.+'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\n    implementation 'com.aldebaran:qisdk:1.7.5'\n    implementation 'com.aldebaran:qisdk-design:1.7.5'\n\n}\n</code></pre>\n"},{"comments":[{"comment_id":134506142,"body":"I am not sure I understand the requirement - you want to drag <b>to</b> Outlook, but you don&#39;t want to open/use Outlook. How is that possible?"},{"comment_id":134507117,"body":"@DmitryStreblechenko I&#39;m looking for a way to drag/drop attachments to an area of the enterprise application and let an ActiveX control send an email with attachment without opening the desktop client.  The web client should be fine though."},{"comment_id":134507599,"body":"<a href=\"https://www.baeldung.com/java-email\" rel=\"nofollow noreferrer\">Sending Emails with Java</a>"},{"comment_id":134508034,"body":"So you don&#39;t want to use Outlook, you only want to send a message with attachment to some Exchange mailbox, right? You can use EWS or Graph for that."},{"comment_id":134518836,"body":"@DmitryStreblechenko thank you - this looks exactly like what i am needing."},{"comment_id":134519239,"body":"Keep in mind that sending though SMTP and an Office 365 server won&#39;t work unless you enable Basic auth for the tenant."}],"last_activity_date":1684341119,"question_id":76274302,"body":"<p>I am investigating the feasibility of drag/drop files <strong>into</strong> outlook email from a Java Swing application.  I have found several examples of dragging <strong>from</strong> outlook, but I want to do the opposite. Currently, the application relies on the Outlook desktop client for this.  I would like to replace this functionality with a drag/drop ActiveX control (yes, this is an old legacy application) or something similar.  The current solution relies on Outlook seat licenses for the desktop client, and that is the part that I am wanting to replace without opening the desktop client.</p>\n<p>So far I am in the exploratory phase of this project.  What I want to do may not even be an option within the parameters of the application.</p>\n<p>Any ideas/experience is much appreciated.</p>\n"},{"comments":[{"comment_id":133347868,"body":"For G1 memory use (as reported by the OS), this may also be relevant: <a href=\"https://openjdk.org/jeps/346\" rel=\"nofollow noreferrer\">openjdk.org/jeps/346</a>"},{"comment_id":133350063,"body":"For better understanding JVM&#39;s memory usage I recommend the following excellent post: <a href=\"https://stackoverflow.com/questions/53451103/java-using-much-more-memory-than-heap-size-or-size-correctly-docker-memory-limi/53624438#53624438\" title=\"java using much more memory than heap size or size correctly docker memory limi\">stackoverflow.com/questions/53451103/&hellip;</a>"},{"comment_id":133359657,"body":"@JornVernee After re-reading JEP 346 I&#39;m still unclear how it applies (or if at all). Yes, 6 GB heap are fully committed, confirmed by jcmd. So apparently no heap mem has been returned to the OS. But there are ~4 GB unaccounted for. How could JEP 346 play a role in this?"},{"comment_id":133359770,"body":"Thanks @JurajMartinka , excellent overview indeed, I&#39;ll research further starting from there"},{"comment_id":133365832,"body":"If you look at the JEP, it states that it was delivered in Java 12, you are using Java 11. Still, the JEP describes the behavior before, which does apply to you."},{"comment_id":133378694,"body":"@JohannesKuhn I agree that JEP 346 describes potentially relevant G1 GC behavior in Java 11. However, I fail to understand how it helps explaining the observed difference in reported memory usage. I think (and perhaps this is incorrect?) that as long as the GC does not return committed memory to the OS, the JVM still has it and jcmd should report it."}],"last_activity_date":1684341003,"question_id":75581702,"body":"<p>I'm at a loss regarding the reported memory usage of my Java application (deployed on JBoss EAP) when under load. The <code>java.exe</code> process memory as shown by <strong>Windows Resource Monitor</strong> is much higher than what is reported by <code>jcmd VM.native_memory</code>.</p>\n<p>How can I investigate the difference?</p>\n<h3>Example</h3>\n<ul>\n<li>jcmd: Total: reserved=8417542KB, committed=7308422KB</li>\n<li>Windows Resource Monitor: Commit (&quot;zugesichert&quot;) 12270304 KB\n<a href=\"https://i.stack.imgur.com/ZR9Jr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZR9Jr.png\" alt=\"java.exe as reported by Windows Resource Monitor\" /></a></li>\n</ul>\n<h3>Environment</h3>\n<ul>\n<li>Oracle JDK 11.0.18\n<ul>\n<li>Heap size (Xmx) 6 GB [fully committed according to jcmd]</li>\n<li>G1 GC</li>\n</ul>\n</li>\n<li>JBoss EAP 7.4.8</li>\n<li>Windows Server 2016</li>\n<li>The machine is a Hyper-V hosted VM with 8 GB RAM</li>\n</ul>\n<h3>Further observations</h3>\n<p>Memory usage as per Resource Monitor keeps growing continually while under load whereas the values reported by <code>jcmd</code> seem to stabilize around 8.5 GB reserved and 7ish GB committed.</p>\n"},{"answers":[{"comments":[{"comment_id":7248036,"body":"is that the spring default behavior ?"},{"comment_id":7248051,"body":"Yes. It is the default behavior."},{"comment_id":7254443,"body":"@Arun There is one more dimension to that which is transaction propagation attribute. In <a href=\"http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/transaction/annotation/Transactional.html\" rel=\"nofollow noreferrer\"><code>@Transactional</code></a> you can specify propagation attribute that is enumeration value of type <a href=\"http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/transaction/annotation/Propagation.html\" rel=\"nofollow noreferrer\"><code>@Propagation</code></a>."},{"comment_id":7259147,"body":"@Tomasz Yes. But it should also be mentioned that changing transaction propagation on a method that is called from another @Transactional method will have no effect."},{"comment_id":7266120,"body":"@Tomasz, That was what I meant by saying <code>will follow the transaction definitions given in the called method</code>. But if the call is comes from the same object instance it will not have any effect since the call will not propagate through the aop proxies which are responsible for the transaction maintenance."},{"comment_id":7266142,"body":"@Filip, That is not completely correct, If you call a method with a <code>@Transactional</code> definition from a different object/instance then even though the calling method have a different <code>@Transactional</code> attributes, the called method will follow the it own transaction definition."},{"comment_id":7268233,"body":"@Arun You&#39;re right, I was strictly speaking about self-invocation where the container isn&#39;t involved in serving up a proxy."},{"comment_id":88048791,"body":"&quot;.. will not have any impact on the transaction.&quot; - what does that mean? the inner method with <code>@transactional</code> is executed in same transaction as parent with <code>@transactional</code> method correct?"},{"comment_id":91930414,"body":"so does it means that if I call a transactional method from the same instance&#39;s method that has no transactional annotation, the transaction will not working? I think due to spring aop it will not working since it cannot get the proxy call."},{"comment_id":102915180,"body":"But default propogation is <code>REQUIRED           Support a current transaction, create a new one if none exists.</code>"},{"comment_id":118700439,"body":"@ArunPJohny what does it mean: &quot;within the same instance&quot;? Eg. I have parent method with Transactional annotation and within this method I call another method with Transactional from another service... When in child method something woll go wrong with exception, then I want to rollback everything..."}],"answer_id":6222624,"body":"<p>When you call a method without <code>@Transactional</code> within a transaction block, the parent transaction will propagate to the new method. It will use the same connection from the parent method (with <code>@Transactional</code>) and any exception caused in the called method (without <code>@Transactional</code>) will cause the transaction to rollback as configured in the transaction definition.</p>\n<p>If you call a method with a <code>@Transactional</code> annotation from a method with <code>@Transactional</code> belonging to the same Spring Bean, then the called method's transactional behavior will not have any impact on the transaction. But if you call a method with a transaction definition from another method with a transaction definition, and they belong to different Spring Beans, then the code in the called method will follow its own transaction definitions.</p>\n<p>You can find more details in the section <em>Declarative transaction management</em> of <a href=\"https://docs.spring.io/spring-framework/docs/5.3.x/reference/html/data-access.html#transaction-declarative\" rel=\"nofollow noreferrer\">Spring Transaction Management documentation</a>.</p>\n<p>Spring declarative transaction model uses an AOP proxy, so the AOP proxy is responsible for the creation of the transactions. The AOP proxy will be active only if the called method belongs to a different Spring <code>Bean</code> than the caller one.</p>\n"},{"comments":[{"comment_id":97470622,"body":"The 3 answers conflict with each other in some degree, not sure which is more accurate."},{"comment_id":106829836,"body":"@EricWang Just wanted to share that I tested out this scenario today and the answer by <a href=\"https://stackoverflow.com/questions/6222600/transactional-method-calling-another-method-without-transactional-anotation#6222624\">Arun P Johny</a> <i>(with comments)</i> is the most accurate for this scenario of <b>internal</b> invocations."}],"answer_id":6226981,"body":"<p><code>@Transactional</code> marks the transaction boundary (begin/end), but the transaction itself is bound to the thread. Once a transaction starts, it propagates across method calls until the original method returns and the transaction commits/rolls back.</p>\n<p>If another method is called that has a <code>@Transactional</code> annotation, then the propagation depends on the propagation attribute of that annotation.</p>\n"},{"comments":[{"comment_id":76934627,"body":"What about subcalls of NOT_SUPPORTED which dont have any annotation? Does it inherit NOT_Supported or did they open a new transaction as REQURED is the default? For example:  f1.call(){  f2() } with the annotation NOT_SUPPORTED for f1 and non for f2."}],"answer_id":8902699,"body":"<ul>\n<li><em>Does that mean the call to separate methods are causing the application to open separate connections to DB or suspend the parent transaction, etc?</em></li>\n</ul>\n\n<p>That depends on a <a href=\"http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#tx-propagation\" rel=\"noreferrer\">propagation level</a>. Here are all the possible level <a href=\"http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/annotation/Propagation.html\" rel=\"noreferrer\">values</a>.</p>\n\n<p>For example in case a propagation level is <a href=\"http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/annotation/Propagation.html#NESTED\" rel=\"noreferrer\">NESTED</a> a current transaction will \"suspend\" and a new transaction will be created ( <em>note: actual creation of a nested transaction will only work on specific transaction managers</em> )</p>\n\n<ul>\n<li><em>What's the default behavior for a method without any annotations that is called by another method with @Transactional annotation?</em></li>\n</ul>\n\n<p>The default propagation level ( what you call \"behavior\" ) is <a href=\"http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/transaction/annotation/Propagation.html#REQUIRED\" rel=\"noreferrer\">REQUIRED</a>. In case an \"inner\" method is called that has a <code>@Transactional</code> annotation on it ( or transacted declaratively via XML ), it will execute within the <strong>same transaction</strong>, e.g. \"nothing new\" is created.</p>\n"},{"comments":[{"comment_id":112378910,"body":"To clarify for beginners, I&#39;m pretty sure innerMethod() needs to be on a different bean (aka Spring-managed java Object) than outerMethod(). If they are both on the same bean, I don&#39;t think the innerMethod will actually use the Transactional behavior declared in its annotation. Rather it will use what is declared in the outerMethod() declaration. This is because of how Spring handles AOP, which is used for it&#39;s @Transactional annotations (<a href=\"https://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/html/transaction.html#tx-decl-explained\" rel=\"nofollow noreferrer\">docs.spring.io/spring/docs/3.0.x/spring-framework-reference&zwnj;&#8203;/&hellip;</a>)"}],"answer_id":55540186,"body":"<p>The inner method will affect the outer method if the inner method is not annotated with <code>@Transactional</code>.</p>\n<p>In case the inner method is also annotated with <code>@Transactional</code> with <code>Propagation.REQUIRES_NEW</code>, the following will happen.</p>\n<pre><code>...\n@Autowired\nprivate TestDAO testDAO;\n\n@Autowired\nprivate SomeBean someBean;\n\n@Override\n@Transactional(propagation = Propagation.REQUIRED)\npublic void outerMethod(User user) {\n  testDAO.insertUser(user);\n\n  try {\n    someBean.innerMethod();\n  } catch(RuntimeException e) {\n    // handle exception\n  }\n}\n\n\n@Override\n@Transactional(propagation = Propagation.REQUIRES_NEW)\npublic void innerMethod() {\n  throw new RuntimeException(&quot;Rollback this transaction!&quot;);\n}\n</code></pre>\n<p>The inner method is annotated with <code>REQUIRES_NEW</code> and throws a <code>RuntimeException</code>, so it will set its transaction to rollback but WILL NOT EFFECT the outer transaction. The outer transaction is PAUSED when the inner transaction starts and then RESUMES AFTER the inner transaction is concluded. They run independently of each other, so the outer transaction MAY commit successfully.</p>\n"}],"last_activity_date":1684340965,"question_id":6222600,"body":"<p>I've seen a method in a Service class that was marked as <code>@Transactional</code>, but it was also calling some other methods in that same class which were not marked as <code>@Transactional</code>.</p>\n\n<p>Does it mean that the call to separate methods are causing the application to open separate connections to DB or suspend the parent transaction, etc?</p>\n\n<p>What's the default behavior for a method without any annotations which is called by another method with <code>@Transactional</code> annotation?</p>\n"},{"comments":[{"comment_id":129465336,"body":"Could you share more about the error logs ?"},{"comment_id":129605498,"body":"Hello. I added more error logs to the question"},{"comment_id":129605863,"body":"<code>can not run elasticsearch as root</code> are you using a root user ?"},{"comment_id":129606680,"body":"I saw that error. I was trying to run elasticsearch as root, so I had to exit root but the problem persisted."}],"answers":[{"answer_id":73588263,"body":"<p>Can you check</p>\n<pre><code>ls -ltd elasticsearch-8.3.3\n</code></pre>\n<p>and give output here (about catalog permission).</p>\n"},{"comments":[{"comment_id":133374747,"body":"Hence this step that I missed in the installation guide: “Install and start Docker Desktop. Go to Preferences &gt; Resources &gt; Advanced and set Memory to at least 4GB.”"}],"answer_id":74889713,"body":"<p>I've had this issue when running Elasticsearch as a container in Docker. Allowing Docker to reserve more resources fixed it for me. I've played around and in my setup a minimum of 6 GB RAM was needed in order to have a stable single node cluster of Elasticsearch running.</p>\n"},{"answer_id":75701019,"body":"<p>I had this problem with docker (ElasticSearch version 8.6.2, docker engine 23.0.1, and Ubuntu 22.04), following the instructions in ElasticSearch docs:</p>\n<p><a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html#docker-cli-run-dev-mode\" rel=\"noreferrer\">https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html#docker-cli-run-dev-mode</a></p>\n<p>Using ElasticSearch in single node mode for testing.</p>\n<p>I solved it by setting the maximum amount of memory docker can use to 4GB (-m 4GB):</p>\n<pre><code>docker run --name es01 -m 4GB -p 9200:9200 -it docker.elastic.co/elasticsearch/elasticsearch:8.6.2\n</code></pre>\n"},{"answer_id":76272471,"body":"<p>You can solve this issue by increasing <code>max_map_count</code> to below or similar.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>sudo sysctl -w vm.max_map_count=262144\n</code></pre>\n<p>My pain was immediately gone after running that command.</p>\n"}],"last_activity_date":1684340661,"question_id":73307726,"body":"<p>I am trying to start elasticsearch by running <code>.bin/elasticsearch</code> from the elasticsearch directory. However, I keep getting the error message <code>ERROR: Elasticsearch exited unexpectedly</code>. What could be the possible solution to this?</p>\n<p>I installed Elasticsearch from archives on linux using the commands below.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.3.3-linux-x86_64.tar.gz\n\nwget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.3.3-linux-x86_64.tar.gz.sha512\n\nshasum -a 512 -c elasticsearch-8.3.3-linux-x86_64.tar.gz.sha512 \n\ntar -xzf elasticsearch-8.3.3-linux-x86_64.tar.gz\n\ncd elasticsearch-8.3.3/ \n</code></pre>\n<p>Below is are more error logs I got from the elasticsearch.log file</p>\n<pre><code>[2022-08-17T00:32:36,417][ERROR][o.e.b.Bootstrap          ] [blessed-Lenovo-ideapad-110-15IBR] Exception\njava.lang.RuntimeException: can not run elasticsearch as root\n    at org.elasticsearch.bootstrap.Bootstrap.initializeNatives(Bootstrap.java:99) ~[elasticsearch-8.3.3.jar:?]\n    at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:179) ~[elasticsearch-8.3.3.jar:?]\n    at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:333) [elasticsearch-8.3.3.jar:?]\n    at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:224) [elasticsearch-8.3.3.jar:?]\n    at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:67) [elasticsearch-8.3.3.jar:?]\n[2022-08-17T00:32:36,855][ERROR][o.e.b.Elasticsearch      ] [blessed-Lenovo-ideapad-110-15IBR] fatal exception while booting Elasticsearch\norg.elasticsearch.bootstrap.StartupException: java.lang.RuntimeException: can not run elasticsearch as root\n    at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:228) [elasticsearch-8.3.3.jar:?]\n    at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:67) [elasticsearch-8.3.3.jar:?]\nCaused by: java.lang.RuntimeException: can not run elasticsearch as root\n    at org.elasticsearch.bootstrap.Bootstrap.initializeNatives(Bootstrap.java:99) ~[elasticsearch-8.3.3.jar:?]\n    at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:179) ~[elasticsearch-8.3.3.jar:?]\n    at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:333) ~[elasticsearch-8.3.3.jar:?]\n    at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:224) ~[elasticsearch-8.3.3.jar:?]\n    ... 1 more\n</code></pre>\n"},{"comments":[{"comment_id":134502850,"body":"And what would that implicit finally block do? In case of try with resources it is clear that it closes the resources, but I am having trouble thinking of something that could generally done with any try block and therefor provide a basis for a need of an implicit finally."}],"answers":[{"answer_id":76273863,"body":"<p>No. The closest thing i can think of like &quot;implicit closing functionality&quot; is finalization: Some classes may have a finalize method implemented that executes at some later time, whenever the object is garbage collected. That would have to have the close method called so not sure implicit is the right word. There was no Closeable interface to indicate things that needed closing before 1.7 and try-with-resources, there was no interface you could tag a class with to tell the jvm it needed closing. And that has nothing to do with any kind of try block.</p>\n<p>The try block came first and is entirely explicit. Try-with-resources came along later, it addresses exception masking issues that can happen when using try-finally blocks. This is <a href=\"https://stackoverflow.com/a/26516323/217324\">my explanation of why try-with-resources was created</a>.</p>\n"}],"last_activity_date":1684339975,"question_id":76272878,"body":"<p>Does implicit finally block exist for all try statements (try, try-finally, try-catch-finally) or only for try-with-resources?</p>\n"},{"comments":[{"comment_id":1399870,"body":"You might want to mention which language you are using. The answer will probably be the same across the C/C++/C#/Java family, but there&#39;s a chance that it might not be."}],"answers":[{"comments":[{"comment_id":1400296,"body":"Except if this is Java, where <code>const</code> does not exist."},{"comment_id":1400557,"body":"Isn&#39;t <code>final</code> for the same in Java?"}],"answer_id":1543279,"body":"<p>In this very case the effect is the same, but an instance of the class in the first snippet will occupy more memory.</p>\n\n<p>Other than that in the first case it's a variable with the same address on each call and it retains the value, but in the second case it's not necessarily a variable with the same address - it is reallocated and reinitialized on each call.</p>\n\n<p>Since you actually don't ever change <code>i</code> variable value you should declare it as <code>const</code> - this will give more clear code.</p>\n"},{"comments":[{"comment_id":1400299,"body":"Except if this is Java, where local static variables don&#39;t exist."}],"answer_id":1543636,"body":"<p>In first case <code>i</code> exists outside of any method</p>\n\n<p>In second case <code>i</code> exists only when <code>display()</code> method is called. If you want to give it persistence you can declare it as <code>static</code>.</p>\n"},{"answer_id":1543794,"body":"<p>In first case i is a part of the object. When u create an object from class A, the object allocates memory for the variable \"i\". And it will remain until the object deleted. </p>\n\n<p>But in the second way when you create the object from class B, there will be no memory allocation for the variable i. But only when you call the display function -in class B- memory variable \"i\" will be allocated temporarily. (When function's work is done all local variables will free)</p>\n"}],"last_activity_date":1684339584,"question_id":1543268,"body":"<p>Case:1</p>\n<pre><code>    class A\n    {\n        private int i=0;\n\n        public void display()\n        {\n            this.getValue();\n        }\n\n        private int getValue()\n        {\n            return i+2;\n        }\n\n    }\n</code></pre>\n<p>Case:2</p>\n<pre><code>    class B\n    {\n        public void display()\n        {\n            int i=0;\n            this. getValue(i);\n        }\n\n        private int getValue(int i)\n        {\n            return i+2;\n        }\n    }\n</code></pre>\n<p>Does the declaration of &quot;i&quot; in both cases have any great\ndifference (other than the global access) whenever I call\ndisplay() ?</p>\n"},{"answers":[{"answer_id":1837596,"body":"<p>something like this: </p>\n\n<pre><code>int  opcode = 0;\n</code></pre>\n\n<p>opcode  is a local variable and hence, you should initialize within the function.</p>\n"}],"last_activity_date":1684339522,"question_id":1837577,"body":"<p>If I am getting an error on a function that a variable <em>opcode</em> may not have been initialized, should this be done inside this method or in the beginning of the class.</p>\n\n<pre><code>private void compileDo() {\n        int endLabel, endLabelLoc, topLabel, opcode;\n        accept(\"do\");\n        accept(\"(\");\n        compileExpr();\n        accept(\")\");\n        topLabel = cs.getPos();\n        endLabelLoc = cs.emit(opcode, topLabel); \n        compileStatement();\n\n    }\n</code></pre>\n\n<p>Any help would be most appreciated.</p>\n"},{"comments":[{"comment_id":134488243,"body":"Please provide enough code so others can better understand or reproduce the problem."},{"comment_id":134504950,"body":"@alea provided link to Google Drive."}],"last_activity_date":1684339421,"question_id":76262376,"body":"<p>I have a trouble. Here is 6 tables in JasperSoft report, and if we have data only in 1 and 6 tables, there is a white gap or blank space between filled tables.</p>\n<p>The problem area:</p>\n<p><a href=\"https://i.stack.imgur.com/wuuVa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wuuVa.png\" alt=\"problem\" /></a></p>\n<p>How can I solve this and fit not empty tables together? Thanks</p>\n<p>Tried: different Stretch Types and other formatting.</p>\n<p>Here is a file of this report: <a href=\"https://drive.google.com/file/d/1Xs_IC_yRBcf5CLspq0k6w_nFwqgb2Vh0/view?usp=sharing\" rel=\"nofollow noreferrer\">https://drive.google.com/file/d/1Xs_IC_yRBcf5CLspq0k6w_nFwqgb2Vh0/view?usp=sharing</a></p>\n"},{"comments":[{"comment_id":134502140,"body":"Yes, you <i>can</i> use <code>Object</code>, that&#39;s how all collections worked before generics were added to Java. Yes, it <i>does</i> get annoying and is a potential source for problems. If you can&#39;t change your design to be able to give a specific type for each method return value, then this might be the best you can do."},{"comment_id":134502146,"body":"you can, but you lose static type analysis which is one of keystones of java programming"},{"comment_id":134502147,"body":"Which are the 2 different datatypes? To those have a common superclass other than <code>Object</code>? Can you make them implement the same interface maybe? Otherwise you might be stuck with <code>Queue&lt;T extends Object&gt;</code>"}],"answers":[{"answer_id":76272566,"body":"<p>Declaring a method to return <code>Object</code> in and of itself is not &quot;dangerous&quot;. However, if the caller casts the returned <code>Object</code> to a type which it isn't, an exception would be thrown, and that can be considered dangerous.</p>\n<p>If you want to prevent the caller from doing that, you can design the API so that it is safer for the caller by implementing different methods that deals with <code>T</code> and <code>U</code> specifically.</p>\n<pre><code>class DualQueue&lt;T, U&gt;{\n\n    private final Class&lt;T&gt; tClass;\n    private final Class&lt;U&gt; uClass;\n\n    private final Queue&lt;Object&gt; queue;\n\n    public DualQueue(Class&lt;T&gt; tClass, Class&lt;U&gt; uClass){\n        this.tClass = tClass;\n        this.uClass = uClass;\n        queue = new LinkedList&lt;&gt;();\n    }\n\n    public void enqueueT(T item) {\n        queue.add(item);\n    }\n\n    public void enqueueU(U item) {\n        queue.add(item);\n    }\n\n    public T dequeueT() {\n        if (peekT() != null) {\n            return tClass.cast(queue.poll());\n        }\n        return null;\n    }\n\n    public U dequeueU() {\n        if (peekU() != null) {\n            return uClass.cast(queue.poll());\n        }\n        return null;\n    }\n\n    public T peekT() {\n        var t =  queue.peek();\n        if (tClass.isInstance(t)) {\n            return tClass.cast(t);\n        }\n        return null;\n    }\n\n    public U peekU() {\n        var u =  queue.peek();\n        if (uClass.isInstance(u)) {\n            return uClass.cast(u);\n        }\n        return null;\n    }\n\n    public boolean queueIsEmpty() {\n        return queue.isEmpty();\n    }\n}\n</code></pre>\n<p><code>dequeueT</code>, <code>dequeueU</code>, <code>peekT</code>, <code>peekU</code> will all return null if the next item in the queue isn't that type.</p>\n"},{"answer_id":76273013,"body":"<p>Are the types you want to add to the queue defined by you? In that case you could create an interface and have the two classes implement it. That way you can add them to the queue. It can also be a generic interface kind-of-a-wrapper, e.g.:</p>\n<pre><code>    interface QueueAddable {\n        &lt;T extends QueueAddable&gt; T get(Class&lt;T&gt; type);\n    }\n</code></pre>\n<p>This is something I may do - honestly I don't know it that is a good solution, but it's definitely a way to put different types in your queue with typesafe casts to get them out. A little example of what I mean.</p>\n<pre><code>public class MyClass {\n\n    interface QueueAddable {\n        &lt;T extends QueueAddable&gt; T get(Class&lt;T&gt; type);\n    }\n\n    public static class MyOtherClass implements QueueAddable {\n        public &lt;T extends QueueAddable&gt; T get(Class&lt;T&gt; type) {\n            return type.cast(this);\n        }\n    }\n\n    public static class MyThirdClass implements QueueAddable {\n        public &lt;T extends QueueAddable&gt; T get(Class&lt;T&gt; type) {\n            return type.cast(this);\n        }\n    }\n\n    public static void main(String args[]) {\n        Queue&lt;QueueAddable&gt; queue = new LinkedList&lt;&gt;();\n        queue.add(new MyOtherClass());\n        queue.add(new MyThirdClass());\n\n        QueueAddable a = queue.poll();\n        if (a instanceof MyOtherClass) {\n            MyOtherClass object = a.get(MyOtherClass.class);\n        }\n\n        if (a instanceof MyThirdClass) {\n            MyThirdClass object = a.get(MyThirdClass.class);\n        }\n    }\n}\n</code></pre>\n"},{"answer_id":76273937,"body":"<p>The simple answer is, the task you're looking to do isn't necessarily possible in a statically-typed language, like Java.</p>\n<p>You're essentially telling the compiler to infer the data type, which is not its abstraction.</p>\n<p>So, there are a few work arounds.  Many will say to simply use the <code>Object</code> class, although this is not recommended by the Java implementors, for several reasons.</p>\n<p>My first recommendation is, if you're storing <code>String</code> values and numbers, then just store the numbers as <code>String</code> values also.</p>\n<p>Another approach would be to create an empty <code>interface</code>.</p>\n<pre><code>interface Example { }\n</code></pre>\n<p>And, then create an implementation for each type of value.</p>\n<pre><code>class ValueA implements Example {\n    String string;\n\n    ValueA(String string) {\n        this.string = string;\n    }\n}\n\nclass ValueB implements Example {\n    int integer;\n\n    ValueB(int integer) {\n        this.integer = integer;\n    }\n}\n</code></pre>\n<p>And, then use the following <code>DualQueue</code> implementation.</p>\n<pre><code>private static class DualQueue {\n\n    private final Queue&lt;Example&gt; queue;\n\n    public DualQueue() {\n        queue = new LinkedList&lt;&gt;();\n    }\n\n    public void enqueueT(ValueA item) {\n        queue.add(item);\n    }\n\n    public void enqueueU(ValueB item) {\n        queue.add(item);\n    }\n\n    public Example dequeue() {\n        return queue.poll();\n    }\n\n    public Example peek() {\n        return queue.peek();\n    }\n\n    public boolean queueIsEmpty() {\n        return queue.isEmpty();\n    }\n}\n</code></pre>\n"}],"last_activity_date":1684339393,"question_id":76272449,"body":"<p>During a project the need for a queue supporting two different datatypes arose. I solved this by creating a java.util linked list using java.util queue interface. I do however need to use the return type Object</p>\n<pre><code>public Object dequeue(){\n    return queue.poll();\n}\n</code></pre>\n<p>Returning &quot;Object&quot; feels weird and feels like it could cause a lot of errors.\nMy question is really, is this okay? Is there a better solution to solve my problem?</p>\n<p>I'm including the full code below.</p>\n<pre><code>private static class DualQueue&lt;T, U&gt;{\n\n    private final Queue&lt;Object&gt; queue;\n\n    public DualQueue(){\n        queue = new LinkedList&lt;&gt;();\n    }\n\n    public void enqueueT(T item) {\n        queue.add(item);\n    }\n\n    public void enqueueU(U item) {\n        queue.add(item);\n    }\n\n    public Object dequeue() {\n        return queue.poll();\n    }\n\n    public Object peek() {\n        return queue.peek();\n    }\n\n    public boolean queueIsEmpty() {\n        return queue.isEmpty();\n    }\n}\n</code></pre>\n"},{"comments":[{"comment_id":134504996,"body":"This seems like a self-answering/ed question."},{"comment_id":134505305,"body":"You are confusing mutability of an object reference with mutability of the object it refers to.  If you took scoped values out of the equation, you could have <code>final User u = new User(...)</code> and then still mutate <code>u.name</code>.  Here, <code>final</code> applies to the reference, but the object can still have mutable state.  Same with scoped values."},{"comment_id":134505319,"body":"I started to suspect as I wrote the question. wondering if this should be deleted."}],"last_activity_date":1684339317,"question_id":76274010,"body":"<p>I am experimenting with scoped values, oracle JDK 20 on windows and eclipse 2023-03.\nFrom what I've read ScopedValues are supposed to be immutable, but they do not appear so in my test code</p>\n<pre><code>package demoJava20;\n\nimport jdk.incubator.concurrent.ScopedValue;\nclass User { String name; };\npublic class ExampleScopedValues {\n public final static ScopedValue&lt;User&gt; LOGGED_IN_USER = ScopedValue.newInstance();\n    \n public static void main(String[] args) {\n   User loggedInUser = new User(); loggedInUser.name = &quot;ABC&quot;;\n   ScopedValue.where(LOGGED_IN_USER, loggedInUser, () -&gt; f1()); // value will be available through f1\n }\n\nprivate static void f1() {\n    User user = LOGGED_IN_USER.get();\n    System.out.println(&quot;In f1 user = &quot; + user.name);\n    user.name = &quot;DEF&quot;;\n    f2();\n}\n\nprivate static void f2() {\n    User user = LOGGED_IN_USER.get();\n    System.out.println(&quot;In f2 user = &quot; + user.name);\n    }\n}\n</code></pre>\n<p>On my machine this prints</p>\n<p>In f1 user = ABC</p>\n<p>In f2 user = DEF</p>\n<p>This code looks like it successfully changes the value from ABC to DEF and f2 sees the changed value.</p>\n<p>Is it just the object reference that is immutable ( by not having a set method ), not the object itself?</p>\n"},{"comments":[{"comment_id":134505663,"body":"i am thinking, if i can avoid latch to understand if the threadpool is finished. that also works"}],"last_activity_date":1684339241,"question_id":76274046,"body":"<p>Hi I have multithread environment.\nIts like a producer and subscriber problem.\nbut the challenge is i will have multiple producers and consumers also in multi number.\nI tried two approaches. Approach1 with BlockingQueue and approach2 with Synchronized List.\napproach2 is giving me faster results where as i need to get the approach1 faster.\nI found the problem as well. In approach2 i am waiting for the producer to finish producing first. and started consuming it. as i have a full prepared list, i have freedom to process list in partition and i am processing 2 items at a time.\nwhere as in BlockingQueue approach, which is ideal for these problems, i can take one item at a time, hence processing is slow.</p>\n<p>approach1 is taking 15310 milli seconds where as approach2 is taking 9755 only\ni tried calling take method twice in BlockingQueue approach, but realized latch.countDown wont work perfectly with that.</p>\n<p>Can some one help me approach1 much better than approach2, i have put time outs based on my real scenarios.</p>\n<p>Code i tried here</p>\n<pre><code>package testjavathread;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.concurrent.BlockingQueue;\nimport java.util.concurrent.CountDownLatch;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.ForkJoinPool;\nimport java.util.concurrent.LinkedBlockingQueue;\n\nclass Consumer {\n\n    private BlockingQueue&lt;Integer&gt; sharedQueue;\n\n    private int numThreads;\n\n    private ExecutorService executor;\n\n    private CountDownLatch latch;\n\n    public void consume() {\n        for (int i = 0; i &lt; numThreads; i++) {\n            executor.submit(() -&gt; {\n                try {\n                    while (true) {\n                        Integer integer = sharedQueue.take();\n//                      if(!sharedQueue.isEmpty()) {\n//                          Integer integer2 = sharedQueue.take();\n//                          latch.countDown();\n//                      }\n                        System.out.println(&quot;Consumer &quot; + integer);\n                        Thread.sleep(3000);\n                        latch.countDown();\n                    }\n                } catch (InterruptedException e) {\n                    Thread.currentThread().interrupt();\n                }\n            });\n        }\n    }\n\n    public ExecutorService getExecutor() {\n        return executor;\n    }\n\n    public void setExecutor(ExecutorService executor) {\n        this.executor = executor;\n    }\n\n    public int getNumThreads() {\n        return numThreads;\n    }\n\n    public void setNumThreads(int numThreads) {\n        this.numThreads = numThreads;\n    }\n\n    public BlockingQueue&lt;Integer&gt; getSharedQueue() {\n        return sharedQueue;\n    }\n\n    public void setSharedQueue(BlockingQueue&lt;Integer&gt; sharedQueue) {\n        this.sharedQueue = sharedQueue;\n    }\n\n    public CountDownLatch getLatch() {\n        return latch;\n    }\n\n    public void setLatch(CountDownLatch latch) {\n        this.latch = latch;\n    }\n}\n\npublic class BlockingQueueTest {\n\n    public static void main(String[] args) {\n        BlockingQueueTest testThread = new BlockingQueueTest();\n\n        testThread.test();\n\n    }\n\n    public void test() {\n        long startTime = System.currentTimeMillis();\n\n        List&lt;Integer&gt; inputNumbers = new ArrayList&lt;&gt;();\n        for (int i = 1; i &lt;= 100; i++) {\n            inputNumbers.add(i);\n        }\n\n        BlockingQueue&lt;Integer&gt; insertData = new LinkedBlockingQueue&lt;Integer&gt;();\n        int threadCount = 20;\n        CountDownLatch latch = new CountDownLatch(inputNumbers.size());\n\n        // Consumer started first\n        Consumer consumer = new Consumer();\n        consumer.setSharedQueue(insertData);\n        consumer.setNumThreads(threadCount);\n        consumer.setExecutor(Executors.newFixedThreadPool(threadCount));\n        consumer.setLatch(latch);\n        consumer.consume();\n\n        // Producing the data\n\n        if (!inputNumbers.isEmpty()) {\n            final int parallelism = 40;\n            ForkJoinPool forkJoinPool = null;\n            try {\n                forkJoinPool = new ForkJoinPool(parallelism);\n                final List&lt;Boolean&gt; output = (List&lt;Boolean&gt;) forkJoinPool\n                        .submit(() -&gt; inputNumbers.parallelStream().forEach(inputNumber -&gt; {\n                            produce(inputNumber, insertData);\n                        })).get();\n            } catch (Exception e) {\n                throw new RuntimeException(e);\n            } finally {\n                if (forkJoinPool != null) {\n                    forkJoinPool.shutdown();\n                }\n            }\n        }\n\n        try {\n            latch.await();\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n\n        System.out.println(System.currentTimeMillis() - startTime);\n\n    }\n\n    public void produce(Integer inputNumber, BlockingQueue&lt;Integer&gt; insertData) {\n        try {\n            Thread.sleep(200);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        System.out.println(&quot;Producer &quot; + inputNumber);\n        insertData.add(inputNumber);\n\n    }\n\n}\n\n</code></pre>\n<p>other approach</p>\n<pre><code>package testjavathread;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.concurrent.ForkJoinPool;\n\nimport com.google.common.collect.Lists;\n\npublic class TestThreadWithList {\n\n    public static void main(String[] args) {\n\n        TestThreadWithList testThread = new TestThreadWithList();\n\n        testThread.test();\n\n    }\n\n    private void test() {\n        long startTime = System.currentTimeMillis();\n\n        List&lt;Integer&gt; inputNumbers = new ArrayList&lt;&gt;();\n        for (int i = 1; i &lt;= 100; i++) {\n            inputNumbers.add(i);\n        }\n\n        List&lt;Integer&gt; insertData = Collections.synchronizedList(new ArrayList&lt;&gt;());\n\n        // Producing the data\n\n        if (!inputNumbers.isEmpty()) {\n            final int parallelism = 40;\n            ForkJoinPool forkJoinPool = null;\n            try {\n                forkJoinPool = new ForkJoinPool(parallelism);\n                final List&lt;Boolean&gt; output = (List&lt;Boolean&gt;) forkJoinPool\n                        .submit(() -&gt; inputNumbers.parallelStream().forEach(inputNumber -&gt; {\n                            produce(inputNumber, insertData);\n                        })).get();\n            } catch (Exception e) {\n                throw new RuntimeException(e);\n            } finally {\n                if (forkJoinPool != null) {\n                    forkJoinPool.shutdown();\n                }\n            }\n        }\n\n        // Consumer\n\n        final int parallelism = 20;\n        ForkJoinPool forkJoinPool = null;\n        try {\n            forkJoinPool = new ForkJoinPool(parallelism);\n            List&lt;Boolean&gt; finalListOutput = (List&lt;Boolean&gt;) forkJoinPool\n                    .submit(() -&gt; Lists.partition(insertData, 2).parallelStream().forEach(eachNumber -&gt; {\n                        System.out.println(&quot;Consumer &quot; + eachNumber.get(0));\n                        System.out.println(&quot;Consumer &quot; + eachNumber.get(1));\n\n                        try {\n                            Thread.sleep(3000);\n                        } catch (InterruptedException e) {\n                            // TODO Auto-generated catch block\n                            e.printStackTrace();\n                        }\n                    })).get();\n        } catch (Exception e) {\n        } finally {\n            if (forkJoinPool != null) {\n                forkJoinPool.shutdown();\n            }\n        }\n\n        System.out.println(System.currentTimeMillis() - startTime);\n    }\n\n    private void produce(Integer inputNumber, List&lt;Integer&gt; insertData) {\n        try {\n            Thread.sleep(200);\n        } catch (InterruptedException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        System.out.println(&quot;Producer &quot; + inputNumber);\n        insertData.add(inputNumber);\n\n    }\n\n}\n\n</code></pre>\n"},{"comments":[{"comment_id":134508505,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android-application\">How do I pass data between Activities in Android application?</a>"}],"last_activity_date":1684339183,"question_id":11037643,"body":"<p>I have a screen where I store a phone number then go to another screen and launch the main part of the activity where I send a text massage where I am trying to get the number I entered in the first activity. I have all the code in to send message but it will not get the number from the previous activity. Here is my code form the first activity:</p>\n<pre><code>public class StoreNumberActivity extends Host_Setting_PageActivity {\n     /** Called when the activity is first created. */\n    @Override\n   \n\n     public void onCreate(Bundle savedInstanceState) {\n            super.on``Create(savedInstanceState);\n            setContentView(R.layout.notificationsettings);\n            \n            final EditText editText= (EditText) findViewById(R.id.HostPhoneNumber);\n            \n             //Juston class to schedule edit\n            Button Save = (Button) findViewById(R.id.SaveBtn);\n            Save.setOnClickListener(new View.OnClickListener() {\n                public void onClick(View view) {\n                    Toast.makeText(StoreNumberActivity.this, &quot;Number was Saved Successfully&quot;, Toast.LENGTH_LONG).show();\n              \n                }\n            });\n             Button Send = (Button) findViewById(R.id.SendBtn);\n              Send.setOnClickListener(new View.OnClickListener() {\n                  public void onClick(View view) {\n                      String Number  =  editText.getText().toString();\n                      Intent myIntent = new Intent(StoreNumberActivity.this, Host_Setting_PageActivity.class);\n                      myIntent.putExtra(&quot;Phone Num&quot;, Number);\n                      startActivity(myIntent);\n                  }\n    \n</code></pre>\n<p>and my code from the second activity:</p>\n<pre><code> public void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    \n    \n    /** setting the view of the activity to xml */\n    setContentView(R.layout.messageme);\n    final Bundle bundle = getIntent().getExtras();\n    \n    final EditText editText= (EditText) findViewById(R.id.yourname);\n    final EditText phonenumber= (EditText) findViewById(R.id.phone);\n    final EditText emailaddress= (EditText) findViewById(R.id.email);\n    final EditText messagebox= (EditText) findViewById(R.id.messages);\n    final EditText number = (EditText) findViewById(R.id.HostPhoneNumber);\n    \n    button= (Button) findViewById(R.id.btn);\n    button.setOnClickListener(new View.OnClickListener() {\n     \n    public void onClick(View v) {\n    // TODO Auto-generated method stub\n        Intent myIntent = getIntent(); // this is just for example purpose\n        myIntent.getStringExtra(&quot;PhoneNum&quot;);\n        String Number = bundle.getString(&quot;Phone Num&quot;);\n        String Name  =  editText.getText().toString();\n        String Phone  = phonenumber.getText().toString();\n        String Email  = emailaddress.getText().toString();\n        String Message  = messagebox.getText().toString();\n    \n        \n        \n        sendSMS(Number, &quot;Name: &quot; + Name + &quot;\\n&quot; + &quot;\\n&quot; + &quot;Email: &quot; + Email + &quot;\\n&quot; + &quot;\\n&quot; + &quot;Phone: &quot; + Phone + &quot;\\n&quot; + &quot;\\n&quot; + Message);\n    }\n</code></pre>\n"},{"comments":[{"comment_id":134504957,"body":"Welcome to Stack Overflow! Please clarify your specific problem or add additional details to highlight exactly what you need.  As it&#39;s currently written, it’s hard to tell exactly what you&#39;re asking. See the  <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask page</a> for help clarifying this question. Include the desired behavior, a specific problem or error and the shortest code necessary to  reproduce the issue. See: <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."}],"last_activity_date":1684339083,"question_id":76274022,"body":"<p>ERROR [io.undertow.request] (default task-2) UT005023: Exception handling request to /SOPRS/: java.lang.IllegalStateException\nat com.sun.faces.context.FacesContextImpl.assertNotReleased(FacesContextImpl.java:712)\nat com.sun.faces.context.FacesContextImpl.getAttributes(FacesContextImpl.java:239)\nat org.richfaces.context.ExtendedPartialViewContext.setInstance(ExtendedPartialViewContext.java:55)\nat org.richfaces.context.ExtendedPartialViewContext.release(ExtendedPartialViewContext.java:64)\nat org.richfaces.context.ExtendedPartialViewContextImpl.release(ExtendedPartialViewContextImpl.java:424)\nat com.sun.faces.context.FacesContextImpl.release(FacesContextImpl.java:598)\nat org.primefaces.context.PrimeFacesContext.release(PrimeFacesContext.java:53)\nat javax.faces.webapp.FacesServlet.service(FacesServlet.java:677)\nat io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:85)\nat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)\nat nissan.asf.soprs.filter.LoginFilter.doFilter(LoginFilter.java:206)\nat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)\nat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\nat nissan.asf.soprs.filter.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:35)\nat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)\nat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\nat net.balusc.http.multipart.MultipartFilter.doFilter(MultipartFilter.java:74)\nat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)\nat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\nat io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)\nat io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\nat io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\nat org.wildfly.extension.undertow.security.SecurityContextAssociationHandler.handleRequest(SecurityContextAssociationHandler.java:78)\nat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\nat io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:131)\nat io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\nat io.undertow.server.handlers.DisableCacheHandler.handleRequest(DisableCacheHandler.java:33)\nat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\nat io.undertow.security.handlers.AuthenticationConstraintHandler.handleRequest(AuthenticationConstraintHandler.java:53)\nat io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\nat io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\nat io.undertow.servlet.handlers.security.ServletSecurityConstraintHandler.handleRequest(ServletSecurityConstraintHandler.java:59)\nat io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)\nat io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)\nat io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)\nat io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\nat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\nat org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\nat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\nat org.wildfly.extension.undertow.deployment.GlobalRequestControllerHandler.handleRequest(GlobalRequestControllerHandler.java:68)\nat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\nat io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:292)\nat io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:81)\nat io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:138)\nat io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:135)\nat io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)\nat io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\nat org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)\nat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1508)\nat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1508)\nat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1508)\nat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1508)\nat org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1508)\nat io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:272)\nat io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:81)\nat io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:104)\nat io.undertow.server.Connectors.executeRootHandler(Connectors.java:326)\nat io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:812)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\nat java.lang.Thread.run(Thread.java:748)</p>\n<p>Change the jar version of weld in the pom.xml.\nchecked the faces servlet settings in the web.xml</p>\n"},{"comments":[{"comment_id":134498728,"body":"Is the application using PUSH with LONG_POLLING transport?"},{"comment_id":134500768,"body":"When you say &quot;Locally this works 100%&quot;: have you tried to stress this claim?   Or in other words, what kind of load triggers this error?  Can you already reproduce with two browser windows open - or do you need a load tester to make it finally tip over?"},{"comment_id":134502274,"body":"I switched the polling transport mode to LONG_POLLING, but the issue still occurs. It might be slightly less often, I&#39;m not sure. The error also occurs with just me on the test server, not even using more than 1 browser. I increased the memory of the instance, in case it was very aggressive garbage collection, but this also did not help."}],"last_activity_date":1684338965,"question_id":76270077,"body":"<p>I have the following view, which loads its data asynchronously:</p>\n<pre><code>@Route(value = NewsAdminView.ROUTE)\n@RequiredArgsConstructor\npublic class NewsAdminView extends VerticalLayout {\n    public static final String ROUTE = &quot;&quot;;\n    private final Grid&lt;News&gt; grid = new Grid&lt;&gt;(News.class);\n    private final NewsService service;\n\n    @Override\n    protected void onAttach(final AttachEvent attachEvent) {\n        if (attachEvent.isInitialAttach()) {\n            addComponents();\n\n            final UI ui = attachEvent.getUI();\n            service.getNews().subscribe(items -&gt; updateItems(ui, items), t -&gt; GenericNotifications.graphQlError(ui, t));\n        }\n    }\n\n    private void updateItems(final UI ui, final List&lt;News&gt; news) {\n        ui.access(() -&gt; {\n            grid.setItems(this.newsList);\n            grid.setEnabled(true);\n        });\n    }\n}\n</code></pre>\n<p>The service simply passes the correct query to my GraphQL client:</p>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class NewsService {\n    private final GraphQlService graphQlService;\n\n    public Mono&lt;List&lt;News&gt;&gt; getNews() {\n        final String query = &quot;&quot;&quot;\n            query NewsQuery {\n                allNews {\n                    author\n                    body\n                    title\n                }\n            }&quot;&quot;&quot;;\n\n        return graphQlService.queryList(query, &quot;allNews&quot;, News.class);\n    }\n}\n</code></pre>\n<p>And the GraphQlService finally sends the request via a Spring HttpGraphQlClient. This client needs to be configured for OAuth2 authentication, as the GraphQL endpoint is protected as a resource server.</p>\n<pre><code>@Service\npublic class GraphQlService {\n    private final HttpGraphQlClient client;\n\n    public GraphQlService(final WebClient.Builder webClientBuilder,\n        final ClientRegistrationRepository clientRegistrationRepository,\n        final OAuth2AuthorizedClientRepository oAuth2AuthorizedClientRepository,\n        final @Value(&quot;${graphql.baseUrl}&quot;) String baseUrl) {\n        final var oauth2Client = new ServletOAuth2AuthorizedClientExchangeFilterFunction(\n            clientRegistrationRepository, oAuth2AuthorizedClientRepository);\n        webClientBuilder.apply(oauth2Client.oauth2Configuration())\n            .defaultRequest(request -&gt; request.attributes(clientRegistrationId(&quot;custom&quot;)));\n        client = HttpGraphQlClient.builder(webClientBuilder.build()).url(baseUrl).build();\n    }\n\n    @NotNull\n    public &lt;T&gt; Mono&lt;List&lt;T&gt;&gt; queryList(final String query, final String jsonPath, final Class&lt;T&gt; typeRef) {\n        log.debug(&quot;Running GraphQL list query for allNews, expecting News objects&quot;);\n        return client.document(query).variables(arguments).retrieve(jsonPath).toEntityList(typeRef);\n    }\n}\n</code></pre>\n<p>Locally this works 100% of the time, but on our test servers it randomly, maybe about 50% of the time, produces this exception:</p>\n<pre><code>DEBUG 13997 --- [io-10112-exec-2] service.GraphQlService          : Running GraphQL list query for allNews, expecting News objects\nERROR 13997 --- [oundedElastic-2] reactor.core.publisher.Operators: Operator called default onErrorDropped\n\nreactor.core.Exceptions$ErrorCallbackNotImplemented: org.springframework.graphql.client.GraphQlTransportException: GraphQlTransport error: The request object has been recycled and is no longer associated wi\nth this facade\nCaused by: org.springframework.graphql.client.GraphQlTransportException: GraphQlTransport error: The request object has been recycled and is no longer associated with this facade\n        at org.springframework.graphql.client.DefaultGraphQlClient$DefaultRequestSpec.lambda$execute$1(DefaultGraphQlClient.java:161) ~[spring-graphql-1.1.3.jar!/:1.1.3]\n        at reactor.core.publisher.Mono.lambda$onErrorResume$29(Mono.java:3849) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:94) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onError(FluxMapFuseable.java:142) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onError(FluxMapFuseable.java:142) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onError(MonoFlatMap.java:180) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onError(FluxContextWrite.java:121) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxDoFinally$DoFinallySubscriber.onError(FluxDoFinally.java:119) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onError(MonoPeekTerminal.java:258) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onError(FluxPeekFuseable.java:903) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onError(Operators.java:2210) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxOnAssembly$OnAssemblySubscriber.onError(FluxOnAssembly.java:544) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onError(Operators.java:2210) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.onError(MonoFlatMap.java:180) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxMap$MapSubscriber.onError(FluxMap.java:134) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onError(Operators.java:2210) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondError(MonoFlatMap.java:241) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.MonoFlatMap$FlatMapInner.onError(MonoFlatMap.java:315) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:230) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28) ~[reactor-core-3.5.5.jar!/:3.5.5]\n        at java.base/java.util.concurrent.FutureTask.run(Unknown Source) ~[na:na]\n        at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source) ~[na:na]\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[na:na]\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[na:na]\n        at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\nCaused by: java.lang.IllegalStateException: The request object has been recycled and is no longer associated with this facade\n        at org.apache.catalina.connector.RequestFacade.checkFacade(RequestFacade.java:856) ~[tomcat-embed-core-10.1.8.jar!/:na]\n        Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException:\nError has been observed at the following site(s):\n        *__checkpoint ⇢ Request to POST null [DefaultWebClient]\nOriginal Stack Trace:\n                at org.apache.catalina.connector.RequestFacade.checkFacade(RequestFacade.java:856) ~[tomcat-embed-core-10.1.8.jar!/:na]\n                at org.apache.catalina.connector.RequestFacade.getParameter(RequestFacade.java:304) ~[tomcat-embed-core-10.1.8.jar!/:na]\n                at jakarta.servlet.ServletRequestWrapper.getParameter(ServletRequestWrapper.java:149) ~[tomcat-embed-core-10.1.8.jar!/:na]\n                at org.springframework.security.web.firewall.StrictHttpFirewall$StrictFirewalledRequest.getParameter(StrictHttpFirewall.java:769) ~[spring-security-web-6.0.3.jar!/:6.0.3]\n                at jakarta.servlet.ServletRequestWrapper.getParameter(ServletRequestWrapper.java:149) ~[tomcat-embed-core-10.1.8.jar!/:na]\n                at jakarta.servlet.ServletRequestWrapper.getParameter(ServletRequestWrapper.java:149) ~[tomcat-embed-core-10.1.8.jar!/:na]\n                at org.springframework.security.oauth2.client.web.DefaultOAuth2AuthorizedClientManager$DefaultContextAttributesMapper.apply(DefaultOAuth2AuthorizedClientManager.java:298) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\n                at org.springframework.security.oauth2.client.web.DefaultOAuth2AuthorizedClientManager$DefaultContextAttributesMapper.apply(DefaultOAuth2AuthorizedClientManager.java:291) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\n                at org.springframework.security.oauth2.client.web.DefaultOAuth2AuthorizedClientManager.lambda$authorize$2(DefaultOAuth2AuthorizedClientManager.java:168) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\n                at org.springframework.security.oauth2.client.OAuth2AuthorizationContext$Builder.attributes(OAuth2AuthorizationContext.java:185) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\n                at org.springframework.security.oauth2.client.web.DefaultOAuth2AuthorizedClientManager.authorize(DefaultOAuth2AuthorizedClientManager.java:167) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\n                at org.springframework.security.oauth2.client.web.reactive.function.client.ServletOAuth2AuthorizedClientExchangeFilterFunction.lambda$authorizeClient$22(ServletOAuth2AuthorizedClientExchangeFilterFunction.java:485) ~[spring-security-oauth2-client-6.0.3.jar!/:6.0.3]\n                at reactor.core.publisher.MonoSupplier.call(MonoSupplier.java:67) ~[reactor-core-3.5.5.jar!/:3.5.5]\n                at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:227) ~[reactor-core-3.5.5.jar!/:3.5.5]\n                at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68) ~[reactor-core-3.5.5.jar!/:3.5.5]\n                at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28) ~[reactor-core-3.5.5.jar!/:3.5.5]\n                at java.base/java.util.concurrent.FutureTask.run(Unknown Source) ~[na:na]\n                at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source) ~[na:na]\n                at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[na:na]\n                at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[na:na]\n                at java.base/java.lang.Thread.run(Unknown Source) ~[na:na]\n</code></pre>\n<p>I suspect some kind of race condition between the GraphQL query being sent and the HTTP request being cleaned up. But I can't figure out how to prevent the HTTP request from being recycled.</p>\n<p>I compared my code to this Webinar on YouTube: <a href=\"https://www.youtube.com/watch?v=7Mr_pQc_rxA\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=7Mr_pQc_rxA</a> and its corresponding code base here: <a href=\"https://github.com/eriklumme/reactive-vaadin-demo\" rel=\"nofollow noreferrer\">https://github.com/eriklumme/reactive-vaadin-demo</a>. It is a little bit older, but seems to be basically identical (sans the OAuth2 authentication and usage of GraphQL, but which is based on reactive Monos).</p>\n<p>I have aslo tried a GraphQlService that does not rely on HTTP requests, which works for this error, but prevents the automatic renewal of OAuth2 access tokens:</p>\n<pre><code>@Service\npublic class NoHttpRequestGraphQlService {\n    private final HttpGraphQlClient client;\n\n    public NoHttpRequestGraphQlService(final WebClient.Builder webClientBuilder,\n        final ClientRegistrationRepository clientRegistrationRepository,\n        final OAuth2AuthorizedClientService oAuth2AuthorizedClientService,\n        final @Value(&quot;${graphql.baseUrl}&quot;) String baseUrl) {\n        final var authorizedClientManager = new AuthorizedClientServiceOAuth2AuthorizedClientManager(clientRegistrationRepository, oAuth2AuthorizedClientService);\n        final var oauth2Client = new ServletOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\n        final var authorizationFailureHandler = new RemoveAuthorizedClientOAuth2AuthorizationFailureHandler(\n                (clientRegistrationId, principal, attributes) -&gt; oAuth2AuthorizedClientService.removeAuthorizedClient(clientRegistrationId, principal.getName()));\n        authorizedClientManager.setAuthorizationFailureHandler(authorizationFailureHandler);\n        oauth2Client.setAuthorizationFailureHandler(authorizationFailureHandler);\n        webClientBuilder.apply(oauth2Client.oauth2Configuration())\n            .defaultRequest(request -&gt; request.attributes(clientRegistrationId(&quot;custom&quot;)));\n        client = HttpGraphQlClient.builder(webClientBuilder.build()).url(baseUrl).build();\n    }\n\n    @NotNull\n    public &lt;T&gt; Mono&lt;List&lt;T&gt;&gt; queryList(final String query, final String jsonPath, final Class&lt;T&gt; typeRef) {\n        log.debug(&quot;Running GraphQL list query for allNews, expecting News objects&quot;);\n        return client.document(query).variables(arguments).retrieve(jsonPath).toEntityList(typeRef);\n    }\n}\n</code></pre>\n<p>I would prefer the HTTP request based version (as that is the actual environment where this code runs), but I would settle for the access token renewal working with my workaround.</p>\n<p>EDIT: After looking into this further, I believe the OAuth2 authorization process is requesting the OAuth2 scope parameter from a stale request. I replaced the default implementation <code>DefaultOAuth2AuthorizedClientManager.DefaultContextAttributesMapper</code> with an empty one (as we are not using scopes at the moment). There seem to be no further calls to the stored request, so this might work for us. I'll investigate further and/or improve the 'dirty hack' solution I have now. Due to the long weekend here I'll only be back on monday.</p>\n"},{"last_activity_date":1684338613,"question_id":76273960,"body":"<p>I use Spring Security 6.0.3.\nI have a RoleHierarchy Bean</p>\n<pre><code>@Bean\npublic RoleHierarchy roleHierarchy() {\n    RoleHierarchyImpl hierarchy = new RoleHierarchyImpl();\n    hierarchy.setHierarchy(\n            ADMIN.getRole()\n                    + IS_STRONGER_THAN\n                    + STAFF.getRole()\n                    + IS_STRONGER_THAN\n                    + USER.getRole()\n                    + IS_STRONGER_THAN\n                    + GUEST.getRole());\n    return hierarchy;\n}\n</code></pre>\n<p>and on earlier versions of SpringSecurity i was able to just declare</p>\n<pre><code>// @Autowired HttpSecurity http;\nhttp.authorizeHttpRequests()\n        .requestMatchers(LOGOUT_URL_PATTERN)\n        .hasRole(GUEST.name())\n        .requestMatchers(ADMIN_URL_PATTERN, API_URL_PATTERN, MAILING_URL_PATTERN)\n        .hasRole(ADMIN.name())\n</code></pre>\n<p>and it worked without lot of declarations! (maybe a little bit)</p>\n<p>but now, on fresh versions of Spring Security, i need to do additional work. I need to declare something like</p>\n<pre><code>@Bean\npublic AuthorityAuthorizationManager&lt;RequestAuthorizationContext&gt;\n        guestAuthorityAuthorizationManager() {\n    AuthorityAuthorizationManager&lt;RequestAuthorizationContext&gt;\n            objectAuthorityAuthorizationManager =\n                    AuthorityAuthorizationManager.hasAuthority(GUEST.getRole());\n    objectAuthorityAuthorizationManager.setRoleHierarchy(roleHierarchy());\n    return objectAuthorityAuthorizationManager;\n}\n</code></pre>\n<p>for EACH role separatedluy and then write</p>\n<pre><code>http.authorizeHttpRequests()\n        .requestMatchers(LOGOUT_URL_PATTERN)\n        .access(guestAuthorityAuthorizationManager())\n        .requestMatchers(ADMIN_URL_PATTERN, API_URL_PATTERN, MAILING_URL_PATTERN)\n        .hasRole(adminAuthorityAuthorizationManager())\n...\n</code></pre>\n<p>It is a little bit clumsy as for me.</p>\n<p>Is there any easier way to inject RoleHierarchy?</p>\n"},{"comments":[{"comment_id":30615320,"body":"What language is this?"},{"comment_id":30615428,"body":"java, sorry for not mentioning"}],"answers":[{"answer_id":20484609,"body":"<p>Try this,</p>\n\n<pre><code>if (x == (int)x)\n{\n   // Number is integer\n}\n</code></pre>\n"}],"last_activity_date":1684338555,"question_id":20484542,"body":"<p>I've got an if statement which accepts integers and i want to use an exception for when the input is anything but an integer value, so basically the users can't enter text when it requires a number. Does anyone know how to do this, would be appreciated! :D I know how to do the exception, just not for checking the variable type\nJAVA!</p>\n"},{"comments":[{"comment_id":134504556,"body":"Please clarify which kinds of signature you want to remove. First of all it looks like you want to remove <i>digital signatures</i>, not simple electronic ones consisting just of e.g. an image of an ink signature. But there are different kinds of digital signatures, some kinds are specified as <i>interoperable signatures</i> in the PDF specification but the spec also allows for other, custom kinds. Thus, which do you want to remove?"},{"comment_id":134504649,"body":"That being asked, please be aware that the <b>Type</b> <i>Sig</i> and the <b>Type</b> <i>Annot</i> are optional. Furthermore, <b>FT</b> <i>Sig</i> and <b>Subtype</b> <i>Widget</i> only are in the same dictionary if field dictionary and widget dictionary are merged - they indeed often are merged but not always. And <i>usage rights</i> signatures are not necessarily indirect objects, so you won&#39;t necessarily find them directly by walking the cross references."},{"comment_id":134505673,"body":"Any digital signature, i work with a large pdfs flow in my app, i need to remove all signatures before the user upload the pdf file in my app, because when he sign on my app, can have signature conflicts. This conflict will appears when i will create a new hash, above older broken signature, so i remove all the signatures before upload on my app. The second implementation will compose the remove signature method, with the first implementation. Only the first implementation   works well, but not for all cases."},{"comment_id":134505676,"body":"Do you know if exists more than this two dictionary patterns for signatures?"},{"comment_id":134514083,"body":"If you create an app for pdf signing, you surely have read the relevant sections of the pdf specification, haven&#39;t you? That should make clear all about interoperable signature structures... <i>&quot;because when he sign on my app, can have signature conflicts.&quot;</i> - this sounds like you either forgot to apply changes as incremental updates or you apply changes that aren&#39;t allowed to signed documents. Or you attempt to sign pdfs a previous signer did not intend to signed by others."},{"comment_id":134519494,"body":"Regardless of everything you said, my goal is to remove all signatures from the document. My question is if my methods are meeting my objective?"},{"comment_id":134523302,"body":"<i>&quot;Regardless of everything you said, my goal is to remove all signatures from the document. My question is if my methods are meeting my objective?&quot;</i> - No, obviously not. How should your code recognize simple electronic signatures like images of ink signatures? And your methods don&#39;t even find all interoperative digital signatures, see my remarks on optional entries above."},{"comment_id":134534138,"body":"But the first method can remove several tipes of signatures, the second can remove unusal signatures, it have works for me.  Have you ever worked with PDF on a large scale or just read the documentation or ISO? Can you tell me where I can find these patterns? Do you have any publications or could you help me with this?"}],"last_activity_date":1684338442,"question_id":76273283,"body":"<p>I have find problems when i tried to remove signatures from PDF's With Itext 5.1.</p>\n<p>This is my Method:</p>\n<pre><code>PdfStamper stamper = new PdfStamper(reader, os);\nAcroFields acroFields = reader.getAcroFields();\nfor (String name : acroFields.getSignatureNames()) {\n    acroFields.removeField(name);\n}\nstamper.close();\noutput = os.toByteArray();\n</code></pre>\n<p>This method works, but not for all PDFs, some PDFs does not find the signatures with this.</p>\n<p>Then i found objects on the PDF that flaged SIG, so i created a new method to complement the signature cleanup method:</p>\n<pre><code>private void removeSignatureObjects(PdfReader reader) {\n    for (int i = 1; i &lt;= reader.getXrefSize(); i++) {\n        PdfObject object = reader.getPdfObject(i);\n        if (object != null) {\n            if (object.isDictionary()) {\n                PdfDictionary dict = (PdfDictionary) object;\n                if (validateObjectSign(dict)) {\n                    dict.clear();\n                    reader.resetReleasePage();\n                }\n            }\n        }\n    }\n}\n\nprivate boolean validateObjectSign(PdfDictionary dict) {\n    return PdfName.SIG.equals(dict.get(PdfName.TYPE))\n            ||\n            (PdfName.ANNOT.equals(dict.get(PdfName.TYPE)) &amp;&amp; PdfName.WIDGET.equals(dict.get(PdfName.SUBTYPE)) &amp;&amp;\n            PdfName.SIG.equals(dict.getAsName(PdfName.FT)));\n}\n</code></pre>\n<p>It works from objects i've tested it, but now i don't know if this covers all the pdf signature objects.</p>\n<p>I need help to knowing, what is the pattern of signature objects in PDFs?</p>\n"},{"comments":[{"comment_id":134466100,"body":"Security concern of what library exactly? Or security concern in general?"},{"comment_id":134491413,"body":"I apologize. There was no security concern. Our deployment/app security team is pushing for that update. I have tried multiple things but have had no luck rendering the pdf image."},{"comment_id":134496884,"body":"Version 9.1.22 is still using an old version of openPDF. Try to exclude this version and use the latest one. <code>&lt;exclusion&gt;     &lt;groupId&gt;com.github.librepdf&lt;&#47;groupId&gt;     &lt;artifactId&gt;openpdf&lt;&#47;artifactId&gt;    &lt;&#47;exclusion&gt;</code> and then import the latest one <code>&lt;dependency&gt;     &lt;groupId&gt;com.github.librepdf&lt;&#47;groupId&gt;     &lt;artifactId&gt;openpdf&lt;&#47;artifactId&gt;     &lt;version&gt;1.3.30&lt;&#47;version&gt; &lt;&#47;dependency&gt;</code> And then try again..."},{"comment_id":134504668,"body":"@Lonzak, I updated my pom.xml on my thread based on your suggestion. Does that look correct?"},{"comment_id":134554343,"body":"Yes it looks correct. To be really sure check you final build for those dependencies: There should be only version 1.3.30 in there but not version 1.3.11. When that&#39;s the case then try again..."}],"last_activity_date":1684338419,"question_id":76245031,"body":"<p>We recently upgraded flying-saucer-itext from 9.1.15 to 9.15.22, and the images are no longer rendering. We are using Docusign 3.23 SDK to fetch the signature images and try to render those in our app.</p>\n<p>This is some part of the code.</p>\n<p>pom.xml is</p>\n<pre><code>&lt;dependency&gt;\n      &lt;groupId&gt;org.xhtmlrenderer&lt;/groupId&gt;\n      &lt;artifactId&gt;flying-saucer-pdf-itext5&lt;/artifactId&gt;\n      &lt;version&gt;9.1.22&lt;/version&gt;\n      &lt;exclusions&gt;\n        &lt;exclusion&gt;\n          &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n          &lt;artifactId&gt;bcprov-jdk14&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n        &lt;exclusion&gt;\n          &lt;groupId&gt;com.github.librepdf&lt;/groupId&gt;\n          &lt;artifactId&gt;openpdf&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n      &lt;/exclusions&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;     \n      &lt;groupId&gt;com.github.librepdf&lt;/groupId&gt;     \n      &lt;artifactId&gt;openpdf&lt;/artifactId&gt;     \n      &lt;version&gt;1.3.30&lt;/version&gt; \n&lt;/dependency&gt;\n.\n.\n.\n &lt;docusign.sdk.version&gt;3.23.0&lt;/docusign.sdk.version&gt;\n\n</code></pre>\n<p>The code logic is (truncated for privacy concerns)</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.stringtemplate.v4.DateRenderer;\nimport org.stringtemplate.v4.ST;\nimport org.stringtemplate.v4.STRawGroupDir;\nimport org.stringtemplate.v4.StringRenderer;\nimport org.xhtmlrenderer.pdf.ITextRenderer;\n.\n.\n.\nsignatureImageStringEncoded = Base64.getEncoder().encodeToString(signatureImage);\n.\n.\n</code></pre>\n<p>and rendering this in a .st (String template ST4) file</p>\n<pre><code> &lt;img src=&quot;data:image/gif;base64, signatureImageStringEncoded&quot; alt=&quot;Signature&quot; width=&quot;200&quot; height=&quot;75&quot;/&gt;\n</code></pre>\n<p>I went back to the 9.1.15 package, and it is rendering the image as expected, but our deployment team is pushing to update it to 9.1.22.</p>\n<p>I tried referring <a href=\"https://stackoverflow.com/questions/11477065/using-flying-saucer-to-render-images-to-pdf-in-memory\">to this page</a> but no luck.</p>\n"},{"comments":[{"comment_id":36084081,"body":"The compiler doesn&#39;t know that your if statement covers all possible cases. If you remove the <code>if(x&gt;=0.67)</code> it should do the same thing and will compile."}],"answers":[{"comments":[{"comment_id":36084303,"body":"Note that if you get to the first else, then x MUST BE &gt; 0.33, so you don&#39;t need that condition. The chain can be &quot;if x&lt;.33 else if x&lt;.67 else&quot;. Alternately, you can initialize y to 3 and skip the second else clause. Alternately, you can use two ternaries in the initialization."},{"comment_id":36116468,"body":"I actually figured it out at school! i just initialised y where i declared it. Like this &#39;int y = 0&#39;! Thanks for ur help!!"}],"answer_id":23523708,"body":"<p><code>javac</code> is not smart enough to realize that the way your conditions are constructed, one of them will always be true.</p>\n\n<p>You can rewrite your if-statements to make <code>javac</code> realize one branch will always be triggered:</p>\n\n<pre><code>int y;\nif(x&lt;=0.33)\n{\n    y=1;\n}\nelse if(x&gt;0.33 &amp;&amp; x&lt;0.67)\n{\n    y=2;\n}\nelse // This only triggers when x &gt;= 0.67, so no need to check\n{\n    y=3;\n}\n</code></pre>\n\n<p>Now <code>javac</code> sees that if the first two don't trigger, the last will, so <code>y</code> will always have a value.</p>\n\n<p>You can alternatively add an <code>else</code> branch with an error, in case someone breaks the conditions:</p>\n\n<pre><code>int y;\nif(x&lt;=0.33)\n{\n    y=1;\n}\nelse if(x&gt;0.33 &amp;&amp; x&lt;0.67)\n{\n    y=2;\n}\nelse if(x &gt;= 0.67)\n{\n    y=3;\n}\nelse \n{\n    // This should never happen\n    throw new IllegalArgumentException(\"Something's gone terribly wrong for \" + x);\n}\n</code></pre>\n\n<p>This also compiles, and if someone later decides to skew the numbers and turns the first condition into <code>x &lt;= 0.2</code> but forgets to update the other condition, you'll get an exception at runtime.</p>\n"}],"last_activity_date":1684338297,"question_id":23523539,"body":"<pre><code>import java.util.Scanner;\npublic class RPS\n{\npublic void show()\n{\n    int i;\n    System.out.println(\"1 - Rock          2 - Paper        3 - Scissor\");\n    Scanner in = new Scanner(System.in);\n    i = in.nextInt();\n    double x = Math.random();\n    int y;\n    if(x&lt;=0.33)\n    {\n        y=1;\n    }\n    else if(x&gt;0.33 &amp;&amp; x&lt;0.67)\n    {\n        y=2;\n    }\n    else if(x&gt;=0.67)\n    {\n        y=3;\n    }\n    for(;;)    \n    {\n        if(i==y)\n        System.out.println(\"It's a draw!\");\n        else if(i==1 &amp;&amp; y==2)\n        System.out.println(\"Computer wins!\");\n        else if(i==1 &amp;&amp; y==3)\n        System.out.println(\"You win!\");\n        else if(i==2 &amp;&amp; y==1)\n        System.out.println(\"You win!\");\n        else if(i==2 &amp;&amp; y==3)\n        System.out.println(\"Computer wins!\");\n        else if(i==3 &amp;&amp; y==1)\n        System.out.println(\"Computer wins!\");\n        else if(i==3 &amp;&amp; y==2)\n        System.out.println(\"You win!\");\n        else\n        System.out.println(\"Error!\");\n    }\n    }\n }\n</code></pre>\n\n<p>Whats wrong?\nIt gives an error that variable y might not have been intialised in the if's in the for loop.\nI have assigned a value to y in the previous if-else section.\nso why isnt it getting intialised?</p>\n"},{"answers":[{"answer_id":76273886,"body":"<p>It is okay for <code>B.someFunction()</code> to return a class more derived than <code>A.someFunction()</code>. It is still the same method, and the override works.</p>\n<p>However, it is not okay for <code>B.someFunction()</code> to <em><strong>accept a parameter</strong></em> of a class more derived than <code>A.someFunction()</code>.  When you try to do that, the override breaks.</p>\n<p>Think of it this way: someone may have a reference to an <code>A</code> which is in fact an instance of <code>B</code>.  They may invoke it passing it an actual <code>A</code>. However, <code>B.someFunction()</code> expects an instance of <code>B</code>, and it will try to invoke methods of <code>B</code> which do not exist in the <code>A</code> that was passed. That would not work.</p>\n"}],"last_activity_date":1684338090,"question_id":76273822,"body":"<p>I have the classes</p>\n<pre class=\"lang-java prettyprint-override\"><code>abstract class A&lt;T&gt; {\n\n    public abstract A&lt;T&gt; someFunction(A&lt;?&gt; obj);\n}\n\npublic class B extends A&lt;Integer&gt;{\n\n    public B someFunction(B obj){...}\n}\n</code></pre>\n<p>I get an error that says <code>Class B must be declared abstract or must implement the abstract method someFunction(A&lt;?&gt; obj) in A</code>. My return type and parameter type are children of A. I don't understand why I am still getting this error.</p>\n<p><a href=\"https://stackoverflow.com/questions/40072186/how-to-use-abstract-class-child-type-as-the-type-of-an-abstract-methods-parame\">This</a> is one solution I see where I can change <code>A</code> to something like <code>A&lt;T, ChildName&gt;</code> and use <code>ChildName</code> as the abstract function's parameter type. Is there a different way of doing this?</p>\n"},{"comments":[{"comment_id":89736899,"body":"Not sure what you try to achieve here. Do you want a keep-alive like event which is merged into the main flow? Do you want to execute an action after the source didn&#39;t produce an item without cancelling the source?"},{"comment_id":89737124,"body":"@akarnokd, the main criteria is described in the question. I don&#39;t care about the source, and I don&#39;t want to keep anything alive."},{"comment_id":89737652,"body":"Sounds like you need <a href=\"http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Observable.html#ambArray-io.reactivex.ObservableSource...-\" rel=\"nofollow noreferrer\"><code>Observable.ambArray()</code></a>."},{"comment_id":89740599,"body":"@akarnokd, looks like it will fit, thanks"}],"answers":[{"answer_id":76273880,"body":"<p>I ended up using <a href=\"http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Observable.html#ambArray-io.reactivex.ObservableSource...-\" rel=\"nofollow noreferrer\">Observable.ambArray()</a>.</p>\n<p>Thanks to the @akarnokd comment</p>\n"}],"last_activity_date":1684338063,"question_id":51382154,"body":"<p>Despite that my question seems very common I haven't found any <em>nice</em> solution to this. The situation, of course, is solvable, but I want to solve it in more RX way, if you know what I mean.</p>\n\n<p><strong>The situation</strong></p>\n\n<p>I have an <code>Observable</code> that emits some events. What I want is to subscribe for next upcoming event, and do something, <strong>if</strong> there will be no events emitted for 1 second. So, if something is emitted - call method <code>doSomething()</code>. If nothing was emitted during 1 second, call method <code>doSomething()</code>.</p>\n\n<p><strong>Possible solution</strong></p>\n\n<p>One of the possible solutions is to create <code>Completable.timer(1000)</code>, subscribe for both, and wait for first to emit / complete. Something like <code>Observable.combineLatest</code> except I don't have to wait both, but just first event to arrive. But I haven't found such functionality in RX2 also.</p>\n\n<p><strong>Please advice</strong></p>\n\n<p>Please advice solution for both situations, if possible, is there a way to set a waiting delay for next emitted item, or to pick first emitted from several observables?</p>\n\n<p>Thanks!</p>\n"},{"answers":[{"answer_id":76273877,"body":"<p>This seems like a mediocre solution to what seems like a common problem, but it does work. Enable this <code>filterClass</code> in the swagger config:</p>\n<pre><code>package com.example;\n\nimport io.swagger.v3.core.filter.AbstractSpecFilter;\nimport io.swagger.v3.oas.models.OpenAPI;\nimport io.swagger.v3.oas.models.PathItem;\nimport io.swagger.v3.oas.models.Paths;\n\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Map.Entry;\nimport java.util.Optional;\n\npublic class PathSpecFilter extends AbstractSpecFilter {\n    private static final String PUBLIC_PATH = &quot;/thePublicApiPrefix&quot;;\n\n    @Override\n    public Optional&lt;OpenAPI&gt; filterOpenAPI(final OpenAPI openAPI, final Map&lt;String, List&lt;String&gt;&gt; params, final Map&lt;String, String&gt; cookies, final Map&lt;String, List&lt;String&gt;&gt; headers) {\n        final Optional&lt;OpenAPI&gt; opt = super.filterOpenAPI(openAPI, params, cookies, headers);\n        return opt.map(openapi -&gt; {\n            openapi.setPaths(fix(openapi.getPaths()));\n            return openapi;\n        });\n    }\n\n    private Paths fix(final Paths paths) {\n        final Paths next = new Paths();\n\n        for (final Entry&lt;String, PathItem&gt; entry : paths.entrySet()) {\n            final String key = entry.getKey().startsWith(PUBLIC_PATH)\n                    ? entry.getKey().substring(PUBLIC_PATH.length())\n                    : entry.getKey();\n            next.put(key, entry.getValue());\n        }\n\n        return next;\n    }\n}\n</code></pre>\n"}],"last_activity_date":1684338043,"question_id":76266845,"body":"<p>My public API is served by my main web application but on a different domain. So that the paths don't conflict with my normal webapp paths, the public API endpoints have a hidden prefix. That is, when someone visits <code>https://api.example.com/foo</code> they are internally forwarded to <code>/publicApi/foo</code>; requests to <code>https://www.example.com/foo</code> are processed normally.</p>\n<p>Of course this means the JAX-RS classes for my API are all annotated like this:</p>\n<pre><code>@Path(&quot;/publicApi&quot;)\npublic class PublicApiFooResource {\n    @Path(&quot;/foo&quot;)\n    public Foo getFoo() {...}\n}\n</code></pre>\n<p>Using <code>swagger-jaxrs2</code> (v2.2.7), this generates an openapi document that includes <code>/publicApi</code>:</p>\n<pre><code>paths: {\n    /publicApi/foo: {\n        get: { ... } etc\n</code></pre>\n<p>How can I get swagger-jaxrs2 to ignore the hidden leading part of the path? The path, from the world's perspective, is <code>/foo</code>; the internal forward shouldn't leak into the documentation.</p>\n"},{"comments":[{"comment_id":134503944,"body":"There&#39;s no generic answer to this. If it&#39;s a method only applicable to <code>DataAdapterImplF</code> then that&#39;s where it should live. If the <code>DataAdapter</code>s live in a list and you need to be able call it regardless of implementation then it should be in the interface, with the caveat that calling in on non-<code>DAIF</code>s will always be non-sensical--you could implement a default no-op, but this leads to cognitive overhead because it may not be obvious it&#39;s a no-op for everything except the <code>F</code>s."},{"comment_id":134505068,"body":"My doubt is that how come the <code>DataAdapterImplF</code> is not declared abstract? If the arguments are your problem then you can better encapsulate them into a class and use its reference as the method argument. Inside each implementation you can decide which and all attributes to be used."}],"answers":[{"comments":[{"comment_id":134522785,"body":"<a href=\"https://stackoverflow.com/questions/31922866/why-should-java-8s-optional-not-be-used-in-arguments\">Why should Java 8&#39;s Optional not be used in arguments</a>"}],"answer_id":76273842,"body":"<p>So I think the problem lays in the question you have asked. Interfaces are a very explicit contract, and in your case the contract is:</p>\n<p>&quot;<em>You give me three integers and I can calculate you some solution which will also be an integer.</em>&quot;</p>\n<p>Thus, it does not make sense to ask how one would adapt some operation that only takes two integers to this interface. Those are just different things. What you could do is redefine your contract and say:</p>\n<p>&quot;<em>You give me two integers a, b and a third optional integer c, and I can calculate you some solution which will also be an integer.</em>&quot;</p>\n<p>This contract would then look like this:</p>\n<pre><code>public interface DataAdapter {\n\n    int solve(int a, int b, Optional&lt;Integer&gt; c)\n}\n</code></pre>\n"}],"last_activity_date":1684337842,"question_id":76273468,"body":"<pre><code>public interface DataAdapter {\n\n    int solve(int a, int b, int c)\n}\n\n</code></pre>\n<p>Now i have multiple classes which implements this interface something like :</p>\n<pre><code>public class DataAdapterImplA implements DataAdapter {\n\n    int solve(int a, int b, int c) {\n\n        return ...\n    }\n}\n\n</code></pre>\n<pre><code>public class DataAdapterImplB implements DataAdapter {\n\n    int solve(int a, int b, int c) {\n\n        return ...\n    }\n}\n\n</code></pre>\n<p>and similarly multiple others ...</p>\n<p>Now i am adding one more implementing class but with one less parameter in the existing method signature ..something like below :</p>\n<pre><code>public class DataAdapterImplF implements DataAdapter {\n\n    int solve(int a, int b) {\n\n        return ...\n    }\n}\n</code></pre>\n<p>So , question here is how to go about this :</p>\n<ol>\n<li><p>Should i override the existing <code>solve(int, int, int)</code> method only &amp; in my method body i can ignore this and won't use it at all ?</p>\n</li>\n<li><p>should i create a <code>default</code> method <code>solve(int, int)</code> in the interface &amp; override that in my new implementation class ?</p>\n</li>\n</ol>\n<p>or any other better &amp; clean solution ?</p>\n"},{"comments":[{"comment_id":134466996,"body":"<code>JAVA_HOME</code> is frequently misunderstood. The <i>tl;dr</i> is that Java itself doesn&#39;t care about that value. Some applications that <i>use</i> Java might look at it to decide what Java version to launch, but if you simply run <code>java</code> then only what is on your <code>PATH</code> matters."}],"answers":[{"answer_id":76252036,"body":"<p>execute the source command  /etc/profile</p>\n"},{"answer_id":76253348,"body":"<p>In Ubuntu you can run</p>\n<p><code>update-alternatives --list java</code></p>\n<p>then you will get a listing of properly installed JDKs/JREs the operating system knows about.</p>\n<pre><code>/usr/lib/jvm/java-11-openjdk-amd64/bin/java\n/usr/lib/jvm/java-7-oracle/jre/bin/java\n/usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java\n</code></pre>\n<p>then run<br />\n<code>update-alternatives --set &lt;one of the list items&gt;</code> to switch to a different one.</p>\n"}],"last_activity_date":1684337264,"question_id":76251872,"body":"<p>I set JAVA_HOME in .bashrc on my Ubuntu 22.04.2 LTS system, but when I check the version, it's still the old one:</p>\n<pre><code>ruomini@ruomini-XPS-13-9370:~$ echo $JAVA_HOME\n/home/ruomini/jdk-17.0.7\nruomini@ruomini-XPS-13-9370:~$ java -version\nopenjdk version &quot;11.0.18&quot; 2023-01-17\nOpenJDK Runtime Environment (build 11.0.18+10-post-Ubuntu-0ubuntu122.04)\nOpenJDK 64-Bit Server VM (build 11.0.18+10-post-Ubuntu-0ubuntu122.04, mixed \nmode, sharing)\nruomini@ruomini-XPS-13-9370:~$ \n</code></pre>\n<p>UPDATE: I tried what was suggested below but for some reason, it didn't help: Java 17 doesn't appear, even though I installed it in /usr/lib/jvm:</p>\n<pre><code>ruomini@ruomini-XPS-13-9370:~/android-studio/bin$ update- \nalternatives --list java\n\n/usr/lib/jvm/java-11-openjdk-amd64/bin/java\n/usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java\nruomini@ruomini-XPS-13-9370:~/android-studio/bin$ ls -al \n/usr/lib/jvm\ntotal 40\ndrwxr-xr-x   5 root root  4096 May 15 09:31 .\ndrwxr-xr-x 159 root root 16384 Feb 23 18:18 ..\nlrwxrwxrwx   1 root root    10 May 15 09:16 default-java -&gt; jdk-17.0.7\nlrwxrwxrwx   1 root root    21 Jul 18  2019 java-1.11.0- \nopenjdk-amd64 -&gt; java-11-openjdk-amd64\n-rw-r--r--   1 root root  2047 Jan 20 10:07 .java-1.11.0- \nopenjdk-amd64.jinfo\ndrwxr-xr-x   9 root root  4096 Mar  1 06:01 java-11- \nopenjdk-amd64\nlrwxrwxrwx   1 root root    20 Mar 12  2018 java-1.8.0- \nopenjdk-amd64 -&gt; java-8-openjdk-amd64\n-rw-r--r--   1 root root  2764 Jan 24 20:02 .java-1.8.0- \nopenjdk-amd64.jinfo\ndrwxr-xr-x   5 root root  4096 Jun 24  2016 java-8- \nopenjdk-amd64\ndrwxr-xr-x   9 root root  4096 May 15 09:09 jdk-17.0.7\nruomini@ruomini-XPS-13-9370:~/android-studio/bin$ \n</code></pre>\n<p><strong>UPDATE</strong> It turns out that I hadn't properly installed the Java SDK. Once it was installed correctly, the problem went away.</p>\n"},{"comments":[{"comment_id":134500372,"body":"Since this is a students exercise, you could put your connection in singleton, and make all your access that whenever they need it. This is not a design I would recommend for an enterprise application, you usually has a lot of other possibilities there."},{"comment_id":134500379,"body":"Don’t use singletons. That is an anti-pattern."},{"comment_id":134500425,"body":"The question is a bit broad for this forum, but generally you should create a class which encapsulates all the database code. That class can keep a single connection which it opens in the constructor and provides a <code>close()</code> method to close it. Create an instance of that class in your <code>Application</code> subclass <code>start()</code> or <code>init()</code> method, and call it’s <code>close()</code> method from the <code>stop()</code> method. Then just pass that instance to the “scenes” (or controllers if you are using FXML) that need it."},{"comment_id":134500640,"body":"Unless you are writing a high performance server or high traffic client (you aren&#39;t), you don&#39;t need to keep an open database connection, you can just open one when you need data, then shut it.  If you really do want to reuse connections, then use a connection pool (e.g. <a href=\"https://github.com/brettwooldridge/HikariCP\" rel=\"nofollow noreferrer\">hikari</a>).  You could develop your own method for pooling or reusing connections, but I wouldn&#39;t advise it.  A database connection is only a connection, it is not like a stateful web session with session data.  Data is stored in your app or the database, it is not in the connection."},{"comment_id":134500717,"body":"If you are using jdbc for your DB layer, then perhaps review this <a href=\"https://edencoding.com/connect-javafx-with-sqlite/\" rel=\"nofollow noreferrer\">Eden jdbc + JavaFX tutorial</a>, but be careful not to use code or libraries you don&#39;t understand in your assignment.  Note how the eden tutorial uses the try-with-resources method for getting the connection.  The connection isn&#39;t kept, it is released automatically after each operation by the  try-with-resources construct."},{"comment_id":134501106,"body":"For <i>&quot;how to pass the data from a window to the next one&quot;</i>, see <a href=\"https://stackoverflow.com/questions/14187963/passing-parameters-javafx-fxml\" title=\"passing parameters javafx fxml\">stackoverflow.com/questions/14187963/&hellip;</a>"},{"comment_id":134503723,"body":"I assume your problem is to pass the object between the windows(init it on login and then use it later) for beginners this can be done via static class/pass as a parameter to the controllers, more advance technic will use dependency injection for that. so to use a static class you just need a static class with 1 DB object that creates a new one on init and then you can use getter from the static class to get it in any place in your application"}],"last_activity_date":1684336785,"question_id":76271293,"body":"<p>I'm developing an application which needs to be connected to a database through the whole time its active, opening the connection from the moment I log in till I close whatever scene I'm in.</p>\n<p>The problem is that my teacher hasn't explained how to maintain the connection the whole time the app is active, nor how to pass the data from a window to the next one. Can you explain me how to do it?</p>\n<p>The program is simple:</p>\n<p>A login screen starts the connection with the database, where I'll hold the usernames and passwords for the users. Then, the home screen, with four more screens that can be reached through buttons: Profile, Shop, Pokedex, Clicker. I have tried to pass the data through windows from an array in an external class, but what I need is to keep the connection with the database open, depending on the user I have logged with.</p>\n"},{"last_activity_date":1684336645,"question_id":76273657,"body":"<p>This is the effect I would like to have:</p>\n<p><a href=\"https://i.stack.imgur.com/tOA2t.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tOA2t.gif\" alt=\"enter image description here\" /></a></p>\n<p>I have the following image:</p>\n<p><a href=\"https://i.stack.imgur.com/vaP3b.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vaP3b.png\" alt=\"enter image description here\" /></a></p>\n<p>I have to use this image (loading.xml) in a widget specifically it would be an element of the listview, I have to animate it as seen in the gif.</p>\n<p>This is the code I use:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>override fun getViewAt(position: Int): RemoteViews? {\n        val remoteView = RemoteViews(context!!.packageName, R.layout.list_row)\n        val listItem = listItemList[position]\n\n        if (listItem.reached!!)\n            remoteView.setImageViewResource(R.id.iv_circle, R.drawable.check)\n        else\n            remoteView.setImageViewResource(R.id.iv_circle, R.drawable.loading)\n        return remoteView\n\n}\n</code></pre>\n<p>list_row.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>...\n        &lt;ImageView\n            android:id=&quot;@+id/iv_circle&quot;\n            android:layout_width=&quot;30dp&quot;\n            android:layout_height=&quot;30dp&quot;\n            android:paddingLeft=&quot;2dp&quot;\n            android:src=&quot;@drawable/loading&quot; /&gt;\n...\n</code></pre>\n<p>loading.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:width=&quot;16dp&quot;\n    android:height=&quot;16dp&quot;\n    android:viewportWidth=&quot;16&quot;\n    android:viewportHeight=&quot;16&quot;&gt;\n    &lt;path\n        android:fillAlpha=&quot;0.2&quot;\n        android:fillColor=&quot;#F5AF45&quot;\n        android:pathData=&quot;m8,1.5a6.5,6.5 0 1 0 0,13a6.5,6.5 0 0 0 0,-13zm-8,6.5a8,8 0 1 1 16,0a8,8 0 0 1 -16,0z&quot; /&gt;\n    &lt;path\n        android:fillColor=&quot;#F5AF45&quot;\n        android:pathData=&quot;m7.25,0.75a0.75,0.75 0 0 1 0.75,-0.75a8,8 0 0 1 8,8a0.75,0.75 0 0 1 -1.5,0a6.5,6.5 0 0 0 -6.5,-6.5a0.75,0.75 0 0 1 -0.75,-0.75z&quot; /&gt;\n\n&lt;/vector&gt;\n</code></pre>\n<p>I tried looking in the documentation:</p>\n<p><a href=\"https://developer.android.com/develop/ui/views/animations/drawable-animation#kotlin\" rel=\"nofollow noreferrer\">https://developer.android.com/develop/ui/views/animations/drawable-animation#kotlin</a></p>\n<p><a href=\"https://developer.android.com/reference/android/graphics/drawable/AnimatedVectorDrawable\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/graphics/drawable/AnimatedVectorDrawable</a></p>\n<p><a href=\"https://developer.android.com/reference/android/graphics/drawable/AnimationDrawable\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/graphics/drawable/AnimationDrawable</a></p>\n<p>But I haven't found a way to animate it.</p>\n<p>I think that even a rotation of the image is enough to get the result.</p>\n<p>But I think it should be done only on the xml side, because the <code>kotlin</code> code side for the widgets is very limited.</p>\n<p>Image I need to animate is in a <code>listview</code>.</p>\n<p>See code above <code>getViewAt()</code> to see how the image is inserted.</p>\n<p>Can you give me a hand?</p>\n"},{"comments":[{"comment_id":134504381,"body":"Don&#39;t put images in the src folder.  <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/lang/resources.html\" rel=\"nofollow noreferrer\">Location-Independent Access to Resources</a>."},{"comment_id":134504406,"body":"<a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/label.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/uiswing/components/label.htm&zwnj;&#8203;l</a>"},{"comment_id":134504428,"body":"Better to load your files/images as resources: <a href=\"https://technojeeves.com/index.php/aliasjava1/78-loading-files-as-resources-in-java-with-netbeans\" rel=\"nofollow noreferrer\">Netbeans</a> <a href=\"https://technojeeves.com/index.php/aliasjava1/80-loading-files-as-resources-in-java-with-eclipse\" rel=\"nofollow noreferrer\">Eclipse</a>"}],"last_activity_date":1684336610,"question_id":76273651,"body":"<p>so I have an image in the folder of my project and I want to upload it on a label in a JFrame so the image will be show in the user interface, but when I run the project I only get the grey screen the picture is not being showed. this is the entire code, thank you eberyone.</p>\n<pre><code>\n//Main part of Java Eat//\npackage programming.javaeat;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.ImageIcon;\n\npublic class JavaEat {\n\n    public static void main(String[] args) {\n    JFrame frame = new JFrame();\n    int ancho = 700;\n    int largo = 600;\n    frame.setSize(ancho,largo);\n    \n    //Creación del label//\n   \n    JLabel label = new JLabel();\n    \n    // imágen en el label//\n    ImageIcon imagen = new ImageIcon(&quot;fondo.jpg&quot;);\n        label.setIcon(imagen);\n        \n    //agregar el label al frame//\n     frame.add(label);  \n     \n     //Mostrar el frame junto con el label//\n      frame.setVisible(true);\n        \n        \n    \n    }\n}\n</code></pre>\n<p>I have tried everything, using the design and the palette from the JFrame, coding it in another way...</p>\n"},{"comments":[{"comment_id":127735284,"body":"file containing your public class has to be named after that public class name."},{"comment_id":127735291,"body":"The <i>file name</i> of your <code>class main</code> currently is <code>tempCodeRunnerFile</code>. The class name of a public class has to be identical to the file name. So either rename the <i>class</i> to <code>public class tempCodeRunnerFile</code> (however it should start uppercase due to java naming conventions but that&#39;s another topic) or rename the <i>file</i> to <code>main.java</code>."},{"comment_id":127735340,"body":"so i need to save the file as main.java ?"},{"comment_id":127735356,"body":"@AliOsseili Yes, that&#39;s what the error message tells you. &quot;[it] <i>should be declared in a file named main.java</i>&quot;"},{"comment_id":127735367,"body":"@maloomeister thanks man! how do i upvote u?"},{"comment_id":127735772,"body":"Doesn&#39;t the error message tell you exactly what is wrong? In the future, you will probably want to do a decent search for <a href=\"https://www.google.com/search?q=site%3Astackoverflow.com+java+error%3A+class+is+public+should+be+declared+in+a+file+named\" rel=\"nofollow noreferrer\">similar questions</a> (please check the link here for an example) and review them before asking. Otherwise, if you ask multiple questions that are considered by the site to be low-quality, you could harm your ability to ask further questions (the site can automatically restrict you), and you will want to avoid that."}],"answers":[{"answer_id":72302838,"body":"<p>try naming your file, &quot;main.java&quot;</p>\n"},{"answer_id":72302850,"body":"<p>basically the compiler tells you whats wrong. It says, &quot;class main is public, should be declared in a file named main.java&quot;.\nJava has a naming rule, that a class inside a java file needs to match that file name.\nExample 1:</p>\n<p>Filename -&gt; File.java</p>\n<p>inside that file:</p>\n<pre><code>public class Main{\n...\n</code></pre>\n<p>does violate that rule (class name does not equal the file name)</p>\n<p>Example 2:</p>\n<p>Filename -&gt; Main.java</p>\n<p>inside that file:</p>\n<pre><code>public class Main{\n...\n</code></pre>\n<p>follows that rule (class name does equal the file name)</p>\n<p>Also for beginners:\nThis is a good quick read for basic code / naming conventions.\n<a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html</a></p>\n"}],"last_activity_date":1684336599,"question_id":72302801,"body":"<p>This is the code I have tried running</p>\n<pre><code>    public class main\n{\n    public static void main(String[] args)\n    {\n        System.out.println(&quot;Hello, world!&quot;);\n    }\n}\n</code></pre>\n<p>and it gives me this error:</p>\n<p>tempCodeRunnerFile.java:1: error: class main is public, should be declared in a file named main.java\npublic class main</p>\n<p>I don't know what's wrong tbh I have tried modifying and it looks similar to me like the example they gave..</p>\n"},{"last_activity_date":1684336418,"question_id":76273620,"body":"<p>We recently migrated a service running in EC2 instances to EKS Fargate. During testing we found some intermittent connection reset exception when trying to connect the the service using a load balancer(NLB).</p>\n<pre><code>org.springframework.web.client.ResourceAccessException: I/O error on POST request for &quot;https://go.xxxxxxxxxxx.com/api/push&quot;: Connection reset; nested exception is java.net.SocketException: Connection reset\n    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:785) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.client.RestTemplate.postForObject(RestTemplate.java:437) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at com.venuetize.airship.services.RestService.postObject(RestService.java:49) ~[classes!/:0.0.1-SNAPSHOT]\n    at com.venuetize.airship.services.AirshipIntegrationService.sendNotification(AirshipIntegrationService.java:312) ~[classes!/:0.0.1-SNAPSHOT]\n    at com.venuetize.airship.controllers.NotificationController.sendNotification(NotificationController.java:47) [classes!/:0.0.1-SNAPSHOT]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]\n    at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) [spring-webmvc-5.3.10.jar!/:5.3.10]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) [tomcat-embed-websocket-9.0.53.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.10.jar!/:5.3.10]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:769) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1726) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) [tomcat-embed-core-9.0.53.jar!/:?]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.53.jar!/:?]\n    at java.lang.Thread.run(Thread.java:829) [?:?]\nCaused by: java.net.SocketException: Connection reset\n    at java.net.SocketInputStream.read(SocketInputStream.java:186) ~[?:?]\n    at java.net.SocketInputStream.read(SocketInputStream.java:140) ~[?:?]\n    at sun.security.ssl.SSLSocketInputRecord.read(SSLSocketInputRecord.java:484) ~[?:?]\n    at sun.security.ssl.SSLSocketInputRecord.readHeader(SSLSocketInputRecord.java:478) ~[?:?]\n    at sun.security.ssl.SSLSocketInputRecord.bytesInCompletePacket(SSLSocketInputRecord.java:70) ~[?:?]\n    at sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1455) ~[?:?]\n    at sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:1066) ~[?:?]\n    at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137) ~[httpcore-4.4.14.jar!/:4.4.14]\n    at org.apache.http.impl.io.SessionInputBufferImpl.fillBuffer(SessionInputBufferImpl.java:153) ~[httpcore-4.4.14.jar!/:4.4.14]\n    at org.apache.http.impl.io.SessionInputBufferImpl.readLine(SessionInputBufferImpl.java:280) ~[httpcore-4.4.14.jar!/:4.4.14]\n    at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:138) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:56) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:259) ~[httpcore-4.4.14.jar!/:4.4.14]\n    at org.apache.http.impl.DefaultBHttpClientConnection.receiveResponseHeader(DefaultBHttpClientConnection.java:163) ~[httpcore-4.4.14.jar!/:4.4.14]\n    at org.apache.http.impl.conn.CPoolProxy.receiveResponseHeader(CPoolProxy.java:157) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:273) ~[httpcore-4.4.14.jar!/:4.4.14]\n    at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:125) ~[httpcore-4.4.14.jar!/:4.4.14]\n    at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:272) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) ~[httpclient-4.5.13.jar!/:4.5.13]\n    at org.springframework.http.client.HttpComponentsClientHttpRequest.executeInternal(HttpComponentsClientHttpRequest.java:87) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.BufferingClientHttpRequestWrapper.executeInternal(BufferingClientHttpRequestWrapper.java:63) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:109) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at com.venuetize.airship.utils.VzRequestResponseLoggingInterceptor.intercept(VzRequestResponseLoggingInterceptor.java:24) ~[classes!/:0.0.1-SNAPSHOT]\n    at org.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:93) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at com.venuetize.xtrace.interceptor.XTraceIdForwardingInterceptor.intercept(XTraceIdForwardingInterceptor.java:77) ~[xtrace-0.5.1.jar!/:?]\n    at org.springframework.http.client.InterceptingClientHttpRequest$InterceptingRequestExecution.execute(InterceptingClientHttpRequest.java:93) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.InterceptingClientHttpRequest.executeInternal(InterceptingClientHttpRequest.java:77) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66) ~[spring-web-5.3.10.jar!/:5.3.10]\n    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:776) ~[spring-web-5.3.10.jar!/:5.3.10]\n    ... 57 more\n</code></pre>\n<p>The only observable pattern with multiple days of testing is, if I wait few hours or days between testing I'll see this exception but then the subsequent calls work fine. So it seems to be some networking issue and would like some guidance into this.</p>\n"},{"answers":[{"comments":[{"comment_id":127746162,"body":"Hello! I have used the JavaLoader version (apache-tika-1.18.jar) and works without any problem for me but the problem is to embed it into the existing apache tika plugin without changing the code (<a href=\"https://github.com/pixl8/preside-ext-tika\" rel=\"nofollow noreferrer\">github.com/pixl8/preside-ext-tika</a>). Regarding OSGI bundles, i follow your instructions but nothing happens perhaps due to inexperience.I need a ready solution and i have found a repository, but i am not sure if it&#39;s compatible with lucee (<a href=\"https://repo1.maven.org/maven2/org/apache/tika/tika-bundle-standard/\" rel=\"nofollow noreferrer\">repo1.maven.org/maven2/org/apache/tika/tika-bundle-standard</a>&zwnj;&#8203;). As previously stated,i do not want to change the existing plugin code. Thanks a lot!"},{"comment_id":127747852,"body":"As I said, I couldn&#39;t get the pre-built tika-bundle (in the repo you found) to work in Lucee due to an osgi &quot;wiring&quot; error. Modifying the tika-app jar and loading it via osgiLoader as I described does work. The code is tested. Make sure all of the files are in the same directory: <code>extractor.cfc</code>, <code>index.cfm</code>, <code>osgiLoader.cfc</code>, and <code>tika-app-1.28.2.jar</code> (modified) and the doc you want to parse."},{"comment_id":127756774,"body":"Could you mind take a look at this specific tika jar file  (manifest.ml something may be missing) as it can not get loaded via bundle-jar gui? (<a href=\"https://wetransfer.com/downloads/3fbf2577baec48ef7652fba11accc24e20220520075837/7b5f30\" rel=\"nofollow noreferrer\">wetransfer.com/downloads/&hellip;</a>). I just found another interesting article (<a href=\"https://dev.lucee.org/t/external-jar-file-problem-tika/6525/6\" rel=\"nofollow noreferrer\">dev.lucee.org/t/external-jar-file-problem-tika/6525/6</a>).  Regards"},{"comment_id":127760035,"body":"The jar file is fine but it is version 1.28 whereas as the code I posted was for 1.28.2. If you change the <code>tikaBundle.version</code> and <code>tikaBundle.path</code> in the index.cfm script it should work (does for me with the your modified jar)."},{"comment_id":127766714,"body":"I&#39;ve created a basic wrapper on Github which you should be able to use without having to do any of the OSGi preparation and loading yourself: <a href=\"https://github.com/cfsimplicity/lucee-tika\" rel=\"nofollow noreferrer\">github.com/cfsimplicity/lucee-tika</a>"},{"comment_id":127777644,"body":"I used my own OSGI version and it runs OK and definitely your basic wrapper that you just prepared, no doubt.The problem that i have got is that i use an existing framework (PresideCMS) and not free CF code that takes specific requirements during file upload (<a href=\"https://github.com/pixl8/preside-ext-tika\" rel=\"nofollow noreferrer\">github.com/pixl8/preside-ext-tika</a>) such as filecontent via java.io.ByteArrayInputStream and not filename.If you could see carefully it&#39;s code and prepare a custom basic wrapper according to its requirements, it would free my hands. Now your solutions are OK for pure CF, but using PresideCMS i get error during file upload. Regards"},{"comment_id":127779336,"body":"I&#39;m not familiar with Preside and would recommend you raise this issue with Dom who&#39;s the maintainer. But I&#39;ve added a possible way of hacking the existing extension. Not tested as I don&#39;t use Preside."},{"comment_id":127779396,"body":"I have already spoken  with Dom and it is up to me now as this specific extension is not in use any more. Please visit <a href=\"https://presidecms-slack.herokuapp.com/\" rel=\"nofollow noreferrer\">presidecms-slack.herokuapp.com</a> for more information regarding this issue between me and Dom. I expect honestly your solution as it would help me a lot! Regards"},{"comment_id":127779471,"body":"I don&#39;t have access to the Preside Slack. Did you try the hack I added to my answer?"},{"comment_id":127779512,"body":"Sorry I just saw that you just updated your reply now! I will definitely try it and let you know by tomorrow if it&#39;s ok. Thank you a lot!!!"},{"comment_id":127791320,"body":"Hello!I think that something wrong is happening with this plugin as i use hard-coded value for result.text=&quot;blabla&quot; and even delete everything except return result in _parse function and nothing is finally returned as DB result.Since no support is offered for this specific plugin, i do not know what to do.Regards"},{"comment_id":127791468,"body":"This is for getText() in <a href=\"https://github.com/pixl8/Preside-CMS/blob/stable/system/services/assetManager/DocumentMetadataService.cfc\" rel=\"nofollow noreferrer\">github.com/pixl8/Preside-CMS/blob/stable/system/services/&hellip;</a>. It&#39;s mentioned via comments. Regards"},{"comment_id":127792404,"body":"Sorry, I can&#39;t help with Preside, I&#39;m not familiar with it. Can&#39;t you just use my wrapper to extract text from your files after they&#39;ve been uploaded via Preside?"},{"comment_id":127792477,"body":"That sounds good, but I do not know how to do it via preside framework. psys_asset is system object and not custom object that all information for each asset is stored. Regards"},{"comment_id":127847230,"body":"If I install lucee via commandbox (in this case presidecms), where I see my log files (exact log location) for cfdump output=console. I just need to debug (dump output=console) result variable of _parse function each time is called. If I dump result variable together with function name, it would help me a lot. Regards"},{"comment_id":127866759,"body":"For general support with Lucee/commandbox you&#39;re best heading over to <a href=\"http://cfml-slack.herokuapp.com/\" rel=\"nofollow noreferrer\">cfml-slack.herokuapp.com</a> or <a href=\"https://dev.lucee.org/\" rel=\"nofollow noreferrer\">dev.lucee.org</a>"}],"answer_id":72307594,"body":"<p>I think the problem is a class clash: The Lucee core engine already loads a version of Tika meaning the one you point to is ignored. But the loaded version doesn't behave as expected, returning empty strings as you've seen.</p>\n<p>I've solved this by using OSGi to load the desired Tika version. This involves editing the Manifest of the tika-app jar to include basic OSGi metadata and then loading it via my <a href=\"https://github.com/cfsimplicity/luceeOsgiLoader\" rel=\"nofollow noreferrer\">osgiLoader</a></p>\n<p>There is a pre-built <a href=\"https://mvnrepository.com/artifact/org.apache.tika/tika-bundle\" rel=\"nofollow noreferrer\">Tika bundle</a> available but I haven't been able to get it to work with Lucee.</p>\n<p>Here's how to convert the latest <code>tika-app</code> jar to OSGi:</p>\n<ol>\n<li>open the &quot;tika-app-1.28.2.jar&quot; with 7-zip</li>\n<li>open META-INF then select MANIFEST.MF and press F4 to open it in a text editor</li>\n<li>add the following to the end of the file:</li>\n</ol>\n<pre><code>Bundle-Name: Apache Tika App Bundle\nBundle-SymbolicName: apache-tika-app-bundle\nBundle-Description: Apache Tika App jar converted to an OSGi bundle\nBundle-ManifestVersion: 2\nBundle-Version: 1.28.2\nBundle-ClassPath: .,tika-app-1.28.2.jar\n</code></pre>\n<ol start=\"4\">\n<li>Save choosing to update when prompted.</li>\n</ol>\n<p>You can then call the jar using osgiLoader as follows:</p>\n<p><strong>extractor.cfc</strong></p>\n<pre><code>component{\n\n    property name=&quot;loader&quot; type=&quot;object&quot;;\n    property name=&quot;tikaBundle&quot; type=&quot;struct&quot;;\n\n    public extractor function init( required object loader, required struct tikaBundle ){\n        variables.loader = arguments.loader\n        variables.tikaBundle = arguments.tikaBundle\n        return this\n    }\n\n    public string function parseToString( required string filePath ){\n        try{\n            var fileStream = CreateObject( &quot;java&quot;, &quot;java.io.FileInputStream&quot; ).init( JavaCast( &quot;string&quot;, arguments.filePath ) )\n            var tikaObject = loader.loadClass( &quot;org.apache.tika.Tika&quot;, tikaBundle.path, tikaBundle.name, tikaBundle.version )\n            var result = tikaObject.parseToString( fileStream )\n        }\n        finally{\n            fileStream.close()\n        }\n        return result\n    }\n\n}\n</code></pre>\n<p>(The following script assumes <code>extractor.cfc</code>, the modified Tika jar, the <a href=\"https://github.com/cfsimplicity/luceeOsgiLoader/blob/main/osgiLoader.cfc\" rel=\"nofollow noreferrer\"><code>osgiLoader.cfc</code></a> and the document to be processed are in the same directory.)</p>\n<p><strong>index.cfm</strong></p>\n<pre><code>&lt;cfscript&gt;\ndocPath = ExpandPath( &quot;test.pdf&quot; )\nloader = New osgiLoader()\ntikaBundle = {\n    version: &quot;1.28.2&quot;\n    ,name: &quot;apache-tika-app-bundle&quot;\n    ,path: ExpandPath( &quot;tika-app-1.28.2.jar&quot; )\n}\nextractor = New extractor( loader, tikaBundle )\nresult = extractor.parseToString( docPath )\ndump( result )\n&lt;/cfscript&gt;\n</code></pre>\n<p>Another way to get the right version loaded is to use <a href=\"https://github.com/markmandel/JavaLoader\" rel=\"nofollow noreferrer\">JavaLoader</a>. For some reason I couldn't get it to work with the latest <code>tika-app</code> jar (<code>1.28.2</code>), but <code>1.19.1</code> does seem to work.</p>\n<h2>Hacking the existing extension</h2>\n<p>I would advise you to raise an issue with Preside to change their extension to avoid the clash, but as a temporary hack you could try amending it yourself as follows:</p>\n<p>First, add your modified Tika bundle and the <code>osgiLoader.cfc</code> to the <code>/preside-ext-tika/services/</code> directory.</p>\n<p>Next, change line 14 of <code>DocumentMetadataService.cfc</code> so the name of the Tika jar path matches your modified bundle.</p>\n<pre><code>_setTikaJarPath( GetDirectoryFromPath( GetCurrentTemplatePath( ) ) &amp; &quot;tika-app-1.28.2.jar&quot; );\n</code></pre>\n<p>Then, modify lines 33-35 of the same cfc to replace:</p>\n<pre><code>var parser = CreateObject( &quot;java&quot;, &quot;org.apache.tika.parser.AutoDetectParser&quot;, jarPath );\nvar ch     = CreateObject( &quot;java&quot;, &quot;org.apache.tika.sax.BodyContentHandler&quot; , jarPath ).init(-1);\nvar md     = CreateObject( &quot;java&quot;, &quot;org.apache.tika.metadata.Metadata&quot;      , jarPath ).init();\n</code></pre>\n<p>with the following:</p>\n<pre><code>var loader = New osgiLoader();\nvar tikaBundle = { version: &quot;1.28.2&quot;, name: &quot;apache-tika-app-bundle&quot; };\n\nvar parser = loader.loadClass( &quot;org.apache.tika.parser.AutoDetectParser&quot;, jarPath, tikaBundle.name, tikaBundle.version )\nvar ch     = loader.loadClass( &quot;org.apache.tika.sax.BodyContentHandler&quot; , jarPath, tikaBundle.name, tikaBundle.version ).init(-1)\nvar md     = loader.loadClass( &quot;org.apache.tika.metadata.Metadata&quot;      , jarPath, tikaBundle.name, tikaBundle.version ).init()\n</code></pre>\n<p>NB: I don't have Preside so can't test it in context.</p>\n"}],"last_activity_date":1684336353,"question_id":72302812,"body":"<p>I would like to extract text from pdf, docx etc via Lucee 5+ (5.2.9), but unfortunately I get empty result set. I have used several <a href=\"https://repo1.maven.org/maven2/org/apache/tika/tika-app/\" rel=\"nofollow noreferrer\">Apache Tika versions</a> (runnable jar with Java 1.8.0) that might fit to my specific Lucee and Java requirements, but the result set always remains empty.</p>\n<p><strong>exract.cfc</strong></p>\n<pre><code>component {\n    \n    public any function init() {\n\n        _setTikaJarPath( GetDirectoryFromPath( GetCurrentTemplatePath( ) ) &amp; &quot;tika-app-1.19.1.jar&quot; );\n\n        return this;\n\n    }\n\n\n    private struct function doParse( required any fileContent, boolean includeMeta=true, boolean includeText=true ) {\n        var result  = {};\n        var is      = &quot;&quot;;\n        var jarPath = _getTikaJarPath();\n\n        if ( IsBinary( arguments.fileContent ) ) {\n            is = CreateObject( &quot;java&quot;, &quot;java.io.ByteArrayInputStream&quot; ).init( arguments.fileContent );\n        } else {\n            // TODO, support plain string input (i.e. html)\n            return {};\n        }\n\n        try {\n            var parser = CreateObject( &quot;java&quot;, &quot;org.apache.tika.parser.AutoDetectParser&quot;, jarPath );\n            var ch     = CreateObject( &quot;java&quot;, &quot;org.apache.tika.sax.BodyContentHandler&quot; , jarPath ).init(-1);\n            var md     = CreateObject( &quot;java&quot;, &quot;org.apache.tika.metadata.Metadata&quot;      , jarPath ).init();\n\n            parser.parse( is, ch, md );\n\n            if ( arguments.includeMeta ) {\n                result.metadata = {};\n\n                for( var key in md.names() ) {\n                    var mdval = md.get( key );\n                    if ( !isNull( mdval ) ) {\n                        result.metadata[ key ] = _removeNonUnicodeChars( mdval );\n                    }\n                }\n            }\n\n            if ( arguments.includeText ) {\n                result.text = _removeNonUnicodeChars( ch.toString() );\n            }\n\n        } catch( any e ) {\n            result = { error = e };\n        }\n\n        return result;\n}\n\n\n    public function read(required string filename) {\n        var result = {};\n\n        if(!fileExists(filename)) {\n            result.error = &quot;#filename# does not exist.&quot;;\n            return result;\n        };\n\n        var f = createObject(&quot;java&quot;, &quot;java.io.File&quot;).init(filename);\n        var fis = createObject(&quot;java&quot;,&quot;java.io.FileInputStream&quot;).init(f);\n\n        try {\n            result = doParse(fis);\n        } catch(any e) {\n            result.error = e;\n        }\n        fis.close();\n        return result;\n    }\n\n    private string function _removeNonUnicodeChars( required string potentiallyDirtyString ) {\n        return ReReplace( arguments.potentiallyDirtyString, &quot;[^\\x20-\\x7E]&quot;, &quot;&quot;, &quot;all&quot; );\n    }\n\n// GETTERS AND SETTERS\n    private string function _getTikaJarPath() {\n        return _tikaJarPath;\n    }\n    private void function _setTikaJarPath( required string tikaJarPath ) {\n        _tikaJarPath = arguments.tikaJarPath;\n}\n\n\n}\n</code></pre>\n<p>and the code that i use to run it</p>\n<pre><code>&lt;cfset takis = new exract()&gt;\n&lt;cfset files = directoryList(expandPath(&quot;./sources&quot;))&gt;\n&lt;cfloop index=&quot;f&quot; array=&quot;#files#&quot;&gt;\n    &lt;cfif not findNoCase(&quot;.DS_Store&quot;,f)&gt;\n        &lt;cfdump var=&quot;#takis.read(f)#&quot; label=&quot;#f#&quot;&gt;\n    &lt;/cfif&gt;\n&lt;/cfloop&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/cyI9W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cyI9W.png\" alt=\"enter image description here\" /></a></p>\n"},{"answers":[{"answer_id":76273317,"body":"<p>Your first solution with a single <code>@Transactional</code> method called from an async thread is actually a good solution, since all the operations performed in a single transaction.\nAs a side note, you don't need to call <code>residentsRepository.saveAll(residents)</code> when modifying exiting entity instances fetched by Hibernate inside a transaction. <code>save</code> is for new or &quot;detached&quot; entity instances (fetched previously, outside current transaction). See: <a href=\"https://stackoverflow.com/a/46708295\">https://stackoverflow.com/a/46708295</a></p>\n<p>Enabling batching in properties as you did is also very important. Batch size usually can be larger. I use these setting:</p>\n<pre><code>spring.jpa.properties.hibernate.jdbc.batch_size=200\nspring.jpa.properties.hibernate.order_inserts=true\nspring.jpa.properties.hibernate.order_updates=true\nspring.jpa.properties.hibernate.batch_versioned_data=true\n</code></pre>\n<p>You don't show the logic inside <code>updateResidents()</code>. If this logic is simple enough, e.g. increment counter column for each, or set some constant value in each etc., you can get much better performance by using an update query in the repository, either JPQL or native. Something like this:</p>\n<pre><code>@Modifying\n@Query(&quot;update Resident r set r.someCounter = r.someCounter + 1, r.lastUpdate =:timestamp where r.cityId =:cityId&quot;)\nvoid updateResident(@Param(&quot;cityId&quot;) String cityId, @Param(&quot;timestamp&quot;) long timestamp);\n</code></pre>\n"}],"last_activity_date":1684336127,"question_id":76272961,"body":"<p>I have a spring boot application running with hibernate. In my scheme I have City which can have multiple Resident(s).\nI have the following method to update the residents of a city:</p>\n<pre><code>public void updateResidentsInCity(long cityId) {\n        CompletableFuture\n                .supplyAsync(() -&gt; residentsRepository.findAllByCityId(cityId))\n                .thenApply(residents -&gt; {\n                    // update fields of the resident objects\n                    updateResidents(residents);\n                    return residents;\n                })\n                .thenAccept(residents -&gt; residentsRepository.saveAll(residents));\n}\n</code></pre>\n<p>But this cause really bad performance issues, because the update running on a different thread, so the hibernate session is expired and when i call <code>residentsRepository.saveAll(residents)</code> hibernate needs to fetch all the entities again.</p>\n<p>I thought about two approaches to fix this issue and i'm wondering what is best (or maybe there are another approaches, of course):</p>\n<ol>\n<li>Just give up the multiple CompletableFuture(s)- putting all the operations under one <code>@Transactional</code> and make blocking calls:</li>\n</ol>\n<pre><code>@Transactional\npublic void updateResidentsInCity(long cityId) {\n        final List&lt;Resident&gt; residents = residentsRepository.findAllByCityId(cityId);\n        updateResidents(residents);\n        residentsRepository.saveAll(residents);\n}\n</code></pre>\n<p>Now I can just call <code>updateResidentsInCity()</code> in a different thread:</p>\n<pre><code>CompletableFuture.runAsync(() -&gt; updateResidentsInCity(123))\n</code></pre>\n<p>In addition, allow hibernate to make batch update by adding those properties:</p>\n<pre><code>spring.jpa.properties.hibernate.jdbc.batch_size=50\nspring.jpa.properties.hibernate.order_updates=true\n</code></pre>\n<ol start=\"2\">\n<li>keep the same code with CompletableFuture(s), but make <code>residentsRepository.findAllByCityId()</code> a <code>readOnly</code> transaction, and implement my own single native query for batch update:</li>\n</ol>\n<pre><code>public void updateResidentsInCity(long cityId) {\n    CompletableFuture\n        .supplyAsync(() -&gt; residentsRepository.findAllByCityId(cityId))  // readOnly transaction\n        .thenApply(residents -&gt; {\n             updateResidents(residents);\n             return residents;\n         })\n         .thenAccept(residents -&gt; residentsRepository.batchUpdate(residents));  // new transaction, one native query\n}\n</code></pre>\n<p>I will be glad to get some insights about which approach is better, and maybe another approaches I didn't think of.\n<strong>Please note that my application potentially should update many cities in the same time.</strong></p>\n"},{"comments":[{"comment_id":132786641,"body":"I&#39;m seeing this generics problem as well.  It&#39;s definitely a blocker for my migration up to Hibernate 6/Spring Boot 3."},{"comment_id":134503790,"body":"Did you solved the problem? I have the same problem and, in my case, I think the problem is this line <code>builder.in(laboratori.get(&quot;id&quot;)).value(subqueryLaboratori)</code> where the value is a <code>Subquery</code> object instead of a String, Integer, Long...  With Spring 2.7.2 it worked but after the migration to 3.0.6 it breaks."},{"comment_id":134513850,"body":"I found the solution to my problem in the migration guides <a href=\"https://docs.jboss.org/hibernate/orm/6.0/migration-guide/migration-guide.html\" rel=\"nofollow noreferrer\">docs.jboss.org/hibernate/orm/6.0/migration-guide/&hellip;</a> and <a href=\"https://docs.jboss.org/hibernate/orm/6.1/migration-guide/migration-guide.html\" rel=\"nofollow noreferrer\">docs.jboss.org/hibernate/orm/6.1/migration-guide/&hellip;</a>. Read carefully because they are long, but provide all the necessary information."}],"answers":[{"comments":[{"comment_id":133344535,"body":"This don&#39;t work for me. We have Generics with Inheritence like ---- Foo extends BaseEntity&lt;FooId&gt; --- BaseEntity&lt;S extends UUID&gt; private S id; ---  FooID extends UUID"}],"answer_id":75285153,"body":"<p>The solution is to use the cast method for the generic field:</p>\n<pre class=\"lang-java prettyprint-override\"><code>cr.select(person.get(&quot;name&quot;).as(String.class));\n</code></pre>\n"}],"last_activity_date":1684336091,"question_id":75169414,"body":"<p>I tried to migrate my application from Hibernate <code>5.4.30.Final</code> to <code>6.1.6.Final</code>, database H2 2.1.214. I observed a different behaviour regarding generics when using a <code>CriteriaQuery</code>. I have stripped it down to a testcase (which does not make any sense but shows the problem). In Hibernate 5 the following query to a generic field <code>name</code> runs fine whereas Hibernate 6 throws an Exception.</p>\n<pre class=\"lang-java prettyprint-override\"><code>CriteriaBuilder cb = eMgr.getCriteriaBuilder();\nCriteriaQuery&lt;String&gt; cr = cb.createQuery(String.class);\nRoot&lt;Person&gt; person = cr.from(Person.class);\ncr.select(person.&lt;String&gt; get(&quot;name&quot;));\nTypedQuery&lt;String&gt; query = eMgr.createQuery(cr);\n</code></pre>\n<p>Exception:</p>\n<pre><code>Converting `org.hibernate.query.QueryTypeMismatchException` to JPA `PersistenceException` : Specified result type [java.lang.String] did not match Query selection type [java.lang.Object] - multiple selections: use Tuple or array\n</code></pre>\n<p>Here are my sample class definitions:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.Id;\n\n@Entity\npublic class GenericPerson&lt;T&gt;\n{\n    @Id\n    @GeneratedValue(generator = &quot;increment&quot;)\n    private long id;\n    private T name;\n\n    public GenericPerson()  {   }\n    public GenericPerson(T name)    { this.name = name;}\n\n    public T getName() { return this.name; }\n    public void setName(T name) {   this.name = name;   }\n\n    public long getId() { return this.id;}\n    public void setId(long id) { this.id = id; }\n}\n\n@Entity\npublic class Person extends GenericPerson&lt;String&gt;\n{\n    public Person() { }\n    public Person(String name) {    super(name);    }\n}\n</code></pre>\n<p>Hibernate 5 seems to handle generics differently to Hibernate 6 but I could not find any hint in the migration document. Why fails the test case with Hibernate 6?</p>\n"},{"answers":[{"comments":[{"comment_id":134501788,"body":"Still that won&#39;t solve the issue, try getting your double values String text = textView.getText().toString(); double doubleValue = Double.parseDouble(text);"},{"comment_id":134502214,"body":"Hi, thanks for your reply however like @Andile has said this doesn&#39;t solve my issue. I have updated the code but my issue still persists with the Doubles. Any help would be appreciated."}],"answer_id":76271976,"body":"<p>You probably need to get the text from the textview.</p>\n<p>This is your code:</p>\n<pre><code>Integer.parseInt(String.valueOf(user_current_steps))\n</code></pre>\n<p>note, that you use the valueOf <code>user_current_steps</code> which is the TextView object. You need to ask it for the actual text:</p>\n<pre><code>Integer.parseInt(String.valueOf(user_current_steps.getText()))\n</code></pre>\n<p>And then you can most likely omit the <code>String.valueOf</code> part, because that already returns a string:</p>\n<pre><code>Integer.parseInt(user_current_steps.getText())\n</code></pre>\n"},{"answer_id":76273552,"body":"<p>ANSWER: Update on my issue. It turned out it was trying to retrieve the values too early which resulted in the if-statement trying to do a (0 &lt; 0) statement.</p>\n<p>Before:</p>\n<pre><code>                public void run () {\n                    getUserInfo();\n                    getCurrentData();\n\n                }\n</code></pre>\n<p>After:</p>\n<pre><code>                public void run () {\n                    getUserInfo();\n                }\n\n\n    public void getUserInfo() {\n         //getUserInfo CODE HERE\n         getCurrentData();\n    }\n\n\n</code></pre>\n<p>Thanks for the help.</p>\n"}],"last_activity_date":1684336053,"question_id":76271941,"body":"<p>to summarise this function pulls data from TextView value. It then converts it into a double then is supposed to perform an if statement which identifies which value is higher than the other.</p>\n<p>Updated Code:</p>\n<pre><code>public void getCurrentData();\n        TextView user = (TextView) getView().findViewById(R.id.global_text_username);\n        String username = getActivity().getIntent().getStringExtra(&quot;email&quot;);\n        String userId = username.substring(0, 5);\n        user.setText(username);\n\n        Drawable unreach = getResources().getDrawable(R.drawable.baseline_remove_circle_24, null);\n\n        TextView user_current_cals = (TextView) getView().findViewById(R.id.home_text_calcode);\n        TextView user_current_steps = (TextView) getView().findViewById(R.id.home_text_stepcode);\n        TextView user_current_target = (TextView) getView().findViewById(R.id.home_text_targetcode);\n\n        ImageView current_cals = (ImageView) getView().findViewById(R.id.home_img_calstatus);\n        ImageView current_target = (ImageView) getView().findViewById(R.id.home_img_targetstatus);\n        ImageView current_steps = (ImageView) getView().findViewById(R.id.home_img_stepstatus);\n</code></pre>\n<p>The problem happens here. While the code runs without any error, the second if statement is not working.</p>\n<pre><code>        String ucc = user_current_cals.getText().toString();\n        double check_current_cals = Double.parseDouble(ucc);\n\n        String uct = user_current_target.getText().toString();\n        double check_current_target = Double.parseDouble(uct);\n\n        String ucs = user_current_steps.getText().toString();\n        int check_current_steps = Integer.parseInt(ucs);\n\n        if (check_current_steps &lt; 1000) {\n            current_steps.setColorFilter(Color.argb(255, 244, 57, 57));\n            current_steps.setImageDrawable(unreach);\n        }\n\n        if (check_current_cals &lt; check_current_target) {\n            current_cals.setColorFilter(Color.argb(255, 244, 57, 57));\n            current_target.setColorFilter(Color.argb(255, 244, 57, 57));\n            current_cals.setImageDrawable(unreach);\n            current_target.setImageDrawable(unreach);\n        }\n</code></pre>\n<p>I'm confused to as what's not going right with this statement and any help and pointing me in the right direction would be greatly appreciated. Thanks.</p>\n<p>I have tried to convert all numbers to Integers and perform the int statement again to no avail.</p>\n"},{"comments":[{"comment_id":62964377,"body":"Similar discussion has happened at: <a href=\"http://stackoverflow.com/a/15470272/2128503\">stackoverflow.com/a/15470272/2128503</a>"},{"comment_id":88139562,"body":"Check this link for answer ==&gt; &lt;<a href=\"https://stackoverflow.com/a/50564556/9495226\">stackoverflow.com/a/50564556/9495226</a>&gt;"}],"answers":[{"comments":[{"comment_id":62965915,"body":"Ok but I&#39;m trying to do a custom String id generator for having ids like &quot;CTC00001&quot;, CTC00002&quot; ... etc without the sequence_name parameter :)"}],"answer_id":37747715,"body":"<p>Yes, hibernate have prebuilt String generators. Just substitute your <code>@GenericGenerator</code> definition to another strategy.</p>\n\n<pre><code>@Entity\n@Table(name = \"contact\")\npublic class Contact implements Serializable, Identifiable&lt;String&gt; {\n\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(generator = \"uuid\")\n    @GenericGenerator(name = \"uuid\", strategy = \"uuid2\")\n    private String id;\n\n    public String getId() {\n        return id;\n    }\n\n    public void setId(String id) {\n        this.id = id;\n    }\n}\n</code></pre>\n\n<p>For more information about different hibernate generators you can look at <a href=\"https://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/mapping.html\" rel=\"nofollow\">documentation</a>.</p>\n"},{"comments":[{"comment_id":107963606,"body":"I got error for mysql DB  org.hibernate.MappingException: org.hibernate.dialect.MySQL5Dialect does not support sequences  Any solution for this?"},{"comment_id":107963907,"body":"For MySQL, you need to extend the Hibernate <a href=\"https://docs.jboss.org/hibernate/orm/5.4/javadocs/org/hibernate/id/IdentityGenerator.html\" rel=\"nofollow noreferrer\"><code>IdentityGenerator</code></a> and wrap the identity generation logic."},{"comment_id":123042972,"body":"Hm.... I got <code>Could not fetch the SequenceInformation from the database org.postgresql.util.PSQLException: The column name start_value was not found in this ResultSet.</code>"},{"comment_id":134480504,"body":"Can I access the fields of my entity in your class? What I need is a String sequence generator that is composed by some of the fields of my entity."}],"answer_id":37749564,"body":"<p>The problem is that <code>SequenceStyleGenerator</code> expects to return a numerical value, not a <code>String</code>.</p>\n<p>I already tried a solution to this problem and it works like a charm. Therefore, you need to change your generator like this:</p>\n<pre><code>public class StringSequenceIdentifier implements IdentifierGenerator, Configurable {\n\n    private String sequenceCallSyntax;\n\n    @Override\n    public void configure(Type type, Properties params, ServiceRegistry serviceRegistry) throws MappingException {\n        final JdbcEnvironment jdbcEnvironment = serviceRegistry.getService(JdbcEnvironment.class);\n        final Dialect dialect = jdbcEnvironment.getDialect();\n\n        final String sequencePerEntitySuffix = ConfigurationHelper.getString(CONFIG_SEQUENCE_PER_ENTITY_SUFFIX, params, DEF_SEQUENCE_SUFFIX);\n\n        final String defaultSequenceName = ConfigurationHelper.getBoolean(CONFIG_PREFER_SEQUENCE_PER_ENTITY, params, false)\n                ? params.getProperty(JPA_ENTITY_NAME) + sequencePerEntitySuffix\n                : DEF_SEQUENCE_NAME;\n\n        sequenceCallSyntax = dialect.getSequenceNextValString(ConfigurationHelper.getString(SEQUENCE_PARAM, params, defaultSequenceName));\n    }\n\n    @Override\n    public Serializable generate(SessionImplementor session, Object obj) {\n        if (obj instanceof Identifiable) {\n            Identifiable identifiable = (Identifiable) obj;\n            Serializable id = identifiable.getId();\n            if (id != null) {\n                return id;\n            }\n        }\n        long seqValue = ((Number) Session.class.cast(session)\n            .createSQLQuery(sequenceCallSyntax)\n            .uniqueResult()).longValue();\n\n        return &quot;CTC&quot; + seqValue;\n    }\n}\n</code></pre>\n<p>Your mapping becomes:</p>\n<pre><code>@Entity(name = &quot;Post&quot;)\n@Table(name = &quot;post&quot;)\npublic static class Post implements Identifiable&lt;String&gt; {\n\n    @Id\n    @GenericGenerator(\n        name = &quot;assigned-sequence&quot;,\n        strategy = &quot;com.vladmihalcea.book.hpjp.hibernate.identifier.StringSequenceIdentifier&quot;,\n        parameters = @org.hibernate.annotations.Parameter(name = &quot;sequence_name&quot;, value = &quot;hibernate_sequence&quot;)\n    )\n    @GeneratedValue(generator = &quot;assigned-sequence&quot;, strategy = GenerationType.SEQUENCE)\n    private String id;\n\n    @Version\n    private Integer version;\n\n    public Post() {\n    }\n\n    public Post(String id) {\n        this.id = id;\n    }\n\n    @Override\n    public String getId() {\n        return id;\n    }\n}\n</code></pre>\n<p>Now, when you insert the following entities:</p>\n<pre><code>doInJPA(entityManager -&gt; {\n    entityManager.persist(new Post());\n    entityManager.persist(new Post(&quot;ABC&quot;));\n    entityManager.persist(new Post());\n    entityManager.persist(new Post(&quot;DEF&quot;));\n});\n</code></pre>\n<p>Hibernate generates the right identifier:</p>\n<pre><code>Query:[&quot;select nextval ('hibernate_sequence')&quot;], Params:[()]\nQuery:[&quot;select nextval ('hibernate_sequence')&quot;], Params:[()]\nQuery:[&quot;insert into post (version, id) values (?, ?)&quot;], Params:[(0, CTC1)]\nQuery:[&quot;insert into post (version, id) values (?, ?)&quot;], Params:[(0, ABC)]\nQuery:[&quot;insert into post (version, id) values (?, ?)&quot;], Params:[(0, CTC2)]\nQuery:[&quot;insert into post (version, id) values (?, ?)&quot;], Params:[(0, DEF)]\n</code></pre>\n<p>Code available on <a href=\"https://github.com/vladmihalcea/high-performance-java-persistence/blob/master/core/src/test/java/com/vladmihalcea/book/hpjp/hibernate/identifier/StringSequenceIdentifierTest.java\" rel=\"nofollow noreferrer\">GitHub</a>.</p>\n"},{"comments":[{"comment_id":134546081,"body":"It works for my case that was wrong with @override public void configuration(....)."}],"answer_id":76270334,"body":"<p>it's possible to reuse sequence style generator by following solution</p>\n<pre><code>public class AppIdGenerator extends SequenceStyleGenerator {\n\n    public static final String PREFIX_PARAM = &quot;prefix&quot;;\n    private String prefix;\n\n    @Override\n    public void configure(Type type, Properties properties,\n                          ServiceRegistry serviceRegistry) throws MappingException {\n        super.configure(new NamedBasicTypeImpl&lt;&gt;(new JavaTypeBasicAdaptor&lt;&gt;(Long.class),\n                NumericJdbcType.INSTANCE, &quot;long&quot;), properties, serviceRegistry);\n        prefix = StringUtils.capitalize(ConfigurationHelper.getString(PREFIX_PARAM, properties));\n    }\n\n    @Override\n    public Serializable generate(SharedSessionContractImplementor session, Object obj) throws HibernateException {\n        return String.format(&quot;%s%09d&quot;, prefix, ((Long) super.generate(session, obj)));\n    }\n}\n</code></pre>\n<p>and Entity</p>\n<pre><code>@Data\n@EqualsAndHashCode(callSuper = false)\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = Subject.NAME, uniqueConstraints = {@UniqueConstraint(name = &quot;UC_SUBJECT&quot;,\n        columnNames = {&quot;STUDY_KEY&quot;, &quot;SUBJECT_UNIQUEID&quot;, &quot;SUBJECT_UNIQUEID_SOURCE&quot;})})\npublic class Subject extends Auditing {\n\n  static final String NAME = &quot;SUBJECT&quot;;\n\n  static final String PREF = &quot;SUBJ&quot;;\n\n  @Id\n  @GeneratedValue(generator = &quot;subject_gen&quot;, strategy = GenerationType.SEQUENCE)\n  @GenericGenerator(name = &quot;subject_gen&quot;, strategy = &quot;com.awesome.db.AppIdGenerator&quot;, parameters = {\n          @org.hibernate.annotations.Parameter(name = &quot;prefix&quot;, value = Subject.PREF),\n          @org.hibernate.annotations.Parameter(name = &quot;sequence_name&quot;, value = Subject.NAME + SequenceStyleGenerator.DEF_SEQUENCE_SUFFIX),\n          @org.hibernate.annotations.Parameter(name = &quot;increment_size&quot;, value = &quot;1&quot;)\n          //@org.hibernate.annotations.Parameter(name = &quot;initial_value&quot;, value = &quot;21&quot;),\n          //@org.hibernate.annotations.Parameter(name = &quot;optimizer&quot;, value = &quot;pooled-lo&quot;),\n  })\n  @Column(name = &quot;SUBJECT_KEY&quot;, unique = true, nullable = false, updatable = false, length = 13)\n  private String subjectKey;\n\n  @ManyToOne(optional = false)\n  @JoinColumn(name = &quot;STUDY_KEY&quot;, referencedColumnName = &quot;STUDY_KEY&quot;, foreignKey = @ForeignKey(name = &quot;FK_STUDY_KEY&quot;),\n      nullable = false, updatable = false)\n  private Study study;\n\n  @NotNull\n  @Column(name = &quot;SUBJECT_UNIQUEID&quot;, length = 120)\n  private String subjectId;\n\n  @NotNull\n  @Column(name = &quot;SUBJECT_UNIQUEID_SOURCE&quot;, length = 120)\n  private String subjectIdSource;\n}\n</code></pre>\n<p>In result:</p>\n<ol>\n<li>uses numeric db sequence counter</li>\n<li>supports the database structure and integrated optimizer“s options</li>\n</ol>\n<p>Keep in mind,\nif You are using any population scripts like <em>import.sql/data.sql</em> then <strong>initial_value</strong> parameter must be synchronised with number of rows in the table manually (hardcoded or provided from outside app) or <strong>nextval</strong> adopted to the id string key format</p>\n<pre><code>--import.sql\nINSERT INTO SUBJECT (subject_key, subject_uniqueid, subject_uniqueid_source, created_date, modified_date, study_key) VALUES('SUBJ'||to_char(nextval('subject_seq'), 'FM000000009'),'1234','Other.App','2023-05-17 14:05:46.521000','2023-05-17 14:05:46.521000','STUD000000001');\n</code></pre>\n"}],"last_activity_date":1684335689,"question_id":37747218,"body":"<p>I'm using hibernate with spring, h2 and liquibase and I'm trying to make a custom String id generator for my entities by taking example with this <a href=\"https://vladmihalcea.com/how-to-combine-the-hibernate-assigned-generator-with-a-sequence-or-an-identity-column/comment-page-1/#comment-7574\" rel=\"noreferrer\">blog post</a> but I'm getting an error : <code>Caused by: org.hibernate.id.IdentifierGenerationException: Unknown integral data type for ids : java.lang.String</code></p>\n\n<p>Here my SequenceStyleGenerator code :</p>\n\n<pre><code>public class CTCIDGenerator extends SequenceStyleGenerator {\n\n    @Override\n    public Serializable generate(SessionImplementor session, Object obj) {\n        if (obj instanceof Identifiable) {\n            Identifiable identifiable = (Identifiable) obj;\n            Serializable id = identifiable.getId();\n            if (id != null) {\n                return id;\n            }\n        }\n        return \"CTC\"+super.generate(session, obj);\n    }\n}\n</code></pre>\n\n<p>My entity code : </p>\n\n<pre><code>@Entity\n@Table(name = \"contact\")\npublic class Contact implements Serializable, Identifiable&lt;String&gt; {\n\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GenericGenerator(\n        name = \"assigned-sequence\",\n        strategy =     \"net.atos.seirich.support.domain.idgenerator.CTCIDGenerator\",\n        parameters = @org.hibernate.annotations.Parameter(\n            name = \"sequence_name\", \n            value = \"hibernate_sequence\"\n        )\n    )\n    @GeneratedValue(generator = \"assigned-sequence\", strategy = GenerationType.SEQUENCE)\n    private String id;\n\n    public String getId() {\n        return id;\n    }\n\n    public void setId(String id) {\n        this.id = id;\n    }\n}\n</code></pre>\n\n<p>And the liquibase XML :</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;databaseChangeLog\nxmlns=\"http://www.liquibase.org/xml/ns/dbchangelog\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd\"&gt;\n\n    &lt;property name=\"autoIncrement\" value=\"true\" dbms=\"mysql,h2,postgresql,oracle\"/&gt;\n\n    &lt;property name=\"floatType\" value=\"float4\" dbms=\"postgresql, h2\"/&gt;\n    &lt;property name=\"floatType\" value=\"float\" dbms=\"mysql, oracle\"/&gt;\n\n    &lt;changeSet id=\"20160513091901-1\" author=\"jhipster\"&gt;\n        &lt;createTable tableName=\"contact\"&gt;\n            &lt;column name=\"id\" type=\"longvarchar\" autoIncrement=\"${autoIncrement}\"&gt;\n                &lt;constraints primaryKey=\"true\" nullable=\"false\"/&gt;\n            &lt;/column&gt;\n    &lt;/changeSet&gt;\n&lt;/databaseChangeLog&gt;\n</code></pre>\n\n<p>Btw is it possible to avoid the parameter sequence_name so hibernate can handle this by itself ?</p>\n\n<p>If anyone can help me, Thanks !</p>\n"},{"comments":[{"comment_id":134499210,"body":"It&#39;s confusing to use two kinds of QueryBuilders to build your query.  Do you have a special reason for it ?"}],"answers":[{"answer_id":76273477,"body":"<p>I was able to write the TermQuery as follows,</p>\n<pre><code>TermsQueryField numberField = new TermsQueryField.Builder()\n .value(List.of(projectNumber).stream().map(FieldValue::of).collect(Collectors.toList()))\n .build();\n\nsubQuery.should(QueryBuilders.terms(term -&gt; term.field(&quot;projects&quot;).terms(numberField)));\n</code></pre>\n"}],"last_activity_date":1684335401,"question_id":76269270,"body":"<pre><code>import co.elastic.clients.elasticsearch._types.query_dsl.*;\n                     *\n                     *\n\n\nBoolQuery.Builder mainQuery = QueryBuilders.bool();\n                     *\n                     *\n                     *\n //          existing logic, which cannot be changed\n                     *\n                     *\nBoolQuery.Builder subQuery = QueryBuilders.bool();\nsubQuery.should(QueryBuilders.wildcard().field(&quot;projectNumber&quot;).value('*' + projectNumber + '*').build()._toQuery());\nsubQuery.should(org.elasticsearch.index.query.QueryBuilders.termsQuery(&quot;projects&quot;, projectNumber).toQuery());\nmainQuery.must(subQuery.build()._toQuery());\n</code></pre>\n<p>I have saved a document in the elastic search and it contains the field &quot;projectNumber&quot; and a list &quot;projects&quot;. Both are strings and I want to select all the documents if the project number is equal to the field &quot;projectNumber&quot; or it is present in the list &quot;projects&quot;. the above-mentioned code has an issue. the &quot;.toQuery()&quot; method in &quot;termsQuery&quot; gives compilation error, &quot;Cannot access org.apache.lucene.search.Query&quot;. and if I remove the &quot;.toQuery()&quot; i will get &quot;Cannot resolve method 'should(TermsQueryBuilder)'&quot; error.</p>\n<p>Can anyone help? if the above-mentioned TermsQuery declaration is not possible is it possible to declare the terms query like &quot;TermsQuery.Builder termsQuery = QueryBuilders.terms();&quot;?</p>\n"},{"last_activity_date":1684335386,"question_id":76273463,"body":"<p>9</p>\n<p>I am facing this issue while I run my android app. Does anyone know about this issue and how to fix it?</p>\n<p>I am facing this issue in my Logcat while I run my android app. Does anyone know about this issue and how to fix it?</p>\n<p>The app dones't crash, but when I select option in spinner and click on button then it will not show result on google map</p>\n<p>MainActivity.Java</p>\n<pre><code>package com.example.nearbyplacedemo;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\nimport androidx.loader.content.AsyncTaskLoader;\n\nimport android.Manifest;\nimport android.content.AsyncQueryHandler;\nimport android.content.pm.PackageManager;\nimport android.location.Location;\nimport android.os.AsyncTask;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.ArrayAdapter;\nimport android.widget.Button;\nimport android.widget.Spinner;\n\nimport com.google.android.gms.location.FusedLocationProviderClient;\nimport com.google.android.gms.location.LocationServices;\nimport com.google.android.gms.maps.CameraUpdateFactory;\nimport com.google.android.gms.maps.GoogleMap;\nimport com.google.android.gms.maps.OnMapReadyCallback;\nimport com.google.android.gms.maps.SupportMapFragment;\nimport com.google.android.gms.maps.model.LatLng;\nimport com.google.android.gms.maps.model.MarkerOptions;\nimport com.google.android.gms.tasks.OnSuccessListener;\nimport com.google.android.gms.tasks.Task;\n\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\nimport java.util.HashMap;\nimport java.util.List;\n\npublic class MainActivity extends AppCompatActivity {\n    //initialize variable\n    Spinner sp_type;\n    Button bt_find;\n    SupportMapFragment supportMapFragment;\n    GoogleMap map;\n    FusedLocationProviderClient fusedLocationProviderClient;\n    double currentLat = 0, currentLong = 0;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        //Assign Variable\n        sp_type = findViewById(R.id.sp_type);\n        bt_find = findViewById(R.id.bt_find);\n        supportMapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.google_map);\n\n        //Initialize Array of place list\n        String[] placeTypeList = {&quot;hospital&quot;, &quot;medical&quot;, &quot;atm&quot;};\n        //Initialize Array of Place name list\n        String[] placeNameList = {&quot;Hospital&quot;, &quot;Medical&quot;, &quot;ATM&quot;};\n\n        //set Adapter on Spinner\n        sp_type.setAdapter(new ArrayAdapter&lt;&gt;(MainActivity.this, android.R.layout.simple_spinner_dropdown_item, placeNameList));\n\n        //Initialize Fused location client\n        fusedLocationProviderClient = LocationServices.getFusedLocationProviderClient(this);\n\n        //check permission\n        if (ActivityCompat.checkSelfPermission(MainActivity.this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n            //if permission is granted\n            //call method\n            getCurrentLocation();\n        } else {\n            //when permission denied\n            //request permission\n            ActivityCompat.requestPermissions(MainActivity.this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION}, 44);\n\n        }\n        bt_find.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                //get selected position of spinner\n                int i = sp_type.getSelectedItemPosition();\n                //Initialize Url\n                String url = &quot;https://maps.googleapis.com/maps/api/place/nearbysearch/json&quot; +//Url\n                        &quot;?location=&quot; + currentLat + &quot;,&quot; + currentLong +//location latitude and longitude\n                        &quot;&amp;radius=5000&quot; +//nearby Radius\n                        &quot;&amp;type&quot; + placeTypeList[i] +//place type\n                        &quot;&amp;sensor = true&quot; +//Sensor\n                        &quot;&amp;key=&quot; + &quot;AIzaSyCEidC6oECzj0IexspcvUpqnKPS2_nhKfQ&quot;;\n\n                //execute place task method to download json data\n                new Placetask().execute(url);\n            }\n        });\n\n\n    }\n\n    private void getCurrentLocation() {\n        if(ActivityCompat.checkSelfPermission(this , Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED\n                &amp;&amp; ActivityCompat.checkSelfPermission\n                (this , Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED)\n        {\n            ActivityCompat.requestPermissions(this, new String[]{Manifest.permission.ACCESS_FINE_LOCATION},44);\n            return;\n        }\n\n        //Initailize task location\n        Task&lt;Location&gt; task = fusedLocationProviderClient.getLastLocation();\n        task.addOnSuccessListener(new OnSuccessListener&lt;Location&gt;() {\n            @Override\n            public void onSuccess(Location location) {\n                //when successs\n                if(location!=null){\n                    //when location is not null\n                    //get current latitude\n                    currentLat = location.getLatitude();\n                    //get current longitude\n                    currentLong = location.getLongitude();\n                    //sync map\n                    supportMapFragment.getMapAsync(new OnMapReadyCallback() {\n                        @Override\n                        public void onMapReady(@NonNull GoogleMap googleMap) {\n                            //when map is ready\n                            map = googleMap;\n                            //zoom on current location\n                            map.animateCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(currentLat,currentLong),14));\n\n                        }\n                    });\n\n                }\n\n            }\n        });\n\n    }\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        if(requestCode==44){\n            if (grantResults.length &gt;0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED){\n                //when permission is granted\n                //call methode\n                getCurrentLocation();\n            }\n        }\n    }\n\n    private class Placetask extends AsyncTask&lt;String,Integer,String&gt; {\n        @Override\n        protected String doInBackground(String... strings) {\n            String data ;\n            try {\n                //Initialize data\n                data=downloadUrl(strings[0]);\n            } catch (IOException e) {\n                throw new RuntimeException(e);\n            }\n\n            return data;\n        }\n\n        @Override\n        protected void onPostExecute(String s) {\n            //Excute parser task\n            new ParserTask().execute(s);\n        }\n    }\n\n    private String downloadUrl(String string) throws IOException {\n        //Initialize Url\n        URL url = new URL(string);\n        //Initialize connection\n        HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n        //connect connection\n        connection.connect();\n        //initialize inputstream\n        InputStream stream = connection.getInputStream();\n        //Initialize bufferreader\n        BufferedReader reader= new BufferedReader(new InputStreamReader(stream));\n        //Initialize string builder\n        StringBuilder builder = new StringBuilder();\n        //Initailize String variable\n        String line = &quot;&quot;;\n        //use while loop\n        while ((line = reader.readLine())!=null){\n            //append line\n            builder.append(line);\n\n        }\n        //get append data\n        String data = builder.toString();\n        //close reader\n        reader.close();\n        //return data\n        return data;\n\n\n    }\n\n    private class ParserTask extends AsyncTask&lt;String,Integer, List&lt;HashMap&lt;String,String&gt;&gt;&gt; {\n        @Override\n        protected List&lt;HashMap&lt;String, String&gt;&gt; doInBackground(String... strings) {\n           //create jason parser\n            JsonPaeser jsonPaeser = new JsonPaeser();\n             //Initialize hash map list\n            List&lt;HashMap&lt;String,String&gt;&gt; mapList=null;\n            JSONObject object ;\n            try {\n                //intialize jsonobject\n                object = new JSONObject(strings[0]);\n                //Parse jsonobject\n                mapList = jsonPaeser.parseResult(object);\n            } catch (JSONException e) {\n                throw new RuntimeException(e);\n            }\n            //return map list\n            return mapList;\n        }\n\n        @Override\n        protected void onPostExecute(List&lt;HashMap&lt;String, String&gt;&gt; hashMaps) {\n            if (map != null) {\n                map.clear();\n            } else {\n                // Handle the case when the GoogleMap object is null\n                Log.e(&quot;GoogleMap&quot;, &quot;GoogleMap object is null&quot;);\n            }\n\n            //clear map\n           // map.clear();\n            //use for loop\n            for (int i=0;i&lt;hashMaps.size();i++){\n                //initialize hashmap\n                HashMap&lt;String,String&gt; hashMapList = hashMaps.get(i);\n                //get latitude\n                double lat = Double.parseDouble(hashMapList.get(&quot;lat&quot;));\n                //get longitude\n                double lng = Double.parseDouble(hashMapList.get(&quot;lng&quot;));\n                //get name\n                String name = hashMapList.get(&quot;name&quot;);\n                //concat latitude longitude\n                LatLng latLng = new LatLng(lat,lng);\n                //Initialize Marker Option\n                MarkerOptions options = new MarkerOptions();\n                //set position\n                options.position(latLng);\n                //set title\n                options.title(name);\n                //add marker option\n                map.addMarker(options);\n\n            }\n        }\n    }\n}\n</code></pre>\n<p>JsonParser.java:-</p>\n<pre><code>package com.example.nearbyplacedemo;\nimport org.json.JSONArray;\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\nimport java.util.ArrayList;\nimport  java.util.HashMap;\nimport java.util.List;\n\npublic class JsonPaeser {\n    private HashMap&lt;String , String&gt; parseJsonObject(JSONObject object){\n        //initialize hashmap\n        HashMap&lt;String,String&gt; datalist = new HashMap&lt;&gt;();\n        //get name form object\n        try {\n            String name = object.getString(&quot;name&quot;);\n            //get latitude from object\n            String latitude = object.getJSONObject(&quot;geometery&quot;)\n                    .getJSONObject(&quot;location&quot;).getString(&quot;lat&quot;);\n            //get longitude from object\n            String longitude = object.getJSONObject(&quot;geometery&quot;)\n                    .getJSONObject(&quot;location&quot;).getString(&quot;lng&quot;);\n            //put all value in hashmap\n            datalist.put(&quot;name&quot;,name);\n            datalist.put(&quot;lat&quot;,latitude);\n            datalist.put(&quot;lng&quot;,longitude);\n\n        } catch (JSONException e) {\n            throw new RuntimeException(e);\n        }\n        return datalist;\n\n    }\n    private List&lt;HashMap&lt;String,String&gt;&gt; parseJsonArray(JSONArray jsonArray){\n        //Initialize hashmap list\n        List&lt;HashMap&lt;String,String&gt;&gt; datalist= new ArrayList&lt;&gt;();\n        for (int i=0;i&lt;jsonArray.length();i++){\n            try {\n                //Initialize Hashmap\n                HashMap&lt;String,String&gt; data = parseJsonObject((JSONObject) jsonArray.get(i));\n                //add data in hashmap\n                datalist.add(data);\n            } catch (JSONException e) {\n                throw new RuntimeException(e);\n            }\n        }\n        //retuen hashmap list\n        return datalist;\n    }\n    public List&lt;HashMap&lt;String,String&gt;&gt; parseResult(JSONObject object){\n        //initialize jsonArray\n        JSONArray jsonArray ;\n\n        try {\n            //get result array\n            jsonArray = object.getJSONArray(&quot;results&quot;);\n        } catch (JSONException e) {\n            throw new RuntimeException(e);\n        }\n        //return array\n        return parseJsonArray(jsonArray);\n\n    }\n}\n</code></pre>\n<p>I Build Android App in which find user current location and the if user want nearby hospital, medical, atm then it select and the app show result. but in my app app run successfully but at the time user enter input app show error in logcat and don't show result</p>\n"},{"answers":[{"comments":[{"comment_id":129934206,"body":"Our team also ran into this issue. It was caused by the Gradle version of IntelliJ using another JVM. To solve this go to the preferences: Build, Execution, Deployment &gt; Build Tools &gt; Gradle &gt; Gradle JVM  and change the jvm version there"},{"comment_id":130078302,"body":"thanks @jvwilge , just spent an hour or so scratching my head after declaring sourceCompatibility/targetCompatibility and still facing this issue!"},{"comment_id":130290658,"body":"likewise, thanks @jvwilge, been fighting it for hours."},{"comment_id":130430337,"body":"Thanks @jvwilge I was confused why it still mentions Java 8 even though I have set the JDK to 11 in Project Settings."},{"comment_id":131762497,"body":"@jvwilge You&#39;re my hero"},{"comment_id":131884555,"body":"@jvwilge You&#39;re my hero"},{"comment_id":132498901,"body":"@jvwilge thanks man! consider please set you comment as an answer in order to help other people that don&#39;t see comments."}],"answer_id":72124026,"body":"<p>Ok, I found the problem.</p>\n<p>There were the following two lines in the build.gradle file :</p>\n<pre><code> sourceCompatibility = 10\n targetCompatibility = 10\n</code></pre>\n<p>They needed to be changed to 11. Then it worked.</p>\n"},{"answer_id":74781725,"body":"<p>in my case, it wasn't about Java Version. it still remain <strong>1.8 (8)</strong>.\nif you're using the latest version of Kotlin, you should update your <strong>Gradle Version</strong> to <strong>6.7.1</strong> or <strong>higher</strong> in <strong>Project Structure</strong>.\nI recommend changing <strong>Gradle Plugin Version</strong> to the latest <strong>Staible Version</strong>.</p>\n"},{"answer_id":74834646,"body":"<p>it is works for me change the code in the app/build.gradle file to this:</p>\n<pre><code>android {\n    compileSdkVersion 33\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_11\n        targetCompatibility JavaVersion.VERSION_11\n    }\n    ...\n}\n</code></pre>\n<p>or you can change it in the File/project structure</p>\n<p><a href=\"https://i.stack.imgur.com/7rhxL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7rhxL.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/tZPVJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tZPVJ.png\" alt=\"enter image description here\" /></a></p>\n"},{"answer_id":75040129,"body":"<p>Incompatible because this component declares an API of a component compatible with Java 11 and the consumer needed a runtime of a component compatible with Java 10</p>\n<p><strong>The meaning of this error is gradle wants to run at SDK 11 and SDK provided by your project structure is of version 10</strong></p>\n<p>I also faced the same issue while setting up the project in intelliJ,</p>\n<p>&quot;Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 11&quot;</p>\n<p>Solution : I downloaded Java SE Development kit 17 and integrate JDK 17 with project structure. Its worked.</p>\n"},{"comments":[{"comment_id":133117205,"body":"Had the same problem with Android Studio (Electric Eel) in a new project. Updated the <code>Gradle JDK</code> to 11 from the default 8 to fix the project sync."}],"answer_id":75355554,"body":"<p>With IntelliJ IDEA, I had to change which JDK Gradle used for running.  The original value was JDK 11, I changed it to JDK 17.</p>\n<p><a href=\"https://i.stack.imgur.com/bS8ZC.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/bS8ZC.png\" alt=\"Screenshot\" /></a></p>\n"},{"comments":[{"comment_id":133656591,"body":"same as <a href=\"https://stackoverflow.com/a/75355554/19665422\">stackoverflow.com/a/75355554/19665422</a>"},{"comment_id":134036958,"body":"For those working on multiple projects with varying version needs, you can set it to &quot;Project SDK&quot; to default to the JDK specified by the project properties (no idea why this isn&#39;t the default)."}],"answer_id":75588710,"body":"<p>Change the java version which gradle use. As the picture shown below, choose java 11.Then it is ok.\n<a href=\"https://i.stack.imgur.com/2rfUM.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/2rfUM.png\" alt=\"enter image description here\" /></a></p>\n"},{"answer_id":75807953,"body":"<p>With IntelliJ IDEA, for me it worked with <code>file</code> -&gt; <code>invalidate caches</code> -&gt; <code>invalidate and restart</code> after correcting the version of Gradle JDK/JVM.</p>\n"},{"answer_id":76089021,"body":"<p>The Java version of my JAVA_HOME configuration was 10 before. After changing to Java11, it will be fine.</p>\n"},{"answer_id":76273461,"body":"<p>create a file in root system.properties and add there\njava.runtime.version=17</p>\n"}],"last_activity_date":1684335298,"question_id":72117858,"body":"<p>In my build.gradle file I upgraded the version of one dependency (namely: com.db:microservice-commons).\nAfter loading the gradle changes, I get the following error message:</p>\n<pre class=\"lang-none prettyprint-override\"><code>&gt; Build file 'C:\\Projects\\Container\\mschmidt\\mount\\booking-service\\standalone\\build.gradle' line: 50\n\n   &gt; A problem occurred evaluating project ':standalone'.\n   &gt; Could not resolve all files for configuration ':standalone:runtimeClasspath'.\n   &gt; Could not resolve com.db:microservice-commons:2.4.1.\n     Required by:\n         project :standalone\n         project :standalone &gt; project :service\n      &gt; No matching variant of com.db:microservice-commons:2.4.1 was found. The consumer was configured to find a runtime of a library compatible with Java 10, packaged as a jar, preferably optimized for standard JVMs, and its dependencies declared externally but:\n          - Variant 'apiElements' capability com.db:microservice-commons:2.4.1 declares a library, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares an API of a component compatible with Java 11 and the consumer needed a runtime of a component compatible with Java 10\n              - Other compatible attribute:\n                  - Doesn't say anything about its target Java environment (preferred optimized for standard JVMs)\n          - Variant 'runtimeElements' capability com.db:microservice-commons:2.4.1 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares a component compatible with Java 11 and the consumer needed a component compatible with Java 10\n              - Other compatible attribute:\n                  - Doesn't say anything about its target Java environment (preferred optimized for standard JVMs)\n          - Variant 'samplessources' capability com.db:microservice-commons:2.4.1:\n              - Incompatible because this component declares documentation and the consumer needed a library\n              - Other compatible attributes:\n                  - Doesn't say anything about how its dependencies are found (required its dependencies declared externally)\n                  - Doesn't say anything about its target Java environment (preferred optimized for standard JVMs)\n                  - Doesn't say anything about its target Java version (required compatibility with Java 10)\n                  - Doesn't say anything about its elements (required them packaged as a jar)\n                  - Doesn't say anything about its usage (required a runtime)\n</code></pre>\n<p>Line 50+ of file 'C:\\Projects\\Container\\mschmidt\\mount\\booking-service\\standalone\\build.gradle' looks as follows:</p>\n<pre><code>manifest {\n    def manifestClasspath = configurations.runtimeClasspath.collect { it.getName() }.join(' ')\n    attributes 'Archiver-Version': 'Plexus Archiver'\n    attributes 'Build-Jdk': org.gradle.internal.jvm.Jvm.current()\n    attributes 'Main-Class': 'com.db.service.standalone.Standalone', 'Class-Path': manifestClasspath\n    }\n}\n</code></pre>\n<p>I have no clue what to make of this. Project JDK and Gradle JVM are set to Java 11.\nThis post here:\n<a href=\"https://stackoverflow.com/questions/68087672/the-consumer-was-configured-to-find-a-runtime-of-a-library-compatible-with-java\">The consumer was configured to find a runtime of a library compatible with Java 11, packaged as a jar, and its dependencies declared externally but:</a>\n... pertains to the same problem but didn't help me.</p>\n<p>Any ideas what's going on here?</p>\n"},{"comments":[{"comment_id":134500773,"body":"is the seuqence a PK?  That is a bad idea to reset sequences once their values are stored in tables.  Use a date or something more appropriate to represent a year.  That&#39;s not what sequences are for.  Either way, post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"comment_id":134500957,"body":"You can add a separate column to the table like orderNumberInFinancialYear leaving the existing primary key as it is. For the new column you can use a different sequence and reset it when the financial year starts."}],"last_activity_date":1684334986,"question_id":76271532,"body":"<p>I am creating a sequence for a table. Starting of every financial year I want that sequence to start again from 1  without deleting the contents of the table for which the sequence is being used. I am using Spring Boot for doing all this work. I am using MySQL as database.</p>\n<p>I tried to truncate the sequence table and manually enter the next value but I received an error of duplication of primary key.</p>\n"},{"last_activity_date":1684334857,"question_id":76273395,"body":"<p>I have an interface called <code>Response</code> with a single field named <code>info</code>. This interface is implemented by two classes from different packages. Both the interface and the classes have the same name (if that is of importance). The first class contains only the <code>String info</code> field, while the second class has an additional field called <code>Integer number</code>.</p>\n<pre><code>package com.example;\n\n@JsonTypeInfo(use = DEDUCTION)\n@JsonSubTypes({\n        @JsonSubTypes.Type(com.example.package1.Response.class),\n        @JsonSubTypes.Type(com.example.package2.Response.class)})\npublic interface Response {\n    String getInfo();\n}\n\n///\ncom.example.package1;\n\npublic class Response implements com.example.Response {\n    String info;\n}\n\n///\ncom.example.package2;\n\npublic class Response implements com.example.Response {\n    String info;\n    Integer number;\n}\n\n</code></pre>\n<p>In my controller, I explicitly specify the usage of com.example.package1.Response</p>\n<pre><code>    @PostMapping\n    fun start(\n        @RequestBody response: com.example.package1.Response\n    ): ResponseEntity&lt;&gt; {\n        ///code here\n    }\n</code></pre>\n<p>When pass a JSON object <code>{ &quot;info&quot;: &quot;info&quot; }</code>, expecting Jackson to infer the mapping to this class. However, I encounter an exception:</p>\n<pre><code>Cannot deduce unique subtype of `com.example.package1.Response.class` (2 candidates match)]\n</code></pre>\n<p>How can I fix this that controller can map to correct type?</p>\n"},{"comments":[{"comment_id":134502689,"body":"What version of spring boot and gradle are you using?"},{"comment_id":134503839,"body":"I suggest migrate to open api:<a href=\"https://springdoc.org/migrating-from-springfox.html\" rel=\"nofollow noreferrer\">springdoc.org/migrating-from-springfox.html</a>"},{"comment_id":134505584,"body":"Gradle 7.4 ,  Spring 3.0.6"}],"last_activity_date":1684334771,"question_id":76272091,"body":"<p>SwaggerConfig.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.platzi.market.web.config;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport springfox.documentation.builders.RequestHandlerSelectors;\nimport springfox.documentation.spi.DocumentationType;\nimport springfox.documentation.spring.web.plugins.Docket;\nimport springfox.documentation.swagger2.annotations.EnableSwagger2;\n\n@Configuration\n@EnableSwagger2\npublic class SwaggerConfig {\n\n    @Bean\n    public Docket api() {\n        return new Docket(DocumentationType.SWAGGER_2)\n                \n                .select()\n                .apis(RequestHandlerSelectors.basePackage(&quot;com.platzi.market.web.controller&quot;))\n                .build();\n    }\n}\n</code></pre>\n<p>If I remove @Configuration the error is removed but it doesn't work, because it opens the swagger but I get a browser alert that says ''Unable to infer base url. This is common when using dynamic servlet registration or when the API is behind an API Gateway. The base url is the root of where all the swagger resources are served. For e.g. if the api is available at <a href=\"http://example.org/api/v2/api-docs\" rel=\"nofollow noreferrer\">http://example.org/api/v2/api-docs</a> then the base url is <a href=\"http://example.org/api/\" rel=\"nofollow noreferrer\">http://example.org/api/</a>. Please enter the location manually&quot;</p>\n<p>I don't know how to expose all the code, I leave you the dependencies of the build.gradle document</p>\n<p>dependencies in build.gradle:</p>\n<pre><code>dependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'io.springfox:springfox-swagger2:2.9.2'\n    implementation 'io.springfox:springfox-swagger-ui:2.9.2'\n    runtimeOnly'com.mysql:mysql-connector-j'\n    implementation 'org.mapstruct:mapstruct:1.5.5.Final'\n    annotationProcessor 'org.mapstruct:mapstruct-processor:1.5.5.Final'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n}\n</code></pre>\n<p>I also tried another version 3.0.0 but the same thing happens to me. So I attach an image of the error with both annotations</p>\n<pre class=\"lang-none prettyprint-override\"><code>Error: &quot;Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'apiListingScanner' defined in URL jar:file:/C:/Users////&quot; \n</code></pre>\n"},{"answers":[{"comments":[{"comment_id":134514376,"body":"I tried working following the above way, but even if I use constraintweight and change the score to zero, it&#39;s considering the constraint and changing the starttime. I want the constraint to disable when this condition is true:- &#39;if(!routingProblem.getConstraintNames().contains(&quot;updateSta&zwnj;&#8203;rtTimeConstraint&quot;)) {             ConferenceConstraintConfiguration constraintConfig = new ConferenceConstraintConfiguration();             constraintConfig.setUpdateStartTime(BendableLongScore.zero(2&zwnj;&#8203;,1));             solution.setConstraintConfiguration(constraintConfig);         }`"},{"comment_id":134519315,"body":"Constraints should not change the problem/solution during evaluation; if you need to update some fields during solving, use shadow variables instead: (<a href=\"https://www.optaplanner.org/docs/optaplanner/latest/shadow-variable/shadow-variable.html\" rel=\"nofollow noreferrer\">optaplanner.org/docs/optaplanner/latest/shadow-variable/&hellip;</a>). OptaPlanner may choose a move that updates the start time if it does not decrease the score. So if you don&#39;t want moves that update the start time to be generated in certain conditions, you need to generate the moves yourself (<a href=\"https://www.optaplanner.org/docs/optaplanner/latest/move-and-neighborhood-selection/move-and-neighborhood-selection.html\" rel=\"nofollow noreferrer\">optaplanner.org/docs/optaplanner/latest/&hellip;</a>)."}],"answer_id":76273356,"body":"<p>You can disable constraints by using a <code>@ConstraintConfiguration</code> class and set the <code>@ConstraintWeight</code> field corresponding to the disabled constraint to the zero score (see <a href=\"https://www.optaplanner.org/docs/optaplanner/latest/score-calculation/score-calculation.html#constraintConfiguration\" rel=\"nofollow noreferrer\">https://www.optaplanner.org/docs/optaplanner/latest/score-calculation/score-calculation.html#constraintConfiguration</a> for full details).</p>\n<p>Planning Solution Class:</p>\n<pre><code>@PlanningSolution\npublic class ConferenceSolution {\n    \n    @ConstraintConfigurationProvider\n    private ConferenceConstraintConfiguration constraintConfiguration;\n    \n    // ...\n}\n</code></pre>\n<p>ConstraintConfiguration:</p>\n<pre><code>@ConstraintConfiguration(constraintPackage = &quot;...conferencescheduling.score&quot;)\npublic class ConferenceConstraintConfiguration {\n\n    @ConstraintWeight(&quot;Speaker conflict&quot;)\n    private HardMediumSoftScore speakerConflict = HardMediumSoftScore.ofHard(10);\n\n    @ConstraintWeight(&quot;Theme track conflict&quot;)\n    private HardMediumSoftScore themeTrackConflict = HardMediumSoftScore.ofSoft(10);\n    @ConstraintWeight(&quot;Content conflict&quot;)\n    private HardMediumSoftScore contentConflict = HardMediumSoftScore.ofSoft(100);\n\n    // ...\n}\n</code></pre>\n<p>Disabling constraints</p>\n<pre><code>ConferenceConstraintConfiguration constraintConfig = new ConferenceConstraintConfiguration();\nconstraintConfig.contentConflict = HardMediumSoftScore.ZERO;\n</code></pre>\n"}],"last_activity_date":1684334624,"question_id":76268815,"body":"<p>I've set the constaints like this:-</p>\n<pre><code>ScoreDirectorFactoryConfig scoreDirectorFactoryConfig = new ScoreDirectorFactoryConfig();         scoreDirectorFactoryConfig.setConstraintProviderClass(VehicleRoutingConstraintProvider.class);\n</code></pre>\n<p>I couldn't find out anything related to enabling and/or disabling constraints in optaplanner.</p>\n<p>So, I wanted to know if there's a way to enable and disable the constraints after or before setting the constraint provider class.</p>\n<p>My question is:</p>\n<p><strong>Can we enable and/or disable constraint during runtime in optaplanner based on a condition?</strong></p>\n"},{"comments":[{"comment_id":134503550,"body":"There should be minimal mocking for this one. I&#39;m sure this makes perfect sense to somebody, but Java has gotten a little weird in this area."},{"comment_id":134503556,"body":"It&#39;s an anonymous subclass with an instance initializer block. It&#39;s a bad idea and it&#39;s often called <a href=\"https://stackoverflow.com/questions/1958636/what-is-double-brace-initialization-in-java\">Double Brace initialization</a> because it&#39;s often formatted as <code>new Something() {{ doThing }}</code>."},{"comment_id":134503573,"body":"Its called the double-brace (<i>anti</i>-)pattern. It creates an anonymous class and then has an initializer-block in it (which is executed during its construction). <code>new Foo(){...}</code> for the anonymous class and <code>{...}</code> inside it for an intializer block."},{"comment_id":134503582,"body":"@JonathanDavidArndt the good news is that basically no one that understands it actively thinks this is a good idea. At least no one that I ever discussed this with."},{"comment_id":134503592,"body":"It was sometimes used before <code>Map.of(...)</code> and <code>List.of(...)</code> etc were a thing, because its shorter than writing it out properly. (Doesnt necessarily justify its use though)"},{"comment_id":134503600,"body":"Well, That is a relief anyway. Our instructors always warned us about using &quot;unusual programming features&quot; and it is so true."},{"comment_id":134503603,"body":"@Zabuzard: yeah, but even then just creating your own helper method is much saner. Because the double-brace initializer always creates a new class with all the associated disadvantages."},{"comment_id":134503677,"body":"Just to address the second question. Have  a look at <a href=\"https://stackoverflow.com/a/745769/664577\">stackoverflow.com/a/745769/664577</a> . To sum it up, the syntax in question is creating a serializable function (i.e., the underlying class implements both <code>Function</code> and <code>Serializable</code>)."},{"comment_id":134503735,"body":"@AnthonyAccioly Thanks all and thank you specifically."}],"last_activity_date":1684334534,"question_id":76273274,"body":"<p>I will probably be mocked at but I don't understand this syntax.</p>\n<p>What does that mean?</p>\n<pre><code>new HashMap&lt;String, Function&lt;String, LocalDateTime&gt;&gt;() {\n                        {\n                            Function&lt;String, LocalDateTime&gt; dateParser = (Function&lt;String, LocalDateTime&gt; &amp; Serializable) (\n                                    dateText) -&gt; {\n                                return LocalDateTime.parse(dateText, DateTimeFormatter.ofPattern(&quot;yyyy-M-d'T'HH:mm:ss.SSS&quot;);\n                            };\n\n                            put(&quot;messageDate&quot;, dateParser);\n                        }\n}\n</code></pre>\n<p>This whole thing is passed in as an argument to a method  where a <code>HashMap&lt;String, Function&lt;String, LocalDateTime&gt;&gt;</code> parameter is expected.</p>\n<ol>\n<li>Does it mean we are sub-classing <code>HashMap&lt;String, Function&lt;String, LocalDateTime&gt;&gt;</code> somehow in-place, and somehow calling implicitly a class or an instance constructor or something like that?</li>\n</ol>\n<p>I don't get this syntax. Please someone more knowledgeable explain and point me to some docs.</p>\n<ol start=\"2\">\n<li>I don't get this part too.<br />\n<code>(Function&lt;String, LocalDateTime&gt; &amp; Serializable)</code><br />\nWhat does that mean as well?</li>\n</ol>\n<p>In which version of Java was this syntax introduced?</p>\n<p>It is legacy code written by someone else which we are using in our BigData/Spark projects. I was debugging it last night (or actually rather staring at it), and then realized I don't really understand even the syntax of this.</p>\n"},{"last_activity_date":1684334469,"question_id":76273331,"body":"<p>I'm very new to Spring Boot.</p>\n<p>I have an entity that basically is a kind of &quot;tier list&quot;. It is used as a ranking of objects. Multiple objects could be in the same rank.</p>\n<p>So I represent it as HashMap&lt;Integer, LinkedList&lt;ObjectsToRank&gt;&gt;. The map key is the rank, associated with list of ObjectsToRank.</p>\n<p>Tier list entity:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;classements&quot;)\npublic class ClassementEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id_classement&quot;)\n    private  Long id_classement;\n\n    @ManyToOne\n    @JoinColumn(name = &quot;id_agent&quot;)\n    private AgentEntity agent;\n\n    @Column(name = &quot;max_rank&quot;)\n    private Integer max_rank;\n    \n    private HashMap&lt;Integer, LinkedList&lt;PeriodeProtocolaireEntity&gt;&gt; mapRang;\n\n}\n</code></pre>\n<p>So my question is how can I store it in my PostgreSQL DB ?</p>\n<p>I thought about Jsonb column that would look like:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    mapKeyInteger: [\n            PeriodeProtocolaireEntity.id,\n            PeriodeProtocolaireEntity.id,\n    ],\n    2: ...\n}\n</code></pre>\n<p>But I don't know how to do it in a good way with Spring Boot or if there is a better way.</p>\n"},{"comments":[{"comment_id":134504154,"body":"there&#39;s an open ticket in IDEA&#39;s tracker for this, vote for <a href=\"https://youtrack.jetbrains.com/issue/IDEA-161642\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/IDEA-161642</a>"}],"last_activity_date":1684334428,"question_id":76273328,"body":"<p>Like in this method:</p>\n<pre><code>@Transactional\n@Override\npublic boolean deleteConfigDictionary(Long id){\n  return false;\n}\n</code></pre>\n<p>After I add @Override to this method, Idea found there is no matching interface method in the interface. So it marks it as error and offer to pull it up:</p>\n<p><a href=\"https://i.stack.imgur.com/N0S5s.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N0S5s.png\" alt=\"enter image description here\" /></a></p>\n<p>But after the interface method is created, it automatically has @Transactional annotation, which is discouraged in Spring:</p>\n<pre><code>@Transactional\nboolean deleteConfigDictionary(Long id);\n</code></pre>\n<p>How to avoid this? Would be helpful if I can choose what annotations are not pulled up or maybe just disable copying annotation.</p>\n"},{"comments":[{"comment_id":127767584,"body":"In your &quot;approach 1&quot; code, you haven&#39;t shown where you declared and defined the <code>copmpany</code> and <code>site</code> variables."},{"comment_id":127769403,"body":"If you see it again, I’ve clearly mentioned the values of the parameters of the object of type PolicyDataToBeVerified, the “company” parameter as “company1” and “site” as “site1”, they both are strings."},{"comment_id":127769691,"body":"Yeah but you&#39;re not referencing <code>this</code>. You&#39;re referencing arbitrary declared variables from ... somewhere."},{"comment_id":127791650,"body":"<code>company</code> and <code>site</code> are the parameters of the class <code>PolicyDataToBeVerified</code>, so their values are picked automatically from the working memory of DROOLS"}],"answers":[{"answer_id":72318665,"body":"<p><strong>NOTE:</strong> <em>IntellijIDEA has inaccurate linting for .drl files, so request you to not rely on it.</em></p>\n<p>I created a validateSlotsResponse as following for better handling of response:</p>\n<pre><code>package com.example.demo;\nimport lombok.Builder;\nimport lombok.Data;\nimport java.util.List;\n\n@Data\n@Builder\npublic class ValidateSlotsResponse {\n    boolean isRequestValid;\n    List&lt;String&gt; comments;\n}\n</code></pre>\n<p>I'll pass this class's object into the working memory of DROOLS, and will update it inside the drools program, which will then be used as the respose for validation.</p>\n<p>Below are the rules inside my drools file, please make sure you have made the right imports:</p>\n<pre><code>rule &quot;fetchMaximumAllowedWeeklyWorkingHours&quot;\nwhen\n     $validateSlotsResponse: ValidateSlotsResponse()\n     $policyDataToBeVerified: PolicyDataToBeVerified()\n     $configJson: JsonNode()\n     $workingHoursAllowed:Integer() from $configJson.get($policyDataToBeVerified.getCompany()).get($policyDataToBeVerified.getSite()).get(&quot;maxWeeklyWorkingHours&quot;).intValue()\nthen\n end\n\n\n rule &quot;maxWorkingHoursAccept&quot; extends &quot;fetchMaximumAllowedWeeklyWorkingHours&quot;\n when\n     eval($policyDataToBeVerified.workerWeeklyWorkingHours() &lt;= $workingHoursAllowed)\n then\n     $policyDataToBeVerified.setIsRequestValid(true);\n     $validateSlotsResponse.setRequestValid(true);\n     $validateSlotsResponse.setComments(new ArrayList&lt;&gt;(Arrays.asList(&quot;Worker allowed to work for &quot;+$policyDataToBeVerified.getMaximumWeeklyWorkingHours() + &quot; hours&quot;)));\n  end\n\n\n  rule &quot;maxWorkingHoursReject&quot; extends &quot;fetchMaximumAllowedWeeklyWorkingHours&quot;\n  when\n       eval($policyDataToBeVerified.workerWeeklyWorkingHours() &gt; Integer.parseInt($workingHoursAllowed.toString()))\n  then\n       $policyDataToBeVerified.setIsRequestValid(false);\n       $validateSlotsResponse.setRequestValid(false);\n       $validateSlotsResponse.setComments(new ArrayList&lt;&gt;(Arrays.asList(&quot;Worker not allowed to work more than &quot;+ $workingHoursAllowed + &quot; hours&quot;)));\n  end\n</code></pre>\n"}],"last_activity_date":1684334247,"question_id":72302405,"body":"<p>I've been trying to execute a set of rules on a request object on the basis of some set of configuration value. Below is the example on what I am trying to do:</p>\n<p><strong>Configuration:</strong>\nconfig.json</p>\n<pre><code>{\n  &quot;company1&quot;: {\n    &quot;site1&quot;: {\n      &quot;maxWeeklyWorkingHours&quot;: 40,\n      &quot;rule2&quot;: [1, 3, 4],\n    },\n    &quot;site2&quot;: {\n      &quot;maxWeeklyWorkingHours&quot;: 40,\n      &quot;rule2&quot;: [1, 3, 4],\n    }\n  },\n  &quot;company2&quot;: {\n    &quot;site1&quot;: {\n      &quot;maxWeeklyWorkingHours&quot;: 40,\n      &quot;rule2&quot;: [1, 3, 4],\n    },\n    &quot;site2&quot;: {\n      &quot;maxWeeklyWorkingHours&quot;: 40,\n      &quot;rule2&quot;: [1, 3, 4],\n    }\n  }\n}\n</code></pre>\n<p><strong>Request Class Object:</strong> policyDataToBeVerified</p>\n<pre><code>PolicyDataToBeVerified(company=company1, site=site1, workerWeeklyWorkingHours=39, isRequestValid=0)\n</code></pre>\n<p>I converted the config.json into a JsonNode object:configJson and passed both policyDataToBeVerified and configJson to drools working memory. Below are the approaches I tried to take to frame the rule but failed anyways:</p>\n<p><strong>APPROACH 1:</strong>\ndrools.drl</p>\n<pre><code>rule &quot;maxWorkingHours&quot;\nwhen\n    $configJson: JsonNode()\n    $policyData: PolicyDataToBeVerified(maximumWeeklyWorkingHours &lt;= $configJson.get(company).get(site).get(&quot;workerWeeklyWorkingHours&quot;))\nthen\n    $policyData.setIsRequestValid(true)\n end\n</code></pre>\n<p>Issue: I am getting null pointer exception at $configJson.get(company).get(site).get(&quot;workerWeeklyWorkingHours&quot;)</p>\n<p><strong>APPROACH 2:</strong>\nI even tried to use configJSON as a global variable but, then drools didn't allow me to use get methods of JsonNode to get the nested fields from JSON</p>\n<hr />\n<p>I've been trying to find a solution to my problem for past few days, but nothing worked. I'd be happy to learn even if we can view this problem from a different perspective and solve it in a different way, or if we can debug this, whatever works.</p>\n"},{"last_activity_date":1684333954,"question_id":76273251,"body":"<p>Created simple Spring-boot service with websockets. It is connected to Eureka. I'm trying to organise controller which could be point of websocket messages exchange</p>\n<p>Websockets configuration is:</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebsocketConfig implements WebSocketMessageBrokerConfigurer {\n    @Override\n    public void configureMessageBroker(MessageBrokerRegistry config) {\n        config.enableSimpleBroker(&quot;/topic/&quot;, &quot;/queue/&quot;);\n        config.setApplicationDestinationPrefixes(&quot;/app&quot;);\n    }\n\n    @Override\n    public void registerStompEndpoints(StompEndpointRegistry registry) {\n        registry.addEndpoint(&quot;/request_chat&quot;);\n        registry.addEndpoint(&quot;/request_chat&quot;).withSockJS();\n    }\n}\n</code></pre>\n<p>Controller to exchange messages:</p>\n<pre><code>@Controller\npublic class WebSocketMessageController {\n    private final RequestService requestService;\n    private final Map&lt;String, ChatSession&gt; chatSessions;\n\n    public WebSocketMessageController(RequestService requestService) {\n        this.requestService = requestService;\n        this.chatSessions = new ConcurrentHashMap&lt;&gt;();\n    }\n\n    @MessageMapping(&quot;/request_chat&quot;)\n    @SendTo(&quot;/topic/messages/{sessionId}&quot;)\n    public RequestDTO processMessage(@DestinationVariable String sessionId,\n                                     @DestinationVariable String clientId,\n                                     RequestDTO requestDTO) {\n        requestDTO.setSessionId(sessionId);\n        requestDTO.setClientId(clientId);\n\n        RequestDTO savedRequestDTO = requestService.processMessage(requestDTO);\n\n        ChatSession chatSession = chatSessions.computeIfAbsent(sessionId, ChatSession::new);\n        chatSession.broadcast(savedRequestDTO);\n\n        return savedRequestDTO;\n    }\n}\n</code></pre>\n<p>app properties file:</p>\n<pre><code>server:\n  port: 8082\nspring:\n  main:\n    web-application-type: reactive\n  application:\n    name: requests-service\neureka:\n  client:\n    registerWithEureka: true\n    fetchRegistry: true\n    serviceUrl:\n      defaultZone: http://localhost:8761/eureka/\n</code></pre>\n<p>In. postman when I create ws connection, I use url: <code>ws://localhost:8082/request_chat</code>, when I try to connect, get error:</p>\n<pre><code>Error: Unexpected server response: 404\nHandshake Details\nRequest URL: http://localhost:8082/request_chat\nRequest Method: GET\nStatus Code: 404 \nRequest Headers\nSec-WebSocket-Version: 13\nSec-WebSocket-Key: JJBhooLn8cReIvBRuc9hNw==\nConnection: Upgrade\nUpgrade: websocket\nSec-WebSocket-Extensions: permessage-deflate; client_max_window_bits\nHost: localhost:8082\n</code></pre>\n<p>So I'm using correct url and port, what can be problem here?</p>\n"},{"last_activity_date":1684333810,"question_id":76273136,"body":"<p>I have received a wsdl from a client for which I need to create a SOAP service.</p>\n<p>The Request message is defined as below -&gt;</p>\n<pre><code>&lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n       xmlns=&quot;http://xmlns.kt/testservice/V4&quot;\n       xmlns:servicestype=&quot;http://xmlns.kt/testservice2/V4&quot;\n       targetNamespace=&quot;http://xmlns.kt/testservice/V4&quot;\n       elementFormDefault=&quot;qualified&quot;\n       attributeFormDefault=&quot;unqualified&quot;&gt;\n  &lt;xs:element name=&quot;ReceiveDataReqMsg&quot; type=&quot;servicestype:ReceiveDataRequestType&quot;&gt;\n    &lt;xs:annotation&gt;\n      &lt;xs:documentation&gt;Request message&lt;/xs:documentation&gt;\n    &lt;/xs:annotation&gt;\n  &lt;/xs:element&gt;\n&lt;/xs:schema&gt;\n</code></pre>\n<p>I am using spring boot ws and maven jaxb plugin to generate the service.\nThe problem is the plugin generates the RequestMessage class as ReceiveDataRequestType instead of ReceiveDataReqMsg.</p>\n<p>For this i use a binding xjb and then the plugin creates the class as ReceiveDataReqMsg</p>\n<pre><code>  &lt;bindings xmlns=&quot;http://java.sun.com/xml/ns/jaxb&quot;\n      xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n      xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n      xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/jaxb http://java.sun.com/xml/ns/jaxb/bindingschema_2_0.xsd&quot;\n      version=&quot;2.1&quot;&gt;\n&lt;bindings schemaLocation=&quot;myschema.xsd&quot;&gt;\n    &lt;bindings node=&quot;//xs:element[@name='ReceiveDataReqMsg']&quot;&gt;\n        &lt;class name=&quot;ReceiveDataReqMsg&quot;&gt;\n        &lt;/class&gt;\n    &lt;/bindings&gt;\n&lt;/bindings&gt;\n</code></pre>\n\n<p>But the problem is when i call the service it just gives an error that no adapter found for the endpoint.(I have the endpoint correctly configured).</p>\n<p>If i edit and add a @XMLRootelement to the generated class then i get a nullpointerexception.</p>\n<p>Can someone please help.</p>\n<p>The generated class looks like this</p>\n<pre><code>public class ReceiveDataReqMsg\nextends JAXBElement&lt;ReceiveDataRequestType&gt;\n{\n\nprotected final static QName NAME = new QName(&quot;http://xmlns.kt/testservice/V4&quot;, &quot;ReceiveDataReqMsg&quot;);\n\npublic ReceiveDataReqMsg(ReceiveDataRequestType value) {\n    super(NAME, ((Class) ReceiveDataRequestType.class), null, value);\n}\n\npublic ReceiveReferenceDataReqMsg() {\n    super(NAME, ((Class) ReceiveDataRequestType.class), null, null);\n}\n\n}\n</code></pre>\n"},{"comments":[{"comment_id":134503368,"body":"Which <code>Environment</code> class are you talking about specifically?"},{"comment_id":134509869,"body":"org.springframework.core.env.Environment"}],"last_activity_date":1684333527,"question_id":76273188,"body":"<p>the yml looks like this</p>\n<pre><code>class:\n  student:\n    name:bob\n    number:12213550\n    gender:male\n</code></pre>\n<p>I want load the 'student' as a map via Enviroment.getProperties(&quot;student&quot;,Map.class), but only get a null.</p>\n<p>I can load it with @ConfigurationProperties, which is weird since I was told they are actually similar.</p>\n<p>what's the difference between them? and how can I get this map with Enviroment Object?</p>\n"},{"comments":[{"comment_id":134503441,"body":"Have you seen: <a href=\"https://stackoverflow.com/a/39992733/295004\">stackoverflow.com/a/39992733/295004</a>"},{"comment_id":134503789,"body":"<a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/format/DateTimeFormatter.html#ofLocalizedTime(java.time.format.FormatStyle)\" rel=\"nofollow noreferrer\"><code>DateTimeFormatter.ofLocalizedTime</code></a>"}],"last_activity_date":1684333500,"question_id":76273181,"body":"<p>I want to format a certain time/date,(HH:mm) to a specific locale type.\nFor example, I have 12:05 and I need it to be\n- in french 12h05\n- in dutch 12u05</p>\n<p>Is this possible without checking the current locale and adjust the result?</p>\n<pre><code>fun String.hourFormat() : String {\n       val time = LocalTime.parse (this, DateTimeFormatter.ISO_DATE_TIME)\n       val result = DateTimeFormatter.ofPattern(&quot;HH:mm&quot;).withLocale(LocaleManager.currentLocale())\n       return result\n     } \n</code></pre>\n<p>Does there exist something already implemented to format the time based on locale?\nThe current approach for me is to manually check the locale :</p>\n<pre><code>   fun String.hourFormat() : String {\n....\nval localePattern = when (LocaleManager.currentLocale().name){\n                       &quot;FR&quot; -&gt; &quot;HH'h'mm&quot;\n                       &quot;NL&quot; -&gt; &quot;HH'u'mm&quot; \n                   }\n    DateTimeFormatter.ofPattern(localePattern)\n\n}\n</code></pre>\n"},{"answers":[{"answer_id":41480040,"body":"<p>I would suggest first you should understand your application requirement. For the real production/live environment, are you going to use Infrastructure as a service or PAAS. </p>\n\n<p>If <strong>Infrastructure as a service</strong> then \nI would suggest create local cluster environment and use the tomcat and spring application sticky session concept. Persist the session in Hazelcast or redis server installed on different node. Configure load balancer for multiple nodes having tomcat server. 2-3 VMs for testing purpose would be suitable.</p>\n\n<p>If requirement is <strong>PAAS</strong> then\nDon't think about local environment. Test directly on OpenShift or AWS free account and trust me you would be able to test on <strong>PAAS</strong> if all setup is fine.</p>\n"},{"answer_id":76273180,"body":"<p>I would suggest that your Dockerize your application, then use <a href=\"https://www.testcontainers.org/\" rel=\"nofollow noreferrer\">Testcontainer</a> in a dedicated testing module, where you can spawn your database, RabbitMQ and multiple instances of your application in the setup of your tests. Then you can perform your tests by calling your API, randomly hitting any of your application containers.</p>\n"}],"last_activity_date":1684333491,"question_id":41479837,"body":"<p>I have coded a Spring MVC Hibernate application with RabbitMQ as a messaging server &amp; a MySQL DB. I have also used Hazelcast an in-memory distributed cache to centralize the state of the application, moving the local tomcat session to a centralized session &amp; implementing distributed locks.</p>\n\n<p>The app right now is hosted on a single tomcat server in my local system. </p>\n\n<p>I want to test my application on a multiple JVM node environment i'e app running on multiple tomcat servers. </p>\n\n<p>What would be the best approach to test the app. </p>\n\n<p>Few things that come to my mind </p>\n\n<p>A. Install &amp; configure a load balancer &amp; set up a tomcat cluster in my local system. This I believe is a tedious task &amp; requires much effort.</p>\n\n<p>B. Host the application on a PAAS like OpenShift, cloudfoundry but I am not sure if I will be able to test my application on several nodes.</p>\n\n<p>C. Any other way to simulate a clustered environment on my local windows system?</p>\n"},{"last_activity_date":1684333403,"question_id":75390440,"body":"<p>I try to migrate my project to map box 10, but I ran into an issue, which I can't solve.</p>\n<p>When I try to import import com.mapbox.maps.plugin.locationcomponent.location; it says &quot;Cannot resolve symbol location&quot;. It seems, that the location does not exists in package location component.</p>\n<p>When I do the same import in a kotlin file, it is available ... Strange ....</p>\n<p>In gradle, I have included the lines</p>\n<pre><code>implementation 'com.mapbox.maps:android:10.10.1'\nimplementation 'com.mapbox.plugin:maps-locationcomponent:10.11.0-rc.1'\n</code></pre>\n<p>But I can still not get the required components to show the users location.</p>\n<p>Any ideas?</p>\n"},{"comments":[{"comment_id":134502690,"body":"You are really trying to do everythig yourself whic is already provided by the &#167;restTemplate. Also you are writing the <code>objectMapper</code> as a string and not the object you want. But instead of using the objectmapper, ditch it and just put the <code>ObjectForRequestToReporter</code> in the <code>HttpEntity</code>. The <code>RestTemplate</code> will take care of the json conversion."},{"comment_id":134503718,"body":"You are serializing the <code>objectMapper</code>, not your <code>objectForRequestToReporter</code>. <code>objectMapper</code> does not have any properties to serialize (it is not a data class). -&gt; caused by a typo"}],"answers":[{"answer_id":76272817,"body":"<p>I think you have a mistake in this line:</p>\n<pre><code>String jsonObject = objectMapper.writeValueAsString(objectMapper);\n</code></pre>\n<p>Maybe it should be:</p>\n<pre><code>String jsonObject = objectMapper.writeValueAsString(objectForRequestToReporter);\n</code></pre>\n"},{"answer_id":76272843,"body":"<pre class=\"lang-java prettyprint-override\"><code>String jsonObject = objectMapper.writeValueAsString(objectMapper);\n</code></pre>\n<p>You are trying to convert the <code>ObjectMapper</code> to json.</p>\n<p>What you want:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String jsonObject = objectMapper.writeValueAsString(objectForRequestToReporter);\n</code></pre>\n<p>However your code is doing basically what the <code>RestTemplate</code> already does, and thus can be greatly simplified by removing the <code>ObjectMapper</code> as you don't need it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String getReportsFromReporter(@PathVariable(name = &quot;from&quot;)String from, \n  @PathVariable(name = &quot;to&quot;)String to) throws IOException {\n    String url = &quot;example.com&quot;;\n    \n    ObjectForRequestToReporter objectForRequestToReporter =\n            new ObjectForRequestToReporter();\n    objectForRequestToReporter.setToken(somedata);\n    objectForRequestToReporter.setEmployee(somedata);\n    objectForRequestToReporter.setFrom(from);\n    objectForRequestToReporter.setTo(to);\n\n    HttpHeaders httpHeaders = new HttpHeaders();\n    httpHeaders.setContentType(MediaType.APPLICATION_JSON);\n    httpHeaders.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\n    HttpEntity&lt;String&gt; entity = new HttpEntity&lt;String&gt;(objectForRequestToReporter, httpHeaders);\n    return restTemplate.postForObject(url , entity, String.class);\n}\n\n</code></pre>\n"}],"last_activity_date":1684333354,"question_id":76272768,"body":"<p>I need to serialize Java <code>Object</code> to <code>JSON</code>.</p>\n<p>But when I use <code>writeValueAsString</code> method this method returns me empty JSON Object.</p>\n<p>Here is my <code>@RestController</code>:</p>\n<pre><code>public String getReportsFromReporter(\n            @PathVariable(name = &quot;from&quot;) String from, \n            @PathVariable(name = &quot;to&quot;) String to) throws IOException {\n    String url = &quot;example.com&quot;;\n    ObjectMapper objectMapper = new ObjectMapper();\n    ObjectForRequestToReporter objectForRequestToReporter =\n                               new ObjectForRequestToReporter();\n    objectForRequestToReporter.setToken(somedata);\n    objectForRequestToReporter.setEmployee(somedata);\n    objectForRequestToReporter.setFrom(from);\n    objectForRequestToReporter.setTo(to);\n    String jsonObject = objectMapper.writeValueAsString(objectMapper);\n    HttpHeaders httpHeaders = new HttpHeaders();\n    httpHeaders.setContentType(MediaType.APPLICATION_JSON);\n    httpHeaders.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\n    HttpEntity&lt;String&gt; entity = new HttpEntity&lt;String&gt;(jsonObject, httpHeaders);\n    String ans = restTemplate.postForObject(url , entity, String.class);\n    String test = objectMapper.writerWithDefaultPrettyPrinter()\n                              .writeValueAsString(objectMapper);\n    System.out.println(test);\n    System.out.println(jsonObject);\n    return ans;\n}\n</code></pre>\n<p><code>System.out.println</code> shows this:</p>\n<pre><code> { }\n {}\n</code></pre>\n<p>Gradle depedencies:</p>\n<pre><code>implementation(&quot;com.fasterxml.jackson.core:jackson-annotations:2.14.2&quot;)\nimplementation(&quot;com.fasterxml.jackson.core:jackson-core:2.14.2&quot;)\nimplementation(&quot;com.fasterxml.jackson.core:jackson-databind:2.14.2&quot;)\n</code></pre>\n<p>Object class for serialize:</p>\n<pre><code>@Data\npublic class ObjectForRequestToReporter {\n    private String token;\n    private String employee;\n    private String from;\n    private String to;\n    private final int work_after = 0;\n}\n</code></pre>\n<p>What am I doing wrong? How can I fix this?</p>\n"},{"comments":[{"comment_id":134503280,"body":"Welcome to Stack Overflow! Please clarify your specific problem or add additional details to highlight exactly what you need.  As it&#39;s currently written, it’s hard to tell exactly what you&#39;re asking. See the  <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask page</a> for help clarifying this question. Include the desired behavior, a specific problem or error and the shortest code necessary to  reproduce the issue. See: <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>. Also clarify what &quot;marc21 format&quot; is."},{"comment_id":134503292,"body":"And please avoid duplicating the same sentence multiple times in the subject, and also in the body of the question. It adds nothing to the understanding."}],"last_activity_date":1684333057,"question_id":76273115,"body":"<p>so read json to convert marc21 format and output marc21 any idea</p>\n<p>ı try marc4j library but ı don't know how can ı convert json to marc21 in java ı convert json to java but ı cant convert</p>\n<p>java to(marc21) this is for change json format to marc21 format</p>\n"},{"comments":[{"comment_id":134503159,"body":"Remove your login method, Spring Security should handle that. Next to that your <code>register</code> doesn&#39;t encrypt passwords and for existing users you will need to change the passwords in the database to the encrypted ones"}],"last_activity_date":1684332581,"question_id":76273036,"body":"<p>I am making a Spring Web, java, MySQL, thymeleaf, maven project where I try to encode the passwords to the database. But every time I try to login or register a new user, I get redirected to the login page.</p>\n<p>UserDetailsService</p>\n<pre><code>@Service\n    public class CustomUserDetailsService implements UserDetailsService\n{\n\n        @Autowired\n        private UserRepository userRepository;\n\n        @Override\n        public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n            User user = userRepository.getUserByEmail(username);\n            if (user == null) {\n                throw new UsernameNotFoundException(&quot;User not found&quot;);\n            }\n            return new org.springframework.security.core.userdetails.User(user.getEmail(), user.getPassword(), new ArrayList&lt;&gt;());\n        }\n}\n</code></pre>\n<p>SecurityConfig:</p>\n<pre><code>@Configuration\npublic class SecurityConfig {\n\n    @Autowired\n    private UserDetailsService userDetailsService;\n\n    @Bean\n    public BCryptPasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    public DaoAuthenticationProvider authenticationProvider() {\n        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\n        authProvider.setUserDetailsService(userDetailsService);\n        authProvider.setPasswordEncoder(passwordEncoder());\n        return authProvider;\n    }\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n                .authenticationProvider(authenticationProvider())\n                .authorizeRequests(authorizeRequests -&gt;\n                        authorizeRequests\n                                .anyRequest().authenticated()\n                )\n                .formLogin(formLogin -&gt;\n                        formLogin\n                                .loginPage(&quot;/login&quot;)\n                                .defaultSuccessUrl(&quot;/allTasks&quot;, true)\n                                .loginProcessingUrl(&quot;/perform_login&quot;)\n                                .usernameParameter(&quot;email&quot;)\n                                .passwordParameter(&quot;password&quot;)\n                                .permitAll()\n                );\n        return http.build();\n    }\n}\n</code></pre>\n<p>HomeController (essential parts):</p>\n<pre><code>@PostMapping(&quot;/login&quot;)\n    public String login(@RequestParam(&quot;email&quot;) String email,\n                        @RequestParam(&quot;password&quot;) String password,\n                        Model model,\n                        HttpSession session) {\n        try {\n            Authentication auth = authenticationManager.authenticate(\n                    new UsernamePasswordAuthenticationToken(email, password)\n            );\n            SecurityContextHolder.getContext().setAuthentication(auth);\n\n            User user = (User) auth.getPrincipal();\n            session.setAttribute(&quot;user&quot;, user);\n            return &quot;redirect:/allTasks&quot;;\n        } catch (BadCredentialsException e) {\n            model.addAttribute(&quot;errorMessage&quot;, &quot;Email or password invalid&quot;);\n            return &quot;login&quot;;\n        }\n    }\n\n@PostMapping(&quot;/addUser&quot;)\n    public String addUser(@RequestParam(&quot;user-firstname&quot;) String newFirstName,\n                          @RequestParam(&quot;user-lastname&quot;) String newLastName,\n                          @RequestParam(&quot;user-email&quot;) String newEmail,\n                          @RequestParam(&quot;user-password&quot;) String newPassword,\n                          HttpSession session)\n    {\n        if ( session.getAttribute(&quot;user&quot;) == null )\n        {\n            return &quot;redirect:/&quot;;\n        }\n\n        //lave en ny User\n        User newUser = new User();\n        newUser.setFirstName(newFirstName);\n        newUser.setLastName(newLastName);\n        newUser.setEmail(newEmail);\n        // Encrypt the password before setting it\n        String encryptedPassword = passwordEncoder.encode(newPassword);\n        newUser.setPassword(encryptedPassword);\n\n        //Gem ny User\n        userRepository.addUser(newUser);\n\n        //Tilbage til start så man kan logge ind\n        return &quot;start&quot;;\n    }\n\n@PostMapping(&quot;/register&quot;)\n    public String registerUser(@RequestParam(&quot;first_name&quot;) String firstname,\n                               @RequestParam(&quot;last_name&quot;) String lastname,\n                               @RequestParam(&quot;email&quot;) String email,\n                               @RequestParam(&quot;password&quot;) String password,\n                               Model model,\n                               HttpSession session)\n    {\n        //Check if user with mail already exists\n        if ( !userRepository.checkIfUserExists(email) )\n        {\n            User user = new User(firstname, lastname, email, password);\n            userRepository.addUser(user);\n            session.setAttribute(&quot;user&quot;, user);\n            return &quot;redirect:/allTasks&quot;;\n        }\n        else\n        {\n            model.addAttribute(&quot;errorMessage&quot;, &quot;Email already in use&quot;);\n            return &quot;register&quot;;\n        }\n    }\n</code></pre>\n<p>Everything worked before I began experimenting with encryption, so I think the problem is in the SecurityConfig or CustomUserDetailsService? Or what do you think?</p>\n<p>I tried having the encryption directly in the userRepository addTask, but it gave the same problem.</p>\n<p>I tried to have the verification happen manually in the userRepository but it gave me some problems with the encryption.</p>\n"},{"last_activity_date":1684332402,"question_id":76272617,"body":"<p>I'm looping trough a list with coordinates in it and want to place multiple anchors. Now only the last one get rendered because it overrides it.</p>\n<pre><code>//loop trough the items in array\nfor(item in a){\n  //remove the { and } from the string\n  var b = item.replace(&quot;}&quot;, &quot;&quot;)\n  b = b.replace(&quot;{&quot;, &quot;&quot;)\n\n  //split the string on the , to get the values\n  var c = b.split(&quot;,&quot;)\n\n  var x = (c[1].split(&quot;:&quot;)[1])\n  var y = (c[2].split(&quot;:&quot;)[1])\n\n  val anchor =\n    session?.earth?.createAnchor(\n      /* Locational values */\n      x.toDouble(),\n      y.toDouble(),\n      session?.earth?.cameraGeospatialPose?.altitude?.minus(1)!!,\n      /* Rotational pose values */\n      0f,\n      0f,\n      0f,\n      1f\n    )\n</code></pre>\n<p>}</p>\n<p>I don't mind the first steps for formatting de data from api call and making an array.</p>\n<p>The item in the loop is an array with the first element being a name and the other two the coordinates.</p>\n<p>Only the last item in the array is being created.</p>\n"},{"comments":[{"comment_id":134487784,"body":"1) If you have solved the <code>NullPointerException</code> problem, why are you asking about it?  2) What is the problem with the screen shot?  What <i>should</i> it look like?"},{"comment_id":134488207,"body":"Try checking both of those objects (model, and mUser). One of them is null no?"},{"comment_id":134488239,"body":"@Stephen Added a screenshot of what it should look like"},{"comment_id":134488367,"body":"@TbirdDUNKIN most likely model is null, but I don&#39;t understand why it doesn&#39;t take the id of the user who sent the message?"},{"comment_id":134488939,"body":"Can you post the layout.xml listitem_messagetext?"}],"answers":[{"answer_id":76265073,"body":"<p>Is this how you wanted your output?</p>\n<p><a href=\"https://i.stack.imgur.com/azdUn.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/azdUn.jpg\" alt=\"enter image description here\" /></a></p>\n<p>If yes, here is the altered code of your layout listitem_messagetext.xml.</p>\n<pre><code>&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;wrap_content&quot;\nandroid:orientation=&quot;vertical&quot;&gt;\n\n&lt;LinearLayout\n    android:id=&quot;@+id/linearLayout&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:orientation=&quot;horizontal&quot;\n    android:padding=&quot;10dp&quot;\n    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n    app:layout_constraintHorizontal_bias=&quot;0.0&quot;\n    app:layout_constraintStart_toStartOf=&quot;parent&quot;\n    app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\n\n    &lt;de.hdodenhof.circleimageview.CircleImageView\n        android:id=&quot;@+id/friendMessageProfileImageCiv&quot;\n        android:layout_width=&quot;45dp&quot;\n        android:layout_height=&quot;45dp&quot;\n        android:src=&quot;@drawable/flower&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/friendMessageTv&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_gravity=&quot;center&quot;\n        android:padding=&quot;8dp&quot;\n        android:text=&quot;This is text&quot;\n        android:textColor=&quot;@color/black&quot;\n        android:textSize=&quot;16dp&quot; /&gt;\n&lt;/LinearLayout&gt;\n\n&lt;LinearLayout\n    android:id=&quot;@+id/linearLayout2&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_gravity=&quot;right&quot;\n    android:orientation=&quot;horizontal&quot;\n    android:padding=&quot;10dp&quot;\n    app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n    app:layout_constraintHorizontal_bias=&quot;1.0&quot;\n    app:layout_constraintStart_toStartOf=&quot;parent&quot;\n    app:layout_constraintTop_toTopOf=&quot;parent&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/yourMessageTv&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_gravity=&quot;center&quot;\n        android:padding=&quot;8dp&quot;\n        android:text=&quot;This is text&quot;\n        android:textColor=&quot;@color/black&quot;\n        android:textSize=&quot;16dp&quot; /&gt;\n\n    &lt;de.hdodenhof.circleimageview.CircleImageView\n        android:id=&quot;@+id/yourMessageProfileImageCiv&quot;\n        android:layout_width=&quot;45dp&quot;\n        android:layout_height=&quot;45dp&quot;\n        android:src=&quot;@drawable/flower&quot; /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n\n"}],"last_activity_date":1684332119,"question_id":76263954,"body":"<p>I'm trying to make a chat using Firebase and I'm getting the following errors when I try to display messages that users have submitted:</p>\n<blockquote>\n<p>java.lang.NullPointerException: Attempt to invoke virtual method\n'boolean java.lang.String.equals(java.lang.Object)' on a null object\nreference at\ncom.example.javalearn.Fragment.ChatFragment$2.onBindViewHolder(ChatFragment.java:99)\nat\ncom.example.javalearn.Fragment.ChatFragment$2.onBindViewHolder(ChatFragment.java:96)</p>\n</blockquote>\n<p>The errors occur on the following lines:</p>\n<pre><code>if(model.getUserID().equals(mUser.getUid()))\n</code></pre>\n<pre><code>FirebaseRecyclerAdapter&lt;Chat, ChatMyViewHolder&gt; adapter = new FirebaseRecyclerAdapter&lt;Chat, ChatMyViewHolder&gt;(options)\n</code></pre>\n<p>Below is the code which is used to load messages:</p>\n<p>ChatFragment.java</p>\n<pre><code>@Override\npublic View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container,\n                         @Nullable Bundle savedInstanceState) {\n    View view = inflater.inflate(R.layout.fragment_chat, container, false);\n    messageRecycleView = view.findViewById(R.id.chatMessageListRv);\n    messageRecycleView.setLayoutManager(new LinearLayoutManager(getActivity()));\n    editTextInputMessages = view.findViewById(R.id.chatInputMessageEt);\n    imageButtonSendMessage = view.findViewById(R.id.chatSendMessageImgBtn);\n    circleImageViewUserProfilePic = view.findViewById(R.id.chatUserProfileImageAppBar);\n    textViewUserName = view.findViewById(R.id.chatUserProfileNameAppBar);\n\n    Bundle args = getArguments();\n    OtherUserId = args.get(&quot;userid&quot;).toString();\n\n    mUserRef = FirebaseDatabase.getInstance().getReference().child(&quot;users&quot;);\n    messageRef = FirebaseDatabase.getInstance().getReference().child(&quot;Messages&quot;);\n\n    mAuth = FirebaseAuth.getInstance();\n    mUser = mAuth.getCurrentUser();\n\n    LoadOtherUser();\n    LoadMessage();\n\n    imageButtonSendMessage.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            SendMessage();\n        }\n    });\n    return view;\n}\n</code></pre>\n<p>Method for loading messages:</p>\n<pre><code>private void LoadMessage() {\n        FirebaseRecyclerOptions&lt;Chat&gt; options = new FirebaseRecyclerOptions.Builder&lt;Chat&gt;().setQuery(messageRef.child(mUser.getUid()).child(OtherUserId), Chat.class).build();\n        FirebaseRecyclerAdapter&lt;Chat, ChatMyViewHolder&gt; adapter = new FirebaseRecyclerAdapter&lt;Chat, ChatMyViewHolder&gt;(options) {\n            @Override\n            protected void onBindViewHolder(@NonNull ChatMyViewHolder holder, int position, @NonNull Chat model) {\n                if(model.getUserID().equals(mUser.getUid())){\n                    holder.friendProfilePic.setVisibility(View.GONE);\n                    holder.friendMessage.setVisibility(View.GONE);\n                    holder.myProfilePic.setVisibility(View.VISIBLE);\n                    holder.myMessage.setVisibility(View.VISIBLE);\n\n                    holder.myMessage.setText(model.getMessage());\n                } else {\n\n                    holder.friendProfilePic.setVisibility(View.VISIBLE);\n                    holder.friendMessage.setVisibility(View.VISIBLE);\n                    holder.myProfilePic.setVisibility(View.GONE);\n                    holder.myMessage.setVisibility(View.GONE);\n\n                    holder.friendMessage.setText(model.getMessage());\n                    Picasso.get().load(OtherUserImageUrl).placeholder(R.drawable.ic_baseline_person_24).into(holder.friendProfilePic);\n                }\n\n            }\n\n            @NonNull\n            @Override\n            public ChatMyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n                View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.listitem_messagetext, parent, false);\n\n                return new ChatMyViewHolder(view);\n            }\n        };\n        adapter.startListening();\n        messageRecycleView.setAdapter(adapter);\n    }\n</code></pre>\n<p>Chat class:</p>\n<pre><code>public class Chat {\n    public String message, status, userID;\n\n    public Chat(){\n\n    }\n\n    public Chat(String message, String status, String userID) {\n        this.message = message;\n        this.status = status;\n        this.userID = userID;\n    }\n\n    public String getMessage() {\n        return message;\n    }\n\n    public void setMessage(String message) {\n        this.message = message;\n    }\n\n    public String getStatus() {\n        return status;\n    }\n\n    public void setStatus(String status) {\n        this.status = status;\n    }\n\n    public String getUserID() {\n        return userID;\n    }\n\n    public void setUserID(String userID) {\n        this.userID = userID;\n    }\n}\n</code></pre>\n<p>ViewHolder for chat:</p>\n<pre><code>public class ChatMyViewHolder extends RecyclerView.ViewHolder {\n\n    public CircleImageView friendProfilePic, myProfilePic;\n    public TextView friendMessage, myMessage;\n    public ChatMyViewHolder(@NonNull View itemView) {\n        super(itemView);\n\n        friendProfilePic = itemView.findViewById(R.id.friendMessageProfileImageCiv);\n        myProfilePic = itemView.findViewById(R.id.yourMessageProfileImageCiv);\n        friendMessage = itemView.findViewById(R.id.friendMessageTv);\n        myMessage = itemView.findViewById(R.id.yourMessageTv);\n\n    }\n}\n</code></pre>\n"}]}