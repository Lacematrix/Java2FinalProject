{"items":[{"comments":[{"comment_id":134514198,"body":"You have not given the details of the design; however, you need to refactor the current design such that any class that both service A and B depend on is floated up as part of a common library. How it can be done is dependent on your current standing design, by general principal that&#39;s what need to be done"}],"last_activity_date":1684391496,"question_id":76278023,"body":"<p>I have a service A which has a major dependency on service B. Now I have imported that service in my POM but the thing is I need to use an object of service A in service B. But I don't how I would be able to do that I don't wan to create dependency of service A in service B and neither want to make rest calls.\nAny suggestion?</p>\n<p>I have tried to refactor that object from service A to service B but that doesn't seem to work because that object has some dependencies on service A classes.</p>\n"},{"answers":[{"answer_id":76278294,"body":"<p>If you want to apply this like googles speech listener starts &quot;Listening...&quot;</p>\n<p>Then you can use this below example.</p>\n<p><strong>Shape: Create a Drawable shape, (name: dot_background)</strong></p>\n<pre><code>&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n   android:shape=&quot;oval&quot;&gt;\n  &lt;solid android:color=&quot;#808080&quot; /&gt;\n&lt;/shape&gt;\n</code></pre>\n<p><strong>xml part , (name: activity_main)</strong></p>\n<pre><code>&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nandroid:id=&quot;@+id/dots_container&quot;\nandroid:layout_width=&quot;wrap_content&quot;\nandroid:layout_height=&quot;wrap_content&quot;\nandroid:orientation=&quot;horizontal&quot;&gt;\n\n&lt;ImageView\n    android:id=&quot;@+id/dot1&quot;\n    android:layout_width=&quot;12dp&quot;\n    android:layout_height=&quot;12dp&quot;\n    android:background=&quot;@drawable/dot_background&quot;\n    android:visibility=&quot;invisible&quot; /&gt;\n\n&lt;ImageView\n    android:id=&quot;@+id/dot2&quot;\n    android:layout_width=&quot;12dp&quot;\n    android:layout_height=&quot;12dp&quot;\n    android:background=&quot;@drawable/dot_background&quot;\n    android:visibility=&quot;invisible&quot; /&gt;\n\n&lt;ImageView\n    android:id=&quot;@+id/dot3&quot;\n    android:layout_width=&quot;12dp&quot;\n    android:layout_height=&quot;12dp&quot;\n    android:background=&quot;@drawable/dot_background&quot;\n    android:visibility=&quot;invisible&quot; /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p><strong>Java File:</strong></p>\n<pre><code>    import android.os.Bundle;\n    import android.os.Handler;\n    import android.support.v7.app.AppCompatActivity;\n    import android.view.animation.AlphaAnimation;\n    import android.view.animation.Animation;\n    import android.widget.ImageView;\n    import android.widget.LinearLayout;\n\n    public class MainActivity extends AppCompatActivity {\n\n        private static final long DOTS_ANIMATION_DELAY = 500; // Delay between dot visibility changes\n\n        private LinearLayout dotsContainer;\n        private Handler handler;\n        private Runnable dotsAnimationRunnable;\n        private boolean isVisible = false;\n\n        @Override\n        protected void onCreate(Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n            setContentView(R.layout.activity_main);\n\n            dotsContainer = findViewById(R.id.dots_container);\n            handler = new Handler();\n\n            dotsAnimationRunnable = new Runnable() {\n                @Override\n                public void run() {\n                    toggleDotsVisibility();\n                    handler.postDelayed(this, DOTS_ANIMATION_DELAY);\n                }\n            };\n        }\n\n        @Override\n        protected void onResume() {\n            super.onResume();\n            startDotsAnimation();\n        }\n\n        @Override\n        protected void onPause() {\n            super.onPause();\n            stopDotsAnimation();\n        }\n\n        private void startDotsAnimation() {\n            handler.postDelayed(dotsAnimationRunnable, DOTS_ANIMATION_DELAY);\n        }\n\n        private void stopDotsAnimation() {\n            handler.removeCallbacks(dotsAnimationRunnable);\n        }\n\n        private void toggleDotsVisibility() {\n            for (int i = 0; i &lt; dotsContainer.getChildCount(); i++) {\n                ImageView dot = (ImageView) dotsContainer.getChildAt(i);\n                if (isVisible) {\n                    fadeOut(dot);\n                } else {\n                    fadeIn(dot);\n                }\n            }\n            isVisible = !isVisible;\n        }\n\n        private void fadeIn(ImageView dot) {\n            Animation fadeInAnimation = new AlphaAnimation(0, 1);\n            fadeInAnimation.setDuration(300);\n            dot.startAnimation(fadeInAnimation);\n            dot.setVisibility(ImageView.VISIBLE);\n        }\n\n        private void fadeOut(ImageView dot) {\n            Animation fadeOutAnimation = new AlphaAnimation(1, 0);\n            fadeOutAnimation.setDuration(300);\n            dot.startAnimation(fadeOutAnimation);\n            dot.setVisibility(ImageView.INVISIBLE);\n        }\n    }\n</code></pre>\n"}],"last_activity_date":1684391474,"question_id":76278188,"body":"<p>I want to append a dot(<strong>.</strong>) to my <code>textview</code> after every second. When it reaches 3 dots, it should reset to a single dot and continue the loop like this:</p>\n<pre><code>mytext.\nmytext..\nmytext...\nmytext.\nmytext..\nmytext...\n\nand so on\n</code></pre>\n<p>My java code:</p>\n<pre><code>MaterialTextView txt = alertdialog.findViewById(R.id.dialogtext);\n\nnew Timer().scheduleAtFixedRate(new TimerTask(){\n    @Override\n    public void run(){\n        for(int i=0; i&lt;3; i++){\n            for(int j=0; j&lt;i; j++){\n                   //I am stuck here                         \n            }\n        }\n    }\n},0,1000);\n</code></pre>\n<p>I have no idea, how to write the logic for getting my desired objective. Please guide me.</p>\n"},{"last_activity_date":1684391246,"question_id":76278267,"body":"<p>I have socket url like <a href=\"http://www.example.com:port\" rel=\"nofollow noreferrer\">www.example.com:port</a>\nwhen I use telnet on terminal ex: (telnet wwww.example.com port) it works fine. I tried different solution to implement it on android but I failed\nand also I don't know if it is a web socket or socket IO because I know web socket start with wss not url .\ncan any one give me resource how to do this task.</p>\n"},{"comments":[{"comment_id":134511043,"body":"I wouldn&#39;t do <code>Scanner input = new Scanner(System.in);</code> instead each loop iteration, it&#39;s wasteful, do it before the start of the loop instead. I would consider <code>T userInput = (T) input.next();</code> a bad idea, <code>next</code> is returning a <code>String</code> trying to cast it to something like an <code>Integer</code> is going to fail and this is actually where you error occurred. I would suggest you need some kind of &quot;convert&quot; which new how to take a <code>String</code> and convert it to the expected value you actually want"},{"comment_id":134511126,"body":"Yes, as @MadProgrammer pointed out, the error is actually at <code>T userInput = (T) input.next();</code>, where you&#39;re taking a value of type <code>String</code>, and casting it to <code>T</code>, which happens to be <code>Integer</code> in this case.  If you&#39;re dealing with integer values, you&#39;ll need to call <code>nextInt()</code> instead of <code>next()</code>."},{"comment_id":134511232,"body":"@DawoodibnKareem @MadProgrammer Thanks for the input. To build on the problem, if I explicitly use <code>nextInt()</code>, I will definitely get a runtime error if I input a <code>Character</code> or <code>String</code>. Is there a way to allow such input types then? Or will the best workaround be to create a fresh class with a <code>Scanner</code> to handle <code>Character</code>/<code>String</code> input types. Just thinking out loud if I would want to handle an array of such types in the future."},{"comment_id":134526590,"body":"Honestly, I&#39;d be inclined to just work with a <code>List&lt;Double&gt;</code> and assume everything is <code>Double</code>.  I&#39;m assuming you&#39;re not concerned about the problems with floating point arithmetic - if you are, then you could consider <code>List&lt;BigDecimal&gt;</code>, although <code>BigDecimal</code> has problems of its own.  As far as dealing with input that can&#39;t be interpreted as a <code>double</code>, you&#39;ll have to write some code to dealing with that.  The appropriate place to do that is in a <code>catch</code> block, when you catch a <code>NumberFormatException</code>.  If you&#39;re new to Java, you might want to read up on <code>try</code> and <code>catch</code>."}],"answers":[{"answer_id":76278078,"body":"<p>The first thing I'd recommend is to reduce the scope of generic-type <code>T</code>, and simply use a <code>Number</code> object.  This will cover both <code>Double</code> and <code>Integer</code>.</p>\n<p>What you'll need to do is check the value from the <code>input</code>.<br />\nRather than using <code>input.next</code>, use <code>input.nextLine</code>.</p>\n<p>If the value contains a decimal point, add it to <code>inputs</code> as a <code>Double</code>, otherwise add it as an <code>Integer</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class UserInput {\n    private List&lt;Number&gt; inputs;\n\n    public UserInput(List&lt;Number&gt; inputs) {\n        this.inputs = inputs;\n    }\n\n    public List&lt;Number&gt; getUserInput(Integer number_inputs) {\n        String string;\n        for(int i=1; i &lt; number_inputs+1; i++) {\n            Scanner input = new Scanner(System.in);\n            System.out.println(&quot;Enter number &quot; + i);\n            string = input.nextLine();\n            if (string.contains(&quot;.&quot;)) {\n                this.inputs.add(Double.parseDouble(string));\n            } else {\n                this.inputs.add(Integer.parseInt(string));\n            }\n        }\n        return this.inputs;\n    }\n\n}\n</code></pre>\n<p>Then, in your <code>CalculateValues</code> class, you'll need to differentiate the results, and add accordingly.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CalculateValues {\n\n    public static void main(String[] args) {\n        List&lt;Number&gt; vals = new ArrayList&lt;&gt;();\n        UserInput userInput = new UserInput(vals);\n        List&lt;Number&gt; inputValues = userInput.getUserInput(2);\n        Number numberA = inputValues.get(0);\n        Number numberB = inputValues.get(1);\n        if (numberA instanceof Integer &amp;&amp; numberB instanceof Integer)\n            System.out.println(numberA.intValue() + numberB.intValue());\n        else if (numberA instanceof Integer &amp;&amp; numberB instanceof Double)\n            System.out.println(numberA.intValue() + numberB.doubleValue());\n        else if (numberA instanceof Double &amp;&amp; numberB instanceof Integer)\n            System.out.println(numberA.doubleValue() + numberB.intValue());\n        else if (numberA instanceof Double &amp;&amp; numberB instanceof Double) {\n            System.out.println(numberA.doubleValue() + numberB.doubleValue());\n        }\n    }\n\n}\n</code></pre>\n<p>Ideally, you can just store all the values as <code>Double</code>, it has more than enough space to accommodate an <code>Integer</code>.</p>\n"},{"comments":[{"comment_id":134512099,"body":"The <code>Scanner</code> should be closed, as well."},{"comment_id":134512112,"body":"How would you handle the calculation process?  That part stumped me, since an <code>instanceof</code> check is required for a <code>Number</code> object.  Is there a closure for this?"},{"comment_id":134512388,"body":"@Reilas That is already taken care of with this code. OP&#39;s code did an unsafe cast from String to T, so a Strings get added to the List but the code believes them to be Integers. That is discovered when the elements are accessed, at which point there is a class cast exception trying to cast String as Integer. Remember that at runtime there is no type safety - everything is Object. There is only compile time type safety and hard casting like OP did bypasses that safety. With my code there is no cast, so it&#39;s type safe. Scanner doesn&#39;t <i>need</i> to be closed - that happens when garbage collected"},{"comment_id":134512545,"body":"Of course it should be closed.  Why else would it implement <code>Closeable</code>?  I know what you mean, though.  It&#39;s poor practice though, since that is not always the case with other <code>Closeable</code> objects."},{"comment_id":134525744,"body":"Above solution works for <code>Integer</code> and <code>Double</code> inputs. How about <code>String</code> inputs? If I try to initialize an instance of <code>String</code> type, I am getting an error here:  <code>UserInput&lt;String&gt; userStringInput = new UserInput&lt;String&gt;(Scanner::nextLine);</code> <code>&lt;String&gt; inputStrings = userInput.getUserInput(2); &#47;&#47; Error occurs here</code>  And the error message is <code>Type mismatch: cannot convert from List&lt;Double&gt; to List&lt;String&gt;</code>"},{"comment_id":134526556,"body":"@Reilas - NO, this code should NOT close the Scanner.  Firstly, you should never try to close System.in.  Secondly, if you&#39;re writing a method that works with a Scanner, it&#39;s almost certainly not that method&#39;s responsibility to close the Scanner - if closing the Scanner is appropriate, then that belongs in some other piece of code.  And thirdly, as Bohemian pointed out, the garbage collector will look after closing any Scanner that it comes across, so there&#39;s no point in adding extra cruft."},{"comment_id":134527194,"body":"@Ry123 I assume you meant <code>List&lt;String&gt; inputStrings = userInput.getUserInput(2);</code> and not <code>&lt;String&gt; inputStrings = userInput.getUserInput(2);</code>, but I have a hard time understanding how that could not work. Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> on an online playground (eg <a href=\"http://ideone.com\" rel=\"nofollow noreferrer\">ideone.com</a> or <a href=\"https://onecompiler.com/java\" rel=\"nofollow noreferrer\">onecompiler.com/java</a>, etc) and share the link here."},{"comment_id":134534064,"body":"@DawoodibnKareem, then why in the JavaDoc for <code>Scanner</code> does it provide examples that all use <code>close</code>?"},{"comment_id":134536638,"body":"@Reilas The doc says, and the source code confirms, that <code>close()</code> closes the input if it is Closeable. All examples in the doc have <code>String</code> input. Since String is not Closeable, calling <code>close()</code> does nothing useful, so the examples should not have that - it&#39;s nonsense. In the context of this question, the input is <code>System.in</code>, an <code>InputStream</code> which is Closeable. Calling <code>close()</code> here will close STDIN, which in some OS will nuke your terminal. The only reason to call <code>close()</code> is for input you want to close like a <code>FileInputStream</code> <i>and</i> where it&#39;s not being closed elsewhere."},{"comment_id":134536817,"body":"@Bohemian, it&#39;s the official documentation, so it&#39;s obviously not non-sense.  The competence you&#39;re having is that you&#39;re implying the <code>close</code> method only closes the stream.  It&#39;s doesn&#39;t, take a look at the <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/Scanner.java#L1176\" rel=\"nofollow noreferrer\">openJDK - Scanner.java#close</a>.  It is setting both <code>sourceClosed</code> and <code>closed</code> to <code>true</code>, and is setting <code>source</code> to <code>null</code>.  While I understand you and the other poster&#39;s inference, it&#39;s just not logical to provide an empirical solution on a technical basis."},{"comment_id":134537084,"body":"@Reilas the doc is nonsense, as I have shown. And those other fields being set is done only so further reading from the input throws an exception; nothing actually useful occurs when calling close() on a Scanner whose input in a String."},{"comment_id":134537173,"body":"@Bohemian, I guess you&#39;re right.  It isn&#39;t called a procedure for nothing, though, remember."},{"comment_id":134537594,"body":"@Reilas Examples in a Javadoc don&#39;t necessarily reflect best practice.  As I explained before, (and as Bohemian explained better), you should NEVER try to close <code>System.in</code>.  If a method does a good amount of processing on a <code>Scanner</code>, then closing the <code>Scanner</code> should be a separate operation, in a separate method, so that it can be called <i>only</i> if it&#39;s appropriate to do so."},{"comment_id":134537640,"body":"@DawoodibnKareem, yet, the documentation, written by the implementers of the language, show by example, doing so.  In addition to the fact that they developed the code in a manor that allows you to access a method used for closing the object.  I&#39;m sure they had a meeting and said, &quot;alright, let&#39;s add a method here that is completely useless.  We&#39;ll throw some random code in there.&quot;"},{"comment_id":134537719,"body":"@Reilas It&#39;s not useless, just useless <i>here</i>. The useful usecase for calling <code>close()</code> would be when the Scanner is created over a resource that should be closed asap ( eg FileInputStream) and handed to code that uses the Scanner and it was decided that this code is responsible for closing the input stream after it&#39;s finished reading bytes. Such code has no access to the Closeable resource, so the only way to close it is to call Scanner&#39;s close(). Scanner effectively wraps the InputStream and delgates closing to the input stream it wraps."}],"answer_id":76278214,"body":"<p>The problem is here:</p>\n<pre><code>T userInput = (T)input.next();\n</code></pre>\n<p><code>input.next()</code> returns a <code>String</code>. Always.</p>\n<p>To fix this, specify the Scanner method the instance should use:</p>\n<pre><code>public class UserInput&lt;T&gt; {\n    private Function&lt;Scanner, T&gt; reader;\n    \n    public UserInput(Function&lt;Scanner, T&gt; reader) {\n        this.reader = reader;\n    }\n    \n    public List&lt;T&gt; getUserInput(Integer number_inputs) {\n        List&lt;T&gt; inputs = new ArrayList&lt;&gt;();\n        Scanner input = new Scanner(System.in);\n        for (int i=1; i &lt; number_inputs+1; i++) {\n            System.out.println(&quot;Enter number &quot; + i);\n            T userInput = reader.apply(input);\n            inputs.add(userInput);\n        }\n        return inputs;\n    }\n}\n</code></pre>\n<p>And use it, for example for Double input:</p>\n<pre><code>UserInput&lt;Double&gt; ui = new UserInput&lt;&gt;(Scanner::nextDouble);\n    List&lt;Double&gt; doubles = ui.getUserInput(2);\n</code></pre>\n<p>If there's a Scanner method for the type, just specify it using a method reference as done here.</p>\n<p>If there isn't a method, create your own using a lambda:</p>\n<pre><code>UserInput&lt;MyType&gt; ui = new UserInput&lt;&gt;(scanner -&gt; /* some code that returns a MyType using scanner */);\n</code></pre>\n<p>Note the following other improvements:</p>\n<ul>\n<li>deletion of the unnecessary <code>inputs</code> field, especially the unnecessary re-initialisation via constructor</li>\n<li>Moving initialisation of the Scanner to <em>before</em> the loop, so you're not creating a new Scanner every iteration</li>\n</ul>\n"}],"last_activity_date":1684391188,"question_id":76277603,"body":"<p>I am new to Java and need some clarification on handling <code>List</code> / <code>ArrayList</code> based on values that are added to the list from user inputs.</p>\n<p>User inputs are obtained from a <code>UserInput</code> class with a <code>getUserInput()</code> method. This method takes in an integer <code>number_inputs</code> and returns a list of user inputs with length of <code>number_inputs</code>. The input type could vary (A user could input Integer or Double) hence it is generically typed <code>T</code>.</p>\n<p><code>UserInput</code> class looks like this:</p>\n<pre><code>public class UserInput&lt;T&gt; {\n    private List&lt;T&gt; inputs = new ArrayList&lt;&gt;();\n    \n    public UserInput(List&lt;T&gt; inputs) {\n        this.inputs = inputs;\n    }\n    \n    public List&lt;T&gt; getUserInput(Integer number_inputs) {\n            for(int i=1; i &lt; number_inputs+1; i++) {\n                Scanner input = new Scanner(System.in);\n                System.out.println(&quot;Enter number &quot; + i);\n                T userInput = (T) input.next();\n                this.inputs.add(userInput);\n            }\n            return this.inputs;\n    }\n    \n}\n</code></pre>\n<p><code>getUserInputs()</code> is then called in the main class <code>CalculateValues</code>. Given the list of user inputs returned, I want to perform mathematical operations on the values (Eg. sum, division, etc). However the code below is not working with the error:\n<code>Exception in thread &quot;main&quot; java.lang.ClassCastException: class java.lang.String cannot be cast to class java.lang.Integer (java.lang.String and java.lang.Integer are in module java.base of loader 'bootstrap')</code></p>\n<pre><code>public class CalculateValues {\n\n    public static void main(String[] args) {\n        List&lt;Integer&gt; vals = new ArrayList&lt;&gt;();\n        UserInput&lt;Integer&gt; userInput = new UserInput&lt;&gt;(vals);\n        List&lt;Integer&gt; inputValues = userInput.getUserInput(2);\n        System.out.println(inputValues.get(0) + inputValues.get(1)); // Error occurs here\n    }\n\n}\n</code></pre>\n<p>Is there a way to do this without making use of array streams? I am mainly confused why the error is showing since my list values in <code>inputValues</code> are already typed as Integers, so why is the compiler detecting my list values as Strings?</p>\n"},{"answers":[{"answer_id":76278238,"body":"<p>Signature validation of access token fails if the &quot;kid&quot; (key identifier) in the access token header does not have a corresponding kid in the JWKS.</p>\n<p>In your case each instance of the Auth Server is generating a new <code>kid</code> due to <code>UUID.randomUUID().toString()</code> used here. So access_token generated in one instance will fail signature validation in second instance and vice versa.</p>\n<p>Fix for this would be to generate and inject a static UUID.</p>\n<pre><code>private static RSAKey generateRsa() {\n    RSAPublicKey publicKey = RsaKeyProperties.getPublicKey();\n    RSAPrivateKey privateKey = RsaKeyProperties.getPrivateKey();\n\n    return new RSAKey.Builder(publicKey)\n            .privateKey(privateKey)\n            .keyID(&quot;9a9b9b7c-33d8-40f0-bd64-d85c7a5aa33a&quot;)\n            .build();\n}\n</code></pre>\n<p>NOTE: I've only added a static id as an example here. You should ideally store this value securely and retrieve it during the startup of the Auth Server Service.</p>\n"}],"last_activity_date":1684390969,"question_id":73418185,"body":"<p>I have an Authorization Server deployed in the cloud (PCF) with multiple instances. While retrieving user info (resource server), I am getting the error below. As per my observation, each instance generates a different JWK source. When the request goes to the instance where the token was generated it works fine. But when a request goes to another instance, the following error occurs:</p>\n<p><strong>o.s.s.o.s.r.a.JwtAuthenticationProvider : Failed to authenticate since the JWT was invalid</strong></p>\n<p>I have customized RSA keys to read from a properties file.</p>\n<pre><code>@Bean\n    @Order(Ordered.HIGHEST_PRECEDENCE)\n    public SecurityFilterChain authorizationServerSecurityFilterChain(HttpSecurity http) throws Exception {\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\n        http.oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);\n        return http.build();\n    }\n\n\n @Bean\n    public JWKSource&lt;SecurityContext&gt; jwkSource() {\n        RSAKey rsaKey = generateRsa();\n        JWKSet jwkSet = new JWKSet(rsaKey);\n        return (jwkSelector, securityContext) -&gt; jwkSelector.select(jwkSet);\n    }\n\n\n    private static RSAKey generateRsa() {\n        RSAPublicKey publicKey = RsaKeyProperties.getPublicKey();\n        RSAPrivateKey privateKey = RsaKeyProperties.getPrivateKey();\n\n        return new RSAKey.Builder(publicKey)\n                .privateKey(privateKey)\n                .keyID(UUID.randomUUID().toString())\n                .build();\n    }\n\n       &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-oauth2-authorization-server&lt;/artifactId&gt;\n            &lt;version&gt;0.3.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n</code></pre>\n<p>Note: Session store type is Redis</p>\n"},{"comments":[{"comment_id":5021903,"body":"Sounds like homework. What have you tried?"},{"comment_id":5021959,"body":"What&#39;s the standard answer for all things related to Date in Java?  Try JODA...."},{"comment_id":5021980,"body":"Try Joda, or Calendar if you have to."},{"comment_id":134506537,"body":"Use java.time. (1) Get today from <code>LocalDate.now(ZoneId.systemDefault())</code>. (2) Get tomorrow form <code>today.plusDays(1)</code>. (3) Get the 2nd Wednesday of this month from <code>today.with(TemporalAdjusters.dayOfWeekInMonth(2, DayOfWeek.WEDNESDAY)</code>. (4) Get the last Wednesday from <code>today.with(TemporalAdjusters.lastInMonth(DayOfWeek.WEDNESDAY&zwnj;&#8203;)</code>. (5) Compare the dates using their <code>equals()</code> methods to determine whether today or tomorrow is equal to either the 2nd or the last Wednesday. (to be continued)"},{"comment_id":134506539,"body":"(continued) (6) Realize that in case tomorrow happened to fall in the next month, it can neither be the 2nd nor the last Wednesday of that month, so we are done."}],"answers":[{"comments":[{"comment_id":5022436,"body":"So it seems I&#39;ve to do some calculation."},{"comment_id":5022438,"body":"The fourth isn&#39;t necessarily the last. A month can contain five Wednesdays."},{"comment_id":5022749,"body":"Ah, I put in the street-cleaning rules in <i>my</i> neighborhood: as I wrote, the first and the fourth.  If you just want the last, take the number of days in the current month, subtract 7, compare to current date..."}],"answer_id":4575728,"body":"<p>You having a problem with street-cleaning?</p>\n\n<p>Calendar will tell you if it's a Wednesday (<code>day.get(DAY_OF_WEEK) == WEDNESDAY</code>) and the day of the month.  If it's a Wednesday between the 8th and 15th, it's the second of the month; between 22nd and the 29th, it's the fourth.</p>\n"},{"comments":[{"comment_id":134506381,"body":"This was a good (although not so elaborate) answer 12 years ago. Joda-Time has later been replaced by <a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>."}],"answer_id":4577086,"body":"<p>Use Joda Time Library, which has DateTime class and all the utility methods needed like plusDays(int),plusWeeks(int)</p>\n"},{"comments":[{"comment_id":134507221,"body":"I think this needs some more details to it"}],"answer_id":76274263,"body":"<p>Use math ceiling function.\nAfter having found that it is a wednesday you use ceiling(DayOfTheMonth/7).\nThe result tells you the how maniest occurence of the wednesday in this month this is.</p>\n"},{"answer_id":76278027,"body":"<p>Expanding on the smart <a href=\"https://stackoverflow.com/questions/4575387/how-to-detect-if-today-or-tomorrow-is-the-2nd-or-last-wed-of-the-month-in-java/76274263#comment134506537_4575387\">Comment by Ole V.V.</a>…</p>\n<h1>tl;dr</h1>\n<pre><code>LocalDate today = LocalDate.now ( ZoneId.of ( &quot;America/Edmonton&quot; ) );\nLocalDate tomorrow = today.plusDays ( 1 );\n\nLocalDate secondWed = today.with ( TemporalAdjusters.dayOfWeekInMonth ( 2 , DayOfWeek.WEDNESDAY ) );\nLocalDate lastWed = today.with ( TemporalAdjusters.lastInMonth ( DayOfWeek.WEDNESDAY ) );\n\nboolean eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth =\n        Set.of ( today , tomorrow )\n                .stream ( )\n                .anyMatch (\n                        Set.of ( secondWed , lastWed ) :: contains\n                );\n</code></pre>\n<h1><em>java.time</em></h1>\n<p>In modern Java, we have the industry-leading <em>java.time</em> classes to do date-time handling.</p>\n<p>To represent a date-only value, without time-of-day, without time zone, use <code>LocalDate</code>.</p>\n<p>Capture the current date. This involves a time zone; for any given moment the date varies around the globe by time zone.</p>\n<pre><code>ZoneId z = ZoneId.of( &quot;Africa/Tunis&quot; ) ;  // Or ZoneId.systemDefault()\nLocalDate today = LocalDate.now( z ) ;\n</code></pre>\n<p>Determine tomorrow's date.</p>\n<pre><code>LocalDate tomorrow = today.plusDays( 1 ) ;\n</code></pre>\n<p>Determine the second Wednesday of today's month. A <code>TemporalAdjuster</code> moves from one day to another. The utility class <code>TemporalAdjusters</code> contains several handy temporal adjusters. The <code>DayOfWeek</code> class defines enums objects for each day of the week.</p>\n<pre><code>LocalDate secondWed = \n    today.with( \n        TemporalAdjusters.dayOfWeekInMonth( 2 , DayOfWeek.WEDNESDAY )\n    ) ;\n</code></pre>\n<p>And the last Wednesday of the month.</p>\n<pre><code>LocalDate lastWed = \n    today.with(\n        TemporalAdjusters.lastInMonth( DayOfWeek.WEDNESDAY )\n    ) ;\n</code></pre>\n<p>The date for <code>tomorrow</code> could land in the following month. I assume you want to consider only the current month, the month containing <code>today</code>.</p>\n<p>See if today matches either:</p>\n<pre><code>boolean todayIsEitherSecondOrLastWed = \n    today.isEqual( secondWed ) || \n    today.isEqual( lastWed ) ;\n</code></pre>\n<p>Ditto for tomorrow.</p>\n<pre><code>boolean tomorrowIsEitherSecondOrLastWed = \n    tomorrow.isEqual( secondWed ) || \n    tomorrow.isEqual( lastWed ) ;\n</code></pre>\n<p>Final comparison.</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth = \n    todayIsEitherSecondOrLastWed || tomorrowIsEitherSecondOrLastWed ;\n</code></pre>\n<p>We could use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Set.html\" rel=\"nofollow noreferrer\"><code>Set</code></a> collections of our dates.</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth =\n    Set.of( secondWed , lastWed ).contains( today ) ||\n    Set.of( secondWed , lastWed ).contains( tomorrow ) ;\n</code></pre>\n<p>Or we could get fancy, using streams and lambdas to compare two sets. Fun, but not necessarily better.</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth =\n        Set.of ( today , tomorrow )\n                .stream ( )\n                .anyMatch (\n                        ( LocalDate localDate ) -&gt; Set.of ( secondWed , lastWed ).contains ( localDate )\n                );\n</code></pre>\n<p>More briefly, using a method reference:</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth =\n        Set.of ( today , tomorrow )\n                .stream ( )\n                .anyMatch (\n                        Set.of ( secondWed , lastWed ) :: contains\n                );\n</code></pre>\n<h2>Full code example</h2>\n<pre class=\"lang-java prettyprint-override\"><code>LocalDate today = LocalDate.now ( ZoneId.of ( &quot;Africa/Tunis&quot; ) );\nLocalDate tomorrow = today.plusDays ( 1 );\n\nLocalDate secondWed = today.with ( TemporalAdjusters.dayOfWeekInMonth ( 2 , DayOfWeek.WEDNESDAY ) );\nLocalDate lastWed = today.with ( TemporalAdjusters.lastInMonth ( DayOfWeek.WEDNESDAY ) );\n\nboolean eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth =\n        Set.of ( today , tomorrow )\n                .stream ( )\n                .anyMatch (\n                        Set.of ( secondWed , lastWed ) :: contains\n                );\n\nSystem.out.println ( &quot;today = &quot; + today + &quot; | tomorrow = &quot; + tomorrow );\nSystem.out.println ( &quot;secondWed = &quot; + secondWed + &quot; | lastWed = &quot; + lastWed );\nSystem.out.println ( &quot;eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth = &quot; + eitherTodayOrTomorrowIsSecondOrLastWednesdayOfCurrentMonth );\n</code></pre>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>today = 2023-05-18 | tomorrow = 2023-05-19\nsecondWed = 2023-05-10 | lastWed = 2023-05-31\neitherTodayOrTomorrowIsSecondOrLastWednesday = false\n</code></pre>\n"}],"last_activity_date":1684390876,"question_id":4575387,"body":"<p>How to detect if today or tomorrow is the 2nd or last Wed of the month in Java ? Any sample code ?</p>\n"},{"comments":[{"comment_id":118836330,"body":"Can you share the stack of any nested &quot;Caused by&quot; exception? Usually a NoClassDefFoundError is caused by an underlying ClassNotFoundException, which will often have a stack that tells what class loader was used."},{"comment_id":118871223,"body":"The shared stack is the only one which is nested. After analyzing native_stderr.log file we found that only few of the classes from package com.google.common.util.concurrent are getting loaded and remaining classes are not, hence there is also no entry for them in the native_syserr.log file. Class loader used to load classes was CompoundClassLoader. For better understanding sharing complete stack trace in new edit."},{"comment_id":122796108,"body":"@KumarKundanani: were you able to find a solution for this?"}],"answers":[{"answer_id":76278175,"body":"<p>you may miss the InternalFutureFailureAccess.class and this is in another jar which named failureaccess-1.0.1.jar 。 check the jar or the InternalFutureFailureAccess.class is in your classpath.</p>\n"}],"last_activity_date":1684390237,"question_id":67225549,"body":"<p>On enabling class trace, found that WebSphere is loading other classes present in the same package (com.google.common.util.concurrent) from same guava-30.0-jre.jar</p>\n<p>Total classes present in com.google.common.util.concurrent package: 310\nand Total classes loaded: 285 (as per class load trace)</p>\n<p>Solutions tried:</p>\n<ol>\n<li>Class load order is set to Parent Last</li>\n<li>Have also explicitly set jar path in Generic JVM Arguments under Application servers &gt; server1 &gt; Process definition &gt; Java Virtual Machine</li>\n<li>Also tried creating a shared library and referencing it with the web app deployed. Steps followed to create shared library are from <a href=\"https://www.ibm.com/support/pages/how-create-shared-library-and-associate-it-application-server-or-enterprise-application-websphere-application-server\" rel=\"nofollow noreferrer\">this URL</a></li>\n<li>JAR File is also okay and decompiling without any issue</li>\n<li>Machine Restart</li>\n</ol>\n<p>Below is a stack trace for reference:</p>\n<pre><code>Caused by: java.lang.NoClassDefFoundError: com/google/common/util/concurrent/SettableFuture\nat com.google.common.cache.LocalCache$LoadingValueReference.&lt;init&gt;(LocalCache.java:3472) ~[?:?]\nat com.google.common.cache.LocalCache$LoadingValueReference.&lt;init&gt;(LocalCache.java:3476) ~[?:?]\nat com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2134) ~[?:?]\nat com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2045) ~[?:?]\nat com.google.common.cache.LocalCache.get(LocalCache.java:3951) ~[?:?]\nat com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:3974) ~[?:?]\nat com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4935) ~[?:?]\nat com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:4941) ~[?:?]\nat com.google.inject.internal.Annotations$AnnotationChecker.hasAnnotations(Annotations.java:248) ~[guice-4.0.jar:?]\nat com.google.inject.internal.Annotations.isBindingAnnotation(Annotations.java:314) ~[guice-4.0.jar:?]\nat com.google.inject.internal.Annotations.findBindingAnnotation(Annotations.java:295) ~[guice-4.0.jar:?]\nat com.google.inject.internal.ProviderMethodsModule.getKey(ProviderMethodsModule.java:280) ~[guice-4.0.jar:?]\nat com.google.inject.internal.ProviderMethodsModule.createProviderMethod(ProviderMethodsModule.java:264) ~[guice-4.0.jar:?]\nat com.google.inject.internal.ProviderMethodsModule.getProviderMethods(ProviderMethodsModule.java:144) ~[guice-4.0.jar:?]\nat com.google.inject.internal.ProviderMethodsModule.configure(ProviderMethodsModule.java:123) ~[guice-4.0.jar:?]\nat com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:340) ~[guice-4.0.jar:?]\nat com.google.inject.spi.Elements$RecordingBinder.install(Elements.java:349) ~[guice-4.0.jar:?]\nat com.google.inject.spi.Elements.getElements(Elements.java:110) ~[guice-4.0.jar:?]\nat com.google.inject.internal.InjectorShell$Builder.build(InjectorShell.java:138) ~[guice-4.0.jar:?]\nat com.google.inject.internal.InternalInjectorCreator.build(InternalInjectorCreator.java:104) ~[guice-4.0.jar:?]\nat com.google.inject.Guice.createInjector(Guice.java:96) ~[guice-4.0.jar:?]\nat com.google.inject.Guice.createInjector(Guice.java:73) ~[guice-4.0.jar:?]\n</code></pre>\n<p>Please note everything works fine when the same web app is deployed in WebLogic, Tomcat and JBoss</p>\n"},{"comments":[{"comment_id":103941171,"body":"<code>the job will create the necessary metadata tables automatically</code>: that&#39;s not correct, Spring Batch does not create tables automatically, it is up to you to do it manually or tell Spring boot to do it for you (as in your case). You need to make sure your liquibase script runs before the job so that Spring Batch can find the tables and report its meta-data."},{"comment_id":103954395,"body":"That might just be improper wording on my end sorry about that, since I have <code>initialize-schema: always</code> set the schema is created before a job is ran. Edited the question to make that more explicit. Also, liquibase does run first, the main question is can liquibase somehow create those metadata tables without them being explicitly in the changelog."},{"comment_id":103978787,"body":"ok thanks for the clarification. <code>the main question is can liquibase somehow create those metadata tables without them being explicitly in the changelog.</code>: this is a liquibase question rather than a spring batch question. I&#39;m not too familiar with liquibase, so I will let someone with better knowledge about it answer your quetion."}],"answers":[{"comments":[{"comment_id":103995887,"body":"Ah, awesome, thanks for pointing this out. I didn&#39;t realize you could specify an sqlFile."},{"comment_id":128612043,"body":"For other databases, sql files can be found in  <a href=\"https://github.com/spring-projects/spring-batch/tree/main/spring-batch-core/src/main/resources/org/springframework/batch/core\" rel=\"nofollow noreferrer\">github repo</a>"}],"answer_id":58854924,"body":"<p>Yes, you can reference the schema files that already exist in Spring Batch project. In <code>org.springframework.batch.core</code> package you can find schema-*.sql files where * is the name of the targeted db. Since you are running on mysql, your change set would look something like this:</p>\n\n<pre><code>- changeSet:\n  id: 1234\n  author: adam.sandler\n  changes:\n      - sqlFile:\n            encoding: utf8\n            path: classpath:/org/springframework/batch/core/schema-mysql.sql\n            relativeToChangelogFile: false\n            splitStatements: true\n            stripComments: true\n</code></pre>\n"},{"comments":[{"comment_id":115117631,"body":"While this should work, our goal was to manage all database schema via liquibase to prevent any conflicts."}],"answer_id":65088728,"body":"<p>To auto-migrate to your database without the use of liquabase add</p>\n<pre><code>spring.batch.initialize-schema=always\n</code></pre>\n<p>to your application.properties file, it will auto migrate to the embedded data-source</p>\n"},{"answer_id":76072386,"body":"<p>For XML change sets I had to add a delimiter as well:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;databaseChangeLog\n    xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    logicalFilePath=&quot;/common/run-once/feature-base.xml&quot;\n    xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog \n                             http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.0.xsd&quot;&gt;\n    &lt;changeSet author=&quot;tim.doege&quot; id=&quot;feature/spring-batch&quot;&gt;\n        &lt;sqlFile dbms=&quot;mysql&quot; encoding=&quot;UTF-8&quot;\n            path=&quot;classpath:/org/springframework/batch/core/schema-mysql.sql&quot;\n            relativeToChangelogFile=&quot;false&quot; splitStatements=&quot;true&quot;\n            endDelimiter=&quot;;&quot; stripComments=&quot;true&quot; /&gt;\n    &lt;/changeSet&gt;\n&lt;/databaseChangeLog&gt;\n</code></pre>\n"},{"comments":[{"comment_id":134512751,"body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76278173/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"answer_id":76278173,"body":"<p>For sql changesets, I had to download and unzip the jar to find schema-postgresql.sql and copy and paste the SQL statements into Liquibase.</p>\n"}],"last_activity_date":1684390226,"question_id":58827480,"body":"<p>Currently I have a setup like below. On running the batch job locally the job will create the necessary metadata tables automatically using the <code>data-source</code> property values since <code>initialize-schema</code> is set to always. Liquibase will also run and create any tables listed in its changelog.</p>\n\n<p>Here is my <code>application.yml</code> file</p>\n\n<pre><code>spring:\n  batch:\n    initialize-schema: always\n    job:\n      enabled: true\n  liquibase:\n    url: db_url\n    user: deploy_user\n    password: deploy_pass\n    change-log: classpath:db/changelog/db.changelog-master.yaml\n    enabled: true\ndata-source:\n  mysql:\n    user: r_user\n    password: r_pass\n    jdbc-url: db_url\n</code></pre>\n\n<p>Here is my <code>db.changelog-master.yaml</code> file.</p>\n\n<pre><code>databaseChangeLog:\n\n  - changeSet:\n    dbms: mysql\n    id: create-sample-table\n    author: me\n    sql: CREATE TABLE sample_table (\n      sample_id VARCHAR(255) NOT NULL,\n      sample_text TEXT,\n      PRIMARY KEY (samoke_id)\n      ) ENGINE=InnoDB DEFAULT\n      CHARSET=utf8 COLLATE=utf8_bin;\n</code></pre>\n\n<p>Mysql datasource config:</p>\n\n<pre><code>@Configuration\npublic class DataSourceConfiguration {\n\n    @Primary\n    @Bean(name = \"mySQLDataSource\")\n    @ConfigurationProperties(\"data-source.mysql\")\n    public DataSource mySQLDataSource() {\n        return DataSourceBuilder.create().type(HikariDataSource.class).build();\n    }\n}\n</code></pre>\n\n<p>Liquibase Configuration (probably posting more than what's needed):</p>\n\n<pre><code>@Configuration\n@EnableConfigurationProperties(LiquibaseProperties.class)\npublic class LiquibaseConfiguration {\n    private static final Logger LOG = LoggerFactory.getLogger(LiquibaseConfiguration.class);\n\n    @Autowired\n    private LiquibaseProperties liquibaseProperties;\n\n\n    public DataSource liquibaseDataSource() {\n        DataSourceBuilder factory = DataSourceBuilder\n                .create()\n                .url(liquibaseProperties.getUrl())\n                .username(liquibaseProperties.getUser())\n                .password(liquibaseProperties.getPassword());\n\n        return factory.build();\n    }\n\n    public void testLiquibaseConnection() throws SQLException {\n\n        LOG.info(\"Testing connection to Liquibase (in case PCF restarts and we have stale dynamic secrets)...\");\n        liquibaseDataSource().getConnection();\n        LOG.info(\"Testing connection to Liquibase (in case PCF restarts and we have stale dynamic secrets)... Succeeded\");\n    }\n\n    @Bean\n    public SpringLiquibase liquibase() {\n        try {\n            testLiquibaseConnection();\n        } catch (Exception ex) {\n            LOG.warn(\"WARNING: Could not connect to the database using \" + liquibaseProperties.getUser() + \", so we will be skipping the Liquibase Migration for now. \", ex);\n            return null;\n        }\n        SpringLiquibase liquibase = new SpringLiquibase();\n        liquibase.setChangeLog(this.liquibaseProperties.getChangeLog());\n        liquibase.setContexts(this.liquibaseProperties.getContexts());\n        liquibase.setDataSource(liquibaseDataSource());\n        liquibase.setDefaultSchema(this.liquibaseProperties.getDefaultSchema());\n        liquibase.setDropFirst(this.liquibaseProperties.isDropFirst());\n        liquibase.setShouldRun(this.liquibaseProperties.isEnabled());\n        liquibase.setLabels(this.liquibaseProperties.getLabels());\n        liquibase.setChangeLogParameters(this.liquibaseProperties.getParameters());\n        return liquibase;\n    }\n\n}\n</code></pre>\n\n<p>The issue is we have different credentials for creating/deploying tables and reading/writing to tables in our deployed environments. So the below setup will work to create tables via Liquibase, but fail creating the metadata tables due to having the incorrect credentials upon deployment. Our current work-around to get the metadata tables created is to deploy with the <code>data-source</code> properties having deploy credentials, run the job to initialize the tables and then redeploy with read/write credentials. (We can't just leave the deploy credentials for reads because they have very short TTL). </p>\n\n<p>Is it possible to create the metadata tables for Spring Batch via Liquibase automatically? Specifically, without adding the creation SQL manually to the changelog files?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Using veljkost's answer below having a changelog file that looks like this works:</p>\n\n<pre><code>databaseChangeLog:\n  - changeSet:\n      dbms: mysql\n      id: create-spring-batch-metadata\n      author: dev.me\n      changes:\n        - sqlFile:\n            encoding: UTF-8\n            path: classpath:/org/springframework/batch/core/schema-mysql.sql\n            relativeToChangelogFile: false\n            splitStatements: true\n            stripComments: true\n</code></pre>\n"},{"comments":[{"comment_id":134423399,"body":"Have you tried to remove the versions from the Firebase dependencies since you are already sing BOM?"}],"answers":[{"answer_id":76278165,"body":"<p>Answer:</p>\n<p>The plugin was for Unity and worked with unit activity.\nIt turned out I had to add Firebase to the Unity project.\nOr I guess any other activity that would use the plugin.</p>\n"}],"last_activity_date":1684390196,"question_id":76226242,"body":"<p>I'm working with FirebaseStorage on a plugin model.\nI was able to make it work on a standalone android app, but when I try to add it to a plugin, I get the java.lang.NoClassDefFoundError</p>\n<p>Here is my build.gradle for the plugin.</p>\n<pre><code>buildscript {\n    dependencies {\n\n        // Add the dependency for the Google services Gradle plugin\n        classpath 'com.google.gms:google-services:4.3.15'\n    }\n    repositories {\n        google() // Make sure Google's Maven repository is added\n        mavenCentral()  // Maven Central repository\n    }\n}\n\nplugins {\n    id 'com.android.library'\n}\n\napply plugin: 'com.google.gms.google-services'\n\n\n\nandroid {\n    namespace 'com.shefyg.uapaa1module'\n    compileSdk 32\n\n    defaultConfig {\n        minSdk 21\n        targetSdk 32\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n        consumerProguardFiles &quot;consumer-rules.pro&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n    implementation platform('com.google.firebase:firebase-bom:32.0.0')\n    //implementation 'com.google.firebase:firebase-core:21.1.1' // Firebase Core\n    implementation 'com.google.firebase:firebase-database:20.2.1' // Firebase Realtime Database\n    implementation 'com.google.android.material:material:1.9.0'\n    implementation 'com.google.firebase:firebase-storage:20.2.0'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n}\n\n</code></pre>\n<p>Please advise, thanks.</p>\n"},{"comments":[{"comment_id":134507321,"body":"what does the TestDb.test_table look like exactly? Do you have other constraints on the fields you are modifying? Something as simple as modifying a value used as the target of a foreign key in another table can cause table locks outside of where you are looking. Most DBs have mechanisms to show what is holding onto which locks."},{"comment_id":134507588,"body":"@Chris It&#39;s fairly simple - no foreign keys, the primary key is the aforementioned uuid which is <code>VARCHAR(36) NOT NULL</code>, other columns are also <code>VARCHAR</code>, <code>INTEGER</code>, and <code>TIMESTAMP</code>. No manually created indices. I&#39;ll see if I can get information on the locks when the deadlock is detected."},{"comment_id":134517570,"body":"@Chris Unlike I previously thought, there is indeed an index in that table... Precisely on the column being updated (<code>state</code>). I&#39;ve used <code>show engine innodb status</code> and it has details on which locks were held and which locks were waited on during the deadlock. It seems like both transactions somehow held an insert intention X lock on the index? I don&#39;t understand. I&#39;ve pasted the output <a href=\"https://pastebin.com/raw/p4L9wmLu\" rel=\"nofollow noreferrer\">here</a>, but I can create a new question (maybe on another StackExchange site) if you think it&#39;s best."},{"comment_id":134520479,"body":"Locks involving indexes and constraints strains what I know, so a separate, more specific question now that you know the root cause is probably best. The answer here is that everything IS working by design because your actual update is requiring a more general lock on a specific index that all your transactions and updates on this table seem to need to lock. How to get around that - you&#39;d need to show the index for a good solution and hopefully a MySQL expert might help, but simplest hack is just to remove the index - I don&#39;t know how many states you&#39;ve, but seems overly general anyway."}],"answers":[{"comments":[{"comment_id":134507110,"body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76274464/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"answer_id":76274464,"body":"<p>To avoid long waiting transactions you can break data fetch and saving part in to 2 methods and limit the transaction duration to save single object. It can reduce deadlock chances.</p>\n<pre><code>class Service {\n\n        @Autowired\n        private Repository dao;\n\n        // Not Transactional\n        public List&lt;?&gt; UpdateAndReturn() {\n         \n          //marked @Transactional(value = TxType.SUPPORTS) or no tansaction.\n          List&lt;?&gt; objs  = dao.readAll();\n          \n          for(Obj obj:objs) {\n              //marked @Transactional(value = TxType.REQUIRED)\n              Obj o = dao.getById(obj.getId());\n              //  modifications\n              //marked @Transactional(value = TxType.REQUIRED)\n              dao.save(o);\n          }\n          return objs;\n         }\n    }\n</code></pre>\n"}],"last_activity_date":1684389960,"question_id":76274035,"body":"<p>We have a method that looks like this:</p>\n<pre><code>@Transactional\npublic UpdateTestObjsResponse updateTestObjs() {\n    objs = repository.findAllReadyTestObjsForOwnerX(); // SELECT ... FOR UPDATE SKIP LOCKED native query\n    LOGGER.info(&quot;==DEBUG== RowCount=&quot; + objs.size());\n    for (TestObj obj: objs) {\n        LOGGER.info(&quot;==DEBUG== RowUuid=&quot; + obj.getUuid());\n        // ...\n        obj.setState('WAITING');\n        repository.save(obj);\n    }\n    return getResponseObj(objs);\n}\n</code></pre>\n<p>Invoking this method concurrently results in a deadlock being detected for reasons that escape me, and it seems the transaction is committed before the <code>UPDATE</code> which is somewhat unexpected to me:</p>\n<pre><code>{&quot;method&quot;:&quot;begin&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;line&quot;:81,&quot;description&quot;:&quot;begin&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.406314Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;org.hibernate.engine.transaction.internal.TransactionImpl&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;begin&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;line&quot;:81,&quot;description&quot;:&quot;begin&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.406352Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;6169ce79-8cc2-49d3-871a-8156ff96b2c8&quot;,&quot;class&quot;:&quot;org.hibernate.engine.transaction.internal.TransactionImpl&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n&quot;Hibernate: SELECT * FROM TestDb.test_table WHERE owner_uuid = '9f95191b-af31-40c9-b5d8-a3c48e6a69b0' AND state = 'READY' ORDER BY timestamp ASC LIMIT 10 FOR UPDATE SKIP LOCKED&quot;\n&quot;Hibernate: SELECT * FROM TestDb.test_table WHERE owner_uuid = '9f95191b-af31-40c9-b5d8-a3c48e6a69b0' AND state = 'READY' ORDER BY timestamp ASC LIMIT 10 FOR UPDATE SKIP LOCKED&quot;\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:545,&quot;description&quot;:&quot;==DEBUG== RowCount=1&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.438215Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;6169ce79-8cc2-49d3-871a-8156ff96b2c8&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:545,&quot;description&quot;:&quot;==DEBUG== RowCount=4&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.438205Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:547,&quot;description&quot;:&quot;==DEBUG== RowUuid=3469af18-f55d-408a-9231-e5fbb68c76f8&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.438439Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;6169ce79-8cc2-49d3-871a-8156ff96b2c8&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:547,&quot;description&quot;:&quot;==DEBUG== RowUuid=6338750b-aa50-487d-8e0d-739cd16d9adb&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.438459Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:547,&quot;description&quot;:&quot;==DEBUG== RowUuid=d0dda3df-9532-402b-8aab-2ca3d362d032&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.446588Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;commit&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;line&quot;:98,&quot;description&quot;:&quot;committing&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.446875Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;6169ce79-8cc2-49d3-871a-8156ff96b2c8&quot;,&quot;class&quot;:&quot;org.hibernate.engine.transaction.internal.TransactionImpl&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:547,&quot;description&quot;:&quot;==DEBUG== RowUuid=fadcbae6-1ce9-46bc-bfe6-1d3c1f88c89b&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.446991Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:547,&quot;description&quot;:&quot;==DEBUG== RowUuid=e139e56e-7945-4818-adf1-4de51c4832c8&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.447205Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;commit&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;line&quot;:98,&quot;description&quot;:&quot;committing&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.447403Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;org.hibernate.engine.transaction.internal.TransactionImpl&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n&quot;Hibernate: update test_table set owner_uuid=?, state=?, timestamp=?, where obj_uuid=?&quot;\n&quot;Hibernate: update test_table set owner_uuid=?, state=?, timestamp=?, where obj_uuid=?&quot;\n{&quot;method&quot;:&quot;logExceptions&quot;,&quot;level&quot;:&quot;WARN&quot;,&quot;line&quot;:137,&quot;description&quot;:&quot;SQL Error: 1213, SQLState: 40001&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.472873Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;org.hibernate.engine.jdbc.spi.SqlExceptionHelper&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;logExceptions&quot;,&quot;level&quot;:&quot;ERROR&quot;,&quot;line&quot;:142,&quot;description&quot;:&quot;Deadlock found when trying to get lock; try restarting transaction&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.473116Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;org.hibernate.engine.jdbc.spi.SqlExceptionHelper&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;rollback&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;line&quot;:131,&quot;description&quot;:&quot;rollback() called on an inactive transaction&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:40:44.478103Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;edfc0a80-eeb5-4a4c-856f-8f1432430560&quot;,&quot;class&quot;:&quot;org.hibernate.engine.transaction.internal.TransactionImpl&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n&quot;&quot;\n</code></pre>\n<p>Here, <code>updateTestObjs</code> is annotated with <code>@Transacational</code> from <code>org.springframework.transaction.annotation.Transactional</code> and declared as a public method in the service, being called from the controller, to which two requests are made in parallel, resulting in the logs above. I verified the database engine is InnoDB, which supports transactions and the <code>FOR UPDATE SKIP LOCKED</code> directives. Furthermore, I'm not overwriting the default isolation level, so I'd expect Spring to use InnoDB's default of <code>READ_COMMITTED</code>. This is to say I've checked some common pitfalls reported in other questions.</p>\n<p>I've tried manually managing the transaction as such to see what happens:</p>\n<pre><code>    @Autowired\n    private EntityManagerFactory emf;\n\n    @Autowired\n    private PlatformTransactionManager transactionManager;\n\n\npublic UpdateTestObjsResponse updateTestObjs() {\n    var transactionTemplate = new TransactionTemplate(transactionManager);\n    EntityManager em = emf.createEntityManager();\n    EntityTransaction tx = em.getTransaction();\n    tx.begin();\n    try {\n        Query sel = em.createNativeQuery(&quot;SELECT * FROM TestDb.test_table WHERE owner_uuid = '9f95191b-af31-40c9-b5d8-a3c48e6a69b0' AND state = 'READY' ORDER BY timestamp ASC LIMIT 10 FOR UPDATE SKIP LOCKED&quot;, TestObj.class);\n        transactionTemplate.execute(\n            status -&gt; {\n                List&lt;TestObj&gt; objs = sel.getResultList();\n                LOGGER.info(&quot;==DEBUG== RowCount=&quot; + objs.size());\n                for (TestObj obj : objs) {\n                    LOGGER.info(&quot;==DEBUG== RowUuid=&quot; + obj.getUuid());\n                    Query upd = em.createNativeQuery(&quot;UPDATE TestDb.test_table SET state = 'WAITING' WHERE obj_uuid = ?&quot;);\n                    upd.setParameter(1, obj.getUuid());\n                    upd.executeUpdate();\n                }\n                return objs.size();\n            });\n        tx.commit();\n    } catch (Exception e) {\n        tx.rollback();\n        LOGGER.error(e);\n    } finally {\n        em.close();\n    }\n    return getResponseObj(objs);\n}\n</code></pre>\n<p>This avoids the transaction being commited before the <code>UPDATE</code>, but also results in a deadlock. For completeness, here are the logs:</p>\n<pre><code>{&quot;method&quot;:&quot;begin&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;line&quot;:81,&quot;description&quot;:&quot;begin&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.055847Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;5e0d8e88-2316-422b-a690-a625b4352a1e&quot;,&quot;class&quot;:&quot;org.hibernate.engine.transaction.internal.TransactionImpl&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;begin&quot;,&quot;level&quot;:&quot;DEBUG&quot;,&quot;line&quot;:81,&quot;description&quot;:&quot;begin&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.055917Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;ab18ea56-942b-4e5f-9134-037bdf2d25c0&quot;,&quot;class&quot;:&quot;org.hibernate.engine.transaction.internal.TransactionImpl&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n&quot;Hibernate: SELECT * FROM TestDb.test_table WHERE owner_uuid = '9f95191b-af31-40c9-b5d8-a3c48e6a69b0' AND state = 'READY' ORDER BY timestamp ASC LIMIT 10 FOR UPDATE SKIP LOCKED&quot;\n&quot;Hibernate: SELECT * FROM TestDb.test_table WHERE owner_uuid = '9f95191b-af31-40c9-b5d8-a3c48e6a69b0' AND state = 'READY' ORDER BY timestamp ASC LIMIT 10 FOR UPDATE SKIP LOCKED&quot;\n{&quot;method&quot;:&quot;lambda$updateTestObjs$2&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:553,&quot;description&quot;:&quot;==DEBUG== RowCount=1&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.073758Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;ab18ea56-942b-4e5f-9134-037bdf2d25c0&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;lambda$updateTestObjs$2&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:553,&quot;description&quot;:&quot;==DEBUG== RowCount=4&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.073758Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;5e0d8e88-2316-422b-a690-a625b4352a1e&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;lambda$updateTestObjs$2&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:555,&quot;description&quot;:&quot;==DEBUG== RowUuid=e139e56e-7945-4818-adf1-4de51c4832c8&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.073985Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;ab18ea56-942b-4e5f-9134-037bdf2d25c0&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;lambda$updateTestObjs$2&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:555,&quot;description&quot;:&quot;==DEBUG== RowUuid=6338750b-aa50-487d-8e0d-739cd16d9adb&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.073990Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;5e0d8e88-2316-422b-a690-a625b4352a1e&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n&quot;Hibernate: UPDATE TestDb.test_table SET state = 'WAITING' WHERE obj_uuid = ?&quot;\n&quot;Hibernate: UPDATE TestDb.test_table SET state = 'WAITING' WHERE obj_uuid = ?&quot;\n{&quot;method&quot;:&quot;lambda$updateTestObjs$2&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:555,&quot;description&quot;:&quot;==DEBUG== RowUuid=d0dda3df-9532-402b-8aab-2ca3d362d032&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.083935Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;5e0d8e88-2316-422b-a690-a625b4352a1e&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n&quot;Hibernate: UPDATE TestDb.test_table SET state = 'WAITING' WHERE obj_uuid = ?&quot;\n{&quot;method&quot;:&quot;lambda$updateTestObjs$2&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:555,&quot;description&quot;:&quot;==DEBUG== RowUuid=3469af18-f55d-408a-9231-e5fbb68c76f8&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.087683Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;5e0d8e88-2316-422b-a690-a625b4352a1e&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;logExceptions&quot;,&quot;level&quot;:&quot;WARN&quot;,&quot;line&quot;:137,&quot;description&quot;:&quot;SQL Error: 1213, SQLState: 40001&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T12:44:07.087787Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;ab18ea56-942b-4e5f-9134-037bdf2d25c0&quot;,&quot;class&quot;:&quot;org.hibernate.engine.jdbc.spi.SqlExceptionHelper&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n</code></pre>\n<p>Finally, if I do not use <code>FOR UPDATE SKIP LOCKED</code> in the original code, no deadlock occurs but overlapping objects are selected by both method calls, which is undesirable:</p>\n<pre><code>&quot;Hibernate: SELECT * FROM TestDb.test_table WHERE owner_uuid = '9f95191b-af31-40c9-b5d8-a3c48e6a69b0' AND state = 'READY' ORDER BY timestamp ASC LIMIT 10 FOR UPDATE SKIP LOCKED&quot;\n&quot;Hibernate: SELECT * FROM TestDb.test_table WHERE owner_uuid = '9f95191b-af31-40c9-b5d8-a3c48e6a69b0' AND state = 'READY' ORDER BY timestamp ASC LIMIT 10 FOR UPDATE SKIP LOCKED&quot;\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:544,&quot;description&quot;:&quot;==DEBUG== RowCount=5&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:39:13.235097Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;4651077f-076f-49e0-a4cb-06d3cc575993&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n{&quot;method&quot;:&quot;updateTestObjs&quot;,&quot;level&quot;:&quot;INFO&quot;,&quot;line&quot;:544,&quot;description&quot;:&quot;==DEBUG== RowCount=5&quot;,&quot;type&quot;:&quot;log&quot;,&quot;@timestamp&quot;:&quot;2023-05-17T13:39:13.235097Z&quot;,&quot;application&quot;:&quot;TestApp&quot;,&quot;correlation_id&quot;:&quot;6d0f3cf1-d75f-4502-b577-b8efc0871f72&quot;,&quot;class&quot;:&quot;redacted.service.TestService&quot;,&quot;application_version&quot;:&quot;localhost&quot;}\n</code></pre>\n<p>Regardless of this implementation being suitable or not when parallel requests are to be expected, why is a deadlock detected with <code>FOR UPDATE SKIP LOCKED</code>?</p>\n"},{"comments":[{"comment_id":120824154,"body":"The new certificate does not magically show up in your keystore. You have to explicitly do it and deploy your program again so that it makes use of the new certificate."},{"comment_id":120824833,"body":"With a traditional setup it is not possible, but maybe you can give this a try: <a href=\"https://github.com/Hakky54/java-tutorials/tree/main/instant-server-ssl-reloading\" rel=\"nofollow noreferrer\">github.com/Hakky54/java-tutorials/tree/main/&hellip;</a> I demonstrate here how you can change the server certificates without redeploying/restarting it. But for this you probably need to refactor your code"},{"comment_id":120831344,"body":"steffen ullrich , as keystore holds private key and not changed . suppose if i got the matched public key on local trusted certifacte store . it should be work ?"}],"answers":[{"answer_id":76278080,"body":"<p>Here is the set of commands I used to create the new certificate for the same private key.</p>\n<ol>\n<li><p>Extract the private key from the legacy JKS</p>\n<pre><code>keytool -importkeystore -srckeystore legacykeystore.jks -srcalias mykey -destalias mykey -destkeystore keystore.p12 -deststoretype PKCS12 -destkeypass 123456\n\nopenssl pkcs12 -in keystore.p12 -nodes -nocerts -out privatekey.pem\n</code></pre>\n</li>\n</ol>\n<p>The password 123456 is just a temporary stub used only at step 4.</p>\n<ol start=\"2\">\n<li><p>Generate the new CSR</p>\n<pre><code>openssl req -out certreq.csr -key privatekey.pem -new\n</code></pre>\n</li>\n<li><p>Generate the new certificate</p>\n<pre><code>openssl x509 -req -days 18000 -in certreq.csr -signkey privatekey.pem -sha256 -out newcert.pem\n</code></pre>\n</li>\n<li><p>Convert key and cert to pkcs12</p>\n<pre><code>openssl pkcs12 -export -out newkeystore.p12 -inkey privatekey.pem -in newcert.pem\n</code></pre>\n</li>\n</ol>\n<p>Here you input a temporary password to a PKCS12 keystore (123456).</p>\n<ol start=\"5\">\n<li><p>Convert pkcs12 to jks</p>\n<pre><code>keytool -importkeystore -destkeystore newkeystore.jks -srckeystore newkeystore.p12 -srcstoretype PKCS12 -srcalias 1 -destalias mykey -destkeypass keypassword\n</code></pre>\n</li>\n</ol>\n<p>The keystore password is entered from the keyboard input, and the key alias and password are specified as the command line parameters</p>\n<p>I was able to sign the new version of the app with the new keystore. Also, I was able to verify that the keys in the legacy and new keystores are the same.</p>\n<p>However, when I tried to update the app signed with the legacy keystore, to the app signed with the new keystore, I first got the message:</p>\n<pre><code>Play Protect doesn't recognize this app's developer.\n</code></pre>\n<p>After I confirmed the update, I got another message:</p>\n<pre><code>App not installed as package conflicts with an existing package.\n</code></pre>\n<p>Which makes me thinking that <strong>it is not possible to renew the certificate</strong> at all, even if the private keys are the same. So you have to live with your first keystore forever (obviously, it's a bad practice of Android, not to provide any option to renew the developer certificates).</p>\n"}],"last_activity_date":1684389184,"question_id":68364615,"body":"<p>I got a program which read keystore(.jks) located inside the .jar\nMy current certificate is expired soon , and I already export the private key from keystore and renewal a new certificate .\nI would like to know is that possible keep the keystore(.jks)  unchange and using same private key and same keystore without deploy my program again .\n(For client side , I will import the new valid certificate to window certificate trusted store)</p>\n<p>The program is using java and keystore create SSLcontext</p>\n<p>Thanks</p>\n"},{"answers":[{"answer_id":76278074,"body":"<p>User simple java with HTTP to call:</p>\n<p>public class getSoupResponse {</p>\n<pre><code>public static void main(String[] args) throws IOException {\n\n    String urlString = &quot;https:128.0.0.1/test/wsdl&quot;;\n    URL url = new URL(urlString);\n\n    HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n\n    if(urlString.startsWith(&quot;https&quot;)){\n        HttpsURLConnection https = (HttpsURLConnection) connection;\n        trustAllHosts(https);\n        https.setHostnameVerifier(DO_NOT_VERIFY);\n    }\n\n\n    connection.setRequestMethod(&quot;POST&quot;);\n    connection.setRequestProperty(&quot;Content-Type&quot;, &quot;text/xml;charset=UTF-8&quot;);\n    connection.setDoInput(true);\n    connection.setDoOutput(true);\n\n    String soupXML = getXML();\n    OutputStream os = connection.getOutputStream();\n    os.write(soupXML.getBytes(StandardCharsets.UTF_8));\n\n    int responseCode = connection.getResponseCode();\n    if(200==responseCode){\n        InputStream inputStream = connection.getInputStream();\n        InputStreamReader inputStreamReader = new InputStreamReader(inputStream);\n        BufferedReader bufferedReader = new BufferedReader(inputStreamReader);\n\n        StringBuilder stringBuilder = new StringBuilder();\n        String temp;\n        while (null != (temp = bufferedReader.readLine())){\n            stringBuilder.append(temp);\n        }\n\n        JSONObject object = XML.toJSONObject(stringBuilder.toString());\n        System.out.println(object);\n        inputStream.close();\n        inputStreamReader.close();\n        bufferedReader.close();\n    }\n    os.close();\n}\n\nprivate static String getXML(){\n\n    //your soupXML request in soupUI\n    return &quot;&lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:ghe=&quot;http://gheo1.test.com&quot;&gt;\n                &lt;soapenv:Header&gt;\n                &lt;/soapenv:Header&gt;\n                &lt;soapenv:Body&gt;\n                &lt;/soapenv:Body&gt;\n            &lt;/soapenv:Envelope&gt;&quot;;\n}\n\nprivate static final TrustManager[] trustAllCerts = new TrustManager[]{\n\n        new X509TrustManager() {\n            @Override\n            public void checkClientTrusted(X509Certificate[] x509Certificates, String s) {\n\n            }\n\n            @Override\n            public void checkServerTrusted(X509Certificate[] x509Certificates, String s) {\n\n            }\n\n            @Override\n            public X509Certificate[] getAcceptedIssuers() {\n                return new X509Certificate[]{};\n            }\n        }\n};\n\nprivate static final HostnameVerifier DO_NOT_VERIFY = (s, sslSession) -&gt; true;\n\nprivate static SSLSocketFactory trustAllHosts(HttpsURLConnection connection){\n\n    SSLSocketFactory oldFactory = connection.getSSLSocketFactory();\n    try {\n        SSLContext sc = SSLContext.getInstance(&quot;TLS&quot;);\n        sc.init(null, trustAllCerts, new java.security.SecureRandom());\n        SSLSocketFactory newFactory = sc.getSocketFactory();\n        connection.setSSLSocketFactory(newFactory);\n    }catch (Exception e){\n        e.printStackTrace();\n    }\n    return oldFactory;\n}\n</code></pre>\n<p>}</p>\n"}],"last_activity_date":1684389100,"question_id":76232787,"body":"<p>EndPoint = &quot;https:128.0.0.1/test/wsdl&quot;;</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:ghe=\"http://gheo1.test.com\"&gt;\n   &lt;soapenv:Header&gt;\n      &lt;wsse:Security xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\"&gt;\n         &lt;wsse:UsernameToken&gt;\n            &lt;wsse:Username&gt;test_user&lt;/wsse:Username&gt;\n            &lt;wsse:Password Type=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText\"&gt;test123&lt;/wsse:Password&gt;\n         &lt;/wsse:UsernameToken&gt;\n      &lt;/wsse:Security&gt;\n       &lt;soapheader:loginInformation xmlns:soapheader=\"com.test.common\"&gt;\n         &lt;soapheader:loginUserID&gt;USERID&lt;/soapheader:loginUserID&gt;\n         &lt;soapheader:loginUserType&gt;CUSTOMER&lt;/soapheader:loginUserType&gt; \n         &lt;soapheader:loginUserUniqueKey&gt;123456&lt;/soapheader:loginUserUniqueKey&gt;\n         &lt;soapheader:loginUserRole&gt;CUSTOMER&lt;/soapheader:loginUserRole&gt;\n      &lt;/soapheader:loginInformation&gt;      \n   &lt;/soapenv:Header&gt;\n   &lt;soapenv:Body&gt;\n      &lt;ghe:Request&gt;\n         &lt;!--Optional:--&gt;\n         &lt;arg0&gt;\n            &lt;!--Optional:--&gt;\n            &lt;accountNumber&gt;123&lt;/accountNumber&gt;\n            &lt;!--Optional:--&gt;\n            &lt;groupNumber&gt;456&lt;/groupNumber&gt;\n            &lt;!--Optional:--&gt;\n            &lt;authGroupNumber&gt;789&lt;/authGroupNumber&gt;\n            &lt;!--Optional:--&gt;\n            &lt;authAccountNumber&gt;123&lt;/authAccountNumber&gt;\n            &lt;!--Optional:--&gt;\n            &lt;authCertificateNumber&gt;555&lt;/authCertificateNumber&gt;\n         &lt;/arg0&gt;\n      &lt;/ghe:Request&gt;\n   &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>I have a WSDL file as above, and I don't know how to call this with header info.</p>\n<p>anyone can help me to give a java axis sample use above xml, thanks.</p>\n<p>Use other webservice framework is ok.</p>\n"},{"answers":[{"answer_id":72388045,"body":"<p>As mentioned in <a href=\"https://github.com/spring-projects/spring-data-elasticsearch/issues/1378\" rel=\"nofollow noreferrer\">this</a> GitHub issue, you can not directly filter source using annotation and you need to use <code>NativeSearchQueryBuilder</code> for same.</p>\n<p>You can check <a href=\"https://stackoverflow.com/a/39461862/5489276\">this</a> SO answer written by Val for NativeSearch query builder.</p>\n"},{"comments":[{"comment_id":130843748,"body":"That custom repository implementation is a life saver. Thanks."},{"comment_id":133708218,"body":"@SandeepKhantwal Can you help with some working example of custom repo"},{"comment_id":134517112,"body":"@Shruti - answer posted in this thread with code example"}],"answer_id":72389174,"body":"<p>There is currently a <a href=\"https://github.com/spring-projects/spring-data-elasticsearch/pull/2151\" rel=\"nofollow noreferrer\">pull request</a> being worked on that will allow to add source includes and source excludes to repository methods that are annotated with the <code>@Query</code> annotation, so this will be available in the next version.</p>\n<p>Besides that, it is possible to set the source filter values to any provided implementation of the <code>Query</code> interface (<code>StringQuery</code>, <code>CriteriaQuery</code>, <code>NativeSearchQuery</code>). You'd need to create a repository fragment (see <a href=\"https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#repositories.custom-implementations\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#repositories.custom-implementations</a>) to add a function that builds and uses one of these queries if you wish to integrate it in a repository.</p>\n<p>The entity you use to read the data would need to have a property that matches the returned values like</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Document(indexName=&quot;populationstreamassignment&quot;)\npublic class Returned {\n  @Id\n  private String id;\n  @Field(type= FieldType.text)\n  private String memberId\n  // getter and setter\n}\n</code></pre>\n"},{"answer_id":76278053,"body":"<p>@Shruti - pls note the CustomRepoImpl will be automatically searched by spring given the package is in the search path of spring boot. The name of the Impl should be (interface-name)Impl</p>\n<pre><code>@Repository\npublic interface NormalRepo extends ElasticsearchRepository&lt;User, String&gt;, CustomRepo {\n\n  Optional&lt;Instant&gt; findByName(String name);\n}\n\npublic interface CustomRepo {\n  Optional&lt;Instant&gt; findByName(String name);\n}\n\npublic class CustomRepoImpl implements CustomRepo {\n  Optional&lt;Instant&gt; findByName(String name) {\n    // your implementation\n  }\n}\n</code></pre>\n"}],"last_activity_date":1684388778,"question_id":72380663,"body":"<p>I am writing a query; in Kibana it's easy</p>\n<pre><code>GET populationstreamassignment/_search\n{\n    &quot;query&quot;: {\n    &quot;match&quot;: {\n      &quot;healthyChildrenIndicator&quot;: true\n    }\n  }, \n  &quot;_source&quot;: &quot;memberId&quot;\n}\n</code></pre>\n<p>What I want to do is get a list of all the memberId's for 'healthy children'. But I want to translate this to java syntax.</p>\n<pre><code>import java.util.List;\nimport java.util.UUID;\nimport org.springframework.data.elasticsearch.annotations.Query;\nimport org.springframework.data.elasticsearch.repository.ElasticsearchRepository;\n\n/**\n Spring Data Elasticsearch repository for the {@link PopulationStreamAssignment} entity.\n */\npublic interface PopulationStreamAssignmentSearchRepository extends ElasticsearchRepository&lt;PopulationStreamAssignment, Long&gt; {\n\n    @Query(&quot;{\\&quot;match\\&quot;: {\\&quot;?0\\&quot;: \\&quot;?1\\&quot;}}&quot;)\n    List&lt;UUID&gt; getMemberIdsByPopulationStream(String popStream, Boolean criteria);\n\n}\n</code></pre>\n<p>This query has a few problems. Here is where I have questions..</p>\n<ol>\n<li>How can I specify &quot;_source&quot; so that I only return the memberId field?</li>\n<li>memberId is a UUID, can I have it directly return memberId's as a List of Values?</li>\n</ol>\n"},{"comments":[{"comment_id":134465293,"body":"Nothing wrong i found till now from your code . Make sure your conditions are satisfying as no code is there out of the condition so by putting breakpoints or logs make sure conditions are satisfying"},{"comment_id":134465424,"body":"I didn&#39;t find anything wrong in the code you&#39;ve presented, so it may be a problem outside of that scope. There&#39;s a lot that you could optimize in terms of readability though. Since most if statements include one another you could nest them e.g. check if <code>numberT &gt; 4</code> and then check all others inside that. Furthermore a lot of that dialog code is doubled and could be moved to its own method that just takes in the onClick action."},{"comment_id":134473698,"body":"I also think there is no error in code and the first condiotion is met as my numberT and numberD both are 5. However, Alert Dialog does not appear when I click the btn2."}],"answers":[{"answer_id":76278048,"body":"<p>It is as logcat says. The main thread is being blocked due to code performing too many calculations on the UI thread.\nTry doing all calculations on a separate thread and then joining to main (UI) thread on completion of your calculations.\nThe Android Activity is a linear UI thread - it will throw errors if it is getting even slightly blocked in its order of visible components update.</p>\n<p>You will require some multithreading knowledge in at least Java to properly handle this.</p>\n"}],"last_activity_date":1684388712,"question_id":76250531,"body":"<p>I am inexperianced in Android Studio or Java and try to learn. I want to change values of 5 TextViews when Button click, based on some IF Conditions but nothing happens. I check the Logcat which informs</p>\n<p>&quot;Skipped 39 frames!  The application may be doing too much work on its main thread.&quot;\nMy code is as below:</p>\n<pre><code>`btn2.setOnClickListener(new View.OnClickListener() {@Overridepublic void onClick(View v) {\n            getCalculations();\n        }\n    });\n\n}\n\nprivate void getCalculations() {\n            String valueT = txtT.getText().toString();\n            String valueD = txtD.getText().toString();\n            String valueS = txtS.getText().toString();\n            String valueC = txtC.getText().toString();\n            String valueA = txtA.getText().toString();\n            int numberT = Integer.parseInt(valueT);\n            int numberD = Integer.parseInt(valueD);\n            int numberS = Integer.parseInt(valueS);\n            int numberC = Integer.parseInt(valueC);\n            int numberA = Integer.parseInt(valueA);\n            if (numberT &gt; 4 &amp;&amp; numberD &lt; 0){\n                AlertDialog.Builder adb = new AlertDialog.Builder(WalletActivity.this);\n                adb.setTitle(&quot;Notice&quot;);\n                adb.setMessage(getApplicationContext().getResources().getString(R.string.massege2));\n                adb.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which) {\n                        int scoreD = numberD -1;\n                        int scoreT = numberT -5;\n                        int scoreA = numberA -500;\n                        txtT.setText(String.valueOf(scoreT));\n                        txtD.setText(String.valueOf(scoreD));\n                        txtA.setText(String.valueOf(scoreA));\n                    }\n                });\n                adb.setNegativeButton(&quot;Cancel&quot;, new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which) {\n\n                    }\n                });\n                adb.show();\n            } else if (numberT &gt; 4 &amp;&amp; numberD == 0 &amp;&amp; numberC &lt; 10) {\n                AlertDialog.Builder adb = new AlertDialog.Builder(WalletActivity.this);\n                adb.setTitle(&quot;Notice&quot;);\n                adb.setMessage(getApplicationContext().getResources().getString(R.string.massege2));\n                adb.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which) {\n                        int scoreT = numberT -5;\n                        int scoreA = numberA -500;\n                        int scoreC = numberC +1;\n                        int scoreS = numberS -1;\n                        txtT.setText(String.valueOf(scoreT));\n                        txtA.setText(String.valueOf(scoreA));\n                        txtC.setText(String.valueOf(scoreC));\n                        txtS.setText(String.valueOf(scoreS));\n                    }\n                });\n                adb.setNegativeButton(&quot;Cancel&quot;, new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which) {\n\n                    }\n                });\n                adb.show();\n            }\n            if (numberT &gt; 4 &amp;&amp; numberD == 0 &amp;&amp; numberC == 10) {\n                AlertDialog.Builder adb = new AlertDialog.Builder(WalletActivity.this);\n                adb.setTitle(&quot;Notice&quot;);\n                adb.setMessage(getApplicationContext().getResources().getString(R.string.massege3));\n                adb.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which) {\n\n                    }\n                });\n                adb.setNegativeButton(&quot;Cancel&quot;, new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which) {\n\n                    }\n                });\n                adb.show();\n            }\n            if (numberT &lt; 5) {\n                AlertDialog.Builder adb = new AlertDialog.Builder(WalletActivity.this);\n                adb.setTitle(&quot;Notice&quot;);\n                adb.setMessage(getApplicationContext().getResources().getString(R.string.massege4));\n                adb.setPositiveButton(&quot;OK&quot;, new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which) {\n\n                    }\n                });\n                adb.setNegativeButton(&quot;Cancel&quot;, new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialog, int which) {\n\n                    }\n                });\n                adb.show();\n            }\n\n        }\n</code></pre>\n<p>`</p>\n"},{"comments":[{"comment_id":61757960,"body":"It seems what you post is not the real part of your question. The exception is obvious from your service and it could be triggered by your click but obviously you do not post the request part. You should check the real request to your web server not behavior after the request done. If you are not sure, you can publish  you project on github and post the repository here to let us know, it could be helpful."}],"answers":[{"answer_id":37316201,"body":"<p>From the exception, your problem likely occurs because the <code>@RequestMapping</code> doesn't find the parameter being sent from previous the page.</p>\n<p>In this case, it is likely like this:</p>\n<pre><code>@RequestMapping(value = &quot;/check&quot;)\npublic String getID(@RequestParam(value = &quot;params&quot;) String params){\n//your logic code here\n}\n</code></pre>\n<p>From here, the exception occurs when the <code>@RequestMapping</code> doesn't find <code>&quot;params&quot;</code>:</p>\n<pre><code>@RequestParam(value = &quot;params&quot;) String params\n</code></pre>\n<p>This happens because, by default, <code>@RequestParam</code> tries to get the value. It then returns an exception when the value is not found.</p>\n<p>So you have two ways to resolve this,</p>\n<ol>\n<li><p>You can supply the URL <code>/check</code> with a <code>params</code> variable or,</p>\n</li>\n<li><p>You can change the <code>@RequestParam</code> requirement to false like this:</p>\n<p>@RequestParam(value = &quot;params&quot;, required = false) String params</p>\n</li>\n</ol>\n<p>Take note that this is an example to reflect your scenario and problem. Gud luk.</p>\n"},{"answer_id":58841493,"body":"<p>I had the same error message. My mistake was that I wrote on Javascript side:</p>\n\n<pre><code>MyService.getStatus(vm.id);\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>MyService.getStatus({id : vm.id});\n</code></pre>\n\n<p>so the parameter was not named as expected on Java side:</p>\n\n<pre><code>@GetMapping(\"/myservice/getStatus\")\n@Timed\npublic ResponseEntity&lt;String&gt; getStatus(@RequestParam(\"id\") Long id) {\n</code></pre>\n"},{"answer_id":71965248,"body":"<p>It was fixed by adding <code>required = false</code> like this:</p>\n<p>Before adding:</p>\n<pre><code>public String saveOrUpdate(\n    @RequestParam(&quot;studentId&quot;) String studentId,\n    @RequestParam(&quot;name&quot;) String name) {\n</code></pre>\n<p>After adding:</p>\n<pre><code>public String saveOrUpdate(\n        @RequestParam(value = &quot;studentId&quot;, required = false) String studentId,\n        @RequestParam(&quot;name&quot;) String name) {\n</code></pre>\n"},{"comments":[{"comment_id":134512907,"body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76278026/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"answer_id":76278026,"body":"<p>Try replacing <code>@RequestParam(value = &quot;params&quot;) String params</code> with <code>@PathVariable String id</code></p>\n"}],"last_activity_date":1684388347,"question_id":37107570,"body":"<p>When i clicked the edit button the values from dataTable should display in form. But somehow it doesn't work. Below are my codes for reference.</p>\n\n<p>Call DataTable:</p>\n\n<pre><code>$(\"#tranTable\").on(\"click\", \"#edit\", function(){\n    var row = $(this).closest(\"tr\");\n\n    $(\"#Own-Account\").removeClass(\"hidden\");\n    $(\"fieldset#addToListMethod\").addClass(\"hidden\");\n    $(\"fieldset#Own-Account #templateTrxId\").val( row.find(\"[name$=templateTrxId]\").val() )\n    $(\"fieldset#Own-Account #templateId\")   .val( row.find(\"[name$=templateId]\").val() )\n    $(\"fieldset#newFT #fromAccNo\")          .val( row.find(\"[name$=fromAccNo]\").val() ), \n    $(\"fieldset#newFT #methodOfTransfer\")   .val( row.find(\"[name$=methodOfTransfer]\").val() ), \n    $(\"fieldset#Own-Account #toAccNo\")      .val( row.find(\"[name$=toAccNo]\").val() ), \n    $(\"fieldset#Own-Account #paymentRef\")   .val( row.find(\"[name$=paymentRef]\").val() ),\n    $(\"fieldset#Own-Account #amount\")       .val( row.find(\"[name$=amount]\").val() ),\n\n    //hidden\n    $(\"fieldset#Own-Account #otherPaymentDetail\").val( row.find(\"[name$=otherPaymentDetail]\").val() ),\n    $(\"fieldset#Own-Account #email1\").val( row.find(\"[name$=email1]\").val() ),          \n    $(\"fieldset#Own-Account #email2\").val( row.find(\"[name$=email2]\").val() ),\n    $(\"fieldset#Own-Account #sms1\").val( row.find(\"[name$=sms1]\").val() ),\n    $(\"fieldset#Own-Account #sms2\").val( row.find(\"[name$=sms2]\").val() ),\n    $(\"fieldset#Own-Account #purpose\").val( row.find(\"[name$=purpose]\").val() )\n    $(\"fieldset#Own-Account #isEdit\").val(1);\n    $(\"fieldset#Own-Account #dataTableRowId\").val(row.data(\"row-id\"));\n\n\n});\n</code></pre>\n"},{"comments":[{"comment_id":134499714,"body":"Use file.exists() and file.canRead() before you start the intent."},{"comment_id":134499732,"body":"You do not have to set clip data."},{"comment_id":134499744,"body":"You do not have to set a write flag."},{"comment_id":134499754,"body":"Share with other apps. Does that go ok?"},{"comment_id":134500007,"body":"??? I have no idea what you did to solve your issue."},{"comment_id":134500400,"body":"well I use <code>file.exists()</code> and also  <code>file.canRead()</code> before start the intent"},{"comment_id":134500428,"body":"set clip data and set a write flag was wrong as you mentioned but they did not related to my problem actually I had added them because of this problem but it was not a right work"},{"comment_id":134500813,"body":"Did you solve your problem meanwhile? And what did you do with exists() and canRead()? You are supposed to comment in them as we have no idea what you do. You said you used them but are they both true? Or what?"},{"comment_id":134501945,"body":"In fact before <code>startActvity</code> I use this code <code>if(file.exist()&amp;&amp; file.canRead())</code> and I do not have any idea why it works:)"}],"answers":[{"answer_id":76277962,"body":"<p>Post Android 10 file access has changed. Please refer to my answer <a href=\"https://stackoverflow.com/questions/66642726/java-io-filenotfoundexception-open-failed-eexist-file-exists-android-11/66645800#66645800\">here</a>.</p>\n"}],"last_activity_date":1684387605,"question_id":76270462,"body":"<p>well I can store pdf file in external storage correctly.\nbut the problem is when I want to send it via fileProvider to telegram it got this error &quot;unsupported attachment&quot; in telegram app.</p>\n<p>this is my code to share pdf:</p>\n<pre><code>File file = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).getAbsolutePath(), viewModel.getUserData().getCaseNo() + &quot;.pdf&quot;);\n        Uri uri = FileProvider.getUriForFile(requireContext(), &quot;com.nsard.provider&quot;, file);\n        Intent intent = new Intent(Intent.ACTION_SEND);\n        intent.putExtra(Intent.EXTRA_STREAM, uri);\n        intent.setClipData(ClipData.newRawUri(&quot;&quot;, uri))\n        intent.setDataAndType(uri, requireContext().getContentResolver().getType(uri));\n        intent.addFlags(Intent.FLAG_GRANT_WRITE_URI_PERMISSION);\n        intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);\n        Snackbar.make(binding.getRoot(), file.getPath() + &quot;\\n&quot; + uri.getPath(), Snackbar.LENGTH_SHORT).show();\n        startActivity(Intent.createChooser(intent, &quot;Open with&quot;));\n</code></pre>\n<p>I also try this solution <a href=\"https://stackoverflow.com/questions/60089599/unsupported-attachment\">attachment problem</a>\nbut it did not solve.</p>\n<p>the point is that in android lower it works correctly but in 10+ face error.</p>\n<p>thanks.</p>\n"},{"answers":[{"answer_id":76277948,"body":"<p>A flimsy solution would be to use <strong>mime types</strong> and only accept ones related to images. But this leaves your program vulnerable to abuse as a simply diguised non image file with let's say png extension could make your app behave unpredictably.</p>\n<p>I would suggest opening an input stream using the file uri, reading <strong>a chunk of beginning data</strong> of the file in binary and only accepting files that have headers specific to image files.</p>\n<p>Popular file formats have <em>headers</em> which is basically some unique combination of binary code placed at the beginning of a file to identify the file as that specific format. BMP, PNG, JPEG, ICO, etc image files have different headers. All we have to do is read the header length amount of data from the file and see if it is consistent with any image file headers and this way we have a more reliable way of ensuring file formats.</p>\n<p>On a relatively higher level, the data is represented and compared usually in hex format rather than binary.</p>\n<p>Hope this helps.</p>\n"}],"last_activity_date":1684387349,"question_id":76272087,"body":"<p>So I have this comparison window, where the app compares a sample image to a image that was either uploaded or taken by the phones camera. This comparison window also pops up when the user takes or uploads videos. But that's where the issue is. It is only meant to compare images and not videos. Every time I decline a video from matching a sample picture, the app crashes. So the solution would be having the comparison window only pop up when an image is being uploaded and have the videos uploaded without the comparison window.</p>\n<p>So I think the code here controls when the comparison window pops up when the user uploads a video or an image</p>\n<pre><code>override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {\n\n        if (mediaLoadManager.isMediaEditRequestCode(requestCode)) {\n            val newUri = mediaLoadManager.handleLoadMediaResult(\n                requestCode, resultCode, data,\n                requireContext().applicationContext\n            ) { tmpMediaInfo -&gt;\n                if (tmpMediaInfo.errorMsg != null) {\n                    processViewModel.updateMediaCount(null)\n                    processViewModel.updateMediaListInfoAfterEditError(tmpMediaInfo.errorMsg)\n                } else {\n                    processViewModel.updateMediaListInfoAfterEdit(tmpMediaInfo)\n                    progressDialogMediaCompress?.show()\n                }\n\n            }\n\n            processViewModel.pictureDescriptionAndCompressionLiveData.observe(viewLifecycleOwner,\n                EventObserver { pictureDescriptionAndCompression -&gt;\n                    // if condition is true, show &quot;showDoesThePictureTakenResemblesTheSample&quot;\n                    if (pictureDescriptionAndCompression != PICTURE_DESCRIPTION_NOT_AVAILABLE) {\n                        if (newUri != null &amp;&amp; pictureDescriptionAndCompression == SiteSurveyTypeProgressViewModel.COMPRESSED) {\n                            progressDialogMediaCompress?.dismiss()\n                            processViewModel.updateMediaCount(newUri)\n                            switchToUI(UiType.COMPARE_MEDIA_DIALOG_FRAGMENT, args = Bundle().apply {\n                                putParcelable(KEY_MEDIA_URI, newUri)\n                            }, parentFragmentManager)\n                        }else if (pictureDescriptionAndCompression == SiteSurveyTypeProgressViewModel.NOT_COMPRESSED){\n                            progressDialogMediaCompress?.dismiss()\n                            showMediaSizeTooLargeAlert()\n                        }\n                    }\n                })\n\n        }\n    } \n</code></pre>\n<p>Any suggestions will be appreciated, Thank you.</p>\n"},{"answers":[{"comments":[{"comment_id":57178522,"body":"Thanks for your time. This seems to work out. :) I also reported this to the Apache Mina SSHD project. <a href=\"https://issues.apache.org/jira/browse/SSHD-622\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/SSHD-622</a>"},{"comment_id":105876047,"body":"Hi @nlsn, I am trying to achieve the same sort of virtual directory structure but stuck in creating root directory. If you have you working code base, is it ok if you could share it so that i can refer to it. Below is the code which i worked out so far.  <a href=\"https://stackoverflow.com/questions/59822992/creating-a-virtual-file-system-using-virtualfilesystemfactory-and-apache-mina-ss?noredirect=1#comment105817956_59822992\" title=\"creating a virtual file system using virtualfilesystemfactory and apache mina ss\">stackoverflow.com/questions/59822992/&hellip;</a>"}],"answer_id":34658783,"body":"<p>The problem is solved in Apache Mina SSHD 1.1.0, see</p>\n<ul>\n<li><a href=\"https://issues.apache.org/jira/browse/SSHD-622\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/SSHD-622</a></li>\n<li><a href=\"https://github.com/apache/mina-sshd/commit/2bd4f5709b433495d040249dcb83e5025b6c9227\" rel=\"nofollow noreferrer\">https://github.com/apache/mina-sshd/commit/2bd4f5709b433495d040249dcb83e5025b6c9227</a></li>\n</ul>\n<hr />\n<p>Keeping the solution for earlier versions:</p>\n<p>The problem is partly on both sides, the Mina SSHD server and the FileZilla client.</p>\n<p>In the SFTP version 3 (that FileZilla uses), an entry for each file contains both a structured metadata and a display-only string (aka <code>longname</code> field) with a similar format as in the *nix <code>ls -l</code> command. That display-only string should not be parsed.</p>\n<p>But FileZilla does parse it, instead of using the structured metadata (except for a file timestamp). An internal <code>psftp</code> process that FileZilla uses to implement the SFTP protocol provides only this information to a parent FileZilla process (an <code>sftp_cmd_ls</code> function):</p>\n<pre class=\"lang-c prettyprint-override\"><code>if (ournames[i]-&gt;attrs.flags &amp; SSH_FILEXFER_ATTR_ACMODTIME) {\n    mtime = ournames[i]-&gt;attrs.mtime;\n}\nfzprintf(sftpListentry, &quot;%lu %s&quot;, mtime, ournames[i]-&gt;longname);\n</code></pre>\n<p>The Mina SSHD/SFTP (the <code>SftpSubsystem</code> class), when listing the <code>.</code> and <code>..</code> meta-directories, incorrectly uses a current folder name and a parent folder name in the display-only string, instead of the <code>.</code> and <code>..</code>. It correctly uses the <code>.</code> and <code>..</code> in the structured medata (a <code>shortname</code> field).</p>\n<hr />\n<p>FileZilla reads the wrong names from the listing and gets confused, treating the entries as actual subdirectory entries, instead of the meta-directories.</p>\n<p>In the root directory, both the <code>.</code> and <code>..</code> are probably listed as <code>/</code>. The FileZilla trims everything until the last <code>/</code>, leading to the empty entry (and the two same-named [empty-named] entries are probably merged into one).</p>\n<p>So instead of</p>\n<pre class=\"lang-none prettyprint-override\"><code>.\n..\nupload\ndownload\n</code></pre>\n<p>the FileZilla sees</p>\n<pre class=\"lang-none prettyprint-override\"><code>/ [treated as an empty string]\n/ [treated as an empty string and ignored as duplicate]\nupload\ndownload   \n</code></pre>\n<p>In the <code>upload</code> directory, the <code>.</code> is listed as <code>upload</code> and the <code>..</code> as <code>/</code> (leading to the empty entry).</p>\n<p>So instead of</p>\n<pre class=\"lang-none prettyprint-override\"><code>.\n..\n</code></pre>\n<p>the FileZilla sees</p>\n<pre class=\"lang-none prettyprint-override\"><code>upload\n/ [treated as an empty string]\n</code></pre>\n<hr />\n<p>WinSCP, on the contrary, never uses the display-only string to resolve the file/directory name. And mainly (if the server supports that, what Mina SSHD does) uses the SFTP version 4, that does not even include the display-only string.</p>\n<hr />\n<p>To fix the problem, you need pass a <code>shortName</code> parameter of <code>SftpSubsystem.writeDirEntry</code> method to the called <code>.getLongName</code> method. And modify the <code>.getLongName</code> to use <code>shortName</code> in the string it returns instead of <code>getShortName(f)</code>.</p>\n<p>See below a modified code of <code>SftpSubsystem</code> with comments describing the changes. The code is from Mina SSHD version 1.0</p>\n<pre><code>protected void writeDirEntry(int id, DirectoryHandle dir, Buffer buffer, int index, Path f, String shortName, LinkOption... options) throws IOException {\n   ...\n    if (version == SFTP_V3) {\n        // added shortName argument\n        String longName = getLongName(f, options, shortName);\n    } else {\n    ...\n}\n\n// added shortName parameter\nprotected String getLongName(Path f, LinkOption... options, String shortName) throws IOException {\n    // added shortName argument\n    return getLongName(f, true, options, shortName);\n}\n\n// added shortName parameter\nprivate String getLongName(Path f, boolean sendAttrs, LinkOption... options, String shortName) throws IOException {\n    ...\n    // added shortName argument\n    return getLongName(f, attributes, shortName);\n}\n\n// added shortName parameter\nprivate String getLongName(Path f, Map&lt;String, ?&gt; attributes, String shortName) throws IOException {\n    ...\n    return (SftpHelper.getBool(isDirectory) ? &quot;d&quot; : (SftpHelper.getBool(isLink) ? &quot;l&quot; : &quot;-&quot;))\n            + PosixFilePermissions.toString(perms) + &quot;  &quot;\n            + (attributes.containsKey(&quot;nlink&quot;) ? attributes.get(&quot;nlink&quot;) : &quot;1&quot;)\n            + &quot; &quot; + username + &quot; &quot; + group + &quot; &quot; + lengthString + &quot; &quot;\n            + UnixDateFormat.getUnixDate((FileTime) attributes.get(&quot;lastModifiedTime&quot;))\n            // using shortName instead of getShortName(f) \n            + &quot; &quot; + shortName;\n}\n\n// + you need to modify sendPath to pass getShortName(f) \n//   to its call to getLongName\n</code></pre>\n<p><em>I do not do Java, so excuse any broken code.</em></p>\n<hr />\n<p>Consider reporting the bug to the Mina SSHD project. Link the issue here, if you do.</p>\n"}],"last_activity_date":1684387308,"question_id":34651653,"body":"<p>I set up an SSH Server as an SFTP Server with Apache Mina SSHD. I implemented my own <code>FileSystemFactory</code>, so that specific directories are created for the user that logs in. When I open a connection to the server with FileZilla, the directory structure is displayed wrong.</p>\n\n<p><a href=\"https://i.stack.imgur.com/YWFrR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YWFrR.png\" alt=\"enter image description here\"></a></p>\n\n<p>In the root directory view, an empty folder is displayed. This one does not exist. There should only be two directories. \"Upload\" and \"Download\".</p>\n\n<p><a href=\"https://i.stack.imgur.com/USS9N.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/USS9N.png\" alt=\"enter image description here\"></a></p>\n\n<p>When I open the upload directory, I once again see an empty directory which should not be shown because it does not exist. Furthermore, another upload directory is shown. I can't open it, because it says /upload/upload does not exist, which is true, but I can't figure out why it is shown.</p>\n\n<p>When I connect with WinSCP, I don't get this display error. Does anyone know why it happens or how to solve it?</p>\n\n<p>EDIT:</p>\n\n<p><code>FileSystemFactory</code> implementation: </p>\n\n<pre><code>public class CustomFileSystemFactory implements FileSystemFactory {\n  private String defaultHomeDir;\n  private FileSystem fileSystem;\n\n  public CustomFileSystemFactory(String defaultHomeDir){\n    this.defaultHomeDir = defaultHomeDir;\n  }\n\n  public String getDefaultHome(){\n    return defaultHomeDir;\n  }\n\n  public FileSystem getFileSystem(){\n    return fileSystem;\n  }\n\n  @Override\n  public FileSystem createFileSystem(Session session) throws IOException {\n    Path dir = computeRootDir(session.getUsername());\n    if (dir == null) {\n      throw new InvalidPathException(session.getUsername(), \"Cannot resolve home directory\");\n    }\n\n    if(!Files.exists(dir)){\n      Files.createDirectory(dir);\n    }\n    setupFolders(session.getUsername());\n    FileSystem fileSystem = new RootedFileSystemProvider().newFileSystem(dir, Collections.emptyMap());\n    return fileSystem;\n  }\n\n  protected Path computeRootDir(String username){\n    Path path = Paths.get(defaultHomeDir + Utils.getPrincipalExtId(username) + \"/\");\n    return path;\n  }\n\n  protected void setupFolders(String username) throws IOException {\n    Path homeDir = computeRootDir(username);\n    File uploadFolder = new File(homeDir + \"/upload/\");\n    File downloadFolder = new File(homeDir + \"/download/\");\n    if(!uploadFolder.exists()){\n      uploadFolder.mkdirs();\n    }\n    if(!downloadFolder.exists()){\n      downloadFolder.mkdirs();\n    }\n  }\n}\n</code></pre>\n\n<p>This is the WinSCP Log on Debug Level 2:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>. 2016-01-07 14:46:46.909 Listing directory \"/\".\n&gt; 2016-01-07 14:46:46.909 Type: SSH_FXP_OPENDIR, Size: 10, Number: 4107\n&gt; 2016-01-07 14:46:46.909 0B,00,00,10,0B,00,00,00,01,2F,\n. 2016-01-07 14:46:46.909 Sent 14 bytes\n. 2016-01-07 14:46:46.909 There are 0 bytes remaining in the send buffer\n. 2016-01-07 14:46:46.909 Looking for network events\n. 2016-01-07 14:46:46.909 Timeout waiting for network events\n. 2016-01-07 14:46:46.909 Waiting for another 4 bytes\n. 2016-01-07 14:46:46.909 Looking for incoming data\n. 2016-01-07 14:46:46.909 Looking for network events\n. 2016-01-07 14:46:46.913 Detected network event\n. 2016-01-07 14:46:46.913 Enumerating network events for socket 1084\n. 2016-01-07 14:46:46.913 Enumerated 1 network events making 1 cumulative events for socket 1084\n. 2016-01-07 14:46:46.913 Handling network read event on socket 1084 with error 0\n. 2016-01-07 14:46:46.913 Received 45 bytes (0)\n. 2016-01-07 14:46:46.913 Read 4 bytes (41 pending)\n. 2016-01-07 14:46:46.913 Read 41 bytes (0 pending)\n&lt; 2016-01-07 14:46:46.913 Type: SSH_FXP_HANDLE, Size: 41, Number: 4107\n&lt; 2016-01-07 14:46:46.913 66,00,00,10,0B,00,00,00,20,34,34,30,63,33,34,36,32,62,30,34,65,39,37,32,61,\n&lt; 2016-01-07 14:46:46.913 34,39,34,62,62,31,30,64,36,65,62,61,35,65,61,33,\n&gt; 2016-01-07 14:46:46.913 Type: SSH_FXP_READDIR, Size: 41, Number: 4364\n&gt; 2016-01-07 14:46:46.913 0C,00,00,11,0C,00,00,00,20,34,34,30,63,33,34,36,32,62,30,34,65,39,37,32,61,\n&gt; 2016-01-07 14:46:46.913 34,39,34,62,62,31,30,64,36,65,62,61,35,65,61,33,\n. 2016-01-07 14:46:46.913 Sent 45 bytes\n. 2016-01-07 14:46:46.914 There are 0 bytes remaining in the send buffer\n. 2016-01-07 14:46:46.914 Looking for network events\n. 2016-01-07 14:46:46.914 Timeout waiting for network events\n. 2016-01-07 14:46:46.914 Waiting for another 4 bytes\n. 2016-01-07 14:46:46.914 Looking for incoming data\n. 2016-01-07 14:46:46.914 Looking for network events\n. 2016-01-07 14:46:46.924 Detected network event\n. 2016-01-07 14:46:46.924 Enumerating network events for socket 1084\n. 2016-01-07 14:46:46.924 Enumerated 1 network events making 1 cumulative events for socket 1084\n. 2016-01-07 14:46:46.924 Handling network read event on socket 1084 with error 0\n. 2016-01-07 14:46:46.925 Received 1113 bytes (0)\n. 2016-01-07 14:46:46.925 Read 4 bytes (1109 pending)\n. 2016-01-07 14:46:46.925 Read 1109 bytes (0 pending)\n&lt; 2016-01-07 14:46:46.925 Type: SSH_FXP_NAME, Size: 1109, Number: 4364\n&lt; 2016-01-07 14:46:46.925 68,00,00,11,0C,00,00,00,03,00,00,00,01,2E,00,00,00,7C,02,00,00,41,B6,00,00,\n&lt; 2016-01-07 14:46:46.925 00,00,56,79,11,96,00,00,00,00,56,79,11,96,00,00,00,00,56,79,11,96,00,00,01,\n&lt; 2016-01-07 14:46:46.925 37,00,00,00,07,00,00,00,00,00,00,00,00,00,1F,01,FF,00,00,00,1C,56,4F,52,44,\n&lt; 2016-01-07 14:46:46.925 45,46,49,4E,49,45,52,54,5C,41,64,6D,69,6E,69,73,74,72,61,74,6F,72,65,6E,00,\n&lt; 2016-01-07 14:46:46.925 00,00,00,00,00,00,0B,00,00,00,00,00,00,00,1C,56,4F,52,44,45,46,49,4E,49,45,\n&lt; 2016-01-07 14:46:46.925 52,54,5C,41,64,6D,69,6E,69,73,74,72,61,74,6F,72,65,6E,00,00,00,00,00,00,00,\n&lt; 2016-01-07 14:46:46.925 00,00,1F,01,FF,00,00,00,14,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,53,59,\n&lt; 2016-01-07 14:46:46.925 53,54,45,4D,00,00,00,00,00,00,00,0B,00,00,00,00,00,00,00,14,4E,54,2D,41,55,\n&lt; 2016-01-07 14:46:46.925 54,4F,52,49,54,C3,84,54,5C,53,59,53,54,45,4D,00,00,00,00,00,00,00,03,00,12,\n&lt; 2016-01-07 14:46:46.925 00,A9,00,00,00,15,56,4F,52,44,45,46,49,4E,49,45,52,54,5C,42,65,6E,75,74,7A,\n&lt; 2016-01-07 14:46:46.925 65,72,00,00,00,00,00,00,00,00,00,13,01,BF,00,00,00,27,4E,54,2D,41,55,54,4F,\n&lt; 2016-01-07 14:46:46.925 52,49,54,C3,84,54,5C,41,75,74,68,65,6E,74,69,66,69,7A,69,65,72,74,65,20,42,\n&lt; 2016-01-07 14:46:46.925 65,6E,75,74,7A,65,72,00,00,00,00,00,00,00,0B,00,01,00,00,00,00,00,27,4E,54,\n&lt; 2016-01-07 14:46:46.925 2D,41,55,54,4F,52,49,54,C3,84,54,5C,41,75,74,68,65,6E,74,69,66,69,7A,69,65,\n&lt; 2016-01-07 14:46:46.925 72,74,65,20,42,65,6E,75,74,7A,65,72,00,00,00,08,64,6F,77,6E,6C,6F,61,64,00,\n&lt; 2016-01-07 14:46:46.925 00,00,7C,02,00,00,41,B6,00,00,00,00,56,8E,52,55,00,00,00,00,56,8E,52,55,00,\n&lt; 2016-01-07 14:46:46.925 00,00,00,56,8E,52,55,00,00,01,54,00,00,00,08,00,00,00,00,00,00,00,03,00,1F,\n&lt; 2016-01-07 14:46:46.925 01,FF,00,00,00,0D,44,55,53,5C,6E,6D,65,63,6B,6D,61,6E,6E,00,00,00,00,00,00,\n&lt; 2016-01-07 14:46:46.925 00,00,00,1F,01,FF,00,00,00,1C,56,4F,52,44,45,46,49,4E,49,45,52,54,5C,41,64,\n&lt; 2016-01-07 14:46:46.925 6D,69,6E,69,73,74,72,61,74,6F,72,65,6E,00,00,00,00,00,00,00,0B,00,00,00,00,\n&lt; 2016-01-07 14:46:46.925 00,00,00,1C,56,4F,52,44,45,46,49,4E,49,45,52,54,5C,41,64,6D,69,6E,69,73,74,\n&lt; 2016-01-07 14:46:46.925 72,61,74,6F,72,65,6E,00,00,00,00,00,00,00,00,00,1F,01,FF,00,00,00,14,4E,54,\n&lt; 2016-01-07 14:46:46.925 2D,41,55,54,4F,52,49,54,C3,84,54,5C,53,59,53,54,45,4D,00,00,00,00,00,00,00,\n&lt; 2016-01-07 14:46:46.925 0B,00,00,00,00,00,00,00,14,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,53,59,\n&lt; 2016-01-07 14:46:46.925 53,54,45,4D,00,00,00,00,00,00,00,03,00,12,00,A9,00,00,00,15,56,4F,52,44,45,\n&lt; 2016-01-07 14:46:46.925 46,49,4E,49,45,52,54,5C,42,65,6E,75,74,7A,65,72,00,00,00,00,00,00,00,00,00,\n&lt; 2016-01-07 14:46:46.925 13,01,BF,00,00,00,27,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,41,75,74,68,\n&lt; 2016-01-07 14:46:46.925 65,6E,74,69,66,69,7A,69,65,72,74,65,20,42,65,6E,75,74,7A,65,72,00,00,00,00,\n&lt; 2016-01-07 14:46:46.925 00,00,00,0B,00,01,00,00,00,00,00,27,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,\n&lt; 2016-01-07 14:46:46.925 5C,41,75,74,68,65,6E,74,69,66,69,7A,69,65,72,74,65,20,42,65,6E,75,74,7A,65,\n&lt; 2016-01-07 14:46:46.925 72,00,00,00,06,75,70,6C,6F,61,64,00,00,00,7C,02,00,00,41,B6,00,00,00,00,56,\n&lt; 2016-01-07 14:46:46.925 8E,51,ED,00,00,00,00,56,8E,51,ED,00,00,00,00,56,8E,51,ED,00,00,01,37,00,00,\n&lt; 2016-01-07 14:46:46.925 00,07,00,00,00,00,00,00,00,00,00,1F,01,FF,00,00,00,1C,56,4F,52,44,45,46,49,\n&lt; 2016-01-07 14:46:46.925 4E,49,45,52,54,5C,41,64,6D,69,6E,69,73,74,72,61,74,6F,72,65,6E,00,00,00,00,\n&lt; 2016-01-07 14:46:46.925 00,00,00,0B,00,00,00,00,00,00,00,1C,56,4F,52,44,45,46,49,4E,49,45,52,54,5C,\n&lt; 2016-01-07 14:46:46.925 41,64,6D,69,6E,69,73,74,72,61,74,6F,72,65,6E,00,00,00,00,00,00,00,00,00,1F,\n&lt; 2016-01-07 14:46:46.925 01,FF,00,00,00,14,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,53,59,53,54,45,\n&lt; 2016-01-07 14:46:46.925 4D,00,00,00,00,00,00,00,0B,00,00,00,00,00,00,00,14,4E,54,2D,41,55,54,4F,52,\n&lt; 2016-01-07 14:46:46.925 49,54,C3,84,54,5C,53,59,53,54,45,4D,00,00,00,00,00,00,00,03,00,12,00,A9,00,\n&lt; 2016-01-07 14:46:46.925 00,00,15,56,4F,52,44,45,46,49,4E,49,45,52,54,5C,42,65,6E,75,74,7A,65,72,00,\n&lt; 2016-01-07 14:46:46.925 00,00,00,00,00,00,00,00,13,01,BF,00,00,00,27,4E,54,2D,41,55,54,4F,52,49,54,\n&lt; 2016-01-07 14:46:46.925 C3,84,54,5C,41,75,74,68,65,6E,74,69,66,69,7A,69,65,72,74,65,20,42,65,6E,75,\n&lt; 2016-01-07 14:46:46.925 74,7A,65,72,00,00,00,00,00,00,00,0B,00,01,00,00,00,00,00,27,4E,54,2D,41,55,\n&lt; 2016-01-07 14:46:46.926 54,4F,52,49,54,C3,84,54,5C,41,75,74,68,65,6E,74,69,66,69,7A,69,65,72,74,65,\n&lt; 2016-01-07 14:46:46.926 20,42,65,6E,75,74,7A,65,72,\n&gt; 2016-01-07 14:46:46.926 Type: SSH_FXP_READDIR, Size: 41, Number: 4620\n&gt; 2016-01-07 14:46:46.926 0C,00,00,12,0C,00,00,00,20,34,34,30,63,33,34,36,32,62,30,34,65,39,37,32,61,\n&gt; 2016-01-07 14:46:46.926 34,39,34,62,62,31,30,64,36,65,62,61,35,65,61,33,\n. 2016-01-07 14:46:46.926 Sent 45 bytes\n. 2016-01-07 14:46:46.926 There are 0 bytes remaining in the send buffer\n. 2016-01-07 14:46:46.926 Looking for network events\n. 2016-01-07 14:46:46.926 Timeout waiting for network events\n. 2016-01-07 14:46:46.926 Read file '.' from listing\n. 2016-01-07 14:46:46.926 Read file 'download' from listing\n. 2016-01-07 14:46:46.926 Read file 'upload' from listing\n. 2016-01-07 14:46:46.926 Waiting for another 4 bytes\n. 2016-01-07 14:46:46.926 Looking for incoming data\n. 2016-01-07 14:46:46.926 Looking for network events\n. 2016-01-07 14:46:46.926 Detected network event\n. 2016-01-07 14:46:46.926 Enumerating network events for socket 1084\n. 2016-01-07 14:46:46.926 Enumerated 1 network events making 1 cumulative events for socket 1084\n. 2016-01-07 14:46:46.926 Handling network read event on socket 1084 with error 0\n. 2016-01-07 14:46:46.926 Received 46 bytes (0)\n. 2016-01-07 14:46:46.926 Read 4 bytes (42 pending)\n. 2016-01-07 14:46:46.926 Read 42 bytes (0 pending)\n&lt; 2016-01-07 14:46:46.926 Type: SSH_FXP_STATUS, Size: 42, Number: 4620\n&lt; 2016-01-07 14:46:46.926 65,00,00,12,0C,00,00,00,01,00,00,00,19,44,69,72,65,63,74,6F,72,79,20,72,65,\n&lt; 2016-01-07 14:46:46.926 61,64,69,6E,67,20,69,73,20,64,6F,6E,65,00,00,00,00,\n&lt; 2016-01-07 14:46:46.926 Status code: 1\n&gt; 2016-01-07 14:46:46.926 Type: SSH_FXP_CLOSE, Size: 41, Number: 4868\n&gt; 2016-01-07 14:46:46.926 04,00,00,13,04,00,00,00,20,34,34,30,63,33,34,36,32,62,30,34,65,39,37,32,61,\n&gt; 2016-01-07 14:46:46.926 34,39,34,62,62,31,30,64,36,65,62,61,35,65,61,33,\n. 2016-01-07 14:46:46.926 Sent 45 bytes\n. 2016-01-07 14:46:46.926 There are 0 bytes remaining in the send buffer\n. 2016-01-07 14:46:46.926 Looking for network events\n. 2016-01-07 14:46:46.926 Timeout waiting for network events\n. 2016-01-07 14:46:46.927 download;D;0;2016-01-07T11:56:05.000Z;\"\" [0];\"\" [0];rw-rw-rw-;1\n. 2016-01-07 14:46:46.927 upload;D;0;2016-01-07T11:54:21.000Z;\"\" [0];\"\" [0];rw-rw-rw-;1\n. 2016-01-07 14:46:47.009 Startup conversation with host finished.\n. 2016-01-07 14:46:47.122 Session upkeep\n. 2016-01-07 14:46:47.122 Looking for network events\n. 2016-01-07 14:46:47.122 Detected network event\n. 2016-01-07 14:46:47.122 Enumerating network events for socket 1084\n. 2016-01-07 14:46:47.122 Enumerated 1 network events making 1 cumulative events for socket 1084\n. 2016-01-07 14:46:47.122 Handling network read event on socket 1084 with error 0\n. 2016-01-07 14:46:47.122 Received 21 bytes (0)\n. 2016-01-07 14:46:47.124 Session upkeep\n. 2016-01-07 14:46:47.124 Looking for network events\n. 2016-01-07 14:46:47.124 Timeout waiting for network events\n. 2016-01-07 14:46:47.257 Session upkeep\n. 2016-01-07 14:46:47.257 Looking for network events\n. 2016-01-07 14:46:47.257 Timeout waiting for network events\n. 2016-01-07 14:46:47.768 Session upkeep\n. 2016-01-07 14:46:47.768 Looking for network events\n. 2016-01-07 14:46:47.768 Timeout waiting for network events\n. 2016-01-07 14:46:48.267 Session upkeep\n. 2016-01-07 14:46:48.267 Looking for network events\n. 2016-01-07 14:46:48.267 Timeout waiting for network events\n. 2016-01-07 14:46:48.781 Session upkeep\n. 2016-01-07 14:46:48.782 Looking for network events\n. 2016-01-07 14:46:48.782 Timeout waiting for network events\n. 2016-01-07 14:46:48.832 Cached directory change via \"download\" to \"/download\".\n. 2016-01-07 14:46:48.832 Getting current directory name.\n. 2016-01-07 14:46:48.832 Listing directory \"/download\".\n&gt; 2016-01-07 14:46:48.832 Type: SSH_FXP_OPENDIR, Size: 18, Number: 5131\n&gt; 2016-01-07 14:46:48.832 0B,00,00,14,0B,00,00,00,09,2F,64,6F,77,6E,6C,6F,61,64,\n. 2016-01-07 14:46:48.832 Sent 22 bytes\n. 2016-01-07 14:46:48.832 There are 0 bytes remaining in the send buffer\n. 2016-01-07 14:46:48.832 Looking for network events\n. 2016-01-07 14:46:48.834 Timeout waiting for network events\n. 2016-01-07 14:46:48.834 Read 4 bytes (17 pending)\n. 2016-01-07 14:46:48.834 Read 17 bytes (0 pending)\n&lt; 2016-01-07 14:46:48.834 Type: SSH_FXP_STATUS, Size: 17, Number: 4868\n&lt; 2016-01-07 14:46:48.834 65,00,00,13,04,00,00,00,00,00,00,00,00,00,00,00,00,\n. 2016-01-07 14:46:48.834 Discarding reserved response\n. 2016-01-07 14:46:48.834 Waiting for another 4 bytes\n. 2016-01-07 14:46:48.834 Looking for incoming data\n. 2016-01-07 14:46:48.834 Looking for network events\n. 2016-01-07 14:46:48.834 Detected network event\n. 2016-01-07 14:46:48.834 Enumerating network events for socket 1084\n. 2016-01-07 14:46:48.834 Enumerated 1 network events making 1 cumulative events for socket 1084\n. 2016-01-07 14:46:48.834 Handling network read event on socket 1084 with error 0\n. 2016-01-07 14:46:48.834 Received 45 bytes (0)\n. 2016-01-07 14:46:48.834 Read 4 bytes (41 pending)\n. 2016-01-07 14:46:48.834 Read 41 bytes (0 pending)\n&lt; 2016-01-07 14:46:48.834 Type: SSH_FXP_HANDLE, Size: 41, Number: 5131\n&lt; 2016-01-07 14:46:48.834 66,00,00,14,0B,00,00,00,20,30,61,33,38,32,30,37,31,37,64,61,65,34,34,39,61,\n&lt; 2016-01-07 14:46:48.834 30,31,66,36,32,65,35,61,33,34,65,34,30,33,39,34,\n&gt; 2016-01-07 14:46:48.834 Type: SSH_FXP_READDIR, Size: 41, Number: 5388\n&gt; 2016-01-07 14:46:48.834 0C,00,00,15,0C,00,00,00,20,30,61,33,38,32,30,37,31,37,64,61,65,34,34,39,61,\n&gt; 2016-01-07 14:46:48.834 30,31,66,36,32,65,35,61,33,34,65,34,30,33,39,34,\n. 2016-01-07 14:46:48.835 Sent 45 bytes\n. 2016-01-07 14:46:48.835 There are 0 bytes remaining in the send buffer\n. 2016-01-07 14:46:48.835 Looking for network events\n. 2016-01-07 14:46:48.835 Timeout waiting for network events\n. 2016-01-07 14:46:48.835 Waiting for another 4 bytes\n. 2016-01-07 14:46:48.835 Looking for incoming data\n. 2016-01-07 14:46:48.835 Looking for network events\n. 2016-01-07 14:46:48.840 Detected network event\n. 2016-01-07 14:46:48.840 Enumerating network events for socket 1084\n. 2016-01-07 14:46:48.840 Enumerated 1 network events making 1 cumulative events for socket 1084\n. 2016-01-07 14:46:48.840 Handling network read event on socket 1084 with error 0\n. 2016-01-07 14:46:48.840 Received 749 bytes (0)\n. 2016-01-07 14:46:48.840 Read 4 bytes (745 pending)\n. 2016-01-07 14:46:48.840 Read 745 bytes (0 pending)\n&lt; 2016-01-07 14:46:48.840 Type: SSH_FXP_NAME, Size: 745, Number: 5388\n&lt; 2016-01-07 14:46:48.840 68,00,00,15,0C,00,00,00,02,00,00,00,01,2E,00,00,00,7C,02,00,00,41,B6,00,00,\n&lt; 2016-01-07 14:46:48.840 00,00,56,8E,52,55,00,00,00,00,56,8E,52,55,00,00,00,00,56,8E,52,55,00,00,01,\n&lt; 2016-01-07 14:46:48.840 54,00,00,00,08,00,00,00,00,00,00,00,03,00,1F,01,FF,00,00,00,0D,44,55,53,5C,\n&lt; 2016-01-07 14:46:48.840 6E,6D,65,63,6B,6D,61,6E,6E,00,00,00,00,00,00,00,00,00,1F,01,FF,00,00,00,1C,\n&lt; 2016-01-07 14:46:48.840 56,4F,52,44,45,46,49,4E,49,45,52,54,5C,41,64,6D,69,6E,69,73,74,72,61,74,6F,\n&lt; 2016-01-07 14:46:48.840 72,65,6E,00,00,00,00,00,00,00,0B,00,00,00,00,00,00,00,1C,56,4F,52,44,45,46,\n&lt; 2016-01-07 14:46:48.840 49,4E,49,45,52,54,5C,41,64,6D,69,6E,69,73,74,72,61,74,6F,72,65,6E,00,00,00,\n&lt; 2016-01-07 14:46:48.840 00,00,00,00,00,00,1F,01,FF,00,00,00,14,4E,54,2D,41,55,54,4F,52,49,54,C3,84,\n&lt; 2016-01-07 14:46:48.840 54,5C,53,59,53,54,45,4D,00,00,00,00,00,00,00,0B,00,00,00,00,00,00,00,14,4E,\n&lt; 2016-01-07 14:46:48.840 54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,53,59,53,54,45,4D,00,00,00,00,00,00,\n&lt; 2016-01-07 14:46:48.840 00,03,00,12,00,A9,00,00,00,15,56,4F,52,44,45,46,49,4E,49,45,52,54,5C,42,65,\n&lt; 2016-01-07 14:46:48.840 6E,75,74,7A,65,72,00,00,00,00,00,00,00,00,00,13,01,BF,00,00,00,27,4E,54,2D,\n&lt; 2016-01-07 14:46:48.840 41,55,54,4F,52,49,54,C3,84,54,5C,41,75,74,68,65,6E,74,69,66,69,7A,69,65,72,\n&lt; 2016-01-07 14:46:48.840 74,65,20,42,65,6E,75,74,7A,65,72,00,00,00,00,00,00,00,0B,00,01,00,00,00,00,\n&lt; 2016-01-07 14:46:48.840 00,27,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,41,75,74,68,65,6E,74,69,66,\n&lt; 2016-01-07 14:46:48.840 69,7A,69,65,72,74,65,20,42,65,6E,75,74,7A,65,72,00,00,00,02,2E,2E,00,00,00,\n&lt; 2016-01-07 14:46:48.840 7C,02,00,00,41,B6,00,00,00,00,56,79,11,96,00,00,00,00,56,79,11,96,00,00,00,\n&lt; 2016-01-07 14:46:48.840 00,56,79,11,96,00,00,01,37,00,00,00,07,00,00,00,00,00,00,00,00,00,1F,01,FF,\n&lt; 2016-01-07 14:46:48.840 00,00,00,1C,56,4F,52,44,45,46,49,4E,49,45,52,54,5C,41,64,6D,69,6E,69,73,74,\n&lt; 2016-01-07 14:46:48.840 72,61,74,6F,72,65,6E,00,00,00,00,00,00,00,0B,00,00,00,00,00,00,00,1C,56,4F,\n&lt; 2016-01-07 14:46:48.840 52,44,45,46,49,4E,49,45,52,54,5C,41,64,6D,69,6E,69,73,74,72,61,74,6F,72,65,\n&lt; 2016-01-07 14:46:48.840 6E,00,00,00,00,00,00,00,00,00,1F,01,FF,00,00,00,14,4E,54,2D,41,55,54,4F,52,\n&lt; 2016-01-07 14:46:48.840 49,54,C3,84,54,5C,53,59,53,54,45,4D,00,00,00,00,00,00,00,0B,00,00,00,00,00,\n&lt; 2016-01-07 14:46:48.840 00,00,14,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,53,59,53,54,45,4D,00,00,\n&lt; 2016-01-07 14:46:48.840 00,00,00,00,00,03,00,12,00,A9,00,00,00,15,56,4F,52,44,45,46,49,4E,49,45,52,\n&lt; 2016-01-07 14:46:48.840 54,5C,42,65,6E,75,74,7A,65,72,00,00,00,00,00,00,00,00,00,13,01,BF,00,00,00,\n&lt; 2016-01-07 14:46:48.840 27,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,41,75,74,68,65,6E,74,69,66,69,\n&lt; 2016-01-07 14:46:48.840 7A,69,65,72,74,65,20,42,65,6E,75,74,7A,65,72,00,00,00,00,00,00,00,0B,00,01,\n&lt; 2016-01-07 14:46:48.840 00,00,00,00,00,27,4E,54,2D,41,55,54,4F,52,49,54,C3,84,54,5C,41,75,74,68,65,\n&lt; 2016-01-07 14:46:48.841 6E,74,69,66,69,7A,69,65,72,74,65,20,42,65,6E,75,74,7A,65,72,\n&gt; 2016-01-07 14:46:48.841 Type: SSH_FXP_READDIR, Size: 41, Number: 5644\n&gt; 2016-01-07 14:46:48.841 0C,00,00,16,0C,00,00,00,20,30,61,33,38,32,30,37,31,37,64,61,65,34,34,39,61,\n&gt; 2016-01-07 14:46:48.841 30,31,66,36,32,65,35,61,33,34,65,34,30,33,39,34,\n. 2016-01-07 14:46:48.841 Sent 45 bytes\n. 2016-01-07 14:46:48.841 There are 0 bytes remaining in the send buffer\n. 2016-01-07 14:46:48.841 Looking for network events\n. 2016-01-07 14:46:48.841 Timeout waiting for network events\n. 2016-01-07 14:46:48.841 Read file '.' from listing\n. 2016-01-07 14:46:48.841 Read file '..' from listing\n. 2016-01-07 14:46:48.841 Waiting for another 4 bytes\n. 2016-01-07 14:46:48.841 Looking for incoming data\n. 2016-01-07 14:46:48.841 Looking for network events\n. 2016-01-07 14:46:48.841 Detected network event\n. 2016-01-07 14:46:48.841 Enumerating network events for socket 1084\n. 2016-01-07 14:46:48.841 Enumerated 1 network events making 1 cumulative events for socket 1084\n. 2016-01-07 14:46:48.841 Handling network read event on socket 1084 with error 0\n. 2016-01-07 14:46:48.841 Received 46 bytes (0)\n. 2016-01-07 14:46:48.841 Read 4 bytes (42 pending)\n. 2016-01-07 14:46:48.841 Read 42 bytes (0 pending)\n&lt; 2016-01-07 14:46:48.841 Type: SSH_FXP_STATUS, Size: 42, Number: 5644\n&lt; 2016-01-07 14:46:48.841 65,00,00,16,0C,00,00,00,01,00,00,00,19,44,69,72,65,63,74,6F,72,79,20,72,65,\n&lt; 2016-01-07 14:46:48.841 61,64,69,6E,67,20,69,73,20,64,6F,6E,65,00,00,00,00,\n&lt; 2016-01-07 14:46:48.842 Status code: 1\n&gt; 2016-01-07 14:46:48.842 Type: SSH_FXP_CLOSE, Size: 41, Number: 5892\n&gt; 2016-01-07 14:46:48.842 04,00,00,17,04,00,00,00,20,30,61,33,38,32,30,37,31,37,64,61,65,34,34,39,61,\n&gt; 2016-01-07 14:46:48.842 30,31,66,36,32,65,35,61,33,34,65,34,30,33,39,34,\n. 2016-01-07 14:46:48.842 Sent 45 bytes\n. 2016-01-07 14:46:48.842 There are 0 bytes remaining in the send buffer\n. 2016-01-07 14:46:48.842 Looking for network events\n. 2016-01-07 14:46:48.842 Timeout waiting for network events\n. 2016-01-07 14:46:48.842 ..;D;0;2015-12-22T09:02:14.000Z;\"\" [0];\"\" [0];rw-rw-rw-;1\n. 2016-01-07 14:46:49.283 Session upkeep\n. 2016-01-07 14:46:49.283 Looking for network events\n. 2016-01-07 14:46:49.283 Detected network event\n. 2016-01-07 14:46:49.283 Enumerating network events for socket 1084\n. 2016-01-07 14:46:49.283 Enumerated 1 network events making 1 cumulative events for socket 1084\n. 2016-01-07 14:46:49.283 Handling network read event on socket 1084 with error 0\n. 2016-01-07 14:46:49.283 Received 21 bytes (0)\n. 2016-01-07 14:46:49.472 Cached directory change via \"..\" to \"/\".\n. 2016-01-07 14:46:49.472 Getting current directory name.\n. 2016-01-07 14:46:49.473 Directory content loaded from cache.\n. 2016-01-07 14:46:49.795 Session upkeep\n. 2016-01-07 14:46:49.795 Looking for network events\n. 2016-01-07 14:46:49.795 Timeout waiting for network events\n. 2016-01-07 14:46:49.880 Cached directory change via \"upload\" to \"/upload\".\n. 2016-01-07 14:46:49.880 Getting current directory name.\n. 2016-01-07 14:46:49.881 Listing directory \"/upload\".\n&gt; 2016-01-07 14:46:49.881 Type: SSH_FXP_OPENDIR, Size: 16, Number: 6155\n&gt; 2016-01-07 14:46:49.881 0B,00,00,18,0B,00,00,00,07,2F,75,70,6C,6F,61,64,\n. 2016-01-07 14:46:49.881 Sent 20 bytes\n. 2016-01-07 14:46:49.881 There are 0 bytes remaining in the send buffer\n. 2016-01-07 14:46:49.881 Looking for network events\n. 2016-01-07 14:46:49.882 Timeout waiting for network events\n. 2016-01-07 14:46:49.882 Read 4 bytes (17 pending)\n. 2016-01-07 14:46:49.882 Read 17 bytes (0 pending)\n&lt; 2016-01-07 14:46:49.882 Type: SSH_FXP_STATUS, Size: 17, Number: 5892\n&lt; 2016-01-07 14:46:49.882 65,00,00,17,04,00,00,00,00,00,00,00,00,00,00,00,00,\n. 2016-01-07 14:46:49.882 Discarding reserved response\n. 2016-01-07 14:46:49.882 Waiting for another 4 bytes\n. 2016-01-07 14:46:49.882 Looking for incoming data\n. 2016-01-07 14:46:49.882 Looking for network events\n. 2016-01-07 14:46:49.882 Detected network event\n. 2016-01-07 14:46:49.882 Enumerating network events for socket 1084\n. 2016-01-07 14:46:49.883 Enumerated 1 network events making 1 cumulative events for socket 1084\n. 2016-01-07 14:46:49.883 Handling network read event on socket 1084 with error 0\n. 2016-01-07 14:46:49.883 Received 45 bytes (0)\n. 2016-01-07 14:46:49.883 Read 4 bytes (41 pending)\n. 2016-01-07 14:46:49.883 Read 41 bytes (0 pending)\n&lt; 2016-01-07 14:46:49.883 Type: SSH_FXP_HANDLE, Size: 41, Number: 6155\n&lt; 2016-01-07 14:46:49.883 66,00,00,18,0B,00,00,00,20,30,38,61,36,35,34,38,66,61,36,39,63,66,31,64,37,\n&lt; 2016-01-07 14:46:49.883 65,31,33,34,32,33,63,32,61,30,32,30,35,33,63,37,\n&gt; 2016-01-07 14:46:49.883 Type: SSH_FXP_READDIR, Size: 41, Number: 6412\n&gt; 2016-01-07 14:46:49.883 0C,00,00,19,0C,00,00,00,20,30,38,61,36,35,34,38,66,61,36,39,63,66,31,64,37,\n&gt; 2016-01-07 14:46:49.883 65,31,33,34,32,33,63,32,61,30,32,30,35,33,63,37,\n. 2016-01-07 14:46:49.883 Sent 45 bytes\n. 2016-01-07 14:46:49.883 There are 0 bytes remaining in the send buffer\n. 2016-01-07 14:46:49.883 Looking for network events\n. 2016-01-07 14:46:49.883 Timeout waiting for network events\n. 2016-01-07 14:46:49.883 Waiting for another 4 bytes\n. 2016-01-07 14:46:49.883 Looking for incoming data\n. 2016-01-07 14:46:49.883 Looking for network events\n. 2016-01-07 14:46:49.889 Detected network event\n. 2016-01-07 14:46:49.890 Enumerating network events for socket 1084\n. 2016-01-07 14:46:49.890 Enumerated 1 network events making 1 cumulative events for socket 1084\n. 2016-01-07 14:46:49.890 Handling network read event on socket 1084 with error 0\n. 2016-01-07 14:46:49.890 Received 720 bytes (0)\n. 2016-01-07 14:46:49.890 Read 4 bytes (716 pending)\n. 2016-01-07 14:46:49.890 Read 716 bytes (0 pending)\n</code></pre>\n\n<p>Greetings</p>\n"},{"comments":[{"comment_id":134516138,"body":"<a href=\"http://www.masterspringboot.com/apache-kafka/how-to-monitor-kafka-using-jmx/\" rel=\"nofollow noreferrer\">masterspringboot.com/apache-kafka/&hellip;</a>"},{"comment_id":134540648,"body":"Thanks for the link but am looking for something at startup when a spring boot application starts up. The aws msk configs are in bootstrap and if it doesnt connect then service does not start up is the requirement. So the focus is not on monitoring the kafka topic but on stopping service from startup on failing kafka connections and other kafka related failures."}],"last_activity_date":1684387079,"question_id":76277927,"body":"<p>Suppose one is in a Spring boot microservice and one connects to a Amazon msk cluster. The configurations for connecting to the cluster are mentioned in the bootstrap yml within the microservice resources directory. The sasl scram combination is used to authenticate the service to the cluster.\nNow one wants to test that connection to the kafka cluster has succeeded during microservice startup else stop the microservice from starting up.\nIs there a way to write java code to test this connectivity between service and cluster and throw an exception as a log and prevent the service from starting up and log the exact exception for debugging purposes. Thanks!!</p>\n"},{"comments":[{"comment_id":134512423,"body":"I don&#39;t have that problem with NetBeans 17, but someone else did - see Bug Report <a href=\"https://github.com/apache/netbeans/issues/5793\" rel=\"nofollow noreferrer\">NetBeans 17 Background Scanning of Projects doesn&#39;t ever complete, without throwing an Unexpected Exception #5793</a>. Restart NetBeans and let the scanning run for 5 or 10 minutes, then check the NetBeans log file (<b>View &gt; IDE Log</b>). Update your question if there is anything relevant in that log&#39;s most recent entries."},{"comment_id":134512468,"body":"Another thing to try is to close some of your projects, and then restart NetBeans to see if the problem is diminished, or goes away completely. If the problem persists, repeat the cycle of closing a few more projects and then restarting NetBeans. That approach is tedious, but it may allow you to determine whether the files of some specific project(s) provoke the problem. You could also try playing with the <i>Ignored Files Pattern</i> field, which is on the same screen as the <i>Enable auto-scanning of sources</i> checkbox."},{"comment_id":134513645,"body":"@skomisa thank you for your tips, I will check them soon. It was my favorite IDE, but with this issue, I had to change to IntellJ."}],"last_activity_date":1684386950,"question_id":76277925,"body":"<p>Netbeans has been very annoying, I used Netbeans 8 with Maven projects before and it didn't have this issue, but since I had to update to java 11 and use Netbeans 17, this problem appears. It is completely unusable IDE to me anymore.</p>\n<p>When I opened Netbeans, it has a popup saying &quot;Background scanning of projects&quot; and it has been taking more than 10 minutes to run???</p>\n<p>I don't have Tools -&gt; Options -&gt; Miscellaneous -&gt; Files (Enable auto-scanning of sources) checkbox enabled.</p>\n<p>I noticed that Netbeans is trying to scan my <strong>build directory</strong> as well which I don't understand why it wants to do that.</p>\n"},{"comments":[{"comment_id":134511374,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\">What is a NullPointerException, and how do I fix it?</a>"},{"comment_id":134511389,"body":"Please do a debug and see whether <code>projetRepository</code> is null or not"}],"last_activity_date":1684386035,"question_id":76272883,"body":"<p>I'm trying to add an entity Projet which has a list property of another entity Sprint. These are the two entities</p>\n<p>Projet:</p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonIgnore;\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\nimport javax.persistence.*;\nimport java.util.List;\n\n@AllArgsConstructor\n@NoArgsConstructor\n@Entity\n@Getter\n@Setter\npublic class Projet {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n    private String title;\n    private String description;\n    @ManyToMany(mappedBy = &quot;projets&quot;)\n    private List&lt;User&gt; users;\n    @OneToMany(mappedBy = &quot;projet&quot;)\n    @JsonIgnore\n    private List&lt;Sprint&gt; sprints;\n}\n</code></pre>\n<p>Sprint:</p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonIgnore;\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\nimport javax.persistence.*;\nimport java.util.Date;\n\n@Entity\n@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class Sprint {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n    private String description;\n    @Temporal(TemporalType.DATE)\n    private Date startDate;\n    @ManyToOne\n    @JsonIgnore\n    private Projet projet;\n}\n</code></pre>\n<p>I have a repository interface, ProjetRepository:</p>\n<pre><code>import org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\nimport tn.esprit.spring.entities.Projet;\n\n@Repository\npublic interface ProjetRepository extends JpaRepository&lt;Projet, Integer&gt; {\n}\n</code></pre>\n<p>A service interface, IProjetService:</p>\n<pre><code>import tn.esprit.spring.entities.Projet;\n\npublic interface IProjetService {\n    public Projet addProject (Projet project);\n}\n</code></pre>\n<p>And a service implementation class, ProjetService:</p>\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\nimport tn.esprit.spring.entities.Projet;\nimport tn.esprit.spring.entities.Sprint;\nimport tn.esprit.spring.repositories.ProjetRepository;\n\nimport java.util.List;\n\n@Service\npublic class ProjetService implements IProjetService{\n    @Autowired\n    ProjetRepository projetRepository;\n    @Override\n    public Projet addProject(Projet projet) {\n        List&lt;Sprint&gt; sprints = projet.getSprints();\n        for ( Sprint sprint: sprints) {\n            sprint.setProjet(projet);\n        }\n        return projetRepository.save(projet);\n    }\n}\n</code></pre>\n<p>This is the controller, ProjetController:</p>\n<pre><code>import lombok.RequiredArgsConstructor;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\nimport tn.esprit.spring.entities.Projet;\nimport tn.esprit.spring.services.IProjetService;\n\n@RequiredArgsConstructor\n@RequestMapping(&quot;/projet&quot;)\n@RestController\npublic class ProjetController {\n    @Autowired\n    IProjetService projetService;\n    @PostMapping(&quot;/addProjet&quot;)\n    public Projet addProject (@RequestBody Projet project){\n        return projetService.addProject(project);\n    }\n}\n</code></pre>\n<p>This is the test application, SpringTestApplication:</p>\n<pre><code>import org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.autoconfigure.domain.EntityScan;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\n\n@SpringBootApplication\n\n@EntityScan(basePackages = {&quot;tn.esprit.spring.entities&quot;})\n@ComponentScan(basePackages = {&quot;tn.esprit.spring.controllers&quot;, &quot;tn.esprit.spring.services&quot;\n        , &quot;tn.esprit.spring.repositories&quot;})\n\n@EnableJpaRepositories(basePackages = {&quot;tn.esprit.spring.repositories&quot;})\n\npublic class SpringTestApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(SpringTestApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>When testing the addProjet method on Postman on this url using Post method http://localhost:8085/Exam/projet/addProjet using this request body:</p>\n<pre><code>{\n    &quot;title&quot;: &quot;MAP&quot;,\n    &quot;description&quot;: &quot;Gestion de Mandats, Assignations et Projets&quot;,\n    &quot;sprints&quot;: [\n        {\n            &quot;description&quot;: &quot;Sprint Projets&quot;,\n            &quot;startDate&quot;: &quot;2023-05-27&quot;\n        }\n    ]\n}\n</code></pre>\n<p>In Postman response body:</p>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;2023-05-17T13:45:51.279+00:00&quot;,\n    &quot;status&quot;: 500,\n    &quot;error&quot;: &quot;Internal Server Error&quot;,\n    &quot;path&quot;: &quot;/Exam/projet/addProjet&quot;\n}\n</code></pre>\n<p>In IDE console:</p>\n<pre><code>java.lang.NullPointerException: null\n    at tn.esprit.spring.services.ProjetService.addProject(ProjetService.java:21) ~[classes/:na]\n    at tn.esprit.spring.controllers.ProjetController.addProject(ProjetController.java:20) ~[classes/:na]\n</code></pre>\n<p>Which points to here:</p>\n<pre><code>return projetRepository.save(projet);\n</code></pre>\n<p>I really don't understand what the issue is, could anyone please help ?</p>\n<p>EDIT: I also get this error in console: <code>2023-05-17 14:56:42.938 ERROR 8448 --- [nio-8085-exec-4] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] in context with path [/Exam] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause</code></p>\n"},{"comments":[{"comment_id":134496311,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/6985378/no-persistence-unit-found-error\">&quot;No Persistence Unit Found&quot; error</a>"},{"comment_id":134496581,"body":"its partially resolved the issue but it still can&#39;t create the bean"},{"comment_id":134496634,"body":"Please check this one - <a href=\"https://stackoverflow.com/questions/43498590/error-creating-bean-with-name-entitymanagerfactory-defined-in-servletcontext-r\" title=\"error creating bean with name entitymanagerfactory defined in servletcontext r\">stackoverflow.com/questions/43498590/&hellip;</a>"},{"comment_id":134496780,"body":"nope still the same error updated the hibernate-jpa-2.0-api to hibernate-jpa-2.1-api"},{"comment_id":134499575,"body":"Can you update with the complete log?"},{"comment_id":134500062,"body":"Welcome to SO. Please learn <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask a question on SO</a> and provide a <a href=\"https://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>. If it is too much code to post here, even though it is minimal, feel free to link to a GitHub reprository reproducing your problem. Thank you."}],"last_activity_date":1684385238,"question_id":76268713,"body":"<p>I'm using</p>\n<ol>\n<li><code>JDK 1.8</code></li>\n<li><code>MySQL</code> 8.0.31</li>\n<li><code>Spring</code> version 5.3.27</li>\n<li><code>Aspectj</code> version 1.8.10</li>\n<li><code>log4j-api(core, web)</code> version 2.17.1</li>\n</ol>\n<p>updating the log trace</p>\n<pre><code>May 17, 2023 12:16:20 PM org.apache.catalina.core.ApplicationContext log\nINFO: Initializing Spring root WebApplicationContext\nlog4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).\nlog4j:WARN Please initialize the log4j system properly.\nMay 17, 2023 12:16:22 PM org.apache.catalina.core.StandardContext listenerStart\nMay 17, 2023 12:16:22 PM com.metaparadigm.jsonrpc.JSONRPCBridge registerLocalArgResolver\nINFO: registered local arg resolver com.metaparadigm.jsonrpc.HttpServletRequestArgResolver for local class javax.servlet.http.HttpServletRequest with context javax.servlet.http.HttpServletRequest\nMay 17, 2023 12:16:22 PM com.metaparadigm.jsonrpc.JSONRPCBridge registerLocalArgResolver\nINFO: registered local arg resolver com.metaparadigm.jsonrpc.HttpSessionArgResolver for local class javax.servlet.http.HttpSession with context javax.servlet.http.HttpServletRequest\nMay 17, 2023 12:16:22 PM com.metaparadigm.jsonrpc.JSONRPCBridge registerLocalArgResolver\nINFO: registered local arg resolver com.metaparadigm.jsonrpc.JSONRPCBridgeServletArgResolver for local class com.metaparadigm.jsonrpc.JSONRPCBridge with context javax.servlet.http.HttpServletRequest\nMay 17, 2023 12:16:23 PM org.apache.catalina.core.StandardContext listenerStart\nSEVERE: Exception sending context initialized event to listener instance of class [com.demoweb.web.util.demoWebContextListener]\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [META-INF/demoweb-backend/applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: org.hibernate.annotations.common.reflection.java.JavaReflectionManager.injectClassLoaderDelegate(Lorg/hibernate/annotations/common/reflection/ClassLoaderDelegate;)V\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1156)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:910)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:144)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:85)\n    at com.demoweb.web.util.demoWebContextListener.contextInitialized(demoWebContextListener.java:55)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4494)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4946)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:683)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:658)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:662)\n    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:689)\n    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1888)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\n    at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:582)\n    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:472)\n    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1617)\n    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:318)\n    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\n    at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:898)\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:795)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1332)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1322)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:871)\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:249)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:428)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:917)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:347)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:478)\nCaused by: java.lang.NoSuchMethodError: org.hibernate.annotations.common.reflection.java.JavaReflectionManager.injectClassLoaderDelegate(Lorg/hibernate/annotations/common/reflection/ClassLoaderDelegate;)V\n    at org.hibernate.boot.internal.BootstrapContextImpl.generateHcannReflectionManager(BootstrapContextImpl.java:316)\n    at org.hibernate.boot.internal.BootstrapContextImpl.&lt;init&gt;(BootstrapContextImpl.java:89)\n    at org.hibernate.boot.internal.MetadataBuilderImpl.&lt;init&gt;(MetadataBuilderImpl.java:124)\n    at org.hibernate.boot.MetadataSources.getMetadataBuilder(MetadataSources.java:136)\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.&lt;init&gt;(EntityManagerFactoryBuilderImpl.java:218)\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.&lt;init&gt;(EntityManagerFactoryBuilderImpl.java:167)\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:52)\n    at com.demoweb.backend.util.demoLocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(demoLocalContainerEntityManagerFactoryBean.java:235)\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)\n    ... 53 more\n\nMay 17, 2023 12:16:23 PM org.apache.catalina.core.StandardContext startInternal\nSEVERE: One or more listeners failed to start. Full details will be found in the appropriate container log file\nMay 17, 2023 12:16:23 PM org.apache.catalina.core.StandardContext startInternal\nSEVERE: Context [] startup failed due to previous errors\nMay 17, 2023 12:16:23 PM org.apache.catalina.core.ApplicationContext log\nINFO: Closing Spring root WebApplicationContext\nMay 17, 2023 12:16:23 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nWARNING: The web application [ROOT] appears to have started a thread named [Timer-0] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:\n java.lang.Object.wait(Native Method)\n java.lang.Object.wait(Object.java:502)\n java.util.TimerThread.mainLoop(Timer.java:526)\n java.util.TimerThread.run(Timer.java:505)\nMay 17, 2023 12:16:23 PM org.apache.catalina.loader.WebappClassLoaderBase clearReferencesThreads\nWARNING: The web application [ROOT] appears to have started a thread named [mysql-cj-abandoned-connection-cleanup] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:\n java.lang.Object.wait(Native Method)\n java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:144)\n com.mysql.cj.jdbc.AbandonedConnectionCleanupThread.run(AbandonedConnectionCleanupThread.java:91)\n java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n java.lang.Thread.run(Thread.java:748)\nMay 17, 2023 12:16:23 PM org.apache.catalina.startup.HostConfig deployDescriptor\nINFO: Deployment of deployment descriptor [D:\\apache-tomcat-9.0.74\\apache-tomcat-9.0.74\\conf\\Catalina\\localhost\\ROOT.xml] has finished in [22,712] ms\nMay 17, 2023 12:16:23 PM org.apache.catalina.startup.HostConfig deployWAR\nINFO: Deploying web application archive [D:\\apache-tomcat-9.0.74\\apache-tomcat-9.0.74\\webapps\\abc.war]\n</code></pre>\n<p><strong>Dependencies</strong></p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n        &lt;version&gt;5.3.7.Final&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate.common&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-commons-annotations&lt;/artifactId&gt;\n        &lt;version&gt;5.1.1.Final&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-search&lt;/artifactId&gt;\n        &lt;version&gt;3.4.1.Final&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt;\n        &lt;version&gt;5.3.7.Final&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;cglib&lt;/groupId&gt;\n                &lt;artifactId&gt;cglib&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;dom4j&lt;/groupId&gt;\n                &lt;artifactId&gt;dom4j&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate.javax.persistence&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-jpa-2.0-api&lt;/artifactId&gt;\n        &lt;version&gt;1.0.0.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>applicationcontext.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n    xmlns:jdbc=&quot;http://www.springframework.org/schema/jdbc&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\n    xmlns:util=&quot;http://www.springframework.org/schema/util&quot; xmlns:jpa=&quot;http://www.springframework.org/schema/data/jpa&quot;\n\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd\n        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd\n        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd\n        http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd\n        http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd&quot;&gt;\n\n    &lt;context:spring-configured /&gt;\n    \n    &lt;context:property-placeholder location=&quot;classpath:META-INF/demoweb-backend.properties&quot; /&gt;\n    \n    \n    &lt;util:properties id=&quot;demoProperties&quot; location=&quot;file:///${catalina.home}/conf/demo.properties&quot;/&gt;\n    \n    &lt;bean id=&quot;entityManagerFactory&quot;\n        class=&quot;com.demoweb.backend.util.demoLocalContainerEntityManagerFactoryBean&quot;&gt;\n        &lt;property name=&quot;dataSource&quot; ref=&quot;demowebDataSource&quot; /&gt;\n        &lt;property name=&quot;persistenceUnitName&quot; value=&quot;demoweb&quot; /&gt;\n        &lt;property name=&quot;jpaVendorAdapter&quot;&gt;\n            &lt;bean class=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot;&gt;\n                &lt;property name=&quot;generateDdl&quot; value=&quot;${demoweb.database.generateddl}&quot; /&gt;\n                &lt;property name=&quot;databasePlatform&quot; value=&quot;${demoweb.database.platform}&quot; /&gt;\n                &lt;property name=&quot;showSql&quot; value=&quot;false&quot; /&gt;\n            &lt;/bean&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;&gt;\n        &lt;property name=&quot;entityManagerFactory&quot; ref=&quot;entityManagerFactory&quot; /&gt;\n    &lt;/bean&gt;\n      \n    &lt;bean id=&quot;entityManager&quot; class=&quot;org.springframework.orm.jpa.support.SharedEntityManagerBean&quot;&gt;\n        &lt;property name=&quot;entityManagerFactory&quot; ref=&quot;entityManagerFactory&quot;/&gt;\n    &lt;/bean&gt;\n\n    &lt;tx:annotation-driven mode=&quot;aspectj&quot; transaction-manager=&quot;transactionManager&quot;  proxy-target-class=&quot;true&quot;/&gt;\n    &lt;jpa:repositories base-package=&quot;com.demoweb.backend.repository&quot; /&gt;\n    \n&lt;/beans&gt;\n</code></pre>\n<p>i'm not sure whats wrong with my bean i'm currentely upgrading my application which is causing this error. If some can point me in correct direction really appriciate the help.</p>\n<p>Removing the hibernate conflitcs resolved the &quot; No persistence unit with name&quot; but its still can't create bean.</p>\n"},{"last_activity_date":1684385074,"question_id":76277802,"body":"<p>for that I found a dependency to include in <code>build.gradle</code> file</p>\n<p><code>dependencies { implementation 'org.expression4j:expression4j:2.5.1' }</code></p>\n<p>and I clicked on <code>sync now</code></p>\n<p>Still <code>import org.expression4j.Expression;</code> is not recognized</p>\n"},{"comments":[{"comment_id":134511239,"body":"You are checking if 2300 is before midnight of the <i>same</i> day, hence why its returning false. See this link for more info <a href=\"http://www.java2s.com/Tutorials/Java/java.time/LocalTime/1040__LocalTime.MIDNIGHT.htm\" rel=\"nofollow noreferrer\">java2s.com/Tutorials/Java/java.time/LocalTime/&hellip;</a>  I would suggest checking if the startTime and Endtime have the same date, and if not, it is bleeding over"},{"comment_id":134511341,"body":"I appreciate the answers everyone. I have a better understanding of the same day limitations that LocalTime has. I marked an answer of accepted that accomplished my needs without having to use a LocalDateTime object."},{"comment_id":134511427,"body":"<i>All</i> LocalTimes are technically after midnight"},{"comment_id":134516329,"body":"@LouisWasserman Correct (except 00:00 <i>is</i> midnight). Or if talking midnight at the end of the day they are all before midnight since they only go up to 23:59:59.999999999."}],"answers":[{"comments":[{"comment_id":134511866,"body":"That&#39;s assuming that the data you are receiving is good data. For example, if someone accidentally puts 16:00 as their startTime and 08:00 as their endTime, they will get 16 hours of pay instead of 8 hours. The only way to prevent this is to recreate the date functionality (either here, or do it further upstream), hence my point about &quot;use a different tool&quot;."},{"comment_id":134511936,"body":"Correct, but at that point, validation is trivial to do. Doing the same when you only have <code>LocalTime</code> is not possible unless you are using another tool instead, or using another tool alongside <code>LocalTime</code>."}],"answer_id":76277763,"body":"<p>As with all things, when in doubt, check the documentation.</p>\n<p>Here is the documentation for the various parts of your code.</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/LocalTime.html#parse(java.lang.CharSequence)\" rel=\"nofollow noreferrer\"><code>LocalTime#parse(String)</code></a></li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/LocalTime.html#MIDNIGHT\" rel=\"nofollow noreferrer\"><code>LocalTime#MIDNIGHT</code></a></li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/LocalTime.html#isBefore(java.time.LocalTime)\" rel=\"nofollow noreferrer\"><code>LocalTime#isBefore(LocalTime)</code></a></li>\n</ul>\n<p>The important one is the <code>LocalTime::isBefore</code> method. Look at what it says.</p>\n<p><em>Checks if this time is before the specified time. The comparison is based on the time-line position of the time <strong>within a day</strong>.</em></p>\n<p>That bolded part isn't completely clear, but what that means is that, it is going to ask if <code>23</code> is before <code>0</code> <em><strong>on the same day</strong></em>.</p>\n<p>More specifically, if May 18 23:00 is before May 18 00:00. As you can see, the answer is false because you accidentally asked for the same day.</p>\n<p>You need to use a different tool, likely <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/time/LocalDateTime.html\" rel=\"nofollow noreferrer\"><code>LocalDateTime</code></a>, to be able to solve this problem. Let me know if you have trouble using that tool instead and I can post an example.</p>\n"},{"comments":[{"comment_id":134511333,"body":"Thank you for this answer. Im marking this as accepted since it didn&#39;t require me to use LocalDateTime. The POJO I am working on is used heavily throughout our library and it is already using LocalTimes for my situation :)"}],"answer_id":76277769,"body":"<p>According to the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalTime.html#isAfter(java.time.LocalTime)\" rel=\"noreferrer\">documentation</a>, for both <code>isBefore</code> and <code>isAfter</code>:</p>\n<blockquote>\n<p>The comparison is based on the time-line position of the time within a day.</p>\n</blockquote>\n<p>These methods assume that the times you are comparing are on the same day, so you cannot use these to check if the period &quot;bleeds into&quot; the second day.</p>\n<p>Assuming a shift must be less than 24 hours, you can check if it &quot;bleeds into&quot; the second day by checking if the end is before the start. This takes advantage of this &quot;assuming the two times are in the same day&quot; characteristic of <code>isBefore</code>. If <code>isBefore</code> thinks that <code>endTime</code> is before <code>startTime</code>, that must mean <code>endTime</code> is in the next day.</p>\n<pre><code>endTime.isBefore(startTime)\n</code></pre>\n"},{"comments":[{"comment_id":134511375,"body":"Actually, that would be <code>ZonedDateTime</code> rather than <code>LocalDateTime</code>. The first accounts for time zone rules with temporal anomalies such as Daylight Saving Time (DST) , while the second lacks any concept of time zone or offset-from-UTC."}],"answer_id":76277780,"body":"<p><code>LocalTime</code> only knows the time. It doesn't know anything about the date. <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalTime.html#MIDNIGHT\" rel=\"nofollow noreferrer\">LocalTime.MIDNIGHT</a> is <code>The time of midnight at the start of the day, '00:00'.</code>. That's the reason why your code is working like that.</p>\n<pre><code>startTime.isBefore(LocalTime.MIDNIGHT) == false\n</code></pre>\n<p>because <code>23:00</code> is after <code>00:00</code>.</p>\n<p>In the case of</p>\n<pre><code>endTime.isAfter(LocalTime.MIDNIGHT)) == true\n</code></pre>\n<p>because <code>7:00</code> is after <code>00:00</code></p>\n<p>You should consider to use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html\" rel=\"nofollow noreferrer\">LocalDateTime</a></p>\n"}],"last_activity_date":1684384825,"question_id":76277716,"body":"<p>I am trying to determine if a particular LocalTime is before Midnight. Background basically I want to know if a shift's start/end time bleed over into the next day. For example if a shift was scheduled for 23:00 - 07:00, then this would be considered bleeding into the next day since the end time is after midnight and the start time is before.</p>\n<p>I began to implement this by seeing if the start time is before midnight, and seeing if the end time is after midnight. This would meet the criteria of being overlapping into the next day.</p>\n<p>In Java my code looks like this</p>\n<pre><code>public boolean checkTime() {\n        \n        final LocalTime startTime = LocalTime.parse(&quot;23:00&quot;);\n        final LocalTime endTime = LocalTime.parse(&quot;07:00&quot;);\n\n        return startTime.isBefore(LocalTime.MIDNIGHT) //false\n                &amp;&amp; endTime.isAfter(LocalTime.MIDNIGHT)) //true;\n}\n</code></pre>\n<p>Why does it return false for the start time being not before midnight? Isn't the time of 23:00 one hour before midnight? I would expect this to return true. Maybe I am misunderstanding something? I am working with LocalTimes and not using LocalDateTimes</p>\n"},{"answers":[{"answer_id":76277785,"body":"<p>The expression <code>res + backTrace(n, row + 1, columns, record1, record2)</code> is evaluated left to right. This means the value of <code>res</code> is read <em>before</em> calling <code>backTrace</code>, and doesn’t reflect the change to the value that happens within that method call.</p>\n<p>If you reverse the order of arguments to <code>backTrace(n, row + 1, columns, record1, record2) + res</code>, this avoids the problem, however this may still make the code hard to understand. Most people expect addition to be commutative. This assumption is violated in code where evaluation of one of the operands affects the value of the other. It would be clearer to rewrite the method to avoid using the non-local variable <code>res</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Solution {\n    public static void main(String[] args) throws IOException {\n        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));\n        String line;\n        while ((line = in.readLine()) != null) {\n            int n = Integer.parseInt(line);\n\n            int ret = new Solution().totalNQueens(n);\n\n            String out = String.valueOf(ret);\n\n            System.out.print(out);\n        }\n    }\n\n    public int totalNQueens(int n) {\n        Set&lt;Integer&gt; columns = new HashSet&lt;Integer&gt;();\n        Set&lt;Integer&gt; record1 = new HashSet&lt;Integer&gt;();\n        Set&lt;Integer&gt; record2 = new HashSet&lt;Integer&gt;();\n        return backTrace(n, 0, columns, record1, record2);\n    }\n\n    private int backTrace(int n, int row, Set&lt;Integer&gt; columns, Set&lt;Integer&gt; record1, Set&lt;Integer&gt; record2) {\n        if (n == row) {\n            return 1;\n        }\n        int res = 0;\n        for (int i = 0; i &lt; n; i++) {\n            if (columns.contains(i)) {\n                continue;\n            }\n            int check1 = row - i;\n            if (record1.contains(check1)) {\n                continue;\n            }\n            int check2 = row + i;\n            if (record2.contains(check2)) {\n                continue;\n            }\n            columns.add(i);\n            record1.add(check1);\n            record2.add(check2);\n            System.out.println(&quot;res start:&quot; + res);\n            res += backTrace(n, row + 1, columns, record1, record2);\n            System.out.println(&quot;res end:&quot; + res);\n            columns.remove(i);\n            record1.remove(check1);\n            record2.remove(check2);\n        }\n        return res;\n    }\n}\n</code></pre>\n"}],"last_activity_date":1684384816,"question_id":76277514,"body":"<p>I have the code work with iteration in a single thread enviorment:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.HashSet;\nimport java.util.Set;\n\nclass Solution {\n    int res = 0;\n\n    public static void main(String[] args) throws IOException {\n        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));\n        String line;\n        while ((line = in.readLine()) != null) {\n            int n = Integer.parseInt(line);\n\n            int ret = new Solution().totalNQueens(n);\n\n            String out = String.valueOf(ret);\n\n            System.out.print(out);\n        }\n    }\n\n    public int totalNQueens(int n) {\n        Set&lt;Integer&gt; columns = new HashSet&lt;Integer&gt;();\n        Set&lt;Integer&gt; record1 = new HashSet&lt;Integer&gt;();\n        Set&lt;Integer&gt; record2 = new HashSet&lt;Integer&gt;();\n        backTrace(n, 0, columns, record1, record2);\n        return res;\n    }\n\n    private int backTrace(int n, int row, Set&lt;Integer&gt; columns, Set&lt;Integer&gt; record1, Set&lt;Integer&gt; record2) {\n        if (n == row) {\n            return 1;\n        }\n        for (int i = 0; i &lt; n; i++) {\n            if (columns.contains(i)) {\n                continue;\n            }\n            int check1 = row - i;\n            if (record1.contains(check1)) {\n                continue;\n            }\n            int check2 = row + i;\n            if (record2.contains(check2)) {\n                continue;\n            }\n            columns.add(i);\n            record1.add(check1);\n            record2.add(check2);\n            System.out.println(&quot;res start:&quot; + res);\n            res = res + backTrace(n, row + 1, columns, record1, record2);\n            System.out.println(&quot;res end:&quot; + res);\n            columns.remove(i);\n            record1.remove(check1);\n            record2.remove(check2);\n        }\n        return 0;\n    }\n}\n</code></pre>\n<p>the result of the code is below, and it seems the <code>res</code> reset when <code>res = res + backTrace(n, row + 1, columns, record1, record2);</code></p>\n<pre><code>res start:0\nres start:0\nres end:0\nres start:0\nres start:0\nres end:0\nres end:0\nres end:0\nres start:0\nres start:0\nres start:0\nres start:0\nres end:1\nres end:0\nres end:0\nres end:0\nres start:0\nres start:0\nres start:0\nres start:0\n</code></pre>\n<p>and when we change the code, let a new variable to save the result of backTrace, and it works fine.</p>\n<pre><code>package com.nbp.cdncp.vpe.api.controller;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.HashSet;\nimport java.util.Set;\n\nclass Solution {\n    int res = 0;\n\n    public static void main(String[] args) throws IOException {\n        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));\n        String line;\n        while ((line = in.readLine()) != null) {\n            int n = Integer.parseInt(line);\n\n            int ret = new Solution().totalNQueens(n);\n\n            String out = String.valueOf(ret);\n\n            System.out.print(out);\n        }\n    }\n\n    public int totalNQueens(int n) {\n        Set&lt;Integer&gt; columns = new HashSet&lt;Integer&gt;();\n        Set&lt;Integer&gt; record1 = new HashSet&lt;Integer&gt;();\n        Set&lt;Integer&gt; record2 = new HashSet&lt;Integer&gt;();\n        backTrace(n, 0, columns, record1, record2);\n        return res;\n    }\n\n    private int backTrace(int n, int row, Set&lt;Integer&gt; columns, Set&lt;Integer&gt; record1, Set&lt;Integer&gt; record2) {\n        if (n == row) {\n            return 1;\n        }\n        for (int i = 0; i &lt; n; i++) {\n            if (columns.contains(i)) {\n                continue;\n            }\n            int check1 = row - i;\n            if (record1.contains(check1)) {\n                continue;\n            }\n            int check2 = row + i;\n            if (record2.contains(check2)) {\n                continue;\n            }\n            columns.add(i);\n            record1.add(check1);\n            record2.add(check2);\n            System.out.println(&quot;res start:&quot; + res);\n            var a = backTrace(n, row + 1, columns, record1, record2);\n            res += a;\n            System.out.println(&quot;res end:&quot; + res);\n            columns.remove(i);\n            record1.remove(check1);\n            record2.remove(check2);\n        }\n        return 0;\n    }\n}\n</code></pre>\n<p>the result:</p>\n<pre><code>res start:0\nres start:0\nres end:0\nres start:0\nres start:0\nres end:0\nres end:0\nres end:0\nres start:0\nres start:0\nres start:0\nres start:0\nres end:1\nres end:1\nres end:1\nres end:1\nres start:1\nres start:1\nres start:1\nres start:1\nres end:2\nres end:2\nres end:2\nres end:2\nres start:2\nres start:2\nres start:2\nres end:2\nres end:2\nres start:2\nres end:2\nres end:2\n2\n</code></pre>\n<p>Why this happens in a single thread environment</p>\n"},{"comments":[{"comment_id":134509708,"body":"Please read <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> and provide a minimum reproducible example: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>. It is not clear what stdlib is, how the project uses it, how it is built and how it executes."},{"comment_id":134511255,"body":"You use the <a href=\"https://introcs.cs.princeton.edu/java/stdlib/\" rel=\"nofollow noreferrer\">stdlib from princton</a>. Please read the last question in their Q+A."},{"comment_id":134514102,"body":"Did you follow those instructions?"}],"last_activity_date":1684383875,"question_id":76276465,"body":"<p>Are there any fixes/advice? I am having trouble calling the funcions from stdlib, such as stdDraw for files inside of directories (e.g. main in directory1). I am confused since it works just fine in files outside of the directories (e.g. code 3).</p>\n<p>Here is the file structure I am using:</p>\n<ul>\n<li>Project\n<ul>\n<li>lib\n<ul>\n<li>stdlib</li>\n</ul>\n</li>\n<li>src\n<ul>\n<li>directory1\n<ul>\n<li>main</li>\n<li>code0</li>\n</ul>\n</li>\n<li>directory2\n<ul>\n<li>code1</li>\n<li>code2</li>\n</ul>\n</li>\n<li>code 3</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>I tried moving the files to different levels of directories, changing the dependency for stdlib, and setting it as a library instead of a dependency. I expected to be able to call things like StdDraw for files in directories like files that are not in directories.</p>\n<p>Edit: stdlib is the standard library provided by Princeton University. I am mainly using it for StdDraw, but other functions are used as well.</p>\n"},{"comments":[{"comment_id":131918005,"body":"1. I don&#39;t know how would you distinguish the words in the string? Use space char or <code>,</code> ?  2. what is similar words ?"},{"comment_id":134511023,"body":"To complete this task without a mutable list is not very idiomatic, how do you plan on storing the unique set of words?  I guess you can use a string with comma delimited values."}],"answers":[{"comments":[{"comment_id":131914769,"body":"im not allowed to use hashkeys :("}],"answer_id":74743366,"body":"<p>Try this:</p>\n<pre><code>public static int countUniqueWords(String words) {\n    // Add all the words to a list\n    List&lt;String&gt; array = new ArrayList&lt;&gt;();\n    Scanner in = new Scanner(words);\n    while (in.hasNext()) {\n        String s = in.next();\n        array.add(s);\n    }\n\n    // Save per word the amount of duplicates\n    HashMap&lt;String, Integer&gt; listOfWords = new HashMap&lt;&gt;();\n    Iterator&lt;String&gt; itr = array.iterator();\n    while (itr.hasNext()) {\n        String next = itr.next();\n        String prev = listOfWords.getOrDefault(next, 0);\n        listOfWords.put(next, prev + 1);\n    }\n\n    // Grab the size of all known words\n    return listOfWords.size();\n}\n\npublic static void main(String args[]) { \n    int count = countUniqueWords(&quot;A long long time ago, I can still remember&quot;);\n    System.out.println(&quot;The number of unique words: &quot; + count);\n}\n</code></pre>\n"},{"comments":[{"comment_id":131914935,"body":"I&#39;ve only learnt the basics, so Streaming API is out of my coding capability at the moment. Is there a way i can improve my code withdout using Stream?"},{"comment_id":131915010,"body":"You can write your own for-loop of course. But then, you still need a temporary variable (array/list/map/whatever) to keep track of the duplicates. So you will end with something @Naveed Khan wrote!"}],"answer_id":74743407,"body":"<p>Don't force yourself to limited options, and learn the Streaming API. Your question is as simple as:</p>\n<pre><code>public static long countUniqueWords(String str) {\n    var str2 = str.replaceAll(&quot;[^a-zA-Z0-9 ]&quot;, &quot;&quot;).replaceAll(&quot; +&quot;, &quot; &quot;);\n    return Arrays.stream(str2.split(&quot; &quot;))\n            .distinct()\n            .count();\n}\n</code></pre>\n<ol>\n<li><em>[Optional step]</em> Get get rid of all non alphanumeric chars</li>\n<li>Split the string per empty slot</li>\n<li>Remove duplicates</li>\n<li>Add them together</li>\n</ol>\n"},{"answer_id":74743560,"body":"<p>To ignore same words in a string, you can use a combination of the split and distinct methods from the Java Stream API.</p>\n<pre><code>    // Define the input string\nString input = &quot;This is a test string with some repeating words&quot;;\n\n// Split the string into an array of words\nString[] words = input.split(&quot;\\\\s+&quot;);\n\n// Use the distinct method to remove duplicate words from the array\nString[] distinctWords = Arrays.stream(words).distinct().toArray(String[]::new);\n\n// Print the distinct words\nSystem.out.println(Arrays.toString(distinctWords));\n</code></pre>\n"},{"answer_id":76277662,"body":"<p>I got this to work, not sure about its scalability, though.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int countUniqueWords(String str) {\n    String set = &quot;&quot;;\n    boolean found;\n    for (String wordA : str.split(&quot;\\\\s+&quot;)) {\n        if (set.isEmpty())\n            set = wordA;\n        else {\n            found = false;\n            for (String wordB : set.split(&quot;\\\\s+&quot;)) {\n                if (wordB.equalsIgnoreCase(wordA)) {\n                    found = true;\n                    break;\n                }\n            }\n            if (!found) set += &quot; &quot; + wordA;\n        }\n    }\n    return set.split(&quot; &quot;).length;\n}\n</code></pre>\n<p>Ideally, you want to use a <code>Pattern</code> and <code>Matcher</code>, so you can use word-boundary and word capture, <code>\\b([\\w&amp;&amp;[^\\d]]+)\\b</code>.<br />\nThis would remove any words that may contain numbers, and negate any isolated punctuation marks from being counted.</p>\n"}],"last_activity_date":1684383394,"question_id":74743161,"body":"<p>I want to find how many words there are in a string but ignore the similar words in it.</p>\n<p>For example the main method should return 8 insetad of 9.</p>\n<p>I want it to be a method which takes one parameter s of type String and returns an int value. And im only allowed to use the bacics,<strong>so no HashMaps, ArrayLists, only charAt, length, or substring and using loops and if statemens are allowed</strong>.</p>\n<pre><code>public static void main(String[] args) {\n\ncountUniqueWords(&quot;A long long time ago, I can still remember&quot;);\n\npublic static int countUniqueWords(String str) {\n    char[] sentence = str.toCharArray();\n    boolean inWord = false;\n    int wordCt = 0;\n    for (char c : sentence) {\n        if (c &gt;= 'a' &amp;&amp; c &lt;= 'z' || c &gt;= 'A' &amp;&amp; c &lt;= 'Z') {\n            if (!inWord) {\n                wordCt++;\n                inWord = true;\n            }\n        } else {\n            inWord = false;\n        }\n    }\n    return wordCt;\n}\n```\n</code></pre>\n"},{"comments":[{"comment_id":70989037,"body":"That is what SharedPreferences are for. They&#39;re written to the filesystem."}],"answers":[{"answer_id":41903503,"body":"<p>You could save the results in SharedPreferences every time they are updated. It will be stored there even if your app is killed. You could check for the values from SharedPreferences each time you start the activity again and set the checks accordingly.</p>\n\n<p>Setting up the SharedPreference:</p>\n\n<pre><code>SharedPreferences sharedPref = getActivity().getPreferences(Context.MODE_PRIVATE);\n</code></pre>\n\n<p>Updating or editing sharedPreferences, you may add this to whenever you update the check buttons or during your onClick:</p>\n\n<pre><code>SharedPreferences sharedPref = getActivity().getPreferences(Context.MODE_PRIVATE);\nSharedPreferences.Editor editor = sharedPref.edit();\neditor.putBoolean(\"checkBox1\", true);\neditor.commit();\n</code></pre>\n\n<p>You may read from sharedPreference:</p>\n\n<pre><code>Boolean defaultValue = sharedPref.getBoolean(\"checkBox1\", defaultValue);\n</code></pre>\n\n<p>You can also look at the Android <a href=\"https://developer.android.com/training/basics/data-storage/shared-preferences.html#ReadSharedPreference\" rel=\"nofollow noreferrer\">documentation</a> or this <a href=\"https://www.tutorialspoint.com/android/android_shared_preferences.htm\" rel=\"nofollow noreferrer\">tutorial</a>.</p>\n"},{"comments":[{"comment_id":71017992,"body":"Can you please explain more or show me how to add it to my code I can&#39;t seem to make it work...thanks"},{"comment_id":71022087,"body":"This should work:  In create method after setContentView:   <code>final SharedPreferences sharedPref = RemindersActivity.this.getPreferences(Context.MODE_PRIVATE);  boolean isMyValueChecked = sharedPref.getBoolean(&quot;checkbox&quot;, false);  CheckBox checbox = (CheckBox) findViewById(R.id.checkbox_alert);  checbox.setChecked(isMyValueChecked);</code>  in checkbox_alert.setOnClickListener:   <code>SharedPreferences.Editor editor = sharedPref.edit();  editor.putBoolean(&quot;checkbox&quot;, ((CheckBox) view).isChecked());  editor.commit();</code> On create loading value from preferences, on click saving actual value."}],"answer_id":41903505,"body":"<p>Use shared preferences for this:</p>\n\n<p>To write data to shared preferences use for example:</p>\n\n<pre><code>SharedPreferences sharedPref = activity.getPreferences(Context.MODE_PRIVATE);\nSharedPreferences.Editor editor = sharedPref.edit();\neditor.putBoolean(\"checkbox\", checkbox.isChecked())); //first value -preference name, secend value -preference value\neditor.commit();\n</code></pre>\n\n<p>To read from shared preferences:</p>\n\n<pre><code>SharedPreferences sharedPref = activity.getPreferences(Context.MODE_PRIVATE);\nboolean isMyValueChecked = sharedPref.getBoolean(\"checkbox\", false);//first value -preference name, secend value - default value if checbox not found\n</code></pre>\n"},{"answer_id":41903673,"body":"<p>You have to use SharedPreferences as Micha, skbrhmn and Sabriael advise you to do. Follow the guide in the link below to help you how to do it.</p>\n\n<p><a href=\"https://developer.android.com/training/basics/data-storage/shared-preferences.html\" rel=\"nofollow noreferrer\">https://developer.android.com/training/basics/data-storage/shared-preferences.html</a></p>\n\n<p>more details about SharedPreferences interface...</p>\n\n<p><a href=\"https://developer.android.com/reference/android/content/SharedPreferences.html\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/content/SharedPreferences.html</a></p>\n"},{"answer_id":55665228,"body":"<p>Here you can see my complete Java coding for this issue:\n    In onCreate Method() put these codes and your problem will get solved. My activity here is called SettingsActivity.</p>\n\n<pre><code>    final SharedPreferences sharedPref = SettingsActivity.this.getPreferences(Context.MODE_PRIVATE);\n    boolean isMyValueChecked = sharedPref.getBoolean(\"checkbox\", false);\n\n            CheckBox checkBox = (CheckBox) findViewById(R.id.chk_box_music);\n    checkBox.setChecked(isMyValueChecked);\n    checkBox.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            SharedPreferences.Editor editor = sharedPref.edit();\n            editor.putBoolean(\"checkbox\", ((CheckBox) view).isChecked());\n            editor.commit();\n            if(checkBox.isChecked()){\n                startService(new Intent(SettingsActivity.this, MyService.class));\n            }else{\n                stopService(new Intent(SettingsActivity.this, MyService.class));\n            }\n        }\n    });\n</code></pre>\n"}],"last_activity_date":1684383217,"question_id":41903311,"body":"<p>Hello can anyone please help on how to save my checkbox state, when i leave the Activity, refresh or close the app my ckeckbox resets to unchecked. I have try to search around but i unable to make it save, below is my code</p>\n\n<pre><code>    package com.example.android.xb;\n\nimport android.app.AlarmManager;\nimport android.app.Dialog;\nimport android.app.PendingIntent;\nimport android.app.TimePickerDialog;\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.support.v7.app.AppCompatActivity;\nimport android.view.View;\nimport android.widget.CheckBox;\nimport android.widget.TextView;\nimport android.widget.TimePicker;\n\nimport java.util.Calendar;\n\npublic class RemindersActivity extends AppCompatActivity {\n\n    Calendar calender = Calendar.getInstance();\n\n    private TextView timePicker;\n\n\n    private int pHour;\n    private int pMinute;\n\n    static final int TIME_DIALOG_ID = 0;\n\n    private TimePickerDialog.OnTimeSetListener mTimeSetListener =\n            new TimePickerDialog.OnTimeSetListener() {\n                @Override\n                public void onTimeSet(TimePicker view, int hourOfDay, int minute) {\n\n                    pHour = hourOfDay;\n                    pMinute = minute;\n                    updateDisplay();\n\n                }\n            };\n\n    private void updateDisplay() {\n        timePicker.setText(new StringBuilder()\n                .append(pad(pHour)).append(\":\")\n                .append(pad(pMinute)));\n    }\n\n    private static String pad(int c) {\n        if (c &gt;= 10)\n            return String.valueOf(c);\n        else\n            return \"0\" + String.valueOf(c);\n    }\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_reminders);\n\n\n        // Display for up button\n        getSupportActionBar().setDisplayHomeAsUpEnabled(true);\n\n        // Setting up the onlick listener\n        findViewById(R.id.checkbox_alert).setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n\n                if (((CheckBox) view).isChecked()) {\n\n\n                    // Time setup for notification to pop up\n                    calender.set(Calendar.HOUR_OF_DAY, pHour);\n                    calender.set(Calendar.MINUTE, pMinute);\n\n                    // Setting up the notification on checkbox checked\n                    Intent intent = new Intent(getApplicationContext(), NotificationReceiver.class);\n\n                    PendingIntent pendingIntent = PendingIntent.getBroadcast(getApplicationContext(), 100,\n                            intent, PendingIntent.FLAG_UPDATE_CURRENT);\n\n                    AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);\n                    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calender.getTimeInMillis(),\n                            alarmManager.INTERVAL_DAY, pendingIntent);\n\n\n                }\n            }\n\n\n        });\n\n        // Setting up the onclick listener for time textView\n        timePicker = (TextView) findViewById(R.id.time_set);\n\n        timePicker.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                showDialog(TIME_DIALOG_ID);\n            }\n        });\n\n        final Calendar calendar = Calendar.getInstance();\n        pHour = calendar.get(Calendar.HOUR_OF_DAY);\n        pMinute = calendar.get(Calendar.MINUTE);\n\n        updateDisplay();\n\n    }\n\n    @Override\n    protected Dialog onCreateDialog(int id) {\n        switch (id) {\n            case TIME_DIALOG_ID:\n                return new TimePickerDialog(this, mTimeSetListener, pHour, pMinute, false);\n\n        }\n        return null;\n    }\n}\n</code></pre>\n"},{"last_activity_date":1684383152,"question_id":76277626,"body":"<p>I am working on an Android Studio project in which I get data from an API. I tried to get the data when I insert login information and get <code>userId</code> invisible, for example I want to put it in <code>Integer</code> instead of <code>TextView</code>. I have used <code>retrofit</code> to get data from the web API. When I tried to get the <code>userId</code>, I got an error with <code>int As Null value</code>. How can I solve it?</p>\n<p>My web API code:</p>\n<pre><code>[HttpGet]\n        public IHttpActionResult getUser(string userName, string passWord)\n        {\n            List&lt;Person&gt; api = new List&lt;Person&gt;();\n            SqlConnection mainconn = new SqlConnection(ConfigurationManager.ConnectionStrings[&quot;MyConn&quot;].ConnectionString);\n            SqlCommand da = new SqlCommand(&quot;Select UserID, username, password from tblLogin where username = '&quot; + userName + &quot;' and password = '&quot; + passWord + &quot;'&quot;, mainconn);\n            mainconn.Open();\n            SqlDataReader dr = da.ExecuteReader();\n            while(dr.Read())\n            {\n                api.Add(new Person()\n                {\n                    UserID = Convert.ToDecimal(dr.GetValue(0)),\n                    username = Convert.ToString(dr.GetValue(1)),\n                    password = Convert.ToString(dr.GetValue(2))\n                });\n            }\n            var Response = new ApiResults\n            {\n                Results = api\n            };\n            if (api.Count &gt; 0)\n            {\n                return Ok(Response);\n            }\n            else\n            {\n                return Ok(&quot;No Data Found&quot;);\n            };\n        }\n</code></pre>\n<p>My Java code:</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    Button btnLogin;\n    EditText edUsername, edPassword;\n    TextView txtPersonEye;\n    Integer id;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        btnLogin = findViewById(R.id.btnLogin);\n        edUsername = findViewById(R.id.etUsername);\n        edPassword = findViewById(R.id.etPassword);\n\n        btnLogin.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                if(TextUtils.isEmpty(edUsername.getText().toString()) || TextUtils.isEmpty(edPassword.getText().toString())) {\n                    String message = &quot;Please Insert Username and Password&quot;;\n                    Toast.makeText(MainActivity.this,message,Toast.LENGTH_LONG).show();\n                } else {\n                    LoginRequest loginRequest = new LoginRequest();\n                    loginRequest.setUsername(edUsername.getText().toString());\n                    loginRequest.setPassword(edPassword.getText().toString());\n                    loginUser(loginRequest);\n                }\n            }\n        });\n    }\n\nLoginRequest loginRequest = new LoginRequest();\n        id = loginRequest.setUserId(loginRequest.getUserId());\n        IdGet(loginRequest);\n\n    public void IdGet(LoginRequest loginRequest)\n    {\n        Call&lt;LoginResponse&gt; loginResponseCall = ApiClient.getService().PersonEyeGet(id);\n        loginResponseCall.enqueue(new Callback&lt;LoginResponse&gt;() {\n            @Override\n            public void onResponse(Call&lt;LoginResponse&gt; call, Response&lt;LoginResponse&gt; response) {\n                if(response.isSuccessful()) {\n                    LoginResponse loginResponse = response.body();\n                }\n                else\n                {\n                    String message = &quot;No User Found&quot;;\n                    Toast.makeText(Visitor.this, message, Toast.LENGTH_LONG).show();\n                }\n            }\n\n            @Override\n            public void onFailure(Call&lt;LoginResponse&gt; call, Throwable t) {\n                String message = &quot;User Data Missing&quot;;\n                Toast.makeText(Visitor.this, message, Toast.LENGTH_LONG).show();\n            }\n        });\n    }\n}\n</code></pre>\n<p>Login request:</p>\n<pre><code>public class LoginRequest {\n\n    public Integer UserID;\n    private String username;\n    private String password;\n\n    public Integer getUserID() {\n        return UserID;\n    }\n\n    public void setUserID(Integer userID) {\n        UserID = userID;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n}\n</code></pre>\n<p>Login response:</p>\n<pre><code>public class LoginResponse implements Serializable {\n\n    private Integer UserID;\n    private String username;\n    private List&lt;LoginRequest&gt; loginRequests = null;\n\n    public Integer getUserID() {\n        return UserID;\n    }\n\n    public void setUserID(Integer userID) {\n        UserID = userID;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public List&lt;LoginRequest&gt; getLoginRequests(){\n        return loginRequests;\n    }\n\n    public void setLoginRequests(List&lt;LoginRequest&gt; loginRequests) {\n        this.loginRequests = loginRequests;\n    }\n}\n</code></pre>\n<p>ApiClient:</p>\n<pre><code>public class ApiClient {\n    public static Retrofit getRetrofit() {\n\n        HttpLoggingInterceptor httpLoggingInterceptor = new HttpLoggingInterceptor();\n        httpLoggingInterceptor.setLevel(HttpLoggingInterceptor.Level.BODY);\n\n        OkHttpClient okHttpClient = new OkHttpClient.Builder().addInterceptor(httpLoggingInterceptor).build();\n\n\n        Retrofit retrofit = new Retrofit.Builder()\n                .addConverterFactory(GsonConverterFactory.create())\n                .baseUrl(&quot;http://XXX.XX.XXX.X/webapi/&quot;)\n                .client(okHttpClient)\n                .build();\n\n        return retrofit;\n    }\n\n    public static UserService getService() {\n        UserService userService = getRetrofit().create(UserService.class);\n\n        return userService;\n    }\n}\n</code></pre>\n<p>Any help in this matter is welcome.</p>\n"},{"comments":[{"comment_id":134510995,"body":"Please do not use screenshots for text information in Stackoverflow."},{"comment_id":134511004,"body":"Maven 3.5.2 is an old version. Why do you want to download it? Try installing the current version directly from Apache <a href=\"https://maven.apache.org/download.cgi\" rel=\"nofollow noreferrer\">maven.apache.org/download.cgi</a>"},{"comment_id":134511082,"body":"@aled Sorry, I followed the instructions in this document at AWS: Prerequisites on Amazon Linux EC2 <a href=\"https://docs.aws.amazon.com/neptune/latest/userguide/iam-auth-connect-prerq.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/neptune/latest/userguide/&hellip;</a>. I want to get the latest version."},{"comment_id":134511115,"body":"Those are old instructions that also mention java 8bbut you are installing java 17."},{"comment_id":134515380,"body":"Please install a more recent version of Maven 3.2.5 is of 2014!! Also 3.5.2 is too old... (<a href=\"https://maven.apache.org/docs/history.html\" rel=\"nofollow noreferrer\">maven.apache.org/docs/history.html</a>) ... download it from Maven page as already mentioned or use sdkman.io instead. The question is why do you need Maven on an EC2 ?? Build locally or on Github/Gitlab and deploy your app to EC2..."},{"comment_id":134524089,"body":"@khmarbaise I have installed version 3.9.2.  Because I wrote a script to automatically build and deploy my application instead of Jenkins. The EC2 server is the only place where you can access the source code and get the latest version."},{"comment_id":134540503,"body":"<code>The EC2 server is the only place where you can access the source code and get the latest version. </code> that sounds a bit weird. If that&#39;s the way you have to make the configuration to work with that environment... Why not using a Jenkins or alike to do that?"}],"last_activity_date":1684382532,"question_id":76277580,"body":"<p>I'm installing Maven on an EC2 server with JDK 17.</p>\n<pre><code>sudo wget http://repos.fedorapeople.org/repos/dchen/apache-maven/epel-apache-maven.repo -O /etc/yum.repos.d/epel-apache-maven.repo\nsudo sed -i s/\\$releasever/6/g /etc/yum.repos.d/epel-apache-maven.repo\n\nsudo yum install -y apache-maven\n</code></pre>\n<p>But when I install it, I only get version 3.2.5 instead of 3.5.2.\nThe error message is:</p>\n<blockquote>\n<p>Problem: cannot install the best candidate for the job</p>\n<ul>\n<li>nothing provides java-1.7.0-openjdk-devel needed by apache-maven-3.5.2-1.el6.noarch</li>\n</ul>\n</blockquote>\n<pre><code>sudo yum install -y apache-maven\nmaven from apache foundation.                                       183  B/s | 4.0 kB     00:22\nDependencies resolved.\n\n Problem: cannot install the best candidate for the job\n  - nothing provides java-1.7.0-openjdk-devel needed by apache-maven-3.5.2-1.el6.noarch\n====================================================================================================\n Package                          Arch      Version                      Repository            Size\n====================================================================================================\nInstalling:\n apache-maven                     noarch    3.2.5-1.el6                  epel-apache-maven    7.5 M\nInstalling dependencies:\n java-17-amazon-corretto-devel    x86_64    1:17.0.7+7-1.amzn2023.1      amazonlinux          149 k\nSkipping packages with broken dependencies:\n apache-maven                     noarch    3.5.2-1.el6                  epel-apache-maven    8.1 M\n\nTransaction Summary\n====================================================================================================\nInstall  2 Packages\nSkip     1 Package\n\nTotal download size: 7.7 M\nInstalled size: 10 M\nDownloading Packages:\n(1/2): java-17-amazon-corretto-devel-17.0.7+7-1.amzn2023.1.x86_64.r  29 kB/s | 149 kB     00:05\n(2/2): apache-maven-3.2.5-1.el6.noarch.rpm                          578 kB/s | 7.5 MB     00:13\n----------------------------------------------------------------------------------------------------\nTotal                                                               426 kB/s | 7.7 MB     00:18\nRunning transaction check\nTransaction check succeeded.\nRunning transaction test\nTransaction test succeeded.\nRunning transaction\n  Preparing        :                                                                            1/1\n  Installing       : java-17-amazon-corretto-devel-1:17.0.7+7-1.amzn2023.1.x86_64               1/2\n  Running scriptlet: java-17-amazon-corretto-devel-1:17.0.7+7-1.amzn2023.1.x86_64               1/2\n  Installing       : apache-maven-3.2.5-1.el6.noarch                                            2/2\n  Running scriptlet: apache-maven-3.2.5-1.el6.noarch                                            2/2\n  Verifying        : java-17-amazon-corretto-devel-1:17.0.7+7-1.amzn2023.1.x86_64               1/2\n  Verifying        : apache-maven-3.2.5-1.el6.noarch                                            2/2\n\nInstalled:\n  apache-maven-3.2.5-1.el6.noarch    java-17-amazon-corretto-devel-1:17.0.7+7-1.amzn2023.1.x86_64\nSkipped:\n  apache-maven-3.5.2-1.el6.noarch\n\nComplete!\n</code></pre>\n<p>Can you help me to install the correct 3.5.2 version?</p>\n"},{"comments":[{"comment_id":134511637,"body":"Does Tomcat throw any exceptions?"},{"comment_id":134512492,"body":"You need to encode the URL before triggering the API Request."}],"last_activity_date":1684382331,"question_id":76277639,"body":"<p>I have Implemented cloud API Gateway with eureka service discovery.</p>\n<p>When I am calling my REST end point using API Gateway URL with query parameter including &quot;^&quot; special character, I am getting <strong>400 Bad Request</strong> Response.\n<em>http://localhost:8080/gateway/api/v1/test?value=ABC^XYZ</em></p>\n<p>If I am calling direct API end point without API Gateway its working fine\n<em>http://localhost:8080/api/v1/test?value=ABC^XYZ</em></p>\n<p>In property file I am using below setting in both projects\n<strong>server.tomcat.relaxed-query-char=^</strong></p>\n<p>Please help me what is an exact issue.</p>\n<p>Thanks</p>\n"},{"answers":[{"comments":[{"comment_id":134510472,"body":"I have already tried that last night but I am still getting the same error"},{"comment_id":134510934,"body":"I have edited my answer with the changes I had suggested. Please check the answer again. It has the output also. It should work for you also."}],"answer_id":76274921,"body":"<p>One mistake is, in the method addProject(), you are opening the database in the Read mode (getReadableDatabase()). It has to be in the Write mode getWritableDatabase() for inserting data into table. Also, after you insert the data, make it a point to close it by calling the close() method.</p>\n<p>I tried running this code snippet with the changes I suggested, on my laptop and its working very fine. Its creating the database with 2 tables Users and Project. Also, its inserting the data into the Project table.  I have attached the image of the output (database inspector) where you can clearly see the 2 tables and the new record inserted into Project table. You can check it out.</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\nprivate EditText projectName, description, team, projectManager;\nButton done;\nuserDB db;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n    projectName = findViewById(R.id.projectName);\n    description = findViewById(R.id.description);\n    team = findViewById(R.id.team);\n    projectManager = findViewById(R.id.projectManager);\n    done = findViewById(R.id.button);\n\n    done.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View view) {\n            String projectname = projectName.getText().toString().trim();\n            String desc = description.getText().toString().trim();\n            String Team = team.getText().toString().trim();\n            String projectmanage = projectManager.getText().toString().trim();\n\n            if(projectname.equals(&quot;&quot;) || desc.equals(&quot;&quot;) || Team.equals(&quot;&quot;) ||\n                    projectmanage.equals(&quot;&quot;)){\n                Toast.makeText(MainActivity.this, &quot;All Fields are Required&quot;, Toast.LENGTH_SHORT).show();\n            }else{\n                db = new userDB(MainActivity.this);\n                db.addProject(projectName.getText().toString().trim(),\n                        description.getText().toString().trim(),\n                        team.getText().toString().trim(),\n                        projectManager.getText().toString().trim());\n\n                db.queryDB();\n            }\n        }\n    });\n}\n</code></pre>\n<p>}</p>\n<p>Here is the userDB class</p>\n<pre><code>public class userDB extends SQLiteOpenHelper {\n\nprivate static final String DATABASE_NAME = &quot;myDB&quot;;\nprivate static final int DATABASE_VERSION = 1;\n\nprivate static final String TABLE_NAME = &quot;Users&quot;;\nprivate static final String COLUMN_ID = &quot;_id&quot;;\nprivate static final String COLUMN_USERNAME = &quot;Username&quot;;\nprivate static final String COLUMN_PASSWORD = &quot;Password&quot;;\n//    Column and table for new project\nprivate static final String PROJECT_TABLE = &quot;Project&quot;;\nprivate static final String COLUMN_id = &quot;id&quot;;\nprivate static final String COLUMN_PROJECT_NAME = &quot;projectName&quot;;\nprivate static final String COLUMN_DESCRIPTION = &quot;description&quot;;\nprivate static final String COLUMN_TEAM = &quot;team&quot;;\nprivate static final String COLUMN_PROJECT_MANAGER = &quot;Project_Manager&quot;;\n\nprivate Context context ;\npublic userDB(Context context) {\n    super(context, DATABASE_NAME, null, DATABASE_VERSION);\n    context = context;\n}\n\n@Override\npublic void onCreate(SQLiteDatabase db) {\n    String query =  &quot;CREATE TABLE &quot; + TABLE_NAME +\n            &quot;(&quot; + COLUMN_ID +&quot; INTEGER PRIMARY KEY AUTOINCREMENT, &quot; +\n            COLUMN_USERNAME + &quot; TEXT, &quot; +\n            COLUMN_PASSWORD + &quot; TEXT);&quot;;\n\n    String project = &quot;CREATE TABLE &quot; + PROJECT_TABLE +\n            &quot;(&quot; + COLUMN_id +&quot; INTEGER PRIMARY KEY AUTOINCREMENT, &quot; +\n            COLUMN_PROJECT_NAME + &quot; TEXT, &quot; +\n            COLUMN_DESCRIPTION + &quot; TEXT, &quot; +\n            COLUMN_TEAM + &quot; TEXT, &quot; +\n            COLUMN_PROJECT_MANAGER + &quot; TEXT);&quot;;\n    db.execSQL(project);\n    db.execSQL(query);\n}\n\n@Override\npublic void onUpgrade(SQLiteDatabase db, int i, int i1) {\n    db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_NAME);\n    db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + PROJECT_TABLE);\n    onCreate(db);\n\n}\n\npublic void addProject(String projectName, String Description, String team, String projectManager){\n    SQLiteDatabase db = this.getWritableDatabase();\n    ContentValues cv = new ContentValues();\n    cv.put(COLUMN_PROJECT_NAME, projectName);\n    cv.put(COLUMN_DESCRIPTION, Description);\n    cv.put(COLUMN_TEAM, team);\n    cv.put(COLUMN_PROJECT_MANAGER, projectManager);\n    long result = db.insert(PROJECT_TABLE, null ,cv);\n    if(result == -1){\n        Toast.makeText(context, &quot;Failed to add new project&quot;, Toast.LENGTH_SHORT).show();\n    }else{\n        Toast.makeText(context, &quot;Successfully added new project&quot;, Toast.LENGTH_SHORT).show();\n    }\n    db.close();\n}\n\npublic void queryDB() {\n    SQLiteDatabase db = this.getReadableDatabase();\n    Cursor cursor = db.query(TABLE_NAME, null, null,\n            null, null, null, null, null);\n    if (cursor != null) {\n        if (cursor.moveToFirst()) {\n            for (int i = 0; i &lt; cursor.getCount(); i++){\n                //TODO: replace numbers with column count constants\n                Toast.makeText(context, cursor.getString(0), Toast.LENGTH_SHORT).show();\n            }\n        }\n        cursor.close();\n    }\n    db.close();\n}\n</code></pre>\n<p>}</p>\n<p>And the output (Database inspector) is here:\n<a href=\"https://i.stack.imgur.com/ZolMd.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZolMd.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"last_activity_date":1684380459,"question_id":76273868,"body":"<p>I made two table one for user and one for project but project is not being made for some reason</p>\n<pre><code>    private static final String TABLE_NAME = &quot;Users&quot;;\n    private static final String COLUMN_ID = &quot;_id&quot;;\n    private static final String COLUMN_USERNAME = &quot;Username&quot;;\n    private static final String COLUMN_PASSWORD = &quot;Password&quot;;\n//    Column and table for new project\n    private static final String PROJECT_TABLE = &quot;Project&quot;;\n    private static final String COLUMN_id = &quot;id&quot;;\n    private static final String COLUMN_PROJECT_NAME = &quot;projectName&quot;;\n    private static final String COLUMN_DESCRIPTION = &quot;description&quot;;\n    private static final String COLUMN_TEAM = &quot;team&quot;;\n    private static final String COLUMN_PROJECT_MANAGER = &quot;Project_Manager&quot;;\n\n    @Override\n    public void onCreate(SQLiteDatabase db) {\n        String query =  &quot;CREATE TABLE &quot; + TABLE_NAME +\n                &quot;(&quot; + COLUMN_ID +&quot; INTEGER PRIMARY KEY AUTOINCREMENT, &quot; +\n                COLUMN_USERNAME + &quot; TEXT, &quot; +\n                COLUMN_PASSWORD + &quot; TEXT);&quot;;\n\n        String project = &quot;CREATE TABLE &quot; + PROJECT_TABLE +\n                &quot;(&quot; + COLUMN_id +&quot; INTEGER PRIMARY KEY AUTOINCREMENT, &quot; +\n                COLUMN_PROJECT_NAME + &quot; TEXT, &quot; +\n                COLUMN_DESCRIPTION + &quot; TEXT, &quot; +\n                COLUMN_TEAM + &quot; TEXT, &quot; +\n                COLUMN_PROJECT_MANAGER + &quot; TEXT);&quot;;\n        db.execSQL(project);\n        db.execSQL(query);\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int i, int i1) {\n        db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_NAME);\n        db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + PROJECT_TABLE);\n        onCreate(db);\n\n    }\n\n    void addProject(String projectName, String Description, String team, String projectManager){\n        SQLiteDatabase db = this.getReadableDatabase();\n        ContentValues cv = new ContentValues();\n        cv.put(COLUMN_PROJECT_NAME, projectName);\n        cv.put(COLUMN_DESCRIPTION, Description);\n        cv.put(COLUMN_TEAM, team);\n        cv.put(COLUMN_PROJECT_MANAGER, projectManager);\n        long result = db.insert(PROJECT_TABLE, null ,cv);\n        if(result == -1){\n            Toast.makeText(context, &quot;Failed to add new project&quot;, Toast.LENGTH_SHORT).show();\n        }else{\n            Toast.makeText(context, &quot;Successfully added new project&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n</code></pre>\n<p>in my project java class I thought that maybe the data is not properly being inserted to the database so what I did was in the db.addProject I coded it to get the strings and text but it still didnt work</p>\n<pre><code>\npublic class Board extends AppCompatActivity {\n    private EditText projectName, description, team, projectManager;\n    Button done;\n    userDB db;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_board);\n        projectName = findViewById(R.id.projectName);\n        description = findViewById(R.id.description);\n        team = findViewById(R.id.team);\n        projectManager = findViewById(R.id.projectManager);\n        done = findViewById(R.id.button);\n\n        done.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                String projectname = projectName.getText().toString().trim();\n                String desc = description.getText().toString().trim();\n                String Team = team.getText().toString().trim();\n                String projectmanage = projectManager.getText().toString().trim();\n\n                if(projectname.equals(&quot;&quot;) || desc.equals(&quot;&quot;) || Team.equals(&quot;&quot;) ||\n                projectmanage.equals(&quot;&quot;)){\n                    Toast.makeText(Board.this, &quot;All Fields are Required&quot;, Toast.LENGTH_SHORT).show();\n                }else{\n                    db = new userDB(Board.this);\n                    db.addProject(projectName.getText().toString().trim(),\n                            description.getText().toString().trim(),\n                            team.getText().toString().trim(),\n                            projectManager.getText().toString().trim());\n                    Intent intent = new Intent(Board.this, MainActivity.class);\n                    startActivity(intent);\n                    finish();\n                }\n            }\n        });\n\n\n    }\n}\n</code></pre>\n<p>I have tried retconning some syntaxes but it all ends up in the same error. I have been stuck with this same error for 3 hrs and I dont know what to do anymore ;-;</p>\n"},{"comments":[{"comment_id":134392792,"body":"<a href=\"https://technojeeves.com/index.php/aliasjava1/77-doesntwork\" rel=\"nofollow noreferrer\">We need proper info</a>"},{"comment_id":134394883,"body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"answer_id":76277507,"body":"<p>The documentation for <code>ServletRequest.setCharacterEncoding</code> says the following.</p>\n<blockquote>\n<p>... This method must be called prior to reading request parameters or reading input using getReader(). Otherwise, it has no effect.</p>\n</blockquote>\n<p><a href=\"https://docs.oracle.com/javaee/7/api/javax/servlet/ServletRequest.html#setCharacterEncoding-java.lang.String-\" rel=\"nofollow noreferrer\">ServletRequest (JavaEE 7 JavaDoc)</a></p>\n<p>If that doesn't help, you can convert your <code>byte</code> array to a new <code>String</code> object, and supply the charset.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (InputStream stream = new DataInputStream(request.getInputStream())) {\n    byte[] bytes = stream.readAllBytes();\n    String string = new String(bytes, StandardCharsets.UTF_8);\n}\n</code></pre>\n<p>Additionally, you can try using the following, as opposed to explicitly typing &quot;UTF-8&quot;.</p>\n<pre class=\"lang-java prettyprint-override\"><code>request.setCharacterEncoding(StandardCharsets.UTF_8.name());\n</code></pre>\n"}],"last_activity_date":1684380227,"question_id":76207607,"body":"<p>I want to get my parameters from the request (characters with accents) but it doesn't work.</p>\n<p>I tried to user request.setCharacterEncoding(&quot;UTF-8&quot;) but it didn't work either.\nhow can i solve this problem?\nthanks.</p>\n"},{"comments":[{"comment_id":134510836,"body":"You should post your code, or the relevant sections of it at least.  If the code is working your might try <a href=\"https://codereview.stackexchange.com\">Code Review</a>"},{"comment_id":134510901,"body":"@markspace I added some of my code but I don&#39;t think it&#39;s very helpful as it&#39;s a hard coded example, and the final result should be using input equations."},{"comment_id":134510927,"body":"There is a <a href=\"http://www.transylvania-jug.org/archives/5777\" rel=\"nofollow noreferrer\">reply</a> on your linked page which claims a 10x improvement."}],"last_activity_date":1684379989,"question_id":76277419,"body":"<p>I'm coding a project which renders different fractals, and I've got an efficiency issue. I want the user to be able to type a recursion equation in, and have the fractal be rendered. For example, the user could type <em>(3a)^2b</em> into a box with those exact characters where a and b are complex numbers. The user could then pick starting values of a and b, and the program would display the fractal graphs of the escape times when a or b is altered. My issue is this recursive equation needs to be computed billions of times. If the image is 4k then there's around 7 million pixels, each of which the equation is iterated for around 2,000 iterations, there's at least 14 billion iterations of this equation.</p>\n<p>In shorter words, the user types an equation which will be run billions of times. Java primitive data types (doubles) are very fast for these equations, and with multithreading I can get a result in normally under a second. However, if I'm using an equation typed by the user I need to use a math expression evaluator, correct? I can myself code the handling of the complex numbers, so the evaluator only needs to deal with real numbers and simple equations. If it helps, the math functions only need to be instantiated once, and then repeatedly run with altering variables.</p>\n<p>I implemented <a href=\"https://www.javacodegeeks.com/2014/01/how-to-write-one-of-the-fastest-expression-evaluators-in-java.html\" rel=\"nofollow noreferrer\">this</a> evaluator but it produced results around 10 times slower than primitive types (performance also dropped to being 13 times slower when running around 100 billion iterations). Does anyone know of a very efficient java math expression evaluator? Another option I'd like to consider is directly inserting the equation string into the .java file, then compiling this file to be run using primitive types. Is there a possible way to do this? Injection hacks are not a concern as it'll only be myself and friends using this code. I'd appreciate any ideas for this problem.</p>\n<p>Edit: Apparently I'm supposed to include my code, which doesn't make a lot of sense as I have around 8 different classes. Here is the interface which will be implemented by a class which contains the math expression:</p>\n<pre><code>public interface Formula {\npublic int calculateIterations(double x, double y, int iterationLimit, double fixedPointLimit);\n</code></pre>\n<p>}</p>\n<p>Here is a working example using PARSII (the Mandelbrot set):</p>\n<pre><code>public class FunctionTest3 implements Formula {\n\nprivate Scope scope = Scope.create();\nprivate Variable x = scope.getVariable(&quot;x&quot;);\nprivate Variable y = scope.getVariable(&quot;y&quot;);\nprivate Variable a = scope.getVariable(&quot;a&quot;);\nprivate Variable b = scope.getVariable(&quot;b&quot;);\nprivate Expression e1;\nprivate Expression e2;\n\npublic FunctionTest3(){\n    try {\n        e1 = Parser.parse(&quot;x^2 - y^2 + a&quot;, scope);\n        e2 = Parser.parse(&quot;x*y*2 + b&quot;, scope);\n    } catch (ParseException e) {\n        e.printStackTrace();\n    }\n}\n\n@Override\npublic int calculateIterations(double x0, double y0, int iterationLimit, double fixedPointLimit) {\n    x.setValue(x0);\n    y.setValue(y0);\n    a.setValue(x0);\n    b.setValue(y0);\n\n    int iterations = 0;\n\n    double xd = x0;\n    double yd = y0;\n\n    double x_old = xd + 1;\n    double y_old = yd + 1;\n\n    while(xd*xd + yd*yd &lt; 4 &amp;&amp; iterations &lt; iterationLimit){\n        x_old = xd;\n        y_old = yd;\n\n        xd = e1.evaluate();\n        yd = e2.evaluate();\n\n        if(Math.abs(x_old-xd) + Math.abs(y_old-yd) &lt; fixedPointLimit ){\n            iterations = iterationLimit;\n        }\n\n        x.setValue(xd);\n        y.setValue(yd);\n\n        iterations++;\n    }\n\n    return iterations;\n}}\n</code></pre>\n<p>Again, these examples are not very helpful as they are hard coded, but the final goal is to have any possible equation used.</p>\n<p>Here's some images of an old fractal I rendered:\n<a href=\"https://i.stack.imgur.com/fARaD.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fARaD.jpg\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/BlaxB.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BlaxB.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"comment_id":103311402,"body":"<a href=\"https://stackoverflow.com/questions/10474008/how-to-create-data-flow-diagrams-using-java\" title=\"how to create data flow diagrams using java\">stackoverflow.com/questions/10474008/&hellip;</a>"},{"comment_id":103311408,"body":"<a href=\"https://stackoverflow.com/questions/12743107/how-to-create-data-flow-diagram-for-java-source-code\" title=\"how to create data flow diagram for java source code\">stackoverflow.com/questions/12743107/&hellip;</a>"},{"comment_id":103311412,"body":"<a href=\"https://stackoverflow.com/questions/6732408/how-can-i-make-a-flow-diagram-of-my-program\" title=\"how can i make a flow diagram of my program\">stackoverflow.com/questions/6732408/&hellip;</a>"}],"answers":[{"comments":[{"comment_id":134511787,"body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76277441/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"answer_id":76277441,"body":"<p>public class Pregunta1 {</p>\n<pre><code>public static void main(String[] args) {\n\n    Scanner teclado = new Scanner(System.in);\n\n    String alumno;\n    double n1, n2, n3, promedio;\n\n    System.out.print(&quot;Nombre de alumno: &quot;);\n    alumno = teclado.nextLine();\n    System.out.print(&quot;Nota1: &quot;);\n    n1 = Double.parseDouble(teclado.nextLine());\n    System.out.print(&quot;Nota1: &quot;);\n    n2 = Double.parseDouble(teclado.nextLine());\n    System.out.print(&quot;Nota1: &quot;);\n    n3 = Double.parseDouble(teclado.nextLine());\n\n    promedio = (n1 + n2 + n3) / 3;\n    System.out.println(&quot;promedio: &quot; + promedio);\n\n    if (promedio &gt;= 7) {\n        System.out.println(&quot;Promocionado&quot;);\n    } else if (promedio &gt;= 4 &amp;&amp; promedio &lt; 7) {\n        System.out.println(&quot;Regular&quot;);\n    } else if (promedio &lt; 4) {\n        System.out.println(&quot;Reprobado&quot;);\n    }\n}\n</code></pre>\n<p>}</p>\n"}],"last_activity_date":1684378736,"question_id":58490605,"body":"<p>What is the best method to convert <strong>java source code into a data flow diagram</strong>? And also is there any method to identify the main elements in a data flow diagram by referring the java source code programmatically.</p>\n"},{"comments":[{"comment_id":11545843,"body":"oh im sorry i forgot to write =).... it is in java...please help. ive used for loop but it doesnt work"},{"comment_id":11546397,"body":"Can you show what you tried, and explain in what way it didn&#39;t work?"}],"answers":[{"comments":[{"comment_id":11546129,"body":"am i gonna add this as it is???? sorry=) im new at this i still dont know much about java....can you give me a whole source code... your help is appreciated =)"},{"comment_id":11546370,"body":"This isn&#39;t any particular language; at the time of writing, you hadn&#39;t specified a language."},{"comment_id":11546763,"body":"You want a single loop, and use that index for both strings.  As w/ my pseudocode above, you&#39;ll need to check for each index if that value is in each string before printing, and print a space instead if it is not.  Something like &quot;if i &lt; achar.length System.out.print(a char[i]) else System.out.print(&quot; &quot;);&quot;.  ANd don&#39;t print a &quot;\\n&quot; between the characters; that&#39;s a newline."},{"comment_id":11563757,"body":"i still have difficulty developing it =( can any one show me a whole source code it is in java programming..... im still learning and i am not yet that familiar with java"},{"comment_id":11569624,"body":"Still waiting to see how far you&#39;ve gotten"},{"comment_id":11665907,"body":"&lt;/br&gt;I&#39;ve used single for  loop and it actually displayed 2 strings vertically but the problem is.. if the string is longer than the other there comes the error....."},{"comment_id":11672444,"body":"@xaia: Instead of blindly getting each character to assign to letter/letter1, for each, if the index is too big, assign the variable a space instead (this is what the print...if...else was doing in my pseudo-code).  Alternately, keep your loop as is, but change it to continue while BOTH I &amp; j are small enough.  Then, just print the remaining part of the longer string."}],"answer_id":9177628,"body":"<pre><code>for i in 0..max(length(s1),length(s2))-1:\n    print \" \" if i &gt;= length(s1) else s1[i];\n    print \" \"\n    print \" \" if i &gt;= length(s2) else s2[i];\n    print \"\\n\"\n</code></pre>\n"},{"comments":[{"comment_id":128969705,"body":"Sorry that I answered it so late. I didn&#39;t check the time when the question was asked. It just came into my feed today and I answered it."}],"answer_id":73019627,"body":"<p>If you still haven't got the solution.</p>\n<ol>\n<li>Find the string with max length (<code>input</code> or <code>input1</code>)</li>\n<li>Iterate to that max length and print the data.</li>\n<li>If the two strings are not having the same length, there will be a point where the <code>charAt</code> method will not be having a specific index. So before calling the <code>charAt</code> method, always check whether the current index is less than the respective string's length, if not then just print an empty space <code>' '</code>.</li>\n</ol>\n"},{"answer_id":76030254,"body":"<p>Be simple!</p>\n<ol>\n<li>Find the word with the max length</li>\n<li>In the loop print the <code>i</code>th character</li>\n<li>In case given word's length is less than <code>i</code>, then print <code>space</code>.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>public static void printVertical(List&lt;String&gt; words) {\n    int max = words.stream().mapToInt(String::length).max().orElse(0);\n\n    for (int i = 0, j = 0; i &lt; max; i++, j = 0) {\n        for (String word : words) {\n            if (j++ != 0)\n                System.out.print(' ');\n\n            if (i &lt; word.length())\n                System.out.print(word.charAt(i));\n            else\n                System.out.print(' ');\n        }\n\n        System.out.println();\n    }\n}\n</code></pre>\n"},{"answer_id":76277398,"body":"<p>This is fairly straight forward in Java.</p>\n<pre class=\"lang-java prettyprint-override\"><code>void print() {\n    Scanner scanner = new Scanner(System.in);\n    char[] stringA = scanner.nextLine().toCharArray();\n    char[] stringB = scanner.nextLine().toCharArray();\n    scanner.close();\n    char A, B;\n    int length = Math.max(stringA.length, stringB.length);\n    for (int index = 0; index &lt; length; index++) {\n        A = index &lt; stringA.length ? stringA[index] : ' ';\n        B = index &lt; stringB.length ? stringB[index] : ' ';\n        System.out.printf(&quot;%s %s%n&quot;, A, B);\n    }\n}\n</code></pre>\n"}],"last_activity_date":1684378311,"question_id":9177525,"body":"<p>Please help me generate a program that will prompt the user to enter 2 strings and display them vertically. The output must be like this: </p>\n\n<pre><code>Enter 1st and 2nd String:\nFirst\nSecond\n\nF  S\ni  e\nr  c\ns  o\nt  n\n   d\n</code></pre>\n\n<p>The attempted code:</p>\n\n<pre><code>import java.util.Scanner;\npublic class MyCode\n{\n\n    public static void main(String[] args) {\n        Scanner in = new Scanner(System.in);\n        System.out.println(\"Enter a string\");\n        String input = in.nextLine();\n        String input1=in.nextLine();\n        int i =0;\n        int j=0;\n\n        for(i = 0,j=0; i &lt; input.length()||j&lt;input1.length(); i++,j++) {\n            char letter = input.charAt(i);\n            char letter1=input1.charAt(j);\n            System.out.println(letter + \" \"+letter1);\n        }\n    }\n}\n</code></pre>\n"},{"answers":[{"comments":[{"comment_id":134506832,"body":"I have changed my system name hp to root but still in error its reflecting as hp.. java.sql.SQLException: Access denied for user &#39;hp&#39;@&#39;localhost&#39; (using password: NO) \tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQL&zwnj;&#8203;Error.java:130) l-"},{"comment_id":134506843,"body":"Still the same problem. It is not using the user from the properties."}],"answer_id":76274957,"body":"<p>The error says user &quot;hp&quot; but your properties say user &quot;Admin&quot;. Also the password doesn't match. Your applications is using the wrong credentials. That both passwords have very bad quality for security is a different issue.</p>\n"},{"answer_id":76275517,"body":"<p>Kindly check the spelling mistake of datasource:</p>\n<pre><code>spring.jpa.hibernate.ddl-auto=update  \nspring.datasource.url=jdbc:mysql://localhost:3306/db?createDatabaseIfNotExist=true   \nspring.datasource.username=root  //your db user name  \nspring.datasource.password=root  //your db user password \nspring.datasource.driverClassName=com.mysql.cj.jdbc.Driver\nspring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect  \n#If your MySql version 5 then use MySQL5Dialect\nspring.data.jpa.repositories.enabled=true\nspring.jpa.show-sql=true\nspring.jpa.database=mysql\n</code></pre>\n"},{"answer_id":76277384,"body":"<p>Typo alert!!</p>\n<pre><code>datasourse -&gt; datasource\ndailect -&gt; dialect\n</code></pre>\n"}],"last_activity_date":1684377592,"question_id":76274843,"body":"<p>Trying to connect with MySQL server with my SpringBoot application but facing above issue, can someone suggest?</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/myblog\nspring.datasourse.username=Admin\nspring.datasourse.password=Admin\n\nspring.jpa.properties.hibernate.dailect=org.hibernate.dialect.MySQLDialect\nspring.jpa.hibernate.ddl-auto=update \n</code></pre>\n<p>Error as per below</p>\n<pre><code>java.sql.SQLException: Access denied for user 'hp'@'localhost' (using password: NO)\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:130) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:825) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:446) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:239) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:188) ~[mysql-connector-j-8.0.33.jar:8.0.33]\n    at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:121) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-5.0.1.jar:na]\n    at co\n</code></pre>\n"},{"answers":[{"answer_id":76268365,"body":"<p>I found the solution to my problem, I will post the answer here for anyone who needs it</p>\n<pre><code> tv.setShadowLayer(\n                10f,     // radius: The radius of the shadow\n                0f,      // dx: The horizontal offset of the shadow\n                0f,      // dy: The vertical offset of the shadow\n                Color.RED // shadowColor: The color of the shadow\n            )\n\n            // You can also customize other properties of the TextView\n            tv.setTypeface(null, Typeface.BOLD)\n</code></pre>\n"}],"last_activity_date":1684377383,"question_id":76268070,"body":"<p>I have an application written in kotlin, in my app have function add the desired user text line. Adding text is relatively easy, but I was asked to add effects to the text. Anyone with any ideas please help me</p>\n<p>This is the effect i need to add<a href=\"https://i.stack.imgur.com/Q7DVa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q7DVa.png\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"comment_id":134510585,"body":"Perhaps you can show the particular wait method of python you are referring to. There are several."},{"comment_id":134510616,"body":"You would use <code>Thread.sleep</code>.  What do you mean by acknowledgement of the pause?"},{"comment_id":134510686,"body":"Java <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/sleep.html\" rel=\"nofollow noreferrer\">Thread.sleep()</a> is like Python <a href=\"https://realpython.com/python-sleep/\" rel=\"nofollow noreferrer\">time.sleep()</a>.  Perhaps you&#39;re thinking of Python <a href=\"https://realpython.com/python-sleep/#using-eventwait\" rel=\"nofollow noreferrer\">event.wait()</a>?  Java&#39;s &quot;Thread.sleep()&quot; would generally be a good fit in this case, too."},{"comment_id":134510708,"body":"Duplicate of <a href=\"https://stackoverflow.com/q/24104313/642706\">stackoverflow.com/q/24104313/642706</a>"}],"answers":[{"comments":[{"comment_id":134510683,"body":"By the way, both of the terribly flawed <code>Date</code> classes are now legacy. They were years ago supplanted by the modern <i>java.time</i> classes defined in JSR 310. Use <code>Instant</code> or <code>ZonedDateTime</code>."},{"comment_id":134510699,"body":"You should explain your use of <code>7000</code> and its effect. Better yet, <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Thread.html#sleep(java.time.Duration)\" rel=\"nofollow noreferrer\">use <code>Duration</code></a> in Java 19+ to make your code more self-documenting."}],"answer_id":76277281,"body":"<p>Nice to meet you.</p>\n<pre><code>System.out.println(&quot;Start of delay: &quot;+ new Date());\nThread.sleep(7000);   \nSystem.out.println(&quot;End of delay: &quot;+ new Date());\n</code></pre>\n<p>Thread.sleep() function is the perfect function for delay code.\nIf Thread.sleep() function does not effect in your project, maybe there is some error before your Thread.sleep() function.</p>\n"}],"last_activity_date":1684375545,"question_id":76277232,"body":"<p>I'm fairly knew at coding so bear with me. I know that Python has a wait function where you can delay code execution. No frills or anything, it just pauses your code for however long you want to. Is there a similar method on java or no?</p>\n<p>I tried both the wait() and Thread.sleep() functions but neither seem to just pause the code without asking either you (the coder) to acknowledge the pause or the user to.</p>\n"},{"comments":[{"comment_id":134510636,"body":"This must be a new workspace. It&#39;s the same editor. Look at the bottom of the editor pane for Design and Source tabs."},{"comment_id":134510682,"body":"Where do you see a DTD?"}],"last_activity_date":1684375351,"question_id":76277273,"body":"<p>So, currently I am learning Spring for backend Development.\nWhile I was learning dependency injection part I need to add beans dependency in the config.xml file like below.\n<a href=\"https://i.stack.imgur.com/hSznT.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>But in the newer version in eclipse IDE , By default it contains DTD<a href=\"https://i.stack.imgur.com/51Q1Y.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"answers":[{"answer_id":12807826,"body":"<p>You can always call <code>Runtime.getRuntime().freeMemory()</code>.</p>\n\n<p>The other half of the problem, getting the cost of objects, seems more problematic to me.</p>\n\n<p>I think a better solution would be figuring out how to cluster and scale your web services so they can gracefully accept 150% of rated load without denying new connections.  Sounds like a sizing exercise would get you a better solution than a code hack.</p>\n"},{"answer_id":12807830,"body":"<p><code>Runtime.getRuntime().freeMemory()</code> is a way to get <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html\" rel=\"nofollow\">free memory for JVM</a> at that moment while runtime. Is it good way (or) not it depends completely on your application.</p>\n"},{"answer_id":12807844,"body":"<pre><code>long freeMemory = Runtime.getRuntime().freeMemory();\n</code></pre>\n"},{"comments":[{"comment_id":32743076,"body":"@LeonardoGaldioli what do you mean? The listed methods do not execute sufficiently fast for what you need? What is the context?"},{"comment_id":32861738,"body":"I just want to know if these methods  make the application slower significantly"},{"comment_id":33347504,"body":"@LeonardoGaldioli I do not know at the time. Why don&#39;t you try executing that sample with:  long startTime = System.currentTimeMillis(); /* INSERT ORIGINAL MEMORY CODE HERE */ long stopTime = System.currentTimeMillis(); long elapsedTime = stopTime - startTime;"},{"comment_id":47442943,"body":"The question was, what indication to use for the amount of memory until an Out-of-Memory error occurs. Note hat ` Runtime.getRuntime().freeMemory());` is NOT the answer to that question. - (I have added a more precise answer to the question)."}],"answer_id":12807848,"body":"<p><a href=\"https://stackoverflow.com/questions/25552/using-java-to-get-os-level-system-information\">This sample by William Brendel may be of some use.</a></p>\n\n<p>EDIT: I originally provided this sample (linking to William Brendel's answer on another topic). The creator of that topic (Steve M) wanted to create a multi-platform Java application. Specifically, the user was trying to find a means by which to assess the running machine's resources (disk space, CPU and memory usage).</p>\n\n<p>This is an inline transcript of the answer given in that topic. However, it has been pointed out on this topic that it is not the ideal solution, despite my answer being marked as accepted.</p>\n\n<pre><code>public class Main {\n  public static void main(String[] args) {\n  /* Total number of processors or cores available to the JVM */\n  System.out.println(\"Available processors (cores): \" + \n  Runtime.getRuntime().availableProcessors());\n\n  /* Total amount of free memory available to the JVM */\n  System.out.println(\"Free memory (bytes): \" + \n  Runtime.getRuntime().freeMemory());\n\n  /* This will return Long.MAX_VALUE if there is no preset limit */\n  long maxMemory = Runtime.getRuntime().maxMemory();\n  /* Maximum amount of memory the JVM will attempt to use */\n  System.out.println(\"Maximum memory (bytes): \" + \n  (maxMemory == Long.MAX_VALUE ? \"no limit\" : maxMemory));\n\n  /* Total memory currently in use by the JVM */\n  System.out.println(\"Total memory (bytes): \" + \n  Runtime.getRuntime().totalMemory());\n\n  /* Get a list of all filesystem roots on this system */\n  File[] roots = File.listRoots();\n\n  /* For each filesystem root, print some info */\n  for (File root : roots) {\n    System.out.println(\"File system root: \" + root.getAbsolutePath());\n    System.out.println(\"Total space (bytes): \" + root.getTotalSpace());\n    System.out.println(\"Free space (bytes): \" + root.getFreeSpace());\n    System.out.println(\"Usable space (bytes): \" + root.getUsableSpace());\n  }\n }\n}\n</code></pre>\n\n<p>User Christian Fries points out that it is wrong to assume that <code>Runtime.getRuntime().freeMemory()</code> gives you the amount of memory which may be allocated until an out-of-memory error occurs. </p>\n\n<p>From the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Runtime.html#freeMemory--\" rel=\"noreferrer\">documentation</a>, the signature return of <code>Runtime.getRuntime().freeMemory()</code> is as such:</p>\n\n<p><strong><em>Returns:</strong> an approximation to the total amount of memory currently available for future allocated objects, measured in bytes.</em></p>\n\n<p>However, user Christian Fries claims this function may be misinterpreted. He claims that the approximate amount of memory which may be allocated until an out-of-memory error occurs (the free memory) is likely to be given by:</p>\n\n<pre><code>long presumableFreeMemory = Runtime.getRuntime().maxMemory() - allocatedMemory;\n</code></pre>\n\n<p>With <code>allocatedMemory</code> being given by:</p>\n\n<pre><code>long allocatedMemory = \n  (Runtime.getRuntime().totalMemory()-Runtime.getRuntime().freeMemory());\n</code></pre>\n\n<p>The key here is a discrepancy between the concept of free memory. One thing is the memory that the operating system provides the Java Virtual Machine. Another is the total amount of bytes comprising the chunks of blocks of memory actually being used by the Java Virtual Machine itself. </p>\n\n<p>Considering that memory given to Java applications is managed in blocks by the Java Virtual Machine, the amount of <em>free memory</em> available to the Java Virtual Machine may not exactly match the memory available for a Java application.</p>\n\n<p>Specifically, Christian Fries denotes the usage of the <code>-mx</code> or <code>-Xmx</code> flags to set the maximum amount of memory available to the Java Virtual Machine. He notes the following function differences:</p>\n\n<pre><code>/* Returns the maximum amount of memory available to \n   the Java Virtual Machine set by the '-mx' or '-Xmx' flags. */\nRuntime.getRuntime().maxMemory();\n\n/* Returns the total memory allocated from the system \n   (which can at most reach the maximum memory value \n   returned by the previous function). */\nRuntime.getRuntime().totalMemory();\n\n/* Returns the free memory *within* the total memory \n   returned by the previous function. */\nRuntime.getRuntime().freeMemory();\n</code></pre>\n\n<p>Christian concludes his answer by stating that <code>Runtime.getRuntime().freeMemory()</code> in fact returns what may be called presumable free memory; even if a future memory allocation does not exceed the value returned by that function, if the Java Virtual Machine has not yet received the actual chunk of memory assigned by the host system, a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/OutOfMemoryError.html\" rel=\"noreferrer\"><code>java.lang.OutOfMemoryError</code></a> may still be produced.</p>\n\n<p>In the end, the proper method to use will have a varying degree of dependence on the specifics of your application.</p>\n\n<p>I provide another link which may be useful. It is a question made by user Richard Dormand and answered by stones333 <a href=\"https://stackoverflow.com/questions/4667483/how-is-the-default-java-heap-size-determined\">about determining the default Java heap size used.</a></p>\n"},{"answer_id":12807877,"body":"<p>In addition to the other answer, I would like to note that doing that is not necessarily a good idea, since you might have a cache in your app that uses <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/ref/SoftReference.html\">SoftReferences</a>. </p>\n\n<p>Such a cache would release memory as soon as the JVM reaches its memory limits. Allocating memory, even if there's not enough free memory, would first cause memory to be released by the soft references, and make it available for the allocation.</p>\n"},{"answer_id":12809738,"body":"<p>In addition to using the Runtime methods, you can get some additional memory info using</p>\n\n<pre><code>MemoryMXBean memBean = ManagementFactory.getMemoryMXBean();\nMemoryUsage heap = memBean.getHeapMemoryUsage();\nMemoryUsage nonheap = memBean.getNonHeapMemoryUsage();\n</code></pre>\n\n<p>Each <a href=\"http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/management/MemoryUsage.html\">MemoryUsage</a> provides init, used, committed and max values.  This might be useful if create a memory monitor thread which polls memory and logs it, providing you with a history of memory usage over time.  Sometimes it's helpful to see the memory usage over time leading up to the errors.</p>\n\n<p>If you really want to take this to an extreme, create a heap dump thread.  Monitor your memory usage over time and when it exceeds certain thresholds do the following (this works on JBoss 5.0 - your mileage may vary):</p>\n\n<pre><code>// init code\nMBeanServer server = ManagementFactory.getPlatformMBeanServer();\nHotSpotDiagnosticMXBean diagBean = ManagementFactory.newPlatformMXBeanProxy(server, \"com.sun.management:type=HotSpotDiagnostic\", HotSpotDiagnosticMXBean.class); \n\n// loop code\n// add some code to figure if we have passed some threshold, then\n\nFile heapFile = new File(outputDir, \"heap-\" + curThreshold + \".hprof\");\nlog.info(\"Dumping heap file \" + heapFile.getAbsolutePath());\ndiagBean.dumpHeap(heapFile.getAbsolutePath(), true);\n</code></pre>\n\n<p>Later you can review these heap dump files with the eclipse <a href=\"http://www.eclipse.org/mat/\">memory analyzer</a> or similar tools to check for memory leaks etc.</p>\n"},{"comments":[{"comment_id":40840958,"body":"@Vasili I assume I am suffering from double-ism... working too much with doubles. Thank you for pointing it out, I made an edit to the answer."},{"comment_id":51681868,"body":"The docs for <code>maxMemory()</code> state: &quot;If there is no inherent limit then the value Long.MAX_VALUE will be returned.&quot;. It&#39;s probably worth checking for this, since the &quot;free&quot; number it&#39;s going to give you will be nonsense."},{"comment_id":104860153,"body":"I made this fully-working example of an application that gets memory information based on what Christian explains in his answer: <a href=\"https://github.com/luciopaiva/java-simple-system-info\" rel=\"nofollow noreferrer\">github.com/luciopaiva/java-simple-system-info</a>"}],"answer_id":18366283,"body":"<p>Note: All the answers so far, even the accepted one, seem to answer the question by saying that <code>Runtime.getRuntime().freeMemory()</code> gives you the amount of memory which may be allocated until an out-of-memory error occurs. However: this is wrong.</p>\n<p>The <em>approximate</em> amount of memory which may be allocated until an out-of-memory error occurs, i.e., the free memory is likely</p>\n<pre><code>Runtime runtime           = Runtime.getRuntime();\nlong presumableFreeMemory = runtime.maxMemory() - allocatedMemory;\n</code></pre>\n<p>where</p>\n<pre><code>long allocatedMemory      = runtime.totalMemory() - runtime.freeMemory();\n</code></pre>\n<p><em>Explanation:</em>\nIf you launch the JVM via an -mx parameter (or -Xmx) you specify the maximum amount available to the JVM. <code>Runtime.getRuntime().maxMemory()</code> will give you this amount. From this amount of system memory the JVM will allocate memory in chunks, say for example blocks of 64 mb. At start, the JVM will only allocate such a chunk from the system and not the full amount. <code>Runtime.getRuntime().totalMemory()</code> gives the total memory allocated from the system, while <code>Runtime.getRuntime().freeMemory()</code> gives you the free memory <em>within</em> the total memory allocated.</p>\n<p>Hence:</p>\n<pre><code>long definitelyFreeMemory = Runtime.getRuntime().freeMemory();\n</code></pre>\n<p>is the free memory already reserved by the JVM, but it is likely just a small amount. And you will likely get <code>presumableFreeMemory</code>. Of course, you may get an out-of-memory exception even if you tried to allocate an amount smaller than <code>presumableFreeMemory</code>. This may happen if the JVM does not get the next memory chunk from the system. However, on most systems this will never happen and the system will rather start swapping - a situation you like to avoid. W.r.t. to the original question: if -mx is set to a reasonable value, then <code>presumableFreeMemory</code> is a good indicator for the free memory.</p>\n"},{"comments":[{"comment_id":89171031,"body":"This gets the available OS-wide memory which is what I was looking for, nice. :)"}],"answer_id":36533471,"body":"<p>To get the OS-wide available memory, add <a href=\"https://mvnrepository.com/artifact/com.github.dblock/oshi-core\" rel=\"noreferrer\"><code>OSHI</code></a> by using the following maven dependency: </p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.github.oshi&lt;/groupId&gt;\n    &lt;artifactId&gt;oshi-core&lt;/artifactId&gt;\n    &lt;version&gt;LATEST&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Then in Java, use the following code:</p>\n\n<pre><code>SystemInfo si = new SystemInfo();\nHardwareAbstractionLayer hal = si.getHardware();\nlong availableMemory = hal.getMemory().getAvailable();\n</code></pre>\n"},{"answer_id":59551787,"body":"<p>To get the physical machine <strong>total</strong>, <strong>used</strong> and <strong>free memory</strong> information, we can also get it by using java <code>Runtime.exec()</code> with command argument <code>free -m</code> and then interpreting it as below:</p>\n\n<pre><code>Runtime runtime = Runtime.getRuntime();\n\nBufferedReader br = new BufferedReader(\n    new InputStreamReader(runtime.exec(\"free -m\").getInputStream()));\n\nString line;\nString memLine = \"\";\nint index = 0;\nwhile ((line = br.readLine()) != null) {\n  if (index == 1) {\n    memLine = line;\n  }\n  index++;\n}\n//                  total        used        free      shared  buff/cache   available\n//    Mem:          15933        3153        9683         310        3097       12148\n//    Swap:          3814           0        3814\n\nList&lt;String&gt; memInfoList = Arrays.asList(memLine.split(\"\\\\s+\"));\nint totalSystemMemory = Integer.parseInt(memInfoList.get(1));\nint totalSystemUsedMemory = Integer.parseInt(memInfoList.get(2));\nint totalSystemFreeMemory = Integer.parseInt(memInfoList.get(3));\n\nSystem.out.println(\"Total system memory in mb: \" + totalSystemMemory);\nSystem.out.println(\"Total system used memory in mb: \" + totalSystemUsedMemory);\nSystem.out.println(\"Total system free memory in mb: \"   + totalSystemFreeMemory);\n</code></pre>\n"},{"answer_id":76277247,"body":"<p>If you don't wana browse harangue, there is a diagram to explain the meaning of</p>\n<ul>\n<li><code>Runtime.getRuntime().maxMemory()</code></li>\n<li><code>Runtime.getRuntime().totalMemory()</code></li>\n<li><code>Runtime.getRuntime().freeMemory()</code></li>\n</ul>\n<pre><code>  ┌──────────────────max───────────────────┐\n  ┌─────────┬─────────┬────────────────────┐\n  │         │  free   │                    │\n  └─────────┴─────────┴────────────────────┘\n  └───────total───────┘\n</code></pre>\n<p>and the corresponding code to solve your question:</p>\n<pre class=\"lang-java prettyprint-override\"><code>long total = Runtime.getRuntime().totalMemory();\nlong free = Runtime.getRuntime().freeMemory();\n\nlong allocated = total - free;        \nlong actualFree = max - allocated;\n</code></pre>\n"}],"last_activity_date":1684374925,"question_id":12807797,"body":"<p>Is there any good way to get the remaining memory available to the JVM at run time? The use case of this would be to have web services which fail gracefully when they are nearing their memory limits by refusing new connections with a nice error message \"too many people using this, try again later\", rather than dying abruptly with an OutOfMemory error.</p>\n\n<p>Note this has nothing to do with calculating/estimating the cost of each object beforehand. In principle I could estimate how much memory my objects take and refuse new connections based on that estimate, but that seems kind of hacky/fragile.</p>\n"},{"answers":[{"answer_id":76277183,"body":"<p>Try this. First, create these three variables in your class.</p>\n<pre><code>private String sFileName, sUrl, sUserAgent;\n</code></pre>\n<p>Then in your onCreate in your activity, create a download listener for your webview.</p>\n<pre><code>    myWebview.setDownloadListener(new DownloadListener() {\n        @Override\n        public void onDownloadStart(String url, String userAgent, String contentDisposition, String mimetype, long contentLength) {\n            String filename = URLUtil.guessFileName(url,contentDisposition,getFileType(url));\n            sFileName = filename;\n            sUrl = url;\n            sUserAgent = userAgent;\n            if (Build.VERSION.SDK_INT&gt;=Build.VERSION_CODES.M){\n                if (ContextCompat.checkSelfPermission(MainActivity.this, Manifest.permission.WRITE_EXTERNAL_STORAGE)\n                        == PackageManager.PERMISSION_GRANTED){\n                    downloadFile(filename,url,userAgent);\n                }else {\n                    requestPermissions(new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE},1001);\n                }\n            }else {\n                downloadFile(filename,url,userAgent);\n            }\n\n        }\n    });\n</code></pre>\n<p>Add a webchrome client in OnCreate.</p>\n<pre><code>   myWebview.setWebChromeClient(new WebChromeClient(){\n        @Override\n        public void onPermissionRequest(PermissionRequest request) {\n            super.onPermissionRequest(request);\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n                request.grant(request.getResources());\n            }\n        }\n\n    WebSettings webSettings = myWebview.getSettings();\n    webSettings.setJavaScriptEnabled(true);\n}\n</code></pre>\n<p>Permission is needed for writing files on your device. Add this to your OnRequestPermissionsResult code.</p>\n<pre><code>  @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n        if (requestCode==1001){\n            if (grantResults.length&gt;0&amp;&amp;grantResults[0]== PackageManager.PERMISSION_GRANTED){\n                if (!sUrl.equals(&quot;&quot;)&amp;&amp;!sFileName.equals(&quot;&quot;)&amp;&amp;!sUserAgent.equals(&quot;&quot;)){\n                    downloadFile(sFileName,sUrl,sUserAgent);\n                }\n            }\n        }\n    }\n</code></pre>\n<p>Then create a function called downloadFile.</p>\n<pre><code>private void downloadFile(String filename, String url, String userAgent) {\n    try {\n        DownloadManager.Request request = new DownloadManager.Request(\n                Uri.parse(url));\n\n        request.allowScanningByMediaScanner();\n        request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED); //Notify client once download is completed!\n        request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, filename);\n        DownloadManager dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);\n        dm.enqueue(request);\n\n        Toast.makeText(this, &quot;Downloading File...&quot;, Toast.LENGTH_LONG).show();\n\n        sUrl = &quot;&quot;;\n        sFileName = &quot;&quot;;\n        sUserAgent = &quot;&quot;;\n    }catch (Exception ignored){\n        Toast.makeText(this, ignored.toString(), Toast.LENGTH_SHORT).show();\n    }\n}\n</code></pre>\n<p>This should work assuming the javascript code in your webpage is also working.</p>\n"}],"last_activity_date":1684373625,"question_id":76277071,"body":"<p>I need to make my android webview app be able to download files when the download is initiated by code on the webpage.</p>\n<p>I am not at all familiar with android app development, or Java for that matter, so please have patience. On my webpage that the webview app accesses, there is javascript code that initiates a download using a blob object, like so:</p>\n<pre><code>let blob = new Blob([filestring]);\nlet downloadUrl = URL.createObjectURL(blob);\nlet link = document.createElement('a');\nlink.href = downloadUrl;\nlink.download = currentpage + '.csv';\nlink.click();\nURL.revokeObjectURL(downloadUrl);\n</code></pre>\n<p>I have tried to allow the download to work inside of the webview application, but when I pressing the button that runs the above javascript code on the page, the webview application crashes. I cannot figure out why this doesn't work.</p>\n<p>Here is the MainActivity.java file:</p>\n<pre><code>package com.example.stockapptestbeta;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.graphics.Bitmap;\nimport android.net.Uri;\nimport android.os.Bundle;\nimport android.webkit.CookieManager;\nimport android.webkit.DownloadListener;\nimport android.webkit.WebSettings;\nimport android.webkit.WebView;\nimport android.webkit.WebViewClient;\nimport android.app.DownloadManager;\nimport android.webkit.URLUtil;\nimport android.os.Environment;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private WebView mywebView;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        \n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        mywebView=(WebView) findViewById(R.id.webview);\n        mywebView.setWebViewClient(new WebViewClient(){\n            @Override\n            public boolean shouldOverrideUrlLoading(WebView view, String url) {\n                view.loadUrl(url);\n                return true;\n            }\n        });\n        mywebView.getSettings().setUserAgentString(&quot;Mozilla/5.0 (StockAppAndroid) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/107.0.5304.105 Mobile Safari/537.36&quot;);\n        mywebView.loadUrl(&quot;http://192.168.0.22&quot;);\n        mywebView.setDownloadListener(new DownloadListener() {\n            @Override\n            public void onDownloadStart(String url, String userAgent, String contentDisposition, String mimeType, long contentLength) {\n                DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url));\n                request.setMimeType(mimeType);\n                String cookies = CookieManager.getInstance().getCookie(url);\n                request.addRequestHeader(&quot;cookie&quot;, cookies);\n                request.addRequestHeader(&quot;User-Agent&quot;, userAgent);\n                request.setDescription(&quot;Downloading file&quot;);\n                request.setTitle(URLUtil.guessFileName(url, contentDisposition, mimeType));\n                request.allowScanningByMediaScanner();\n                request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);\n                request.setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, URLUtil.guessFileName(url, contentDisposition, mimeType));\n\n                DownloadManager dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);\n                dm.enqueue(request);\n            }\n        });\n        WebSettings webSettings=mywebView.getSettings();\n        webSettings.setJavaScriptEnabled(true);\n    }\n\n    public class mywebClient extends WebViewClient {\n        @Override\n        public void onPageStarted(WebView view, String url, Bitmap favicon) {\n            super.onPageStarted(view,url,favicon);\n        }\n        public void onPageFinished(WebView view, String url, Bitmap favicon) {\n            super.onPageFinished(view,url);\n            CookieManager.getInstance().flush();\n        }\n        @Override\n        public boolean shouldOverrideUrlLoading(WebView view, String url) {\n            view.loadUrl(url);\n            return true;\n        }\n    }\n    @Override\n    public void onBackPressed() {\n        if (mywebView.canGoBack()) {\n            mywebView.goBack();\n        } else {\n            super.onBackPressed();\n        }\n    }\n}\n</code></pre>\n<p>And here is the AndroidManifest.xml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;&gt;&lt;/uses-permission&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;&gt;&lt;/uses-permission&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;&gt;&lt;/uses-permission&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:configChanges=&quot;orientation|screenSize&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.StockAppTestBeta&quot;\n        android:usesCleartextTraffic=&quot;true&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;\n            android:configChanges=&quot;keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize&quot;\n            &gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n\n            &lt;meta-data\n                android:name=&quot;android.app.lib_name&quot;\n                android:value=&quot;&quot; /&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>Does anybody know how to make this download functionality work? Thanks for taking the time to read my question.</p>\n"},{"comments":[{"comment_id":101192906,"body":"Nope, just call <code>new MainClass()</code> or whatever the main class name is.  Some example code will help."},{"comment_id":101192912,"body":"No, it&#39;s not true that it depends on compiler.  Did you try creating an object of that class?  What happened when you did?"},{"comment_id":101193230,"body":"Possible duplicate <a href=\"https://stackoverflow.com/questions/2550310/can-a-main-method-of-class-be-invoked-from-another-class-in-java\" title=\"can a main method of class be invoked from another class in java\">stackoverflow.com/questions/2550310/&hellip;</a>"}],"answers":[{"answer_id":57352738,"body":"<p>Yes, you can. The main method is just an entry point. The class is like any other, except it has an additional <code>public static</code> method. The main method is static and therefore not part of the instance of the object, but you shouldn't be using the main method anyway except for starting the program.</p>\n<pre><code>public class Scratchpad {\n\n    public static void main(String[] args) {\n        Scratchpad scratchpad = new Scratchpad();\n        scratchpad.someMethod();\n    }\n\n    public Scratchpad() {\n    }\n\n    private void someMethod() {\n        System.out.println(&quot;Non-static method prints&quot;);\n    }\n}\n</code></pre>\n"},{"answer_id":57353523,"body":"<p>Yes, you can create object for the class which has main method. There is no difference in this class and a class which don't have main method with respect to creating objects and using.</p>\n"},{"answer_id":76277185,"body":"<p>The <code>main</code> method is not limited to one class, you can place it within any class.</p>\n<p>As for different JVM implementations having different standards, that I am unsure of.<br />\nIt doesn't sound correct, being unable to instantiate the class within itself would create constraints.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Example {\n    public static void main(String[] args) {\n        Example example = new Example();\n    }\n}\n</code></pre>\n"}],"last_activity_date":1684373582,"question_id":57352625,"body":"<p>Is it possible to create object of class in which main method resides.I have been searching for this answer but I have been told that it depends on compiler some compiler will allow while others will not.Is that true?</p>\n"},{"last_activity_date":1684373476,"question_id":76277182,"body":"<p>I'm working on an app where user can upload three images at once but I'm having problem handling the onActivityResult() method. I can Crop one image using the codes below</p>\n<pre><code>private ImageView image1; \n\n// I need to crop three images this time. image1,  image2 and image3\n\nprivate Uri imageUri; \n\n@Override\nprotected void onCreate(Bundle saveInstanceState) {\n\nsuper.onCreate(saveInstanceState);\n\nsetContentView(R.layout.my_layout);\n\nimage1 = findViewById(R.id.image1);\n\nimage1.setOnclickListener(new View.OnClickListener(){\n@Override\npublic void onClick(View v) {\nCropImage.activity().start(MyActivity.this);\n  }\n }\n}\n\n@Override\nprotected void onActivityResult(\nint requestCode,  int resultCode,  Intent data) {\nsuper.onActivityResult(requestCode, resultCode, data);\n\nif(requestCode == CropImage.CROP_IMAGE_ACTIVITY_REQUEST_CODE &amp;&amp; resultCode == RESULT_OK &amp;&amp; data != null) {\nCropImage.ActivityResult result = CropImage.getActivityResult(data);\n\nimageUri = result.getUri();\n\nimage1.setImageURI(imageUri);\n }\n}\n</code></pre>\n<p>My problem now is that I want to Crop three images but I don't know how to call each one of them in onActivityResult().</p>\n"},{"last_activity_date":1684372736,"question_id":75804762,"body":"<p>I have this exception while unserializing an object:</p>\n<p>java.lang.ClassCastException: cannot assign instance of java.util.CollSer to field a.b.c.BaseClass.aField of type java.util.List in instance of a.b.c.SubClass.</p>\n<p>At serialization, the a.b.c.BaseClass.aField does contain a List that was created like this</p>\n<pre><code>return List.copyOf(originalList);\n</code></pre>\n<p>I have a “simple” workaround to fix the problem by changing the previous line to:</p>\n<pre><code>return originalList.\n</code></pre>\n<p>Note that the list may be shared by multiple instances of a.b.c.BaseClass.\nStack:</p>\n<pre><code>Caused by: java.lang.ClassCastException: cannot assign instance of java.util.CollSer to field a.b.c.BaseClass.aField of type java.util.List in instance of a.b.c.SubClass.\n    at java.base/java.io.ObjectStreamClass$FieldReflector.setObjFieldValues(ObjectStreamClass.java:2227)\n    at java.base/java.io.ObjectStreamClass$FieldReflector.checkObjectFieldValueTypes(ObjectStreamClass.java:2191)\n    at java.base/java.io.ObjectStreamClass.checkObjFieldValueTypes(ObjectStreamClass.java:1478)\n    at java.base/java.io.ObjectInputStream$FieldValues.defaultCheckFieldValues(ObjectInputStream.java:2657)\n    at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2471)\n    at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2242)\n    at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1742)\n    at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:514)\n    at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:472)\n    … \n</code></pre>\n<p>If I break and debug at the exception point:</p>\n<pre><code>   private void setObjFieldValues(Object obj, Object[] vals, boolean dryRun) {\n        if (obj == null) {\n            throw new NullPointerException();\n        }\n        for (int i = numPrimFields; i &lt; fields.length; i++) {\n            long key = writeKeys[i];\n            if (key == Unsafe.INVALID_FIELD_OFFSET) {\n                continue;           // discard value\n            }\n            switch (typeCodes[i]) {\n                case 'L', '[' -&gt; {\n                    Object val = vals[offsets[i]];\n                    if (val != null &amp;&amp;\n                        !types[i - numPrimFields].isInstance(val))\n                    {\n                        Field f = fields[i].getField();\n                        throw new ClassCastException(\n                            &quot;cannot assign instance of &quot; +\n                            val.getClass().getName() + &quot; to field &quot; +\n                            f.getDeclaringClass().getName() + &quot;.&quot; +\n                            f.getName() + &quot; of type &quot; +\n                            f.getType().getName() + &quot; in instance of &quot; +\n                            obj.getClass().getName());\n                    }\n                    if (!dryRun)\n                        unsafe.putReference(obj, key, val);\n                }\n                default -&gt; throw new InternalError();\n            }\n        }\n    }\n</code></pre>\n<p>In my scenario,</p>\n<ul>\n<li>obj is an instance of a.b.c.SubClass</li>\n<li>vals has 26 elements of    which index 17 is a CollSer</li>\n<li>dryRun is true</li>\n<li>The “i” value is 20.</li>\n<li>typecode[i] is ‘L’</li>\n<li>numPrimFields is 3</li>\n<li>offset[i] is 17</li>\n<li>types[i - numPrimFields] is java.util.List</li>\n<li>val is a CollSer    (array null, tag 1 (IMM_LIST))</li>\n</ul>\n<p>The line:</p>\n<pre><code>!types[i - numPrimFields].isInstance(val)\n</code></pre>\n<p>Fails because java.util.List is not an instance of java.util.CollSer\nI think (not sure) CollSer should probably have already been replaced by a List by CollSer’s readResolve.</p>\n<p>Am I doing something wrong?</p>\n<p>Unfortunately, this is a huge object being serialized (215 classes, 900MB on disk, error stack trace is 4200 lines) so I can’t easily reproduce the error using a simple test.\nMy env:</p>\n<ul>\n<li>openjdk version &quot;17&quot; 2021-09-14</li>\n<li>OpenJDK Runtime Environment (build 17+35-2724)</li>\n<li>OpenJDK 64-Bit Server VM (build 17+35-2724, mixed mode, sharing)</li>\n</ul>\n<p>(tested with version &quot;20&quot; also)</p>\n<p>This question is probably a duplicate of <a href=\"https://stackoverflow.com/q/65613929/731548\">Map in ActiveMQ ObjectMessage throws ClassCastException: cannot assign instance of java.util.CollSer?</a>\nthat has been flagged as answered without a real solution.</p>\n<p><a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=8304814\" rel=\"nofollow noreferrer\">https://bugs.java.com/bugdatabase/view_bug?bug_id=8304814</a></p>\n<p>I think the problem is more specifically centered on the serialization of java.util.ImmutableCollections$List12.</p>\n"},{"comments":[{"comment_id":134510383,"body":"Is there something else that automatically calls paintComponent()?"},{"comment_id":134510406,"body":"First and foremost - <code>repaint</code> makes no guarantee that a component will be repainted or when it might be repainted.  The request is passed onto the <code>RepaintManager</code> which makes determinations about what and when a paint pass should occur. There are many decisions to be made and many reasons why a component might not be repainted upon request. Consider providing a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> which demonstrates you issue as out-of-context code is just guess work which basically comes down to &quot;I guess you&#39;re doing something wrong&quot;"},{"comment_id":134510411,"body":"Why are you creating a new instance of the Display2 class? The panel should be added to the frame when the frame is constructed. Then you change the properties of the Display2 class when you want to change the painting. I would guess the problem is the size of the panel is (0, 0) when it is created so there is nothing to paint. See the <code>DrawOnComponent</code> example from <a href=\"https://tips4java.wordpress.com/2009/05/08/custom-painting-approaches/\" rel=\"nofollow noreferrer\">Custom Painting Approaches</a> for an example of how to do the painting."},{"comment_id":134510432,"body":"In <code>Display2</code>, you call <code>setVisible()</code> first, then initialize the class.  You need to do that in the opposite order.  Init all the components first, then call <code>setVisible()</code>.  Otherwise there&#39;s no work for the initial drawing to do, and adding a bunch of components later likely don&#39;t get drawn.  Also I&#39;m seconding the request for a complete example.  You&#39;re likely just not calling <code>repaint()</code> (or <code>setVisible()</code>) properly, so it&#39;ll have something to do with the flow of the code when you start up.  We can&#39;t see what&#39;s going on based on what you posted."},{"comment_id":134510504,"body":"<i>in the JPanel class I have created, called Display2.</i> - Display2 is a JPanel which is already visible by default. That statement is not needed anywhere in the class. The fact that you have commented out code in this class dealing with menus also indicates a problem with the structure of your classes. The menus should be created when you create the frame. In addition to the link I proved in my comment you should be reading the Swing tutiroal on <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Custom Painting</a> for painting examples with better structured code."},{"comment_id":134510506,"body":"@markspace Since <code>Display2</code> is a <code>JPanel</code>, it is visible by default. But yes, for a window based class, they are invisible by default and calling <code>setVisible</code> last gets you over the issue of having to call <code>revalidate</code> and <code>repaint</code> manually yourself"}],"last_activity_date":1684372535,"question_id":76277145,"body":"<p>I am working on a project for a computer graphics course.  Most of of the work is done by the paintComponent() function of Java's Swing API.</p>\n<p>I have the line in a different class that uses repaint() to call the paintComponent() function in the JPanel class I have created, called Display2.  Throughout the semester, sometimes when I run the program it calls the paintComponent() function and sometimes it doesn't.   My compiler and my running of the program called paintComponent() enough times that I was able to work on the assignment.  I just assumed it was some sort of glitch with the compiler or the IDE that I would have to work through.  However, recently it never calls paintComponent() and I am having trouble working on the assignment.  I am using JGrasp and am wondering if that has something to do with my problem.</p>\n<p>I have attached the code that is supposes to make everthing work:</p>\n<p>Last few lines of diagnostic print statements, for the function calls before when paintComponent() should be called</p>\n<p>&quot;display initialized</p>\n<p>Gouraud called</p>\n<p>display&quot;</p>\n<p>first few lines and paintComponent() function definition:</p>\n<pre><code>    \n    public void paintComponent (Graphics g) {\n     super.paintComponent(g);// panel for graphics\n   \n   \n     \n     int polyScannedThrough = 0; \n            System.out.println(&quot;polygons to scan through : &quot; + polygons.length); \n         \n        for (int i = 0; i &lt; polygons.length; i ++) {// iterate through polygons\n                   \n\n\n\n           if (polyScannedThrough &lt; polygons.length) {\n          \n</code></pre>\n<p>Instantiation of class Display2:</p>\n<pre><code>public Display2 () {\n \n \n                     this.setVisible(true);\n                      this.setBackground(Color.white);\n                    imageBuffer = new int[800][600][4];\n                    zBuffer = new int[800][600];\n                   // normalBuffer = new Matrix[800][600];\n                                        // intialize edge table and linked list \n                    this.setBackground(Color.WHITE);\n                    System.out.println(&quot;display initialized&quot;); \n                    \n                   //  polygons = new Polygon[Transformation2.numPoly];\n                    \n                     \n                     \n                     Ks = 0.778; // values hard coded for now\n                     \n                     Kd = 0.035;\n                     \n                     Ka = 0.113;\n                     \n                     intensity = 0.22;\n                     Iambient = 0.90;\n                     light = new Matrix (new double[][] {{-5}, {4}, {10}, {1}});\n                     \n                     Random rand = new Random();\n                     \n                     polyColor = new Color (rand.nextInt(255), rand.nextInt(255), rand.nextInt(255));\n                     for (int i = 0; i &lt; imageBuffer.length; i ++) {\n                        for (int j = 0; j &lt; imageBuffer[i].length; j ++) {\n                           for (int k = 0; k &lt;3; k ++) {\n                              imageBuffer[i][j][k] = 255;\n                           }\n                        }\n                     }\n                    /* mb = new JMenuBar();\n                    \n                     \n                     JMenu fileMenu = new JMenu(&quot;File&quot;);\n                     JMenu shadingMenu = new JMenu(&quot;shading&quot;); \n                     \n                     System.out.println(&quot;buttons added&quot;);\n\n                        JMenuItem constantShading = new JMenuItem(&quot;Constant shading&quot;);\n                        constantShading.addActionListener (a -&gt; constant());\n\n                     JMenuItem phongShading = new JMenuItem(&quot;Phong shading&quot;);\n                              phongShading.addActionListener(a-&gt; phong());\n                     JMenuItem gouraudShading = new JMenuItem(&quot;Gouraud shading&quot;);\n                      gouraudShading.addActionListener(a -&gt; gouraud());\n                 shadingMenu.add(constantShading);\n                  shadingMenu.add(phongShading);\n                  shadingMenu.add(gouraudShading);\n                  \n                 \n                  mb.add(shadingMenu);\n                  Transformation2.frame.setJMenuBar(mb);*/\n                  // initialize specular terms\n                  \n                 gouraud();\n\n                 \n    }\n</code></pre>\n<p>Code in another class that creates the JPanel subclass and calls paintComponent():</p>\n<pre><code>   Display2 panel = new Display2();\n\n      Container cPane = frame.getContentPane();\n      cPane.add (panel);\n           System.out.println(&quot;display&quot;); \n   \n      panel.repaint(); \n</code></pre>\n<p>I was expecting the array of polygons to be iterated through, a bunch of print statements about the scan conversion of the polygons, and some colored shapes to be drawn on the screen.</p>\n<p>Instead, the screen is blank, and, as the print statements show, I didn't get past the initialization of Display2.</p>\n"},{"comments":[{"comment_id":134504499,"body":"If there is such an occasion it is very rare. Overriding methods goes hand in hand with polymorphism."},{"comment_id":134504552,"body":"Polymorphism can only be achieved when there is inheritance accompanied by overriding. Overriding is all about bringing a change and without change how can one achieve Poly-Morphism (multiple forms/outcomes during multiple instance)"},{"comment_id":134504560,"body":"Subclassing can be augmentation w/o overrides, e.g., a base class provides common functionality, and subclasses extend/use that functionality without replacing it. This isn&#39;t as unusual as the preceding comments imply <i>(for better or worse)</i>. <i>(Whether or not subclassing is the <b>best</b> approach, then, is a separate conversation, e.g., composition may make more sense.)</i>"},{"comment_id":134504567,"body":"Polymorphism is a broader concept than subclassing/overriding. Overloading, for example, also is a form of Polymorphism. Generics too."}],"answers":[{"comments":[{"comment_id":134510024,"body":"Doesn&#39;t answer the question that was asked in any way."},{"comment_id":134510099,"body":"In what way?  I&#39;ve defined the difference between using polymorphism with and without overriding methods.  If anything, that is the exact answer."},{"comment_id":134510244,"body":"So, how can i apply the polymorphism in methods B and C ?, polimorphism means many forms to call a method, but if the method cant be override, how can i apply ?"},{"comment_id":134510301,"body":"The polymorphism of <code>methodB</code> would be that, depending on the implementing class, and whether or not that class chose to override the method, a different implementation may or may not be executed.  And, the polymorphism of <code>methodC</code> would be that no matter what class is calling the method, the same code is executed.  This is in terms of &quot;overriding&quot;, which is different from &quot;overloading&quot;."},{"comment_id":134510386,"body":"@ArthurBittencourt I updated my answer to provide some clarity."},{"comment_id":134510413,"body":"@ArthurBittencourt, your initial question is, &quot;how can one be used without the other&quot;.  You don&#39;t need to override the method to consider it polymorphic.  What makes it polymorphism is that the implementing class that is accessing the method is different from another.  So, it is multiple objects utilizing a single method, which may or may not be overridden.  So, &quot;poly&quot; meaning many, and &quot;morphic&quot; meaning ability-to-change."},{"comment_id":134510437,"body":"Additionally, you&#39;re saying that if the method can&#39;t be overridden, then how is it polymorphism.  The &quot;poly&quot; part is in reference to the multiple classes that can implement it, and not the method.  The &quot;morphism&quot; part is in reference to the method, which has the ability to change."}],"answer_id":76276679,"body":"<p>Overriding is only required if you're extending an <code>abstract</code> class which contains <code>abstract</code> methods, or implementing an <code>interface</code> which contains un-implemented methods.</p>\n<p>For example, the <code>Object</code> class, which all Java classes inherently extend, includes methods that can optionally be overridden, such as <code>toString</code>.</p>\n<p>Consider the following <code>abstract class</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>abstract class Example {\n    String stringA = &quot;stack&quot;;\n    String stringB = &quot;overflow&quot;;\n\n    private String methodA() {\n        return stringA + &quot; &quot; + stringB;\n    }\n\n    protected int methodB(int value) {\n        return value + 100;\n    }\n\n    public abstract int methodC(int valueA, int valueB);\n}\n</code></pre>\n<p><code>methodA</code> cannot be overridden; it is marked as <code>private</code>.<br />\n<code>methodB</code> can optionally be overridden, although it is not required.<br />\n<code>methodC</code> requires an implementation, thus is overridable.</p>\n<p>Interfaces are similar.</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface Example {\n    String stringA = &quot;stack&quot;;\n    String stringB = &quot;overflow&quot;;\n\n    private String methodA() {\n        return stringA + &quot; &quot; + stringB;\n    }\n\n    default int methodB(int value) {\n        return value + 100;\n    }\n\n    int methodC(int valueA, int valueB);\n}\n</code></pre>\n<p><code>methodA</code> cannot be overridden; it is marked as <code>private</code>.<br />\n<code>methodB</code> can optionally be overridden, although it is not required.<br />\n<code>methodC</code> requires an implementation, thus is overridable.</p>\n<p>For more information on this topic, see <a href=\"https://docs.oracle.com/javase/tutorial/java/IandI/override.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/java/IandI/override.html</a>.</p>\n<p>As a way to demonstrate the polymorphism of the <code>interface</code>, consider the following two implementing classes.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class ExampleImplA implements Example {\n    @Override\n    public int methodC(int valueA, int valueB) {\n        return valueA * valueB;\n    }\n}\n\nclass ExampleImplB implements Example {\n    @Override\n    public int methodC(int valueA, int valueB) {\n        return valueA - valueB;\n    }\n}\n</code></pre>\n<p>Now, from another class, if you created a list of <code>Example</code>'s, supplying a different implementation for each item, if you called <code>methodC</code> on each of the list items, a different implementation of <code>methodC</code> will be executed.</p>\n<pre class=\"lang-java prettyprint-override\"><code>void method() {\n    List&lt;Example&gt; list = new ArrayList&lt;&gt;();\n    list.add(new ExampleImplA());\n    list.add(new ExampleImplB());\n    for (Example example : list)\n        example.methodC(1, 2);\n}\n</code></pre>\n"}],"last_activity_date":1684372514,"question_id":76273764,"body":"<p>I'm studying OOP in Java, and i already understand the concepts about polymorphism and @override methods, but how one can be used without another?</p>\n<p>I would like to understand if there is an occasion of using polymorphism in which method overwriting is not used.</p>\n"},{"comments":[{"comment_id":18015478,"body":"Yes. you need to create then put them in their right packages."},{"comment_id":18015489,"body":"How have you imported the project to workspace?"},{"comment_id":18015505,"body":"yes I did , how do I add them in the right package ?"}],"answers":[{"comments":[{"comment_id":18015542,"body":"Ok then create a package with the required name and then move all those classes into that. I am surprised a working downloaded project wasnt already in the right package"},{"comment_id":18015613,"body":"so i created a new package src1 and moved it there compiling the program gives me thiss error Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: 0 \tat src1.STS.main(STS.java:23)"}],"answer_id":13226267,"body":"<p>I am not sure exactly what you have done.. But it looks like you havent imported it into the workspace correctly.</p>\n\n<p>If this is a project you have downloaded , just use import-> existing projects into workspace.</p>\n"},{"answer_id":13226340,"body":"<p>There is a </p>\n\n<blockquote>\n  <p>default package</p>\n</blockquote>\n\n<p>under the src and if you put classes under that it will works fine. The other solution is to create a project manually and add one class and copy paste individually which is not so pleasant. </p>\n"},{"comments":[{"comment_id":18015863,"body":"The you will have to configure libraries for the same."}],"answer_id":13226348,"body":"<p>I thik you will have to configure your source location for the project. Do the following thing stated in the image below. Click on \"Add Folder\" and the location of the source folder</p>\n\n<p><img src=\"https://i.stack.imgur.com/gg795.jpg\" alt=\"enter image description here\"></p>\n"},{"answer_id":28889524,"body":"<p>make sure your 'S' is capital in System.out.println();</p>\n"},{"answer_id":47335973,"body":"<p>It is happened because your class is not in correct package, you should put your class under defaults package then your issue will be fine; otherwise you should write in top of your class ,your package name for example \" mohsen package;\"    </p>\n"},{"answer_id":57557255,"body":"<p>You would have removed the package name in any of the class by mistake. Inspect all the classes for correct package name.</p>\n"}],"last_activity_date":1684371800,"question_id":13226238,"body":"<p><code>The declared package \"\" does not match the expected package \"src\"</code>\nI am trying to compile this program and I get the above error. \nI imported the project from the downloads folder and copied it to my workspace. Do i need to create a new package ? \n<img src=\"https://i.stack.imgur.com/JFDnf.jpg\" alt=\"screenshot\"></p>\n\n<p>What am i doing wrong ? </p>\n"},{"comments":[{"comment_id":134501049,"body":"The SAN (subject alternative name) is the <b>name</b> of the server in the TLS (SSL is <i>ancient</i>) certificate. You can <a href=\"https://stackoverflow.com/questions/6031258/java-ssl-how-to-disable-hostname-verification\">disable hostname verification</a>. Or you can modify DNS to actually resolve abc.xyz.com. This behavior is required by the protocol. And you&#39;d see a very similar message if you tried to access the URL in a browser."},{"comment_id":134502598,"body":"@ElliottFrisch: Thank you. I am using <code>HttpURLConnection</code> class in Java. I found that there is API available in <code>HttpsURLConnection</code> class to disable SSL validation."}],"answers":[{"answer_id":76277106,"body":"<p>The simplest way I found is to provide value <code>true</code> to <code>HttpsURLConnection.setHostnameVerifier()</code></p>\n<p>You need to override the method <code>public boolean verify(String hostname, SSLSession session)</code> for returning <code>true</code> everytime.</p>\n<p>Below is an example:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.lang.Exception;\nimport java.net.URL;\n\nimport javax.net.ssl.HostnameVerifier;\nimport javax.net.ssl.HttpsURLConnection;\nimport javax.net.ssl.SSLSession;\n\npublic class SkipVerification implements Runnable {\n\n    private static final String TAG = SkipVerification.class.toString();\n    private String server_port;\n    private String serverIP;\n\n    public SkipVerification(String serverIP, String server_port){\n        this.serverIP = serverIP;\n        this.server_port = server_port;\n    }\n\n    public void run() {\n        try {\n            HostnameVerifier hostnameVerifier = new HostnameVerifier() {\n                @Override\n                public boolean verify(String hostname, SSLSession session) {\n                    return true;\n                }\n            };\n\n            URL url = new URL(&quot;https://&quot; + serverIP + &quot;:&quot; + server_port + &quot;/json&quot;);\n            InputStream inStream = null;\n\n            try {\n                HttpsURLConnection urlConnection = (HttpsURLConnection)url.openConnection();\n                urlConnection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\n                urlConnection.setHostnameVerifier(hostnameVerifier);\n                inStream = urlConnection.getInputStream();\n                BufferedReader reader = new BufferedReader(new InputStreamReader(inStream));\n            } catch (Exception e) {\n                Log.e(TAG, &quot;error fetching data from server&quot;, e);\n            } finally {\n                if (inStream != null) {\n                    inStream.close();\n                }\n            }\n        } catch (Exception e) {\n            Log.e(TAG, &quot;error initializing SkipVerificationn thread&quot;, e);\n        }\n    }\n}\n</code></pre>\n<p>This works when using <code>HttpsURLConnection</code> class. For other implementation, please refer to comment to question by <strong>@Elliott Frisch</strong>.</p>\n"}],"last_activity_date":1684371596,"question_id":76270467,"body":"<p>I am connecting to a service through my Java code. Let's call FQDN or hostname of service as: <code>abc.xyz.com</code>.</p>\n<p>My Java implementation returns exception:</p>\n<pre><code>java.net.UnknownHostException: dfour6gtsg5a.streaming.us-phoenix-1.oci.oraclecloud.com\n    at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:567)\n    at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\n    at java.base/java.net.Socket.connect(Socket.java:633)\n    at java.base/sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:304)\n    at java.base/sun.security.ssl.BaseSSLSocketImpl.connect(BaseSSLSocketImpl.java:174)\n    at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183)\n    at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:532)\n    at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:637)\n    at java.base/sun.net.www.protocol.https.HttpsClient.&lt;init&gt;(HttpsClient.java:266)\n    at java.base/sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:380)\n    at \n</code></pre>\n<p>Now, when I include entry of FQDN of service and IPAddress in <code>/etc/hosts</code> as below:</p>\n<pre><code>127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4\n...\n100.70.125.57 abc.xyz.com\n</code></pre>\n<p>Same Java implementation works correctly as service FQDN get resolved to IP address correctly.</p>\n<p>If I try to run Java implementation with IPAddress, I get below error:</p>\n<pre><code>javax.net.ssl.SSLHandshakeException: No subject alternative names matching IP address 100.70.125.57 found\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:131)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:371)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:314)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:309)\n    at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(CertificateMessage.java:654)\n    at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(CertificateMessage.java:473)\n    at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(CertificateMessage.java:369)\n    at java.base/sun.security.ssl.SSLHandshake.consume(SSLHandshake.java:396)\n</code></pre>\n<p>In production environment, I will not have access to <code>/etc/hosts</code> for editing.</p>\n<p>How can I resolve the Service FQDN to the IPAddress inside my Java implementation?</p>\n"},{"answers":[{"answer_id":11148089,"body":"<p>I have found the solution after hours of fiddling. I am using VisualJVM now instead but they operate in the same way by connecting to a local socket and setting up a JMX connection.</p>\n\n<p>Firstly Both jvmmonitor/visualjm and your java app MUST be running under the same user.</p>\n\n<p>The user must have write access to the tmp directry on linux /tmp/.</p>\n\n<p>When any java app is launched a local file with the process PID for the java program is created in hsperfdata_myusername folder in tmp which is used by java profiling software to connect to the jvm running your java program.</p>\n\n<p>If you launch a java program from a terminal and the current directory of the terminal is not your home directory, eg. launching from  MYNAME:/home/myname/project/myjavaapp$ you may find that you can connect to the jvm but not be able to sample or profile it. Making the current directory your home directory should solve this problem. </p>\n"},{"answer_id":25016721,"body":"<p>You have to change the .ini file of Eclipse</p>\n\n<p>Just add:</p>\n\n<pre><code>-vm C:\\JavaJDK\\Java\\jdk1.6.0_01\\jre\\bin\\client\\jvm.dll\n</code></pre>\n\n<p>Here is the eclipse.ini file in full:</p>\n\n<pre><code>-startup\nplugins/org.eclipse.equinox.launcher_1.0.201.R35x_v20090715.jar\n--launcher.library\nplugins/org.eclipse.equinox.launcher.win32.win32.x86_1.0.200.v20090519\n-product\norg.eclipse.epp.package.jee.product\n--launcher.XXMaxPermSize\n256M\n-showsplash\norg.eclipse.platform\n--launcher.XXMaxPermSize\n256m\n-vm\nC:\\JavaJDK\\Java\\jdk1.6.0_01\\jre\\bin\\client\\jvm.dll\n-vmargs\n-Dosgi.requiredJavaVersion=1.5\n-Xms40m\n-Xmx512m\n</code></pre>\n"},{"answer_id":30327251,"body":"<p>This solution from the <a href=\"https://visualvm.java.net/troubleshooting.html\" rel=\"nofollow\">JVisualVM Troubleshooting Guide</a> also helps me for jvmmonitor:</p>\n\n<blockquote>\n  <p><strong>Local Applications Cannot Be Monitored</strong></p>\n  \n  <p><strong>Description:</strong> An error dialog saying that local applications cannot be\n  monitored is shown immediately after VisualVM startup. Locally running\n  Java applications are displayed as  (pid ###).</p>\n  \n  <p><strong>Resolution:</strong>  This can happen on Windows systems if the username\n  contains capitalized letters. In this case, username is <code>UserName</code> but\n  the jvmstat directory created by JDK is <code>%TMP%\\hsperfdata_username</code>. To\n  workaround the problem, exit all Java applications, delete the\n  <code>%TMP%\\hsperfdata_username</code> directory and create new\n  <code>%TMP%\\hsperfdata_UserName</code> directory.</p>\n</blockquote>\n"},{"answer_id":51706069,"body":"<p>Did you check the directive in this <a href=\"http://www.jvmmonitor.org/doc/#Cannot_Find_JVMs\" rel=\"nofollow noreferrer\">JVMMonitor's FAQ</a>?</p>\n\n<p>If the problem persists, run Eclipse as an Administrator, at least once after the installation of JVM Monitor plugin.</p>\n\n<p>This solved the problem for me.</p>\n"},{"answer_id":76277100,"body":"<p>after try the first solution (change ini file) it not worked\nand I just but the jdk path in the preferences :</p>\n<p><a href=\"https://i.stack.imgur.com/eTY8f.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eTY8f.png\" alt=\"enter image description here\" /></a></p>\n"}],"last_activity_date":1684371558,"question_id":11111653,"body":"<p>I am trying to use jvmmonitor to profile my app in eclipse but there are no jvms listed, not even the running eclipse jvm and when I start my app the new jvm does not appear. </p>\n\n<p><a href=\"http://www.jvmmonitor.org/doc/index.html#FAQ\" rel=\"nofollow\">The docs</a> say ></p>\n\n<blockquote>\n  <p>At least one JVM (Eclipse itself) should be shown on JVM Explorer. If no JVM is shown, it is likely that Eclipse is not started with supported JDK. For example, JRE might be used instead of JDK. \n  To solve the issue, \n   Check the value of system property java.home with Help > About Eclipse > Installation Details > Configuration. You may see that the supported JDK is not specified to java.home. \n   Close Eclipse. \n   To enforce using a desired JDK on Eclipse, specify the option -vm to the eclipse executable, or alternatively specify it in eclipse.ini. See the   Workbench User Guide to learn how to specify that option. \n   Start Eclipse.</p>\n</blockquote>\n\n<p>The java.home property in the eclipse config says /home/myname/programs/jdk/jre</p>\n\n<p>I have tried to change it but nothing will. my -vm is already set to the jdk directory and my linux .profile and .bashrc exports to the JAVA_HOME to the jdk directory but java.home in eclipse still says /home/myname/programs/jdk/jre</p>\n\n<p>I have also set the jdk root directory to /home/myname/programs/jdk/ in the java>monitor>tools  preferences page but still no luck.</p>\n\n<p>I have uninstalled jvmmonitor and reinstalled it completely but there is no change.</p>\n\n<p>I am running eclipse indigo with jdk 7 and jvmmonitor 3.8</p>\n\n<p>This is driving me nuts now, any ideas would be most welcome</p>\n\n<p>Thanks in advance</p>\n"},{"comments":[{"comment_id":134510001,"body":"If <code>getId</code> is returning <code>null</code> then check when it&#39;s assigned, in the <code>createRecord</code> method.  It sounds like the database call is returning <code>null</code>."},{"comment_id":134510016,"body":"I didn&#39;t explain it well. let me reword my question. I reworded my psuedo code."}],"answers":[{"comments":[{"comment_id":134517281,"body":"Thank you. This is what I was looking for. The thenAnswer examples I came across didn&#39;t address how to handle side effects of mocking an input mutation."}],"answer_id":76277091,"body":"<p>If you require some additional mocking behavior other than simply returning a value, you can use <code>thenAnswer</code> instead of <code>thenReturn</code> in your <code>when</code> mocking stub.</p>\n<p>I hope this (overly) simplified example helps:</p>\n<pre class=\"lang-java prettyprint-override\"><code>   @Mock\n   private Bar executor;\n\n   @Test\n   public void testMutation() {\n      Foo foo = new Foo();\n\n      when(executor.mutate(foo)).thenAnswer(a -&gt; {\n         int mockedId = 10;\n         Foo input = a.getArgument(0);\n         input.setId(mockedId); // mutate the parameter from the method signature\n         return mockedId;\n      });\n\n      executor.mutate(foo);\n      Assertions.assertEquals(10, foo.getId());\n   }\n\n   //---- boiler plate code of the DTO and method that mutates the value\n   public class Bar {\n\n      public int mutate(Foo input) {\n         input.setId(3);\n         return 3;\n      }\n   }\n\n   public class Foo {\n      private int id;\n\n      public int getId() {\n         return id;\n      }\n\n      public void setId(int id) {\n         this.id = id;\n      }\n   }\n</code></pre>\n"},{"comments":[{"comment_id":134517297,"body":"Thanks. This was what I was looking for. Hadnt used thenAnswer before."}],"answer_id":76277095,"body":"<p>My guess is that you are <strong>only mocking</strong> the <strong>value return</strong> but <strong>not the side effect</strong> inside the <strong>dao method</strong>. You are passing the <code>RecordDto</code> as parameter, doing something and also calling methods that modify the state of the parameter received. The solution for that would be to use <code>doAnswer</code> that lets you not only return a value, you can add some extra logic. So, your test should look like this:</p>\n<pre><code>@Test\npublic void test() {\n    dao = mock(Dao.class);\n    RecordDto input = new RecordDto();\n    Integer someRandomId = 15;\n    Integer randomRowsUpdated = 3;\n    Answer&lt;Integer&gt; answer = new Answer&lt;Integer&gt;() {\n        public Integer answer(InvocationOnMock invocation) {\n            RecordDto input = invocation.getArgument(0, RecordDto.class); // get the argument received in `createRecord`\n            input.setId(someRandomId); // set the new id\n            return randomRowsUpdated; // the value to be returned by `createdRecord`\n        }\n    };\n    doAnswer(answer).when(dao).createRecord(input); // using doAnswer instead of doReturn\n    createSomething(input);\n}\n</code></pre>\n<p>That would be the quick solution.</p>\n<p>I would say that this is not exactly the best approach. Doing side effects inside a method could cause bugs in a future and it will hard to know the root cause of the problem or even debug. Returning a <code>RecordDto</code> or another custom object that lets you now the new id and the affected rows or something similar will make your tests easier to setup and also make the assertion.</p>\n"}],"last_activity_date":1684371492,"question_id":76276868,"body":"<p>I am trying to mock a dao method that creates a record then sets the id on the input.</p>\n<p>here is some psuedo code</p>\n<p>sample test</p>\n<pre><code>RecordDto input = new RecordDto();\ninput.setId(null);\ninput.setName(&quot;test&quot;);\n\nwhen(dao.createRecord(any(RecordDto.class)).thenReturn(1);\n\ncreateSomething(input);\n</code></pre>\n<p>method to mock</p>\n<pre><code>public int createRecord(RecordDto input) {\n   int updatedRowCount = 0;\n   int primaryKey = db call to create record\n   rows += primary != null ? 1 : 0;\n   input.setId(primaryKey) &lt;-\n   return updateRowCount;\n}\n</code></pre>\n<p>class under test</p>\n<pre><code>public void createSomething(RecordDto input)\n   int rowsUpdated = dao.createRecord(input);\n   if (input.getId() != null) {\n      do something &lt;- this code can not be reached from my test\n      because my mock only sets the return value. It needs to also\n      modify the input.id.\n   }\n</code></pre>\n<p>Once the method is called in my real class input has an id. My mock just returns a 1 for the row count but the id is still null.</p>\n"},{"comments":[{"comment_id":80318550,"body":"It looks like <a href=\"https://blogs.msdn.microsoft.com/jdbcteam/2008/09/09/the-driver-could-not-establish-a-secure-connection-to-sql-server-by-using-secure-sockets-layer-ssl-encryption/\" rel=\"nofollow noreferrer\">SSL is mandatory for Microsoft SQL server</a>. Silly question: have you tried to a <a href=\"https://learn.microsoft.com/en-us/sql/connect/jdbc/connecting-with-ssl-encryption\" rel=\"nofollow noreferrer\">SSL-enabled</a> configuration?"},{"comment_id":80321471,"body":"Actually I haven&#39;t because at the moment I don&#39;t need SSL... I had no problem connecting to the same db with a glassfish-4 installation though."},{"comment_id":82233020,"body":"Exact same issue here (unable to upgrade to GlassFish 5.0 because of this, despite it working fine on 4.1.1), were you ever able to get this fixed?"},{"comment_id":82254619,"body":"Sorry, I never got the time to try it out again... I&#39;m stuck with 4.1.1 as well for now.."}],"answers":[{"comments":[{"comment_id":83437760,"body":"Unfortunately this does not work in my case.  The errors persist."}],"answer_id":47828264,"body":"<p>Facing also this issue with <em>Glassfish 5</em> on <em>Windows 10</em>, disabling elliptic curves did the trick, just add:</p>\n\n<pre><code>-Dcom.sun.net.ssl.enableECC=false\n</code></pre>\n\n<p>to glassfish JVM options and restart server.\nposted workaround on glassfish issue tracker to help them fix it quickly </p>\n"},{"answer_id":75885330,"body":"<p>this happens when password you have set in phpMyAdmin and in payara console is different, check the password\nfor that\ngo to xampp-&gt;Apache-&gt;config-&gt;config.inc.php\ncheck password in that file\nand keep the same password in payara or glassfish console.</p>\n"}],"last_activity_date":1684371254,"question_id":46683881,"body":"<p>I am trying to create a jdbc connection pool in glassfish 5 for a Microsoft SQL Server database. I am using the <code>mssql-jdbc-6.2.2.jre8.jar</code> and the latest SQLExpress server version (MSSQL14.SQLEXPRESS)</p>\n\n<p>Resource Type: <code>javax.sql.DataSource</code></p>\n\n<p>Datasource Classname: <code>com.microsoft.sqlserver.jdbc.SQLServerDataSource</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/7Sse7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7Sse7.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/7H5uO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7H5uO.png\" alt=\"enter image description here\"></a>\nThe connection pool is created successfully but when i try to ping, I get this error:</p>\n\n<blockquote>\n  <p>Ping Connection Pool failed for sql_tire_pool. Connection could not be\n  allocated because: The driver could not establish a secure connection\n  to SQL Server by using Secure Sockets Layer (SSL) encryption. Error:\n  \"Unsupported curveId: 29\".\n  ClientConnectionId:f86f1ef8-29c4-4e39-b112-f5da9cbfe13d Please check\n  the server.log for more details.</p>\n</blockquote>\n\n<p>And this is the server log:</p>\n\n<blockquote>\n  <p>[2017-10-11T10:55:11.747+0300] [glassfish 5.0] [WARNING]\n  [test.connection.pool.failed]\n  [javax.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.service]\n  [tid: _ThreadID=125 _ThreadName=admin-listener(7)] [timeMillis:\n  1507708511747] [levelValue: 900] [[   RAR8054: Exception while\n  creating an unpooled [test] connection for pool [ test_pool ],\n  Connection could not be allocated because: The driver could not\n  establish a secure connection to SQL Server by using Secure Sockets\n  Layer (SSL) encryption. Error: \"Unsupported curveId: 29\".\n  ClientConnectionId:4c325981-4c97-4db2-b4fb-f7aafca4f03b]]</p>\n  \n  <p>[2017-10-11T10:55:11.750+0300] [glassfish 5.0] [SEVERE] []\n  [org.glassfish.admingui] [tid: _ThreadID=51\n  _ThreadName=admin-listener(3)] [timeMillis: 1507708511750] [levelValue: 1000] [[   RestResponse.getResponse() gives FAILURE. \n  endpoint =\n  '<a href=\"http://localhost:4848/management/domain/resources/ping-connection-pool.json\" rel=\"nofollow noreferrer\">http://localhost:4848/management/domain/resources/ping-connection-pool.json</a>';\n  attrs = '{id=test_pool}']]</p>\n</blockquote>\n\n<p>I am running Windows 10 and also everything is running locally (Glassfish installation, SQL server)</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Using the accepted answer's solution, the problem is partially solved.The connection pool now successfuly pings the database, but I encounter the same problem as the same error is thrown in the glassfish log when my application tries to run a query through jpa/hibernate.</p>\n"},{"comments":[{"comment_id":134505985,"body":"You can use this answer to set whatever decimal separator you need <a href=\"https://stackoverflow.com/questions/5054132/how-to-change-the-decimal-separator-of-decimalformat-from-comma-to-dot-point\">How to change the decimal separator of DecimalFormat from comma to dot/point?</a>"},{"comment_id":134506061,"body":"<code>resultSigiop.getString(&quot;aaun_md_area&quot;)</code> should probably be <code>resultSigiop.getDouble(&quot;aaun_md_area&quot;)</code>. You are reading the value as a String from the database and writing that String straight to the file."}],"answers":[{"answer_id":76277048,"body":"<p>You could use the <code>String.replace</code> method, replacing a <code>.</code> with a <code>,</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>fw.append(resultSigiop.getString(&quot;aaun_md_area&quot;).replace('.', ','));\n</code></pre>\n"}],"last_activity_date":1684370666,"question_id":76274686,"body":"<p>I do a database search, assemble the columns and export a txt</p>\n<p>But in the column (&quot;aaun_md_area) that is a number, instead of a comma, a dot is being applied, making it difficult to count in excel.</p>\n<p>The column that is decimal that I need to change, is the &quot;aaun_md_area&quot; column</p>\n<p>How to export using a comma?</p>\n<pre><code>File arquivo = new File(path);\n try (FileWriter fw = new FileWriter(arquivo))\n    { fw.append(&quot;Witdh&quot;);\n      fw.append(&quot;Area&quot;);\n    }\n\nfor (int i = 0;i&lt;listaRt.length; i++){\n  rts.add(listaRt[i]);\n  ResultSet resultSigiop = stSigiop.executeQuery(sqlSigiop.replace(&quot;:1&quot;, \n  rts.toString().replace(&quot;[&quot;, &quot;&quot;).replace(&quot;]&quot;, &quot;&quot;)));\n       while(resultSigiop.next()) \n            {\n               fw.append(resultSigiop.getString(&quot;ssrt_cd_status_subitem_rt&quot;));\n               fw.append('\\t');\n               fw.append(resultSigiop.getString(&quot;aaun_md_area&quot;));\n               fw.append('\\n'); \n            }\n                fw.flush();\n                \n            } catch(IOException ex){\n                throw ex;\n            }\n            \n            rts = new ArrayList&lt;String&gt;();\n        }   \n        \n        fw.close();\n        \n    }\n    catch(IOException ex){\n        throw ex;\n    }\n    \n}\n</code></pre>\n"},{"answers":[{"answer_id":10404167,"body":"<p>I am going to make assumption - you would like to pass some parameter to the Webdriver. That can be done via two ways:</p>\n\n<ol>\n<li><p>Make class which extends Webdriver and make its constructor to have the parameter which you need to pass. However, this is the <strong>hard</strong> way, because you have to implement/override all (needed) functions from webdriver:</p>\n\n<pre><code>public class MyWebdriver extends Webdriver{\n      private String theParameter;\n\n     public MyWebdriver(String parameter){\n       //... initialize the Webdriver\n\n       //store the parameter\n       theParameter = parameter\n}\n</code></pre></li>\n<li><p>Make your own wrapper, which will contain instance off WebDriver. That is <strong>easy</strong>(-ier). For example: In my own tests, I need to tell the Webdriver which environment I am testing. So I created my own class for the Environment:</p>\n\n<pre><code>public class Environment{\n  private String baseUrl;\n  public enum NameOfEnvironment {DEV, ACC}\n  private NameOfEnvironment environment;\n\n  public Environment(NameOfEnvironment envName){\n     environment = envName;\n  }\n\n  public String getBaseUrl(){\n      switch (environment){\n         case DEV: baseUrl = \"https://10.10.11.12:9080/test/\";\n                   break;\n         case ACC: baseUrl = \"https://acceptance.our-official-site.com\";\n                   break;\n      }\n    return baseUrl;\n  }\n }\n</code></pre></li>\n</ol>\n\n<p>and then I have my own WebDriver wrapper, where I initialize it like this:</p>\n\n<pre><code>public class TestUI{\n      private Webdriver driver;\n      private Environment env;\n\n   public TestUI(Environment e){\n       this.env = e;\n       driver = new FirefoxDriver;\n       driver.get(env.getBaseUrl());\n   }\n}\n</code></pre>\n\n<p>And in the test:</p>\n\n<pre><code> public class TestCases{\n\n   public static final Environment USED_ENVIRONMENT = new Environment(Environment.NameOfEnvironment.ACC);\n\n @Test\n public void testSomething(){\n    testUI test = new testUI(USED_ENVIRONMENT);\n    //.. further steps\n }\n }\n</code></pre>\n"},{"answer_id":10408966,"body":"<p>My suggestion would be to try to use a testing framework (TestNG or Junit) which gives many more features than just parametrization.  Probably a little effort in setting up the framework in the beginning will save a lot of effort when your test code grows.</p>\n"},{"answer_id":10829112,"body":"<pre><code>public void property(){\n    try {\n\n        File file = new File(\"login.properties\");\n        FileInputStream fileInput = new FileInputStream(file);\n        Properties properties = new Properties();\n        properties.load(fileInput);\n        fileInput.close();\n\n        Enumeration enuKeys = properties.keys();\n        while (enuKeys.hasMoreElements()) {\n            String key = (String) enuKeys.nextElement();\n            String value = properties.getProperty(key);\n            driver.findElement(By.id(key)).sendKeys(value);\n            System.out.println(key + \": \" + value);\n        }\n    } catch (FileNotFoundException e) {\n        e.printStackTrace();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>and to pass the values from the properties file use property(); in main class. and execute </p>\n"},{"comments":[{"comment_id":16521382,"body":"You can use either JUnit or TestNG as test framework. What do you want to use? I prefer TestNG. If you use TestNG, you need to make an XML file e.g. testng.xml where you can specify data to parameterize using @Parameters annotation of TestNG (which has been mentioned in above snippet of code"}],"answer_id":11842780,"body":"<pre><code>@Parameters({ \"first-name\" })\n@Test\npublic void testSingleString(String firstName) {\n  System.out.println(\"Invoked testString \" + firstName);\n  assert \"Cedric\".equals(firstName);\n}\n</code></pre>\n\n<p>In this code, we specify that the parameter firstName of your Java method should receive the value of the XML parameter called first-name.  This XML parameter is defined in testng.xml:\n    \n      \n      \n      &lt;-- ... --></p>\n\n<p>For more details, please visit the following:\n<a href=\"http://testng.org/doc/documentation-main.html#parameters\" rel=\"nofollow\">http://testng.org/doc/documentation-main.html#parameters</a></p>\n"},{"answer_id":20993067,"body":"<p>Here i am providing a test case that might be helpful            </p>\n\n<pre><code> package pac1;\n import org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.support.ui.Wait;\nimport java.io.File;\nimport javax.xml.parsers.DocumentBuilder;\n  import javax.xml.parsers.DocumentBuilderFactory;\n import org.w3c.dom.*;\n\npublic class test extends sut  {\nstatic WebDriver driver;\nstatic Wait&lt;WebDriver&gt; wait;\n  public static boolean run(WebDriver driverArg, Wait&lt;WebDriver&gt; waitArg)\n{\n    driver = driverArg;\n    wait = waitArg;\n   // Run all the methods and return false if any fails\n    return (test1() );\n                  } \n   private static boolean test1()\n   {\n\n\n\n  driver.get(\"https://accounts.google.com\");\n\n    try {\n        File file = new File(\"emaildata.xml\"); //file location should be specified correctly put your xml in the same folder of the source code.\n        // Prepare XML\n        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\n        DocumentBuilder db = dbf.newDocumentBuilder();\n        Document document = db.parse(file);\n        document.getDocumentElement().normalize();\n        NodeList emailNodeElementList = document.getElementsByTagName(\"test\");//test is the name of the child tag \n        for(int j=0;j&lt;emailNodeElementList.getLength(); j++)//loop for the multiple data\n    {\n       String client = \"The username or password you entered is incorrect. ?\";\n        Element emailNodeElement = (Element)emailNodeElementList.item(j);\n        NodeList details = emailNodeElement.getChildNodes();\n        String emailAddress=((Node) details.item(0)).getNodeValue();\n        System.out.println(\"email :\" + emailAddress);//it just prints which email is going to be parsed\n        WebElement element = driver.findElement(By.cssSelector(\"body\"));\n            boolean feedBack = driver.findElement(By.cssSelector(\"body\")).getText().contains(client);\n            boolean feedbackVisible = element.isDisplayed();\n\n\n    WebElement e1 = driver.findElement(By.id(\"Email\"));//getting the location from the web\n    e1.sendKeys(emailAddress);//sending keys to the server\n    WebElement e3 = driver.findElement(By.id(\"signIn\"));\n    e3.click();\n\n\n    if(feedBack==true){\n        System.out.println(client+ \"is present\");\n        if(feedbackVisible==true){\n            System.out.println(client+ \"is visible\");\n        }\n        else{\n            System.out.println(client+ \"is not visible\");\n        }\n\n    }\n    else{\n        System.out.println(client+ \"is not present\");\n\n    }\n    }\n  }\n catch (Exception e) {e.printStackTrace();}\n\n  return true;\n  }}\n</code></pre>\n"},{"answer_id":47057904,"body":"<pre><code>/* You can pass parameters by creating two classes.\nThe first class, which you can call Main Class, will be public static void.\nIt will contain code such as:\n*/\nWebDriver driver = new FirefoxDriver();\ndriver.get(\"https://www.google.com\");\nParameters id = new Parameters();   //this is referring to second class\ndriver.findElement(By.name(\"q\")).sendKeys(id.x);\n//****************************************************************\n//this is the second class [separate page] - here you can declare int or string varibale as public [so you can share them with other class while defining them]  - \n//when you make this class - don't need to add public static void\n\npublic String x = \"username\"\n//if you look at the first page, I'm passing this string in the main script\n</code></pre>\n"},{"comments":[{"comment_id":98516115,"body":"String Username = read.readData(&quot;Sheet1&quot;, 1, 2); \t\tdriver.findElement(By.id(&quot;ap_email&quot;)).sendKeys(Username); \t\tdriver.findElement(By.id(&quot;continue&quot;)).click(); \t\t \t\tString Password = read.readData(&quot;Sheet1&quot;, 1, 3); \t\tdriver.findElement(By.id(&quot;ap_password&quot;)).sendKeys(Password&zwnj;&#8203;);"},{"comment_id":98516380,"body":"Thanks for contribution to SO. Please take time and visit <a href=\"https://stackoverflow.com/help/answering\">SO Answering Help</a>. You should explain why you think this is a right answer"}],"answer_id":55931504,"body":"<pre><code>public class ReadExcel {\n       public String readData (String strSheetName, int strRowNo, int strCellNo) throws Exception {\n\n              FileInputStream fis = new FileInputStream(\"D:\\\\Selenium\\\\TestData.xlsx\");\n              Workbook wb = WorkbookFactory.create(fis);\n              Sheet sh = wb.getSheet(strSheetName);\n              Row rw = sh.getRow(strRowNo);\n              String val = rw.getCell(strCellNo).getStringCellValue();\n\n              return val;\n\n              }\n\n}\n</code></pre>\n"}],"last_activity_date":1684368235,"question_id":10397117,"body":"<p>How to do parameterization in Selenium 2 (WebDriver)? I use Eclipse with maven plugins and I have no previous experience on Selenium Webdriver. When I google for it then every thing shows about testNG and JUnit. Is there any method through which we can parameterized the Webdriver?</p>\n"},{"comments":[{"comment_id":45187009,"body":"A typical screen hat appx. 72 dpi. A typical printer may have 720 dpi. So in order to exploit the printer resolution, you&#39;ll have to increase the image size significantly (probably: As high as possible without causing an OutOfMemoryError...)"},{"comment_id":45187258,"body":"i made that by doing this:  size.width *= 5; size.height *= 5;  The initial image had resolution: 594 X 840 and size 38.7KB, and the new image has resolution 2970 X 4200 and size 3.67 MB, but the same low quality.."},{"comment_id":45187711,"body":"You&#39;re capturing the image @ 72dpi...scaling it is only going to make it look worse"},{"comment_id":45187749,"body":"A better solution be to actually use the printer api and print the contents to PDF, maybe even consider using something like Jasper Reports"},{"comment_id":45189598,"body":"How can i capturate the image as 90dp or bigger..?"},{"comment_id":45189832,"body":"You could export to a vector rather than png or jpg - that way you get your high resolution whatever the scale.  There&#39;s a method in the accepted answer <a href=\"http://stackoverflow.com/questions/811916/export-jpanel-to-vector-graphics\">here</a>.  Good output options are eps or pdf as suggested by @MadProgrammer.  SVG also good, but not all programs will open them. If you have a reason to have png - I think you might be best to get rid of that class you have found - it will always output the image at screen resolution and as mentioned, simply scaling it up to scale it down won&#39;t help."},{"comment_id":45189916,"body":"I was about to go into details of getting higher resolution png, when googling &quot;jpanel paint resolution&quot; <a href=\"http://stackoverflow.com/a/26923692/838992\">revealed this answer</a>.  As your image is mostly text, you&#39;d be best to used the third option presented in that answer."},{"comment_id":45190508,"body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/26923282/getting-high-resolution-image-from-jpanel\">Getting High Resolution Image from JPanel</a>"},{"comment_id":45190955,"body":"This isn&#39;t what i need: <a href=\"http://stackoverflow.com/questions/26923282/getting-high-resolution-image-from-jpanel\" title=\"getting high resolution image from jpanel\">stackoverflow.com/questions/26923282/&hellip;</a>  . This link works good for images, but i have a lot of JLabels and the text of JLabels is loosing the quality. I need a solution to increase the quality of text. I will try to export to a Vector.."},{"comment_id":45211173,"body":"@Ghita You really need to get away from the components and use the print api and render the output directly with the Graphics API, this is capable of printing at a much higher dpi, but you&#39;ll need a PDF or image printer driver"},{"comment_id":45225719,"body":"@MadProgrammer i don&#39;t know how to do that....Could you give me an example? Thank you!"},{"comment_id":45233633,"body":"What&#39;s the code for the panel look like...really don&#39;t want to try and replicate all myself"},{"comment_id":45279592,"body":"Are you sure the third option on the answer quoted doesn&#39;t work for you?  Here&#39;s an example of it I knocked up <a href=\"https://www.dropbox.com/s/t8wfwoh3y27jigp/Test.png?dl=0\" rel=\"nofollow noreferrer\">png</a> - full code <a href=\"https://www.dropbox.com/s/fvj2lc3d9mhpopy/PanelRenderer.java?dl=0\" rel=\"nofollow noreferrer\">here</a>.  You can see the text in the output png can be displayed really quite big with v. little feathering on the edges.  Obviously I still support export as vector as best option and second @MadProgrammer request to link to your panel as is so we don&#39;t have to replicate."},{"comment_id":45279896,"body":"@JRichardSnape you&#39;re the best!!!!!!!!!!! The code works very good!! Thank you a lot for this!! You are the best!"}],"answers":[{"answer_id":28492187,"body":"<p>Let's start with the obvious...</p>\n<ul>\n<li>A A4 sheet of paper is 21.0cm x 29.7cm.</li>\n<li>At 300dpi, that makes it 2480.315x3507.874 pixels</li>\n<li>At 72dpi, that makes it 595.2756x841.8898 pixels</li>\n</ul>\n<p>Why's this important?  Java renders to the screen at 72dpi, but is capable of printing at 300dpi (above and below, but this is nice figure).  This means, roughly, you'd to scale the screen image UP by 4 times.  Up scaling is never pleasant, as demonstrated <a href=\"https://stackoverflow.com/questions/26923282/getting-high-resolution-image-from-jpanel/26923692#26923692\">here</a></p>\n<p>A better solution would be work with the printer DPI and scale the image down to the screen.</p>\n<p>For convenience sake, you can use something like...</p>\n<pre><code>public static final float CM_PER_INCH = 0.393700787f;\n\npublic static float cmsToPixel(float cms, float dpi) {\n    return cmToInches(cms) * dpi;\n}\n\npublic static float cmToInches(float cms) {\n    return cms * CM_PER_INCH;\n}\n</code></pre>\n<p>To convert from cm's to pixels at a given DPI.</p>\n<p>Now to the fun part.  You &quot;could&quot; use Swing components to render the basic layout, it might be easier, but you'd have to scale the graphics down, as the core printer API assumes a DPI of 72 (don't ask).  Now scaling down generally results in a better output, but there is another solution.</p>\n<p>Instead, you could use the Graphics 2D API and generate the output yourself...</p>\n<pre><code>public static class Ticket {\n\n    public enum TextAlignment {\n\n        LEFT,\n        RIGHT,\n        CENTRE\n    }\n\n    protected static final int STUB_NUMBER_Y_POS = 12;\n\n    private Font plainFont;\n    private Font boldFont;\n\n    private Stroke dashedStroke;\n\n    public void paint(Graphics2D g2d, double pageWidth, double pageHeight, int stubNumber) {\n        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\n        g2d.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);\n        g2d.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);\n        g2d.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);\n        g2d.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\n        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n        g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\n\n        paintLeftStub((Graphics2D) g2d.create(), pageWidth, pageHeight, stubNumber);\n        paintBody((Graphics2D) g2d.create(), pageWidth, pageHeight, stubNumber);\n        paintRightStub((Graphics2D) g2d.create(), pageWidth, pageHeight, stubNumber);\n        paintEndStub((Graphics2D) g2d.create(), pageWidth, pageHeight, stubNumber);\n\n        g2d = (Graphics2D) g2d.create();\n        g2d.setColor(Color.GRAY);\n        g2d.setStroke(getDashedStroke());\n        g2d.draw(new Line2D.Double(0, pageHeight - 1, pageWidth, pageHeight - 1));\n        g2d.dispose();\n\n    }\n\n    protected void paintLeftStub(Graphics2D graphics, double pageWidth, double pageHeight, int stubNumber) {\n\n        graphics.setColor(Color.BLACK);\n        double stubWidth = pageWidth / 4;\n\n        Graphics2D g2d = (Graphics2D) graphics.create();\n\n        Font font = getBoldFont().deriveFont(18f);\n        g2d.setFont(font);\n        FontMetrics fm = g2d.getFontMetrics();\n\n        // Did mention I hate doing inline transformations :P\n        g2d.rotate(Math.toRadians(-90), stubWidth / 2, pageHeight / 2);\n        g2d.translate(0, -((stubWidth - pageHeight) / 2));\n\n        String lines[] = {&quot;MORATUFIESTA&quot;, &quot;&quot;, &quot;Sat. 3 Auguest 2015&quot;, &quot;Adult - $3&quot;};\n        double x = 2;\n        double y = 0;\n        double maxWidth = 0;\n        for (String text : lines) {\n\n            x = calculateHorizontalCenterPositionFor(text, fm, stubWidth);\n            maxWidth = Math.max(maxWidth, fm.stringWidth(text));\n            g2d.drawString(text, (int) Math.round(x), (int) Math.round(y + fm.getAscent()));\n            y += fm.getHeight();\n\n        }\n        double blockWidth = y;\n\n        // Easier then trying to undo the transformation...\n        g2d.dispose();\n        g2d = (Graphics2D) graphics.create();\n\n        String text = &quot;Low&quot;;\n\n        font = getPlainFont().deriveFont(6f);\n        g2d.setFont(font);\n        fm = g2d.getFontMetrics();\n        double xPos = calculateHorizontalCenterPositionFor(text, fm, blockWidth) + 2;\n        double yPos = (pageHeight - maxWidth) / 2;\n        g2d.drawString(text, (int) Math.round(xPos), (int) Math.round(yPos - fm.getAscent()));\n        g2d.setStroke(getDashedStroke());\n        g2d.draw(new Line2D.Double(stubWidth, 0, stubWidth, pageHeight));\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        drawStubNumber(g2d, stubWidth - 8 - fm.getHeight() - fm.getAscent(), STUB_NUMBER_Y_POS, stubNumber);\n        g2d.dispose();\n\n    }\n\n    protected Stroke getDashedStroke() {\n\n        if (dashedStroke == null) {\n\n            float dash[] = {10.0f};\n            dashedStroke = new BasicStroke(1, BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND, 10f, dash, 0.0f);\n\n        }\n\n        return dashedStroke;\n\n    }\n\n    public Font getPlainFont() {\n\n        if (plainFont == null) {\n\n            plainFont = UIManager.getFont(&quot;Label.font&quot;);\n\n        }\n\n        return plainFont;\n\n    }\n\n    public Font getBoldFont() {\n\n        if (boldFont == null) {\n\n            boldFont = getPlainFont();\n            boldFont = boldFont.deriveFont(Font.BOLD);\n\n        }\n\n        return boldFont;\n\n    }\n\n    protected double calculateHorizontalCenterPositionFor(String text, FontMetrics fm, double width) {\n        return (width - fm.stringWidth(text)) / 2d;\n    }\n\n    protected void paintBody(Graphics2D graphics, double pageWidth, double pageHeight, int stubNumber) {\n\n        int padding = 8;\n        double xOffset = pageWidth / 4d;\n        \n        graphics.setColor(Color.BLACK);\n\n        double bodyWidth = (pageWidth / 2d);\n        Graphics2D g2d = (Graphics2D) graphics.create();\n        g2d.translate(xOffset, 0);\n        g2d.setFont(getPlainFont().deriveFont(12f));\n        FontMetrics fm = g2d.getFontMetrics();\n        String text = &quot;Moratu Fiesta&quot;;\n        double xPos = bodyWidth - fm.stringWidth(text) - padding;\n        double yPos = padding;\n\n        g2d.drawString(text, (int) Math.round(xPos), (int) Math.round(yPos + fm.getAscent()));\n        g2d.dispose();\n\n        Font plainFont = getPlainFont().deriveFont(9.5f);\n        TextLine[] addressLines01 = new TextLine[]{\n            new TextLine(&quot;61 Railway Pde North&quot;, plainFont),\n            new TextLine(&quot;Glen Waverley&quot;, plainFont),\n            new TextLine(&quot;03 9836 8673&quot;, plainFont)\n        };\n        TextLine[] addressLines02 = new TextLine[]{\n            new TextLine(&quot;1120, Glen Huntly&quot;, plainFont),\n            new TextLine(&quot;Glen Huntly&quot;, plainFont),\n            new TextLine(&quot;03 9571 5544&quot;, plainFont)\n        };\n        TextLine[] sponsorLines = new TextLine[]{\n            new TextLine(&quot;Proudly supported by&quot;, plainFont),\n            new TextLine(&quot;Quality Groceries&quot;, plainFont.deriveFont(Font.BOLD)),\n            new TextLine(&quot;Visit for all your grocery needs&quot;, plainFont)\n        };\n\n        Area area = new Area();\n        addTo(g2d, area, addressLines01);\n        addTo(g2d, area, addressLines02);\n        addTo(g2d, area, sponsorLines);\n        int height = area.getBounds().height;\n        double bottomBlockYPos = pageHeight - height - padding;\n\n        g2d = (Graphics2D) graphics.create();\n        g2d.translate(xOffset, 0);\n        drawTextLines(g2d, padding, bottomBlockYPos, bodyWidth - (padding * 2), TextAlignment.LEFT, addressLines01);\n        drawTextLines(g2d, padding, bottomBlockYPos, bodyWidth - (padding * 2), TextAlignment.CENTRE, sponsorLines);\n        drawTextLines(g2d, padding, bottomBlockYPos, bodyWidth - (padding * 2), TextAlignment.RIGHT, addressLines02);\n        g2d.dispose();\n\n        plainFont = getPlainFont().deriveFont(10f);\n        TextLine[] textLines = new TextLine[]{\n            new TextLine(&quot;On Saturday, August 3, 2013 from 6.30pm till midnight&quot;, plainFont.deriveFont(Font.BOLD)),\n            new TextLine(&quot;At 21, Sacred Heart Parish Hall, Johnson Street, Oakleigh&quot;, plainFont)\n        };\n        int blockHeight = getSizeFor(g2d, textLines).height;\n        double mainBlockYPos = (pageHeight - blockHeight) / 2;\n\n        g2d = (Graphics2D) graphics.create();\n        g2d.translate(xOffset, 0);\n        drawTextLines(g2d, 0, mainBlockYPos, bodyWidth, TextAlignment.CENTRE, textLines);\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        g2d.translate(xOffset, 0);\n        Font boldFont = getBoldFont().deriveFont(9f);\n        double upperYPos = (mainBlockYPos + blockHeight);\n        double middleBlockYPos = upperYPos + ((bottomBlockYPos - upperYPos) / 2) - (g2d.getFontMetrics(boldFont).getHeight() / 2);\n        drawTextLines(g2d, padding, middleBlockYPos, bodyWidth - (padding * 2), TextAlignment.LEFT, new TextLine(&quot;Melway Ref, 69 FB&quot;, boldFont));\n        drawTextLines(g2d, padding, middleBlockYPos, bodyWidth - (padding * 2), TextAlignment.CENTRE, new TextLine(&quot;Music by REDEMPTION&quot;, boldFont));\n        drawTextLines(g2d, padding, middleBlockYPos, bodyWidth - (padding * 2), TextAlignment.RIGHT, new TextLine(&quot;Donations $30&quot;, boldFont));\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        g2d.translate(xOffset, 0);\n        g2d.setStroke(getDashedStroke());\n        g2d.draw(new Line2D.Double(bodyWidth, 0, bodyWidth, pageHeight));\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        drawStubNumber(g2d, padding + xOffset, STUB_NUMBER_Y_POS, stubNumber);\n        g2d.dispose();\n\n    }\n\n    protected void drawStubNumber(Graphics2D g2d, double x, double y, int stubNumber) {\n\n        Font font = getBoldFont().deriveFont(18f);\n        g2d.setFont(font);\n        FontMetrics fm = g2d.getFontMetrics();\n\n        String text = Integer.toString(stubNumber);\n\n        g2d.translate(x, y);\n        g2d.rotate(Math.toRadians(-90), fm.stringWidth(text) / 2, fm.getHeight() / 2);\n\n        g2d.drawString(text, 0, fm.getAscent());\n        g2d.dispose();\n    }\n\n    protected void paintRightStub(Graphics2D graphics, double pageWidth, double pageHeight, int stubNumber) {\n\n        graphics.setColor(Color.BLACK);\n        \n        int padding = 8;\n        double xOffset = (pageWidth / 4d) * 3;\n        double stubWidth = (pageWidth / 4d) / 2;\n\n        Graphics2D g2d = (Graphics2D) graphics.create();\n        g2d.translate(xOffset, 0);\n        g2d.setStroke(getDashedStroke());\n        g2d.draw(new Line2D.Double(stubWidth, 0, stubWidth, pageHeight));\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        drawStubNumber(g2d, padding + xOffset, STUB_NUMBER_Y_POS, stubNumber);\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        String text = &quot;Cafe Little Hut&quot;;\n        Font font = getPlainFont().deriveFont(23f);\n        g2d.setFont(font);\n        FontMetrics fm = g2d.getFontMetrics();\n\n        double x = xOffset + ((stubWidth - fm.stringWidth(text)) / 2d);\n        double y = ((pageHeight - fm.getHeight()) / 2d);\n\n        g2d.translate(x, y);\n        g2d.rotate(Math.toRadians(-90), fm.stringWidth(text) / 2, fm.getHeight() / 2);\n\n        g2d.drawString(text, 0, fm.getAscent());\n\n        g2d.dispose();\n\n    }\n\n    protected void paintEndStub(Graphics2D graphics, double pageWidth, double pageHeight, int stubNumber) {\n\n        graphics.setColor(Color.BLACK);\n        \n        int padding = 8;\n        double stubWidth = (pageWidth / 4d) / 2;\n        double xOffset = ((pageWidth / 4d) * 3 + stubWidth);\n\n        Graphics2D g2d = (Graphics2D) graphics.create();\n        g2d.translate(xOffset, 0);\n        g2d.setStroke(getDashedStroke());\n        g2d.draw(new Line2D.Double(stubWidth, 0, stubWidth, pageHeight));\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        drawStubNumber(g2d, padding + xOffset, STUB_NUMBER_Y_POS, stubNumber);\n        g2d.dispose();\n\n        g2d = (Graphics2D) graphics.create();\n        String text = &quot;Entrance&quot;;\n        Font font = getBoldFont().deriveFont(32f);\n        g2d.setFont(font);\n        FontMetrics fm = g2d.getFontMetrics();\n\n        double x = xOffset + ((stubWidth - fm.stringWidth(text)) / 2);\n        double y = ((pageHeight - fm.getHeight()) / 2);\n\n        g2d.translate(x, y);\n        g2d.rotate(Math.toRadians(-90), fm.stringWidth(text) / 2, fm.getHeight() / 2);\n\n        g2d.drawString(text, 0, fm.getAscent());\n\n        g2d.dispose();\n\n    }\n\n    protected Dimension drawTextLines(Graphics2D g2d, double xPos, double yPos, double width, TextAlignment textAlignment, TextLine... textLines) {\n\n        Area area = new Area();\n\n        for (TextLine textLine : textLines) {\n            g2d.translate(xPos, yPos);\n            Dimension size = textLine.getBounds(g2d);\n            textLine.paint(g2d, width, textAlignment);\n            area.add(new Area(new Rectangle2D.Double(xPos, yPos, size.width, size.height)));\n            g2d.translate(-xPos, -yPos);\n            yPos += size.height;\n        }\n\n        return area.getBounds().getSize();\n\n    }\n\n    protected void addTo(Graphics2D g2d, Area area, TextLine... textLines) {\n\n        area.add(new Area(new Rectangle(getSizeFor(g2d, textLines))));\n\n    }\n\n    protected Dimension getSizeFor(Graphics2D g2d, TextLine... textLines) {\n\n        int yPos = 0;\n        int width = 0;\n        for (TextLine textLine : textLines) {\n            Dimension size = textLine.getBounds(g2d);\n            yPos += size.height;\n            width = Math.max(size.width, width);\n        }\n\n        return new Dimension(width, yPos);\n\n    }\n\n    protected class TextLine {\n\n        private String text;\n        private Font font;\n\n        public TextLine(String text, Font font) {\n            this.text = text;\n            this.font = font;\n        }\n\n        public String getText() {\n            return text;\n        }\n\n        public Font getFont() {\n            return font;\n        }\n\n        public Dimension getBounds(Graphics2D g2d) {\n            FontMetrics fm = g2d.getFontMetrics(getFont());\n            return new Dimension(fm.stringWidth(text), fm.getHeight());\n        }\n\n        public void paint(Graphics2D g2d, double width, TextAlignment textAlignment) {\n            Dimension bounds = getBounds(g2d);\n            FontMetrics fm = g2d.getFontMetrics(getFont());\n            g2d.setFont(font);\n            double x = 0;\n            switch (textAlignment) {\n                case CENTRE:\n                    x = (width - bounds.width) / 2;\n                    break;\n                case RIGHT:\n                    x = width - bounds.width;\n                    break;\n            }\n            g2d.drawString(getText(), (int) Math.round(x), fm.getAscent());\n        }\n\n    }\n\n}\n</code></pre>\n<p>Why would you do that?  It's easier to wrap a <code>Printable</code> around and print to a printer and you can also &quot;paint&quot; to a component (or image)</p>\n<p>For example...</p>\n<pre><code>public class TicketPrintable implements Printable {\n\n    private Ticket ticket;\n\n    public TicketPrintable(Ticket ticket) {\n        this.ticket = ticket;\n    }\n\n    @Override\n    public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {\n        int result = NO_SUCH_PAGE;\n        if (pageIndex == 0) {\n            Graphics2D g2d = (Graphics2D) graphics;\n            double width = pageFormat.getImageableWidth();\n            double height = pageFormat.getImageableHeight();\n\n            g2d.translate((int) pageFormat.getImageableX(),\n                            (int) pageFormat.getImageableY());\n            \n            double ticketHeight = height / 4d;\n            for (int index = 0; index &lt; 4; index++) {\n            \n                ticket.paint(g2d, width, ticketHeight, index + 1);\n                g2d.translate(0, ticketHeight);\n                \n            }\n\n            result = PAGE_EXISTS;\n        }\n        return result;\n    }\n\n}\n</code></pre>\n<p>And to print it, you would use something like...</p>\n<pre><code>PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();\naset.add(MediaSizeName.ISO_A4);\naset.add(new PrinterResolution(300, 300, PrinterResolution.DPI));\naset.add(new MediaPrintableArea(0, 0, 210, 297, MediaPrintableArea.MM));\n\nPrinterJob pj = PrinterJob.getPrinterJob();\npj.setPrintable(new TicketPrintable(new Ticket()));\n\nif (pj.printDialog(aset)) {\n    try {\n        pj.print(aset);\n    } catch (PrinterException ex) {\n        ex.printStackTrace();\n    }\n}\n</code></pre>\n<p>On the screen it looks like...</p>\n<p><img src=\"https://i.stack.imgur.com/Nx6k7.png\" alt=\"Screen\" /></p>\n<p>On paper it looks like (scaled down for SO)</p>\n<p><img src=\"https://i.stack.imgur.com/4o5EF.png\" alt=\"Printed\" /></p>\n<p>Now having said that, I would strongly encourage you to learn JasperReports, which makes this all so much simpler...</p>\n<p><strong>Updated</strong></p>\n<p>So, I was sitting in traffic and thought to myself, I wonder if I can just use scaling to render the <code>Ticket</code> to an image, so I thought I'd give it a try...</p>\n<p>The top image is 72dpi, the bottom image is scaled to 300dpi</p>\n<p><img src=\"https://i.stack.imgur.com/o2ANT.png\" alt=\"ScaleComparison\" /></p>\n<pre><code>double pageWidth = cmsToPixel(21.0f, 300f);\ndouble pageHeight = cmsToPixel(29.7f, 300f);\ndouble imageWidth = cmsToPixel(21.0f, 72f);\ndouble imageHeight = cmsToPixel(29.7f, 72f);\n\ndouble scaleFactor = ImageUtilities.getScaleFactorToFit(\n        new Dimension((int) Math.round(imageWidth), (int) Math.round(imageHeight)),\n        new Dimension((int) Math.round(pageWidth), (int) Math.round(pageHeight)));\n\nint width = (int) Math.round(pageWidth);\nint height = (int) Math.round(pageHeight);\n\nBufferedImage img = new BufferedImage(\n        width,\n        height,\n        BufferedImage.TYPE_INT_ARGB);\nGraphics2D g2d = img.createGraphics();\ng2d.setColor(Color.WHITE);\ng2d.fill(new Rectangle2D.Double(0, 0, img.getWidth(), img.getHeight()));\ng2d.scale(scaleFactor, scaleFactor);\n\nTicket ticket = new Ticket();\nticket.paint(g2d, img.getWidth() / scaleFactor, (img.getHeight() / scaleFactor) / 4, 1);\ng2d.dispose();\n\ntry {\n    ImageIO.write(img, &quot;png&quot;, new File(&quot;Ticket.png&quot;));\n} catch (IOException ex) {\n    ex.printStackTrace();\n}\n</code></pre>\n<p>Scale factor algorithms</p>\n<pre><code>public static double getScaleFactorToFit(Dimension original, Dimension toFit) {\n\n    double dScale = 1d;\n\n    if (original != null &amp;&amp; toFit != null) {\n\n        double dScaleWidth = getScaleFactor(original.width, toFit.width);\n        double dScaleHeight = getScaleFactor(original.height, toFit.height);\n\n        dScale = Math.min(dScaleHeight, dScaleWidth);\n\n    }\n\n    return dScale;\n\n}\n\n\npublic static double getScaleFactor(int iMasterSize, int iTargetSize) {\n\n    double dScale = 1;\n    if (iMasterSize &gt; iTargetSize) {\n\n        dScale = (double) iTargetSize / (double) iMasterSize;\n\n    } else {\n\n        dScale = (double) iTargetSize / (double) iMasterSize;\n\n    }\n\n    return dScale;\n\n}\n</code></pre>\n<p><strong>Note:</strong> This is only really going to work for text and primitive graphics, you put an image into this and it won't work, the image will be scaled up and look crappy, as demonstrated in the linked answer from before.  In that case, you'd have to design the form to render at 300+dpi and scale the image down to 72dpi</p>\n"}],"last_activity_date":1684368020,"question_id":28427566,"body":"<p>I am trying to save a JPanel as Image (Png, Jpg, whatever) but with Graphics2D the Quality is very low. My JPanel contains mostly text and  I want to print the panel 4 times on a A4 paper size, so that it fills the page.\nBut the text is like washed-out when i print the image. I tried to create an A3 image then print it to the smaller A4 size. The quality increases very little, almost insignificantly.</p>\n\n<p>Here is the function i use to generate the image, based on this ScreenImage.Class i found <a href=\"https://tips4java.wordpress.com/2008/10/13/screen-image/\" rel=\"nofollow\">here</a> :</p>\n\n<pre><code>public void exportToPNG(JRootPane panel){\n    Dimension size = panel.getSize();\n    BufferedImage image = new BufferedImage(\n            size.width, size.height * 4 /* use the same image 4 times */\n            , BufferedImage.TYPE_INT_RGB);\n    Graphics2D g2 = image.createGraphics();\n\n    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n    g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\n    g2.setRenderingHint(RenderingHints.KEY_ALPHA_INTERPOLATION, RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY);\n    g2.setRenderingHint(RenderingHints.KEY_COLOR_RENDERING, RenderingHints.VALUE_COLOR_RENDER_QUALITY);\n    g2.setRenderingHint(RenderingHints.KEY_DITHERING, RenderingHints.VALUE_DITHER_ENABLE);\n    g2.setRenderingHint(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY);\n    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n    g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);\n    g2.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BICUBIC);\n\n    g2.drawImage(ScreenImage.createImage(panel), 0, 0, size.width, size.height, null);\n    g2.drawImage(ScreenImage.createImage(panel), 0, size.height, size.width, size.height, null);\n    g2.drawImage(ScreenImage.createImage(panel), 0, size.height * 2, size.width, size.height, null);\n    g2.drawImage(ScreenImage.createImage(panel), 0, size.height * 3, size.width, size.height, null);\n\n\n    try{\n        ImageIO.write(image, \"png\", new File(\"D:\\\\test-image.png\"));\n\n    }\n    catch(Exception e)\n    {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>Here is a sample image i generated:\n<a href=\"http://i.stack.imgur.com/MshWC.png\" rel=\"nofollow\">click the link..</a></p>\n\n<p>You should see that washed-out effect on the image even when zooming-in a little.</p>\n\n<p>Is there a way to increase the quality? or a dedicated library?</p>\n"},{"comments":[{"comment_id":134510343,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/41462913/mockito-verify-that-a-specific-lambda-has-been-passed-as-an-argument-in-mocks-m\">Mockito verify that a specific lambda has been passed as an argument in mock&#39;s method</a>"},{"comment_id":134511928,"body":"What do you mean by &quot;I can&#39;t perform any verify() on the headers() function.&quot; I don&#39;t see any verify in your question, and you haven&#39;t explained what happens when you call it."},{"comment_id":134552715,"body":"Thank you Gast&#243;n. You are right, that answered my question."},{"comment_id":134552723,"body":"This answers my question <a href=\"https://stackoverflow.com/questions/41462913/mockito-verify-that-a-specific-lambda-has-been-passed-as-an-argument-in-mocks-m\">https://stackoverflow.com/questions/41462913/mockito-verify-&zwnj;&#8203;that-a-specific-lamb&zwnj;&#8203;da-has-been-passed-a&zwnj;&#8203;s-an-argument-in-moc&zwnj;&#8203;ks-m</a>"}],"last_activity_date":1684367201,"question_id":76276845,"body":"<p>I am creating a Spring WebClient and adding some personalized headers to the builder:</p>\n<pre><code>@Component\npublic class ApiClient {\n\n    private final WebClient client;\n    \n    public Mono&lt;Optional&lt;String&gt;&gt; getApiInfo(final String header) {\n        return client\n                .get()\n                .uri(URI)\n                .headers(requestHeaders -&gt; {\n                    requestHeaders.add(&quot;Header_name&quot;, &quot;Header_Value&quot;);\n                    if (StringUtils.isNotBlank(forwardedHost)) {\n                        requestHeaders.add(&quot;Second_header&quot;, header);\n                    }\n                })\n                .retrieve()\n                .\n                .\n                .\n    }\n}\n</code></pre>\n<p>How can I validate that headers were added by just using Mockito?</p>\n<p>I mocked every builder step, but I can't perform any verify() on the headers() function.</p>\n"},{"comments":[{"comment_id":134509949,"body":"Start with a known working example? E.g. <a href=\"https://www.selenium.dev/documentation/webdriver/getting_started/first_script/\" rel=\"nofollow noreferrer\">selenium.dev/documentation/webdriver/getting_started/&hellip;</a>"}],"last_activity_date":1684367050,"question_id":76273912,"body":"<pre><code>package MyPackage;\n\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\n\npublic class FirstTestCase {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        \n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:\\\\Selenium\\\\browserdriver\\\\chromedriver.exe&quot;);\n        WebDriver driver = new ChromeDriver();\n         \n        driver.navigate().to(&quot;www.google.com&quot;);\n        \n        String title = driver.getTitle();\n        System.out.println(&quot;Title: &quot; + title);\n        \n        System.out.println(&quot;URL: &quot; + driver.getCurrentUrl());\n    }\n}\n</code></pre>\n<p>This code opens Google Chrome but the browser terminates immediately after opening the page.</p>\n<p>I want that keeping the browser open.</p>\n"},{"last_activity_date":1684366959,"question_id":76276860,"body":"<p>I'm experiencing an issue with a test case in my <code>ProductRepositoryTest</code> class. The test case <code>findByActive_ActiveProductsExist</code> is failing with an <code>AssertionError</code>. Here is the error message:</p>\n<pre><code>java.lang.AssertionError: \nExpecting ArrayList:\n[Product [id=2, productType=Scanner, productDescription=Scanner de alta resolución, productBrand=Canon, productModel=Canoscan 9000F Mark II, productSerialNumber=1234567890ABCDEF, productTechnicalFeatures=Resolución óptica de 9600 x 9600 ppp, productUsageStatus=EN_USO, productLocation=Oficina principal, assignedUserProduct=1, productPurchaseDate=1969-12-31, active=true, status=Activo, subscription=null]]\nto contain only:\n[Product [id=1, productType=PC, productDescription=Potente ordenador de escritorio, productBrand=Dell, productModel=XPS 8900, productSerialNumber=1234567890ABCDEF, productTechnicalFeatures=Intel Core i7, 16GB RAM, 2TB HDD, productUsageStatus=DISPONIBLE, productLocation=Oficina principal, assignedUserProduct=null, productPurchaseDate=1969-12-31, active=true, status=Activo, subscription=null],\nProduct [id=2, productType=Scanner, productDescription=Scanner de alta resolución, productBrand=Canon, productModel=Canoscan 9000F Mark II, productSerialNumber=1234567890ABCDEF, productTechnicalFeatures=Resolución óptica de 9600 x 9600 ppp, productUsageStatus=EN_USO, productLocation=Oficina principal, assignedUserProduct=1, productPurchaseDate=1969-12-31, active=true, status=Activo, subscription=null]]\nbut could not find the following element(s):\n[Product [id=1, productType=PC, productDescription=Potente ordenador de escritorio, productBrand=Dell, productModel=XPS 8900, productSerialNumber=1234567890ABCDEF, productTechnicalFeatures=Intel Core i7, 16GB RAM, 2TB HDD, productUsageStatus=DISPONIBLE, productLocation=Oficina principal, assignedUserProduct=null, productPurchaseDate=1969-12-31, active=true, status=Activo, subscription=null]]\n</code></pre>\n<p>The test case is intended to verify that the <code>findByActive</code> method in the <code>ProductRepository</code> returns the correct list of active products. However, the assertion is failing because the expected list is not found in the actual list.</p>\n<p>I noticed that there are differences between the input and output IDs. The <code>activeProduct1</code> has an expected ID of 1, but the output shows an ID of 2. Similarly, the <code>activeProduct2</code> has an expected ID of 2, but the output shows an ID of 4.</p>\n<p>Here is the code for reference:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.saajf.manager.eewaapro;\nimport static org.assertj.core.api.Assertions.assertThat;\nimport java.sql.Date;\nimport java.util.List;\nimport javax.transaction.Transactional;\nimport org.junit.jupiter.api.AfterEach;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;\nimport org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManager;\nimport com.saajf.manager.eewaapro.domain.entities.Product;\nimport com.saajf.manager.eewaapro.infrastructure.repositories.ProductRepository;\n@DataJpaTest\n@Transactional\npublic class ProductRepositoryTest {\n@Autowired\nprivate ProductRepository productRepository;\n@Autowired\nprivate TestEntityManager entityManager;\n@BeforeEach\nvoid setUp() {\n// Limpiar los datos de prueba antes de cada prueba\nproductRepository.deleteAll();\n}\n@AfterEach\nvoid tearDown() {\n// Limpiar los datos de prueba después de cada prueba\nproductRepository.deleteAll();\n}\n@Test\n@Transactional\nvoid findByActive_ActiveProductsExist() {\nProduct activeProduct1 = new Product();\nactiveProduct1.setId(1);\nactiveProduct1 = new Product(1, &quot;PC&quot;, &quot;Potente ordenador de escritorio&quot;, &quot;Dell&quot;, &quot;XPS 8900&quot;, &quot;1234567890ABCDEF&quot;,\n&quot;Intel Core i7, 16GB RAM, 2TB HDD&quot;, &quot;DISPONIBLE&quot;, &quot;Oficina principal&quot;, null, new Date(0), true,\n&quot;Activo&quot;);\nProduct activeProduct2 = new Product();\nactiveProduct2.setId(2);\nactiveProduct2 = new Product(2, &quot;Scanner&quot;, &quot;Scanner de alta resolución&quot;, &quot;Canon&quot;, &quot;Canoscan 9000F Mark II&quot;,\n&quot;1234567890ABCDEF&quot;, &quot;Resolución óptica de 9600 x 9600 ppp&quot;, &quot;EN_USO&quot;, &quot;Oficina principal&quot;, 1,\nnew Date(0), true, &quot;Activo&quot;);\nProduct inactiveProduct1 = new Product(3, &quot;Impresora&quot;, &quot;Impresora láser monocromática&quot;, &quot;HP&quot;,\n&quot;LaserJet Pro M15w&quot;, &quot;1234567890ABCDEF&quot;, &quot;Impresión rápida a 19 ppm&quot;, &quot;EN_USO&quot;, &quot;Almacén&quot;, null,\nnew Date(0), false, &quot;Inactivo&quot;);\nproductRepository.save(activeProduct1);\nproductRepository.save(activeProduct2);\nproductRepository.save(inactiveProduct1);\n// Verificar el ID asignado al activeProduct1\nSystem.out.println(&quot;ID del activeProduct1: &quot; + activeProduct1.getId());\nSystem.out.println(&quot;ID del activeProduct2: &quot; + activeProduct2.getId());\nList&lt;Product&gt; activeProducts = productRepository.findByActive(true);\nfor (Product product : activeProducts) {\nSystem.out.println(&quot;ID: &quot; + product.getId());\n}\nassertThat(activeProducts).containsOnly(activeProduct1, activeProduct2);\n}\n@Test\n@Transactional\nvoid findByProductSerialNumber_ProductExists() {\nProduct product = new Product();\nproduct.setProductSerialNumber(&quot;SN223686007&quot;);\nproduct.setProductType(&quot;Electronics&quot;);\nproduct.setProductDescription(&quot;Personal Computer&quot;);\nproduct.setProductBrand(&quot;Apple&quot;);\nproduct.setProductModel(&quot;MacBook Pro&quot;);\nproduct.setProductTechnicalFeatures(&quot;M1 chip, 8GB RAM, 256GB SSD&quot;);\nproduct.setProductUsageStatus(&quot;Nuevo&quot;);\nproduct.setProductLocation(&quot;Office&quot;);\nproduct.setAssignedUserProduct(2);\nproduct.setProductPurchaseDate(Date.valueOf(&quot;2023-05-11&quot;));\nproduct.setActive(false);\nproduct.setStatus(&quot;EN_USO&quot;);\nentityManager.merge(product);\nentityManager.flush();\nentityManager.clear();\nProduct foundProduct = productRepository.findByProductSerialNumber(&quot;SN223686007&quot;);\nassertThat(foundProduct).isNotNull();\nassertThat(foundProduct.getProductSerialNumber()).isEqualTo(&quot;SN223686007&quot;);\n}\n@Test\n@Transactional\nvoid findByProductSerialNumber_ProductNotExists() {\n// Intentar buscar un producto por un número de serie inexistente\nProduct foundProduct = productRepository.findByProductSerialNumber(&quot;XYZ789&quot;);\n// Verificar que el producto encontrado sea nulo\nassertThat(foundProduct).isNull();\n}\n}\n</code></pre>\n<p>I ran the test cases in the class.</p>\n"},{"answers":[{"answer_id":76276760,"body":"<p>Looking at <a href=\"https://javadoc.io/doc/org.eclipse.jgit/org.eclipse.jgit/latest/org.eclipse.jgit/org/eclipse/jgit/api/AddCommand.html\" rel=\"nofollow noreferrer\"><code>org.eclipse.jgit.api / Class AddCommand / addFilepattern()</code></a>, I see:</p>\n<blockquote>\n<p>Add a path to a file/directory whose content should be added.</p>\n<p>A directory name (e.g. <code>dir</code> to add <code>dir/file1</code> and <code>dir/file2</code>) can also be given to add all files in the directory, recursively.<br />\nFileglobs (e.g. *.c) are not yet supported.</p>\n<p>Parameters:<br />\n<code>filepattern</code> - <strong>repository-relative path</strong> of file/directory to add (with <code>/</code> as separator)</p>\n</blockquote>\n<p>The term &quot;repository-relative&quot; in the documentation for the addFilepattern() method means that the file pattern should be specified relative to the root directory of the repository.</p>\n<pre><code>/repo\n   /dir1\n      file1.txt\n   /dir2\n      file2.txt\n</code></pre>\n<p>If you want to add file1.txt to the staging area, you would use addFilepattern(&quot;dir1/file1.txt&quot;), even if the current working directory is dir1 or dir2. This is because the path is relative to the root of the repository (/repo), not the current working directory.</p>\n<p>If you try to add a file that doesn't exist in the repository (from the root directory perspective), it won't be staged, and no changes will be registered when you commit.</p>\n<p>Double-check the value of postname in <code>git.add().addFilepattern(postname).call();</code>, to make sure it is a valid paramter.</p>\n"},{"comments":[{"comment_id":134537954,"body":"OK, strange that it is the only pattern working."}],"answer_id":76276856,"body":"<p>I eventually decided to use</p>\n<pre><code>git.add().addFilepattern(&quot;*&quot;).call();\n</code></pre>\n<p>which was the only thing that worked</p>\n"}],"last_activity_date":1684366873,"question_id":76276462,"body":"<p>Here is my code:</p>\n<pre><code>                            postbody = usabled;\n                            String pathToClone = &quot;./repo&quot;;\n                            Git git = Git.cloneRepository()\n                                    .setURI(&quot;https://github.com/Glitch31415/rws.git&quot;)\n                                    .setDirectory(new File(pathToClone))\n                                    .call();\n                            System.out.println(&quot;remade local repo&quot;);\n                            if (windows == true) {\n                                new File(git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\&quot;, postname);\n                            }\n                            else {\n                                new File(git.getRepository().getDirectory().getParent() + &quot;/community/&quot;, postname);\n                            }\n                        \n                            try {\n                                FileWriter myWriter;\n                                if (windows == true) {\n                                    myWriter = new FileWriter(git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\&quot; + postname);\n                                    System.out.println(&quot;writing the file to &quot; + git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\&quot; + postname);\n                                }\n                                else {\n                                    myWriter = new FileWriter(git.getRepository().getDirectory().getParent() + &quot;/community/&quot; + postname);\n                                    System.out.println(&quot;writing the file to &quot; + git.getRepository().getDirectory().getParent() + &quot;/community/&quot; + postname);\n                                }\n\n                                myWriter.write(postbody);\n                                System.out.println(&quot;wrote &quot; + postbody);\n                                myWriter.close();\n                              } catch (IOException e) {\n                                e.printStackTrace();\n                            }\n                            git.add().addFilepattern(postname).call();\n                            try {\n                                try {\n                                    File myObj;\n                                    if (windows == true) {\n                                          myObj = new File(git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\index&quot;);\n                                    }\n                                    else {\n                                          myObj = new File(git.getRepository().getDirectory().getParent() + &quot;/community/index&quot;);\n                                    }\n\n                                      Scanner myReader = new Scanner(myObj);\n                                      while (myReader.hasNextLine()) {\n                                        st = st + myReader.nextLine() + &quot;\\n&quot;;\n                                      }\n                                      myReader.close();\n                                    } catch (FileNotFoundException e) {\n                                      e.printStackTrace();\n                                    }\n                                System.out.println(&quot;index was read as '&quot; + st + &quot;'&quot;);\n                                FileWriter myWriter;\n                                if (windows == true) {\n                                    myWriter = new FileWriter(git.getRepository().getDirectory().getParent() + &quot;\\\\community\\\\index&quot;);\n                                }\n                                else {\n                                    myWriter = new FileWriter(git.getRepository().getDirectory().getParent() + &quot;/community/index&quot;);\n                                }\n\n                                \n                                myWriter.write(st+postname+&quot;\\n&quot;);\n                                myWriter.close();\n                              } catch (IOException e) {\n                                e.printStackTrace();\n                            }\n                            git.add().addFilepattern(&quot;/community/index&quot;).call();\n                            git.commit().setMessage(&quot;Committed from server&quot;).call();\n                            PushCommand pushCommand = git.push();\n                            pushCommand.setCredentialsProvider(new UsernamePasswordCredentialsProvider(&quot;key&quot;, &quot;&quot;));\n                            pushCommand.call();\n                            Path directory = Path.of(pathToClone);\n                            Files.walk(directory)\n                            .sorted(Comparator.reverseOrder())\n                            .map(Path::toFile)\n                            .forEach(File::delete);\n</code></pre>\n<p>This code creates a new file, writes to it, then modifies another file and appends something onto the end of it. All this works in the local cloned repo. But, when I run commit and push, nothing changes in the online repo. It says there was a new commit, but it also says &quot;Showing 0 changed files with 0 additions and 0 deletions.&quot; Basically an empty commit. What am I doing wrong? How do I just copy the local repo into the online one?\nAlso, if the git.add() command is in the wrong spot, it's because I moved it in front of the changes to try to fix the problem. It used to be behind them.</p>\n"},{"last_activity_date":1684366607,"question_id":76276840,"body":"<p>I want to generate in SpringBoot pdf file from html with styles and with using cyrillic letters. Is there any solution so that I could convert html file as it is to pdf, including cyrillic alphabet and style?</p>\n<pre><code> @GetMapping(&quot;/generatePDF&quot;)\n    public void generateInvoice(HttpServletResponse response, HttpServletRequest request){\n\n        try (OutputStream outputStream = response.getOutputStream()) {\n            response.setContentType(MediaType.APPLICATION_PDF_VALUE);\n\n            Context context = new Context();\n            context.setVariable(&quot;user&quot;, userService.findUserById(1L));\n\n            String htmlContent = templateEngine.process(&quot;welcome&quot;, context);\n\n            Document document = Jsoup.parse(htmlContent);\n            document.outputSettings().syntax(Document.OutputSettings.Syntax.xml);\n            document.outputSettings().charset(StandardCharsets.UTF_8);\n\n            String modifiedHtml = document.html().replaceAll(&quot;&amp;nbsp;&quot;, &quot; &quot;);\n            ITextRenderer renderer = new ITextRenderer();\n\n            renderer.getFontResolver().addFont(&quot;src/main/java/com/example/textpdf/Arial Unicode MS.ttf&quot;, &quot;Identity-H&quot;, BaseFont.EMBEDDED);\n\n            renderer.setDocumentFromString(modifiedHtml);\n            renderer.layout();\n            renderer.createPDF(outputStream);\n        } catch (IOException | DocumentException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>and welcome.html file:</p>\n<pre><code>   &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n&lt;head&gt;\n    &lt;meta content='text/html; charset=utf-8' charset=&quot;UTF-8&quot;/&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h3 style=&quot;text-align: center; color: green&quot;&gt;\n    &lt;span style=&quot;font-family: Arial, sans-serif; font-size:16px; font-weight: normal;color: blue&quot; th:text=&quot;'Привіт '+ ${user.firstName + ' ' + user.lastName}&quot;&gt;&lt;/span&gt;\n&lt;/h3&gt;\n&lt;h2&gt;Привет&lt;/h2&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>I also tried to use Paragraph class but it doesn't add styles of html file.</p>\n"},{"answers":[{"answer_id":61151532,"body":"<p>Eventually resolved this by overriding the default compile goal during the compile phase using execution as shown below:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.7.0&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;Compile With Annotation Processing&lt;/id&gt;\n            &lt;phase&gt;compile&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;compile&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n                &lt;annotationProcessorPaths&gt;\n                    &lt;path&gt;\n                        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;version&gt;1.18.12&lt;/version&gt;\n                    &lt;/path&gt;\n                    &lt;path&gt;\n                        &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n                        &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n                        &lt;version&gt;1.2.0.Final&lt;/version&gt;\n                    &lt;/path&gt;\n                &lt;/annotationProcessorPaths&gt;\n                &lt;compilerArgs&gt;\n                    &lt;compilerArg&gt;-Amapstruct.suppressGeneratorTimestamp=true&lt;/compilerArg&gt;\n                    &lt;compilerArg&gt;-Amapstruct.suppressGeneratorVersionInfoComment=true&lt;/compilerArg&gt;\n                &lt;/compilerArgs&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"answer_id":71581751,"body":"<p>If your lombok and mapstruct don't play well with each other, you can use <code>lombok-mapstruct-binding</code> to resolve the conflict (You don't need to put it in the <code>execution</code> tag). The key is to include the binding artifact in the same place with the lombok and mapstruct annotation processors configuration. It works splendid in my case!</p>\n<pre><code>&lt;build&gt;\n  &lt;plugins&gt;\n    &lt;plugin&gt;\n      ..\n      &lt;configuration&gt;\n        ..\n        &lt;annotationProcessorPaths&gt;\n        &lt;path&gt;\n          &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n          &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n          &lt;version&gt;1.18.20&lt;/version&gt;\n        &lt;/path&gt;\n        &lt;path&gt;\n          &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n          &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\n          &lt;version&gt;0.2.0&lt;/version&gt;\n        &lt;/path&gt;\n        &lt;path&gt;\n          &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n          &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n          &lt;version&gt;1.4.2.Final&lt;/version&gt;\n        &lt;/path&gt;\n      &lt;/annotationProcessorPaths&gt;\n    &lt;/plugin&gt;\n  &lt;plugins&gt;\n&lt;build&gt;\n</code></pre>\n"}],"last_activity_date":1684365992,"question_id":61143001,"body":"<p>I have a spring boot project that has lombok and mapstruct and uses maven as the build tool. I need the annotations to be processed at compile time with the resultant generated sources packaged with the final jar. The build is successful. However, the final jar is missing the mapstruct implementation class. The error when I try to start the spring boot application is:</p>\n\n<blockquote>\n  <hr>\n  \n  <p>APPLICATION FAILED TO START</p>\n  \n  <hr>\n  \n  <p>Description:</p>\n  \n  <p>Field salesforceObjectMapper in\n  com.some_org.service.salesforce.object.processor.SalesforceObjectProcessor\n  required a bean of type\n  'com.some_org.service.salesforce.object.mapper.SalesforceObjectMapper'\n  that could not be found.</p>\n  \n  <p>Action:</p>\n  \n  <p>Consider defining a bean of type\n  'com.some_org.service.salesforce.object.mapper.SalesforceObjectMapper'\n  in your configuration.</p>\n</blockquote>\n\n<p>Here is my maven-compiler-plugin setup:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.7.0&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;source&gt;1.8&lt;/source&gt;\n        &lt;target&gt;1.8&lt;/target&gt;\n        &lt;annotationProcessorPaths&gt;\n            &lt;path&gt;\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                &lt;version&gt;1.18.12&lt;/version&gt;\n            &lt;/path&gt;\n            &lt;path&gt;\n                &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n                &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n                &lt;version&gt;1.2.0.Final&lt;/version&gt;\n            &lt;/path&gt;\n        &lt;/annotationProcessorPaths&gt;\n        &lt;compilerArgs&gt;\n            &lt;compilerArg&gt;-Amapstruct.suppressGeneratorTimestamp=true&lt;/compilerArg&gt;\n            &lt;compilerArg&gt;-Amapstruct.suppressGeneratorVersionInfoComment=true&lt;/compilerArg&gt;\n        &lt;/compilerArgs&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"comments":[{"comment_id":134507775,"body":"If you mean &quot;advertisement&quot;, the abbreviation in English is &quot;ad&quot; with a single &quot;d&quot;, fyi."},{"comment_id":134507821,"body":"What you need is to call the superconstructor in <code>PrintedAdd</code>, and yes, you will have to repeat the variables."},{"comment_id":134509850,"body":"For help in removing a lot boiler-plate code, you might want to have a look at Project Lombok - <a href=\"https://projectlombok.org\" rel=\"nofollow noreferrer\">projectlombok.org</a>"}],"answers":[{"answer_id":76275808,"body":"<p>In your code:</p>\n<pre><code>PrintedAdd ad2 = new PrintedAdd(10,20,30);\n</code></pre>\n<p>This new <code>PrintedAdd</code> object (also an <code>Advertisement</code>) has <code>null</code> in its two inherited member fields, <code>ID</code> and <code>description</code>. You neglected to invoke a constructor (or setters) to specify those values, so they default to <code>null</code>.</p>\n<p>So yes, if you want a subclass to have 5 fields, 2 inherited, and 3 defined on the subclass itself, at run time you need to pass 5 values (primitives or object references). You can pass to a constructor, and/or you can pass via setter methods. Or you could use a <a href=\"https://en.wikipedia.org/wiki/Dependency_injection\" rel=\"nofollow noreferrer\">dependency injection</a> framework such as <a href=\"https://jakarta.ee/specifications/cdi/\" rel=\"nofollow noreferrer\"><em>Jakarta Contexts and Dependency Injection</em></a>, <a href=\"https://en.wikipedia.org/wiki/Google_Guice\" rel=\"nofollow noreferrer\"><em>Google Guice</em></a>, or <a href=\"https://en.wikipedia.org/wiki/Spring_Framework#Inversion_of_control_container_(dependency_injection)\" rel=\"nofollow noreferrer\"><em>Spring</em></a>. Otherwise, you get default values in member field; for object references that means <code>null</code>.</p>\n<p>In your particular case, your objects are read-only, with getters but no setters. So that eliminates the setters option. And in your case, a dependency injection framework is not appropriate, as that is for providing resources and services, not for individual values such as an ID or description. So, that leaves the constructor option. 👉 You should write the subclass to have a constructor taking 5 arguments, for the 2 inherited fields and the 3 subclass-specific fields.</p>\n<p>Be aware that a subclass’ constructor can call a superclass’ constructor. See existing Question such as <a href=\"https://stackoverflow.com/q/19326229/642706\"><em>Calling superclass from a subclass constructor in Java</em></a>.</p>\n<p>Here is some example code, and some notes.</p>\n<ul>\n<li>Your superclass should be marked <code>abstract</code> as you intend only to instantiate the subclasses, never the superclass. You may want to read <a href=\"https://www.baeldung.com/java-abstract-classes-constructors\" rel=\"nofollow noreferrer\"><em>Constructors in Java Abstract Classes</em></a> by <a href=\"https://www.baeldung.com/author/baeldung\" rel=\"nofollow noreferrer\">baeldung</a>. And read Question, <a href=\"https://stackoverflow.com/q/260666/642706\"><em>Can an abstract class have a constructor?</em></a>.</li>\n<li>Since you know all subclasses at compile time, and do not expect new ones to be dynamically added at runtime, you can <a href=\"https://openjdk.org/jeps/409\" rel=\"nofollow noreferrer\">seal the superclass</a>. Sealed classes and interfaces restrict which other classes or interfaces may extend or implement them. (Not important for your Question, just a note for modern Java programming.)</li>\n<li>In Java naming conventions, a member field should be name with an initial lowercase letter. So, <code>first</code>, not <code>First</code>. And <code>id</code>, not <code>ID</code>. All uppercase by convention means a <a href=\"https://en.wikipedia.org/wiki/Constant_(computer_programming)\" rel=\"nofollow noreferrer\">constant</a>.</li>\n<li>For simplicity, I replaced your multiple member fields on <code>PrintAd</code> to a single <code>LocalDate</code>.</li>\n<li>👉 Note how it makes sense to pass the id and description in each constructor — there is no other way to discern what the value should be for those fields.</li>\n</ul>\n<p>The superclass:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.advertising;\n\nimport java.util.Objects;\nimport java.util.UUID;\n\npublic abstract sealed class Advertisement\n        permits PrintAd, WebAd, RadioAd\n{\n    // Member fields. Read-only, via getter methods.\n\n    private final UUID id;\n    private final String description;\n\n    // Constructors\n\n    public Advertisement ( final UUID id ,\n                           final String description )\n    {\n        this.id = id;\n        this.description = description;\n    }\n\n    // Getters\n\n    public UUID getId ( )\n    {\n        return id;\n    }\n\n    public String getDescription ( )\n    {\n        return description;\n    }\n\n    // `Object` overrides\n\n    @Override\n    public boolean equals ( Object o )\n    {\n        if ( this == o ) return true;\n        if ( o == null || getClass ( ) != o.getClass ( ) ) return false;\n        Advertisement that = ( Advertisement ) o;\n        return Objects.equals ( id , that.id );\n    }\n\n    @Override\n    public int hashCode ( )\n    {\n        return Objects.hash ( id );\n    }\n\n    @Override\n    public String toString ( )\n    {\n        return &quot;Advertisement[&quot; +\n                &quot;id=&quot; + id + &quot;, &quot; +\n                &quot;description=&quot; + description + ']';\n    }\n\n}\n</code></pre>\n<p>Each of the subclasses, with a third one <code>RadioAd</code> just for fun:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.advertising;\n\nimport java.time.LocalDate;\nimport java.util.UUID;\n\npublic final class PrintAd extends Advertisement\n{\n    private final LocalDate runDate;\n\n    public PrintAd ( final UUID id , final String description , final LocalDate runDate )\n    {\n        super ( id , description );\n        this.runDate = runDate;\n    }\n\n    public LocalDate getRunDate ( )\n    {\n        return runDate;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.advertising;\n\nimport java.net.URL;\nimport java.util.UUID;\n\npublic final class WebAd extends Advertisement\n{\n    private final URL url;\n\n    public WebAd ( final UUID id , final String description , final URL url )\n    {\n        super ( id , description );\n        this.url = url;\n    }\n\n    public URL getUrl ( )\n    {\n        return url;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.advertising;\n\nimport java.time.LocalTime;\nimport java.util.UUID;\n\npublic final class RadioAd extends Advertisement\n{\n    private final LocalTime airTime;\n\n    public RadioAd ( final UUID id , final String description , final LocalTime airTime )\n    {\n        super ( id , description );\n        this.airTime = airTime;\n    }\n\n    public LocalTime getAirTime ( )\n    {\n        return this.airTime;\n    }\n}\n</code></pre>\n<p>And an app to exercise those business logic classes.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package work.basil.example.advertising;\n\nimport java.net.MalformedURLException;\nimport java.net.URI;\nimport java.time.LocalDate;\nimport java.time.LocalTime;\nimport java.util.List;\nimport java.util.UUID;\n\npublic class App\n{\n    public static void main ( String[] args )\n    {\n        App app = new App ( );\n        app.demo ( );\n    }\n\n    private void demo ( )\n    {\n        List &lt; Advertisement &gt; ads = null;\n        try\n        {\n            ads =\n                    List.of (\n                            new PrintAd (\n                                    UUID.fromString ( &quot;a71330e7-131f-4d10-beac-4e8ffc21887f&quot; ) ,\n                                    &quot;Example print ad.&quot; ,\n                                    LocalDate.now ( )\n                            ) ,\n                            new WebAd (\n                                    UUID.fromString ( &quot;8aafa2cf-03dc-452b-a84d-c61d75964955&quot; ) ,\n                                    &quot;Example web ad.&quot; ,\n                                    URI.create ( &quot;https://www.DailyBugle.com/ads&quot; ).toURL ( )\n                            ) ,\n                            new RadioAd (\n                                    UUID.fromString ( &quot;e21b187c-01e2-44da-9a26-5debb9146cf6&quot; ) ,\n                                    &quot;Example radio ad.&quot; ,\n                                    LocalTime.NOON\n                            )\n                    );\n        }\n        catch ( MalformedURLException e ) { throw new RuntimeException ( e ); }\n\n        System.out.println ( &quot;ads = &quot; + ads );\n    }\n}\n</code></pre>\n<p>When run:</p>\n<blockquote>\n<p>ads = [Advertisement[id=a71330e7-131f-4d10-beac-4e8ffc21887f, description=Example print ad.], Advertisement[id=8aafa2cf-03dc-452b-a84d-c61d75964955, description=Example web ad.], Advertisement[id=e21b187c-01e2-44da-9a26-5debb9146cf6, description=Example radio ad.]]</p>\n</blockquote>\n<hr />\n<p>To learn more, see the <a href=\"https://docs.oracle.com/javase/tutorial/index.html\" rel=\"nofollow noreferrer\"><em>The Java Tutorials</em></a> provided by Oracle Corp free of cost:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html\" rel=\"nofollow noreferrer\"><em>Controlling Access to Members of a Class</em></a></li>\n<li><a href=\"https://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html\" rel=\"nofollow noreferrer\"><em>Inheritance</em></a></li>\n</ul>\n"},{"comments":[{"comment_id":134508409,"body":"making <code>ID</code> static will not help getting an ID for each instance - it will just be a count of how many were created. <code>ad.getID()</code> will return the same value as <code>ad2.getID()</code> - they are both returning the value of the <i>static</i> ID, a class variable, <b>not</b> an instance variable"},{"comment_id":134508520,"body":"( and static initialization block is an <i>overkill</i> in this scenario IMHO )"},{"comment_id":134509495,"body":"@user16320675, I had the correct idea, except I wrote the code incorrectly.  I changed it to what I was intending to recommend."},{"comment_id":134511581,"body":"additional idea: make <code>ID</code> <code>final</code>, but that depends on use case"}],"answer_id":76275881,"body":"<p>One way to complete this task is to create a static field within the <code>Advertisement</code> class.</p>\n<p>Then, within your <code>Advertisement</code> constructor, increment this field by <code>1</code>, and assign it to your <code>ID</code> field.</p>\n<p>Consider the following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Advertisement {\n    private static int universalId = 0;\n\n    private int ID;\n    private String description;\n\n    protected Advertisement() {\n        ID = universalId++;\n    }\n\n    public Advertisement(String description) {\n        this();\n        this.description = description;\n    }\n\n    public int getID() {\n        return ID;\n    }\n}\n</code></pre>\n<p>Then, for your sub-classes, within their constructors', make a call to the super constructor, as follows.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class PrintedAdd extends Advertisement {\n    private int First;   //first page cost\n    private int Middle;  //middle page cost\n    private int Last;    //last page cost\n\n    public PrintedAdd(int First, int Middle, int Last) {\n        super();\n        this.First = First;\n        this.Middle = Middle;\n        this.Last = Last;\n    }\n\n    public int getFirst() {\n        return First;\n    }\n}\n</code></pre>\n<p>Thus, making a call to <code>ad.getID()</code> should produce <code>0</code>, and making a call to <code>ad2.getID()</code> should produce <code>1</code>.</p>\n"}],"last_activity_date":1684365631,"question_id":76275687,"body":"<p>Creating a program that manages advertisements. Every ad will have 2 common attributes 1: ID, 2: Description.<br />\nDepending if the ad is for a webpage or for a newspaper for example it will have different costs per page, words or duration it is shown.</p>\n<p>I have 3 files</p>\n<ol>\n<li>Main.java</li>\n<li>Advertisement.java</li>\n<li>PrintedAd.java</li>\n<li>WebpageAd.java</li>\n</ol>\n<p><strong>Advertisement.java</strong></p>\n<pre><code>public class Advertisement{\n\n    private int ID;\n    private String description;\n\n    // Constructor\n    public Advertisement(int ID, String description){\n        this.ID = ID;\n        this.description = description;\n    }\n    public int getID() {\n        return ID;\n    }\n</code></pre>\n<p><strong>PrintedAd.java</strong></p>\n<pre><code>public class PrintedAd extends Advertisement{\n\n        private int First;   //first page cost\n        private int Middle;  //middle page cost\n        private int Last;    //last page cost\n\n    public PrintedAd(int First, int Middle, int Last){\n        this.First = First;\n        this.Middle = Middle;\n        this.Last = Last;\n    }\n    public int getFirst() {\n        return First;\n    }\n</code></pre>\n<p><strong>Main.java</strong></p>\n<pre><code>public class Main{\n    public static void main(String[] args) {\n        \n        Advertisement ad = new Advertisement(34567, &quot;test&quot;);\n        System.out.println(ad.getID());\n\n        PrintedAdd ad2 = new PrintedAdd(10,20,30);\n        System.out.println(ad2);\n    }\n}\n</code></pre>\n<p>(had to change var names to make it more readable so if any &quot;dumb&quot; errors appear please understand)\nCreating 2 different variables from these 2 classes works fine.</p>\n<p>Even though the variable ad2 is an ad and needs to have an ID number and a description I am unable to do both the Advertisement and PrintedAd attributes.</p>\n<p>What I am asking is if there a way for me to not have to write the variables and the constructor for every child class.\nIf I were to add to every type of ad this it would solve the issue I believe but still asking if there is a way:</p>\n<pre><code>    private int ID;\n    private String description;\n\n    // Constructor\n    public Advertisement(int ID, String description){\n        this.ID = ID;\n        this.description = description;\n    }\n</code></pre>\n"},{"comments":[{"comment_id":134505645,"body":"You may be able to read the size of the actual library file, but that won’t tell you what memory allocations that library has performed.  I doubt there is any way to do that."},{"comment_id":134507188,"body":"There is no &quot;total library size&quot;. Please define what exactly you want to measure."},{"comment_id":134509707,"body":"Why the heck it has <code>embedded-linux</code> tag?"},{"comment_id":134511418,"body":"@VGR, For the Memory allocation I think there are some dynamic analysis tools specified for monitoring this in the run time like Valgrind-Massif tool I think, but how can I get the actual lib size that you have referenced to ?"},{"comment_id":134511428,"body":"@apangin, I need to measure the memory consumption of this Lib is it clear ?, the Idea that I&#39;m a beginner in the jvm and linux memories staff so I&#39;m not able to understand how the lib is going to be allocated to the memory after loading it, and how we can get its size in the runtime"},{"comment_id":134523358,"body":"No: &quot;memory consumption&quot; is ambiguous: it can be virtual memory, resident set size, Java heap size, etc. It&#39;s unclear whether you want to count memory mapped sections of the library image or dynamically allocated memory or both. If this library depends on two other libraries, one of which has been loaded before your library and the other one after, which of them would you like to count? You see, the question is not as simple as it may look. Please start by explaining your originial problem (i.e. <i>why</i> do you want to measure), this will help us give you the <i>right</i> answer, not a random one."},{"comment_id":134523513,"body":"You may get some memory stats of the process by reading <a href=\"https://man7.org/linux/man-pages/man5/proc.5.html\" rel=\"nofollow noreferrer\"><code>&#47;proc&#47;self&#47;statm</code></a> pseudofile."},{"comment_id":134530657,"body":"@apangin, I got what you mean, Okay let me give you a brief about the Idea, The issue that I may have some non functional requirements in my project that state as following:  &quot;Tested_library shouldn&#39;t exceed x ram usage during the runtime.&quot;, Hence I started to search for a mechanism that could give me such an information. As far as I understand, the consumed ram memory of the lib is separated to the size of the loaded library itself in the memory &quot;static size&quot;, in addition to the heab size &quot; which has dynamically allocated memory during runtime.&quot;"},{"comment_id":134537419,"body":"Measure RSS of the process without library loaded and with the library loaded. The difference will be the approximation of what you are looking for."}],"answers":[{"answer_id":76274835,"body":"<p>Using Runtime.totalMemory() and freeMemory() is not very precise. It doesn't consider what other threads of the Java process or your library may be doing. Calling System.gc() is just a suggestion to the JVM to do garbage collection. There is no guarantee it will execute, and when it does it only cleans the heap memory pool, which is only the memory pools the JVM uses for object instances. Whatever your library is doing will not be inside the heap, unless it uses JNI to manipulate Java objects.</p>\n<p>IF you only want to know the memory the shared library file uses in memory in Linux you should refer to Linux-specific answers like <a href=\"https://unix.stackexchange.com/questions/116327/loading-of-shared-libraries-and-ram-usage\">https://unix.stackexchange.com/questions/116327/loading-of-shared-libraries-and-ram-usage</a>. This is not a Java question.</p>\n"}],"last_activity_date":1684365301,"question_id":76274447,"body":"<p>Kindly I need help to get the size of a specific loaded library in a running Java Application.</p>\n<p>In details, I'm running a Java application though JVM on Linux. While I'm trying to get the memory consumption of a specific library that is being loaded during the App initialization.</p>\n<p>So I'm using something like the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Test \n{\n     static\n     { \n        System.loadLibrary(&quot;Tested_Lib&quot;);\n     }\n\n     public int register () { ......}\n     public int unregister () { ......}\n}\n</code></pre>\n<p>So what I'm asking for:</p>\n<ol>\n<li>Is loading the library that way means that the total library size will be loaded to the JVM address space?</li>\n<li>How to measure the memory consumption of &quot;Tested_Lib&quot; in the running time?</li>\n</ol>\n<p>I have tried the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        System.gc();\n        usedMemoryBefore = runtime.totalMemory() - runtime.freeMemory();\n \n        System.loadLibrary(&quot;Tested_Lib&quot;);\n\n        usedMemoryAfter = runtime.totalMemory() - runtime.freeMemory();\n        libSizeInRam = (usedMemoryAfter - usedMemoryBefore)/KILOBYTE;  \n</code></pre>\n<p>while the output was not reasonable at all regarding the expected size of the lib.</p>\n"},{"comments":[{"comment_id":134503579,"body":"Make sure you&#39;ve got all necessary deps.  vorbis-java-core seems possible"}],"last_activity_date":1684365059,"question_id":76273071,"body":"<p>I <a href=\"https://file.io/CJWFsXL6IgZa\" rel=\"nofollow noreferrer\">have an ogg</a> file downloaded from whatsapp. I am trying to convert it to wav. However, reading the input stream is failing  with Unsupported format.</p>\n<pre><code>        File file = new File(&quot;audio.ogg&quot;);\n        AudioInputStream in = AudioSystem.getAudioInputStream(file);\n</code></pre>\n<p>The exception:</p>\n<pre><code>Exception in thread &quot;main&quot; javax.sound.sampled.UnsupportedAudioFileException: File of unsupported format\n        at java.desktop/javax.sound.sampled.AudioSystem.getAudioInputStream(AudioSystem.java:1066)\n        at org.Convert.main(Convert.java:20)\n</code></pre>\n<p>I added following dependency to no avail.</p>\n<pre><code> &lt;dependency&gt;\n    &lt;groupId&gt;com.googlecode.soundlibs&lt;/groupId&gt;\n    &lt;artifactId&gt;vorbisspi&lt;/artifactId&gt;\n    &lt;version&gt;1.0.3.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Thoughts?</p>\n"},{"comments":[{"comment_id":134223964,"body":"Could you create a test project somewhere so that I can have a better look?"},{"comment_id":134261740,"body":"I tried to recreate this problem in a new test project, but i couldn&#39;t. Retries are working as expected now. I see 3.0.1 is released, but even downgrading to 3.0.0.CR2 nothing changed. Maybe i coded something realy stupid, which now i cannot reproduce since i have better knowledge of the framework."},{"comment_id":134500410,"body":"HI @DavideD&#39;Alto, I managed to reproduce it on new 3.0.3.Final version. Here is test project: <a href=\"https://github.com/sfeliks/retry-test\" rel=\"nofollow noreferrer\">github.com/sfeliks/retry-test</a>. When SchedulerService throws an error, it is: CompositeException: Multiple exceptions caught: \t[Exception 0] java.lang.RuntimeException: Test Runtime \t[Exception 1] java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [116]: &#39;vert.x-eventloop-thread-3&#39; current Thread [118]: &#39;executor-thread-2&#39;"}],"answers":[{"answer_id":76109560,"body":"<p>In the end retries started working for me, but it's unclear what fixed it.\nThe main changes i did that could help were:</p>\n<ol>\n<li>I downgraded Quarkus to 2.16 - previous version (3.0.0.CR2) is the main culprit for me</li>\n<li>I gave up on using @WithSession completely - left it for Quarkus to handle</li>\n<li>And follow-up to number 2. - i have better undestanding of working with Mutiny streams, so now i just return Uni to the original caller (Rest endpoint and a Scheduler).</li>\n</ol>\n"},{"comments":[{"comment_id":134511983,"body":"Thank you. Avoiding .withBackoff fixes this issue, indeed,"}],"answer_id":76273708,"body":"<p>The problem is caused by <code>.withBackoff</code>.</p>\n<p>Hibernate Reactive checks two things when the session is used:</p>\n<ol>\n<li>The session must be called in a event-loop thread</li>\n<li>The session must be used in the same thread it has been created.</li>\n</ol>\n<p>In this case, the first check is failing because of a limitation (or bug) in Mutiny: when retrying using the <code>.withBackoff</code> option, the uni runs in a worker thread (and not in the event-loop thread the session was created).\nNote that even if you create a new session, the check will fail because the code it's not running in a worker-thread (and not a event-loop thread).</p>\n<p>This works with Quarkus 2.16 because there is a check that makes sure that <a href=\"https://github.com/quarkusio/quarkus/blob/62070cb257e78d10e5fdfee6b227dad22c3cf261/extensions/panache/hibernate-reactive-panache-common/runtime/src/main/java/io/quarkus/hibernate/reactive/panache/common/runtime/AbstractJpaOperations.java#L130\" rel=\"nofollow noreferrer\">everything runs in an event-loop thread</a>. This check has been removed in Quarkus 3, this is probably a bug.</p>\n<p>At the moment, I don't have a workaround, but it should work if you avoid the <code>.withBackoff</code> option.</p>\n"}],"last_activity_date":1684364966,"question_id":76043558,"body":"<p>I need to write code that will:</p>\n<ul>\n<li>connect to external DB</li>\n<li>query that DB for data</li>\n<li>process this data, meaning create multiple entities in local DB</li>\n</ul>\n<p>I created a method like below:</p>\n<pre><code>  @WithSession\n  public Uni&lt;Void&gt; retrieveDataAndSaveInLocalDB() {\n    final Sample timer = Timer.start(meterRegistry);\n    return Uni.createFrom()\n        .deferred(() -&gt; Uni.createFrom()\n            .item(dbService::connectToDB))\n        .onFailure()\n        .retry()\n        .withBackOff(Duration.ofSeconds(3), Duration.ofMinutes(5))\n        .atMost(3)\n        .map(this::getListOfEntities)\n        .flatMap(entityRepository::persist)\n        .call(entityRepository::flush)\n        .invoke(() -&gt; timer.stop(meterRegistry.timer(&quot;timer&quot;)))\n        .invoke(() -&gt; Log.info(&quot;logged info&quot;));\n  }\n</code></pre>\n<p>When dbService::connectToDB throws an exception, I want to give it another go in a few seconds.\nThe problem I have is that when dbService::connectToDB throws an error, retries are done on another thread. Here are the logs:</p>\n<pre><code>2023-04-18 12:09:42,926 INFO  [DbService] (vert.x-eventloop-thread-1) CONNECTED! org.postgresql.jdbc.PgConnection@b931fa7\n2023-04-18 12:09:46,142 INFO  [DbService] (executor-thread-1) CONNECTED! org.postgresql.jdbc.PgConnection@73903696\n2023-04-18 12:09:51,210 INFO  [DbService] (executor-thread-1) CONNECTED! org.postgresql.jdbc.PgConnection@379aed2d\n2023-04-18 12:09:51,237 ERROR [io.qua.ver.htt.run.QuarkusErrorHandler] (vert.x-eventloop-thread-1) HTTP Request to /sampleendpoint failed, error id: 8dc81df2-e526-4a64-a67d-bf04cbb9e580-1: io.smallrye.mutiny.CompositeException: Multiple exceptions caught:\n    [Exception 0] java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [107]: 'vert.x-eventloop-thread-1' current Thread [99]: 'executor-thread-1'\n    [Exception 1] java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [107]: 'vert.x-eventloop-thread-1' current Thread [99]: 'executor-thread-1'\n    at io.smallrye.mutiny.groups.UniOnItemOrFailure.lambda$call$1(UniOnItemOrFailure.java:75)\n    at io.smallrye.context.impl.wrappers.SlowContextualBiFunction.apply(SlowContextualBiFunction.java:21)\n    at io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.performInnerSubscription(UniOnItemOrFailureFlatMap.java:86)\n    at io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.onFailure(UniOnItemOrFailureFlatMap.java:65)\n    at io.smallrye.mutiny.operators.uni.UniOnTermination$UniOnTerminationProcessor.onFailure(UniOnTermination.java:52)\n    at io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\n    at io.smallrye.mutiny.helpers.EmptyUniSubscription.propagateFailureEvent(EmptyUniSubscription.java:40)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage.subscribe(UniCreateFromCompletionStage.java:26)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniRunSubscribeOn.lambda$subscribe$0(UniRunSubscribeOn.java:27)\n    at org.hibernate.reactive.context.impl.VertxContext.execute(VertxContext.java:90)\n    at io.smallrye.mutiny.operators.uni.UniRunSubscribeOn.subscribe(UniRunSubscribeOn.java:25)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniOnTermination.subscribe(UniOnTermination.java:21)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap.subscribe(UniOnItemOrFailureFlatMap.java:27)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.performInnerSubscription(UniOnItemOrFailureFlatMap.java:99)\n    at io.smallrye.mutiny.operators.uni.UniOnItemOrFailureFlatMap$UniOnItemOrFailureFlatMapProcessor.onFailure(UniOnItemOrFailureFlatMap.java:65)\n    at io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\n    at io.smallrye.mutiny.operators.uni.UniOnItemConsume$UniOnItemComsumeProcessor.onFailure(UniOnItemConsume.java:65)\n    at io.smallrye.mutiny.operators.uni.UniOnItemConsume$UniOnItemComsumeProcessor.onFailure(UniOnItemConsume.java:65)\n    at io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\n    at io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\n    at io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\n    at io.smallrye.mutiny.operators.uni.UniOperatorProcessor.onFailure(UniOperatorProcessor.java:55)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage$CompletionStageUniSubscription.forwardResult(UniCreateFromCompletionStage.java:58)\n    at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)\n    at java.base/java.util.concurrent.CompletableFuture.uniWhenCompleteStage(CompletableFuture.java:887)\n    at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:2325)\n    at java.base/java.util.concurrent.CompletableFuture.whenComplete(CompletableFuture.java:144)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage$CompletionStageUniSubscription.forward(UniCreateFromCompletionStage.java:51)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage.subscribe(UniCreateFromCompletionStage.java:35)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniRunSubscribeOn.lambda$subscribe$0(UniRunSubscribeOn.java:27)\n    at org.hibernate.reactive.context.impl.VertxContext.execute(VertxContext.java:90)\n    at io.smallrye.mutiny.operators.uni.UniRunSubscribeOn.subscribe(UniRunSubscribeOn.java:25)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni$UniOnItemTransformToUniProcessor.performInnerSubscription(UniOnItemTransformToUni.java:81)\n    at io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni$UniOnItemTransformToUniProcessor.onItem(UniOnItemTransformToUni.java:57)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromKnownItem$KnownItemSubscription.forward(UniCreateFromKnownItem.java:38)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromKnownItem.subscribe(UniCreateFromKnownItem.java:23)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni.subscribe(UniOnItemTransformToUni.java:25)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni$UniOnItemTransformToUniProcessor.performInnerSubscription(UniOnItemTransformToUni.java:81)\n    at io.smallrye.mutiny.operators.uni.UniOnItemTransformToUni$UniOnItemTransformToUniProcessor.onItem(UniOnItemTransformToUni.java:57)\n    at io.smallrye.mutiny.operators.uni.UniOnItemTransform$UniOnItemTransformProcessor.onItem(UniOnItemTransform.java:43)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromPublisher$PublisherSubscriber.onNext(UniCreateFromPublisher.java:70)\n    at io.smallrye.mutiny.helpers.HalfSerializer.onNext(HalfSerializer.java:30)\n    at io.smallrye.mutiny.helpers.StrictMultiSubscriber.onItem(StrictMultiSubscriber.java:84)\n    at io.smallrye.mutiny.subscription.MultiSubscriber.onNext(MultiSubscriber.java:61)\n    at io.smallrye.mutiny.subscription.SerializedSubscriber.onItem(SerializedSubscriber.java:74)\n    at io.smallrye.mutiny.operators.multi.MultiRetryWhenOp$RetryWhenOperator.onItem(MultiRetryWhenOp.java:111)\n    at io.smallrye.mutiny.subscription.MultiSubscriber.onNext(MultiSubscriber.java:61)\n    at io.smallrye.mutiny.converters.uni.UniToMultiPublisher$UniToMultiSubscription.onItem(UniToMultiPublisher.java:92)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromItemSupplier.subscribe(UniCreateFromItemSupplier.java:29)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromDeferredSupplier.subscribe(UniCreateFromDeferredSupplier.java:36)\n    at io.smallrye.mutiny.operators.AbstractUni.subscribe(AbstractUni.java:36)\n    at io.smallrye.mutiny.converters.uni.UniToMultiPublisher$UniToMultiSubscription.request(UniToMultiPublisher.java:73)\n    at io.smallrye.mutiny.subscription.SwitchableSubscriptionSubscriber.setOrSwitchUpstream(SwitchableSubscriptionSubscriber.java:205)\n    at io.smallrye.mutiny.subscription.SwitchableSubscriptionSubscriber.onSubscribe(SwitchableSubscriptionSubscriber.java:107)\n    at io.smallrye.mutiny.converters.uni.UniToMultiPublisher.subscribe(UniToMultiPublisher.java:25)\n    at io.smallrye.mutiny.groups.MultiCreate$1.subscribe(MultiCreate.java:165)\n    at io.smallrye.mutiny.operators.multi.MultiRetryWhenOp$RetryWhenOperator.resubscribe(MultiRetryWhenOp.java:157)\n    at io.smalliny.operators.multi.MultiRetryWhenOp$TriggerSubscriber.onNext(MultiRetryWhenOp.java:188)\n    at io.smallrye.mutiny.helpers.HalfSerializer.onNext(HalfSerializer.java:30)\n    at io.smallrye.mutiny.helpers.StrictMultiSubscriber.onItem(StrictMultiSubscriber.java:84)\n    at io.smallrye.mutiny.operators.multi.MultiConcatMapOp$ConcatMapMainSubscriber.tryEmit(MultiConcatMapOp.java:182)\n    at io.smallrye.mutiny.operators.multi.MultiConcatMapOp$ConcatMapInner.onItem(MultiConcatMapOp.java:285)\n    at io.smallrye.mutiny.subscription.MultiSubscriber.onNext(MultiSubscriber.java:61)\n    at io.smallrye.mutiny.converters.uni.UniToMultiPublisher$UniToMultiSubscription.onItem(UniToMultiPublisher.java:92)\n    at io.smallrye.mutiny.operators.uni.UniDelayOnItem$UniDelayOnItemProcessor.lambda$onItem$0(UniDelayOnItem.java:53)\n    at org.jboss.threads.EnhancedQueueExecutor$RunnableScheduledFuture.performTask(EnhancedQueueExecutor.java:2892)\n    at org.jboss.threads.EnhancedQueueExecutor$RunnableScheduledFuture.performTask(EnhancedQueueExecutor.java:2883)\n    at org.jboss.threads.EnhancedQueueExecutor$AbstractScheduledFuture.run(EnhancedQueueExecutor.java:2741)\n    at io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:576)\n    at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\n    at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\n    at org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\n    at org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n    Suppressed: java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [107]: 'vert.x-eventloop-thread-1' current Thread [99]: 'executor-thread-1'\n        at org.hibernate.reactive.common.InternalStateAssertions.assertCurrentThreadMatches(InternalStateAssertions.java:46)\n        at org.hibernate.reactive.session.impl.ReactiveSessionImpl.threadCheck(ReactiveSessionImpl.java:190)\n        at org.hibernate.reactive.session.impl.ReactiveSessionImpl.checkOpen(ReactiveSessionImpl.java:1786)\n        at org.hibernate.internal.AbstractSharedSessionContract.checkOpenOrWaitingForAutoClose(AbstractSharedSessionContract.java:447)\n        at org.hibernate.internal.SessionImpl.checkOpenOrWaitingForAutoClose(SessionImpl.java:616)\n        at org.hibernate.internal.SessionImpl.closeWithoutOpenChecks(SessionImpl.java:410)\n        at org.hibernate.internal.SessionImpl.close(SessionImpl.java:397)\n        at org.hibernate.reactive.session.impl.ReactiveSessionImpl.reactiveClose(ReactiveSessionImpl.java:1738)\n        at io.smallrye.context.impl.wrappers.SlowContextualSupplier.get(SlowContextualSupplier.java:21)\n        at io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage.subscribe(UniCreateFromCompletionStage.java:24)\n        ... 76 more\nCaused by: java.lang.IllegalStateException: HR000069: Detected use of the reactive Session from a different Thread than the one which was used to open the reactive Session - this suggests an invalid integration; original thread [107]: 'vert.x-eventloop-thread-1' current Thread [99]: 'executor-thread-1'\n    at org.hibernate.reactive.common.InternalStateAssertions.assertCurrentThreadMatches(InternalStateAssertions.java:46)\n    at org.hibernate.reactive.session.impl.ReactiveSessionImpl.threadCheck(ReactiveSessionImpl.java:190)\n    at org.hibernate.reactive.session.impl.ReactiveSessionImpl.checkOpen(ReactiveSessionImpl.java:1786)\n    at org.hibernate.reactive.session.impl.ReactiveSessionImpl.reactivePersist(ReactiveSessionImpl.java:833)\n    at org.hibernate.reactive.util.impl.CompletionStages.lambda$loop$2(CompletionStages.java:178)\n    at org.hibernate.reactive.util.impl.CompletionStages.lambda$loop$7(CompletionStages.java:409)\n    at org.hibernate.reactive.util.impl.CompletionStages$ArrayLoop.next(CompletionStages.java:483)\n    at org.hibernate.reactive.util.async.impl.AsyncTrampoline.lambda$asyncWhile$1(AsyncTrampoline.java:215)\n    at org.hibernate.reactive.util.async.impl.AsyncTrampoline$TrampolineInternal.unroll(AsyncTrampoline.java:121)\n    at org.hibernate.reactive.util.async.impl.AsyncTrampoline$TrampolineInternal.trampoline(AsyncTrampoline.java:102)\n    at org.hibernate.reactive.util.async.impl.AsyncTrampoline.asyncWhile(AsyncTrampoline.java:197)\n    at org.hibernate.reactive.util.async.impl.AsyncTrampoline.asyncWhile(AsyncTrampoline.java:215)\n    at org.hibernate.reactive.util.impl.CompletionStages.loop(CompletionStages.java:410)\n    at org.hibernate.reactive.util.impl.CompletionStages.loop(CompletionStages.java:381)\n    at org.hibernate.reactive.util.impl.CompletionStages.loop(CompletionStages.java:178)\n    at org.hibernate.reactive.util.impl.CompletionStages.applyToAll(CompletionStages.java:505)\n    at org.hibernate.reactive.mutiny.impl.MutinySessionImpl.lambda$persistAll$10(MutinySessionImpl.java:229)\n    at io.smallrye.context.impl.wrappers.SlowContextualSupplier.get(SlowContextualSupplier.java:21)\n    at io.smallrye.mutiny.operators.uni.builders.UniCreateFromCompletionStage.subscribe(UniCreateFromCompletionStage.java:24)\n    ... 51 more\n\n</code></pre>\n<p>The &quot;Connected&quot; line in logs comes from the body of dbService::connectToDB method.</p>\n<p>Logs show that the first execution is on the correct thread, which in my case is 'vert.x-eventloop-thread-4', but then the retries are executed on 'executor-thread-1'. If an exception is not thrown in the first execution, all processing goes well. If the first exection fails, but one of the retries succeeds, the exception as above is thrown.</p>\n<p>What's wrong with my code? Starting a new session for each retry is not possible; Quarkus complains that a new session is not on a vert.x-eventloop-thread thread.</p>\n<p>Maybe it's also worth pointing out that when calling <code>serviceImpactRepository::persist</code> I actually want to persist a list of entities, not a single entity.</p>\n<p>I am using a new version of Quarkus (3.0.0.CR2) with Reactive Hibernate.</p>\n"},{"answers":[{"comments":[{"comment_id":134503027,"body":"Let me correct, then i will accept this one is answer, thanks"}],"answer_id":76272510,"body":"<p>Issue is with <code>RadioGroup</code> height . In your code , <code>RadioGroup</code> height is <code>match_parent</code> so replace <code>android:layout_height=&quot;match_parent&quot;</code> with <code>android:layout_height=&quot;wrap_content&quot;</code> for <code>RadioGroup</code> in xml file</p>\n"}],"last_activity_date":1684364823,"question_id":76272445,"body":"<p>I am trying to create a single activity app that collects data using &quot;EditText&quot; and saves it into a Firebase Realtime Database. I already achieved everything I needed for this project. But after setting everything and getting one successful build, a new build with some changes in activity files gives me following layout issue. <strong>It is fine showing every widget while soft keyboard is present</strong>. If I close the keyboard, <strong>it shrinks to top.</strong> You can see following screenshots for reference. Thanks for trying to help me. The code I used is as follows.</p>\n<ol>\n<li>Without keyboard</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/Zme6Q.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Zme6Q.jpg\" alt=\"without keyboard\" /></a></p>\n<ol start=\"2\">\n<li>While keyboard present</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/FuaqB.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FuaqB.jpg\" alt=\"with keyboard\" /></a></p>\n<p>3.activity_main.xml</p>\n<pre><code>&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nxmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\nxmlns:tools=&quot;http://schemas.android.com/tools&quot;\nandroid:layout_width=&quot;match_parent&quot;\nandroid:layout_height=&quot;match_parent&quot;\nandroid:fitsSystemWindows=&quot;true&quot;&gt;\n\n&lt;ScrollView\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:fillViewport=&quot;true&quot;&gt;\n\n    &lt;RelativeLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:id=&quot;@+id/parent_group&quot;&gt;\n\n&lt;TextView\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:text=&quot;।। श्री गणेशाय नम:&quot;\n    android:textSize=&quot;22sp&quot;\n    android:gravity=&quot;center&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginTop=&quot;8dp&quot;\n    android:id=&quot;@+id/start_txt&quot;/&gt;\n\n\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbname&quot;\n    android:hint=&quot;वर / वधु का नाम &quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/start_txt&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbpname&quot;\n    android:hint=&quot;पिता का नाम &quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbname&quot; /&gt;\n\n            &lt;RadioGroup\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;match_parent&quot;\n                android:id=&quot;@+id/genderrg&quot;\n                android:orientation=&quot;horizontal&quot;\n                android:layout_below=&quot;@+id/gbpname&quot;&gt;\n            &lt;RadioButton\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:id=&quot;@+id/rbmale&quot;\n                android:text=&quot;वर&quot;\n                android:layout_marginStart=&quot;10dp&quot;\n                android:textSize=&quot;22sp&quot;\n                android:textColor=&quot;@android:color/holo_orange_dark&quot;\n                android:layout_weight=&quot;1&quot;/&gt;\n            &lt;RadioButton\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:id=&quot;@+id/rbfmale&quot;\n                android:text=&quot;वधु&quot;\n                android:layout_marginEnd=&quot;10dp&quot;\n                android:textSize=&quot;22sp&quot;\n                android:textColor=&quot;@android:color/holo_orange_dark&quot;\n                android:layout_weight=&quot;1&quot;/&gt;\n\n            &lt;/RadioGroup&gt;\n\n\n\n\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbgotra&quot;\n    android:hint=&quot;गोत्र &quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/genderrg&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbdob&quot;\n    android:hint=&quot;जन्‍म तिथि DD-MM-YYYY &quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbgotra&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbheight&quot;\n    android:hint=&quot;ऊंचाई&quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbdob&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbcolor&quot;\n    android:hint=&quot;रंग&quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbheight&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbedu&quot;\n    android:hint=&quot;शिक्षा &quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbcolor&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbjob&quot;\n    android:hint=&quot;व्‍यवसाय&quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbedu&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbhobby&quot;\n    android:hint=&quot;रूचि के विषय&quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbjob&quot;/&gt;\n        &lt;EditText\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:id=&quot;@+id/gbmail&quot;\n            android:hint=&quot;ई-मेल&quot;\n            android:textSize=&quot;22sp&quot;\n            android:padding=&quot;8dp&quot;\n            android:layout_marginStart=&quot;8dp&quot;\n            android:textColor=&quot;@android:color/holo_orange_dark&quot;\n            android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n            android:layout_below=&quot;@+id/gbhobby&quot;/&gt;\n        &lt;EditText\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:id=&quot;@+id/gbphone&quot;\n            android:hint=&quot;मोबाईल नंबर&quot;\n            android:textSize=&quot;22sp&quot;\n            android:padding=&quot;8dp&quot;\n            android:layout_marginStart=&quot;8dp&quot;\n            android:textColor=&quot;@android:color/holo_orange_dark&quot;\n            android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n            android:layout_below=&quot;@+id/gbmail&quot;/&gt;\n&lt;EditText\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:id=&quot;@+id/gbaddr&quot;\n    android:hint=&quot;स्‍थायी पता&quot;\n    android:textSize=&quot;22sp&quot;\n    android:padding=&quot;8dp&quot;\n    android:layout_marginStart=&quot;8dp&quot;\n    android:textColor=&quot;@android:color/holo_orange_dark&quot;\n    android:textColorHint=&quot;@android:color/holo_orange_dark&quot;\n    android:layout_below=&quot;@+id/gbphone&quot;/&gt;\n\n\n        &lt;Button\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:id=&quot;@+id/add_details&quot;\n            android:text=&quot;जानकारी जोडें&quot;\n            android:layout_below=&quot;@id/gbaddr&quot;\n            android:layout_margin=&quot;8dp&quot;\n            android:textSize=&quot;22sp&quot;\n            android:backgroundTint=&quot;@android:color/holo_orange_dark&quot;/&gt;\n    \n</code></pre>\n\n    \n\n<p>4.MainActivity.java</p>\n<pre><code>package com.nilesh.rbndj;\n\nimport android.os.Bundle;\nimport android.os.Handler;\n\nimport com.google.android.gms.ads.AdRequest;\nimport com.google.android.gms.ads.AdView;\nimport com.google.android.material.snackbar.Snackbar;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.view.View;\n\nimport androidx.core.view.WindowCompat;\nimport androidx.navigation.NavController;\nimport androidx.navigation.Navigation;\nimport androidx.navigation.ui.AppBarConfiguration;\nimport androidx.navigation.ui.NavigationUI;\n\nimport com.google.firebase.database.ChildEventListener;\nimport com.google.firebase.database.DataSnapshot;\nimport com.google.firebase.database.DatabaseError;\nimport com.google.firebase.database.DatabaseReference;\nimport com.google.firebase.database.FirebaseDatabase;\nimport com.nilesh.rbndj.databinding.ActivityMainBinding;\n\nimport android.view.Menu;\nimport android.view.MenuItem;\nimport android.view.ViewGroup;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.RadioButton;\n\npublic class MainActivity extends AppCompatActivity {\n\n\n\n\n    private static final String TAG = &quot;MainActivity&quot;;\n    private AdView mAdView;\n\n    EditText name,fname,gotra,dob,hght,colorr,edu,job,hobby,mail,phone,addr;\n    Button addButton;\n    RadioButton male,fmale;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n\n//        mAdView = findViewById(R.id.adView);\n//        AdRequest adRequest = new AdRequest.Builder().build();\n//        mAdView.loadAd(adRequest);\n\n\n        name = findViewById(R.id.gbname);\n        fname = findViewById(R.id.gbpname);\n        gotra = findViewById(R.id.gbgotra);\n        dob = findViewById(R.id.gbdob);\n        hght = findViewById(R.id.gbheight);\n        colorr = findViewById(R.id.gbcolor);\n        edu = findViewById(R.id.gbedu);\n        job = findViewById(R.id.gbjob);\n        hobby = findViewById(R.id.gbhobby);\n        mail = findViewById(R.id.gbmail);\n        phone = findViewById(R.id.gbphone);\n        addr = findViewById(R.id.gbaddr);\n        addButton = findViewById(R.id.add_details);\n        male = findViewById(R.id.rbmale);\n        fmale = findViewById(R.id.rbfmale);\n\n\n        addButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Members members = new Members();\n                DatabaseReference mDatabase;\n\n                mDatabase = FirebaseDatabase.getInstance().getReference();\n\n                String id, namee, fnamee, gotraa, dobb, hghtt, colorrr, eduu, jobbb, hobbyy, email, phonee, addrr, rbm, rbf;\n\n\n                namee = name.getText().toString();\n                fnamee = fname.getText().toString();\n                gotraa = gotra.getText().toString();\n                dobb = dob.getText().toString();\n                hghtt = hght.getText().toString();\n                colorrr = colorr.getText().toString();\n                eduu = edu.getText().toString();\n                jobbb = job.getText().toString();\n                hobbyy = hobby.getText().toString();\n                email = mail.getText().toString();\n                phonee = phone.getText().toString();\n                addrr = addr.getText().toString();\n                rbm = male.getText().toString();\n                rbf = fmale.getText().toString();\n\n                id = phonee;\n\n\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;name&quot;).setValue(namee);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;father&quot;).setValue(fnamee);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;gotra&quot;).setValue(gotraa);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;dob&quot;).setValue(dobb);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;height&quot;).setValue(hghtt);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;color&quot;).setValue(colorrr);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;education&quot;).setValue(eduu);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;job&quot;).setValue(jobbb);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;hobby&quot;).setValue(hobbyy);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;email&quot;).setValue(email);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;phone&quot;).setValue(phonee);\n                mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;address&quot;).setValue(addrr);\n\n                if (male.isChecked()) {\n                    members.setGender(rbm);\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;gender&quot;).setValue(rbm);\n\n                } else {\n                    members.setGender(rbf);\n                    mDatabase.child(&quot;biodata&quot;).child(id).child(&quot;gender&quot;).setValue(rbf);\n                }\n\n                mDatabase.addChildEventListener(new ChildEventListener() {\n                    @Override\n                    public void onChildAdded(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\n//                        if (snapshot.hasChild(&quot;message&quot;)){\n//                            clearForm();\n//                        }\n                    }\n\n                    @Override\n                    public void onChildChanged(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\n\n                    }\n\n                    @Override\n                    public void onChildRemoved(@NonNull DataSnapshot snapshot) {\n\n                    }\n\n                    @Override\n                    public void onChildMoved(@NonNull DataSnapshot snapshot, @Nullable String previousChildName) {\n\n                    }\n\n                    @Override\n                    public void onCancelled(@NonNull DatabaseError error) {\n\n                    }\n                });\n\n\n            }\n        });\n\n\n\n\n    }\n\n//    public  void  clearForm() {\n//\n//        ViewGroup group = (ViewGroup) findViewById(R.id.parent_group);\n//        for (int i = 0, count = group.getChildCount(); i &lt; count; ++i) {\n//            View view = group.getChildAt(i);\n//            if (view instanceof EditText) {\n//                ((EditText) view).setText(null);\n//            }\n//        }\n\n}\n</code></pre>\n<p>I hope this information is enough for you to help solve my issue.</p>\n"},{"comments":[{"comment_id":134504614,"body":"Could you add more tags to add more information? What language is this, what framework, if any, are you using? There&#39;s a ton of ways to make android apps now so just saying it&#39;s an android question isn&#39;t specific."},{"comment_id":134504691,"body":"<code>NullPointerException</code>"},{"comment_id":134504700,"body":"Tell me what you need to know. Because I don&#180;t know whatyou need @imad.nyc"},{"comment_id":134504782,"body":"<code>try to do: currentLocation.getLongitude(); </code> ? That is nowhere in your code."},{"comment_id":134504857,"body":"@LuisDaniels, tags with the language you&#39;re using (Javascript, Kotlin, etc..) and framework (flutter, react, bazel) would be a good start. Right now it just looks like Javascript? though I&#39;m not sure, I&#39;m not familiar with Javascript."},{"comment_id":134504869,"body":"I do it in other part. And there is where I get the message @blackapps"},{"comment_id":134504876,"body":"I&#180;m using java in android studio @imad.nyc"},{"comment_id":134506051,"body":"You should of course post the code that produces the error. It makes no sense to post other code."}],"last_activity_date":1684364570,"question_id":76273864,"body":"<p>Here's the thing. I want to get my current location using GPS. I have done it like the following:</p>\n<p>My function to get coordinates:</p>\n<pre><code>private void obtenerCoordenadas() {\n        locationListener = new Course.MyLocationListener();\n\n        if (ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(this, android.Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n            // TODO: Consider calling\n            //    ActivityCompat#requestPermissions\n            // here to request the missing permissions, and then overriding\n            //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\n            //                                          int[] grantResults)\n            // to handle the case where the user grants the permission. See the documentation\n            // for ActivityCompat#requestPermissions for more details.\n            return;\n        }\n        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 0, locationListener);\n        Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);\n\n        if (location != null) {\n           /* Toast.makeText(getBaseContext(), &quot;Cambio de localización&quot;, Toast.LENGTH_SHORT).show();\n            lat.setText(&quot;Longitud funcion:&quot; + location.getLongitude());\n            lon.setText(&quot;Latitud funcion:&quot; + location.getLatitude());\n            currentLocation=location;\n\n            textView.setText(&quot;Distancia: &quot;+distance);\n            previousLocation=currentLocation;*/\n\n        } else {\n            Toast.makeText(this, &quot;sin localizacion&quot;, Toast.LENGTH_SHORT).show();\n            locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 0, locationListener);\n        }\n\n\n    }\n</code></pre>\n<p>and my listener:</p>\n<pre><code>private class MyLocationListener implements LocationListener {\n        @Override\n        public void onLocationChanged(Location loc) {\n            if (loc != null) {\n                // Toast.makeText(getBaseContext(), &quot;Location changed : Lat: &quot; + loc.getLatitude() + &quot; Lng: &quot; + loc.getLongitude(), Toast.LENGTH_SHORT).show();\n               /* Toast.makeText(Prueba.this, &quot;Cambio de localización&quot;, Toast.LENGTH_SHORT).show();\n                lat.setText(&quot;Longitud onChange:&quot; + loc.getLongitude());\n                lon.setText(&quot;Latitud onChange:&quot; + loc.getLatitude());*/\n\n\n\n                String longitude = &quot;Longitude: &quot; + loc.getLongitude();\n                Log.v(TAG, longitude);\n                String latitude = &quot;Latitude: &quot; + loc.getLatitude();\n                Log.v(TAG, latitude);\n                currentLocation=loc;\n                distance= (int)currentLocation.distanceTo(previousLocation);\n                /*textView.setText(&quot;Distancia: &quot;+distance);*/\n                previousLocation=currentLocation;\n               /* lat.setText(&quot;Longitud onChange:&quot; + loc.getLongitude());\n                lon.setText(&quot;Latitud onChange:&quot; + loc.getLatitude());*/\n\n                /*----------to get City-Name from coordinates ------------- */\n                String cityName = null;\n                Geocoder gcd = new Geocoder(getBaseContext(),\n                        Locale.getDefault());\n                List&lt;Address&gt; addresses;\n                try {\n                    addresses = gcd.getFromLocation(loc.getLatitude(), loc\n                            .getLongitude(), 1);\n                    if (addresses.size() &gt; 0)\n                        System.out.println(addresses.get(0).getLocality());\n                    cityName = addresses.get(0).getLocality();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n\n            /*String s = longitude + &quot;\\n&quot; + latitude +\n                    &quot;\\n\\nMy Currrent City is: &quot; + cityName;\n            textViewCiudad.setText(s);*/\n            } else {\n                if (ActivityCompat.checkSelfPermission(Course.this, android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED &amp;&amp; ActivityCompat.checkSelfPermission(Course.this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n                    // TODO: Consider calling\n                    //    ActivityCompat#requestPermissions\n                    // here to request the missing permissions, and then overriding\n                    //   public void onRequestPermissionsResult(int requestCode, String[] permissions,\n                    //                                          int[] grantResults)\n                    // to handle the case where the user grants the permission. See the documentation\n                    // for ActivityCompat#requestPermissions for more details.\n                    return;\n                }\n                locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 00, locationListener);\n\n            }\n\n\n        }\n\n        @Override\n        public void onProviderDisabled(String provider) {\n            // TODO Auto-generated method stub\n        }\n\n        @Override\n        public void onProviderEnabled(String provider) {\n            // TODO Auto-generated method stub\n        }\n\n\n        @Override\n        public void onStatusChanged(String provider,\n                                    int status, Bundle extras) {\n            // TODO Auto-generated method stub\n        }\n    }\n</code></pre>\n<p>I want to get the location in my &quot;currentLocation&quot; variable but the problem is that when the function &quot;obtenerCoordenadas&quot; is called, and then I try to do: <code>currentLocation.getLongitude();</code> I get this error: <code>Attempt to invoke virtual method 'double android.location.Location.getLongitude()' on a null object reference</code></p>\n<p>I don't know why that happens.\nAny idea?\nThank you.</p>\n"},{"comments":[{"comment_id":134506602,"body":"I don&#39;t understand the purpose of your <code>error</code> variable which is only ever set to false."},{"comment_id":134506652,"body":"Save the input to a string, use a regular expression to parse it and capture the individual elements into groups. What exact input do you expect?"},{"comment_id":134506659,"body":"To clarify your question, you&#39;re requesting from the user to enter just 1 character and 1 number?"},{"comment_id":134506685,"body":"@khelwood it didn&#39;t get copied correctly wait"},{"comment_id":134506693,"body":"First problem, you&#39;re using the parameter <code>x</code> as a limit in <code>for(long i = 1; i&lt;=x ; i++)</code>, but within the loop you&#39;re changing <code>x*=i</code>. <code>x</code> will increase faster than <code>i</code>, and the loop won&#39;t work. Use another variable (e.g. <code>var xf = x</code>) for the return value, and declare your parameter as <code>final long x</code> to ensure it&#39;s not changed."},{"comment_id":134506697,"body":"@Reilas for now, only one number, space, and a single digit veriable"},{"comment_id":134506703,"body":"@JohnBayko yup kk"},{"comment_id":134506718,"body":"<code>error</code> isn&#39;t being used correctly. Get the base case working first, then add error handling."},{"comment_id":134506796,"body":"@JohnBayko yea done"}],"answers":[{"comments":[{"comment_id":134506858,"body":"yes StringTokeniser  class can be used here as well as sc.substring"},{"comment_id":134511554,"body":"I would <i>prefer</i> a <code>Scanner</code> instead of <code>StringTokenizer</code> - it separates by whitespaces and also can parse integer (and is a bit newer, or less older)"},{"comment_id":134519890,"body":"@user16320675 Yeah using delimiter would be good for replacing stringtokenizer"}],"answer_id":76275147,"body":"<p>You can read a string and then use stringtokenizer to seperate with black spaces. Then use nextToken() to get the integer and variable seperately.</p>\n<p><code>Long.parseLong()</code> to convert string to long</p>\n<pre><code>import java.util.*;\nclass test{\n    public static void main(String args[]){\n        String str = &quot;12 w&quot;;\n        StringTokenizer st = new StringTokenizer(str,&quot; &quot;);\n        int x = Integer.parseInt(st.nextToken());\n        str=st.nextToken();\n        System.out.println(str+&quot;-&quot;+x);\n    }\n}\n</code></pre>\n<p>Here I used int, you can use long aswell</p>\n"},{"comments":[{"comment_id":134508461,"body":"<code>a.substring(indexOf + 1).charAt(0)</code> would be the same as <code>a.charAt(indexOf + 1)</code> - just more method call and intermediate <code>String</code> created || In <i>production</i> code you would also check if <code>indexOf</code> is not <code>-1</code>..."},{"comment_id":134509442,"body":"@user16320675, you&#39;re right, I overlooked that.  I made the change to my answer."}],"answer_id":76275167,"body":"<p>You'll only need one <code>Scanner</code> to get the input, which you do with <code>a = sc.nextLine()</code>.</p>\n<p>From there, find the index of the space, and use the <code>String.substring</code> method to derive each value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner sc = new Scanner(System.in) ;\nboolean error = false ;\nString a = &quot;&quot; ;\ndo {\n    if(error)\n    {\n        System.out.println(&quot;Error; Please try again&quot;) ;\n        error = false ;\n    }\n    System.out.println(&quot;Enter a (separate single variable with space) : &quot;) ;\n    a = sc.nextLine() ;\n} while(error) ;\n\nsc.close() ;\n\nint indexOf = a.indexOf(' ');\nlong number = Long.parseLong(a.substring(0, indexOf));\nchar variable = a.charAt(indexOf + 1);\n</code></pre>\n"}],"last_activity_date":1684362981,"question_id":76275028,"body":"<p>As a part of a Binomial expansion program, I created a Scanner class (<code>sc</code>) on an entered <strong>number + variable</strong>, and another (<code>scan</code>)on the first <em>term</em> (<em>a</em> in <strong>(a+b)<sup>n</sup></strong>)</p>\n<p>Here's my program till now :</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.* ;\npublic class binomial_expansion\n{\n    public static long factorial(long x)\n    {\n        long xf = x ;\n        for(long i = 1; i&lt;=x ; i++)\n        {\n            xf*=i ;\n        }\n        return xf ;\n    }\n    \n    public static double C(long n, long r)\n    {\n        double c = factorial(n)/(factorial(n-r)*factorial(r)) ;\n        return c ;\n    }\n    \n    public static void main()\n    {\n        Scanner sc = new Scanner(System.in) ;\n        boolean error = false ;\n        String a = &quot;&quot; ;\n        do {\n            if(error)\n            {\n                System.out.println(&quot;Error; Please try again&quot;) ;\n                error = false ;\n            }\n            System.out.println(&quot;Enter a (separate single variable with space) : &quot;) ;\n            a = sc.nextLine() ;\n            if(a==&quot;&quot;) error = true ;\n        } while(error) ;\n        \n        sc.close() ;\n        Scanner scan = new Scanner(a) ;\n        long x = scan.nextLong() ;\n        long x1 = scan.next().charAt(0) ;\n    }\n}\n</code></pre>\n<br>\nThe problem with creating a character variable using `.next().charAt(index)` is that the index number of the character (the single variable) is not known in the string (the length of the integer is not known), and also that the blank space has to be omitted which was entered by the user to separate the integer literal and the character literal. How can the character variable containing the single-digit variable be made ?\n"},{"comments":[{"comment_id":134507447,"body":"I don&#39;t see any attempt at splitting. Are you looking for the <code>String.split()</code> method?"},{"comment_id":134507464,"body":"yes not sure how to split as splitting is coming as &quot;[admin&quot;, &quot;user]&quot;"},{"comment_id":134507665,"body":"To clarify your question, <code>getRoles</code> is a list of comma-separated strings, each of which you&#39;d like to expand into one list, one value per index?"},{"comment_id":134509245,"body":"This sounds like an <a href=\"https://xyproblem.info/\" rel=\"nofollow noreferrer\">XY</a> problem."},{"comment_id":134537941,"body":"@Gojo, can you provide the <code>buildRolesList</code> method?"}],"answers":[{"answer_id":76275615,"body":"<p>Remove all <code>&quot;[&quot;, &quot;]&quot;</code> characters, and the spaces using regex. And  then split by &quot;,&quot;.</p>\n<pre><code>String str = &quot;[admin, user]&quot;;\nSystem.out.println(Arrays.toString(str.replaceAll(&quot;\\\\[|\\\\]|\\s+&quot;, &quot;&quot;).split(&quot;, &quot;)));\n</code></pre>\n"},{"answer_id":76275649,"body":"<p>Suppose you have a list of strings like <code>&quot;[admin, user]&quot;</code>. Then you do it almost right, just forget to split a string to individual roles.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String... args) {\n    List&lt;String&gt; list = List.of(&quot;[admin, user]&quot;,\n                                &quot;[owner, developer]&quot;);\n\n    Set&lt;String&gt; roles = getRoles(list);\n    System.out.println(roles);  // [owner, admin, developer, user]\n}\n\npublic static Set&lt;String&gt; getRoles(List&lt;String&gt; list) {\n    return list.stream()\n               .map(String::toLowerCase)\n               .map(Foo::getRoles)\n               .flatMap(Set::stream)\n               .collect(Collectors.toSet());\n}\n\nprivate static Set&lt;String&gt; getRoles(String str) {\n    return Stream.of(str)\n                 .map(s -&gt; s.replace(&quot;[&quot;, &quot;&quot;))\n                 .map(s -&gt; s.replace(&quot;]&quot;, &quot;&quot;))\n                 .map(s -&gt; s.split(&quot;\\\\s*,\\\\s*&quot;))\n                 .flatMap(Arrays::stream)\n                 .collect(Collectors.toSet());\n}\n</code></pre>\n"},{"answer_id":76276478,"body":"<blockquote>\n<p>how to split one list value to elements</p>\n</blockquote>\n<p>It looks like you have a list of roles in pairs and want to break that up into separate lists of size 2. <code>List.toString()</code> So can't you instead return a <code>List&lt;String&gt;</code> of all the roles and just copy in pairs.  Here is how it would work.</p>\n<pre><code>List&lt;List&lt;String&gt;&gt; roles = List.of(&quot;admin&quot;, &quot;user&quot;, \n                                   &quot;steno&quot;,&quot;typist&quot;));\n\nList&lt;List&lt;String&gt;&gt; roleLists = new ArrayList&lt;&gt;();\n\nif (roles.size()%2 != 0) {\n     System.out.println(&quot;Roles must be in pairs&quot;);\n} else {\n     for (int i = 0; i &lt; roles.size(); i+=2) {\n        roleLists.add(new ArrayList&lt;&gt;(List.of(roles.get(i),roles.get(i+1))));\n     }\n}\n</code></pre>\n<p>Then when you get the list of lists you can retrieve the values as follows:</p>\n<pre><code>for(List&lt;String&gt; lst : roles) {\n    System.out.println(&quot;List -&gt; &quot; + lst);\n    for(int i = 0; i &lt; lst.size(); i++) {\n         System.out.printf(&quot;   %d -&gt; %s%n&quot;, i, lst.get(i));\n    }\n}\n</code></pre>\n<p>prints</p>\n<pre><code>List -&gt; [admin, user]\n   0 -&gt; admin\n   1 -&gt; user\nList -&gt; [steno, typist]\n   0 -&gt; steno\n   1 -&gt; typist\n\n</code></pre>\n<p>Otherwise, just do the following:</p>\n<pre><code>String s = &quot;[admin, user]&quot;;\n\nString[] result = s.replaceAll(&quot;[\\\\[\\\\]\\\\s+]+&quot;,&quot;&quot;).split(&quot;,&quot;);\nfor (int i = 0; i &lt; result.length; i++) {\n    System.out.printf(&quot;%d -&gt; %s%n&quot;, i, result[i]);\n}\n</code></pre>\n<p>prints</p>\n<pre><code>0 -&gt; admin\n1 -&gt; user\n</code></pre>\n"}],"last_activity_date":1684362898,"question_id":76275529,"body":"<p>How to get elements from the below list:</p>\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;&gt;();\n\nList&lt;String&gt; getRoles = \nbuildRolesList(list, role).stream()\n    .map(String::trim)\n    .map(String::toLowerCase)\n    .map(str-&gt;str.replace ( &quot;[&quot;,&quot;&quot; ))\n    .map(str-&gt;str.replace ( &quot;]&quot;,&quot;&quot; ))\n    .collect( Collectors.toCollection ( ArrayList::new ) );\n</code></pre>\n<p><code>getRoles = &quot;[admin, user]&quot;</code> ---this is the list I am getting, but the list wanted is <code>[&quot;admin&quot;,&quot;user&quot;]</code> splitted</p>\n<p>How to achieve the list values as <code>[0---&gt;&quot;admin&quot;,1---&gt;&quot;user&quot;]</code></p>\n<p>The above result is coming in size 1 but wanted it to be size 2</p>\n"},{"comments":[{"comment_id":134508975,"body":"Where is your <code>PrivateMain.class</code> file located and why is your <code>PrivateMain.java</code> file not located inside a directory <code>sample&#47;</code>?"},{"comment_id":134509086,"body":"<code>javac -d . PrivateMain.java;java sample.PrivateMain</code>"}],"answers":[{"answer_id":76276570,"body":"<h2><code>java PrivateMain</code> does not work</h2>\n<p>That's because your class isn't called that. It's called <code>sample.PrivateMain</code>. If you use <code>java</code> in a 'I shall give you the name of my class' mode (i.e. not via the <code>-jar</code> or <code>-jmod</code> launch options), it <strong>has to be</strong> fully qualified.</p>\n<h2><code>java sample.PrivateMain</code> does not work</h2>\n<p>class names are turned into paths by turning dots into slashes and appending <code>.class</code>. In other words, if you run <code>java sample.PrivateMain</code>, java starts, and checks every dir in the classpath by <strong>appending <code>sample/PrivateMain.class</code> to it</strong>. This doesn't find your class because your class isn't in sample/PrivateMain - it's in ./PrivateMain which isn't where java is going to look at all.</p>\n<h2>How to fix it</h2>\n<p>For throwaway projects like this, get rid of the <code>package</code> declaration. While you're at it, you can just run <code>java MyMain.java</code> - no need to involve <code>javac</code>. Once you graduate to more serious projects with multiple source files, and especially, multiple packages, ditch this command line <code>javac</code> and <code>java</code> stuff and use a build system such as maven or gradle.</p>\n<p>If you must, for some strange reason, use a package statement, set up your project like so:</p>\n<pre><code>cd G:\\javaPract\nmkdir sample\ncd sample\n# put your PrivateMain.java file here\njavac PrivateMain.java\ncd ..\njava -cp . sample.PrivateMain\n</code></pre>\n<p>key point is, file has to be in <code>G:\\javaPract\\sample\\PrivateMain.class</code>, and <code>G:\\javaPract</code> (<strong>not</strong> <code>G:\\javaPract\\sample</code>!) has to be on the classpath. Then run <code>java sample.PrivateMain</code>.</p>\n<p>Generally, do not use <code>CLASSPATH</code>, just specify with the <code>-cp</code> parameter. <code>CLASSPATH</code> is a global variable and as a general rule it's bizarre to limit your computer to only run one java application ever.</p>\n"}],"last_activity_date":1684362436,"question_id":76276343,"body":"<p>Unable to execute this code from windows command line</p>\n<ol>\n<li>I wrote the code as :</li>\n</ol>\n<pre><code>package sample;\n\npublic class PrivateMain{\n    public static void main(String[] args){\n        System.out.println(&quot;This is from  main&quot;);\n    }\n\n}\n</code></pre>\n<ol start=\"2\">\n<li>I have set the classpath using below commands, but still receiving error as &quot;Could not find or load main class&quot;. Am i missing any steps?</li>\n</ol>\n<pre><code>G:\\javaPract&gt;javac PrivateMain.java  \n\nG:\\javaPract&gt;java PrivateMain      \nError: Could not find or load main class PrivateMain\n\nG:\\javaPract&gt;java sample.PrivateMain \nError: Could not find or load main class sample.PrivateMain\n\nG:\\javaPract&gt;set CLASSPATH=%CLASSPATH%;.\n\nG:\\javaPract&gt;echo %CLASSPATH%\nG:\\javaPract;.\n\nG:\\javaPract&gt;javac PrivateMain.java \n\nG:\\javaPract&gt;java PrivateMain      \nError: Could not find or load main class PrivateMain\n\nG:\\javaPract&gt;java sample.PrivateMain \nError: Could not find or load main class sample.PrivateMain\n\nG:\\javaPract&gt;\n</code></pre>\n<ol start=\"3\">\n<li>file contents on G:\\javaPract directory:</li>\n</ol>\n<pre><code>G:\\javaPract&gt;dir\n Volume in drive G is Learning\n Volume Serial Number is 008F-C257\n\n Directory of G:\\javaPract\n\n03/21/2023  08:04 AM    &lt;DIR&gt;          .\n03/21/2023  08:04 AM    &lt;DIR&gt;          ..\n05/17/2023  04:35 PM               280 PrivateMain.java\n05/17/2023  04:36 PM               688 PrivateMain.class\n</code></pre>\n"},{"comments":[{"comment_id":134510758,"body":"can you add more complete example? Add the code that shows creation of <code>myListOfObject</code> and some sample values added to it."}],"last_activity_date":1684361736,"question_id":76273795,"body":"<p>I have been trying to convert a list of object to <code>Dataset&lt;Row&gt;</code> using <code>Encoders.bean</code> in spark but getting empty data set every time I am running the following code even though my list contains data of type T(java pojo).</p>\n<pre><code>Dataset&lt;Row&gt; d = getSparkSession()\n      .createDataset(myListOfObject, Encoders.bean(MyObject.class)).toDF()\n</code></pre>\n<p>I am expecting the conversion of <code>myListOfObject</code> to be converted to <code>Dataset&lt;Row&gt;</code>.</p>\n"},{"comments":[{"comment_id":55837059,"body":"Are you using maven resource filtering? I&#39;ve just faced the same issue and it turns out to be caused by maven filtering, as I forgot to exclude them from filtering."},{"comment_id":55855370,"body":"@MajedAbdulaziz Thanks a lot for the reply, but I&#39;m not using maven, I don&#39;t think this is the cause in my case."},{"comment_id":55887670,"body":"Where in relation to your source file and the compiled class file is the <code>Roboto-Thin.ttf</code> located?"},{"comment_id":55892773,"body":"@hotzst They are all in the same folder <code>out&gt;production&gt;TeamViewer&gt;sample&gt;Main.class</code> and <code>out&gt;production&gt;TeamViewer&gt;sample&gt;Roboto-Thin.ttf</code>"},{"comment_id":56143255,"body":"If you move the project to a different location, which does not have a path containing a space (<code>Java8%20projects</code>) does that make a difference? What if you package the application in a jar file and run that one?"},{"comment_id":56152878,"body":"@hotzst Thanks a lot, removing the space from <code>Java8%20projects</code> to <code>Java8projects</code> tends to solve the problem."}],"answers":[{"comments":[{"comment_id":55950102,"body":"Thanks for reply, but I&#39;m still getting the same error, Also sorry I had forgotten the <code>-fx-</code> prefix but I have just added it"},{"comment_id":55950137,"body":"May be the problem is with Intellij Idea"},{"comment_id":55950682,"body":"Have you tried compiling/running it with plain javac/java, without an IDE? Just tried it myself and even your original CSS works fine that way."},{"comment_id":55965154,"body":"I guess that and even eclipse would work, But I need a solution for <code>IntelliJ Idea</code> ,Also It was initially working perfectly but it just suddenly stopped."},{"comment_id":96197601,"body":"I had this problem today. Even if years later I can add my bit. If you are using Maven and IntelliJ Idea, I found helpful to manually reimport maven projects after importing the font files. It worked after that."}],"answer_id":34098531,"body":"<p>I'm using the e(fx)clipse plugin for Eclipse, which does not recognize your CSS file as valid JavaFX CSS. I do not get the exception when I start the program however, it simply uses the default font.</p>\n\n<p>With the following changes, the font is being loaded and displayed.</p>\n\n<pre><code>/**/\n@font-face {\n    font-family: Roboto; /* removed '' */\n    src: url(\"Roboto-Thin.ttf\");\n}\n#sampleLabel{\n    -fx-font-family: Roboto ; /* added -fx- prefix */\n}\n</code></pre>\n"},{"comments":[{"comment_id":57991844,"body":"I had solved it by just removing the space to get rid of the %20, but this also solves the problem. Thanks a lot +1"},{"comment_id":126522903,"body":"Is there a way to do it in CSS? The reason I am asking this is, if we load the font with code, then it&#39;d be a tough task to setFont for each and every element."}],"answer_id":35135133,"body":"<p>I found the possible cause and a work-around:\nUnder the hood the css-loader uses the function <code>Font.loadFont</code> to load the font-face in your CSS.\n<code>Font.loadFont</code> simply returns <code>null</code> if it fails, which give the \"warning\".</p>\n\n<p>It seems that this function does not work with <code>%20</code> it its path/url-string.\nSo you need to resolve the path and then replace it with a space.\nThat means you will have to load your fonts with code in stead of with CSS (for now).</p>\n\n<p>In Clojure my work-around looks like this:</p>\n\n<pre><code>(require '[clojure.java.io :as cio])\n(require '[clojure.string :as s])\n(-&gt; \"fonts/SourceCodePro-Regular.ttf\" \n  cio/resource \n  str \n  (s/replace \"%20\" \" \") \n  (javafx.scene.text.Font/loadFont  10.))\n</code></pre>\n\n<p>;-)</p>\n"},{"answer_id":48042484,"body":"<p>So, almost 2 years later, and I came across my own response to the same problem I still have.</p>\n\n<p>But now I have a cooler and more elegant solution, after studying the source code for <code>com.sun.javafx.css.StyleManager</code> : Simply parse the stylesheets myself and load the fonts.</p>\n\n<p>See relevant source code here: <a href=\"http://grepcode.com/file/repo1.maven.org/maven2/net.java.openjfx.backport/openjfx-78-backport/1.8.0-ea-b96.1/com/sun/javafx/css/StyleManager.java#932\" rel=\"nofollow noreferrer\">lines 932-662</a></p>\n\n<p>(Yes, this is all in Clojure, but I am sure you can figure it out.)</p>\n\n<p>I start with this:</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(defn add-stylesheet [^Scene scene path]\n  (let [logger (Logging/getCSSLogger)\n        level (.level logger)]\n    (.setLevel logger PlatformLogger$Level/OFF)  ;; turn off logger\n    (-&gt; scene .getStylesheets (.add path))  ;; set stylesheet\n    (.setLevel logger level) ;; turn logger back on\n    (-&gt; path stylesheet-parsed load-fonts))) ;; parse and load fonts\n</code></pre>\n\n<p>(Turning off logging doesn't work, for some reason).</p>\n\n<p>The stylesheet is parsed with this:</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(defn stylesheet-parsed [path]\n  (.parse (CSSParser.) (cio/resource path)))\n</code></pre>\n\n<p>And finally the fonts are loaded with this:</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(defn- load-fonts [^Stylesheet stylesheet]\n  (doseq [^FontFace fontface (.getFontFaces stylesheet)]\n    (doseq [^FontFace$FontFaceSrc ffsrc (.getSources fontface)]\n      (let [src (-&gt; ffsrc .getSrc (cs/replace \"%20\" \" \"))] ;; &lt;- sanitizing path for Font/getFont\n        (println \"Loading font:\" src)\n        (let [f (Font/loadFont src 10.)]\n          (println \"Font loaded:\" f))))))\n</code></pre>\n\n<p>This works just fine, and looks a lot like the original. An advantage is that here we don't check for type URL only, so we could theoretically extend it to handle @font-face more extensively.</p>\n\n<p>Here is a more Clojure-y implementation of <code>load-fonts</code> which returns a list of all fonts loaded:</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(defn- load-fontface-src [^FontFace$FontFaceSrc ffsrc]\n  (-&gt; ffsrc .getSrc (cs/replace \"%20\" \" \") (Font/loadFont 10.)))\n\n(defn- load-fontface [^FontFace ff]\n  (map load-fontface-src (.getSources ff)))\n\n(defn- load-fonts [^Stylesheet stylesheet]\n  (vec (flatten (map load-fontface (.getFontFaces stylesheet)))))\n</code></pre>\n\n<p>And the imports needed:</p>\n\n<pre class=\"lang-clj prettyprint-override\"><code>(import\n  '[com.sun.javafx.css.parser CSSParser]\n  '[com.sun.javafx.css Stylesheet FontFace FontFace$FontFaceSrc]\n  '[com.sun.javafx.util Logging]\n  '[sun.util.logging PlatformLogger$Level])\n</code></pre>\n\n<p>TODO:<br>\n1. Turn of logging. (It is annoying, though only a problem in development.)<br>\n2. Test to see if any fonts were not loaded, and only then to the alternative parsing and loading.  But probably the simply checking would require as much processing as actually loading the fonts an extra time.</p>\n\n<p>FIX:\nadded <code>vec</code> to the left of <code>flatten</code>, to ensure that lazy seqs are realized.</p>\n"},{"answer_id":59703303,"body":"<p>For those who - like me - still have this issue and do not want or know how to use Clojure, here is how to do it in Java only: <br>\nBevore adding the stylesheet(s) to your scene, use <code>Font.loadFont(getClass().getResourceAsStream([fontpath...]), [Some font-size, for example 12]);</code><br>The font will then be registered in JavaFX and you can use the <code>-fx-font-family</code> css-Property with the loaded font.</p>\n"},{"answer_id":65127949,"body":"<p>In my case this is produced by the '-' character in the font file name, replace this with a '_' and it works.</p>\n<p>i identify that the font family must be the same file name but replacing all special characters ' ' (a blank space) and split the camel case words.</p>\n<p>so:</p>\n<p>before (no working):</p>\n<pre><code>@font-face {\n    font-family: 'RifficFree Bold';\n    src: url(&quot;../fonts/RifficFree-Bold.ttf&quot;);\n}\n.bingo-number, .label{\n    -fx-font-family: 'RifficFree Bold';\n}\n</code></pre>\n<p>after (working):</p>\n<pre><code>@font-face {\n    font-family: 'Riffic Free Bold';\n    src: url(&quot;../fonts/RifficFree_Bold.ttf&quot;);\n}\n.bingo-number, .label{\n    -fx-font-family: 'Riffic Free Bold';\n}\n</code></pre>\n"},{"answer_id":76276518,"body":"<p>I found a solution on Reddit that worked for me. Here's the link: <a href=\"https://www.reddit.com/r/javahelp/comments/3pxmkc/javafx_fontface_css_not_working/\" rel=\"nofollow noreferrer\">Reddit post</a></p>\n<p>When defining the font family in the CSS stylesheet, make sure to use the exact name mentioned on the first line of the font file.</p>\n<p>For example, if the first line says &quot;Pixeloid Sans&quot;, the font family should be specified as follows:</p>\n<p><code>-fx-font-family: &quot;Pixeloid Sans&quot;;</code></p>\n<p>I also removed the <code>@font-face</code> declaration, as it was unnecessary.</p>\n<p>Lastly, I should mention that all of my .tff files are located in a folder within /resources.</p>\n"}],"last_activity_date":1684361663,"question_id":34036207,"body":"<p>I had already asked a similar question <a href=\"https://stackoverflow.com/questions/33973921/javafx-font-face-css-error-loadstylesheetunprivileged\">here</a> but it seems It wasn't clear since I had a lot of code in the project and couldn't post it here So <strong>please</strong> don't mark as duplicate. </p>\n\n<p>Because of that, I then decided to create a new project with just a <strong>Label</strong> in it to make the code small and clean and also to eliminate other <strong>potential suspects</strong> of the error I'm getting.</p>\n\n<p>So here is my <strong>Java Source code</strong></p>\n\n<pre><code>public class Main extends Application {\n\n    @Override\n    public void start(Stage primaryStage) throws Exception {\n        Group root = new Group();\n\n        Label label = new Label(\"Sample Label\");\n        label.setId(\"sampleLabel\");\n        root.getChildren().add(label);\n\n        Scene scene = new Scene(root, 300, 275);\n        scene.getStylesheets().add(getClass().getResource(\"applicationStyles.css\").toExternalForm());\n        primaryStage.setTitle(\"Hello World\");\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n</code></pre>\n\n<p>And this is my <strong>css file</strong></p>\n\n<pre><code>/**/\n@font-face {\n    font-family:'Roboto';\n    src:url(\"Roboto-Thin.ttf\");\n}\n#sampleLabel{\n    -fx-font-family: Roboto ;\n}\n</code></pre>\n\n<p>This is the error I'm getting in Intellij Idea</p>\n\n<pre><code>Dec 02, 2015 9:16:34 AM com.sun.javafx.css.StyleManager loadStylesheetUnPrivileged\nINFO: Could not load @font-face font [file:/C:/Users/UserName/Desktop/Java8%20projects/TeamViewer/out/production/TeamViewer/sample/Roboto-Thin.ttf]\n</code></pre>\n\n<blockquote>\n  <p>All the project files are in one package and the font file is also present in the out>production>TeamViewer>sample>Roboto-Thin.ttf. I also upgraded from jdk-8u65 to jdk-8u66</p>\n</blockquote>\n\n<p>Thanks, any help is greatly appreciated.</p>\n"},{"comments":[{"comment_id":134501576,"body":"A <code>SynchronousQueue</code> doesn’t know anything about the thread that is not calling <code>offer</code>. But if you have exactly one consumer waiting for exactly one producer, why do they even communicate via a <code>SynchronousQueue</code>? It would make more sense to have a <code>Future</code> or something similar. Or just not to use two different threads when one would perform a blocking wait for the other anyway."},{"comment_id":134501833,"body":"I have two different threads (a NIO thread on the consumer, and a Quartz thread on the producer) so I can&#39;t have just one thread. You suggest to use a <code>Future</code> can you elaborate because I don&#39;t see how it would solve my problem. I need the producer to block until a consumer takes the message"},{"comment_id":134502268,"body":"Why do you want to block the producer?"},{"comment_id":134502407,"body":"Because I want it to be aware of the success or error. Callbacks may also be suitable I guess"},{"comment_id":134502806,"body":"@Holger if you have any idea of a pattern that would be suitable for me, I&#39;d be glad to know it"},{"comment_id":134505006,"body":"I don’t know enough about your case. Maybe, <code>CompletableFuture</code> can help. If you can express your different thread contexts as <code>Executor</code>s, you can chain subsequent actions (callbacks) using the various <code>then…Async(functionOrAction, executor)</code> methods."}],"answers":[{"answer_id":76276441,"body":"<p>No idea if there are better solutions (would love to know), but I'm sharing mine:</p>\n<h2>Service</h2>\n<pre><code>private record ContentAndFile(LongPollingDto dto, File file) {\n}\n\nprivate Queue&lt;CompletableFuture&lt;LongPollingDto&gt;&gt; consumers = new ConcurrentLinkedQueue&lt;&gt;();\nprivate Queue&lt;ContentAndFile&gt; messages = new ConcurrentLinkedQueue&lt;&gt;();\n\npublic CompletableFuture&lt;LongPollingDto&gt; getFutureDto() throws IOException {\n    CompletableFuture&lt;LongPollingDto&gt; future = new CompletableFuture&lt;&gt;();\n    consumers.add(future);\n    match();\n\n    return future;\n}\n\npublic void enqueue(LongPollingDto content) throws IOException {\n    String uniqueFileName = UUID.randomUUID().toString() + &quot;.json&quot;;\n    File file = new File(syncTmpDataDirectory, uniqueFileName);\n    writer.writeValue(file, content);\n    doEnqueue(content, file);\n    match();\n}\n\n@EventListener(ApplicationReadyEvent.class)\nprotected void synchronizeTemporaryFiles() throws IOException {\n    File tmpDir = new File(syncTmpDataDirectory);\n\n    List&lt;File&gt; files = Arrays.asList(tmpDir.listFiles());\n    files.sort(Comparator.comparing(File::lastModified));\n\n    files.forEach(x -&gt; {\n        try {\n            LongPollingDto dto = mapper.readValue(x, LongPollingDto.class);\n            doEnqueue(dto, x);\n        } catch (IOException e) {\n            log.error(&quot;Error when syncing file: {}&quot;, x.getAbsolutePath(), e);\n        }\n    });\n\n    match();\n}\n\nprivate void match() throws IOException {\n    if (!consumers.isEmpty() &amp;&amp; !messages.isEmpty()) {\n        CompletableFuture&lt;LongPollingDto&gt; future = consumers.poll();\n        if (!future.isCancelled()) {\n            ContentAndFile contentAndFile = messages.poll();\n            future.complete(contentAndFile.dto);\n            Files.delete(contentAndFile.file.toPath());\n        }\n\n        match();\n    }\n}\n\nprivate void doEnqueue(LongPollingDto dto, File file) {\n    messages.add(new ContentAndFile(dto, file));\n}\n</code></pre>\n<h2>Controller</h2>\n<pre><code>@GetMapping(&quot;long-polling&quot;)\npublic DeferredResult&lt;LongPollingDto&gt; longPolling() throws IOException {\n\n    DeferredResult&lt;LongPollingDto&gt; result = new DeferredResult&lt;&gt;();\n\n    CompletableFuture&lt;LongPollingDto&gt; futureDto = longPollingService.getFutureDto();\n\n    executor.execute(() -&gt; {\n        try {\n            result.setResult(futureDto.get());\n        } catch (InterruptedException | ExecutionException e) {\n            log.error(&quot;An error occurred when transferring the file: &quot;, e);\n            Thread.currentThread().interrupt();\n        }\n    });\n\n    result.onCompletion(() -&gt; futureDto.cancel(true));\n\n    return result;\n}\n</code></pre>\n<p>This solution allows me to have multiple parallel consumers that perform long-polling, and it allows to cleanup the consumer (to avoid data loss) when the client has died. It also persists messages on the disk to avoid data loss if my application goes down.</p>\n"}],"last_activity_date":1684361427,"question_id":76270500,"body":"<p>I have a use case where I synchronize data with another service which performs long polling via HTTP.</p>\n<p>For that purpose, I use a <code>SynchronousQueue</code> which works perfectly except that when I receive a poll from the consuming service, I call <code>take</code> on the queue, but the remote service may die, causing the thread associated to the HTTP request to stay alive without eventually returning any HTTP response. Still, the <code>take</code> method would eventually return in that thread and consume the data which would then be lost.</p>\n<p>How do I handle this problem?</p>\n"},{"comments":[{"comment_id":24013031,"body":"Check you project build path"},{"comment_id":24016728,"body":"no screenshot attached"}],"answers":[{"answer_id":16736870,"body":"<p>Make sure you are importing annotations.</p>\n\n<pre><code> import org.testng.annotations.*;\n</code></pre>\n"},{"answer_id":16773727,"body":"<p>Thanks for all your answers and help. I got the mistake what I am doing:</p>\n\n<p>I am just leaving by writing <code>@Test</code> annotation. Instead if I write the annotation along with function this error is not coming. For e.g. </p>\n\n<pre><code>@Test \npublic void sampletest() { }\n</code></pre>\n\n<p>then the error which I am facing won't come.</p>\n"},{"answer_id":33546900,"body":"<p>For any future visitors, I was also able to fix this issue by making the test method public.</p>\n"},{"answer_id":55202479,"body":"<p>testng annotations not working.</p>\n\n<p>Inclusion of the following (post by Korey Hinton) helped.\n import org.testng.annotations.*; - </p>\n"},{"answer_id":68330730,"body":"<p>TestNG only picks the Files with 'test' in the file Name or Public Class.\nFor Eg : the File name is App.java it won't run the @Test method but if we rename the file to AppTest it runs.</p>\n"}],"last_activity_date":1684361125,"question_id":16684281,"body":"<p>I have installed TestNG(ver:6.8.6.20130517_2218) in Eclipse (Ver: 1.4.2.20120213-0813) on Windows7(64bit). I verified that TestNG is successfully installed</p>\n\n<p>When I write @Test in one of the sample jave file that I created, Annotation(@Test) is not resolved. It is giving Syntax error.What could be the issue? Please see the attached screenshot for more details</p>\n"},{"comments":[{"comment_id":68972886,"body":"Interesting topic. I tried to find out what kind of character this is (your first example) and I&#39;m wondering if the combinations that are considered these combined emojis are real unicode standards or conventions adopted by vendors. Your first example is a combination of the unicode characters for Woman, Woman, Boy, Boy combined with Zero-width joiners. <a href=\"http://emojipedia.org/emoji/%F0%9F%91%A9%E2%80%8D%F0%9F%91%A9%E2%80%8D%F0%9F%91%A6%E2%80%8D%F0%9F%91%A6/\" rel=\"nofollow noreferrer\">emojipedia.org/emoji/&hellip;</a>"},{"comment_id":68973868,"body":"One way of combining characters into emojis is using the zero-width-joiner codepoint (ZWJ/ U+200D). So one way to get the count of visible characters is to go over all unicode codepoints and whenever you encounter the ZWJ, you substract two (for the ZWJ and for the next character which is merged into the previous character). However there are more ways to compose emojis (and unicode characters) so your best bet is to wait for emoji4j to update or to do it yourself."},{"comment_id":68975726,"body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/9097572/whats-the-correct-algorithm-to-determine-number-of-user-perceived-characters\">What&#39;s the correct algorithm to determine number of user-perceived-characters?</a>"},{"comment_id":68975731,"body":"Doesn&#39;t look like Java supports counting Grapheme Clusters (perceived characters). So the above question/answer should still be valid."},{"comment_id":68992578,"body":"It&#39;s a bit different - that question (and some of the comments on it) are avoiding the use of any higher-level functions or third-party bits like the ICU library. (They want to go from <code>int[]</code> to emoji count.) I&#39;m just working with Strings and happy to use whatever resources are available. In preliminary testing it looks like the ICU library might work - I&#39;ll make sure then add an answer."},{"comment_id":68995213,"body":"I tried - didn&#39;t know about the ICU library - and it works, you can just use your code above that uses BreakIterator, as long as use ICU&#39;s version of BreakIterator rather than the java API version. Surprising. I&#39;m reading that even JDK9 is planned to support only Unicode version 8 rather than 9 which is the newest version. So ICU is the way forward."}],"answers":[{"comments":[{"comment_id":133574795,"body":"Unfortunately there are tons of false positive, like this one: <code>&quot;\\uD8F6\\uDC0B&quot;</code>"}],"answer_id":41222783,"body":"<p>I ended up using the <a href=\"https://mvnrepository.com/artifact/com.ibm.icu/icu4j\" rel=\"noreferrer\">ICU library</a>, which worked much better. No changes (aside from import statements) were needed from my original codeblock, as it simply provides a different implementation of <code>BreakIterator</code>.</p>\n"},{"comments":[{"comment_id":134224828,"body":"FYI, the missing support for grapheme clusters with <code>BreakIterator</code> that you mention has finally been implemented in Java 20. See <a href=\"https://bugs.openjdk.org/browse/JDK-8291660\" rel=\"nofollow noreferrer\">Grapheme support in BreakIterator</a>"}],"answer_id":74078861,"body":"<p>JDK 15 <a href=\"https://bugs.openjdk.org/browse/JDK-8243579\" rel=\"nofollow noreferrer\">added support</a> for <a href=\"https://unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries\" rel=\"nofollow noreferrer\">extended grapheme clusters</a> to the <code>java.util.regex</code> package.  Here’s a solution based on that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/** Returns the number of grapheme clusters within `text` between positions\n  * `start` and `end`.  Omits any partial cluster at the end of the span.\n  */\nint columnarSpan( String text, int start, int end ) {\n    return columnarSpan( text, start, end, /*wholeOnly*/true ); }\n\n\n/** @param wholeOnly Whether to omit any partial cluster at the end\n  *   of the span.  Iff `true` and `end` bisects the final cluster,\n  *   then the final cluster is omitted from the count.\n  */\nint columnarSpan( final String text, final int start, final int end,\n      final boolean wholeOnly ) {\n    graphemeMatcher.reset( text ).region( start, end );\n    int count = 0;\n    while( graphemeMatcher.find() ) ++count;\n    if( wholeOnly  &amp;&amp;  count &gt; 0  &amp;&amp;  end &lt; text.length() ) {\n        final int countNext = columnarSpan( text, start, end + 1, false );\n        if( countNext == count ) --count; } /* The character at `end` bisects\n          the final cluster, which therefore lies partly outside the span.\n          Therefore exclude it from the count. */\n    return count; }\n\n\nfinal Matcher graphemeMatcher = graphemePattern.matcher( &quot;&quot; );\n\n\n/** The pattern of a grapheme cluster.\n  */\npublic static final Pattern graphemePattern = Pattern.compile( &quot;\\\\X&quot; ); } /*\n  An alternative means of cluster discovery is `java.txt.BreakIterator`.\n  Long outdated in this regard,  [https://bugs.openjdk.org/browse/JDK-8174266]\n  it was updated for JDK 20.  [https://stackoverflow.com/a/76109241/2402790] */\n</code></pre>\n<p>Call it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String emoji = &quot;👻👩‍👩‍👦‍👦&quot;;\nint count = columnarSpan( emoji, 0, /*end*/emoji.length() );\nSystem.out.println( count );\n\n⇒ 2\n</code></pre>\n<p>Note that it counts whole clusters only. If the given <code>end</code> bisects the final cluster — the character at position <code>end</code> being part of the same extended cluster as the preceding character — then the final cluster is omitted from the count. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int count = columnarSpan( emoji, 0, /*end*/emoji.length() - 1 );\nSystem.out.println( count );\n\n⇒ 1\n</code></pre>\n<p>This is generally the behaviour you want in order to print a line of text with a character pointer positioned beneath it (e.g. ‘<code>^</code>’) pointing <em>into the cluster</em> of the character at the given index. To defeat this behaviour (pointing <em>after the cluster</em>), call the base method as follows.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int count = columnarSpan( emoji, 0, /*end*/emoji.length() - 1, false );\nSystem.out.println( count );\n\n⇒ 2\n</code></pre>\n<p><em>(Updated as per Skomisa’s comment.)</em></p>\n"},{"answer_id":76109241,"body":"<p>More than six years after this question was asked, an enhancement to properly process grapheme clusters within a <code>String</code> was finally implemented in Java 20, which was released a few weeks ago. See <a href=\"https://bugs.openjdk.org/browse/JDK-8291660\" rel=\"nofollow noreferrer\">JDK-8291660 Grapheme support in BreakIterator</a>.</p>\n<p>There is no change to the API of <a href=\"https://bugs.openjdk.org/browse/JDK-8291660\" rel=\"nofollow noreferrer\">the BreakIterator class</a>, but its underlying code now correctly treats a grapheme cluster as a single unit rather than multiple characters.</p>\n<p>Here is a sample application, using the method and data provided in the question without any changes:</p>\n<pre><code>import java.nio.charset.Charset;\nimport java.text.BreakIterator;\n\npublic class Main {\n\n    public static void main(String[] args) throws java.io.UnsupportedEncodingException {\n        System.out.println(&quot;System.getProperty(\\&quot;java.version\\&quot;): &quot; + System.getProperty(&quot;java.version&quot;));\n        System.out.println(&quot;Charset.defaultCharset():&quot; + Charset.defaultCharset());\n        Main.printStringInfo(&quot;👩‍👩‍👦‍👦&quot;);\n        Main.printStringInfo(&quot;👻👩‍👩‍👦‍👦&quot;);\n    }\n\n    static void printStringInfo(String s) {\n        System.out.print(&quot;\\nCode points for the String &quot; + s + &quot;:&quot;);\n        s.codePoints().mapToObj(Integer::toHexString).forEach(x -&gt; System.out.print(x + &quot; &quot;));\n        System.out.println(&quot;\\nThe length of the String &quot; + s + &quot; using String.length() is &quot; + s.length());\n        System.out.println(&quot;The length of the String &quot; + s + &quot; using BreakIterator is &quot; + Main.getLength(s));\n    }\n\n    // Returns the correct number of perceived characters in a String.\n    // Requires JDK 20+ to work correctly.\n    // Earlier Java releases will incorrectly just count the code points instead.\n    // JDK-8291660 &quot;Grapheme support in BreakIterator&quot; (https://bugs.openjdk.org/browse/JDK-8291660) refers.\n    public static int getLength(String emoji) {\n        BreakIterator it = BreakIterator.getCharacterInstance();\n        it.setText(emoji);\n        int count = 0;\n        while (it.next() != BreakIterator.DONE) {\n            count++;\n        }\n        return count;\n    }\n}\n</code></pre>\n<p>Here is the output, showing the correct grapheme counts (1 and 2) when using JDK 20:</p>\n<pre><code>C:\\Java\\jdk-20\\bin\\java.exe -javaagent:C:\\Users\\johndoe\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\232.5150.116\\lib\\idea_rt.jar=53642:C:\\Users\\johndoe\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\232.5150.116\\bin -Dfile.encoding=UTF-8 -Dsun.stdout.encoding=UTF-8 -Dsun.stderr.encoding=UTF-8 -classpath D:\\II2023.1\\Graphemes\\out\\production\\Graphemes Main\nSystem.getProperty(&quot;java.version&quot;): 20-ea\nCharset.defaultCharset():UTF-8\n\nCode points for the String 👩‍👩‍👦‍👦:1f469 200d 1f469 200d 1f466 200d 1f466 \nThe length of the String 👩‍👩‍👦‍👦 using String.length() is 11\nThe length of the String 👩‍👩‍👦‍👦 using BreakIterator is 1\n\nCode points for the String 👻👩‍👩‍👦‍👦:1f47b 1f469 200d 1f469 200d 1f466 200d 1f466 \nThe length of the String 👻👩‍👩‍👦‍👦 using String.length() is 13\nThe length of the String 👻👩‍👩‍👦‍👦 using BreakIterator is 2\n\nProcess finished with exit code 0\n</code></pre>\n<p>And here is the output for the identical code showing incorrect grapheme counts (7 and 8) when using JDK 17:</p>\n<pre><code>C:\\Java\\jdk-17.0.2\\bin\\java.exe -javaagent:C:\\Users\\johndoe\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\232.5150.116\\lib\\idea_rt.jar=53775:C:\\Users\\johndoe\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\232.5150.116\\bin -Dfile.encoding=UTF-8 -classpath D:\\II2023.1\\Graphemes\\out\\production\\Graphemes Main\nSystem.getProperty(&quot;java.version&quot;): 17.0.2\nCharset.defaultCharset():UTF-8\n\nCode points for the String 👩‍👩‍👦‍👦:1f469 200d 1f469 200d 1f466 200d 1f466 \nThe length of the String 👩‍👩‍👦‍👦 using String.length() is 11\nThe length of the String 👩‍👩‍👦‍👦 using BreakIterator is 7\n\nCode points for the String 👻👩‍👩‍👦‍👦:1f47b 1f469 200d 1f469 200d 1f466 200d 1f466 \nThe length of the String 👻👩‍👩‍👦‍👦 using String.length() is 13\nThe length of the String 👻👩‍👩‍👦‍👦 using BreakIterator is 8\n\nProcess finished with exit code 0\n</code></pre>\n<p>I tested this in <em>Intellij IDEA 2023.1.1 Preview</em> using <em><a href=\"https://jdk.java.net/20/\" rel=\"nofollow noreferrer\">Oracle OpenJDK version 20.0.1</a></em> and <a href=\"https://www.oracle.com/java/technologies/javase/17-0-2-relnotes.html\" rel=\"nofollow noreferrer\">Oracle OpenJDK version 17.0.2</a></p>\n"}],"last_activity_date":1684360343,"question_id":40878804,"body":"<p>I'm looking to count the number of perceived emoji characters in a provided Java string. I'm currently using the <a href=\"https://github.com/kcthota/emoji4j\" rel=\"noreferrer\">emoji4j</a> library, but it doesn't work for grapheme clusters like this one: 👩‍👩‍👦‍👦</p>\n\n<p>Calling <code>EmojiUtil.getLength(\"👩‍👩‍👦‍👦\")</code> returns <code>4</code> instead of <code>1</code>, and similarly calling <code>EmojiUtil.getLength(\"👻👩‍👩‍👦‍👦\")</code> returns <code>5</code> instead of <code>2</code>.</p>\n\n<p>Are there any APIs or methods on <code>String</code> in Java that make it easy to count grapheme clusters?</p>\n\n<p>I've been hunting around but understandably the <code>codePoints()</code> method on a <code>String</code> includes not only the visible emojis, but also the zero width joiners.</p>\n\n<p>I also attempted this using the <code>BreakIterator</code>:</p>\n\n<pre><code>public static int getLength(String emoji) {\n    BreakIterator it = BreakIterator.getCharacterInstance();\n    it.setText(emoji);\n    int emojiCount = 0;\n    while (it.next() != BreakIterator.DONE) {\n        emojiCount++;\n    }\n    return emojiCount;\n}\n</code></pre>\n\n<p>But it seems to behave identically to the <code>codePoints()</code> method, returning <code>8</code> for something like <code>\"👻👩‍👩‍👦‍👦\"</code>.</p>\n"},{"comments":[{"comment_id":134511795,"body":"Please provide enough code so others can better understand or reproduce the problem."},{"comment_id":134513511,"body":"Actually I just need some useful suggestion for going on the correct way for the solution. I need a custom validator used for Spring Boot with Kotlin and this validator will be used to check multiple values from some repositories and then returns error messages."},{"comment_id":134514498,"body":"@alea Also is it also possible to implement validator and trigger them by manually calling the validator method instead of adding validator annotation?"}],"last_activity_date":1684360066,"question_id":76276413,"body":"<p>I need to implement a custom validator in Kotlin that will be used to validate several fields retrieved from repositories, etc.</p>\n<p>For example, I have some projection and based on their values retrieved from repository and some multiple conditions, I perform validation.</p>\n<p>For this purpose, I see that there are 2 suggested validator called Conform and Valiktor. However\\ I am not sure if these are suitable libraries for this purpose (validating based on multiple conditions and retrieving data via repositories).</p>\n<p>So, what would you use for this kind of validation issues and make the error messages structured? Any help would be appreciated.</p>\n"},{"comments":[{"comment_id":134509010,"body":"Welcome to Stack Overflow. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> to learn how Stack Overflow works and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> on how to improve the quality of your question. Then <a href=\"https://stackoverflow.com/posts/76276379/edit\">edit</a> your question to include your source code as a working <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, which can be compiled and tested by others. Please show your attempts you have tried and the problems/error messages you get from your attempts. It is unclear what you are asking or what the problem is."},{"comment_id":134509040,"body":"Why do you have nested lists? <code>ClassGrade class;</code> (enum) or <code>int grade</code> should be a field of <code>Student</code>, not have 2 (or 4) lists of each grade."}],"last_activity_date":1684359930,"question_id":76276379,"body":"<p>So let’s say I have a Mono of some class type, where the class contains multiple lists of an object.</p>\n<pre><code>Mono&lt;Student&gt; students;\n</code></pre>\n<p>Contents of students:</p>\n<pre><code>List&lt;Object&gt; freshmen;\nList&lt;Object&gt; sophomores;\n…\n\n</code></pre>\n<p>I want to try combining the lists to a single list in students without subscribing/blocking. I couldn’t find a way using flux or flatMap since the lists are in a single Mono. Any hints or suggestions? Or is it even possible?</p>\n"},{"comments":[{"comment_id":134503457,"body":"Why not just open the actual log file in your text area?"},{"comment_id":134503458,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/24005748/how-to-output-logs-to-a-jtextarea-using-log4j2\">How to output logs to a JTextArea using Log4j2</a>"},{"comment_id":134503522,"body":"@g00se Because it&#39;s set up to use a new file name each time, based on the date and time of the program being started. I&#39;m not sure how I&#39;d be able to easily identify the newest file."},{"comment_id":134503535,"body":"@jonhanson Whilst I could do that, it involves creating a new Appender, something I&#39;d rather not do."},{"comment_id":134503626,"body":"<i>it&#39;s set up to use a new file name each time</i> Example name?"},{"comment_id":134503685,"body":"@g00se It&#39;s in the format <code>dd MMM yyyy HH.mm.ss</code>, so, for example: <code>17 May 2023 15.44.31.log</code>"}],"answers":[{"comments":[{"comment_id":134504466,"body":"Have to say that brute force iteration could be quite lengthy if the log file&#39;s more than a few days old ;)"},{"comment_id":134506454,"body":"This solution works, thank you for that, but I can&#39;t help but feel it could be a little more elegant - having my program write to a file and then read from it again just for a graphical log seems clunky. I&#39;ll leave this question open for a while, and if no alternatives arise then I shall use this and mark yours as the accepted answer.  Thanks again!"},{"comment_id":134507052,"body":"Well of course, &quot;elegant&quot; could really only be the &#39;proper&#39; solution, which, as you&#39;ve seen, requires quite a lot of code. But another way which would be more efficient would be to sort the files in the log dir by timestamp."},{"comment_id":134509019,"body":"My added method is much more efficient"}],"answer_id":76273554,"body":"<p>Maybe try something like (quick and dirty - you'd definitely want to guard against endless looping):</p>\n<pre><code>import java.time.format.*;\nimport java.time.*;\nimport java.util.Comparator;\nimport java.nio.file.*;\nimport java.io.IOException;\n\npublic class FName {\n    public static void main(String[] args) {\n        try {\n            //System.out.println(FName.getLatestLogFileName(Path.of(&quot;/tmp&quot;)));\n            System.out.println(FName.findLatestLogFileName(Path.of(&quot;/tmp&quot;)));\n        } catch (Throwable t) {\n            t.printStackTrace();\n        }\n    }\n\n    public static Path findLatestLogFileName(Path logsDir) throws Exception {\n        // Tighten this pattern up as necessary\n        final String LOGFILE_PAT =&quot;.*\\\\.log&quot;;\n        return Files.find(logsDir, 1, (p, attr) -&gt;p.getFileName().toString().matches(LOGFILE_PAT)).\n            sorted(Comparator.comparingLong(p -&gt;p.toFile().lastModified())).\n            reduce((first, second) -&gt; second).\n            orElse(null);\n    }\n\n    public static Path getLatestLogFileName(Path logsDir) {\n        Path result = null;\n        LocalDateTime ldt = LocalDateTime.now();\n        DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;dd MMMM uuuu HH.mm.ss&quot;);\n        boolean foundLogFile = false;\n        while (result == null) {\n            Path test = logsDir.resolve(Path.of(dtf.format(ldt) + &quot;.log&quot;));\n            if (Files.exists(test)) {\n                result = test;\n            } else {\n                ldt = ldt.minusSeconds(1);\n            }\n        }\n        return result;\n    }\n}\n</code></pre>\n"}],"last_activity_date":1684359832,"question_id":76273208,"body":"<p>I have a <code>JTextArea</code> in my program which I would like to display the program's logs. I've done some digging and found <code>OutputStreamAppender</code> in the Log4j2 documentation, which I assume I could use to output logs to an <code>OutputStream</code> which I could then pipe into the <code>JTextArea</code>. Unfortunately there isn't much documentation (at least that I could find) on this. Am I on the right track here? If so, how do I use <code>OutputStreamAppender</code>? If not, what should I be doing? I'd rather not create my own Appender.</p>\n<p>Thanks</p>\n"},{"comments":[{"comment_id":134509067,"body":"Have you tried this? <a href=\"https://curlconverter.com/java/\" rel=\"nofollow noreferrer\">curlconverter.com/java</a>"},{"comment_id":134509082,"body":"<code>--form</code> is just shorthand for reading the file into the request body, which you&#39;ll need to construct manually"},{"comment_id":134509633,"body":"@OneCricketeer the output is &quot;--form is not a supported option&quot; LOL"},{"comment_id":134509659,"body":"@OneCricketeer really annoying do this manually while apache commons has abstraction for everything needed."},{"comment_id":134510812,"body":"@KauanMocelin, have you tried using the <code>--data</code> switch, and placing it before the <code>--header</code> for the content-type?"},{"comment_id":134522427,"body":"If you use <code>--data</code>, it converts to <code>BodyPublishers.ofFile(Paths.get(yourFile)</code>"},{"comment_id":134529409,"body":"@OneCricketeer the api contracts was specified with multipart/form-data, so this is the only way. Sadly, I had to do manually."}],"last_activity_date":1684359563,"question_id":76276374,"body":"<p>I have this curl:</p>\n<pre><code>curl -v -H &quot;Authorization: Bearer TOKEN-JWT&quot; --request POST 'http://urlserver/v3/pdf' --header 'Content-Type:multipart/form-data' --header 'Content-Type: application/json' --header 'consumerId: XXX' --form 'unique_file=@&quot;/url/signed-pdf.pdf&quot;'\n</code></pre>\n<p>And need to convert it to a Java 11 HttpRequest api call, but after a long research I surprisingly found no built in implementation. I think there is something very wrong here.</p>\n"},{"comments":[{"comment_id":134514634,"body":"Railway url is invaild , pls provide one another accessable url"},{"comment_id":134515339,"body":"I generated this url on railway&#39;s dashboard. Any url I create doesn&#39;t work. But when I use  SprongBOOT configuration in my pom.xml everything works fine."}],"last_activity_date":1684358810,"question_id":76276311,"body":"<p>I try to deploy Java Spring MVC web app which works fine on my localhost with Tomcat, but when deploy on railway.app, it crashes or find nothing when try to use any controller path/address. My webapp configuration files:</p>\n<p>pom.xml</p>\n<pre><code>\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;pl.krzysztofskul&lt;/groupId&gt;\n  &lt;artifactId&gt;sensit5&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n  &lt;name&gt;sensit5&lt;/name&gt;\n  &lt;description&gt;A simple sensit5.&lt;/description&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n    &lt;java.version&gt;8&lt;/java.version&gt;\n    &lt;maven-compiler-pluging.version&gt;3.10.1&lt;/maven-compiler-pluging.version&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n        &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n        &lt;version&gt;4.0.1&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/javax.servlet/jstl --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n        &lt;version&gt;1.2&lt;/version&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;!-- E-MAIL --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n        &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n            &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n&lt;!--        &lt;version&gt;5.1.8.RELEASE&lt;/version&gt;--&gt;\n        &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n            &lt;!-- https://mvnrepository.com/artifact/org.springframework.data/spring-data-jpa --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt;\n        &lt;version&gt;2.1.9.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\n      &lt;plugins&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.7.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;${maven-compiler-pluging.version}&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;${java.version}&lt;/source&gt;\n                &lt;target&gt;${java.version}&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n          &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.3.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.22.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n             &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n             &lt;version&gt;3.1.0&lt;/version&gt;\n             &lt;configuration&gt;\n               &lt;archive&gt;\n                 &lt;manifest&gt;\n                   &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                   &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\n                   &lt;mainClass&gt;pl.krzysztofskul.sensit5.App&lt;/mainClass&gt;\n                 &lt;/manifest&gt;\n               &lt;/archive&gt;\n             &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.5.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.8.2&lt;/version&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n  &lt;/build&gt;\n\n  &lt;reporting&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/reporting&gt;\n&lt;/project&gt;\n</code></pre>\n<p>App.class</p>\n<pre><code>package pl.krzysztofskul.sensit5;\n\nimport javax.servlet.Filter;\n\nimport org.springframework.web.filter.CharacterEncodingFilter;\nimport org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;\n\npublic class App extends AbstractAnnotationConfigDispatcherServletInitializer {\n    \n    public static void main( String[] args )\n    {\n        System.out.println( &quot;Hello World sensit5!&quot; );\n    }\n    \n    @Override\n    protected Class&lt;?&gt;[] getRootConfigClasses() { return null; }\n\n    @Override\n    protected Class&lt;?&gt;[] getServletConfigClasses() {\n        return new Class[]{AppConfig.class};\n    }\n\n    @Override\n    protected String[] getServletMappings() {\n        return new String[]{&quot;/&quot;};\n    }\n\n    @Override\n    protected Filter[] getServletFilters() {\n        CharacterEncodingFilter characterEncodingFilter = new CharacterEncodingFilter();\n        characterEncodingFilter.setEncoding(&quot;UTF-8&quot;);\n        return new Filter[] { characterEncodingFilter };\n    }\n    \n}\n</code></pre>\n<p>AppConfig.class</p>\n<pre><code>package pl.krzysztofskul.sensit5;\n\nimport java.util.Locale;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.servlet.LocaleContextResolver;\nimport org.springframework.web.servlet.ViewResolver;\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\nimport org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\nimport org.springframework.web.servlet.i18n.SessionLocaleResolver;\nimport org.springframework.web.servlet.view.InternalResourceViewResolver;\nimport org.springframework.web.servlet.view.JstlView;\n\n@Configuration\n@EnableWebMvc\n@ComponentScan(basePackages = &quot;pl.krzysztofskul.sensit5&quot;)\npublic class AppConfig implements WebMvcConfigurer {\n\n    @Bean\n    public ViewResolver internalResourceViewResolver() {\n        InternalResourceViewResolver bean = new InternalResourceViewResolver();\n        bean.setViewClass(JstlView.class);\n        bean.setPrefix(&quot;/WEB-INF/views/&quot;);\n        bean.setSuffix(&quot;.jsp&quot;);\n        return bean;\n    }\n\n    @Bean(name=&quot;localeResolver&quot;)\n    public LocaleContextResolver getLocaleContextResolver() {\n        SessionLocaleResolver localeResolver = new SessionLocaleResolver();\n        localeResolver.setDefaultLocale(new Locale(&quot;pl&quot;,&quot;PL&quot;));\n        return localeResolver;\n    }\n  \n    @Override\n    public void addResourceHandlers(ResourceHandlerRegistry handlerRegistry) {\n        handlerRegistry.addResourceHandler(&quot;/resources/**&quot;).addResourceLocations(&quot;/resources/&quot;);\n    }\n    \n}\n</code></pre>\n<p>HomePageController.class</p>\n<pre><code>package pl.krzysztofskul.sensit5;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.ResponseBody;\n\n@Controller\npublic class HomePageController {\n\n    @GetMapping({&quot;/home&quot;, &quot;/&quot;})\n    public String home() {\n        return &quot;index&quot;;\n    }\n    \n    @GetMapping(&quot;/test/home&quot;)\n    @ResponseBody\n    public String testHome() {\n        return &quot;test home sensit5&quot;;\n    }\n    \n}\n</code></pre>\n<p>Gihub: <a href=\"https://github.com/krzysztofskul/sensit5.git\" rel=\"nofollow noreferrer\">https://github.com/krzysztofskul/sensit5.git</a>\nRailway: <a href=\"https://sensit5-test.up.railway.app\" rel=\"nofollow noreferrer\">https://sensit5-test.up.railway.app</a></p>\n"},{"comments":[{"comment_id":105641420,"body":"Whoever told you there would be multiple DB calls is... misinformed. The <i>entire point</i> of <code>@MappedSuperclass</code> is that it&#39;s copied inline into each subclass&#39;s table. (As a note, it&#39;s customary in Java for the backing field to just be named <code>deleted</code>.)"},{"comment_id":105641539,"body":"Checkout <code>@Embeddable</code> and <code>@Embedded</code> annotations in spring boot. They can accomplish the same thing without any entity leak."},{"comment_id":105641808,"body":"Thank you guys for helping me out. @chrylis -on strike- Can you explain a bit what you meant by &quot;backing field&quot; please."},{"comment_id":105656937,"body":"The drawback may be coupling between your services. If you modify <code>BaseEntity</code>, are you then forced to update and redeploy each service depending on it? That kind of coupling would violate the idea of micro-services."},{"comment_id":105673690,"body":"Thank you for yours kind concern @jaco0646, If I modify my base entity, then it would mean that my business requirement requires that modification to be reflected across all micro-service&#39;s entity. Modification will be only done in my base class if that requires to be reflected across entire eco-system, else the modification will be local to entities of individual micro-services. Also can you please tell me more how this is violating the micro-service principles please? My current development is CQRS based granular micro-service, where a single service should have a single concern."},{"comment_id":105674906,"body":"@jaco0646, Also I would request you to please explain, if using a common jar as shared library where I have common reusable utilities and functionalities is a bad idea in micro-service world? I have used this shared library concept to define the Base entity. Then how should I structure common codes for interfaces,base classes and utility functions like encryption helpers etc? Thank you for yours kind attention"}],"answers":[{"comments":[{"comment_id":124290156,"body":"I would add further than you can extend that abstract class with your own abstract class to add in an Long id field (or whatever type you need) using the @Id annotation in it.  I do also like a base abstract class without audit fields for some needs as well."}],"answer_id":59747762,"body":"<p>I don't see any problems since your entity does not have any fields that can navigate to other entities (i.e does not have field that is mapped with <code>@OneToMany</code> / <code>@ManyToOne</code>) , so all of its fields are mapped to the same DB table and there is no reasons it will lead to separate database calls to load an entity.</p>\n<p><a href=\"/questions/tagged/spring-data-jpa\" class=\"post-tag\" title=\"show questions tagged &#39;spring-data-jpa&#39;\" aria-label=\"show questions tagged &#39;spring-data-jpa&#39;\" rel=\"tag\" aria-labelledby=\"tag-spring-data-jpa-tooltip-container\">spring-data-jpa</a> also provides a base entity <a href=\"https://github.com/spring-projects/spring-data-jpa/blob/850aaac3710e2d9c12744a538964c27e0c18ba78/spring-data-jpa/src/main/java/org/springframework/data/jpa/domain/AbstractAuditable.java#L42\" rel=\"nofollow noreferrer\"><code>AbstractAuditable</code></a> which developer can choose to use it rather than create by their own (though using it will increase the coupling of the entity to Spring Data) , so making the base entity as a separate shared JAR and let other projects to use is very common. It is even a good practise if your company have some rules that all entities must have certain set of fields like id , createdBy etc. mainly because it can make the codes DRY as said by you.</p>\n"}],"last_activity_date":1684358737,"question_id":59747099,"body":"<p>I'm an experienced .net developer recently shifted to java development. I'm working on micro-service using spring boot/cloud. For my work I have created a common jar(shared library) where I'm placing those functionalities and helper methods which are to be reused across different micro-services. </p>\n\n<p>I'm calling the shared library in my each spring boot micro-service application by adding it their pom file.This is all working great and I'm able to use the shared library in my every micro-service as intended.      </p>\n\n<p>Now..\nI'm using JPA for saving data and hence each micro-service application requires to have an entity class which is using code first way to create persistence in their respective data store.</p>\n\n<p>Since there are few common fields required in most micro-services I thought the idea of creating a base Entity class in my common jar(shared library) and make entities in my micro-services inherit the base Entity class.</p>\n\n<p>This is the base Entity class that I created in my shared library</p>\n\n<pre><code>package com.microservice.xcloud.common.entity;\n\nimport javax.persistence.Column;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\nimport javax.persistence.MappedSuperclass;\n\n@MappedSuperclass\npublic class BaseEntity {\n\n    @Id\n    @GeneratedValue(strategy=GenerationType.AUTO)\n    Long id;\n\n    ...\n\n    @Column(nullable = true , name = \"isDeleted\")\n    private boolean isDeleted;\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n    ...\n\n    public boolean isDeleted() {\n        return isDeleted;\n    }\n\n    public void setDeleted(boolean isDeleted) {\n        this.isDeleted = isDeleted;\n    }   \n\n}\n</code></pre>\n\n<p>Now in my different micro-services I'm inheriting from this class in order to have those fields without writing them again and again.(<strong>DRY</strong> princliple).</p>\n\n<p>I've used this way while working with .net and EF also and found it to be working perfectly well. I would place the base entity in a shared dll and inherit from it in my application.\nSo I though of using the same thing for java and I did this in my micro-service application's Entity class.</p>\n\n<pre><code>package com.microservice.xcloud.companyservice.entity;\n\n\n\nimport javax.persistence.Column;\nimport javax.persistence.Entity;\nimport javax.persistence.Table;\n\nimport com.microservice.xcloud.common.entity.BaseEntity;\n\n@Entity\n@Table(name = \"companymaster\")\npublic class CompanyMaster extends BaseEntity{\n\n\n\n    @Column(nullable = false , name = \"companyName\")\n    private String companyName;\n\n    @Column(nullable = true , name = \"description\")\n    private String description;\n\n\n\n    public String getCompanyName() {\n        return companyName;\n    }\n\n    public void setCompanyName(String companyName) {\n        this.companyName = companyName;\n    }\n\n    public String getDescription() {\n        return description;\n    }\n\n    public void setDescription(String description) {\n        this.description = description;\n    }\n\n    public CompanyMaster() {\n        super();\n\n    }\n}\n</code></pre>\n\n<p>Please note that I have two different applications, \n1. Shared java library called common\n2. Micro-service application called company-service using the shared library through pom</p>\n\n<pre><code>&lt;!-- Shared library --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.microservice.xcloud&lt;/groupId&gt;\n    &lt;artifactId&gt;common&lt;/artifactId&gt;\n    &lt;version&gt;${project.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>I was told that this is a bad architecture and should not be done this way. Also I was told that this would led to two separate calls to db, one for shared library's base entity and another for micro-service's entity class. This is something I never heard about in .net world. Since I'm new to java I need your expert advise.\nAs far as I know , in .net world since a shared library is a dll and it can not run seperately and needs to be attached to the application, this is totally out of question.\nMy shared library(created using spring boot) has no main method and hence should be attached to the calling micro-service like a dll type jar attaching to exe type of jar.</p>\n\n<p>Thanking you for yours expertise and kind attention\n        </p>\n"},{"comments":[{"comment_id":134527679,"body":"could u post the test code about these"}],"last_activity_date":1684358706,"question_id":76276299,"body":"<p>I have a JPA entity with circular references to other entities. To solve the serialization issue this causes I have added the @JsonIdentityInfo annotation, like so:</p>\n<pre><code>private class Child {\n\n  private long id;\n\n  @JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\n  private Parent parent;\n}\n\n</code></pre>\n<p>This results in the following serialization:</p>\n<pre><code>{\n  &quot;id&quot;: 1,\n  &quot;parent&quot;: 1\n}\n</code></pre>\n<p>This would be fine normally, however I have a custom JsonSerializer on Parent.id attibute to encode its long id into a String. I would like this custom Serializer to be used by @JsonIdentityInfo.</p>\n<p>How can I do that?</p>\n<p>I have tried implementing a custom ObjectIdGenerator, but I can't figure out how to do it or if that's the way to go about this.</p>\n"},{"comments":[{"comment_id":14173933,"body":"Could you add the source code where you instantiate the <code>ImageIcon</code>?"},{"comment_id":14173956,"body":"to change 156th line in FrameView from setVisible(false) to setVisible(true), rest of changes I can&#39;t see from my magic globe (low baterry), for better help sooner post an <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">SSCCE</a>"},{"comment_id":14174193,"body":"The NetBeans GUIBuilder makes its own source code, but here you go anyway: <code>jLabel1.setIcon(new javax.swing.ImageIcon(&quot;C:\\\\NoSpace\\\\Minesweeper\\\\Minesweeper graphics\\\\one.png&quot;));</code>"},{"comment_id":14174276,"body":"1) Don&#39;t use a <code>File</code> to load an embedded resource. (WAG) 2) For better help sooner, post an <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">SSCCE</a>. (Excellent generic advice)"},{"comment_id":14174332,"body":"@LastStar007  That is exceptionally poor advice, even for a comment.  1) Using a <code>String</code> that represents a <code>File</code> for an application Icon. 2) Using an absolute path for same. 3) Making it platform specific in the path separator."},{"comment_id":14181843,"body":"Have you tried creating a new package in your src folder, adding the icon there and then using &quot;Image within project&quot;?"},{"comment_id":14182035,"body":"Yes. I&#39;ve also tried importing the image to the same package as the JLabel, to no avail."},{"comment_id":14234550,"body":"@LastStar007 Did you try in an empty Form? I&#39;ve reproduced your description and it works well! So if your Form is empty I agree there is a problem. If not the image doesn&#39;t show probably because there is a mistake elsewhere. If so consider posting an sscce. You can also try to use Clean and Build before running, maybe you have a pb with netbeans Ant script and he doesn&#39;t update itself to use the new image... To conclude I&#39;ll suggest to use &quot;image within project or &quot;&quot;custom code&quot;  instead of &quot;image chooser&quot; and &quot;external file&quot;. It will be better for portability."},{"comment_id":14234608,"body":"This is a nice tutorial -&gt; <a href=\"http://netbeans.org/kb/docs/java/gui-image-display.html\" rel=\"nofollow noreferrer\">netbeans.org/kb/docs/java/gui-image-display.html</a>"}],"answers":[{"answer_id":10912305,"body":"<p>I found out the hard way that relying on Netbeans GUI builder to do everything for you is a mistake. </p>\n\n<p>Just create an icon fetching class like the one below, put the icons in it's package, and use \"Custom code\" instead of \"Image chooser\". Sure the icons will not be visible inside NB. But if they show up when the app is running, who cares about that.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.resource.icons;\n\nimport javax.swing.ImageIcon;\n\npublic class IconFetch {\n\n    private static IconFetch instance;\n\n    private IconFetch(){\n    }\n\n    public static IconFetch getInstance() {\n        if (instance == null)\n            instance = new IconFetch();\n        return instance;\n    }\n\n    public ImageIcon getIcon(String iconName) {\n        java.net.URL imgUrl = getClass().getResource(iconName);\n        if (imgUrl != null) {\n            return new ImageIcon(imgUrl);\n        } else {\n            throw new IllegalArgumentException(\"This icon file does not exist\");\n        }\n    }\n\n    public static final String MINESWEEPER_ONE = \"one.png\";\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>IconFetch.getInstance().getIcon(IconFetch.MINESWEEPER_ONE);\n</code></pre>\n\n<p>If the icon still doesn't show up after trying this, then something might be wrong with the way you layed out components in your form (the label is there but you can't see it).</p>\n\n<p>Hope this helps even though it's a long shot.</p>\n"},{"comments":[{"comment_id":117290483,"body":"I&#39;m having the same problem.  Converted the folder to a package. Re-imported all the images.  Works fine in the designer but fails to run with .getResource() unable to find the image file."}],"answer_id":42714497,"body":"<p>I had the same problem, and predi's solution wasn't working either. Then I created a package instead of a folder, and added the images there, and it works now.</p>\n"},{"answer_id":67868757,"body":"<p>I do have a same problem also. But I found the solution.</p>\n<ol>\n<li>I create the package in project and put the images inside there.</li>\n<li>When I build the project, Netbeans will create 'target' folder and build .class files.</li>\n<li>I found that the images that I copied to the package, did not transfer to the 'target' folder.</li>\n</ol>\n<p><strong>Interim solution.</strong>\n4. I copy all image to target folder with the same structure. Then I can run the project directly from Netbeans.\n5. Incase you clean the project. Do no.4 again.</p>\n"}],"last_activity_date":1684358705,"question_id":10876742,"body":"<p>I am using the NetBeans GUIBuilder to make a JPanel Form. I added a JLabel and used NetBeans' interface to give it an icon from an external image (.png). The path is verified and the image shows up on the GUIBuilder screen. It even shows up when I click the \"Preview Design\" button. It DOES NOT show up when I RUN the project. The rest of the GUI appears as it should. Do any of you know why this happening and/or how to fix it?</p>\n\n<p>A lot of you have been asking for an SSCCE. Since the code is generated by the NetBeans Form Builder, I have instead included the steps I took to make the JLabel. The areas of focus are circled in red.</p>\n\n<ol>\n<li><p>Drag and drop a JLabel into the Form Builder.\n<img src=\"https://i.stack.imgur.com/71xH4.jpg\" alt=\"Drag and drop a JLabel into the Form Builder.\"></p></li>\n<li><p>Open up the JLabel's properties menu. Enter the empty string (\"\") for the <code>text</code> field. Click the ellipsis next to <code>icon</code>.\n<img src=\"https://i.stack.imgur.com/Qa8PJ.jpg\" alt=\"Open up the JLabel&#39;s properties menu. Click the ellipsis next to icon.\"></p></li>\n<li><p>Select External Image and click the ellipsis. \n<img src=\"https://i.stack.imgur.com/2WA54.jpg\" alt=\"Select External Image and click the ellipsis.\"></p></li>\n<li><p>Select the image of choice. In my case it's a .png.\n<img src=\"https://i.stack.imgur.com/GOfHx.jpg\" alt=\"Select the image of choice.\"></p></li>\n<li><p>Notice that the image appears in the icon preview.\n<img src=\"https://i.stack.imgur.com/2wKka.jpg\" alt=\"Notice that the image appears in the icon preview.\"></p></li>\n<li><p>Close the icon menu and the properties menu, and notice that the image appears as the JLabel's icon on the Form Builder. \n<img src=\"https://i.stack.imgur.com/hRTj3.jpg\" alt=\"Close the icon menu and the properties menu, and notice that the image appears on the Form Builder.\"></p></li>\n</ol>\n\n<p>Thank you for accepting an unorthodox SSCCE and thank you in advance for your help.</p>\n"},{"comments":[{"comment_id":134509497,"body":"JNIEnv * env = 0;  JNIEnv ** envptr = &amp;env;   So you&#39;re making a null pointer, then a pointer to a null pointer?  That&#39;s not right, and I&#39;m shocked it didn&#39;t crash."},{"comment_id":134509715,"body":"doing that is fine (it is taking the address of the variable <code>env</code> which is not what is null...) where I am having difficulty is elsewhere in the code sample. Might you have insights into that? That code to get <code>env</code> is used elsewhere in the codebase and functions ok."},{"comment_id":134509738,"body":"Unrelated but assigning 0 to a pointer is a bad practice. Use <code>nullptr</code> if your compiler supports it or at least <code>NULL</code>."},{"comment_id":134510019,"body":"Reminder:  Java has garbage collection.  There is no guarantee when or if the garbage collector runs.  This is usually bad for embedded systems."},{"comment_id":134510941,"body":"You should check the result of every JNI operation. And why assign (*envptr) to env? Makes no sense"}],"last_activity_date":1684358592,"question_id":76276288,"body":"<p>I'm working on an Android application that is currently written fully in C++, implemented as a Native Activity and using CMake to build the project.</p>\n<p>Currently, I'm looking at trying to call methods in a Java derived WebView class from C++, but am having difficulties with how to use build/use this class with the Native Activity.</p>\n<p>My <code>build.gradle</code> is located in the root of the project, and all of the C++ code is in <code>src/</code>. Simply adding the Java file to the project, under <code>src/main/java/com/my/app/CustomWebView.java</code>.</p>\n<p>and calling:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>JNIEnv * env = 0; \nJNIEnv ** envptr = &amp;env; \nJavaVM * jniiptr = gapp-&gt;activity-&gt;vm; \njniiptr-&gt;AttachCurrentThread( (JNIEnv**)&amp;env, 0 ); \nenv = (*envptr);\njclass customWebViewClass = env-&gt;FindClass(&quot;com/my/app/CustomWebView&quot;);\n</code></pre>\n<p>Results in <code>customWebViewClass</code> being null.</p>\n<p>I am unsure on what I need to do for this to be found correctly. I haven't yet modified any build or manifest files (such as <code>build.gradle</code> or <code>AndroidManifest.xml</code>), and was wondering if I needed to for this java class to be found correctly?</p>\n"},{"comments":[{"comment_id":134508448,"body":"Why would it preserve the variable name?"},{"comment_id":134508452,"body":"Variable names are lost during compilation, they are not needed for the bytecode and hence dropped. The decompiler you used just guessed some names for you."},{"comment_id":134508509,"body":"This question is related <a href=\"https://stackoverflow.com/questions/5746894/what-does-the-javac-debugging-information-option-gvars-do\" title=\"what does the javac debugging information option gvars do\">stackoverflow.com/questions/5746894/&hellip;</a>"},{"comment_id":134508999,"body":"@shmosel – Because the decompiled code would look nicer? Ok, I could not imagine any other reason …"}],"answers":[{"comments":[{"comment_id":134509211,"body":"Note that the <code>attributes</code> <i>can</i> include attributes called <code>LocalVariableTable</code> which give information about the names of local variables. But that information is purely informational: it&#39;s useful for debugging, but not necessary for execution. Also the code of the method itself is actually <a href=\"https://docs.oracle.com/javase/specs/jvms/se20/html/jvms-4.html#jvms-4.7.3\" rel=\"nofollow noreferrer\">an attribute</a>. So attributes are not just annotation-type information, but some fundamentally important parts of the method as well."}],"answer_id":76276119,"body":"<p>At the JVM level, a class method is stored as a <a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.6\" rel=\"noreferrer\"><code>method_info</code></a> struct instance.</p>\n<blockquote>\n<pre><code>method_info {\n    u2             access_flags;\n    u2             name_index;\n    u2             descriptor_index;\n    u2             attributes_count;\n    attribute_info attributes[attributes_count];\n}\n</code></pre>\n</blockquote>\n<ul>\n<li><code>access_flags</code> stores modifiers like <code>public</code> and <code>final</code> as bitflags.</li>\n<li><code>name_index</code> stores the name of the method.</li>\n<li><code>descriptor_index</code> stores the <a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.3\" rel=\"noreferrer\">method descriptor</a>, which is its return type and all parameter types.</li>\n<li><code>attributes_count</code> and <code>attributes</code> are the runtime-available attributes such as <code>@Deprecated</code> that are declared on the method.</li>\n</ul>\n<p>That's it. Everything else is gone. The <code>.class</code> file doesn't know the name of your function's parameter because that name stopped existing the moment it became a <code>.class</code> file. The decompiler is reconstructing your method, so it's using a placeholder name for variables that don't have names in the JVM instructions.</p>\n"}],"last_activity_date":1684358346,"question_id":76276089,"body":"<p>I was curious about .class files and the code inside and realised that variables in one of the classes that I compiled is named as <em><strong>var0</strong></em> which is very interesting.</p>\n<p>I am wondering if someone could explain why.</p>\n<p>Java Code (.java file):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class StackOverflowExample {\n    public static void main(String[] args) {\n        loop(50_000);\n        System.out.println(&quot;Success!&quot;);\n    }\n\n    public static void loop(int repeats) {\n        if (repeats &gt; 0) {\n            loop(repeats - 1);\n        }\n    }\n}\n</code></pre>\n<p>Decompiled Code (.class file):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class StackOverflowExample {\n    public StackOverflowExample() {\n    }\n\n    public static void main(String[] var0) {\n        loop(50000);\n        System.out.println(&quot;Success!&quot;);\n    }\n\n    public static void loop(int var0) {\n        if (var0 &gt; 0) {\n            loop(var0 - 1);\n        }\n\n    }\n}\n</code></pre>\n"},{"answers":[{"comments":[{"comment_id":101218821,"body":"Yes, I saw that as well, but I&#39;m not sure why the annotations don&#39;t generate that. I would think that the <code>@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = &quot;BTRFSPhysicalLocationItem&quot;)</code> would have made that part. According to a website that I read, <code>include = JsonTypeInfo.As.PROPERTY</code> is the default selection if not explicitly noted."},{"comment_id":101218826,"body":"you forget about <code>include</code> - I edited answer (by default I believe it is being set to <code>NONE</code>)"},{"comment_id":101218854,"body":"Just changed it, same error. Also, same output JSON string."},{"comment_id":101218890,"body":"can you provide generated json?"},{"comment_id":101218896,"body":"<code>[{&quot;name&quot;:&quot;WanderingEcho&quot;,&quot;location&quot;:&quot;file:&#47;&#47;&#47;home&#47;sarah&#47;NetB&zwnj;&#8203;eansProjects&#47;Wanderi&zwnj;&#8203;ngEcho&#47;&quot;}]</code> The annotation is set to: <code>@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, include = JsonTypeInfo.As.PROPERTY, property = &quot;BTRFSPhysicalLocationItem&quot;)  </code>"},{"comment_id":101218903,"body":"as you see it still missing the <code>BTRFSPhysicalLocationItem</code> property"},{"comment_id":101218934,"body":"Yep. I need to figure out why the annotations are insufficient for serialization."},{"comment_id":101220771,"body":"Yep, just checked, it ran just fine. Strange solution though. Maybe reified generics wasn&#39;t such a good idea after all."}],"answer_id":57366300,"body":"<p>In your <code>json</code> you are missing the <code>BTRFSPhysicalLocationItem</code> - just think about it - how Jackson should know what implementation do you expect?</p>\n\n<p>It should look like </p>\n\n<pre><code>[\n    {\n        \"BTRFSPhysicalLocationItem\": \"Subvolume\",\n        \"name\": \"WanderingEcho\",\n        \"location\":\"file:///home/sarah/NetBeansProjects/WanderingEcho/\"\n    }\n]\n</code></pre>\n\n<p>if you want Jackson to include the type when serializing the object you also need to add <code>JsonTypeInfo.As.PROPERTY</code> as <code>include</code> as a parameter of <code>@JsonTypeInfo</code> annotation like</p>\n\n<pre><code>@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, include = JsonTypeInfo.As.PROPERTY, property = \"BTRFSPhysicalLocationItem\")\n</code></pre>\n\n<hr>\n\n<p><strong>EDIT</strong> ok seems that I figured this out - your problem with not generating properties is connected to Java type erasure and well described <a href=\"https://github.com/FasterXML/jackson-databind/issues/336\" rel=\"noreferrer\">here</a>. </p>\n\n<p>tldr; Jackson has problem with underestanding type - seems <code>List&lt;Subvolume&gt;</code> for him does not providing the type of elements. Because he doesn't know the type he won't serialize it </p>\n\n<p>The solution is to create a helper class that will extends <code>ArrayList&lt;Subvolume&gt;</code> like</p>\n\n<pre><code>public class SubvolumeList extends ArrayList&lt;Subvolume&gt; {}\n</code></pre>\n\n<hr>\n\n<p>Additionaly you have a few issues in your code - one is that you should use <code>use = JsonTypeInfo.Id.NAME</code> in <code>@JsonTypeInfo</code> if you want to deserialize by property value (like <code>Subvolume</code>) not by package/class string literal</p>\n\n<p>Second is that you should name <code>@JsonProperty</code> on <code>@JsonCreator</code> parameter list like <code>@JsonProperty(value = \"location\")</code></p>\n"},{"answer_id":76276263,"body":"<p>When I stumbled on this post, I was having a similar problem. I had</p>\n<pre><code>@JsonTypeInfo(\n  use = Id.MINIMAL_CLASS,\n  property = &quot;@class&quot;\n)\npublic class MyClass {\n  public int myInt;\n}\n</code></pre>\n<p>and then</p>\n<pre><code>public class MyIntWrapper {\n  public Optional&lt;MyInt&gt; maybeMyInt;\n}\n</code></pre>\n<p>I wanted to send <code>MyIntWrapper</code> over the wire. It was serializing the instances correctly into the JSON, but there was a deserialization issue. I was seeing</p>\n<pre><code>com.fasterxml.jackson.databind.exc.InvalidTypeIdException: Could not resolve subtype of [simple type, class com.coder34.MyIntWrapper$Json]: missing type id property '@class' (for POJO property '#temporary-name')\n at [Source: UNKNOWN; line: -1, column: -1] (through reference chain: com.coder34.MyIntWrapper$Json[&quot;maybeMyInt&quot;]) \n</code></pre>\n<p>Following @m.antkowicz link about type erasure, I tried adding it to the field. So I removed the annotation from <code>MyClass</code> and added it to the field <code>maybeMyInt</code> -</p>\n<pre><code>public class MyClass {\n  public int myInt;\n}\n</code></pre>\n<pre><code>public class MyIntWrapper {\n  @JsonTypeInfo(\n    use = Id.MINIMAL_CLASS,\n    property = &quot;@class&quot;\n  )\n  public Optional&lt;MyInt&gt; maybeMyInt;\n}\n</code></pre>\n<p>and it worked.</p>\n"}],"last_activity_date":1684358238,"question_id":57366190,"body":"<p>I have a concrete object of an abstract class that I've made.</p>\n\n<p>I'm using annotations on the abstract class and the daughter class, but the JSON output doesn't look right and I keep getting an exception on deserialiation.</p>\n\n<p>I'm still learning Jackson, and unfortunatly a lot of the tutorials on the subject are outdated.</p>\n\n<p>Here are the classes with my object mapper at the bottom:</p>\n\n<p><strong>Abstract Class:</strong></p>\n\n<pre><code>@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, property = \"BTRFSPhysicalLocationItem\")\n@JsonSubTypes({\n    @Type(name = \"Snapshot\", value = Snapshot.class),\n    @Type(name = \"Backup\", value = Backup.class),\n    @Type(name = \"Subvolume\", value = Subvolume.class)})\npublic abstract class BTRFSPhysicalLocationItem {\n\n    private final String name;\n    @JsonProperty\n    private final Path location;\n\n    /**\n     * Makes a new subvolume instance with the specified location. May or may\n     * not actually exist.\n     *\n     * @param location The location of the subvolume\n     */\n    @JsonCreator\n    protected BTRFSPhysicalLocationItem(@JsonProperty(value = \"location\") Path location) {\n        this.location = location;\n        this.name = location.getFileName().toString();\n    }\n</code></pre>\n\n<p><strong>Concrete Class:</strong></p>\n\n<pre><code>public class Subvolume extends BTRFSPhysicalLocationItem {\n\n    /**\n     * Creates a new subvolume with the specified path.The subvolume may or may\n     * not exist at this point.\n     *\n     * @param location\n     */\n    @JsonCreator\n    public Subvolume(@JsonProperty Path location) {\n        super(location);\n    }\n</code></pre>\n\n<p><strong>Objectmapper block:</strong></p>\n\n<pre><code>ObjectMapper MAPPER = new ObjectMapper();\nList&lt;Subvolume&gt; SUBVOLUME_LIST = new ArrayList&lt;&gt;();\n//Subvolume is populated by other methods it's not worth showing them here\nSystem.out.println(\"\\n\\n\");\n                MAPPER.writeValue(System.out, SUBVOLUME_LIST);\n                System.out.println(\"\\n\\n\\n\");\n                var s = MAPPER.writeValueAsString(SUBVOLUME_LIST);\n                List&lt;Subvolume&gt; list = MAPPER.readValue(s, new TypeReference&lt;List&lt;Subvolume&gt;&gt;() {\n                });\n</code></pre>\n\n<p><strong>Output JSON:</strong> <code>[{\"name\":\"WanderingEcho\",\"location\":\"file:///home/sarah/NetBeansProjects/WanderingEcho/\"}]</code></p>\n\n<p>Exception:</p>\n\n<pre><code>Aug 05, 2019 4:55:14 PM com.protonmail.sarahszabo.wanderingecho.btrfs.BTRFS &lt;clinit&gt;\nSEVERE: null\ncom.fasterxml.jackson.databind.exc.InvalidTypeIdException: Missing type id when trying to resolve subtype of [simple type, class com.protonmail.sarahszabo.wanderingecho.btrfs.subvolume.Subvolume]: missing type id property 'BTRFSPhysicalLocationItem'\n at [Source: (String)\"[{\"name\":\"WanderingEcho\",\"location\":\"file:///home/sarah/NetBeansProjects/WanderingEcho/\"}]\"; line: 1, column: 89] (through reference chain: java.util.ArrayList[0])\n</code></pre>\n\n<p>Other answers such as <a href=\"https://stackoverflow.com/questions/22609032/jackson-deserialization-of-polymorphic-types\">Jackson deserialization of polymorphic types</a> suggest using the <code>ObjectMapper</code> methods, but according to the tutorials I've read, this shouldn't be necessary.</p>\n\n<p>Not sure what I'm doing wrong with the annotations.</p>\n"},{"comments":[{"comment_id":36641723,"body":"If it&#39;s truly an optional field, why do you have places all over your code trying to pull the value out?  Just encapsulate the behavior into the owning class with a decent default when the calendar isn&#39;t set, and get rid of <code>getCal()</code>."},{"comment_id":36641729,"body":"<a href=\"https://stackoverflow.com/questions/271526/avoiding-null-statements-in-java\" title=\"avoiding null statements in java\">stackoverflow.com/questions/271526/&hellip;</a>"}],"answers":[{"answer_id":23817573,"body":"<p>If <code>setCal</code> is not called and so if <code>cal</code> is not set, why do you want to send other thing than <code>null</code> ?\n<code>null</code> is the best thing to return in this case. Null is also a value, which give an indication to the developper.\nAnd, because developpers don't know that your <code>getCal</code> can't return null, they will check for null even if you never return null (I assume that for getter and setter, developpers don't read javadoc).</p>\n\n<p>Maybe you can send a new instance of default Calendar. But default value is the current date, so I don't think it's a good idea since it does not represent the fact that the Calendar has not been set.</p>\n\n<p>Or you can throw an exception... but do not abuse of Exception. Exception are designed to defined error or bad behavior, not to simplify functionnal checks.\nHowever, to protect the <code>setCal</code> method of null value, here you can throw an <code>IllegalArgumentException</code> if user set null value.</p>\n"},{"comments":[{"comment_id":36641880,"body":"It returns default value, so the current Calendar. Don&#39;t think it&#39;s a good thing."}],"answer_id":23817623,"body":"<p>would something like this fix your problem ?</p>\n\n<pre><code>public Calendar getCal() {\n    if (cal != null)\n        return cal;\n    return Calendar.getInstance(); // to be returned when cal is null\n}\n</code></pre>\n"},{"answer_id":23817626,"body":"<p>Returning null and null checks are best bet here, other wise, what you may do is </p>\n\n<p>Initialize the Calendar to today, if that fits your scenario.</p>\n\n<p>or </p>\n\n<p>Throw an exception and ask to set the Calendar.</p>\n"},{"comments":[{"comment_id":36641857,"body":"And you will have a Calendar with the current date, so, it does not represent the fact that no Calendar has been set."}],"answer_id":23817648,"body":"<p>Just add a default value to the property:</p>\n\n<pre><code>private Calendar cal = Calendar.getInstance();\n</code></pre>\n"},{"answer_id":23817998,"body":"<p>If you are against doing checks for null all over your code, you could implement something like this:</p>\n\n<pre><code>    public boolean hasCal(){\n        if(this.cal == null){\n            return false;\n        }\n        return true;\n    }\n</code></pre>\n\n<p>This would make your code more readable, but you would still have to have <code>getCal()</code> return something even if the <code>Test</code> object does not have one, and returning <code>null</code> seems to be the best option in this case.</p>\n"},{"answer_id":23818012,"body":"<p>The context of your code is not clear, returning null can be advantageous depending on the context. But in general, when you're trying to say \"I have no information to give back\", then returning null clearly shows it. Additionally it makes it easier for others to observe that.</p>\n\n<blockquote>\n  <p>is there any option rather than returning null.</p>\n</blockquote>\n\n<p>In fact, there are many other ways; it depends on the context. An alternative example is the '<a href=\"http://en.wikipedia.org/wiki/Option_type\" rel=\"nofollow\">Option Pattern</a>'. Which its idea relies on encapsulating an optional value; either None or the original data. This way you could return a meaningful value (which is heavily used in Haskell, and to some extent Scala). Although, it should be done with care as returning an encapsulation that indicates 'empty' may not be noticed unless carefully documented and agreed with as a convention (with your team for instance).</p>\n"}],"last_activity_date":1684357771,"question_id":23817522,"body":"<pre><code>public class Test {\n\n    //required fields\n    private String str1;\n    private String str2;\n\n    //optional\n    private Calendar cal;\n\n    public Test(String a, String b){\n        str1 = a;\n        str2 = b;\n    }\n\n    //getter for str1 and str2\n\n    public void setCal(Calendar cal){\n        this.cal = cal;\n    }\n\n    public Calendar getCal() {\n        return cal;\n    }\n}\n</code></pre>\n\n<p>I have a class like this where the calendar object is optional. If setCal() is not called and some one calls the getCal() method, is there any option rather than returning null. If a null is returned then I have to do null checks every where. Is there any class that extends calendar without doing anything like Null Object Pattern.</p>\n\n<p>Whats the best option over here when getCal() is called?</p>\n"},{"comments":[{"comment_id":32654573,"body":"You may have <code>java</code> installed but that&#39;s not the same as a python module called <code>java</code> that you can import in python. What are you really trying to do?"},{"comment_id":32654589,"body":"You&#39;re attempting to call java from within a python script. So this question doesn&#39;t really make sense"},{"comment_id":32654623,"body":"Import the python module called java"},{"comment_id":32654750,"body":"Did you install a Python module called java?"},{"comment_id":32655280,"body":"You&#39;ve changed the question now. Does <code>org.python.modules </code> exist? Is it on your python path?"},{"comment_id":32655341,"body":"@doctorlove I&#39;m not sure how to check that, how can i do that? The original problem was solved by running this as jython rather than python."},{"comment_id":32657241,"body":"turns out i just needed to do import time rather than #from org.python.modules import time"}],"answers":[{"answer_id":39766317,"body":"<p>The error is misleading here. The problem is likely to be that you dont have permissions in directory /usr/lib/jython-25/cachedir/packages and possibly the parent directory cachedir too. If you look at the first line of the output when wsadmin.sh starts, it actually implies this.</p>\n"}],"last_activity_date":1684357771,"question_id":21612235,"body":"<p>I seemed to have hit a roadblock and can't figure this out at all, can anyone help me figure out why I am unable to import the java module?</p>\n\n<p>Error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"./datasource_config.py\", line 3, in ?\n    import java\nImportError: No module named java\n</code></pre>\n\n<p>java:</p>\n\n<pre><code>13:30:05 # which java\n/usr/bin/java\n</code></pre>\n\n<p>beginning of script</p>\n\n<pre><code>#!/usr/bin/python\nimport sys\nimport java\nfrom java.util import Properties\nfrom java.io import FileInputStream\nfrom org.python.modules import time\nlineSep = java.lang.System.getProperty('line.separator')\n\ndef datasource(cluster,user,password,url,env,jdbc_driver,timeOut,maxConn,minConn,reapTime,unusdTimeout,agedTimeout):\n\n    #Declare global variables \n    global    AdminConfig \n    global    AdminControl\n</code></pre>\n\n<p>Can someone help me determine what this means?</p>\n\n<pre><code>13:45:07 # ./jython -v /opt/websphere/datasource_config.py\n*sys-package-mgr*: can't create package cache dir, '/usr/lib/jython-25/cachedir/packages'\nimport: 'exceptions' as org.python.core.exceptions in builtin modules\nimport: 'site' as /usr/lib/jython-25/Lib/site.py\nimport: 'sys' as sys in builtin modules\nimport: 'os' as /usr/lib/jython-25/Lib/os.py\nimport: 'errno' as org.python.modules.errno in builtin modules\nimport: 'posix' as org.python.modules.posix.PosixModule in builtin modules\nimport: 'posixpath' as /usr/lib/jython-25/Lib/posixpath.py\nimport: 'stat' as /usr/lib/jython-25/Lib/stat.py\nimport: 'Properties' as java class\nimport: 'FileInputStream' as java class\nTraceback (most recent call last):\n  File \"/opt/websphere/datasource_config.py\", line 5, in &lt;module&gt;\n    from org.python.modules import time\nImportError: cannot import name time\n</code></pre>\n"},{"comments":[{"comment_id":134490046,"body":"A workaround could be to clone the run configuration, remove the option and manually start it"},{"comment_id":134505981,"body":"@LMC, how do I &#39;manually&#39; start it?  If I edit the configuration (original or clone), and apply then click &#39;run&#39;, it immediately adds it back into the configuration as it starts up."},{"comment_id":134507662,"body":"Double check the option is not added by another mechanism: settings.gradle, <a href=\"https://stackoverflow.com/a/40736904/2834978\">JAVA_TOOL_OPTIONS, _JAVA_OPTIONS</a> env var"},{"comment_id":134507917,"body":"@LMC unfortunately, no.  In fact, I have found the code in the eclipse-integration-tcserver code base that checks for the param and if not found, adds it back in.  I have added an issue on that project.  Still hoping someone might know of some sort of workaround."},{"comment_id":134508773,"body":"As a workaround, try adding <code>-XX:MaxMetaspaceSize=&lt;value&gt;</code>"}],"last_activity_date":1684357460,"question_id":76264982,"body":"<p>I am running Spring Tool Suite 4 and have been using pivotal tc server for my local development server.  The pivotal tc server has been displaying a warning for a while that MaxPermSize is deprecated, which hasn't been a big issue since it is only a warning.</p>\n<p>However, I am not attempting to upgrade from Java 11 to Java 17, and now the server will not start up because of the error <code>Unrecognized VM option 'MaxPermSize=256m'</code>.  Unfortunately, if I attempt to edit the server run configuration and remove the <code>-XX:MaxPermSize=256m</code> VM argument, it is automatically added back in.  I assume it is the <strong>Pivotal tc Server Integration for Eclipse</strong> that is adding the argument back in.</p>\n<p>Does anyone know how to get it to not add the argument back in, since it is preventing the server from starting?</p>\n<ul>\n<li>STS version: <strong>4.13.0.RELEASE</strong></li>\n<li>Pivotal tc Server Integration for\nEclipse version: <strong>4.1.1.202008171738-RELEASE</strong></li>\n<li>pivotal tc server version: <strong>4.0.2.RELEASE</strong></li>\n</ul>\n"},{"comments":[{"comment_id":134504665,"body":"Generally speaking you need both: some client-side validation to make things nicer for the user <i>and</i> the ability to somehow expose unexpected problems reported by the backend (that may or may not contain the actual error message from the backend)."},{"comment_id":134504758,"body":"There is a balance between how much technical detail you sent to the customer and providing enough information for troubleshooting the issue. Will your user understand the database error?"},{"comment_id":134504992,"body":"Such meta information can be contained in the data model of a database. Of course, a GUI should evaluate such information and thus indicate or even prevent incorrect entries. But one thing is for sure, neither Java nor Swing natively support BCE."},{"comment_id":134505279,"body":"so the advice is to also have controls on the java side to avoid sending too complex messages to the gui?"},{"comment_id":134507413,"body":"What exception is &quot;an employee the date of dismissal prior to the date of hiring&quot;? I think you&#39;re incorrectly using the term exception. It&#39;s somewhat specific in java. By all means though, validate input and warn the user if something is wrong. Or create a specific example, eg input, error and exception."}],"answers":[{"answer_id":76274200,"body":"<p>Exceptions are a construct specifically for control-flow, so inherently, their content would be somewhat ambiguous to an end-user.</p>\n<p>If the end-users are developers, or data scientists, then I presume sending the exception would be logical.</p>\n<p>If not, then exceptions should be handled by the program, and rather, an error message should be given to the user.</p>\n<p>If you believe the exception may be of importance to the end-user, you could possibly state that to the user, and additionally supply the message.</p>\n"}],"last_activity_date":1684357240,"question_id":76273902,"body":"<p>I started to work on a Project for University , in particular the delivery is to create an application with Java through BCE pattern with DAO architecture for personnel management of a company.\nWhat I was wondering is if in the gui when the user enters data that is not consistent :\nsuch as for example for an employee the date of dismissal prior to the date of hiring it is permissible to send the exception created by the database directly to the gui as a warning or do a data control itself with java?</p>\n"},{"comments":[{"comment_id":134496984,"body":"<code>@XmlType</code> is Jaxb, so why wouldn&#39;t it be possible to us JAXB as you already have it."},{"comment_id":134503360,"body":"I&#39;m getting javax.xml.bind.MarshalException  - with linked exception: [com.sun.istack.SAXException2: unable to marshal type &quot;com.test.cxfws.PersonActivityList&quot; as an element because it is missing an @XmlRootElement annotation]."},{"comment_id":134503463,"body":"You get this because there is no <code>@XmlRootElement</code> on your xml classes. If you used the proper plugins there will be an <code>ObjectFactory</code> which you can use to wrap your element into a <code>JaxbElement</code> (there is some <code>create*</code> method for that) you can use this to send your object. The same probably applies for the unmarshalling again."},{"comment_id":134503683,"body":"May I know the plugin and some sample code on it?"},{"comment_id":134506253,"body":"You state you already generated the code, so why would you need an additional plugin? All the needed classes are already in the generated code."},{"comment_id":134507518,"body":"I have below methods but I&#39;m confused how to use these to wrap the element before sending to SOAP service. public PersonActivityList createPersonActivityList() {return new PersonActivityList();}     @XmlElementDecl(         namespace = &quot;<a href=\"http://cxfws.jee.test.com/\" rel=\"nofollow noreferrer\">cxfws.jee.test.com</a>&quot;,         name = “personActivityList&quot;     )     public JAXBElement&lt;PersonActivityList&gt; createPersonActivityList(PersonActivityList var1) {         return new JAXBElement(_PersonActivityList_QNAME, PersonActivityList.class, (Class)null, var1);     }"},{"comment_id":134508385,"body":"I resolved using below code.  public class PublicActivity{     @Autowired     private WebServiceTemplate PersonWebServiceTemplate;          public PersonActivityListResponse getPersonActivityList(PersonActivityList request) {    JAXBElement&lt; PersonActivityList &gt; jaxbElement = new ObjectFactory().createPersonActivityList(request); JAXBElement&lt;PersonActivityListResponse&gt; response =         (JAXBElement&lt;PersonActivityListResponse&gt;) PersonServiceTemplate.marshalSendAndReceive(jaxbElement); return response.getValue();       } }"}],"answers":[{"answer_id":76276093,"body":"<p>I used below code and it worked.</p>\n<pre><code>@Service\npublic class PublicActivity {\n    @Autowired\n    private WebServiceTemplate PersonWebServiceTemplate;\n\n    public PersonActivityListResponse getPersonActivityList(PersonActivityList request) {\n\n        JAXBElement&lt;PersonActivityList&gt; jaxbElement = new ObjectFactory().createPersonActivityList(request);\n        JAXBElement&lt;PersonActivityListResponse&gt; response =\n                (JAXBElement&lt;PersonActivityListResponse&gt;) PersonServiceTemplate.marshalSendAndReceive(jaxbElement);\n        return response.getValue();\n\n\n    }\n}\n</code></pre>\n"}],"last_activity_date":1684356475,"question_id":76267932,"body":"<p>I have a .jar package that I have generated from WSDL of the SOAP service war package. SOAP service doesn't have an equivalent JAXB-compatible package to use JAXB for marshalling and unmarshalling with WebServiceTemplate.</p>\n<p>I am using the following code to call SOAP service with an equivalent JAXB package but right now I don't have JAXB equivalent SOAP service package to call in the SOAP client application then how to call SOAP service?</p>\n<p>PersonActivityList.class</p>\n<pre><code>package com.test.jee.cxfws;\n\n@XmlAccessorType(XmlAccessorType.Field)\n@XmlType(name = &quot;personActivityList&quot;, proOrder = {&quot;request&quot;})\n\npublic class PersonActivityList{\n    protected PersonActionRequest request;\n    \n    public PersonActivityList(){}\n    \n    public PersonActionRequest getRequest() {return this.request;}\n    \n    public void setRequest(PersonActionRequest var1) {this.request = var1;}\n}\n</code></pre>\n<p>app.yml</p>\n<pre><code>personactivity:\nuri: https:test.com/personactivity/V4\nschema-path: &quot;com.test.jee.cxfws&quot;\nwsdlVersion: 4.0\nappId: pdv\n</code></pre>\n<p>PersonConfig.java</p>\n<pre><code>@Configuration\npublic class PersonConfig {\n\n    @Value(&quot;${personactivity.uri}&quot;)\n    String defaultUri;\n\n    @Value(&quot;${personactivity.schema-path}&quot;)\n    String schemaPath;\n\n    // specifically the HTTP message sending functionality\n    // sets up the HTTP client with appropriate connection settings, including timeouts and SSL/TLS configuration\n    @Autowired\n    TestConfig testConfig;\n\n    // is an implementation of a client interceptor\n    // this interceptor is responsible for adding custom headers to the outgoing requests in a web service client based on the values provided in the appId and userId properties.\n    @Autowired\n    TESTHeaderInterceptor headerInterceptor;\n\n    Jaxb2Marshaller getJaxb2Marshaller() {\n        Jaxb2Marshaller jaxb2Marshaller = new Jaxb2Marshaller();\n        jaxb2Marshaller.setContextPath(schemaPath);\n        return jaxb2Marshaller;\n    }\n    \n    @Bean (&quot;PersonWebServiceTemplate&quot;)\n    public WebServiceTemplate updateWebServiceTemplate() throws Exception {\n        SaajSoapMessageFactory messageFactory = new SaajSoapMessageFactory(MessageFactory.newInstance());\n        messageFactory.afterPropertiesSet();\n        WebServiceTemplate updateWebServiceTemplate = new WebServiceTemplate(messageFactory);\n         updateWebServiceTemplate.setMarshaller(getJaxb2Marshaller());\n        updateWebServiceTemplate.setUnmarshaller(getJaxb2Marshaller());\n        updateWebServiceTemplate.setDefaultUri(defaultUri);\n        updateWebServiceTemplate.setMessageSender(testConfig.createMessageSender());\n        updateWebServiceTemplate.afterPropertiesSet();\n        updateWebServiceTemplate.setInterceptors(new ClientInterceptor[]{headerInterceptor});\n        return updateWebServiceTemplate;\n    }\n\n    public String getDefaultUri() {\n        return defaultUri;\n    }\n}\n</code></pre>\n<p>PersonActivity.java</p>\n<pre><code>@Service\npublic class PublicActivity{\n    @Autowired\n    private WebServiceTemplate PersonWebServiceTemplate;\n    \n    public PersonActivityListResponse getPersonActivityList(PersonActivityList request) {\n            PersonActivityListResponse response = (PersonActivityListResponse) PersonWebServiceTemplate.marshalSendAndReceive(request);\n            return response;\n\n    }\n}\n</code></pre>\n<p>How to write the equivalent code to call SOAP service without using JAXB?</p>\n"},{"comments":[{"comment_id":134509719,"body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"answer_id":76276059,"body":"<p>I don't think any serious application will hard code an user name and a password in their <code>application.properties</code> configuration file without providing a way to provide your own. And they should clearly document how to do this.</p>\n<p>What you can do is to unzip their jar and have a look at <code>application.properties</code> file and hopefully they control these values via some environment variables. If this is the case then your problem is solved. If not I am afraid you will have to stick your nose in their decompiled code and try to understand how they load those vales. Those ones from <code>application.properties</code> might be just some default values and support a different way of injecting the runtime ones such as bringing them from a config server a secrets vault, etc</p>\n<p>Ultimately you should come in touch with the third party provider and ask for support.</p>\n<p>Hope some of the above ideas will help.</p>\n"}],"last_activity_date":1684356152,"question_id":76273311,"body":"<p>I have a requirement where we use third party spring boot application jar that can be used as a stand alone application.  In the application properties file, it allows specifying user name and password.  I need to inject secret like this programmatically without source code for the third party spring boot application.  Is there a way to do this?  Thanks.</p>\n<p>I tried using the jar as a dependency but since it is an executable jar, it doesn't work.</p>\n"},{"comments":[{"comment_id":48156238,"body":"Why not put it in the <code>try</code> block below the exception throwing call?"}],"answers":[{"comments":[{"comment_id":56201549,"body":"But what if <code>doSomething2</code> throws an exception? I don&#39;t want it to be catched."},{"comment_id":60659898,"body":"So you&#39;d want <code>doSomething2()</code> to stay in that order, but if it throws an exception it won&#39;t get caught and execute <code>doSomething3()</code>? You could place <code>doSomething2()</code> in a try catch block of its own (nested try block), and your catch could do nothing like <code>catch (Exception e) {}</code>."},{"comment_id":60953870,"body":"I want to initialize some final value at <code>doSomething()</code>, and if exception is thrown, I then want the final value to hold some fall-back value. How to do that then?"},{"comment_id":61092046,"body":"If you want to change the value, it isn&#39;t final."},{"comment_id":70273448,"body":"<code>try {     doSomething1();     doSomething2();     doSomething3(); } catch (Exception e) {     doSomething4(); }</code>   @ThePerson I want to do someting like <code>doSomething1,2,3</code> execute only file all three have no exception how can I achive that?"}],"answer_id":30019480,"body":"<pre><code>try {\n    doSomething();\n    doSomething2();\n} catch (Exception e) {\n    doSomething3();\n}\n</code></pre>\n\n<p>In this example, <code>doSomething2()</code> will only be executed if no exception is thrown by <code>doSomething()</code>.</p>\n\n<p>If an exception is thrown by <code>doSomething()</code>, <code>doSomething2();</code> will be skipped and execution will jump to <code>doSomething3();</code></p>\n\n<p>Also note, <code>doSomething3()</code> will be executed if there is an exception thrown by <code>doSomething2();</code></p>\n\n<p>If no exception is thrown, <code>doSomething3();</code> will not be executed.</p>\n"},{"comments":[{"comment_id":49794449,"body":"Problem with this becomes: If <code>SomeException</code> is very general – if it could be thrown down the line by <code>codeThatShouldBeRunIfNoExceptionThrown</code>, or if that method changes to throw that exception in the future – then your catch block will (silently) no longer handle just the original exception."},{"comment_id":86154571,"body":"@pathfinderelite You answer is fine (+1). I updated by focusing on the original requirement."}],"answer_id":30019496,"body":"<p>Just put the code in the <code>try</code> block.  If an exception is thrown, it will skip to the <code>catch</code> block.  If no exception is thrown, the code will just run.</p>\n\n<pre><code>try {\n    someMethodThatMayThrowException();\n    codeThatShouldBeRunIfNoExceptionThrown();\n} catch (Exception e) {...}\n</code></pre>\n"},{"answer_id":30019503,"body":"<p>Exceptions for flow control is kind of a bad practice. If you insist, use a <code>boolean</code> variable.</p>\n\n<pre><code>boolean thrown = false;\n\ntry {\n   //do something\n} catch (Exception e) {\n   thrown = true;\n}\n\n//do something only if nothing was thrown\n\nif (!thrown) { \n    // do stuff\n}\n</code></pre>\n"},{"comments":[{"comment_id":86154507,"body":"The first way is really the natural way to do. The second that introduces a local variable and a reading indirection brings no advantage here."},{"comment_id":89498526,"body":"@davidxxx &quot;brings no advantage&quot; -- It depends on the use case. There are situations where you might want the second task to be executed outside the <code>try</code> block instead of inside. You might not want executions from the second block to be handled the same way as exceptions in the first block."}],"answer_id":30019506,"body":"<p>Here are two ways:</p>\n\n<pre><code>try {\n    somethingThatMayThrowAnException();\n    somethingElseAfterwards();\n} catch (...) {\n    ...\n}\n</code></pre>\n\n<p>Or if you want your second block of code to be outside the <code>try</code> block:</p>\n\n<pre><code>boolean success = false;\ntry {\n    somethingThatMayThrowAnException();\n    success = true;\n} catch (...) {\n    ...\n}\nif (success) {\n    somethingElseAfterwards();\n}\n</code></pre>\n\n<p>You could also put the <code>if</code> statement in a <code>finally</code> block, but there is not enough information in your question to tell if that would be preferable or not.</p>\n"},{"comments":[{"comment_id":86154610,"body":"Best part of the accepted answer (first part and not the second :)) with a bonus ! :)"},{"comment_id":86156197,"body":"@davidxxx Thanks. Always a pleasure hearing from you ;-)"}],"answer_id":49557427,"body":"<p>An enhancement to the proposed</p>\n\n<pre><code>try {\n    somethingThatMayThrowAnException();\n    somethingElseAfterwards();\n} catch (...) {\n    ...\n}\n</code></pre>\n\n<p>from the accepted answer. What you should do is:</p>\n\n<pre><code>void foo() {\n  try {\n    doStuff();\n  } catch (...) {\n    handleException();\n  }\n}\n</code></pre>\n\n<p>The above feels like overkill to someone who hasn't been exposed to \"clean code thinking\". </p>\n\n<p>But the point here: you do <strong>not</strong> want to mix different abstractions within one method. In other words: you don't have one try block, and more code following behind that within the same method. </p>\n\n<p>You make sure that each and any method contains a straight forward path - you avoid anything that complicates your reading flow. As soon as you get used to writing and reading <em>such</em> kind of code you will find that it takes you dramatically less time to understand your code. </p>\n"},{"answer_id":62355310,"body":"<p>I was trying to solve this exact problem when I came across this question, and the answers here helped me think it through and realize, at least in my particular case, this was the wrong question I should have been asking.  </p>\n\n<p>I wanted to create this method because I was already doing it in main() and wanted to do it elsewhere for portability.  So I copied a block of code that contained a try/catch block.  However, it turns out, I don't want to copy the catch block at all, because if the creation of the Connection failed, I just wanted to fail completely.  </p>\n\n<p>It seems obvious now, but I never wanted to actually catch the exception in the first place.  That code was only there because I copy and pasted it.  So if you find yourself asking this question because you're in a try block and you might not generate a value, then consider if you just wanted to fail completely and not return anything that way this extra code is unnecessary. </p>\n"},{"answer_id":76276034,"body":"<p>In my opinion the cleanest way to solve this, if you don't need the function to anything extra if an exception was raised, is return.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try  {\n    doSomthing();\n}\ncatch (Exception e) {\n    handleException();\n    return;\n}\n\nonlyIfSuccess();\n</code></pre>\n"}],"last_activity_date":1684355950,"question_id":30019453,"body":"<p>How do I make it so the code runs only if there was no exception thrown?</p>\n\n<p>With finally code runs whether there was an exception or not.</p>\n\n<pre><code>try {\n   //do something\n} catch (Exception e) {}\n//do something only if nothing was thrown\n</code></pre>\n"},{"comments":[{"comment_id":134506849,"body":"Don&#39;t use <code>sleep</code>, that will halt the reactor thread. If you want to pause use <code>delayElement</code>."},{"comment_id":134507084,"body":"use <code>Mono.fromCallable(this::getString)</code>"},{"comment_id":134507240,"body":"You block it <i>before</i> the Mono even started, when you call <code>getString</code> to pass the resulting into the Mono. Just call it from the inside of a Mono, like <code>fromCallable</code>"},{"comment_id":134508608,"body":"Thank you all for the answer! I have another question, if I&#39;d like to use Flux instead of Mono to in this case, but Flux doesn&#39;t provide fromCallable() or fromSupplier() feature, how can I achieve the same result?"},{"comment_id":134508846,"body":"Flux is a version of a Publisher with multiple elements, while a <code>Callable</code> result is just a single value. That&#39;s why it supposed to be used as a single-element Mono. But if you want to make a Flux with just one element in it you can do <code>Flux.from(Mono.fromCallable {})</code>"}],"answers":[{"comments":[{"comment_id":134550493,"body":"@rionash Did this answer assist you in resolving your issue?"}],"answer_id":76275996,"body":"<p>First of all, it is crucial to understand that Reactor does not perform any magical conversion of blocking calls to non-blocking ones. To make an end-to-end non-blocking application, you need to use non-blocking drivers, NIO, etc. If you wrap your blocking code to the <code>Mono</code> or <code>Flux</code>, the thread is still will be blocked.</p>\n<p>As for your second example, with sleep in the <code>getString</code> method. There are two points to pay attention at:</p>\n<p><strong>The first one</strong>: you use <code>Mono.just</code>. The important thing is that it is usually used to provide a known value immediately. It means that the <code>getString</code> calculation is happening not in the scope of the reactor chain, but in the main thread during the reactor chain assembling phase. That's why you see &quot;sequential&quot; behavior. If you replace it with <code>Mono.fromCallable</code>, then the calculation will be in the reactor chain (parallel scheduler threads), and you will see the same behavior as in the 1 or 3 examples.</p>\n<p><strong>The second one</strong>: It's important to note, that wrapping your <code>getString</code> method to the <code>Mono.fromCallable</code> does not make your code non-blocking. Your <code>sleep</code> still halts the threads of the parallel scheduler. In your production code, your <code>getString</code> method will likely be some database call or other service call that should be done via a non-blocking driver or NIO-based lib like Netty. To emulate it use <code>delayElement</code> instead of <code>sleep</code>, it works in a non-blocking way. Here is an example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) throws InterruptedException {\n    for (int i = 0; i &lt; 3; i++) {\n        getString()\n            .map(s -&gt; {\n                System.out.println(Instant.now() + &quot; Thread:&quot; + Thread.currentThread().getName() + &quot; &quot; + s);\n                return s.length();\n            })\n            .subscribeOn(Schedulers.parallel())\n            .subscribe();\n        System.out.println(Instant.now() + &quot; Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);\n    }\n\n    TimeUnit.SECONDS.sleep(10);\n}\n\npublic static Mono&lt;String&gt; getString() {\n    return Mono.delay(Duration.ofSeconds(3))\n        .map(it -&gt; &quot;hello world&quot;);\n}\n</code></pre>\n<p>It prints</p>\n<pre class=\"lang-java prettyprint-override\"><code>2023-05-17T20:31:12.099464Z Loop: 0 after MONO\n2023-05-17T20:31:12.112953Z Loop: 1 after MONO\n2023-05-17T20:31:12.113145Z Loop: 2 after MONO\n2023-05-17T20:31:15.105750Z Thread:parallel-2 hello world\n2023-05-17T20:31:15.117944Z Thread:parallel-5 hello world\n2023-05-17T20:31:15.117944Z Thread:parallel-6 hello world\n</code></pre>\n"}],"last_activity_date":1684355553,"question_id":76275150,"body":"<p>I have two test that use sleep() to simulate an api call which takes time to process, and test if Mono.just() make it non-blocking.</p>\n<p>In my first test, I emitted a String directly, but made it blocking in map().</p>\n<pre><code>    @Test\n    public void testMono() throws InterruptedException {\n\n        for (int i = 0; i &lt; 10; i++) {\n            Mono.just(&quot;Hello World&quot;)\n                    .map(s -&gt; {\n                        System.out.println(&quot;Thread:&quot; + Thread.currentThread().getName() + &quot; &quot; + s);\n                        try {\n                            sleep(2000);\n                        } catch (InterruptedException e) {\n                            e.printStackTrace();\n                        }\n                        return s.length();\n                    })\n                    .map(integer -&gt; {\n                        try {\n                            sleep(3000);\n                        } catch (InterruptedException e) {\n                            e.printStackTrace();\n                        }\n                        return integer.toString();\n                    })\n                    .subscribeOn(Schedulers.parallel())\n\n                    .subscribe(System.out::println);\n\n            System.out.println(&quot;Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);\n        }\n\n        sleep(10000);\n    }\n</code></pre>\n<p>And the result is expected as non-blocking, since all the outputs <code>System.out.println(&quot;Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);</code> show up together at the same time.</p>\n<p>However, in the second test, I replace the emitted element from &quot;Hello world&quot; to a blocking getString() method. The purpose of put sleep() in getString() is that, I'd like to simulate the scenario that it's taking time to get the emitted element.\nAnd the result is now blocking since the output shows up one by one after it finished receiving the emitted element.</p>\n<pre><code>    @Test\n    public void testMono2() throws InterruptedException {\n\n        for (int i = 0; i &lt; 10; i++) {\n            Mono.just(getString())\n                    .map(s -&gt; {\n                        System.out.println(&quot;Thread:&quot; + Thread.currentThread().getName() + &quot; &quot; + s);\n                        try {\n                            sleep(2000);\n                        } catch (InterruptedException e) {\n                            e.printStackTrace();\n                        }\n                        return s.length();\n                    })\n                    .map(integer -&gt; {\n                        try {\n                            sleep(3000);\n                        } catch (InterruptedException e) {\n                            e.printStackTrace();\n                        }\n                        return integer.toString();\n                    })\n                    .subscribeOn(Schedulers.parallel())\n\n                    .subscribe(System.out::println);\n\n            System.out.println(&quot;Loop: &quot; + i + &quot; &quot; + &quot;after MONO&quot;);\n        }\n\n        sleep(10000);\n    }\n\n    public String getString(){\n        try {\n            sleep(2000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        return &quot;Hello world&quot;;\n    }\n</code></pre>\n<p>And in the third test, it's also acting as non-blocking.</p>\n<pre><code>    int count = 0;\n\n    @Test\n    public void testFluxSink() throws InterruptedException {\n        for (int i = 0; i &lt; 10; i++) {\n            System.out.println(&quot;Start Loop: &quot; + i);\n            int curLoop = count++;\n            Flux.create(fluxSink -&gt; {\n                try {\n                    System.out.println(&quot;Loop: &quot; + curLoop + &quot; &quot; + &quot; start sleeping&quot;);\n                    sleep(5000);\n                    System.out.println(&quot;Loop: &quot; + curLoop + &quot; &quot; + &quot; end sleeping&quot;);\n                    fluxSink.next(onNext());\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }).subscribeOn(Schedulers.parallel()).subscribe(s -&gt; {\n                System.out.println(Thread.currentThread());\n                System.out.println(&quot;Loop: &quot; + curLoop + &quot; &quot; + &quot;completed receiving&quot; + &quot; &quot; + s);\n            });\n        }\n        sleep(100000);\n    }\n\n    public String onNext() throws InterruptedException {\n        sleep(5000);\n        return &quot;onNext&quot;;\n    }\n</code></pre>\n<p>Wondering if I misunderstand the concept of reactor, and would like to know how did I use it in the wrong way for the 2nd test?</p>\n"},{"comments":[{"comment_id":32248997,"body":"Which java version are you using?"},{"comment_id":32249016,"body":"@Mason It must be Java 7+ because of the <code>&lt;&gt;</code>."},{"comment_id":32249042,"body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/7344330/java-generic-and-wild-card\">java generic and wild card</a>"},{"comment_id":32249119,"body":"@Radiodef Never know could have had an error with his initialization of the List."},{"comment_id":32249139,"body":"Just make it <code>List&lt;Number&gt;</code> instead of the generic wildcard. You can&#39;t know how the type will get filled in so it will throw an error."},{"comment_id":32249172,"body":"@Mason That said, I am actually not sure why this would compile because <code>&lt;&gt;</code> implies type inference. You cannot do <code>new ArrayList&lt;? extends Number&gt;</code> so I don&#39;t know why the <code>&lt;&gt;</code> would be allowed. I am not sure what Java 7 would infer in that case."},{"comment_id":32249238,"body":"@Radiodef good point, I need to test."}],"answers":[{"comments":[{"comment_id":130662997,"body":"why can&#39;t we add Number type, all elements inside are Number, just like we can get list item as number."},{"comment_id":130820140,"body":"because for example in a cell with type <code>Lost&lt;? extends Number&gt;</code> can be <code>List&lt;Integer&gt;</code> and you can&#39;t add <code>Number</code> in case it&#39;s 3.14"}],"answer_id":21383175,"body":"<p>Because <code>List&lt;? extends Number&gt;</code> means that your variable <code>l</code> holds a value of type <code>List</code> with <strong>concrete</strong> (but unknown!) type argument that extends <code>Number</code>.</p>\n\n<p>You can add only <code>null</code>, because <code>l</code> can hold a <code>List&lt;MyClass&gt;</code> for example, where <code>MyClass</code> is your class that extends <code>Number</code>, but nor <code>Integer</code>, nor <code>Double</code> value can be casted to <code>MyClass</code>.</p>\n"},{"comments":[{"comment_id":32249331,"body":"Crucially, the wildcard means that the List <i>once had a type</i> but <i>we don&#39;t know what it is anymore</i>."},{"comment_id":32249354,"body":"&quot;boy, this is harder to explain than it is to understand :)&quot; That&#39;s true of most things, I think."},{"comment_id":106406938,"body":"@AnthonyGrist true, you have to read it a couple of times, but it is correctly written.."}],"answer_id":21383293,"body":"<p><code>List&lt;? extends Number&gt;</code> does not mean \"a list that can hold all objects of subclasses of <code>Number</code>\", it means \"a list parameterized to one concrete class that extends <code>Number</code>\". It's not the contents of the list itself you are defining, it's what the parameterized type of the actual list-object assigned to the variable can be (boy, this is harder to explain than it is to understand :) )</p>\n\n<p>So, you can do:</p>\n\n<pre><code>List&lt;? extends Number&gt; l = new ArrayList&lt;Integer&gt;();\nList&lt;? extends Number&gt; l = new ArrayList&lt;Double&gt;();\n</code></pre>\n\n<p>If you want a list that is able to hold any object of class Number or its subclasses, just do this:</p>\n\n<pre><code>List&lt;Number&gt; l = new ArrayList&lt;&gt;();\n\nl.add(new Integer(33));\nl.add(new Double(33.3d));\n</code></pre>\n\n<p>(The boxing of the values inserted is unnecessary, but there for clarity..)</p>\n"},{"answer_id":21383465,"body":"<p>I will add one more way to add the subtypes of <code>Number</code> to this list. i.e</p>\n\n<pre><code>List&lt;? super Number&gt; l = new ArrayList&lt;&gt;();\n l.add(new Integer(3));  //OK\n l.add(new Double(3.3)); //OK\n</code></pre>\n\n<p>This is allowed since the list is parameterized to be any <em>unknown supertype</em> of <code>Number</code> class. so, compiler allows the known subtype of <code>Number</code>. i.e <code>Integer</code> and <code>Double</code> types</p>\n"},{"answer_id":23743411,"body":"<p>Yes in case of </p>\n\n<pre><code>List&lt;? extends Number&gt; \n</code></pre>\n\n<p>this is just a reference, may be the actual object will be </p>\n\n<pre><code>List&lt;Integer&gt;\n</code></pre>\n\n<p>so you should not be allowed to add new Double(5.0) in a list of Integer.</p>\n"},{"comments":[{"comment_id":84636901,"body":"Ok so could you give me an example of a list instantiation using &quot;upper bound&quot; and adding elements to it. I don&#39;t think it&#39;s possible! When creating a list you can only use &quot;lower bound&quot; since it&#39;s never going to be immutable. &quot;Upper bound&quot; can still be used with a Collection in a method parameter. Could you confirm this."},{"comment_id":86370609,"body":"&quot;Upper bounded and unbounded wildcard collections are immutable&quot; - not exactly, they can still have elements removed and can also be cleared :-)"},{"comment_id":89343610,"body":"element of which type ??"},{"comment_id":128373370,"body":"Your explanation is simple and understandable."}],"answer_id":47585485,"body":"<p>Upper bounded and unbounded wildcard collections are immutable. </p>\n\n<p>For example, you cannot do:</p>\n\n<pre><code>List&lt;? extends Number&gt; myList = new ArrayList&lt;Integer&gt;();\nmyList.add(new Integer(3)); //will not compile\n</code></pre>\n\n<p>This fails to compile because java does not know what type of List <code>List&lt;? extends Number&gt;</code> is at compilation time. </p>\n\n<p>So the example above, at compile time,  <code>myList</code> could be <code>List&lt;Double&gt;</code>or <code>List&lt;Integer&gt;</code> or a <code>List</code> of any subclass of <code>Number</code>. And since you cannot add a <code>Double</code> to a <code>List&lt;Integer&gt;</code> or vise-versa, the compilation fails.</p>\n"},{"comments":[{"comment_id":130662954,"body":"why can&#39;t the compiler just add the value as Number to the list for the upperbounded wildcard, it should be fine? just like we can read from upper bounded list item as Number"},{"comment_id":130872464,"body":"@HKIT then we would still have this problem: &lt;pre&gt;&lt;code&gt;List&lt;Integer&gt; integers = new ArrayList&lt;Integer&gt; List&lt;? extends Number&gt; numbers = integers; // now &#39;numbers&#39; and &#39;integers&#39; refer to the same list numbers.add(1.0); // 1.0 extends Number but not Integer, adding this to &#39;integers&#39; would be an error for (Integer integer : integers) {     // and we would have problems with casting     System.out.println(integer); } &lt;/code&gt;&lt;/pre&gt;"}],"answer_id":60374978,"body":"<p>The problem with upper-bounded generics is that the compiler doesn't know the exact type that is going to be used, for example:</p>\n\n<pre><code>List&lt;? extends Number&gt; upperBounded = new ArrayList&lt;Integer&gt;();\nupperBounded = new ArrayList&lt;Double&gt;();\n</code></pre>\n\n<p><code>upperBounded</code> can be a List of Integers as well as a list of Doubles or any other descendant of Number. Now imagine what will happen if Java allowed us to add any subclass of Number to that List.</p>\n\n<pre><code>List&lt;? extends Number&gt; upperBounded = new ArrayList&lt;Integer&gt;();\nupperBounded.add(1.0); // compile-time error\n</code></pre>\n\n<p>Good thing that Java prevents us from doing that because this would introduce a lot of bugs.</p>\n\n<p>The same applies to the unbounded generic types.</p>\n\n<p>Now what about the lower-bounded generics?</p>\n\n<pre><code>List&lt;? super Integer&gt; lowerBounded = new ArrayList&lt;Integer&gt;();\nlowerBounded.add(0);\n</code></pre>\n\n<p>This is is perfectly fine because we are safe to assume that we can add Integers to any List of an Integer superclass and this will not lead to inconsistency, for example:</p>\n\n<pre><code>List&lt;? super Integer&gt; lowerBounded = new ArrayList&lt;Number&gt;();\nlowerBounded.add(0);\n</code></pre>\n\n<p>Here we have a reference that allows a List of Integers or one of the Integer supertypes. ArrayList of Numbers fits into that definition, so we are able to assign it to that reference. Then we can add an Integer to this list, and this is also fine because a List of Numbers can contain an Integer (because Integer is a Number).</p>\n\n<p>It may be surprising, but you can't add anything not assignable to Integer to this list for the same reason as I explained above for lower-bounded generics.</p>\n\n<pre><code>List&lt;? super Integer&gt; lowerBounded = new ArrayList&lt;Number&gt;();\nlowerBounded.add(1.0); // compile-time error\n</code></pre>\n\n<p>As the compiler does not know the List of which exact type will be used, it does not allow us to add anything that could potentially break the promise given by generics.</p>\n\n<p>Hope that helps.</p>\n"},{"answer_id":76275968,"body":"<p><strong>So why cant I add element in upper bound generics ?</strong>.</p>\n<pre><code> List&lt;? extends Number&gt; L = new ArrayList&lt;&gt;();\n L.add(new Integer(3));  //ERROR\n L.add(new Double(3.3)); // ERROR\n\n</code></pre>\n<p>I believe <strong>'L'</strong> is a reference variable that can <strong>POINTS to</strong> ArrayList of Numbers or sub-class of Number (Integer , double ,etc...) .</p>\n<p>In some point in time  , if the 'L' referred to the ArrayList of <strong>Integer</strong>, this mean it is weird  to add a <strong>Double</strong> value to the list, Why because <strong>'L'</strong> is just a <strong>reference variable</strong> pointed to the <strong>ArrayList of Integers</strong> and u cant add a anything <strong>other than Integer</strong>..</p>\n<p>So <strong>can I add Integer</strong> to it if <strong>'L'</strong> is pointed to List of Integer. Well u cant , because here <strong>'L' is Upper bounded of Number</strong>  and complier is not sure whether it points to the List of integer , numbers , double or some other sub class of Number, so it says,   I am not going add anything to the list <strong>even though</strong> <strong>L</strong> is pointing to arraylist of integers and u are trying to <strong>add</strong> an <strong>integer like 3</strong> .</p>\n<p>It is good <strong><strong>not to add an integer</strong> in above situation</strong> because   in some point in time the <strong>'L' can be point to list of double</strong> and poor me trying to add something other than double...(imagine u r placing List&lt;? extends Number&gt; L as method parameter or something and some  one passes list of Integer one time , float the next day) .  Please correct me if i am wrong ..seri right varen !</p>\n"}],"last_activity_date":1684355235,"question_id":21383139,"body":"<p>I have a list with upper bound generics.</p>\n\n<pre><code> List&lt;? extends Number&gt; l = new ArrayList&lt;&gt;();\n l.add(new Integer(3));  //ERROR\n l.add(new Double(3.3)); // ERROR\n</code></pre>\n\n<p>I don't understand the problem, because Integer and Double extend Number.</p>\n"},{"comments":[{"comment_id":134511794,"body":"I have two requests: can you post code of builder used to create Message? It does not seem to put any Quote objects in Message. The other request is that you clarify relationship between the tables. AFAIK many-to-many uses two many-to-one with additional table, but you wrote about having many to many and one to one."}],"last_activity_date":1684355171,"question_id":76275799,"body":"<p>Apologies if this isn't the type of question I should ask here but I'm having trouble finding what I'm looking for.</p>\n<p>I'm working on a Spring Boot application that should write to the following tables:</p>\n<p><code>quote_table</code> with a <code>request_id</code> column where there can be multiple rows with the same <code>request_id</code>, a <code>messages_table</code> and a <code>quote_messages_link_table</code> that connects the tables via a many-to-many relationship between <code>quote_table.request_id</code> and <code>quote_messages_link_table.request_id</code> and a one-to-one link between <code>messages_table.id and </code>quote_messages_link_table.messages_id`.</p>\n<p>For this I have a Quotes entity and a Message Entity. Message contains this join:</p>\n<pre><code>@ManyToMany(fetch = FetchType.EAGER, cascade = CascadeType.ALL)\n  @JoinTable(\n      name = &quot;quote_messages_link_table&quot;,\n      joinColumns = {@JoinColumn(name = &quot;message_id&quot;, nullable = false, updatable = false)},\n      inverseJoinColumns = {@JoinColumn(name = &quot;request_id&quot;, nullable = false, updatable = false)})\n  private Set&lt;Quote&gt; quotes;\n</code></pre>\n<p>Quote contains this:</p>\n<pre><code>@ManyToMany(mappedBy = &quot;quotes&quot;)\n  private Set&lt;Message&gt; messages;\n</code></pre>\n<p>To write to the database I have this:</p>\n<pre><code>Message message = Message.builder()\n                  .requestOrResponse(&quot;RESPONSE&quot;)\n                  .messageString(response)\n                  .build();\n\nmessageRepository.save(message);\n</code></pre>\n<p>This only writes data to the Message table. I thought the cascade would cause the <code>quote_messages_link_table</code> to be written to and the quote_table already has the records in place from an earlier save operation. I'm aware I've gone wrong somewhere but I'm not sure what it is that I've done wrong. Can anyone advise or point me to a suitable tutorial that might help with what I'm after?</p>\n"},{"last_activity_date":1684355153,"question_id":76275958,"body":"<p>I have a device emitting a Wi-Fi access point with a known SSID and password. I'm trying to connect my Android phone to that AP programmatically. I can connect my phone to it manually using the Wi-Fi settings, so I'm sure I have the right SSID and password and that the network is up. I'm using Flutter and a MethodChannel to talk to Java from Flutter.</p>\n<p>Here's my Java-side code:</p>\n<pre><code>public class MainActivity extends FlutterActivity {\n    private static final String CHANNEL = &quot;wifi&quot;;\n    private static final int TIMEOUT = 60000;\n    \n    private static ConnectivityManager.NetworkCallback callback;\n    \n    @Override\n    public void configureFlutterEngine(FlutterEngine flutterEngine) {\n        super.configureFlutterEngine(flutterEngine);\n        new MethodChannel(flutterEngine.getDartExecutor().getBinaryMessenger(), CHANNEL)\n            .setMethodCallHandler((call, result) -&gt; {\n                ConnectivityManager cm = (ConnectivityManager)getApplicationContext()\n                    .getSystemService(Context.CONNECTIVITY_SERVICE);\n                if(call.method.equals(&quot;request&quot;)) {\n                    String ssid = call.argument(&quot;ssid&quot;);\n                    String pass = call.argument(&quot;password&quot;);\n                    if(callback != null) {\n                        cm.unregisterNetworkCallback(callback);\n                    }\n                    callback = new ConnectivityManager.NetworkCallback() {\n                        boolean first = true;\n                        \n                        @Override\n                        public void onAvailable(Network network) {\n                            if(first) {\n                                first = false;\n                                result.success(cm.bindProcessToNetwork(network));\n                            }\n                        }\n                        \n                        @Override\n                        public void onUnavailable() {\n                            callback = null;\n                            result.success(false);\n                        }\n                    };\n                    WifiNetworkSpecifier wfNetSpec = new WifiNetworkSpecifier.Builder()\n                        .setSsid(ssid)\n                        .setWpa2Passphrase(pass)\n                        .build();\n                    NetworkRequest netReq = new NetworkRequest.Builder()\n                        .addTransportType(NetworkCapabilities.TRANSPORT_WIFI)\n                        .setNetworkSpecifier(wfNetSpec)\n                        .build();\n                    cm.requestNetwork(netReq, callback, TIMEOUT);\n                } else if(call.method.equals(&quot;release&quot;)) {\n                    if(callback != null) {\n                        cm.unregisterNetworkCallback(callback);\n                    }\n                    cm.bindProcessToNetwork(null);\n                }\n            }\n        );\n    }\n}\n</code></pre>\n<p>Here is my Flutter-side Dart code:</p>\n<pre><code>const MethodChannel _channel = MethodChannel('wifi');\n\nFuture&lt;bool&gt; request(String ssid, String password) async {\n  return await _channel.invokeMethod&lt;bool&gt;('request', {\n    'ssid': ssid,\n    'password': password,\n  }) == true;\n}\n\nvoid release() {\n  _channel.invokeMethod('release');\n}\n</code></pre>\n<p>This approach was inspired by the questions below, yet <code>onAvailable</code> is never called in my code:</p>\n<p><a href=\"https://stackoverflow.com/questions/68904640/ask-user-to-connect-to-a-specific-wifi-flutter\">Ask user to connect to a specific WiFi flutter</a></p>\n<p><a href=\"https://stackoverflow.com/questions/64913185/after-called-bindprocesstonetworknetwork-app-never-connect-to-internet-throug\">after called BindProcessToNetwork(network). APP never connect to internet through mobile data</a></p>\n<p>What is the problem with this approach?</p>\n<p>I'm using a Pixel 4a with Android 13.</p>\n<p>Additionally, when I call the Dart <code>request</code> function, a box will appear on-screen with &quot;Searching for device...&quot; and will fail after 30 seconds with the message &quot;No devices found. Make sure devices are turned on and available to connect.&quot; with options &quot;Cancel&quot; and &quot;Try again&quot;. If I hit &quot;Try again&quot; it will repeat and fail again after 30 seconds. This is not a UI I created. I believe it's an OS-created UI. What am I doing that is triggering this UI, could it be getting in the way of connecting to the AP, and how might I suppress it?</p>\n"},{"comments":[{"comment_id":134463110,"body":"Create a JSON object  of the data and Encode the JSON object into a string using JSON.stringify() or directly convert your Json to string and pass the string as the value of the JSON field in your GraphQL query."},{"comment_id":134479112,"body":"Use <i>query variables</i> and stringify the JSON before passing it."},{"comment_id":134481038,"body":"I need to pass 100s of key-value pair, so passing it as a string would be difficult. Need to pass it a JSON itself."}],"answers":[{"comments":[{"comment_id":134466182,"body":"Thank you for the input, But I need to add 10 to 15 key-value pairs like this. So using backslash and double quotes all the time would be difficult for us. That&#39;s why I was looking for a better way to store."},{"comment_id":134481060,"body":"Hi, I tried your edited version, I am getting the same problem. It&#39;s taking it as NULL. No value is getting passed into the database. Can you please share your full code?"}],"answer_id":76249685,"body":"<p>to pass a JSON value while storing data in GraphQL I tried to use the JSON scalar type that you have already defined in your schema. To pass a JSON value, you can simply provide a valid JSON string as the value for the attributes field in your mutation.\nI tried your code and this works for me:</p>\n<pre><code>import { gql } from '@apollo/client';\n\nconst CREATE_PRODUCT_MUTATION = gql`\n  mutation CreateProduct($productRequest: ProductInput!) {\n    createProduct(ProductRequest: $productRequest) {\n      id\n      name\n      attributes\n    }\n  }\n`;\n\nconst productRequest = {\n  id: 1,\n  name: &quot;ABC&quot;,\n  attributes: {\n    Key1: &quot;Value1&quot;,\n    Key2: &quot;Value2&quot;,\n    Key3: &quot;Value3&quot;\n  }\n};\n\nclient.mutate({\n  mutation: CREATE_PRODUCT_MUTATION,\n  variables: {\n    productRequest: productRequest\n  }\n}).then(result =&gt; {\n  console.log(result.data.createProduct);\n}).catch(error =&gt; {\n  console.error(error);\n});\n</code></pre>\n<p>In this piece of code , I'm passing a JSON string as the value for the attributes field. Which should fix your problem.</p>\n"}],"last_activity_date":1684354437,"question_id":76249529,"body":"<p>Using the Extended graphQL scalars we can display the &quot;<code>Map&lt;String, String&gt;</code>&quot; value as JSON with the help of JSON Scalar. But how to pass JSON value while storing the Data?</p>\n<p>The schema :</p>\n<pre><code>Type Mutation{\n               createProduct(ProductRequest: ProductInput) : Product\n             }\n\ninput ProductInput{\n    id : Int\n    name: String\n    attributes: JSON\n}\n</code></pre>\n<p>The Query :</p>\n<pre><code>mutation {\n  createProduct(ProductRequest: {\n        id:1,\n        name:&quot;ABC&quot;\n  attributes:{\n    Key: &quot;Value&quot;\n  }\n  })\n  {\n    id\n    name\n    attributes\n  }\n}\n\n</code></pre>\n<p>If I pass like this, for &quot;Attributes&quot; it's taking as null. So nothing is getting stored in database. If anybody knows to pass JSON value in graphQL, please let me know.</p>\n<p>I tried passing the data using &quot;PostMapping&quot; and it worked! But I need to pass from GraphQL.</p>\n"},{"comments":[{"comment_id":134505917,"body":"Just a typo, I edited it"},{"comment_id":134505944,"body":"please add how you create the mock service and the class of it"},{"comment_id":134506645,"body":"Could it be possible that Mockito just wants to tell zou the mocked call was never used during the test, so you may have mocked the wrong method/parameter?"}],"answers":[{"comments":[{"comment_id":134505997,"body":"This is not working, I already tried that"}],"answer_id":76274672,"body":"<p>you can use use Mockito argument matchers eq() method like below,</p>\n<p>import the org.mockito.ArgumentMatchers</p>\n<pre><code>@Test\npublic void firstTest() {\n    Mockito.when(service.getValue(eq(&quot;parameter1&quot;))).thenReturn(1);\n}\n\n@Test\npublic void secondTest() {\n    Mockito.when(service.getValue(eq(&quot;parameter2&quot;))).thenReturn(2);\n}\n</code></pre>\n"},{"comments":[{"comment_id":134507956,"body":"&quot;You cannot use a mock with literal arguments.&quot; - this is incorrect. <a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#10\" rel=\"nofollow noreferrer\">For example</a>."},{"comment_id":134513149,"body":"@dominicoder  As far I know you cannot use a mock with direct values, you need to have an argument matcher, simplest case being something like <code>someMock.someMethod(eq(&quot;string&quot;))</code>. I might be wrong, happy to learn something new, but could you please provide a more useful link to prove your point? the link you sent is the full mockito documentation."},{"comment_id":134521493,"body":"See item #10 in the link (I don&#39;t know why the anchor link doesn&#39;t work). - <code>when(mock.someMethod(&quot;some arg&quot;))    .thenThrow(new RuntimeException())    .thenReturn(&quot;foo&quot;);</code>"},{"comment_id":134526793,"body":"thanks for this, I will try it out and figure out how this works. it might be that it was not possible in older mockito library but it is now"}],"answer_id":76275747,"body":"<p>You cannot use a mock with literal arguments.\nWhen you want to mock a method and act based on identified argument you need to use ArgumentCaptors</p>\n<p>Take a look at this link\n<a href=\"https://www.digitalocean.com/community/tutorials/mockito-argumentcaptor-captor-annotation\" rel=\"nofollow noreferrer\">https://www.digitalocean.com/community/tutorials/mockito-argumentcaptor-captor-annotation</a></p>\n<p>In your case you should do something like</p>\n<pre><code>@Test\npublic void firstTest() {\n    ArgumentCaptor acString = ArgumentCaptor.forClass(String.class);\n    Mockito.when(service.getValue(acString.capture()))\n        .thenReturn(chooseReturn(acString.value));\n\n    // run code ...\n    // assert ...\n}\n\nprivate int chooseReturn(String arg) {\n    if (arg.equals(&quot;parameter1&quot;)) {\n        return 1;\n    } else if (arg.equals(&quot;parameter2&quot;)) {\n        return 2;\n    } else {\n        throw new InvalidArgumentException(&quot;cannot identify &quot; + arg);\n    }\n}\n</code></pre>\n"},{"comments":[{"comment_id":134512026,"body":"No, I am calling the method later, I just didn&#39;t include it in my question"},{"comment_id":134521453,"body":"Then, for completeness and clarity, please post a complete example that illustrates exactly what you&#39;re doing and exactly what error you&#39;re getting and exactly where the error is showing up."}],"answer_id":76275874,"body":"<p>If your tests are literally as shown:</p>\n<pre><code>@Test\npublic void firstTest() {\n    Mockito.when(service.getValue(&quot;parameter1&quot;)).thenReturn(1);\n}\n\n@Test\npublic void secondTest() {\n    Mockito.when(service.getValue(&quot;parameter2&quot;)).thenReturn(2);\n}\n</code></pre>\n<p>Then the problem is that you have mocked out a return value for a method call but done absolutely nothing that actually causes the methods to be called. So your mocking is &quot;unused&quot; and pointless.</p>\n<p>Add to your tests to actually do something and verify behavior:</p>\n<pre><code>@Test\npublic void firstTest() {\n    Mockito.when(service.getValue(&quot;parameter1&quot;)).thenReturn(1);\n\n    // Do something with service that causes `getValue` to be called with &quot;parameter1&quot;\n\n    assertThat(service.someOtherFunctionThatReturnsSomethingBasedOnGetValue()).isEqualTo(1);\n}\n</code></pre>\n"}],"last_activity_date":1684354233,"question_id":76274587,"body":"<p>I am trying to understand how Mockito works and I have come to one issue - I have two different test cases and I want to mock the same method from service but with different parameters. When I tried to do it like that:</p>\n<pre><code>@Test\npublic void firstTest() {\n    Mockito.when(service.getValue(&quot;parameter1&quot;)).thenReturn(1);\n}\n\n@Test\npublic void secondTest() {\n    Mockito.when(service.getValue(&quot;parameter2&quot;)).thenReturn(2);\n}\n</code></pre>\n<p>I get an error:\n[MockitoHint] 1. Unused... -&gt; at path.getValue(MyTest.java:95)\n[MockitoHint]  ...args ok? -&gt; at path...</p>\n<p>Can someone explain to me why this is happening? When I use Mockito.anyString() as an argument this is not happening anymore...</p>\n<p>Mock class:</p>\n<pre><code>@RunWith(MockitoJUnitRunner.class)\n\npublic class MyTest {\n\n@Mock\nprivate MyService myService;\n\n...\n\n@InjectMocks\nprivate TestingService testingService = new TestingService();\n}\n</code></pre>\n"},{"comments":[{"comment_id":125096218,"body":"What version of Java? It&#39;s like you expect fibers to be implemented?"},{"comment_id":125096373,"body":"Hi Nathan, Its Java 15. I expected threads in ForkJoinPool to switch to non blocking task when their current assigned task does some IO. As per Project Loom , ForkJoinPool will be used for Fibers so was expecting it to behave that way. <a href=\"https://cr.openjdk.java.net/~rpressler/loom/Loom-Proposal.html\" rel=\"nofollow noreferrer\">cr.openjdk.java.net/~rpressler/loom/Loom-Proposal.html</a>"}],"answers":[{"answer_id":70762022,"body":"<blockquote>\n<p>If the Thread inside the ForkJoinPool does a blocking I/O activity ( simulated below in code using Thread.sleep(10000)) , it should pick up another task which is not causing blocking IO.</p>\n</blockquote>\n<p>This is not how threads behave.  A thread represents an inflight execution.  It can't arbitrarily jump to another <code>Runnable</code>.  The thread has no way of knowing whether the thread is blocking for I/O or performing intense calculations, <em>unless</em> the threading engine AND the particular I/O is desgined for this (e.g. jdbc vs. r2dbc).</p>\n<p>In other words if you use Reactor/Spring Reactive/some other reactive programming framework with a traditional blocking I/O, like JDBC, your threads will still hang up waiting for I/O.</p>\n<p>Blocking I/O is often implemented as a loop while polling a socket, there is no way for anything outside the particular I/O to know that this is in fact blocking I/O.</p>\n<p>To my knowledge the <code>ForkJoinPool</code> is not reactive, it hands Runnables to threads, that's it.</p>\n"},{"comments":[{"comment_id":125106091,"body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/70767204/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"answer_id":70767204,"body":"<p>ForkJoinPool is used only as a scheduler as mentioned in the Loom Proposal. Only Virtual Threads have the ability to relinquish the blocking task and switch to another task. Based on what I remember from reading a mail in the loom mailing list,  the loom team is currently not planning to redesign java.util.concurrent's ForkJoinPool to use Virtual Threads.</p>\n"},{"answer_id":76275864,"body":"<p>The <code>ForkJoinPool</code> cannot arbitrarily detect situations where it should start other tasks to maintain the parallelism and where not.</p>\n<p>So are work item that is waiting for something has to explicitly tell the <code>ForkJoinPool</code> that it should start other tasks to maintain the parallelism.</p>\n<p>To achieve this you have to use <code>ForkJoinPool#managedBlock</code> or any API that uses it underneath.</p>\n<p>If you for example use <code>CompletableFuture#join</code> or <code>CompletableFuture#get</code>, then these methods under the hood use <code>ForkJoinPool#managedBlock</code> and thus would allow the <code>ForkJoinPool</code> to start other tasks to maintain intended parallelism.</p>\n<p>A simple <code>Thread.sleep</code> is not working for this.</p>\n<p>If you replace in your example the <code>Thread.sleep(10000);</code> by <code>CompletableFuture.runAsync(() -&gt; { try { Thread.sleep(10000); } catch (Exception e) {}; }).join();</code>, then you get exactly the behavior you intended.</p>\n"}],"last_activity_date":1684354161,"question_id":70761704,"body":"<p>If the Thread inside the ForkJoinPool does a blocking I/O activity ( simulated below in code using <code>Thread.sleep(10000)</code>) , it should pick up another task which is not causing blocking IO.\nHowever, running below code with parallelism of 1 or 2 with ForkJoinPool the results don't match it. The Thread doesn't relinquish the blocking task(i.e task 1 and task2 ) and moves to non blocking ( task 3 ).\nIn case of pool size =1 , all tasks execute in sequence whereas I expected Task 3 to complete first as it was non blocking in both cases ( pool size=1 or 2)</p>\n<p>What is the actual behaviour of Threads in ForkJoinPool in case of blocking IO ?</p>\n<pre><code>    ForkJoinPool pool = new  ForkJoinPool(1);\n    \n    List&lt;Future&lt;String&gt;&gt; tasks = new ArrayList&lt;Future&lt;String&gt;&gt;();\n    \n\n    //Blocking\n    tasks.add(pool.submit(() -&gt;  {  Thread.sleep(10000); System.out.println(&quot;Task 1 woke up&quot;+ Thread.currentThread().isDaemon()); return &quot;task1&quot;; }));\n    //Blocking\n    tasks.add(pool.submit(() -&gt;  { Thread.sleep(10000); System.out.println(&quot;Task 2 woke up&quot;+Thread.currentThread().isDaemon()); return &quot;task2&quot;; }));\n    //Non Blocking\n    tasks.add(pool.submit(() -&gt;  {  System.out.println(&quot;Task 3 Runs&quot;+Thread.currentThread().isDaemon()); return &quot;task3&quot;; }));\n    \n\n    \n    int i=0;\n    System.out.println(&quot;pool size = &quot; + pool.getParallelism() + &quot;Thread count=&quot; +pool.getPoolSize() + &quot;Stealing =&quot; + pool.getStealCount());\n    System.out.println(&quot;waiting&quot;);\n    \n    String str1 = tasks.get(0).get();\n    String str2 = tasks.get(1).get();\n    String str3 = tasks.get(2).get();\n    \n    System.out.println(&quot;Results = &quot; +  str1+ str2 +str3);\n    \n    System.out.println(&quot;done&quot;);\n</code></pre>\n<p>Results :</p>\n<blockquote>\n<p>//Pool size = 2<br />\nTask 2 woke uptrue<br />\nTask 1 woke uptrue<br />\nTask 3 Runstrue</p>\n</blockquote>\n<blockquote>\n<p>//Pool size = 1<br />\nTask 1 woke uptrue<br />\nTask 2 woke uptrue<br />\nTask 3 Runstrue</p>\n</blockquote>\n<p>Another observation:<br />\nWhen we submit Task 3( non blocking ) first then only it is invoked first.</p>\n"}]}