{"items":[{"comments":[{"comment_id":134515223,"body":"GroovyShell should work"}],"last_activity_date":1684585985,"question_id":76278483,"body":"<p>I have a little groovy script that just generates a small report about a special aspect of the source code. It is NOT required in the build process and it shall NOT be part of the resulting jar file. It's just a little script that will be run manually from time to time to get some special information.</p>\n<p>Let's say the script is to be found here (outside of the <code>src</code> folder): <code>./misc/groovy-scripts/generate-special-report.groovy</code> and it contains only <code>println &quot;Special report generated&quot;</code> (too keep things simple here).\nHow can I run this groovy script from a gradle task, without having to provide an extra/additional groovy installation on the system?</p>\n<p>Answers, ideas, tips and hints must not 100% satisfy the above mentioned requirements, I'm happy about any help/solution.\nBut I hope there's an alternative solution to this one here:\n<a href=\"https://stackoverflow.com/questions/17360719/running-groovy-scripts-from-gradle\">Running Groovy scripts from Gradle</a></p>\n<hr />\n<p>[Edit] Maybe <code>GroovyShell</code> or <code>GroovyScriptEngine</code> is what I'm looking for as described in some comments here: <a href=\"https://stackoverflow.com/questions/2360513/run-groovy-script-from-within-gradle\">Run groovy script from within gradle</a>\nI'm going to give that a try.</p>\n"},{"comments":[{"comment_id":134540120,"body":"Please post code as formatted text."},{"comment_id":134540157,"body":"I did @DaveNewton"},{"comment_id":134540271,"body":"the <code>&#47;</code> in <code>.jsp&#47;</code> seems strange.. (tiny, but could explain the issue)"},{"comment_id":134540323,"body":"yes I added that later , it wasn&#39;t there at first but even before I add that the error remained @xerx593"}],"answers":[{"comments":[{"comment_id":134540441,"body":"Thanks but no it doesn&#39;t work"},{"comment_id":134540485,"body":"Can you provide which URL you are using while running web page ?"},{"comment_id":134540529,"body":"yes , u mean &#39;<a href=\"http://localhost:8080/eStore/\" rel=\"nofollow noreferrer\">localhost:8080/eStore</a>&#39; ?   @Satyajit Bhatt"},{"comment_id":134540560,"body":"@aiden021 Try with remove eStore after / because it means you are accessing eStore request for that mapping and it doesn&#39;t exist into your controller. Try only localhost:8080 or localhost:8080/"},{"comment_id":134540617,"body":"I tried that as well but still the same , and my Application Context is set to &#39;/eStore&#39; but anyway I tried it and it doesn&#39;t work"}],"answer_id":76295251,"body":"<p>Modify below line and after that check hope it works!!</p>\n<pre><code>&lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot; /&gt;\n</code></pre>\n"}],"last_activity_date":1684585898,"question_id":76295045,"body":"<p>I'm trying the MVC model with spring and my goal is to show the home page, I tried different ways to solve the problem but the problem still exists</p>\n<p>Here is the error :</p>\n<pre><code> HTTP Status 404 – Not Found\nType Status Report\n\nDescription The origin server did not find a current representation for the target resource or is not willing to disclose that one exists.\n\nApache Tomcat/10.1.8\n</code></pre>\n<p>and here is my project structure and related files (will update the post if feather information is need )\nI think the url mapping is right and there should be no problem with case sensitive</p>\n<p>HomeController.java</p>\n<pre><code>package com.mystore.controller;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\n@Controller\npublic class HomeController {\n    @RequestMapping(&quot;/&quot;)\n    public String home(){\n        return &quot;home&quot;;\n    }\n}\n</code></pre>\n<p>dispatcher-serverlet.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n       xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;&gt;\n\n    &lt;context:component-scan base-package=&quot;com.mystore&quot; /&gt;\n\n    &lt;mvc:annotation-driven /&gt;\n\n    &lt;bean id=&quot;viewResolver&quot; class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\n        \n        &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/views/&quot;/&gt;\n        &lt;property name=&quot;suffix&quot; value=&quot;.jsp/&quot; /&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n<p>web.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;\n         version=&quot;4.0&quot;&gt;\n\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n<p>and here is the project structure :\n<a href=\"https://i.stack.imgur.com/mtt59.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mtt59.png\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"comment_id":134540384,"body":"<code>ada.wait()</code> will only stop blocking, when <code>ada.notify()</code> or <code>ada.notifyAll()</code> has been called after <code>t2</code> has called <code>ada.wait()</code>. For me, the logic of the program looks broken."}],"answers":[{"comments":[{"comment_id":134540413,"body":"Thanks, that really helps me! Wasn&#39;t really understand how to use 2 different objects, but you make it clear. Solved"},{"comment_id":134540937,"body":"As an aside: this program has the potential to deadlock. Thread <code>t2</code> can reach <code>den.notifyAll()</code> before <code>t1</code> reaches <code>den.wait()</code>. It is not sufficient to call <code>start()</code>on <code>t1</code> before calling <code>start()</code>on <code>t2</code> to prevent this problem."},{"comment_id":134541262,"body":"@Turing85 Thank for your remark. now my code looks like that: <code>thread 1: run() { sout(&quot;Thread 1 ada&quot;); synchronized (ada) { ada.notifyAll(); } \t         thread 2: run() {  synchronized (ada) {  try { ada.wait(100); }</code> is there the same deadlock potential?"},{"comment_id":134541309,"body":"not the same, but another (if <code>t1</code> is started way before <code>t2</code>): <code>t1</code> could call <code>ada.notifyAll()</code> before <code>t2</code> calls <code>ada.wait()</code>. the problem is generally not easy to solve, and needs additional constructs."},{"comment_id":134574356,"body":"It’s worth reading the API Note of <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Object.html#wait(long,int)\" rel=\"nofollow noreferrer\"><code>wait(long timeoutMillis, int nanos)</code>’s documentation</a> In real applications, a thread doesn’t wait for another thread. A thread will wait for a certain <i>condition</i> which another thread may make true. As the documentation states, this condition should be checked with a loop within the <code>synchronized</code> block, to ensure not to miss if the condition is already fulfilled and to protect against spurious wakeups and other problematic scenarios."}],"answer_id":76295221,"body":"<p>In order to achieve the desired output where &quot;Thread 1 den&quot; is printed before &quot;Thread 2 den&quot;, and &quot;Thread 1 ada&quot; is printed before &quot;Thread 2 ada&quot;, you can use wait() and notifyAll() methods to synchronize the execution of the threads. Here's an updated version of your code:</p>\n<pre><code>    class MyThreads {\n    public final static Object den = new Object();\n    public final static Object ada = new Object();\n\n    public static Thread t1 = new Thread() {\n        public void run() {\n            System.out.println(&quot;Thread 1 before Thread 2&quot;);\n            synchronized (den) {\n                try {\n                    den.wait();  // Wait until den is notified\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n            System.out.println(&quot;Thread 1 den&quot;);\n            \n            synchronized (ada) {\n                ada.notifyAll();  // Notify ada to wake up Thread 2\n            }\n        }\n    };\n\n    public static Thread t2 = new Thread() {\n        public void run() {\n            synchronized (den) {\n                den.notifyAll();  // Notify den to wake up Thread 1\n            }\n            \n            synchronized (ada) {\n                try {\n                    ada.wait();  // Wait until ada is notified\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n            System.out.println(&quot;Thread 2 ada&quot;);\n        }\n    };\n}\n</code></pre>\n<p>In the updated code, the t1 thread first enters a synchronized block on den and calls den.wait(). This causes t1 to wait until it is notified by another thread. Meanwhile, t2 thread is executed and it enters a synchronized block on den and calls den.notifyAll(), which wakes up the waiting t1 thread.</p>\n<p>After t1 is awakened, it prints &quot;Thread 1 den&quot;. Then, it enters a synchronized block on ada and calls ada.notifyAll(), which wakes up the waiting t2 thread.</p>\n<p>Finally, t2 is awakened and it prints &quot;Thread 2 ada&quot;.</p>\n<p>By using wait() and notifyAll() methods along with synchronized blocks, you can control the order of execution between the threads and achieve the desired output.</p>\n"}],"last_activity_date":1684585653,"question_id":76295207,"body":"<p>I am learning synchronization in Java. I know this is a very basic question, but I can't figure it out.</p>\n<p>I have class which contains 2 different objects and 2 Threads.</p>\n<pre><code>class MyThreads {\n    public final static Object den = new Object();\n    public final static Object ada = new Object();\n\n    public static Thread t1 = new Thread() {\n        public void run() {\n            System.out.println(&quot;Thread 1 den&quot;);\n            System.out.println(&quot;Thread 1 ada&quot;);\n        }\n    };\n\n    public static Thread t2 = new Thread() {\n        public void run() {\n              System.out.println(&quot;Thread 2 den&quot;);\n              System.out.println(&quot;Thread 2 ada&quot;);\n        }\n    };\n}\n</code></pre>\n<p>After execute this code:</p>\n<pre><code>MyThreads.t1.start();\nMyThreads.t2.start();\n\n</code></pre>\n<p>I should get:</p>\n<pre><code>Thread 1 den\nThread 2 den\nThread 1 ada\nThread 2 ada\n</code></pre>\n<p>I am struggling here. I don't understand how thread 1 can awake thread 2.</p>\n<pre><code>public static Thread t1 = new Thread() {\n        public void run() {\n            System.out.println(&quot;Thread 1 den&quot;);\n            synchronized (den) {\n                try {   \n                    den.notifyAll();\n                    den.wait();\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n    };\n\npublic static Thread t2 = new Thread() {\n        public void run() {\n            synchronized (ada){\n                        ada.wait();\n//                     How to awake it?\n                        }\n        }\n    };\n\n</code></pre>\n<p>I will be thankful for any advice!</p>\n"},{"comments":[{"comment_id":134537303,"body":"Did you see <a href=\"https://stackoverflow.com/questions/75843597/send-oobcode-instead-of-link-for-password-reset\" title=\"send oobcode instead of link for password reset\">stackoverflow.com/questions/75843597/&hellip;</a>?"},{"comment_id":134538919,"body":"Did Frank&#39;s recommendation help? And maybe, this <a href=\"https://medium.com/firebase-developers/how-to-authenticate-to-firebase-using-email-and-password-in-jetpack-compose-bd70ca56ea91\" rel=\"nofollow noreferrer\">resource</a> will help. Here is the corresponding <a href=\"https://github.com/alexmamo/FirebaseSignInWithEmailAndPassword\" rel=\"nofollow noreferrer\">repo</a>."},{"comment_id":134539860,"body":"Hello, I saw those threads but it didn&#39;t work for me."}],"answers":[{"comments":[{"comment_id":134537007,"body":"Hi, yes this method works but it sends a link, I have to send the verification code that I created without the link and save it to the firestore under the user to check it later."}],"answer_id":76292943,"body":"<p>If you want to run the password reset method on the user login page without accessing Firestore directly, you can leverage Firebase Authentication's built-in functionality for password reset:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String emailAddress = &quot;user@example.com&quot;;\nFirebaseAuth.getInstance().sendPasswordResetEmail(emailAddress)\n        .addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n            @Override\n            public void onComplete(@NonNull Task&lt;Void&gt; task) {\n                if (task.isSuccessful()) {\n                    // Password reset email sent successfully\n                    // You can show a success message to the user\n                } else {\n                    // Password reset email failed to send\n                    // You can show an error message to the user\n                }\n            }\n        });\n</code></pre>\n<p>If you want to send a verification code instead of a password reset link, you can modify the approach slightly.</p>\n<pre><code>String recipientEmail = &quot;user@example.com&quot;;\nString verificationCode = &quot;123456&quot;; // Replace with your generated verification code\n\nProperties properties = new Properties();\nproperties.put(&quot;mail.smtp.host&quot;, &quot;your_smtp_host&quot;);\nproperties.put(&quot;mail.smtp.port&quot;, &quot;your_smtp_port&quot;);\n// Set other mail properties as needed\n\nSession session = Session.getInstance(properties, null);\ntry {\n    MimeMessage message = new MimeMessage(session);\n    message.setFrom(new InternetAddress(&quot;your_sender_email&quot;));\n    message.setRecipient(Message.RecipientType.TO, new InternetAddress(recipientEmail));\n    message.setSubject(&quot;Verification Code&quot;);\n    message.setText(&quot;Your verification code is: &quot; + verificationCode);\n\n    Transport.send(message);\n} catch (MessagingException e) {\n    e.printStackTrace();\n}\n</code></pre>\n<p>Once the user receives the verification code via email, they can enter it in your app's interface.</p>\n<p>On the client-side, retrieve the verification code entered by the user.</p>\n<p>Make a request to Firestore to fetch the user's document based on their email address.</p>\n<p>Compare the verification code entered by the user with the one stored in Firestore. If they match, you can proceed with the verification process.</p>\n<p>Note: Ensure you have appropriate security measures in place to prevent abuse or brute-force attempts. It uses the JavaMail library for sending emails.</p>\n"}],"last_activity_date":1684584579,"question_id":76292910,"body":"<p>I am using firebase auth for user login in my android app.\nMy problem is sending a link for email verification and password reset.</p>\n<p>The links in the mails sent to the government agency e-mail addresses used by some of my users are rendered unclickable by the firewall.\nFirestore rules are set to be accessible to logged in users.\nHow can I run password reset method on user login page, I can't access firestore because user is not logged in.</p>\n<p>By storing a randomly generated code under the user in Firestore, I also email it and prevent the user from seeing the data in the application when he logs in, without verifying the code.</p>\n<p><em>My users java codes;</em></p>\n<pre><code>public class Persons implements Serializable {\n    private String person_name;\n    private String person_phone;\n    private String person_city;\n    private String person_district;\n    private boolean email_verification;\n    private int verification_code;\n    private Authorization person_authorization;\n\n    constructors...\n    getter and setter methods...\n}\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/36OQL.png\" alt=\"My users firesote db\" /></p>\n<p><em>My firestore rules;</em></p>\n<pre><code>rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    match /{document=**} {\n      allow read, write: if request.auth != null;\n    }\n  }\n}\n</code></pre>\n"},{"last_activity_date":1684584445,"question_id":76295149,"body":"<p>I retrieve proxy objects from the database (using Spring Data neo4j) using an interface projection. Then I map those proxy objects to DTOs using ModelMapper. All interfaces and classes implement the same BaseInterface that has a getter and setter for the id attribute.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface BaseInterface {\n\n    Long getId();\n    void setId(Long id);\n    Boolean getVisible();\n    void setVisible(Boolean visible);\n\n}\n</code></pre>\n<p>I am mapping like this inside my abstract generic service class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>repository.findAll(statement, interfaceType).stream().map(proxy -&gt; modelMapper.map(proxy, dtoType));\n</code></pre>\n<p>The mapping for all attributes from the BaseInterface works (I have included &quot;visible&quot; in this example), also mapping for the attributes of the subclasses does work. But ModelMapper never maps the id attribute, even when explicitly configured:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var modelMapper = new ModelMapper();\n\nPropertyMap&lt;BaseInterface, BaseNode&gt; basePropertyMap = new PropertyMap&lt;BaseInterface, BaseNode&gt;() {\n    @Override\n    protected void configure() {\n        map().setId(source.getId());\n    }\n};\n\nmodelMapper.addMappings(basePropertyMap);\n</code></pre>\n<p>I also tried:</p>\n<pre class=\"lang-java prettyprint-override\"><code>TypeMap&lt;BaseInterface, BaseNode&gt; baseTypeMap = modelMapper.createTypeMap(BaseInterface.class, BaseNode.class);\nbaseTypeMap.addMapping(BaseInterface::getId, BaseNode::setId);\n</code></pre>\n<p>I have come around to a really terrible hack, that works.</p>\n<pre class=\"lang-java prettyprint-override\"><code>repository.findAll(statement, interfaceType).stream().map(proxy -&gt; {\n    var theMappedObject = modelMapper.map(proxy, dtoType);\n    var id = ((BaseInterface) proxy).getId();\n    ((BaseNode) theMappedObject).setId(id);\n    return theMappedObject;\n});\n</code></pre>\n<p>What also works, is explicitly mapping for the subclasses, but this creates a lot of boilerplate code - I'd rather go with the hack above than this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>TypeMap&lt;PersonListInterface, PersonListDTO&gt; baseTypeMap = modelMapper.createTypeMap(PersonListInterface.class, PersonListDTO.class);\nbaseTypeMap.addMapping(BaseInterface::getId, BaseInterface::setId);\n</code></pre>\n<p>Why does ModelMapper skip the id attribute and how can I make it not skip it?\nI'm using ModelMapper v3.1.1.</p>\n"},{"last_activity_date":1684584340,"question_id":76295141,"body":"<p>I create a DialogFragment which contains various filters to customize searches on app, but the gridView with the various category doesn't work at all. I tried a lot of different code and search everything on internet, but none of them solve my problem. Hope someone can help me.</p>\n<p><strong>This is the Grid Adapter</strong></p>\n<pre><code>public class GridFilterAdapter extends BaseAdapter {\n\n    Context context;\n    String[] category;\n\n    LayoutInflater inflater;\n\n    public GridFilterAdapter(Context context, String[] category){\n        this.context = context;\n        this.category = category;\n    }\n\n    @Override\n    public int getCount() {\n        return this.category.length;\n    }\n\n    @Override\n    public Object getItem(int position) {\n        return null;\n    }\n\n    @Override\n    public long getItemId(int position) {\n\n        return 0;\n    }\n\n    @Override\n    public View getView(int position, View convertView, ViewGroup parent) {\n\n        View view;\n        if (convertView == null) {\n            view = LayoutInflater.from(context).inflate(R.layout.column_filter, parent);\n            Log.w(&quot;IO&quot;, &quot;controllo l'inflate nell'if&quot;);\n            /*view = inflater.inflate(R.layout.column_filter, parent);\n            Log.w(&quot;IO&quot;, &quot;controllo convertView nell'if&quot;);*/\n        } else{\n            view = convertView;\n        }\n\n        TextView text = view.findViewById(R.id.crossfit_filter);\n        text.setText(category[position]);\n        return view;\n    }\n}\n</code></pre>\n<p><strong>This is my FragmentDialog</strong></p>\n<pre><code>public class FilterFragment extends DialogFragment {\n\n    FragmentFilterBinding binding;\n\n    public static String TAG = &quot;Filtri ricerca&quot;;\n    public FilterFragment() {\n        // Required empty public constructor\n    }\n    \n\n    @Override\n    public Dialog onCreateDialog(@Nullable Bundle savedInstanceState) {\n        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\n        LayoutInflater inflater = getActivity().getLayoutInflater();\n        View view = inflater.inflate(R.layout.fragment_filter,null);\n        binding = FragmentFilterBinding.inflate(getLayoutInflater());\n        DisplayMetrics metrics = getResources().getDisplayMetrics();\n        int width = metrics.widthPixels;\n        view.setMinimumWidth((6 * width)/7);\n        builder.setView(view);\n        String[] item = {\n                &quot;Crossfit&quot;,\n                &quot;Boxe&quot;,\n                &quot;Running&quot;,\n                &quot;Body Building&quot;\n        };\n\n        binding.gridtab.setAdapter(new GridFilterAdapter(getContext(), item));\n        binding.gridtab.setOnItemClickListener(new AdapterView.OnItemClickListener(){\n            @Override\n            public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position,long id){\n                Toast.makeText(getContext(),&quot;Ho percepito il click su &quot; + item[position], Toast.LENGTH_SHORT).show();\n            }\n        });\n        return builder.create();\n    }\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        View v = inflater.inflate(R.layout.fragment_filter, container, false);\n\n        return v;\n    }\n\n}\n</code></pre>\n<p><strong>And these are the xml file of the DialogFragment, fragment_filter.xml</strong></p>\n<pre><code>&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:minHeight=&quot;450dp&quot;\n    android:minWidth=&quot;1000dp&quot;\n    tools:context=&quot;.FilterFragment&quot;\n    android:orientation=&quot;vertical&quot;\n    android:padding=&quot;@dimen/leftMargin_title&quot;&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;horizontal&quot;\n        android:id=&quot;@+id/filter_title&quot;&gt;\n        &lt;TextView\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:textSize=&quot;25sp&quot;\n            android:text=&quot;FILTRI PER LA RICERCA&quot;\n            android:fontFamily=&quot;@font/encode_sans_medium&quot;\n            android:layout_marginStart=&quot;35dp&quot;\n            android:layout_marginEnd=&quot;35dp&quot;\n            android:layout_marginBottom=&quot;@dimen/topMargin_title&quot;\n            android:layout_gravity=&quot;center_horizontal|center_vertical&quot;\n            android:layout_marginTop=&quot;@dimen/topMargin_title&quot;\n            android:textColor=&quot;#3b3b3b&quot;/&gt;\n    &lt;/LinearLayout&gt;\n    &lt;View\n        android:id=&quot;@+id/filter_divider&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;3dp&quot;\n        android:background=&quot;@drawable/filter_btn_gradient&quot;\n        android:layout_below=&quot;@id/filter_title&quot;\n        /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/cityFilter&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_below=&quot;@id/filter_divider&quot;\n\n        android:layout_marginStart=&quot;@dimen/leftMargin_title&quot;\n        android:layout_marginTop=&quot;@dimen/leftMargin_title&quot;\n        android:layout_marginEnd=&quot;@dimen/leftMargin_title&quot;\n        android:layout_marginBottom=&quot;@dimen/leftMargin_title&quot;\n\n        android:fontFamily=&quot;@font/encode_sans_semibold&quot;\n        android:text=&quot;Filtra per città&quot;\n        android:textColor=&quot;#212121&quot;\n        android:textSize=&quot;20sp&quot; /&gt;\n    &lt;EditText\n        android:id=&quot;@+id/search_city&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:background=&quot;@drawable/input_white_bck&quot;\n        android:layout_below=&quot;@id/cityFilter&quot;\n\n        android:hint=&quot;Città&quot;\n        android:textColorHint=&quot;#803b3b3b&quot;\n        android:textSize=&quot;19sp&quot;\n        android:fontFamily=&quot;@font/encode_sans_medium&quot;\n\n        android:paddingStart=&quot;@dimen/topMargin_title&quot;\n        android:paddingEnd=&quot;@dimen/topMargin_title&quot;\n        android:paddingBottom=&quot;15dp&quot;\n        android:paddingTop=&quot;15dp&quot;\n\n        android:layout_marginEnd=&quot;@dimen/topMargin_title&quot;\n        android:layout_marginStart=&quot;@dimen/topMargin_title&quot;\n        android:layout_marginTop=&quot;@dimen/leftMargin_title&quot;\n        /&gt;\n        &lt;TextView\n            android:id=&quot;@+id/title_evaluation_filter&quot;\n            android:layout_below=&quot;@id/search_city&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n\n            android:text=&quot;Filtra per recensione&quot;\n            android:textSize=&quot;20sp&quot;\n            android:fontFamily=&quot;@font/encode_sans_semibold&quot;\n            android:textColor=&quot;#212121&quot;\n            android:layout_marginStart=&quot;@dimen/leftMargin_title&quot;\n            android:layout_marginTop=&quot;@dimen/leftMargin_title&quot;\n            android:layout_marginEnd=&quot;@dimen/leftMargin_title&quot;\n            android:layout_marginBottom=&quot;@dimen/leftMargin_title&quot;\n            /&gt;\n    &lt;Spinner\n        android:id=&quot;@+id/spinner_evaluation&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_below=&quot;@id/title_evaluation_filter&quot;\n        android:entries=&quot;@array/evaluation&quot;\n\n        android:layout_marginStart=&quot;@dimen/topMargin_title&quot;\n        android:layout_marginEnd=&quot;@dimen/topMargin_title&quot;\n\n        android:padding=&quot;20dp&quot;\n        android:background=&quot;@drawable/input_white_bck&quot;\n        /&gt;\n    &lt;TextView\n        android:id=&quot;@+id/title_category&quot;\n        android:layout_below=&quot;@id/spinner_evaluation&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n\n        android:text=&quot;Categoria di sport&quot;\n        android:textSize=&quot;20sp&quot;\n        android:fontFamily=&quot;@font/encode_sans_semibold&quot;\n        android:textColor=&quot;#212121&quot;\n        android:layout_marginStart=&quot;@dimen/leftMargin_title&quot;\n        android:layout_marginTop=&quot;@dimen/leftMargin_title&quot;\n        android:layout_marginEnd=&quot;@dimen/leftMargin_title&quot;\n        android:layout_marginBottom=&quot;@dimen/leftMargin_title&quot;\n        /&gt;\n    &lt;GridView\n        android:id=&quot;@+id/gridtab&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:layout_below=&quot;@id/title_category&quot;\n\n        android:numColumns=&quot;5&quot;\n        &gt;\n\n    &lt;/GridView&gt;\n\n\n\n\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p><strong>and xml for the Grid's items, column_filter.xml</strong></p>\n<pre><code>&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;&gt;\n    &lt;TextView\n        android:id=&quot;@+id/crossfit_filter&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:background=&quot;@drawable/category_selector&quot;\n        android:textSize=&quot;20sp&quot;\n        android:paddingTop=&quot;@dimen/topMargin_title&quot;\n        android:paddingBottom=&quot;@dimen/topMargin_title&quot;\n        android:paddingStart=&quot;20dp&quot;\n        android:paddingEnd=&quot;20dp&quot;\n        android:textAllCaps=&quot;false&quot;\n        android:fontFamily=&quot;@font/encode_sans_medium&quot;\n        android:layout_marginEnd=&quot;@dimen/topMargin_title&quot;\n        android:text=&quot;Rose&quot;\n        /&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n"},{"comments":[{"comment_id":13562568,"body":"check the versions of jb/jdk and axis if they are compatible with each other"},{"comment_id":13563861,"body":"The issue got fixed .... :)  Note: This was due to conflict between the jar in the jboss and jar in my class path ...."}],"answers":[{"answer_id":25184485,"body":"<p>The exception is thrown because in your web application at least exists a jar which contains the <code>javax.xml.namespace.QName</code> class and that class conflicts with the same one contained in one of the JBoss's jar.</p>\n\n<p>You should remove that (these) jar(s) from your web application when deploying on JBoss.</p>\n\n<p>A list of jars which contain the <code>javax.xml.namespace.QName</code> class is at <a href=\"http://www.findjar.com/class/javax/xml/namespace/QName.html\" rel=\"nofollow\">http://www.findjar.com/class/javax/xml/namespace/QName.html</a></p>\n"},{"answer_id":28714828,"body":"<p>We encounter this issue if EAR/WAR file is created using eclipse</p>\n\n<p>It is a clear case of having two jar files in the EAR/war file.</p>\n\n<p>Open EAR/WAR fileusing WinRAR and check whether two axis.jar file is present. If yes then delete and the jar file and redeploy</p>\n"}],"last_activity_date":1684584340,"question_id":10492995,"body":"<p>When i deploy a web service project in jboss 6 .I am getting the below stackrace</p>\n\n<p>Caused by: java.lang.LinkageError: loader constraint violation in interface itable initialization: when resolving method \"org.apache.axis.message.MessageElement.getChildElements(Ljavax/xml/namespace/QName;)Ljava/util/Iterator;\" the class loader (instance of org/jboss/classloader/spi/base/BaseClassLoader) of the current class, org/apache/axis/message/MessageElement, and the class loader (instance of ) for interface javax/xml/soap/SOAPElement have different Class objects for the type javax/xml/namespace/QName used in the signature\n    at java.lang.Class.getDeclaredMethods0(Native Method) [:1.6.0_13]\n    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427) [:1.6.0_13]\n    at java.lang.Class.getDeclaredMethods(Class.java:1791) [:1.6.0_13]\n    at org.jboss.deployment.AnnotatedClassFilter.hasAnnotations(AnnotatedClassFilter.java:186) [:6.0.0.20100429-M3]\n    at org.jboss.deployment.AnnotatedClassFilter.accepts(AnnotatedClassFilter.java:114) [:6.0.0.20100429-M3]\n    at org.jboss.deployment.AnnotatedClassFilter.visit(AnnotatedClassFilter.java:99) [:6.0.0.20100429-M3]\n    at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:407) [jboss-vfs.jar:3.0.0.CR5]\n    at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:409) [jboss-vfs.jar:3.0.0.CR5]\n    at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:409) [jboss-vfs.jar:3.0.0.CR5]\n    at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:409) [jboss-vfs.jar:3.0.0.CR5]\n    at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:409) [jboss-vfs.jar:3.0.0.CR5]\n    at org.jboss.vfs.VirtualFile.visit(VirtualFile.java:395) [jboss-vfs.jar:3.0.0.CR5]\n    at org.jboss.web.deployers.WarAnnotationMetaDataDeployer.getClasses(WarAnnotationMetaDataDeployer.java:172) [:6.0.0.20100429-M3]\n    at org.jboss.web.deployers.WarAnnotationMetaDataDeployer.processMetaData(WarAnnotationMetaDataDeployer.java:145) [:6.0.0.20100429-M3]\n    at org.jboss.web.deployers.WarAnnotationMetaDataDeployer.deploy(WarAnnotationMetaDataDeployer.java:119) [:6.0.0.20100429-M3]\n    at org.jboss.web.deployers.WarAnnotationMetaDataDeployer.deploy(WarAnnotationMetaDataDeployer.java:80) [:6.0.0.20100429-M3]\n    at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:179) [:2.2.0.Alpha4]\n    ... 26 more</p>\n\n<p>Please help me ..... :)</p>\n"},{"comments":[{"comment_id":56854782,"body":"This is unrelated to the Java installed locally, as AAO is .NET technology. The only place where Java comes into play here, is on the server. Thus, you can dismiss the JRE installation from the equation. Best would be to enable debug logging in AAO&#39;s properties and use something like <a href=\"http://www.telerik.com/fiddler\" rel=\"nofollow noreferrer\">Fiddler</a> to debug the HTTP calls between your client and the server to see what&#39;s happening. Also, <code>dswsbobje</code> debugging (on the server) might help clarify the issue."},{"comment_id":56871799,"body":"I am not sure how to do the &quot;dswsbobje&quot; debugging on the server.  Could you please let me know in detail (step by step)?  Thanks"},{"comment_id":56877054,"body":"Have a look at SAP note <a href=\"https://service.sap.com/sap/support/notes/1668106\" rel=\"nofollow noreferrer\">1668106</a> on how to set up logging for <code>dswsbobje</code>. The note is for XI3 but it applies to BI4 as well. You&#39;ll need an SAP Support account to access the note though."}],"last_activity_date":1684584006,"question_id":34543733,"body":"<p>In our company we have started using SAP BusinessObjects Analysis Edition for Microsoft Office (Version: 2.1.1.10239) for Microsoft Office 2010. But from past few days I have started getting the following error message while logging into Analysis Edition for Microsoft Office:</p>\n<blockquote>\n<p>constructor exception (Error: WSE 99999)</p>\n</blockquote>\n<p>When I contacted our Tech support, they were saying that <em><strong>&quot;It is an error in the Java code that handles the connection between your AAO Add-in in Excel and the BOE server (Web Service)&quot;</strong></em></p>\n<p>I have reinstalled Java 8 Update 66 and also reinstalled Analysis Edition for Microsoft Office, but still I am getting that error.  I am  also attaching error screenshot for your reference.</p>\n<p>Please help me to fix this problem.</p>\n<p>I have tried all possible options before posting this question here. I have been trying to fix this from past 4 days and I couldn't succeed :(</p>\n<p><a href=\"https://i.stack.imgur.com/1yCal.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1yCal.png\" alt=\"enter image description here\" /></a></p>\n"},{"answers":[{"comments":[{"comment_id":134540209,"body":"It didn&#39;t help. I added a description of this to the question."}],"answer_id":76294902,"body":"<p>Remove <code>@Transactional</code> in <code>CountryServiceImpl</code>. Since the QuestServiceImpl class has <code>@Transactional</code> on the save() method, the method will execute within a single transaction, including the <code>countryService.save()</code> invoke.</p>\n"}],"last_activity_date":1684583828,"question_id":76294270,"body":"<p>Java 17 Spring + Hibernate</p>\n<p>There are two entities</p>\n<pre><code>@Entity\npublic class Quest {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    \n    private String name;\n\n    @ManyToOne\n    @JoinColumn(nullable = false)\n    private Country country;\n\n}\n    \n@Entity\npublic class Country {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(nullable = false, unique = true)\n    private String name;\n}\n</code></pre>\n<p>I save entities separately in order to perform checks on the Country entity before that and possibly change the Quest entity.\nHere is the class of the service in which the entities are saved.\nI save the Country entity first so that the corresponding entry has already been created in the country table.</p>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class QuestServiceImpl implements QuestService {\n\n    private final QuestRepository questRepository;\n\n    private final CountryService countryService;\n\n    @Override\n    @Transactional\n    public Quest save(Quest quest) {\n    \n        var country = quest.getCountry().getName();\n        // Checks are performed here before saving\n        countryService.save(getCountry(country));\n        return questRepository.save(quest);\n    }\n\n    Country getCountry(String name) {\n     ...\n        return country;\n    }\n}\n\n@Service\n@RequiredArgsConstructor\npublic class CountryServiceImpl implements CountryService {\n\n    private final CountryRepository countryRepository;\n\n    @Override\n    @Transactional\n    public Country save(Country country) {\n        return countryRepository.save(country);\n    }\n\n}\n</code></pre>\n<p>As a result, I get an error</p>\n<pre><code>HHH000437: Attempting to save one or more entities that have a non-nullable association with an unsaved transient entity. The unsaved transient entity must be saved in an operation prior to saving these dependent entities.\n</code></pre>\n<p>I understand that the problem is that all the code is executed within a single transaction.\nBut my CountryServiceImpl#save method is also marked as @Transactional.\nHow do I fix this?</p>\n<p>If I remove @Transactional in CountryServiceImpl, I still get the same error. But in this case, the data is written to the Country table. But they are still not written to the Quest table. The same thing happens if I remove @Transactional in both services.</p>\n"},{"answers":[{"answer_id":35117518,"body":"<p>First of all, your server and client should <strong>always</strong> be on the same version. Using a different version on the client than on the server is not supported.</p>\n\n<p>The error message is referring to an error in the underlying XML representation of the Web Intelligence document.</p>\n\n<p>You'll have to test if you can replicate the issue using the 4.1 version of the Web Intelligence Rich Client (so without any SP installed).</p>\n"}],"last_activity_date":1684583796,"question_id":35060334,"body":"<p>I'm trying to create a new Webi document based on a duplicate old one that we have been migrated from BOXI 3.1. I make my changes (filters, expressions) without any problem. When I save it (in different folders) and try to reopen it, I get the following error :</p>\n<p>An error has occurred</p>\n<blockquote>\n<p>java.lang.NullPointerException\nat com.sap.webi.ui.action.PageSizeAction.onUpdateUI(PageSizeAction.java:278)</p>\n</blockquote>\n<p>And the document is damaged for good ! but I can open other documents.</p>\n<p><strong>I'm on SAP BI 4.1 platform SP3, the server is on 4.1 but native version.</strong></p>\n<p>I noticed that <strong>.glf</strong> is created before getting the error that has the following content :</p>\n<blockquote>\n<p>|527A5B9C76094BE390D9B582D003D7CE0|2016 01 27 11:25:58.876|+0000|Error| |&gt;=|E| |TraceLog| 9504|  38|OpenDocTask-5515057-1| |0|0|0|0|-|-|-|-|-|-||||||||||com.sap.sl.sdk.parser.xml.ServerObjectParser||Unknown data type &quot;error&quot;\n|527A5B9C76094BE390D9B582D003D7CE1|2016 01 27 11:26:00.636|+0000|Error| |&gt;=|E| |TraceLog| 9504|  38|OpenDocTask-5515057-1| ||||||||||||||||||||com.sap.webi.client.toolkit.document.DocumentInstanceWrapper||initRebeanNavigationState - getNavigationState\njava.lang.IndexOutOfBoundsException: only START_TAG can have attributes END_DOCUMENT seen ...... @16:16</p>\n</blockquote>\n<p><strong>ETC</strong></p>\n<blockquote>\n<p>|527A5B9C76094BE390D9B582D003D7CE2|2016 01 27 11:26:03.146|+0000|Error| |&gt;=|E| |TraceLog| 9504|  16|AWT-EventQueue-0| ||||||||||||||||||||com.sap.webi.client.toolkit.document.DocumentInstanceWrapper||initRebeanNavigationState - getNavigationState\njava.lang.IndexOutOfBoundsException: Index: 0, Size: 0\nat java.util.ArrayList.rangeCheck(Unknown Source)\nat java.util.ArrayList.get(Unknown Source)</p>\n</blockquote>\n<p>Please can anybody help me?</p>\n<p>Thanks a lot,</p>\n<p>Regards,\nAdraa</p>\n"},{"comments":[{"comment_id":134532373,"body":"Welcome to Stack Overflow! Please clarify your specific problem or add additional details to highlight exactly what you need.  As it&#39;s currently written, it’s hard to tell exactly what you&#39;re asking. See the  <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask page</a> for help clarifying this question. Include the desired behavior, a specific problem or error and the shortest code necessary to  reproduce the issue. See: <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."}],"answers":[{"answer_id":76295096,"body":"<p>This code should work:</p>\n<pre><code>int[] arr = new int[]{4, 0, 3, 1, 2};\nint[] result = new int[arr.length];\nfor(int i = 0; i&lt;arr.length;i++){\n    result[arr[i]] = i;\n}\n</code></pre>\n<p>The problem with your code is that you did: <code>origPatt = R1.Pattern;</code>\ninstaid of <code>origPatt = R1.Pattern.clone();</code>.</p>\n"}],"last_activity_date":1684583655,"question_id":76290332,"body":"<p>I am currently working on an enigma-like machine for a hobby project, but I can't figure out how to reverse the encoder positions. The problem is I am trying to swap the index and value of an array.</p>\n<pre><code>int[] origPatt;\norigPatt = R1.Pattern;\nfor (int i = 0; i &lt; origPatt.length; i++) {\n  R1.Pattern[origPatt[i]] = i;\n}\n</code></pre>\n<p>Here is what I expect it to do, where the index is on top, and the value is below:</p>\n<p>0, 1, 2, 3, 4   -&gt;   0, 1, 2, 3, 4</p>\n<p>4, 0, 3, 1, 2   -&gt;   1, 3, 4, 2, 0</p>\n"},{"answers":[{"answer_id":76295086,"body":"<p>check this link <a href=\"https://www.objectdb.com/java/jpa/persistence/delete#Cascading_Remove_\" rel=\"nofollow noreferrer\">https://www.objectdb.com/java/jpa/persistence/delete#Cascading_Remove_</a></p>\n<p>Orphan Removal\nJPA 2 supports an additional and more aggressive remove cascading mode which can be specified using the orphanRemoval element of the @OneToOne and @OneToMany annotations:</p>\n<pre><code>@Entity\nclass Employee {\n    ...\n    @OneToOne(orphanRemoval=true)\n    private Address address;\n    ...\n}\n</code></pre>\n<p>When an Employee entity object is removed the remove operation is cascaded to the referenced Address entity object. In this regard, orphanRemoval=true and cascade=CascadeType.REMOVE are identical, and if orphanRemoval=true is specified, CascadeType.REMOVE is redundant.</p>\n<p>The difference between the two settings is in the response to disconnecting a relationship. For example, such as when setting the address field to null or to another Address object.</p>\n<p>If orphanRemoval=true is specified the disconnected Address instance is automatically removed. This is useful for cleaning up dependent objects (e.g. Address) that should not exist without a reference from an owner object (e.g. Employee).\nIf only cascade=CascadeType.REMOVE is specified no automatic action is taken since disconnecting a relationship is not a remove operation.\nTo avoid dangling references as a result of orphan removal this feature should only be enabled for fields that hold private non shared dependent objects.</p>\n<p>Orphan removal can also be set for collection and map fields. For example:</p>\n<pre><code>@Entity\nclass Employee {\n    ...\n    @OneToMany(orphanRemoval=true)\n    private List&lt;Address&gt; addresses;\n    ...\n}\n</code></pre>\n<p>In this case, removal of an Address object from the collection leads to automatic removal of that object from the database.</p>\n"}],"last_activity_date":1684583554,"question_id":76294806,"body":"<p>Parent:</p>\n<pre><code>@OneToMany(cascade = CascadeType.REMOVE)\nSet&lt;Child&gt; ...\n</code></pre>\n<p>Child:</p>\n<pre><code>@ManyToOne(optional = false)\n@JoinColumn(name = &quot;ownerId&quot;, nullable = false, updatable = false)\nParent owner;\n\n//another class\n@OneToMany(mappedBy = &quot;belongsTo&quot;, fetch = FetchType.LAZY)\nprivate Set&lt;AnotherClass&gt;;\n</code></pre>\n<p>Another class which contains childID as FK:</p>\n<pre><code>@ManyToOne\n@JoinColumn(name = &quot;childId&quot;)\nprivate Child belongsTo;\n</code></pre>\n<p>I want to test removal of Parent with child but how to disconnect child with another table? I use delete from crud repository if it matters.</p>\n"},{"comments":[{"comment_id":134540626,"body":"What exactly are you trying to compare? Note that Java GC algorithms are very complex with lots of nuances. They may not provide comparable metrics in this way."},{"comment_id":134540920,"body":"I would like to compare the times each GC is active and how often it gets revoked"},{"comment_id":134541275,"body":"Do you mean <i>invoked</i>?"},{"comment_id":134544288,"body":"Yes of course! My fault"}],"last_activity_date":1684583407,"question_id":76295073,"body":"<p>When using Serial, Parallel or G1 GCs I can directly see their Collection Counts and accumulated times. However when using ZGC and ShenandoahGC it shows two different Counts and Times for each - for Pause and for Cycles.</p>\n<p>Which one of these is the right one for comparing the GC between each other?</p>\n"},{"answers":[{"comments":[{"comment_id":65485162,"body":"Thanks!. I actually changed everything to BigDecimal and now works fine (at least for smalls values)."},{"comment_id":65485249,"body":"@Orejano you can do the entire thing with whole numbers too, in fact you can do it without arbitrary precision math. If you&#39;re interested in that it should probably be a new question though"}],"answer_id":39068415,"body":"<p>This is a problem:</p>\n\n<pre><code>double op1 = Math.pow(10,L*K);\n</code></pre>\n\n<p>for example, when <code>n = 20</code>, <code>L*K = 40</code>, and <code>op1 = 10000000000000000303786028427003666890752</code>. As for why, the usual floating point business: it's the closest it could get. There is no <code>double</code> with a value of exactly 1E40.</p>\n\n<p><code>op1</code> won't print like that (you'll see 1E40 and think all is fine), but it will convert like that. Then you're going to use <code>BigDecimal</code> which is fine (though odd), it already went wrong before that.</p>\n\n<p>I assume you used <code>BigDecimal</code> <em>because</em> you converted from a <code>double</code>, otherwise you would have used <code>BigInteger</code>. Just use <code>BigInteger.pow</code> instead of <code>Math.pow</code> and it may work (it fixes this issue, if there's anything else I haven't noticed but I can't promise it will work).</p>\n\n<p><code>Math.pow(10,L)</code> on the other hand shouldn't be a problem, because <code>L</code> is low enough .. for now. You might as well change that too and have it work for large <code>L</code> though.</p>\n"},{"comments":[{"comment_id":65489422,"body":"possible duplicate: <a href=\"http://stackoverflow.com/questions/38988665/java-puzzle-whats-the-correct-answer#comment65349106_38988665\" title=\"java puzzle whats the correct answer%23comment65349106_38988665\">stackoverflow.com/questions/38988665/&hellip;</a>"}],"answer_id":39068417,"body":"<p><code>double op1 = Math.pow(10,L*K)</code></p>\n\n<p>This here will overflow for large values of n. Double.MAX_VALUE ~ 1.7*10^308 (i.e.) for L*K > 308, it will overflow.</p>\n\n<p>Edit: double will fail to accurately represent much smaller values as harold mentioned in his answer.</p>\n"},{"comments":[{"comment_id":65487888,"body":"How the for loop will look?, I do not get where the 2017 comes in. The exercise I was given was to concatenate 58184241583791680, 58184241583791680 times and get the modulus by 2017"},{"comment_id":65488161,"body":"Why even loop like that? You can just use a regular <code>modexp</code>"},{"comment_id":65494969,"body":"Orejano there are at most 2017 different modulo values. Given that 2017 is prime, we probably need sum(1+2017) plus the first (58184241583791680 mod 2017) iterations. It saves concatenaring 58184241583791680 times! At some point, any additional concatenation then is 0 mod 2017 and we can stop, or we have a cycle (of at most 2016 steps) that we can skip to the very last (partial) pass. @harold modexp does not help, as we need 10^0+10^17+10^34+10^51+... i.e. all interim values, too. So we may as well compute them in a loop as next=(prev*10^17) mod 2017"},{"comment_id":65500458,"body":"@Anony-Mousse the linked answer just uses a couple of modexps"}],"answer_id":39068944,"body":"<p><strong>Use math!</strong> A good interviewer wants you to use your brain and <em>solve</em> a problem, not brute-force things with crappy code.</p>\n\n<p>In this case, he probably wanted you to use the equalities</p>\n\n<ol>\n<li><p>ab mod n = [(a mod n)(b mod n)] mod n</p></li>\n<li><p>(a + b) mod n = [(a mod n) + (b mod n)] mod n</p></li>\n</ol>\n\n<p>and the fact that e.g. concatenating a four digit number three times is the same as <code>xyzu * 100010001</code> and the latter can be further broken down into <code>10000^0+10000^1+10000^2</code>.</p>\n\n<p>Now in your case, the base number x and the number of repetitions y is the same, and both are rather big. But the modulus n is small. Let D be the next power of 10 larger than x.</p>\n\n<p>Thus D mod n isn't actually D, but less than 2017. And instead of computing D^y, you can actually compute ((D mod n)^y) mod n, and if you do this in a for loop it will eventually (after at most 2017 steps) <em>cycle</em> or become 0. You can therefore compute this term in at most 2017 iterations. So the complexity of this smart approach is O(n) where n is the modulo term, whereas the naive approach will require O(x*y) memory.</p>\n\n<p>With these tricks, you should be able to do this <em>without</em> BigInteger, and <em>much</em> faster.</p>\n"},{"comments":[{"comment_id":65511616,"body":"Why mod 2016 and not 2017? Because 1646 is taken to 1646 by *599+2005 mod 2017, so it is not in our sequence. Also, I was a little cavalier in my (n mod 2016) above, because in case n=2016, I had not defined a sub 0."},{"comment_id":65555196,"body":"Great explanation!. Thanks. Got it!."}],"answer_id":39075580,"body":"<p>I laid this all out in the comments on <a href=\"https://stackoverflow.com/questions/38988665/java-puzzle-whats-the-correct-answer#comment65349106_38988665\">https://stackoverflow.com/questions/38988665/java-puzzle-whats-the-correct-answer#comment65349106_38988665</a>, but you can take what @Anony-Mousse and others above say and work with it.</p>\n\n<p>One key is to find 10^17 mod 2017 up front. Wolfram Alpha gets that right, anyway at 599, but on other platforms you may need to look at it as ((10^9 mod 2017)<em>(10^8 mod 2017))mod 2017 to get the 599. You also need that 58184241583791680 mod 2017 is 2005 (again Wolfram gets this right, but lesser platforms may falter if you do not break it up into something like (((581842415 mod 2017)</em>(10^8 mod 2017) mod 2017)+83791680)mod 2017.</p>\n\n<p>So at each step of the (58184241583791680 but no fear) process you are taking your current number and multiplying it by 10^17 (to move it over to make room for the concatenation) and adding 58184241583791680. But we can do this all mod 2017. In the language of sequences a sub 1 = 2005 and a sub (n+1)=((a sub n)*599+2005) mod 2017.\nThat is the key step in your for loop. I did the first 4040 or so terms in R (got to love that you can just lay them out on screen interactively and pore over them -- the language is growing on me), though it really would have sufficed to do about half that (the good old Pigeonhole principle at work). And they do not cycle until you actually get all the way out to a sub 2017 which is 2005 again. So is a sub 4033.</p>\n\n<p>In general a sub n = a sub (n mod 2016). You want a sub 58184241583791680. 58184241583791680 mod 2016 is 224 says Wolfram Alpha [again on a lesser platform you may need to break it up into (((581842415 mod 2016)*(10^8 mod 2016) mod 2016)+83791680)mod 2016], so you want a sub 224.</p>\n\n<p>If people want to check themselves or me, I got on R that that was 465. But as was pointed out above, the process is what the question is really interested in.</p>\n"},{"answer_id":58891539,"body":"<pre><code>import java.math.BigInteger;\nclass Puzzle {\n\n    final static BigInteger M = new BigInteger(\"2017\");\n    private static BigInteger compute(long n) {\n         String s = \"\";\n         String a = new BigInteger(n+\"\").mod(M)+\"\";\n\n         for (long i = 0; i &lt; Integer.parseInt(a); i++) {\n              s = s + a ;\n              s = new BigInteger(s).mod(M)+\"\";\n         }\n         return new BigInteger(s.toString()).mod(M);\n\n    }\n\n    public static void main(String args[]) {\n\n       for (long n : new long[] { 1L, 2L, 5L, 10L, 20L, 58184241583791680L }) {\n           System.out.println(\"\" + n + \": \" + compute(n));\n       }\n\n    }\n}\n</code></pre>\n"},{"answer_id":76295016,"body":"<p>You can actually do it in <strong>log(n)</strong> time.\nwhich is faster than any of the methods explained above.</p>\n<p>things you would need in your toolbox:</p>\n<ol>\n<li><strong>power(a, b)</strong> with some modulo (it would be always right if the modulo is prime which is in your case)</li>\n<li>knowledge that in <strong>a%x + b%x == (a+b)%x similary for multiplication.</strong></li>\n<li>calculating inverse modulo</li>\n</ol>\n<p><strong>if you don't know any of these methods you can google it.</strong></p>\n<p>now to the solution:</p>\n<p>first let your given num be 1234\nthen we need to calculate 1234 1234 1234 ... 1234 times</p>\n<p>it is equal to <b>1234 + 10^4 * 1234 + 10^8 * 1234 + 10^12 * 1234 ... 10^(4* 1233) * 1234</b></p>\n<p><strong>we get GP</strong></p>\n<p>== <b>1234*(10^(4*1234) - 1)/(10^4 - 1)</b></p>\n<p>replace 1234 with x and 4 (number of digits in N ) with y</p>\n<p>we get <b>x*(10^(x*y) -1 )/(10^y - 1 )</b></p>\n<p>this power and inverse functions take only log(n) time</p>\n<p>now our answer is <strong>x * (power(10, x*y) -1 ) * inverse(power(10, y) - 1)</strong>;\nmodulo all this and you get your answer</p>\n<p>i might have made some mistakes, pardon those.\nthis might be a heafty read if you don't know the above requirements.</p>\n"}],"last_activity_date":1684582543,"question_id":39068283,"body":"<p>I had the following scenario today on an Interview for a Developer Job, this was one of the questions, and only one I fail to answer.</p>\n\n<p>Concatenate the number N N times and then calculate his Modulus by 2017.</p>\n\n<p>For example: for N=5 the number will be 55555 and the result will be Mod(55555,2017) = 1096 for N=10 the number will be 10101010101010101010 and the result Mod(10101010101010101010,2017) = 1197</p>\n\n<p>Now the Number I had to calculate was 58184241583791680. The only hint I got was that the result of 58184241583791680 concatenated 58184241583791680 times modulus 2017 is a 4 digit number.</p>\n\n<p>I posted <a href=\"https://math.stackexchange.com/questions/1897693/get-the-modulus-of-a-number-n-concatenated-n-times\">this question</a> on math.stackexchange and I got a mathematical approach to this problem, other than brute force.</p>\n\n<p>I wrote the following code in JAVA</p>\n\n<pre><code>import java.math.BigDecimal;\nimport java.math.BigInteger;\nimport java.math.MathContext;\n\npublic class Puzzle {\n    final static BigInteger M = new BigInteger(\"2017\");\n\npublic static void main(String [ ] args) {\n    for (long n : new long[] { 1L, 2L, 5L, 10L, 20L }) { \n        System.out.println(n + \" --&gt; \" + bruteForce(n) + \" --- \" + formulaV2(n));\n    }\n}\n\n\nprivate static BigInteger bruteForce(long n) {\n    String s = \"\";\n    for (long i = 0; i &lt; n; i++) {\n        s = s + n;\n    }\n    return new BigInteger(s.toString()).mod(M);\n}\n\nprivate static BigInteger formulaV2(long n) {\n    String aux = String.valueOf(n);\n    long L = aux.length();\n    long K = n;           \n\n    double op1 = Math.pow(10,L*K);\n    BigDecimal minus1 = new BigDecimal(1);\n    BigDecimal p1 = new BigDecimal(op1).subtract(minus1);\n\n    double op2 = Math.pow(10,L);\n    BigDecimal p2 = new BigDecimal(op2).subtract(minus1).pow(-1,MathContext.DECIMAL64);\n\n    BigDecimal R = new BigDecimal(n).multiply(p1).multiply(p2);\n    R = R.setScale(0,BigDecimal.ROUND_UP);\n    BigInteger ret = R.toBigInteger();\n    return ret.mod(M);\n}\n}\n</code></pre>\n\n<p>I'm using BigInteger and BigDecimal because I want to get the value of really big numbers (16+ digits).</p>\n\n<p>The bruteForce method will simply concatenate the number inside a loop, and the formulaV2 method will use the formula from the question asked in the math forum.</p>\n\n<p>bruteForce method is just for validation.</p>\n\n<p>However the formula method works well for N&lt;10 but no for N>=10. At N=10 I'm getting incorrect results.</p>\n\n<p>The coding seems to be consistent (to me at least, maybe there is something I'm missing) with the formula provided, and the formula is correct (I checked in Wolfram Alpha).</p>\n\n<p>My guess is that I have precision problems, maybe BigDecimal is not the proper object in this case?.</p>\n"},{"comments":[{"comment_id":134539941,"body":"No, loading a class I can do, The question is how to load the whole classpath, and it it&#39;s a good idea."},{"comment_id":134539952,"body":"Are you by any chance using an AMD Ryzen processor? If so, you may want to check if there is a BIOS update for your motherboard (one that includes AGESA 1.2.07 or higher)."},{"comment_id":134539971,"body":"Loading the entire classpath is not a good idea. If your classpath has a lot of generic libraries, it is entirely possible that a lot of those classes are not actually used, so loading them wastes time and memory."},{"comment_id":134540080,"body":"@MarkRotteveel that is true. So I&#39;d have to restrict the loading to my project classes only. I suppose it&#39;s a specific URL I can fetch from the system classloader."},{"comment_id":134540083,"body":"@MarkRotteveel indeed I do! Good point, my PC has been nagging be about that for awhile."},{"comment_id":134540092,"body":"My guess is that one or both of your JRE or your application&#39;s JAR file(s) is / are installed on a remote file share."}],"last_activity_date":1684581554,"question_id":76294860,"body":"<p>I've run into this bottleneck which has to do with Java's dynamic loading of classes in a desktop application. In other words the .class in question is on disk, so it must be an IO issue. I'm not talking minutes here, but rather milliseconds/seconds for a single class. And this behaviour is totally unpredictable, sometimes it's instant, sometimes there's a small delay, depending on what side Windows 10 woke up on I'm guessing.</p>\n<p>That it takes time is fine, I just don't want it to happen at an unpredictable time. Hence, I would like to load all classes I'm going to use in the app in one sweep, and at one time. How do I go about doing this in an elegant fashion, and is it a bad idea?</p>\n"},{"comments":[{"comment_id":133402509,"body":"I don&#39;t get it. The buffer in your first sample code is empty - why?"},{"comment_id":133402603,"body":"Because the content of the buffer does not matter in this problem, it could also be filled with random numbers etc.. The point is that as soon as it reaches a certain size, the client says that is received 0 bytes."},{"comment_id":133402761,"body":"You&#39;re also going to corrupt your output as you&#39;re writing a <i>binary</i> value (the length) with a <code>Writer</code>. <code>Writer</code>s are for <code>String</code>s"},{"comment_id":133402860,"body":"I am sending the expected size as a Integer string (with a new line at the end), and I know this is not the best solution, but why should that be speed dependent? Meaning sometimes it works, sometimes it does not."},{"comment_id":133403929,"body":"Actually you&#39;re writing an <code>int</code>. You might get away with it here but really it should be done in a proper stringified way. But you really need to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"comment_id":133405562,"body":"I&#39;ve tested it and adjusted my question, the given programs should be a minimal reproducible example. (If the described behavior does not work, then increase the size of the buffer that is sent by the server)"}],"last_activity_date":1684581443,"question_id":75614738,"body":"<p>While I was trying to send an Image (it's Bytes) and some other data over the Network via a Java ServerSocket, I found an interesting inconsistency in the code.</p>\n<p>I ran the same server- and client code several times, and sometimes they both deadlocked (because I had a more complex protocol between them than just sending an image), sometimes they worked fine.</p>\n<p>After simplifying it more and more, I found out that these programs will have a different outcome, depending on the delay I put between 2 instructions on the server side and the size of the buffer that is sent:</p>\n<p>The server main methode:</p>\n<pre><code>ServerSocket serverSocket = new ServerSocket(4999);\nSocket clientSocket = serverSocket.accept();\n        \nOutputStream outStream = clientSocket.getOutputStream();\nPrintWriter outWriter = new PrintWriter(outStream, true);\n        \nbyte buf[] = new byte[2000]; // buffer size of 2000 as an example\n        \nSystem.out.println(&quot;sending: &quot; + buf.length + &quot; bytes&quot;);\n\noutWriter.println(buf.length);\n// If I put a delay here, for example 1000 System.out.println(1) statements, the client receives the buffer correctly, if not the client receives 0 bytes\noutStream.write(buf);\n\nclientSocket.close();\nserverSocket.close();\n</code></pre>\n<p>The client main methode:</p>\n<pre><code>Socket clientSocket = new Socket(InetAddress.getByName(&quot;&lt;address of the server&gt;&quot;), 4999);\nBufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\n\nint len = Integer.valueOf(in.readLine());\nSystem.out.println(&quot;expected length: &quot; + len);\n        \nbyte[] receiveBuf = clientSocket.getInputStream().readNBytes(len);\nSystem.out.println(&quot;received buffer length: &quot; + receiveBuf.length);\n/* \n At this point, the receiveBuf.length should be the expected size,\n but as soon as the server sends a to large buffer or the delay\n between the two send statements in the server is to small, the client prints that\n it received an incorrect number of bytes (always  less then the expected).\n\n With a buffer size of 20000 bytes I got the client to output that it received\n 11808 bytes, which is 20000 - 2^13...\n*/\n        \nclientSocket.close();\n</code></pre>\n<p>Now my problem is, that (if I researched correctly) this transaction uses TCP/IP, which means that in contrast to UDP, the data should always be correctly sent and received, no matter how slow or fast a device is, or how much delay you put in between instructions.\nBut, although the client does receive the correct length of the buffer (line 4 in client), it receives a buffer with a length that is less then the expected size(outputted by the client line 8), as soon as the length of the array that was sent by the server is to long (in my case around: size &gt; 1443 bytes) or the delay between the two send statements in the server is to small(which should not matter in theory...).</p>\n<p>Things I have to mention: The exact number of bytes that the server has to send, so that the client says it received a wrong number of bytes may vary with the client speed (slow Pc, fast Pc), but 2000 bytes should already be enough (with that i could reproduce it on every device I have (Laptop, VM, Pc)). The error does not appear, if server and client are the same device!</p>\n<p>So my question is: How can the result (and integrity) of this TCP transaction depend on the execution speed of the program on the server side and size of the buffer that is sent?</p>\n<p><strong>PS:</strong> By execution speed, I mean the optional added <code>System.out.println()</code> statements in the server program, which sometimes somehow determine whether the client receives the buffer successfully or not.</p>\n<p><strong>Edit:</strong>\nJust by running the server on my pc, and the client on my Laptop while varying the sent buffer size and repeating each for 3 times, I got these outputs:</p>\n<p><em>server: &quot;sending: 2000 bytes&quot;</em>\n<em>client: &quot;expected length: 2000&quot; &quot;received buffer length: 0(first try, 2000 second try, 0 third try)&quot;</em></p>\n<p><em>server: &quot;sending: 8192 bytes&quot;</em>\n<em>client: &quot;expected length: 8192&quot; &quot;received buffer length: 6(first try, 0 second try, 8192 third try)&quot;</em></p>\n<p><em>server: &quot;sending: 20000 bytes&quot;</em>\n<em>client: &quot;expected length: 20000&quot; &quot;received buffer length: 11808(first try, 11808 second try, 11808 third try)&quot;</em></p>\n<p><em>server: &quot;sending: 100000 bytes&quot;</em>\n<em>client: &quot;expected length: 100000&quot; &quot;received buffer length: 91808(first try, 91808 second try, 91808 third try)&quot;</em></p>\n<p><em>server: &quot;sending: 1000000 bytes&quot;</em>\n<em>client: &quot;expected length: 1000000&quot; &quot;received buffer length: 998540(first try, 1000000 second try, 991808 third try)&quot;</em></p>\n"},{"last_activity_date":1684580904,"question_id":76294550,"body":"<p>The &quot;Starting the java DB server&quot; task runs after creating Data-Base on Netbeans, but not making a database.</p>\n<p>I am already downloaded and placed apache derby file using <code>https://db.apache.org/derby/derby_downloads.html</code> to the the java folder.</p>\n<p>How can I fix this error. Tunning task not and nor create database file.</p>\n<p><a href=\"https://i.stack.imgur.com/1EXyN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1EXyN.png\" alt=\"Tunning task not and nor create database file\" /></a></p>\n<p>I want to stop running and create a data base.</p>\n"},{"comments":[{"comment_id":125078337,"body":"Use Gson or Jackson to parse the received String. These libraries also provide methods to parse Json from an <code>InputStream</code> which is provided by every http client."}],"answers":[{"answer_id":70752256,"body":"<p>You can use <a href=\"https://mvnrepository.com/artifact/com.google.code.gson/gson/2.8.9\" rel=\"nofollow noreferrer\">gson package</a> to map the string to your UserDto class like the following:</p>\n<pre><code>String result;  // JSON String of the class &quot;UserDto&quot;.\nUserDto userDto = gson.fromJson(result, UserDto.class);\nreturn userDto;\n</code></pre>\n<p><a href=\"https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core/2.13.1\" rel=\"nofollow noreferrer\">jackson</a> is also an option but I prefer gson as its really simple to map with.</p>\n"},{"answer_id":76294878,"body":"<p><strong>GSON</strong> can be use to convert a UserDTO to USER class</p>\n<p>Ensure that you have the Gson library added to your project. If you are using Maven, you can include the following dependency in your pom.xml file:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n    &lt;artifactId&gt;gson&lt;/artifactId&gt;\n    &lt;version&gt;2.8.9&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Import the Gson library into your Java class:</p>\n<pre><code>import com.google.gson.Gson;\n</code></pre>\n<p>Create an instance of the Gson class:</p>\n<pre><code>Gson gson = new Gson();\n</code></pre>\n<p>Use the Gson instance to convert the UserDTO to a JSON string:</p>\n<pre><code>String json = gson.toJson(userDTO);\n</code></pre>\n<p>Assuming your UserDTO object is named userDTO, the toJson() method will convert the UserDTO object to a JSON string representation.</p>\n<p>Convert the JSON string back to a User entity object:</p>\n<pre><code>User user = gson.fromJson(json, User.class);\n</code></pre>\n<p>This <strong>fromJson</strong>() method parses the JSON string and converts it into a User object of the specified class, which in this case is the User entity class.\nMake sure your User entity class has matching field names and types with the UserDTO class to ensure a successful conversion.\nBy using Gson, you can easily convert between JSON and Java objects, simplifying the process of converting a UserDTO to a User entity class.</p>\n"}],"last_activity_date":1684580732,"question_id":70752187,"body":"<p>I am using the Java HttpClient (java.net.http) and I am sending a GET request.</p>\n<p>The response I get is a JSON String of the class &quot;UserDto&quot;.</p>\n<pre><code>HttpResponse&lt;String&gt; send = httpClient.send(accept, HttpResponse.BodyHandlers.ofString());\n</code></pre>\n<p>I don't want to receive my response as a string but convert it directly into a &quot;UserDto&quot; object.</p>\n"},{"comments":[{"comment_id":26597887,"body":"@BalusC I just added more code above, showing how the error is actually generated in my real code.  Can you show me how to fix the problem in my real code, show in the edit above?"},{"comment_id":26597977,"body":"@BalusC The datasource is created in web.xml.  I added the code at the end of my original posting above, just now.  Does this answer your question?  In the doGet method, everything works fine when I comment out the creation/use of the second DAO.  The problem comes when I try to create two different classes which each extend DAO in the same doGet method.  Creating and using one of those classes works fine.  Can you show how to get past this problem?"}],"answers":[{"comments":[{"comment_id":26597875,"body":"Thank you. +1 for trying to help.  I put more code above including the actual calling code (which has two instances of classes that extend DataAccessObject), and the code for the underlying DataAccessObject.  Is the problem the resource lock?  If so, how do I avoid the error in the doGet method that I added above without removing the desired protection from the resource lock?"},{"comment_id":26598076,"body":"I think your problem is that the dataSource is never initialised. I have no idea what the lock is there for? Its highly likely that your database is transactional, do a transaction, SELECT ... FOR UPDATE and then commit when your are done. No need to involve intrinsic locks :D"},{"comment_id":26598383,"body":"Thank you, but can you please write out some actual working code based on your suggestions and on what I put up in my posting?  I am trying to understand, and that will be easier if you give me some working code to pick through."}],"answer_id":18157515,"body":"<p>I suspect that the code where it \"runs fine\" in, is code actually running in an application server. The example you are posting, which just runs a <code>static void main()</code> method, wont get any resources which has been defined in web.xml.</p>\n\n<p>I am guessing that you use JDNI to setup the initial datasource. And then using something like</p>\n\n<pre><code>@Resource(name=\"jdbc/mydb\")\nprivate DataSource dataSource;\n</code></pre>\n\n<p>to set up your connection. Right?</p>\n\n<p>EDIT:</p>\n\n<p>After seeing your code, it seems like your data source is newer initialised at all. Just putting a  element into your web.xml will not do it alone. You will also need to actually configure the dataSource, you know, specify the driver, username, password, uri etc etc etc.</p>\n\n<p>I'm guessing the find() method of the DAO that works, isn't actually using the dataSource. What you have shown so far, doesn't insigunate that your have a initialised dataSource at all. </p>\n\n<p>Just to give you an idea, I liked a tutorial on how you would do this with Tomcat and JDNI. (Or even better, use spring-jdbc).</p>\n\n<p><a href=\"http://www.mkyong.com/tomcat/how-to-configure-mysql-datasource-in-tomcat-6/\" rel=\"nofollow\">http://www.mkyong.com/tomcat/how-to-configure-mysql-datasource-in-tomcat-6/</a></p>\n"},{"answer_id":19849354,"body":"<p>Use dataSource as <code>&lt;javax.sql.DataSource&gt;</code> instance, rather than an instance of <code>&lt;javax.activation.DataSource&gt;</code>.</p>\n\n<p>In short, you should replace the statement <code>&lt;import javax.activation.DataSource;&gt;</code> by this other <code>&lt;import javax.sql.DataSource;&gt;</code>.</p>\n"},{"answer_id":19849413,"body":"<p>Use dataSource as javax.sql.DataSource instance, rather than an instance of javax.activation.DataSource. In short, you should replace the statement:</p>\n\n<pre><code>import javax.activation.DataSource; \n</code></pre>\n\n<p>by this other: </p>\n\n<pre><code>import javax.sql.DataSource;\n</code></pre>\n"}],"last_activity_date":1684579908,"question_id":18157290,"body":"<p>How can I fix the code below so that it does not throw an error?</p>\n<p>The following line of code is giving me a null pointer exception:</p>\n<pre><code>return dataSource.getConnection();\n</code></pre>\n<p>Note that dataSource is an instance of javax.sql.DataSource which is specified in web.xml, and which works fine when called by other code.</p>\n<p>Here is the actual method in DataAccessObject.java where the null pointer is occurring:</p>\n<pre><code>protected static Connection getConnection(){  \n  try {\n     return dataSource.getConnection();  //\n  } catch (SQLException e) {\n     throw new RuntimeException(e);\n  }\n}\n</code></pre>\n<p>The preceding method is being called by this line of code:</p>\n<pre><code>connection = getConnection();  \n</code></pre>\n<p>Which is located in the following method in a class called CourseSummaryDAO as follows:</p>\n<pre><code>public List&lt;CourseSummary&gt; findAll(Long sid) {\n    LinkedList&lt;CourseSummary&gt; coursesummaries = new LinkedList&lt;CourseSummary&gt;();\n    ResultSet rs = null;\n    PreparedStatement statement = null;\n    Connection connection = null;\n    try {\n        connection = getConnection(); //\n        String sql = &quot;select * from coursetotals where spid=?&quot;;\n        statement = connection.prepareStatement(sql);\n        statement.setLong(1, sid);\n        rs = statement.executeQuery();\n        //for every row, call read method to extract column \n        //values and place them in a coursesummary instance\n        while (rs.next()) {\n            CourseSummary coursesummary = read(&quot;findAll&quot;, rs);\n            coursesummaries.add(coursesummary);\n        }\n        return coursesummaries;\n     }catch (SQLException e) {\n        throw new RuntimeException(e);\n     } \n     finally {\n        close(rs, statement, connection);\n    }\n }  \n</code></pre>\n<p>To recreate this simply, I created the following TestCourseSummaries class:</p>\n<pre><code>public class TestCourseSummaries {\n    public static void main(String[] args) {\n    Long id = new Long(1002);\n    CourseSummaryDAO myCSDAO = new CourseSummaryDAO();\n    List&lt;CourseSummary&gt; coursesummaries = myCSDAO.findAll(id);\n    for(int i = 0;i&lt;coursesummaries.size();i++){\n    System.out.println(&quot;type, numunits are: &quot;+coursesummaries.get(i).getCourseType()+&quot;,&quot;+coursesummaries.get(i).getNumUnits());\n    }\n}\n}  \n</code></pre>\n<h2>Edit</h2>\n<p>To address JustDanyul's question, I am enclosing the code that calls in my application, and the underlying DataAccessObject code which is extended by the two DAO objects in the calling code:</p>\n<p>Here is the code in my application which triggers the error.  See there are two classes that each extended DataAccessObject.  Perhaps they are conflicting with each other, causing the second one not to get the database connection?</p>\n<pre><code>protected void doGet(HttpServletRequest req, HttpServletResponse resp) \nthrows ServletException, IOException {  \n   String idString = req.getParameter(&quot;id&quot;);\n   Long id = new Long(idString);\n   ThisObj thisobj = new ThisDAO().find(id);\n   req.setAttribute(&quot;thisobj&quot;, thisobj);\n   ThoseObjDAO myThoseDAO = new ThoseObjDAO();\n   List&lt;ThoseObj&gt; thoseobjects = myThoseObjDAO.findAll(id);\n   req.setAttribute(&quot;thoseobjects&quot;, thoseobjects);\n   jsp.forward(req, resp);\n}\n</code></pre>\n<p>And here is the code for the DataAccessObject class which is extended by the two DAO classes in the calling code:</p>\n<pre><code>public class DataAccessObject {\nprivate static DataSource dataSource;\nprivate static Object idLock = new Object();\n\npublic static void setDataSource(DataSource dataSource) {\n   DataAccessObject.dataSource = dataSource;\n}\n\nprotected static Connection getConnection() {\n   try {return dataSource.getConnection();}\n   catch (SQLException e) {throw new RuntimeException(e);}\n}\n\nprotected static void close(Statement statement, Connection connection) {\n   close(null, statement, connection);\n}\n\nprotected static void close(ResultSet rs, Statement statement, Connection connection) {\n   try {\n      if (rs != null) rs.close();\n      if (statement != null) statement.close();\n      if (connection != null) connection.close();\n   } catch (SQLException e) {throw new RuntimeException(e);}\n}\n\nprotected static Long getUniqueId() {\n   ResultSet rs = null;\n   PreparedStatement statement = null;\n   Connection connection = null;\n   try {\n      connection = getConnection();\n      synchronized (idLock) {\n         statement = connection.prepareStatement(&quot;select next_value from sequence&quot;);\n         rs = statement.executeQuery();\n         rs.first();\n         long id = rs.getLong(1);\n         statement.close();\n         statement = connection.prepareStatement(&quot;update sequence set next_value = ?&quot;);\n         statement.setLong(1, id + 1);\n         statement.executeUpdate();\n         statement.close();\n         return new Long(id);\n      }\n   }\n   catch (SQLException e) {throw new RuntimeException(e);}\n   finally{close(rs, statement, connection);}\n}\n}  \n</code></pre>\n<p>The data source is created in web.xml, as follows:</p>\n<pre><code>&lt;resource-ref&gt;\n    &lt;description&gt;dataSource&lt;/description&gt;\n    &lt;res-ref-name&gt;datasource&lt;/res-ref-name&gt;\n    &lt;res-type&gt;javax.sql.DataSource&lt;/res-type&gt;\n    &lt;res-auth&gt;Container&lt;/res-auth&gt;\n&lt;/resource-ref&gt;\n</code></pre>\n"},{"answers":[{"answer_id":57836332,"body":"<p>add below dependency:</p>\n\n<pre><code>dependencies {\n    // https://mvnrepository.com/artifact/com.google.android.material/material\n    implementation \"com.google.android.material:material:1.0.0\"\n}\n</code></pre>\n\n<p>and use <code>com.google.android.material.bottomnavigation.BottomNavigationView</code> instead</p>\n"},{"comments":[{"comment_id":102109250,"body":"same answer, please don&#39;t replicate my answer @Nidheesh"},{"comment_id":102109320,"body":"You were only mentioned the library implementation. Not the usage of bottom navigation view. The implementation already there in the gradile file."}],"answer_id":57839458,"body":"<p>You cannot mix both support and androidx libraries together in the same project, there will surely be conflicts unless you're using Jetpack tool. Migrate your support libraries to androidx </p>\n\n<p>Also References in an Androidx layout file should all be androidx artifacts and not otherwise.</p>\n\n<p>Hence tag like this:</p>\n\n<pre><code>  &lt;android.support.design.widget.BottomNavigationView\n    android:id=\"@+id/bottom_navigation\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:layout_alignParentBottom=\"true\"\n    android:background=\"@color/purpleBae\"\n    app:itemIconTint=\"@android:color/white\"\n    app:itemTextColor=\"@android:color/white\"\n    app:menu=\"@menu/home_menu\" /&gt;\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>&lt;com.google.android.material.bottomnavigation.BottomNavigationView\n  android:id=\"@+id/bottom_navigation\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:layout_alignParentBottom=\"true\"\n    android:background=\"@color/purpleBae\"\n    app:itemIconTint=\"@android:color/white\"\n    app:itemTextColor=\"@android:color/white\"\n    app:menu=\"@menu/home_menu\" /&gt;\n</code></pre>\n"}],"last_activity_date":1684579027,"question_id":57836099,"body":"<p>I'm trying to implement the method Bottom Navigation view but when i run my code i get this error</p>\n\n<p>Caused by: android.view.InflateException: Binary XML file line #19: Binary XML file line #19: Error inflating class android.support.design.widget.BottomNavigationView\n     Caused by: android.view.InflateException: Binary XML file line #19: Error inflating class android.support.design.widget.BottomNavigationView\n     Caused by: java.lang.ClassNotFoundException: Didn't find class \"android.support.design.widget.BottomNavigationView\" on path: DexPathList[</p>\n\n<p>what should i do to solve this problems?</p>\n\n<p>activity_home layout</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"@color/white\"\n    app:layout_behavior=\"android:.support.design.widget.BottomSheetBehaviour\"\n    tools:context=\".HomeActivity\"&gt;\n\n    &lt;FrameLayout\n        android:id=\"@+id/fragment_container\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:layout_above=\"@+id/bottom_navigation\"&gt;\n\n    &lt;/FrameLayout&gt;\n\n    &lt;android.support.design.widget.BottomNavigationView\n        android:id=\"@+id/bottom_navigation\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:layout_alignParentBottom=\"true\"\n        android:background=\"@color/purpleBae\"\n        app:itemIconTint=\"@android:color/white\"\n        app:itemTextColor=\"@android:color/white\"\n        app:menu=\"@menu/home_menu\" /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p>build.gradle(Module app)</p>\n\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'com.google.gms.google-services'\n\nandroid {\n    compileSdkVersion 29\n    buildToolsVersion \"29.0.2\"\n    defaultConfig {\n        applicationId \"com.example.gerobokgoapp\"\n        minSdkVersion 21\n        targetSdkVersion 29\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    packagingOptions {\n        // Exclude file to avoid\n        // Error: Duplicate files during packaging of APK\n        exclude 'META-INF/DEPENDENCIES'\n        exclude 'META-INF/LICENSE'\n        exclude 'META-INF/LICENSE.txt'\n        exclude 'META-INF/license.txt'\n        exclude 'META-INF/NOTICE'\n        exclude 'META-INF/NOTICE.txt'\n        exclude 'META-INF/notice.txt'\n        exclude 'META-INF/ASL2.0'\n        exclude 'META-INF/services/javax.annotation.processing.Processor'\n    }\n\n    compileOptions {\n        incremental true\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n\n}\n\ndependencies {\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test:runner:1.2.0'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0'\n\n\n    //add libraries\n    implementation 'androidx.appcompat:appcompat:1.1.0'\n    implementation 'com.google.android.material:material:1.0.0'\n    implementation 'com.google.android.gms:play-services-auth:17.0.0'\n    implementation 'com.google.firebase:firebase-firestore:21.0.0'\n    implementation 'com.jakewharton:butterknife:10.1.0'\n    annotationProcessor 'com.jakewharton:butterknife-compiler:10.1.0'\n    implementation 'com.facebook.android:account-kit-sdk:4.39.0'\n\n    androidTestImplementation 'androidx.test.ext:junit:1.1.1'\n    testImplementation 'androidx.test.ext:junit:1.1.1'\n}\n</code></pre>\n"},{"comments":[{"comment_id":134539901,"body":"You almost checked all options by using parameterized query as well connection pooling so there could be two more things you can check , one is just look for a right batch size by experimenting the batch size and second thing by default JDBC commit each individual statement. you can disable that auto commit and they give it a try. Thanks also you can look into this <a href=\"https://stackoverflow.com/questions/3784197/efficient-way-to-do-batch-inserts-with-jdbc\" title=\"efficient way to do batch inserts with jdbc\">stackoverflow.com/questions/3784197/&hellip;</a>"}],"last_activity_date":1684578620,"question_id":76294723,"body":"<p>I am going through this <a href=\"https://learn.microsoft.com/en-us/sql/connect/jdbc/use-bulk-copy-api-batch-insert-operation?view=sql-server-ver16\" rel=\"nofollow noreferrer\">Doc</a>, to improve the performance of my insert query in Azure SQL, it says  Bulk Copy API does not support <code>Date</code> field is there any way via which i can improve my inserts in Azure SQL. I heavy write requirements.</p>\n<p>Below is the code i am using:</p>\n<pre><code>   public void saveAllJdbc(List&lt;JdbcDetail&gt; jdbcDetails){\n\n       String sql = String.format(&quot;INSERT INTO %s  VALUES (?, ?, ?,?)&quot;, &quot;my-table&quot;);\n\n       try (Connection connection = hikariDataSource.getConnection();\n             PreparedStatement statement = connection.prepareStatement(sql);\n        ){\n            int counter = 0;\n\n            for (JdbcDetail row : jdbcDetails) {\n                statement.clearParameters();\n                statement.setInt(1, row.getQuantity());\n                statement.setDate(2, Date.valueOf(row.getDate()));\n                statement.setFloat(3, row.getId());\n                statement.setInt(4, row.getNum());\n              \n                statement.addBatch();\n                if ((counter + 1) % 10000 == 0) {\n                   statement.executeBatch();\n                  statement.clearBatch();\n                }\n\n                counter++;\n            }\n\n       } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n"},{"answers":[{"comments":[{"comment_id":10843770,"body":"ebtokyo, Thanks for your response but i would like to use scheduler clustering for several physical machines so i have to use jdbcjobstore ..."},{"comment_id":10843939,"body":"You can create many scheduler per JMV. you can have have one JDBCJobStore for clustered jobs and one RAMJobStore for local jobs."},{"comment_id":10845351,"body":"Yes,effectively i can do that. But how about performance consideration in this case ?"},{"comment_id":10845488,"body":"It should not have a hudge impact but it depends your requirements, Note that a JDBCJobStore is less performant than a RAMJobStore."}],"answer_id":8712546,"body":"<p>Volatile jobs are non-volatile in a clustered environment. In that case I would suggest to use a RAMJobStore on your scheduler.</p>\n<p>Normally you should have in your logs :</p>\n<pre><code>note: volatile triggers are effectively non-volatile in a clustered environment.\n</code></pre>\n"}],"last_activity_date":1684578532,"question_id":8712287,"body":"<p>I tested successfully for schedulers clustered with jdbcjobstore.</p>\n\n<p>But i would like to create some jobs that could be specified for some of schedulers. I thought that by setting \"isVolatile\" to \"true\" but triggers (with isVolatile=true) still be saved in database. </p>\n\n<p>Any helps could be appreciated !</p>\n\n<p>PS: i'm using Quartz 1.8 </p>\n"},{"answers":[{"answer_id":76294679,"body":"<p>According to <a href=\"https://developers.google.com/maps/documentation/navigation/android-sdk/reference/com/google/android/libraries/navigation/NavigationApi#public-static-navigationtransactionrecorder-gettransactionrecorder-application-application\" rel=\"nofollow noreferrer\">this</a>,</p>\n<blockquote>\n<p>This class should be used if and only if your company is billed by\nGoogle on a per-transaction basis.</p>\n<p>A <strong>Navigator</strong> must be successfully obtained before calling this method,\notherwise it will return <strong>null</strong>.</p>\n<p>If your project configuration prevents calling this method, it will\nreturn <strong>null</strong>.</p>\n</blockquote>\n<p>It seems like one of these reasons could be the culprit.</p>\n"}],"last_activity_date":1684578128,"question_id":76287558,"body":"<p>I am trying to integrate Google Cloud Navigation SDK for Android. Followed all steps in the documentation - <a href=\"https://developers.google.com/maps/documentation/navigation/android-sdk/billing\" rel=\"nofollow noreferrer\">https://developers.google.com/maps/documentation/navigation/android-sdk/billing</a>.\nWhen I call NavigationTransactionRecorder.pickup() method I get the NullPointerException although none of two parameters (waypoint and transaction ID) are null.</p>\n<pre><code>NavigationTransactionRecorder transactionRecorder = NavigationApi.getTransactionRecorder(getApplication());\n\n        pickUpButton.setOnClickListener(new View.OnClickListener() {\n\n                                            @Override\n                                            public void onClick(View v) {\n\n                                               \n\n        \n                                                Waypoint waypoint = Waypoint.builder().setLatLng(51.434110, -0.139030)\n                                                        .setPreferSameSideOfRoad(true)\n                                                        .setTitle(&quot;pickup waypoint&quot;)\n                                                        .build();\n                                    \n                                                \n                                                try {\n                                                    transactionRecorder.pickup(\n\n                                                            waypoint,\n                                                            Arrays.asList(NavigationTransactionRecorder.generateTransactionId()));\n\n                                                } catch (\n                                                        NavigationTransactionRecorder.TransactionException e) {\n                                                    throw new RuntimeException(e);\n                                                }\n\n                                            }\n                                        }\n        );\n\n</code></pre>\n<p>This is the error message below:</p>\n<pre><code>\n java.lang.NullPointerException: Attempt to invoke virtual method 'void com.google.android.libraries.navigation.NavigationTransactionRecorder.pickup(com.google.android.libraries.navigation.Waypoint, java.util.List)' on a null object reference\n                                                                                                        at com.example.myapplication.MainActivity$1.onClick(MainActivity.java:56)\n                                                                                                        at android.view.View.performClick(View.java:7506)\n                                                                                                        at android.view.View.performClickInternal(View.java:7483)\n                                                                                                        at android.view.View.-$$Nest$mperformClickInternal(Unknown Source:0)\n                                                                                                        at android.view.View$PerformClick.run(View.java:29334)\n                                                                                                        at android.os.Handler.handleCallback(Handler.java:942)\n                                                                                                        at android.os.Handler.dispatchMessage(Handler.java:99)\n                                                                                                        at android.os.Looper.loopOnce(Looper.java:201)\n                                                                                                        at android.os.Looper.loop(Looper.java:288)\n                                                                                                        at android.app.ActivityThread.main(ActivityThread.java:7872)\n                                                                                                        at java.lang.reflect.Method.invoke(Native Method)\n                                                                                                        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\n                                                                                                        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:936)\n</code></pre>\n<p>I checked both parameters to be null and they are not null. I keep getting this error</p>\n"},{"comments":[{"comment_id":134539720,"body":"as a first step, you need to find out: how/why <code>jpaAuditingHandler</code> is in your (test) context...and exclude it. The test (outline) &quot;looks ok&quot;/reasonable, except: the &quot;missing stubbings&quot; (Mock.when(...))"},{"comment_id":134539742,"body":"How to achieve that? Can I maybe mark that in test application.properties?"},{"comment_id":134539748,"body":"even simpler/stronger: <code>@WebMvcTest( properties = {&quot;my.foo=hello&quot;, &quot;my.bar=world&quot;} , ...</code>"},{"comment_id":134539854,"body":"That&#39;s not meaningful for me. Instead of introducing side topics help me pelase with excluding JPA from context."},{"comment_id":134540010,"body":"ok, more purposeful: how (exactly) did you enable/configure &quot;jpa auditing&quot;? (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)"},{"comment_id":134562798,"body":"You need to mock the repository layer or its behaviour to make it work, since the application context is not loaded up, the showStrategyDetails() test cannot access the files as you should expect. Ideally, you should mock the service layer and only test the code inside the controller file. Otherwise you will have to use @SpringBootTest annotation to load context and then test complete request."}],"last_activity_date":1684577714,"question_id":76294619,"body":"<p>I'm trying to write mock mvc controler test in Spring boot. I'm not able to boot test because my service: <code>StrategyService</code> which I'm going to inject in controller via <code>@MockBean</code> annotation has repository dependency <code>StrategyRepository</code>:</p>\n<pre><code>@Service\npublic class StrategyService {\n\n    private final StrategyRepository strategyRepository;\n\n    @Autowired\n    StrategyService(StrategyRepository strategyRepository) {\n        this.strategyRepository = strategyRepository;\n    }\n\n    public Map&lt;Strategy.Category, List&lt;StrategyWithoutDescriptionDTO&gt;&gt; getStrategiesGroupedByCategories() {\n        List&lt;StrategyWithoutDescriptionDTO&gt; strategies = strategyRepository.getStrategiesWithoutDescription();\n        return strategies\n                .stream()\n                .collect(Collectors.groupingBy(StrategyWithoutDescriptionDTO::getCategory));\n    }\n\n    public List&lt;Strategy&gt; getStrategies() {\n        return StreamSupport.stream(strategyRepository.findAll().spliterator(), false).toList();\n    }\n\n    public boolean saveStrategy(Strategy strategy) {\n        strategyRepository.save(strategy);\n        return true;\n    }\n}\n</code></pre>\n<p>Tests code looks like:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\n@WebMvcTest(StrategyController.class)\nclass StrategyControllerTest {\n\n    @MockBean\n    private StrategyService strategyService;\n\n    @Autowired\n    MockMvc mockMvc;\n\n    @Test\n    void showStrategyDetails() throws Exception {\n        long strategyId = 2L;\n        mockMvc\n                .perform(get(&quot;showStrategyDetails/{strategyId}&quot;, strategyId))\n                .andExpect(\n                        status().isOk()\n                );\n    }\n}\n</code></pre>\n<p>Error in console:</p>\n<pre><code>Error creating bean with name 'jpaAuditingHandler': Cannot resolve reference to bean 'jpaMappingContext' while setting constructor argument\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:377)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:135)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:691)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:515)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1324)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1161)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\n    at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)\n    at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)\n    at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)\n    at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)\n    at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)\n    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)\n    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:184)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:118)\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)\n    at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:110)\n    at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:94)\n    at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:61)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)\n    at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\n    at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\n    at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\n    at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)\n    at java.base/java.util.Optional.orElseGet(Optional.java:364)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)\n    at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'jpaMappingContext': JPA metamodel must not be empty\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:365)\n    ... 99 common frames omitted\nCaused by: java.lang.IllegalArgumentException: JPA metamodel must not be empty\n    at org.springframework.util.Assert.notEmpty(Assert.java:479)\n    at org.springframework.data.jpa.mapping.JpaMetamodelMappingContext.&lt;init&gt;(JpaMetamodelMappingContext.java:58)\n    at org.springframework.data.jpa.repository.config.JpaMetamodelMappingContextFactoryBean.createInstance(JpaMetamodelMappingContextFactoryBean.java:68)\n    at org.springframework.data.jpa.repository.config.JpaMetamodelMappingContextFactoryBean.createInstance(JpaMetamodelMappingContextFactoryBean.java:44)\n    at org.springframework.beans.factory.config.AbstractFactoryBean.afterPropertiesSet(AbstractFactoryBean.java:142)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747)\n    ... 106 common frames omitted\n</code></pre>\n<p>How can I properly inject <code>StrategyRepository</code> as a mock in this test so that it would behave as a mock?</p>\n"},{"comments":[{"comment_id":54844603,"body":"Is your project gradle or maven based?"}],"answers":[{"answer_id":33531618,"body":"<p>You should mark this folder as <code>source</code> directory in project settings or with right-click on folder.</p>\n"},{"comments":[{"comment_id":77723513,"body":"<code>File &gt; New &gt; Module From Existing Sources...</code> might be a better choice in this case (since these actually seem to be different modules of the same root project): <a href=\"https://www.jetbrains.com/help/idea/creating-a-module-by-importing-existing-sources.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/&hellip;</a>"}],"answer_id":33531901,"body":"<p>There are a few ways to handle this. If your project has an existing build framework such as gradle, maven, etc, generally you can navigate to</p>\n\n<p><code>File &gt; New &gt; Project From Existing Sources...</code></p>\n\n<p>And then navigate to the gradle.build, pom.xml, or other framework specific build. When this project is created, all of the necessary source files should be properly identified.</p>\n\n<p>Alternatively, you can also manually set the source directories by selecting the directory in the Project window, right clicking and selecting <code>Mark Directory As &gt; Sources Root</code>.</p>\n\n<p>See also:</p>\n\n<ul>\n<li><a href=\"https://www.jetbrains.com/idea/help/importing-project-from-maven-model.html\" rel=\"noreferrer\">Importing Project from Maven Model</a></li>\n<li><a href=\"https://www.jetbrains.com/idea/help/importing-project-from-gradle-model.html\" rel=\"noreferrer\">Importing Project from Gradle Model</a></li>\n<li><a href=\"https://www.jetbrains.com/idea/help/configuring-content-roots.html\" rel=\"noreferrer\">Configuring Content Roots</a></li>\n</ul>\n"},{"comments":[{"comment_id":102552330,"body":"@VikrantGoel looks like this should be separate answer, not the comment"},{"comment_id":102552375,"body":"it&#39;s <code>Add as Maven Project</code> now (IntelliJ 2019.2)"}],"answer_id":43860446,"body":"<p>If you get the directory from some version system and it has a maven <code>pom.xml</code> configuration file, here's a solution:</p>\n\n<ul>\n<li><p>Find the <code>pom.xml</code> in the directory.</p></li>\n<li><p>Right click the <code>pom.xml</code>.</p></li>\n<li><p>Then you can see the popup windows. Select the last item <code>\"add as maven project file\"</code>.</p></li>\n<li><p>Then, the maven build tool can automatically discern the directory as an module and import the specified jar dependencies.</p></li>\n</ul>\n"},{"answer_id":68285859,"body":"<p>I've just faced similar problem. I had no recognition of modules in Intellij Idea after I pushed new modules to github repository, and then tried to pull changes on another computer (where old version of project already exists, but without modules). And nothing helped (manual marking of source roots and manual import of modules) except competely removing the old version and cloning it again from repository.\nAfter fresh cloning, all the modules are recognized correctly.\nMay be solution with maven's pom.xml also a good idea.</p>\n"},{"answer_id":76294627,"body":"<p>In case of project Jigsaw Java modules (I copied and pasted the other module), removing <code>.idea</code> directory and opening the project again did the trick.</p>\n"}],"last_activity_date":1684577365,"question_id":33531334,"body":"<p>I recently switched to using IntelliJ. I manually imported some projects and I guess I didn't do it correctly. They are all supposed to be java modules but they are just regular directory folders. Is there a way to convert them to java modules so I can run the programs or will I have to manually recreate new modules?</p>\n\n<p><a href=\"https://i.stack.imgur.com/zD2Re.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/zD2Re.png\" alt=\"enter image description here\"></a></p>\n"},{"comments":[{"comment_id":134527839,"body":"Can you please clarify how the hash map would relate to the attributes in school, and what you try to achieve with a hash map of hasmaps ?  Because it is not clear if one of the hasp would correspond to an intermediary classe that is really needed or if it&#39;s just a solution to implement a more complex association."},{"comment_id":134528575,"body":"No. There is no nesting."},{"comment_id":134528632,"body":"What do you mean by nesting? The config property must be a struct like a Hashmap&lt;String, String&gt; (Java) or dict[str, str] (Python) and the students object must be a Hashmap&lt;String, Hasmap&lt;String, String&gt;&gt; (Java) or in Python dict[str, dict[str, str]] for instance. How to represent this structure (data types of the properties) using an uml class diagram?"},{"comment_id":134530015,"body":"A hash in a hash is a nesting and your diagram does not show any. Besides you have two times <code>M</code> which is ambiguous/wrong."},{"comment_id":134530152,"body":"I&#39;ve two times M because there is a class M and a class M2D which are used both. M2D maps a key of type String to M. M maps a key of type String to a String. Why there is no nesting? In my understanding M2D represents Hashmap&lt;String, Hashmap&lt;String, String&gt;&gt;(Java Implemention) since M represents Hashmap&lt;String String&gt;."},{"comment_id":134539374,"body":"@Sven I&#39;ve edited your question to bring in your comments.  With that we should be able to answer.  Keep in mind please for future question, that not everybody reads the comments and when critical information is missing in the question body,  there&#39;s a tendency to close-vote (already 2 close-votes before my edit)."}],"answers":[{"answer_id":76294354,"body":"<h3>What's the problem?</h3>\n<p>Reading your additional explanation in the comments, I understand that you try to have a very dynamic implementation, with a school having several dynamic configuration parameters, and students represented by a set of dynamic properties:</p>\n<ul>\n<li>In your implementation, these dynamic structures are easily and efficiently dealt with as hashmaps.</li>\n<li>However, in practice, one gets quickly lost by what is which hash map supposed to represent.  Now you're comfortable with it, but if you do another project and come back in 6 months you will understand what I mean.</li>\n</ul>\n<p>The problem that you face in the modelling is that UML aims to help you provide clarity on your design, and not to visually program what's already in the code.</p>\n<h3>How to solve it?</h3>\n<p>I understand that the <code>config</code> in your <code>School</code> is in fact a set of config parameters, each identified by a unique key for a given school:</p>\n<blockquote>\n<p>The config property must be a struct like a Hashmap&lt;String, String&gt; (Java) or dict[str, str] (Python)</p>\n</blockquote>\n<p>There are two approaches, both with config removed from the school attributes:</p>\n<ul>\n<li><p>use a qualifier (the small rectangle with a qualifier attribute <code>Key:String</code>) directly for the <code>School</code>, and associate it with a <code>String</code>,  or better with a <code>ConfigurationParameter</code> which would be a string, but could evolve into something more complex later.  This would be very close to your implementation.</p>\n</li>\n<li><p>abstract from the way you implemented your configuration, and associate one school to many <code>ConfigurationElements</code>, which would be a class with a property <code>key</code>, and a property <code>parameter</code> both being strings.  This would allow other implementations as just the <code>Hashmap</code>.</p>\n</li>\n</ul>\n<p>For the more complex <code>Hashmap&lt;String, Hasmap&lt;String, String&gt;&gt;</code>, it's more challenging:</p>\n<blockquote>\n<p>the students object must be a Hashmap&lt;String, Hasmap&lt;String, String&gt;&gt; (Java) or in Python dict[str, dict[str, str]] for instance.</p>\n</blockquote>\n<p>First of all, I see a <code>School</code> class and no <code>Student</code> class. But I see that you use a <code>students</code> property and note the plural. And you use a type M2D which we see you try to associate with a qualifier to something. So I think that your design forgets to show the design intent.  If the school has many students, then associate your school with a <code>Student</code> class.  Again:</p>\n<ul>\n<li>you could use a qualified association (e.g. if a student ID allows to find exactly one student for a school).  I'll use this in my diagram</li>\n<li>or you coud use a simple one to many association. This seems a better approach if the school acts as a kind of repository for the students, and if beyond a <code>getSudentdById(...):Student</code> you'd also want dome more creative queries, e.g. <code>getStudentsByAge(...):Student[*]</code></li>\n</ul>\n<p>Now, if your <code>Student</code> is implemented as a set of pair values (e.g. you don't want properties of a student to be fixed,  but dynamic),  then associate the <code>Student</code> with a qualifier to the <code>StudentAttribute</code> class which is a string.</p>\n<p>The advantage is that this modelling makes the navigation in the <code>Hashmap&lt;String, Hasmap&lt;String, String&gt;&gt;</code> much clearer:  the first string gives a student,  the second string gives an attribute of a student which is a string.\n<a href=\"https://i.stack.imgur.com/me1YM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/me1YM.png\" alt=\"enter image description here\" /></a>\nOf course, you could remove the intermediates and associated directly to string, like the hashmap do,  but then you should at least add a comment to explain what the association with String is supposed to convey as information.</p>\n"}],"last_activity_date":1684576289,"question_id":76287060,"body":"<p>I'm new to UML.  Does this class diagram represent correctly a <code>Hashmap&lt;String, Hashmap&lt;String, String&gt;&gt;</code> structure?</p>\n<p><a href=\"https://i.stack.imgur.com/nX5UL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nX5UL.png\" alt=\"enter image description here\" /></a></p>\n<p>More precisely, the config property must be a struct like a <code>Hashmap&lt;String, String&gt;</code> (Java) or <code>dict[str, str]</code> (Python) and the <code>students</code> object must be a <code>Hashmap&lt;String, Hasmap&lt;String, String&gt;&gt;</code> (Java) or in Python <code>dict[str, dict[str, str]]</code> for instance. How to represent this structure (data types of the properties) using an uml class diagram?</p>\n<p>What I tried to do in my diagram:  I've two times <code>M</code> because there is a class <code>M</code> and a class <code>M2D</code> which are used both. <code>M2D</code> maps a key of type <code>String</code> to <code>M</code>. <code>M</code> maps a key of type <code>String</code> to a <code>String</code>. In my understanding <code>M2D</code> represents <code>Hashmap&lt;String, Hashmap&lt;String, String&gt;&gt;</code>(Java Implemention) since <code>M</code> represents <code>Hashmap&lt;String String&gt;</code>.</p>\n"},{"comments":[{"comment_id":85608000,"body":"I suggest you use a different image to show what you want actually showing what part of your data is different. Right now its just two times the exact same thing."},{"comment_id":85608353,"body":"what i want is like the push() with different keys, but pushing different card numbers and different offers inside each card number"},{"comment_id":85608862,"body":"Why are you not using push() method?"},{"comment_id":85608878,"body":"because i dont need random keys, i just want that keys to be the different card numbers and offers inside each card"},{"comment_id":85608966,"body":"i mean push works to push different cards, but i need to asign that each card is a key for the push, otherwise it will replace the actual cards inside the database"}],"answers":[{"comments":[{"comment_id":85609265,"body":"Thanks so much frank ! it worked like i want ! , now, if i dont want to see the true when i create the ofert1 , is there a way to not have it and just the ofert ? thanks so much !"},{"comment_id":85609344,"body":"Also , when i put the same card number but different offer, the offer is replaced by the new one instead of keep adding it"},{"comment_id":85612142,"body":"There is no way to keep a key without a value in the Firebase Database, same as that isn&#39;t possible in JSON. Just consider the <code>true</code> a marker value, something needed to make it valid. Whatever you do, <b>don&#39;t</b> change the structure to array. While visually that may look closer that what you want, it&#39;s the wrong data structure for what is essentially a mathematical set. For more on that, see my answer <a href=\"https://stackoverflow.com/q/40656589\">here</a>."},{"comment_id":85612678,"body":"Thanks Frank, but let&#39;s say I want to add multiple keys inside the card number without being replaced , is that the same thing as doing the first map for the card numbers ? Or I need to do another step with the map in order to accomplish that"},{"comment_id":85612719,"body":"I need to add multiple offers inside the card number without being replaced"},{"comment_id":85612872,"body":"I&#39;m doing this in order to let my client see and understand the database because he dosnt want an administrator for his app , I told him to do a firebase recycler adapter in order to view the data structured, but he told me that he wants to see the data from the browser, so I&#39;m trying to structure the data in a way he can read it without navigate too much into the database, let&#39;s say I want to make this database easy to read for people that never peogrammed"},{"comment_id":85613016,"body":"I added some more examples for updating. On your latest comment: never trade a proper data model for one that is easier to read for somebody else. If needed consider making a simple web admin page that shows the data in the format your client needs."}],"answer_id":49303552,"body":"<p>I think you're asking for this:</p>\n\n<pre><code>Map mOffers= new HashMap();\nmOffers.put(\"ofert1\", true);\nmOffers.put(\"ofert2\", true);\nMap mCardNumbers= new HashMap();\nmCardNumbers.put(\"45672224\", mOffers);\n\nmDatabase.child(\"Locales\").child(uid).setValue(mCardNumbers);\n</code></pre>\n\n<p>Or more directly:</p>\n\n<pre><code>Map mOffers= new HashMap();\nmOffers.put(\"ofert1\", true);\nmOffers.put(\"ofert2\", true);\nmDatabase.child(\"Locales\").child(uid).child(\"45672224\").setValue(mOffers);\n</code></pre>\n\n<p>If you want to add an existing item to the offers, you can call <code>setValue</code> on that specific path:</p>\n\n<pre><code>mDatabase.child(\"Locales\").child(uid).child(\"45672224/ofert3\").setValue(true);\n</code></pre>\n\n<p>If you want to add/change/remove multiple child nodes, but leave others unmodified, user <code>updateChildren()</code>. For example, this adds <code>ofert3</code> and removes <code>ofert2</code>:</p>\n\n<pre><code>Map mOffers= new HashMap();\nmOffers.put(\"ofert3\", true);\nmOffers.put(\"ofert2\", null);\nmDatabase.child(\"Locales\").child(uid).child(\"45672224\").updateChildren(mOffers);\n</code></pre>\n\n<p>Note that this point I'm repeating much of what is explained in the Firebase documentation on <a href=\"https://firebase.google.com/docs/database/android/read-and-write\" rel=\"nofollow noreferrer\">reading and writing data</a> and <a href=\"https://firebase.google.com/docs/database/android/lists-of-data\" rel=\"nofollow noreferrer\">working with lists of data</a>, so I recommend spending some time on those pages.</p>\n"}],"last_activity_date":1684576016,"question_id":49302976,"body":"<p>I'm struggling with a simple thing. I need to push different card numbers into Firebase database, each card number have their own offer, so I need to push different offers to the same card. This is done by using a <code>HashMap()</code>, so, what I want is to be able to add different card numbers as different keys, and inside those card numbers different offers as different keys without overriding it.</p>\n<p>For now this is what I have and what I want. The offers inside each card should be different, lets say ofert1, ofert2 and so on, and the card numbers also. If I add the same card number to the editText I use to pass the data it should go to the same card and be able to create offers inside that card.</p>\n<p><a href=\"https://i.stack.imgur.com/Lu5NJ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lu5NJ.jpg\" alt=\"Database Structure\" /></a></p>\n<p>The problem is if I continue adding data the old data get replaced with the new one, I just want to be able to still adding different card numbers with different offers inside the same card.</p>\n<p>What I have done is this</p>\n<pre><code> Map mOffers= new HashMap();\n             mOffers.put(&quot;codigo_oferta&quot;,mStringCodigoOferta);\n Map mCardNumbers= new HashMap();\n             mCardNumbers.put(mStringTarjeta, mOffers);\n                 mDatabase.child(&quot;Locales&quot;).child(uid).setValue(mCardNumbers);\n</code></pre>\n<h2>Updates</h2>\n<p>What I want is like the push() with different keys, but pushing different card numbers and different offers inside each card number.</p>\n<p>Also, if I add <code>push()</code> to the reference it will push different cards, but with a random key, and I don't want it, I want the card to be the different keys that stores different offers.</p>\n<p><a href=\"https://i.stack.imgur.com/w7gvl.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/w7gvl.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Edit 2: now it's working like Frank's answer, but instead of keep adding offers I'm getting them replaced.</p>\n<p><a href=\"https://i.stack.imgur.com/gpFAa.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gpFAa.jpg\" alt=\"Structure\" /></a></p>\n"},{"comments":[{"comment_id":134551621,"body":"I can&#39;t help yet as I&#39;m in the same boat. I&#39;m running Android Studio Flamingo with gradle 8.0 and my understanding is that I&#39;m supposed to use JDK 17."}],"last_activity_date":1684575673,"question_id":76294240,"body":"<p>I'm trying to run and build my project and I keep having this error.</p>\n<h2>Build Output</h2>\n<p><code>&gt; Task :app:kaptMyAppQaKotlin FAILED Execution failed for task ':app:kaptMyAppQaKotlin'. &gt; A failure occurred while executing org.jetbrains.kotlin.gradle.internal.KaptWithoutKotlincTask$KaptExecutionWorkAction &gt; java.lang.reflect.InvocationTargetException (no error message)</code></p>\n<h2>Using (./gradlew assemble --stacktrace --warning-mode all)</h2>\n<blockquote>\n<p>Task :app:kaptMyAppDebugKotlin\n/Users/MyUser/Documents/Projects/Kotlin/MyApp-android/MyApp/app/build/tmp/kapt3/stubs/MyAppDebug/com/MyApp/charts/ChartActivity.java:193: error: incompatible types: NonExistentClass cannot be converted to Annotation\nprivate final void showChartError(@error.NonExistentClass\n^</p>\n</blockquote>\n<blockquote>\n<p>Task :app:kaptMyAppDebugKotlin FAILED</p>\n</blockquote>\n<p>FAILURE: Build failed with an exception.</p>\n<ul>\n<li>What went wrong:\nExecution failed for task ':app:kaptMyAppDebugKotlin'.</li>\n</ul>\n<blockquote>\n<p>A failure occurred while executing org.jetbrains.kotlin.gradle.internal.KaptWithoutKotlincTask$KaptExecutionWorkAction\njava.lang.reflect.InvocationTargetException (no error message)</p>\n</blockquote>\n<p>Here's my ff files.</p>\n<h1>build.gradle (MyApp)</h1>\n<pre><code>Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    ext.kotlin_version = '1.7.10'\n    repositories {\n        google()\n        mavenCentral()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:7.2.2'\n        classpath 'me.tatarka:gradle-retrolambda:3.3.1'\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n        classpath 'com.google.gms:google-services:4.3.15'\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        mavenCentral()\n        maven { url 'https://oss.sonatype.org/content/repositories/snapshots' }\n    }\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<h1>build.gradle (:app)</h1>\n<pre><code>import java.util.regex.Matcher\nimport java.util.regex.Pattern\n\napply plugin: 'com.android.application'\napply plugin: 'kotlin-android'\napply plugin: 'com.google.gms.google-services'\napply plugin: 'kotlin-parcelize'\napply plugin: 'kotlin-kapt'\n\ntask aaaprintVar {\n    doLast {\n        println System.getenv('HOME')\n        println System.getenv('ANDROID_KEY_ALIAS')\n        println project.property(&quot;BUILD_NUMBER_TAG&quot;)\n    }\n}\n\n/* AutoVersion Helpers */\ndef autoVersion_props = new Properties()\ndef folder = new File(&quot;$project.rootDir/scripts&quot;)\nif (!folder.exists()) {\n    // Create all folders up-to and including B\n    folder.mkdirs()\n}\nnew File(folder, &quot;autoVersion.properties&quot;).withWriterAppend { w -&gt;\n    w &lt;&lt; &quot;&quot;\n}\n\ndef autoPropsFile = new File(folder, &quot;autoVersion.properties&quot;)\nautoPropsFile.withInputStream { autoVersion_props.load(it) }\n\ndef readVersionCode = { -&gt;\n    def versionCodeString = autoVersion_props.getProperty(&quot;gitCommitCount&quot;) ?: &quot;0&quot;\n    return Integer.parseInt(versionCodeString)\n}\n/* End AutoVersion Helpers */\n\nandroid {\n    def readVersionName = { -&gt;\n        def versionName = autoVersion_props.getProperty(&quot;gitVersionTagNumber&quot;) ?: &quot;0.0.0&quot;\n        return versionName\n    }\n\n    def getApplicationIdSuffix = { -&gt;\n        return readVersionName() + '-' + readVersionCode() + '+' + gitShortHash()\n    }\n\n    def getMyApplicationIdSuffix = { -&gt;\n        println(&quot;getMyApplicationIddSuffix&quot;)\n        return readVersionName() + '-' + readVersionCode() + '+' + gitShortHash()\n    }\n\n    def gitPrefix = 'asdf'\n    // ...\n    ndkVersion &quot;21.4.7075529&quot; // or &quot;22.1.7171670&quot;\n    // ...\n    compileSdkVersion 31\n    buildToolsVersion '31.0.0'\n    defaultConfig {\n        applicationId &quot;com&quot;\n        minSdkVersion 26\n        targetSdkVersion 31\n        buildConfigField &quot;String&quot;, &quot;GIT_COMMIT_HASH&quot;, &quot;\\&quot;&quot; + gitCommitHash() + &quot;\\&quot;&quot;\n        println &quot;VersionCode: &quot; + readVersionCode()\n        versionCode readVersionCode()\n        javaCompileOptions {\n            annotationProcessorOptions {\n                arguments = [&quot;room.schemaLocation&quot;:\n                                     &quot;$projectDir/schemas&quot;.toString()]\n            }\n        }\n        testInstrumentationRunner 'androidx.test.runner.AndroidJUnitRunner'\n    }\n    buildFeatures {\n        viewBinding = true\n        dataBinding = true\n    }\n    packagingOptions {\n        exclude(&quot;**/libshinobicharts-android.so&quot;)\n    }\n    flavorDimensions &quot;base&quot;\n    productFlavors {\n        myapp {\n            dimension &quot;base&quot;\n            applicationId 'com.telvent.prophetx'\n            versionName readVersionName()\n            setProperty(&quot;archivesBaseName&quot;, getMyApplicationIdSuffix())\n            buildConfigField('String', 'HOCKEYAPP_SDK_APP_ID', &quot;\\&quot;750acaf49a6a418abdc3d8e36e1d1b83\\&quot;&quot;)\n            manifestPlaceholders = [HOCKEYAPP_APP_ID: &quot;750acaf49a6a418abdc3d8e36e1d1b83&quot;]\n        }\n        myappinstant {\n            dimension &quot;base&quot;\n            applicationId 'com.myapp.instant'\n            versionName = readVersionName()\n            setProperty(&quot;archivesBaseName&quot;, getMyInstantApplicationIdSuffix())\n            buildConfigField('String', 'HOCKEYAPP_SDK_APP_ID', &quot;\\&quot;8ee7b2f987d9402c86c0c96dfff52306\\&quot;&quot;)\n            manifestPlaceholders = [HOCKEYAPP_APP_ID: &quot;8ee7b2f987d9402c86c0c96dfff52306&quot;]\n        }\n    }\n\n    def getCurrentFlavor = {\n        Gradle gradle = getGradle()\n        String tskReqStr = gradle.getStartParameter().getTaskRequests().toString()\n\n        Pattern pattern\n\n        if (tskReqStr.contains(&quot;assemble&quot;))\n            pattern = Pattern.compile(&quot;assemble(\\\\w+)(Release|Debug)&quot;)\n        else\n            pattern = Pattern.compile(&quot;generate(\\\\w+)(Release|Debug)&quot;)\n\n        Matcher matcher = pattern.matcher(tskReqStr)\n\n        if (matcher.find())\n            return matcher.group(1).toLowerCase() + '-'\n        else {\n            println &quot;NO MATCH FOUND&quot;\n            return &quot;&quot;\n        }\n    }\n\n    def runAutoVersion = { -&gt;\n        try {\n            def stdout = new ByteArrayOutputStream()\n            exec {\n                if (System.getProperty('os.name').toLowerCase().contains('windows')) {\n                    commandLine 'cmd', &quot;$rootProject.projectDir/scripts/auto-version.sh&quot;\n                } else {\n                    commandLine &quot;$rootProject.projectDir/scripts/auto-version.sh&quot;\n                }\n                args = [getCurrentFlavor()]\n                standardOutput = stdout\n            }\n            return stdout.toString().trim()\n        }\n        catch (error) {\n            println 'Error: ' + error\n            return null\n        }\n    }\n\n\n    preBuild.doFirst {\n        println &quot;PreBuild&quot;\n        println &quot;Running auto-version.sh&quot;\n        println runAutoVersion()\n        project.task(&quot;printProps&quot;)\n    }\n\n    task autoVersion {\n        doLast {\n            println &quot;PreBuild&quot;\n            println &quot;Running auto-version.sh&quot;\n            println runAutoVersion()\n            println &quot;Finished running auto-version.sh&quot;\n            project.task(&quot;printProps&quot;)\n        }\n    }\n\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n    kotlinOptions {\n        jvmTarget = '1.8'\n    }\n\n\n    def code_sign_props = new Properties()\n    def code_sign_file = new File(&quot;$rootProject.projectDir/secrets/code_sign.properties&quot;)\n    def codeSignFile = code_sign_file.exists() ? code_sign_file : file(&quot;$rootProject.projectDir/secrets/default_code_sign.properties&quot;)\n    println(&quot;CodeSignFile: &quot; + codeSignFile)\n    codeSignFile.withInputStream { code_sign_props.load(it) }\n    def keystoreFile = new File(&quot;$rootProject.projectDir/secrets/upload.jks&quot;)\n    def releaseKeyStoreFile = keystoreFile.exists() ? keystoreFile : file(&quot;$rootProject.projectDir/../ProjectSetup/qa.keystore&quot;)\n    println(&quot;releaseKeyStoreFile: &quot; + releaseKeyStoreFile)\n    signingConfigs {\n        debug {\n            storeFile releaseKeyStoreFile\n            storePassword 'android'\n            keyAlias 'androiddebugkey'\n            keyPassword 'android'\n        }\n        qa {\n            storeFile releaseKeyStoreFile\n            storePassword 'android'\n            keyAlias 'androiddebugkey'\n            keyPassword 'android'\n        }\n        release {\n            storeFile releaseKeyStoreFile\n            storePassword code_sign_props.getProperty(&quot;ANDROID_KEY_STORE_PASSWORD&quot;) ?: 'android'\n            keyAlias code_sign_props.getProperty(&quot;ANDROID_KEY_ALIAS&quot;) ?: 'androiddebugkey'\n            keyPassword code_sign_props.getProperty(&quot;ANDROID_KEY_PASSWORD&quot;) ?: 'android'\n        }\n    }\n\n    buildTypes {\n        debug {\n            minifyEnabled false\n            signingConfig signingConfigs.debug\n            debuggable true\n\n        }\n        qa {\n            minifyEnabled false\n            signingConfig signingConfigs.qa\n            debuggable true\n\n        }\n        release {\n            buildConfigField &quot;Boolean&quot;, &quot;RELEASE_TYPE&quot;, &quot;true&quot;\n            buildConfigField &quot;Boolean&quot;, &quot;ENABLE_DEVICE_ID_CHANGE&quot;, &quot;false&quot;\n\n            debuggable false\n            minifyEnabled false\n            //proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n\n            signingConfig signingConfigs.release\n        }\n\n    }\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n    testOptions {\n        unitTests.returnDefaultValues = true\n    }\n\n}\n\ndef gitBranch() {\n    def branch = &quot;&quot;\n    def proc = &quot;git rev-parse --abbrev-ref HEAD&quot;.execute()\n    proc.in.eachLine { line -&gt; branch = line }\n    proc.err.eachLine { line -&gt; println line }\n    proc.waitFor()\n    branch\n}\n\ndef gitShortHash() {\n    def hash = &quot;&quot;\n    def proc = &quot;git rev-parse --short HEAD&quot;.execute()\n    proc.in.eachLine { line -&gt; hash = line }\n    proc.err.eachLine { line -&gt; println line }\n    proc.waitFor()\n    hash\n}\n\ndef gitCommitHash() {\n    def hash = &quot;&quot;\n    def proc = &quot;git rev-parse HEAD&quot;.execute()\n    proc.in.eachLine { line -&gt; hash = line }\n    proc.err.eachLine { line -&gt; println line }\n    proc.waitFor()\n    hash\n}\n\ndependencies {\n    def butterknife_version = &quot;10.2.3&quot;\n    def retrofit_version = &quot;2.3.0&quot;\n    def okhttp_version = &quot;3.9.0&quot;\n    def dagger_version = &quot;2.38.1&quot;\n    def hockeyapp_android_sdk_version = &quot;4.1.4&quot;\n    def socket_library_version = &quot;2.3&quot;\n\n    implementation fileTree(include: ['*.jar'], dir: 'libs')\n    implementation 'androidx.appcompat:appcompat:1.4.0'\n    implementation 'androidx.recyclerview:recyclerview:1.3.0-alpha02'\n    implementation 'com.google.android.material:material:1.5.0'\n    implementation 'androidx.browser:browser:1.0.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.2.0-alpha04'\n    implementation &quot;com.jakewharton:butterknife:$butterknife_version&quot;\n    kapt &quot;com.jakewharton:butterknife-compiler:$butterknife_version&quot;\n    implementation &quot;net.danlew:android.joda:2.9.9&quot;\n    implementation 'androidx.room:room-runtime:2.4.0'\n    kapt 'androidx.room:room-compiler:2.4.0'\n    implementation &quot;androidx.lifecycle:lifecycle-extensions:2.2.0&quot;\n    implementation &quot;androidx.lifecycle:lifecycle-viewmodel-ktx:2.4.0&quot;\n    implementation 'androidx.lifecycle:lifecycle-common-java8:2.4.0'\n    implementation &quot;androidx.lifecycle:lifecycle-runtime-ktx:2.4.0&quot;\n    implementation &quot;com.squareup.retrofit2:retrofit:$retrofit_version&quot;\n    implementation &quot;com.squareup.retrofit2:converter-gson:$retrofit_version&quot;\n    implementation &quot;com.squareup.okhttp3:okhttp:$okhttp_version&quot;\n    implementation &quot;com.squareup.okhttp3:logging-interceptor:$okhttp_version&quot;\n    implementation &quot;com.google.dagger:dagger:$dagger_version&quot;\n    kapt &quot;com.google.dagger:dagger-compiler:$dagger_version&quot;\n    implementation project(':shinobicontrols-android-charts-premium-java-1.9.3-1')\n    implementation &quot;net.hockeyapp.android:HockeySDK:$hockeyapp_android_sdk_version&quot;\n    implementation 'com.google.android.gms:play-services-auth:16.0.1'\n    implementation &quot;com.google.android.gms:play-services-drive:16.0.0&quot;\n    implementation &quot;com.neovisionaries:nv-websocket-client:$socket_library_version&quot;\n    implementation &quot;com.google.android.gms:play-services-analytics:16.0.6&quot;\n    implementation 'com.google.firebase:firebase-core:16.0.6'\n\n    /* Tests */\n    implementation fileTree(include: ['*.jar'], dir: 'libs')\n    androidTestImplementation('androidx.test.espresso:espresso-core:3.5.1', {\n        exclude group: 'androidx', module: 'support-annotations'\n    })\n    testImplementation 'junit:junit:4.13.2'\n    testImplementation &quot;com.nhaarman.mockitokotlin2:mockito-kotlin:2.0.0-RC1&quot;\n    testImplementation 'androidx.arch.core:core-testing:2.0.0'\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\n    implementation &quot;org.jetbrains.kotlin:kotlin-reflect:$kotlin_version&quot;\n}\n\nrepositories {\n    mavenCentral()\n}\n</code></pre>\n<h1>gradle-wrapper.properties</h1>\n<p><code>distributionBase=GRADLE_USER_HOME distributionPath=wrapper/dists distributionUrl=https\\://services.gradle.org/distributions/gradle-7.3.3-bin.zip zipStoreBase=GRADLE_USER_HOME zipStorePath=wrapper/dists</code></p>\n<p>I already tried using JDK 20 but error still persist.</p>\n"},{"comments":[{"comment_id":134540231,"body":"Please try to run it on <b>Postman</b> first, If NULL still there then your server has some problem, and you need to corporate with your team  to see if this service need any more QUERY or PARAMS.. etc"},{"comment_id":134540300,"body":"Mention the error message so that we can help you."}],"last_activity_date":1684575334,"question_id":76294472,"body":"<p>Here is my code, what am I doing wrong?</p>\n<p>DeviceFetcher.java</p>\n<pre><code>public class DeviceFetcher extends AppCompatActivity {\n\n    private static final String BASE_URL = &quot;https://base-url/&quot;;\n \n    public static void fetchDevices() {\n\n        Retrofit retrofit = new Retrofit.Builder()\n                .baseUrl(BASE_URL)\n                .addConverterFactory(GsonConverterFactory.create())\n                .build();\n\n        String token = SplashScreen.getTOKEN();\n        ApiService apiService = retrofit.create(ApiService.class);\n\n        Call&lt;DeviceResponse&gt; call = apiService.getDevices(&quot;jwt&quot; + token);\n        call.enqueue(new Callback&lt;DeviceResponse&gt;() {\n            @Override\n            public void onResponse(Call&lt;DeviceResponse&gt; call, Response&lt;DeviceResponse&gt; response) {\n                Log.e(&quot;DEVICEFETCHER&quot;, &quot;Response: &quot; + response.body());\n                if (response.isSuccessful()) {\n                    DeviceResponse responseData = response.body();\n                    if (responseData != null) {\n                    }\n                } else {\n                    System.out.println(&quot;NO RESPONSE = NULL&quot;);\n                    // Handle API error\n                }\n            }\n\n            @Override\n            public void onFailure(Call&lt;DeviceResponse&gt; call, Throwable t) {\n                Log.e(&quot;DEVICEFETCHER&quot;, &quot;Error: &quot; + t.getLocalizedMessage());\n              \n            }\n        });\n    }\n}\n</code></pre>\n<p>ApiService.java</p>\n<pre><code>public interface ApiService {\n    String BASE_URL = &quot;https://base-url/&quot;;\n    String accessToken = SplashScreen.getTOKEN();\n    @GET(&quot;devices&quot;)\n    Call&lt;DeviceResponse&gt; getDevices(@Header(&quot;Authorization&quot;) String authHeader);\n}\n</code></pre>\n<p>I am not getting any response from the above calls, it shows response as NULL. What am I doing wrong? Please help.</p>\n"},{"last_activity_date":1684574529,"question_id":75499834,"body":"<p>I already have a reactive stream that does the following :</p>\n<p>1.Retrieve a list of object Ids by calling another REST API</p>\n<p>2.Retrieve a list of events for each object id by calling another REST API</p>\n<p>3.Return a Mono list combining both of above responses</p>\n<p>My new requirement is to integrate another web request which have to use the above combined response from two API calls.\nSo new call will have to use existing data to build the request body.\nMy problem is whether its possible to do this in the same reactive stream? Or do I have to block the current implementation and get the response and then execute the new web call?</p>\n<p>Current implementation :</p>\n<pre><code>public Mono&lt;List&lt;ObjectInfo&gt;&gt; getEventsForReference(String reference, Postcode postcode) {\n    return connector.resolveForExternalReference(reference)\n        .flatMapIterable(ResolvedObjectIds::getIds)\n        .flatMap(id -&gt; getEventsFor(id)\n            .map(parcel -&gt; redact(parcel, id, postcode)))\n        .collectList()\n        .doOnError(throwable -&gt; log.error(SERVICE_ERROR, throwable.getMessage()));\n}\n\nprivate Mono&lt;ParcelInfo&gt; getEventsFor(ResolvedObjectId id) {\n    return gateway.getObjectBy(uid).zipWith(gateway.getEventsBy(uid)) //\n            .map(tuple -&gt; combineEvents(tuple.getT1(), tuple.getT2()));\n}\n\nprivate ObjectInfo redact(ObjectInfo obj, ResolvedObjectId id, Postcode postcode) {\n    boolean fullResponse = ResolvedObjectId.isReturn(obj.getBarcode()) || uid.isReturn() || obj.hasPostcode(postcode);\n    return fullResponse ? parcel : redact(parcel);\n}\n</code></pre>\n<p>New web request i'm trying to integrate with above :</p>\n<pre><code>  public Mono&lt;AvailableResponse&gt; getAvailableDiversionsForObject(final int objectId, \n                            final EventsRequest eventsRequest) {\n    return webclient\n        .method(HttpMethod.GET)\n        .uri(&quot;available/{objectId}&quot;, objectId)\n        .body(Mono.just(eventsRequest), EventsRequest .class)\n        .accept(MediaType.APPLICATION_JSON)\n        .retrieve()\n        .onStatus(HttpStatus.NOT_FOUND::equals, r -&gt; Mono.empty())\n        .onStatus(HttpStatus::isError, response -&gt; Mono.error(WebClientResponseException.create(\n                      response.statusCode().value(),\n                      response.statusCode().getReasonPhrase(),\n                      response.headers().asHttpHeaders(),\n                      null,\n                      null\n                  ))\n        )\n        .bodyToMono(AvailableResponse.class)\n        .doOnError(throwable -&gt; log.error(SERVICE_ERROR, throwable.getMessage()));\n}\n</code></pre>\n<p><code>EventsRequest</code> should be populated by the current response of <code>resolveForExternalReference</code> which is the first API call. And then altogether both calls' responses should be merged making <code>availableDiversions</code> set to <code>Mono&lt;ObjectInfo&gt;</code>.</p>\n<p>ObjectInfo class :</p>\n<pre><code>@Builder\n@Data\npublic class ObjectInfo {\n\n private String barcode;\n private List&lt;String&gt; availableDiversions;\n\n}\n</code></pre>\n<p>AvailableResponse class :</p>\n<pre><code>@Builder\n@Data\npublic class AvailableResponse{\n\n private List&lt;String&gt; availableDiversions;\n\n}\n</code></pre>\n"},{"comments":[{"comment_id":134539118,"body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"last_activity_date":1684572453,"question_id":76294291,"body":"<p>I have question being a ranked question of top 3,</p>\n<p>Q1. PLEASE LIST top 3 supermarkets.</p>\n<p>Q2. Why did you choose ?</p>\n<p>I know some coding in regards to the single question but have no idea for the ranked question, this is just a personal project.</p>\n"},{"comments":[{"comment_id":134368796,"body":"<code>@Service</code> is imported from the correct package ?"},{"comment_id":134368906,"body":"@PeterMmm yes, I imported from import org.springframework.stereotype.Service;"},{"comment_id":134369053,"body":"Are you doing right package scan on startup?"},{"comment_id":134369074,"body":"try constructor injection and see what happens? remove autowired and: public MyEntityController(IMyEntityService service){ this.myEntityService=service;}"},{"comment_id":134369147,"body":"@David This works in the Service, but I get an error in the Repository, since I can&#39;t do this injection in the constructor because Repository is an interface."},{"comment_id":134369190,"body":"how does your public static void main look? did you mess with configuration somewhere? looks like spring is confused, because if constructor injection worked, your autowired should have worked as well..."},{"comment_id":134369230,"body":"@David this is my Public Static Void Main:  &#39;@&#39;SpringBootApplication public class MyApplication{      public static void main(String[] args) {         SpringApplication.run(MyApplication.class, args);     }  }"},{"comment_id":134369305,"body":"No idea whats wrong tbh, but @SpringBootApplication annotation is good enough to make spring autoscan and autowire. maybe try to undo all those attempts to force ComponentScan etc,..  just start new project, create a system.out.println interface/service and get them to autowire and work first?"},{"comment_id":134372817,"body":"Maybe you can share the package structure of your application. The springboot auto scan will pick beans in the same package + internal packages from your <code>MyApplication</code> class, so checking that Service and Repository are in the proper hierarchy is worth a shot"}],"answers":[{"comments":[{"comment_id":134370421,"body":"Can you please explain why do you put Autowired annotation on constructor injection?"},{"comment_id":134370529,"body":"When using constructor injection, you can use the @Autowired annotation on the constructor to tell Spring to automatically inject the required dependencies. This is known as &quot;constructor-based dependency injection&quot;."},{"comment_id":134370547,"body":"In Spring, there are three types of dependency injection: constructor injection, setter injection, and field injection.  Constructor injection is considered to be the most recommended way to inject dependencies. The reason for this is that constructor injection ensures that all the required dependencies are provided when an object is instantiated. It makes the object&#39;s state immutable after construction, which can help to prevent subtle bugs and ensure thread-safety."},{"comment_id":134370573,"body":"The constructor injection works also without the Autowired annotation. What is the benefit of adding it?"},{"comment_id":134370653,"body":"I wont torture you anymore:  <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-constructor-injection\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/current/reference/html/&zwnj;&#8203;&hellip;</a>"},{"comment_id":134374790,"body":"Adding the @Autowired annotation in the constructor injection is not mandatory, but it helps to improve the code&#39;s readability and maintainability."},{"comment_id":134374792,"body":"Firstly, it makes the dependency injection more explicit and easier to understand for other developers who might read the code. When they see the @Autowired annotation, they can quickly tell that this is an injection point, and they can easily trace the dependencies to see how the code works."},{"comment_id":134374794,"body":"Secondly, it helps to prevent errors caused by not injecting dependencies correctly. If you forget to inject a dependency or if you inject the wrong type of dependency, Spring will throw an error at runtime. However, if you use the @Autowired annotation, Spring will detect any missing or incorrect dependencies during the application context initialization phase, and it will fail fast, giving you an opportunity to fix the issue before your code is deployed."},{"comment_id":134374813,"body":"Finally, the @Autowired annotation allows you to use constructor injection even when you have multiple constructors in your class."},{"comment_id":134375721,"body":"Nevertheless, in your answer you are adding something which is not mandatory, is not improving on functionality, is an extra line of code and is essentially a developers choice. At the same time you are claiming it is the necessary part of proper way to inject dependency. I personally find your answer misleading."},{"comment_id":134378861,"body":"<i>The most important point to note here is that you make sure that the dependencies are properly injected. This is done in MyEntityController, making sure you define an appropriate constructor and place Autowired in the constructor. Similarly, in MyEntityService, define the appropriate constructor and insert Autowired accordingly.</i>    looks pretty mandatory to me..."}],"answer_id":76195462,"body":"<p>There could be several reasons for potential bugs here, but overall, it's clear that there is a problem caused by not doing proper dependency injection. You can make edits such as:</p>\n<pre><code>package com.myproject.api.controller;\n\nimport com.myproject.entity.model.MyEntity;\nimport com.myproject.entity.service.IMyEntityService;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.CrossOrigin;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.ResponseBody;\n\nimport java.util.List;\n\n@Controller\n@RequestMapping(&quot;/api&quot;)\npublic class MyEntityController {\n\n    private final IMyEntityService myEntityService;\n\n    @Autowired\n    public MyEntityController(IMyEntityService myEntityService) {\n        this.myEntityService = myEntityService;\n    }\n\n    @GetMapping(&quot;/my-entities&quot;)\n    @CrossOrigin(origins = &quot;*&quot;)\n    @ResponseBody\n    public List&lt;MyEntity&gt; getAllMyEntities(){\n        List&lt;MyEntity&gt; myEntities = myEntityService.listAllMyEntities();\n        return myEntities;\n    }\n\n}\n</code></pre>\n<p>-MyEntityService:</p>\n<pre><code>@Service\npublic class MyEntityService implements IMyEntityService {\n\n  private final MyEntityRepository myEntityRepository;\n\n  @Autowired\n  public MyEntityService(MyEntityRepository myEntityRepository) {\n      this.myEntityRepository = myEntityRepository;\n  }\n\n  @Override\n  public List&lt;MyEntity&gt; listAllMyEntities() {\n      return this.myEntityRepository.findAll();\n  }\n}\n</code></pre>\n<p>=MyEntityRepository:</p>\n<pre><code>@Repository\npublic interface MyEntityRepository extends JpaRepository&lt;MyEntity, Long&gt; {\n}\n</code></pre>\n<p>The most important point to note here is that you make sure that the dependencies are properly injected. This is done in MyEntityController, making sure you define an appropriate constructor and place @Autowired in the constructor. Similarly, in MyEntityService, define the appropriate constructor and insert @Autowired accordingly.</p>\n"},{"answer_id":76294281,"body":"<p>Your code looks fine, so my suggestions will be both symantic and related to repackaging.</p>\n<p>Try the following:</p>\n<ol>\n<li>You can remove the @Repository annotation, extending JpaRepository is suffient.</li>\n<li>Delete the controller &amp; service &amp; repository packages and recreate them under\nthe main package.\ncom.myproject.api</li>\n</ol>\n"}],"last_activity_date":1684572342,"question_id":76194695,"body":"<p>Spring is not doing dependency injection on objects annotated with <code>@Autowired</code>.\nWhen the request is made to the endpoint, the following error appears:\n<code>java.lang.NullPointerException: Cannot invoke &quot;com.myproject.entity.service.IMyEntityService.getAllMyEntities()&quot; because &quot;this.myEntityService&quot; is null</code></p>\n<p><strong>- MyEntityController:</strong> This class has a few methods, but all of them have the same error, so I left only this one as an example.</p>\n<hr>\n<pre class=\"lang-java prettyprint-override\"><code>package com.myproject.api.controller;\n\nimport com.myproject.entity.model.MyEntity;\nimport com.myproject.entity.service.IMyEntityService;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.CrossOrigin;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.ResponseBody;\n \nimport java.util.List;\n \n@Controller\n@RequestMapping(&quot;/api&quot;)\npublic class MyEntityController {\n\n  @Autowired\n  IMyEntityService myEntityService;\n\n  @GetMapping(&quot;/my-entities&quot;)\n  @CrossOrigin(origins = &quot;*&quot;)\n  @ResponseBody\n  public List&lt;MyEntity&gt; getAllMyEntities(){\n\n  List&lt;MyEntity&gt; myEntities = myEntityService.listAllMyEntities();\n      return myEntities;\n  }\n\n}\n</code></pre>\n<p><strong>- MyEntityService:</strong> Even if I make a <code>MyEntityService</code> instance manually in the Controller, <code>MyEntityRepository</code> also shows the dependency injection error, which shows that Spring is not injecting into any of my interfaces.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Service\npublic class MyEntityService implements IMyEntityService {\n\n    @Autowired\n    MyEntityRepository myEntityRepository ;\n\n    @Override\n    public List&lt;MyEntityService &gt; listAllMyEntities() {\n        return this.myEntityRepository.findAll();\n    }\n}\n\n</code></pre>\n<p><strong>-MyEntityRepository:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface MyEntityRepository extends JpaRepository&lt;MyEntity, Long&gt; {\n}\n</code></pre>\n<p>I have tried several things to solve this, like creating a static method to configure Spring and forcing Spring to scan. I tried using ComponentScan and putting the path of the packages, and I tried putting settings on application.proprieties, but none of it worked.</p>\n"},{"comments":[{"comment_id":134547878,"body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"comments":[{"comment_id":134539047,"body":"I have a persistence.xml file I add my entity class to it and now it works! tnx alot"}],"answer_id":76294228,"body":"<p>It seems you are using a legacy configuration version of spring framework. Please check your project directory and find some xml files that entities are declared there. If there is nothing you should create a new one and define persistence-unit in your xml file.\nFor more information visit <a href=\"https://vladmihalcea.com/jpa-persistence-xml/#:%7E:text=The%20persistence.,as%20JPA%20provider%20configuration%20properties.\" rel=\"nofollow noreferrer\">this link</a></p>\n"}],"last_activity_date":1684571569,"question_id":76294192,"body":"<p>I have an Entity that I want to persist it to oracle DB . Ive created all interfaces and their related implementations but I get UnknowEntity error. I use springframework 5 and Ive declare service and Dao in xml file. any solution?</p>\n<p>I add my service to config.xml but nothing changed!</p>\n"},{"comments":[{"comment_id":78345659,"body":"could you please specify how is your KeepAlive set on your proxy server. Or just show us Response headers from previuos sampler result. I expect that therte should be something like this: Keep-Alive: timeout=15, max=100 Connection: Keep-Alive"}],"answers":[{"comments":[{"comment_id":78305603,"body":"thanks for the comment, do you think this will still be the case even if some of the requests pass? for example out of 200http requests to the same url, 5 would fail"},{"comment_id":78305948,"body":"if only 5 of 200 fail but are for a different host, then it os possible. Otherwis it would be another cause. If answer is ok, please accept it and upvote so that it helps others"},{"comment_id":78344542,"body":"Hi, any feedback on answer? if ok it should be accepted and upvoted so that it&#39;s helpful to others"},{"comment_id":78345950,"body":"hi @UBIK LOAD PACK we are going to look into the root issue soon and then i will update the post, thanks"}],"answer_id":45673919,"body":"<p>You most probably don't have access to the target host from where you test.</p>\n\n<p>Did you configure proxy as your web browser is probably configured</p>\n\n<ul>\n<li><a href=\"http://jmeter.apache.org/usermanual/get-started.html#proxy_server\" rel=\"nofollow noreferrer\">http://jmeter.apache.org/usermanual/get-started.html#proxy_server</a></li>\n</ul>\n\n<p>But if failure is partial, then you server might be overloaded and rejecting some requests.</p>\n"},{"answer_id":45687076,"body":"<p>My expectation is that \"problematic\" requests are simply not able to finish in 20 seconds (most probably you have modified Connect timeout and set this value in <a href=\"http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request\" rel=\"nofollow noreferrer\">HTTP Request</a> or <a href=\"http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request_Defaults\" rel=\"nofollow noreferrer\">HTTP Request Defaults</a>)</p>\n\n<p>20 seconds looks like a long response time to me so your finding indicates application under test performance problem. </p>\n\n<p>Going forward if you would like to see more \"human readable\" message in the results file switch to <a href=\"http://jmeter.apache.org/usermanual/component_reference.html#Duration_Assertion\" rel=\"nofollow noreferrer\">Duration Assertion</a> instead of setting timeouts on protocol level </p>\n\n<p><a href=\"https://i.stack.imgur.com/GA8ye.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GA8ye.png\" alt=\"JMeter Duration Assertion\"></a></p>\n\n<p>See <a href=\"https://www.blazemeter.com/blog/how-use-jmeter-assertions-3-easy-steps\" rel=\"nofollow noreferrer\">How to Use JMeter Assertions in Three Easy Steps</a> article for more information on conditionally failing JMeter requests.</p>\n"},{"answer_id":45737367,"body":"<p>Please check client configuration from where you are running your tests. It might be like your client system is not able to handle 200 threads. Do the test iteration wise means try with 10, 50 , 70 and so on. Check from which iteration onwards you are getting the error. It is also advisable not to include the listeners during load testing. </p>\n\n<p>Please check the best practices for load testing using jmeter.<br>\n<a href=\"http://jmeter.apache.org/usermanual/best-practices.html\" rel=\"nofollow noreferrer\">http://jmeter.apache.org/usermanual/best-practices.html</a></p>\n"}],"last_activity_date":1684569845,"question_id":45671822,"body":"<p><strong>Jmeter I keep getting: 'java.net.ConnectException: Connection timed out: connect' ?</strong></p>\n\n<ol>\n<li>I have created a load test which tests a specific url at 200 users</li>\n<li>when running the load test for x1 iteration i keep seem to be getting: Connection timed outs?</li>\n<li>I have made the following changes listed here: <a href=\"https://msdn.microsoft.com/en-us/library/aa560610(v=bts.20).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/aa560610(v=bts.20).aspx</a></li>\n</ol>\n\n<p>But the issue is still there:\n[<img src=\"https://i.stack.imgur.com/YyQRh.png\" alt=\"enter image description here\"><a href=\"https://i.stack.imgur.com/YyQRh.png\" rel=\"nofollow noreferrer\">1</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/HHkB9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HHkB9.png\" alt=\"enter image description here\"></a></p>\n"},{"comments":[{"comment_id":95088632,"body":"I dont see any code that utilizes the builder pattern. What exception do you get?"},{"comment_id":95089559,"body":"I have edited the LibraryApplication.java to show the changes. The exception which I get is &quot;The method builder() is undefined for the type Book&quot;"},{"comment_id":95089622,"body":"And what is the exception or compilation error? What IDE are you using? You need to install lombok into your IDE."},{"comment_id":95089839,"body":"When trying to compile below error is generated.java.lang.Error: Unresolved compilation problem:  \tThe method builder() is undefined for the type Book  \tat com.baeldung.LibraryApplication$DataSetup.run(LibraryApplica&zwnj;&#8203;tion.java:25).                     Also I am using STS implementation of eclipse. I have checked whether the same code works in eclilpse Oxygen but the same error is thrown.@f1sh"},{"comment_id":95089880,"body":"Also it is my understanding lombok jar is automatically installed once I have specified it in the pom.xml. Am I correct ?"},{"comment_id":95089967,"body":"If you use <code>mvn package</code>, this should work. But to get it to work in your IDE (which is probably where you get this error), you need to install lombok into eclipse: <a href=\"https://projectlombok.org/setup/eclipse\" rel=\"nofollow noreferrer\">projectlombok.org/setup/eclipse</a>"},{"comment_id":95090755,"body":"Thanks for that suggestion. It is working in eclispse now.  but not working in STS."}],"answers":[{"answer_id":54141630,"body":"<p>As per suggestion by @f1sh - If you use mvn package, this should work. But to get it to work in your IDE (which is probably where you get this error), you need to install lombok into eclipse: projectlombok.org/setup/eclipse </p>\n"},{"comments":[{"comment_id":132862695,"body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/75276991/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"answer_id":75276991,"body":"<p>Installing the Lombok plugin in our IDE is necessary in order to use any annotations from Lombok. I sincerely hope it works for you. and You won't run into any issues.</p>\n"},{"answer_id":76275398,"body":"<ol>\n<li>Download the lombok jar.</li>\n</ol>\n<p><a href=\"https://search.maven.org/remotecontent?filepath=org/projectlombok/lombok/1.18.4/lombok-1.18.4.jar\" rel=\"nofollow noreferrer\">https://search.maven.org/remotecontent?filepath=org/projectlombok/lombok/1.18.4/lombok-1.18.4.jar</a>.</p>\n<ol start=\"2\">\n<li><p>Execute in cmd prompt, like open cmd prompt in jar location.\nrun java -jar jarname.</p>\n</li>\n<li><p>Restart the IDE, It will work fine.</p>\n</li>\n</ol>\n"},{"answer_id":76294132,"body":"<p>1.Download the lombok jar file from here and configured with your ide.</p>\n<p>lombok jar file download link : <a href=\"https://projectlombok.org/download\" rel=\"nofollow noreferrer\">https://projectlombok.org/download</a></p>\n<ol start=\"2\">\n<li>Then restart your IDE, it will work fine.</li>\n<li>If still not working then try to clean your project.</li>\n</ol>\n"}],"last_activity_date":1684569814,"question_id":54128732,"body":"<hr>\n\n<p>This code was written for learnig purpose.\n@Builder and @Data annotation has been implemented in the Book class. While trying to create a builder for the same in LibraryApplication.java builder is not being recognized. </p>\n\n<p>How can I enable the annotations which on Book class</p>\n\n<p>**Edit **: When trying to compile below error is generated.<br>\n      java.lang.Error: Unresolved compilation problem: The method builder() is undefined for the type Book at com.baeldung.LibraryApplication$DataSetup.run(LibraryApplication.java:25) </p>\n\n<p>Also I am using STS implementation of eclipse. I have checked whether the same code works in eclilpse Oxygen but the same error is thrown</p>\n\n<p>Note: The project is created in Spring Boot</p>\n\n<p>Book.class</p>\n\n<pre><code>package com.baeldung.domain;\nimport javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.Id;\nimport javax.validation.constraints.NotNull;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n\n@Data\n@NoArgsConstructor\n@Builder\n@Entity\n@AllArgsConstructor\npublic class Book {\n\n@Id\n@GeneratedValue\nprivate Long id;\n\n@NotNull\nString name, isbn;\n\n}\n</code></pre>\n\n<p>LibraryApplication.java</p>\n\n<pre><code>package com.baeldung;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.ApplicationArguments;\nimport org.springframework.boot.ApplicationRunner;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.stereotype.Component;\n\nimport com.baeldung.domain.Book;\nimport com.baeldung.repo.BookingRespository;\n\n@SpringBootApplication\npublic class LibraryApplication {\n\n@Autowired\nprivate BookingRespository bookingRespository;\n\n@Component\nclass DataSetup implements ApplicationRunner{\n\n    @Override\n    public void run(ApplicationArguments args) throws Exception {\n//             bookingRespository.save(Book.builder().name(\"Way of Kings\").isbn(\"123\").build());\n\n    }\n\n}\n\npublic static void main(String[] args) {\n    SpringApplication.run(LibraryApplication.class, args);\n}\n\n}\n</code></pre>\n\n<p>BookingRepository.java</p>\n\n<pre><code>package com.baeldung.repo;\n\nimport org.springframework.data.repository.PagingAndSortingRepository;\nimport org.springframework.data.rest.core.annotation.RepositoryRestResource;\n\nimport com.baeldung.domain.Book;\n\n@RepositoryRestResource(path=\"books\",collectionResourceRel=\"books\")\npublic interface BookingRespository extends PagingAndSortingRepository&lt;Book, Long&gt;{\n\n}\n</code></pre>\n\n<p>pom.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.1.1.RELEASE&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n&lt;groupId&gt;com.baeldung&lt;/groupId&gt;\n&lt;artifactId&gt;library&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;name&gt;library&lt;/name&gt;\n&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n&lt;properties&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n        &lt;artifactId&gt;h2&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.assertj&lt;/groupId&gt;\n                &lt;artifactId&gt;assertj-core&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n        &lt;artifactId&gt;guava&lt;/artifactId&gt;\n        &lt;version&gt;27.0.1-jre&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p></p>\n"},{"last_activity_date":1684569437,"question_id":76119142,"body":"<p>Protostuff has a ProtobufIOUtil that seems to be able to convert Java objects into protobuf bytes.\nCurrently, it has been found that there may be differences when dealing with map types.</p>\n<p>For example:</p>\n<pre><code>@Getter\n@Setter\npublic class User {\n    @Tag(1)\n    private long uid;\n\n    @Tag(2)\n    private String name;\n\n    @Tag(3)\n    private Map&lt;Long, Integer&gt; map = new HashMap&lt;&gt;(); // Map type field\n}\n</code></pre>\n<pre><code>syntax=&quot;proto3&quot;;\n\nmessage User {\n  int64 uid = 1;\n  string name = 2;\n  map&lt;int64, int32&gt; map = 3;\n}\n</code></pre>\n<p>The test:</p>\n<pre><code>public class Test {\n    public static void main(String[] args) throws InvalidProtocolBufferException {\n        User user = new User();\n        user.setUid(1);\n        user.setName(&quot;s&quot;);\n        Map&lt;Long, Integer&gt; map = new HashMap&lt;Long, Integer&gt;();\n        map.put(1L, 1);\n        user.setMap(map);\n        Schema&lt;User&gt; schema = RuntimeSchema.getSchema(User.class);\n        byte[] bytes = ProtobufIOUtil.toByteArray(user, schema, LinkedBuffer.allocate());\n        System.out.println(Arrays.toString(bytes));\n\n        UserOuterClass.User pbUser = UserOuterClass.User.newBuilder()\n                .setUid(1)\n                .setName(&quot;s&quot;)\n                .putMap(1, 1)\n                .build();\n        System.out.println(Arrays.toString(pbUser.toByteArray()));\n        UserOuterClass.User newPbUser = UserOuterClass.User.parseFrom(bytes);\n        System.out.println(newPbUser.toString());\n    }\n}\n</code></pre>\n<p>The console output is:</p>\n<pre><code>[8, 1, 18, 1, 115, 26, 6, 10, 4, 8, 1, 16, 1]\n[8, 1, 18, 1, 115, 26, 4, 8, 1, 16, 1]\nuid: 1\nname: &quot;s&quot;\nmap {\n  key: 0\n  value: 0\n}\n</code></pre>\n<p>The dependencies:</p>\n<pre><code>    &lt;dependency&gt;\n            &lt;groupId&gt;io.protostuff&lt;/groupId&gt;\n            &lt;artifactId&gt;protostuff-core&lt;/artifactId&gt;\n            &lt;version&gt;1.7.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.protostuff&lt;/groupId&gt;\n            &lt;artifactId&gt;protostuff-runtime&lt;/artifactId&gt;\n            &lt;version&gt;1.7.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.protostuff&lt;/groupId&gt;\n            &lt;artifactId&gt;protostuff-runtime-registry&lt;/artifactId&gt;\n            &lt;version&gt;1.7.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.protobuf&lt;/groupId&gt;\n            &lt;artifactId&gt;protobuf-java&lt;/artifactId&gt;\n            &lt;version&gt;3.21.8&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Bytes generated by <code>ProtobufIOUtil.toByteArray()</code> in ProtoStuff differs from bytes generated in ProtoBuf, once with <code>Map</code> type fields in Pojo class.</p>\n<p>The map data structure encoded by protobuf is roughly <code>fieldTag, eleLen, eleData, fieldTag, eleLen, eleData</code>.</p>\n<p>The byte data converted from protostuff to protobuf is roughly <code>fieldTag, fieldLen, fieldTag, eleLen, eleData, fieldTag, eleLen, eleData</code>.</p>\n<p>Compared to protobuf, there are two more data points: <code>fieldTag, fieldLen</code>.</p>\n<p>Anyway, I want the bytes generated by protostuff to be parsed in protobuf to generate the same object as the original object.</p>\n<p>Is there any relevant configuration for protostuff that supports not writing <code>fieldTag</code> and <code>fieldLen</code> at the beginning?</p>\n<p>If not, does protostuff support custom encoding and decoding (I know  <code>Delegate</code> could be used to customize encoding and decoding, but it seems to require writing by myself. I want to combine it with the original map encoding and decoding, but I haven't found an implementation yet).</p>\n<p>---UPDATE---</p>\n<p>I now decide to use Delegate:</p>\n<pre><code>public class MapDelegate {\n    public static final Delegate&lt;Map&lt;Long, Integer&gt;&gt; MAP_INT_LONG_DELEGATE = new Delegate&lt;Map&lt;Long, Integer&gt;&gt;() {\n        @Override\n        public WireFormat.FieldType getFieldType() {\n            return WireFormat.FieldType.MESSAGE;\n        }\n\n        @Override\n        public Map&lt;Long, Integer&gt; readFrom(Input input) throws IOException {\n            // to be implemented\n        }\n\n        @Override\n        public void writeTo(Output output, int number, Map&lt;Long, Integer&gt; value, boolean repeated) throws IOException {\n            // to be implemented\n        }\n\n        @Override\n        public void transfer(Pipe pipe, Input input, Output output, int number, boolean repeated) throws IOException {\n            throw new UnsupportedOperationException(&quot;Transfer operation is not supported.&quot;);\n        }\n\n        @Override\n        public Class&lt;?&gt; typeClass() {\n            return Map.class;\n        }\n    };\n\n}\n\n</code></pre>\n<p>The updated <code>Test</code>:</p>\n<pre><code>public class Test {\n    public static void main(String[] args) throws InvalidProtocolBufferException {\n        DefaultIdStrategy strategy = (DefaultIdStrategy) RuntimeEnv.ID_STRATEGY;\n        strategy.registerDelegate(MAP_INT_LONG_DELEGATE);\n\n        ...\n    }\n}\n</code></pre>\n<p>But no idea on how to implement <code>readFrom</code> and <code>writeTo</code>.</p>\n"},{"comments":[{"comment_id":134538667,"body":"Can you please show me your <code>Main class</code>, <code>Repository</code> and <code>Service</code>? Add full stack trace in your question."},{"comment_id":134538722,"body":"I am saying add it into your question not in comment. And add full stack trace as well"},{"comment_id":134538749,"body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors.</a>"},{"comment_id":134538827,"body":"I&#39;m sorry, I&#39;m a newbie at coding so I dont know what to do clearly. I edited the post, I hope it is understandable now."}],"last_activity_date":1684569347,"question_id":76293886,"body":"<p><a href=\"https://i.stack.imgur.com/15UPr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/15UPr.png\" alt=\"enter image description here\" /></a>\nI'm trying to write a Spring boot application, but when I run my code it gives me</p>\n<blockquote>\n<p>java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration</p>\n</blockquote>\n<p>This error is on Application test file. Can you help me to solve this problem?</p>\n<p><a href=\"https://i.stack.imgur.com/G30Nn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G30Nn.png\" alt=\"enter image description here\" /></a></p>\n<p>Here are my codes:</p>\n<p><strong>Service:</strong></p>\n<pre><code>package tr.edu.altinbas.swe.app.player;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class App {\n\n    public static void main(String[] args) {\n\n        SpringApplication.run(App.class, args);\n    }\n\n}\n</code></pre>\n<p><strong>Repository:</strong></p>\n<pre><code>package tr.edu.altinbas.swe.app.player.data.repository;\n\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.stereotype.Repository;\nimport tr.edu.altinbas.swe.app.player.data.entity.Player;\n\nimport javax.persistence.criteria.CriteriaBuilder;\nimport java.util.Optional;\n\n@Repository\npublic interface IPlayerRepository extends CrudRepository &lt;Player, Integer&gt;\n{\n    Optional&lt;Player&gt; findByUsername(String username);\n}\n</code></pre>\n<p><strong>Controller:</strong></p>\n<pre><code>package tr.edu.altinbas.swe.app.player.controller;\n\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\nimport tr.edu.altinbas.swe.app.player.data.entity.Player;\nimport tr.edu.altinbas.swe.app.player.service.PlayerService;\n\n@RestController\n@RequestMapping(&quot;api/players&quot;)\npublic class PlayerController\n{\n    private final PlayerService m_playerService;\n\n    public PlayerController(PlayerService playerService) {\n        m_playerService = playerService;\n    }\n\n    @GetMapping(&quot;player/username&quot;)\n    public ResponseEntity&lt;Player&gt; findByUsername(@RequestParam(name = &quot;uname&quot;) String username)\n    {\n        return ResponseEntity.of(m_playerService.findPlayerByUsername(username));\n    }\n\n}\n\n**Player Service Helper:**\n\n    package tr.edu.altinbas.swe.app.player.data.dal;\n    \n    import org.springframework.stereotype.Component;\n    import tr.edu.altinbas.swe.app.player.data.entity.Player;\n    import tr.edu.altinbas.swe.app.player.data.repository.IPlayerRepository;\n    \n    import java.util.Optional;\n    \n    @Component\n    public class PlayerServiceHelper {\n        private final IPlayerRepository m_playerRepository;\n    \n        public PlayerServiceHelper(IPlayerRepository playerRepository)\n        {\n            m_playerRepository = playerRepository;\n        }\n    \n        public Optional&lt;Player&gt; findPlayerByUsername(String username)\n        {\n            return m_playerRepository.findByUsername(username);\n        }\n    \n    }\n</code></pre>\n<p><strong>Player:</strong></p>\n<pre><code>package tr.edu.altinbas.swe.app.player.data.entity;\n\nimport javax.persistence.*;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Entity\n@Table(name = &quot;players&quot;)\npublic class Player\n{\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;player_id&quot;)\n    public int id;\n\n    @Column(nullable = false)\n    public String username;\n\n    @Column(nullable = false)\n    public String name;\n\n    @Column(name = &quot;birth_date&quot;, nullable = false)\n    public LocalDate birthDate;\n\n    @Column(name = &quot;register_date&quot;, nullable = false)\n    public LocalDateTime registerDate = LocalDateTime.now();\n\n}\n</code></pre>\n"},{"answers":[{"answer_id":76294087,"body":"<p>The problem is in the conditions of the <code>if...else if...else if</code> construct. The first condition is correct (both null), but the second condition will be true if both children are not null, which is the case you really want to keep for the final <code>else</code>.</p>\n<p>So change the conditions as follows:</p>\n<pre><code>        if (current.getLeft() == null &amp;&amp; current.getRight() == null) {\n            return null;\n        }\n        else if (current.getRight() == null) {  // If ONLY a left child\n            return current.getLeft();\n        }\n        else if (current.getLeft() == null) {  // If ONLY a right child\n            return current.getRight();\n        }\n        else {\n</code></pre>\n<p>NB: this kind of problem can be easily detected with a debugger. Have it step through the code when you tell it to. Then you see execution moves into an <code>if</code> block where you don't want it to go.</p>\n"}],"last_activity_date":1684568890,"question_id":76293936,"body":"<p>My BST remove code seems to have problem when removing with 2 children node, it removes the whole subtree. I went through the whole logic over and over again but couldn't find any errors.</p>\n<p>Here is the code with successor method:</p>\n<pre><code>public T remove(T data) {\n    // WRITE YOUR CODE HERE (DO NOT MODIFY METHOD HEADER)!\n    if (data == null) {\n        throw new IllegalArgumentException();\n    }\n    BSTNode&lt;T&gt; dummy = new BSTNode&lt;&gt;(null);\n    root = hRemove(root, data, dummy);\n    return dummy.getData();\n}\n\nprivate BSTNode&lt;T&gt; hRemove(BSTNode&lt;T&gt; current, T data, BSTNode&lt;T&gt; dummy) {\n    if (current == null) {\n        throw new NoSuchElementException();\n    }\n    else if (data.compareTo(current.getData()) &gt; 0) {\n        current.setRight(hRemove(current.getRight(), data, dummy));\n    }\n    else if (data.compareTo(current.getData()) &lt; 0) {\n        current.setLeft(hRemove(current.getLeft(), data, dummy));\n    }\n    else {\n        dummy.setData(current.getData());\n        size--;\n        if ((current.getLeft() == null) &amp;&amp; (current.getRight()==null)) {\n            return null;\n        }\n        else if (current.getLeft() != null) {\n            return current.getLeft();\n        }\n        else if (current.getRight() != null) {\n            return current.getRight();\n        }\n        else {\n            BSTNode&lt;T&gt; dummy2 = new BSTNode(null);\n            current.setRight(suc(current.getRight(), dummy2));\n            current.setData(dummy2.getData());\n        }\n    }\n    return current;\n}\n\nprivate BSTNode&lt;T&gt; suc(BSTNode&lt;T&gt; current, BSTNode&lt;T&gt; dummy2) {\n    if (current.getLeft() == null) {\n        dummy2.setData(current.getData());\n        return current.getRight();\n    }\n    else {\n        current.setLeft(suc(current.getLeft(),dummy2));\n        return current;\n    }\n}\n</code></pre>\n<p>The result test shows like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[Test Failure: remove] [-0.31] : Unexpected content after removing 1 from the tree.\n\n+----------------+\n| Initial Tree:  |\n|                |\n|   1            |\n|  /   \\         |\n| 0     2        |\n|                |\n|                |\n| Expected Tree: |\n|                |\n|   2            |\n|  /             |\n| 0              |\n|                |\n|                |\n| Actual Tree:   |\n|                |\n| 0              |\n+----------------+\n \n\n[Test Failure: remove] [-0.31] : Unexpected content after removing 1 from the tree.\n\n+---------------------------------+\n| Initial Tree:                   |\n|                                 |\n|               1                 |\n|        /               \\        |\n|       0                 4       |\n|                    /            |\n|                   3             |\n|                  /              |\n|                 2               |\n|                                 |\n|                                 |\n| Expected Tree:                  |\n|                                 |\n|       2                         |\n|    /       \\                    |\n|   0         4                   |\n|          /                      |\n|         3                       |\n|                                 |\n|                                 |\n| Actual Tree:                    |\n|                                 |\n| 0                               |\n+---------------------------------+\n \n\n[Test Failure: remove] [-0.31] : Unexpected content after removing 1 from the tree.\n\n+-----------------+\n| Initial Tree:   |\n|                 |\n|       1         |\n|    /       \\    |\n|   0         2   |\n|              \\  |\n|               3 |\n|                 |\n|                 |\n| Expected Tree:  |\n|                 |\n|   2             |\n|  /   \\          |\n| 0     3         |\n|                 |\n|                 |\n| Actual Tree:    |\n|                 |\n| 0               |\n+-----------------+\n \n\n[Test Failure: remove] [-0.31] : Unexpected content after removing 1 from the tree.\n\n+-----------------------------------------------------------------+\n| Initial Tree:                                                   |\n|                                                                 |\n|                               1                                 |\n|                /                               \\                |\n|               0                                 5               |\n|                                        /                        |\n|                                       4                         |\n|                                    /                            |\n|                                   2                             |\n|                                      \\                          |\n|                                       3                         |\n|                                                                 |\n|                                                                 |\n| Expected Tree:                                                  |\n|                                                                 |\n|               2                                                 |\n|        /               \\                                        |\n|       0                 5                                       |\n|                    /                                            |\n|                   4                                             |\n|                  /                                              |\n|                 3                                               |\n|                                                                 |\n|                                                                 |\n| Actual Tree:                                                    |\n|                                                                 |\n| 0                                                               |\n+-----------------------------------------------------------------+\n \n\n[Test Failure: remove] [-0.31] : Unexpected content after removing 4 from the tree.\n\n+---------------------------------+\n| Initial Tree:                   |\n|                                 |\n|               6                 |\n|        /               \\        |\n|       2                 7       |\n|    /       \\                    |\n|   1         4                   |\n|  /       /   \\                  |\n| 0       3     5                 |\n|                                 |\n|                                 |\n| Expected Tree:                  |\n|                                 |\n|               6                 |\n|        /               \\        |\n|       2                 7       |\n|    /       \\                    |\n|   1         5                   |\n|  /       /                      |\n| 0       3                       |\n|                                 |\n|                                 |\n| Actual Tree:                    |\n|                                 |\n|               6                 |\n|        /               \\        |\n|       2                 7       |\n|    /       \\                    |\n|   1         3                   |\n|  /                              |\n| 0                               |\n+---------------------------------+\n \n\n[Test Failure: remove] [-0.31] : Unexpected content after removing 2 from the tree.\n\n+---------------------------------+\n| Initial Tree:                   |\n|                                 |\n|               6                 |\n|        /               \\        |\n|       2                 7       |\n|    /       \\                    |\n|   1         4                   |\n|  /       /   \\                  |\n| 0       3     5                 |\n|                                 |\n|                                 |\n| Expected Tree:                  |\n|                                 |\n|               6                 |\n|        /               \\        |\n|       3                 7       |\n|    /       \\                    |\n|   1         4                   |\n|  /           \\                  |\n| 0             5                 |\n|                                 |\n|                                 |\n| Actual Tree:                    |\n|                                 |\n|       6                         |\n|    /       \\                    |\n|   1         7                   |\n|  /                              |\n| 0                               |\n+---------------------------------+\n \n\n[Test Failure: remove] [-0.31] : Unexpected content after removing 2 from the tree.\n\n+---------------------------------+\n| Initial Tree:                   |\n|                                 |\n|               5                 |\n|        /               \\        |\n|       2                 6       |\n|    /       \\                    |\n|   1         3                   |\n|  /           \\                  |\n| 0             4                 |\n|                                 |\n|                                 |\n| Expected Tree:                  |\n|                                 |\n|               5                 |\n|        /               \\        |\n|       3                 6       |\n|    /       \\                    |\n|   1         4                   |\n|  /                              |\n| 0                               |\n|                                 |\n|                                 |\n| Actual Tree:                    |\n|                                 |\n|       5                         |\n|    /       \\                    |\n|   1         6                   |\n|  /                              |\n| 0                               |\n+---------------------------------+\n \n\n[Test Failure: remove] [-0.31] : Unexpected content after removing 2 from the tree.\n\n+-----------------------------------------------------------------+\n| Initial Tree:                                                   |\n|                                                                 |\n|                               6                                 |\n|                /                               \\                |\n|               2                                 7               |\n|        /               \\                                        |\n|       1                 5                                       |\n|    /               /                                            |\n|   0               3                                             |\n|                      \\                                          |\n|                       4                                         |\n|                                                                 |\n|                                                                 |\n| Expected Tree:                                                  |\n|                                                                 |\n|               6                                                 |\n|        /               \\                                        |\n|       3                 7                                       |\n|    /       \\                                                    |\n|   1         5                                                   |\n|  /       /                                                      |\n| 0       4                                                       |\n|                                                                 |\n|                                                                 |\n| Actual Tree:                                                    |\n|                                                                 |\n|       6                                                         |\n|    /       \\                                                    |\n|   1         7                                                   |\n|  /                                                              |\n| 0                                                               |\n+-----------------------------------------------------------------+\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/SkVnp.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"comments":[{"comment_id":134538139,"body":"Are you running the command from a shell that interprets the <code>*</code> character as a glob pattern?"},{"comment_id":134538171,"body":"Please show us how you are running the program; i.e. show us the complete command line.  Also tell us what shell you are using."},{"comment_id":134538175,"body":"I got it to work, 2 * 4, and it displays <code>8</code>."},{"comment_id":134538211,"body":"Well ... yea ... I can make that work or not work ... depending on what shell I use, or whether or not the current directory is empty.   There is nothing wrong with the Java code."},{"comment_id":134538228,"body":"It&#39;s the glob thing, I bet. @WinMinThant <code>*</code> is magic on the terminal. Either escape it <code>java DecisionControl1 5 &#39;*&#39; 2</code> or use something else. Running <code>java DecisionControl1 5 * 2</code> makes bash run <code>java</code>, passing to <code>java</code> the params <code>DecisionControl1</code>, <code>5</code>, <code>DecisionControl1.java</code>, <code>DecisionControl1.class</code>, <code>every-other-file-in-this-dir</code>, <code>5</code>. Which obviously doesn&#39;t work. <code>*</code> is expanded to &#39;every file in this dir&#39;."},{"comment_id":134538310,"body":"<code>java DecisionControl1 3 \\* 4</code>, <code>java DecisionControl1 3 &#39;*&#39; 4</code>, or <code>java DecisionControl1 3 &quot;*&quot; 4</code> (depending on shell/system); and highly recommended to change your error message to something like <code>System.out.println(&quot;error: &quot; + Arrays.toString(args));</code> so you can see what is the wrong input"},{"comment_id":134538608,"body":"<i>&quot;it always shows the error message&quot;</i> What error message?"}],"answers":[{"comments":[{"comment_id":134568638,"body":"I got the answer thankful to you all guys!! I added &quot; &quot; when running with multiply operator in command line like this :   number &quot;*&quot; number"}],"answer_id":76293982,"body":"<p>To clarify the problem, I've edited your code like this (I've just add a println to show the args):</p>\n<pre><code>package answer;\n\nimport java.util.Arrays;\n\nclass MyAnswer {\n    public static void main(String[] args) {\n        for (int i = 0; i &lt; args.length; i++) {\n            System.out.println(String.format(&quot;arg%d: %s&quot;, i, args[i]));\n        }\n        int num1 = Integer.parseInt(args[0]);\n        String op = args[1];\n        int num2 = Integer.parseInt(args[2]);\n        if (op.equals(&quot;*&quot;)) {\n            System.out.println(num1 * num2);\n        } else {\n            System.out.println(&quot;error: &quot; + Arrays.toString(args));\n        }\n    }\n}\n</code></pre>\n<p>I've compiled this code with (This command mean compile src/java/main/answer/MyAnswer.java into target/classes directory):</p>\n<pre><code>javac -d target/classes src/java/main/answer/MyAnswer.java\n</code></pre>\n<p>Go to target/classes and run your code with java like:</p>\n<pre><code>java answer.MyAnswer 2 * 8\n</code></pre>\n<p>The result looks like:</p>\n<p><a href=\"https://i.stack.imgur.com/X7YnF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/X7YnF.png\" alt=\"ubuntu shell\" /></a></p>\n<p>But if you've run it like this:</p>\n<pre><code>java answer.MyAnswer &quot;2&quot; &quot;*&quot; &quot;8&quot;\n</code></pre>\n<p>Then, you should have the result as expected.</p>\n<p><a href=\"https://i.stack.imgur.com/DNWl2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DNWl2.png\" alt=\"expected result\" /></a></p>\n<p>So, in your shell, * is interpreted as a <a href=\"https://man7.org/linux/man-pages/man7/glob.7.html\" rel=\"nofollow noreferrer\"><strong>glob pattern</strong></a>.</p>\n"}],"last_activity_date":1684566962,"question_id":76293620,"body":"<pre><code>  class DecisionControl1{\n    public static void main (String[] args){\n        int num1 = Integer.parseInt(args[0]);\n        String op = args[1];\n        int num2 = Integer.parseInt(args[2]);\n        if(op.equals(&quot;*&quot;)){\n            System.out.println(num1 * num2);\n        }\n        else{\n            System.out.println(&quot;error&quot;);\n        }\n    }\n}\n</code></pre>\n<p>There are no compilation errors in this code, but when I run the application, it always shows the error message.  It doesn't show the output of multiplication.  What is the problem?</p>\n"},{"comments":[{"comment_id":134526916,"body":"What makes you think that that method is atomic?"},{"comment_id":134526923,"body":"<code>synchronized</code> just means it takes a lock on <code>this</code> object. If you do things to other objects from inside that function, things which other code accesses which <i>don&#39;t</i> respect the same lock, it&#39;s not like an atomic transaction.   <a href=\"https://stackoverflow.com/q/3047564\">Java synchronized method lock on object, or method?</a>"},{"comment_id":134527633,"body":"@khelwood it is atomic because multiple threads can call this method concurrently or sequentially and the result will be the same.  Indeed. I just want to copy one part of it. Imagine this is a class with x and y integers. Then it is thread safe and the method is atomic, right?"},{"comment_id":134528680,"body":"No, it&#39;s not atomic because it contains multiple individual operations done separately, so the half-changed state can be visible half way through the method. Not to mention that <code>x++</code> isn&#39;t even atomic in itself."}],"answers":[{"answer_id":76289998,"body":"<blockquote>\n<p>...I saw this article...&quot;all or nothing&quot;...[another] thread can only see the state before or after the execution</p>\n</blockquote>\n<p>Personally, I disagree with the &quot;all or nothing&quot; part of that description, but I agree with the second part. If thread A performs a truly atomic operation, then any other thread B that shares variables with thread A should only ever be able to see those variables in the state that they were before the operation started, or in the state after thread A completed the operation. Thread B should never be able to see the variables in a half-way-done state.</p>\n<p>I think it's the ambiguous &quot;all or nothing&quot; that made you think about transactions.</p>\n<p>Your example code throws an exception 10% of the time. If you're using that exception as a model of &quot;failure,&quot; and you're expecting that the <code>x++</code> operation will be &quot;unwound&quot; when a failure occurs, that's not how it's going to work. &quot;Atomic&quot; and &quot;transactional&quot; are <em>related,</em> because the completion of a transaction must happen atomically, but the words mean different things.</p>\n<p>If you wanted to guarantee that <code>x</code> and <code>y</code> always receive the same number of increments, even in the face of failure, then until somebody gives us true transactions, you'll have to write explicit code to provide that guarantee:</p>\n<pre><code>    public synchronized void add(){\n        x++;\n        try {\n            someOperationThatMightFail();\n        }\n        catch (Exception e) {\n            --x;\n            throw e;\n        }\n        y++;\n    }\n</code></pre>\n<blockquote>\n<p>...the below code is atomic...</p>\n</blockquote>\n<p>It's not <em>really</em> atomic. It could be <em>effectively</em> atomic, but only if no other thread ever accesses the same <code>x</code> and <code>y</code> except when <code>synchronized</code> on the same object. If it were truly atomic, then it would be impossible, under <em>any</em> conditions, for another thread to observe <code>x</code> and <code>y</code> at a moment when the <code>add</code> call was only half-way done. But, if the programmer guarantees that every other thread synchronizes on the same object when accessing those variables, then it has the same effect <em>as if</em> it truly was atomic.</p>\n<blockquote>\n<p>...but it has side effects...</p>\n</blockquote>\n<p>I don't see the &quot;but&quot; in that. Atomicity means nothing unless there are variables shared between the threads. What you're calling &quot;side effects&quot; is how the variables <code>x</code> and <code>y</code> are shared.</p>\n"}],"last_activity_date":1684565112,"question_id":76287062,"body":"<p>This question is more about terminology. I use atomic as a concurrency terminology and I describe it as such : &quot;If multiple threads call the same method concurrently or sequentially, the result will be the same if the method is atomic&quot; Where as I use transactional more like a unit of work terminology. A transactional job is either successful or failed and there will be no intermediate dirty state.</p>\n<p>On the other hand, I saw this <a href=\"https://dzone.com/articles/using-atomic-methods-to-write-thread-safe-classes\" rel=\"nofollow noreferrer\">article</a> and it claims &quot;A method is atomic if it is &quot;all or nothing.&quot; If a thread reads the data, the thread can only see the state before or after the execution of the atomic method — no intermediate state. After the atomic method was executed successfully, the changes are visible to all threads. The atomic method only modifies data of its own object without side effects. Here are some examples of atomic methods.&quot; It seems to me this definition is not necessarily correct. For instance the below code is atomic but has side effects I think.</p>\n<pre><code>    public synchronized void add(){\n        x++;\n        if(System.currentTimeMillis()%10==0){\n            throw new RuntimeException();\n        }\n        y++;\n    }\n</code></pre>\n<p>Is my understanding of the terminology correct?</p>\n"},{"comments":[{"comment_id":134538869,"body":"We may need more info to answer. You should show what you tried (table, class, mapper, type handler, etc.) and how it failed."},{"comment_id":134549085,"body":"I tested <code>String</code> vs. <code>MACADDR</code> mapping. Retrieval seems to work out-of-the-box. Setting parameter may require a custom type handler. See the <a href=\"https://github.com/harawata/mybatis-issues/tree/master/so-76293824\" rel=\"nofollow noreferrer\">demo</a>. If you need further help, please update the question to be more specific."},{"comment_id":134565420,"body":"@ave Thank you for your time &amp; help! I am sorry I didn&#39;t add more info specially w.r.t to my knowing that I can definitely use <a href=\"https://jdbc.postgresql.org/documentation/publicapi/org/postgresql/util/PGobject.html\" rel=\"nofollow noreferrer\">PGObject</a> &amp; write a custom type handler. I was more interested in knowing/hearing from MyBatis community folks on whether they have any plans to support this natively &amp; from other users on whether they had any problems with using <code>PGObject</code>."},{"comment_id":134565459,"body":"I will add an example of the above &amp; try it out &amp; share here shortly. But please feel free to add your above comment as answer &amp; I will accept it."}],"last_activity_date":1684564210,"question_id":76293824,"body":"<p>From what I read from the <a href=\"https://mybatis.org/mybatis-3/configuration.html\" rel=\"nofollow noreferrer\">docs</a> it looks like MyBatis doesn't support type handling for <a href=\"https://www.postgresql.org/docs/current/datatype-net-types.html\" rel=\"nofollow noreferrer\">Postgres Network Address</a> types. It would have been nice if it were a first class JDBC type.</p>\n<p>Has anyone tried/written a custom type handler to deal with this? Any suggestions?</p>\n<p>Thanks</p>\n"},{"comments":[{"comment_id":122114799,"body":"As the log states, there is a null pointer exception Caused by: java.lang.NullPointerException at java.base/java.io.FileInputStream... It means that the FilePath is not coming through the execution or is not provided."}],"answers":[{"comments":[{"comment_id":90347677,"body":"Thanks a Lot !! I removed the sytem.getproperty and it works fine."}],"answer_id":51689357,"body":"<p>The lowest 'caused by' section points you to the underlying exception in your base class constructor: you are calling <code>System.getProperty</code> with a file path; that will probably return null. To me it looks like the whole call shouldn't be there, and you just want to pass the file path to the <code>FileInputStream</code> constructor (or read it from a system property with some key)</p>\n"},{"comments":[{"comment_id":90347705,"body":"Thanks !! Yes I am using config.property file and the problem was that I am using sytem.getproperty. I removed it and now working fine."},{"comment_id":90353308,"body":"Glad it helped. Please vote up if my response is useful."}],"answer_id":51690049,"body":"<p>Looking at the code, I understand the issue is in the constructor of the base class.\nLoginPageTest calls super() which invokes TestBase. </p>\n\n<p>FileInputStream needs a file path. I suspect FileInputSteam object created is coming as null.</p>\n\n<p>Why are you calling System.getProperty? Is the config.properties file available?</p>\n"},{"answer_id":61521531,"body":"<p>Just Remove <code>System.getproperty</code> from your base class. Use this lines of code </p>\n\n<pre><code> prop = new Properties();\n\nFileInputStream ip = new FileInputStream((\"C:\\\\Users\\\\RxLogix\\\\eclipse-workspace\\\\PviIntake\\\\src\\\\main\\\\java\\\\com\\\\pvi\\\\qa\\\\config\\\\config.properties\"));\n\nprop.load(ip);\n</code></pre>\n"},{"answer_id":76233598,"body":"<p><strong>If you use Jdk_1.8 for your automation suite, It might be one of the following two errors :-</strong></p>\n<pre><code> 1. java.lang.AbstractMethodError: org.openqa.selenium.remote.service.DriverService$Builder.loadSystemProperties()V\n\n 2. org.testng.TestNGException: \nCannot instantiate class tests.mobiquityPayX.payXUAT.channelApp.BillPayChannelTest\n</code></pre>\n<blockquote>\n<p><strong>Solution:</strong> Try to upgrade your the latest java-client dependencies. It may be\nresolve your issues..</p>\n</blockquote>\n"},{"answer_id":76293823,"body":"<p>i think you dont want to write the whole system path so thats why u are using system.get but with system.get you are also giving whole path instead of that use system.get(&quot;user.dir&quot;)+&quot;\\src\\main\\java\\com\\pvi\\qa\\config\\config.properties&quot;   the user.dir will return the system path where your file is stored this will help us and we dont have to write the long path of file.</p>\n"}],"last_activity_date":1684564197,"question_id":51688951,"body":"<p>I am facing this 'Cannot insantiate class' error on running one of my test cases in selenium webdriver using java(Using Maven project).</p>\n\n<p>Below is the parent class where I defined driver and properties</p>\n\n<pre><code>package com.pvi.qa.base;\n\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.util.Properties;\nimport java.util.concurrent.TimeUnit;\n\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\n\npublic class TestBase {\n\n    public static WebDriver driver;\n    public static Properties prop ;\n\n    public TestBase() {\n        try {\n            prop = new Properties();\n            FileInputStream ip = new FileInputStream(System.getProperty(\"C:\\\\Users\\\\RxLogix\\\\eclipse-workspace\\\\PviIntake\\\\src\\\\main\\\\java\\\\com\\\\pvi\\\\qa\\\\config\\\\config.properties\"));\n        prop.load(ip);\n\n        }\n        catch(FileNotFoundException e) {\n            e.printStackTrace();\n        }\n        catch(IOException e) {\n            e.printStackTrace();\n        }\n    }\n\npublic static void initialization () {\nString BrowserName = prop.getProperty(\"browser\");   \nif(BrowserName.equals(\"chrome\")) {\n    System.setProperty(\"webdriver.chrome.driver\", \"D:\\\\Softwares\\\\chromedriver_win32 (1)\\\\chromedriver.exe\");\n    driver = new ChromeDriver();}\ndriver.manage().window().maximize();\ndriver.manage().deleteAllCookies();\ndriver.manage().timeouts().pageLoadTimeout(20, TimeUnit.SECONDS);\ndriver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\ndriver.get(prop.getProperty(\"url\"));\n}\n}\n</code></pre>\n\n<p>Below is the test cases class which I am running through TestNG</p>\n\n<pre><code>package com.pvi.qa.testcases;\n\nimport org.testng.annotations.AfterMethod;\nimport org.testng.annotations.BeforeMethod;\nimport org.testng.annotations.Test;\n\nimport com.pvi.qa.base.TestBase;\nimport com.pvi.qa.pages.HomePage;\nimport com.pvi.qa.pages.LoginPage;\n\npublic class LoginPageTest extends TestBase{\n    LoginPage loginPage;\n    HomePage homePage;\n\n\n    public LoginPageTest() {\n        super();\n        }\n\n    @BeforeMethod\n    public void setUp() {\n        initialization();\n        loginPage = new LoginPage();\n    }\n\n\n    @Test\n    public void logintest() {\n        homePage = loginPage.login(prop.getProperty(\"username\"), prop.getProperty(\"password\"));\n    }\n\n    @AfterMethod\n    public void tearDown() {\n        driver.quit();\n    }\n\n}\n</code></pre>\n\n<p>And below is the error I am getting - </p>\n\n<pre><code>[RemoteTestNG] detected TestNG version 6.14.3\norg.testng.TestNGException: \nCannot instantiate class com.pvi.qa.testcases.LoginPageTest\n    at org.testng.internal.ObjectFactoryImpl.newInstance(ObjectFactoryImpl.java:30)\n    at org.testng.internal.ClassHelper.createInstance1(ClassHelper.java:423)\n    at org.testng.internal.ClassHelper.createInstance(ClassHelper.java:336)\n    at org.testng.internal.ClassImpl.getDefaultInstance(ClassImpl.java:125)\n    at org.testng.internal.ClassImpl.getInstances(ClassImpl.java:190)\n    at org.testng.TestClass.getInstances(TestClass.java:95)\n    at org.testng.TestClass.initTestClassesAndInstances(TestClass.java:81)\n    at org.testng.TestClass.init(TestClass.java:73)\n    at org.testng.TestClass.&lt;init&gt;(TestClass.java:38)\n    at org.testng.TestRunner.initMethods(TestRunner.java:389)\n    at org.testng.TestRunner.init(TestRunner.java:271)\n    at org.testng.TestRunner.init(TestRunner.java:241)\n    at org.testng.TestRunner.&lt;init&gt;(TestRunner.java:192)\n    at org.testng.remote.support.RemoteTestNG6_12$1.newTestRunner(RemoteTestNG6_12.java:33)\n    at org.testng.remote.support.RemoteTestNG6_12$DelegatingTestRunnerFactory.newTestRunner(RemoteTestNG6_12.java:66)\n    at org.testng.SuiteRunner$ProxyTestRunnerFactory.newTestRunner(SuiteRunner.java:713)\n    at org.testng.SuiteRunner.init(SuiteRunner.java:260)\n    at org.testng.SuiteRunner.&lt;init&gt;(SuiteRunner.java:198)\n    at org.testng.TestNG.createSuiteRunner(TestNG.java:1295)\n    at org.testng.TestNG.createSuiteRunners(TestNG.java:1273)\n    at org.testng.TestNG.runSuitesLocally(TestNG.java:1128)\n    at org.testng.TestNG.runSuites(TestNG.java:1049)\n    at org.testng.TestNG.run(TestNG.java:1017)\n    at org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:114)\n    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:251)\n    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:77)\nCaused by: java.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\n    at java.base/java.lang.reflect.Constructor.newInstance(Unknown Source)\n    at org.testng.internal.ObjectFactoryImpl.newInstance(ObjectFactoryImpl.java:24)\n    ... 25 more\nCaused by: java.lang.NullPointerException\n    at java.base/java.io.FileInputStream.&lt;init&gt;(Unknown Source)\n    at java.base/java.io.FileInputStream.&lt;init&gt;(Unknown Source)\n    at com.pvi.qa.base.TestBase.&lt;init&gt;(TestBase.java:20)\n    at com.pvi.qa.testcases.LoginPageTest.&lt;init&gt;(LoginPageTest.java:17)\n    ... 30 more\n</code></pre>\n\n<p>I have tried everything but not worked for me, Please let me know why I am getting this error. Thanks </p>\n"},{"last_activity_date":1684563802,"question_id":76293177,"body":"<p>Does anyone know how to play sound/audio through eclipse RWT application? RWT application is viewed through a browser and I want play the sound on the browser. I can play sound using Javascript, but this is outside RWT application. I could not find any API to play sound either. So, what is the solution? Thanks.\nJM</p>\n<p>I could not find any method to play the sound through RWT so it plays through the web browser. I can play sound on the server, but that is not what I want.</p>\n"},{"comments":[{"comment_id":46077220,"body":"which java version are you using to run the program?"},{"comment_id":46077480,"body":"Please run your client with <code>-Djavax.net.debug=ssl,handshake</code> and post the output in your question."},{"comment_id":46102403,"body":"I am using <b>OpenJDK Runtime Environment (IcedTea 2.5.4) (7u75-2.5.4-1~trusty1)</b>."}],"answers":[{"comments":[{"comment_id":77420322,"body":"How do you find out which version of security protocol is accepted by the host ?"},{"comment_id":99328796,"body":"@MasterJoe2 You can use nmap for it <code>nmap --script ssl-enum-ciphers -p 443 {HOSTNAME}</code>"}],"answer_id":28966939,"body":"<p>That is a problem of security protocol. I am using TLSv1 but the host accept only TLSv1.1 and TLSv1.2 then I changed the protocol in Java with the instruction below:</p>\n\n<p><code>System.setProperty(\"https.protocols\", \"TLSv1.1\")</code>;</p>\n"},{"comments":[{"comment_id":68340504,"body":"If it is self signed cert, how to resolve this error?"},{"comment_id":68541328,"body":"Add it to your truststore (to the OS-wide one, or define one when starting the JVM with <code>-Djavax.net.ssl.trustStore=...</code> and <code>-Djavax.net.ssl.trustStorePassword=...</code>.)"},{"comment_id":117155598,"body":"@mani_nz, this might give you an idea: <a href=\"https://youtu.be/l4_JIIrMhIQ\" rel=\"nofollow noreferrer\">youtu.be/l4_JIIrMhIQ</a>"},{"comment_id":122620134,"body":"are you 100% sure it is the same error? I find it hard to believe self-signed certificate would cause &quot;SSL peer shut down incorrectly&quot; error."},{"comment_id":122655968,"body":"@eis I was surprised too. But this happened years ago, still with Java SE 8. Since then, there have been a lot of changes in TLS handling, so my answer may not be valid anymore."}],"answer_id":39702783,"body":"<p>Apart from the accepted answer, other problems can cause the exception too. For me it was that the certificate was not trusted (i.e., self-signed cert and not in the trust store).</p>\n\n<p>If the certificate file does not exists, or could not be loaded (e.g., typo in path) can---in certain circumstances---cause the same exception.</p>\n"},{"answer_id":49107469,"body":"<p>You can set protocol versions in system property as :  </p>\n\n<p><strong>overcome ssl handshake error</strong></p>\n\n<pre><code>System.setProperty(\"https.protocols\", \"TLSv1,TLSv1.1,TLSv1.2\");\n</code></pre>\n"},{"answer_id":49269300,"body":"<p>I was facing same issue, for me adding certificate to trust store solved this issue.</p>\n"},{"answer_id":52209638,"body":"<p>I had a similar issue that was resolved by unchecking the option in java advanced security for \"Use SSL 2.0 compatible ClientHello format. </p>\n"},{"answer_id":53350130,"body":"<p>This error is generic of the security libraries and might happen in other cases.\nIn case other people have this same error when sending emails with javax.mail to a smtp server. Then the code to force other protocol is setting a property like this:</p>\n\n<pre><code>prop.put(\"mail.smtp.ssl.protocols\", \"TLSv1.2\");            \n\n//And just in case probably you need to set these too\nprop.put(\"mail.smtp.starttls.enable\", true);    \nprop.put(\"mail.smtp.ssl.trust\", {YOURSERVERNAME});\n</code></pre>\n"},{"answer_id":53639227,"body":"<p>The accepted answer didn't work in my situation, not sure why. I switched from JRE1.7 to JRE1.8 and that resolved the issue automatically. \nJRE1.8 uses TLS1.2 by default</p>\n"},{"answer_id":63349610,"body":"<p>I experienced this exception using a SSL/TLS server Socket library on java 8. Updating the jdk to 14 (and also the VM to 14) solved the issue.</p>\n"},{"answer_id":63624104,"body":"<p>I was having the same issue, as everyone else I suppose.. adding the System.setProperties(....) didn't fix it for me.</p>\n<p>So my email client is in a separate project uploaded to an artifactory.  I'm importing this project into other projects as a gradle dependency.  My problem was that I was using <code>implementation</code> in my build.gradle for <code>javax.mail</code>, which was causing issues downstream.<br />\nI changed this line from <code>implementation</code> to <code>api</code> and my downstream project started working and connecting again.</p>\n"},{"answer_id":64549038,"body":"<p>please close the android studio and remove the file</p>\n<pre><code>.gradle\n</code></pre>\n<p>and</p>\n<pre><code>.idea\n</code></pre>\n<p>file form your project .Hope so it is helpful</p>\n<p>Location:Go to Android studio projects-&gt;your project -&gt;see both file remove (<code>.gradle</code> &amp; <code>.idea</code>)</p>\n"},{"answer_id":65550086,"body":"<p>I had mutual SSL enabled on my Spring Boot app and my Jenkins pipeline was re-building the dockers, bringing the compose up and then running integration tests which failed every time with this error.\nI was able to test the running dockers without this SSL error every time in a standalone test on the same Jenkins machine.\nIt turned out that server was not completely up when the tests started executing.\nPutting a sleep of few seconds in my bash script to allow Spring boot application to be up and running completely resolved the issue.</p>\n"},{"answer_id":67918898,"body":"<p>In my case i was making a request to a system that is using SSLV3.\nSo i have added the following jvm option. And problem got resolved.</p>\n<pre><code>-Dhttps.protocols=&quot;TLSv1,TLSv1.1,TLSv1.2&quot;\n</code></pre>\n"},{"answer_id":68233171,"body":"<p><strong>Sometimes it can be caused due to network issue.</strong>\nDon't know the reason but after switching to other network, the application got build and installed successfully.</p>\n"},{"answer_id":68302773,"body":"<p>Below code worked for me\nYou have to add below configuration in surefire plugin</p>\n<p><code>&lt;configuration&gt; &lt;argLine&gt;-Dhttps.protocols=TLSv1.1&lt;/argLine&gt; &lt;/configuration&gt;</code></p>\n"},{"answer_id":69678859,"body":"<p>For me, setting <code>-Dhttps.protocols=&quot;TLSv1,TLSv1.1,TLSv1.2&quot;</code> (or <code>-Dhttps.protocols=&quot;TLSv1.2&quot;</code> for that matter) didn't work.</p>\n<p>Since I was running the problematic code in a Docker container in an AWS K8S cluster, I found a similar solution in the [AWS Documentation][1]\nAfter setting this system property <code>-Djdk.tls.client.protocols=TLSv1.2</code>, the error was gone.</p>\n<p>[UPDATE]\nAfter deploying this to production, I noticed the behaviour is intermittent: sometimes I emails were getting sent, sometimes they didn't.\nWhilst researching some more, I found that my client was using TLS 1.0 which the server didn't support (it only supported TLS 1.2)\nThe verbose error messages I was getting is this:</p>\n<p><code>javax.net.ssl|SEVERE|10|grpc-default-executor-0|2021-10-22 19:38:48.017 GMT|Logger.java:765|Fatal (HANDSHAKE_FAILURE): Couldn't kickstart handshaking</code></p>\n<p>Finally, after multiple trials, I solved it using the answer from here: <a href=\"https://stackoverflow.com/questions/47166425/how-to-force-javamailsenderimpl-to-use-tls1-2\">How to force JavaMailSenderImpl to use TLS1.2?</a>\n[1]: <a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/security-java-tls.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/security-java-tls.html</a></p>\n"},{"answer_id":69740559,"body":"<p>As @Zigri2612 suggested, what worked for me was to add TLS <code>https.protocols</code>, but i had to do it with white spaces instead of comma separated values:</p>\n<pre><code>System.setProperty(&quot;https.protocols&quot;, &quot;TLSv1 TLSv1.1 TLSv1.2 TLSv1.3&quot;);\n</code></pre>\n"},{"answer_id":70925638,"body":"<p>Check your internet connection, then resync your project.</p>\n"},{"comments":[{"comment_id":134442003,"body":"I had this same issue until I saw your comment &amp; upgraded my Openjdk to the latest, everything got solved. Phew! quite some headache."}],"answer_id":70984874,"body":"<p>I've encountered the same error message but the reason and solution are quite interesting:</p>\n<p><strong>my problem resolved by upgrading the openjdk from 8u40 to 8u191 or higher version 8u312,</strong></p>\n<p><strong>the root cause</strong> is a kind of interoperability issue that seems the client and server are using different padding method or cipher parameter(e.g EC curve) for DH key exchange,</p>\n<p>so if you run out of solutions, probably you may try upgrade your jdk(don't just upgrade to a major version, try to upgrade to a higher minor version first, <em>please note my problem resolved by higher minor version for openjdk8uXXX but still failed with openjdk9</em>)</p>\n<p>you may refer to the whole troubleshooting process at(handshake section):\n<a href=\"https://lyhistory.github.io/docs/software/network/layer4_http_ssl_tls_setup.html\" rel=\"nofollow noreferrer\">https://lyhistory.github.io/docs/software/network/layer4_http_ssl_tls_setup.html</a></p>\n"},{"answer_id":73769193,"body":"<p>For my Spring Boot API consuming app, this issue was caused by being connected to a VPN.</p>\n<p>I tried various work arounds including the accepted answer (I called <code>System.setProperty(&quot;https.protocols&quot;, &quot;TLSv1.1&quot;)</code> in my main function) but nothing worked.</p>\n<p>I disconnected from the VPN and no longer got this error.</p>\n"},{"comments":[{"comment_id":134044610,"body":"Could be a comment"}],"answer_id":75966276,"body":"<p>I Had this problem with Android Studio because <strong>I didn't allow &quot;adb.exe&quot; through windows firewall</strong>. By doing so, the problem was solved.</p>\n"},{"answer_id":75995079,"body":"<p>If using client certificates, it is also possible to trigger an error like this by having an expired, revoked or otherwise untrusted client certificate, particularly if it works for some clients and not for others and software is identical. For some reason Java does not bother checking its own end is somehow sane before complaining about the other end acting unexpectedly.</p>\n<p>Almost any reason a TLS handshake could end unhappily in mid-exchange could be valid trigger for this kind of error.</p>\n<p>Serverside (or general other-side) logs may you give more information about why the handshake was terminated.</p>\n"}],"last_activity_date":1684563760,"question_id":28908835,"body":"<p>I need to make a request through a HTTPS protocol. I wrote the following code:</p>\n\n<pre><code>import java.net.HttpURLConnection;\nimport java.net.URL;\n\nimport org.junit.Test;\n\npublic class XMLHandlerTest {\n    private static final String URL = \"https://ancine.band.com.br/xml/pgrt1_dta_20150303.xml\";\n\n    @Test\n    public void testRetrieveSchedule() {\n        try {\n            HttpURLConnection connection = (HttpURLConnection) new URL(URL).openConnection();\n            connection.setRequestMethod(\"HEAD\");\n            int responseCode = connection.getResponseCode();\n            System.out.println(responseCode);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n\n<p>I got this exception stacktrace with a <strong>java.io.EOFException</strong>:</p>\n\n<pre><code>javax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake\n    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:953)\n    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1332)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1359)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1343)\n    at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:563)\n    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:185)\n    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1301)\n    at java.net.HttpURLConnection.getResponseCode(HttpURLConnection.java:468)\n    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java:338)\n    at br.com.onebr.onesocial.arte1.service.core.scheduler.Arte1XMLHandlerTest.testRetrieveSchedule(Arte1XMLHandlerTest.java:16)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:606)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)\nCaused by: java.io.EOFException: SSL peer shut down incorrectly\n    at sun.security.ssl.InputRecord.read(InputRecord.java:482)\n    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:934)\n    ... 32 more\n</code></pre>\n\n<p>I got successful response from <strong><a href=\"https://google.com\" rel=\"noreferrer\">https://google.com</a></strong> but this error from URL above (<a href=\"https://ancine.band.com.br/xml/pgrt1_dta_20150303.xml\" rel=\"noreferrer\">https://ancine.band.com.br/xml/pgrt1_dta_20150303.xml</a>).</p>\n\n<p>Using PHP, .NET and NodeJS that URL works fine.</p>\n\n<p>Anyone has any idea why this happening?</p>\n"},{"last_activity_date":1684563479,"question_id":76293784,"body":"<p>I want to generate the code coverage of my GWT application. I am getting the correct report using Jacoco code coverage. But for the client code files, I am getting the error of source file not found during report generation. In contrast for the server and shared subfolders, I am getting the proper line-by-line code coverage i.e. their file functions are clickable and redirect to the file to show the covered lines.</p>\n<p>The jacoco coverage code</p>\n<pre><code>&lt;jacoco:coverage destfile=&quot;${local.build.dir}/jacoco.exec&quot; inclnolocationclasses=&quot;true&quot;&gt;\n  &lt;junit printsummary=&quot;yes&quot;\n         fork=&quot;true&quot;\n         dir=&quot;${basedir}&quot;\n         forkmode=&quot;@{aij-forkmode}&quot;\n         haltonfailure=&quot;yes&quot;\n         maxmemory=&quot;2000m&quot;\n         showoutput=&quot;no&quot;&gt;\n    &lt;jvmarg value=&quot;-XX:MaxPermSize=128m&quot;/&gt;\n    &lt;sysproperty key=&quot;gwt.args&quot; value=&quot;-prod -gen ${local.build.dir}/gen -war ${local.build.dir}/build/war&quot; if:true=&quot;@{aij-prod}&quot;/&gt;\n    &lt;sysproperty key=&quot;gwt.args&quot; value=&quot;-devMode -logLevel WARN -war ${local.build.dir}/build/war&quot; unless:true=&quot;@{aij-prod}&quot;/&gt;\n    &lt;sysproperty key=&quot;java.awt.headless&quot; value=&quot;true&quot;/&gt;\n    &lt;classpath refid=&quot;@{aij-testingtarget}.path&quot;/&gt;\n    &lt;formatter type=&quot;xml&quot;/&gt;\n    &lt;!-- If the ant command line sets the test_name property (see above)\n         then we just run that one test. --&gt;\n    &lt;test fork=&quot;true&quot; name=&quot;${test_name}&quot; todir=&quot;${reports.dir}/raw/&quot; if=&quot;test_name&quot;/&gt;\n    &lt;!-- otherwise, we run all the tests --&gt;\n    &lt;batchtest fork=&quot;true&quot; todir=&quot;${reports.dir}/raw/&quot; unless=&quot;test_name&quot;&gt;\n      &lt;fileset dir=&quot;${tests.dir}&quot;&gt;\n        &lt;include name=&quot;@{aij-dir}/**/*Test.java&quot; /&gt;\n        &lt;exclude name=&quot;@{aij-dir}/**/Abstract*Test.java&quot; /&gt;\n      &lt;/fileset&gt;\n    &lt;/batchtest&gt;\n  &lt;/junit&gt;\n  &lt;/jacoco:coverage&gt;\n  \n  &lt;junitreport todir=&quot;${reports.dir}&quot;&gt;\n    &lt;fileset dir=&quot;${reports.dir}/raw/&quot;&gt;\n      &lt;include name=&quot;TEST-*.xml&quot;/&gt;\n    &lt;/fileset&gt;\n    &lt;report format=&quot;frames&quot; todir=&quot;${reports.dir}/html&quot;/&gt;\n  &lt;/junitreport&gt;\n  \n  &lt;jacoco:report&gt;\n    &lt;executiondata&gt;\n      &lt;file file=&quot;${local.build.dir}/jacoco.exec&quot;/&gt;\n    &lt;/executiondata&gt;\n    &lt;structure name=&quot;Coverage Report&quot;&gt;\n      &lt;classfiles&gt;\n           &lt;fileset dir=&quot;${class.dir}&quot;&gt;\n                &lt;exclude name=&quot;**/*.aix&quot;/&gt;\n           &lt;/fileset&gt;\n      &lt;/classfiles&gt;\n      &lt;sourcefiles encoding=&quot;UTF-8&quot;&gt;\n           &lt;fileset dir=&quot;${src.dir}&quot;&gt;\n                &lt;exclude name=&quot;**/*.aix&quot;/&gt;\n           &lt;/fileset&gt;\n      &lt;/sourcefiles&gt;\n    &lt;/structure&gt;\n\n      &lt;html destdir=&quot;${coverage.dir}&quot;/&gt;\n  &lt;/jacoco:report&gt;\n</code></pre>\n<p>The project <a href=\"https://github.com/mit-cml/appinventor-sources/blob/master/appinventor/build.xml\" rel=\"nofollow noreferrer\">build file</a></p>\n<p>The <a href=\"https://github.com/mit-cml/appinventor-sources/blob/master/appinventor/build-common.xml\" rel=\"nofollow noreferrer\">common build</a> file for multiple projects.</p>\n<p>The sub-project <a href=\"https://github.com/mit-cml/appinventor-sources/blob/master/appinventor/appengine/build.xml\" rel=\"nofollow noreferrer\">build file</a> of which client we are not getting the source file.</p>\n<p>Anyone, please help me solve this problem.</p>\n"},{"answers":[{"comments":[{"comment_id":130754027,"body":"How to run a particular integration test? not all"},{"comment_id":133486700,"body":"<a href=\"https://stackoverflow.com/a/5727190/5308115\">stackoverflow.com/a/5727190/5308115</a> @PalakKharbanda"}],"answer_id":50260949,"body":"<p>From <a href=\"https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html\" rel=\"noreferrer\">https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html</a>:</p>\n\n<p><code>mvn install</code> - install the package into the local repository, for use as a dependency in other projects locally</p>\n\n<p><code>mvn verify</code> - run any checks on results of integration tests to ensure quality criteria are met</p>\n\n<p><code>clean</code> is a lifecycle that handles project cleaning. Commands involving <code>clean</code> before it will clear the entire directory, meaning that all the classes have to be recompiled.</p>\n"},{"comments":[{"comment_id":130754005,"body":"How to run a particular integration test? not all @vatbub"}],"answer_id":50261756,"body":"<p><code>mvn verify</code> - as said before - performs any integration tests that maven finds in the project.</p>\n\n<p><code>mvn install</code> implicitly runs <code>mvn verify</code> and then copies the resulting artifact into your local maven repository which you usually can find under <code>C:\\Users\\username\\.m2\\repository</code> if you are using windows.</p>\n\n<p>If you run maven multiple times without the <code>clean</code> command and without changing any source code, you may notice that it says <code>Nothing to compile - all classes are up to date</code> during the compile phase. If you add the <code>clean</code> command <em>before any other command</em>, maven will simply delete the entire <code>target</code> directory resulting in all classes being recompiled.</p>\n"},{"answer_id":75664476,"body":"<p>I would like to add more points to elaborate on the accepted answer.</p>\n<p>Maven has <strong>3</strong> build life cycles <strong>default, clean and site</strong></p>\n<blockquote>\n<p>The default lifecycle handles your project deployment, the clean lifecycle handles project cleaning, while the site lifecycle handles the creation of your project's website.</p>\n</blockquote>\n<p>Each of these life cycles consists of phases. <strong>default</strong> has 23 phases, <strong>clean</strong> has 3 phases and <strong>site</strong> consists of 4 phases.</p>\n<p>(For a complete list of phases please refer to this <a href=\"https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference\" rel=\"nofollow noreferrer\">Lifecycle Reference</a>)</p>\n<ul>\n<li><strong>install</strong> and <strong>verify</strong> are phases in the <strong>default</strong> build lifecycle.</li>\n<li>phases are executed in a sequential manner.\neg : When you execute <code>mvn install</code> it will execute\nall the preceding phases as well.(Which includes <strong>verify</strong> phase)</li>\n</ul>\n<p>Each of the said phases consists of <strong>goals</strong>. Goals are provided by the plugins.</p>\n<p><a href=\"https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#a-build-phase-is-made-up-of-plugin-goals\" rel=\"nofollow noreferrer\">A Build Phase is Made Up of Plugin Goals</a></p>\n<blockquote>\n<p>However, even though a build phase is responsible for a specific step\nin the build lifecycle, the manner in which it carries out those\nresponsibilities may vary. And this is done by declaring the plugin\ngoals bound to those build phases.</p>\n</blockquote>\n<p>So, The outcome of these two commands may differ with the plugins you are using and the phases they are bound to in your project.</p>\n<hr />\n<p>When we execute phases or goals the order of execution is derived from the order we invoke them.</p>\n<p>(ref: <a href=\"https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#a-build-phase-is-made-up-of-plugin-goals\" rel=\"nofollow noreferrer\">Execution Order</a>)</p>\n<blockquote>\n<p>For example, consider the command below. The clean and package\narguments are build phases, while the dependency:copy-dependencies is\na goal (of a plugin).</p>\n</blockquote>\n<pre><code>mvn clean dependency:copy-dependencies package\n</code></pre>\n<p>Don't get confused by the mention of <strong>clean</strong> as a phase here. <strong>clean lifecycle</strong> has a <strong>phase</strong> called <strong>clean</strong> as well.</p>\n<p><a href=\"https://i.stack.imgur.com/ZcE9z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZcE9z.png\" alt=\"enter image description here\" /></a></p>\n<blockquote>\n<p>If this were to be executed, the clean phase will be executed first (meaning it will run all preceding phases of the clean lifecycle, plus the clean phase itself), and then the dependency:copy-dependencies goal, before finally executing the package phase (and all its preceding build phases of the default lifecycle).</p>\n</blockquote>\n<hr />\n<p>In answer to your questions,</p>\n<ol>\n<li><em>What are the differences between Maven's mvn install and mvn verify commands?</em></li>\n</ol>\n<ul>\n<li>mvn verify</li>\n</ul>\n<blockquote>\n<p>In most cases the effect is the same as package. However, in case\nthere are integration-tests, these will be executed as well. And\nduring the verify phase some additional checks can be done, e.g. if\nyour code written according to the predefined checkstyle rules.\n( ref: <a href=\"https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#usual-command-line-calls\" rel=\"nofollow noreferrer\">Usual Command Line Calls</a>, <a href=\"https://maven.apache.org/surefire/maven-failsafe-plugin/\" rel=\"nofollow noreferrer\">FailSafe plugin</a>, <a href=\"https://maven.apache.org/plugins/maven-checkstyle-plugin/check-mojo.html\" rel=\"nofollow noreferrer\">Checkstyle Plugin</a>)</p>\n</blockquote>\n<ul>\n<li>mvn install</li>\n</ul>\n<blockquote>\n<p>install the package into the local repository, for use as a\ndependency in other projects locally.</p>\n</blockquote>\n<ol start=\"2\">\n<li><em>How does the keyword clean modify these commands?</em></li>\n</ol>\n<p>As mentioned before clean is a phase of the <strong>clean lifecycle</strong>. It will run both the pre-clean and clean phases in the clean lifecycle. It will invoke prior to the install and verify phases in each case.</p>\n"}],"last_activity_date":1684561618,"question_id":50260921,"body":"<p>What are the differences between Maven's <code>mvn install</code> and <code>mvn verify</code> commands?</p>\n\n<p>How does the keyword <code>clean</code> modify these commands?</p>\n"},{"comments":[{"comment_id":134537912,"body":"Could you show a concrete example of what you&#39;re trying to do? That is, a minimal reproducible example: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>. It&#39;s hard to glean what the code is like from a description and much better to see the code itself."},{"comment_id":134537918,"body":"If you&#39;ve got a function that operates on a <code>B</code>, how do you expect your constructor to be able to call it on a bunch of objects that implement <code>A</code>, and don&#39;t necessarily implement <code>B</code>?"},{"comment_id":134537938,"body":"@DawoodibnKareem I suppose you&#39;re right I hadn&#39;t thought about that. My constructor will be passing objects which will implement <code>A</code> but not necessarily <code>B</code> and so my function which does need objects to implement <code>B</code> would not accept an <code>A</code>"},{"comment_id":134537949,"body":"It&#39;s possible that your class should be a generic - <code>YourClass&lt;T extends A&gt;</code>, so that you can have a <code>YourClass&lt;A&gt;</code> whose constructor takes a <code>Function&lt;A, String&gt;</code>, and a <code>YourClass&lt;B&gt;</code> whose constructor takes a <code>Function&lt;B, String&gt;</code> and executes it on a bunch of objects that implement <code>B</code>.  But I can&#39;t tell from your question whether that meets your requirements."},{"comment_id":134538040,"body":"This is strongly related to <a href=\"https://stackoverflow.com/questions/2723397/what-is-pecs-producer-extends-consumer-super\">PECS</a> (bordeline duplicate). It sounds like you&#39;re not writing a collection, but Java can&#39;t know that, so it has to apply PECS semantics to all generics."},{"comment_id":134538050,"body":"@yshavit Just stumbled across PECS whilst doing some research on <code>&lt;? super T&gt;</code>. Trying to figure out how this applies to my problem"},{"comment_id":134538090,"body":"If your function takes a parameter of type <code>A</code>, then it&#39;s <b>c</b>onsuming a value of type <code>A</code>. That&#39;s the &quot;C&quot; in &quot;PECS&quot;, so you should use <code>super</code>."},{"comment_id":134538146,"body":"(and if that doesn&#39;t work for your use case, then as @DawoodibnKareem said, you <i>probably</i> need to make the class generic.)"},{"comment_id":134538241,"body":"@DawoodibnKareem This seems like my way forward. Not 100% comfortable with using generics as they make things a little more tricky but will be an interesting learning experience I suppose"}],"answers":[{"comments":[{"comment_id":134538088,"body":"Changing the parameter to type<code>Function&lt;? super B, String&gt; func</code> makes the output of <code>func.apply(a)</code> <code>Object</code> But how does this make sense as the return type of the function referenced by <code>func</code> is specified as <code>String</code> by the generic type argument?"},{"comment_id":134538165,"body":"It compiles fine for me as having a <code>String</code> result: <code>void use(Function&lt;? super B, String&gt; f) { String s = f.apply(null); }</code>"},{"comment_id":134538184,"body":"@Harry no, it doesn&#39;t - <code>the </code>apply()` function of a <code>Function&lt;? super B, String&gt;</code> requires that you pass in a B (so, <code>new B()</code>, or <code>new SomeSubTypeOfB()</code>), and it returns a <code>String</code>."},{"comment_id":134538218,"body":"@rzwitserloot yeah sorry didn&#39;t realize that I&#39;d bumped a button in IntelliJ that changed the return type for some reason :/"}],"answer_id":76293560,"body":"<blockquote>\n<p>s there some way I can achieve passing either a Function&lt;A, String&gt; or a Function&lt;B, String&gt; into the same argument?</p>\n</blockquote>\n<p>Sure:</p>\n<pre><code>public void heyNow(Function&lt;? super B, String&gt; func) {\n  B b = createAnInstanceOfSomethingImplementingB();\n  String answer = func.apply(b);\n}\n</code></pre>\n<p>That works fine.</p>\n<p>Generics are <strong>invariant</strong> - in plain jane java, <code>Number n = new Integer(10);</code> is fine. In generics, it is not; <code>ArrayList&lt;Number&gt; x = new ArrayList&lt;String&gt;();</code> doesn't compile because it shouldn't: After all, you can do this:</p>\n<pre><code>void foo(List&lt;Number&gt; list) {\n  Number n = 5; // n is an integer.\n  list.add(n); // this has to work, right?\n}\n</code></pre>\n<p>So now we just added an integer. Imagine we invoked foo, passing in a <code>new ArrayList&lt;Double&gt;()</code>. We just.... added an integer.... to a list of doubles.</p>\n<p>Oh dear.</p>\n<p>This is why generics are invariant. Because the concept inherently is.</p>\n<p>This is what <code>&lt;? extends&gt;</code> and <code>&lt;? super&gt;</code> are all about: You add some handcuffs to the method (<code>&lt;? extends&gt;</code> means: Can't invoke <code>add</code>, <code>&lt;? super&gt;</code> means: when invoking <code>get()</code>, just get <code>Object</code> back, that's all, i.e. not very useful, i.e. can't usefully invoke <code>get</code>), in trade for allowing different things in the <code>&lt;&gt;</code> to be passed along.</p>\n"}],"last_activity_date":1684561150,"question_id":76293472,"body":"<p>I have an interface like so</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface A {}\n</code></pre>\n<p>and an interface which extends from the previous like so</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface B extends A {}\n</code></pre>\n<p>The constructor of one of my classes takes as parameter a <code>Function&lt;A, String&gt;</code> object. Within the constructor, several objects which implement <code>A</code> are passed into said function to generate a string.</p>\n<p>I would like to be able to pass this constructor a <code>Function&lt;B, String&gt;</code> object, as all classes that implement <code>B</code> implement <code>A</code> by extension. However, when attempting to do this, I am told &quot;Incompatible types: A is not convertible to B&quot;. Which I don't understand as I am trying to convert <code>B</code> to <code>A</code> not <code>A</code> to <code>B</code></p>\n<p>I have tried changing the parameter type from a <code>Function&lt;A, String&gt;</code> to a</p>\n<pre class=\"lang-java prettyprint-override\"><code>Function&lt;? extends A, String&gt;\n</code></pre>\n<p>but alas this doesn't work either.</p>\n<p>Is there some way I can achieve passing either a <code>Function&lt;A, String&gt;</code> or a <code>Function&lt;B, String&gt;</code> into the same argument?</p>\n<p>I am creating a game using the Swing library, and my <code>A</code> is <code>Displayable</code> and <code>B</code> is <code>Purchasable</code>. I have a class <code>DisplayablePanel</code> which extends <code>JPanel</code> and creates a visual representation of any displayable object in my game. All <code>Purchasables</code> are <code>Displayable</code> so I can display them using my <code>DisplayPanel</code> however, I want <code>Purchasables</code> to be able to display <code>Purchasable</code> specific information too. Here my constructor uses the <code>Function&lt;A, String&gt;</code> to decide what text should be displayed on a button that sits on the <code>DisplayPanel</code> And for my <code>Purchasable</code>s this information is specific to the <code>Purchasable</code> interface</p>\n"},{"comments":[{"comment_id":97315132,"body":"According to the official <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html\" rel=\"nofollow noreferrer\">tutorial</a> it doesn&#39;t seem like this is possible, but perhaps there&#39;s a workaround I&#39;m not aware. This is usually why Java libraries put some classes inside a package with the name <code>internal</code>, so consumers of the library are at least aware the API in those classes is internal and might change. Curiously enough, kotlin adds the modifier <code>internal</code>, which does exactly what you want."},{"comment_id":97315254,"body":"As I suspected, there seems to be some ways of doing this. According to Andre Valenti in this question <a href=\"https://stackoverflow.com/questions/6642909/providing-java-library-but-hiding-some-classes\" title=\"providing java library but hiding some classes\">stackoverflow.com/questions/6642909/&hellip;</a> you can use jigsaw modules if you&#39;re in Java 9 or use different Maven modules to expose only the public API."}],"answers":[{"comments":[{"comment_id":53099594,"body":"Thanks, but then I can only access it in the same package. I want to access it from every package inside the module."},{"comment_id":97296391,"body":"protected methods are methods that can be accessed internally by that class, or classes that inherit from it. protected methods will not help you here. Unfortunately, I&#39;m looking into doing the same thing as the OP. The access modifier in C# is called &quot;internal&quot;, not sure what the Java equivalent is."}],"answer_id":32624698,"body":"<p>Change the access modifier of your methods to <code>protected</code> so that the scope of the method remain inside the package and the class which extends it.</p>\n\n<pre><code>public class Ex{\n    protected void test()\n    {\n    }\n}\n</code></pre>\n"},{"answer_id":55293337,"body":"<p>Simple answer is that if you mark your method with modifier <code>public</code>, then it will be accessible by any other classes. </p>\n\n<p>If you want to make your particular classes/interfaces be only visible/accessible inside that module, you can consider applying obfuscation on those classes/interfaces. After obfuscation, they can become meaningless package name. By doing this, you can <em>hide</em> your private classes.</p>\n\n<p>Check more from my answers: </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/52771418/8034839\">Why some package-private classes are not obfuscated by Proguard?</a></li>\n<li><a href=\"https://stackoverflow.com/a/54819736/8034839\">How to Obfuscated Jar or AAR files</a></li>\n</ul>\n"},{"answer_id":68525804,"body":"<p>I was also searching for something similar and thanks to @Fred that I have achieved it.\nFor someone who may be looking for an answer in Kotlin use <strong>internal</strong> modifier.</p>\n<blockquote>\n<p>There are four visibility modifiers in Kotlin: private, protected,\ninternal and public. The default visibility is public</p>\n</blockquote>\n<ul>\n<li><p><strong>private</strong> means visible inside this class only (including all its\nmembers).</p>\n</li>\n<li><p><strong>protected</strong> is the same as private but is also visible in subclasses.</p>\n</li>\n<li><p><strong>internal</strong> means that any client inside this module who sees the\ndeclaring class sees its internal members.</p>\n</li>\n<li><p><strong>public</strong> means that any client who sees the declaring class sees its\npublic members.</p>\n<pre><code> open class Outer {\n\n private val a = 1\n protected open val b = 2\n internal val c = 3\n val d = 4  // public by default\n\n protected class Nested {\n     public val e: Int = 5\n  }\n\n}\n\nclass Subclass : Outer() {\n // a is not visible\n // b, c and d are visible\n // Nested and e are visible\n\n override val b = 5   // 'b' is protected\n }\n\nclass Unrelated(o: Outer) {\n // o.a, o.b are not visible\n // o.c and o.d are visible (same module)\n // Outer.Nested is not visible, and Nested::e is not visible either\n }\n</code></pre>\n</li>\n</ul>\n<p>For detailed explanation and code sample visit <a href=\"https://kotlinlang.org/docs/visibility-modifiers.html#classes-and-interfaces\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"last_activity_date":1684560686,"question_id":32624584,"body":"<p>I have an Android Studio module called <em>app</em>.\nI have another library module called <em>library</em>.</p>\n\n<p>Inside <em>library</em>, i have some packages, like <em>manager</em> or <em>network</em>.\nThe package <em>manager</em> contains a class called <em>SPManager</em> with a static method <em>storeSP()</em></p>\n\n<pre><code>package com.example.library.manager;\n\npublic class SPManager {\n    ______ static void storeSP(){...}\n}\n</code></pre>\n\n<p>Is it possible make <em>storeSP()</em> accessible only within my <em>library</em> module? If i choose package-private (no access modifier), I cannot access it from my <em>network</em> package in the same module. If I choose public, then this method is also accessible from other modules.</p>\n\n<p>Thanks in advance!</p>\n"},{"comments":[{"comment_id":134541170,"body":"<a href=\"https://en.wikipedia.org/wiki/BLAKE_(hash_function)#BLAKE2\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/BLAKE_(hash_function)#BLAKE2</a>"}],"last_activity_date":1684560216,"question_id":76293642,"body":"<p>i want to write java service to generate hash from large file<br />\nit's my code; i want to improve it and run in multi thread, because it take long time for hashing big file like 20G</p>\n<pre><code>import java.io.File;\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport org.bouncycastle.crypto.digests.Blake2bDigest;\nimport org.bouncycastle.crypto.io.DigestInputStream;\nimport org.bouncycastle.util.encoders.Hex;\n\npublic class FileHasher {\n    private static final int BUFFER_SIZE = 8192; // 8 KB buffer\n\n    public static void main(String[] args) {\n        String filePath = &quot;/path/to/your/file&quot;; // Path to the file you want to hash\n\n        try {\n            // Create a Blake2bDigest instance for hashing\n            Blake2bDigest digest = new Blake2bDigest();\n\n            // Create a FileInputStream for reading the file\n            FileInputStream fileInputStream = new FileInputStream(new File(filePath));\n\n            // Create a DigestInputStream for reading and hashing the file\n            DigestInputStream digestInputStream = new DigestInputStream(fileInputStream, digest);\n\n            byte[] buffer = new byte[BUFFER_SIZE];\n            int bytesRead;\n            while ((bytesRead = digestInputStream.read(buffer)) != -1) {\n                // Reading the file will automatically update the digest\n            }\n\n            // Get the final hash value\n            byte[] hash = new byte[digest.getDigestSize()];\n            digest.doFinal(hash, 0);\n\n            // Convert the hash to a hexadecimal string\n            String hexString = Hex.toHexString(hash);\n\n            // Print the hash value\n            System.out.println(&quot;Hash: &quot; + hexString);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>i can not run it in multi thread, is it possible?</p>\n"},{"comments":[{"comment_id":134533681,"body":"Looks like your CSS library is not available to the compiler. Your Java version would not be the cause of that."},{"comment_id":134533696,"body":"There is no library at all. this package is available in both java versions."},{"comment_id":134533723,"body":"package <code>org.w3c.dom.css</code> is available in module jdk.xml.dom in java11"},{"comment_id":134534142,"body":"I can find the <code>org.w3c.dom.css</code> package in the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/jdk.xml.dom/org/w3c/dom/css/package-summary.html\" rel=\"nofollow noreferrer\">java 11 docs</a>, but not in the <a href=\"https://docs.oracle.com/javase/8/docs/api/overview-summary.html\" rel=\"nofollow noreferrer\">java 8 docs</a>. Though, the package does exist in the java 8 <code>rt.jar</code>. It seems like perhaps this package was not part of the public API back in Java 8."},{"comment_id":134534228,"body":"Yes, It could be source of problem. to solve this I could add javax.xml bundle library, but it is delivering much more content which is again against to build later with java 11 as it will fail with multiple sources of packages which are there. I am looking if there is some way how to allow to build such project with some switch allowing to use that package."},{"comment_id":134535583,"body":"If you&#39;re developing for Java 8, install and use a real Java 8 JDK. If you actually mean to use 11, see if you&#39;re accidentally using modules by having created a module-info.java file when you didn&#39;t plan to."},{"comment_id":134537549,"body":"With <code>javac</code>, using <code>--release 8</code> to compile the test program fails as well, using <code>--source 8 --target 8 --boot-class-path &lt;path to rt.jar&gt;</code> works though. Perhaps you could find a similar way of configuring the Eclipse compiler, or switch to <code>javac</code> to compile the project instead."},{"comment_id":134537589,"body":"On the whole though, since your goal is to target Java 8, and this class is not part of the public API of Java 8, it might be better to not use it to avoid further issues (e.g. by switching to a third part XML library that provides the missing functionality, or finding another workaround)."},{"comment_id":134538092,"body":"<code>org.w3c.dom.css</code> is <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/jdk.xml.dom/org/w3c/dom/css/package-summary.html\" rel=\"nofollow noreferrer\">found in Java 20</a>, where the Javadoc says it has been since Java 1.4. Yet Java 8 shows <a href=\"https://docs.oracle.com/javase/8/docs/api/overview-summary.html\" rel=\"nofollow noreferrer\">no such pagkage</a>.  Other org.w3c.dom packages are listed in Java 8, but not the one for CSS. Bizarre, mysterious."},{"comment_id":134553428,"body":"Though not a duplicate, this SO question seems relevant: <a href=\"https://stackoverflow.com/q/51094274/2985643\">Eclipse can&#39;t find XML related classes after switching build path to JDK 10</a>. In particular, <a href=\"https://stackoverflow.com/a/53824670/2985643\">see this authoritative answer</a>...."},{"comment_id":134553447,"body":"Also see Eclipse Bug 536928: <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=536928\" rel=\"nofollow noreferrer\">Imports org.w3c.dom.* and org.xml.sax.* can&#39;t be resolved in the presence of xml-apis.jar</a>"}],"last_activity_date":1684559632,"question_id":76291137,"body":"<p>We have large project which has core part, which needs to be compatible still with java 1.8, but our part is using already java 11.</p>\n<p>we are facing now problem, that we are using java 11 for compilation, but we are compiling with 1.8 target.</p>\n<p>Following simple test class can demonstrate problem with <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/jdk.xml.dom/org/w3c/dom/css/DocumentCSS.html\" rel=\"nofollow noreferrer\"><code>DocumentCSS</code></a> class.</p>\n<pre><code>import org.w3c.dom.css.DocumentCSS;\n\npublic class TestClass {\n    private DocumentCSS testField;\n\n}\n</code></pre>\n<p>In Eclipse I have set Java container to JavaSE-1.8, but I have in eclipse only java 11 available.\nCompiler compliance level is also set to 1.8</p>\n<p>Errors in eclipse:</p>\n<pre><code>DocumentCSS cannot be resolved to a type    TestClass.java  /Test/src   line 5  Java Problem\nThe import org.w3c.dom.css.DocumentCSS cannot be resolved   TestClass.java  /Test/src   line 1  Java Problem\n</code></pre>\n"},{"answers":[{"comments":[{"comment_id":133819888,"body":"【 If &quot;node.next&quot; is set to &quot;null&quot; it would leave a reference to node in next field of the previous node pred&quot;】what is this mean? is&#39;nt &#39;pred.next&#39; pointed to [a valid node after arg-&#39;node&#39;]  or pointed to null if arg-&#39;node&#39; is tail?"},{"comment_id":133821618,"body":"Yes, you are right but...  the issue with setting node.next to null is that if there are other references to node in the system (e.g., other variables, data structures, or threads), then node would still be reachable through those references, even though it has been removed from the list.  In this case, if node.next were set to null, node would still be referenced by the next field of the pred node, which would prevent node from being garbage collected. This is because the garbage collector only collects objects that are no longer reachable by any live thread or reference in the system."},{"comment_id":134484743,"body":"&quot;When the GC encounters a self-loop it knows that the object can be safely garbage collected.&quot; How do you know it will?"}],"answer_id":75865643,"body":"<p>The line &quot;node.next = node;&quot; is used to help the garbage collector (GC) by breaking a potential cycle in the linked list. If &quot;node.next&quot; is set to &quot;null&quot; it would leave a reference to node in next field of the previous node pred which would prevent node from being garbage collected even after it has been removed from the list. By setting &quot;node.next&quot; to node instead, it creates a self-loop, which serves as a clear marker that the node has been removed from the list and is no longer reachable by any other node. When the GC encounters a self-loop it knows that the object can be safely garbage collected.</p>\n<p>Setting node.next to null would not be sufficient to break the cycle if there are other references to node in the system. In contrast, setting node.next to node provides a stronger signal to the GC that node is no longer in use, as it creates a unique reference back to node that cannot be shared by any other object.</p>\n"},{"answer_id":76282825,"body":"<p>This is because of <strong>cross-generational references</strong>, that is, an object in the young gen cannot be collected when an object in the old gen references it.</p>\n<p>Please think of this, when a node gets into the old gen, and later it's dequeued, but you haven't set its next pointer to itself or null. Then when the next node gets dequeued, even though it's unreachable, it still cannot be recycled by minor GC since it's linked by the node in the old gen. And things will get worse and worse until a full GC executes, because it will look for both the young gen and the old gen and collect all the objects that is unreachable.</p>\n<blockquote>\n<p>You can check <a href=\"https://www.infoq.com/presentations/twitter-services/\" rel=\"nofollow noreferrer\">this video</a> starting at minute 23, which illustrates what I mentioned above.</p>\n</blockquote>\n<p>Now we know that it's necessary to cut off the connection to the next node, before it gets dequeued. But why set <code>node.next</code> to itself instead of <code>null</code>. It is because the <code>null</code> value of <code>node.next</code> has a special meaning that this node is at the end of the queue.</p>\n<blockquote>\n<p>As the comment on the property <code>java.util.concurrent.locks.AbstractQueuedSynchronizer.Node#next</code> goes:</p>\n<p><em>The next field of cancelled nodes is set to point to the node itself instead of null, to make life easier for isOnSyncQueue.</em></p>\n</blockquote>\n<p><strong>Basically, it's all because of the way the garbage collector works.</strong> It is fine if the minor GC doesn't collect obj1 in the young gen when obj2 in the old gen that links to obj1 is reachable. Because we're still using obj2. But when obj2 is unreachable, if the minor GC still keeps obj1, it would cause troubles and this requires us to know those details of GC to prevent this happening.</p>\n"}],"last_activity_date":1684559541,"question_id":75865204,"body":"<p>I am reading the source code of AbstractQueuedSynchronizer? I found that the method cancelAcquire() is a bit difficult to understand, THE LAST LINE CONFUSE ME:</p>\n<pre><code>private void cancelAcquire(Node node) {\n        // Ignore if node doesn't exist\n        if (node == null)\n            return;\n\n        node.thread = null;\n\n        // Skip cancelled predecessors\n        Node pred = node.prev;\n        while (pred.waitStatus &gt; 0)\n            node.prev = pred = pred.prev;\n\n        // predNext is the apparent node to unsplice. CASes below will\n        // fail if not, in which case, we lost race vs another cancel\n        // or signal, so no further action is necessary, although with\n        // a possibility that a cancelled node may transiently remain\n        // reachable.\n        Node predNext = pred.next;\n\n        // Can use unconditional write instead of CAS here.\n        // After this atomic step, other Nodes can skip past us.\n        // Before, we are free of interference from other threads.\n        node.waitStatus = Node.CANCELLED;\n\n        // If we are the tail, remove ourselves.\n        if (node == tail &amp;&amp; compareAndSetTail(node, pred)) {\n            pred.compareAndSetNext(predNext, null);\n        } else {\n            // If successor needs signal, try to set pred's next-link\n            // so it will get one. Otherwise wake it up to propagate.\n            int ws;\n            if (pred != head &amp;&amp;\n                ((ws = pred.waitStatus) == Node.SIGNAL ||\n                 (ws &lt;= 0 &amp;&amp; pred.compareAndSetWaitStatus(ws, Node.SIGNAL))) &amp;&amp;\n                pred.thread != null) {\n                Node next = node.next;\n                if (next != null &amp;&amp; next.waitStatus &lt;= 0)\n                    pred.compareAndSetNext(predNext, next);\n            } else {\n                unparkSuccessor(node);\n            }\n\n            node.next = node; // help GC  !!!!CONFUSE ME!!!!\n        }\n    }\n</code></pre>\n<p>As you can see, the last line confuse me:</p>\n<pre><code>node.next = node; // help GC\n</code></pre>\n<p>Why don't just set it to null: node.next=null, it also help gc too. Anyone can help? thanks!</p>\n"},{"answers":[{"comments":[{"comment_id":62203744,"body":"Yes, and I bet there should already be some custom implementations. The question is not only about removals, please see the attached questions in Upd."},{"comment_id":62204849,"body":"Just curious: How many instances is your application typically requesting at once?  If you cannot do it via a bulk request but one after another, will you fail to meet the maximum latency requirements from your customer? If you go for a custom solution: Have you profiled all your application and this is the optimization that will have the most impact? Just asking ;)"},{"comment_id":62204992,"body":"It&#39;s a good question but even if it&#39;s doable in my case it may not be doable in others case. So, the question is more generic than just my case. So, I am searching some kind of reusable solution for such cases. If I don&#39;t find it, I will write my own and post it here :)"}],"answer_id":37342962,"body":"<p>AFAIK this is not possible with annotations. You can use the imperative API, which contains the bulk operations you need, for example <code>Cache.getAll(keySet)</code> and <code>Cache.removeAll(keySet)</code></p>\n"},{"comments":[{"comment_id":116012427,"body":"I just googled what #p0 and that&#39;s just the value of parameter 1 which is jus a reference in hex. You are using a hex reference as key which I think is not appropriate."},{"comment_id":116029918,"body":"@Fernando you&#39;re right, it&#39;s the value of the 1st parameter.  1. what is a hex reference ? 2. why is it not appropriate ?"}],"answer_id":60992530,"body":"<p>For me it worked fine with this config.\nThis is a obfuscated version of my code.</p>\n\n<pre><code>@Cacheable(cacheNames = \"test\", key = \"#p0\")\npublic List&lt;String&gt; getTestFunction(List&lt;String&gt; someIds) {\n</code></pre>\n\n<pre><code>getTestFunction(Arrays.asList(\"A\",\"B\",\"C\"));\n</code></pre>\n\n<pre><code>2020-04-02 15:12:35.492 TRACE 18040 --- [Test worker] o.s.cache.interceptor.CacheInterceptor   : Computed cache key '[A, B, C]' for operation Builder[public java.util.List org.Main.getTestFunction(java.util.List)] caches=[test] | key='#p0' | keyGenerator='' | cacheManager='' | cacheResolver='' | condition='' | unless='' | sync='false'\n</code></pre>\n\n<p>You see that it concatinated strings</p>\n\n<pre><code>... Computed cache key '[A, B, C]' ...\n</code></pre>\n\n<p>My setup:\n/resources/ehcache.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ehcache&gt;\n    &lt;cache name=\"test\"\n           maxBytesLocalHeap=\"1M\"\n           timeToLiveSeconds=\"300\"/&gt;\n&lt;/ehcache&gt;\n</code></pre>\n\n<p>gradle.build</p>\n\n<pre><code>plugins {\n    id \"org.springframework.boot\" version \"2.2.4.RELEASE\"\n    ....\n}\ndependencies {\n    implementation \"org.springframework.boot:spring-boot-starter-cache\"\n    implementation \"org.ehcache:ehcache:3.8.1\"\n    ...\n}\n\n</code></pre>\n"}],"last_activity_date":1684558860,"question_id":37342548,"body":"<p>I have a service which calls external system to retrieve some kind of objects by their external id as well as submit them back to update. Rather than retrieving objects one by one there is a more generic purpose methods:</p>\n\n<pre><code>public interface ExternalSystem {\n    List&lt;ExternalDTO&gt; getObjects(List&lt;String&gt; externalIds);\n\n    void updateObjects(List&lt;ExternalDTO&gt; updates);\n}\n</code></pre>\n\n<p>I would like put a cache on top of the ExternalSystem calls because they are quite expensive.</p>\n\n<p>In the implementation of the service I can simply put spring annotations:</p>\n\n<pre><code>@Cacheable(\"cache-external\")\nList&lt;ExternalDTO&gt; getObjects(List&lt;String&gt; externalIds) {} \n\n@CacheEvict(cacheNames=\"cache-external\", allEntries=true)\nvoid updateObjects(List&lt;ExternalDTO&gt; updates);\n</code></pre>\n\n<p>However, such a cache will behave very badly in case I have a lot of intersection between externalIds, i.e.</p>\n\n<ol>\n<li>Call#1 getObjects([1,2,3,4]) -> cache put by [1,2,3,4] key</li>\n<li>Call#2 getObjects([1,2,3,4,5]) -> cache put by [1,2,3,4,5] key</li>\n<li>Call#3 getObjects([6,7,8,9]) -> cache put by [6,7,8,9] key</li>\n<li>Call#4 updateObjects(<a href=\"https://stackoverflow.com/questions/31220740/spring-cacheable-methods-with-lists\">1</a>) -> evict all the caches but the third cache doesn't contain 3</li>\n</ol>\n\n<p>So, the question is how to implement the custom strategy (I assume it's not doable out-of the box) which will evict only those entries which really should be evicted and will make the keys such a way that intersecting objects are retrieved from the cache?</p>\n\n<p><strong>Upd.</strong> I've found two similar questions:</p>\n\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/13178723/spring-cache-abstraction-with-multi-value-queries\">spring-cache-abstraction-with-multi-value-queries</a>    </li>\n<li><a href=\"https://stackoverflow.com/questions/33657881/what-strategies-exist-for-using-spring-cache-on-methods-that-take-an-array-or-co\">using-spring-cache-on-methods-that-take-an-array-or-collection</a></li>\n<li><a href=\"https://stackoverflow.com/questions/31220740/spring-cacheable-methods-with-lists\">spring-cacheable-methods-with-lists</a></li>\n</ol>\n\n<p><strong>Upd2.</strong>\nHere is something similar to what I want except I will put into cache pairs of String and ExternalDTO for each item in collection.\n<a href=\"http://literatitech.blogspot.ru/2012/07/element-level-caching-of-list-to-list.html\" rel=\"noreferrer\">element-level-caching-of-list-to-list</a></p>\n"},{"comments":[{"comment_id":134539994,"body":"You&#39;ve built the image on a system with an ARM processor, and are trying to run it in an environment with an x86 processor.  See for example <a href=\"https://stackoverflow.com/questions/66982720/keep-running-into-the-same-deployment-error-exec-format-error-when-pushing-nod\">Keep running into the same deployment error (Exec Format Error) when pushing Node.js Docker from local (Apple M1) to Heroku</a>."},{"comment_id":134540543,"body":"If you&#39;re going to build an image on your apple M1 ARM process, you will have to run it on AWS Graviton ARM processors. <a href=\"https://aws.amazon.com/about-aws/whats-new/2021/11/aws-fargate-amazon-ecs-aws-graviton2-processors/\" rel=\"nofollow noreferrer\">aws.amazon.com/about-aws/whats-new/2021/11/&hellip;</a>"},{"comment_id":134541665,"body":"I was able fix by changing the OS architecture to linux ARM when creating task definition in AWS fargate."}],"last_activity_date":1684558602,"question_id":76293575,"body":"<p>I'm trying to run a docker image hosted in AWS ECR from ECS Fargate. But i'm getting below error while running the task.</p>\n<pre><code>exec /usr/java/openjdk-20/bin/java: exec format error\n</code></pre>\n<p>I was able to run this in locally via docker image. I'm using apple M1.\nI'm using java 20.</p>\n<pre><code>FROM openjdk:20\nARG JAR_FILE=target/*.jar\nCOPY ${JAR_FILE} app.jar\nEXPOSE 8080\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]\n</code></pre>\n<p>This is java version in pom file as well.</p>\n<pre><code>&lt;properties&gt;\n    &lt;java.version&gt;20&lt;/java.version&gt;\n&lt;/properties&gt;\n</code></pre>\n"},{"comments":[{"comment_id":134531042,"body":"Well the performance difference is as you noted: you create an entire map unnecessarily. Otherwise (especially through your iterator), you&#39;re faced with essentially the exact same <i>logical</i> operations. The performance difference will come down to the iterator implementation used between your &quot;array&quot; and your <code>HashMap</code>. You could use a stream to the same effect as that end for-loop (but everything is better than the <code>Map</code> in this case): <code>x.stream().map(a -&gt; a.c.b).forEach(B::dosomeoperation);</code> or iterably <code>x.forEach(a -&gt; a.c.b.dosomeoperation());</code>"},{"comment_id":134531088,"body":"In shorter words: the map exists solely to iterate over values of <code>B</code>. You can already get those values of <code>B</code> (the same way you added them to the <code>Map</code>), so why go through the extra work?"}],"answers":[{"answer_id":76289848,"body":"<p>The <code>Map</code> shown in your Question adds no value. It creates an association between the object <code>a</code> and its nested member <code>b</code>. But you already had an association of <code>a</code> to <code>b</code>: the nested field membership <em>is</em> that association.</p>\n<p>If you are performing a single operation on a nested member field, just access that field.</p>\n<p>No need to involve any collections. Creating a collection with no specific purpose, such as ordering/sorting, is just additional work with no benefit.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (A a : x) {\n    a.c.b.dosomeoperation();\n}\n</code></pre>\n<p>Or use streams.</p>\n<pre><code>Arrays\n.stream( x )\n.forEach( \n    ( A a ) -&gt; a.c.b.dosomeoperation()\n) ;\n</code></pre>\n<hr />\n<p>If you have a concern about some complicating factor or operation, revise your Question to explain.</p>\n"}],"last_activity_date":1684558439,"question_id":76289641,"body":"<p>I'm currently working on a Java project and I have a specific scenario where I need to perform operations on a collection of objects. I'm wondering which approach would be more efficient in terms of performance.</p>\n<p>Let's say I have an array <code>x</code> of objects of type <code>A</code>, and each object <code>A</code> has a reference to an object of type <code>B</code> as a member (<code>A.c.b</code>). I need to perform some operation on each <code>B</code> object.</p>\n<p>Approach 1: Creating a map and then iterating over it</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;A, B&gt; map = new HashMap&lt;&gt;();\nfor (A a : x) {\n    map.put(a, a.c.b);\n}\n\nfor (Map.Entry&lt;A, B&gt; entry : map.entrySet()) {\n    entry.getValue().dosomeoperation();\n}\n</code></pre>\n<p>Approach 2: Directly performing the operation on the objects</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (A a : x) {\n    a.c.b.dosomeoperation();\n}\n</code></pre>\n<p>I understand that Approach 2 eliminates the overhead of creating and populating a map, but I'm not sure about the actual performance difference between the two approaches. Could someone with expertise shed some light on this?</p>\n<p>In my specific case, the size of the <code>x</code> array can vary, and I'm interested in optimizing the performance of my code. It would be helpful to understand the potential performance implications of these approaches and any factors I should consider while making a decision.</p>\n<p>Any insights or alternative suggestions would be greatly appreciated. Thank you in advance!</p>\n"},{"comments":[{"comment_id":85793138,"body":"Then don&#39;t add it to your question - Much of the content provide does provide some ideas about how you might solve it.  For example.  You&#39;re providing with a grid which visually shows how a <code>n</code> polygon works, to me, this just looks like an array, so, I might consider working out how to create a 2D array that would allow me to make a <code>n</code> polygon, from there, I&#39;d consider how I might &quot;fill&quot; said array, this would then provide you with some notion of how you might determine the actual size."},{"comment_id":85793142,"body":"Having said all that, it&#39;s very possible that there is a neat and simple mathematical formula which could be used, but I&#39;d probably only see it after going through the creation process"},{"comment_id":85793255,"body":"I solved it, I was doing the operation wrong, but I solved it using this  return (n * n) + ((n-1) * (n-1));  Any way thanks a lot"},{"comment_id":85793270,"body":"Then feel free to post the answer! And great effort! Next time, including a runnable example of your work ;)"}],"answers":[{"answer_id":49395834,"body":"<p>Firstly you have to find a mathematical way to find the area of your n-interesting polygon, than traspose to code. One way is to consider the Area function of a given n-polygon, such as <br>\n<code>Area(n)= (2n-1)^2-2*(n-1)(n)</code>\n<br>\nwhere (2n-1)^2 is the area of the square built over the n-int polygon with side=n+n-1(blue squares plus white squares), than I subtract only the area of white squares (one of this area is (n-1)n/2, I have to mul this with 4 sides so finally we have 2*(n-1)n )</p>\n"},{"answer_id":66424549,"body":"<p>You can do it in the simplest way.\nI set down calculations and found that for:</p>\n<ul>\n<li>n = 1 =&gt; 1</li>\n<li>n = 2 =&gt; 5</li>\n<li>n = 3 =&gt; 13</li>\n<li>n = 4 =&gt; 25</li>\n<li>n = 5 =&gt; 41</li>\n<li>n = 6 =&gt; 61\nSo when I did a calculation of the square of each number:</li>\n<li>n = 1 =&gt; 1 -&gt; 1*1 = 1</li>\n<li>n = 2 =&gt; 5 -&gt; 2*2 = 4, 5-4 = 1</li>\n<li>n = 3 =&gt; 13 -&gt; 3*3 = 9, 13-9=4</li>\n<li>n = 4 =&gt; 25 -&gt; 4*4 = 16, 25-16=9</li>\n<li>n = 5 =&gt; 41 -&gt; 5*5 = 25, 41-25=16</li>\n<li>n = 6 =&gt; 61 -&gt; 6*6 = 36, 61-36=25</li>\n</ul>\n<p>Then I figured out formula :\nn^2 + (n-1)*(n-1)</p>\n"},{"answer_id":76293452,"body":"<p>I did it a little more of a rudimentary way than others here.</p>\n<p>I saw that lines above/below the middle follow the same formula (2n - 1) for the area.</p>\n<p>The top and the bottom are mirrored. So, I looped only half of the height. Each time it looped I added (2n-1) to the total area then I subtracted 1 from n.</p>\n<p>After the loop is finished I multiplied the area by 2 to get the bottom/top area. I then combined that with the middle area.</p>\n<p>Hope that helps!</p>\n"}],"last_activity_date":1684554995,"question_id":49395603,"body":"<p>If you can explain to me, not only solve it, it will really be incredible.</p>\n\n<p>FIRST: It's an exercise that my teacher gave me, it really does not have any value in my grades, but I'm trying to solve it, and I can't when I do the tests says</p>\n\n<p>Input:\nn: 3\nOutput:\n10\nExpected Output:\n13\nConsole Output:\nEmpty</p>\n\n<p>Here is the question:</p>\n\n<p>Below we will define an n-interesting polygon. Your task is to find the area of a polygon for a given n.</p>\n\n<p>A 1-interesting polygon is just a square with a side of length 1. An n-interesting polygon is obtained by taking the n - 1-interesting polygon and appending 1-interesting polygons to its rim, side by side. You can see the 1-, 2-, 3- and 4-interesting polygons in the picture below.<a href=\"https://i.stack.imgur.com/eT6c6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eT6c6.png\" alt=\"enter image description here\"></a></p>\n"},{"comments":[{"comment_id":134537453,"body":"BitSet will use 64 bit long integers, so the space consumption is padded to the next highest multiple of 64 bits.  You could implement your own bit set using a different underlying type, though on most JVMs the integral types smaller than int will still take up 32 or 64 bits to satisfy alignment requirements in the underlying architecture."},{"comment_id":134537454,"body":"Why does <code>size()</code> not returning 9 matter to you? Or put another way, how does <code>size()</code> returning 9 help?"},{"comment_id":134537456,"body":"If you&#39;re looking to save bitsets in the file, the size of the object isn&#39;t relevant, it should be noted."},{"comment_id":134537459,"body":"You mention that this is for file compression purposes, in that case I recommend strongly that you do not work with <code>ArrayList&lt;Boolean&gt;</code> <i>nor</i> <code>BitSet</code>, or any other bit-by-bit thing really. That&#39;s not how serious implementations of file compression work, it&#39;s too inefficient. If you show how you wanted to use these, I (or someone else) can probably show you how to do it with integers and not working one bit at the time."},{"comment_id":134537471,"body":"@harold Im making an implementation of the huffman algorithm"},{"comment_id":134537475,"body":"@Sweeper because I am making an implementation of the Huffman algorithm, so having extra ceros might lead to adding further characters in the decompressed version of the file, something that is not desirable"},{"comment_id":134537477,"body":"@Laughcheeta1 OK I have some old answers that may be useful to you such as one for <a href=\"https://stackoverflow.com/a/53308838/555045\">Huffman coding for a large file takes too long</a>, but I could write one that fits your specific situation if you add more context of how your program does things"},{"comment_id":134537478,"body":"@LeviRamsey what do you mean by &quot;size of the object isn&#39;t relevant&quot;? does it still occupy the same space?"},{"comment_id":134537483,"body":"@harold sure thing, I&#39;m going to edit the question right now to give further conext"},{"comment_id":134537527,"body":"Internally it is a long[]... so 64 bit steps (per one long) are minimum"},{"comment_id":134537546,"body":"@harold I finished the whole context"},{"comment_id":134537559,"body":"The problem seems (only) in: &quot;I print the Bitset to console&quot;!?"},{"comment_id":134537569,"body":"If you <i>know</i> <code>9</code>, then just print 9 (and not <code>size()</code>)(bits)...another approach: try <code>BitSet.toString()</code> ..and <code>stream()</code> is cool (since 1.8;)"},{"comment_id":134537585,"body":"Safer than <code>9</code> (no out of/under bounds;): <code>length()</code> &quot;..the logical size of bitset...&quot;"},{"comment_id":134537597,"body":"<code>cardinality()</code> is equivalent to &quot;length of&quot; <code>steam()</code>....<code>length()</code> is equivalent to max/last element of <code>stream()</code>"},{"comment_id":134537635,"body":"@xerx593 using cardinality does not work in this case, since in the Huffman algorithm the zeros are as important as ones."},{"comment_id":134537646,"body":"Yes, If we need &quot;fixed size&quot; representation...we have to pass down that &quot;fixed size&quot; to the &quot;print method&quot; (&quot;map to char sequence&quot;..method:)"},{"comment_id":134537661,"body":"@xerx593 sadly yes, this is ultimately the only solution to my specific case."},{"comment_id":134537670,"body":"BitSet is not final!;) (You can add fields/override methods (almost) as you wish;) ...and the solution is not that bad/is straightforward..it only &quot;fills zeros&quot;(!)(if..compared with the <code>length()</code> approach)"}],"answers":[{"comments":[{"comment_id":134537554,"body":"Sure thing, thanks. But something strange is that I tried using length(), but it returned a 0, even tho it should return an 8 (as the last &quot;true&quot; bit is in the position 7)"},{"comment_id":134537568,"body":"@Laughcheeta1 <a href=\"https://ideone.com/MCwxQR\" rel=\"nofollow noreferrer\">Cannot reproduce</a>."},{"comment_id":134537581,"body":"Using <code>length</code> won&#39;t be suitable either as leading zeroes are (or at least <i>can be</i>) significant to Huffman codes. You&#39;d have to keep track of which bits are &quot;real&quot; and which exist only internally in the <code>BitSet</code> .. or just use something else"},{"comment_id":134537588,"body":"@harold Ah I see. I don&#39;t know the details of Huffman codes, and so OP&#39;s comment confused me. The advice could still be helpful to future readers, I think, so I won&#39;t edit it out."},{"comment_id":134537660,"body":"Use the first bit to mark the start. Yes, you have to flip it."}],"answer_id":76293239,"body":"<p>Notice what the constructor's <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/BitSet.html#%3Cinit%3E(int)\" rel=\"noreferrer\">documentation</a> says:</p>\n<blockquote>\n<p>Creates a bit set whose initial size is large enough to explicitly represent bits with indices in the range <code>0</code> through <code>nbits-1</code>.</p>\n</blockquote>\n<p>The phrase &quot;large enough&quot; is key here. This constructor is not supposed to create a bit set that is <em>exactly</em> the size you specified - just <em>large enough</em> to store the number of bits you specified.</p>\n<p>Also note this paragraph in the class documentation:</p>\n<blockquote>\n<p>Every bit set has a current size, which is the number of bits of space currently in use by the bit set. Note that the size is related to the implementation of a bit set, so it may change with implementation.</p>\n</blockquote>\n<p><code>BitSet</code>, at least in OpenJDK, is implemented by using a <code>long[]</code>. This explains why you see 64. The least it can do to create a bit set that is &quot;large enough&quot; to store 9 bits, is to allocate a <code>long[]</code> with length 1. A single <code>long</code> is 64 bits.</p>\n<p>I don't think it is even <em>possible</em> in the JVM to implement a bit set that can store <em>exactly</em> 9 bits. Even if you use a <code>boolean[]</code> to back it, each <code>boolean</code> is still one byte (as you may know already).</p>\n<blockquote>\n<p>so having extra ceros might lead to adding further characters in the decompressed version of the file</p>\n</blockquote>\n<p>If that is the case, you can check the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/BitSet.html#length()\" rel=\"noreferrer\"><code>length</code></a> of the <code>BitSet</code>. It gives you how many bits there are in the bit set, minus the leading zero bits.</p>\n"},{"answer_id":76293335,"body":"<p>As I hinted at in the context of the question, I decided to have an extra int variable that keeps track of the amount of bits that I am using, since there is no other way that does not affect the Huffman algorithm to solve this.</p>\n<p>Note that this is a solution that only applies for this very specific case, It is not a way to solve the problem of the BitSet.size() method not returning the actual size of the array. Since there is no work aroung this, please take your time to read the comments on the post, specially since they give awesome explanations of how BitSets work and may help you in your case.</p>\n"},{"answer_id":76293359,"body":"<blockquote>\n<p>One way to fix this would be to include the correct size of the encoded message in the CompressFile class, so when I decompress it, I only check the exact number of bits</p>\n</blockquote>\n<p>You will need at least one of:</p>\n<ul>\n<li>The number of characters in the uncompressed file, which is nice to have anyway.</li>\n<li>An &quot;end&quot; symbol, that does not correspond to any character but signals to stop decoding.</li>\n<li>The exact number of encoded bits, but it's more annoying to work with.</li>\n</ul>\n<p>The number of encoded bits may not exactly fill a number of bytes (nor anything bigger like <code>long</code>s), so there can be some extra bits at the end that do not code for anything - but they may accidentally look like valid Huffman codes. So you need <em>something</em> to tell you where to stop.</p>\n<p>A <code>BitSet</code> doesn't remember its &quot;exact length&quot;, and its <code>length</code> method ignores leading zeroes even if they <em>are</em> part of the data, but a <code>BitSet</code> plus an extra integer (<code>long</code> if you want) can work. Or as mentioned by Johannes Kuhn, you may prepend an extra set bit that isn't part of the actual data, that way <code>length</code> <em>would</em> work (remember to ignore the extra bit during decompression, of course).</p>\n<hr />\n<blockquote>\n<p>Once we have this, we give this HashMap to another function that creates the &quot;encodedText&quot;, this is an ArrayList that stores the encoded version of the tex, we do this by going by every char in the .txt, and adding the encoded value of that char to the &quot;encodedText&quot; variable (recall that the encoded value of a char is saved also as an ArrayList in a HashMap).</p>\n</blockquote>\n<p>You should avoid creating at least the large ArrayList that represents the entire compressed data, since it will be much bigger than the actual data that it represents (it uses one <code>Boolean</code> per bit after all).</p>\n<p>If you stuff the bits into bytes/integers/a <code>BitSet</code> <em>while</em> converting the characters to their encoded values, there is no &quot;temporary expansion&quot; anymore.</p>\n<p>Putting <code>ArrayList&lt;Boolean&gt;</code> and <code>BitSet</code> aside for the moment, if you represented your codes as pairs of integers, using one integer for the length of the code and another integer to store the bits of the code, you can efficiently encode your data without doing any bit-by-bit iteration. This limits the lengths of the codes to at most 32 (or 64 if you use <code>long</code>), but efficient table-based decoding requires a limit too and very long codes are not required for good compression anyway, a limit of 32 is already <em>way</em> into the diminishing returns, much smaller limits are common in practice (eg 16) and you'd get more out of switching to <a href=\"https://en.wikipedia.org/wiki/Asymmetric_numeral_systems\" rel=\"nofollow noreferrer\">ANS</a> as several modern compression formats have.</p>\n"},{"answer_id":76293397,"body":"<p>To quickly answer your first inquiry, in terms of how the <code>BitSet</code> is creating a set larger than your requested amount, this is because there is no definitive way to represent 1 bit of memory.<br />\nAt this rate, even a <code>boolean</code> is occupying 1 byte of space, despite only needing 1 bit, arguably.<br />\nSo, it appears <code>BitSet</code> is utilizing a <code>long</code> to store the values.</p>\n<p>If this is too deviated from the required logic you're needing, you can attempt to create your own class, and implement the procedures as needed.</p>\n<p>It depends on the how you intend to utilize the bits.</p>\n<p>You mention the following.</p>\n<blockquote>\n<p>I am making a program that compress .txt files, [it] is crucial for me to use BitSets intead of booleans, if anyone knows another way to manipulate single bits in java, it can also be helpful.</p>\n</blockquote>\n<p><code>BitSet</code> is essentially the class you're looking for.</p>\n"}],"last_activity_date":1684552912,"question_id":76293211,"body":"<p>I have the following code:</p>\n<pre><code> private BitSet arrayListToBitSet(ArrayList&lt;Boolean&gt; code) {\n                // The problem is here, the bitset automatically is created using 64 bits even tho we are clearly \n                    // giving it a max size in constructor, and in the test we are running,\n                    // we are only using 9 bits, leading to the rest of the bits being automatically 0, so we need to\n                    // search for a way that the size of the bitset is exactly the size of the array list &quot;code&quot;\n                int x = code.size(); // With the test I'm running, x = 9;\n                BitSet bitset = new BitSet(x);\n                System.out.println(bitset.size());\n        \n                for (int i = 0; i &lt; x; i++)\n                {\n                    bitset.set(i, code.get(i));\n                }\n        \n                return bitset;\n        }\n</code></pre>\n<p>The System.out.println() is showing 64 on console, even tho it should show only 9.</p>\n<p>And even when I hard coded 9 into the constructor of BitSet, it still returned that the size of the bitset is 64. As I am making a program that compress .txt files, is is crucial for me to use BitSets intead of booleans, or if anyone knows another way to manipulate single bits in java, it can also be helpful.</p>\n<p>In the documentation of BitSet.size() just says the following</p>\n<pre><code>public int size()\nReturns the number of bits of space actually in use by this BitSet to represent bit values. The maximum element in the set is the size - 1st element.\nReturns:\nthe number of bits currently in this bit set \n</code></pre>\n<ul>\n<li>Docs.Oracle</li>\n</ul>\n<p>And this really does not help much to my problem.\nAnyone knows the reason this happens? and how to fix it? Thanks a lot.</p>\n<p>More context:\nWhat I am doing is an implementation of the huffman algorithm to compress .txt files given, to a new class called &quot;CompressedFile&quot; that is going to be stored in the pc memory.</p>\n<p>What happens before the above method is that we count the chars in the text and save them to a hashmap, with this hashmap we then create the Huffman tree, once we have the Huffman tree, we use it for getting the huffman enconding for each one of the chars in the text, each of the code for a given char are saved in another HashMap with this value pairs:</p>\n<p>(char, ArrayList), the code is an ArrayList of booleans for now because of the problem with the BitSets.</p>\n<p>Once we have this, we give this HashMap to another function that creates the &quot;encodedText&quot;, this is an ArrayList that stores the encoded version of the tex, we do this by going by every char in the .txt, and adding the encoded value of that char to the &quot;encodedText&quot; variable (recall that the encoded value of a char is saved also as an ArrayList in a HashMap).</p>\n<p>Once we have the complete Huffman code, is where this arrayListToBitSet method comes into play, it converts the encodedText in ArrayList version, to a BitSet version, that is the one that is going to be stored in the CompressedText class.</p>\n<p>The .txt file we are using for test purposes is just this: &quot;aaabbc&quot;</p>\n<p>After the getting the Huffman tree and getting each character encoded version, the value pairs look like this (im gonna use 0 and 1, as to not write True and False):</p>\n<p>(a, 0)\n(b, 11)\n(c, 10)</p>\n<p>Therefore the encodedVersion of the text will look like this:\n000111110</p>\n<p>when this ArrayList is converted to BitSet, the output (I print the Bitset to console) looks like this:\n0001111100000000000... (another 42 ceros) ... 00</p>\n<p>So the first 9 bits are correct, but the following 53 bits shouldn't be there, and are cero. If I were to leave it like this this is what the decoded text would look like:</p>\n<p>aaabbcaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa...</p>\n<p>very different from the original. One way to fix this would be to include the correct size of the encoded message in the CompressFile class, so when I decompress it, I only check the exact number of bits, but I want to know if there is a way to not have to save this integer in the class (this would save me 8 bytes, not much in the grand scheme of things, coming to be 8 chars, but the purpose is to use as less memory as possible). Still if there is no other way, I will put that original size into the CompressedFile class.</p>\n<p>Thanks in advance for the help :)</p>\n"},{"comments":[{"comment_id":134537723,"body":"<a href=\"https://sqa.stackexchange.com/questions/49864/selenium-java-unable-to-close-advertisement-in-webpage\">Selenium + Java: Unable to close Advertisement in webpage</a> sound similar and what you are trying to solve"}],"last_activity_date":1684551450,"question_id":76293353,"body":"<p>I'm trying to learn test automation and I've been trying to automate a website by using Java Selenium Webdriver but I am not able to skip google ads.</p>\n<p>I tried to click them by using JS Executer or by the method swich.alerts();\nBut ads are sometimes visible but sometimes not. They also have different xpath or css everytime.</p>\n<p>I installed Adblock and add those lines below but couldn't solve my problem.</p>\n<pre><code>ChromeOptions options = new ChromeOptions();\n                        options.addArguments(&quot;--remote-allow-origins=*&quot;);\n                        driver = new ChromeDriver(options);\n                        options.addExtensions(new File(&quot;... /my path/...&quot;));\n</code></pre>\n<p>So I'm stuck at that point. Without not passing that part, I cannot continue to automate the other parts of the website. I don't know what to do. Any help would be appreciated.\n<a href=\"https://i.stack.imgur.com/j8z9O.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"comments":[{"comment_id":134537775,"body":"Please do not use quote format for code. Use multiline code format."}],"last_activity_date":1684551427,"question_id":76293352,"body":"<p>How to open some decompiled java files; using Eclipse IDE for Java Developers; that where decompiled using jd-GUI; i am doing it to search this code:</p>\n<p>void Agregar () {</p>\n<blockquote>\n<p>String dni-txtDni.getText();\nString nom-txtNom.getText();\nif (dni.equals(&quot;&quot;) || nom.equals(&quot;&quot;)) {\nJOptionPane.showMessageDialog(null, &quot;Cajas estan Vacias...!!!&quot;);\n}else{\nString sql=&quot;insert into persona (DNI, Nombres) values ('&quot;+dni+&quot;', '&quot;+nom+&quot;')&quot;; try {\ncn=con.getConnection();\n}\nI\nst=cn.createStatement ();\nst.executeUpdate (sql);\ncatch (Exception e) {</p>\n</blockquote>\n<p>in the opened file; using Eclipse IDE for Java Developers ?</p>\n<p>i have tried the following: first i decompiled some . jar, .class, .form and .java files with jd-GUI; then i saved the decompiled files with the same tool; then i extracted the decompiled zip files i saved thit the previously mentioned tool; i have installed Bitbucket and Sourcetree and have tried to make what this topic how to do it explanation video: <a href=\"https://www.youtube.com/watch?v=b0PfatTVDwY;\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=b0PfatTVDwY;</a> tell you must do; but i failed following video instructions at 1 second; because; it shows you need to create a GBC-service; and i don´t know how to do it; and when i install Sourcetree its ask me if i want to register from Bitbucket or its server; and i don´t know which i need to use; to do the video process; and i can´t do what the video author has done until 1 second of video playing</p>\n"},{"answers":[{"answer_id":75792154,"body":"<p>Import your client.pem and client-key.pkcs8 into a java key store with <code>openssl</code> and java <code>keytool</code> like <a href=\"https://www.wowza.com/docs/how-to-import-an-existing-ssl-certificate-and-private-key#:%7E:text=You%20can%27t%20directly%20import,12%20file%20into%20your%20keystore.\" rel=\"nofollow noreferrer\">this</a>. It is possible to use a pem cert and a pkcs8 secret key directly but that is much more difficult to use them with java system properties.</p>\n<p>Convert your pem style cacerts to a jks called cacerts.jks. I don't know what's in your cacerts.pem but doing this is similar to the previous step.</p>\n<p>Allow the trusting of your server cacerts for server responses as follows:</p>\n<pre><code>System.setProperty(&quot;javax.net.ssl.trustStore&quot;, &quot;cacerts.jks&quot;)\n</code></pre>\n<p>Add the inclusion of the client cert in RestTemplate calls: (assuming your created jks and password are &quot;myKeystore.jks&quot; &amp; &quot;changeit&quot; respectively)</p>\n<pre><code>System.setProperty(&quot;javax.net.ssl.keyStore&quot;,  &quot;myKeystore.jks&quot;);\nSystem.setProperty(&quot;javax.net.ssl.keyStorePassword&quot;, &quot;changeit&quot;);\n</code></pre>\n<p>Force only TLSv1.2</p>\n<pre><code>System.setProperty(&quot;jdk.tls.client.protocol&quot;, &quot;TLSv1.2&quot;);\n</code></pre>\n<p>You may need to do the previous with a Java command line option <code>‑Djdk.tls.client.protocols=&quot;TLSv1.2&quot;</code></p>\n"},{"answer_id":76293341,"body":"<p>Starting with Spring Boot 3.1, you can configure the certificates and then apply them to the <code>RestTemplate</code> with a small amount of code.</p>\n<p>Given your <code>curl</code> example above, you might configure an SSL bundle with the name <code>rest</code> in an <code>application.yaml</code> file like this:</p>\n<pre><code>spring:\n  ssl:\n    bundle:\n      pem:\n        rest:\n          keystore:\n            certificate: &quot;/etc/identity/client/certificates/client.pem&quot;\n            private-key: &quot;/etc/identity/client/keys/client-key.pkcs8&quot;\n          truststore: \n            certificate: &quot;/etc/pki_service/ca/cacerts.pem&quot;\n</code></pre>\n<p>With this configuration, you can create a <code>RestTemplate</code> bean using the <code>SslBundle</code> named <code>rest</code>:</p>\n<pre><code>@Configuration\npublic class RestTemplateConfiguration {\n\n    @Bean\n    public RestTemplate sslRestTemplate(RestTemplateBuilder builder, SslBundles sslBundles) {\n        SslBundle sslBundle = sslBundles.getBundle(&quot;rest&quot;);\n        return builder.rootUri(&quot;https://server.com&quot;).setSslBundle(sslBundle).build();\n    }\n\n}\n</code></pre>\n<p>See the latest <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.ssl\" rel=\"nofollow noreferrer\">Spring Boot documentation</a> for more details.</p>\n"}],"last_activity_date":1684550988,"question_id":75783226,"body":"<p>I would like to make the following curl call using RestTemplate in my Spring Boot application:</p>\n<pre><code>curl -v --tlsv1.2 --cacert /etc/pki_service/ca/cacerts.pem --cert /etc/identity/client/certificates/client.pem -key /etc/identity/client/keys/client-key.pkcs8 https://server.com\n</code></pre>\n<p>I have gone through a similar question: <a href=\"https://stackoverflow.com/questions/29646094/using-resttemplate-to-send-authorization-certificates\">Using RestTemplate to send authorization certificates</a> and <a href=\"https://stackoverflow.com/questions/1666052/java-https-client-certificate-authentication\">Java HTTPS client certificate authentication</a>, but not getting concrete steps to achieve exactly the same thing.</p>\n<p>Could anyone please help here? Thanks.</p>\n"},{"answers":[{"answer_id":76293307,"body":"<p>Change the logic of your application so that only the logged user sees its own information, adding conditions to the query. Don't do that at the database level. SQLite doesn't even implement access control with permissions like bigger databases. The user that connects to the database sees all the information. It should be a different user than your application users.</p>\n"}],"last_activity_date":1684549705,"question_id":76290622,"body":"<p>How do I get the currently logged-in user using SQLite in Android Studio?</p>\n<p>I'm very new to Android Studio and SQLite. I am writing this &quot;To Do Tasks&quot; app where users can register/login and write down/edit/delete their tasks. I have a 'users' table and a 'tasks' table. The tasks table has a foreign key referencing the 'username' of the 'users' table.  Right now every task is visible to every user and the foreign key value is always null. The problem is that as far as I understand you can't simply get the logged-in user in SQLite. Can someone suggest an idea on how to access the logged in user every time, so that the tasks are only visible to their corresponding user?</p>\n"},{"comments":[{"comment_id":83866036,"body":"im also facing same problem . have you got any solution ?"}],"answers":[{"comments":[{"comment_id":73153446,"body":"What about run-time permissions?"}],"answer_id":43034030,"body":"<p>add this tag to your manifest :</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.CALL_PHONE\" /&gt;\n</code></pre>\n\n<p>and for runTimePermission :</p>\n\n<pre><code>if (ActivityCompat.checkSelfPermission(context, Manifest.permission.CALL_PHONE) != PackageManager.PERMISSION_GRANTED) {\n                        ActivityCompat.requestPermissions(activityCompat, new String[]{Manifest.permission.CALL_PHONE}, 123);\n                        return;\n                    }\n                    context.startActivity(localIntent4);\n</code></pre>\n\n<p>.\n.\n.\n.</p>\n\n<pre><code>public void onRequestPermissionsResult(int requestCode, String[] permissions,\n                                       int[] grantResults) {\n    for (int grantResult : grantResults) {\n        if (grantResult == PackageManager.PERMISSION_DENIED) {\n            return;\n        }\n    }\n    if (ActivityCompat.checkSelfPermission(this, Manifest.permission.CALL_PHONE) != PackageManager.PERMISSION_GRANTED) {\n        return;\n    }\n    startActivity(localIntent4 );\n}\n</code></pre>\n\n<blockquote>\n  <p>localIntent4 is the intent that you are using .</p>\n</blockquote>\n\n<p><strong>EDIT :</strong></p>\n\n<p>also you need to set this flag to your intent</p>\n\n<pre><code>            localIntent4.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n</code></pre>\n"}],"last_activity_date":1684549671,"question_id":41302051,"body":"<p>I am listing all the contacts from the phone and call a viber intent opening viber app directly from my android app.I found some example online but all are too old may be couple of years before and none of them have worked for me.</p>\n\n<pre><code>Uri uri = getUriFromPhoneNumber(phoneNumber, context);\n    if (uri != null) {\n\n        Intent localIntent4 = new Intent(\"com.viber.voip.action.CALL\");\n        localIntent4.setType(\"vnd.android.cursor.item/vnd.com.viber.voip.call\");\n        localIntent4.setData(Uri.parse(\"tel:\" + uri));\n        startActivity(localIntent4);\n\n        }else {\n        Toast.makeText(context, \"Number is not in Viber Contacts List\", Toast.LENGTH_LONG).show();\n    }\n</code></pre>\n\n<p>I have included read_contacts permission in my androidmanifest.xml file.\nBut upon this always throws security exception.One solution i was recommended was to include </p>\n\n<pre><code>activity android:name=\"com.ujjwalmainali.univhub.TestActivity\"\n        android:launchMode=\"singleInstance\"\n        android:exported=\"true\"\n        android:screenOrientation=\"portrait\"&gt;\n</code></pre>\n\n<p>android:exported=\"true\" but this didn't work for me.What is wrong here.What kind of permission do i need to make intent call.</p>\n\n<p>Here is the logcat of the exception</p>\n\n<pre><code>java.lang.SecurityException: Permission Denial: starting Intent { act=com.viber.voip.action.CALL dat=tel:xxxxxxxxxxxxx.xxxxxxx.xxxxxxxxxxxxxxxxx cmp=com.viber.voip/.phone.PhoneFragmentActivity } from ProcessRecord{271db4b9 3911:com.ujjwalmainali.univhub/u0a219} (pid=3911, uid=10219) not exported from uid 10204\n    at android.os.Parcel.readException(Parcel.java:1549)\n    at android.os.Parcel.readException(Parcel.java:1502)\n    at android.app.ActivityManagerProxy.startActivity(ActivityManagerNative.java:2463)\n    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1619)\n    at android.app.Activity.startActivityForResult(Activity.java:3761)\n    at android.support.v4.app.BaseFragmentActivityJB.startActivityForResult(BaseFragmentActivityJB.java:48)\n    at android.support.v4.app.FragmentActivity.startActivityForResult(FragmentActivity.java:77)\n    at android.app.Activity.startActivityForResult(Activity.java:3722)\n    at android.support.v4.app.FragmentActivity.startActivityForResult(FragmentActivity.java:859)\n    at android.app.Activity.startActivity(Activity.java:4032)\n    at android.app.Activity.startActivity(Activity.java:4000)\n    at com.ujjwalmainali.univhub.TestActivity.callToViberContact(TestActivity.java:57)\n    at com.ujjwalmainali.univhub.TestActivity$1.onClick(TestActivity.java:33)\n    at android.view.View.performClick(View.java:4785)\n    at android.view.View$PerformClick.run(View.java:19869)\n    at android.os.Handler.handleCallback(Handler.java:739)\n    at android.os.Handler.dispatchMessage(Handler.java:95)\n    at android.os.Looper.loop(Looper.java:155)\n    at android.app.ActivityThread.main(ActivityThread.java:5696)\n    at java.lang.reflect.Method.invoke(Native Method)\n    at java.lang.reflect.Method.invoke(Method.java:372)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1028)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:823)\n</code></pre>\n"},{"last_activity_date":1684549410,"question_id":76293296,"body":"<p>When studying the LMAX disruptor I noticed that it uses the ring buffer model using the busy spin model with the CAS (compare-and-swap) to avoid locks like those that exist in a blocking queue, but what are the differences and advantages when comparing using ConcurrentLinkedQueue which also has no locks and also uses CAS?</p>\n<p>I noticed that both use CAS inside a loop and avoid locks and waits between threads, but I couldn't understand the point where they diverge.</p>\n"},{"answers":[{"answer_id":24450569,"body":"<p>If <code>application.yml</code> contains errors it will cause a failure on startup. I guess it depends what you mean by \"error\" though. Certainly it will fail if the YAML is not well formed. Also if you are setting <code>@ConfigurationProperties</code> that are marked as <code>ignoreInvalidFields=true</code> for instance, or if you set a value that cannot be converted. That's a pretty wide range of errors.</p>\n\n<p>The active profiles will probably be logged on startup by the <code>Environment</code> implementation (but in any case it's easy for you to grab that and log it in your launcher code - the <code>toString()</code> of teh <code>Environment</code> will list the active profiles I think). Active profiles (and more) are also available in the /env endpoint if you add the Actuator.</p>\n"},{"comments":[{"comment_id":43475792,"body":"I adopted the approach of logging the results of <code>getEnvironment().getActiveProfiles()</code>, as part of start-up logging in my application <code>main</code> method."},{"comment_id":105963453,"body":"it seems like spring is doing it by default nowadays: <code>INFO 22067 --- [           main] com.example.MainApplication : The following profiles are active: dev</code>"}],"answer_id":25985710,"body":"<p>I had the same problem, and wish there was a debug flag that would tell the profile processing system to spit out some useful logging. One possible way of doing it would be to register an event listener for your application context, and print out the profiles from the environment. I haven't tried doing it this way myself, so your mileage may vary. I think maybe something like what's outlined here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/8686507/how-to-add-a-hook-to-the-application-context-initialization-event\">How to add a hook to the application context initialization event?</a></p>\n\n<p>Then you'd do something like this in your listener:</p>\n\n<pre><code>System.out.println(\"Active profiles: \" + Arrays.toString(ctxt.getEnvironment().getActiveProfiles()));\n</code></pre>\n\n<p>Might be worth a try. Another way you could probably do it would be to declare the Environment to be injected in the code where you need to print the profiles. I.e.:</p>\n\n<pre><code>@Component\npublic class SomeClass {\n  @Autowired\n  private Environment env;\n  ...\n  private void dumpProfiles() {\n    // Print whatever needed from env here\n  }\n}\n</code></pre>\n"},{"comments":[{"comment_id":69663085,"body":"This printed out nothing for me."},{"comment_id":69821952,"body":"Nothing? Do you mean not even &quot;**** APPLICATION PROPERTIES SOURCES ****&quot; is printed on @PostConstruct? First, I woud make sure PropertiesLogger object is created at all in your application. Maybe some digging around @EnableAutoConfiguration may help."},{"comment_id":69825430,"body":"I mean it printed out &quot;**** APPLICATION PROPERTIES SOURCES ****&quot; followed by nothing followed by &quot;**** APPLICATION PROPERTIES VALUES ****&quot; followed by nothing."},{"comment_id":72217731,"body":"Works, but one problem with this is this only works after all beans constructed. If some bean throws exception on construct, property logs are not available."},{"comment_id":83407128,"body":"@DanielH&#225;ri I&#39;ve asked and answerd a question about this problem: <a href=\"https://stackoverflow.com/questions/48212761/how-to-log-all-active-properties-of-a-spring-boot-application-before-the-beans-i/48212783#48212783\" title=\"how to log all active properties of a spring boot application before the beans i\">stackoverflow.com/questions/48212761/&hellip;</a>"},{"comment_id":88468218,"body":"I also only got the output pacoverflow got.  I found this answer to be what I wanted:  <a href=\"https://stackoverflow.com/a/48212783/9910\">stackoverflow.com/a/48212783/9910</a>"}],"answer_id":37392817,"body":"<p>Actuator /env service displays properties, but it doesn't displays which property value is actually active. Very often you may want to override your application properties with </p>\n\n<ul>\n<li>profile-specific application properties</li>\n<li>command line arguments</li>\n<li>OS environment variables</li>\n</ul>\n\n<p>Thus you will have the same property and different values in several sources. </p>\n\n<p>Snippet bellow prints active application properties values on startup:</p>\n\n<pre><code>@Configuration\npublic class PropertiesLogger {\n    private static final Logger log = LoggerFactory.getLogger(PropertiesLogger.class);\n\n    @Autowired\n    private AbstractEnvironment environment;\n\n    @PostConstruct\n    public void printProperties() {\n\n        log.info(\"**** APPLICATION PROPERTIES SOURCES ****\");\n\n        Set&lt;String&gt; properties = new TreeSet&lt;&gt;();\n        for (PropertiesPropertySource p : findPropertiesPropertySources()) {\n            log.info(p.toString());\n            properties.addAll(Arrays.asList(p.getPropertyNames()));\n        }\n\n        log.info(\"**** APPLICATION PROPERTIES VALUES ****\");\n        print(properties);\n\n    }\n\n    private List&lt;PropertiesPropertySource&gt; findPropertiesPropertySources() {\n        List&lt;PropertiesPropertySource&gt; propertiesPropertySources = new LinkedList&lt;&gt;();\n        for (PropertySource&lt;?&gt; propertySource : environment.getPropertySources()) {\n            if (propertySource instanceof PropertiesPropertySource) {\n                propertiesPropertySources.add((PropertiesPropertySource) propertySource);\n            }\n        }\n        return propertiesPropertySources;\n    }\n\n    private void print(Set&lt;String&gt; properties) {\n        for (String propertyName : properties) {\n            log.info(\"{}={}\", propertyName, environment.getProperty(propertyName));\n        }\n    }\n\n}\n</code></pre>\n"},{"comments":[{"comment_id":88835860,"body":"Edited my response and added the sample code. In case you are wondering, for my app I don&#39;t enumerate all properties there, just check the critical ones. But the Environment you receive in the Banner is a ConfigurableEnvironment, so you can iterate over getPropertySources() and enumerate from the sources that implement EnumerablePropertySource."}],"answer_id":47513769,"body":"<p>In case you want to get the active profiles before initializing the beans/application, the only way I found is registering a custom Banner in your SpringBootServletInitializer/SpringApplication (i.e. ApplicationWebXml in a JHipster application).</p>\n\n<p>e.g.\n</p>\n\n<pre><code>@Override\nprotected SpringApplicationBuilder configure(SpringApplicationBuilder builder)\n{\n    // set a default to use when no profile is configured.\n    DefaultProfileUtil.addDefaultProfile(builder.application());\n    return builder.sources(MyApp.class).banner(this::printBanner);\n}\n\n/** Custom 'banner' to obtain early access to the Spring configuration to validate and debug it. */\nprivate void printBanner(Environment env, Class&lt;?&gt; sourceClass, PrintStream out)\n{\n    if (env.getProperty(\"spring.datasource.url\") == null)\n    {\n        throw new RuntimeException(\n            \"'spring.datasource.url' is not configured! Check your configuration files and the value of 'spring.profiles.active' in your launcher.\");\n    }\n    ...\n}\n</code></pre>\n\n<p></p>\n"},{"comments":[{"comment_id":99147348,"body":"none of these solutions work for me to get anything with @ConfigurationProperties"},{"comment_id":99202663,"body":"@berlinguyinca Hi! What version of spring boot do you use? And why are you talking about @ConfigurationProperties? This method is for showing applied configuration properties from merged <code>application.yml &lt;- application-some-profile.yml &lt;- etc</code> or <code>same with application.properties</code> files at runtime. And I don&#39;t get how it is connected to @ConfigurationProperties."},{"comment_id":99210975,"body":"version 2.x and we basically want to see the default values of all defined ConfigurationPropertie annotations."},{"comment_id":99297588,"body":"@berlinguyinca just tried on Spring Boot 2.1.5.RELEASE project - works as expected &#175;_(ツ)_/&#175;"},{"comment_id":99406502,"body":"yes the issue was, its not printing default values, only values which are explicitly set in the yaml file or set on the command line. But I wanted to print all possible configuration properties. Including defaults and not just explicitly specified ones."},{"comment_id":131061526,"body":"It does NOT work with spring-boot 2.5.14: my app has no <code>PropertySource</code> with <code>applicationConfig</code> in its name. It works if you remove the condition on the name and you get also system properties. Note also that Java and Kotlin implementations are not strictly equivalent since the second one casts to <code>EnumerablePropertySource</code> instead of <code>MapPropertySource</code>."},{"comment_id":134537351,"body":"Did not work for me with Spring Boot 2.7.10 / Java 17.  But I posted separate <a href=\"https://stackoverflow.com/a/76293145/1357094\">Answer</a> that does work with those versions."},{"comment_id":134537417,"body":"but I think this Answer here is similar to <a href=\"https://www.baeldung.com/spring-boot-log-properties#1-logging-all-properties\" rel=\"nofollow noreferrer\">baeldung.com/&hellip;</a>"}],"answer_id":48021072,"body":"<p>In addition to other answers: logging active properties on context refreshed event.</p>\n<p>Java 8</p>\n<pre><code>package mypackage;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.context.event.ContextRefreshedEvent;\nimport org.springframework.context.event.EventListener;\nimport org.springframework.core.env.ConfigurableEnvironment;\nimport org.springframework.core.env.MapPropertySource;\nimport org.springframework.stereotype.Component;\n\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.List;\n\n@Slf4j\n@Component\npublic class AppContextEventListener {\n\n    @EventListener\n    public void handleContextRefreshed(ContextRefreshedEvent event) {\n        printActiveProperties((ConfigurableEnvironment) event.getApplicationContext().getEnvironment());\n    }\n\n    private void printActiveProperties(ConfigurableEnvironment env) {\n\n        System.out.println(&quot;************************* ACTIVE APP PROPERTIES ******************************&quot;);\n\n        List&lt;MapPropertySource&gt; propertySources = new ArrayList&lt;&gt;();\n\n        env.getPropertySources().forEach(it -&gt; {\n            if (it instanceof MapPropertySource &amp;&amp; it.getName().contains(&quot;applicationConfig&quot;)) {\n                propertySources.add((MapPropertySource) it);\n            }\n        });\n\n        propertySources.stream()\n                .map(propertySource -&gt; propertySource.getSource().keySet())\n                .flatMap(Collection::stream)\n                .distinct()\n                .sorted()\n                .forEach(key -&gt; {\n                    try {\n                        System.out.println(key + &quot;=&quot; + env.getProperty(key));\n                    } catch (Exception e) {\n                        log.warn(&quot;{} -&gt; {}&quot;, key, e.getMessage());\n                    }\n                });\n        System.out.println(&quot;******************************************************************************&quot;);\n    }\n}\n</code></pre>\n<p>Kotlin</p>\n<pre><code>package mypackage\n\nimport mu.KLogging\nimport org.springframework.context.event.ContextRefreshedEvent\nimport org.springframework.context.event.EventListener\nimport org.springframework.core.env.ConfigurableEnvironment\nimport org.springframework.core.env.MapPropertySource\nimport org.springframework.stereotype.Component\n\n@Component\nclass AppContextEventListener {\n\n    companion object : KLogging()\n\n    @EventListener\n    fun handleContextRefreshed(event: ContextRefreshedEvent) {\n        printActiveProperties(event.applicationContext.environment as ConfigurableEnvironment)\n    }\n\n    fun printActiveProperties(env: ConfigurableEnvironment) {\n        println(&quot;************************* ACTIVE APP PROPERTIES ******************************&quot;)\n        env.propertySources\n                .filter { it.name.contains(&quot;applicationConfig&quot;) }\n                .map { it as EnumerablePropertySource&lt;*&gt; }\n                .map { it -&gt; it.propertyNames.toList() }\n                .flatMap { it }\n                .distinctBy { it }\n                .sortedBy { it }\n                .forEach { it -&gt;\n                    try {\n                        println(&quot;$it=${env.getProperty(it)}&quot;)\n                    } catch (e: Exception) {\n                        logger.warn(&quot;$it -&gt; ${e.message}&quot;)\n                    }\n                }\n        println(&quot;******************************************************************************&quot;)\n    }\n}\n</code></pre>\n<p>Output like:</p>\n<pre><code>************************* ACTIVE APP PROPERTIES ******************************\nserver.port=3000\nspring.application.name=my-app\n...\n2017-12-29 13:13:32.843  WARN 36252 --- [           main] m.AppContextEventListener        : spring.boot.admin.client.service-url -&gt; Could not resolve placeholder 'management.address' in value &quot;http://${management.address}:${server.port}&quot;\n...\nspring.datasource.password=\nspring.datasource.url=jdbc:postgresql://localhost/my_db?currentSchema=public\nspring.datasource.username=db_user\n...\n******************************************************************************\n</code></pre>\n"},{"answer_id":75744549,"body":"<p>If you want to log few active config values from application.yml file during the startup of your spring boot application.\nYou have to use ApplicationReadyListener Class from spring framework like this:</p>\n<pre><code>public class ApplicationReadyListener implements ApplicationListener&lt;ApplicationReadyEvent&gt; {\n\n@Value(&quot;${key:defaultValue}&quot;)\nprivate String keyValue;\n\n@Override\npublic void onApplicationEvent(final ApplicationReadyEvent event) {\n  log.info(&quot;Active config value for key is: {}&quot;, keyValue);\n}\n</code></pre>\n"},{"answer_id":76293145,"body":"<p><em>If you want to print configuration properties</em></p>\n<h1>Java 17, Spring Boot 2.7.10</h1>\n<p>(tested with non-YAML)</p>\n<p>Just add this class anywhere in your Spring Boot project's <code>src</code>:</p>\n<pre><code>package your.package;\n\nimport org.springframework.boot.env.OriginTrackedMapPropertySource;\nimport org.springframework.context.event.ContextRefreshedEvent;\nimport org.springframework.context.event.EventListener;\nimport org.springframework.core.env.ConfigurableEnvironment;\nimport org.springframework.stereotype.Component;\n\nimport java.util.Collection;\n\n@Component\npublic class AppContextEventListener {\n\n    @EventListener\n    public void printProperties(ContextRefreshedEvent contextRefreshedEvent) {\n        System.out.println(&quot;************************* ACTIVE PROPERTIES *************************&quot;);\n\n        ((ConfigurableEnvironment) contextRefreshedEvent.getApplicationContext().getEnvironment())\n            .getPropertySources()\n            .stream()\n            .filter(ps -&gt; ps instanceof OriginTrackedMapPropertySource)\n            // Convert each PropertySource to its properties Set\n            .map(ps -&gt; ((OriginTrackedMapPropertySource) ps).getSource().entrySet())\n            .flatMap(Collection::stream)\n            // Print properties within each Set\n            .forEach(property -&gt; System.out.println(property.getKey() + &quot;=&quot; + property.getValue()));\n\n        System.out.println(&quot;*********************************************************************&quot;);\n    }\n\n}\n</code></pre>\n<p>prints out something like:</p>\n<pre><code>...\n************************* ACTIVE PROPERTIES ***********************\nproperty - your.property.0: yourValue0\nproperty - your.property.1: yourValue1\nproperty - your.property.2: yourValue2\n*******************************************************************\nStarted YourApp in n.nnn seconds (JVM running for m.mmm)\n...\n</code></pre>\n"}],"last_activity_date":1684545831,"question_id":24448947,"body":"<p>I would really like to use YAML config for Spring Boot, as I find it quite readable and useful to have a single file showing what properties are active in my different profiles. Unfortunately, I'm finding that setting properties in <code>application.yml</code> can be rather fragile.</p>\n\n<p>Things like using a tab instead of spaces will cause properties to not exist (without warnings as far as I can see), and all too often I find that my active profiles are not being set, due to some unknown issue with my YAML.</p>\n\n<p>So I was wondering whether there are any hooks that would enable me to get hold of the currently active profiles and properties, so that I could log them.</p>\n\n<p>Similarly, is there a way to cause start-up to fail if the <code>application.yml</code> contains errors? Either that or a means for me to validate the YAML myself, so that I could kill the start-up process.</p>\n"},{"comments":[{"comment_id":134537220,"body":"To clarify your question, you&#39;d like to traverse the structure and return a list of all the <code>Person</code> objects, and those objects should have the properly nested <code>Person</code> list, in the event they have children?"},{"comment_id":134540781,"body":"Please edit the question. It will help if you show <i>both</i> example input and desired result. I suggest adding one to three additional people in the example.  In addition, please consider presenting the code as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal Reproducible Example</a>, which should include the relevant parts of <code>class Person</code>."}],"answers":[{"answer_id":76292728,"body":"<p>For each person you have the &quot;children&quot; information given. That implicitly makes that person the children's parent. And looking at your data it is very much recursive, but if you prefer it could be solved with iterations as well. Depends on how you host the objects in memory.</p>\n<p>So loop over all persons (with/without recursion). With that person (named P) iterate over all the children (named C). Set the child's parent relationship to P.</p>\n<p>In some improved version of your program you could, before setting the child's parent check if no parent was registered before, or if a parent was set it should be no different to the parent you would set it to. That way you could validate some of the input data.</p>\n<p>No code example as this question sounds a bit like a homework assignment.</p>\n"},{"answer_id":76293173,"body":"<p>Here is an algorithm; I haven't adapted your code since I don't have access to many of the objects.</p>\n<p>You're right, a recursive call is what you need to accomplish this, although I'm sure there are other measures available.</p>\n<p>Let's consider the following, a class to hold the information, call it <code>Person</code>.<br />\nI've additionally provided an overridden <code>toString</code> method, so we can print the information out.</p>\n<pre class=\"lang-java prettyprint-override\"><code>static class Person {\n    String name;\n    int age;\n    List&lt;Person&gt; children;\n\n    Person(String name, int age) {\n        this.name = name;\n        this.age = age;\n    }\n\n    Person(String name, int age, List&lt;Person&gt; children) {\n        this.name = name;\n        this.age = age;\n        this.children = children;\n    }\n\n    @Override\n    public String toString() {\n        String string = &quot;'%s', %d, &quot;.formatted(name, age);\n        if (children == null)\n            return string + &quot;no children&quot;;\n        else {\n            if (children.size() == 1) return string + &quot;1 child&quot;;\n            else return string + children.size() + &quot; children&quot;;\n        }\n    }\n}\n</code></pre>\n<p>From here, I've created a class, call it <code>Example</code>, which contains a single field, and a method.<br />\nThe field is a <code>List</code> of <code>Person</code>, which we'll use to hold the data generated by the recursive method.<br />\nThe method is a recursive function, which will traverse the given list, and add the person to the list.<br />\nSubsequently, if the person has children, they will be added to the list as well, by making a recursive call, and providing the list.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Person&gt; persons = new ArrayList&lt;&gt;();\n\nvoid persons(List&lt;Person&gt; list) {\n    for (Person person : list) {\n        persons.add(person);\n        if (person.children != null) {\n            persons(person.children);\n        }\n    }\n}\n</code></pre>\n<p>In a separate method, I populated a list, for demonstration purposes.<br />\nIt is equivalent to the example data you supplied, with the same names, ages, and children.</p>\n<p>If I run the class and print <code>persons</code>, I get the following data.</p>\n<pre class=\"lang-none prettyprint-override\"><code>'John', 18, no children\n'Lisa', 32, 1 child\n'Tyler', 7, no children\n'Mike', 90, 1 child\n'Derek', 50, 2 children\n'Mary', 25, no children\n'Beth', 16, no children\n</code></pre>\n<p>So, if I'm correct, given these procedures, you could change your <code>loadPersons</code> method to the following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void loadPersons(String id) {\n    ListPersonsApi.Request request = Jso.create();\n    request.id = id;\n    List&lt;Person&gt; list = new ArrayList&lt;&gt;();\n    dispatcher.send(ListPersonsApi.PATH, request, r -&gt; {\n        for (ListPersonsApi.persons p : r.persons)\n            list.add(new Person(p.name, p.age, p.children));\n    });\n    persons(list);\n}\n</code></pre>\n"}],"last_activity_date":1684545557,"question_id":76291041,"body":"<p>Say each Person here has 3 key value pairs, name, age, and children. I want to iterate through the potentially endlessly nested list and create a new &quot;Parent&quot; model from each person. From each person model I need to create a List of Person models for each level of nesting, and if a particular person has a children, the children property on that Person model will contain a subsequent List of the correct children. (Note the main resulting nesting list of Persons is stored elsewhere in memory, I just need help creating them like in my example)</p>\n<pre><code>\nExample Structure:\n\nPersons\n- Person\n- Person\n    - Person\n- Person\n    - Person\n        - Person\n        - Person\n\nEach Person above has a name, age, and children property.\n\nex. \n{Persons: \n    [name: John, age: 18, children: null},\n     {name: Lisa, age: 32, children: [{ name: Tyler, age: 7, children: null}],\n     {name: Mike, age: 90, children: [{name: Derek, age 50, children: \n                                                 [{name: Mary, age:25, children: null},\n                                                 {name: Beth, age:16, children: null}]}]};\n     \n</code></pre>\n<p>Recursion is not my strongest area and i'm struggling greatly with how to loop through a potentially very deep nested object. I know this is very wrong as i'm only covering the first layer of nesting. I think I should use a createPerson method like I wrote at the bottom, and use a recursive function to but I'm struggling a lot. Any insight is hugely appreciated!</p>\n<p>ListPerson API returns Persons[] persons</p>\n<pre><code>private void loadPersons(String id) {\n\n    ListPersonsApi.Request request = Jso.create();\n    request.id = id;\n\n    dispatcher.send(ListPersonsApi.PATH, request, r-&gt; {\n\n        for (ListPersonsApi.persons p : r.persons) {\n\n            List&lt;Person&gt; persons = new ArrayList&lt;&gt;();\n            PersonModel person = new Person();\n            person.name = p.name;\n            person.age = p.age;\n            persons.add(person);\n            parent.children = persons;\n            \n            // Everything below this is wrong of course but its the logic I was thinking of using\n            List&lt;Person&gt; children = p.children;\n            while(children != null) {\n               for (ListPersonsApi.persons q : p.children) {\n                   createPerson(p, q)\n                   children = children.children;\n        }\n    })\n}\n\n       \nprivate void createPerson(PersonModel parent, p) {\n\n        List&lt;Person&gt; persons = new ArrayList&lt;&gt;();\n        PersonModel person = new Person();\n        person.name = p.name;\n        person.age = p.age;\n        persons.add(person);\n        parent.children = persons;\n}\n    \n</code></pre>\n"},{"answers":[{"answer_id":4131469,"body":"<p>Via Maven:</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;javax.inject&lt;/groupId&gt;\n  &lt;artifactId&gt;javax.inject&lt;/artifactId&gt;\n  &lt;version&gt;1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Or from the Project Home Page: <a href=\"http://code.google.com/p/atinject/\" rel=\"noreferrer\">http://code.google.com/p/atinject/</a></p>\n\n<p>Also, <a href=\"http://mvnrepository.com/artifact/javax.inject/javax.inject/1\" rel=\"noreferrer\">this MvnRepository.com page</a> provides the necessary configurations for other build tools like Ivy, Gradle etc.</p>\n"},{"comments":[{"comment_id":134534376,"body":"That looks like a couple dozen packages bundled together.  I would advise against using this unless you both need all of them and know that none of them are being pulled into your project individually.  I think that artifact would have been better had it simply listed dependencies on the others, rather than completely repacking them into one."}],"answer_id":15315850,"body":"<p>You can use Sun's official:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax&lt;/groupId&gt;\n    &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\n    &lt;version&gt;6.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Cheers!</p>\n"},{"answer_id":16979487,"body":"<p>Using <code>javaee-api</code> instead of <code>javax.inject</code> I ran into a bunch of issues.</p>\n\n<p>After some digging I found out that you need to add it with scope provided or otherwise it will add a Listener (<code>com.sun.faces.config.ConfigureListener</code>) at runtime.</p>\n\n<p>Another issue is that apparently the implementation to inject is different. Fields annotated with <code>@inject</code> remained null. By replacing the official sun jar with the <code>javax.inject</code>, this no longer happened. </p>\n\n<p>Note that i'm not an expert, I might be running into side-effects, but figuring this out took me such a long time, that I felt I had to share my findings so far.</p>\n"},{"answer_id":76291734,"body":"<p><a href=\"https://stackoverflow.com/a/4131469/507761\">Sean's answer</a> on <a href=\"https://mvnrepository.com/artifact/javax.inject/javax.inject\" rel=\"nofollow noreferrer\"><code>javax.inject:javax.inject</code></a> is great, but note also that the modern version of this library is <a href=\"https://mvnrepository.com/artifact/jakarta.inject/jakarta.inject-api\" rel=\"nofollow noreferrer\"><code>jakarta.inject:jakarta.inject-api</code></a> (<a href=\"https://github.com/jakartaee/inject\" rel=\"nofollow noreferrer\">source code</a>).  The artifact was renamed to that starting with <code>1.0</code> (different from <code>1</code>), but the classes were kept in the <code>javax.inject</code> package for backwards compatibility.  Starting with <code>2.0.0</code>, the classes are now in the <code>jakarta.inject</code> package.</p>\n<p>It's possible to pull in both the old v1 artifact and v2.0.0+ of the new artifact if you need to support both packages, which is a fairly common case in large projects with a mix of older and newer dependencies.  Maven config:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;javax.inject&lt;/groupId&gt;\n  &lt;artifactId&gt;javax.inject&lt;/artifactId&gt;\n  &lt;version&gt;1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;jakarta.inject&lt;/groupId&gt;\n  &lt;artifactId&gt;jakarta.inject-api&lt;/artifactId&gt;\n  &lt;version&gt;2.0.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<hr />\n<p>Note also that there are alternative providers of these classes.  Some of the ones most likely to run into:</p>\n<ul>\n<li><code>javax:javaee-api</code>, as mentioned in <a href=\"https://stackoverflow.com/a/15315850/507761\">Darko's answer</a></li>\n<li><code>javax.inject:inject</code></li>\n<li><code>javax.inject:inject-api</code></li>\n<li><code>javax.inject:jsr330-api</code>, and <em>many</em> other artifacts with <code>jsr330</code> in the name</li>\n<li><code>org.glassfish.hk2.external:javax.inject</code></li>\n</ul>\n<p>I recommend <a href=\"https://maven.apache.org/enforcer/enforcer-rules/bannedDependencies.html\" rel=\"nofollow noreferrer\">using <code>maven-enforcer-plugin</code> to ban</a> these dependencies.  When it detects them and fails, you can add <a href=\"https://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html#dependency-exclusions\" rel=\"nofollow noreferrer\">dependency exclusions</a> to prevent them from being pulled in transitively.  Just make sure to have an explicit dependency on the official version replacing it; otherwise, you may hit runtime issues.</p>\n<p>There are also shaded versions bundled into other libraries that move the classes into an entirely different package; there's nothing you can do about that (at least not simply), but it should be fine since they won't conflict.</p>\n<hr />\n<p>Finally, note that while modern versions of <a href=\"https://github.com/google/guice\" rel=\"nofollow noreferrer\">the Guice injection framework</a> support one or both of the official implementations (Jakarta support was added in Guice 6.0 and 7.0), support was somewhat lacking in older versions.  If you use an older version of Guice (prior to 4.2 in my experience), you might need to use their version: <code>com.google.inject.Inject</code> from <a href=\"https://mvnrepository.com/artifact/com.google.inject/guice\" rel=\"nofollow noreferrer\"><code>com.google.inject:guice</code></a>.</p>\n"}],"last_activity_date":1684544974,"question_id":4131190,"body":"<p>I'm following the MVC unit test instructions from <a href=\"http://www.scarba05.co.uk/blog/2010/03/integration-testing-of-springs-mvc-annotation-mapppings-for-controllers/\" rel=\"noreferrer\">this site</a>,\nbut I cannot find the jar for the <code>@Inject</code> annotation.  Does anybody know where the jar is?</p>\n"},{"comments":[{"comment_id":127204150,"body":"<a href=\"https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2020.0-Release-Notes#known-issues\" rel=\"nofollow noreferrer\">github.com/spring-cloud/spring-cloud-release/wiki/&hellip;</a> ribbon was removed in 3.0.1 release"}],"answers":[{"comments":[{"comment_id":127203840,"body":"Thanks but how I need to update the Java code? I think that the issue here is code deprecation?"},{"comment_id":127204790,"body":"@PeterPenzov Sorry, I was thinked it&#39;s a dependency issue, but I updated the answer, look if helped you. Thanks!"}],"answer_id":71988333,"body":"<p>Searching more about... I found an issue in this <a href=\"https://github.com/opentracing-contrib/java-spring-cloud/issues/312\" rel=\"nofollow noreferrer\">topic</a>:</p>\n<blockquote>\n<p>spring-cloud-netflix-ribbon has been removed from SpringCloud with <a href=\"https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2020.0-Release-Notes#breaking-changes\" rel=\"nofollow noreferrer\">this version</a></p>\n</blockquote>\n<p>Then you need to add the <code>spring-cloud-starter-loadbalancer</code> dependency to your project.</p>\n<pre><code>implementation 'org.springframework.cloud:spring-cloud-starter-loadbalancer:3.1.1'\n</code></pre>\n<p>Spring Cloud OpenFeign <a href=\"https://cloud.spring.io/spring-cloud-static/spring-cloud-openfeign/2.2.0.RC2/reference/html/#spring-cloud-feign-overriding-defaults\" rel=\"nofollow noreferrer\">official reference</a> in <code>1.2 Overriding Feign Defaults</code> section:</p>\n<blockquote>\n<p><strong>Client feignClient:</strong> if Ribbon is in the classpath and is enabled it is a <strong>LoadBalancerFeignClient</strong>,</p>\n<p>otherwise if Spring Cloud LoadBalancer is in the classpath,\n<strong>FeignBlockingLoadBalancerClient</strong> is used.</p>\n<p>If none of them is in the classpath, the default feign client is used.</p>\n</blockquote>\n<p>So you can try to use the <code>FeignBlockingLoadBalancerClient</code> in the <code>LoadBalancerConfig</code>:</p>\n<pre><code>import feign.Client;\nimport feign.httpclient.ApacheHttpClient;\nimport org.apache.http.conn.HttpClientConnectionManager;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.springframework.cloud.client.loadbalancer.LoadBalancerClient;\nimport org.springframework.cloud.loadbalancer.support.LoadBalancerClientFactory;\nimport org.springframework.cloud.openfeign.loadbalancer.FeignBlockingLoadBalancerClient;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class LoadBalancerConfig {\n    @Bean\n    public Client client(HttpClientConnectionManager connectionManager,\n                         LoadBalancerClient lbClient,\n                         LoadBalancerClientFactory lbClientFactory) {\n        CloseableHttpClient httpClient = HttpClients.custom()\n                    .setConnectionManager(connectionManager)\n                    .build();\n        ApacheHttpClient client = new ApacheHttpClient(httpClient);\n        return new FeignBlockingLoadBalancerClient(client, lbClient, lbClientFactory);\n    }\n}\n</code></pre>\n<hr />\n<h4>References:</h4>\n<ul>\n<li><p><a href=\"https://github.com/opentracing-contrib/java-spring-cloud/issues/312\" rel=\"nofollow noreferrer\">NoClassDefFoundError: springframework/cloud/openfeign/ribbon/LoadBalancerFeignClient</a></p>\n</li>\n<li><p><a href=\"https://github.com/spring-cloud/spring-cloud-release/wiki/Spring-Cloud-2020.0-Release-Notes#breaking-changes\" rel=\"nofollow noreferrer\">Spring-Cloud-2020.0-Release-Notes#breaking-changes</a></p>\n</li>\n<li><p><a href=\"https://cloud.spring.io/spring-cloud-static/spring-cloud-openfeign/2.2.0.RC2/reference/html/#spring-cloud-feign-overriding-defaults\" rel=\"nofollow noreferrer\">Spring Cloud OpenFeign (1.2. Overriding Feign Defaults)</a></p>\n</li>\n<li><p><a href=\"https://github.com/Netflix/ribbon\" rel=\"nofollow noreferrer\">NetFlix Ribbon GitHub</a></p>\n</li>\n</ul>\n"}],"last_activity_date":1684544112,"question_id":71854009,"body":"<p>I have this code that I would like to migrate to the latest version of <code>'org.springframework.cloud:spring-cloud-openfeign-core:3.1.1'</code></p>\n<pre><code>import feign.Client;\nimport feign.httpclient.ApacheHttpClient;\nimport org.apache.http.conn.HttpClientConnectionManager;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.springframework.cloud.netflix.ribbon.SpringClientFactory;\nimport org.springframework.cloud.openfeign.ribbon.CachingSpringLoadBalancerFactory;\nimport org.springframework.cloud.openfeign.ribbon.LoadBalancerFeignClient;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class LoadbalancerConfig {\n\n  @Bean\n  public Client client(\n      HttpClientConnectionManager httpClientConnectionManager,\n      CachingSpringLoadBalancerFactory lbClientFactory,\n      SpringClientFactory clientFactory) {\n\n    CloseableHttpClient closeableHttpClient = HttpClients.custom()\n        .setConnectionManager(httpClientConnectionManager)\n        .build();\n    ApacheHttpClient client = new ApacheHttpClient(closeableHttpClient);\n    return new LoadBalancerFeignClient(client, lbClientFactory, clientFactory);\n  }\n}\n</code></pre>\n<p>With version <code>'org.springframework.cloud:spring-cloud-openfeign-core:2.2.2.RELEASE'</code> the code is working fine bur when I switch to version 3.1.1 I get import errors:</p>\n<pre><code>Cannot resolve symbol 'ribbon'\n</code></pre>\n<p>Do you know how I have to migrate the code?</p>\n<p>Code example: <a href=\"https://github.com/rcbandit111/Generic_SO_POC/blob/master/src/main/java/org/merchant/database/service/sql/LoadbalancerConfig.java\" rel=\"nofollow noreferrer\">https://github.com/rcbandit111/Generic_SO_POC/blob/master/src/main/java/org/merchant/database/service/sql/LoadbalancerConfig.java</a></p>\n"},{"comments":[{"comment_id":134539985,"body":"Sorry I found missunderstood!"},{"comment_id":134544183,"body":"<a href=\"https://stackoverflow.com/questions/7952460/return-list-of-nodes-a-tree-in-java-parent-can-have-multiple-child-nodes\" title=\"return list of nodes a tree in java parent can have multiple child nodes\">stackoverflow.com/questions/7952460/&hellip;</a> solve my problem!"}],"last_activity_date":1684542718,"question_id":76293096,"body":"<p>Hello I need to access all my OneToMany relation That created By Super user!\nIn other explanations I Have class named user that contain the List of User named by childes and when created a new user I getChildes and updated with new user , so In selection one user in jpa lazy mode (login with new user I created) everything fine , but if I created new user from user I created no problem but when login to main user I wana see the all users if write in math :</p>\n<p>if A create user named B, A is master of B and B is child for A.</p>\n<p>if B create new User Called C the B is master of C.</p>\n<p>Now I need :</p>\n<p>A master of B and C\nso if I called list of childes from A listed :\nB and C</p>\n<p>but the Code I wrote Just show B as childe.</p>\n<p>The classes :</p>\n<pre><code>package ir.mehritco.megnatis.tax.internal;\n\n\nimport ir.mehritco.megnatis.tax.external.EconomicCompany;\nimport ir.mehritco.megnatis.tax.external.InvoiceEntity;\nimport jakarta.persistence.*;\nimport jakarta.xml.bind.annotation.XmlRootElement;\n\nimport java.util.List;\n\n@XmlRootElement(name = &quot;users&quot;)\n@Table(name = &quot;table_users&quot;)\n@Entity\npublic class User extends StorageInformation {\n    @Column(name = &quot;login_id&quot;, unique = true)\n    String username;\n    @Column\n    String name, password, tel;\n    @OneToMany(targetEntity = User.class)\n    List&lt;User&gt; childs;\n    @Column\n    @Enumerated(EnumType.STRING)\n    Scope scope = Scope.NONE;\n    @Column\n    String domain;\n\n    @Column(name = &quot;status_access&quot;)\n    Integer status;\n    @OneToMany(targetEntity = EconomicCompany.class, fetch = FetchType.LAZY)\n    List&lt;EconomicCompany&gt; economicCompanies;\n    @OneToMany(targetEntity = Signature.class, fetch = FetchType.LAZY)\n    List&lt;Signature&gt; signatures;\n    @OneToMany(targetEntity = InvoiceEntity.class, fetch = FetchType.LAZY)\n    List&lt;InvoiceEntity&gt; invoiceEntities;\n    @OneToOne\n    Company company;\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    public String getTel() {\n        return tel;\n    }\n\n    public void setTel(String tel) {\n        this.tel = tel;\n    }\n\n    public List&lt;User&gt; getChilds() {\n        return childs;\n    }\n\n    public void setChilds(List&lt;User&gt; childs) {\n        this.childs = childs;\n    }\n\n    public Scope getScope() {\n        return scope;\n    }\n\n    public void setScope(Scope scope) {\n        this.scope = scope;\n    }\n\n    public String getDomain() {\n        return domain;\n    }\n\n    public void setDomain(String domain) {\n        this.domain = domain;\n    }\n\n    public Integer getStatus() {\n        return status;\n    }\n\n    public void setStatus(Integer status) {\n        this.status = status;\n    }\n\n    public List&lt;EconomicCompany&gt; getEconomicCompanies() {\n        return economicCompanies;\n    }\n\n    public void setEconomicCompanies(List&lt;EconomicCompany&gt; economicCompanies) {\n        this.economicCompanies = economicCompanies;\n    }\n\n    public List&lt;Signature&gt; getSignatures() {\n        return signatures;\n    }\n\n    public void setSignatures(List&lt;Signature&gt; signatures) {\n        this.signatures = signatures;\n    }\n\n    public List&lt;InvoiceEntity&gt; getInvoiceEntities() {\n        return invoiceEntities;\n    }\n\n    public void setInvoiceEntities(List&lt;InvoiceEntity&gt; invoiceEntities) {\n        this.invoiceEntities = invoiceEntities;\n    }\n\n    public Company getCompany() {\n        return company;\n    }\n\n    public void setCompany(Company company) {\n        this.company = company;\n    }\n}\n\n\n</code></pre>\n<p>And Code snippet of User Maker :</p>\n<pre><code> public void save() {\n        FacesContext facesContext = FacesContext.getCurrentInstance();\n        boolean res = false;\n        if (getUsername() != null) {\n            try {\n                Application.logger.info(&quot;User Domain : &quot; + this.getScope() + &quot; For : &quot; + this.getUsername());\n                User masterUser = service.loginUser(facesContext);\n                MasterRepository repo = new MasterRepository();\n                User childUser = new User();\n                childUser.setStatus(getStatus());\n                childUser.setScope(getScope());\n                childUser.setTel(getTel());\n                childUser.setPassword(getPassword());\n                childUser.setDomain(getDomain());\n                childUser.setName(getName());\n                childUser.setUsername(getUsername());\n                masterUser.getChilds().add(childUser);\n                if (getId() &gt; 0) {\n                    childUser.setId(getId());\n                }\n                res = repo.save(masterUser);\n            } catch (Exception e) {\n                Application.logger.fatal(e.getMessage());\n            }\n\n</code></pre>\n<p>The Repository :</p>\n<pre><code>package ir.mehritco.megnatis.tax.repo.implemented;\n\nimport ir.mehritco.megnatis.tax.Application;\nimport ir.mehritco.megnatis.tax.internal.User;\nimport ir.mehritco.megnatis.tax.repo.HibernateConnection;\nimport jakarta.persistence.EntityManager;\nimport jakarta.persistence.EntityTransaction;\nimport jakarta.persistence.TypedQuery;\nimport jakarta.persistence.criteria.CriteriaBuilder;\nimport jakarta.persistence.criteria.CriteriaQuery;\nimport jakarta.persistence.criteria.Root;\n\nimport java.util.List;\n\npublic class MasterRepository {\n    private HibernateConnection hibernateService = HibernateConnection.getInstance();\n\n    public boolean save(User user) {\n        user.setUsername(user.getUsername().toLowerCase());\n        EntityManager entityManager = hibernateService.getEntityManagerFactory().createEntityManager();\n        EntityTransaction transaction = entityManager.getTransaction();\n        transaction.begin();\n        boolean executeSuccess = false;\n        try {\n            User entityUser = null;\n            if (user.getId() &lt;= 0) {\n                Application.logger.info(&quot;load user with username : &quot; + user.getUsername());\n                User fromLoadRepo = findByUsername(user.getUsername());\n                if (fromLoadRepo != null) {\n                    entityUser = entityManager.find(User.class, findByUsername(user.getUsername()).getId());\n                }\n            } else {\n                Application.logger.info(&quot;load user with id : &quot; + user.getId());\n                entityUser = entityManager.find(User.class, user.getId());\n            }\n            if (entityUser == null) {\n                Application.logger.info(&quot;We are nothing find to update so we save user with id : &quot; + user.getId());\n                entityManager.persist((User) user);\n            } else {\n                user.setId(entityUser.getId());\n                if (user.getPassword().equals(&quot;*************&quot;)) {\n                    user.setPassword(entityUser.getPassword());\n                }\n                Application.logger.info(&quot;We find user and now going for update : &quot; + user.getId());\n                entityManager.merge((User) user);\n            }\n            executeSuccess = true;\n\n        } catch (Exception e) {\n            executeSuccess = false;\n            Application.logger.fatal(&quot;save the user/update throw an Exception : &quot; + e.getMessage());\n        } finally {\n            if (executeSuccess) {\n                try {\n                    transaction.commit();\n                } catch (Exception e) {\n                    executeSuccess = false;\n                    Application.logger.fatal(&quot;Commit changes for save the user/update throw an Exception : &quot; + e.getMessage());\n                }\n            } else {\n                transaction.rollback();\n            }\n        }\n        return executeSuccess;\n    }\n\n\n    public User findById(long id) {\n        if (id &gt; 0) {\n            EntityManager entityManager = hibernateService.getEntityManagerFactory().createEntityManager();\n            return entityManager.find(User.class, id);\n        } else {\n            return null;\n        }\n    }\n\n    public User findByUsername(String username) {\n        username = username.toLowerCase();\n        List&lt;User&gt; user;\n        EntityManager entityManager = hibernateService.getEntityManagerFactory().createEntityManager();\n        CriteriaBuilder criteriaBuilder = hibernateService.getEntityManagerFactory().getCriteriaBuilder();\n        CriteriaQuery&lt;User&gt; criteriaQuery = criteriaBuilder.createQuery(User.class);\n        Root&lt;User&gt; root = criteriaQuery.from(User.class);\n        CriteriaQuery&lt;User&gt; all = criteriaQuery.select(root);\n        all.where(criteriaBuilder.equal(root.get(&quot;username&quot;), username));\n        TypedQuery&lt;User&gt; allQuery = entityManager.createQuery(all);\n        user = allQuery.getResultList();\n        return (user == null || user.size() == 0) ? null : user.get(0);\n    }\n}\n\n\n</code></pre>\n"},{"comments":[{"comment_id":134510619,"body":"I downloaded jackson-core 2.15.1 from <a href=\"https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core/2.15.1\" rel=\"nofollow noreferrer\">here</a>, and did <code>jar -d -f jackson-core-2.15.1.jar --release 17</code>.  The output was rather bizarre;  despite the filename, the .jar file contains a module with a completely different name, for all releases except 9.  I don’t know if the Jackson team screwed up, or if this was some deliberate name change that is effective for more recent versions."},{"comment_id":134534280,"body":"It looks like someone broke the .jar file, by adding multi-release branches with bad module-info for 11, 17, and 19.  The 2.15.0 jackson-core .jar file is still correct, so one option you have is to downgrade to 2.15.0."},{"comment_id":134535278,"body":"@VGR this worked, thank you! Is there a way I can report this bug to the jackson devs?"},{"comment_id":134535389,"body":"I don’t know a lot about github, but… you may be able to report it at <a href=\"https://github.com/FasterXML/jackson/discussions\" rel=\"nofollow noreferrer\">github.com/FasterXML/jackson/discussions</a>, though you’ll probably need to create a github account if you don’t already have one.  I don’t see a separate ‘Issues’ section for that project."},{"comment_id":134535820,"body":"Did some searching and it has already been reported as an issue, and will be fixed in the 2.15.2 release.  <a href=\"https://github.com/FasterXML/jackson-core/issues/1027\" rel=\"nofollow noreferrer\">github.com/FasterXML/jackson-core/issues/1027</a>"},{"comment_id":134536073,"body":"Feel free to answer your own question with your finding."}],"answers":[{"answer_id":76293084,"body":"<p>There was an <a href=\"https://github.com/FasterXML/jackson-core/issues/1027\" rel=\"nofollow noreferrer\">Extra module-info.class in 2.15.1</a>. This will be fixed in the next release: 2.15.2. Thanks to @VGR for pointing out that using version 2.15.0 will fix this issue, until the next version has been released.</p>\n"}],"last_activity_date":1684542377,"question_id":76276873,"body":"<p>I am trying to create a module-info file for my application but getting some issues with the <code>com.fasterxml.jackson.core</code> module when trying to build the application:</p>\n<pre><code>...\\src\\main\\java\\module-info.java:5: error: module not found: com.fasterxml.jackson.core\n    requires com.fasterxml.jackson.core;\n</code></pre>\n<p>module-info:</p>\n<pre class=\"lang-java prettyprint-override\"><code>module foo {\n    requires org.slf4j;\n    requires org.apache.commons.lang3;\n    requires com.fasterxml.jackson.annotation;\n    requires com.fasterxml.jackson.core;\n    requires com.fasterxml.jackson.databind;\n}\n</code></pre>\n<p>build.gradle:</p>\n<pre><code>...\ndependencies {\n    implementation 'org.slf4j:jcl-over-slf4j:2.0.7'\n\n    implementation 'com.fasterxml.jackson.core:jackson-annotations:2.15.1'\n    implementation 'com.fasterxml.jackson.core:jackson-core:2.15.1'\n    implementation 'com.fasterxml.jackson.core:jackson-databind:2.15.1'\n\n    implementation 'com.google.guava:guava:31.1-jre'\n\n    // Logging\n    implementation 'org.slf4j:slf4j-api:2.0.7'\n    implementation 'org.apache.commons:commons-lang3:3.12.0'\n    implementation 'commons-codec:commons-codec:1.15'\n\n    // http tools\n    api 'org.yamj:api-common:2.1'\n\n    // testing\n    testImplementation 'junit:junit:4.13.2'\n    testImplementation 'org.mockito:mockito-core:5.3.1'\n}\n\ntasks.withType(JavaCompile).configureEach {\n    options.encoding = 'UTF-8'\n}\n\njava {\n    withJavadocJar()\n    withSourcesJar()\n}\n...\n</code></pre>\n<p>I'm using JDK 17 (Amazon Corretto) &amp; Gradle 8.1.1</p>\n<p>Does anyone know why this is happening and how to fix it? I've tried different versions of the jackson dependencies and still get the same issue.</p>\n<p>If I remove</p>\n<pre class=\"lang-java prettyprint-override\"><code>requires com.fasterxml.jackson.core;\nrequires com.fasterxml.jackson.databind;\n</code></pre>\n<p>from the module-info.java, it will try to build but get errors about visibility:</p>\n<pre><code>...\\src\\main\\java\\foo\\app.java:4: error: package com.fasterxml.jackson.databind is not visible\nimport com.fasterxml.jackson.databind.DeserializationFeature;\n                            ^\n  (package com.fasterxml.jackson.databind is declared in module com.fasterxml.jackson.databind, but module foo does not read it)\n</code></pre>\n"},{"answers":[{"comments":[{"comment_id":134510896,"body":"I&#39;ve updated my complete workflow with the code details"}],"answer_id":76276935,"body":"<p>What context are you presenting the result in? From your use of <code>unescapeEntities</code> I am guessing that you are presenting this as plain text -- e.g. in a text email body? Or you have another layer in presentation that is re-encoding HTML entities before presenting in HTML? The context matters and could impact what steps are required.</p>\n<p>A string like <code>&quot;;alert('XSS');//</code> is potentially dangerous if used unescaped in a HTML attribute.</p>\n<p>My suggestion would be - simplify the flow and clarify if the output of the function is meant to be plain text or HTML. If it's plain text, I would do something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String getSanitizedPlainText(String inputHtml) {\n  String text = Jsoup.parse(inputHtml).body().text(); \n  // or .wholeText() to preserve newlines\n  return text;\n}\n</code></pre>\n<p>And then the output is cleaned and safe for use in plain text contexts; and if you want to present it in HTML, encode any entities (using e.g. your HTML templating engine).</p>\n<p>This pattern doesn't really make sense to me:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String sanitizedStr=Jsoup.clean(esapiValue,Safelist.simpleText());\nsanitizedStr=Parser.unescapeEntities(sanitizedStr,false);\n</code></pre>\n<p>As the result of <code>.clean()</code> is HTML and you are then unEscaping. Just skip that double step and use one of the <code>.text()</code> methods instead.</p>\n<hr />\n<p>After your edit, it's still not clear to me what content your input is (HTML, or?), and what context you want to display the output in.</p>\n<p>I would break down the decision tree as:</p>\n<p>1: if your input is HTML, and you want to keep it as HTML and make it safe, use the <a href=\"https://jsoup.org/cookbook/cleaning-html/safelist-sanitizer\" rel=\"nofollow noreferrer\">jsoup HTML Cleaner</a>. You can optionally control what tags and attributes to preserve. The output is HTML.\n2: if your input is HTML, but you only want the text content: use a <a href=\"https://jsoup.org/apidocs/org/jsoup/nodes/Element.html#text()\" rel=\"nofollow noreferrer\">text(</a>) method (and if the output context is a HTML body, escape it in your presentation layer)\n3: otherwise, if your input is just text, don't do anything on input, and escape it if neccesarry on output.</p>\n<p>If you are using multiple methods (like in your original example of using ESAPI, then jsoup HTML cleaning and keeping only textnodes, then unescaping and converting that from HTML to plain text) -- I feel your problem statement or solution design is under-specified and it needs a re-think. I would expect to see only one step, as outlined in the list before.</p>\n<p>Or, you need to more crisply define what is &quot;malicious&quot;. In your earlier example (which you removed on edit), the strings which were emitted were not dangerous if using in an HTML body context or a plain-text context. That one of the methods changed the input string doesn't make it necessarily malicious, IMV. But you could define what you consider an attack (vs just a string getting escaped or whatever) and additionally scan for that. I.e, consider two distinct passes: one over the input to decide if you think there's an &quot;attack&quot;, and a second (which always need to run, regardless of the output of the earlier) to just normalize and sanitize the input, following the decision tree I mentioned above.</p>\n"},{"answer_id":76283912,"body":"<p>First off, the best defense against XSS is to use proper contextual output encoding, not HTML sanitization, which is essentially what you are doing here. HTML sanitization is intended when it is not possible to do output encoding because you have a requirement that you must accept certain (HTML) markup. An example would be something like a rich text editor that you often finds in text fields, such as the one that that Stack Overflow uses to accept this answer. And even then, if you must accept markup, it's important that you only accept <em>safe</em> markup. Unfortunately, the way that Jsoup works is rather than recognizing only safe markup, it tries to prevent someone from entering unsafe markup. (That is, it operates as a block-list rather than an allow-list.) And a block-list approach is a game that you cannot possibly win. If you really must use HTML santization, a better than approach would be to use one that uses an allow-list approach. So something like <a href=\"https://owasp.org/www-project-antisamy/\" rel=\"nofollow noreferrer\">OWASP AntiSamy</a> or the <a href=\"https://owasp.org/www-project-java-html-sanitizer/\" rel=\"nofollow noreferrer\">OWASP Java HTML Sanitizer</a> would both be much better and safer choices than Jsoup. That said, if you have some select input that you need cleaned, you can use a combination of ESAPI with AntiSamy via one of the various <a href=\"https://javadoc.io/static/org.owasp.esapi/esapi/2.5.2.0/org/owasp/esapi/Validator.html#getValidSafeHTML-java.lang.String-java.lang.String-int-boolean-org.owasp.esapi.ValidationErrorList-\" rel=\"nofollow noreferrer\">Validator.getValidSafeHTML</a> methods. As noted in the Javadoc, Validator.getValidSafeHTML</p>\n<blockquote>\n<p>Returns canonicalized and validated &quot;safe&quot; HTML that does not contain unwanted scripts in the body, attributes, CSS, URLs, or anywhere else, any validation exceptions are added to the supplied errorList.</p>\n<p>The default behavior of this check depends on the antisamy-esapi.xml configuration. Implementors should reference the OWASP AntiSamy project for ideas on how to do HTML validation in a whitelist way, as this is an extremely difficult problem.</p>\n</blockquote>\n<p>That said, that still is not advised over general contextual output encoding, but it will be better than what you have.</p>\n<p>Lastly, I would advise you to thoroughly read through the ESAPI GitHub wiki page &quot;<a href=\"https://github.com/ESAPI/esapi-java-legacy/wiki/XSS-Defense:-No-Silver-Bullets\" rel=\"nofollow noreferrer\">XSS Defense: No Silver Bullets</a>&quot;. It will describe why doing what you are attempting (mostly documented under the &quot;Interceptors&quot; section) is an anti-pattern that ought to be avoided except as an absolute last resort.</p>\n"}],"last_activity_date":1684542319,"question_id":76265256,"body":"<p>I'm writing servlet-based application in which I need to handle the XSS vernability. I've implemented following logic to sanitize input using ESAPI and JSOUP library.\nFor each request I am getting form plain text form parameter. I just want to sanitize it. If malicious content found then throw the exception otherwise continue the request flow.</p>\n<pre><code>\npublic class XSSRequestWrapper extends HttpServletRequestWrapper{\n\n\npublic XSSRequestWrapper(HttpServletRequest request){\n     super(requrst);\n\n}\n\n@Override\npublic String[] getParameterValues(String parameter)\n{\n    \n    String[] values= super.getParameterValues(parameter);\n    int count = values.length;\n    \n    for(int i=0; i&lt;couny;i++){\n       sanitizeXSS(values[i]);\n    }\n    \n    return values;\n}\n\n@Override\npublic String getParameter(String value)\n{\n    value=super.getParameter(value);\n    sanitizeXSS(values);\n    return value;\n}\n\nprivate String sanitizeXSS(String input){\n\nString esapiValue=ESAPI.encoder().conocalize(input, false, false);\nesapiValue=esapiValue.replaceAll(&quot;\\0&quot;,&quot;&quot;);\nString unSanitizedStr=Jsoup.clean(esapiValue,Safelist.simpleText());\nunSanitizedStr=Parser.unescapeEntities(sanitizedStr,false);\n\n//Comparing above values to find out the xss vulnerability\nif(esapiValue!= null || unSanitized!=null\n||!esapiValue.equalIgnoreCase(unSanitizedStr)){\n    \n    throw new RuntimeException(&quot;Found malicious content in the user input&quot;);\n}\n\nreturn input;\n    \n}\n\n}\n\n</code></pre>\n<p>Above code snippet is working fine for all the opening closing tag like</p>\n<pre><code> - &lt;script&gt;alert()&lt;/script&gt;\n - &lt;div&gt;....&lt;/div&gt;\n - &lt;script&gt;malicious data...\n</code></pre>\n<p>etc etc but its failing for below payload</p>\n<ul>\n<li>&quot;;alert('XSS');//</li>\n<li>window.alert(&quot;XSS');</li>\n</ul>\n<p>For testing purpose I'm using payload from\n<a href=\"https://github.com/payloadbox/xss-payload-list\" rel=\"nofollow noreferrer\">https://github.com/payloadbox/xss-payload-list</a>\nHow to solve this issue ?</p>\n"},{"comments":[{"comment_id":134537231,"body":"What is <code>listings</code>?"},{"comment_id":134537232,"body":"What is the error that you&#39;re encountering?  This appears as though it would return a valid result."},{"comment_id":134537244,"body":"Not enough information, consider providing a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}],"last_activity_date":1684541989,"question_id":76293067,"body":"<pre><code>@Override\npublic Object getValueAt(int rowIndex, int columnIndex) {\n\n    Listing listing = listings.get(rowIndex);\n\n    return switch (columnIndex) {\n        \n        case 0 -&gt; listing.getItemName();\n        case 1 -&gt; listing.getPrice();\n        case 2 -&gt; listing.getSeller();\n        default -&gt; null;\n\n    };\n}\n</code></pre>\n<p>Trying to load my rowIndex into my list of auction listings, but .get() is not a valid way to do so. What can I do to fix this? Please no snarky comments, I know how you stack overflow monsters are.</p>\n"},{"last_activity_date":1684541533,"question_id":76289814,"body":"<p>We are running our spring boot on AWS ECS with 2 instances on production. We have put an Application Load Balancer on top of it with round-robin algorithm for 2 targets but I am seeing that most the requests are going to only one instance. <strong>Requests are sequential and stickiness is off.</strong></p>\n<p>There are two requests coming from the same client in one it is just to pre-warm the local ehcache and second is the actual request which will create a deal. Now as per my knowledge in round-robin it cannot be possible as request 1 will go to Instance A while request 2 will go to Instance B -- but it is happening.</p>\n<p>Please let me know where my understanding is wrong.</p>\n"},{"comments":[{"comment_id":134527146,"body":"Have you tried running <a href=\"https://docs.openrewrite.org/recipes/java/format/wrappingandbraces\" rel=\"nofollow noreferrer\">docs.openrewrite.org/recipes/java/format/wrappingandbraces</a> ?"},{"comment_id":134529763,"body":"Yes, it didn&#39;t have any effect."},{"comment_id":134547237,"body":"There&#39;s also  been some feedback on our Slack: <a href=\"https://rewriteoss.slack.com/archives/C01A843MWG5/p1684417705241589\" rel=\"nofollow noreferrer\">rewriteoss.slack.com/archives/C01A843MWG5/p1684417705241589</a>"}],"answers":[{"comments":[{"comment_id":134532394,"body":"I&#39;ve already tried the style, see the updated question."},{"comment_id":134532416,"body":"I also tried to do it via checkstyle - I mean I created a simple checkstyle.xml with desired curly bracket formatting and followed this: <a href=\"https://docs.openrewrite.org/running-recipes/popular-recipe-guides/automatically-fix-checkstyle-violations\" rel=\"nofollow noreferrer\">docs.openrewrite.org/running-recipes/popular-recipe-guides/&hellip;</a> But still no luck."},{"comment_id":134546830,"body":"Tyler helped to provide some context that I was missing in <a href=\"https://stackoverflow.com/a/76293036/53444\">stackoverflow.com/a/76293036/53444</a> ; As also seen on the comment below his answer: feel free to open up a bug/feature request."}],"answer_id":76289911,"body":"<p>You likely want to look into styles:\n<a href=\"https://docs.openrewrite.org/concepts-explanations/styles\" rel=\"nofollow noreferrer\">https://docs.openrewrite.org/concepts-explanations/styles</a></p>\n<p>We support a range of well known styles already, such as for instance:\n<a href=\"https://github.com/openrewrite/rewrite/blob/main/rewrite-java/src/main/java/org/openrewrite/java/style/IntelliJ.java\" rel=\"nofollow noreferrer\">https://github.com/openrewrite/rewrite/blob/main/rewrite-java/src/main/java/org/openrewrite/java/style/IntelliJ.java</a></p>\n<p>The Maven and Gradle plugins support passing in styles:\n<a href=\"https://docs.openrewrite.org/reference/rewrite-maven-plugin#plugin-configuration\" rel=\"nofollow noreferrer\">https://docs.openrewrite.org/reference/rewrite-maven-plugin#plugin-configuration</a></p>\n<pre><code>./mvnw rewrite:run -Drewrite.activeStyles=an.example.Style0\n</code></pre>\n<p>This style should then be picked up by the code change or formatter recipes you apply.</p>\n"},{"comments":[{"comment_id":134546818,"body":"Thank you for chiming in here Tyler! Guess that makes this a bug/feature request, with no current solution. @PetrS feel free to open up an issue over on <a href=\"https://github.com/openrewrite/rewrite/issues\" rel=\"nofollow noreferrer\">github.com/openrewrite/rewrite/issues</a>"}],"answer_id":76293036,"body":"<p>So, the style classes in OpenRewrite are meant to closely support the configuration you see in Intellij:</p>\n<p><a href=\"https://i.stack.imgur.com/8hZyY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8hZyY.png\" alt=\"enter image description here\" /></a></p>\n<p>However, in the case of <a href=\"https://github.com/openrewrite/rewrite/blob/main/rewrite-java/src/main/java/org/openrewrite/java/style/WrappingAndBracesStyle.java\" rel=\"nofollow noreferrer\">WrappingAndBracesStyle</a> there is currently a very minimally implementation. To add full support, this style class must be filled out (using the Intellij dialog as a guide) and then the <a href=\"https://github.com/openrewrite/rewrite/blob/main/rewrite-java/src/main/java/org/openrewrite/java/format/WrappingAndBracesVisitor.java\" rel=\"nofollow noreferrer\">WrappingAndBracesVisitor</a> needs to be implemented to use the styles to manipulate the whitespace of the various tree elements. Note that indention is handled by a different style/visitor and this visitor should focus specifically on removing/adding new lines.</p>\n"}],"last_activity_date":1684541107,"question_id":76280822,"body":"<p>I started to playing with OpenRewrite and what I need is to use OpenRewrite to change the formatting of curly braces (for all the Java classes and interfaces).</p>\n<p>So from this:</p>\n<pre><code>public class Foo\n{\n    // something here\n}\n</code></pre>\n<p>to have this:</p>\n<pre><code>public class Foo { // &lt;-- left curly bracket on the same line as a class name\n    // something here\n}\n</code></pre>\n<p>I was trying to achieve this with simple existing <code>org.openrewrite.java.format.AutoFormat</code> recipe, but it seems this one completely ignores the curly braces.\nThen I tried to write some custom recipe and I was playing with method <code>autoFormat</code>. Something like this:</p>\n<pre><code> @Override\n public J.ClassDeclaration visitClassDeclaration(final J.ClassDeclaration classDec, final ExecutionContext executionContext) {\n     return autoFormat(classDec, executionContext);\n }\n</code></pre>\n<p>but it seems that <code>autoFormat</code> just uses <code>AutoFormatVisitor</code> and it seems to me that this one is also used by existing <code>org.openrewrite.java.format.AutoFormat</code> recipe - so it doesn't have the desired effect.</p>\n<p>Could you please point me to some idea how this can be solved by OpenRewrite?</p>\n<p><strong>UPDATE</strong>\nI tried to apply default IntelliJ style.</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.openrewrite.maven&lt;/groupId&gt;\n    &lt;artifactId&gt;rewrite-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;4.44.0&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;activeRecipes&gt;\n            &lt;recipe&gt;org.openrewrite.java.format.AutoFormat&lt;/recipe&gt;\n        &lt;/activeRecipes&gt;\n        &lt;activeStyles&gt;\n            &lt;style&gt;org.openrewrite.java.style.IntelliJ&lt;/style&gt;\n        &lt;/activeStyles&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt; \n</code></pre>\n<p>but it still didn't change the curly brackets.</p>\n"},{"last_activity_date":1684540309,"question_id":76293017,"body":"<p>Error creating bean with name 'commandLineRunner' ... Illegal arguments to factory method <code>'commandLineRunner'</code>; args: (param instance @...) ?</p>\n<p>version Java : 20 .\nspring : 3 .\n(in Java 17 it's work)</p>\n<p>commandLineRunner method that accept service.\n<code>@Bean  public CommandLineRunner commandLineRunner( Service service ) { //}</code></p>\n<p>Service\n<code>@Service public class AuthenticationService { //  }</code></p>\n"},{"answers":[{"comments":[{"comment_id":80253335,"body":"Do you know how can I enable Jackson? I added org.glassfish.jersey.media:jersey-media-json-jackson dependency to my pom but I get org.jboss.weld.exceptions.UnsatisfiedResolutionException: WELD-001334: Unsatisfied dependencies for type ObjectProvider&lt;FilterProvider&gt; with qualifiers @Default"},{"comment_id":80272990,"body":"I linked the answer how to do it in my answer above. Here&#39;s the link again: <a href=\"https://stackoverflow.com/questions/18317927/force-glassfish4-to-use-jackson-instead-of-moxy#18318314\" title=\"force glassfish4 to use jackson instead of moxy%2318318314\">stackoverflow.com/questions/18317927/&hellip;</a>"},{"comment_id":80273349,"body":"I have tried that but it does not work for me: <a href=\"https://groups.google.com/forum/?__hssc=229474563.7.1507570987948&amp;__hstc=229474563.f77c21f0c7f2189af2c0f0d9b585b87f.1497363477167.1507219438875.1507570987948.4&amp;__hsfp=2561377333&amp;hsCtaTracking=ee96a587-4450-4296-b986-ac67f6da0574%7Cff3c7a3b-1cde-4e52-b2ad-e162643b9683#!topic/payara-forum/p7JlVgTc7EI\" rel=\"nofollow noreferrer\">groups.google.com/forum/&hellip;</a>"},{"comment_id":81526961,"body":"@zappee i had the same issue but i was lucky enough that i had an old project that works. what causes UnsatisfiedResolutionException for me was jersey-media-json-jackson version 2.26 i changed it back to 2.10.4 and i no longer have this Exception"}],"answer_id":46611984,"body":"<p>By default, Payara Server uses <a href=\"https://jersey.github.io/documentation/latest/media.html#json.moxy\" rel=\"nofollow noreferrer\">MOXy</a> to map to/from JSON. You can use an alternative like Jackson, if you add Jackson to your app and add <code>JacksonFeature</code> into JAX-RS classes: <a href=\"https://stackoverflow.com/questions/18317927/force-glassfish4-to-use-jackson-instead-of-moxy#18318314\">Force Glassfish4 to use Jackson instead of Moxy</a></p>\n\n<p>In the upcoming Payara 5, which will support Java EE 8, JSON marshalling will be handled in a standard way prescribed by the <a href=\"http://json-b.net/\" rel=\"nofollow noreferrer\">JSON-Binding</a></p>\n"}],"last_activity_date":1684539851,"question_id":46553989,"body":"<p>I am curious to know which JSON marshalling/unmarshalling framework is used by Glassfish/Payara is case of JAX-RS and how I can add custom JSON mapper class into it.</p>\n<p>I would like to write a custom serializer for my <code>Enum</code> class. I use <code>provided</code> scope in my pom.xml for jaxrs <code>javaee-api</code> 7.0 so default Glassfish libraries are used.</p>\n<p>I tried to use <code>@JsonValue</code> and wrote a class which implements <code>javax.ws.rs.ext.MessageBodyWriter</code> and <code>JsonSerializer&lt;T&gt;</code> as well. Do not work either as I expect.</p>\n<p>This is my enum class:</p>\n<pre><code>public enum ErrorCode {\n    MY_ERROR(123456);\n\n    private int value;\n\n    ErrorCode(final int value) {\n        this.value = value;\n    }\n\n    @JsonValue\n    public int  getValue() {\n        return value;\n    }\n}\n</code></pre>\n<p>The class which uses enum:</p>\n<pre><code>public class ErrorInfo {\n    private ErrorCode errorCode;\n\n    public String toJson() {\n        try {\n            return new ObjectMapper().writer().withDefaultPrettyPrinter().writeValueAsString(this);\n        } catch (JsonProcessingException e) {\n            // TODO: do something here...\n        }\n    }\n}\n</code></pre>\n<p>And the JAX-RS class where I would like to send back the <code>ErrorInfo</code> instance as a JSON:</p>\n<pre><code>@Provider\npublic class MyExceptionMapper implements ExceptionMapper&lt;Throwable&gt; {\n    @Override\n    public Response toResponse(Throwable throwable) {\n        ...\n        return Response\n                .status(errorInfo.getHttpStatus())\n                .type(ExtendedMediaType.APPLICATION_JSON_UTF8)\n                .entity(errorInfo)\n                .build();\n    }\n}\n</code></pre>\n<p>If I use the code above then the <code>errorCode</code> value is &quot;MY_ERROR&quot; string instead of the int 123456 value.</p>\n<p>If I use my extra <code>errorInfo.toJson()</code> method then @JsonValue annotation does the magic but I would like to avoid writing extra code to handle enum serialization issue.</p>\n<p>What is the proper way to configure / add extra enum mapper class to the default JAX-RS JSON library in Glassfish/Payara?</p>\n"},{"comments":[{"comment_id":134536575,"body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"answer_id":76292932,"body":"<p>If you want just few api services to be available from your front, add this to the wanted controller methods :</p>\n<pre><code>@CrossOrigin(origins = &quot;http://127.0.0.1:5500/&quot;)\n</code></pre>\n<p>If you want a global configuration, you can do this on your @SpringBootApplication class (or a @Configuration class) :</p>\n<pre><code>@Bean\npublic WebMvcConfigurer corsConfigurer() {\n    return new WebMvcConfigurer() {\n        @Override\n        public void addCorsMappings(CorsRegistry registry) {\n            registry.addMapping(&quot;/**&quot;).allowedOriginPatterns(&quot;http://127.0.0.1:5500&quot;).allowCredentials(true);\n        }\n    };\n}\n</code></pre>\n<p>You have a complete guide there:\n<a href=\"https://spring.io/guides/gs/rest-service-cors/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/rest-service-cors/</a></p>\n"}],"last_activity_date":1684538453,"question_id":76292114,"body":"<p>How to connect my front end (html/css/js) to my back end (java spring boot, jpa)?\nafter connecting them, how do I upload the fullstack application onto aws?</p>\n<p>I tried using fetch from <a href=\"http://127.0.0.1:5500/index.html\" rel=\"nofollow noreferrer\">http://127.0.0.1:5500/index.html</a> to http://localhost:8080.</p>\n<p>But the error says: been blocked by CORS policy: No 'Access-Control-Allow-Origin' header is present on the requested resource. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled..</p>\n<p>I have googled this, and people said I can't do that because two different hosts.</p>\n<p>I am not sure what to do now. I am new to backend development and api.</p>\n<p>My goal right now is (front end -&gt; api -&gt; java spring boot -&gt; postgres). and upload this on aws or something. idk what im saying anymore.</p>\n"},{"answers":[{"comments":[{"comment_id":77656940,"body":"when I build a index on janusGraph, the index status is install ,it cant turn to enable ,so the index status is installed it cant remove"}],"answer_id":45273868,"body":"<p><a href=\"https://docs.janusgraph.org/schema/index-management/index-performance/\" rel=\"nofollow noreferrer\">Index</a> has to be disabled first then <a href=\"https://docs.janusgraph.org/schema/index-management/index-removal/\" rel=\"nofollow noreferrer\">removed</a>.</p>\n<pre class=\"lang-js prettyprint-override\"><code>    // Disable the &quot;phoneIndex&quot; composite index\n    janusGraphManagement = janusGraph.openManagement()\n    phoneIndex = janusGraphManagement.getGraphIndex('phoneIndex')\n    janusGraphManagement.updateIndex(phoneIndex, SchemaAction.DISABLE_INDEX).get()\n    janusGraphManagement.commit()\n    janusGraph.tx().commit()\n    \n    // Block until the SchemaStatus transitions from INSTALLED to REGISTERED\n    ManagementSystem.awaitGraphIndexStatus(janusGraph, 'phoneIndex').status(SchemaStatus.DISABLED).call()\n    \n    // Delete the index using TitanManagement\n    janusGraphManagement = janusGraph.openManagement()\n    phoneIndex = janusGraphManagement.getGraphIndex('phoneIndex')\n    future = janusGraphManagement.updateIndex(phoneIndex, SchemaAction.REMOVE_INDEX)\n    janusGraphManagement.commit()\n    janusGraph.tx().commit()\n</code></pre>\n"},{"comments":[{"comment_id":121788444,"body":"Will the method remove index instead of desable it? I want to remove my index to create antother one with the same name, but get error message: &quot;An index with name &#39;myIndexName&#39; has already been defined&quot;"}],"answer_id":45674404,"body":"<p>If you are unable to change the <a href=\"https://docs.janusgraph.org/schema/index-management/index-lifecycle/\" rel=\"nofollow noreferrer\">status of index</a> from <code>Install</code> to <code>Enable</code>, I suggest you to check the running instances of JanusGraph and close all the instances except the one with &quot;<code>(Current)</code>&quot; and then <a href=\"https://docs.janusgraph.org/master/schema/index-management/index-removal/\" rel=\"nofollow noreferrer\">try again removing the index</a>.</p>\n<p>To check and close instances use following command in gremlin shell:</p>\n<pre class=\"lang-js prettyprint-override\"><code>    mgmt = graph.openManagement()\n\n    mgmt.getOpenInstances() //all open instances\n\n    ==&gt;7f0001016161-dunwich1(current)\n    ==&gt;7f0001016161-atlantis1\n\n    mgmt.forceCloseInstance('7f0001016161-atlantis1') //remove an instance\n    mgmt.commit()\n</code></pre>\n<p>To remove the index use following code:</p>\n<pre class=\"lang-js prettyprint-override\"><code>   // Disable the &quot;name&quot; composite index\n   this.management = this.graph.openManagement()\n   def nameIndex = this.management.getGraphIndex(indexName)\n   this.management.updateIndex(nameIndex, SchemaAction.DISABLE_INDEX).get()\n   this.management.commit()\n   this.graph.tx().commit()\n\n   // Block until the SchemaStatus transitions from INSTALLED to REGISTERED\n   ManagementSystem.awaitGraphIndexStatus(graph, indexName).status(SchemaStatus.DISABLED).call()\n    \n   // Delete the index using JanusGraphManagement\n   this.management = this.graph.openManagement()\n   def delIndex = this.management.getGraphIndex(indexName)\n   def future = this.management.updateIndex(delIndex, SchemaAction.REMOVE_INDEX)\n   this.management.commit()\n   this.graph.tx().commit()\n</code></pre>\n<p>I faced the same issue and tried a lot of other things then finally the above procedure worked!</p>\n"},{"answer_id":76263955,"body":"<p>Here's <a href=\"https://docs.janusgraph.org/schema/index-management/index-removal/\" rel=\"nofollow noreferrer\">a full index-removal example</a> coded in <a href=\"https://javadoc.io/doc/org.janusgraph/janusgraph-core/latest/org/janusgraph/core/schema/SchemaAction.html\" rel=\"nofollow noreferrer\"><code>Java</code> (as with your example)</a> and saved to <a href=\"https://docs.janusgraph.org/storage-backend/inmemorybackend/\" rel=\"nofollow noreferrer\"><code>&quot;inmemory&quot;</code></a> for you.<br />\nThis way you can see a working example to learn with by changing steps to see what happens.</p>\n<h1>Code</h1>\n<pre class=\"lang-java prettyprint-override\"><code>import org.apache.logging.log4j.LogManager;\nimport org.apache.logging.log4j.Logger;\nimport org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.GraphTraversalSource;\nimport org.apache.tinkerpop.gremlin.structure.Vertex;\nimport org.janusgraph.core.JanusGraph;\nimport org.janusgraph.core.JanusGraphFactory;\nimport org.janusgraph.core.JanusGraphVertex;\nimport org.janusgraph.core.PropertyKey;\nimport org.janusgraph.core.schema.*;\nimport org.janusgraph.diskstorage.keycolumnvalue.scan.ScanMetrics;\nimport org.janusgraph.graphdb.database.management.ManagementSystem;\n\nimport java.util.concurrent.ExecutionException;\n\npublic class Test {\n    private static final Logger logger = LogManager.getLogger(Main.class);\n    public static void main(String[] args) throws InterruptedException, ExecutionException {\n        JanusGraph janusGraph = JanusGraphFactory.build().set(&quot;storage.backend&quot;, &quot;inmemory&quot;).open();\n//        JanusGraph janusGraph = JanusGraphFactory.build().set(&quot;storage.backend&quot;, &quot;cql&quot;).set(&quot;storage.hostname&quot;, &quot;localhost:9042&quot;).open();\n        GraphTraversalSource g = janusGraph.traversal();\n        g.V().drop().iterate();\n        janusGraph.tx().commit();\n        JanusGraphManagement janusGraphManagement = janusGraph.openManagement();\n        PropertyKey propertyKey = janusGraphManagement.getOrCreatePropertyKey(&quot;_id&quot;);\n//        if (!janusGraphManagement.containsGraphIndex(&quot;_id&quot;))\n        janusGraphManagement.buildIndex(&quot;_id&quot;, Vertex.class).addKey(propertyKey).buildCompositeIndex();\n        janusGraphManagement.commit();\n        JanusGraphVertex vertex = janusGraph.addVertex(&quot;entity&quot;);\n        vertex.property(&quot;_id&quot;, &quot;Test1&quot;);\n        janusGraph.tx().commit();\n        janusGraphManagement = janusGraph.openManagement();\n        JanusGraphIndex janusGraphIndex = janusGraphManagement.getGraphIndex(&quot;_id&quot;);\n        logger.info(&quot;index.getIndexStatus(propertyKey):\\t&quot; + janusGraphIndex.getIndexStatus(propertyKey));\n        janusGraphManagement.updateIndex(janusGraphIndex, SchemaAction.DISABLE_INDEX).get();\n        logger.info(&quot;index.getIndexStatus(propertyKey):\\t&quot; + janusGraphIndex.getIndexStatus(propertyKey));\n        janusGraphManagement.commit();\n        ManagementSystem.awaitGraphIndexStatus(janusGraph, &quot;_id&quot;).status(SchemaStatus.DISABLED).call();\n        logger.info(&quot;index.getIndexStatus(propertyKey):\\t&quot; + janusGraphIndex.getIndexStatus(propertyKey));\n        janusGraphManagement = janusGraph.openManagement();\n        janusGraphIndex = janusGraphManagement.getGraphIndex(&quot;_id&quot;);\n        janusGraphManagement.updateIndex(janusGraphIndex, SchemaAction.DISCARD_INDEX).get();\n        logger.info(&quot;index.getIndexStatus(propertyKey):\\t&quot; + janusGraphIndex.getIndexStatus(propertyKey));\n        janusGraphManagement.commit();\n        ManagementSystem.awaitGraphIndexStatus(janusGraph, &quot;_id&quot;).status(SchemaStatus.DISCARDED).call();\n        logger.info(&quot;index.getIndexStatus(propertyKey):\\t&quot; + janusGraphIndex.getIndexStatus(propertyKey));\n        janusGraph.close();\n    }\n}\n</code></pre>\n<h1>Logs</h1>\n<p>Log4j2 Output should look like</p>\n<pre class=\"lang-json prettyprint-override\"><code>2023-05-16 08:51:40,344 [INFO] [o.j.d.c.b.ReadConfigurationBuilder.main] ::  Set default timestamp provider MICRO\n2023-05-16 08:51:40,355 [INFO] [o.j.g.i.UniqueInstanceIdRetriever.main] ::   Generated unique-instance-id=c0a8564911500-rmt-lap-win201\n2023-05-16 08:51:40,364 [INFO] [o.j.d.c.ExecutorServiceBuilder.main] ::  Initiated fixed thread pool of size 40\n2023-05-16 08:51:40,399 [INFO] [o.j.g.d.StandardJanusGraph.main] ::  Gremlin script evaluation is disabled\n2023-05-16 08:51:40,403 [INFO] [o.j.d.l.k.KCVSLog.main] ::   Loaded unidentified ReadMarker start time 2023-05-16T13:51:40.403993Z into org.janusgraph.diskstorage.log.kcvs.KCVSLog$MessagePuller@255990cc\n2023-05-16 08:51:40,460 [WARN] [o.j.g.t.StandardJanusGraphTx.main] ::    Query requires iterating over all vertices [[]]. For better performance, use indexes\n2023-05-16 08:51:40,791 [INFO] [Main.main] ::    index.getIndexStatus(propertyKey): ENABLED\n2023-05-16 08:51:40,801 [INFO] [Main.main] ::    index.getIndexStatus(propertyKey): DISABLED\n2023-05-16 08:51:40,919 [INFO] [o.j.g.d.m.GraphIndexStatusWatcher.main] ::   All 1 key(s) on index _id have status(es) [DISABLED]\n2023-05-16 08:51:40,919 [INFO] [Main.main] ::    index.getIndexStatus(propertyKey): DISABLED\n2023-05-16 08:51:40,952 [INFO] [o.j.g.o.j.IndexRemoveJob.Thread-3] ::    Index _id metrics: success-tx: 4 doc-updates: 0 succeeded: 1\n...\n2023-05-16 08:51:41,169 [INFO] [o.j.g.d.m.ManagementSystem.Thread-1] ::  Index update job successful for [_id]\n2023-05-16 08:51:41,175 [INFO] [Main.main] ::    index.getIndexStatus(propertyKey): DISCARDED\n2023-05-16 08:51:41,178 [INFO] [o.j.g.d.m.GraphIndexStatusWatcher.main] ::   All 1 key(s) on index _id have status(es) [DISCARDED]\n2023-05-16 08:51:41,178 [INFO] [Main.main] ::    index.getIndexStatus(propertyKey): DISCARDED\n\nProcess finished with exit code 0\n</code></pre>\n"}],"last_activity_date":1684537757,"question_id":45273709,"body":"<p><a href=\"https://docs.janusgraph.org/schema/index-management/index-performance/\" rel=\"nofollow noreferrer\">Index status is installed</a>. How to change the status to <a href=\"https://docs.janusgraph.org/schema/index-management/index-lifecycle/\" rel=\"nofollow noreferrer\">registered</a>, then <a href=\"https://docs.janusgraph.org/schema/index-management/index-removal/\" rel=\"nofollow noreferrer\">disabled</a>, to <a href=\"https://docs.janusgraph.org/master/schema/index-management/index-removal/\" rel=\"nofollow noreferrer\">remove</a> it?</p>\n<pre class=\"lang-java prettyprint-override\"><code>GraphTraversalSource g = janusGraph.traversal();\nJanusGraphManagement janusGraphManagement = janusGraph.openManagement();\nJanusGraphIndex phoneIndex = janusGraphManagement.getGraphIndex(&quot;phoneIndex&quot;);\nPropertyKey phone = janusGraphManagement.getPropertyKey(&quot;phone&quot;);\nSchemaStatus indexStatus = phoneIndex.getIndexStatus(phone);\nString name = phoneIndex.name();\nSystem.out.println(name);\nif (indexStatus == INSTALLED) {\n    janusGraphManagement.commit();\n    janusGraph.tx().commit();\n}\n</code></pre>\n<p><img src=\"https://i.stack.imgur.com/a4c5K.png\" alt=\"image\" /></p>\n"},{"comments":[{"comment_id":48759209,"body":"Does you pom file contain a version? Can you show the full pom file? Which Maven version do you use? How have you called Maven? Have you called Maven from command line or from within an IDE?"},{"comment_id":48784766,"body":"There should be a more concrete stacktrace somewhere in your log, that shows the exact position of the NullPointerException (something with <code>com.liferay.maven...</code>)"},{"comment_id":48799068,"body":"@khmarbaise : I have added my pom.xml in my question...I am using Maven using IDE...And i  am doing the build process using IDE. Please guide."},{"comment_id":48802974,"body":"Have you tried to run your build on command line and not from within IDE. Which Maven Version do you use?"},{"comment_id":48821961,"body":"@khmarbaise : i am using apache maven 3.1.1 ..And not yet tried over command prompt as i have been doing it on IDE."},{"comment_id":48825373,"body":"Please try in command line. Which IDE? Eclipse? Which Version of it? Which Version m2e in case of Eclipse?"},{"comment_id":48825451,"body":"@khmarbaise : I tried using command prompt but was fetching the same result.  I am using Eclipse Liferay Developer Studio  Version: 2.0.0.201401271217-b1.. Can this be maven version issue?"},{"comment_id":48825810,"body":"You have defined a profile with a version <code>7.0.0-m2</code>for liferay plugin but the run shows <code>liferay-maven-plugin:6.2.1</code>. You should check that you alway use the same version of the plugin."},{"comment_id":48825835,"body":"Can you please come over chat room <a href=\"http://chat.stackoverflow.com/rooms/78385/http-stackoverflow-com-questions-30329108-mojoexecutionexception-while-doing-a\">chat.stackoverflow.com/rooms/78385/&hellip;</a>"}],"answers":[{"answer_id":30370989,"body":"<ol>\n<li><p>First of all you need to check the liferay version that you are using if it is mentioned in your <code>pom.xml</code>.</p></li>\n<li><p>Also, the error can be thrown when you try to build your Liferay project using an old version of <code>Maven</code>. Check your Maven Version that you are using using command</p>\n\n<p>mvn -version</p></li>\n</ol>\n\n<p>Also the <code>JDK</code> that you are using should be correctly mentioned in your POM.xml.\nI find comment from khmarbaise as correct because the version might also have been conflicted. Hope this helps.</p>\n"},{"answer_id":73412617,"body":"<p>This issue happened on my Mac.</p>\n<p>I used JAVA_HOME=<code>/usr/libexec/java_home -v 1.8</code> to switch to JDK 8</p>\n<p><code>echo $JAVA_HOME</code> shows</p>\n<p><code>/Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home</code></p>\n<p>Turns out this JDK version is problematic.</p>\n<p>I fixed it by using <code>JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_341.jdk/Contents/Home</code> (after installing an official JDK8)</p>\n<p>Now <code>echo $JAVA_HOME</code> shows</p>\n<p><code>/Library/Java/JavaVirtualMachines/jdk1.8.0_341.jdk/Contents/Home</code></p>\n"}],"last_activity_date":1684537260,"question_id":30329108,"body":"<p>Below is the goals that i have included while building maven project in my pom.</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt; \n\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.mynewproject.portlet&lt;/groupId&gt;\n    &lt;artifactId&gt;abc-myfacts-portlet&lt;/artifactId&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;ABC MY FACTS Portlet&lt;/name&gt;\n    &lt;version&gt;2.0-SNAPSHOT&lt;/version&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.liferay.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;liferay-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${liferay.maven.plugin.version}&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;generate-sources&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;build-css&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;autoDeployDir&gt;${liferay.auto.deploy.dir}&lt;/autoDeployDir&gt;\n                    &lt;appServerDeployDir&gt;${liferay.app.server.deploy.dir}&lt;/appServerDeployDir&gt;\n                    &lt;appServerLibGlobalDir&gt;${liferay.app.server.lib.global.dir}&lt;/appServerLibGlobalDir&gt;\n                    &lt;appServerPortalDir&gt;${liferay.app.server.portal.dir}&lt;/appServerPortalDir&gt;\n                    &lt;liferayVersion&gt;${liferay.version}&lt;/liferayVersion&gt;\n                    &lt;pluginType&gt;portlet&lt;/pluginType&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.5&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n                    &lt;source&gt;1.6&lt;/source&gt;\n                    &lt;target&gt;1.6&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.5&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n\n\n\n        &lt;/plugins&gt;\n\n    &lt;/build&gt;\n    &lt;dependencies&gt;\n            &lt;!-- Liferay dependency --&gt;    \n            &lt;dependency&gt;\n                 &lt;groupId&gt;commons-lang&lt;/groupId&gt;\n                 &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;\n                &lt;version&gt;2.6&lt;/version&gt;                  \n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;commons-collections&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-collections&lt;/artifactId&gt;\n    &lt;version&gt;3.2.1&lt;/version&gt;\n    &lt;optional&gt;true&lt;/optional&gt;\n&lt;/dependency&gt;\n\n &lt;dependency&gt;\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;\n            &lt;version&gt;1.6.5&lt;/version&gt;\n        &lt;/dependency&gt;\n         &lt;!--  &lt;dependency&gt; \n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-instrument&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt; --&gt;\n\n\n\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.liferay.portal&lt;/groupId&gt;\n            &lt;artifactId&gt;portal-service&lt;/artifactId&gt;\n            &lt;version&gt;${liferay.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.liferay.portal&lt;/groupId&gt;\n            &lt;artifactId&gt;util-bridges&lt;/artifactId&gt;\n            &lt;version&gt;${liferay.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.liferay.portal&lt;/groupId&gt;\n            &lt;artifactId&gt;util-taglib&lt;/artifactId&gt;\n            &lt;version&gt;${liferay.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.liferay.portal&lt;/groupId&gt;\n            &lt;artifactId&gt;util-java&lt;/artifactId&gt;\n            &lt;version&gt;${liferay.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n            &lt;!-- Portlet/JSR dependency --&gt;      \n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.portlet&lt;/groupId&gt;\n            &lt;artifactId&gt;portlet-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n            &lt;!-- Servlet/JSP dependency --&gt;      \n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;2.4&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;\n            &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n            &lt;version&gt;1.2&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;          \n        &lt;/dependency&gt; \n\n        &lt;!-- Spring dependency --&gt;       \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc-portlet&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;    \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;       \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt; \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-agent&lt;/artifactId&gt;\n    &lt;version&gt;2.5.6&lt;/version&gt;\n&lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n            &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n            &lt;version&gt;1.6.12&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;cglib&lt;/groupId&gt;\n            &lt;artifactId&gt;cglib-nodep&lt;/artifactId&gt;\n            &lt;version&gt;2.2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;\n            &lt;version&gt;1.3&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Log4j configuration --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n            &lt;version&gt;1.2.16&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n            &lt;version&gt;1.4.2&lt;/version&gt;\n        &lt;/dependency&gt; \n\n        &lt;!-- Unit testing --&gt;       \n        &lt;dependency&gt;  \n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;  \n            &lt;artifactId&gt;mockito-all&lt;/artifactId&gt;  \n            &lt;version&gt;1.9.5&lt;/version&gt;  \n        &lt;/dependency&gt;  \n        &lt;dependency&gt;  \n            &lt;groupId&gt;junit&lt;/groupId&gt;  \n            &lt;artifactId&gt;junit&lt;/artifactId&gt;  \n            &lt;version&gt;4.11&lt;/version&gt;  \n        &lt;/dependency&gt;   \n\n         &lt;!-- Data Service dependency --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mynewproject.components&lt;/groupId&gt;\n            &lt;artifactId&gt;abc-mynewproject-service&lt;/artifactId&gt;\n            &lt;version&gt;2.0-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mynewproject.components&lt;/groupId&gt;\n            &lt;artifactId&gt;emailcomponent&lt;/artifactId&gt;\n            &lt;version&gt;2.0-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n\n\n&lt;profiles&gt;\n&lt;profile&gt;\n    &lt;id&gt;Liferay-v6.2-EE-(Tomcat-7)&lt;/id&gt;\n    &lt;properties&gt;\n        &lt;liferay.version&gt;6.2.2&lt;/liferay.version&gt;\n        &lt;liferay.maven.plugin.version&gt;7.0.0-m2&lt;/liferay.maven.plugin.version&gt;\n        &lt;liferay.auto.deploy.dir&gt;..\\Liferay Portal\\liferay-portal-6.2.10.1-ee-ga1\\deploy&lt;/liferay.auto.deploy.dir&gt;\n        &lt;liferay.app.server.deploy.dir&gt;..\\Liferay Portal\\liferay-portal-6.2.10.1-ee-ga1\\tomcat-7.0.42\\webapps&lt;/liferay.app.server.deploy.dir&gt;\n        &lt;liferay.app.server.lib.global.dir&gt;..\\Liferay Portal\\liferay-portal-6.2.10.1-ee-ga1\\tomcat-7.0.42\\lib\\ext&lt;/liferay.app.server.lib.global.dir&gt;\n        &lt;liferay.app.server.portal.dir&gt;..\\Liferay Portal\\liferay-portal-6.2.10.1-ee-ga1\\tomcat-7.0.42\\webapps\\ROOT&lt;/liferay.app.server.portal.dir&gt;\n    &lt;/properties&gt;\n    &lt;/profile&gt;\n\n&lt;/profiles&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>But while i perform a build i get the below error:</p>\n\n<blockquote>\n  <p>[ERROR] Failed to execute goal\n  com.liferay.maven.plugins:liferay-maven-plugin:6.2.1:build-css\n  (default) on project myNewProject: null: MojoExecutionException:\n  NullPointerException -> [Help 1]</p>\n  \n  <p>org.apache.maven.lifecycle.LifecycleExecutionException: Failed to\n  execute goal\n  com.liferay.maven.plugins:liferay-maven-plugin:6.2.1:build-css\n  (default) on project myNewProject: null\n          at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:216)\n          at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)\n          at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)\n          at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:108)\n          at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:76)\n          at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build(SingleThreadedBuilder.java:51)\n          at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:116)\n          at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:361)</p>\n</blockquote>\n\n<p>My questions are:</p>\n\n<p>What is it causing a null pointer exception while i am performing the build?</p>\n"},{"answers":[{"answer_id":48056709,"body":"<p>The correct port for <em>Keycloak</em> is <strong>8080</strong>. The <em>9990</em> is the port for <em>Wildfly</em> administration.<br>\nUse <a href=\"http://localhost:8080/auth\" rel=\"noreferrer\">http://localhost:8080/auth</a></p>\n"},{"answer_id":48400689,"body":"<p>If you will check keycloak <a href=\"http://www.keycloak.org/docs/2.5/server_installation/topics/network/ports.html\" rel=\"nofollow noreferrer\">documentation</a> you will get detail information about port that you can modify as well only condition that port should not capture by any other application.</p>\n\n<pre><code> &lt;socket-binding-group name=\"standard-sockets\" default-interface=\"public\" port-offset=\"${jboss.socket.binding.port-offset:0}\"&gt;\n        &lt;socket-binding name=\"management-http\" interface=\"management\" port=\"${jboss.management.http.port:9990}\"/&gt;\n        &lt;socket-binding name=\"management-https\" interface=\"management\" port=\"${jboss.management.https.port:9993}\"/&gt;\n        &lt;socket-binding name=\"ajp\" port=\"${jboss.ajp.port:8009}\"/&gt;\n        &lt;socket-binding name=\"http\" port=\"${jboss.http.port:8080}\"/&gt;\n        &lt;socket-binding name=\"https\" port=\"${jboss.https.port:8443}\"/&gt;\n        &lt;socket-binding name=\"txn-recovery-environment\" port=\"4712\"/&gt;\n        &lt;socket-binding name=\"txn-status-manager\" port=\"4713\"/&gt;\n        &lt;outbound-socket-binding name=\"mail-smtp\"&gt;\n            &lt;remote-destination host=\"localhost\" port=\"25\"/&gt;\n        &lt;/outbound-socket-binding&gt;\n    &lt;/socket-binding-group&gt;\n</code></pre>\n\n<p>So default port <code>http</code> its <code>8080</code> and <code>https</code> its <code>8443</code></p>\n"},{"answer_id":64335206,"body":"<p>I had set a &quot;Frontend URL&quot; (<code>Keycloak Admin Console &gt; Realm Settings &gt; General Frontend Url</code>) for the realm that looked like this: <code>http://localhost:8080</code> while the client's &quot;Root URL&quot; was <code>http://localhost:8080/auth</code>.</p>\n<p>After removing the &quot;Frontend URL&quot; everything worked fine. Another solution was to set both fields to <code>http://localhost:8080/auth</code>.</p>\n"},{"answer_id":67616063,"body":"<p>I had the same problem and then noticed that when I started standalone .bac, at the beginning of the prompt it said something like &quot;JBOSS_HOME may be pointing to a different installation - unpredictable results may occur.&quot;, then if is that the case,  just\ndelete the JBOSS_HOME environment variable. I solved in this way. (I don't know how good is this solution, but i had no other ways to make it works)</p>\n"},{"answer_id":69719728,"body":"<p>I was facing this issue with Keycloak running on Ubuntu image inside Docker.\nWhat worked for me was adding <code>-b 0.0.0.0</code> argument.</p>\n<p>So one can try running following command:\n<code>bin/standalone.sh -b 0.0.0.0</code></p>\n<p>You may be able to access console at <code>localhost:8080</code></p>\n"},{"answer_id":69979591,"body":"<p>In my case <a href=\"https://www.keycloak.org/docs/latest/server_installation/index.html#_database\" rel=\"nofollow noreferrer\">the docs</a> I read didn't mention to edit the <code>&lt;default-bindings .... datasource=...</code> when adding a database. The server.log showed the wrong datasource name 'ExampleDS' which made it clear enough:</p>\n<pre><code>2021-11-15 18:32:29,302 ERROR [org.jboss.as.controller.management-operation] (Controller Boot Thread) WFLYCTL0013: Operation (&quot;add&quot;) failed - address: ([(&quot;deployment&quot; =&gt; &quot;keycloak-server.war&quot;)]) - failure description: {\n    &quot;WFLYCTL0412: Required services that are not installed:&quot; =&gt; [&quot;jboss.naming.context.java.jboss.datasources.ExampleDS&quot;],\n    &quot;WFLYCTL0180: Services with missing/unavailable dependencies&quot; =&gt; [&quot;jboss.naming.context.java.module.auth.auth.DefaultDataSource is missing [jboss.naming.context.java.jboss.datasources.ExampleDS]&quot;]\n}\n</code></pre>\n<p>So I fixed that...and was failing to connect to the database, because my database wasn't listening on the address it used.</p>\n<pre><code>Caused by: org.postgresql.util.PSQLException: Connection to &lt;host_goes_here&gt;:5432 refused. Check that the hostname and port are correct and that the postmaster is accepting TCP/IP connections.\n</code></pre>\n<p>Reconfiguring  PostgreSQL fixed that:</p>\n<p>/etc/postgresql/12/main/postgresql.conf</p>\n<pre><code>listen_addresses = '*'\n</code></pre>\n<p>/etc/postgresql/12/main/pg_hba.conf</p>\n<pre><code>host    keycloak    keycloak     &lt;ip_goes_here&gt;/32    &lt;method_goes_here&gt;\n</code></pre>\n<p>And FYI other than looking at config, you can use things like this to see what it listens to:</p>\n<pre><code>lsof -Pni | grep java\nss -ltp | grep java\nnetstat -lantp | grep java\n</code></pre>\n"},{"answer_id":75563688,"body":"<p>In my case it worked fine when I added --http-relative-path=/auth to the run command, thus my docker-compose file is:</p>\n<pre><code>version: '3.8'\nservices:\n  keycloak:\n    image: quay.io/keycloak/keycloak:19.0.1\n    command: ['start-dev --import-realm --http-relative-path=/auth']\n    volumes:\n      - ./realm-config:/opt/keycloak/data/import\n    environment:\n      - KC_DB=dev-file\n      - KEYCLOAK_ADMIN=administrator\n      - KEYCLOAK_ADMIN_PASSWORD=not-my-password\n      - KC_FEATURES=scripts\n      - KC_HTTP_PORT=9080\n      - KC_HTTPS_PORT=9443\n    ports:\n      - 127.0.0.1:9080:9080\n      - 127.0.0.1:9443:9443\n</code></pre>\n"}],"last_activity_date":1684536932,"question_id":48056418,"body":"<p>I am trying to install Keycloak on my PC. I have the Java 8 JDK installed.</p>\n\n<p>After running <code>\\bin\\standalone.bat</code>, when I go to the page <code>127.0.0.1:9990/auth</code>, I am returned the error</p>\n\n<blockquote>\n  <p>404 - Not Found</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/g4Kzq.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/g4Kzq.png\" alt=\"screenshot of error page with title &quot;Error&quot; and body &quot;404 - Not Found&quot;\"></a></p>\n"},{"answers":[{"answer_id":76292769,"body":"<p>I think there is no size limit for <code>Dataflow Flex Template</code>.</p>\n<p>Too big fat jar can reduce the runtime, but as far as I know there is no quota or limit for Flex template.</p>\n"}],"last_activity_date":1684535557,"question_id":76274972,"body":"<p>Hi I trying to find the max size allowed for the dataflow run in flex mode and a way to check the size.\nI know the classic template has a limit of 10MB per template.</p>\n<p>But Searching on the Google Cloud documentation I was not able to find if the size is the same as the classic one.</p>\n<p>On the classic template I can check the size of my template by checking the file size inside a bucket.</p>\n<p>But for the flex template I can't do that because the flex templates runs as a Container file so\nits build when the job is running.\nOne thing I can do is check the Uber jar that my java project package before upload to GCP.</p>\n<p>But I'm assuming the template is the max size of the graph that dataflow generate and not by the size of the application (my jars has around 90 ~ 120MB and runs fine in the GCP).</p>\n"},{"comments":[{"comment_id":134524877,"body":"Do you see any error/exception?"},{"comment_id":134526292,"body":"Check the config files and also check the annotations are correctly placed"},{"comment_id":134529029,"body":"@Codified Before insertion I see only warning about “JNDI” not found. On insert I see error that table not exist."}],"answers":[{"answer_id":76292736,"body":"<p>The problem was solved when instead of <code>hibernate-core</code> dependency I used <code>hibernate-entitymanager</code>. Then I used just Configuration instead of AnnotationConfiguration. With the first dependency, I can't find <code>addAnnotatedClass</code> method.</p>\n<p>Then Hibernate started to create tables after calling</p>\n<pre><code>SessionFactory sessionFactory = new Configuration()\n                    .addAnnotatedClass(app.model.TestEntity.class)\n                    .buildSessionFactory();\n</code></pre>\n"}],"last_activity_date":1684535108,"question_id":76285640,"body":"<p>I'm trying to run Hibernate using annotations. But after calling <code>buildSessionFactory()</code> tables are not generated. Here is my code:</p>\n<pre><code>public class HibernateApp {\n    public static void main(String[] args) {\n        SessionFactory sessionFactory = buildSessionFactory();\n\n        Session session = sessionFactory.openSession();\n        Transaction transaction = session.beginTransaction();\n        \n        TestEntity entity = new TestEntity();\n        session.save(entity);\n\n        transaction.commit();\n        session.close();\n        sessionFactory.close();\n    }\n\n    private static SessionFactory buildSessionFactory() {\n        try {\n            AnnotationConfiguration configuration = new AnnotationConfiguration();\n            Properties properties = PropertiesReader.get();\n            configuration.setProperties(properties);\n            configuration.addAnnotatedClass(app.model.TestEntity.class);\n            configuration.buildMappings();\n            return configuration.buildSessionFactory();\n        } catch (Exception e) {\n            e.printStackTrace();\n            throw new ExceptionInInitializerError(e);\n        }\n    }\n}\n</code></pre>\n<p>My properties:</p>\n<pre><code>hibernate.connection.driver_class=oracle.jdbc.driver.OracleDriver\nhibernate.dialect=org.hibernate.dialect.Oracle10gDialect\nhibernate.ddl-auto=update\nhibernate.connection.url=jdbc:oracle:thin:@10.0.0.181:1521:center\nhibernate.connection.username=username\nhibernate.connection.password=password\nhibernate.connection.autocommit=true\n</code></pre>\n"},{"comments":[{"comment_id":133392533,"body":"Not if they&#39;re instance variables, no, but you made the choice to make them instance variables. There&#39;s no generic way to answer whether or not something &quot;should&quot; be implemented a certain way."}],"answers":[{"answer_id":76292724,"body":"<p>Static methods only have access to static objects/variables directly. In order to use any instance you will need to supply it as a parameter.</p>\n<p>Because you're accessing an Instance of a database you should leave your code as is. See <a href=\"https://stackoverflow.com/a/11993118/5899345\">this answer</a> for a precise difference between Static methods and Instance methods.</p>\n<p>Also, you don't need to call <code>gson#toJson</code> if you're using <code>ctx#json</code>, since the latter already does the JSON parsing for you. If you want to use gson you can define it as the default mapper (available since version 5.3.1):</p>\n<pre class=\"lang-java prettyprint-override\"><code>Javalin app = Javalin.create(javalinConfig -&gt; {\n    javalinConfig.staticFiles.add(&quot;/public&quot;);\n    javalinConfig.jsonMapper(new JavalinGson());\n}).start();\n</code></pre>\n"}],"last_activity_date":1684534859,"question_id":75608623,"body":"<p>after seeing few projects on GitHub I've been thinking, should I use static methods in my controller? I use Javalin and I created NoteController class to service all requests. What's the difference between my idea and the other one, to use static methods and don't create instance of NoteController?</p>\n<pre><code>public static void main(String[] args){\n        NoteController controller = new NoteController();\n\n        Javalin app = Javalin.create(javalinConfig -&gt; javalinConfig.staticFiles.add(&quot;/public&quot;))\n                .start();\n        app.routes(()-&gt; {\n           path(&quot;notes&quot;, ()-&gt;{\n                post(controller::insertNote);\n                get(controller::getNotes);\n                delete(controller::deleteNote);\n                put(controller::updateNote);\n           });\n</code></pre>\n<pre><code>public void insertNote(Context ctx){\n        database.insertNote(gson.fromJson(ctx.body(), Note.class));\n        ctx.status(200);\n    }\n\n    public void getNotes(Context ctx){\n        ctx.json(gson.toJson(database.getNotes(ctx.queryParam(&quot;id&quot;))));\n        ctx.status(200);\n    }\n\n    public void deleteNote(Context ctx){\n        database.deleteNote(ctx.queryParam(&quot;id&quot;));\n        ctx.status(200);\n    }\n\n    public void updateNote(Context ctx){\n        database.updateNote(gson.fromJson(ctx.body(), Note.class));\n        ctx.status(200);\n    }\n</code></pre>\n<p>Is my way of doing that incorrect? If I use static methods, I won't be able to use gson object as well as database instance to do database operations</p>\n"},{"answers":[{"answer_id":76292681,"body":"<p>Try updating the Kotlin Gradle plugin version in the build.gradle file in the image_viewer package.\nUpdate the following line:</p>\n<pre><code>org.jetbrains.kotlin:kotlin-gradle-plugin:1.3.50\n</code></pre>\n<p>to</p>\n<pre><code>org.jetbrains.kotlin:kotlin-gradle-plugin:1.5.20\n</code></pre>\n"}],"last_activity_date":1684534279,"question_id":76292412,"body":"<p>I just setup/installed the latest android studio with all the latest configurations e.g. SDK, Flutter etc. I am building a Flutter App with the following configurations:</p>\n<pre><code>Android Language: Java.\niOS Language: Objective-C.\nType: Applicaiton.\n</code></pre>\n<p>I am using the <a href=\"https://pub.dev/packages/image_viewer\" rel=\"nofollow noreferrer\">image_viewer</a> package in my app. After adding this package, the app fails to run with following error:</p>\n<pre><code>* What went wrong:\nThe Android Gradle plugin supports only Kotlin Gradle plugin version 1.5.20 and higher.\nThe following dependencies do not satisfy the required version:\nproject ':image_viewer' -&gt; org.jetbrains.kotlin:kotlin-gradle-plugin:1.3.50\n</code></pre>\n"},{"last_activity_date":1684533772,"question_id":76292650,"body":"<p>SAP provides Crystal Reports for Eclipse Runtime Libraries. I would like to export Crystal report to XLSX file using this Crystal Java libraries. I have not found any useful example.</p>\n<p>I found <a href=\"https://stackoverflow.com/questions/48571749/crystal-reports-with-java\">this</a> question. Unfortunately <code>com.crystaldecisions.sdk.occa.report.exportoptions.ReportExportFormat</code> class does not have <code>recordToMSExcel2007</code> field in newest SDK. I checked SP 29 version 12.2.230.4777. This class is in CrystalReportsRuntime.jar.\n<code>com.crystaldecisions.sdk.occa.report.exportoptions.ReportExportFormat</code> class has following fields:</p>\n<pre><code> public static final ReportExportFormat crystalReports = new ReportExportFormat(0);\n    public static final ReportExportFormat MSWord = new ReportExportFormat(1);\n    public static final ReportExportFormat MSExcel = new ReportExportFormat(2);\n    public static final ReportExportFormat RTF = new ReportExportFormat(3);\n    public static final ReportExportFormat PDF = new ReportExportFormat(5);\n    public static final ReportExportFormat recordToMSExcel = new ReportExportFormat(6);\n    public static final ReportExportFormat text = new ReportExportFormat(7);\n    public static final ReportExportFormat characterSeparatedValues = new ReportExportFormat(8);\n    public static final ReportExportFormat tabSeparatedText = new ReportExportFormat(9);\n    public static final ReportExportFormat editableRTF = new ReportExportFormat(10);\n</code></pre>\n<p>I checked <code>MSExcel</code> and <code>recordToMSExcel</code> and both exports to XLS file.</p>\n<p>How to export report to XLSX file using Crystal Java SDK? Newest version is SP 29 12.2.230.4777.</p>\n"},{"answers":[{"answer_id":76292641,"body":"<p>ok I solved it thanks to chatgpt lol.</p>\n<p>Here's what I did:</p>\n<ol>\n<li>i removed &quot;.exe&quot; off the file extension</li>\n<li>after I was getting the ' &quot;chromedriver&quot; cannot be opened because the developer cannot be verified' popup, I did this (copied from chatgpt):</li>\n</ol>\n<ul>\n<li>Open the &quot;System Preferences&quot; on your macOS.</li>\n<li>Click on &quot;Security &amp; Privacy.&quot;</li>\n<li>In the &quot;General&quot; tab, you should see a message saying &quot;chromedriver&quot; was blocked from use because it is not from an identified developer.</li>\n<li>Click on the &quot;Allow Anyway&quot; button next to the message.\nYou might be prompted to enter your username and password to authorize the change. Provide the required information.</li>\n<li>Try running your code again, and it should now be able to execute the Chromedriver without the verification error.</li>\n</ul>\n"}],"last_activity_date":1684533613,"question_id":76292578,"body":"<p>I believe my chromedriver file is in the right place (blurred 's....' let's call this text &quot;sName&quot;):\n<a href=\"https://i.stack.imgur.com/3Gd0x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3Gd0x.png\" alt=\"enter image description here\" /></a></p>\n<p>And this is me getting the error:\n<a href=\"https://i.stack.imgur.com/VIIxW.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VIIxW.jpg\" alt=\"enter image description here\" /></a></p>\n<p>What I don't understand is, why does it work fine in all my other files? For example, in the left Package Explorer, you can see the 'section4' project where I've made files that let me go to flipkart.com and view the powerbanks they have for sale. The 'section4' project works just fine and I believe it relies on the same chromedriver as well.</p>\n<p>flipKart.java:</p>\n<pre><code>package section4flipkart;\n\nimport java.time.Duration;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.interactions.Actions;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.WebDriverWait;\n\nimport utils.WaitUtility;\n\n\npublic class flipKart {\n\nWebDriver driver = new ChromeDriver();\n    \n    String url = &quot;https://www.flipkart.com/&quot;;\n    \n    public void invokeBrowser() {\n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/Users/sName/eclipse-workspace/libs/chromedriver.exe&quot;);\n        \n        driver.manage().window().maximize();\n        driver.manage().deleteAllCookies();\n        driver.get(url);\n    }\n    \n    public void mouseHover() {\n        driver.findElement(By.xpath(&quot;//button[@class='_2KpZ6l _2doB4z']&quot;)).click();\n        \n        WebDriverWait wait1 = new WebDriverWait(driver, Duration.ofSeconds(10));\n        wait1.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//div[text()='Electronics']&quot;)));\n        \n        WebElement electronicsLink = driver.findElement(By.xpath(&quot;//div[text()='Electronics']&quot;));\n        \n        Actions action = new Actions(driver);\n        action.moveToElement(electronicsLink).build().perform();\n        \n        WaitUtility.waitTillElementVisible(driver, By.xpath(&quot;//a[text()='Powerbank']&quot;), Duration.ofSeconds(10));\n        WebElement powerbankLink = driver.findElement(By.xpath(&quot;//a[text()='Powerbank']&quot;));\n        action.moveToElement(powerbankLink).click().build().perform();\n    }\n    \n    public static void main(String[] args) {\n        flipKart fp = new flipKart();\n        fp.invokeBrowser();\n        fp.mouseHover();\n    }\n}\n</code></pre>\n<p>WaitUtility.java file:</p>\n<pre><code>package utils;\n\n\nimport java.time.Duration;\n\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.support.ui.ExpectedConditions;\nimport org.openqa.selenium.support.ui.WebDriverWait;\n\npublic class WaitUtility {\n    public static void waitTillElementVisible(WebDriver driver, By by, Duration timeoutInSeconds) {\n        WebDriverWait wait = new WebDriverWait(driver, timeoutInSeconds);\n        \n        wait.until(ExpectedConditions.visibilityOfElementLocated(by));\n    }\n}\n</code></pre>\n<p>Not sure why this isn't working. I've tried opening terminal, navigating to the chromedriver file directory and running:</p>\n<pre><code>spctl --add --label 'Approved' chromedriver\n</code></pre>\n<p>but not sure if that made a difference. When trying this I changed</p>\n<pre><code>&quot;/Users/sName/eclipse-workspace/libs/chromedriver.exe&quot;\n</code></pre>\n<p>to</p>\n<pre><code>&quot;/Users/sName/eclipse-workspace/libs/chromedriver&quot;\n</code></pre>\n<p>but still getting the ' &quot;chromedriver&quot; cannot be opened because the developer cannot be verified' popup that my mac is giving.</p>\n"},{"comments":[{"comment_id":134536937,"body":"<a href=\"https://support.google.com/googleplay/android-developer/answer/10467955?hl=en#\" rel=\"nofollow noreferrer\">Use of All files access permission (MANAGE_EXTERNAL_STORAGE)</a>  Alternatively you can use SAF to create folders <a href=\"https://stackoverflow.com/questions/63733975/create-folder-using-storage-access-framework\">Create Folder using storage access framework</a>"},{"comment_id":134542030,"body":"Please provide enough code so others can better understand or reproduce the problem."}],"last_activity_date":1684533410,"question_id":76292627,"body":"<p>I'm currently working on a video player app and I want to be able to rename, delete and also create a private folder for users, but when I tried submitting the app with manage external storage permission Google rejected it. So is there a way I can go about this that Google won't reject it?</p>\n"},{"last_activity_date":1684533146,"question_id":76292607,"body":"<p>I'm using Mockito with JUnit, and I wrote a test to validate an integration with a controller. Very briefly, here is my issue,</p>\n<ol>\n<li>When I add an item to the repository in the test, it is properly preserved, and <code>.findAll()</code> returns the appropriate number of entries</li>\n<li>When I call a controller to do the same, it returns no results</li>\n</ol>\n<p>Here is my actual test,</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>    @Test\n    fun getWhenRepositoryHasOneElementThenReturnOneItem() {\n        val testName = &quot;getWhenRepositoryHasOneElementThenReturnOneItem&quot;\n        logTestStarted(testName)\n\n        if (itemRepository == null) {\n            logRepositoryIsNull(testName)\n            return\n        }\n\n        // given\n        itemRepository.deleteAll()\n        itemRepository.save(items[0])\n        given(itemRepository.findAll()).willReturn(listOf(items[0]))\n\n        // when\n        val mockedHttpServletResponse = mockHttpGETServletResponse() ?: return\n        logMockedHttpResponse(testName, mockedHttpServletResponse)\n\n        // then\n        assertThat(mockedHttpServletResponse.contentLength).isEqualTo(itemRepository.findAll().count())\n\n        logTestEnded(testName)\n    }\n</code></pre>\n<p>This is how I am initializing and setting up my test class,</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Log4j2\n@RunWith(MockitoJUnitRunner::class)\n@ExtendWith(MockitoExtension::class)\nclass ItemControllerTest {\n\n    private val logger: Logger = LoggerFactory.getLogger(\n        ItemControllerTest::class.java\n    ) as Logger\n\n    private var mvc: MockMvc? = null\n\n    @Mock\n    lateinit var itemService: ItemService\n\n    @InjectMocks\n    private lateinit var itemsController: ItemsController\n\n    @Mock\n    private val itemRepository: ItemRepository? = null\n\n    private val jsonItems: JacksonTester&lt;List&lt;Item&gt;&gt;? = null\n\n    object ControllerConstants {\n        const val CONTROLLER_ROUTE = &quot;/items&quot;\n        const val TEST_CLASS_NAME = &quot;ItemControllerTest&quot;\n    }\n\n    private val items: List&lt;Item&gt; = List(5) {\n        Item(\n            itemId = &quot;minim aliqua&quot;,\n            name = &quot;Excepteur sunt labore dolor&quot;,\n            description = &quot;sint velit deserunt laborum&quot;,\n            price = -54939028.11428884,\n            cost = -31369367.44365509\n        )\n        Item(\n            itemId = &quot;consectetur deserunt ipsum lab&quot;,\n            name = &quot;veniam nulla labore eiusmod&quot;,\n            description = &quot;ea amet sint dolor&quot;,\n            price = -5493538.6548884,\n            cost = -313267.4547509\n        )\n        Item(\n            itemId = &quot;Nemo enim ipsam&quot;,\n            name = &quot;voluptatem quia voluptas sit aspernatur&quot;,\n            description = &quot;aut odit aut fugit, sed quia consequuntur magni dolores&quot;,\n            price = -5734528.115454,\n            cost = -3133347.464509\n        )\n    }\n\n    @BeforeEach\n    fun setUp() {\n        MockitoAnnotations.openMocks(this)\n        logger.info(&quot;[${ControllerConstants.TEST_CLASS_NAME}::setUp]: Setup complete&quot;)\n\n        JacksonTester.initFields(this, ObjectMapper())\n        mvc = MockMvcBuilders.standaloneSetup(itemsController)\n            .setControllerAdvice(ItemExceptionHandler())\n            .addFilters&lt;StandaloneMockMvcBuilder&gt;(SadaParcelHttpHeaderFilter())\n            .build()\n        logger.info(&quot;[${ControllerConstants.TEST_CLASS_NAME}::setUp::MockMvc::Successful]: mvc: $mvc&quot;)\n    }\n\n    private fun mockHttpGETServletResponse(): MockHttpServletResponse? = mvc?.perform(\n        MockMvcRequestBuilders.get(ControllerConstants.CONTROLLER_ROUTE)\n            .accept(MediaType.APPLICATION_JSON)\n    )\n        ?.andReturn()\n        ?.response\n</code></pre>\n<p>My test fails, and it fails because while <code>itemRepository.findAll().count()</code> results in a <code>1</code> thanks to the following lines,</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>        itemRepository.deleteAll()\n        itemRepository.save(items[0])\n</code></pre>\n<p>However, <code>mockedHttpServletResponse.contentLength</code> is 0. Debugging the object, I do not see any content returned by my controller. Please see the below screenshot of my <code>mockedHttpServletResponse</code> object while stopped in debugging,</p>\n<p><a href=\"https://i.stack.imgur.com/yBk67.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yBk67.png\" alt=\"mockedHttpServletResponse object content\" /></a></p>\n<p>Now, my controller looks like this,</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@RestController\nclass ItemsController @Autowired constructor(itemRepository: ItemRepository) {\n    private val itemRepository: ItemRepository\n\n    init {\n        this.itemRepository = itemRepository\n    }\n\n    @GetMapping(&quot;/items&quot;, produces = [&quot;application/json&quot;])\n    @ResponseStatus(HttpStatus.OK)\n    @ResponseBody\n    fun index(): MutableIterable&lt;Item?&gt; = itemRepository.findAll()\n}\n</code></pre>\n<p>I'm not sure where I've gone wrong. I don't know where to start debugging the issue, even.</p>\n<p>Any pointers, even around where I could have POSSIBLY messed up, some hints, or directions would be highly, highly, appreciated. I just need to someone to tell me where I should spend my time looking into possible sources of errors because I feel really lost at the moment.</p>\n<p>Please let me know if there is more information I can provide to assist your understanding of this problem.</p>\n<h1>What I Tried</h1>\n<p>I was initially using <code>itemService</code>, and when it returned 0 items, I started wondering if I had set up the <code>itemService</code> mock in the wrong way, so in <code>@BeforeEach</code>, I tried manually setting the service in <code>@BeforeEach</code> like the following,</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>itemController.itemService = itemService\n</code></pre>\n<p>I don't believe what I did above is pretty, or good in any way. Its an ugly way of trying to fix something that should be a better way of doing (I acknowledge all concerns that people say about how horrible this approach was). I realized it and removed it. Why did I do it? I was somehow concerned and confused about <code>@Autowired</code> itself in <code>itemController</code> - is my assumption right that,</p>\n<ol>\n<li>If I mock <code>ItemService</code> in the test class, does it reflect in the controller's case for the service as well, are both the services the same object? Are they different? I am not sure about how Spring internally handles them</li>\n<li>I worry the same about <code>ItemRepository</code>, is the above <code>@Autowired</code> repository in the controller the same repository as in the test instance? Again, I just don't know.</li>\n</ol>\n<p>And because I was worried thanks to (2), I wanted to try the below as well,</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>if (itemRepository != null)\n    itemController.itemRepository = itemRepository\n</code></pre>\n<p>I wonder if its something related to how I've setup <code>MockMvc</code>, somehow me using the <code>annotations</code> wrong (<code>@Mock</code>, <code>@InjectMocks</code>), somehow not using <code>Mockito</code> the &quot;right way&quot;. I've recently just started doing a hands-on with Kotlin with Spring Boot, so a lot of questions I'm asking myself.</p>\n<p>I know my controller works because when I send a request <code>http://localhost:8080/items</code>, I get the following,</p>\n<p><a href=\"https://i.stack.imgur.com/kSVPT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kSVPT.png\" alt=\"Dummy data\" /></a></p>\n<p>This is dummy data I insert into <code>H2</code> whenever the application starts.</p>\n"},{"comments":[{"comment_id":62958327,"body":"Please check this solution - solid library and working example for both Parse and Format operations: <a href=\"http://stackoverflow.com/a/37744000/1882064\">stackoverflow.com/a/37744000/1882064</a>"}],"answers":[{"comments":[{"comment_id":18631286,"body":"Can I receive the value by it&#39;s name without passing all the elements? I mean something like this: System.out.print(params[&quot;one&quot;]);"},{"comment_id":18631332,"body":"@SergeyShafiev It is trivial to convert a <code>List&lt;NameValuePair&gt;</code> into a <code>Map&lt;String,String&gt;</code> Java doesn&#39;t have bracket access for hash maps, it would look like <code>map.get(&quot;one&quot;)</code> If you don&#39;t know how to do that, it should be another question (but try it on your own first). We prefer to keep questions slim here at SO"},{"comment_id":35743609,"body":"Be careful that if you have two times the same parameter in your URL (i.e. ?a=1&amp;a=2) URLEncodedUtils will throw an IllegalArgumentException"},{"comment_id":36964879,"body":"@Crystark As of httpclient 4.3.3, query string with duplicated names does not throw any exceptions. It works as expected. <code>System.out.println(URLEncodedUtils.parse(new URI(&quot;http:&#47;&#47;example.com&#47;?foo=bar&amp;foo=baz&quot;), &quot;UTF-8&quot;));</code> will print <i>[foo=bar, foo=baz]</i>."},{"comment_id":56160330,"body":"As of Android 6, the Apache HTTP client library has been removed. This means <code>URLEncodedUtils and </code>NameValuePair` are no longer available (unless you add a dependency to the legacy Apache library as described <a href=\"https://developer.android.com/about/versions/marshmallow/android-6.0-changes.html#behavior-apache-http-client\" rel=\"nofollow noreferrer\">here</a>)."},{"comment_id":62958289,"body":"Please check this solution: <a href=\"http://stackoverflow.com/a/37744000/1882064\">stackoverflow.com/a/37744000/1882064</a> which shows details on how to use the referenced URLEncodedUtils lib."},{"comment_id":69838736,"body":"Note that HttpClient will fail to parse a query component like this one <code>foo=b&#225;r</code>."}],"answer_id":13592324,"body":"<h1><a href=\"https://hc.apache.org/httpcomponents-core-5.1.x/current/httpcore5/apidocs/org/apache/hc/core5/net/URLEncodedUtils.html\" rel=\"noreferrer\">org.apache.http.client.utils.URLEncodedUtils</a></h1>\n<p>is a well known library that can do it for you</p>\n<pre><code>import org.apache.hc.client5.http.utils.URLEncodedUtils\n\nString url = &quot;http://www.example.com/something.html?one=1&amp;two=2&amp;three=3&amp;three=3a&quot;;\n\nList&lt;NameValuePair&gt; params = URLEncodedUtils.parse(new URI(url), Charset.forName(&quot;UTF-8&quot;));\n\nfor (NameValuePair param : params) {\n  System.out.println(param.getName() + &quot; : &quot; + param.getValue());\n}\n</code></pre>\n<p>Outputs</p>\n<pre><code>one : 1\ntwo : 2\nthree : 3\nthree : 3a\n</code></pre>\n"},{"comments":[{"comment_id":18632046,"body":"You are forgetting to decode the names and parameters, one reason why it&#39;s usually better to let libraries do common tasks."},{"comment_id":18632458,"body":"My answer points out a commonly used library (apache), if you are not already using it, it&#39;s probably not worth it. The answer looks good now and provides the map the OP would like"},{"comment_id":18632517,"body":"yeah .. of course, if I already need to use the specific library for other tasks, I&#39;ll use the provided methods instead of wasting time writing my own method."},{"comment_id":25475323,"body":"if you have multiple parameters with same name/key, using this function will override the value that has similar key."},{"comment_id":31574572,"body":"@snowball147 you could replace <code>query_pairs.put()</code> by a handling function or use a <code>Map&lt;String, List&lt;String&gt;&gt;</code>. For the second case amend the for to contain e.g. <code>int idx = pair.indexOf(&quot;=&quot;);             final String key = URLDecoder.decode(pair.substring(0, idx), &quot;UTF-8&quot;);             final String value = URLDecoder.decode(pair.substring(                     idx + 1), &quot;UTF-8&quot;);             if(!query_pairs.containsKey(key)) {                 query_pairs.put(key, new ArrayList&lt;String&gt;());             }             query_pairs.get(key).add(value);</code>"},{"comment_id":32926257,"body":"This also doesn&#39;t handle the case where the key doesn&#39;t have a value"},{"comment_id":34554995,"body":"I didn&#39;t know there could be multiple parameters with the same key.  In this case, what does HttpServletRequest.getParameter() returns?"},{"comment_id":34629174,"body":"@SharonBenAsher Read the docs <code>You should only use this method when you are sure the parameter has only one value. If the parameter might have more than one value, use getParameterValues(java.lang.String).</code> <a href=\"http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameter(java.lang.String)\" rel=\"nofollow noreferrer\">docs.oracle.com/javaee/6/api/javax/servlet/&hellip;</a>"},{"comment_id":48627224,"body":"This doesn&#39;t seem to work right with encoded &amp;&#39;s (&amp;amp;).   For example it breaks on this url: <a href=\"http://a.com/q?1=a&amp;amp;b&amp;2=b&amp;amp;c\" rel=\"nofollow noreferrer\">a.com/q?1=a&amp;amp;b&amp;2=b&amp;amp;c</a>  The output of that should be {1=a&amp;b, 2=b&amp;c}"},{"comment_id":48769932,"body":"@Chris You&#39;re confusing xml/html escaping with URL encoding.  Your example URL should be: a.com/q?1=a%26b&amp;2=b%26c"},{"comment_id":52546654,"body":"If you have &quot;#&quot; in your url - URL.getQuery() return null and this solution will not work"},{"comment_id":70467241,"body":"It should be <code>it.length() &gt;= idx + 1</code> so that &quot;a=&amp;b=&amp;c=&quot; is parsed to {&quot;a&quot;,&quot;&quot;},{&quot;b&quot;,&quot;&quot;} and {&quot;c&quot;,&quot;&quot;}"},{"comment_id":73570788,"body":"@Pr0gr4mm3r I edited your answer to add the null checks also for the first two solutions. Note that for &quot;<a href=\"http://www.example.com\" rel=\"nofollow noreferrer\">example.com</a>&quot; <code>getQuery()</code> returns null, instead for &quot;<a href=\"http://www.example.com\" rel=\"nofollow noreferrer\">example.com</a>?&quot; it returns an empty String."},{"comment_id":86446937,"body":"it would be nice to indicate which functions are used: Collectors.mapping(...) and Collectors.toList(...)"},{"comment_id":99909015,"body":"Hi, it would be great if someone could update this solution with the required imports for everything, as intellij, doest have a feature to go find the imports (at least doesnt work for me). E.g. these cant be resolved: MAP, URL, UnsupportedEncodingException, URLDecoder"},{"comment_id":102439196,"body":"Ready-to-use solution (with imports) that handles multi values, parameter decoding and error handling can be found below ( see <a href=\"https://stackoverflow.com/a/58017826/1211082\">stackoverflow.com/a/58017826/1211082</a> )  ( @John Little )"},{"comment_id":108515223,"body":"@Pr0gr4mm3r great example! :) Could I use the same code for parsing a normal commanline string what has different parameters and values and looks like: t=s vo=&quot;bin\\\\house_1.xml&quot; u=30?"},{"comment_id":117151864,"body":"Simply avoiding UnsupportedEncodingException: ...     return new SimpleImmutableEntry&lt;&gt;(URLDecoder.decode(key, StandardCharsets.UTF_8), URLDecoder.decode(value, StandardCharsets.UTF_8)); ..."},{"comment_id":117618393,"body":"Wouldnt this fail on param1=par&amp;myparam&amp;param2=param2? unless you have a url encoded query string already..."}],"answer_id":13592567,"body":"<p>If you are looking for a way to achieve it without using an external library, the following code will help you.</p>\n<pre><code>public static Map&lt;String, String&gt; splitQuery(URL url) throws UnsupportedEncodingException {\n    Map&lt;String, String&gt; query_pairs = new LinkedHashMap&lt;String, String&gt;();\n    String query = url.getQuery();\n    String[] pairs = query.split(&quot;&amp;&quot;);\n    for (String pair : pairs) {\n        int idx = pair.indexOf(&quot;=&quot;);\n        query_pairs.put(URLDecoder.decode(pair.substring(0, idx), &quot;UTF-8&quot;), URLDecoder.decode(pair.substring(idx + 1), &quot;UTF-8&quot;));\n    }\n    return query_pairs;\n}\n</code></pre>\n<p>You can access the returned Map using <code>&lt;map&gt;.get(&quot;client_id&quot;)</code>, with the URL given in your question this would return &quot;SS&quot;.</p>\n<p><strong>UPDATE</strong>  URL-Decoding added</p>\n<p><strong>UPDATE</strong> As this answer is still quite popular, I made an improved version of the method above, which handles multiple parameters with the same key and parameters with no value as well.</p>\n<pre><code>public static Map&lt;String, List&lt;String&gt;&gt; splitQuery(URL url) throws UnsupportedEncodingException {\n  final Map&lt;String, List&lt;String&gt;&gt; query_pairs = new LinkedHashMap&lt;String, List&lt;String&gt;&gt;();\n  final String[] pairs = url.getQuery().split(&quot;&amp;&quot;);\n  for (String pair : pairs) {\n    final int idx = pair.indexOf(&quot;=&quot;);\n    final String key = idx &gt; 0 ? URLDecoder.decode(pair.substring(0, idx), &quot;UTF-8&quot;) : pair;\n    if (!query_pairs.containsKey(key)) {\n      query_pairs.put(key, new LinkedList&lt;String&gt;());\n    }\n    final String value = idx &gt; 0 &amp;&amp; pair.length() &gt; idx + 1 ? URLDecoder.decode(pair.substring(idx + 1), &quot;UTF-8&quot;) : null;\n    query_pairs.get(key).add(value);\n  }\n  return query_pairs;\n}\n</code></pre>\n<p><strong>UPDATE</strong> Java8 version</p>\n<pre><code>public Map&lt;String, List&lt;String&gt;&gt; splitQuery(URL url) {\n    if (Strings.isNullOrEmpty(url.getQuery())) {\n        return Collections.emptyMap();\n    }\n    return Arrays.stream(url.getQuery().split(&quot;&amp;&quot;))\n            .map(this::splitQueryParameter)\n            .collect(Collectors.groupingBy(SimpleImmutableEntry::getKey, LinkedHashMap::new, mapping(Map.Entry::getValue, toList())));\n}\n\npublic SimpleImmutableEntry&lt;String, String&gt; splitQueryParameter(String it) {\n    final int idx = it.indexOf(&quot;=&quot;);\n    final String key = idx &gt; 0 ? it.substring(0, idx) : it;\n    final String value = idx &gt; 0 &amp;&amp; it.length() &gt; idx + 1 ? it.substring(idx + 1) : null;\n    return new SimpleImmutableEntry&lt;&gt;(\n        URLDecoder.decode(key, StandardCharsets.UTF_8),\n        URLDecoder.decode(value, StandardCharsets.UTF_8)\n    );\n}\n</code></pre>\n<p>Running the above method with the URL</p>\n<p><code>https://stackoverflow.com?param1=value1&amp;param2=&amp;param3=value3&amp;param3</code></p>\n<p>returns this Map:</p>\n<pre><code>{param1=[&quot;value1&quot;], param2=[null], param3=[&quot;value3&quot;, null]}\n</code></pre>\n"},{"comments":[{"comment_id":37117125,"body":"What about the URL decoding described in the selected answer?"},{"comment_id":39471262,"body":"Almost, there, right? That&#39;s going to give you the protocol+host+path on the first query parameter&#39;s name. And, a minor nit, withKeyValueSeparator() doesn&#39;t accept char. Needs to be String"},{"comment_id":43826613,"body":"This is also suspect to multiple keys with the same name. According to the javadocs this will throw an IllegalArgumentException"},{"comment_id":45756381,"body":"Also I would suggest to use .withKeyValueSeparator(&#39;=&#39;) . String as parameter is unnecessary cost compared to character."},{"comment_id":46058004,"body":"Instead of manually splitting <code>uri</code> you should use <code>new java.net.URL(uri).getQuery()</code> as this buys you free input validation on the URL."},{"comment_id":51096926,"body":"For decoding:      final Map&lt;String, String&gt; queryVars = Maps.transformValues(map, new  Function&lt;String,String&gt;() {  \t\t\t@Override \t\t\tpublic String apply(String value) { \t\t\t\ttry { \t\t\t\t\treturn URLDecoder.decode(value, &quot;UTF-8&quot;); \t\t\t\t} catch (UnsupportedEncodingException e) { \t\t\t\t\t// TODO Auto-generated catch block \t\t\t\t\te.printStackTrace(); \t\t\t\t} \t\t\t\t \t\t\t\treturn value; \t\t\t}         \t         });"},{"comment_id":52080615,"body":"@rkosegi, char-parameterized Splitter constructor creates string from char internally, so the one which more effective is String-parameterized"},{"comment_id":52081283,"body":"@KirillGamazkov : nobody should rely on internal implementation details. Passing a string literal will create instance of String (by compiler) where char is primitive type."},{"comment_id":52167482,"body":"@rkosegi, it&#39;s incorrect to say that one method more effective than another without digging into implementations"},{"comment_id":55658790,"body":"WARNING!!  It&#39;s NOT safe to do this since <code>splitter.split()</code> will throw <code>IllegalArgumentException</code> if there&#39;re duplicate key in query string. See <a href=\"http://stackoverflow.com/questions/1746507/authoritative-position-of-duplicate-http-get-query-keys\" title=\"authoritative position of duplicate http get query keys\">stackoverflow.com/questions/1746507/&hellip;</a>"},{"comment_id":58465571,"body":"In my case, the URL is safely controlled, so this is a nice fast way. Thanks."},{"comment_id":79971783,"body":"<code>url.split(&quot;\\\\?&quot;)[1].split(&quot;;&quot;)[0]</code> because cut cookie"},{"comment_id":98939194,"body":"Thanks you i use guava split"},{"comment_id":99774412,"body":"Beware that this solution would throw in case some value has extra &#39;=&#39; inside. Here is the workaround: <a href=\"https://stackoverflow.com/a/37402817/603516\">stackoverflow.com/a/37402817/603516</a>"}],"answer_id":23752349,"body":"<p>use google Guava and do it in 2 lines:</p>\n\n<pre><code>import java.util.Map;\nimport com.google.common.base.Splitter;\n\npublic class Parser {\n    public static void main(String... args) {\n        String uri = \"https://google.com.ua/oauth/authorize?client_id=SS&amp;response_type=code&amp;scope=N_FULL&amp;access_type=offline&amp;redirect_uri=http://localhost/Callback\";\n        String query = uri.split(\"\\\\?\")[1];\n        final Map&lt;String, String&gt; map = Splitter.on('&amp;').trimResults().withKeyValueSeparator('=').split(query);\n        System.out.println(map);\n    }\n}\n</code></pre>\n\n<p>which gives you</p>\n\n<pre><code>{client_id=SS, response_type=code, scope=N_FULL, access_type=offline, redirect_uri=http://localhost/Callback}\n</code></pre>\n"},{"answer_id":30269582,"body":"<p>If you're using Java 8 and you're willing to write a few reusable methods, you can do it in one line.</p>\n\n<pre><code>private Map&lt;String, List&lt;String&gt;&gt; parse(final String query) {\n    return Arrays.asList(query.split(\"&amp;\")).stream().map(p -&gt; p.split(\"=\")).collect(Collectors.toMap(s -&gt; decode(index(s, 0)), s -&gt; Arrays.asList(decode(index(s, 1))), this::mergeLists));\n}\n\nprivate &lt;T&gt; List&lt;T&gt; mergeLists(final List&lt;T&gt; l1, final List&lt;T&gt; l2) {\n    List&lt;T&gt; list = new ArrayList&lt;&gt;();\n    list.addAll(l1);\n    list.addAll(l2);\n    return list;\n}\n\nprivate static &lt;T&gt; T index(final T[] array, final int index) {\n    return index &gt;= array.length ? null : array[index];\n}\n\nprivate static String decode(final String encoded) {\n    try {\n        return encoded == null ? null : URLDecoder.decode(encoded, \"UTF-8\");\n    } catch(final UnsupportedEncodingException e) {\n        throw new RuntimeException(\"Impossible: UTF-8 is a required encoding\", e);\n    }\n}\n</code></pre>\n\n<p>But that's a pretty brutal line.</p>\n"},{"comments":[{"comment_id":76156900,"body":"This is more a Java 8 <i>approach</i> rather than a Java 8 oneliner."},{"comment_id":76157006,"body":"@Stephan well :) maybe both. But I&#39;m more interested to understand if you like this solution."},{"comment_id":76157592,"body":"IMO, a oneliner should be short and shouldn&#39;t span over multiple lines."},{"comment_id":76159092,"body":"IMO a oneliner is when it is a single statement. I wrote in this way for readability."},{"comment_id":76159937,"body":"There are multiple statements involved here."},{"comment_id":76161751,"body":"I&#39;ve double checked, this is a statement. Have a look at <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/expressions.html\" rel=\"nofollow noreferrer\">Expressions, Statements, and Blocks</a>"},{"comment_id":76164671,"body":"The solutions must use an utility function. So there are more than one statements involved."},{"comment_id":76170884,"body":"I guess I would call these statements: two oneliners that have a depenpency to an utility function :)"},{"comment_id":87454302,"body":"One liner is one line, this is a multiline statement"},{"comment_id":90505994,"body":"I guess you could write a whole class on a single line, but that&#39;s not what is usually meant by the phrase &quot;one-liner&quot;."},{"comment_id":112417257,"body":"One slight improvement if you happen to have Java 10 or higher - URLDecoder#decode (finally) has an overload that takes a Charset (e.g. StandardCharsets.UTF_8) instead of a string for the encoding, meaning you don&#39;t need to catch UnsupportedEncodingException."},{"comment_id":118377081,"body":"@AhmadShahwan as far as I remember, it was an ugly trick to be sure split() returns always an array of two elements (even if split() was unable to find the matching string =)"}],"answer_id":37368660,"body":"<h1>PLAIN Java 11</h1>\n<p>Given the URL to analyse:</p>\n<pre class=\"lang-java prettyprint-override\"><code>URL url = new URL(&quot;https://google.com.ua/oauth/authorize?client_id=SS&amp;response_type=code&amp;scope=N_FULL&amp;access_type=offline&amp;redirect_uri=http://localhost/Callback&quot;);\n</code></pre>\n<p>This solution collects a list of pairs:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Map.Entry&lt;String, String&gt;&gt; list = Pattern.compile(&quot;&amp;&quot;)\n   .splitAsStream(url.getQuery())\n   .map(s -&gt; Arrays.copyOf(s.split(&quot;=&quot;, 2), 2))\n   .map(o -&gt; Map.entry(decode(o[0]), decode(o[1])))\n   .collect(Collectors.toList());\n</code></pre>\n<p>This solution on the other hand collects a map (given that in a url there can be more parameters with same name but different values).</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, List&lt;String&gt;&gt; list = Pattern.compile(&quot;&amp;&quot;)\n   .splitAsStream(url.getQuery())\n   .map(s -&gt; Arrays.copyOf(s.split(&quot;=&quot;, 2), 2))\n   .collect(groupingBy(s -&gt; decode(s[0]), mapping(s -&gt; decode(s[1]), toList())));\n</code></pre>\n<p>Both the solutions must use an utility function to properly decode the parameters.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static String decode(final String encoded) {\n    return Optional.ofNullable(encoded)\n                   .map(e -&gt; URLDecoder.decode(e, StandardCharsets.UTF_8))\n                   .orElse(null);\n}\n</code></pre>\n"},{"comments":[{"comment_id":116095280,"body":"<code>Set</code> is the wrong data type for the use cases where parameter order is important."}],"answer_id":37600116,"body":"<p>Using above mentioned comments and solutions, I am storing all the query parameters using Map&lt;String, Object&gt; where Objects either can be string or Set&lt;String&gt;. The solution is given below. It is recommended to use some kind of url validator to validate the url first and then call convertQueryStringToMap method. </p>\n\n<pre><code>private static final String DEFAULT_ENCODING_SCHEME = \"UTF-8\";\n\npublic static Map&lt;String, Object&gt; convertQueryStringToMap(String url) throws UnsupportedEncodingException, URISyntaxException {\n    List&lt;NameValuePair&gt; params = URLEncodedUtils.parse(new URI(url), DEFAULT_ENCODING_SCHEME);\n    Map&lt;String, Object&gt; queryStringMap = new HashMap&lt;&gt;();\n    for(NameValuePair param : params){\n        queryStringMap.put(param.getName(), handleMultiValuedQueryParam(queryStringMap, param.getName(), param.getValue()));\n    }\n    return queryStringMap;\n}\n\nprivate static Object handleMultiValuedQueryParam(Map responseMap, String key, String value) {\n    if (!responseMap.containsKey(key)) {\n        return value.contains(\",\") ? new HashSet&lt;String&gt;(Arrays.asList(value.split(\",\"))) : value;\n    } else {\n        Set&lt;String&gt; queryValueSet = responseMap.get(key) instanceof Set ? (Set&lt;String&gt;) responseMap.get(key) : new HashSet&lt;String&gt;();\n        if (value.contains(\",\")) {\n            queryValueSet.addAll(Arrays.asList(value.split(\",\")));\n        } else {\n            queryValueSet.add(value);\n        }\n        return queryValueSet;\n    }\n}\n</code></pre>\n"},{"comments":[{"comment_id":106439511,"body":"for URLs use <code>UriComponentsBuilder.fromHttpUrl(url)</code>"},{"comment_id":116095163,"body":"Beware that <code>getQueryParams()</code> does <b>not</b> decode the query parameters. So for a URL of <code>http:&#47;&#47;foobar&#47;path?param1=a%3Db</code> you get <code>param1: a%3Db</code> and not <code>param1: a=b</code>. You need to use <code>URLDecoder.decode()</code> yourself... - <code>getQueryParams()</code> is <b>BROKEN</b>."}],"answer_id":39348897,"body":"<p>If you are using Spring Framework:</p>\n\n<pre><code>public static void main(String[] args) {\n    String uri = \"http://my.test.com/test?param1=ab&amp;param2=cd&amp;param2=ef\";\n    MultiValueMap&lt;String, String&gt; parameters =\n            UriComponentsBuilder.fromUriString(uri).build().getQueryParams();\n    List&lt;String&gt; param1 = parameters.get(\"param1\");\n    List&lt;String&gt; param2 = parameters.get(\"param2\");\n    System.out.println(\"param1: \" + param1.get(0));\n    System.out.println(\"param2: \" + param2.get(0) + \",\" + param2.get(1));\n}\n</code></pre>\n\n<p>You will get:</p>\n\n<pre><code>param1: ab\nparam2: cd,ef\n</code></pre>\n"},{"comments":[{"comment_id":81219728,"body":"Without knowing where this UriComponentsBuilder class come from it&#39;s not very useful."},{"comment_id":100170294,"body":"<b>N.B.</b> This takes URIs. Java&#39;s version of URIs are not a superset of URLs (this is why toURI can throw exceptions)."},{"comment_id":116095229,"body":"Beware that <code>getQueryParams()</code> does <b>not</b> decode the query parameters. So for a URL of <code>http:&#47;&#47;foobar&#47;path?param1=a%3Db</code> you get <code>param1: a%3Db</code> and not <code>param1: a=b</code>. You need to use <code>URLDecoder.decode()</code> yourself... - <code>getQueryParams()</code> is <b>BROKEN</b>."},{"comment_id":130167051,"body":"Also, if the URL comes from an HTML document, you must unescape it first: <code>org.springframework.web.util.HtmlUtils.htmlUnescape(myUrl)</code>"}],"answer_id":46958658,"body":"<p>The shortest way I've found is this one:</p>\n\n<pre><code>MultiValueMap&lt;String, String&gt; queryParams =\n            UriComponentsBuilder.fromUriString(url).build().getQueryParams();\n</code></pre>\n\n<p><strong>UPDATE:</strong> <code>UriComponentsBuilder</code> comes from Spring. Here <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/util/UriComponentsBuilder.html\" rel=\"noreferrer\">the link</a>.</p>\n"},{"answer_id":48333588,"body":"<p>If you are using Spring, add an argument of type <code>@RequestParam Map&lt;String,String&gt;</code>  to your controller method, and Spring will construct the map for you!</p>\n"},{"comments":[{"comment_id":99171903,"body":"This works with Spring Web as well as in your controller you can have a parameter of type <code>HttpServletRequest</code> and it works with <code>MockHttpServletRequest</code> as well in Mock MVC unit tests."}],"answer_id":48451566,"body":"<p>If you are using servlet doGet try this</p>\n\n<pre><code>request.getParameterMap()\n</code></pre>\n\n<blockquote>\n  <p><em>Returns a java.util.Map of the parameters of this request.</em></p>\n  \n  <p><em>Returns:\n  an immutable java.util.Map containing parameter names as keys and parameter values as map values. The keys in the parameter map are of type String. The values in the parameter map are of type String array.</em></p>\n  \n  <p>(<a href=\"https://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterMap()\" rel=\"noreferrer\">Java doc</a>)</p>\n</blockquote>\n"},{"comments":[{"comment_id":88951304,"body":"HttpUrl is kind of a weird name but this is exactly what I needed. Thanks."},{"comment_id":122701931,"body":"update: <code>HttpUrl.parse()</code> is deprecated as of OkHttp 4, but this is still possible with the new OkHttp extension function described here: <a href=\"https://stackoverflow.com/a/63118203/2888763\">stackoverflow.com/a/63118203/2888763</a>"}],"answer_id":48594445,"body":"<p>For Android, if you are using <a href=\"https://github.com/square/okhttp\" rel=\"noreferrer\">OkHttp</a> in your project. You might get a look at this. It simple and helpful. </p>\n\n<pre><code>final HttpUrl url = HttpUrl.parse(query);\nif (url != null) {\n    final String target = url.queryParameter(\"target\");\n    final String id = url.queryParameter(\"id\");\n}\n</code></pre>\n"},{"comments":[{"comment_id":98935297,"body":"looks like you need to also share your <code>splitQueryParameters()</code> method? And what&#39;s with the <code>**Collectors**</code>?"}],"answer_id":50747564,"body":"<p>Just an update to the Java 8 version</p>\n\n<pre><code>public Map&lt;String, List&lt;String&gt;&gt; splitQuery(URL url) {\n    if (Strings.isNullOrEmpty(url.getQuery())) {\n        return Collections.emptyMap();\n    }\n    return Arrays.stream(url.getQuery().split(\"&amp;\"))\n            .map(this::splitQueryParameter)\n            .collect(Collectors.groupingBy(SimpleImmutableEntry::getKey, LinkedHashMap::new, **Collectors**.mapping(Map.Entry::getValue, **Collectors**.toList())));\n}\n</code></pre>\n\n<p>mapping and toList() methods have to be used with Collectors which was not mentioned in the top answer. Otherwise it would throw compilation error in IDE</p>\n"},{"comments":[{"comment_id":89041656,"body":"Equal credit to <a href=\"https://stackoverflow.com/users/1203812/matthew-herod\">stackoverflow.com/users/1203812/matthew-herod</a> 50/50 effort but can&#39;t co-author."}],"answer_id":51024552,"body":"<p>I had a go at a Kotlin version seeing how this is the top result in Google.</p>\n\n<pre><code>@Throws(UnsupportedEncodingException::class)\nfun splitQuery(url: URL): Map&lt;String, List&lt;String&gt;&gt; {\n\n    val queryPairs = LinkedHashMap&lt;String, ArrayList&lt;String&gt;&gt;()\n\n    url.query.split(\"&amp;\".toRegex())\n            .dropLastWhile { it.isEmpty() }\n            .map { it.split('=') }\n            .map { it.getOrEmpty(0).decodeToUTF8() to it.getOrEmpty(1).decodeToUTF8() }\n            .forEach { (key, value) -&gt;\n\n                if (!queryPairs.containsKey(key)) {\n                    queryPairs[key] = arrayListOf(value)\n                } else {\n\n                    if(!queryPairs[key]!!.contains(value)) {\n                        queryPairs[key]!!.add(value)\n                    }\n                }\n            }\n\n    return queryPairs\n}\n</code></pre>\n\n<p>And the extension methods</p>\n\n<pre><code>fun List&lt;String&gt;.getOrEmpty(index: Int) : String {\n    return getOrElse(index) {\"\"}\n}\n\nfun String.decodeToUTF8(): String { \n    URLDecoder.decode(this, \"UTF-8\")\n}\n</code></pre>\n"},{"answer_id":53342473,"body":"<p>Answering here because this is a popular thread.  This is a clean solution in Kotlin that uses the recommended <code>UrlQuerySanitizer</code> api. <a href=\"https://developer.android.com/reference/android/net/UrlQuerySanitizer\" rel=\"nofollow noreferrer\">See the official documentation</a>.  I have added a string builder to concatenate and display the params. </p>\n\n<pre><code>    var myURL: String? = null\n\n    if (intent.hasExtra(\"my_value\")) {\n        myURL = intent.extras.getString(\"my_value\")\n    } else {\n        myURL = intent.dataString\n    }\n\n    val sanitizer = UrlQuerySanitizer(myURL)\n    // We don't want to manually define every expected query *key*, so we set this to true\n    sanitizer.allowUnregisteredParamaters = true\n    val parameterNamesToValues: List&lt;UrlQuerySanitizer.ParameterValuePair&gt; = sanitizer.parameterList\n    val parameterIterator: Iterator&lt;UrlQuerySanitizer.ParameterValuePair&gt; = parameterNamesToValues.iterator()\n\n    // Helper simply so we can display all values on screen\n    val stringBuilder = StringBuilder()\n\n    while (parameterIterator.hasNext()) {\n        val parameterValuePair: UrlQuerySanitizer.ParameterValuePair = parameterIterator.next()\n        val parameterName: String = parameterValuePair.mParameter\n        val parameterValue: String = parameterValuePair.mValue\n\n        // Append string to display all key value pairs\n        stringBuilder.append(\"Key: $parameterName\\nValue: $parameterValue\\n\\n\")\n    }\n\n    // Set a textView's text to display the string\n    val paramListString = stringBuilder.toString()\n    val textView: TextView = findViewById(R.id.activity_title) as TextView\n    textView.text = \"Paramlist is \\n\\n$paramListString\"\n\n    // to check if the url has specific keys\n    if (sanitizer.hasParameter(\"type\")) {\n        val type = sanitizer.getValue(\"type\")\n        println(\"sanitizer has type param $type\")\n    }\n</code></pre>\n"},{"answer_id":55948744,"body":"<p>On Android, there is a Uri class in package <em><strong>android.net</strong></em> . Note that <strong>Uri</strong> is part of <strong>android.net</strong>, whereas <strong>URI</strong> is part of <strong>java.net</strong> .</p>\n<p>Uri class has many functions to extract key-value pairs from a query.\n<a href=\"https://i.stack.imgur.com/Rmjey.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Rmjey.png\" alt=\"enter image description here\" /></a></p>\n<p>Following function returns key-value pairs in the form of HashMap.</p>\n<p>In Java:</p>\n<pre><code>Map&lt;String, String&gt; getQueryKeyValueMap(Uri uri){\n    HashMap&lt;String, String&gt; keyValueMap = new HashMap();\n    String key;\n    String value;\n\n    Set&lt;String&gt; keyNamesList = uri.getQueryParameterNames();\n    Iterator iterator = keyNamesList.iterator();\n\n    while (iterator.hasNext()){\n        key = (String) iterator.next();\n        value = uri.getQueryParameter(key);\n        keyValueMap.put(key, value);\n    }\n    return keyValueMap;\n}\n</code></pre>\n<p>In Kotlin:</p>\n<pre><code>fun getQueryKeyValueMap(uri: Uri): HashMap&lt;String, String&gt; {\n        val keyValueMap = HashMap&lt;String, String&gt;()\n        var key: String\n        var value: String\n\n        val keyNamesList = uri.queryParameterNames\n        val iterator = keyNamesList.iterator()\n\n        while (iterator.hasNext()) {\n            key = iterator.next() as String\n            value = uri.getQueryParameter(key) as String\n            keyValueMap.put(key, value)\n        }\n        return keyValueMap\n    }\n</code></pre>\n"},{"answer_id":55952028,"body":"<p>Kotlin's Answer with initial reference from <a href=\"https://stackoverflow.com/a/51024552/3286489\">https://stackoverflow.com/a/51024552/3286489</a>, but with improved version by tidying up codes and provides 2 versions of it, and use immutable collection operations</p>\n\n<p>Use <code>java.net.URI</code> to extract the Query. Then use the below provided extension functions</p>\n\n<ol>\n<li>Assuming you only want the last value of query i.e. <code>page2&amp;page3</code> will get <code>{page=3}</code>, use the below extension function</li>\n</ol>\n\n<pre><code>    fun URI.getQueryMap(): Map&lt;String, String&gt; {\n        if (query == null) return emptyMap()\n\n        return query.split(\"&amp;\")\n                .mapNotNull { element -&gt; element.split(\"=\")\n                        .takeIf { it.size == 2 &amp;&amp; it.none { it.isBlank() } } }\n                .associateBy({ it[0].decodeUTF8() }, { it[1].decodeUTF8() })\n    }\n\n    private fun String.decodeUTF8() = URLDecoder.decode(this, \"UTF-8\") // decode page=%22ABC%22 to page=\"ABC\"\n</code></pre>\n\n<ol start=\"2\">\n<li>Assuming you want a list of all value for the query i.e. <code>page2&amp;page3</code> will get <code>{page=[2, 3]}</code></li>\n</ol>\n\n<pre><code>    fun URI.getQueryMapList(): Map&lt;String, List&lt;String&gt;&gt; {\n        if (query == null) return emptyMap()\n\n        return query.split(\"&amp;\")\n                .distinct()\n                .mapNotNull { element -&gt; element.split(\"=\")\n                        .takeIf { it.size == 2 &amp;&amp; it.none { it.isBlank() } } }\n                .groupBy({ it[0].decodeUTF8() }, { it[1].decodeUTF8() })\n    }\n\n    private fun String.decodeUTF8() = URLDecoder.decode(this, \"UTF-8\") // decode page=%22ABC%22 to page=\"ABC\"\n</code></pre>\n\n<p>The way to use it as below</p>\n\n<pre><code>    val uri = URI(\"schema://host/path/?page=&amp;page=2&amp;page=2&amp;page=3\")\n    println(uri.getQueryMapList()) // Result is {page=[2, 3]}\n    println(uri.getQueryMap()) // Result is {page=3}\n</code></pre>\n"},{"answer_id":56153095,"body":"<p><a href=\"https://netty.io/\" rel=\"noreferrer\">Netty</a> also provides a nice query string parser called <code>QueryStringDecoder</code>.\nIn one line of code, it can parse the URL in the question.\nI like because it doesn't require catching or throwing <code>java.net.MalformedURLException</code>.</p>\n\n<p>In one line:</p>\n\n<pre><code>Map&lt;String, List&lt;String&gt;&gt; parameters = new QueryStringDecoder(url).parameters();\n</code></pre>\n\n<p>See javadocs here: <a href=\"https://netty.io/4.1/api/io/netty/handler/codec/http/QueryStringDecoder.html\" rel=\"noreferrer\">https://netty.io/4.1/api/io/netty/handler/codec/http/QueryStringDecoder.html</a></p>\n\n<p>Here is a short, self contained, correct example:</p>\n\n<pre><code>import io.netty.handler.codec.http.QueryStringDecoder;\nimport org.apache.commons.lang3.StringUtils;\n\nimport java.util.List;\nimport java.util.Map;\n\npublic class UrlParse {\n\n  public static void main(String... args) {\n    String url = \"https://google.com.ua/oauth/authorize?client_id=SS&amp;response_type=code&amp;scope=N_FULL&amp;access_type=offline&amp;redirect_uri=http://localhost/Callback\";\n    QueryStringDecoder decoder = new QueryStringDecoder(url);\n    Map&lt;String, List&lt;String&gt;&gt; parameters = decoder.parameters();\n    print(parameters);\n  }\n\n  private static void print(final Map&lt;String, List&lt;String&gt;&gt; parameters) {\n    System.out.println(\"NAME               VALUE\");\n    System.out.println(\"------------------------\");\n    parameters.forEach((key, values) -&gt;\n        values.forEach(val -&gt;\n            System.out.println(StringUtils.rightPad(key, 19) + val)));\n  }\n}\n</code></pre>\n\n<p>which generates</p>\n\n<pre><code>NAME               VALUE\n------------------------\nclient_id          SS\nresponse_type      code\nscope              N_FULL\naccess_type        offline\nredirect_uri       http://localhost/Callback\n</code></pre>\n"},{"answer_id":57457965,"body":"<p>Here is my solution with <strong>reduce</strong> and <strong>Optional</strong>:</p>\n\n<pre><code>private Optional&lt;SimpleImmutableEntry&lt;String, String&gt;&gt; splitKeyValue(String text) {\n    String[] v = text.split(\"=\");\n    if (v.length == 1 || v.length == 2) {\n        String key = URLDecoder.decode(v[0], StandardCharsets.UTF_8);\n        String value = v.length == 2 ? URLDecoder.decode(v[1], StandardCharsets.UTF_8) : null;\n        return Optional.of(new SimpleImmutableEntry&lt;String, String&gt;(key, value));\n    } else\n        return Optional.empty();\n}\n\nprivate HashMap&lt;String, String&gt; parseQuery(URI uri) {\n    HashMap&lt;String, String&gt; params = Arrays.stream(uri.getQuery()\n            .split(\"&amp;\"))\n            .map(this::splitKeyValue)\n            .filter(Optional::isPresent)\n            .map(Optional::get)\n            .reduce(\n                // initial value\n                new HashMap&lt;String, String&gt;(), \n                // accumulator\n                (map, kv) -&gt; {\n                     map.put(kv.getKey(), kv.getValue()); \n                     return map;\n                }, \n                // combiner\n                (a, b) -&gt; {\n                     a.putAll(b); \n                     return a;\n                });\n    return params;\n}\n</code></pre>\n\n<ul>\n<li>I ignore duplicate parameters (I take the last one).</li>\n<li>I use <code>Optional&lt;SimpleImmutableEntry&lt;String, String&gt;&gt;</code> to ignore garbage later</li>\n<li>The reduction start with an empty map, then populate it on each SimpleImmutableEntry</li>\n</ul>\n\n<p>In case you ask, <strong>reduce</strong> requires this weird combiner in the last parameter, which is only used in parallel streams. Its goal is to merge two intermediate results (here HashMap).</p>\n"},{"answer_id":58017826,"body":"<h1>A ready-to-use solution for decoding of URI query part (incl. decoding and multi parameter values)</h1>\n\n<h2>Comments</h2>\n\n<p>I wasn't happy with the code provided by @Pr0gr4mm3r in <a href=\"https://stackoverflow.com/a/13592567/1211082\">https://stackoverflow.com/a/13592567/1211082</a> . The Stream-based solution does not do URLDecoding, the mutable version clumpsy.</p>\n\n<p>Thus I elaborated a solution that</p>\n\n<ul>\n<li>Can decompose a URI query part into a <code>Map&lt;String, List&lt;Optional&lt;String&gt;&gt;&gt;</code></li>\n<li>Can <strong>handle multiple values</strong> for the same parameter name</li>\n<li>Can <strong>represent parameters without a value properly</strong>  (<code>Optional.empty()</code> instead of <code>null</code>)</li>\n<li><strong>Decodes parameter names</strong> and <strong>values correctly</strong> via <code>URLdecode</code></li>\n<li>Is based on Java 8 Streams</li>\n<li>Is directly usable (see code including imports below)</li>\n<li>Allows for proper error handling (here via turning a checked exception <code>UnsupportedEncodingException</code>into a runtime exception <code>RuntimeUnsupportedEncodingException</code> that allows interplay with stream. (Wrapping regular function into functions throwing checked exceptions is a pain. And Scala <code>Try</code> is not available in the Java language default.)</li>\n</ul>\n\n<h2>Java Code</h2>\n\n<pre><code>import java.io.UnsupportedEncodingException;\nimport java.net.URLDecoder;\nimport java.util.*;\nimport static java.util.stream.Collectors.*;\n\npublic class URIParameterDecode {\n    /**\n     * Decode parameters in query part of a URI into a map from parameter name to its parameter values.\n     * For parameters that occur multiple times each value is collected.\n     * Proper decoding of the parameters is performed.\n     * \n     * Example\n     *   &lt;pre&gt;a=1&amp;b=2&amp;c=&amp;a=4&lt;/pre&gt;\n     * is converted into\n     *   &lt;pre&gt;{a=[Optional[1], Optional[4]], b=[Optional[2]], c=[Optional.empty]}&lt;/pre&gt;\n     * @param query the query part of an URI \n     * @return map of parameters names into a list of their values.\n     *         \n     */\n    public static Map&lt;String, List&lt;Optional&lt;String&gt;&gt;&gt; splitQuery(String query) {\n        if (query == null || query.isEmpty()) {\n            return Collections.emptyMap();\n        }\n\n        return Arrays.stream(query.split(\"&amp;\"))\n                    .map(p -&gt; splitQueryParameter(p))\n                    .collect(groupingBy(e -&gt; e.get0(), // group by parameter name\n                            mapping(e -&gt; e.get1(), toList())));// keep parameter values and assemble into list\n    }\n\n    public static Pair&lt;String, Optional&lt;String&gt;&gt; splitQueryParameter(String parameter) {\n        final String enc = \"UTF-8\";\n        List&lt;String&gt; keyValue = Arrays.stream(parameter.split(\"=\"))\n                .map(e -&gt; {\n                    try {\n                        return URLDecoder.decode(e, enc);\n                    } catch (UnsupportedEncodingException ex) {\n                        throw new RuntimeUnsupportedEncodingException(ex);\n                    }\n                }).collect(toList());\n\n        if (keyValue.size() == 2) {\n            return new Pair(keyValue.get(0), Optional.of(keyValue.get(1)));\n        } else {\n            return new Pair(keyValue.get(0), Optional.empty());\n        }\n    }\n\n    /** Runtime exception (instead of checked exception) to denote unsupported enconding */\n    public static class RuntimeUnsupportedEncodingException extends RuntimeException {\n        public RuntimeUnsupportedEncodingException(Throwable cause) {\n            super(cause);\n        }\n    }\n\n    /**\n     * A simple pair of two elements\n     * @param &lt;U&gt; first element\n     * @param &lt;V&gt; second element\n     */\n    public static class Pair&lt;U, V&gt; {\n        U a;\n        V b;\n\n        public Pair(U u, V v) {\n            this.a = u;\n            this.b = v;\n        }\n\n        public U get0() {\n            return a;\n        }\n\n        public V get1() {\n            return b;\n        }\n    }\n}\n</code></pre>\n\n<h2>Scala Code</h2>\n\n<p>... and for the sake of completeness I can not resist to provide the solution in Scala that dominates by brevity and beauty</p>\n\n<pre><code>import java.net.URLDecoder\n\nobject Decode {\n  def main(args: Array[String]): Unit = {\n    val input = \"a=1&amp;b=2&amp;c=&amp;a=4\";\n    println(separate(input))\n  }\n\n  def separate(input: String) : Map[String, List[Option[String]]] = {\n    case class Parameter(key: String, value: Option[String])\n\n    def separateParameter(parameter: String) : Parameter =\n      parameter.split(\"=\")\n               .map(e =&gt; URLDecoder.decode(e, \"UTF-8\")) match {\n      case Array(key, value) =&gt;  Parameter(key, Some(value))\n      case Array(key) =&gt; Parameter(key, None)\n    }\n\n    input.split(\"&amp;\").toList\n      .map(p =&gt; separateParameter(p))\n      .groupBy(p =&gt; p.key)\n      .mapValues(vs =&gt; vs.map(p =&gt; p.value))\n  }\n}\n</code></pre>\n"},{"answer_id":65170772,"body":"<p>If you happen to have cxf-core on the classpath and you know you have no repeated query params, you may want to use <a href=\"https://cxf.apache.org/javadoc/latest/org/apache/cxf/common/util/UrlUtils.html#parseQueryString-java.lang.String-\" rel=\"nofollow noreferrer\">UrlUtils.parseQueryString</a>.</p>\n"},{"answer_id":68068256,"body":"<p>The <a href=\"https://eclipse-ee4j.github.io/jersey/\" rel=\"nofollow noreferrer\">Eclipse Jersey REST framework</a> supports this through <a href=\"https://github.com/eclipse-ee4j/jersey/blob/master/core-common/src/main/java/org/glassfish/jersey/uri/UriComponent.java\" rel=\"nofollow noreferrer\"><code>UriComponent</code></a>. Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.glassfish.jersey.uri.UriComponent;\n\nString uri = &quot;https://google.com.ua/oauth/authorize?client_id=SS&amp;response_type=code&amp;scope=N_FULL&amp;access_type=offline&amp;redirect_uri=http://localhost/Callback&quot;;\nMultivaluedMap&lt;String, String&gt; params = UriComponent.decodeQuery(URI.create(uri), true);\nfor (String key : params.keySet()) {\n  System.out.println(key + &quot;: &quot; + params.getFirst(key));\n}\n</code></pre>\n"},{"answer_id":69107206,"body":"<p>If just want the parameters after the URL from a String. Then the following code will work. I am just assuming the simple Url. I mean no hard and fast checking and decoding. Like in one of my test case I got the Url and I know I just need the value of the paramaters. The url was simple. No encoding decoding needed.</p>\n<pre><code>String location = &quot;https://google.com.ua/oauth/authorize?client_id=SS&amp;response_type=code&amp;scope=N_FULL&amp;access_type=offline&amp;redirect_uri=http://localhost/Callback&quot;;\nString location1 = &quot;https://stackoverflow.com?param1=value1&amp;param2=value2&amp;param3=value3&quot;;\nString location2 = &quot;https://stackoverflow.com?param1=value1&amp;param2=&amp;param3=value3&amp;param3&quot;;\n    \n    Map&lt;String, String&gt; paramsMap = Stream.of(location)\n        .filter(l -&gt; l.indexOf(&quot;?&quot;) != -1)\n        .map(l -&gt; l.substring(l.indexOf(&quot;?&quot;) + 1, l.length()))\n        .flatMap(q -&gt; Pattern.compile(&quot;&amp;&quot;).splitAsStream(q))\n        .map(s -&gt; s.split(&quot;=&quot;))\n        .filter(a -&gt; a.length == 2)\n        .collect(Collectors.toMap(\n            a -&gt; a[0], \n            a -&gt; a[1],\n            (existing, replacement) -&gt; existing + &quot;, &quot; + replacement,\n            LinkedHashMap::new\n        ));\n    \n    System.out.println(paramsMap);\n</code></pre>\n<p>Thanks</p>\n"},{"answer_id":69245457,"body":"<p>There are plenty of answers which work for your query as you've indicated when it has single parameter definitions. In some  applications it may be useful to handle a few extra query parameter edge cases such as:</p>\n<ul>\n<li>list of parameter values such as <code>param1&amp;param1=value&amp;param1=</code> meaning <code>param1</code> is set to <code>List.of(&quot;&quot;, &quot;value&quot;, &quot;&quot;)</code></li>\n<li>invalid permutations such as <code>querypath?&amp;=&amp;&amp;=noparamname&amp;</code>.</li>\n<li>use empty string not null in maps <code>a=</code> means &quot;a&quot; is <code>List.of(&quot;&quot;)</code> to match web servlet handling</li>\n</ul>\n<p>This uses a Stream with filters and groupingBy to collect to <code>Map&lt;String, List&lt;String&gt;&gt;</code>:</p>\n<pre><code>public static Map&lt;String, List&lt;String&gt;&gt; getParameterValues(URL url) {\n    return Arrays.stream(url.getQuery().split(&quot;&amp;&quot;))\n            .map(s -&gt; s.split(&quot;=&quot;))\n            // filter out empty parameter names (as in Tomcat) &quot;?&amp;=&amp;&amp;=value&amp;&quot;:\n            .filter(arr -&gt; arr.length &gt; 0 &amp;&amp; arr[0].length() &gt; 0)\n            .collect(Collectors.groupingBy(arr -&gt; URLDecoder.decode(arr[0], StandardCharsets.UTF_8),\n                     // drop this line for not-name definition order Map:\n                     LinkedHashMap::new, \n                     Collectors.mapping(arr -&gt; arr.length &lt; 2 ? &quot;&quot; : URLDecoder.decode(arr[1], StandardCharsets.UTF_8), Collectors.toList())));\n}\n</code></pre>\n"},{"answer_id":71477076,"body":"<p>There a new version of Apache HTTP client - <code>org.apache.httpcomponents.client5</code> - where <code>URLEncodedUtils</code> is now deprecated. <code>URIBuilder</code> should be used instead:</p>\n<pre><code>import org.apache.hc.core5.http.NameValuePair;\nimport org.apache.hc.core5.net.URIBuilder;\n\nprivate static Map&lt;String, String&gt; getQueryParameters(final String url) throws URISyntaxException {\n    return new URIBuilder(new URI(url), StandardCharsets.UTF_8).getQueryParams()\n                                                               .stream()\n                                                               .collect(Collectors.toMap(NameValuePair::getName,\n                                                                                         nameValuePair -&gt; URLDecoder.decode(nameValuePair.getValue(), StandardCharsets.UTF_8)));\n}\n</code></pre>\n"},{"answer_id":71859427,"body":"<p>That seems tidy to me the best way:</p>\n<pre><code>static Map&lt;String, String&gt; decomposeQueryString(String query, Charset charset) {\n    return Arrays.stream(query.split(&quot;&amp;&quot;))\n        .map(pair -&gt; pair.split(&quot;=&quot;, 2))\n        .collect(Collectors.toMap(\n            pair -&gt; URLDecoder.decode(pair[0], charset),\n            pair -&gt; pair.length &gt; 1 ? URLDecoder.decode(pair[1], charset) : null)\n        );\n}\n</code></pre>\n<p>The prerequisite is that your query syntax does not allow repeated parameters.</p>\n"},{"answer_id":72458948,"body":"<h1>org.keycloak.common.util.UriUtils</h1>\n<p>I had to parse URIs and Query Parameters in a Keycloak extension and found this utility classes very useful:</p>\n<pre><code>org.keycloak.common.util.UriUtils:\nstatic MultivaluedHashMap&lt;String,String&gt; decodeQueryString(String queryString) \n</code></pre>\n<p>There is also a useful method to delete one query parameter:</p>\n<pre><code>static String   stripQueryParam(String url, String name)\n</code></pre>\n<p>And to parse the URL there is\norg.keycloak.common.util.KeycloakUriBuilder:</p>\n<pre><code>KeycloakUriBuilder  uri(String uriTemplate)\nString  getQuery()\n</code></pre>\n<p>and lots of other goodies.</p>\n"},{"answer_id":73268170,"body":"<p>Also, I would recommend regex based implementation of <code>URLParser</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\nclass URLParser {\n    private final String query;\n    \n    public URLParser(String query) {\n        this.query = query;\n    }\n    \n    public String get(String name) {\n        String regex = &quot;(?:^|\\\\?|&amp;)&quot; + name + &quot;=(.*?)(?:&amp;|$)&quot;;\n        Pattern pattern = Pattern.compile(regex);\n        Matcher matcher = pattern.matcher(this.query);\n\n        if (matcher.find()) {\n            return matcher.group(1);\n        }\n        \n        return &quot;&quot;;\n    }\n}\n</code></pre>\n<p>This class is easy to use. It just needs the URL or the query string on initialization and parses value by given key.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Main {\n    public static void main(String[] args) {\n        URLParser parser = new URLParser(&quot;https://www.google.com/search?q=java+parse+url+params&amp;oq=java+parse+url+params&amp;aqs=chrome..69i57j0i10.18908j0j7&amp;sourceid=chrome&amp;ie=UTF-8&quot;);\n        System.out.println(parser.get(&quot;q&quot;));  // java+parse+url+params\n        System.out.println(parser.get(&quot;sourceid&quot;));  // chrome\n        System.out.println(parser.get(&quot;ie&quot;));  // UTF-8\n    }\n}\n</code></pre>\n"},{"answer_id":75069958,"body":"<p>The <a href=\"https://github.com/dromara/hutool\" rel=\"nofollow noreferrer\">Hutool</a> framework supports this through HttpUtil. Example:</p>\n<pre><code>import cn.hutool.http.HttpUtil;\n\n    String url =&quot;https://google.com.ua/oauth/authorize?client_id=SS&amp;response_type=code&amp;scope=N_FULL&amp;access_type=offline&amp;redirect_uri=http://localhost/Callback&quot;;\n    Map&lt;String, List&lt;String&gt;&gt; stringListMap = HttpUtil.decodeParams(url, &quot;UTF-8&quot;);\n    System.out.println(&quot;decodeParams：&quot; + stringListMap);\n</code></pre>\n<p>You will get:</p>\n<pre><code>decodeParams：{client_id=[SS], response_type=[code], scope=[N_FULL], access_type=[offline], redirect_uri=[http://localhost/Callback]}\n</code></pre>\n"},{"answer_id":75182012,"body":"<h2>A kotlin version</h2>\n<p>of the answer <a href=\"https://stackoverflow.com/a/71859427/360327\">Answer by matthias</a> provided</p>\n<pre><code>fun decomposeQueryString(query: String, charset: Charset): Map&lt;String, String?&gt; {\n   return if (query.split(&quot;?&quot;).size &lt;= 1)\n       emptyMap()\n   else {\n       query.split(&quot;?&quot;)[1]\n            .split(&quot;&amp;&quot;)\n            .map { it.split(Pattern.compile(&quot;=&quot;), 2) }\n            .associate {\n                Pair(\n                        URLDecoder.decode(it[0], charset.name()),\n                        if (it.size &gt; 1) URLDecoder.decode(it[1], charset.name()) else null\n                )\n            }\n     }\n}\n</code></pre>\n<p>This takes of the first parameter after the question mark '?' as well.</p>\n"},{"answer_id":75477889,"body":"<p><strong>Plain Java, No Special Libraries, Nothing Fancy</strong></p>\n<pre><code>    // assumes you are parsing a line that looks like:\n    // /path/resource?key=value&amp;parameter=value\n    // which you got from a request header line that looks like:\n    // GET /path/resource?key=value&amp;parameter=value HTTP/1.1\n\n    public HashMap&lt;String, String&gt; parseQuery(String path){\n        if(path == null || path.isEmpty()){         //basic sanity check\n            return null;\n        }\n        int indexOfQ = path.indexOf(&quot;?&quot;);           //where the query string starts\n        if(indexOfQ == -1){return  null;}           //check query exists\n        String queryString = path.substring(indexOfQ + 1);\n        String[] queryStringArray = queryString.split(&quot;&amp;&quot;);\n        Map&lt;String, String&gt; kvMap = new HashMap&lt;&gt;();\n        for(String kvString : queryStringArray){\n            int indexOfE = kvString.indexOf(&quot;=&quot;);      //check query is formed correctly\n            if(indexOfE == -1 || indexOfE == 0){return  null;}\n            String[] kvPairArray = kvString.split(&quot;=&quot;);\n            kvMap.put(kvPairArray[0], kvPairArray[1]);\n        }\n\n        return kvMap;\n    }\n</code></pre>\n"},{"answer_id":76127956,"body":"<p>In groovy</p>\n<pre><code>    static Map parseQueryParams(String queryString) {\n        if(!queryString) return [:]\n        queryString.split(&quot;&amp;&quot;)\n            .collect({ it.split(&quot;=&quot;) })\n            .collectEntries { String[] arr -&gt;\n                String k = arr.length &gt; 0 ? arr[0] : &quot;&quot;\n                String v = arr.length &gt; 1 ? arr[1] : &quot;&quot;\n                return [decode(k), decode(v)]\n            }\n    }\n\n    private static String decode(String s) {\n        URLDecoder.decode(s, StandardCharsets.UTF_8.toString())\n    }\n</code></pre>\n"},{"answer_id":76292587,"body":"<p>this is based on the solution above by Dariusz and Pr0gr4mm3r,  but it didn't quite work because their version didn't handle decoding of names/parameters, it also wasn't properly handling situations where a key was defined but no value was defined or when a value was defined but no key defined.  this version essentially tries to match the functionality of the original HttpUtils.parseQueryString() method as much as possible:</p>\n<pre><code>public Map&lt;String, List&lt;String&gt;&gt; splitQuery(URL url) {\n    if (Strings.isNullOrEmpty(url.getQuery())) {\n        return Collections.emptyMap();\n    }\n    try {\n        String qs = url.getQuery();\n        return splitQuery(qs);\n    } catch (IllegalArgumentException e) {\n        String qs = url.getQuery();\n        String decoded = URLDecoder.decode(qs, StandardCharsets.UTF_8);\n        return splitQuery(decoded);\n    }\n}\n\npublic Map&lt;String, List&lt;String&gt;&gt; splitQuery(String qs) {\n    return Arrays.stream(qs.split(&quot;&amp;&quot;))\n            .map(this::splitQueryParameter)\n            .collect(Collectors.groupingBy(AbstractMap.SimpleImmutableEntry::getKey, LinkedHashMap::new, Collectors.mapping(Map.Entry::getValue, Collectors.toList())));\n}\n\npublic AbstractMap.SimpleImmutableEntry&lt;String, String&gt; splitQueryParameter(String it) {\n    final int idx = it.indexOf(&quot;=&quot;);\n    if(idx == -1) {\n        throw new IllegalArgumentException();\n    }\n    final String key = idx &gt; 0 ? it.substring(0, idx) : &quot;&quot;;\n    final String value = (idx &gt; 0 &amp;&amp; it.length() &gt; idx + 1) || (it.indexOf('=') == it.length()-1) || (it.indexOf('=') == 0)  ? it.substring(idx + 1) : it.substring(idx);\n    return new AbstractMap.SimpleImmutableEntry&lt;&gt;(URLDecoder.decode(key, StandardCharsets.UTF_8), URLDecoder.decode(value, StandardCharsets.UTF_8));\n}\n</code></pre>\n<p>JUnit:</p>\n<pre><code>@Test\npublic void testSplitQuery2() throws MalformedURLException {\n    URL url = new URL(&quot;https://google.com.ua/oauth/authorize?client_id=SS&amp;response_type=code&amp;scope=N_FULL&amp;access_type=offline&amp;redirect_uri=http://localhost/Callback&quot;);\n    Map&lt;String, List&lt;String&gt;&gt; listMap = splitQuery(url);\n    for (String s : listMap.keySet()) {\n        List&lt;String&gt; stringList = listMap.get(s);\n        logger.info(&quot;s: &quot; + s + &quot;, stringList: &quot; + stringList);\n    }\n}\n</code></pre>\n<p>Response:</p>\n<pre><code>testSplitQuery2 s: client_id, stringList: [SS]                           \ntestSplitQuery2 s: response_type, stringList: [code]                     \ntestSplitQuery2 s: scope, stringList: [N_FULL]                           \ntestSplitQuery2 s: access_type, stringList: [offline]                    \ntestSplitQuery2 s: redirect_uri, stringList: [http://localhost/Callback] \n</code></pre>\n"}],"last_activity_date":1684532751,"question_id":13592236,"body":"<p>I've got the URI like this:</p>\n<pre><code>https://google.com.ua/oauth/authorize?client_id=SS&amp;response_type=code&amp;scope=N_FULL&amp;access_type=offline&amp;redirect_uri=http://localhost/Callback\n</code></pre>\n<p>I need a collection with parsed elements:</p>\n<pre><code>NAME               VALUE\n------------------------\nclient_id          SS\nresponse_type      code\nscope              N_FULL\naccess_type        offline\nredirect_uri       http://localhost/Callback\n</code></pre>\n<p>To be exact, I need a Java equivalent for the C#/.NET <a href=\"https://learn.microsoft.com/en-us/dotnet/api/system.web.httputility.parsequerystring?view=netcore-3.1\" rel=\"noreferrer\"><code>HttpUtility.ParseQueryString</code></a> method.</p>\n"},{"answers":[{"answer_id":76292567,"body":"<p>Okay so I finally got the answer.\nTo run a query using the EntityManager class in Spring Boot, you can follow these steps:</p>\n<ol>\n<li>Inject the EntityManager instance into your class using the @PersistenceContext annotation:</li>\n</ol>\n<pre><code>@PersistenceContext\nprivate EntityManager entityManager;\n</code></pre>\n<ol start=\"2\">\n<li>Use the createQuery() method of the EntityManager instance to create a query object. You can pass a JPQL (Java Persistence Query Language) query string or a native SQL query string as a parameter:</li>\n</ol>\n<pre><code>Query query = entityManager.createQuery(&quot;SELECT e FROM Employee e WHERE e.salary &gt; :salary&quot;);\nquery.setParameter(&quot;salary&quot;, 50000);\n</code></pre>\n<ol start=\"3\">\n<li>If you are using a native SQL query, you can use the createNativeQuery() method instead:</li>\n</ol>\n<pre><code>Query query = entityManager.createNativeQuery(&quot;SELECT * FROM employees WHERE salary &gt; :salary&quot;, Employee.class);\nquery.setParameter(&quot;salary&quot;, 50000);\n</code></pre>\n<ol start=\"4\">\n<li>Call the getResultList() method on the query object to execute the query and return the results:</li>\n</ol>\n<pre><code>List&lt;Employee&gt; employees = query.getResultList();\n</code></pre>\n<ol start=\"5\">\n<li>You can then iterate over the list of results and process them as needed:</li>\n</ol>\n<pre><code>for (Employee employee : employees) {\n    // process each employee object\n}\n</code></pre>\n<p>Note that you should always use parameterized queries to prevent SQL injection attacks. The EntityManager class supports both JPQL and native SQL queries, but JPQL is recommended because it is database-independent and provides better type-safety.</p>\n"}],"last_activity_date":1684532477,"question_id":76045440,"body":"<p>So I want to create a String based on some conditions and pass the whole query as method argument. Now I found out about SPeL and a Syntax :</p>\n<pre><code>@Query(value = &quot;#{#query}&quot;, nativeQuery = true)\nList&lt;User&gt; findByQuery(@Param(&quot;query&quot;) String query);\n</code></pre>\n<p>but that thing gave me a error:</p>\n<pre><code>Java.sql.SQLException: Statement.executeQuery() cannot issue statements that do not produce result sets\n</code></pre>\n<p>The Query I passed:</p>\n<pre><code>SELECT * FROM registration WHERE APPROVED='pending' ORDER BY RSID DESC LIMIT 5\n</code></pre>\n<p>Though the whole query can change depending on a particular condition.</p>\n"},{"comments":[{"comment_id":107106908,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo\">Scanner is skipping nextLine() after using next() or nextFoo()?</a>"}],"answers":[{"answer_id":60542818,"body":"<p>This is because <code>Scanner.nextInt()</code> method does not read '<strong>\\n</strong>' (<em>new line</em>) character generated by pressing '<em>Enter</em>' after writing number in the terminal input. A simple workaround is to read the '<strong>\\n</strong>' character using <code>input.nextLine()</code> and ignore it immediately after you use <code>Scanner.nextX()</code> methods (eg. nextInt(), nextDouble(), etc.)</p>\n\n<p>So your code changes to this:</p>\n\n<pre><code>Scanner input = new Scanner(System.in);\nint t = input.nextInt(); \ninput.nextLine(); // read and ignore extra \\n character\n\nwhile (t &gt; 0) {\n    String s;\n    s = input.nextLine();\n    if (s.isEmpty()) {\n        System.out.println(\"Empty string\");\n        s = input.nextLine();\n    } \n}\n</code></pre>\n"},{"answer_id":60542836,"body":"<p>It does that because <code>input.nextInt();</code> doesn't capture the newline. You could do like the others proposed by adding an <code>input.nextLine();</code></p>\n\n<pre><code>Scanner input = new Scanner(System.in);\nint t = Integer.parseInt(input.nextLine());\nwhile (t &gt; 0) {\n    String s = input.nextLine();\n    if (s.isEmpty()) {\n        System.out.println(\"Empty string\");\n        s = input.nextLine();\n    }\n}\n</code></pre>\n"}],"last_activity_date":1684532454,"question_id":60542523,"body":"<p>My program should check if s is an empty string and if found so, it should print \"Empty string\" and prompt for new input. But my every first run without asking for s, prints \"Empty String\", afterward it runs perfectly! </p>\n\n<pre><code>Scanner input = new Scanner(System.in);\nint t = input.nextInt();\nwhile (t &gt; 0) {\n    String s;\n    s = input.nextLine();\n    if (s.isEmpty()) {\n        System.out.println(\"Empty string\");\n        s = input.nextLine();\n    } \n}\n</code></pre>\n\n<p>How can I avoid the first \"Empty String\"?</p>\n\n<p>PS- I tried -</p>\n\n<pre><code>s = input.next();\n</code></pre>\n\n<p>This solves the problem but now it won't let me input an Empty String into the program!</p>\n\n<p>PPS- Check this out:</p>\n\n<pre><code>import java.util.*;\nimport java.lang.*;\nimport java.io.*;\n\nclass ComparePlayers {\n    public static void main(String[] args) {\n        Scanner input = new Scanner(System.in);\n        int t = input.nextInt();\n        while (t &gt; 0) {\n            String s;\n            s = input.nextLine();\n            if (s.isEmpty()) {\n                System.out.println(\"Empty String\");\n                s = input.nextLine();\n            }\n            else {\n                System.out.println(\"Not Empty\");\n            }\n            t--;\n        }\n    }\n}\n</code></pre>\n\n<p>You can see there are 3 i/ps while one of the o/ps is taken up by the Empty String.</p>\n"},{"comments":[{"comment_id":134537353,"body":"See if this is useful. <a href=\"https://www.baeldung.com/spring-security-exceptionhandler\" rel=\"nofollow noreferrer\">baeldung.com/spring-security-exceptionhandler</a>"},{"comment_id":134539072,"body":"Show your request and response with headers. Show your Spring Security TRACE logs."},{"comment_id":134539447,"body":"<code>@ControllerAdvice</code> ONLY catches exceptions in controllers, im guessing your exceptions are thrown in filters. This is clearly stated in the docs for <code>@ControllerAdvice</code> Why do you even have a bunch of custom filters? why not use what already comes with spring security. Whats the point of using a security framework if you dont intend to use it?"},{"comment_id":134561896,"body":"@Toerktumlare I&#39;m using two custom filters.  One simply adds a header if I am using the spring profile &quot;dev&quot;, the other handles authentication through our corporate reverse proxy.  Even through you were being condescending, you pointed me in the right direction, thanks: <a href=\"https://stackoverflow.com/questions/19767267/handle-spring-security-authentication-exceptions-with-exceptionhandler\" title=\"handle spring security authentication exceptions with exceptionhandler\">stackoverflow.com/questions/19767267/&hellip;</a>"},{"comment_id":134565014,"body":"i posted what was expected from you before asking on SO, basically reading the docs. Glad i could help."}],"last_activity_date":1684531292,"question_id":76292365,"body":"<p>In my web security configuration, I am explicitly setting an access denied handler like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\nprotected void configure(HttpSecurity http) throws Exception\n{\n    http\n            .addFilterBefore(devProfileFilter, UsernamePasswordAuthenticationFilter.class)\n            .addFilterAfter(customAuthenticationFilter, DevProfileFilter.class)\n            .authorizeRequests()\n            .antMatchers(&quot;/users/**&quot;).hasAuthority(&quot;ROLE_ADMIN&quot;)\n            .antMatchers(&quot;/upload/**&quot;).hasAuthority(&quot;ROLE_SUBMITTER&quot;)\n            .antMatchers(&quot;/download/**&quot;).hasAuthority(&quot;ROLE_REQUESTER&quot;)\n            .antMatchers(&quot;/api/**&quot;, &quot;/swagger-ui.html&quot;).hasAuthority(&quot;ROLE_APIACCESS&quot;)\n            .anyRequest()\n            .authenticated() // All requests need authentication through RP\n            .and()\n            .headers()\n            .frameOptions()\n            .deny()\n            .and()\n            .csrf() // Enable CSRF protection (enabled by default)\n            .and()\n            .exceptionHandling().accessDeniedHandler((request, response, accessDeniedException) -&gt;\n            {\n                // Set response status\n                response.setStatus(HttpServletResponse.SC_FORBIDDEN);\n                // Throw the exception to be caught by the GlobalExceptionHandler\n                throw accessDeniedException;\n            });\n</code></pre>\n<p>Then I defined a Global Exception Handler class like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ControllerAdvice\npublic class GlobalExceptionHandler\n{\n    @Autowired\n    private ForbiddenAccessRepository forbiddenAccessRepository;\n\n    @ExceptionHandler(AccessDeniedException.class)\n    public ModelAndView handleAccessDeniedException(AccessDeniedException ex, HttpServletRequest request, Model model) {\n        int status = HttpStatus.FORBIDDEN.value();\n        model.addAttribute(&quot;status&quot;, status);\n        model.addAttribute(&quot;exception&quot;, ex.getMessage());\n\n        // Log forbidden access\n        Authentication auth = SecurityContextHolder.getContext().getAuthentication();\n        if (auth != null &amp;&amp; auth.getPrincipal() instanceof User) {\n            User            user            = (User) auth.getPrincipal();\n            ForbiddenAccess forbiddenAccess = new ForbiddenAccess();\n            forbiddenAccess.setBemsid(user.getBemsid());\n            forbiddenAccess.setPage(request.getRequestURI());\n            forbiddenAccess.setAccessTime(LocalDateTime.now());\n            ForbiddenAccess saved = forbiddenAccessRepository.save(forbiddenAccess);\n            System.out.println(&quot;Saved ForbiddenAccess: &quot; + saved);\n        }\n\n        System.out.println(&quot;Access Denied Exception Handled: Status = &quot; + status);\n\n        return new ModelAndView(&quot;error&quot;);\n    }\n\n    // TODO: Replace with specifically handled exceptions.\n    // Catch-all for any other exceptions not handled above\n    @ExceptionHandler(Exception.class)\n    public ModelAndView handleException(Exception ex, Model model) {\n        model.addAttribute(&quot;status&quot;, HttpStatus.INTERNAL_SERVER_ERROR);\n        model.addAttribute(&quot;exception&quot;, ex.getMessage());\n        return new ModelAndView(&quot;error&quot;);\n    }\n}\n</code></pre>\n<p>I expected if I tried to access a portion of the web application without the appropriate role, I would get a 403 error thrown by my security config and picked up by my global exception handler.</p>\n<p>However I'm not getting any breakpoints or print statements to trigger in the global exception handler. Instead, the appropriate error page (error.html) is displaying, but showing a 500 error and I'm not inserting into my Forbidden Access Repository.</p>\n<p>EDIT:  I updated the .exceptionHandling() method from my Spring Security configuration, and now a 999 percolates to the top, but still no breakpoint triggering or DB inserts from Global Exception Handler.</p>\n<pre class=\"lang-java prettyprint-override\"><code>                .and()\n                .exceptionHandling()\n                .accessDeniedHandler(new AccessDeniedHandler()\n                {\n                    @Override\n                    public void handle(HttpServletRequest request, HttpServletResponse response, AccessDeniedException accessDeniedException) throws IOException, ServletException\n                    {\n                        Authentication auth = SecurityContextHolder.getContext().getAuthentication();\n                        if (auth != null &amp;&amp; auth.getPrincipal() instanceof User)\n                        {\n                            User            user            = (User) auth.getPrincipal();\n                            ForbiddenAccess forbiddenAccess = new ForbiddenAccess();\n                            forbiddenAccess.setBemsid(user.getBemsid());\n                            forbiddenAccess.setPage(request.getRequestURI());\n                            forbiddenAccess.setAccessTime(LocalDateTime.now());\n                            forbiddenAccessRepository.save(forbiddenAccess);\n                        }\n                        // Set response status\n                        response.setStatus(HttpServletResponse.SC_FORBIDDEN);\n                        // add status to the request\n                        request.setAttribute(&quot;status&quot;, HttpServletResponse.SC_FORBIDDEN);\n                        // forward to error page\n                        request.getRequestDispatcher(&quot;/error&quot;).forward(request, response);\n                    }\n                });\n</code></pre>\n"},{"comments":[{"comment_id":10601924,"body":"I don&#39;t know Java, and it&#39;s a surprise for me that an inner class is associated with an <i>instance</i> of the outer class"},{"comment_id":10601941,"body":"@Armen: A non-static inner class is really like a &quot;normal&quot; inner class with an implicit pointer to an outer class instance."},{"comment_id":10601946,"body":"@ArmenTsirunyan a few hours ago that was a surprise for me as well =) now i&#39;m asking some questins here to fill in the gaps in understanding Java concepts..."}],"answers":[{"comments":[{"comment_id":10602514,"body":"Yep, it&#39;s a compiler restriction, not something inherent in the JVM.  Inner classes are a major kluge, and there&#39;s really no distinction between inner and outer at the JVM level."},{"comment_id":10603329,"body":"More specifically, you can declare static fields that are compile-time constants, which a serialVersionUID has to be."},{"comment_id":24239268,"body":"Isn&#39;t &quot;put your variable in the class that logically owns it&quot; a good reason to support it?"},{"comment_id":24240077,"body":"@EricLindauer - dunno, ask the designers of the java language spec."},{"comment_id":49483588,"body":"Isn&#39;t encapsulation a good reason to allow it? I prefer to keep my fields as close to the place I use them as possible, not polluting the outer class."},{"comment_id":49485437,"body":"@HummelingEngineering - as i said in my previous comment, i&#39;m not defending the decision and i&#39;m certainly not responsible for it.  i&#39;m just the messenger.  your question should be directed to the java language designers."},{"comment_id":49489583,"body":"@jtahlborn - my comment wasn&#39;t directed at you, it&#39;s just contemplating on Java&#39;s design."},{"comment_id":134534653,"body":"Looks like ten years later they found a reason to support it: <a href=\"https://docs.oracle.com/en/java/javase/20/language/java-language-changes.html#GUID-EE327F97-BF08-46D2-8426-085CBE585797\" rel=\"nofollow noreferrer\">Java Language Changes for Java SE 16: Record Classes</a>"},{"comment_id":134536057,"body":"@jla - ha! nice to have that arbitrary decision reversed!"}],"answer_id":8554880,"body":"<p>Basically just an arbitrary decision.  there's no reason it <em>couldn't</em> be supported, but there is also not really any good reason <em>to</em> support it.  just declare the static field in the outer class.</p>\n<p>also, that quote may not be entirely correct: i believe you can declare a static serialVersionUID in an inner class.</p>\n<p>Update, sounds like this is now possible as of <a href=\"https://docs.oracle.com/en/java/javase/20/language/java-language-changes.html#GUID-EE327F97-BF08-46D2-8426-085CBE585797\" rel=\"nofollow noreferrer\">Java 16</a>.</p>\n"},{"comments":[{"comment_id":10602284,"body":"Does this restriction hold for <i>static</i> inner classes?"},{"comment_id":10602304,"body":"@pst: By definition there is no such thing as a static inner class. See the first sentence I cited."},{"comment_id":10603075,"body":"Err, a <i>static nested class</i>."},{"comment_id":10603315,"body":"@pst: If you follow the link to the spec you&#39;ll find that it explicitly says &quot;Nested classes that are not inner classes may declare static members freely, in accordance with the usual rules of the Java programming language.&quot;"},{"comment_id":10667783,"body":"up-vote for clarity on this issue. Despite the static keyword they really are not &quot;Static&quot;"}],"answer_id":8554884,"body":"<p>Because the <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.1.3\" rel=\"noreferrer\">Java Language Specification says so</a>:</p>\n\n<blockquote>\n  <p>An inner class is a nested class that is not explicitly or implicitly\n  declared static. Inner classes may not declare static initializers\n  (§8.7) or member interfaces. Inner classes may not declare static\n  members, unless they are compile-time constant fields (§15.28).</p>\n</blockquote>\n\n<p>As for <em>why</em> it was specified that way, I do not know. My guess is that inner classes were designed as small helper classes that should be very limited in complexity.</p>\n"},{"comments":[{"comment_id":10602548,"body":"Why would B declaring a static member somehow mean it doesn&#39;t depend on the enclosing instance of A? These seem orthogonal."},{"comment_id":10602666,"body":"@EVAC-Q8R i think i understand what you mean. in order to access the static member of the inner class it would be something like OuterClass<b>InstanceName</b>.InnerClass<b>TypeName</b>.innerClassStaticMe&zwnj;&#8203;mberName which would be definetly an uncomfortable mix. On the other hand it&#39;s still possible to access static members thru an instance in Java (which is not required usually). So why not have this construction like this then: OuterClass<b>InstanceName</b>.new InnerClass().innerClassStaticMemberName"},{"comment_id":10605050,"body":"@ Sean - I declared the inner class B &quot;static&quot; as opposed to &quot;public class B&quot; which means it no longer needs an enclosing object in order to instantiate it... not because of the static JPanel myJPanel instance."}],"answer_id":8555181,"body":"<p>That would result in a conflict of interest to have a static member variable inside an inner class. Generally speaking, an inner class needs to have an object instance of the outer or enclosing class before it may be instantiated. A static member variable suggests that you don't even need an object instance for that particular class, the inner class in this case, but that class the inner class is dependent upon and can only coexist along with the outer class instance. Do you see where the conflict of interest arises in the argument? However, you can make a static member variable inside an inner class by declaring the inner class as static which means the inner class no longer needs to coexist with an outer class object.</p>\n\n<pre><code>public class A {\n\n   public static class B {\n\n       private static JPanel myJPanel;\n\n   }\n\n}\n</code></pre>\n"},{"answer_id":24384083,"body":"<p>An inner <code>class</code> may not declare <code>static</code> fields unless they are compile-time constants. Hence, if you declare the <code>static</code> field as <code>final</code> it will work.          </p>\n\n<pre><code>class Foo {\n    class Test {\n       final static int i = 10;\n    }\n}\n</code></pre>\n\n<p>will compile and run perfectly   </p>\n\n<p><code>static</code> fields can only be declared in <code>static</code> or top-level types. Hence, a (pure) <code>static</code> variable can be declared only in a <code>static</code> <code>class</code>.</p>\n"},{"answer_id":63874282,"body":"<p>Why can't inner classes declare static members?</p>\n<p>The inner class is contained in the instance area of ​​the outer class. Therefore, within the inner class, it is not allowed to declare static members. On the other hand, the static inner class is contained in the static area of ​​the outer class. Thus, it is only allowed to declare static members and not instance members.</p>\n<p><a href=\"https://i.stack.imgur.com/WeXCI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WeXCI.png\" alt=\"image &gt;&gt; two areas inside outer class\" /></a></p>\n"},{"answer_id":70793326,"body":"<p>As of Java 17, non-static inner classes <em>can</em> declare static members. The member is for the entire class. It doesn't matter which object instantiated it. Here is a sample program to demonstrate that.</p>\n<pre><code>public class Demo {\n   public static void main(String[] args) {\n      Person fred = new Person(&quot;Fred&quot;);\n      Person.Property p1 = fred.new Property(&quot;last name&quot;, &quot;Flintstone&quot;);\n      Person wilma = new Person(&quot;Wilma&quot;);\n      Person.Property p2 = wilma.new Property(&quot;spouse&quot;, fred);\n      System.out.println(p1);\n      System.out.println(p2);\n   }\n}\n\nclass Person {\n   private String name;\n   public Person(String name) { this.name = name; }\n   public class Property {\n      private static int count; // Only since Java 17\n      private String name;\n      private Object value;\n      public Property(String name, Object value) {\n         count++;\n         this.name = name; \n         this.value = value;\n      }\n      public String toString() { return &quot;I am a property (one of &quot; + count + &quot;) of &quot; + Person.this.name + &quot; with name &quot; + name + &quot; and value &quot; + value; }\n   }\n}\n</code></pre>\n<p>The output:</p>\n<pre><code>I am a property (one of 2) of Fred with name last name and value Flintstone\nI am a property (one of 2) of Wilma with name spouse and value Person@4e25154f\n</code></pre>\n<p>The point is <code>one of 2</code>. One of the <code>Property</code> objects belongs to <code>fred</code>, the other to <code>wilma</code>. The static variable <code>count</code> doesn't care. The <code>Person.Property</code> class has a single static <code>count</code> variable.</p>\n"}],"last_activity_date":1684530506,"question_id":8554813,"body":"<p>The Java Tutorial says that since an inner class is associated with an instance of the enclosing class, it (the inner class) cannot define any static members itself.</p>\n\n<p>It's interesting for me why can't inner classes declare static members for instance, some <code>private static</code> field, which the instance of this inner class could possibly share with the other instances of the same inner class? is this just an implementation of things in Java that has to be taken for granted or something else?</p>\n"},{"comments":[{"comment_id":134533798,"body":"infix operators are only defined on primitives, not objects. For multiplication. we should use method <code>Biginteger::multiply</code>."}],"answers":[{"answer_id":76291764,"body":"<p>It's not possible to multiply objects using '*' operator.\nAlso, I see you increment variable 'i' twice (in for and in body of cycle).</p>\n<p>It might look like this:</p>\n<pre><code>public static BigInteger bigIntegerFactorialMethod(int number) {\n    BigInteger factorial = BigInteger.valueOf(1);\n\n    // here we start from 2 because we already have '1'\n    for (int i = 2; i &lt;= number; i++) {\n        factorial = factorial.multiply(BigInteger.valueOf(i));\n    }\n\n    return factorial;\n}\n</code></pre>\n"},{"answer_id":76292391,"body":"<p>So, for <code>BigInteger</code> you need to use the <code>multiply</code> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>factorial = factorial.multiply(BigInteger.valueOf(i));\n</code></pre>\n<p>Additionally, as a recommendation, you can reduce your method.<br />\nYou can use <code>BigInteger.ONE</code>, instead of <code>BigInteger.valueOf(1)</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static BigInteger bigIntegerFactorialMethod(int number){\n    BigInteger factorial = BigInteger.ONE;\n    for (int term = 1; term &lt;= number; term++)\n        factorial = factorial.multiply(BigInteger.valueOf(term));\n    return factorial;\n}\n</code></pre>\n<p>Here is the result when <code>number</code> is 10.</p>\n<pre class=\"lang-none prettyprint-override\"><code>2432902008176640000\n</code></pre>\n"}],"last_activity_date":1684530231,"question_id":76291205,"body":"<p>So I have a method that uses 3 variables (<code>i</code>, <code>factorial</code>, and <code>number</code>) and returns a <code>BigInteger</code>. <code>number</code> and <code>i</code> are <code>int</code>s and <code>factorial</code> is a <code>BigInteger</code>. Within my method, I have a for loop that goes as follows</p>\n<pre><code>public static BigInteger bigIntegerFactorialMethod(int number){\n    int i =  1;\n    BigInteger factorial = BigInteger.valueOf(1);\n  \n    for(i = 1; i &lt;= number; i++){\n        factorial = factorial * BigInteger.valueOf(i);\n        i++;\n    }\n  \n    return factorial;\n}\n</code></pre>\n<p>On the sixth line, I get the title of this question as an error where the factorial is being updated in the for loop.</p>\n<blockquote>\n<p>Bad operand types for binary operator '*'. First Type: <code>BigInteger</code> Second Type: <code>BigInteger</code>&quot;</p>\n</blockquote>\n<p>I'm guessing it's because I'm not comparing the right properties of the object and the system doesn't know what to compare?</p>\n"},{"answers":[{"answer_id":76292350,"body":"<p>Have a look at the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.desktop/javax/sound/sampled/package-summary.html\" rel=\"nofollow noreferrer\">javax.sound.sampled</a> package.<br />\nAdditionally, this Oracle forum post <a href=\"https://forums.oracle.com/ords/apexds/post/example-code-to-generate-audio-tone-8529\" rel=\"nofollow noreferrer\">Example: Code to generate audio tone</a></p>\n<p>I was able to compile a basic sound after some searching.</p>\n<pre class=\"lang-java prettyprint-override\"><code>void sound() throws LineUnavailableException {\n    AudioFormat format = new AudioFormat(44100, 8, 1, true, false);\n    SourceDataLine dataline = AudioSystem.getSourceDataLine(format);\n    dataline.open();\n    dataline.start();\n    double angle;\n    byte[] buffer = new byte[1];\n    for (int index = 0; index &lt; 44100; index++) {\n        angle = index / (44100 / 440f) * 2 * Math.PI;\n        buffer[0] = (byte) (Math.sin(angle) * 100);\n        dataline.write(buffer, 0, 1);\n    }\n    dataline.drain();\n    dataline.stop();\n}\n</code></pre>\n"}],"last_activity_date":1684529485,"question_id":76291207,"body":"<p>How do I play a sound during a specific event in Java?</p>\n<p>I need to make an audio cue for picking up a coin</p>\n<p>Here's my code:</p>\n<pre><code>private void movePlayer(int dRow, int dColumn) {\n        \n        //\n        maze[player.getRow()][player.getColumn()].setIcon(PATH);\n        \n        //\n        if (maze[player.getRow()+dRow][player.getColumn()+dColumn].getIcon() == COIN) {\n            numCoinsCollected++;\n            scoreLabel.setText(Integer.toString(numCoinsCollected));    \n        }\n        \n        //\n        player.move(dRow, dColumn);\n        maze[player.getRow()][player.getColumn()].setIcon(player.getIcon());\n        \n        //\n        if (numCoinsCollected == NUM_COINS) {\n            gameTimer.stop();\n            JOptionPane.showMessageDialog(this, &quot;WINNER!&quot;);\n        }\n    }\n</code></pre>\n<p>I tried <code>java.applet.*;</code> but it's outdated</p>\n"},{"comments":[{"comment_id":134535724,"body":"<i>&quot;I guess the problem is not with me but with Java...&quot;</i> -- It&#39;s really best to <i>never</i> make such an assumption. For instance, you are getting your Graphics instance incorrectly, and not drawing in the right location. In fact, the whole code doesn&#39;t look right, I&#39;m afraid. Also, are you really using java.awt.Canvas? Much better to use Swing or JavaFX. Also, best"},{"comment_id":134535743,"body":"To be precise, you should not draw with a Graphics object obtained by calling <code>getGraphics()</code> on a component. This will return a Graphics object that is short lived, risking disappearing graphics or worse, a NullPointerException. Instead, draw in the JPanel&#39;s <code>paintComponent(...)</code> method either directly, or indirectly by drawing on a BufferedImage (yes, you can get its Graphics object via <code>getGraphics()</code>) and then drawing the BufferedImage to the GUI within the paintComponent method."},{"comment_id":134535752,"body":"Also, rather than guessing at how to do Graphics, best to read the tutorials: <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Lesson: Performing Custom Painting</a>."},{"comment_id":134535842,"body":"Other issues: your animation loop is a <code>while (true)</code> loop with <code>Thread.sleep</code> which risks putting the Swing event thread and thus the entire application to sleep.  Much better to use a <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html\" rel=\"nofollow noreferrer\">Swing Timer</a> instead. Also, your application is mostly one huge static main method, a &quot;God&quot; method and without object-oriented constructs, which may be OK for very small demo code, but not if you want to do anything complex (such as what you&#39;re trying to do here)."},{"comment_id":134535868,"body":"&quot;<i>the problem is not with me but with Java</i>&quot;, &quot;<i>100% sure the file path is correct</i>&quot; (despite <code>icon.png</code> not same as <code>icon.jpg</code>, missing <code>src&#47;</code>), &quot;<i>I think there is no problem</i>&quot; ... not the best starting assumption to find some error - The link <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Performing Custom Painting</a> was already suggested to you this year :-|"},{"comment_id":134536697,"body":"<i>&quot;I guess the problem is not with me but with Java&quot;</i> - Yes, you should stop coding in Java, it&#39;s obviously entirely wrong. <code>g_window.setLayout(null);</code> - no; <code>graphics = canvas.getGraphics();</code> - no; Why are there two windows? <code>while (true) {</code> - probably no; <code>public static Canvas canvas = new Canvas();</code> and, no, this is going to cause you so many issues and <code>static</code> in this context is clear indication of a bad design."},{"comment_id":134536709,"body":"Take a look at <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-contents.html\" rel=\"nofollow noreferrer\">Code Conventions for the Java Programming Language</a>; <a href=\"https://www.oracle.com/java/technologies/painting.html\" rel=\"nofollow noreferrer\">Painting in AWT and Swing</a>; <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Performing Custom Painting</a>; <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html\" rel=\"nofollow noreferrer\">Concurrency in Swing</a>; <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html\" rel=\"nofollow noreferrer\">How to Use Swing Timers</a> and in future consider providing a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"comment_id":134536720,"body":"Also, you may want to look into the concept of &quot;model-view-controller&quot; (AKA MVC)"}],"last_activity_date":1684529209,"question_id":76292142,"body":"<p>My purpose in making this program was to simulate what happens when we launch a rocket into space, of course I don't know much about physics. I've actually done most things but the backgrounds aren't drawn as the rocket goes up. I'll show you how to do this in the photos.</p>\n<p>My code:</p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\nimport java.text.DecimalFormat;\n\n\n\n\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\n\npublic class main {\n    \n    public static box cisim = new box(350,-99780,100,100, new Color(35,35,35));   \n    public static box zemin = new box(0,-100000,800,220,new Color(0,255,0));\n    public static box troposfer = new box(0,-90000,800,10000,new Color(100,100,255));\n    \n    public static camera kamera = new camera(0,100000,-100000,600);\n    public static void Yenile() {\n        canvas.setBounds(kamera.x, kamera.y, 10000, 1000000);\n        \n        \n        kamera.y = -100000 +((int)height * 10);\n        \n        System.out.println(kamera.y);\n        \n        // graphics.setColor(troposfer.color); // This codes didnt work\n        //graphics.fillRect((int)troposfer.x,(int)kamera.y_max - ((int)troposfer.y + (int)troposfer.height) , (int)troposfer.width, (int)troposfer.height);\n        \n        \n        graphics.setColor(zemin.color); //works\n        graphics.fillRect((int)zemin.x,(int)kamera.y_max - ((int)zemin.y + (int)zemin.height) , (int)zemin.width, (int)zemin.height);\n        \n        graphics.setColor(cisim.color); //works\n        graphics.fillRect((int)cisim.x, (int)kamera.y_max - ((int)cisim.y + (int)cisim.height), (int)cisim.width, (int)cisim.height);\n    }\n    \n    public static float mass = 0;\n    public static float height = 0;\n    public static float speed = 0;\n    public static float thrust = 0;\n    public static float gravity = 10.0f;\n    public static int thrust_setting = 0;\n    public static int animation = 0;\n    public static JFrame g_window = new JFrame(&quot;Görsel&quot;);\n    public static Graphics graphics;\n    public static Canvas canvas = new Canvas();\n    \n    public static void main(String[] args) {\n        \n        g_window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        g_window.setResizable(false);\n        g_window.setLayout(null);\n        \n        \n        g_window.add(canvas);\n        canvas.setBounds(0, 0, 800, 600);\n\n\n        g_window.pack();\n        g_window.setSize(800,640);\n        g_window.setVisible(true);\n        \n        graphics = canvas.getGraphics();\n        \n        \n        \n        JFrame window = new JFrame(&quot;Kontrol Paneli&quot;);\n        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        window.setResizable(false);\n        window.setLayout(null);\n        \n        JLabel speedLabel = new JLabel(&quot;Hız: &quot; + speed + &quot;m/s&quot;);\n        speedLabel.setBounds(10, 5, 200, 50);\n        window.add(speedLabel);\n        \n        \n        JLabel heightLabel = new JLabel(&quot;Yükseklik: &quot; + height + &quot;m&quot;);\n        heightLabel.setBounds(90, 5, 200, 50);\n        window.add(heightLabel);\n        \n        JLabel thrustLabel = new JLabel(&quot;İtme Kuvveti: &quot; + thrust + &quot;N&quot;);\n        thrustLabel.setBounds(215, 5, 200, 50);\n        window.add(thrustLabel);\n        \n        JLabel gravityLabel = new JLabel(&quot;Yerçekimi: ~&quot; + gravity + &quot;ms2&quot;);\n        gravityLabel.setBounds(360, 5, 200, 50);\n        window.add(gravityLabel);\n        \n        JLabel massLabel = new JLabel(&quot;Ağırlık: &quot; + mass*gravity + &quot;N&quot;);\n        massLabel.setBounds(500, 5, 200, 50);\n        window.add(massLabel);\n        \n        JButton massAdd = new JButton(&quot;1KG Kütle Ekle&quot;);\n        massAdd.setBounds(10, 75, massAdd.getPreferredSize().width, massAdd.getPreferredSize().height);\n        window.getContentPane().add(massAdd);\n        \n        massAdd.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                mass = mass + 1;\n                massLabel.setText(&quot;Ağırlık: &quot; + mass*gravity + &quot;N&quot;);\n            }\n        });\n        \n        JButton massMinus = new JButton(&quot;1KG Kütle Çıkar&quot;);\n        massMinus.setBounds(130, 75, massMinus.getPreferredSize().width, massMinus.getPreferredSize().height);\n        window.getContentPane().add(massMinus);\n        \n        massMinus.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                if (mass &gt; 0) {\n                    \n                    mass = mass - 1;\n                    massLabel.setText(&quot;Ağırlık: &quot; + mass*gravity + &quot;N&quot;);\n                }\n             \n            }\n        });\n        \n        \n        JButton thrustAdd = new JButton(&quot;10N İtme Kuvveti Arttır&quot;);\n        thrustAdd.setBounds(280, 75, thrustAdd.getPreferredSize().width, thrustAdd.getPreferredSize().height);\n        window.getContentPane().add(thrustAdd);\n        \n        thrustAdd.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                \n                if (thrust_setting == 0) {\n                    \n                    thrust_setting = 2;\n                    animation = 0;\n                    \n                }                \n            }\n        });\n        \n        JButton thrustMinus = new JButton(&quot;10N İtme Kuvveti Azalt&quot;);\n        thrustMinus.setBounds(445, 75, thrustMinus.getPreferredSize().width, thrustMinus.getPreferredSize().height);\n        window.getContentPane().add(thrustMinus);\n        \n        thrustMinus.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                \n                    \n                if (thrust_setting == 0) {\n                    \n                    thrust_setting = 1;\n                    animation = 0;                  \n                }   \n            }\n        });\n        \n        window.pack();\n        window.setSize(650,150);\n        window.setVisible(true);\n    \n        DecimalFormat decimalFormat = new DecimalFormat(&quot;#.##&quot;);\n        float speed_text;\n        while(true) {\n            \n            Yenile();\n            \n            if (thrust_setting == 2) {\n                animation = animation + 1;\n                if (animation &lt;= 10) {\n                    thrust = thrust + 1;\n                    \n                }\n                if (animation &gt; 10) {\n                    thrust_setting = 0;\n                    animation = 0;\n                }\n            }\n            \n            if (thrust_setting == 1) {\n                animation = animation + 1;\n                if (animation &lt;= 10) {\n                    thrust = thrust - 1;\n                    System.out.println(thrust);\n                }\n                if (animation &gt; 10) {\n                    thrust_setting = 0;\n                    animation = 0;\n                }\n            }\n            \n            Hesapla();\n        \n            if (height &gt; 1000) {\n                \n                String formatted_text_height = decimalFormat.format(height/1000);\n                heightLabel.setText(&quot;Yükseklik: &quot; + formatted_text_height + &quot;km&quot;);\n            }\n            else {\n                String formatted_text_height = decimalFormat.format(height);\n                heightLabel.setText(&quot;Yükseklik: &quot; + formatted_text_height + &quot;m&quot;);\n            }   \n            \n            String formatted_text_speed = decimalFormat.format(speed*3.6);\n            speedLabel.setText(&quot;Hız: &quot; + formatted_text_speed + &quot;km/h&quot;);\n            \n            thrustLabel.setText(&quot;İtme Kuvveti: &quot; + thrust + &quot;N&quot;);\n            \n            try {\n                Thread.sleep(100); \n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n            \n        }\n        \n    }\n    \n    public static void Hesapla() {\n            if (height &gt;= 0) {\n                \n                if (mass*gravity == 0) {\n                    \n                    \n                }\n                \n                else {\n                    speed = (thrust - gravity*mass)/gravity;\n                \n                    if (height + speed &lt; 0) {\n                        height = 0;\n                        if (speed &lt; 0) {\n                            speed = 0;\n                        }\n                    }\n                    else {\n                        height = height + speed;\n                        //if (speed &lt; 0) {\n                            //speed = 0;\n                        //}\n                    }\n                }\n            }\n            else {\n                speed = 0;\n                height = 0;\n                \n            }           \n      }     \n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/cY2GN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cY2GN.png\" alt=\"Background problem with screenshot\" /></a></p>\n<p>I guess the problem is not with me but with Java because when I reduce the background size from 10000 to below 600\n(ie the height of the canvas) is visible.</p>\n"},{"answers":[{"comments":[{"comment_id":134535861,"body":"The following search-options in invalid in ML. ``` &lt;cts:document-query xmlns:cts=&quot;<a href=\"http://marklogic.com/cts\" rel=\"nofollow noreferrer\">marklogic.com/cts</a>&quot;&gt;   &lt;cts:uri-match&gt;/directory/*/folder/*.xml&lt;/cts:uri-match&gt; &lt;/cts:document-query&gt; ``` If you try using the above config, you will get this error - <code>XDMP-QUERYELEM: cts:query(&lt;cts:document-query xmlns:cts=&quot;http:&#47;&#47;marklogic.com&#47;cts&quot; xmlns=&quot;&quot;&gt;...&lt;&#47;cts:document-query&gt;) -- Query element contains unknown child: &#47;x&#47;cts:document-query&#47;cts:uri-match</code>"}],"answer_id":76292324,"body":"<p><code>cts.documentQuery(cts.uriMatch(&quot;/directory/*/folder/*.xml&quot;))</code><br>\nIs this what you are expecting? This is the server side javascript (XQuery) equivalent of what you have asked.<br>\nIf you want to pass a serialized query, you should first execute <code>cts:uri-match(&quot;/directory/*/folder/*.xml&quot;)</code> and then enclose the results into <code>cts:document-query</code> as shown below</p>\n<pre><code>&lt;cts:document-query xmlns:cts=&quot;http://www.w3.org/2000/xmlns/&quot;&gt;\n  &lt;cts:uri&gt;/directory/2019/folder/1.xml&lt;/cts:uri&gt;\n  &lt;cts:uri&gt;/directory/2020/folder/2.xml&lt;/cts:uri&gt;\n  &lt;cts:uri&gt;/directory/2021/folder/3.xml&lt;/cts:uri&gt;\n&lt;/cts:document-query&gt;\n</code></pre>\n<p>Best approach is to create a MarkLogic module server-side (in XQuery or JS) and invoke it from JAVA client API (by passing the uri-match string)</p>\n"}],"last_activity_date":1684529106,"question_id":75865878,"body":"<p>I want to list all files (*.XML) in Marklogic database.\nHow to implement such functionality in MarkLogic JavaAPI?\nWhich works like:</p>\n<pre><code>cts:document-query(cts:uri-match(&quot;/directory/*/folder/*.xml&quot;))\n</code></pre>\n<p>Related problem:\n<a href=\"https://stackoverflow.com/questions/75856444/marklogic-directory-query-with-wildcard/75856708#75856708\">MarkLogic directory-query with wildcard</a></p>\n"},{"answers":[{"comments":[{"comment_id":134535566,"body":"&quot;It will be executed until i == this.day&quot; - no, it will be executed <i>while</i> <code>i == this.day</code> is true. (The rest of the paragraph is written correctly.)"},{"comment_id":134535596,"body":"@JonSkeet thank you for your attentiveness! I have edited it"}],"answer_id":76292163,"body":"<p>It looks like a mistake in loop condition. It will be executed while i == this.day. In this case 'day' equals 4 and 'i' equals 0. So, this condition is always false and loop body is never executed</p>\n<pre><code>    for (int i = 0; i==this.day; i++ ) {\n        System.out.println(&quot;Happy Greetings!&quot;);\n    }\n</code></pre>\n<p>If you want loop to be executed as many times as value in 'this.day', then you should write it like this:</p>\n<pre><code>    for (int i = 0; i &lt; this.day; i++) {\n        System.out.println(&quot;Happy Greetings!&quot;);\n    }\n</code></pre>\n"}],"last_activity_date":1684528918,"question_id":76292118,"body":"<p>I need to write a method that needs to output a certain string an amount of times that equals to a variable in the main class. I wrote it with the for loop but it isn't outputting anything nor is it showing any errors. (method must contain local variable)\n`public class main {</p>\n<pre><code>public static void main(String[] args) {\n    DateFirstTry date1, date2;\n    date1 = new DateFirstTry();\n    date2 = new DateFirstTry();\n\n    // Date1 declaration\n    date1.month = &quot;December&quot;;\n    date1.day = 31;\n    date1.year = 2012;\n\n// Date2 declaration\n    date2.month = &quot;July&quot;;\n    date2.day = 4;\n    date2.year = 1776;\n\n// Assigment\n    date2.happyGreetings();\n    \n</code></pre>\n<pre><code>public class DateFirstTry {\n    public String month;\n    public int day;\n    public int year; //a four digit number.\n    public void writeOutput() {\n        System.out.println(month + &quot; &quot; + day + &quot;, &quot; + year);\n    \n    }\n    public void makeItNewYears() {\n        this.month = &quot;January&quot;;\n        this.day = 1;\n    }\n\n    public void happyGreetings() {\n        for (int i = 0; i==this.day; i++ ) {\n            System.out.println(&quot;Happy Greetings!&quot;);\n        }\n    }\n    public void getNextYear() {\n    \n        System.out.println(this.year + 1);\n    }\n    \n    public void yellIfNewYears() {\n        if (month.equals(&quot;January&quot;) &amp;&amp; day == 1)\n            System.out.println(&quot;Hurray!&quot;);\n    else \n        System.out.println(&quot;Its not new year!&quot;);\n    }\n}\n</code></pre>\n<p>I tried to create a do-while-loop but I couldn't complete it, and I tried some minor adjustments to the for loop, but none worked.</p>\n"},{"comments":[{"comment_id":134526545,"body":"It looks very unstable to continue using JDK 8, while Spark grows in versions. I agree that Spark 3.4.0 is very unstable, I&#39;ve experienced it myself. But it is more done to run with JDK 11 than JDK 8."}],"answers":[{"comments":[{"comment_id":134554112,"body":"but on the official documentation of spark they say that spark 3.4 should work on JDK8u362 and above, <a href=\"https://spark.apache.org/docs/latest/\" rel=\"nofollow noreferrer\">Spark Docs</a>"},{"comment_id":134558218,"body":"Yes but the error may be indicating a bug."}],"answer_id":76292302,"body":"<p>This errors usually indicate that the code was built in a version of JDK newer than 8, with target JDK 8, but using the library of the newer version that contains new methods. Since those methods are not available in JDK 8 hence the error: NoSuchMethodError. This may be caused by Spark being inadvertently with JDK 11 as described. Running in JDK 11 seems advisable.</p>\n"}],"last_activity_date":1684528764,"question_id":76286857,"body":"<p>My project was on spark 3.3 with JDK8u362 and I tried updating it to spark 3.4, Official documentation of spark 3.4 says it works with JDK8u362 and above but when I tried upgrading docker base image of spark to JDK8u362 and JDK8u372 it is failing at runtime with below error, For JDK8u362 it throws error for Java.nio.CharBuffer.position method and for JDK8u372 it throws error for java.nio.ByteBuffer.flip method.\nBut when I run with JDK11 image in spark Docker file it works fine.\nAm I missing anything or how to fix this issue as I want to run it with JDK8.</p>\n<pre><code>ava.lang.NoSuchMethodError: java.nio.CharBuffer.position(I)Ljava/nio/CharBuffer;\n        at org.apache.spark.sql.catalyst.parser.ParserUtils$.unescapeSQLString(ParserUtils.scala:220) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.ParserUtils$.string(ParserUtils.scala:95) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.$anonfun$createString$2(AstBuilder.scala:2632) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at scala.collection.TraversableLike.$anonfun$map$1(TraversableLike.scala:286) ~[scala-library-2.12.17.jar:?]\n        at scala.collection.Iterator.foreach(Iterator.scala:943) ~[scala-library-2.12.17.jar:?]\n        at scala.collection.Iterator.foreach$(Iterator.scala:943) ~[scala-library-2.12.17.jar:?]\n        at scala.collection.AbstractIterator.foreach(Iterator.scala:1431) ~[scala-library-2.12.17.jar:?]\n        at scala.collection.IterableLike.foreach(IterableLike.scala:74) ~[scala-library-2.12.17.jar:?]\n        at scala.collection.IterableLike.foreach$(IterableLike.scala:73) ~[scala-library-2.12.17.jar:?]\n        at scala.collection.AbstractIterable.foreach(Iterable.scala:56) ~[scala-library-2.12.17.jar:?]\n        at scala.collection.TraversableLike.map(TraversableLike.scala:286) ~[scala-library-2.12.17.jar:?]\n        at scala.collection.TraversableLike.map$(TraversableLike.scala:279) ~[scala-library-2.12.17.jar:?]\n        at scala.collection.AbstractTraversable.map(Traversable.scala:108) ~[scala-library-2.12.17.jar:?]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.createString(AstBuilder.scala:2632) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.$anonfun$visitStringLiteral$1(AstBuilder.scala:2618) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.ParserUtils$.withOrigin(ParserUtils.scala:160) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitStringLiteral(AstBuilder.scala:2618) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitStringLiteral(AstBuilder.scala:58) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.SqlBaseParser$StringLiteralContext.accept(SqlBaseParser.java:19511) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitChildren(AstBuilder.scala:73) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.SqlBaseParserBaseVisitor.visitConstantDefault(SqlBaseParserBaseVisitor.java:1735) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.SqlBaseParser$ConstantDefaultContext.accept(SqlBaseParser.java:18373) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitChildren(AstBuilder.scala:73) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.SqlBaseParserBaseVisitor.visitValueExpressionDefault(SqlBaseParserBaseVisitor.java:1567) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.SqlBaseParser$ValueExpressionDefaultContext.accept(SqlBaseParser.java:17491) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.typedVisit(AstBuilder.scala:63) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.expression(AstBuilder.scala:1630) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.$anonfun$withPredicate$1(AstBuilder.scala:1870) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.ParserUtils$.withOrigin(ParserUtils.scala:160) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.withPredicate(AstBuilder.scala:1784) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.$anonfun$visitPredicated$1(AstBuilder.scala:1768) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.ParserUtils$.withOrigin(ParserUtils.scala:160) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitPredicated(AstBuilder.scala:1765) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitPredicated(AstBuilder.scala:58) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.SqlBaseParser$PredicatedContext.accept(SqlBaseParser.java:16909) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitChildren(AstBuilder.scala:73) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.SqlBaseParserBaseVisitor.visitExpression(SqlBaseParserBaseVisitor.java:1518) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.SqlBaseParser$ExpressionContext.accept(SqlBaseParser.java:16766) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.typedVisit(AstBuilder.scala:63) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.expression(AstBuilder.scala:1630) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.$anonfun$visitParenthesizedExpression$1(AstBuilder.scala:2361) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.ParserUtils$.withOrigin(ParserUtils.scala:160) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitParenthesizedExpression(AstBuilder.scala:2361) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitParenthesizedExpression(AstBuilder.scala:58) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.SqlBaseParser$ParenthesizedExpressionContext.accept(SqlBaseParser.java:18036) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitChildren(AstBuilder.scala:73) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.SqlBaseParserBaseVisitor.visitValueExpressionDefault(SqlBaseParserBaseVisitor.java:1567) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.SqlBaseParser$ValueExpressionDefaultContext.accept(SqlBaseParser.java:17491) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.typedVisit(AstBuilder.scala:63) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.expression(AstBuilder.scala:1630) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.$anonfun$visitPredicated$1(AstBuilder.scala:1766) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.ParserUtils$.withOrigin(ParserUtils.scala:160) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitPredicated(AstBuilder.scala:1765) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitPredicated(AstBuilder.scala:58) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.SqlBaseParser$PredicatedContext.accept(SqlBaseParser.java:16909) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.typedVisit(AstBuilder.scala:63) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.expression(AstBuilder.scala:1630) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.$anonfun$visitLogicalBinary$4(AstBuilder.scala:1694) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at scala.collection.SeqLike.$anonfun$reverseMap$2(SeqLike.scala:295) ~[scala-library-2.12.17.jar:?]\n        at scala.collection.SeqLike.reverseMap(SeqLike.scala:294) ~[scala-library-2.12.17.jar:?]\n        at scala.collection.SeqLike.reverseMap$(SeqLike.scala:289) ~[scala-library-2.12.17.jar:?]\n        at scala.collection.AbstractSeq.reverseMap(Seq.scala:45) ~[scala-library-2.12.17.jar:?]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.$anonfun$visitLogicalBinary$1(AstBuilder.scala:1694) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.ParserUtils$.withOrigin(ParserUtils.scala:160) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitLogicalBinary(AstBuilder.scala:1669) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitLogicalBinary(AstBuilder.scala:58) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.SqlBaseParser$LogicalBinaryContext.accept(SqlBaseParser.java:16958) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.typedVisit(AstBuilder.scala:63) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.expression(AstBuilder.scala:1630) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.withWhereClause(AstBuilder.scala:703) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.$anonfun$visitCommonSelectQueryClausePlan$2(AstBuilder.scala:807) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.ParserUtils$EnhancedLogicalPlan$.optionalMap$extension(ParserUtils.scala:256) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitCommonSelectQueryClausePlan(AstBuilder.scala:807) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.$anonfun$withSelectQuerySpecification$1(AstBuilder.scala:788) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.ParserUtils$.withOrigin(ParserUtils.scala:160) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.withSelectQuerySpecification(AstBuilder.scala:776) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.$anonfun$visitRegularQuerySpecification$1(AstBuilder.scala:668) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.ParserUtils$.withOrigin(ParserUtils.scala:160) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitRegularQuerySpecification(AstBuilder.scala:656) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitRegularQuerySpecification(AstBuilder.scala:58) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.SqlBaseParser$RegularQuerySpecificationContext.accept(SqlBaseParser.java:10386) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitChildren(AstBuilder.scala:73) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.SqlBaseParserBaseVisitor.visitQueryPrimaryDefault(SqlBaseParserBaseVisitor.java:902) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.SqlBaseParser$QueryPrimaryDefaultContext.accept(SqlBaseParser.java:9891) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitChildren(AstBuilder.scala:73) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.SqlBaseParserBaseVisitor.visitQueryTermDefault(SqlBaseParserBaseVisitor.java:888) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.SqlBaseParser$QueryTermDefaultContext.accept(SqlBaseParser.java:9658) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.typedVisit(AstBuilder.scala:63) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.plan(AstBuilder.scala:114) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.$anonfun$visitQuery$1(AstBuilder.scala:120) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.ParserUtils$.withOrigin(ParserUtils.scala:160) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitQuery(AstBuilder.scala:119) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitQuery(AstBuilder.scala:58) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.SqlBaseParser$QueryContext.accept(SqlBaseParser.java:6891) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitChildren(AstBuilder.scala:73) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.SqlBaseParserBaseVisitor.visitStatementDefault(SqlBaseParserBaseVisitor.java:69) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.SqlBaseParser$StatementDefaultContext.accept(SqlBaseParser.java:1988) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.antlr.v4.runtime.tree.AbstractParseTreeVisitor.visit(AbstractParseTreeVisitor.java:18) ~[antlr4-runtime-4.9.3.jar:4.9.3]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.$anonfun$visitSingleStatement$1(AstBuilder.scala:80) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.ParserUtils$.withOrigin(ParserUtils.scala:160) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AstBuilder.visitSingleStatement(AstBuilder.scala:80) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AbstractSqlParser.$anonfun$parsePlan$2(ParseDriver.scala:92) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.ParserUtils$.withOrigin(ParserUtils.scala:160) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AbstractSqlParser.$anonfun$parsePlan$1(ParseDriver.scala:92) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AbstractSqlParser.parse(ParseDriver.scala:127) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.execution.SparkSqlParser.parse(SparkSqlParser.scala:52) ~[spark-sql_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.parser.AbstractSqlParser.parsePlan(ParseDriver.scala:89) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.SparkSession.$anonfun$sql$2(SparkSession.scala:633) ~[spark-sql_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.catalyst.QueryPlanningTracker.measurePhase(QueryPlanningTracker.scala:111) ~[spark-catalyst_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.SparkSession.$anonfun$sql$1(SparkSession.scala:632) ~[spark-sql_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:827) ~[spark-sql_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.SparkSession.sql(SparkSession.scala:630) ~[spark-sql_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.sql.SparkSession.sql(SparkSession.scala:671) ~[spark-sql_2.12-3.4.0.jar:3.4.0]\n        at com.cisco.intersight.cep.AdvisoryProcessorTask.processActions(AdvisoryProcessorTask.java:376) ~[orion.jar:?]\n        at com.cisco.intersight.cep.AdvisoryProcessorTask.processAdvisory(AdvisoryProcessorTask.java:329) ~[orion.jar:?]\n        at com.cisco.intersight.cep.AdvisoryProcessorTask.processAdvisories(AdvisoryProcessorTask.java:306) ~[orion.jar:?]\n        at com.cisco.intersight.cep.AdvisoryProcessorTask.run(AdvisoryProcessorTask.java:286) ~[orion.jar:?]\n        at com.cisco.intersight.cep.AdvisoryDriver.main(AdvisoryDriver.java:115) ~[orion.jar:?]\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_352]\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_352]\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_352]\n        at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_352]\n        at org.apache.spark.deploy.JavaMainApplication.start(SparkApplication.scala:52) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.deploy.SparkSubmit.org$apache$spark$deploy$SparkSubmit$$runMain(SparkSubmit.scala:1020) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.deploy.SparkSubmit.doRunMain$1(SparkSubmit.scala:192) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.deploy.SparkSubmit.submit(SparkSubmit.scala:215) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.deploy.SparkSubmit.doSubmit(SparkSubmit.scala:91) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.deploy.SparkSubmit$$anon$2.doSubmit(SparkSubmit.scala:1111) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.deploy.SparkSubmit$.main(SparkSubmit.scala:1120) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.deploy.SparkSubmit.main(SparkSubmit.scala) ~[spark-core_2.12-3.4.0.jar:3.4.0]%\n</code></pre>\n<p>Error with JDK8u362</p>\n<pre><code>org.apache.spark.SparkException: Job aborted due to stage failure: Task serialization failed: java.lang.NoSuchMethodError: java.nio.ByteBuffer.flip()Ljava/nio/ByteBuffer;\njava.lang.NoSuchMethodError: java.nio.ByteBuffer.flip()Ljava/nio/ByteBuffer;\n        at org.apache.spark.util.io.ChunkedByteBufferOutputStream.toChunkedByteBuffer(ChunkedByteBufferOutputStream.scala:115)\n        at org.apache.spark.broadcast.TorrentBroadcast$.blockifyObject(TorrentBroadcast.scala:362)\n        at org.apache.spark.broadcast.TorrentBroadcast.writeBlocks(TorrentBroadcast.scala:160)\n        at org.apache.spark.broadcast.TorrentBroadcast.&lt;init&gt;(TorrentBroadcast.scala:99)\n        at org.apache.spark.broadcast.TorrentBroadcastFactory.newBroadcast(TorrentBroadcastFactory.scala:38)\n        at org.apache.spark.broadcast.BroadcastManager.newBroadcast(BroadcastManager.scala:78)\n        at org.apache.spark.SparkContext.broadcastInternal(SparkContext.scala:1548)\n        at org.apache.spark.SparkContext.broadcast(SparkContext.scala:1530)\n        at org.apache.spark.scheduler.DAGScheduler.submitMissingTasks(DAGScheduler.scala:1535)\n        at org.apache.spark.scheduler.DAGScheduler.submitStage(DAGScheduler.scala:1353)\n        at org.apache.spark.scheduler.DAGScheduler.handleMapStageSubmitted(DAGScheduler.scala:1334)\n        at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.doOnReceive(DAGScheduler.scala:2934)\n        at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2923)\n        at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2912)\n        at org.apache.spark.util.EventLoop$$anon$1.run(EventLoop.scala:49)\n\n        at org.apache.spark.scheduler.DAGScheduler.failJobAndIndependentStages(DAGScheduler.scala:2785) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2(DAGScheduler.scala:2721) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2$adapted(DAGScheduler.scala:2720) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at scala.collection.mutable.ResizableArray.foreach(ResizableArray.scala:62) ~[scala-library-2.12.17.jar:?]\n        at scala.collection.mutable.ResizableArray.foreach$(ResizableArray.scala:55) ~[scala-library-2.12.17.jar:?]\n        at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:49) ~[scala-library-2.12.17.jar:?]\n        at org.apache.spark.scheduler.DAGScheduler.abortStage(DAGScheduler.scala:2720) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.scheduler.DAGScheduler.submitMissingTasks(DAGScheduler.scala:1545) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.scheduler.DAGScheduler.submitStage(DAGScheduler.scala:1353) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.scheduler.DAGScheduler.handleMapStageSubmitted(DAGScheduler.scala:1334) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.doOnReceive(DAGScheduler.scala:2934) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2923) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2912) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.util.EventLoop$$anon$1.run(EventLoop.scala:49) ~[spark-core_2.12-3.4.0.jar:3.4.0]\nCaused by: java.lang.NoSuchMethodError: java.nio.ByteBuffer.flip()Ljava/nio/ByteBuffer;\n        at org.apache.spark.util.io.ChunkedByteBufferOutputStream.toChunkedByteBuffer(ChunkedByteBufferOutputStream.scala:115) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.broadcast.TorrentBroadcast$.blockifyObject(TorrentBroadcast.scala:362) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.broadcast.TorrentBroadcast.writeBlocks(TorrentBroadcast.scala:160) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.broadcast.TorrentBroadcast.&lt;init&gt;(TorrentBroadcast.scala:99) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.broadcast.TorrentBroadcastFactory.newBroadcast(TorrentBroadcastFactory.scala:38) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.broadcast.BroadcastManager.newBroadcast(BroadcastManager.scala:78) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.SparkContext.broadcastInternal(SparkContext.scala:1548) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.SparkContext.broadcast(SparkContext.scala:1530) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        at org.apache.spark.scheduler.DAGScheduler.submitMissingTasks(DAGScheduler.scala:1535) ~[spark-core_2.12-3.4.0.jar:3.4.0]\n        ... 6 more \n    ```\n\n</code></pre>\n"},{"comments":[{"comment_id":134503390,"body":"I think you can, I haven&#39;t done it before but can help. Not sure if you are using spring cloud functions or another one but somehow there should be a connection string where you can set the emulator endpoint. Look at this example <a href=\"https://github.com/saturnism/testcontainers-gcloud-examples/blob/main/springboot/pubsub-example/src/test/java/com/example/springboot/pubsub/PubSubIntegrationTests.java#L141\" rel=\"nofollow noreferrer\">github.com/saturnism/testcontainers-gcloud-examples/blob/mai&zwnj;&#8203;n/&hellip;</a>"},{"comment_id":134505277,"body":"@Edd&#250;Mel&#233;ndez I saw that example and the problem is that it fails with the current version of PubSub testcontainer"},{"comment_id":134509741,"body":"It fails because of testcontainers or the image itself? Can you update the question with your logs, please?"},{"comment_id":134535742,"body":"@Edd&#250;Mel&#233;ndez I have added errors when it fails"},{"comment_id":134537103,"body":"well, the PubSubEmulatorContainer doesn&#39;t provide a topic, so, this should be manually created. After that, subscription for that topic should be created too. Then you should submit the message"},{"comment_id":134560567,"body":"@Edd&#250;Mel&#233;ndez so the GitHub example is incomplete?"},{"comment_id":134561349,"body":"The github example does everything through code. What you want to do is different and I want to do that too but also have some issues with it due to the message is received but null"},{"comment_id":134561724,"body":"@Edd&#250;Mel&#233;ndez Interesting because when I try to run the GitHub example it throws the same errors for me as I will use it with my code so not sure if the testcontainers changed anything since that code was released."},{"comment_id":134562671,"body":"To be clear, the error I talked about is receiving the message from pubsub but a null message when arriving to the function. However, your error is related to missing topic/subscription which you actually need to send the message and be processed by the function."},{"comment_id":134563239,"body":"@Edd&#250;Mel&#233;ndez Based on the GitHub example, in my case, it should be done in the <code>setup()</code> method lines #102 and #103"},{"comment_id":134563317,"body":"I&#39;m just trying to help with the shared information but I think I can not continue due to lack of context. I just can say it can be an initialization issue, I do not have that issue but can not say what is missing in you case unless you can share a repository to take a look."},{"comment_id":134563508,"body":"@Edd&#250;Mel&#233;ndez Yeah I know you are trying to help and I&#39;m happy about that. I&#39;m just trying to point out that the GitHub example doesn&#39;t even work. I have copied that test example with the necessary dependencies and then run <code>testSend()</code> - it will fail on line #128  as <code>PubSubIntegrationTests.testSend() throws java.util.concurrent.ExecutionException,java.lang.Interrupte&zwnj;&#8203;dException</code> because <code>test-subscription</code> doesn&#39;t exist. My point is that example may be obsolete to what testcontainers repo offers now for SpringBoot"},{"comment_id":134564436,"body":"Oh, ok. my fault so the example is not working. I know those are not updates. Can you check on this repo <a href=\"https://github.com/ddobrin/testcontainers-gcloud-examples\" rel=\"nofollow noreferrer\">github.com/ddobrin/testcontainers-gcloud-examples</a> ?"},{"comment_id":134565239,"body":"@Edd&#250;Mel&#233;ndez Not sure what is different but that one example works for me. Now can take a look further. Thanks!"}],"last_activity_date":1684528467,"question_id":76272943,"body":"<p>Is there any way to do integration tests for the Cloud Function using <code>PubSubEmulatorContainer</code>?</p>\n<p>My Cloud Function is triggered by the message in the PubSub topic as follows</p>\n<pre><code>@Component\n@RequiredArgsConstructor\npublic class MessageIngest implements Consumer&lt;PubSubMessage&gt; {\n\n    private final MessageResource msgResource;\n    private final ObjectMapper objectMapper;\n\n\n    @Override\n    public void accept(PubSubMessage pubSubMessage) {\n        var message = new String(Base64.getDecoder().decode(pubSubMessage.getData()), UTF_8);\n        msgResource.ingest(objectMapper.readValue(message, Message.class));\n    }\n}\n</code></pre>\n<p>So far what I found about using <code>PubSubEmulatorContainer</code> for the integration testing is to publish there or subscribe from nothing about how to listen to the topic and trigger the test on publishing to the topic. My assumption is that I need to do that within the <code>contextLoads()</code> test.</p>\n<p>For the live code trigger is provided during the deployment as an argument</p>\n<pre><code>gcloud functions deploy myCloudFunction --trigger-topic=$TOPIC_TO_LISTEN\n</code></pre>\n<p>PS.\nProvided example from the comments fails for me on testconainers version 1.18.0</p>\n<p><code>testSend()</code> errors out as</p>\n<pre><code>[ault-executor-0] c.g.c.s.p.c.p.PubSubPublisherTemplate    : Publishing to test-topic topic failed.\ncom.google.api.gax.rpc.NotFoundException: io.grpc.StatusRuntimeException: NOT_FOUND: Topic not found\ncom.google.api.gax.rpc.NotFoundException: io.grpc.StatusRuntimeException: NOT_FOUND: Subscription does not exist\n</code></pre>\n<p>and <code>testWorker()</code> as</p>\n<pre><code>[ault-executor-0] c.g.c.s.p.c.p.PubSubPublisherTemplate    : Publishing to test-topic topic failed.\ncom.google.api.gax.rpc.NotFoundException: io.grpc.StatusRuntimeException: NOT_FOUND: Topic not found\ncom.google.api.gax.rpc.NotFoundException: com.google.api.gax.rpc.NotFoundException: io.grpc.StatusRuntimeException: NOT_FOUND: Subscription does not exist (resource=test-subscription)\n</code></pre>\n"},{"comments":[{"comment_id":133201192,"body":"You don&#39;t need to <i>pass it</i>, you can <i>create</i> predicate which will compare <code>i</code> with <code>to</code> in a way depending on sign of <code>increment</code>. Something like <code>IntPredicate predicate = i&gt;=0 ? (x)-&gt; x&lt;to : (x) -&gt; x&gt;to;</code> (assuming that <code>to</code> is final or at least effectively-final). Now all you need is use <code>while(predicate.test(i))</code> instead of your conditions."},{"comment_id":133201304,"body":"That many primitive-type function parameters, with generic, non-descriptive names, look like a design smell. What&#39;s worse, the functions seem to assume the caller knows their insides judging from those comments. Before going into refactoring implementation details, I&#39;d look into refactoring the function contracts."}],"answers":[{"answer_id":75495917,"body":"<p>You can use a ternary operator if the only difference is the condition of the while loop:</p>\n<pre><code>while (increment &lt; 0 ? i &gt; to : i &lt; to) {\n    i += increment; \n    // common body\n}\n</code></pre>\n"},{"answer_id":75503837,"body":"<p>I think I did something similar using an enum,\nin your case it might be like this:</p>\n<pre><code>public class Example {\n  void go(Direction direction, int number, int index, int to) {\n    while (LEFT == direction ? i &gt; to : i &lt; to) {\n      i = direction.increment(i);\n      // ...\n      i = direction.decrement(i);\n      // ...\n      i = direction.floor(i, to);\n      // ...\n      var fromIndex = direction.fromIndex(index);\n    }\n  }\n}\n\npublic enum Direction {\n  LEFT(&quot; &lt;- left&quot;) {\n    @Override\n    int increment(int value) {\n      return --value;\n    }\n\n    @Override\n    int decrement(int value) {\n      return ++value;\n    }\n\n    @Override\n    int floor(int value, int limit) {\n      return Math.max(value, limit);\n    }\n\n    @Override\n    int fromIndex(int value) {\n      return value;\n    }\n  },\n  \n  RIGHT(&quot; right -&gt;&quot;) {\n    @Override\n    int increment(int value) {\n      return ++value;\n    }\n\n    @Override\n    int decrement(int value) {\n      return --value;\n    }\n\n    @Override\n    int floor(int value, int limit) {\n      return Math.min(value, limit);\n    }\n\n    @Override\n    int fromIndex(int value) {\n      return value + 1;\n    }\n  },\n  ;\n\n  final String sign;\n\n  Direction(String sign) {\n    this.sign = sign;\n  }\n\n  abstract int increment(int value);\n\n  abstract int decrement(int value);\n\n  abstract int floor(int value, int limit);\n\n  abstract int fromIndex(int value);\n\n  @Override\n  public String toString() {\n    return sign;\n  }\n}\n</code></pre>\n"}],"last_activity_date":1684528291,"question_id":75495716,"body":"<p>I have two almost identical methods, the only difference is than one goes &quot;left&quot; and the second &quot;right&quot; from the spot in the array.</p>\n<p>Is there any way how to de-duplicate these tow methods?</p>\n<p>Using Functional Interface &amp; function perhaps?</p>\n<pre><code>void goLeft(int number, int index, int increment, int to) {\n  int localMax = 0;\n  int i = index;\n  while (i &gt; to) {\n    i += increment; // passed increment is negative\n    // common body\n  }\n}\n\nvoid goRight(int number, int index, int increment, int to) {\n  int localMax = 0;\n  int i = index;\n  while (i &lt; to) {\n    i += increment; // passed increment is positive\n    // common body\n  }\n}\n</code></pre>\n"},{"comments":[{"comment_id":134524183,"body":"Hey, mate! I just wanted to acknowledge your question. We&#39;ve reached out to the Stargate devs and will post an update/answer as soon as we have something. Cheers!"},{"comment_id":134530442,"body":"Great question, Spencer!  I&#39;m interested to see how this one turns out."}],"answers":[{"answer_id":76285933,"body":"<p>It doesn't look like we've attempted this before so we don't have a working example to show you.</p>\n<p>We are looking into it and will attempt to get it to work in the next few days. I will post an update once I have something to report. Cheers!</p>\n<p><strong>[UPDATE]</strong> CDC integration with Stargate is not supported yet. I've logged a feature request on your behalf (ref <a href=\"https://github.com/stargate/stargate/issues/2587\" rel=\"nofollow noreferrer\">#2587</a>) in an attempt to get it on the roadmap.</p>\n"},{"answer_id":76292215,"body":"<p>Based on the Java stack trace above, the likely reason you are encountering the exception is because the jar file containing the Java agent code (<code>agent-c4-2.2.9-all.jar</code>) is missing Apache Cassandra dependencies.</p>\n<p>Here are some possible solutions:</p>\n<ol>\n<li>Use an agent jar file that has all its dependencies bundled into it.</li>\n<li>Or, specify the missing dependencies in the classpath.</li>\n</ol>\n<p>The JDK documentation for <a href=\"https://download.java.net/java/early_access/panama/docs/api/java.instrument/java/lang/instrument/package-summary.html\" rel=\"nofollow noreferrer\">insrumentation</a> has a section on how agent classes are loaded and also a section on how agent jar files can specify their <code>Boot-Class-Path</code> for loading dependencies.</p>\n<p>Hope that helps.</p>\n<p>Cheers</p>\n"}],"last_activity_date":1684527667,"question_id":76284476,"body":"<p>I'm trying to build an integration test for <a href=\"https://www.datastax.com/products/datastax-astra/cdc-for-astra-db\" rel=\"nofollow noreferrer\">Datastax CDC</a>. I'm trying to follow the directions <a href=\"https://docs.datastax.com/en/cdc-for-cassandra/docs/2.2.9/install.html\" rel=\"nofollow noreferrer\">here</a> to create a containerized Stargate instance running the <a href=\"https://github.com/datastax/cdc-apache-cassandra\" rel=\"nofollow noreferrer\">CDC Java agent</a>. I'm using the following docker file:</p>\n<pre><code>FROM stargateio/coordinator-4_0:v2\n\nENV CLUSTER_NAME=&quot;test&quot;\nENV CLUSTER_VERSION=&quot;4.0&quot;\nENV DEVELOPER_MODE=&quot;true&quot;\nENV ENABLE_AUTH=&quot;true&quot;\n\nRUN (curl -L https://github.com/datastax/cdc-apache-cassandra/releases/download/v2.2.9/agent-c4-2.2.9-all.jar --output agent-c4-2.2.9-all.jar)\nENV JAVA_OPTS=&quot;$JAVA_OPTS -javaagent:agent-c4-2.2.9-all.jar&quot;\n</code></pre>\n<p>I'm using <code>JAVA_OPTS</code> because <code>JVM_EXTRA_OPTS</code> appears to have no effect. Stargate inserts these into the <a href=\"https://github.com/stargate/stargate/blob/e25166320bcce062324118652e0fba6f454b63cb/coordinator/starctl#L123\" rel=\"nofollow noreferrer\">start command</a>. I'm getting this error:</p>\n<pre><code>Using environment for config\n2023-05-18T20:53:28.708821506Z Running java -server -javaagent:agent-c4-2.2.9-all.jar -Dcassandra.libjemalloc=/usr/lib/aarch64-linux-gnu/libjemalloc.so.2 -Dstargate.libdir=./stargate-lib -Djava.awt.headless=true -jar ./stargate-lib/stargate-starter-2.0.13.jar --cluster-name test --cluster-version 4.0 --listen 172.17.0.2 --enable-auth --developer-mode\n2023-05-18T20:53:28.771770673Z SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\n2023-05-18T20:53:28.771806548Z SLF4J: Defaulting to no-operation (NOP) logger implementation\n2023-05-18T20:53:28.771810090Z SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\n2023-05-18T20:53:28.773310423Z Exception in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\n2023-05-18T20:53:28.773331381Z  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n2023-05-18T20:53:28.773333715Z  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n2023-05-18T20:53:28.773336006Z  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n2023-05-18T20:53:28.773337756Z  at java.lang.reflect.Method.invoke(Method.java:498)\n2023-05-18T20:53:28.773339298Z  at sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:386)\n2023-05-18T20:53:28.773341298Z  at sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:401)\n2023-05-18T20:53:28.773343131Z Caused by: java.lang.NoClassDefFoundError: org/apache/cassandra/config/DatabaseDescriptor\n2023-05-18T20:53:28.773344881Z  at com.datastax.oss.cdc.agent.Agent.main(Agent.java:49)\n2023-05-18T20:53:28.773346631Z  at com.datastax.oss.cdc.agent.Agent.premain(Agent.java:31)\n2023-05-18T20:53:28.773348715Z  ... 6 more\n2023-05-18T20:53:28.773350340Z Caused by: java.lang.ClassNotFoundException: org.apache.cassandra.config.DatabaseDescriptor\n2023-05-18T20:53:28.773352090Z  at java.net.URLClassLoader.findClass(URLClassLoader.java:387)\n2023-05-18T20:53:28.773353798Z  at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n2023-05-18T20:53:28.773355465Z  at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\n2023-05-18T20:53:28.773357131Z  at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n2023-05-18T20:53:28.773358756Z  ... 8 more\n2023-05-18T20:53:28.773360340Z FATAL ERROR in native method: processing of -javaagent failed\n</code></pre>\n<p>I've tried downloading the Cassandra <code>.jar</code> files and adding them to the classpath (as described in <a href=\"https://stackoverflow.com/questions/35609078/how-to-resolve-the-could-not-initialize-class-org-apache-cassandra-config-datab\">this question</a>) to no avail. How do I resolve this error?</p>\n"}]}