{"items":[{"comments":[{"comment_id":134502956,"body":"Could you please add your build.gradle file?"}],"answers":[{"answer_id":76272954,"body":"<p>You need to ensure you run gradle with java 17 or higher.</p>\n<p>If you run build via the command line, please check <code>java -version</code></p>\n<p>If you run a build via IDE (for example, IDEA), ensure your IDE uses the correct Java. For example, for IDEA it can be done in <code>Settings -&gt; Build,execution,deployment -&gt; Gradle -&gt; Gradle JVM</code></p>\n<p><a href=\"https://i.stack.imgur.com/fcJKW.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fcJKW.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"last_activity_date":1684332019,"question_id":76272896,"body":"<p>I updated the springboot version 2.7.9 to 3.0.5 in build.gradle and not able to build project, it says</p>\n<pre><code>  &gt; No matching variant of org.springframework.boot:spring-boot-gradle-plugin:3.0.5 was found. The consumer was configured to find a runtime of a library compatible with Java 14, packaged as a jar, and its dependencies declared externally, as well as attribute 'org.gradle.plugin.api-version' with value '7.4.2' but:\n      - Variant 'apiElements' capability org.springframework.boot:spring-boot-gradle-plugin:3.0.5 declares a library, packaged as a jar, and its dependencies declared externally:\n          - Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 14.\n</code></pre>\n<p>I've also tried to changed java version from 17 to 14 but still getting same.</p>\n"},{"comments":[{"comment_id":134503847,"body":"I solve this problem by changing the /user/info from authc to anon. It worked, the unit test and axios will be redirect to /user/unauthc successfully. But I don&#39;t know why it worked."}],"last_activity_date":1684331900,"question_id":76272938,"body":"<p>My code is based on Springboot, and I use shiro to implement login and permission manage.</p>\n<p>I have a method to get user info, the data will be returned as json format.</p>\n<pre><code>@GetMapping(&quot;/info&quot;)\n@RequiresAuthentication\npublic User info(HttpSession session) {\n    return userService.info(session);\n}\n</code></pre>\n<p>There is my shiro config. <strong>When I logout and call the info method, shiro will redirect the request to loginUrl eg '/user/unauthc'.</strong></p>\n<pre><code>@Bean\npublic ShiroFilterFactoryBean shiroFilterFactoryBean(DefaultWebSecurityManager securityManager) {\n    ShiroFilterFactoryBean factoryBean = new ShiroFilterFactoryBean();\n    factoryBean.setSecurityManager(securityManager);\n    factoryBean.setLoginUrl(&quot;/user/unauthc&quot;);\n    factoryBean.setSuccessUrl(&quot;/&quot;);\n    Map&lt;String, String&gt; map = new LinkedHashMap&lt;&gt;();\n    map.put(&quot;/user/login&quot;, &quot;anon&quot;);\n    map.put(&quot;/**&quot;, &quot;authc&quot;);\n    factoryBean.setFilterChainDefinitionMap(map);\n    return factoryBean;\n}\n</code></pre>\n<p>There is my '/user/unauthc' method. It will be throw an UnauthenticatedException. And I have a handler to catch this exception and return a 403 response.</p>\n<pre><code>@GetMapping(&quot;/unauthc&quot;)\npublic void unauthc() {\n    throw new UnauthenticatedException();\n}\n\n@ExceptionHandler(UnauthenticatedException.class)\nResponseEntity&lt;String&gt; handleUnauthenticatedException(UnauthenticatedException e) {\n    log.info(e.getMessage());\n    return new ResponseEntity&lt;&gt;(&quot;User not login&quot;, HttpStatus.FORBIDDEN);\n}\n</code></pre>\n<p>Here is my question: when I test info method with logout status in unit test, I excepted a 403 code. However, I got a 302 code. Even having the same problem in axios request. So how can I solve this problem.</p>\n<p>There is my unit test code and the log.</p>\n<pre><code>@Test\npublic void testInfo() throws Exception {\n    MockHttpSession session = new MockHttpSession();\n    mockMvc.perform(MockMvcRequestBuilders.get(&quot;/user/info&quot;).session(session))\n             .andExpect(MockMvcResultMatchers.status().isUnauthorized());\n}\n</code></pre>\n<pre><code>MockHttpServletRequest:\n      HTTP Method = GET\n      Request URI = /user/info\n       Parameters = {}\n          Headers = []\n             Body = null\n    Session Attrs = {shiroSavedRequest=org.apache.shiro.web.util.SavedRequest@6af310c7, org.apache.shiro.web.session.HttpServletSession.HOST_SESSION_KEY=localhost}\n\nHandler:\n             Type = null\n\nAsync:\n    Async started = false\n     Async result = null\n\nResolved Exception:\n             Type = null\n\nModelAndView:\n        View name = null\n             View = null\n            Model = null\n\nFlashMap:\n       Attributes = null\n\nMockHttpServletResponse:\n           Status = 302\n    Error message = null\n          Headers = [Location:&quot;/user/unauthc&quot;]\n     Content type = null\n             Body = \n    Forwarded URL = null\n   Redirected URL = /user/unauthc\n          Cookies = []\n\njava.lang.AssertionError: Status expected:&lt;401&gt; but was:&lt;302&gt;\nExpected :401\nActual   :302\n</code></pre>\n<p>I try to search this problem but the result I got is to modify <code>FormAuthenticationFilter</code>.</p>\n"},{"comments":[{"comment_id":73863526,"body":"Try typing ctrl+Z."},{"comment_id":73863612,"body":"I tried this already. I am on a mac btw."},{"comment_id":73863854,"body":"I think you should use hasNextLine instead of isEmpty. Try kill command in another window to stop the program (<a href=\"https://www.howtogeek.com/209658/how-to-force-applications-and-processes-to-quit-on-os-x/\" rel=\"nofollow noreferrer\">howtogeek.com/209658/&hellip;</a>)."},{"comment_id":73863952,"body":"I am looking for a greater understanding of the method. I haven&#39;t had any trouble with my system getting stuck. (as i said in my post there is a line that reads user input so the program doesn&#39;t infinitely loop without me doing anything)"}],"answers":[{"answer_id":45533047,"body":"<p>I think that on Mac you can use <code>CMD+D</code> (<code>⌘+D</code>) to mark the end of input to the shell. See: <a href=\"https://www.jetbrains.com/help/idea/debug-tool-window-console.html\" rel=\"noreferrer\">https://www.jetbrains.com/help/idea/debug-tool-window-console.html</a></p>\n\n<blockquote>\n  <p><strong>Keyboard Shortcuts</strong></p>\n  \n  <p>The ⌘D key combination allows you to send EOF (end of file), i.e. to\n  signal that no more data can be read from a data source.</p>\n</blockquote>\n\n<p>On the issue of the Princeton libraries provided in the Algorithms - Part 1 in Coursera's course, you can play a bit with their code, particularly in the class <code>import edu.princeton.cs.algs4.StdIn;</code>. Their implementation that uses that code is probably not the most sophisticated to play with the concepts:</p>\n\n<pre><code>while (!StdIn.isEmpty()) {\n     int p = StdIn.readInt();\n     int q = StdIn.readInt();\n\n     if (!uf.connected(p, q)) {\n         uf.union(p, q);\n         StdOut.println(p + \" \" + q);\n     }\n}\n</code></pre>\n\n<p>Here's what I did: </p>\n\n<ol>\n<li>Created new Java project in IntelliJ</li>\n<li>Create new java package (will be under src)</li>\n<li>Create new class for their examples, that will have a main method</li>\n<li>Created libs folder in project</li>\n<li>Downloaded their code from <a href=\"http://algs4.cs.princeton.edu/code/algs4.jar\" rel=\"noreferrer\">http://algs4.cs.princeton.edu/code/algs4.jar</a> and placed that jar in the libs folder</li>\n<li>Added that lib to project - on project tab in IntelliJ, right click the project > Open Module Settings  > Click dependencies tab > Click '+' > JAR or directories... > choose the jar from libs folder above</li>\n<li>I changed the code in the while loop above to have a better user interaction on the shell (be creative here - instead of using the isEmpty() use a check for p and q to be both 0 to mark end of input, for example. </li>\n</ol>\n\n<p>Now to run that just do right-click on the code that has the class with the main static method, and choose Run (CTRL+SHIFT+R).</p>\n\n<p>This will avoid the dreaded CMD+D and some issues that go with it if you want to write more code after the while loop - for instance, I added code to check if 2 objects are connect:</p>\n\n<pre><code>StdOut.println(\"Check if 2 objects are connected: \");\ntry {\n    Scanner reader = new Scanner(System.in);  // Reading from System.in\n    System.out.println(\"Enter first object: \");\n    int n = reader.nextInt(); // Scans the next token of the input as an int.\n    System.out.println(\"Enter second object: \");\n    int m = reader.nextInt(); // Scans the next token of the input as an int.\n    StdOut.println(uf.connected(n, m) ? \"Connected\" : \"Not Connected\");\n} catch(Exception e) {\n    // whatever...\n}\n</code></pre>\n\n<p>Here's my very quick and dirty approach to the problem:</p>\n\n<pre><code>package com.algorithms;\n\nimport edu.princeton.cs.algs4.StdIn;\nimport edu.princeton.cs.algs4.StdOut;\nimport edu.princeton.cs.algs4.UF;\n\nimport java.util.Scanner;\n\npublic class Week1 {\n    private static UF uf;\n\n    public static void main(String[] args)\n    {\n        StdOut.println(\"Enter the total number of objects: \");\n        int N = StdIn.readInt();\n\n        StdOut.println(\"Enter the unions between any of those objects...\");\n\n        Week1.uf = new UF(N);\n        while (true) {\n\n            int p = StdIn.readInt();\n            int q = StdIn.readInt();\n\n            if (!uf.connected(p, q)) {\n                Week1.uf.union(p, q);\n                StdOut.println(p + \" \" + q);\n            }\n\n            if(p==0 &amp;&amp; q==0) break;\n        }\n        checkIfConnected();\n    }\n\n    private static void checkIfConnected()\n    {\n        StdOut.println(\"Check if 2 objects are connected: \");\n        try {\n            Scanner reader = new Scanner(System.in);  // Reading from System.in\n            System.out.println(\"Enter first object: \");\n            int n = reader.nextInt(); // Scans the next token of the input as an int.\n            System.out.println(\"Enter second object: \");\n            int m = reader.nextInt(); // Scans the next token of the input as an int.\n            StdOut.println(Week1.uf.connected(n, m) ? \"Connected\" : \"Not Connected\");\n        } catch(Exception e) {}\n    }\n}\n</code></pre>\n"},{"answer_id":52006268,"body":"<blockquote>\n  <p>Before reading each number, the program uses the method StdIn.isEmpty() to check whether there are any more numbers in the input stream. How do we signal that we have no more data to type? By convention, we type a special sequence of characters known as the end-of-file sequence. Unfortunately, the terminal applications that we typically encounter on modern operating systems use different conventions for this critically important sequence. In this book, we use Ctrl-D...\n  <em>Computer Science  Sedgewick</em></p>\n</blockquote>\n\n<p>Therefore <code>isEmpty</code> is actually <code>isCtrl-D</code>.</p>\n\n<p>Also, try <code>StdIn.isEmpty()</code> in the terminal application without anything beforehand will leave you with no boolean but a standard input stream requesting inputs. So when a program like the following one runs:</p>\n\n<pre><code>public class Average\n  {\n     public static void main(String[] args)\n     {  // Average the numbers on standard input.\n        double sum = 0.0;\n        int n = 0;\n        while (!StdIn.isEmpty())\n        {  // Read a number from standard input and add to sum.\n           double value = StdIn.readDouble();\n           sum += value;\n           n++;\n        }\n        double average = sum / n;\n        StdOut.println(\"Average is \" + average);\n     }\n } \n</code></pre>\n\n<p>, the standard input stream pops out when decide the conditional <code>while (!StdIn.isEmpty)</code> for the first time instead of <code>StdIn.readDouble()</code>. If you then type in some numbers, return them, causing standard input stream to be non-empty, the program would then jump inside the while body. I found out this is the case by testing </p>\n\n<pre><code>&gt; java Average\n [DrJava Input Box] (And I hit Ctrl+D here)\nAverage is NaN\n</code></pre>\n\n<p>NaN means n = 0 which means the while body was left no touched. </p>\n"},{"answer_id":53456289,"body":"<ol>\n<li>press <code>Enter</code> to next line</li>\n<li>Lost cursor</li>\n<li>Back the windows/cursor, try press <code>Ctrl + Z</code>, the <code>StdIn.isEmpty()</code> will return <code>true</code></li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/mqIbY.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mqIbY.jpg\" alt=\"enter image description here\"></a></p>\n"},{"answer_id":76272935,"body":"<p>Same <code>StdIn.isEmpty()</code> method from the Princeton libraries provided in the Algorithms Coursera algorithms course.<br />\nThe issue with sending <code>EOF</code> in IntelliJ IDEA might be due to a conflict with another shortcut, or because no shortcut is set for <code>EOF</code>.\nI just fixed it by changing my IDEA shortcut as follows:</p>\n<ol>\n<li>go to <code>Settings</code> -&gt; <code>Keymap</code></li>\n<li>search <code>eof</code></li>\n<li>add/change the shortcut for whatever you like.</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/yfPEG.png\" rel=\"nofollow noreferrer\">IDEA set EOF shortcut</a></p>\n<p>This should allow you to terminate the while loop in your Java program using the new keyboard shortcut you have set.</p>\n"}],"last_activity_date":1684331893,"question_id":43401347,"body":"<p>I am using the StdIn.isEmpty() method from the Princeton libraries provided in the Algorithms Coursera algorithms course but am confused as to how it works. I have the statement </p>\n\n<pre><code>while (!StdIn.isEmpty())\n</code></pre>\n\n<p>with some code enclosed that reads user input but I can't seem to break out of the loop. By my understanding if I hit enter without typing in any text that should mean that standard input is empty and the while loop should be broken. I looked up the code for isEmpty but it did not clarify anything: </p>\n\n<pre><code>public static boolean isEmpty() {\n    return !scanner.hasNext();\n}\n</code></pre>\n\n<p>Can someone clarify how standard input works and help me fix my misunderstanding of this method?</p>\n"},{"comments":[{"comment_id":134503586,"body":"I fix it with <code>@IntegrationComponentScan</code> , still need to check if the message are realy post to my local pubsub emulator"}],"last_activity_date":1684331651,"question_id":76272410,"body":"<p>I trying to use GCP PUB/SUB with springboot 3. I am using example from <a href=\"https://spring.io/guides/gs/messaging-gcp-pubsub/\" rel=\"nofollow noreferrer\">Spring</a>\nI have config class</p>\n<pre><code>@Configuration\npublic class PubSubConfig {\n\n    @Bean\n    @ServiceActivator(inputChannel = &quot;pubsubOutputChannel&quot;)\n    public MessageHandler messageSender(PubSubTemplate pubsubTemplate) {\n        return new PubSubMessageHandler(\n                pubsubTemplate, &quot;check&quot;);\n    }\n    @MessagingGateway(defaultRequestChannel = &quot;pubsubOutputChannel&quot;)\n    public interface PubsubOutboundGateway {\n        void sendToPubsub(String text);\n    }\n}\n</code></pre>\n<p>I am trying to inject in my service class</p>\n<pre><code>@Service\n@Slf4j\n@RequiredArgsConstructor\npublic class MyService{\n  private final PubSubConfig.PubsubOutboundGateway gateway;\n</code></pre>\n<p>But the application can't start when I use</p>\n<pre><code>  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n  &lt;version&gt;3.0.6&lt;/version&gt;\n</code></pre>\n<p>I have <code>required a bean of type '....PubSubConfig$PubsubOutboundGateway' that could not be found</code>\nIt's working with <code>&lt;version&gt;2.7.6&lt;/version&gt;</code></p>\n"},{"last_activity_date":1684331474,"question_id":76272881,"body":"<p>I was able to generate unit tests using Randdop tool. I tried to import those junit in my spring-boot application but I could not figure out how to run them. I have a lot of errors due to unrecognized imports.</p>\n<p>I tried to downgrade spring-boot-starter-junit lib to version 4 by following this guide:\n<a href=\"https://www.baeldung.com/spring-boot-testing\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-testing</a> (section 3.1), witn no success.</p>\n<p>this is the only dependency I included in my project other than proprietary Framework dependency which mainly contains dependencies such as lombook, common to all projects:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Although I include junit4, I have some other errors. One of this is about an inport which is missing on classpath: import spring.boot.loader....</p>\n"},{"comments":[{"comment_id":134493464,"body":"Please mark the line in your code where the exception occurs. Also the stack trace of the exception would be helpful."},{"comment_id":134495920,"body":"@Robert: there&#39;s only one call to that method and the stacktrace isn&#39;t going to add anything. OP: make sure your ks file contains/uses the alias &#39;cert12&#39;; if it is in PKCS12 format, which the suffix .p12 usually implies but not necessarily, Java&#39;s &#39;alias&#39; is the PKCS12 &#39;friendly name&#39;. The simplest way is <code>keytool -list -keystore certDir&#47;cert12.p12</code>."},{"comment_id":134502877,"body":"I have updated the alias with (String) ks.aliases().nextElement() and it works now. But the problem is that it generates invalid xml. The requirements require the digestValue to be Base 64 encoded. ENcoding int after it is being signed does not makes a lot of difference."}],"last_activity_date":1684331315,"question_id":76267055,"body":"<p>I am trying to sign XML with .p12 certificate utilizing the code bellow, but I am getting an error:</p>\n<p><strong>Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;java.security.KeyStore$PrivateKeyEntry.getCertificate()&quot; because &quot;keyEntry&quot; is null\nat xmlCreateSignature/xmlCreateSignature.xmlSignature.main(xmlSignature.java:38)</strong></p>\n<p>Line 38 is <code>X509Certificate cert = (X509Certificate) keyEntry.getCertificate();</code></p>\n<p>Any help is appreciated:</p>\n<p>Here is my code:</p>\n<pre><code>package xmlCreateSignature;\nimport java.io.*;\nimport java.security.*;\nimport java.security.cert.Certificate;\nimport java.security.cert.CertificateException;\nimport java.util.Collections;\nimport java.util.List;\n\nimport javax.xml.XMLConstants;\nimport javax.xml.crypto.*;\nimport javax.xml.crypto.dom.*;\nimport javax.xml.crypto.dsig.*;\nimport javax.xml.crypto.dsig.dom.*;\nimport javax.xml.crypto.dsig.keyinfo.*;\nimport javax.xml.crypto.dsig.spec.C14NMethodParameterSpec;\nimport javax.xml.crypto.dsig.spec.TransformParameterSpec;\nimport javax.xml.parsers.*;\nimport javax.xml.transform.*;\nimport javax.xml.transform.dom.*;\nimport javax.xml.transform.stream.*;\n\nimport org.w3c.dom.Document;\nimport org.w3c.dom.Element;\nimport java.security.cert.X509Certificate;\nimport java.util.Base64;\n\n\npublic class xmlSignature {\npublic static void main(String[] args) throws Exception {\n    System.setProperty(&quot;com.sun.org.apache.xml.internal.security.ignoreLineBreaks&quot;, &quot;true&quot;);\n    \n    // Load the XML document\n    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();\n    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();\n    Document doc = dBuilder.parse(new File(&quot;./certDir/request.xml&quot;));\n    \n    // Load the certificate\n    KeyStore ks = KeyStore.getInstance(&quot;PKCS12&quot;);\n    ks.load(new FileInputStream(&quot;./certDir/4300648_identity.p12&quot;), &quot;DAL00MATIAN&quot;.toCharArray());\n    KeyStore.PrivateKeyEntry keyEntry = (KeyStore.PrivateKeyEntry) ks.getEntry((String) ks.aliases().nextElement(), new KeyStore.PasswordProtection(&quot;DAL00MATIAN&quot;.toCharArray()));\n    X509Certificate cert = (X509Certificate) keyEntry.getCertificate();\n\n    // Create the XML signature\n    DOMSignContext dsc = new DOMSignContext(keyEntry.getPrivateKey(), doc.getDocumentElement());\n    XMLSignatureFactory fac = XMLSignatureFactory.getInstance(&quot;DOM&quot;);\n    Reference ref = fac.newReference(&quot;&quot;, fac.newDigestMethod(DigestMethod.SHA256, null), Collections.singletonList(fac.newTransform(Transform.ENVELOPED, (TransformParameterSpec) null)), null, null);\n    SignedInfo si = fac.newSignedInfo(fac.newCanonicalizationMethod(CanonicalizationMethod.INCLUSIVE, (C14NMethodParameterSpec) null), fac.newSignatureMethod(SignatureMethod.RSA_SHA256, null), Collections.singletonList(ref));\n    KeyInfoFactory kif = fac.getKeyInfoFactory();\n    X509Data x509d = kif.newX509Data(Collections.singletonList(cert));\n    KeyInfo ki = kif.newKeyInfo(Collections.singletonList(x509d));\n    XMLSignature signature = fac.newXMLSignature(si, ki);\n\n    // Sign the XML document\n    signature.sign(dsc);\n    SignedInfo signedInfo = signature.getSignedInfo();\n\n    // Get the references from the signed info\n    List&lt;Reference&gt; references = signedInfo.getReferences();\n\n    // Process each reference and encode the digestValue to Base64\n    for (Reference reference : references) {\n        // Get the digestValue as a byte array\n        byte[] digestValue = reference.getDigestValue();\n\n        // Encode the digestValue to Base64\n        String base64DigestValue = Base64.getEncoder().encodeToString(digestValue);\n\n        // Output the Base64-encoded digestValue\n        System.out.println(&quot;Base64-encoded DigestValue: &quot; + base64DigestValue);\n    }\n\n    // Save the signed XML document\n\n    // Save the signed XML document\n    TransformerFactory tf = TransformerFactory.newInstance();\n    Transformer trans = tf.newTransformer();\n    trans.transform(new DOMSource(doc), new StreamResult(new File(&quot;./certDir/request_response.xml&quot;)));\n\n}\n}\n</code></pre>\n"},{"comments":[{"comment_id":134502778,"body":"In fact, my goal was to add&lt;br&gt;tags to the content, but&lt;br&gt;was already escaped when generating HTML, resulting in the final PDF not implementing line breaks"},{"comment_id":134503572,"body":"Please don&#39;t post images of code, errors, logs, or other text; see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. &quot;didn&#39;t work&quot; is not a helpful problem description. Also, don&#39;t add comments to clarify, <a href=\"https://stackoverflow.com/posts/76272814/edit\">edit</a> your question instead. Add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and describe what is happening when you run your code and what you expected to happen instead. Good luck!"}],"last_activity_date":1684331063,"question_id":76272814,"body":"<p>My project uses the itext plugin to generate PDF and convert it to PDF through HTML. However, the console keeps reminding me that there is an HTML tag that has not been closed. After locating it, it was found that there was an error in this code. Suspected that there is an unclosed tag in the tag generated by document. createElement (&quot;p&quot;). This HTML is ignored, but itext reported an error<a href=\"https://i.stack.imgur.com/qcv3T.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>This is my Java code and an error. I tried using the formatting function provided by org. jsup to format the HTML, but it didn't work[<a href=\"https://i.stack.imgur.com/zY2JJ.png\" rel=\"nofollow noreferrer\">enter image description here</a>](<a href=\"https://i.stack.imgur.com/GcDK0.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/GcDK0.png</a>)</p>\n"},{"answers":[{"answer_id":75627101,"body":"<p>I prefer to use an <code>interface</code> for <code>@Service</code> because we can make interface public and implementation package access. So it makes the scope tighter.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface FooService {\n\n}\n\n@Service\nclass FooServiceImpl implements FooService {\n\n}\n</code></pre>\n<p>But it is for service that is used like a facade only.\n<code>Controller -&gt; Facade Service -&gt; other classes from Spring context</code></p>\n<p>For &quot;other classes&quot; from Spring context that can be used by <code>Facade Service</code> I never use interfaces.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\nclass FooServiceImpl {\n\n    private final FooServiceHelper helper;\n\n    @Autowired\n    public FooServiceImpl(FooServiceHelper helper) {\n        this.helper = helper;\n    }\n\n}\n</code></pre>\n<p>We can go even further and say: even we have multiple implementations, maybe better to have an abstract class or default implementation rather than an interface.</p>\n"},{"answer_id":76272791,"body":"<p>In Java applications, one good reason to create an interface that only has a single implementation is to implement <strong>D</strong>ependency inversion (<strong>D</strong> as in SOLI<strong>D</strong>).</p>\n<p>For example, in an application that has an onion / hexagonal style architecture with an infrastructure layer surrounding an application layer surrounding a model layer, you might define a <code>PersonRepository</code> interface in the application layer and a <code>JdbcPersonRepository</code> class that implements <code>PersonRepository</code> in the infrastructure layer. Methods of classes defined in the application layer call methods on <code>PersonRepository</code> to save and search for <code>Person</code> domain objects. <code>JdbcPersonRepository</code> in the infrastructure layer allows the application to save and search for <code>Person</code> object state in a MySQL database using JDBC.</p>\n<p>In this design, although code execution flows down from application layer code to infrastructure layer code, code dependencies are directed up from the infrastructure layer to the application layer.</p>\n<p>Search for explanations of onion architecture, hexagonal architecture, ports and adapters architecture and, in particular, dependency inversion.</p>\n"}],"last_activity_date":1684330908,"question_id":75626455,"body":"<p>In my Spring application, there's typically an interface for each service, even if there's only a single implementation, e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface FooService {\n  Foo getFoo(long id)\n\n  Iterable&lt;Foo&gt; findAllFoos()\n\n  void deleteFoo(long id)\n}\n\n@Service\n@Transactional\npublic class FooServiceImpl implements FooService {\n    // method implementations omitted\n}\n</code></pre>\n<p>I think this practice originated in the olden days when mocking libraries could only generate a mock for an interface. But modern mocking libraries like Mockito can mock a class just as easily as an interface, so I'm not sure if there's any practical benefit to defining an interface for (Spring/Spring Boot) services with a single implementation?</p>\n"},{"comments":[{"comment_id":134503050,"body":"The solution is valid and used in many projects. Especially for test environments. But also for local development or build servers."}],"last_activity_date":1684330868,"question_id":76272231,"body":"<p>I work on a team that uses lots of libraries that we have little control over.</p>\n<p>One of them introduces a bean that I want to replace when running locally, using the &quot;dev&quot; profile. It implements the <code>SuperClient</code> interface.</p>\n<p>It appears I can do this using the following, but is there a better way to do this?\nRemember the constraints are that I don't have control over the other bean that is typically injected, so I can't add <code>@Conditional</code> annotations to it.\nAnd I can't qualify every place it's injected, as I don't control much of that code either.</p>\n<pre><code>@Component\n@Primary\n@Profile(&quot;dev&quot;)\npublic class MyLocalDevelopmentOnlyReplacment implements SuperClient {\n...\n}\n</code></pre>\n<p>Note that I'd like to commit this class to our repo. to simplify local development for the entire team.</p>\n"},{"answers":[{"comments":[{"comment_id":134497957,"body":"I tried but it didn&#39;t worked. Aftert many attemps I was able to generare tests by mean of this command: java -classpath Randoop/randoop-all-4.3.2.jar:target/myJar.jar randoop.main.Main gentests --testjar=myJar.jar. So, what I did is to add /myJar.jar after target in myclassPath"}],"answer_id":76266150,"body":"<blockquote>\n<p><code>--testjar=myJar.jar</code></p>\n<p>The jar whose class I want to test is located and present in the target directory.</p>\n</blockquote>\n<p>The <code>--testjar</code> command-line argument tells where to find the class.  It doesn't modify its argument, such as assuming it is in a particular directory.  Can you try <code>--testjar=target/myJar.jar</code>?</p>\n"},{"answer_id":76272763,"body":"<p>I was able, after many attempts to solve the problem. I used this command:</p>\n<pre><code>java -classpath Randoop/randoop-all-4.3.2.jar:./target/myJar.jar randoop.main.Main gentests --testjar=myJar.jar\n</code></pre>\n<p>What I did is just add /myJar.jar after target in jar location on the classpath.</p>\n"}],"last_activity_date":1684330746,"question_id":76257443,"body":"<p>I'm running the following command in Ubuntu, having an openJDK 17:</p>\n<pre><code>java -classpath Randoop/randoop-all-4.3.2.jar:./target randoop.main.Main gentests --testjar=myJar.jar\n</code></pre>\n<p>As you can see, I'm running the command with --testjar option but I get the following error:\nRandoop for Java version 4.3.2.</p>\n<p>Error while reading jar file myJar: myJar (No such file or directory).</p>\n<p>The jar whose class I want to test is located and present in  the target directory. So I do not understand what's wrong...</p>\n<p>I have also tried to run this command, without ./ before target class:</p>\n<pre><code>java -classpath Randoop/randoop-all-4.3.2.jar:target randoop.main.Main gentests --testjar=myJar.jar\n</code></pre>\n<p>I get the same error...</p>\n<p>Anyone can help?\nThanks</p>\n"},{"answers":[{"answer_id":9798055,"body":"<p>Solved it by using query as- </p>\n\n<pre><code>query.putAll((BSONObject)query);\n</code></pre>\n"},{"comments":[{"comment_id":113707880,"body":"Is it outdated?"}],"answer_id":12788736,"body":"<p>Not sure if others might be searching for answers on this topic, but here is the easiest way to search for a MongoDB record based on \"_id\". The MongoDB documentation is not updated and still shows ObjectId as being part of the <code>com.mongodb</code> package (it also generally does not give a lot of information on searching by ObjectId).</p>\n\n<pre><code>import org.bson.types.ObjectId;\n\npublic DBObject findDocumentById(String id) {\n\n    BasicDBObject query = new BasicDBObject();\n    query.put(\"_id\", new ObjectId(id));\n\n    DBObject dbObj = collection.findOne(query);\n    return dbObj;\n}\n</code></pre>\n"},{"answer_id":38325486,"body":"<p>You can do this</p>\n\n<pre><code> ObjectId id= new ObjectId(\"4f693d40e4b04cde19f17205\");        \n    BasicDBObject obj = new BasicDBObject();        \n    obj.append(\"_id\", id);        \n    BasicDBObject query = new BasicDBObject();        \n    query.putAll((BSONObject)query);\n</code></pre>\n"},{"comments":[{"comment_id":97896006,"body":"can we use findOne here?"},{"comment_id":97912866,"body":"I don&#39;t think that we can use that method anymore. That was part of the old API <a href=\"http://api.mongodb.com/java/2.14/com/mongodb/DBCollection.html\" rel=\"nofollow noreferrer\">api.mongodb.com/java/2.14/com/mongodb/DBCollection.html</a> The new is a slightly different one <a href=\"http://api.mongodb.com/java/3.0/com/mongodb/async/client/MongoCollection.html\" rel=\"nofollow noreferrer\">api.mongodb.com/java/3.0/com/mongodb/async/client/&hellip;</a>"},{"comment_id":113707887,"body":"the eq is not applicable to 3.12?"}],"answer_id":47200057,"body":"<p>For those who are seeking a more up to date method, especially with 3.4:</p>\n\n<pre><code>import com.mongodb.client.MongoCollection;\nimport com.mongodb.client.MongoDatabase;\nimport org.bson.Document;\nimport org.bson.types.ObjectId;\n\nimport static com.mongodb.client.model.Filters.eq;\n\n//......\nMongoCollection&lt;Document&gt; myCollection = database.getCollection(\"myCollection\");\nDocument document = myCollection.find(eq(\"_id\", new ObjectId(\"4f693d40e4b04cde19f17205\"))).first();\nif (document == null) {\n    //Document does not exist\n} else {\n    //We found the document\n}\n</code></pre>\n"},{"comments":[{"comment_id":130132059,"body":"How is this different from <a href=\"https://stackoverflow.com/a/38325486/14732669\">Nifras Nipy&#39;s answer</a>?"}],"answer_id":62793523,"body":"<p>You can try this snippet:</p>\n<pre><code>ObjectId id= new ObjectId(&quot;4f693d40e4b04cde19f17205&quot;);        \nBasicDBObject obj = new BasicDBObject();        \nobj.append(&quot;_id&quot;, id);        \nBasicDBObject query = new BasicDBObject();        \nquery.putAll((BSONObject)obj);\n</code></pre>\n"},{"answer_id":73691029,"body":"<p>The more simple way to do this is:</p>\n<pre><code>Bson filter = Filters.eq(&quot;_id&quot;, new ObjectId(&quot;4f693d40e4b04cde19f17205&quot;));\nmongoConfig.getMongoTemplate().getCollection(&quot;myCollection&quot;).find(filter);\n\n</code></pre>\n<p>Reference here:\n<a href=\"https://www.baeldung.com/mongodb-query-documents-id\" rel=\"nofollow noreferrer\">https://www.baeldung.com/mongodb-query-documents-id</a></p>\n"},{"answer_id":73849301,"body":"<p>I found a way around, with a little bit more of code, requires a string representing the id to be found passed as argument.</p>\n<pre><code>import com.mongodb.client.MongoDatabase;\nimport com.mongodb.client.MongoClient;\nimport com.mongodb.client.MongoClients;\nimport com.mongodb.client.MongoCollection;\nimport com.mongodb.client.model.Filters;\nimport org.bson.conversions.Bson;\nimport org.bson.Document;\nimport org.bson.types.ObjectId;   \n\n[...]\n\npublic static void findCustomerById(String id) {\n    try (MongoClient mongoClient = MongoClients.create(&quot;mongodb://localhost:27017&quot;)) {\n        MongoDatabase database = mongoClient.getDatabase(&quot;database_name&quot;);\n        Bson filter = Filters.eq(&quot;_id&quot;, new ObjectId(id));\n        MongoCollection&lt;Document&gt; collection = database.getCollection(&quot;customer&quot;);\n\n        //Tries to find the document\n        Document doc = collection. Find(filter).first();\n        //prints the document\n        System.out.println(doc.toJson());\n    } catch (Exception e) {\n        System.out.println(&quot;Error finding document&quot;);\n        System.out.println(&quot;Error in: &quot; + e.getMessage());\n        e.printStackTrace();\n    }\n</code></pre>\n"},{"answer_id":76272740,"body":"<p>Don't forget to add the collectionName parameter if your class and collectionName don't match.  I landed on this question because my _id query wasn't working even though it looked good at first blush.</p>\n"}],"last_activity_date":1684330646,"question_id":9797935,"body":"<p>I am trying to find documents in MongoDB by searching on \"_id\" key. My document looks like this-</p>\n\n<pre><code>{\n  \"_id\" : ObjectId(\"4f693d40e4b04cde19f17205\"),\n  \"hostname\" : \"hostnameGoesHere\",\n  \"OSType\" : \"OSTypeGoesHere\"\n}\n</code></pre>\n\n<p>I am trying to search this document as- </p>\n\n<pre><code>ObjectId id= new ObjectId(\"4f693d40e4b04cde19f17205\");        \nBasicDBObject obj = new BasicDBObject();        \nobj.append(\"_id\", id);        \nBasicDBObject query = new BasicDBObject();        \nquery.putAll(query);\n</code></pre>\n\n<p>But I get below error- </p>\n\n<pre><code>error: reference to putAll is ambiguous, both method putAll(Map) in BasicBSONObject and method putAll(BSONObject) in BasicBSONObject match\n        query.putAll(query);\n</code></pre>\n\n<p>The append method of BasicDBObject supports (String Key, Value) and if I pass \"_id\" as String to this method, no documents are matched. </p>\n\n<p>So my question is how do I pass \"_id\"? </p>\n"},{"comments":[{"comment_id":134499935,"body":"Have you tried to attach a listener to the <code>setValue()</code> operation, to see if something went wrong?"},{"comment_id":134500046,"body":"I have just added a Toast message in on complete listener. but the toast message is not displaying that means the value is not set."},{"comment_id":134500241,"body":"Show the code that you&#39;re using."},{"comment_id":134500312,"body":"`   public void add(){         Toast.makeText(this, &quot;before adding&quot;, Toast.LENGTH_SHORT).show();         reference.setValue(&quot;ashar khan&quot;).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {             @Override             public void onComplete(@NonNull Task&lt;Void&gt; task) {                 Toast.makeText(MainActivity.this, &quot;Data inserted successfull&quot;, Toast.LENGTH_SHORT).show();             }         });     } }`"},{"comment_id":134500362,"body":"Please add the code to your question. Have you also tried to check what is happening when the task is not successful?"},{"comment_id":134500508,"body":"I have edited the code please check. The on complete and on failure both are not displaying the toast message"},{"comment_id":134500590,"body":"How is your <code>reference</code> defined? What is the location of your database?"},{"comment_id":134500601,"body":"please elaborate"},{"comment_id":134500781,"body":"So I have edited the code again I hope you will know how the reference is defined. database is located in firebase with same account and link is attached while getting database instance"},{"comment_id":134500835,"body":"So you say that onComplete, not onFailure are even called? Are you sure you have an internet connection? Have you tried simply using <code>database = FirebaseDatabase.getInstance();</code>? without any URL?"},{"comment_id":134500847,"body":"Database location: United States (us-central1)"},{"comment_id":134500908,"body":"Yes I have internet connection. Yes I have tried without link. Yes both function are not working"},{"comment_id":134501012,"body":"Are you sure you&#39;re looking at the right Firebase project in your console?"},{"comment_id":134501362,"body":"I have created database several time with different accounts I am sure I am targeting the right database"},{"comment_id":134501527,"body":"That&#39;s the reason why you most likely cannot write data to Firebase."},{"comment_id":134506920,"body":"@AlexMamo Yes I am targeting the right database because when I print reference on console it shows the exact same link."}],"answers":[{"comments":[{"comment_id":134503245,"body":"Still not working"}],"answer_id":76272729,"body":"<p>Pass no parameters in getInstance() of FirebaseDatabase</p>\n<p>FirebaseDatabase fd= FirebaseDatabase.getInstance();\nmake sure your project is connected with your Firebase console through the google-services.json file provided.</p>\n"}],"last_activity_date":1684330607,"question_id":76271002,"body":"<p>I am having a problem writing into Firebase real-time database. The app is running fine with no build errors. but when I look into the database nothing is changing. I am trying to write into the database. The account which is logged in in Android and Firebase is the same. I have also given the internet permission in the manifest file. I have included the JSON file in the project. I have added all the required dependencies in gradle. the gradle file</p>\n<p>`</p>\n<pre><code>  package com.example.firebasehometry;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.widget.Toast;\n\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.android.gms.tasks.OnFailureListener;\nimport com.google.android.gms.tasks.Task;\nimport com.google.firebase.database.DatabaseReference;\nimport com.google.firebase.database.FirebaseDatabase;\n\npublic class MainActivity extends AppCompatActivity {\n\n    FirebaseDatabase database;\n    DatabaseReference reference;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        database = FirebaseDatabase.getInstance(&quot;https://fir-home-53258-default-rtdb.firebaseio.com/&quot;);\n        reference = database.getReference(&quot;student&quot;);\n    add();\n    }\n    public void add(){\n        Toast.makeText(this, &quot;before adding&quot;, Toast.LENGTH_SHORT).show();\n        reference.setValue(&quot;ashar khan&quot;).addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n            @Override\n            public void onComplete(@NonNull Task&lt;Void&gt; task) {\n                Toast.makeText(MainActivity.this, &quot;Successfully inserted&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }).addOnFailureListener(new OnFailureListener() {\n            @Override\n            public void onFailure(@NonNull Exception e) {\n                Toast.makeText(MainActivity.this, &quot;Error inserting&quot;, Toast.LENGTH_SHORT).show();\n            }\n        });\n    }\n}\n</code></pre>\n<pre><code>plugins {\n    id 'com.android.application'\n    id 'com.google.gms.google-services'\n}\n\nandroid {\n    namespace 'com.example.firebasehometry'\n    compileSdk 33\n\n    defaultConfig {\n        applicationId &quot;com.example.firebasehometry&quot;\n        minSdk 25\n        targetSdk 33\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n    implementation platform('com.google.firebase:firebase-bom:32.0.0')\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'com.google.firebase:firebase-analytics'\n    implementation 'com.google.android.material:material:1.9.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    implementation 'com.google.firebase:firebase-database:20.0.4'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/cVwrR.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<pre><code>buildscript {\n        repositories {\n            // Make sure that you have the following two repositories\n            google()  // Google's Maven repository\n            mavenCentral()  // Maven Central repository\n        }\n    dependencies {\n        classpath 'com.google.gms:google-services:4.3.15'\n    }\n}// Top-level build file where you can add configuration options common to all sub-projects/modules.\nplugins {\n    id 'com.android.application' version '7.4.0' apply false\n    id 'com.android.library' version '7.4.0' apply false\n}\n</code></pre>\n<p>`</p>\n<p>I tried all the methods that are available on internet but still realtime database is not updating. Anyone who can help me in this matter..</p>\n"},{"answers":[{"comments":[{"comment_id":134505896,"body":"Thank you, I just upgraded Spring, and it is not happening so far.  It&#39;s odd how it worked for 3 weeks and then just started happening.  My dev mentioned to me he read an article saying WebFlux is stable on bare metal because it uses the resources of the machine, but in AWS will need some tuning.  I am waiting on him to send me the article."}],"answer_id":76272691,"body":"<p>Let us break this down extensively...\nThe <code>ReadTimeoutException</code> can\noccur when there is no response from the server within the specified\ntimeout period. But in your case, since the issue is happening\nconsistently on production and not on your development server, it is\npossible that there could be a network issue between your AWS\ninstance and the external service.</p>\n<p>Now, let us troubleshoot the problem together.</p>\n<ul>\n<li><p>Increase the timeout duration and see if it resolves this issue. You can use a debugger to step through the code and determine where\nthe timeout is occurring. This can give you an idea of whether the\nissue is with the WebClient or somewhere else in your code.</p>\n</li>\n<li><p>It is possible that there is an issue with the network connectivity between your AWS instance and the external service. You can try\ntesting the network connectivity by using PING or TRACEROUTE commands\nfrom the AWS instance to the external service.</p>\n</li>\n<li><p>You can as well upgrade to a newer version of Spring and Java. It appears that you are using older versions of Spring and Java, it is\npossible that there are compatibility issues that are causing the\ntimeouts. You can try upgrading to newer versions and see if it\nresolves the issue.</p>\n</li>\n</ul>\n"}],"last_activity_date":1684330311,"question_id":76272426,"body":"<p>We are experiencing the strangest problem.  We are using WebFlux WebClient to make an API call.  It was working fine, and then last week we started seeing the intermittent error:</p>\n<p>io.netty.handler.timeout.ReadTimeoutException: null</p>\n<p>To give some background.  Our dev server is running on bare metal, and it is stable and has no issues at all.  This is only happening in production on our AWS instance.</p>\n<p>We see this happening on every second service call, which made me think load balancer, but my infrastructure team cannot see anything obvious.</p>\n<p>This is the code that makes the service call.</p>\n<pre><code>Mono&lt;String&gt; responseMono = headersSpec.header(&quot;X-CORRELATION-ID&quot;, correlationId)\n        .accept(MediaType.APPLICATION_JSON)\n        .exchangeToMono(response -&gt; {\n            if (response.statusCode().equals(HttpStatus.OK)) {\n                return response.bodyToMono(String.class);\n            } else if (response.statusCode().equals(HttpStatus.BAD_REQUEST)) {\n                return Mono.error(new DataViolationException(&quot;Data rejected&quot;,&quot;Data rejected&quot;,null,&quot;ProductUse.useProduct&quot;));\n            } else {\n                return Mono.error(new GeneralServiceException(&quot;Error status received: &quot; + response.statusCode().toString() + &quot; [&quot; + response.bodyToMono(String.class) + &quot;]&quot;,null));\n            }\n        });\n</code></pre>\n<p>I am wondering if it is an issue with our version of Spring?  We are running the following:</p>\n<p>Java Version: 18</p>\n<p>Spring Version: 3.0.5</p>\n<p>This application runs on Kubernetes.</p>\n<p>Any suggestions would be much appreciated, at a bit of a loss here, have read other posts about this error but still unable to work out why it is happening to us, and why it only happens on AWS and not bare metal.</p>\n"},{"last_activity_date":1684330073,"question_id":76272650,"body":"<p>I working with IoT (Arduino and ESP32).\nI am able to assign a hostname to the board using mDNS.\nI want from an Android App to write the url &quot;arduino.local&quot; and get the IP address (for example 198.162.1.25&quot;.\nI have tried with jmDNS and I don't know how to list the services found.</p>\n<p>Library: implementation 'org.jmdns:jmdns:3.5.7'</p>\n<p>This is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.anaconet.jmdns;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.net.wifi.WifiInfo;\nimport android.net.wifi.WifiManager;\nimport android.net.wifi.WifiManager.MulticastLock;\nimport android.os.Bundle;\n\nimport android.os.Handler;\nimport android.content.Context;\n\n// jmDNS .........................................\nimport java.io.IOException;\nimport java.net.InetAddress;\nimport java.net.UnknownHostException;\n\nimport android.util.Log;\n\nimport javax.jmdns.JmDNS;\nimport javax.jmdns.ServiceListener;\nimport javax.jmdns.ServiceEvent;\nimport javax.jmdns.ServiceInfo;\n\npublic class MainActivity extends AppCompatActivity {\n    private static final String TAG = &quot;jmDNS (PAUL)... &quot;;\n    private static final String SERVICE_TYPE = &quot;_http._tcp.local.&quot;;\n    //private static final String SERVICE_TYPE = &quot;_workstation._tcp.local.&quot;;\n\n    private String type = &quot;_dynamix._tcp.local.&quot;;\n    private static JmDNS jmdns = null;\n    private ServiceListener listener = null;\n    private ServiceInfo serviceInfo;\n\n    private static MulticastLock multicastLock;\n    boolean isDiscovering;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        isDiscovering = false;\n        WifiManager wifi = (WifiManager) getApplicationContext().getSystemService(android.content.Context.WIFI_SERVICE);\n        multicastLock = wifi.createMulticastLock(&quot;jmdns-multicast-lock&quot;);\n        multicastLock.setReferenceCounted(false);\n    }\n\n    private InetAddress getDeviceIpAddress(WifiManager wifi) {\n        InetAddress result = null;\n        try {\n            // default to Android localhost\n            result = InetAddress.getByName(&quot;192.168.1.1&quot;);\n\n            // figure out our wifi address, otherwise bail\n            WifiInfo wifiinfo = wifi.getConnectionInfo();\n            int intaddr = wifiinfo.getIpAddress();\n            byte[] byteaddr = new byte[] { (byte) (intaddr &amp; 0xff), (byte) (intaddr &gt;&gt; 8 &amp; 0xff),\n                    (byte) (intaddr &gt;&gt; 16 &amp; 0xff), (byte) (intaddr &gt;&gt; 24 &amp; 0xff) };\n            result = InetAddress.getByAddress(byteaddr);\n        } catch (UnknownHostException ex) {\n            Log.w(TAG, String.format(&quot;getDeviceIpAddress Error: %s&quot;, ex.getMessage()));\n        }\n\n        return result;\n    }\n\n\n    private class ServiceListenerImpl implements ServiceListener {\n        @Override\n        public void serviceAdded(ServiceEvent event) {\n            event.getDNS().requestServiceInfo(event.getType(), event.getName());\n            System.out.println(&quot;Service added: &quot; + event.getInfo());\n        }\n\n        @Override\n        public void serviceRemoved(ServiceEvent event) {\n            //Handle service dropping out.\n            System.out.println(&quot;Service removed: &quot; + event.getInfo());\n        }\n\n        @Override\n        public void serviceResolved(ServiceEvent event) {\n            System.out.println(&quot;Service resolved: &quot; + event.getInfo());\n            System.out.println(&quot;Service resolved: &quot;\n                    + event.getInfo().getQualifiedName()\n                    + &quot; port:&quot; + event.getInfo().getPort());\n        }\n    }\n\n\n\n    @Override\n    protected void onStart()  {\n        Log.i(TAG, &quot;Starting ServiceActivity...&quot;);\n        super.onStart();\n        try {\n            Log.i(TAG, &quot;Starting Mutlicast Lock...&quot;);\n            WifiManager wifi = (WifiManager) this.getSystemService(Context.WIFI_SERVICE);\n            // get the device ip address\n            final InetAddress deviceIpAddress = getDeviceIpAddress(wifi);\n            multicastLock = wifi.createMulticastLock(getClass().getName());\n            multicastLock.setReferenceCounted(true);\n            multicastLock.acquire();\n            Log.i(TAG, &quot;Starting ZeroConf probe....&quot;);\n            // Create a JmDNS instance\n            // JmDNS jmdns = JmDNS.create(address, &quot;JmDNS-IP-&quot; + (jmdnsInstances.size() + 1));\n            jmdns = JmDNS.create(deviceIpAddress, &quot;HOSTNAME&quot;);\n            if (jmdns != null) {\n                // Add a service listener\n                jmdns.addServiceListener(SERVICE_TYPE, new ServiceListenerImpl());\n//                jmdns.list(&quot;_exp._tcp.local.&quot;, 10 * 1000);\n                isDiscovering = true;\n                Log.d(TAG, &quot;discovering services of type: &quot;  + SERVICE_TYPE);\n\n/*\n                serviceInfo = ServiceInfo.create(&quot;_test._tcp.local.&quot;,\n                        &quot;AndroidTest&quot;, 0,\n                        &quot;test from android&quot;);\n                jmdns.registerService(serviceInfo);\n\n */\n            }\n        } catch (UnknownHostException e) {\n            System.out.println(e.getMessage());\n        } catch (IOException e) {\n            Log.e(TAG, e.getMessage(), e);\n            System.out.println(e.getMessage());\n        }\n        Log.i(TAG, &quot;Started ZeroConf probe....&quot;);\n    }\n\n    @Override\n    protected void onStop() {\n        Log.i(TAG, &quot;Stopping ServiceActivity...&quot;);\n        super.onStop();\n        stopScan();\n    }\n\n    private static void stopScan() {\n        try {\n            if (jmdns != null) {\n                Log.i(TAG, &quot;Stopping ZeroConf probe....&quot;);\n                jmdns.unregisterAllServices();\n                jmdns.close();\n                jmdns = null;\n            }\n            if (multicastLock != null) {\n                Log.i(TAG, &quot;Releasing Mutlicast Lock...&quot;);\n                multicastLock.release();\n                multicastLock = null;\n            }\n        } catch (Exception ex) {\n            Log.e(TAG, ex.getMessage(), ex);\n        }\n    }\n}\n</code></pre>\n<p>List all IP and Hostname connected to WiFi.</p>\n"},{"answers":[{"answer_id":76272639,"body":"<p>Finally figured this out.  Because minio was running in a container, I had to do port forwarding so my test could reach minio.</p>\n<p>Example:</p>\n<p>kubectl port-forward -n gossamer-windows deployment/minio-deployment 9001:9000</p>\n<p>Once I did the port forwarding I was able to read and right to minio in delta format.</p>\n"}],"last_activity_date":1684330038,"question_id":76267996,"body":"<p>Here's the code:</p>\n<pre><code>    public static void main(String[] args) {\n    SparkConf sparkConf = new SparkConf()\n            .setAppName(&quot;test&quot;)\n            .set(&quot;spark.delta.logStore.class&quot;, &quot;org.apache.spark.sql.delta.storage.S3SingleDriverLogStore&quot;)\n            .set(&quot;spark.hadoop.fs.s3a.endpoint&quot;, &quot;http://localhost:9000&quot;)\n            .set(&quot;spark.hadoop.fs.s3a.access.key&quot;, &quot;minio&quot;)\n            .set(&quot;spark.hadoop.fs.s3a.secret.key&quot;, &quot;minio123&quot;)\n            .set(&quot;spark.hadoop.fs.s3a.path.style.access&quot;, &quot;true&quot;)\n            .set(&quot;spark.hadoop.fs.s3a.connection.ssl.enabled&quot;, &quot;false&quot;)\n            .set(&quot;spark.hadoop.fs.s3a.impl&quot;, &quot;org.apache.hadoop.fs.s3a.S3AFileSystem&quot;)\n            ;\n\n    SparkSession sparkSession = SparkSession.builder()\n            .master(&quot;local&quot;)\n            .config(sparkConf)\n            .getOrCreate();\n\n    System.out.println(&quot;********** Reading from minio **********&quot;);\n    Dataset&lt;Row&gt; csv = sparkSession\n            .read()\n            .format(&quot;csv&quot;)\n            .option(&quot;header&quot;,&quot;true&quot;)\n            .csv(&quot;s3a://spark-test/test.csv&quot;)\n            ;\n\n    System.out.println(&quot;********** Writing to minio **********&quot;);\n    csv.write().mode(&quot;overwrite&quot;).format(&quot;delta&quot;).save(&quot;s3a://spark-test/deltafile&quot;);\n</code></pre>\n<p>This is the output and hangs</p>\n<pre><code>********** Reading from minio **********\n23/05/16 20:07:00 INFO SharedState: Setting hive.metastore.warehouse.dir ('null') to the value of spark.sql.warehouse.dir.\n23/05/16 20:07:00 INFO SharedState: Warehouse path is 'file:/C:/&lt;...&gt;/spark-warehouse'.\n23/05/16 20:07:02 WARN MetricsConfig: Cannot locate configuration: tried hadoop-metrics2-s3a-file-system.properties,hadoop-metrics2.properties\n23/05/16 20:07:02 INFO MetricsSystemImpl: Scheduled Metric snapshot period at 10 second(s).\n23/05/16 20:07:02 INFO MetricsSystemImpl: s3a-file-system metrics system started\n23/05/16 20:07:11 WARN ProcfsMetricsGetter: Exception when trying to compute pagesize, as a result reporting of ProcessTree metrics is stopped\n</code></pre>\n<p>If I wait about 5 minutes and stop the program, I get this output with no errors:</p>\n<pre><code>23/05/16 20:11:53 INFO SparkContext: Invoking stop() from shutdown hook\n23/05/16 20:11:53 INFO SparkUI: Stopped Spark web UI at http://BAH5CD010DT15.resource.ds.bah.com:4041\n23/05/16 20:11:53 INFO MapOutputTrackerMasterEndpoint: MapOutputTrackerMasterEndpoint stopped!\n23/05/16 20:11:53 INFO MemoryStore: MemoryStore cleared\n23/05/16 20:11:53 INFO BlockManager: BlockManager stopped\n23/05/16 20:11:53 INFO BlockManagerMaster: BlockManagerMaster stopped\n23/05/16 20:11:53 INFO OutputCommitCoordinator$OutputCommitCoordinatorEndpoint: OutputCommitCoordinator stopped!\n23/05/16 20:11:53 INFO SparkContext: Successfully stopped SparkContext\n23/05/16 20:11:53 INFO ShutdownHookManager: Shutdown hook called\n23/05/16 20:11:53 INFO ShutdownHookManager: Deleting directory C:\\Users\\611528\\AppData\\Local\\Temp\\1\\spark-9f08dab0-3643-4cec-9d40-443b5db388be\n23/05/16 20:11:53 INFO MetricsSystemImpl: Stopping s3a-file-system metrics system...\n23/05/16 20:11:53 INFO MetricsSystemImpl: s3a-file-system metrics system stopped.\n23/05/16 20:11:53 INFO MetricsSystemImpl: s3a-file-system metrics system shutdown complete.\n</code></pre>\n<p>But if I stop the program at the hanging point after only a minute, I get these additional messages:</p>\n<pre><code>23/05/16 20:13:26 WARN AWSCredentialProviderList: Credentials requested after provider list was closed\n23/05/16 20:13:26 WARN FileStreamSink: Assume no metadata directory. Error while looking for metadata directory in the path: s3a://spark-test/test.csv.\njava.nio.file.AccessDeniedException: s3a://spark-test/test.csv: org.apache.hadoop.fs.s3a.auth.NoAuthWithAWSException: Credentials requested after provider list was closed\n</code></pre>\n<p>I've spent all day looking at this and haven't found a solution yet. It never even makes it to the write() portion of the code.  It's hanging on the read() for some reason.  Any help would be appreciated.</p>\n"},{"comments":[{"comment_id":134504280,"body":"Maybe <code>double[][] input; var inputOb = Java.Lang.Object.FromArray&lt;double[]&gt;(input);</code>"}],"last_activity_date":1684329874,"question_id":76272614,"body":"<p>I'm trying to implement a audio classifier in .NET MAUI with pre-trained .tflite model. I'm using Xamarin.TensorFlow.Lite package and load the model to a Interpreter. How ever when I try to run the Interpreter, it only takes arguments of type Java.Lang.Object. Type of input and output I want is in double array (either in jagged array or multidimensional array).\nIs there a way to convert .NET double array to Java object and vice versa?</p>\n<p>I tried to create a Java.Lang.Double 2D array and adding the values from .NET array to it but <code>Interpreter.Run()</code> still didn't take the array as Java Object.</p>\n<pre><code>using JavaDouble = Java.Lang.Double;\nJavaDouble[][] ConvertInput(List&lt;double[]&gt; input)\n{\n     var inputArray = input.ToArray();\n     JavaDouble[][] res = new JavaDouble[inputSize[0]][];            \n     for (int i = 0; i &lt; inputSize[0]; i++)\n     {\n          JavaDouble[] row = new JavaDouble[inputSize[1]];\n          for (int j = 0; j &lt; inputSize[1]; j++)\n          {\n               row[j] = (JavaDouble) inputArray[i][j];\n          }\n     }\n\n     return res;\n}\n</code></pre>\n"},{"answers":[{"comments":[{"comment_id":92989139,"body":"Ok I get it. But wouldn&#39;t it be better to save the data as org.json.JSONObject then? This way I wouldn&#39;t have a problem when my data contains a &#39;,&#39;..."},{"comment_id":92989259,"body":"Well- as I mentioned, you can de/serialise it to/from a string however you want. The only advantage to using a comma separated list is that the SSM web console understands that StringList is a thing, so it is easier to edit in the AWS SSM Console, rather than using json &amp;c which will just appear as string of json."},{"comment_id":92989458,"body":"n.b. for the comma-in-value problem specifically, CSV is a proper format and there are java serialisers for it that will handle the use of quotes &amp;c to escape internal commas as per the spec."}],"answer_id":53044842,"body":"<p>Fundamentally SSM parameters are always strings <a href=\"https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_Parameter.html\" rel=\"noreferrer\">(docs)</a>. Whether they're <em>just</em> a string, or an encrypted string, or a \"list\" which is really a string where you've agreed to use a comma as a separator for items.</p>\n\n<p>Luckily strings are incredibly flexible and the trick will be to marshal your data to/from a string representation.</p>\n\n<p>Probably the most obvious is to use the SSM <code>StringList</code> type and require that the string list is ordered, for example <code>mailInfo = smpt,username,password,defaultToMail</code>. At which point you can do your own marshalling:</p>\n\n<pre><code>GetParameterRequest parameterRequest = new GetParameterRequest().withName(\"mailInfo\").withWithDecryption(false);\nAWSSimpleSystemsManagement ssmclient = AWSSimpleSystemsManagementClientBuilder.defaultClient();\nGetParameterResult parameterResult = ssmclient.getParameter(parameterRequest);\nString mailInfo = parameterResult.getParameter().getValue();\n\nString[] params = mailInfo.split(\",\");\nString stmp = params[0];\nString username = params[1];\nString password = params[2];\nString defaultToMail = params[3];\n</code></pre>\n\n<p>Marshalling a StringList is probably prefered against other options (for example serialising a class and saving the result), as it's user-editable in the interface. You might, however, want to extend the format to be explicit about the ordering, e.g. <code>smtp=smtp_value,username=username_value...</code> and then split each list item by <code>=</code> and assign accordingly.</p>\n"},{"answer_id":76272602,"body":"<p>Checkout GetParametersByPath in java sdk<br />\n[doco:] (<a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/ssm/SsmClient.html#getParametersByPath(software.amazon.awssdk.services.ssm.model.GetParametersByPathRequest)\" rel=\"nofollow noreferrer\">https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/ssm/SsmClient.html#getParametersByPath(software.amazon.awssdk.services.ssm.model.GetParametersByPathRequest)</a>)</p>\n<p>They are specifically designed for grouping together sets of data.</p>\n"}],"last_activity_date":1684329819,"question_id":53044174,"body":"<p>Im using Api Gateway and AWS Lambda and AWS RDS to build an API.\nMy Lambda Function Code is Java.\nCurrently im using the AWS Systems Manager Parameter Store successfully to connect to my Database.\nTherefore I created a parameter called \"connection\" which has the type String and holds my complete connection url.\nIn Lambda functions i can access this parameter successfully this way:</p>\n\n<pre><code>GetParameterRequest parameterRequest = new GetParameterRequest().withName(\"connection\").withWithDecryption(false);\n        AWSSimpleSystemsManagement ssmclient = AWSSimpleSystemsManagementClientBuilder.defaultClient();\n        GetParameterResult parameterResult = ssmclient.getParameter(parameterRequest);\n        String url = parameterResult.getParameter().getValue();\n</code></pre>\n\n<p>Now my question: \nIn other lambda functions I want to send mails. Therefor I want to save the <strong>SMTP-Server</strong> and the <strong>username</strong> and the <strong>password</strong> and a <strong>default sender mail</strong> and so on.</p>\n\n<p>Would it be possible to save this information as Type StringList like Key/Value Pairs (Map)?\nThat something like this could be possible:</p>\n\n<pre><code>    //Get StringList\n    GetParameterRequest parameterRequest = new GetParameterRequest().withName(\"mailInfo\").withWithDecryption(false);\n    AWSSimpleSystemsManagement ssmclient = AWSSimpleSystemsManagementClientBuilder.defaultClient();\n        GetParameterResult parameterResult = ssmclient.getParameter(parameterRequest);\n    //Get values from the list\n    String smtp_server = parameterResult.getParameter(\"smtp\").getValue();\n    String to_mail = parameterResult.getParameter(\"defaultToMail\").getValue();\n    ...\n</code></pre>\n\n<p>Thanks in advance.</p>\n"},{"comments":[{"comment_id":134499534,"body":"What&#39;s the version of spring-kafka ?"}],"answers":[{"answer_id":76272594,"body":"<p>You can add metadata to the <code>OffsetAndMetadata</code> by configuring an <code>OffsetAndMetadataProvider</code>.</p>\n<p><a href=\"https://docs.spring.io/spring-kafka/docs/current/reference/html/#offsetAndMetadataProvider\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-kafka/docs/current/reference/html/#offsetAndMetadataProvider</a></p>\n<p>It is called for each offset that will be committed.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Provider for {@link OffsetAndMetadata}. The provider can be used to have more granularity when creating an\n * {@link OffsetAndMetadata}. The provider is used for both sync and async commits of the offsets.\n *\n * @author Francois Rosiere\n * @since 2.8.5\n * @see org.apache.kafka.clients.consumer.OffsetCommitCallback\n */\npublic interface OffsetAndMetadataProvider {\n\n    /**\n     * Provide an offset and metadata object for the given listener metadata and offset.\n     *\n     * @param listenerMetadata metadata associated to a listener.\n     * @param offset an offset.\n     * @return an offset and metadata.\n     */\n    OffsetAndMetadata provide(ListenerMetadata listenerMetadata, long offset);\n}\n</code></pre>\n"}],"last_activity_date":1684329783,"question_id":76267842,"body":"<p>I have a spring kafka based listener that receives a batch, processes and then manually acknowledges it as in the code below:</p>\n<pre><code>    @KafkaListener(topics = my_topic)\n    public void consume(@Payload List&lt;String&gt; messages,\n                        @Header(KafkaHeaders.ACKNOWLEDGMENT) Acknowledgment acknowledgment) {\n    for (String message: messages) {\n         // process each message\n    }\n    // Ideally the timer will record start time here\n    acknowledgement.acknowledge();\n\n</code></pre>\n<p>My config class has the commit callback logic. I would like to record a timer for the time between when the acknowledge is called and when the callback is received.</p>\n<pre><code>    @Bean\n    public ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; kafkaListenerContainerFactory() {\n\n        log.info(&quot;Creating kafka listener factory&quot;);\n        ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory\n                = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n        factory.setConsumerFactory(consumerFactory());\n        factory.setBatchListener(true);\n        factory.getContainerProperties().setSyncCommits(false);     \n        factory.getContainerProperties()\n                .setAckMode(ContainerProperties.AckMode.MANUAL_IMMEDIATE);\n        // More config\n        factory.getContainerProperties().setCommitCallback((map, ex) -&gt; {\n        // Ideally the end time will be recorded here and timer metric published.\n            if (ex == null) {\n                log.info(&quot;Successful commit for {}&quot;, map);\n            } else {\n                log.error(&quot;Commit failed for {} with exception: {}&quot;, map, ex.getMessage());\n            }\n        });\n    }\n\n</code></pre>\n<p>How can I do it with spring kafka? The acknowledge method doesn't let me pass any values to refer in the callback.</p>\n"},{"comments":[{"comment_id":128977636,"body":"By the way, both <code>Date</code> classes bundled with Java are terribly flawed by poor design. They were years ago supplanted by the modern <i>java.time</i> classes defined in JSR 310."}],"answers":[{"answer_id":76271911,"body":"<p>Define <code>typeMappings</code> as below, instead:</p>\n<pre><code>&lt;typeMappings&gt;\n    &lt;mapping&gt;DateTime=Date&lt;/mapping&gt;\n    &lt;mapping&gt;Date=Date&lt;/mapping&gt;\n&lt;/typeMappings&gt;\n</code></pre>\n<p>This worked with <code>typescript-angular</code> generator, at least.</p>\n"}],"last_activity_date":1684329727,"question_id":73025534,"body":"<p>I am having trouble generating the client code with the right type mapping. My client is broken because fields of type <code>date</code> are generated as <code>string</code> :</p>\n<pre><code>//Server code (Java)\n@ApiModel(description = &quot;ContractExtensionDto&quot;)\n@Data\n@NoArgsConstructor\npublic class ContractExtensionDto {\n    @NotNull\n    protected Integer id;\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = PatternConfig.DATE_TIME_FORMAT)\n    protected Date dateStart;\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = PatternConfig.DATE_TIME_FORMAT)\n    protected Date dateEnd;\n    //omitted code\n}\n\n//Generated client code (Typescript)\nexport interface ContractExtensionDto { \n    id: number;\n    dateStart?: string;\n    dateEnd?: string;\n    //omitted code\n} \n</code></pre>\n<p>In my pom.xml I have added both <code>typeMappings</code> and <code>importMappings</code> :</p>\n<pre><code>&lt;plugin&gt;\n        &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\n        &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;6.0.0&lt;/version&gt;\n        &lt;executions&gt;\n            &lt;execution&gt;\n                &lt;goals&gt;\n                    &lt;goal&gt;generate&lt;/goal&gt;\n                &lt;/goals&gt;\n                &lt;configuration&gt;\n                    &lt;inputSpec&gt;${project.build.directory}/classes/swagger/swagger.json&lt;/inputSpec&gt;\n                    &lt;generatorName&gt;typescript-angular&lt;/generatorName&gt;\n                    &lt;output&gt;frontend/src/app/services/rest-api&lt;/output&gt;\n                    &lt;skipValidateSpec&gt;true&lt;/skipValidateSpec&gt;\n                    &lt;configOptions&gt;\n                        &lt;ngVersion&gt;10.2.5&lt;/ngVersion&gt;\n                        &lt;dateLibrary&gt;java8&lt;/dateLibrary&gt;\n                    &lt;/configOptions&gt;\n                    &lt;typeMappings&gt;Date=Date&lt;/typeMappings&gt;\n                    &lt;importMappings&gt;Date=Date&lt;/importMappings&gt;\n                    &lt;!-- I have tried this as well but in vain --&gt;\n                    &lt;!-- \n                      &lt;typeMappings&gt;DateTime=Date&lt;/typeMappings&gt;\n                      &lt;importMappings&gt;DateTime=Date&lt;/importMappings&gt;\n                    --&gt;\n                &lt;/configuration&gt;\n            &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n</code></pre>\n<p>but still the client <code>date</code> fields are generated as <code>string</code> typed.</p>\n"},{"comments":[{"comment_id":134500899,"body":"the issue is maven dependency. i have changed spark-core_2.13 to spark-core_2.12 it&#39;s working fine. but getting another error <code>Caused by: java.net.UnknownHostException: host.docker.internal</code>"},{"comment_id":134502232,"body":"1) You should add provided Maven scope to Spark dependencies 2) If your code isn&#39;t running in a container, that&#39;s an expected error"},{"comment_id":134538970,"body":"Thanks. but the issue is resolved.just added <code>spark.driver.host</code> and <code>spark.driver.bindAddress</code> in SparkSession."},{"comment_id":134538976,"body":"and one more thing don&#39;t use row.toString(). it will cause run time."},{"comment_id":134540956,"body":"You should use dataset.show() rather than a foreach loop"}],"last_activity_date":1684329421,"question_id":76270607,"body":"<p>I have one master node and two worker nodes. all nodes are running same version spark 3.4.0. Installed Hadoop 3.3.5 cluster on same. Spring boot dependencies are.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n    &lt;artifactId&gt;spark-core_2.13&lt;/artifactId&gt;\n    &lt;version&gt;3.4.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n    &lt;artifactId&gt;spark-sql_2.13&lt;/artifactId&gt;\n    &lt;version&gt;3.4.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n    &lt;artifactId&gt;spark-streaming_2.13&lt;/artifactId&gt;\n    &lt;version&gt;3.4.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Java code is.</p>\n<pre><code>SparkConf sparkConf = new SparkConf()\n        .setAppName(&quot;gbh&quot;)\n        .setMaster(sparkUrl)\n        .set(&quot;fs.defaultFS&quot;,hdfsUrl)\n\nSparkSession sparkSession =     SparkSession.builder().master(sparkUrl).config(sparkConf).getOrCreate();\nSparkContext sparkContext = sparkSession.sparkContext();\nsparkContext.hadoopConfiguration().set(&quot;fs.defaultFS&quot;, hdfsUrl);\nsparkContext.hadoopConfiguration().set(&quot;HADOOP_USER_NAME&quot;, username);\nFileSystem fs = FileSystem.get(sparkContext.hadoopConfiguration());\nDataset&lt;Row&gt; resul = sparkSession.read().option(&quot;header&quot;, true).option(&quot;delimiter&quot;, &quot;,&quot;).csv(&quot;hdfs:///user/root/address.csv&quot;);\nresul.createOrReplaceTempView(&quot;Address&quot;);\nDataset&lt;Row&gt; dataset = sparkSession.sql(&quot;SELECT COUNT(*) FROM Address&quot;);\ndataset.foreach(row -&gt; {\nlogger.info(&quot;row data =  &quot;+row.toString());\n});\n</code></pre>\n<p>I have tested in spark shell using pyspark --master spark://165.300.90.17:7077 its working same code with Scala. but in java i am getting below error</p>\n<p><code>org.apache.spark.SparkException: Exception thrown in awaitResult:  Caused by: java.lang.RuntimeException: java.io.InvalidClassException: org.apache.spark.rpc.netty.RpcEndpointVerifier$CheckExistence; local class incompatible: stream classdesc serialVersionUID = 5378738997755484868, local class serialVersionUID = 7789290765573734431</code></p>\n<p>Can you please guide me to resolve this issue. Thanks.</p>\n<p>And also How can use Spark Connect for java.</p>\n"},{"comments":[{"comment_id":134495450,"body":"You forgot to append that stack trace. On which version of Java are you running JBoss?"},{"comment_id":134502551,"body":"java version=19 and jre system library=javaSE 1.8"},{"comment_id":134505349,"body":"That package was removed in Java 14, <a href=\"https://docs.oracle.com/en/java/javase/17/migrate/removed-apis.html#GUID-4BB7838C-7F93-4C3B-86AD-28FFE46F736B\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/17/migrate/&hellip;</a> . You should compile against the version you want to run on so you don&#39;t discover these issues at runtime."}],"last_activity_date":1684329307,"question_id":76268151,"body":"<p>I need to add user with credentials. I am using eclipse,Jboss server eap-7.3\nI am using Postman to test Api.\nand I want to add secuirty constraints but all is fine in web.xml produce 403 forbiden untill i added\n<code>&lt;login-config\\&gt;</code>\n<code>&lt;auth-method\\&gt;BASIC\\&lt;/auth-method\\&gt;</code>\n<code>&lt;realm-name\\&gt;ApplicationRealm\\&lt;/realm-name\\&gt;</code>\n<code>&lt;/login-config\\&gt;</code>\nproduce Excption.and I don't know why.\n**here is stack trace after running the server **</p>\n<pre><code>ava.lang.NoClassDefFoundError: java/security/acl/Group\n    at java.base/java.lang.Class.getDeclaredConstructors0(Native Method)\n    at java.base/java.lang.Class.privateGetDeclaredConstructors(Class.java:3429)\n    at java.base/java.lang.Class.getConstructor0(Class.java:3634)\n    at java.base/java.lang.Class.newInstance(Class.java:665)\n    at java.base/javax.security.auth.login.LoginContext.invoke(LoginContext.java:733)\n    at java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:679)\n    at java.base/javax.security.auth.login.LoginContext$4.run(LoginContext.java:677)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\n    at java.base/javax.security.auth.login.LoginContext.invokePriv(LoginContext.java:677)\n    at java.base/javax.security.auth.login.LoginContext.login(LoginContext.java:587)\n    at org.picketbox//org.jboss.security.authentication.JBossCachedAuthenticationManager.defaultLogin(JBossCachedAuthenticationManager.java:406)\n    at org.picketbox//org.jboss.security.authentication.JBossCachedAuthenticationManager.proceedWithJaasLogin(JBossCachedAuthenticationManager.java:345)\n    at org.picketbox//org.jboss.security.authentication.JBossCachedAuthenticationManager.authenticate(JBossCachedAuthenticationManager.java:333)\n    at org.picketbox//org.jboss.security.authentication.JBossCachedAuthenticationManager.isValid(JBossCachedAuthenticationManager.java:146)\n    at org.wildfly.extension.undertow@7.3.0.GA-redhat-00004//org.wildfly.extension.undertow.security.JAASIdentityManagerImpl.verifyCredential(JAASIdentityManagerImpl.java:123)\n    at org.wildfly.extension.undertow@7.3.0.GA-redhat-00004//org.wildfly.extension.undertow.security.JAASIdentityManagerImpl.verify(JAASIdentityManagerImpl.java:94)\n    at io.undertow.core@2.0.28.SP1-redhat-00001//io.undertow.security.impl.BasicAuthenticationMechanism.authenticate(BasicAuthenticationMechanism.java:167)\n    at io.undertow.core@2.0.28.SP1-redhat-00001//io.undertow.security.impl.SecurityContextImpl$AuthAttempter.transition(SecurityContextImpl.java:245)\n    at io.undertow.core@2.0.28.SP1-redhat-00001//io.undertow.security.impl.SecurityContextImpl$AuthAttempter.transition(SecurityContextImpl.java:268)\n    at io.undertow.core@2.0.28.SP1-redhat-00001//io.undertow.security.impl.SecurityContextImpl$AuthAttempter.access$100(SecurityContextImpl.java:231)\n    at io.undertow.core@2.0.28.SP1-redhat-00001//io.undertow.security.impl.SecurityContextImpl.attemptAuthentication(SecurityContextImpl.java:125)\n    at io.undertow.core@2.0.28.SP1-redhat-00001//io.undertow.security.impl.SecurityContextImpl.authTransition(SecurityContextImpl.java:99)\n    at io.undertow.core@2.0.28.SP1-redhat-00001//io.undertow.security.impl.SecurityContextImpl.authenticate(SecurityContextImpl.java:92)\n    at io.undertow.servlet@2.0.28.SP1-redhat-00001//io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:55)\n    at io.undertow.core@2.0.28.SP1-redhat-00001//io.undertow.server.handlers.DisableCacheHandler.handleRequest(DisableCacheHandler.java:33)\n    at io.undertow.core@2.0.28.SP1-redhat-00001//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.core@2.0.28.SP1-redhat-00001//io.undertow.security.handlers.AuthenticationConstraintHandler.handleRequest(AuthenticationConstraintHandler.java:53)\n    at io.undertow.core@2.0.28.SP1-redhat-00001//io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\n    at io.undertow.servlet@2.0.28.SP1-redhat-00001//io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\n    at io.undertow.servlet@2.0.28.SP1-redhat-00001//io.undertow.servlet.handlers.security.ServletSecurityConstraintHandler.handleRequest(ServletSecurityConstraintHandler.java:59)\n    at io.undertow.core@2.0.28.SP1-redhat-00001//io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)\n    at io.undertow.servlet@2.0.28.SP1-redhat-00001//io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)\n    at io.undertow.core@2.0.28.SP1-redhat-00001//io.undertow.security.handlers.NotificationReceiverHandler.handleRequest(NotificationReceiverHandler.java:50)\n    at io.undertow.core@2.0.28.SP1-redhat-00001//io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\n    at io.undertow.core@2.0.28.SP1-redhat-00001//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at org.wildfly.extension.undertow@7.3.0.GA-redhat-00004//org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\n    at io.undertow.core@2.0.28.SP1-redhat-00001//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at org.wildfly.extension.undertow@7.3.0.GA-redhat-00004//org.wildfly.extension.undertow.deployment.GlobalRequestControllerHandler.handleRequest(GlobalRequestControllerHandler.java:68)\n    at io.undertow.core@2.0.28.SP1-redhat-00001//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.servlet@2.0.28.SP1-redhat-00001//io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:269)\n    at io.undertow.servlet@2.0.28.SP1-redhat-00001//io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:78)\n    at io.undertow.servlet@2.0.28.SP1-redhat-00001//io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:133)\n    at io.undertow.servlet@2.0.28.SP1-redhat-00001//io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:130)\n    at io.undertow.servlet@2.0.28.SP1-redhat-00001//io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)\n    at io.undertow.servlet@2.0.28.SP1-redhat-00001//io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\n    at org.wildfly.extension.undertow@7.3.0.GA-redhat-00004//org.wildfly.extension.undertow.security.SecurityContextThreadSetupAction.lambda$create$0(SecurityContextThreadSetupAction.java:105)\n    at org.wildfly.extension.undertow@7.3.0.GA-redhat-00004//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1504)\n    at org.wildfly.extension.undertow@7.3.0.GA-redhat-00004//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1504)\n    at org.wildfly.extension.undertow@7.3.0.GA-redhat-00004//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1504)\n    at org.wildfly.extension.undertow@7.3.0.GA-redhat-00004//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1504)\n    at org.wildfly.extension.undertow@7.3.0.GA-redhat-00004//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1504)\n    at io.undertow.servlet@2.0.28.SP1-redhat-00001//io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:249)\n    at io.undertow.servlet@2.0.28.SP1-redhat-00001//io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:78)\n    at io.undertow.servlet@2.0.28.SP1-redhat-00001//io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:99)\n    at io.undertow.core@2.0.28.SP1-redhat-00001//io.undertow.server.Connectors.executeRootHandler(Connectors.java:376)\n    at io.undertow.core@2.0.28.SP1-redhat-00001//io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:830)\n    at org.jboss.threads@2.3.3.Final-redhat-00001//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n    at org.jboss.threads@2.3.3.Final-redhat-00001//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1982)\n    at org.jboss.threads@2.3.3.Final-redhat-00001//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\n    at org.jboss.threads@2.3.3.Final-redhat-00001//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\n    at java.base/java.lang.Thread.run(Thread.java:1589)\nCaused by: java.lang.ClassNotFoundException: java.security.acl.Group from [Module &quot;org.picketbox&quot; from local module loader @7ae42ce3 (finder: local module finder @4f5991f6 (roots: D:\\Programs\\6)java\\jboss-eap-7.3.0\\jboss-eap-7.3\\modules,D:\\Programs\\6)java\\jboss-eap-7.3.0\\jboss-eap-7.3\\modules\\system\\layers\\base))]\n    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:255)\n    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:410)\n    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)\n    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:116)\n    ... 61 more\n</code></pre>\n"},{"comments":[{"comment_id":134502314,"body":"AWS Lambda is irrelevant here. You can&#39;t directly call a JavaScript function from Java.  You&#39;d need to exec node.js to parse and run the JS code but that&#39;s a bad idea generally. If you aren&#39;t able to write both pieces of code in the same programming language then consider making one of them an API or separately-invoked Lambda function."}],"last_activity_date":1684329252,"question_id":76270718,"body":"<p>I created one Lambda. In that lambda, I need to add one existing Layer. The Lambda is in java and lambda layer is in NodeJS. How can I call a function from the layer in the lambda?</p>\n<p>I am able to call if both the runtime environment is NodeJS.</p>\n<pre><code>import createRequire  from '/opt/index.js';\n\nexport const handler = async(event) =&gt; {\n    let t = await createRequire.f1(event);\n    const response = {\n        statusCode: 200,\n        body: t,\n    };\n    return await createRequire.f2(response);\n};\n\n</code></pre>\n<p>I want to call the f1() and f2() in my Java Lambda.</p>\n"},{"comments":[{"comment_id":134492460,"body":"Could be that the iterator is associated with a Mongo connection/cursor.  When you return it, there&#39;s no guarantee that the caller will know to close the connection.  Maybe you can do better by instantiating the iterator and closing it in a single method scope instead of returning it.  Load the Documents into a Java List&lt;Document&gt;, close the iterator/connection, and return the List.  Just like JDBC - you don&#39;t keep database connections open."},{"comment_id":134493271,"body":"Please provide a complete example. The given example does not compile and the type of <code>docs</code> is unknown. You get the <i>Potential resource leak</i> warning because you have an <i>AutoCloseable</i> and it&#39;s unknown whether it is closed or not. Better refactor your code to use try-with-resources, e.g. by providing a <i>forEachDoc</i> method instead of a method that returns an <i>Iterator</i>."},{"comment_id":134494299,"body":"Does <code>return docs.map(doc -&gt; doc.getString(&quot;url&quot;)).iterator();</code> generate the same warning?"},{"comment_id":134497398,"body":"You might refactor your code to have a method <code>void forEachErrorUrl(int pCrawlId, Consumer&lt;String&gt; action)</code> that does not return the iterator, but instead calls <code>forEachRemaining(action)</code> on the iterator inside a <code>try (Iterator&lt;Document&gt; it = docs.iterator()) { ... }</code>. This way the <code>MongoCursor</code> is guaranteed to be closed."}],"answers":[{"answer_id":76272508,"body":"<p>Since your iterator extends <code>Closable</code> interface, it requires closing when there are no more elements. So you have 2 options:</p>\n<ul>\n<li>Surround iterator actions with try-with-resources block</li>\n<li>Use <code>cursor.close()</code> in case <code>cursor.hasNext()</code> is false.</li>\n</ul>\n"}],"last_activity_date":1684329175,"question_id":76266461,"body":"<p>The code below generates warning in eclipse:</p>\n<pre><code>@Override\npublic Iterator&lt;String&gt; getErrorUlrs(int pCrawlId) {\n    String collectionName = &quot;collectionName&quot;;\n    // mongoDB is of type com.mongodb.client.MongoDatabase\n    MongoCollection&lt;Document&gt; c = mongoDB.getCollection(collectionName);\n\n    Bson filter = Filters.not(eq(&quot;exploreStatus&quot;, &quot;OK&quot;));\n    Bson projection = fields(include(&quot;url&quot;), excludeId());\n    FindIterable&lt;Document&gt; docs = c.find(filter).projection(projection).batchSize(1000);\n    Iterator&lt;Document&gt; it = docs.iterator();\n\n    return new Iterator&lt;String&gt;() {\n\n        @Override\n        public boolean hasNext() {\n            return it.hasNext();\n        }\n\n        @Override\n        public String next() {\n            Document doc = it.next();\n            return doc.getString(&quot;url&quot;);\n        }\n    };\n\n}\n</code></pre>\n<p>The warning message is : Potential resource leak: 'it' may not be closed at this location</p>\n<p>The initial iterator is returned by mongo java API. The reason why I'm coding this is that I don't want to expose the mongo API.</p>\n<p>Why does eclipse display this warning ? How to get rid of it ?</p>\n<p><strong>EDIT</strong></p>\n<p>I've posted the complete method.\nAs mentioned in first answers, the iterator is of type MongoCursor and I guess the leak comes from here as this class implements closable.</p>\n"},{"answers":[{"answer_id":72611521,"body":"<p>Add a no-argument constructor to your class and make it <code>Serializable</code></p>\n"},{"answer_id":73836674,"body":"<p>I had the same issue. Turns out, as I was sending messages from a test JS script, Stomp.js didn't automatically serialize the object passed as the message body to JSON, what it did instead was just cast it to a string and send <code>&quot;[Object object]&quot;</code> as payload, which Jackson interpreted as an array because of the <code>[</code> in front, and immediately failed because it didn't expect to receive an array.</p>\n<pre class=\"lang-js prettyprint-override\"><code>client.publish({\n  destination: '/app/publish',\n  body: {\n    id: 0,\n    content: 'I am very frustrated',\n    sender: 'test_user',\n    chat: 0\n  }\n}); // =&gt; &quot;[Object object]&quot;\n</code></pre>\n<p>Explicitly serializing the object manually before passing it as payload did the thing:</p>\n<pre class=\"lang-js prettyprint-override\"><code>client.publish({\n  destination: '/app/publish',\n  body: JSON.stringify({\n    id: 0,\n    content: 'I am very frustrated',\n    sender: 'test_user',\n    chat: 0\n  })\n}); // =&gt; {id: 0, ...}\n</code></pre>\n<p>The issue was Javascript all along.</p>\n"}],"last_activity_date":1684328971,"question_id":72609610,"body":"<p>Facing a JSON parse issue when trying to include array in my postman request:</p>\n<pre><code>{\n    &quot;id&quot; : &quot;0&quot;,\n    &quot;number&quot;:[&quot;2222&quot;, &quot;3333&quot;]\n}\n</code></pre>\n<p>pojo:</p>\n<pre><code>public class User {\n    @Getter @Setter private String      id;\n    @Getter @Setter  private String[]   number;\n\n    //i've also tried these:\n    @Getter @Setter  private List&lt;String&gt;   number;\n    @Getter @Setter  private ArrayList&lt;String&gt;  number;\n}\n</code></pre>\n<p>Controller:</p>\n<pre><code>@PostMapping(&quot;/user&quot;)\n    public ResponseEntity&lt;Object&gt; getUser(@RequestBody(required=true)User user) {\n</code></pre>\n<p>Trace:</p>\n<pre><code>  &quot;trace&quot;: &quot;org.springframework.http.converter.HttpMessageNotReadableException: \nJSON parse error: Cannot deserialize value of type `java.lang.String` from Array value (token `JsonToken.START_ARRAY`); \nnested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException: \nCannot deserialize value of type `java.lang.String` from Array value (token `JsonToken.START_ARRAY`)\n at [Source: (org.springframework.util.StreamUtils$NonClosingInputStream); line: 3, column: 13] \n</code></pre>\n"},{"comments":[{"comment_id":134498655,"body":"Don’t create two classes with 27 identical properties in the first place."},{"comment_id":134499054,"body":"If your use case is actually copying from one class to another, where both classes have similar structure (e.g. business object to/from DTO), you may want to check out something like mapstruct that does it with code generation."},{"comment_id":134501055,"body":"I have to create 27 fields as one is for dto and the other is for proto, I need to transform data, Microservice changes"}],"answers":[{"comments":[{"comment_id":134499016,"body":"To add to the answer, you can even define <code>setFieldIfNotEmpty</code> as a static utility method and use in throughout the project, instead of it being a private member of the specific class."},{"comment_id":134500251,"body":"Good idea, will do that"}],"answer_id":76269754,"body":"<p>We can use this method using consumer</p>\n<pre><code>import java.util.function.Consumer;\n\n    private &lt;T&gt; void setFieldIfNotEmpty(Consumer&lt;T&gt; setter, T value) {\n        if (ObjectUtils.isNotEmpty(value)) {\n            setter.accept(value);\n        }\n    }\n\n</code></pre>\n<p>Then use the above method for null and empty check as well</p>\n<pre><code>\n        setFieldIfNotEmpty(builder::setSettingType, updateRequest.getSettingType());\n\n        setFieldIfNotEmpty(builder::setSettingCode, updateRequest.getSettingCode());\n\n        builder.setStartToday(updateRequest.getStartToday());\n\n        setFieldIfNotEmpty(builder::setExecutionEndDate, updateRequest.getExecutionEndDate());\n\n</code></pre>\n<p>Like this</p>\n"},{"comments":[{"comment_id":134499252,"body":"I can not change the data type. it&#39;s String settingType;"},{"comment_id":134499853,"body":"Same approach still works. I&#39;ve updated the answer accordingly."}],"answer_id":76269835,"body":"<p>One approach is to change methods that might return null values to instead return Optional types, e.g.:</p>\n<pre><code>Optional&lt;String&gt; getSettingType() {\n    return Optional.ofNullable(settingType);\n}\n</code></pre>\n<p>This has the advantage of being self-documenting (the fact that it might return no value is now explicit), and also means you can replace your code with something like this:</p>\n<pre><code>updateRequest.getSettingType().ifPresent(builder::setSettingType);\nupdateRequest.getSettingCode().ifPresent(builder::setSettingCode);\nupdateRequest.getExecutionEndDate().ifPresent(builder::setExecutionEndDate);\nupdateRequest.getStartToday().ifPresent(builder::setStartToday);\n</code></pre>\n<p>THis approach does mean creating short-lived Optional objects, so whether it's sufficiently &quot;efficient&quot; is something you would need to decide.</p>\n"},{"answer_id":76272257,"body":"<p>1.) It would be better to initialise some value in the constructor, So that it wouldn't got the null value for any fields.</p>\n<p>2.) Java 8 optional would be more than beneficial for null values check.</p>\n"}],"last_activity_date":1684328765,"question_id":76269753,"body":"<p>I need to add null and empty checks to each of the 27 fields in my DTO class, and I'm searching for the most effective method to accomplish it. Can anyone suggest any ideas?</p>\n<pre><code>private String settingType;\nprivate String settingCode;\nprivate String executionEndDate;\nprivate String startToday;\n\n</code></pre>\n<pre><code>\n        if (!ObjectUtils.isEmpty(updateRequest.getSettingType())) {\n            builder.setSettingType(updateRequest.getSettingType());\n        }\n        if (!ObjectUtils.isEmpty(updateRequest.getSettingCode())) {\n            builder.setSettingCode(updateRequest.getSettingCode());\n        }\n        if (!ObjectUtils.isEmpty(updateRequest.getExecutionEndDate())) {\n            builder.setExecutionEndDate(updateRequest.getExecutionEndDate());\n        }\n        if (!ObjectUtils.isEmpty(updateRequest.isStartToday())) {\n            builder.setStartToday(updateRequest.getStartToday());\n        }\n\n</code></pre>\n"},{"comments":[{"comment_id":134502009,"body":"Maybe try <a href=\"https://ru.stackoverflow.com\">Stack Overflow на русском</a>"}],"last_activity_date":1684328234,"question_id":76272375,"body":"<p>Я хочу вывести числа из массива, которые будут кратны числу которое вводит пользователь.</p>\n<p>В выводе получаю некорректное число.Помогите!</p>\n<p>э    System.out.println(&quot;Дан массив, длинной 5.&quot;);</p>\n<pre><code>    int[] number3 = new int[5];\n    System.out.println(Arrays.toString(number3));\n\n    System.out.println(&quot;Задайте свои значения для массива:&quot;);\n    System.out.println(&quot;&quot;);\n    System.out.println(&quot;Введите первое число:&quot;);\n    number3[0] = sc.nextInt();\n    System.out.println(Arrays.toString(number3));\n    System.out.println(&quot;Введите второе число:&quot;);\n    number3[1] = sc.nextInt();\n    System.out.println(Arrays.toString(number3));\n    System.out.println(&quot;Введите третье число:&quot;);\n    number3[2] = sc.nextInt();\n    System.out.println(Arrays.toString(number3));\n    System.out.println(&quot;Введите четвертое число:&quot;);\n    number3[3] = sc.nextInt();\n    System.out.println(Arrays.toString(number3));\n    System.out.println(&quot;Введите пятое число:&quot;);\n    number3[4] = sc.nextInt();\n    System.out.println(Arrays.toString(number3));\n\n    System.out.println(&quot;Введите число кратному которому вы хотите получить числа из массива с числами, которые вы указали:&quot;);\n\n    /*int personNumber = sc.nextInt();\n    int correctNumber = 0;\n    for (int x = 0; x &lt; number3.length; x++) {\n        if (number3[x] % personNumber) {\n            correctNumber = x;\n        System.out.println(number3[x]);\n\n    */\n\n    int personNumber = sc.nextInt();\n    int correctNumbers = 0;\n    for (int i = 0; i &lt;number3.length; i++) {\n        if (i % personNumber == 0) {\n            correctNumbers++;\n            System.out.print(correctNumbers);\n        }\n</code></pre>\n"},{"comments":[{"comment_id":12350453,"body":"without defining result you can&#39;t write any action class according Struts2 architecture. Does you ajax doesn&#39;t need any response from action class."},{"comment_id":12350519,"body":"thanks @MohanaRaoSV  yaa my ajax need response from action class. all response from action is a ajax responsetext which i have to show in the same page."},{"comment_id":12350661,"body":"@neerajbharti: i do not see a reason of not specifying result in your config as in S2 results have 2 distinct meanings,first it provides a logical name and Second, the result element provides a result type.Even in your Ajax case your execute method needs to tell if it executed successful or any other issue.In All the request flow work like this and i do not see any benefits of not specifying the result, even <code>&lt;result&gt;mytest.jsp&lt;&#47;result&gt;</code> will do work for you."},{"comment_id":12350733,"body":"@UmeshAwasthi when i use result in config as s2 then the response of ajax contains the jsp file content not my action class response. i have to show my action class response on the same page."},{"comment_id":12350769,"body":"@neerajbharti: are you sending back JSON data back to UI? In that case i need to tell S2 that my result will be JSON data and without which i do not see a way to handle this.In short be it a AJAX call or any other normal call, we need to tell that to which view the response should bind.that&#39;s said this is the way request-response is working under the hood"},{"comment_id":12350782,"body":"@UmeshAwasthi yaaa i m sending back JSON data back to UI"},{"comment_id":12350860,"body":"but how to tell s2 config that my data is a JSON data and how to bind response"},{"comment_id":12350925,"body":"@neerajbharti: S2 comes with a JSON plugin which will convert the data to JSON from your action class and will send data back as JSON format to your action class.<a href=\"http://struts.apache.org/2.2.3/docs/json-plugin.html\" rel=\"nofollow noreferrer\">struts.apache.org/2.2.3/docs/json-plugin.html</a>"},{"comment_id":12351233,"body":"thanks @UmeshAwasthi i am working on it if i face problem i will disturn u again."}],"answers":[{"comments":[{"comment_id":12350605,"body":"thanks @Umer hayet but it shows an error action without any result"},{"comment_id":12350640,"body":"yaaa it shows an error &quot; Could not find action or result  No result defined for action com.mmi.webInterface.ShowResultAction and result success &quot;"},{"comment_id":12350667,"body":"@neerajbharti It is not showing any error and working fine here. I am using struts 2.2.3."},{"comment_id":12350758,"body":"but in my case it shows an error .......i dont know y it shows an error? i m also using struts 2.2.3"}],"answer_id":9715308,"body":"<p>Yes you can write it like :</p>\n\n<pre><code>&lt;action name=\"ActionName\" class=\"ClassName\" method=\"methodName\" /&gt;\n</code></pre>\n\n<p>We are using such actions in our application, where there is no need to display a page as a result. It works fine.</p>\n"},{"answer_id":20195039,"body":"<p>Specify dummy locations. For example,</p>\n\n<pre><code>&lt;action name=\"showResult\" class=\"com.mmi.webInterface.ShowResultAction\"&gt;\n    &lt;result name=\"success\"&gt;dummy&lt;/result&gt;\n&lt;/action&gt;\n</code></pre>\n"},{"answer_id":21067606,"body":"<p>this should work.</p>\n\n<p>&lt;action name=\"actionName\" class=\"ClassName\" method=\"methodName\">\n&lt;/action></p>\n\n<p>The method methodName should be of type void else you'd get an error saying that no result is defined for this action.</p>\n\n<p>hope it helps.</p>\n"},{"answer_id":76272353,"body":"<p>You can define an action without specifying a result.</p>\n<pre><code>&lt;action name=&quot;showResult&quot; class=&quot;com.mmi.webInterface.ShowResultAction&quot; /&gt;\n</code></pre>\n<p>Then, make your action return null and the result will be ignored.</p>\n<pre><code>class ShowResultAction extends ActionSupport {\n\n    @Override\n    public String execute() {\n    \n       // some code\n    \n       return null;\n    }   \n}\n</code></pre>\n"}],"last_activity_date":1684328062,"question_id":9715092,"body":"<p>Is it possible to write any action without any result in struts2 config file ? like</p>\n\n<pre><code> &lt; action name=\"showResult\" class=\"com.mmi.webInterface.ShowResultAction\"/&gt;\n</code></pre>\n\n<p>but in stuts1.x it is possible to write any action without any forward result. like</p>\n\n<pre><code>&lt; action path=\"/JsonResponse\" type=\"com.mmi.webInterface.JsonResponseAction\"\n  validate=\"false\"/&gt;\n</code></pre>\n\n<p>my question is that how can i write any action without any result in struts 2 config file?\nbecause i have to use Ajax on the same page so no need of any result in action.</p>\n"},{"comments":[{"comment_id":134502137,"body":"Spring Boot validation is already doing exactly what you are doig it is using hibernate validator for this. If you want custom messages provide them (based on the message codes that are generated). There is no such thing as Spring Boot validation it just delegates to the Java Validation API (and thus the Hibernate Validation). So effectivly if you could disable it, you would do exactl the same as Spring already does)."},{"comment_id":134502141,"body":"Lets break your problem into two parts - One is disabling the javax api validations and the second to run custom validations. Lets try to debug first one and fix it - Could you please check if intended bean/class using the property [spring.jpa.properties.javax.persistence.validation.mode] . I would suggest you to debug it in <a href=\"https://mvnrepository.com/artifact/javax.validation/validation-api\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/javax.validation/validation-api</a> . May be open library in javad compiler and do a little postmortem on the library to figure out the exact bean and usage of config you are setting ."},{"comment_id":134502497,"body":"M.Deinum; Yes I understand. The validation it self is not the problem. But SpringBoot returns a generic answer if one or more fields are not valid. Our code is not even executed at this point. The response looks like this: <a href=\"https://gist.github.com/NeXT405/bddb8dafd80eb1803d693928c8d191be#file-response-json\" rel=\"nofollow noreferrer\">Response</a> I think we will remove all @Valid annotations from the generated code. This way we can validate it ourselves and implement our own response. The response for validation errors is clearly defined according to company specifications."},{"comment_id":134502578,"body":"Then write your own exception handler which handles vaidation errors and returns the response you want. What you see is the error translation from the default error handling, replace that with what you need. Don&#39;t disable the validation and do everyting in your controller."}],"last_activity_date":1684327911,"question_id":76272330,"body":"<p>We are using SpringBoot version 2.7.9, in which I am trying to switch off the automatic validation of the DTOs. However, this does not seem to work correctly in my case.\nWe have defined the whole interface in OpenApi 3 and let it generate the DTOs and the interfaces for Spring. This all works very well and as desired. So far so good.</p>\n<p>Now we have defined the following max and min values in the specification:</p>\n<pre><code>UserDTO1:\n  type: object\n  properties:\n    ia_subject:\n      type: string\n      description: Subject of the user.\n      example: c2f3fb56-4194-4af6-a007-9fe403a2abeb\n      maxLength: 36\n      minLength: 36\n    email:\n      type: string\n      example: john.doe@example.com\n      maxLength: 255\n    firstname:\n      type: string\n      example: John\n      maxLength: 255\n    lastname:\n      type: string\n      example: Doe\n      maxLength: 255\n    accounts:\n      type: array\n      items:\n        &quot;$ref&quot;: &quot;#/components/schemas/AccountDTO1&quot;\n</code></pre>\n<p>This generates the following annotations on the DTO in Java:</p>\n<pre><code>...\nimport javax.validation.constraints.Size;\n...\n/**\n  * Subject of the user.\n  * @return iaSubject\n*/\n@Size(min = 36, max = 36) \npublic String getIaSubject() {\n  return iaSubject;\n}\n</code></pre>\n<p>This also works without any problems. The fields in the body / in the DTOs are validated correctly and Spring returns a generic error.\nNow I don't want this Spring error, but our own implementation. Spring should not care whether the fields are valid according to the specification or not. I want to switch this off and validate the DTOs myself like with the Hibernate Validator:</p>\n<pre><code>...\nValidatorFactory factory = Validation.buildDefaultValidatorFactory();\nValidator validator = factory.getValidator();\nSet&lt;ConstraintViolation&lt;Object&gt;&gt; validate = validator.validate(dto);\n....\n</code></pre>\n<p>The problem now is, I can't disable SpringBoot validation. I found the following questions and properties:</p>\n<p><a href=\"https://stackoverflow.com/questions/26764532/how-to-disable-hibernate-validation-in-a-spring-boot-project\">How to disable Hibernate validation in a Spring Boot project</a></p>\n<p>I set:</p>\n<p><code>spring.jpa.properties.javax.persistence.validation.mode=none</code></p>\n<p>in my application.properties but it is still validated and the generic error response from spring remains. (All other settings in application.properties work without problems.)</p>\n<p>Actually it is not the JPA validation but a kind of DTO validation.</p>\n<ul>\n<li>Is my approach a good idea?</li>\n<li>Is there a better solution?\n<ul>\n<li>(I don't want to use filters because at this point the body is still a string and has not yet been processed by Jackson).</li>\n</ul>\n</li>\n</ul>\n<p>We found out that we can remove the @Valid annotations in the generated interface. This way, the DTO is no longer validated and Spring no longer returns the generic answer. But we would have to do this with a post-processing script or in bash after generation.</p>\n<p>Unfortunately I can't find any good and further information on this.</p>\n<p>Can someone point me in the right direction?</p>\n<p>Thank you and kind regards.</p>\n"},{"comments":[{"comment_id":53840534,"body":"The key you use for caching and eviction should match. By default it uses the method arguments as key and return value as value for caching. To use eviction the key should match, so you should use (indeed) a specific <code>key</code> attribute to point to the exact value. Also make sure that the key used for caching is actually having a correct <code>hashcode</code> and <code>equals</code> implementation. <code>String</code> should have one but is this your actual code or modified code?"},{"comment_id":53850851,"body":"this is my actual code, I added hashCode and equals but no change. I tried the same eviction on a different method (see code update) and that one works, but not on the save method."}],"answers":[{"answer_id":76272228,"body":"<p>As you noticed, you cannot use the argument's name in SPEL for repository interfaces (I don't know the reason TBH). The only way to do that I found is by using <code>#pX</code> where <code>X</code> is the number of argument. So in the above case:</p>\n<pre><code>@Override\n@CacheEvict(value = &quot;rest_respond_values&quot;, condition=&quot;#p0 != null&quot;)\n&lt;S extends UnStandardizedValue&gt; S save(S unValue);\n</code></pre>\n"}],"last_activity_date":1684327848,"question_id":33002357,"body":"<p>I'm trying to use Spring Cacheable </p>\n\n<pre><code>public interface UnStandardizedValueRepository extends CrudRepository&lt;UnStandardizedValue, Integer&gt; {\n@Cacheable(value = \"rest_respond_values\", unless=\"#result == null\")\nUnStandardizedValue findByValue(String value);\n@Override\n@CacheEvict(value = \"rest_respond_values\", condition=\"#unValue != null\")\n&lt;S extends UnStandardizedValue&gt; S save(S unValue);\n}\n</code></pre>\n\n<p>And all the tries to evict the value when i do \"save\" hasn't worked. If I do it manually (get cachemanager and evict) it works, but not the annotation way.</p>\n\n<pre><code>UnStandardizedValue test = repository.findByValue(\"x 99\");\nAssert.assertNotNull(test);\ntest.setValue(\"y\");\nrepository.save(test);\n//cacheManager.getCache(\"rest_respond_values\").evict(\"x 99\"); //works!\ntest = null; //just for safety\ntest = repository.findByValue(\"x 99\"); //gets \"y\"\nAssert.assertNull(test); //expected null but was \"y\"\n</code></pre>\n\n<p>It seems like the object I change is the same as the one in the Cache. But when I do \"save\" it should have been evicted, and not been returned by that \"x 99\"</p>\n\n<p>I've tried to change:</p>\n\n<pre><code>    @Override\n    @CacheEvict(value = \"rest_respond_values\", condition=\"#unValue != null\")\n    &lt;S extends UnStandardizedValue&gt; S save(S unValue);\n\n    @Override\n    @CacheEvict(value = \"rest_respond_values\", key=\"#unValue.value\", condition=\"#unValue != null\")\n    &lt;S extends UnStandardizedValue&gt; S save(S unValue);\n</code></pre>\n\n<p>I even tested allEntries = true, but no luck. Any suggestions?</p>\n\n<p>UnStandardizedValue has id (Integer) and value (String) with getters and setters. And toString returns value.</p>\n\n<p>So the Cacheable works, but not the eviction (unless done manually).</p>\n\n<p>Anyone knows how to fix this?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>I have equals and hashcode in UnStandardizedValue class.</p>\n\n<p>I made an empty method with the exact same eviction as the \"save\" (see code below) and it works (both before or after the save command) and I use the same object in save as in testEvict.</p>\n\n<pre><code>public interface UnStandardizedValueRepository extends CrudRepository&lt;UnStandardizedValue, Integer&gt; {\n    @Cacheable(value = \"rest_respond_values\", key = \"#p0\", unless=\"#result == null\")\n    UnStandardizedValue findByValue(String value);\n\n//does not evict\n    @Override\n    @CacheEvict(value = \"rest_respond_values\", key=\"#p0.value\", condition=\"#unValue != null\")\n    &lt;S extends UnStandardizedValue&gt; S save(S unValue);\n\n//evicts\n    @CacheEvict(value = \"rest_respond_values\", key=\"#p0.value\", condition=\"#unValue != null\")\n    default void testEvict(UnStandardizedValue unValue) {\n\n    }\n}\n</code></pre>\n\n<p><strong>UPDATE 2:</strong>\nA real interesting part is that the eviction fails for \"allEntries = true\"</p>\n\n<pre><code>@CacheEvict(value = \"rest_respond_values\", condition=\"#unValue != null\", allEntries = true)\n    &lt;S extends UnStandardizedValue&gt; S save(S unValue);\n</code></pre>\n\n<p>But the same annotation works for testEvict-method.</p>\n\n<pre><code>@CacheEvict(value = \"rest_respond_values\", condition=\"#unValue != null\", allEntries = true)\n    default void testEvict(UnStandardizedValue unValue) {\n\n    }\n</code></pre>\n\n<p>So it feels like there's something fishy about the save-method.</p>\n"},{"comments":[{"comment_id":134511894,"body":"Have you tried it with Hazelcast 5.2.3 ?"}],"last_activity_date":1684327333,"question_id":76272237,"body":"<pre><code>I'm currently experiencing an issue with a service that was implemented using Spring Boot 2.1.5 and Hazelcast 4.0.1. The application runs fine on this setup. However, after upgrading Spring Boot to version 2.3.0, the service begins to fail unexpectedly. I'm using Java 11.\n\nUpon starting, the Hazelcast instance initiates, but I notice several warnings and issues in the logs:\n\n1. There's a warning about Hazelcast starting in a Java modular environment without proper access to required Java packages. The logs suggest to use additional Java arguments to provide Hazelcast access to the Java internal API for optimal performance results.\n\n2. Hazelcast appears to struggle with forming a cluster. The logs show multiple &quot;Dropped: JoinRequest&quot; messages. It seems that Hazelcast is repeatedly attempting and failing to join the cluster.\n\nHere's a snippet from the log:\n</code></pre>\n<pre><code>    FINE: Detected runtime version: Java 11\n    WARNING: Hazelcast is starting in a Java modular environment (Java 9 and newer) but without  proper access to required Java packages...\n    \n    FINE: [LOCAL] [dev] [4.0.1] Trying to bind inet socket address: 0.0.0.0/0.0.0.0:5701\n    FINE: [LOCAL] [dev] [4.0.1] Bind successful to inet socket address: /0:0:0:0:0:0:0:0:5701\n    FINE: [x.x.x.x]:5701 [dev] [4.0.1] Dropped: JoinRequest{packetVersion=4, buildNumber=20200409,   memberVersion=4.0.1, address=[10.109.68.176]:5701, uuid='bcb2b452-c8a9-4cd4-9deb-ab2621827d55', liteMember=false, credentials=null, memberCount=0, tryCount=1}\n</code></pre>\n<pre><code>This is followed by several more dropped join requests.\n\nFollowing are the hazelcast-related dependencies I am using:\n</code></pre>\n<pre><code>    &lt;dependency&gt;\n       &lt;groupId&gt;com.hazelcast&lt;/groupId&gt;\n       &lt;artifactId&gt;hazelcast-spring&lt;/artifactId&gt;\n       &lt;version&gt;4.0.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n       &lt;groupId&gt;com.hazelcast&lt;/groupId&gt;\n       &lt;artifactId&gt;hazelcast&lt;/artifactId&gt;\n       &lt;version&gt;4.0.1&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>The application was running fine before the Spring Boot upgrade. I'm unsure why this issue is occurring now. Any ideas or suggestions to resolve this would be greatly appreciated. The application is running fine with the Spring Boot 2.1.5.</p>\n"},{"comments":[{"comment_id":134500405,"body":"Why do you want to do this? Performance? Have you measured that you will really win much?"},{"comment_id":134501423,"body":"Requirements... very old applications which we try to fit another login page to which will use different authentication, but leverage what we have already (the existing authentication filter), so we don&#39;t need to redesign basically everything... old architecture"}],"last_activity_date":1684326936,"question_id":76271346,"body":"<p>I have quite a long servlet filter chain, around 10 filters in multiple modules. I have a first filter which is supposed to catch all requests used during authentication:</p>\n<p><code>&lt;url-pattern&gt;/*&lt;/url-pattern&gt;</code></p>\n<p>Now, I need to add new page which should be accessible without authentication (public page) and I am not sure how to do it.</p>\n<p>My request URL is: http://domain/context/publicPage.\nIf I turn the filters off, I can get to controller using the request URL.</p>\n<p>I tried in the first filter, to skip the whole filter chain and just go to controller, with 3 different approaches:</p>\n<pre><code>//HttpServletRequest request\nString requestUrl = &quot;/context/publicPage&quot;;\nif(request.getRequestURI().equals(requestUrl)){\n   //1: - it doesn't go to the controller, it goes to Error page for some reason\n   //request.getRequestDispatcher(request.getRequestURI()).forward(request, response);\n   //2: - it doesn't go to the controller, it returns blank page\n   //return;\n   //3: - it cause an infinite loop as because it is redirect, it is getting caught once again by the first filter\n   //response.sendRedirect(requestUrl);\n}\n</code></pre>\n<p>Do you know how I can force it to just let the request to the controller? I know that I can implement ignore the URL across all filters something like this:</p>\n<pre><code>if(shouldPerformIgnoreUrls(((HttpServletRequest) req).getRequestURI())){\n    chain.doFilter(req, res);\n    return;\n}\n</code></pre>\n<p>but I would need to make changes across multiple modules in the project, which I would like to avoid if it is possible, because we have some modules we don't want to do any more changes to.</p>\n<p>Is there any easy way to just simply pass the request from filter to controller?</p>\n<p>I have seen a lot of similar questions on the forum but actually no solutions works for me and I am not sure why i.e. the forward on dispatcher (approach 1 in the code).</p>\n"},{"comments":[{"comment_id":134500416,"body":"&quot;the exception thrown is of type Exception&quot; - no, the only exceptions actually created are of type <code>ExceptionB</code> and <code>ExceptionC</code>. The type of the variable you&#39;re using is mostly irrelevant - the execution-time type of the exception thrown in <code>method1</code> is <code>ExceptionB</code>."},{"comment_id":134500424,"body":"(As an aside, this example is <i>much</i> more complicated than it needs to be - you really only need a single derived exception type, and a single method called from main...)"},{"comment_id":134500497,"body":"@JonSkeet is the type of variable we are using really irrelevant? Because <code>method2</code> will still catch this exception if I catch it using <code>ExceptionA</code>"},{"comment_id":134500571,"body":"I think you don&#39;t understand subclassing, An ExceptionB <b>is</b> an ExceptionA just as it <b>is</b> an Exception.  If that were not so, then subclassing would be pointless."},{"comment_id":134500592,"body":"Yes. Change it to <code>RuntimeException ex = new ExceptionB();</code> and you&#39;ll see the same behaviour. The type there is <i>only</i> relevant in terms of whether the compiler allows you to throw the exception - in this case you can do so with no <code>throws</code> clause because the compiler knows it&#39;s an unchecked exception."},{"comment_id":134500661,"body":"@ArfurNarf but my question is if a subclass reference <code>ExceptionB</code>, in this case, can hold the reference of type <code>Exception</code> in <code>method2</code>?"},{"comment_id":134501210,"body":"are you asking (in last comment) something like <code>ExceptionB x = new Exception()</code>  or, if you prefer,  <code>try { throw new Exception(); } catch {ExceptionB x) { ... }</code>?"},{"comment_id":134501342,"body":"@user16320675 The try catch case"},{"comment_id":134502191,"body":"is basically the same - both will not work, I mean the try-catch will not catch, assignment will not compile"},{"comment_id":134510390,"body":"@AashishAggarwal - the object that is thrown in your method1 is an ExceptionB.  That you briefly held a reference to it in variables typed as ExceptionA and Exception does not change that the object is actually an ExceptionB. It remains an ExceptionB when it arrives at the catching code in method2."}],"answers":[{"answer_id":76272156,"body":"<p>Almost all of java is dynamically linked. As in, which method is invoked / which catch block is chosen is all decided only on the spot depending on the actual type of the object. What you use in the code (as in, the type of your variable) is irrelevant. When you write:</p>\n<pre><code>Exception a = new SomeSpecificException();\n</code></pre>\n<p>You have 2 separate things here: You have an object, and a reference. It's like <code>new SomeSpecificException</code> pops a treasure chest in existence and buries it somewhere in the beach. And <code>Exception a;</code> is a treasure map. The <code>=</code> sign means: Draw a map to this treasure on this treasure map. This leads to proper explanations of how java works, if you then write <code>Exception b = a;</code> you have 2 treasure maps, both going to the same treasure, for example. The fact that your <code>b</code> variable is of type <code>Exception</code> is not saying much; that merely means the treasure map has, on top of it, a statement: &quot;This map is either blank (<code>null</code>), or, is guaranteed to lead to real treasure! In addition, that treasure will definitely be some sort of exception!&quot;</p>\n<p>Almost everything in java doesn't care about that header on your treasure map, it cares about the treasure.</p>\n<p>The only exception to that rule is method resolution. Given:</p>\n<pre><code>void foo(Number n) { System.out.println(&quot;Number!&quot;); }\nvoid foo(Integer n) { System.out.println(&quot;Integer!&quot;); }\n\nNumber x = 5; // integer\nfoo(n); // prints Number!\n</code></pre>\n<p>And that's because method names include their parameter types (so, our two <code>foo</code> methods here are as unrelated as a method named <code>joe</code> and <code>jane</code> would be - different names, effectively), and resolving which method is intended is a compile-time/static thing, i.e., based on the heading on your treasure maps and not based on treasure because that's not info available at compile time.</p>\n<p>Contrast to:</p>\n<pre><code>class Parent {\n  void foo(Number n) { System.out.println(&quot;Parent!&quot;); }\n}\n\nclass Child extends Parent {\n  void foo(Number n) { System.out.println(&quot;Child!&quot;); }\n}\n\nParent p = new Child();\np.foo(5); // prints Child!\n</code></pre>\n<p>Here the resolution (which actual code ends up being executed at runtime) is dynamic: It cares about the treasure (which is <code>new Child()</code>), not about the heading on your treasure map (which is <code>Parent p</code>).</p>\n<p><code>catch</code> blocks <strong>are like the latter</strong> - they are resolved <strong>at runtime</strong>, based on <strong>the type of the object</strong> (and not of the treasure map).</p>\n<p>This:</p>\n<pre><code>} catch (Exception e) {\n            System.out.println(&quot;2&quot;);\n            throw e;\n</code></pre>\n<p>Still throws an object of type <code>ExceptionB</code>. It doesn't magically change object types. That thinking doesn't make sense at all. Imagine such an operation changes the type of an object, that would imply you could have objects whose type is some abstract type, which is obviouslly impossible, 'abstract' means 'cannot be instantiated', and therefore, <strong>no</strong> objects can possibly exist whose type is an abstract type. But they could, of course, be of some <em>subtype</em> of an abstract type which is fine. Given:</p>\n<pre><code>AbstractList x = new ArrayList();\n</code></pre>\n<p><code>x</code> is a variable (treasure map), pointing at an object (treasure). The map promises that, whatever you find, it's some sort of AbstractList. All of which is fine - none of this makes the treasure <em>itself</em> an AbstractList. It's an ArrayList. It will remain an ArrayList regardless of what maps you care to draw (= variables you care to set) that lead to it.</p>\n"}],"last_activity_date":1684326819,"question_id":76271351,"body":"<pre><code>class ExceptionA extends RuntimeException {}\nclass ExceptionB extends ExceptionA {}\nclass ExceptionC extends RuntimeException {}\n\nclass statCheck {\n    void method1() {\n        ExceptionA ex = new ExceptionB();\n        try {\n            int i = 1; throw ex;\n        } catch (Exception e) {\n            System.out.println(&quot;2&quot;);\n            throw e;\n        } finally {\n            System.out.println(&quot;1&quot;);\n        }\n    }\n\n    void method2() {\n        try {\n            method1(); \n            System.out.println(&quot;4&quot;);;\n        } catch (ExceptionB e) {\n            System.out.println(&quot;5&quot;);\n            throw new ExceptionC();\n        }\n    }\n\n    void method3(){\n        try {\n            method2(); \n        } catch (Exception e) {\n            System.out.println(&quot;6&quot;);\n        }\n    }\n\n    public static void main(String args[]) {\n        new statCheck().method3();\n        System.out.println(&quot;7&quot;);\n    }\n}\n</code></pre>\n<p>I am running this java code and the output received is :</p>\n<pre><code>2\n1\n5\n6\n7\n</code></pre>\n<p>But why is that the case? Why 5 is being printed? Shouldn't the answer be just :</p>\n<pre><code>2\n1\n6\n7\n</code></pre>\n<p>The catch block which displays 5 on the console is catching the exception of type <code>ExceptionB</code> but the exception thrown is of type <code>Exception</code>. Is it possible to catch the superclass reference with some subclass reference? Or it works because the superclass reference is in turn pointing to the same subclass reference? Can someone please clear the air on this?</p>\n<p>Thanks</p>\n"},{"comments":[{"comment_id":134494899,"body":"I&#39;m curious, why didn&#39;t the post below help or even answer your question?"}],"answers":[{"comments":[{"comment_id":134501557,"body":"The post doesn&#39;t solve the problem for me. Given both of my cases are expecting a JWT token. So, it wouldn&#39;t be possible to have securityMatcher unless token is decoded for issuer."},{"comment_id":134506065,"body":"I had misunderstood your question: thought you were using keys to authorize requests, not in another issuer to sign JWTs"}],"answer_id":76212306,"body":"<p>An option is to use different security filter-chain beans for each request authorization mechanism: you can provide a <code>securityMatcher</code> to specify which requests a <code>securityFilterChain</code> processes and the criteria can be about anything you like, including the <code>Authorization</code> header format.</p>\n<p>I used the following sample to bridge from <code>basic</code> authentication to OAuth2 client-credentials flow (accept queries from a legacy client maintained by another team with no bandwidth to migrate it to OAuth2):</p>\n<pre class=\"lang-java prettyprint-override\"><code>http.securityMatcher((HttpServletRequest request) -&gt; {\n    return Optional.ofNullable(request.getHeader(HttpHeaders.AUTHORIZATION)).map(h -&gt; {\n        return h.toLowerCase().startsWith(&quot;basic &quot;);\n    }).orElse(false);\n});\nhttp.httpBasic(withDefaults());\nhttp.userDetailsService((String username) -&gt; {\n    return new User(username, &quot;&quot;, List.of());\n});\nhttp.authenticationManager(new OidcClientCredentialsFlowAuthenticationManager(authServerBaseUri, tokenEndpointsProperties, authenticationManagerResolver));\nhttp.sessionManagement(sm -&gt; sm.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\nhttp.csrf(csrf -&gt; csrf.disable());\n...\n</code></pre>\n<p>Defining a first standard OAuth2 resource server security filter-chain for requests with a <code>Bearer</code> authorization header and another security filter chain for requests secured with a public key should be just as easy as done above.</p>\n"},{"answer_id":76272136,"body":"<p>After lot of drilling of documentation, found that Springboot does have a native way to accomplish the requirement.</p>\n<p>Using <a href=\"https://docs.spring.io/spring-security/reference/reactive/oauth2/resource-server/multitenancy.html\" rel=\"nofollow noreferrer\">Multi-tenancy</a> feature, different JWT decoders can be registered.</p>\n<p>The Auth0 decoder will be initialized the <code>domain</code>.\nThe Public key based decoder can be initialized with the relevant public key.</p>\n"}],"last_activity_date":1684326700,"question_id":76202365,"body":"<p>In my spring based service, I have enabled Oauth2 Resource server based authentication using <code>@EnableWebSecurity</code> annotation and following fillter code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nhttp.\n....\n.oauth2ResourceServer(oauth2 -&gt; oauth2.authenticationManagerResolver(authenticationManagerResolver)).build();\n\n// The authenticationManagerResolver is initialized with correct Auth0 IssuerURL and Audience\n</code></pre>\n<p>Now, I want to enable tokens that were generated using a trusted Public/Private key combination as well for my application.</p>\n<p>How can I edit the above filter to allow Auth0 generated tokens and the tokens generated using the Private / Public keys interchangably..</p>\n"},{"last_activity_date":1684326580,"question_id":76272080,"body":"<p>I want to take full names as an input using string array type and loops but when I use nextLine() method, it shows this. What should I do so that it will take name and surname both ?</p>\n<p>This is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\n\npublic class Names_Array {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n\n        int z=1, y=1;    \n        System.out.print(&quot; Enter the no of names you want to enter = &quot;);\n\n        int size = sc.nextInt();\n        String[] names = new String[size];\n\n        for (int i=0; i&lt;3; i++){\n            System.out.println(&quot; Enter name &quot; + z + &quot; = &quot;);\n            names[i]=sc.nextLine();\n            z++;\n        }\n\n        for (int i=0; i&lt;3; i++){\n            System.out.println(&quot;Name &quot;+ y + &quot; = &quot;+ names[i]);\n            y++;\n        }\n    }\n}\n</code></pre>\n<p>This is the output: <a href=\"https://i.stack.imgur.com/0DWm7.png\" rel=\"nofollow noreferrer\">It does not takes the input for Name 1 but takes for 2 and 3 simuntaneously</a></p>\n<p>It works for sc.next() method but not for sc.nextLine but sc.next only takes name not surname</p>\n"},{"last_activity_date":1684326528,"question_id":76272119,"body":"<p>If anybody facing this issue then use bellow steps and solve this:</p>\n<ol>\n<li>build.gradle(Project)</li>\n</ol>\n<p>add bellow code in repositories</p>\n<pre><code>maven {\n            // Android JSC is installed from npm\n            url(&quot;$rootDir/../node_modules/jsc-android/dist&quot;)\n        }\n</code></pre>\n<ol start=\"2\">\n<li><p>build.gradle(app)\na. add below code on top:</p>\n<p>project.ext.react = [\nenableHermes: false,  // clean and rebuild if changing\n]\ndef jscFlavor = 'org.webkit:android-jsc:+'\ndef enableHermes = project.ext.react.get(&quot;enableHermes&quot;, false);</p>\n</li>\n</ol>\n<p>b. add below code in dependencies:</p>\n<pre><code>if (enableHermes) {\n        def hermesPath = &quot;../../node_modules/hermes-engine/android/&quot;;\n        debugImplementation files(hermesPath + &quot;hermes-debug.aar&quot;)\n        releaseImplementation files(hermesPath + &quot;hermes-release.aar&quot;)\n    } else {\n        implementation jscFlavor\n    }\n</code></pre>\n<p>Thanks in advance :)</p>\n"},{"comments":[{"comment_id":92357124,"body":"What exception do you get?"},{"comment_id":92357140,"body":"You can open up the <code>jar</code> file using a zip utility and see"}],"answers":[{"answer_id":52715900,"body":"<p><a href=\"https://springframework.guru/configuring-spring-boot-for-microsoft-sql-server/\" rel=\"noreferrer\">According to this web page</a>, the correct property is <code>spring.datasource.driverClassName</code>.</p>\n\n<p>So, the full connection string should be:</p>\n\n<pre><code>spring.datasource.driverClassName=com.microsoft.sqlserver.jdbc.SQLServerDriver\n</code></pre>\n"},{"comments":[{"comment_id":134501793,"body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76272089/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"answer_id":76272089,"body":"<p>A complete snippet</p>\n<pre><code>&lt;resources&gt;\n    &lt;jdbc-connection-pool \n        name=&quot;microsoft_sqlserver2005_pool&quot; \n        datasource-classname=&quot;com.microsoft.sqlserver.jdbc.SQLServerDataSource&quot;\n        res-type=&quot;javax.sql.DataSource&quot;&gt;\n        &lt;property name=&quot;user&quot; value=&quot;DB_USER&quot;/&gt;\n        &lt;property name=&quot;password&quot; value=&quot;DB_PASSWORD&quot;/&gt;\n        &lt;property name=&quot;serverName&quot; value=&quot;DB_HOSTNAME&quot;/&gt;\n        &lt;property name=&quot;portNumber&quot; value=&quot;1433&quot;/&gt;\n        &lt;property name=&quot;databaseName&quot; value=&quot;DATABASE_NAME&quot;/&gt;\n    &lt;/jdbc-connection-pool&gt;\n\n    &lt;jdbc-resource \n        enabled=&quot;true&quot; \n        jndi-name=&quot;jdbc/microsoft_sqlserver2005_resource&quot; \n        object-type=&quot;user&quot; \n        pool-name=&quot;microsoft_sqlserver2005_pool&quot;/&gt;\n&lt;/resources&gt;\n</code></pre>\n"}],"last_activity_date":1684326340,"question_id":52715797,"body":"<p>I want to connect my Java SpringBoot app to SQL Server and I get the information that spring cannot load driver class. I tried:</p>\n\n<pre><code>spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver\n</code></pre>\n\n<p>and </p>\n\n<pre><code>spring.datasource.driver-class-name=com.microsoft.jdbc.sqlserver.SQLServerDriver\n</code></pre>\n\n<p>But both did not work, here is my maven dependency </p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\n    &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\n    &lt;version&gt;7.0.0.jre8&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"comment_id":126614055,"body":"Is there a reason why you are using a third-party sqlite driver (which may not support Android). Please show all your gradle build dependencies."}],"answers":[{"answer_id":71898182,"body":"<p>update your room library</p>\n<pre><code>   implementation &quot;androidx.room:room-runtime:2.4.2&quot;\n   implementation &quot;androidx.room:room-ktx:2.4.2&quot;\n   kapt &quot;androidx.room:room-compiler:2.4.2&quot;\n</code></pre>\n<p>Here is <a href=\"https://developer.android.com/jetpack/androidx/releases/room#version_240_2\" rel=\"noreferrer\">Reference</a></p>\n"},{"comments":[{"comment_id":127473598,"body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/72135919/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"answer_id":72135919,"body":"<p>yeb run working on my case(my mac mini m1)\n=&gt;&gt;&gt;\n<code>implementation &quot;androidx.room:room-runtime:2.4.2&quot; implementation &quot;androidx.room:room-ktx:2.4.2&quot;</code></p>\n"},{"answer_id":72543774,"body":"<p>In my case updating to <code>2.4.2</code> only asking me to update the SDK version to 31 and more problem appears. I found alternative solution by selecting</p>\n<p><code>Android Studio &gt; Preferences &gt; Build, Execution, Deployment &gt; Build Tools &gt; Gradle</code></p>\n<p>Navigate to <strong>Gradle Project section</strong> and click <strong>Gradle JDK dropdown option field</strong>.</p>\n<p><a href=\"https://i.stack.imgur.com/jQAfM.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jQAfM.jpg\" alt=\"illustration\" /></a></p>\n<p>Select Liberica-1.8 (if it is not available in dropdown field, you can download and install here <a href=\"https://bell-sw.com/pages/downloads/\" rel=\"nofollow noreferrer\">https://bell-sw.com/pages/downloads/</a>).</p>\n<p>Run the project again and voila!!</p>\n"},{"answer_id":75200079,"body":"<p>update your roomdb dependencies</p>\n<pre><code>def room_version = &quot;2.4.2&quot;\nimplementation &quot;androidx.room:room-runtime:$room_version&quot;\nkapt &quot;androidx.room:room-compiler:$room_version&quot;\nimplementation &quot;androidx.room:room-ktx:$room_version&quot;\n</code></pre>\n"}],"last_activity_date":1684326274,"question_id":71641264,"body":"<p>I solved this issue with the code below in my build.gradle</p>\n<pre><code>  allprojects {\nconfigurations.all {\n    resolutionStrategy {\n        force 'org.xerial:sqlite-jdbc:3.34.0'\n      }\n   }\n } \n</code></pre>\n<p>But it has an effect on the project I am working on. for some reason, it is not working with room sql implemented on the project.</p>\n<p>I get this error when i removed the code above.</p>\n<p>Is there a better approach to solve this.</p>\n<pre><code>Caused by: java.lang.ExceptionInInitializerError\nat androidx.room.processor.DatabaseProcessor.doProcess(DatabaseProcessor.kt:82)\nat androidx.room.processor.DatabaseProcessor.process(DatabaseProcessor.kt:57)\nat androidx.room.RoomProcessor$DatabaseProcessingStep.process(RoomProcessor.kt:134)\nat com.google.auto.common.BasicAnnotationProcessor.process(BasicAnnotationProcessor.java:330)\nat com.google.auto.common.BasicAnnotationProcessor.process(BasicAnnotationProcessor.java:181)\nat org.jetbrains.kotlin.kapt3.base.incremental.IncrementalProcessor.process(incrementalProcessors.kt)\nat org.jetbrains.kotlin.kapt3.base.ProcessorWrapper.process(annotationProcessing.kt:161)\nat jdk.compiler/com.sun.tools.javac.processing.JavacProcessingEnvironment.callProcessor(JavacProcessingEnvironment.java:980)\n... 39 more\n\nCaused by: java.lang.Exception: No native library is found for os.name=Mac and \nos.arch=aarch64. path=/org/sqlite/native/Mac/aarch64\nat org.sqlite.SQLiteJDBCLoader.loadSQLiteNativeLibrary(SQLiteJDBCLoader.java:333)\nat org.sqlite.SQLiteJDBCLoader.initialize(SQLiteJDBCLoader.java:64)\nat androidx.room.verifier.DatabaseVerifier.&lt;clinit&gt;(DatabaseVerifier.kt:68)\n... 47 more\n</code></pre>\n"},{"comments":[{"comment_id":134499214,"body":"Can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates the problem?"},{"comment_id":134499413,"body":"Ironically you express a desire to reproduce a character which is itself a <i>replacement char</i> and therefore indicative of an error. Does your message include Hangul chars you want to show?"},{"comment_id":134499870,"body":"@g00se No. it doesnt show."},{"comment_id":134500089,"body":"You really need to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"comment_id":134501590,"body":"<code>&amp;#65533;</code> is a numerical character reference as used in HTML and XML. The Protobuf text format does not use that as far as I understand. So I&#39;m <i>reasonably sure</i> that it&#39;s not the protobuf library that applies this transformation, but something else in your pipeline. If you can really provide the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> (including the Java code that produces the claimed output) then we can start investigating where things go wrong."},{"comment_id":134501745,"body":"<i>Protobuf is converting them into \\302\\240 when building the message.</i> Also, there is possibly a misconception here: the whole purpose of Protobuf involves <i>converting</i> input for transport purposes, so if you&#39;re somehow trying to use its transport format to derive your input instead of using its decoding/desrialization mechanisms, then you&#39;re going to get problems"}],"answers":[{"answer_id":76272055,"body":"<p>&amp;#65533; is an html encoding of your symbol � So it is OK to go with that. unicode for that symbol is 65533 or in hexadecimal - \\ufffd You can also replace your string <code>&quot;foo�bar&quot;</code> with <code>&quot;foo\\ufffdbar&quot;</code> and then convert it to protobuf - it will also work. Here is an on-line converter: <a href=\"https://checkserp.com/encode/unicode/\" rel=\"nofollow noreferrer\">https://checkserp.com/encode/unicode/</a> or more comprehensive one - <a href=\"https://r12a.github.io/app-conversion/\" rel=\"nofollow noreferrer\">https://r12a.github.io/app-conversion/</a>. Also, if you want to convert text to unicodes programmatically you can use MgntUtils Open source library written and maintained by me that has a Utility that converts Strings to unicode sequence and vise versa:</p>\n<pre><code>result = &quot;Hello World&quot;;\nresult = StringUnicodeEncoderDecoder.encodeStringToUnicodeSequence(result);\nSystem.out.println(result);\nresult = StringUnicodeEncoderDecoder.decodeUnicodeSequenceToString(result);\nSystem.out.println(result);\n</code></pre>\n<p>The output of this code is:</p>\n<pre><code>\\u0048\\u0065\\u006c\\u006c\\u006f\\u0020\\u0057\\u006f\\u0072\\u006c\\u0064\nHello World\n</code></pre>\n<p>The library can be found as <a href=\"https://search.maven.org/artifact/com.github.michaelgantman/MgntUtils\" rel=\"nofollow noreferrer\">maven artifact</a> or on <a href=\"https://github.com/michaelgantman/Mgnt/releases\" rel=\"nofollow noreferrer\">Github</a> with source code and Javadoc. Here is a <a href=\"http://michaelgantman.github.io/Mgnt/docs/com/mgnt/utils/StringUnicodeEncoderDecoder.html\" rel=\"nofollow noreferrer\">Javadoc for StringUnicodeEncoderDecoder</a></p>\n"}],"last_activity_date":1684326110,"question_id":76270493,"body":"<p>I want to include special chars like � and  in a protobuf message. Protobuf is converting them into \\302\\240 when building the message. Is there any way we can build the message with these chars. One option is to use bytes filed in the proto. I want to other options.</p>\n<p>Example:</p>\n<pre><code>proto - \nmessage data {\nstring value = 1;\n}\n\ninput - &quot;foo�bar&quot;\nMESSAGE - \ndata_msg {\nvalue: &quot;foo&amp;#65533;bar&quot;\n}\n</code></pre>\n"},{"comments":[{"comment_id":134495301,"body":"Your Map is not a very good idea. A Stream can only be used once. It would be better to have <code>Map&lt;String, Suppler&lt;Stream&lt;String&gt;&gt;</code>."}],"answers":[{"comments":[{"comment_id":134493635,"body":"thank you for the idea, but how can I ignore extra spaces and case sensitivity?"}],"answer_id":76267143,"body":"<p>If I get it right and you don’t need to use the map’s keys, then you can use the map’s values() method, use flatMap over them to flatten the results (you may have to map the lists to a stream first), and then you can use sorted(), and finally distinct(), all Stream’s methods.</p>\n"},{"answer_id":76267187,"body":"<p>Stream the map's values, flapMap to stream of Strings, then apply the various filters and modifications, distinct, sort:</p>\n<pre><code>public Stream&lt;String&gt; listN(Map&lt;String, Stream&lt;String&gt;&gt; map) {\n    return map.values().stream()\n      .flatMap(s -&gt; s)\n      .filter(Objects::nonNull)\n      .filter(Predicate.not(String::isBlank))\n      .map(String::trim)\n      .map(String::toLowerCase)\n      .map(s -&gt; s.substring(0, 1).toUpperCase() + s.substring(1))\n      .distinct()\n      .sorted();\n}\n</code></pre>\n<p>See <a href=\"https://onecompiler.com/java/3z8t4skya\" rel=\"nofollow noreferrer\">live demo</a>.</p>\n"},{"answer_id":76271928,"body":"<p>Your question and your method name seem to indicate that you want to return a list rather than a stream.  Perhaps you also also meant to use a <code>Map&lt;String, List&lt;String&gt;&gt;</code> (but then I don't know your use case). In any event, this returns a <code>List&lt;String&gt;</code> but more importantly it demonstrates the suggestion by <a href=\"https://stackoverflow.com/users/207421/user207421\">@user20742</a> to use a <code>Map&lt;String, Supplier&lt;Stream&lt;String&gt;&gt;&gt;</code> so that the Map can be repeatedly used, if required. Otherwise, the map would only survive one calling and the streams would be exhausted.</p>\n<pre><code>Map&lt;String, Supplier&lt;Stream&lt;String&gt;&gt;&gt; map = Map.of(&quot;A&quot;,\n        () -&gt; Stream.of(&quot;B&quot;, &quot;C&quot;, &quot; D &quot;,null), &quot;B&quot;,\n        () -&gt; Stream.of(&quot;kas&quot;, &quot;B&quot;, &quot;c &quot;, &quot;dddd&quot;));\n\nfor (int i = 0; i &lt; 3; i++) {\n    List&lt;String&gt; list = listN(map);\n    System.out.println(list);\n}\n</code></pre>\n<p>prints</p>\n<pre><code>[B, C, D, Dddd, Kas]\n[B, C, D, Dddd, Kas]\n[B, C, D, Dddd, Kas]\n</code></pre>\n<p>With the original map, it would print once and then throw an <code>IllegalStateException</code> showing the streams have been used.</p>\n<p>The modified method below returns a list using the described map. Since the method doesn't appear to be using <code>instance fields</code> I have declared it <code>static</code>.\nExcept for some slight modifications, this uses the same constructs that are used in <a href=\"https://stackoverflow.com/a/76267187/1552534\">Bohemian's</a> answer. The main difference is the <code>.get()</code> call to retrieve the stream from the supplier.</p>\n<pre><code>public List&lt;String&gt; listN(Map&lt;String, Supplier&lt;Stream&lt;String&gt;&gt;&gt; map) {\n   return map.values().stream().flatMap(a -&gt; a.get())\n           .filter(str-&gt; str != null &amp;&amp; !str.isBlank())\n           .map(a -&gt; {\n               a = a.trim();\n               return a.substring(0, 1).toUpperCase() + a.substring(1);\n           }).distinct().sorted().toList();\n}\n</code></pre>\n"}],"last_activity_date":1684325880,"question_id":76267096,"body":"<p>I have the map <code>Map&lt;String, Stream&lt;String&gt;&gt;</code>. I need to build sorted stream of all participants without duplication, ignore null or empty strings, trim extra spaces and modify each to <a href=\"https://en.wikipedia.org/wiki/Title_case\" rel=\"nofollow noreferrer\">Title Case</a>.</p>\n<p>For example, for a given map:</p>\n<pre><code>{\n  &quot;A&quot;=[&quot;B&quot;, &quot;C&quot;, &quot; D  &quot;],\n  &quot;B&quot;=[&quot;kas&quot;, &quot;B&quot;, &quot;c &quot;, &quot;dddd&quot;]\n}\n</code></pre>\n<p>I should get:</p>\n<pre><code>[&quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;Dddd&quot;, &quot;Kas&quot;]\n</code></pre>\n<p>I need to create method like this:</p>\n<pre><code>public Stream&lt;String&gt; listN(Map&lt;String, Stream&lt;String&gt;&gt; map) {\n    map.values().stream()... ?\n}\n</code></pre>\n<p>but I don't even know how to start.</p>\n"},{"comments":[{"comment_id":78364651,"body":"The callback is not called synchronously. It&#39;s a network call, and it could take a few seconds to complete."},{"comment_id":78364706,"body":"That may be so, but it seems like I&#39;m never getting a response? <code>onResponse()</code> never gets executed, the log statements inside it never get written out to the console."},{"comment_id":78365665,"body":"@EricCochran how can I make sure the method is waiting for the call to complete? Do I need to synchronize this somehow?"}],"answers":[{"comments":[{"comment_id":78366018,"body":"Ok, cool. But I&#39;m wondering why I would need to do this? I&#39;ve used <code>enqueue()</code> plenty of times in other apps with no issue. Is there something about the way I&#39;ve structured this to make it require a synchronous call? I&#39;d like to stick with <code>enqueue()</code> so I could change my implementation to better suit that if so."},{"comment_id":78366033,"body":"Is it because my methods are static? If I were to change everything to instance methods and instantiate my <code>FlickrServiceManager</code> inside of my <code>MainActivity</code> or where ever I need the API data, would <code>enqueue()</code> work then?"},{"comment_id":78366067,"body":"The problem is you are trying to obtain your data before the network call is over, I will edit my answer with an alternative to use enqueue"},{"comment_id":78366285,"body":"Interesting, thank you for this. I will try it now. Still a bit confused because I&#39;ve definitely modified class level variables using contents of <code>response.Body()</code> within <code>onResponse()</code> in the past and it&#39;s worked just fine. Maybe because those were much smaller responses that didn&#39;t take as long to execute?"},{"comment_id":78366345,"body":"The problem is not the modification of the variables, but what you do with them, if you try to access the variables just after calling you API it won&#39;t work, but if you modified and accessed them later on, it&#39;s a race condition."},{"comment_id":78366349,"body":"I&#39;ve modified the method parameters if you look carefully"},{"comment_id":78366557,"body":"Hmm, getting an error on <code>callback.onFinish(photoIds)</code> saying that the variable is being accessed from an inner class and needs to be declared final. I guess it&#39;s alright for me to pass it in as a final variable?"},{"comment_id":78366651,"body":"Ok, unfortunately this still isn&#39;t working for me. I know I haven&#39;t updated the <code>getImageUrl()</code> method to use this onFinish hook, but it is still not even getting into the <code>onResponse()</code> of <code>getImageIds()</code> . I also tried putting a log statement in my implemented <code>onFinish()</code> method and it never printed. I updated my post with the new code. It looks pretty much identical to yours."},{"comment_id":78366731,"body":"It&#39;s at the top, in the first method <code>getKittenImages(int)</code>. Basically I want other Activitys in my app to be able to just call <code>FlickrServiceManager.getKittenImages(int)</code> and get back a list of strings containing the URLs to different images."},{"comment_id":78366815,"body":"You need to call the getImagedId on the activity, otherwise you are doing the same"},{"comment_id":78366878,"body":"You&#39;re saying I need to call getImageIds from an activity and not from within the same class? I just tried this with the same result, nothing happens. I feel like I&#39;m making this very complicated for myself. I really just need to get some imageIds from one API call and then pass them in one-by-one to another API call to get their URLs, then pass those URLs to an Activity. Would really only like to use Retrofit without any other libraries right now."}],"answer_id":45703848,"body":"<p>Change your call to the synchronous retrofit API : </p>\n\n<pre><code>public static List&lt;String&gt; getImageIds(int size) {\n    Call&lt;PhotosList&gt; call = flickrService.getPhotos(apiKey, format, \"1\");\n    photoIds = new ArrayList&lt;String&gt;();\n\n    PhotosList photosList = call.execute().body();\n    List&lt;Photo&gt; photos = photosList.getPhotos().getPhoto();\n\n    for(Photo photo : photos) {\n        Log.d(\"TEMP_TAG\", \"adding photo id to list: \" + photo.getId());\n        photoIds.add(photo.getId());\n    }\n    Log.d(\"TEMP_TAG\", \"it's getting here too\");\n    return photoIds;\n}\n</code></pre>\n\n<p>Please note that you need to call this method on an <code>AsyncTask</code></p>\n\n<p><strong>EDIT</strong> </p>\n\n<p>You could also continue to use enqueue, but you need to provide an \"onFinish\" hook, so you know when your data has been received and then you \"notify\" the client with the data:</p>\n\n<pre><code>//interface por communication\npublic interface ImageIdsCallBack {\n   public void onFinish( List&lt;String&gt; photoIds );\n}\n</code></pre>\n\n<p>Then you receive this interface and send data: </p>\n\n<pre><code>public static List&lt;String&gt; getImageIds(int size, final ImageIdsCallBack callback) {\n    Call&lt;PhotosList&gt; call = flickrService.getPhotos(apiKey, format, \"1\");\n    photoIds = new ArrayList&lt;String&gt;();\n\n    call.enqueue(new Callback&lt;PhotosList&gt;(){\n        @Override\n        public void onResponse(Call&lt;PhotosList&gt; call, Response&lt;PhotosList&gt; response) {\n            PhotosList photosList = response.body();\n            List&lt;Photo&gt; photos = photosList.getPhotos().getPhoto();\n\n            for(Photo photo : photos) {\n                Log.d(\"TEMP_TAG\", \"adding photo id to list: \" + photo.getId());\n                photoIds.add(photo.getId());\n            }\n            //send the data to the caller\n            callback.onFinish(photoIds);\n        }\n\n        @Override\n        public void onFailure(Call&lt;PhotosList&gt; call, Throwable t) {\n            // TODO: Clean up\n            Log.d(\"TEMP_TAG\", \"Call failed\");\n        }\n    });\n    Log.d(\"TEMP_TAG\", \"it's getting here too\");\n    return photoIds;\n}\n</code></pre>\n\n<p>calling the method : </p>\n\n<pre><code>getImageIds( 50 , new ImageIdsCallBack() {\n     public void onFinish( List&lt;String&gt; photoIds ) {\n         //update UI with photoIds\n     }\n} );\n</code></pre>\n\n<p>I typically use a library like <a href=\"https://github.com/greenrobot/EventBus\" rel=\"nofollow noreferrer\">EventBus</a> to make it easier, I really recommend it to you.</p>\n"},{"answer_id":45703883,"body":"<p>Correct me if I'm wrong, is this on the main thread? That would pose the problem of not waiting for a response.</p>\n\n<p>Consider using <code>async</code></p>\n"},{"answer_id":76271975,"body":"<p>I don't know exactly if it helps but I thought my call.enqueue() is getting skipped but I didnt handle the response i was getting I was getting a 400 response. So i would suggest to log the response code you are getting. hope it helps someone.</p>\n<pre><code>call.enqueue(new Callback &lt; LoginResponse &gt; () {\n     @ Override\n    public void onResponse(Call &lt; LoginResponse &gt; call, Response &lt; LoginResponse &gt; response) {\n        Log.i(TAG, &quot;Response code &quot; + response.code());\n        if (response.code() == 200) {\n            Toast.makeText(MainActivity.this, &quot;Going into Login page&quot;, Toast.LENGTH_LONG).show();\n        }\n        /*if(response.code()==400){\n        Toast.makeText(MainActivity.this, &quot;Error 400&quot;, Toast.LENGTH_LONG).show();\n        }* added it later after i saw in debugging that i am gettting\n        400 error because i was using email instead of username */\n    }\n     @ Override\n    public void onFailure(Call &lt; LoginResponse &gt; call, Throwable t) {\n        Log.e(TAG, &quot;onFailure: &quot; + t.getMessage());\n    }\n});\n}\n});\n</code></pre>\n"}],"last_activity_date":1684325862,"question_id":45703156,"body":"<p>I'm making a call using Retrofit's <code>enqueue()</code> method. I'm calling my <code>refreshImages()</code> in my MainActivity's <code>onCreate()</code>, <code>refreshImages()</code> then calls a method <code>refreshImagesIds()</code> which is supposed to make a call out to Flickr's API and return back a <code>PhotosList</code> object, I'll then pull out the <code>Photos</code> from there which will contain a list of <code>Photo</code> objects. My issue is that for some reason the <code>onResponse()</code> inside my <code>enqueue()</code> method is never getting called. When I use the debugger it skips right over it, and when I put Log statements inside they never get written out. I know the endpoint it is hitting is correct because I can see it using OkHttp's logger, and my POJOs all look to be correct for the data being returned. </p>\n\n<p>Any idea why this isn't working? Below are my <code>refreshImages</code> and <code>refreshImagesId</code>. These are both contained in my MainAcitivty and modify class-level variables.</p>\n\n<pre><code>private void refreshImages() {\n        // make api call\n        //imageUrls = FlickrServiceManager_withinterface.getKittenImages(8);\n\n        refreshImageIds();\n\n        List&lt;Photo&gt; photos = photosList.getPhotos().getPhoto();\n        imageIds = new ArrayList&lt;String&gt;();\n        for(Photo photo : photos) {\n            Log.d(\"TAG\", \"It is pringint imageIds: \" + photo.getId());\n            imageIds.add(photo.getId());\n        }\n}\n\nprivate void refreshImageIds() {\n    Retrofit retrofit = Api.getRestAdapter();\n    FlickrServiceInterface flickrService = retrofit.create(FlickrServiceInterface.class);\n    Call&lt;PhotosList&gt; call = flickrService.getPhotos(API_KEY, FORMAT, \"1\");\n    imageIds = new ArrayList&lt;String&gt;();\n\n    call.enqueue(new Callback&lt;PhotosList&gt;(){\n        @Override\n        public void onResponse(Call&lt;PhotosList&gt; call, Response&lt;PhotosList&gt; response) {\n            photosList = response.body();\n        }\n\n        @Override\n        public void onFailure(Call&lt;PhotosList&gt; call, Throwable t) {\n            // TODO: Clean up\n            Log.d(\"TEMP_TAG\", \"Call failed\");\n        }\n    });\n}\n</code></pre>\n\n<p>And my FlickrServiceInterface:</p>\n\n<pre><code>public interface FlickrServiceInterface {\n\n    @GET(\"?method=flickr.photos.getSizes\")\n    Call&lt;PhotoSizes&gt; getPhotoSizes(@Query(\"api_key\") String apiKey, @Query(\"format\") String format, @Query(\"nojsoncallback\") String jsonCallback, @Query(\"photo_id\") String photoId);\n\n    @GET(\"?method=flickr.photos.getRecent\")\n    Call&lt;PhotosList&gt; getPhotos(@Query(\"api_key\") String apiKey, @Query(\"format\") String format, @Query(\"nojsoncallback\") String jsonCallback);\n}\n</code></pre>\n"},{"answers":[{"answer_id":41946899,"body":"<p>You can use the REST API:</p>\n\n<p><code>curl -k -d flowOverride[alert.type]=my-alerter -d scheduleDate=01/30/2017 -d scheduleTime=03,44,pm,PDT -d is_recurring=off -d projectId=1 -d ajax=scheduleFlow -d projectName=myproject -d flow=myflow -b \"azkaban.browser.session.id=...\" http://localhost:8081/schedule</code></p>\n\n<p>Please notice the parameter</p>\n\n<p><code>flowOverride[alert.type]=alerter-name</code></p>\n\n<p><a href=\"https://groups.google.com/forum/#!topic/azkaban-dev/pUYYpsmNsbk\" rel=\"nofollow noreferrer\">https://groups.google.com/forum/#!topic/azkaban-dev/pUYYpsmNsbk</a></p>\n"},{"comments":[{"comment_id":134548398,"body":"by the way, I use the version is 3.43.0"}],"answer_id":76268247,"body":"<p>In my case, I modified the source code,\nmodule: <code>azkaban-common</code>,\nclass: <code>azkaban.server.HttpRequestUtils</code>\nafter line number 104, add this code: <code>flowParamGroup.put(&quot;alert.type&quot;, &quot;XXX&quot;);</code></p>\n"}],"last_activity_date":1684325851,"question_id":35903362,"body":"<p>How do you set flow parameters for every job? I'm trying to configure a custom alerter and I want every job to trigger it. It look like it's looking for a \"alert.type\" property from the flow parameters, but right now I can only manage to trigger that through the interface. Any ideas?</p>\n"},{"comments":[{"comment_id":134500936,"body":"The error message tells you that the Camel API classes have been compiled to target Java 11 (i.e. they require at least Java 11 to run), but you are trying to run your compilation on Java 8 (<a href=\"https://stackoverflow.com/questions/9170832/list-of-java-class-file-format-major-version-numbers\">see here</a> for the version mapping). Your best bet is to find a version of that dependency that still works on Java 8 if it exists. Recompiling is unlikely to work, as libraries tend to not switch to higher Java versions without good reasons."},{"comment_id":134500958,"body":"<a href=\"https://camel.apache.org/manual/what-are-the-dependencies.html\" rel=\"nofollow noreferrer\">According to this</a> Camel started requiring Java 11 with 3.15.0, so any earlier version should work in Java 8."},{"comment_id":134503882,"body":"In addition to previous comments Maven doesn&#39;t recompile dependencies."}],"last_activity_date":1684325687,"question_id":76271699,"body":"<p>I've below error :</p>\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project camelActiveMqReceiver: Compilation failure\n[ERROR] /Users/pranscha/Projects/REPRODUCIBLES/camelActiveMqReceiver/src/main/java/com/camelmicroservices/camelActiveMqReceiver/routes/CamelReceiverRouter.java:[3,24] cannot access org.apache.camel.Exchange\n[ERROR]   bad class file: /Users/pranscha/.m2/repository/org/apache/camel/camel-api/3.20.4/camel-api-3.20.4.jar(org/apache/camel/Exchange.class)\n[ERROR]     class file has wrong version 55.0, should be 52.0\n[ERROR]     Please remove or make sure it appears in the correct subdirectory of the classpath.\n</code></pre>\n<p>Even after adding :</p>\n<pre><code>            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${java.version}&lt;/source&gt;\n                    &lt;target&gt;${java.version}&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p>The failing dependency is :</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-spring-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;${camel.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I was expecting org/apache/camel/Exchange.class Java class to work properly in my project with 1.8 version compilation, but even after adding maven.compiler.source &amp; maven.compiler.target, it isn't working.</p>\n"},{"comments":[{"comment_id":134464194,"body":"Run your service in your IDE and step through the code as it executes to find out where the problem is."},{"comment_id":134465477,"body":"I don&#39;t thing the UPD2 is ok. But let say you moved to Spring 3, java 17. using JpaRepository and you override findAll assume from JpaRepository that extend Paging. I hope you can test and show us the query and input of those call (You can . If it&#39;s happen, we got new bug to report on github. but you know what, I saw you are using mapping from BerserkCard to Model. We need it also"},{"comment_id":134466697,"body":"@NamNguyễn i tested different cases and added logs(logging response and request) in UPD3 of my post. Mapper no matter in this cases because repository return wrong result.  Today i will trying to find reason inside jpa."},{"comment_id":134466740,"body":"@Bohemian it looks i need to debug Hibernated libraries rather than my code, bcs flow in my code very simple. I think it may be hibernate or jpa bug and i really want  to know what is it"},{"comment_id":134467245,"body":"<code>LEFT JOIN</code> is causing the issue in your case."},{"comment_id":134467287,"body":"@Antoniossss for page 1 and 4 also uses left join which return correct result"},{"comment_id":134467298,"body":"But that depends on the actual results - in your case presence or absence of  matchigg <code>elements</code>"},{"comment_id":134467304,"body":"What  you want, is to be able to limit/offset entity agregate, what you actually get is limt and offset of raw SLQ result set - this is quite common issue tbh. You can try using <code>@OneToMany</code> instead <code>@ElementCollection</code> with eager fetching instead of entity graph. Maybe in such case framework will correctly do the aggregation including proper count."},{"comment_id":134468151,"body":"@Antoniossss  Count  does not depend on <code>elements</code> because there are no joins in count query. Also i what to understand, why 2 and 3 magic numbers?) for page 1 and 4...up to end... all ok, generates correct sql-s and returns correct results. Why for other pages hibernate generate count query, bur for page 2 and 3 not"},{"comment_id":134472553,"body":"Spring must have an issue with counting as it seems to think there are 1 less result for those pages then there should be, so is assuming this is the last page possible and so doesn&#39;t need to count to check how many are actually there. If those pages really have 12 results back, this is a Spring problem, not JPA or hibernate; the page size says there are 12 results returned, but give you a total count of 23 and 35 respectively which doesn&#39;t add up. If debugging, you should just go into spring Pageable handling, not into Hibernate itself."}],"answers":[{"answer_id":76264431,"body":"<p>Problem in eager collection <code>elements</code>.\nIf we see at sql in logs</p>\n<pre><code>Hibernate: \n    select\n        b1_0.id,\n        b1_0.attack,\n        b1_0.cost,\n        e1_0.card_id,\n        e1_0.element,\n        b1_0.health,\n        b1_0.name,\n        b1_0.number,\n        b1_0.painter,\n        b1_0.rarity,\n        b1_0.set,\n        b1_0.subtype,\n        b1_0.text,\n        b1_0.type \n    from\n        berserk_cards b1_0 \n    left join\n        berserk_card_elements e1_0 \n            on b1_0.id=e1_0.card_id offset ? rows fetch first ? rows only\n</code></pre>\n<p>We found that we skip ? rows and fetch ? rows. If there are two or more elements card has, we will found less unique entities in result set.</p>\n<p>For example, in resultSet we have one card with two elements, and other with 1 elements. It means in resultSet we have 11 unique entities.</p>\n<p>When spring parse resultSet to entities it found, that there are 11 entities it found meanwhile page size is 12. Spring saw that founded count of entities less than page size and it thinks that it's last page and don't call count query.</p>\n"}],"last_activity_date":1684325642,"question_id":76249584,"body":"<p>Spring boot starter parent 3.0.6</p>\n<p>I have a controller that accepts get params and pageable for searching cards for trading card game:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/cards&quot;)\n@RequiredArgsConstructor\npublic class CardsController {\n\n    private final BerserkHeroesCardService cardService;\n\n    @GetMapping\n    @ResponseBody\n    public Page&lt;BerserkCardModel&gt; getCards(CardSearchRequest searchRequest, Pageable pageable) {\n        return cardService.getCards(searchRequest, pageable);\n    }\n}\n</code></pre>\n<p>calling <code>http://.../api/cards?page=1&amp;size=12</code> I get correct result:</p>\n<pre><code>... \n&quot;last&quot;: false, \n&quot;totalPages&quot;: 228, \n&quot;totalElements&quot;: 2726, \n&quot;size&quot;: 12, \n...\n</code></pre>\n<p>calling <code>http://.../api/cards?page=2&amp;size=12</code> I got not expected and incorrect result</p>\n<pre><code>...  \n&quot;last&quot;: true,  \n&quot;totalPages&quot;: 2,  \n&quot;totalElements&quot;: 23,  \n&quot;size&quot;: 12, \n...\n</code></pre>\n<p>calling <code>http://.../api/cards?page=3&amp;size=12</code> I got also incorrect result that differ previous</p>\n<pre><code>...  \n&quot;last&quot;: true,  \n&quot;totalPages&quot;: 3,  \n&quot;totalElements&quot;: 35,  \n&quot;size&quot;: 12, \n...\n</code></pre>\n<p>calling <code>http://.../api/cards?page=4&amp;size=12</code> again return correct result</p>\n<pre><code>...  \n&quot;last&quot;: false,  \n&quot;totalPages&quot;: 228,  \n&quot;totalElements&quot;: 2726,  \n&quot;size&quot;: 12, \n...\n</code></pre>\n<p>My serviece method</p>\n<pre><code>@Override     \npublic Page&lt;BerserkCardModel&gt; getCards(CardSearchRequest request, Pageable pageable) {\n    Specification&lt;BerserkCard&gt; spec = Specification.where(null); // mocked for debug         \n    Page&lt;BerserkCard&gt; all = berserkCardRepo.findAll(spec, pageable); // findAll returned page incorrect  \n                                                                     //result for page 2 and 3         \n    return all.map(mapper::toModel);     \n}\n</code></pre>\n<p>I'im tring to find info about similar bugs but nothing found. Other same services works well.</p>\n<p>UPD</p>\n<p>I experimented with my jpa repository and commented <code>@EntityGraph</code> annotation\nand page request now return correct result regardless of page number.</p>\n<pre><code>public interface BerserkCardRepo extends JpaRepository&lt;BerserkCard, Long&gt;, JpaSpecificationExecutor&lt;BerserkCard&gt; {\n   @Override\n    //@EntityGraph(attributePaths = {&quot;elements&quot;})\n    Page&lt;BerserkCard&gt; findAll(@Nullable Specification&lt;BerserkCard&gt; spec, Pageable pageable);\n\n}\n</code></pre>\n<p>UPD2</p>\n<p>also I'm noticed that for 2 and 3 page hibernate didnt generate count query. For each other page hibernate do it.</p>\n<p>UPD3</p>\n<p>I added logging sql when entity graph enabled.</p>\n<p>service:</p>\n<pre><code>    @Override\n    public Page&lt;BerserkCardModel&gt; getCards(CardSearchRequest request, Pageable pageable) {\n        log.info(String.format(&quot;Accept pageable. Page %d, size %d&quot;, pageable.getPageNumber(), pageable.getPageSize()));\n        Specification&lt;BerserkCard&gt; spec = Specification.where(null);\n        Page&lt;BerserkCard&gt; all = berserkCardRepo\n                .findAll(spec, pageable);\n        log.info(String.format(&quot;Found %d elements, total pages: %d&quot;, all.getTotalElements(), all.getTotalPages()));\n        return all\n                .map(mapper::toModel);\n    }\n</code></pre>\n<p>Repo:</p>\n<pre><code>public interface BerserkCardRepo extends JpaRepository&lt;BerserkCard, Long&gt;, JpaSpecificationExecutor&lt;BerserkCard&gt; {\n    @Override\n    @EntityGraph(attributePaths = {&quot;elements&quot;})\n    Page&lt;BerserkCard&gt; findAll(@Nullable Specification&lt;BerserkCard&gt; spec, Pageable pageable);\n\n}\n\n</code></pre>\n<p>Entity:</p>\n<pre><code>@Data\n@Entity\n@Table(name = &quot;berserk_cards&quot;)\npublic class BerserkCard {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String set;\n    private String name;\n    private Integer cost;\n\n    @ElementCollection\n    @CollectionTable(name = &quot;berserk_card_elements&quot;, joinColumns = @JoinColumn(name = &quot;card_id&quot;))\n    @Column(name = &quot;element&quot;)\n    private Set&lt;String&gt; elements = new HashSet&lt;&gt;();\n\n    private String type;\n    private String subtype;\n    private Integer attack;\n    private Integer health;\n    private String rarity;\n    private String text;\n    private String painter;\n    private Integer number;\n}\n\n</code></pre>\n<p>Its ok, that page in url start has value = 1, and in logs = 0 because i have config one-indexed-parameters: true.</p>\n<p>Calling <code>http://.../api/cards?page=1&amp;size=12</code></p>\n<pre><code>2023-05-15T10:06:51.411+03:00  INFO 21056 --- [nio-9999-exec-1] r.b.c.i.h.s.BerserkHeroesCardServiceImpl : Accept pageable. Page 0, size 12\nHibernate: \n    select\n        b1_0.id,\n        b1_0.attack,\n        b1_0.cost,\n        e1_0.card_id,\n        e1_0.element,\n        b1_0.health,\n        b1_0.name,\n        b1_0.number,\n        b1_0.painter,\n        b1_0.rarity,\n        b1_0.set,\n        b1_0.subtype,\n        b1_0.text,\n        b1_0.type \n    from\n        berserk_cards b1_0 \n    left join\n        berserk_card_elements e1_0 \n            on b1_0.id=e1_0.card_id offset ? rows fetch first ? rows only\nHibernate: \n    select\n        count(b1_0.id) \n    from\n        berserk_cards b1_0\n2023-05-15T10:06:51.472+03:00  INFO 21056 --- [nio-9999-exec-1] r.b.c.i.h.s.BerserkHeroesCardServiceImpl : Found 2726 elements, total pages: 228\n</code></pre>\n<p>Calling <code>http://.../api/cards?page=2&amp;size=12</code></p>\n<pre><code>2023-05-15T10:06:53.277+03:00  INFO 21056 --- [nio-9999-exec-5] r.b.c.i.h.s.BerserkHeroesCardServiceImpl : Accept pageable. Page 1, size 12\nHibernate: \n    select\n        b1_0.id,\n        b1_0.attack,\n        b1_0.cost,\n        e1_0.card_id,\n        e1_0.element,\n        b1_0.health,\n        b1_0.name,\n        b1_0.number,\n        b1_0.painter,\n        b1_0.rarity,\n        b1_0.set,\n        b1_0.subtype,\n        b1_0.text,\n        b1_0.type \n    from\n        berserk_cards b1_0 \n    left join\n        berserk_card_elements e1_0 \n            on b1_0.id=e1_0.card_id offset ? rows fetch first ? rows only\n2023-05-15T10:06:53.300+03:00  INFO 21056 --- [nio-9999-exec-5] r.b.c.i.h.s.BerserkHeroesCardServiceImpl : Found 23 elements, total pages: 2\n</code></pre>\n<p>Calling <code>http://.../api/cards?page=3&amp;size=12</code></p>\n<pre><code>2023-05-15T10:06:54.272+03:00  INFO 21056 --- [nio-9999-exec-2] r.b.c.i.h.s.BerserkHeroesCardServiceImpl : Accept pageable. Page 2, size 12\nHibernate: \n    select\n        b1_0.id,\n        b1_0.attack,\n        b1_0.cost,\n        e1_0.card_id,\n        e1_0.element,\n        b1_0.health,\n        b1_0.name,\n        b1_0.number,\n        b1_0.painter,\n        b1_0.rarity,\n        b1_0.set,\n        b1_0.subtype,\n        b1_0.text,\n        b1_0.type \n    from\n        berserk_cards b1_0 \n    left join\n        berserk_card_elements e1_0 \n            on b1_0.id=e1_0.card_id offset ? rows fetch first ? rows only\n2023-05-15T10:06:54.299+03:00  INFO 21056 --- [nio-9999-exec-2] r.b.c.i.h.s.BerserkHeroesCardServiceImpl : Found 35 elements, total pages: 3\n</code></pre>\n<p>Calling <code>http://.../api/cards?page=4&amp;size=12</code></p>\n<pre><code>2023-05-15T10:06:55.521+03:00  INFO 21056 --- [nio-9999-exec-9] r.b.c.i.h.s.BerserkHeroesCardServiceImpl : Accept pageable. Page 3, size 12\nHibernate: \n    select\n        b1_0.id,\n        b1_0.attack,\n        b1_0.cost,\n        e1_0.card_id,\n        e1_0.element,\n        b1_0.health,\n        b1_0.name,\n        b1_0.number,\n        b1_0.painter,\n        b1_0.rarity,\n        b1_0.set,\n        b1_0.subtype,\n        b1_0.text,\n        b1_0.type \n    from\n        berserk_cards b1_0 \n    left join\n        berserk_card_elements e1_0 \n            on b1_0.id=e1_0.card_id offset ? rows fetch first ? rows only\nHibernate: \n    select\n        count(b1_0.id) \n    from\n        berserk_cards b1_0\n2023-05-15T10:06:55.561+03:00  INFO 21056 --- [nio-9999-exec-9] r.b.c.i.h.s.BerserkHeroesCardServiceImpl : Found 2726 elements, total pages: 228\n</code></pre>\n<p>and now i commented entity graph annotation</p>\n<pre><code>public interface BerserkCardRepo extends JpaRepository&lt;BerserkCard, Long&gt;, JpaSpecificationExecutor&lt;BerserkCard&gt; {\n\n    @Override\n    //@EntityGraph(attributePaths = {&quot;elements&quot;})\n    Page&lt;BerserkCard&gt; findAll(@Nullable Specification&lt;BerserkCard&gt; spec, Pageable pageable);\n\n}\n</code></pre>\n<p>Calling <code>http://.../api/cards?page=1&amp;size=12</code></p>\n<pre><code>2023-05-15T10:14:26.704+03:00  INFO 4036 --- [nio-9999-exec-4] r.b.c.i.h.s.BerserkHeroesCardServiceImpl : Accept pageable. Page 0, size 12\nHibernate: \n    select\n        b1_0.id,\n        b1_0.attack,\n        b1_0.cost,\n        b1_0.health,\n        b1_0.name,\n        b1_0.number,\n        b1_0.painter,\n        b1_0.rarity,\n        b1_0.set,\n        b1_0.subtype,\n        b1_0.text,\n        b1_0.type \n    from\n        berserk_cards b1_0 offset ? rows fetch first ? rows only\nHibernate: \n    select\n        count(b1_0.id) \n    from\n        berserk_cards b1_0\n2023-05-15T10:14:26.742+03:00  INFO 4036 --- [nio-9999-exec-4] r.b.c.i.h.s.BerserkHeroesCardServiceImpl : Found 2726 elements, total pages: 228\n</code></pre>\n<p>Calling <code>http://.../api/cards?page=2&amp;size=12</code></p>\n<pre><code>2023-05-15T10:15:47.211+03:00  INFO 4036 --- [nio-9999-exec-3] r.b.c.i.h.s.BerserkHeroesCardServiceImpl : Accept pageable. Page 1, size 12\nHibernate: \n    select\n        b1_0.id,\n        b1_0.attack,\n        b1_0.cost,\n        b1_0.health,\n        b1_0.name,\n        b1_0.number,\n        b1_0.painter,\n        b1_0.rarity,\n        b1_0.set,\n        b1_0.subtype,\n        b1_0.text,\n        b1_0.type \n    from\n        berserk_cards b1_0 offset ? rows fetch first ? rows only\nHibernate: \n    select\n        count(b1_0.id) \n    from\n        berserk_cards b1_0\n2023-05-15T10:15:47.250+03:00  INFO 4036 --- [nio-9999-exec-3] r.b.c.i.h.s.BerserkHeroesCardServiceImpl : Found 2726 elements, total pages: 228\n</code></pre>\n<p>Calling <code>http://.../api/cards?page=3&amp;size=12</code>(the same for all other pages)</p>\n<pre><code>2023-05-15T10:17:03.992+03:00  INFO 4036 --- [io-9999-exec-10] r.b.c.i.h.s.BerserkHeroesCardServiceImpl : Accept pageable. Page 2, size 12\nHibernate: \n    select\n        b1_0.id,\n        b1_0.attack,\n        b1_0.cost,\n        b1_0.health,\n        b1_0.name,\n        b1_0.number,\n        b1_0.painter,\n        b1_0.rarity,\n        b1_0.set,\n        b1_0.subtype,\n        b1_0.text,\n        b1_0.type \n    from\n        berserk_cards b1_0 offset ? rows fetch first ? rows only\nHibernate: \n    select\n        count(b1_0.id) \n    from\n        berserk_cards b1_0\n2023-05-15T10:17:04.029+03:00  INFO 4036 --- [io-9999-exec-10] r.b.c.i.h.s.BerserkHeroesCardServiceImpl : Found 2726 elements, total pages: 228\n</code></pre>\n<p>As You can see, the differ in logs between wrong response and correct response is count query, which not generated in incorrect response case.</p>\n<p>Any have idea why is this happening?</p>\n"},{"comments":[{"comment_id":76447367,"body":"try disabling the anti virus"},{"comment_id":76447601,"body":"run android studio as administrator and try.."}],"answers":[{"answer_id":44732569,"body":"<p><strong>This is mostly an antivirus issue</strong></p>\n\n<p>One solution that worked for me</p>\n\n<blockquote>\n  <p><strong>Try disabling your antivirus and do it again</strong>.</p>\n</blockquote>\n"},{"answer_id":52070169,"body":"<p>Simply update your Android Studio and also generate a new Key path.</p>\n"}],"last_activity_date":1684325626,"question_id":44732283,"body":"<p><a href=\"https://i.stack.imgur.com/SoF7W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SoF7W.png\" alt=\"enter image description here\"></a></p>\n\n<p>Error:Failed to capture snapshot of output files for task 'packageRelease' property 'outputDirectory' during up-to-date check.</p>\n\n<blockquote>\n  <p>Failed to create MD5 hash for file 'C:\\Users\\oMaR Waleed\\Desktop\\release\\android.gradle\\4.0-rc-1\\fileContent\\fileContent.lock'.</p>\n</blockquote>\n\n<p>im trying to build apk</p>\n"},{"last_activity_date":1684325506,"question_id":76266749,"body":"<p>wrote a simple code using the Kabeja library. The code reads an existing dxf file, creates text and adds it to a new layer, the real question is how to save changes to dxf?</p>\n<pre><code>public class DXFLayerTest {\n\n    /**\n     * @param args the command line arguments\n     */\n    public static void main(String[] args) throws IOException, ParseException {\n        // TODO code application logic here\n\n        File file = new File(&quot;D:\\\\11.016571.DXF&quot;);\n        File out = new File(&quot;D:\\\\11.016571ADDL.DXF&quot;);\n\n        try ( FileInputStream inputStream = new FileInputStream(file)) {\n            Parser parser = ParserBuilder.createDefaultParser();\n            parser.parse(inputStream, &quot;UTF-8&quot;);\n            DXFDocument document = parser.getDocument();\n\n            DXFText text = new DXFText();\n            text.setText(&quot;SOME-PART-ID&quot;);\n\n            text.setHeight(5.0); \n            text.setRotation(0); \n\n            DXFLayer layer = new DXFLayer();\n            layer.setName(&quot;engraving&quot;);\n            layer.setColor(0xC3C3C3); \n\n            layer.addDXFEntity(text);\n\n            document.addDXFLayer(layer);\n            document.addDXFEntity(text);\n\n\n\n        } catch (FileNotFoundException e) {\n            e.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n<p><strong>UPDATE</strong></p>\n<p>Found example</p>\n<pre><code>        import org.kabeja.dxf.DXFWriter;\n...\n        DXFWriter writer = new DXFWriter();\n        File file = new File(&quot;output.dxf&quot;);\n        FileOutputStream fos = new FileOutputStream(file);\n        writer.write(document, fos);\n</code></pre>\n<p>but there is no DXFWriter in the library Kabeja 0.4</p>\n<p>The output is expected to be a new dxf file containing the added entities</p>\n"},{"answers":[{"answer_id":65517586,"body":"<p>In your <code>@Mapping</code> annotation, you are telling mapstruct to use the field &quot;status&quot; as the source for the mapping. But the methods take <code>NoticeBoard</code> and <code>NoticeBoardDto</code> as parameters. You need to change the parameter type to whatever your <code>status</code> is. Assuming it is string:</p>\n<pre><code>@Named(&quot;getNoticeBoardStatusName&quot;)\ndefault String getNoticeBoardStatusNameConverter(String status) {\n    return Objects.requireNonNull(NoticeBoardStatus.findByName(status)).name();\n}\n</code></pre>\n<p>Also, don't use static methods in mappers, use the <code>default</code> keyword instead.</p>\n"},{"answer_id":76271962,"body":"<p>In my case, if you doesn't match the <code>@Context</code> variable type in your method, you will get the same error.</p>\n"}],"last_activity_date":1684325486,"question_id":65517550,"body":"<p>I'm having trouble using MapStruct version 1.4.1 when I'm trying to implement my own mapping. This is code that I wrote:</p>\n<pre><code>package com.kucazdravlja.user.mappers;\n\nimport com.kucazdravlja.user.dto.NoticeBoardDto;\nimport com.kucazdravlja.user.entities.NoticeBoard;\nimport com.kucazdravlja.user.entities.NoticeBoardStatus;\nimport org.mapstruct.Mapper;\nimport org.mapstruct.Mapping;\nimport org.mapstruct.Named;\n\nimport java.util.Objects;\n\n@Mapper(uses = {BaseJournalMapper.class})\npublic interface NoticeBoardMapper {\n\n    @Mapping(source = &quot;status&quot;, target = &quot;status&quot;, qualifiedByName = &quot;getNoticeBoardStatusName&quot;)\n    NoticeBoard dtoToEntity(NoticeBoardDto noticeBoardDto);\n\n    @Mapping(source = &quot;status&quot;, target = &quot;status&quot;, qualifiedByName = &quot;getNoticeBoardStatusDescription&quot;)\n    NoticeBoardDto entityToDto(NoticeBoard noticeBoard);\n\n    @Named(&quot;getNoticeBoardStatusDescription&quot;)\n    static String getNoticeBoardStatusDescriptionConverter(NoticeBoard noticeBoard) {\n        return Objects.requireNonNull(NoticeBoardStatus.findByName(noticeBoard.getStatus())).getDescription();\n    }\n\n    @Named(&quot;getNoticeBoardStatusName&quot;)\n    static String getNoticeBoardStatusNameConverter(NoticeBoardDto noticeBoardDto) {\n        return Objects.requireNonNull(NoticeBoardStatus.findByName(noticeBoardDto.getStatus())).name();\n    }\n}\n</code></pre>\n<p>When running application it crashes and gives error</p>\n<pre><code>Error:(15, 5) java: Qualifier error. No method found annotated with @Named#value: [ getNoticeBoardStatusName ].\n</code></pre>\n<p>Not sure what is the problem because I have that method with that name.</p>\n"},{"comments":[{"comment_id":134501465,"body":"We won’t do your homework. <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a>"}],"last_activity_date":1684325191,"question_id":76271904,"body":"<p>I am a college student and wants to make some contributions to open source. I chose a community issue with the title of How to upgrade SpringBoot-Starter to support SpringBoot3.I have written a starter and understand some of the principles of spring boot. I don't know how to start.\n<a href=\"https://github.com/alibaba/nacos/issues/10375\" rel=\"nofollow noreferrer\">issue is here</a></p>\n<p>Who can give me a rough idea to help me complete this issue?</p>\n"},{"comments":[{"comment_id":134404548,"body":"This might also come in handy (especially the accepted answer): <a href=\"https://stackoverflow.com/questions/53892875/java-lambda-expressions-and-memory-allocation\" title=\"java lambda expressions and memory allocation\">stackoverflow.com/questions/53892875/&hellip;</a>"}],"last_activity_date":1684325051,"question_id":76215303,"body":"<p>I know that lambdas are instances of interfaces that have only 1 abstract method. But doesn't that mean, every time there is a lambda expression, it also mean there is actually a <code>new</code> keyword there?</p>\n<pre class=\"lang-java prettyprint-override\"><code>Runnable r1 = new Runnable()\n{\n  @Override\n  public void run()\n  {\n    System.out.println(&quot;Hello World!&quot;);\n  }\n};\n// equals to\nRunnable r2 = () -&gt; System.out.println(&quot;Hello World!&quot;);\n// lambda equals to a new keyword\n</code></pre>\n<p>I want to know if it is a better practice to store a lambda to a variable in order to prevent unnessary creation of an object and garbage collection.\nFor example, if I have a method that will turn a <code>List&lt;Object&gt;</code> to a <code>List&lt;String&gt;</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.List;\nimport java.util.stream.Collectors;\n\npublic class Helper\n{\n  public static List&lt;String&gt; objectListToStringList(List&lt;Object&gt; objects)\n  {\n    return objects.stream()\n      .map(o -&gt; o.toString())\n      .collect(Collectors.toList());\n  }\n}\n</code></pre>\n<p>Is it better to store the <code>o -&gt; o.toString()</code> lambda to a variable in order to avoid the creation of a <code>Function</code> object when everytime this method was called?</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.List;\nimport java.util.function.Function;\nimport java.util.stream.Collectors;\n\npublic class Helper\n{\n  private static final Function&lt;Object, String&gt; mapToString = o -&gt; o.toString();\n\n  public static List&lt;String&gt; objectListToStringList(List&lt;Object&gt; objects)\n  {\n    return objects.stream()\n      .map(mapToString)\n      .collect(Collectors.toList());\n  }\n}\n</code></pre>\n"},{"last_activity_date":1684324805,"question_id":76271856,"body":"<p>I have added my self-certificate *.pem to the cacerts in my security folder.\nThis has been confirmed with keytool.\nI can open the cacerts using the standard password &quot;changeit&quot;\nI added the following code to my gradle.properties file:</p>\n<pre><code>org.gradle.jvmargs=-Xmx4g -Dfile.encoding=UTF-8 -Djavax.net.ssl.trustStore=/Library/Java/JavaVirtualMachines/zulu-17.jdk/Contents/Home/lib/security/cacerts -Djavax.net.ssl.trustStorePassword=changeit\n</code></pre>\n<p>however, when I go to build my gradle project both in terminal and in intelliJ, I get the error:</p>\n<pre><code>org.apache.http.ssl.SSLInitializationException: Keystore was tampered with, or password was incorrect\n</code></pre>\n<p>The password works in terminal when using keytool so confused as to why I am getting this error. Any help is appreciated.</p>\n<p>Background: reason for doing all this is I am building a project behind my firms security.</p>\n"},{"answers":[{"comments":[{"comment_id":129681118,"body":"by mamking the method public, it worked :) . Thanks"}],"answer_id":73406695,"body":"<p>This is not a field that gets validated but a method which is kind of read as a virtual field from that method.</p>\n<p>I think the method has to be declared as public to become accessible for validation</p>\n<pre><code> @AssertTrue\n public boolean isValid() {\n     return key !=null || val !=null;\n }\n</code></pre>\n"}],"last_activity_date":1684324549,"question_id":73401711,"body":"<p>My Custom DTO class is as follows :</p>\n<pre><code>public class TestDto1 {\n\nprivate String key;\nprivate String val;\n\n@AssertTrue\nprivate boolean isValid() {\n    return key !=null || val !=null;\n}public class TestDto1 {\n\nprivate String key;\nprivate String val;\n\n@AssertTrue\nprivate boolean isValid() {\n    return key !=null || val !=null;\n}\n</code></pre>\n<p>My Parent DTO class :</p>\n<pre><code>public class TestDto {\n\n\nprivate String id;\n\n@Valid\nprivate TestDto1 tes;\n\npublic TestDto1 getTes() {\n    return tes;\n}\n\npublic void setTes(TestDto1 tes) {\n    this.tes = tes;\n}\n\npublic String getId() {\n    return id;\n</code></pre>\n<p>While running the app and hitting api with following JSON getting following error:</p>\n<pre><code>{\n&quot;id&quot;:&quot;1234&quot;,\n&quot;tes&quot;:{\n    \n}\n</code></pre>\n<p>}</p>\n<pre><code>  JSR-303 validated property 'tes.valid' does not have a corresponding accessor for Spring data binding - check your DataBinder's configuration (bean property versus direct field access)] with root cause\n\norg.springframework.beans.NotReadablePropertyException: Invalid property 'tes.valid' of bean class [com.example.thirdparty.controller.TestDto]: Bean property 'tes.valid' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter?\n</code></pre>\n<p>Please let me know what needs to be done here</p>\n"},{"comments":[{"comment_id":114463500,"body":"Warning: the Homebrew Java installation commands recommended by the top answers don&#39;t work anymore.  See my answer for the latest commands or <a href=\"https://stackoverflow.com/a/52524114/1125159\">this amazing answer</a> that has all the latest commands with detailed explanations on the different approaches."},{"comment_id":130562233,"body":"<a href=\"https://medium.com/@kirebyte/using-homebrew-to-install-java-jdk11-on-macos-2021-4a90aa276f1c\" rel=\"nofollow noreferrer\">medium.com/@kirebyte/&hellip;</a>  this solution work for me."}],"answers":[{"comments":[{"comment_id":51763052,"body":"So far this is the best option for me. easily can switch to any version with just a simple command &quot;java8&quot; or &quot;java7&quot;. Thanks for the help"},{"comment_id":59227701,"body":"Great ! :) And for other like me you can use : ls /Library/Java/JavaVirtualMachines to see which versions are available. Then you can switch on different 1.8.x versions. And also you have to add export PATH=$JAVA_HOME/bin:$PATH"},{"comment_id":64402731,"body":"Thanks for this one. I just wanted to mention that I&#39;ve managed to do this by installing jdk7 after jdk8 (there is no need to uninstall jdk8)."},{"comment_id":78594775,"body":"Dunno why I wasted my time with jenv, as this just works, and does not clutter your shell startup by 0.5s with jenv init."},{"comment_id":80276948,"body":"If you are trying to get java 9 working in this fashion, the version argument to java_home for java 9 should simply be <code>9</code> e.g. <code>export JAVA_9_HOME=$(&#47;usr&#47;libexec&#47;java_home -v9)</code>"},{"comment_id":85754153,"body":"Thanks for this!  Had Java8 installed with homebrew already, installed 9 as well, did this (sans jdk7) and it seems to be working."},{"comment_id":89736010,"body":"This should be the accepted answer, much simpler than installing extraneous software, especially if you&#39;re using a corporate managed Mac where there are restrictions on software that can be installed."},{"comment_id":95560343,"body":"Along similar lines, you can also use a tool like direnv to specify Java versions per project so you don&#39;t need to remember to switch yourself. All it does it automatically set JAVA_HOME. I&#39;ve outlined this approach here: <a href=\"https://gist.github.com/badsyntax/4c66a0f09f545320e52bb4a559777a88\" rel=\"nofollow noreferrer\">gist.github.com/badsyntax/4c66a0f09f545320e52bb4a559777a88</a>"},{"comment_id":107039742,"body":"unless I&#39;m mistaken, the alias commands shouldn&#39;t have backticks (`) around them but instead single quotes (&#39;). Otherwise the alias just gets set to the output of the export command (blank) rather than the export command itself"},{"comment_id":107042290,"body":"Yes, that was a late edit from someone else, I&#39;ll revert. Thanks @willrochathomas."},{"comment_id":108685557,"body":"This is the answer guys. <code>&#47;usr&#47;libexec&#47;java_home</code> is awesome. Read about it a bit more. It&#39;s all you need."},{"comment_id":115743319,"body":"If you are on Big Sur, make sure to follow the advice outlined in <a href=\"https://stackoverflow.com/a/64917842/5114189\">this</a> answer. Looks like Big Sur broke the way <code>usr&#47;libexec&#47;java_home</code> worked in previous versions, so setting <code>JAVA_HOME</code> in advance won&#39;t work."},{"comment_id":125543208,"body":"@msilb apparently this was caused by a bug that has later been fixed."},{"comment_id":126909278,"body":"If you use zsh, then add aforementioned exports on ~/.zprofile"}],"answer_id":26252993,"body":"<p>Uninstall jdk8, install jdk7, then reinstall jdk8.</p>\n<p>My approach to switching between them (in .profile) :</p>\n<pre><code>export JAVA_7_HOME=$(/usr/libexec/java_home -v1.7)\nexport JAVA_8_HOME=$(/usr/libexec/java_home -v1.8)\nexport JAVA_9_HOME=$(/usr/libexec/java_home -v9)\nexport JAVA_20_HOME=$(/usr/libexec/java_home -v20)\n\nalias java7='export JAVA_HOME=$JAVA_7_HOME'\nalias java8='export JAVA_HOME=$JAVA_8_HOME'\nalias java9='export JAVA_HOME=$JAVA_9_HOME'\nalias java20='export JAVA_HOME=$JAVA_20_HOME'\n\n#default java8\nexport JAVA_HOME=$JAVA_8_HOME\n</code></pre>\n<p>Then you can simply type <code>java7</code> or <code>java8</code> in a terminal to switch versions.</p>\n<p>(edit: updated to add Dylans improvement for Java 9)</p>\n"},{"comments":[{"comment_id":53379245,"body":"It would be good to mention that homebrew-cask can be installed with command <code>brew install caskroom&#47;cask&#47;brew-cask</code> instead of <code>brew install cask</code> which is an Emacs plugin."},{"comment_id":58036609,"body":"Do we have to delete the current installed version of Java (1.8), and reinstalling it with brew to be able to brew-manage both?"},{"comment_id":58065865,"body":"Don&#39;t think you have to. As mentioned in the last step of the installation process, use <code>jenv add &lt;javaVersionPathHere&gt;</code> to let jenv know where it can find a given java version."},{"comment_id":58128744,"body":"I just wanted to mention, since it wasn&#39;t working for me. <code>brew cask install java7</code> downloads the package file but doesn&#39;t install it. You still need manually install it. Then you should be able to add the path to <code>jenv</code>  Also, <code>brew cask search java</code> doesn&#39;t return java8 for some reason."},{"comment_id":59227854,"body":"@squid267 the cleanest way is to avoid homebrew. Try Vegard solution, I added a comment that should help you (but before download and install by yourself the jdk or jre you want <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/index.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/java/javase/downloads/index.html</a>)"},{"comment_id":59255225,"body":"@squid267 did you open a ticket on <a href=\"https://github.com/caskroom/homebrew-cask\" rel=\"nofollow noreferrer\">Github on <code>Homebrew Cask</code>&#39;s repo</a>? I doubt this is a normal behavior."},{"comment_id":59255474,"body":"@Nico Why would you avoid a generic solution that was <a href=\"https://github.com/caskroom/homebrew-cask/graphs/contributors\" rel=\"nofollow noreferrer\">contributed by 100 people since April 2012</a> &amp; tested by 10s of thousands? it has 2,315 Closed vs 64 Opened issues... just look at the repo, numbers speak for themselves, it&#39;s a pretty damn good tool"},{"comment_id":59256402,"body":"@AdrienBe I tried homeBrew two years ago and I encountered several problems when I wanted to change for example mysql versions, then I decided to do things by my own. But you must be right, maybe today this tool is better. I think it&#39;s a choice, for people confortable with mac os command lines and system administration maybe avoid homebrew is better in order to keep a better view of what is installed."},{"comment_id":59258274,"body":"@Nico yeah, in the end one should just try out &amp; choose whatever (s)he feels comfortable with. Some tools are just irrelevant if you have the relevant skills already, sys admin stuff in this case. Although one could actually like this as it avoids you having to do repetitive work..."},{"comment_id":65524511,"body":"I ran into a few problems while implementing this solution, one of which was with <code>jenv</code> returning the <code>No such file or directory.</code> error. This wiki helped solve it for me. <a href=\"https://github.com/gcuisinier/jenv/wiki/Trouble-Shooting\" rel=\"nofollow noreferrer\">github.com/gcuisinier/jenv/wiki/Trouble-Shooting</a>"},{"comment_id":67227420,"body":"I would add that all java installs would be in <code>&#47;Library&#47;Java&#47;JavaVirtualMachines&#47;</code> and when adding them with <code>jenv add</code> you add path looking like this <code>&#47;Library&#47;Java&#47;JavaVirtualMachines&#47;[specific-version]&#47;Content&zwnj;&#8203;s&#47;Home&#47;</code>. Cheers!"},{"comment_id":69044802,"body":"@SammyKumar I think java8 isn&#39;t listed because 8 is what you get by default when you just use <code>brew cask install java</code>"},{"comment_id":76445909,"body":"As of Jun 23 2017, I run <code>brew cask search java7</code> but got No Cask found for &quot;java7&quot;."},{"comment_id":76552159,"body":"@MingliangLIU yeah me too... it really sucks. I found issues about this on Github were they mentioned some work arounds but I could not get it to work. So I ended up having to do it &quot;the manual way&quot; via apple and oracle&#39;s &quot;Java versions download and install&quot; web pages. Then using <code>&#47;usr&#47;libexec&#47;java_home -V</code> to double check the paths where these were installed."},{"comment_id":76562699,"body":"@AdrienBe Thanks for sharing this. As this is confirmed, I&#39;ll also install manually. Hadoop 2 is still using Java 7, unfortunately..."},{"comment_id":80258630,"body":"Step 2.5. <code>$ eval &quot;$(jenv init -)&quot;</code> as per linked page."},{"comment_id":80575917,"body":"is there a way to install a specific version with Java8. For eg 1.8.0_151-b12 or older within Java 8? thanks"},{"comment_id":88411842,"body":"I really want this to work.. but unfortunately I couldn&#39;t find a way to use openjdk.."},{"comment_id":91853696,"body":"@AdrienBe you should update your answer with the current ways to install java, which is cask &quot;brew cask install java8&quot; &quot;brew cask install java-beta&quot; &quot;brew cask install java&quot; &quot;brew cask install java7&quot; .. there is no tap anymore. changed a lot. Thanks for the brief answer"},{"comment_id":109097018,"body":"It took awhile for me to figure out the path to Java Home for the instruction, jenv add &lt;javaVersionPathHere&gt; . If you put the command, /usr/libexec/java_home -V just below it would be a good enhancement."},{"comment_id":116321934,"body":"For <a href=\"https://brew.sh/2020/12/01/homebrew-2.6.0/#:~:text=All%20brew%20cask%20commands%20have,Homebrew.\" rel=\"nofollow noreferrer\">Homebrew 2.6.0+</a>, replaces <code>cask install</code> with <code>install --cask</code>."},{"comment_id":121219205,"body":"<code>$ brew install --cask java8</code> now gives <code>Error: Cask &#39;java8&#39; is unavailable: No Cask with this name exists.</code> <code>brew search java</code> actually lists <code>java6</code> but neither <code>java7</code> nor <code>java8</code>!"},{"comment_id":121219595,"body":"After trying a couple of other commands this one worked; be prepared to have a <i>github</i> login and your admin account password ready: <code>brew install --cask homebrew&#47;cask-versions&#47;adoptopenjdk8</code>"},{"comment_id":121219952,"body":"Here&#39;s the stuff about searching through the different places <code>brew</code> might store your Java8, spelled out in more detail: <a href=\"https://www.dev2qa.com/how-to-install-uninstall-multiple-java-versions-in-mac-os-by-home-brew-or-manually/\" rel=\"nofollow noreferrer\">dev2qa.com/&hellip;</a>"},{"comment_id":122524499,"body":"is this still valid with Big Sur OS ?"},{"comment_id":130451630,"body":"@Adelin yes and also for Monterey :)"}],"answer_id":29195815,"body":"<p>The cleanest way to manage multiple java versions on Mac is to use <a href=\"http://brew.sh\" rel=\"noreferrer\"><code>Homebrew</code></a>.</p>\n<p>And within <code>Homebrew</code>, use:</p>\n<ul>\n<li><code>homebrew-cask</code> to install the versions of java</li>\n<li><code>jenv</code> to manage the installed versions of java</li>\n</ul>\n<hr />\n<p>As seen on <a href=\"http://hanxue-it.blogspot.ch/2014/05/installing-java-8-managing-multiple.html\" rel=\"noreferrer\">http://hanxue-it.blogspot.ch/2014/05/installing-java-8-managing-multiple.html</a> , these are the steps to follow.</p>\n<ol>\n<li>install homebrew</li>\n<li>install homebrew jenv</li>\n<li>install homebrew-cask</li>\n<li>install a specific java version using cask (see &quot;homebrew-cask versions&quot; paragraph below)</li>\n<li>add this version for jenv to manage it</li>\n<li>check the version is correctly managed by jenv</li>\n<li>repeat steps 4 to 6 for each version of java you need</li>\n</ol>\n<hr />\n<h3>homebrew-cask versions</h3>\n<p>Add the <a href=\"https://github.com/Homebrew/homebrew-cask-versions\" rel=\"noreferrer\"><code>homebrew/cask-versions</code></a> tap to homebrew using:</p>\n<pre><code>brew tap homebrew/cask-versions\n</code></pre>\n<p>Then you can look at all the versions available:</p>\n<pre><code>brew search java\n</code></pre>\n<p>Then you can install the version(s) you like:</p>\n<pre><code>brew install --cask java7\nbrew install --cask java6\n</code></pre>\n<p>And add them to be managed by jenv as usual.</p>\n<pre><code>jenv add &lt;javaVersionPathHere&gt;\n</code></pre>\n<p>I think this is the cleanest &amp; simplest way to go about it.</p>\n<hr />\n<p>Another important thing to note, as mentioned in <a href=\"https://stackoverflow.com/questions/6141180/mac-os-x-10-6-7-java-path-current-jdk-confusing/24792251#24792251\">Mac OS X 10.6.7 Java Path Current JDK confusing</a> :</p>\n<blockquote>\n<p>For different types of JDKs or installations, you will have different\npaths</p>\n<p>You can check the paths of the versions installed using <code>/usr/libexec/java_home -V</code>, see <a href=\"https://stackoverflow.com/questions/14292698/how-do-i-check-if-the-java-jdk-is-installed-on-mac\">How do I check if the Java JDK is installed on Mac?</a></p>\n<p>On Mac OS X Mavericks, I found as following:</p>\n<ol>\n<li><p>Built-in JRE default: <code>/Library/Internet\\ Plug-Ins/JavaAppletPlugin.plugin/Contents/Home</code></p>\n</li>\n<li><p>JDKs downloaded from Apple: <code>/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/</code></p>\n</li>\n<li><p>JDKs downloaded from Oracle: <code>/Library/Java/JavaVirtualMachines/jdk1.8.0_11.jdk/Contents/Home</code></p>\n</li>\n</ol>\n</blockquote>\n<hr />\n<h3>Resources</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/19039752/removing-java-8-jdk-from-mac\">Removing Java 8 JDK from Mac</a></li>\n<li><a href=\"http://hanxue-it.blogspot.ch/2014/05/installing-java-8-managing-multiple.html\" rel=\"noreferrer\">http://hanxue-it.blogspot.ch/2014/05/installing-java-8-managing-multiple.html</a></li>\n<li><a href=\"http://sourabhbajaj.com/mac-setup/index.html\" rel=\"noreferrer\">http://sourabhbajaj.com/mac-setup/index.html</a></li>\n<li><a href=\"http://brew.sh\" rel=\"noreferrer\">http://brew.sh</a></li>\n<li><a href=\"https://github.com/Homebrew/homebrew/tree/master/share/doc/homebrew#readme\" rel=\"noreferrer\">https://github.com/Homebrew/homebrew/tree/master/share/doc/homebrew#readme</a></li>\n<li><a href=\"http://sourabhbajaj.com/mac-setup/Homebrew/README.html\" rel=\"noreferrer\">http://sourabhbajaj.com/mac-setup/Homebrew/README.html</a></li>\n<li>&quot;brew tap” explained <a href=\"https://github.com/Homebrew/homebrew/blob/master/share/doc/homebrew/brew-tap.md\" rel=\"noreferrer\">https://github.com/Homebrew/homebrew/blob/master/share/doc/homebrew/brew-tap.md</a></li>\n<li>“brew versions” explained <a href=\"https://stackoverflow.com/questions/3987683/homebrew-install-specific-version-of-formula\">Homebrew install specific version of formula?</a> and also <a href=\"https://github.com/Homebrew/homebrew-versions\" rel=\"noreferrer\">https://github.com/Homebrew/homebrew-versions</a></li>\n<li><a href=\"https://github.com/caskroom/homebrew-cask\" rel=\"noreferrer\">https://github.com/caskroom/homebrew-cask</a></li>\n<li>“cask versions”, similar to “brew versions”, see <a href=\"https://github.com/caskroom/homebrew-versions\" rel=\"noreferrer\">https://github.com/caskroom/homebrew-versions</a> and also <a href=\"https://github.com/caskroom/homebrew-cask/issues/9447\" rel=\"noreferrer\">https://github.com/caskroom/homebrew-cask/issues/9447</a></li>\n<li><a href=\"http://www.jenv.be\" rel=\"noreferrer\">http://www.jenv.be</a></li>\n<li><a href=\"https://github.com/gcuisinier/jenv\" rel=\"noreferrer\">https://github.com/gcuisinier/jenv</a></li>\n</ul>\n"},{"answer_id":32662139,"body":"<p>I am using Mac OS X 10.9.5. This is how I manage multiple JDK/JRE on my machine when I need one version to run application A and use another version for application B.</p>\n\n<p>I created the following script after getting some help online.</p>\n\n<pre><code>#!bin/sh\nfunction setjdk() {\n  if [ $# -ne 0 ]; then\n   removeFromPath '/Library/Java/JavaVirtualMachines/'\n   if [ -n \"${JAVA_HOME+x}\" ]; then\n    removeFromPath $JAVA_HOME\n   fi\n   export JAVA_HOME=/Library/Java/JavaVirtualMachines/$1/Contents/Home\n   export PATH=$JAVA_HOME/bin:$PATH\n  fi\n }\n function removeFromPath() {\n  export PATH=$(echo $PATH | sed -E -e \"s;:$1;;\" -e \"s;$1:?;;\")\n }\n#setjdk jdk1.8.0_60.jdk\nsetjdk jdk1.7.0_15.jdk\n</code></pre>\n\n<p>I put the above script in .profile file. Just open terminal, type vi .profile, append the script with the above snippet and save it. Once your out type <code>source .profile</code>, this will run your profile script without you having to restart the terminal. Now type <code>java -version</code> it should show 1.7 as your current version. If you intend to change it to 1.8 then comment the line <code>setjdk jdk1.7.0_15.jdk</code> and uncomment the line <code>setjdk jdk1.8.0_60.jdk</code>. Save the script and run it again with source command. I use this mechanism to manage multiple versions of JDK/JRE when I have to compile 2 different Maven projects which need different java versions.</p>\n"},{"comments":[{"comment_id":64944768,"body":"Do not put images of your commands, it makes difficult to copy/paste them. To highlight commands, use the backticks &quot;`&quot; for a single word or a short command, or indent your command with 4 spaces on its own line (or multiples of 4 in lists)."},{"comment_id":64959629,"body":"Thanks Seki. I was struggling to post images and spent a long time trying to format but could not get it right. Thanks for sharing the backticks info."},{"comment_id":87852456,"body":"I think you may have used the same image four times."}],"answer_id":38471619,"body":"<p>As found on this <a href=\"http://javahabit.com/2015/03/30/install-or-manage-multiple-versions-of-java-on-os-x/\" rel=\"nofollow noreferrer\">website</a>\nSo Let’s begin by installing jEnv</p>\n\n<ol>\n<li><p>Run this in the terminal</p>\n\n<pre><code>brew install https://raw.github.com/gcuisinier/jenv/homebrew/jenv.rb\n</code></pre></li>\n<li><p>Add jEnv to the bash profile</p>\n\n<pre><code>if which jenv &gt; /dev/null; then eval \"$(jenv init -)\"; fi\n</code></pre></li>\n<li><p>When you first install jEnv will not have any JDK associated with it.</p>\n\n<p>For example, I just installed JDK 8 but jEnv does not know about it. To check Java versions on jEnv</p>\n\n<p>At the moment it only found Java version(jre) on the system. The <code>*</code> shows the version currently selected. Unlike rvm and rbenv, jEnv cannot install JDK for you. You need to install JDK manually from Oracle website.</p></li>\n<li><p>Install JDK 6 from Apple website. This will install Java in <code>/System/Library/Java/JavaVirtualMachines/</code>. The reason we are installing Java 6 from Apple website is that SUN did not come up with JDK 6 for MAC, so Apple created/modified its own deployment version.</p></li>\n<li><p>Similarly install JDK7 and JDK8.</p></li>\n<li><p>Add JDKs to jEnv.</p>\n\n<p>JDK 6:</p>\n\n<p>JDK 7:\n<a href=\"https://i.stack.imgur.com/wOedB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wOedB.png\" alt=\"http://javahabi@javahabit.com/wp-content/uploads/2015/03/img_5518ab9bc47d4.png\"></a></p>\n\n<p>JDK 8:\n<a href=\"https://i.stack.imgur.com/wOedB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wOedB.png\" alt=\"http://javahabi@javahabit.com/wp-content/uploads/2015/03/img_5518abb2c1217.png\"></a></p></li>\n<li><p>Check the java versions installed using jenv</p>\n\n<p><a href=\"https://i.stack.imgur.com/wOedB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wOedB.png\" alt=\"http://javahabi@javahabit.com/wp-content/uploads/2015/03/img_5518abceb0deb.png\"></a></p></li>\n<li><p>So now we have 3 versions of Java on our system. To set a default version use the command</p>\n\n<pre><code>jenv local &lt;jenv version&gt;\n</code></pre>\n\n<p>Ex – I wanted Jdk 1.6 to start IntelliJ</p>\n\n<pre><code>jenv local oracle64-1.6.0.65\n</code></pre></li>\n<li><p>check the java version</p>\n\n<p>java -version\n<a href=\"https://i.stack.imgur.com/wOedB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wOedB.png\" alt=\"http://javahabi@javahabit.com/wp-content/uploads/2015/03/img_5518abe376dd0.png\"></a></p></li>\n</ol>\n\n<p>That’s it. We now have multiple versions of java and we can switch between them easily. jEnv also has some other features, such as wrappers for Gradle, Ant, Maven, etc, and the ability to set JVM options globally or locally. Check out the documentation for more information.</p>\n"},{"answer_id":40335318,"body":"<p>Jenv on Mac Sierra:</p>\n\n<p>if not working after install, do this bug fix to add java executable to path</p>\n\n<pre><code>export PATH=\"$HOME/.jenv/shims:$PATH\"\n</code></pre>\n\n<p>even though <code>eval \"$(jenv init -)\"</code> could do this job. The reason is /bin folder is not there anymore as describe in it's homepage, but shim folder is used as /bin instead.</p>\n\n<ul>\n<li>Make sure ~/.jenv is there</li>\n<li><code>which java</code> may print /Library/...</li>\n<li>jenv global 1.8</li>\n<li>jenv shell 1.8</li>\n</ul>\n\n<p>Eventually, <code>which java</code> gives you:</p>\n\n<blockquote>\n  <p>/Users/xxxx/.jenv/shims/java</p>\n</blockquote>\n"},{"answer_id":43643804,"body":"<p>I find this Java version manager called <a href=\"https://github.com/shyiko/jabba\" rel=\"noreferrer\">Jabba</a> recently and the usage is very similar to version managers of other languages like rvm(ruby), nvm(node), pyenv(python), etc. Also it's cross platform so definitely it can be used on Mac. </p>\n\n<p>After installation, it will create a dir in ~/.jabba to put all the Java versions you install. It \"Supports installation of Oracle JDK (default) / Server JRE, Zulu OpenJDK (since 0.3.0), IBM SDK, Java Technology Edition (since 0.6.0) and from custom URLs.\". </p>\n\n<p>Basic usage is listed on their Github. A quick summary to start: </p>\n\n<pre><code>curl -sL https://github.com/shyiko/jabba/raw/master/install.sh | bash &amp;&amp; . ~/.jabba/jabba.sh\n\n# install Oracle JDK\njabba install 1.8 # \"jabba use 1.8\" will be called automatically  \njabba install 1.7 # \"jabba use 1.7\" will be called automatically \n\n# list all installed JDK's\njabba ls\n\n# switch to a different version of JDK\njabba use 1.8\n</code></pre>\n"},{"comments":[{"comment_id":85304585,"body":"sdkman supports versions starting with java 1.7. If you&#39;re willing to use java 1.6 this solution may not be suitable for you."},{"comment_id":88606643,"body":"sdkman is great, but they dont support specific releases within a version. For example Datastax Dev Center only works with 1.8.0_151 but I can&#39;t specify that with sdkman. Hopefully they add more versions."},{"comment_id":88607624,"body":"If you have a local version, I think you can install it into SDKMan - <a href=\"https://sdkman.io/usage#localversion\" rel=\"nofollow noreferrer\">sdkman.io/usage#localversion</a> (but I haven&#39;t tried it)"},{"comment_id":127230284,"body":"This was the perfect solution for me. thank you. I wasn&#39;t happy with the way jenv worked (or lack of working in my case) but found this to be sdkman to get the job done for me allowing me to run LSP-Metal in sublime 3 and code scala."}],"answer_id":45134206,"body":"<p><a href=\"http://sdkman.io/\" rel=\"noreferrer\">SDKMAN!</a> is a great tool for using multiple versions of Java, Gradle, Groovy, Kotlin, and other JVM tools on Mac OS. Installation and usage doc are easily found on the main site.</p>\n<p>(I have no affiliation, just a happy user).</p>\n<p>As an example usage, if I type the following in a Terminal window, there is a list of available Java SDK versions (edited for brevity):</p>\n<pre><code>$ sdk list java\nAvailable Java Versions\n   + 9ea170                                                                        \n &gt; + 8u131                                                                         \n     7u141-zulu                     \n</code></pre>\n<p>Here <code>+</code> denotes that the version is installed. <code>&gt;</code> denotes which version is currently in use. To install a version:</p>\n<pre><code>$ sdk install java 7u141-zulu\n</code></pre>\n<p>To use a version in this Terminal window:</p>\n<pre><code>$ sdk use java 9ea170\n</code></pre>\n"},{"comments":[{"comment_id":93720577,"body":"Additionally, restart your terminal after <code>brew cask install java*</code>"},{"comment_id":96994652,"body":"Clear and great explanation step by step."},{"comment_id":101791310,"body":"Error: Cask &#39;java8&#39; is unavailable: No Cask with this name exists."},{"comment_id":102028338,"body":"java8/9/10 arent available anymore as casks. Try this instead:  &quot; brew cask install adoptopenjdk/openjdk/adoptopenjdk8 &quot;"},{"comment_id":102151225,"body":"By default <code>jenv</code> does not set <code>JAVA_HOME</code> environment variable. You need to enable the plugin by <code>jenv enable-plugin export</code>."},{"comment_id":102456662,"body":"<code>brew tap caskroom&#47;versions</code> should be <code>brew tap homebrew&#47;cask-versions</code>"},{"comment_id":104796555,"body":"Great work!  Even better than steps 7, 8 use - <code>&#47;usr&#47;libexec&#47;java_home -V</code> and then <code>jenv add &lt;what that returns&gt;</code> or you could script it - <code>for ver in $(&#47;usr&#47;libexec&#47;java_home -V 2&gt;&amp;1 &gt;&#47;dev&#47;null | grep -v Matching | awk &#39;{print $1}&#39;); do echo X: $(jenv add $(&#47;usr&#47;libexec&#47;java_home -v$ver)); done</code>"},{"comment_id":104796572,"body":"The <code>2&gt;&amp;1 &gt;&#47;dev&#47;null</code> is because the versions from java_home are printed to <code>STDERR</code> and the actual version being used is printed to <code>STDOUT</code>."},{"comment_id":108041084,"body":"Great instructions; I&#39;m on osx 10.15.3; step 3 above duplicates step 2; also, /Library/Java/Extensions was working for Java SE 8, but doesn&#39;t work for adoptopenjdk-9, so I use &quot;java -cp &#39;path_to_jars&#39;&quot; instead, which is awkward."},{"comment_id":113807134,"body":"When running <code>jenv add &lt;&gt;</code>, if you get an error like this :  <code>ln: ~&#47;.jenv&#47;versions&#47;openjdk64-11.0.8: No such file or directory</code>, then it means .jenv/versions folder is missing; creating one (<code>mkdir ~&#47;.jenv&#47;versions</code>), then re-running <code>jenv add &lt;&gt;</code> should solve the problem"},{"comment_id":131357642,"body":"Many of these tips/instructions are applicable to other mac versions (including M1s)"}],"answer_id":47699905,"body":"<h2>For macOS Sierra 420</h2>\n<p>This guide was cobbled together from various sources (replies above as well as other posts), and works perfect.</p>\n<h3>0. If you haven't already, install homebrew.</h3>\n<p>See <a href=\"https://brew.sh/\" rel=\"noreferrer\">https://brew.sh/</a></p>\n<h3>1. Install jenv</h3>\n<pre><code>brew install jenv\n</code></pre>\n<h3>2. Add jenv to the bash profile</h3>\n<pre><code>if which jenv &gt; /dev/null; then eval &quot;$(jenv init -)&quot;; fi\n</code></pre>\n<h3>3. Add jenv to your path</h3>\n<pre><code>export PATH=&quot;$HOME/.jenv/shims:$PATH&quot;\n</code></pre>\n<h3>4. Tap &quot;homebrew/cask-versions&quot;</h3>\n<p>FYI: &quot;Tap&quot; extends brew's list of available repos it can install, above and beyond brew's default list of available repos.</p>\n<pre><code>brew tap homebrew/cask-versions\n</code></pre>\n<h3>5. Install the latest version of java</h3>\n<pre><code>brew install java --cask\n</code></pre>\n<h3>6. Install java 6 (or 7 or 8 whatever you need)</h3>\n<pre><code>brew install java6 --cask\n#brew install java7 --cask\n#brew install java8 --cask\n</code></pre>\n<p>? Maybe close and restart Terminal so it sees any new ENV vars that got setup.</p>\n<h3>7. Review Installations</h3>\n<p>All Java version get installed here: <code>/Library/Java/JavaVirtualMachines</code> lets take a look.</p>\n<pre><code>ls -la /Library/Java/JavaVirtualMachines\n</code></pre>\n<h3>8. Add each path to jenv one-at-a-time.</h3>\n<p>We need to add &quot;/Contents/Home&quot; to the version folder.\nWARNING: Use the actual paths on your machine... these are just <em><strong>EXAMPLE</strong></em>'s</p>\n<pre><code>jenv add /Library/Java/JavaVirtualMachines/1.6.0___EXAMPLE___/Contents/Home\njenv add /Library/Java/JavaVirtualMachines/jdk-9.0.1.jdk___EXAMPLE___/Contents/Home\n</code></pre>\n<h3>9. Check if jenv registered OK</h3>\n<pre><code>jenv versions\n</code></pre>\n<h3>10. Set java version to use (globably)</h3>\n<p>Where XX matches one of the items in the versions list above.</p>\n<pre><code>jenv global XX\n</code></pre>\n<h3>Check java version</h3>\n<pre><code>java -version\n</code></pre>\n<h3>Check jenv versions</h3>\n<p>Should also indicate the current version being used with an asterisk.</p>\n<pre><code>jenv versions\n</code></pre>\n<h3>DONE</h3>\n<hr />\n<h2>Quick future reference</h2>\n<p>To change java versions</p>\n<p>... See the list of available java versions</p>\n<pre><code>jenv versions\n</code></pre>\n<p>... then, where XX matches an item in the list above</p>\n<pre><code>jenv global XX\n</code></pre>\n"},{"answer_id":49672875,"body":"<p>Here's a more DRY version for bash (Based on Vegard's answer)</p>\n\n<p>Replace 1.7 and 1.8 with whatever versions you are interested with\nand you'll get an alias called 'javaX'; where 'X' is the java version (7 / 8 in the snippet below) that will allow you to easily switch versions</p>\n\n<pre><code>for version in 1.7 1.8; do\n    v=\"${version: -1}\"\n    h=JAVA_\"$v\"_HOME\n\n    export \"$h\"=$(/usr/libexec/java_home -v $version)\n\n    alias \"java$v\"=\"export JAVA_HOME=\\$$h\"\ndone\n</code></pre>\n"},{"answer_id":60433293,"body":"<p>In the same spirit than @Vegard (lightweight):</p>\n\n<ul>\n<li>Install the wanted JDKs with Homebrew</li>\n<li><p>Put this <code>jdk</code> bash function and a default in your <code>.profile</code></p>\n\n<pre><code>jdk() {\n    version=$1\n    export JAVA_HOME=$(/usr/libexec/java_home -v\"$version\");\n    java -version\n }\n\nexport JAVA_HOME=$(/usr/libexec/java_home -v11); # Your default version\n</code></pre></li>\n<li><p>and then, to switch your jdk, you can do </p>\n\n<pre><code> jdk 9\n jdk 11\n jdk 13\n</code></pre></li>\n</ul>\n\n<p>Based on <a href=\"https://github.com/AdoptOpenJDK/homebrew-openjdk\" rel=\"noreferrer\">https://github.com/AdoptOpenJDK/homebrew-openjdk</a>.</p>\n"},{"answer_id":61918234,"body":"<p>To install more recent versions of OpenJDK, I use this. Example for OpenJDK 14:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>brew info adoptopenjdk\nbrew tap adoptopenjdk/openjdk\nbrew cask install adoptopenjdk14\n</code></pre>\n\n<p>See <a href=\"https://github.com/AdoptOpenJDK/homebrew-openjdk\" rel=\"nofollow noreferrer\">https://github.com/AdoptOpenJDK/homebrew-openjdk</a> for current info.</p>\n"},{"answer_id":64478886,"body":"<p>I followed steps in below link - <a href=\"https://medium.com/@euedofia/fix-default-java-version-on-maven-on-mac-os-x-156cf5930078\" rel=\"nofollow noreferrer\">https://medium.com/@euedofia/fix-default-java-version-on-maven-on-mac-os-x-156cf5930078</a> and it worked for me.</p>\n<pre><code>cd /usr/local/Cellar/maven/3.5.4/bin/\nnano mvn\n--Update JAVA_HOME -&gt; &quot;${JAVA_HOME:-$(/usr/libexec/java_home)}&quot;\nmvn -version\n</code></pre>\n"},{"comments":[{"comment_id":120175462,"body":"what is the difference between <code>sdkman</code> and <code>jenv</code>?"},{"comment_id":120189052,"body":"@Exploring jenv is also a good option, sdkman include also kotlin, gradle, maven, ant, asciidotorJ and many other tools needed for a developer"}],"answer_id":64479569,"body":"<p>I answer lately and I really recommand you to use <a href=\"https://sdkman.io/\" rel=\"noreferrer\">SDKMAN</a> instead of Homebrew.</p>\n<p>With SDKMAN you can install easily different version of JAVA in your mac and switch from on version to another.</p>\n<p><a href=\"https://i.stack.imgur.com/Xoww2.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Xoww2.png\" alt=\"Java in your mac\" /></a></p>\n<p>You can also use SDKMAN for ANT, GRADLE, KOTLIN, MAVEN, SCALA, etc...</p>\n<p>To install a version in your mac you can run the command sdk install java 15.0.0.j9-adpt\n<a href=\"https://i.stack.imgur.com/AWd2q.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/AWd2q.png\" alt=\"cmd\" /></a></p>\n"},{"answer_id":64738183,"body":"<p><strong>New commands for installing Java via Homebrew:</strong></p>\n<ul>\n<li><code>brew cask install adoptopenjdk/openjdk/adoptopenjdk8</code></li>\n<li><code>brew cask install adoptopenjdk/openjdk/adoptopenjdk11</code></li>\n</ul>\n<p>See the <a href=\"https://github.com/AdoptOpenJDK/homebrew-openjdk\" rel=\"nofollow noreferrer\">homebrew-openjdk</a> repo for the latest commands.</p>\n<p><strong>Installing Java</strong></p>\n<p>You can install Java via Homebrew, Jabba, SDKMAN or manually.  See <a href=\"https://stackoverflow.com/a/52524114/1125159\">this answer</a> for details on all the commands.</p>\n<p><strong>Switching Java versions</strong>*</p>\n<p>You can switch Java versions with <a href=\"https://mungingdata.com/java/jenv-multiple-versions-java/\" rel=\"nofollow noreferrer\">jenv</a> Jabba, SDKMAN or manually.  See details on all the switching commands <a href=\"https://stackoverflow.com/questions/52524112/how-do-i-install-java-on-mac-osx-allowing-version-switching/52524114#52524114\">here</a>.</p>\n<p><strong>Best solutions</strong></p>\n<ul>\n<li>Jabba is designed to work on multiple platforms, so it's a good option if you want a solution that'll also work on Windows</li>\n<li>Using Homebrew to download Java versions and jenv to switch versions provides a nice workflow.  jenv makes it easy to work with Java versions stored in any directory on your machine, so it's a good alternative if you're interested in storing Java in non-default directories.</li>\n<li>Using SDKMAN to download Javas and switch versions is another great alternative</li>\n<li>Manually switching should be avoided because it's an unnecessary headache.</li>\n</ul>\n<p><strong>Function to manually switch Java versions</strong></p>\n<p>Here's the Bash / ZSH function for manually switching Java versions (by <a href=\"https://github.com/AdoptOpenJDK/homebrew-openjdk\" rel=\"nofollow noreferrer\">OpenJDK</a>):</p>\n<pre><code>jdk() {\n        version=$1\n        export JAVA_HOME=$(/usr/libexec/java_home -v&quot;$version&quot;);\n        java -version\n }\n</code></pre>\n<p>There are great tools for switching Java versions, so I highly recommend against doing it manually.</p>\n"},{"answer_id":65902419,"body":"<p>Manage multiple java version in MAC using jenv</p>\n<ol>\n<li><p>Install homebrew using following command</p>\n<pre><code>/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)&quot;\n</code></pre>\n</li>\n<li><p>install jenv and activate jenv</p>\n<pre><code>brew install jenv\n\necho 'eval &quot;$(jenv init -)&quot;' &gt;&gt; ~/.bash_profile\n</code></pre>\n</li>\n<li><p>tap cask-versions</p>\n<pre><code>brew tap homebrew/cask-versions\n</code></pre>\n</li>\n<li><p>search available java version that can be installed</p>\n<pre><code>brew search java\n</code></pre>\n</li>\n<li><p>E.g. to install java6 use following command</p>\n<pre><code>brew install cask java6\n</code></pre>\n</li>\n<li><p>Add multiple versions of java in jenv</p>\n<pre><code>jenv add /Library/Java/JavaVirtualMachines/jdk1.8.0_231.jdk/Contents/Home\n\njenv add /Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home\n</code></pre>\n</li>\n</ol>\n<p>Note:- if you get error like <code>ln: /Users/&lt;username&gt;/.jenv/versions/oracle64-1.8.0.231: No such file or directory</code>, then run following:-</p>\n<pre><code>   mkdir -p /Users/&lt;username&gt;/.jenv/versions/oracle64-1.8.0.231\n</code></pre>\n<ol start=\"7\">\n<li><p>Rehash jenv after adding jdk’s</p>\n<pre><code>jenv rehash\n</code></pre>\n</li>\n<li><p>List known versions of java to jenv</p>\n<pre><code>jenv versions\n</code></pre>\n</li>\n<li><p>Set default version</p>\n<pre><code>jenv global oracle64-1.8.0.231\n</code></pre>\n</li>\n<li><p>Change java version for a project</p>\n<pre><code>jenv local oracle64-1.6.0.65\n</code></pre>\n</li>\n<li><p>set JAVA_HOME with the same version as jenv</p>\n<pre><code>jenv exec bash\n\necho $JAVA_HOME\n</code></pre>\n</li>\n</ol>\n"},{"comments":[{"comment_id":128626388,"body":"Did you mean to include a link with &quot;download and install the appropriate one from here&quot;?"},{"comment_id":133381074,"body":"No the link is to help download jdk from oracle site"}],"answer_id":66302476,"body":"<p>First, you need to make certain you have multiple JAVA versions installed.\nOpen a new Terminal window and input:</p>\n<pre><code>/usr/libexec/java_home -V\n</code></pre>\n<p>Your output should look like:</p>\n<pre><code>Matching Java Virtual Machines (2):\n11.0.1, x86_64: &quot;Java SE 11.0.1&quot; /Library/Java/JavaVirtualMachines/jdk-11.0.1.jdk/Contents/Home\n1.8.0_201, x86_64: &quot;Java SE 8&quot; /Library/Java/JavaVirtualMachines/jdk1.8.0_201.jdk/Contents/Home\n</code></pre>\n<p>Note that there are two JDKs available. If you don’t notice the Java version you need to switch to, download and install the appropriate one from here <a href=\"https://www.oracle.com/java/technologies/downloads/\" rel=\"noreferrer\">https://www.oracle.com/java/technologies/downloads/</a>\n(JDK 8 is represented as 1.8) .\nOnce you have installed the appropriate JDK, repeat this step.</p>\n<ol start=\"2\">\n<li><p>Take note of the JDK version you want to switch to. For example, “11.0” and “1.8” are the JDK versions available in the example above.</p>\n</li>\n<li><p>Switch to the desired version. For example, if you wish to switch to JDK 8, input the following line:</p>\n<p>export JAVA_HOME=<code>/usr/libexec/java_home -v 1.8</code></p>\n</li>\n</ol>\n<p>For 11.0, switch “1.8” with “11.0”\n4. Check your JDK version by inputting into Terminal:</p>\n<pre><code>java -version\n</code></pre>\n<p>If you have followed all the steps correctly, the JDK version should correlate with the one you specified in the last step.\n5. (Optional) To make this the default JDK version, input the following in Terminal:</p>\n<pre><code>open ~/.bash_profile\n</code></pre>\n<p>Then, add your Terminal input from step 3 to this file:</p>\n<h1>SWITCH TO JAVA VERSION 8</h1>\n<pre><code>export JAVA_HOME=`/usr/libexec/java_home -v 1.8`\n</code></pre>\n<p>Save and close the file.</p>\n"},{"answer_id":66491131,"body":"<p>Here is a great tutorial\n<a href=\"https://medium.com/@chamikakasun/how-to-manage-multiple-java-version-in-macos-e5421345f6d0\" rel=\"nofollow noreferrer\">https://medium.com/@chamikakasun/how-to-manage-multiple-java-version-in-macos-e5421345f6d0</a>\nby using jEnv installed by brew</p>\n<p>or you can check out homebrew-openjdk\n<a href=\"https://github.com/AdoptOpenJDK/homebrew-openjdk\" rel=\"nofollow noreferrer\">https://github.com/AdoptOpenJDK/homebrew-openjdk</a> managing version using brew Tap</p>\n"},{"comments":[{"comment_id":128950367,"body":"This is good! Do you really need: export PATH=$PATH:$JAVA_HOME/bin; ?"}],"answer_id":70514924,"body":"<p>I know that this question already have a lot of answers, but I want to share my solution only using Temurin and bash.</p>\n<blockquote>\n<p><a href=\"https://github.com/AdoptOpenJDK/homebrew-openjdk\" rel=\"nofollow noreferrer\">AdoptOpenJdk</a> is deprecated and that is why I'm using <a href=\"https://adoptium.net/\" rel=\"nofollow noreferrer\">Temurin</a>.</p>\n</blockquote>\n<hr />\n<p><strong>1.</strong> Download Temurin using the mirrors or a package manager</p>\n<p><code>$ brew install --cask temurin</code></p>\n<p>And for other versions (like Java 8):</p>\n<p><code>$ brew tap homebrew/cask-versions</code></p>\n<p><code>$ brew install --cask temurin8</code></p>\n<hr />\n<p><strong>2.</strong> Add a bash script into your bash profile</p>\n<p>Open your <code>~/.zshrc</code> or <code>~/.bash_profile</code> (depending on what you're using it)</p>\n<p>And add this code:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>set-jdk() {\n    jdkversion=$1\n    export JAVA_HOME=/Library/Java/JavaVirtualMachines/temurin-&quot;$jdkversion&quot;.jdk/Contents/Home;\n    export PATH=$PATH:$JAVA_HOME/bin;\n    java -version\n}\n</code></pre>\n<hr />\n<p><strong>3.</strong> Restart your terminal and change your Java version</p>\n<p><code>$ set-jdk N</code> N being the Java version that you want and it's already installed</p>\n<p>e.g.\n<code>$ set-jdk 8</code> To change to Java 8 / 1.8</p>\n<hr />\n<p>Few considerations:</p>\n<ul>\n<li>It will only keep the Java version on the terminal session that you used the <code>set-jdk</code> command</li>\n<li>It won't set the Java version as global</li>\n<li>When you want to add the JAVA_HOME into another script/application, you can set <code>/Library/Java/JavaVirtualMachines/temurin-&lt;version&gt;.jdk/Contents/Home</code> (change the  for the desired Java version. Like this <a href=\"https://github.com/java-decompiler/jd-gui/issues/332#issuecomment-753706520\" rel=\"nofollow noreferrer\">JD-GUI example</a>)</li>\n</ul>\n<hr />\n<p><strong>Enjoy</strong></p>\n"},{"answer_id":73930077,"body":"<p>To find the available Java versions:</p>\n<pre><code>brew search java\n</code></pre>\n<p>To install the latest stable version (19 as of today):</p>\n<pre><code>brew info java\nbrew install java\n</code></pre>\n<p>For the system Java wrappers (eg: IDEs) to find the latest JDK, symlink it with:</p>\n<pre><code>sudo ln -sfn /opt/homebrew/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk\n</code></pre>\n<p>To install a specific version (11):</p>\n<pre><code>brew install java11\n</code></pre>\n<p>For the system, Java wrappers to find JDK 11:</p>\n<pre><code>sudo ln -sfn /opt/homebrew/opt/openjdk@11/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk-11.jdk\n</code></pre>\n<p>You can have one of the OpenJDK versions in your PATH. Add one of the following lines to your ~/.bash_profile</p>\n<pre><code>export PATH=&quot;/opt/homebrew/opt/openjdk/bin:$PATH\nexport PATH=&quot;/opt/homebrew/opt/openjdk@11/bin:$PATH\n</code></pre>\n<p>Then,</p>\n<pre><code>source ~/.bash_profile\n</code></pre>\n"},{"comments":[{"comment_id":133584676,"body":"That was super helpful thanks. Just FYI, if you run <code>brew tap homebrew&#47;cask-versions</code> then it will update your available casks and you can then install both Zulu versions. It works for me on Mac M1. <code>brew install --cask zulu8</code> and <code>brew install --cask zulu11</code>"},{"comment_id":133812929,"body":"side question: what are the differences between <code>openjdk</code>, <code>adoptopenjdk8</code>, <code>zulu</code>, etc? Why one will be preferred over the others?"},{"comment_id":133814118,"body":"@VimNing good one, but tbh, I don&#39;t know :-( it&#39;s just what worked for me."}],"answer_id":75033147,"body":"<p>As of <code>2023</code>, <code>brew install --cask zulu8</code> didn't work for me on <code>Apple</code> chip. <code>brew install openjdk@8</code> also didn't not. The only one solution worked for me was <code>brew install --cask adoptopenjdk8</code> and then of course <code>vim ~/.zshrc</code> and inside:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>export JAVAC_HOME=/Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home/\nexport JAVA_11_HOME=$(/usr/libexec/java_home -v11)\nexport JAVA_8_HOME=$(/usr/libexec/java_home -v1.8)\nalias javac8='export JAVA_HOME=$JAVAC_HOME'\nalias java11='export JAVA_HOME=$JAVA_11_HOME'\nalias java8='export JAVA_HOME=$JAVA_8_HOME'\n</code></pre>\n<p>switch from terminal using <code>javac8</code> to a freshly installed (different) version. Note: you can have different <code>Java</code> versions than me, so it's just an example.</p>\n<p>Edit: for some reason it takes some time once it's activate. It seems to me a restart of a laptop is needed.</p>\n"},{"comments":[{"comment_id":133812909,"body":"@ValerijDobler You should improve your grammar. Back to the topic: this is a valid answer to me."}],"answer_id":75440610,"body":"<p>I solved this error on my mac m1 air just by adding the path of new jdk version in ~/.zshrc file.</p>\n<pre><code>export PATH=&quot;SPATH:/Users/ayushpattnaik/Documents/Deyeloper/flutter/bin&quot;\nexport JAVA_HOME=nibrary/Jaya/JayaVirtualMachines/openjdk-11.jdk/Contents/Home\n</code></pre>\n<pre class=\"lang-bash prettyprint-override\"><code>[ayushpattnaik@Ayushs—MacBook—Air ~ % java —version\nopenjdk version &quot;11.0.18&quot; 2023-01-17 \nOpenJDK Runtime Environment Homebrew (build 11.0.18+0) \nOpenJDK 64—Bit Server VM Homebrew (build 11.0.18+0, mixed mode)\n</code></pre>\n<p>I have multiple jdks in my <code>/Library/Java/JavaVirtualMachines</code> path. So I can choose any version I wish to set as my default java path.</p>\n"}],"last_activity_date":1684324227,"question_id":26252591,"body":"<p>How can I install an additional java on MacOS?  I installed jdk8 and that works fine. But now I need a jdk7 installation for development purposes. When trying to install the old version via DMG file, i get a warning, that there is already a newer version of java installed and the installer quits.</p>\n<pre><code>    /usr/libexec/java_home -verbose\n    Matching Java Virtual Machines (1):\n        1.8.0_20, x86_64:   &quot;Java SE 8&quot; /Library/Java/JavaVirtualMachines/jdk1.8.0_20.jdk/Contents/Home\n\n       /Library/Java/JavaVirtualMachines/jdk1.8.0_20.jdk/Contents/Home\n</code></pre>\n<p>How to install jdk7 in addition to this one?</p>\n"},{"last_activity_date":1684324104,"question_id":76271768,"body":"<p>I'm making a push notification system with spring boot back-end, this is my whole code: <a href=\"https://github.com/jaa-bot/vaadin-flow-web-push-notifications.git\" rel=\"nofollow noreferrer\">https://github.com/jaa-bot/vaadin-flow-web-push-notifications.git</a> , it's a code that I found on the internet and what I try in my application is to save the token (endpint, auth and p256dh) in a database, which I do successfully. My application consists of a check box that makes the user receive or stop receiving notifications depending on whether it is activated or not enter image description here as seen in the image if the button is active I collect the token and save it in the database and when you deactivate it, I delete it from the database and if you activate it again, it generates another new token and I save it, below I have a text box and a button, before pressing the button I collect all the tokens from the database And when I click on the button, it sends the message to all the browsers that are saved in the database.This is the problem:</p>\n<pre><code>java.lang.IllegalArgumentException: Invalid point encoding 0x-21 at org.bouncycastle.math.ec.ECCurve.decodePoint(ECCurve.java:443) ~[ bcprov-jdk15on-1.70.jar:1.70.0] en nl.martijndwars.webpush.Utils.loadPublicKey(Utils.java:61) ~[web-push-5.1.1.jar:na] en nl.martijndwars.webpush. Utils.loadPublicKey(Utils.java:49) ~[web-push-5.1.1.jar:na] en nl.martijndwars.webpush.Notification.(Notification.java:86) ~[web-push-5.1.1. jar:na] en nl.martijndwars.webpush.Notification.(Notification.java:95) ~[web-push-5.1.1.jar:na] en org.vaadin.marcus.webpush.WebPushService.sendNotification(WebPushService.java :76) ~[clases/:na] en org.vaadin.marcus.webpush.WebPushService.notifyAll(WebPushService.java:138) ~[clases/:na] en org.vaadin.marcus.views.PushView.lambda$2( PushView.java:47) ~[clases/:na] \n</code></pre>\n<p>and I thought that it may be when collecting the data from the database that it has been collected in another format or something similar, but I can't find the error, in my code I have the error, it appears in the sendNotification method on the line: HttpResponse response = pushService.send(notification); My entire code is in the git hub link in case you have to look at something else, The database is simple, they are an endpoint field such as primary key, auth, p256dh and another called id_user that is to be able to send a notification to a specific user</p>\n<pre><code>import java.io.InputStream;\nimport java.security.GeneralSecurityException;\nimport java.security.Security;\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.concurrent.ExecutionException;\n\nimport java.nio.charset.StandardCharsets;\nimport java.util.Base64;\n\nimport org.apache.commons.io.IOUtils;\nimport org.apache.http.HttpResponse;\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\nimport org.jose4j.lang.JoseException;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.stereotype.Service;\nimport org.vaadin.marcus.controller.TokenController;\nimport org.vaadin.marcus.entity.Token;\n\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\nimport jakarta.annotation.PostConstruct;\nimport nl.martijndwars.webpush.Notification;\nimport nl.martijndwars.webpush.PushService;\nimport nl.martijndwars.webpush.Subscription;\nimport nl.martijndwars.webpush.Subscription.Keys;\n\n@Service\npublic class WebPushService {\n\n    @Value(&quot;${vapid.public.key}&quot;)\n    private String publicKey;\n    @Value(&quot;${vapid.private.key}&quot;)\n    private String privateKey;\n    @Value(&quot;${vapid.subject}&quot;)\n    private String subject;\n\n    private PushService pushService;\n\n    @Autowired\n    private TokenController tokenController;\n\n    // almacena los endpoints de las suscripciones\n    private final List&lt;Token&gt; endpointToSubscription = new ArrayList&lt;&gt;();\n\n    // metodo para inicializar el pushService\n    @PostConstruct\n    private void init() throws GeneralSecurityException {\n        Security.addProvider(new BouncyCastleProvider());\n        //publicKey = Base64.getEncoder().encodeToString(publicKey.getBytes(StandardCharsets.UTF_8));\n        //privateKey = Base64.getEncoder().encodeToString(privateKey.getBytes(StandardCharsets.UTF_8));\n        pushService = new PushService(publicKey, privateKey, subject);\n        this.endpointToSubscription.addAll(tokenController.list());\n    }\n\n    public String getPublicKey() {\n        return publicKey;\n    }\n\n    // metodo que envia las notificaiones, que recibe el mansaje que tiene que\n    // enviarle y el objeto tipo Subscription\n    public void sendNotification(Token subscription, String messageJson) {\n        try {\n            System.out.println(&quot;EN EL METODO SEND NOTIFICATION: &quot; + subscription.getEndpoint());\n            System.out.println(&quot; auth: &quot; + subscription.getAuth() + &quot; p256dh: &quot; + subscription.getP256dh());\n\n            \n\n            Keys keys = new Keys(String.valueOf(subscription.getAuth()), String.valueOf(subscription.getP256dh()));\n            Subscription subs = new Subscription(String.valueOf(subscription.getEndpoint()), keys);\n            Notification notification = new Notification(subs, messageJson);\n\n            HttpResponse response = pushService.send(notification);\n\n                    System.out.println(&quot;holaaaaaaaaa&quot;);\n\n                    \n\n            int statusCode = response.getStatusLine().getStatusCode();\n            if (statusCode != 201) {\n                System.out.println(&quot;Error del servidor, codigo del error:&quot; + statusCode);\n                InputStream content = response.getEntity().getContent();\n                List&lt;String&gt; strings = IOUtils.readLines(content, &quot;UTF-8&quot;);\n                System.out.println(strings);\n            }\n        } catch (GeneralSecurityException | IOException | JoseException | ExecutionException\n                | InterruptedException e) {\n                    System.out.println(&quot;YEEEAAAAH BUDDY&quot;);\n            e.printStackTrace();\n        }\n    }\n\n    // metodo para agregar al usuario a la memoria y enviarle notificaciones\n    public void subscribe(Token subscription) {\n        System.out.println(&quot;Endpoint: &quot; + subscription.getEndpoint() + &quot; auth: &quot; + subscription.getAuth() + &quot; p256dh: &quot;\n                + subscription.getP256dh());\n\n                System.out.println(&quot;ID DEL SUBCRIBE: &quot; + subscription.getEndpoint());\n\n                guardarToken(new Token(subscription.getEndpoint(), subscription.getAuth(), subscription.getP256dh(), &quot;JUAN&quot;));\n\n\n        // solo usaremos la URL del punto final como clave para almacenar suscripciones\n        // en la memoria.\n        // objetivo es guardar id del usuario y lo que necesita para enviar\n        // notificaciones que son el endpoint, auth, p256dh\n        endpointToSubscription.add(subscription);\n    }\n\n    // metodo que elimina el endpoint del mapa de las suscripciones\n    public void unsubscribe(Token subscription) {\n        System.out.println(&quot;Se fue:  &quot; + subscription.getEndpoint());\n\n        System.out.println(&quot;ID DEL UNSUBCRIBE: &quot; + subscription.getEndpoint());\n\n        eliminarToken(subscription.getEndpoint());\n        endpointToSubscription.remove(subscription);\n    }\n\n    public record Message(String title, String body) {\n    }\n\n    ObjectMapper mapper = new ObjectMapper();\n\n    // enviar notificacion a todos los usuarios que se han suscrito\n    public void notifyAll(String title, String body) {\n        try {\n            // crea un mensaje y envia la notificacion a todos los usuarios que se encuentan\n            // en el mapa, con el metodo sendNotification\n            String msg = mapper.writeValueAsString(new Message(title, body));\n\n            for(int i = 0; i &lt; endpointToSubscription.size(); i++){\n                sendNotification(endpointToSubscription.get(i), msg);\n            }\n            (endpointToSubscription).forEach(subscription -&gt; {\n                System.out.println(&quot;QUEEEE PASAAA??   &quot; + subscription);\n                sendNotification(subscription, msg);\n            });\n        } catch (JsonProcessingException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    /*\n     * public void notifyOneUser(String title, String body, int userId) {\n     * try {\n     * String msg = mapper.writeValueAsString(new Message(title, body));\n     * (endpointToSubscription).forEach(subscription -&gt; {\n     * //aqui un if que compare si existe en la base de datos un usuario con ese id\n     * if (existeUser(userId)) {\n     * sendNotification(subscription, msg);\n     * }\n     * else{\n     * System.out.println(&quot;No existe el usuario con id: &quot; + userId);\n     * }\n     * });\n     * } catch (JsonProcessingException e) {\n     * e.printStackTrace();\n     * throw new RuntimeException(e);\n     * }\n     * }\n     */\n\n     //tengo que mirar esto bien\n    public void guardarToken(Token token) {\n        String endpoint = token.getEndpoint();\n        String auth =token.getAuth();\n        String p256dh = token.getP256dh();\n\n        tokenController.añadirToken(new Token(endpoint, auth, p256dh, &quot;JUAN&quot;));\n    }\n\n    public void eliminarToken(String endpoint) {\n        endpoint = base64UrlEncode(endpoint);\n\n        tokenController.eliminarToken(endpoint);\n    }\n\n    public static String base64UrlEncode(String input) {\n        byte[] encodedBytes = Base64.getUrlEncoder().encode(input.getBytes(StandardCharsets.UTF_8));\n        return new String(encodedBytes, StandardCharsets.UTF_8)\n                .replace(&quot;+&quot;, &quot;-&quot;)\n                .replace(&quot;/&quot;, &quot;_&quot;)\n                .replaceAll(&quot;=+$&quot;, &quot;&quot;);\n    }\n\n    public static String base64UrlDecode(String input) {\n        input = input.replace(&quot;-&quot;, &quot;+&quot;).replace(&quot;_&quot;, &quot;/&quot;);\n        int padding = 4 - (input.length() % 4);\n        input += &quot;=&quot;.repeat(padding);\n\n        byte[] decodedBytes = Base64.getUrlDecoder().decode(input.getBytes(StandardCharsets.UTF_8));\n        return new String(decodedBytes, StandardCharsets.UTF_8);\n    }\n\n}```\n</code></pre>\n"},{"comments":[{"comment_id":97500942,"body":"Why you need to delete all, just create a new list with the last element is enough"},{"comment_id":97500966,"body":"Do take note that <code>.remove(...)</code> in a <code>for</code> loop is not correct. Please see: <a href=\"https://stackoverflow.com/questions/17279519/removing-items-from-a-list\" title=\"removing items from a list\">stackoverflow.com/questions/17279519/removing-items-from-a-l&zwnj;&#8203;ist</a>"},{"comment_id":97501000,"body":"Also, you cannot return a value from a <code>void</code> method. Given that this question is probably homework, I&#39;m assuming the point is to modify the <code>list</code> that was provided in the parameter, so creating a new <code>List&lt;String&gt;</code> is likely incorrect."}],"answers":[{"answer_id":55389827,"body":"<p>Pseudo code:</p>\n\n<pre><code>while (list.length() &gt; 1)\n{\n    list.removeElementAt(0);\n}\n</code></pre>\n"},{"comments":[{"comment_id":97501527,"body":"@KevinO <code>E remove(int index);</code> this is the method from javadoc.           ** @return the element that was removed from the list **"},{"comment_id":97501590,"body":"@KevinO oh sorry. OP done the same thing. i did&#39;t notice. thanks for feedback :) updated"}],"answer_id":55389954,"body":"<p>Change the <code>return</code> type <code>void</code> to <code>List&lt;String&gt;</code></p>\n\n<pre><code>public static List&lt;String&gt; allButLast(List&lt;String&gt; list)\n{\n   List&lt;String&gt; set = new ArrayList&lt;String&gt;();\n   String last=set.remove(set.size() - 1);\n   set.clear();\n   set.add(last);\n   return set;\n}\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>public static List&lt;String&gt; allButLast(List&lt;String&gt; list)\n{\n   List&lt;String&gt; set = new ArrayList&lt;String&gt;();\n   set.subList(0, set.size() - 1).clear();\n   return set;\n}\n</code></pre>\n"},{"answer_id":76271735,"body":"<p>Only create a new list with the last element</p>\n<pre><code>public static List&lt;String&gt; allButLast(List&lt;String&gt; list) {\n    List&lt;String&gt; set = new ArrayList&lt;String&gt;();\n    set.add(list.get(list.size()-1))\n    return set;\n}\n</code></pre>\n"}],"last_activity_date":1684323879,"question_id":55389773,"body":"<p>Implement a method below which deletes all but the last element from a given list.</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\npublic class MyClass {\npublic static void allButLast(List&lt;String&gt; list)\n{\n   List&lt;String&gt; set = new ArrayList&lt;String&gt;();\n   for (int k : list)\n   {\n      set.remove(0, -2);\n   }\n   return set;\n}\n</code></pre>\n\n<p>I just started programming and this is a practice question and I was wondering if this type of solution would make sense. I started from the first array block(0) and it stops at the the array block before the last element(-2) and removes it, only keeping the last element and returning it at the end.</p>\n"},{"answers":[{"comments":[{"comment_id":10157825,"body":"But that will skip all tests, when I need to skip only tests with compilation errors."},{"comment_id":10157883,"body":"Are you using JUnit tests? Maven can&#39;t select tests and ignore them. If you know which tests have compilation failures, using JUnit annotation, @Ignore, for that particular test."},{"comment_id":10157990,"body":"Adding @Ignore annotation will not help."},{"comment_id":10158118,"body":"You mean it&#39;s not helping? Have you tried it? At some higher level, I wondering why would you want to skip the tests that fail? You are going against the whole concept of testing! You should instead look at why they are failing!"}],"answer_id":8254756,"body":"<p><code>-DskipTests</code> usually works. For instance, <code>mvn install -DskipTests</code>.</p>\n\n<p>If you need to tell maven strictly to ignore - use <code>-Dmaven.test.skip=true</code>. This will force all the plugins and compiler to ignore the tests</p>\n\n<p>Edited: Looks like <code>-DskipTests=true</code> also works!</p>\n"},{"comments":[{"comment_id":10157851,"body":"But that will skip all tests, when I need to skip only tests with compilation errors."},{"comment_id":10157963,"body":"I haven&#39;t tried that before... (now I want to know as well :)) I do know that @Ignore at the top of the method, but that requires a code change."},{"comment_id":10158002,"body":"Adding @Ignore annotation will not help."},{"comment_id":10158281,"body":"@Ignore will skip the specific test... I also clarified that it will require a code change and does not work on the command line.  Nothing wrong with my statement."},{"comment_id":10158312,"body":"How junit @Ignore annotation will help maven compiler plugin to skip test compilation?"},{"comment_id":10158450,"body":"It will skip the test... maven will not run it. Try it."}],"answer_id":8254757,"body":"<p>Not recommended...</p>\n\n<pre><code>mvn -DskipTests=true clean compile\n</code></pre>\n\n<p>Remember, with great power comes great responsibility.</p>\n"},{"answer_id":8255122,"body":"<p>The <code>maven-compiler-plugin</code> is responsible for compiling your tests during the <code>test-compile</code> phase. This plugin is configured to fail the build if any test classes fail to compile. You could experiment with the <code>failOnError</code> configuration. But I doubt you'll get the results you expect. The compilation process stops immediately when it encounters a compilation error. So potentially issue free classes may not have been re-compiled. Therefore there will be no guarantee the <code>.class</code> files you execute during the <code>test</code> phase will be 'up to date' with the corresponding <code>.java</code> source files.</p>\n\n<pre><code>  &lt;plugin&gt;\n    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n    &lt;executions&gt;\n      &lt;execution&gt;\n        &lt;id&gt;default-testCompile&lt;/id&gt;\n        &lt;phase&gt;test-compile&lt;/phase&gt;\n        &lt;goals&gt;\n          &lt;goal&gt;testCompile&lt;/goal&gt;\n        &lt;/goals&gt;\n        &lt;configuration&gt;\n          &lt;failOnError&gt;false&lt;/failOnError&gt;\n        &lt;/configuration&gt;\n      &lt;/execution&gt;\n    &lt;/executions&gt;\n  &lt;/plugin&gt;\n</code></pre>\n"},{"answer_id":24484261,"body":"<p>use the following command to skip the entire test source folder. Through there are compilation errors in the test classes maven wont consider those, if you use the following command.</p>\n\n<pre><code>mvn clean install -Dmaven.test.skip=true\n</code></pre>\n"},{"answer_id":76271723,"body":"<p>The best way to use command line <code>mvn install -Dmaven.test.skip=true</code>.</p>\n<p>Reference: <a href=\"https://maven.apache.org/plugins-archives/maven-surefire-plugin-2.12.4/examples/skipping-test.html\" rel=\"nofollow noreferrer\">Maven skipping test</a></p>\n"}],"last_activity_date":1684323806,"question_id":8254700,"body":"<p>Are there an option to skip tests with compilation errors? Just ignore them or treat them as failed?</p>\n"},{"comments":[{"comment_id":134495482,"body":"Don&#39;t know if it would cause the error but you use &quot;OWNER&quot; twice with the getString(...) method."},{"comment_id":134495623,"body":"@camickr table &quot;ALL_OBJECTS &quot; query result have cloumn &quot;OWNER&quot;, it work for my anther oracle database, only this one will throw the exception."},{"comment_id":134495692,"body":"@Hulk before the stack it also have the log info from the method caller, the demo that I provide is extract from my application, and I am pretty sure the exception is from there."},{"comment_id":134495711,"body":"@camickr - The exception is in the <code>next</code> call itself.   Hulk - that looks like the full exception to me."},{"comment_id":134495765,"body":"This looks rather like <a href=\"https://stackoverflow.com/questions/43265593\">stackoverflow.com/questions/43265593</a>.  The diagnosis (from an SO user who is an Oracle engineer) was &quot;bug in Oracle&#39;s driver&quot;.  I suggest asking on Oracle&#39;s DB forums (which I can&#39;t access) or raising an Oracle support request / bug report."},{"comment_id":134497097,"body":"@StephenC I see the link you post and try it but doesn&#39;t work for me, I will go to Oracle&#39;s forums to see what I can find, thanks."}],"last_activity_date":1684323781,"question_id":76268252,"body":"<p>I am trying to through the oracle metadata table &quot;ALL_OBJECTS&quot; to query table info in my application, but everytime execute to <code>&quot;rs.next()&quot;</code> it throw the <code>AarrayIndexoutofBoundsException</code>, and I am pretty sure my code don't have that kind issue, it stuck me long for long time.</p>\n<p>The oracle version is <code>&quot;11.2&quot;</code> and spring boot version is <code>&quot;2.3.12&quot;</code>.</p>\n<p>I try a lot of ojdbc driver like: <code>&quot;ojdbc8-12.2.0.1.jar&quot;</code>, <code>&quot;ojdbc6-11.2.0.3.jar&quot;</code> and <code>&quot;ojdbc8-19&quot;</code> etc . also try to set Statement <code>&quot;setFetchSize()&quot;</code> but it doesn't work.</p>\n<p>Here is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void demo() {\n        List&lt;Map&lt;String, String&gt;&gt; resultList = new ArrayList&lt;&gt;();\n        String sql = &quot;SELECT * FROM ALL_OBJECTS O WHERE O.OWNER = 'LINEWELL' AND O.OBJECT_TYPE IN ('TABLE', 'VIEW')&quot;;\n        BasicDataSource datasource; // initial datasource\n        try (\n                Connection con = datasource.getConnection();\n                Statement stmt = con.createStatement();\n                ResultSet rs = stmt.executeQuery(sql)\n        ) {\n            while (rs.next()) {\n                Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\n                map.put(&quot;TableCatalog&quot;, rs.getString(&quot;OWNER&quot;));\n                map.put(&quot;TableSchema&quot;, rs.getString(&quot;OWNER&quot;));\n                map.put(&quot;TableName&quot;, rs.getString(&quot;OBJECT_NAME&quot;));\n                map.put(&quot;TableType&quot;, rs.getString(&quot;OBJECT_TYPE&quot;));\n                map.put(&quot;LastModifyTime&quot;, rs.getString(&quot;LAST_DDL_TIME&quot;));\n                resultList.add(map);\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        System.out.println(resultList.size());\n    }\n</code></pre>\n<p>Here is full stack infomation, The &quot;MyTest.java:88&quot; refer to &quot;new HashMap&lt;&gt;()&quot;.</p>\n<pre><code>Caused by:java.lang.ArrayIndexoutofBoundsException:3\n    at oracle.jdbc.driver.T4CTTIrxdsBitset.set (T4CTTIExd.java:1593)\n    at oracle.jdbe.driver.T4CTTIrxd.readBitVector (T4CTTIrxd.java:135)\n    at oracle.jdbe.driver.T4C8TTIrxh.unmazshalVl0 (T4C8TTIrxh.java:133)\n    at oracle.jdbe.driver.T4C80all.readRX(4C80all.java:693)\n    at oracle.jdbe.driver.T4CTTIfun.receive (T4CTTIfun.java:529)\n    at oracle.jdbe.driver.T4CTTIfun.doRPC (T4CTTIfun.java:252)\n    at oracle.jdbe.driver.T4C80all.doOALL (T4C80all.java:612)\n    at oracle.jdbe.driver.T4CStatement.dooal18 (T4CStatement.java:213)\n    at oracle.jdbc.driver.T4CStatement.fetch (T4CStatement.java:1009)\n    at oracle.jdbc.driver.Oraclestatement.fetchMozeRovs (OracleStatement.java:3353)\n    at oracie.jdbc.driver.InsensitivescrollableResultset.fetchMoreRows (InsensitiveScrollableResuleset.java:736)\n    at oracle.jdbc.driver.InsensicivescrollableResultset.absoluteInternal (InsensitivescrollableResultset.java:692)\n    at oracle.jdbc.driver.InsensitivesczollableResultset.next (InsensitiveScrollableResultset.java:406)\n    at org.apache.commons.dbep2.DelegatingResulcset.next (DelegatingResultsec.dava:1160)\n    at org.apache.commons.dbcp2.DelegatingResultset.next (DelegatingResultset.java:1160)\n    at com.example.MyTest.demo(MyTest.java88）\n</code></pre>\n"},{"last_activity_date":1684323765,"question_id":76269636,"body":"<p>I'm trying to set up a proxy server because I want to use body filters to modify google search result content. I copied the result of building the Java code to <code>/jars</code> in the installed nginx-clojure folder and set it as follows. However, when I add this part of body_filter_name, the server does not start with an error.</p>\n<blockquote>\n<p>2023/05/17 16:31:09 [error] 91280#0: jvm may be mad for wrong options!\nSee hs_err_pid****.log for detail! restarted 15 2023/05/17 16:31:09\n[alert] 34461#0: worker process 91280 exited with fatal code 2 and\ncannot be respawned</p>\n</blockquote>\n<p>I'm trying to find the log file, but I can't see it</p>\n<pre><code>sudo find / -name &quot;hs_err_pid*.log&quot;\n</code></pre>\n<p>I will be very grateful if you tell me how to solve the problem</p>\n<pre class=\"lang-java prettyprint-override\"><code>package org.example.replacer;\n\nimport nginx.clojure.java.ArrayMap;\nimport nginx.clojure.java.StringFacedJavaBodyFilter;\nimport org.jsoup.Jsoup;\nimport org.jsoup.nodes.Document;\nimport org.jsoup.nodes.Element;\n\nimport java.io.IOException;\nimport java.util.Map;\n\npublic class GoogleLogoReplacer extends StringFacedJavaBodyFilter {\n    @Override\n    protected Object[] doFilter(Map&lt;String, Object&gt; request, String body, boolean isResponse) throws IOException {\n        Document doc = Jsoup.parse(body);\n        Element logo = doc.select(&quot;img.jfN4p&quot;).first();\n        if (logo != null) {\n            logo.attr(&quot;src&quot;, &quot;http://via.placeholder.com/400&quot;);\n        }\n        return new Object[] {200, new ArrayMap&lt;&gt;(new Object[]{&quot;Content-Type&quot;, &quot;text/html&quot;}), doc.toString()};\n    }\n}\n</code></pre>\n<pre><code>worker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n\n    sendfile        on;\n    keepalive_timeout  65;\n\n    jvm_path auto;\n    jvm_classpath &quot;libs/*:jars/*:jars/logo-replacer-1.0-SNAPSHOT.jar&quot;;\n\n    jvm_options &quot;-Xms1024m&quot;;\n    jvm_options &quot;-Xmx1024m&quot;;\n\n    server {\n        listen       80;\n        server_name  localhost;\n\n        location / {\n            proxy_pass https://www.google.com;\n        }\n\n        location /search {\n            proxy_pass https://www.google.com/search;\n            body_filter_type java;\n            body_filter_name org.example.replacer.GoogleLogoReplacer;\n        }\n\n        error_page   500 502 503 504  /50x.html;\n        location = /50x.html {\n            root   html;\n        }\n    }\n\n}\n</code></pre>\n"},{"answers":[{"comments":[{"comment_id":130640607,"body":"Thanks, but I&#39;m using gradle and I forgot to specify this in the question. What should I do if I use gradle?"}],"answer_id":73975612,"body":"<p>You can use the jvm.args property from command line:</p>\n<pre><code>mvn quarkus:dev -Djvm.args=...\n</code></pre>\n<p>Or specify the same in Maven's parameters:</p>\n<pre><code>&lt;project ...&gt;\n    ...\n    &lt;properties&gt;\n        &lt;jvm.args&gt;-Dquarkus.datasource.url=...&lt;/jvm.args&gt;\n    &lt;/properties&gt;\n    ...\n&lt;/project&gt;\n</code></pre>\n"},{"answer_id":76271704,"body":"<p>For gradle users, create a <code>gradle.properties</code> file in your projects root directory and add the following line</p>\n<pre><code>org.gradle.jvmargs=--add-opens java.base/sun.net=ALL-UNNAMED\n</code></pre>\n"}],"last_activity_date":1684323639,"question_id":73975043,"body":"<p>I'm using quarkus and pulsar client in java 17.</p>\n<pre><code>2022-10-06 18:28:05,964 WARN  [org.apa.pul.com.uti.net.DnsResolverUtil] (Quarkus Main Thread) Cannot get DNS TTL settings from sun.net.InetAddressCachePolicy class: java.lang.IllegalAccessException: class org.apache.pulsar.common.util.netty.DnsResolverUtil cannot access class sun.net.InetAddressCachePolicy (in module java.base) because module java.base does not export sun.net to unnamed module @6743e411\nat java.base/jdk.internal.reflect.Reflection.newIllegalAccessException(Reflection.java:392)\n</code></pre>\n<p>I need add jvm options <code>--add-opens=java.base/sun.net=ALL-UNNAMED</code>.</p>\n<p>What should I do if I use gradle?</p>\n"},{"comments":[{"comment_id":134500900,"body":"have you added <code>adaptive icon</code> ? Checkout this link to understand how you can add and use <a href=\"https://developer.android.com/develop/ui/views/launch/icon_design_adaptive\" rel=\"nofollow noreferrer\">developer.android.com/develop/ui/views/launch/&hellip;</a>"}],"last_activity_date":1684323600,"question_id":76271701,"body":"<p>For example, my app icon looks like the one on the right. I have configured square and round icons on AndroidManifest.xml and put each variation in mipmap folders for different sizes.</p>\n<p>How do I fix this issue (that is to look like the one on left)?</p>\n<p>my AndroidManifest.xml.</p>\n<pre><code>    android:icon=&quot;@mipmap/ic_launcher&quot;\n    android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/OV3xC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OV3xC.png\" alt=\"enter image description here\" /></a></p>\n"},{"answers":[{"comments":[{"comment_id":4853310,"body":"@Stephen P, I accidently upvoted your comment because I misread it. There is absolutely no need to summarize the API here. Its a waste of time as that is what the API is for. All the OP needed was to be pointed in the right direction. In fact, just mentioning the class and method is a great answer. People should always have access to the API to read it for the details."},{"comment_id":40428828,"body":"@camickr It is good practice to keep answers evergreen. This means limiting links, as one day they may break and the whole answer will be moot. Overall, this should have been a comment, not an answer. It is the &quot;Stack way&quot; to make answers be explanations, not links to reference sites and API."},{"comment_id":40429609,"body":"@CoryB, I think I&#39;ve been doing this a little longer than you have. <code>This means limiting links,</code> - that is what my comment suggested. There was no need to include the link."},{"comment_id":40462614,"body":"@camickr Ah, I see what your saying now. Your first comment is a bit confusing. Thank you for the clarification. Seeing as how your comment was 4 years old, I was more commenting for new people who may read this &quot;correct&quot; answer in the future and learn bad practice. (Also, using seniority is a logical fallacy and isn&#39;t welcoming to new people. Though I am flattered that you took the time to look me up and do the math. Stay classy, sugar.)"},{"comment_id":111147685,"body":"The API clearly does not discuss button clicks or the button state while moving. This is a misleading answer."}],"answer_id":4443835,"body":"<p>there is mouseDragged method in MouseMotionListener...check <a href=\"http://download.oracle.com/javase/tutorial/uiswing/events/mousemotionlistener.html\" rel=\"noreferrer\">this</a> out for more details...</p>\n"},{"answer_id":4443850,"body":"<p>I think there might be some sort of mouse drag listener, but if not...</p>\n\n<p>Capture the mouse button down and up events.  In those events, set a boolean such as <code>leftButtonIsDown = true</code> (unless there's already some easy way to query that) and then in the mouse movement events use a block like <code>if (leftButtonIsDown)</code></p>\n"},{"comments":[{"comment_id":4852512,"body":"you&#39;ve got it mostly here, but I just expanded in my answer"},{"comment_id":30251202,"body":"@DonHatch, good catch. I was going to say good &quot;point&quot;, but that would be wrong :) I&#39;ll leave the code as is just so people can get the joke (since they will probably use Jeffs answer anyway)."}],"answer_id":4443853,"body":"<p>In your MouseMotionListener you can check for this using:</p>\n\n<pre><code>SwingUtilities.isLeftMouseButton(me.getPoint())\n</code></pre>\n\n<p>and you would listen for the mouseDragged event.</p>\n"},{"comments":[{"comment_id":4853234,"body":"I don&#39;t see the need to spoon feed code like this. The OP just wnated to be pointed in the right direction as you can tell by the answer that was accepted. The OP can ask for more help if he needs it."},{"comment_id":30251007,"body":"Interesting that the answer that didn&#39;t mention how to figure out which button was pressed was accepted, when the question specified the <i>left</i> mouse button is needed.   I found this question via search, and I really do need it to be the <i>left</i> mouse button as specified in the question, so I&#39;m upvoting this answer (although isLeftMouseButton is misspelled as of this writing)"}],"answer_id":4443958,"body":"<pre><code>component.addmouseMotionListener(new MouseAdapter() {\n    public void mouseDragged(MouseEvent evt) {\n       if ( SwingUtilities.isLeftMouseButton(evt)) {\n         // do your stuff here\n       }\n    }\n});\n</code></pre>\n"}],"last_activity_date":1684323571,"question_id":4443760,"body":"<p>I would like to detect mouse movement while the left button is pressed.</p>\n<p>I'm simply creating a drawing application. I can detect mouse movement without any mouse being pressed. But I want to detect it WITH left mouse pressed.</p>\n<p>I don't think there's a listener for this. So, what is the idea to do that?</p>\n"},{"comments":[{"comment_id":4782331,"body":"Just in case you haven&#39;t come across this before, note that the Unicode standard does not require or recommend using a BOM with UTF-8. It isn&#39;t illegal, either, but shouldn&#39;t be used indiscriminately. See <a href=\"http://unicode.org/faq/utf_bom.html#BOM\" rel=\"nofollow noreferrer\">here</a> for the details, including some guidelines on when and where to use it. If you are trying to view the csv file in Windows, this is probably a valid use of the BOM."},{"comment_id":4782392,"body":"Yes, we are trying to the view the csv in Windows, but the generated csv still shows garbled character for german characters. Is this the right way to set the BOM?"},{"comment_id":4783850,"body":"Yes, that’s right.  The Unicode standard recommends <b>against</b> using a so-called BOM (it isn’t really) with UTF-8."},{"comment_id":4784076,"body":"@tchrist: it recommends against using a BOM when dealing with software and protocols that excepts ASCII-only chars.  If the OP knows that the Windows software he&#39;s using will use the BOM to detect that the file is actually encoded in UTF-8 (we don&#39;t care about the fact that it ain&#39;t a BOM, we care about the <b>fact</b> that it can allow some software to detect that the encoding is UTF-8).  Also note that if you had a BOM to UTF-8 and some software fail, then these software are broken, because a BOM at the beginning of an UTF-8 is perfectly valid."},{"comment_id":4784090,"body":"Of course the real issue here is that CSV file have no metadata nor specifications mandating the encoding of the file to be specified.  It&#39;s basically the same old SNAFU that is also affecting <i>.java</i> file and many other crappy-underspec&#39;ed file formats."},{"comment_id":4784822,"body":"@Webinator: I realize that this is at best a partial solution to the problem, but I would <i>really</i> like to see a standard per-source-unit annotation like <code>@encoding UTF-8</code> in Java files. I understand that this only works for supersets of ASCII like UTF-8, ISO 8859-?, MacRoman, or CP1252, and that it has to occur before any non-ASCII characters are seen. But this is the same restriction as in-band encoding specs in XML, Perl, and Python. I’m told it wouldn’t be not too hard to implement an annotator like that, but apart from regexes and encodings, my Java-fu is weak. Sure would be useful, eh?!"},{"comment_id":10962546,"body":"For the completeness of the BOM discussion. Excel 2003 strictly requires the BOM in UTF-8 encoded CSV files. Otherwise multibyte chars are unreadable."},{"comment_id":127692783,"body":"I&#39;ve recently been looking at behaviour of Microsoft Excel 2016.  If a .csv file is renamed to .txt, or if a new Excel spreadsheet has data added &quot;From Text&quot;, then the data is loaded by &quot;Text Import Wizard&quot;.  Apparently this is smart enough to recognise that it&#39;s receiving data of &quot;File origin&quot; of code page &quot;65001 (UTF-8)&quot;, and if isn&#39;t, then you can tell it so.  Then you have to tell it a few more things.  I have written a little Cmd script to copy a BOM then data from one file into another file, to avoid that."}],"answers":[{"comments":[{"comment_id":4783904,"body":"Aren’t all PrintStreams fundamentally flawed because they discard all errors that may occur on the stream, including I/O errors, full filesystems, network interruptions, and encoding mismatches? If this is not true, could you please tell me how to make them reliable (because I want to use them)?  But if it is true, could you please explain when it could ever be appropriate to use an output method that suppresses correctness concerns? This is a serious question, because I don’t understand why this was set up to be so dangerous.  Thanks for any insights."},{"comment_id":19946832,"body":"@tchrist - it is true that PrintStreams suppress errors.  However ... 1) they are not entirely discarded - you can check to see if an error has occurred.  2) There are cases where you don&#39;t need to know about errors.  An indisputable case is when you are sending characters to a stream that is writing to an in-memory buffer."},{"comment_id":38451101,"body":"@tchrist I guess, this is all caused by using checked exceptions. Normally, you&#39;d just throw on any error and be happy. You could make an existing <code>PrintStream</code> &quot;safe&quot; by wrapping each call and adding <code>checkError</code> and conditionally throw. But the information about the exception is lost. So yes, <code>PrintStream</code> is a hopeless crap."}],"answer_id":4389309,"body":"<p>To write a BOM in UTF-8 you need <code>PrintStream.print()</code>, not <code>PrintStream.write()</code>.</p>\n\n<p>Also if you want to have BOM in your <code>csv</code> file, I guess you need to print a BOM after <code>putNextEntry()</code>.</p>\n"},{"comments":[{"comment_id":4783958,"body":"Isn’t the only safe way to do encoded output in Java is to use the rarely-seen <code>OutputStreamWriter(OutputStream out, CharsetEncoder enc)</code> for of the constructor, the only one of the four with an explicit <code>CharsetEncoder</code> argument, and never using the <code>PrintStream</code> that you’ve recommended here?"},{"comment_id":19947028,"body":"@tchrist - 1) No. 2) I didn&#39;t <i>recommend</i> PrintStream.  I simply said how to do what the OP asked to do using the PrintStream he was already using.  3) In this case PrintStream should be safe because because it is followed by other actions that will cause writes to the underlying stream (socket) and throw an exception if the previous PrintStream writes had silently failed."}],"answer_id":4389317,"body":"<h1 id=\"printstreamprint-kixa\"><code>PrintStream#print</code></h1>\n<p>I think that <code>out.write('\\ufeff');</code> should actually be <code>out.print('\\ufeff');</code>, calling the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/PrintStream.html#print(char)\" rel=\"nofollow noreferrer\"><code>java.io.PrintStream#print</code></a> method.</p>\n<p>According <a href=\"http://download.oracle.com/javase/6/docs/api/java/io/PrintStream.html#write(int)\" rel=\"nofollow noreferrer\">the javadoc</a>, the <code>write(int)</code> method actually writes a byte ... without any character encoding.  So <code>out.write('\\ufeff');</code> writes the byte <code>0xff</code>.  By contrast, the <code>print(char)</code> method encodes the character as one or bytes using the stream's encoding, and then writes those bytes.</p>\n<p>As noted in <a href=\"http://www.unicode.org/versions/Unicode9.0.0/ch23.pdf\" rel=\"nofollow noreferrer\">section 23.8 of the Unicode 9</a> specification, the BOM for UTF-8 is <code>EF BB BF</code>. That sequence is what you get when using UTF-8 encoding on <code>'\\ufeff'</code>. See: <a href=\"https://stackoverflow.com/q/54247407/642706\"><em>Why UTF-8 BOM bytes efbbbf can be replaced by \\ufeff?</em></a>.</p>\n"},{"comments":[{"comment_id":76827606,"body":"This code is sensitive to default platform encoding. On Windows, I ended up with 0x3F written to the file. The correct way to get the BufferedWriter is: <code>BufferedWriter out = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(the File), StandardCharsets.UTF_8))</code>"}],"answer_id":8120786,"body":"<pre><code>BufferedWriter out = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(...), StandardCharsets.UTF_8));\nout.write('\\ufeff');\nout.write(...);\n</code></pre>\n\n<p>This correctly writes out 0xEF 0xBB 0xBF to the file, which is the UTF-8 representation of the BOM.</p>\n"},{"answer_id":20677256,"body":"<p>In my case it works with the code:</p>\n\n<pre><code>PrintWriter out = new PrintWriter(new File(filePath), \"UTF-8\");\nout.write(csvContent);\nout.flush();\nout.close();\n</code></pre>\n"},{"answer_id":36311899,"body":"<p>Just in case people <em>are</em> using <code>PrintStream</code>s, you need to do it a little differently. While a <code>Writer</code> will do some magic to convert a single byte into 3 bytes, a <code>PrintStream</code> requires all 3 bytes of the UTF-8 BOM individually:</p>\n\n<pre><code>    // Print utf-8 BOM\n    PrintStream out = System.out;\n    out.write('\\ufeef'); // emits 0xef\n    out.write('\\ufebb'); // emits 0xbb\n    out.write('\\ufebf'); // emits 0xbf\n</code></pre>\n\n<p>Alternatively, you can use the hex values for those directly:</p>\n\n<pre><code>    PrintStream out = System.out;\n    out.write(0xef); // emits 0xef\n    out.write(0xbb); // emits 0xbb\n    out.write(0xbf); // emits 0xbf\n</code></pre>\n"},{"comments":[{"comment_id":132467446,"body":"Simple and effective."}],"answer_id":62918775,"body":"<p>You Add This For First Of CSV String</p>\n<pre><code>String CSV = &quot;&quot;;\nbyte[] BOM = {(byte) 0xEF,(byte) 0xBB,(byte) 0xBF};\nCSV = new String(BOM) + CSV;\n</code></pre>\n<p>This Work For Me.</p>\n"},{"answer_id":65411341,"body":"<p>Here a simple way to append BOM header on any file :</p>\n<pre><code>private static void appendBOM(File file) throws Exception {\n    File bomFile = new File(file + &quot;.bom&quot;);\n    try (FileOutputStream output = new FileOutputStream(bomFile, true)) {\n        byte[] bytes = FileUtils.readFileToByteArray(file);\n        output.write('\\ufeef'); // emits 0xef\n        output.write('\\ufebb'); // emits 0xbb\n        output.write('\\ufebf'); // emits 0xbf\n        output.write(bytes);\n        output.flush();\n    }\n    \n    file.delete();\n    bomFile.renameTo(file);\n}\n</code></pre>\n"},{"answer_id":68117288,"body":"<p>If you just want to</p>\n<h2>modify the same file</h2>\n<p>(without new file and delete old one as I had issues with that)</p>\n<pre><code>private void addBOM(File fileInput) throws IOException {\n    try (RandomAccessFile file = new RandomAccessFile(fileInput, &quot;rws&quot;)) {\n        byte[] text = new byte[(int) file.length()];\n        file.readFully(text);\n        file.seek(0);\n        byte[] bom = { (byte) 0xEF, (byte) 0xBB, (byte) 0xBF };\n        file.write(bom);\n        file.write(text);\n    }\n}\n</code></pre>\n"},{"answer_id":76271684,"body":"<p>Using StringBuilder</p>\n<pre><code>StringBuilder csv = new StringBuilder();    \ncsv.append('\\ufeff');\ncsv.append(content);\ncsv.toString();\n</code></pre>\n"}],"last_activity_date":1684323490,"question_id":4389005,"body":"<p>I have a Java stored procedure which fetches record from the table using <code>Resultset</code> object and creates a CS Vfile.</p>\n\n<pre><code>BLOB retBLOB = BLOB.createTemporary(conn, true, BLOB.DURATION_SESSION);\nretBLOB.open(BLOB.MODE_READWRITE);\nOutputStream bOut = retBLOB.setBinaryStream(0L);\n\nZipOutputStream zipOut = new ZipOutputStream(bOut);\nPrintStream out = new PrintStream(zipOut,false,\"UTF-8\");\nout.write('\\ufeff');\nout.flush();\n\nzipOut.putNextEntry(new ZipEntry(\"filename.csv\"));\nwhile (rs.next()){\n    out.print(\"\\\"\" + rs.getString(i) + \"\\\"\");\n    out.print(\",\");\n}\nout.flush();\n\nzipOut.closeEntry();\nzipOut.close();\nretBLOB.close();\n\nreturn retBLOB;\n</code></pre>\n\n<p>But the generated CSV file doesn't show the correct German character. Oracle database also has a <code>NLS_CHARACTERSET</code> value of UTF8.</p>\n\n<p>Please suggest.</p>\n"},{"comments":[{"comment_id":134497829,"body":"What kind of explanation do you want exactly? <code>s.contains(l2)</code> because <code>l1.equals(l2)</code>. And <code>equals</code> is supposed to check if the two lists have equal elements in the same order."},{"comment_id":134497845,"body":"Looking at the javadoc of <code>HashSet#contains()</code> it says: &quot;<i>...returns true if and only if this set contains an element e such that (o==null ? e==null : o.equals(e)).</i>&quot;. And the javadoc of <code>List#equals()</code> states: &quot;<i>...two lists are defined to be equal if they contain the same elements in the same order.</i>&quot; This behavior is exactly what you observe here."}],"answers":[{"answer_id":76269772,"body":"<p><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/HashSet.html\" rel=\"nofollow noreferrer\"><code>HashSet</code></a> relies on the <code>equals</code> and <code>hashCode</code> methods of the element type (which in your case is <code>List</code>). The documentation for those methods on the <code>List</code> type is as follows:</p>\n<blockquote>\n<p><a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html#equals(java.lang.Object)\" rel=\"nofollow noreferrer\"><code>equals</code></a> - Compares the specified object with this list for equality. Returns true if and only if the specified object is also a list, both lists have the same size, and all corresponding pairs of elements in the two lists are equal. (Two elements e1 and e2 are equal if Objects.equals(e1, e2).) In other words, two lists are defined to be equal if they contain the same elements in the same order.<br />\n<a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html#hashCode()\" rel=\"nofollow noreferrer\"><code>hashCode</code></a> - Returns the hash code value for this list. The hash code of a list is defined to be the result of the following calculation:</p>\n<pre><code>int hashCode = 1;\nfor (E e : list)\n    hashCode = 31*hashCode + (e==null ? 0 : e.hashCode());\n</code></pre>\n<p>This ensures that list1.equals(list2) implies that list1.hashCode()==list2.hashCode() for any two lists, list1 and list2, as required by the general contract of Object.hashCode().</p>\n</blockquote>\n<p>I.e. in summary, the <code>hashCode</code> and <code>equals</code> implementations for <code>List</code>s simply operate on each element of the list.</p>\n"},{"answer_id":76269830,"body":"<p>The <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/HashSet.html#contains-java.lang.Object-\" rel=\"nofollow noreferrer\"><code>HashSet#contains(Object o)</code></a> javadoc states the following (emphasis mine):</p>\n<blockquote>\n<p>Returns true if this set contains the specified element. More formally, returns true if and only if this set contains an element e such that (o==null ? e==null : <strong>o.equals(e)</strong>).</p>\n</blockquote>\n<p>So, this means when you check <code>s.contains(l2)</code>, the <code>List</code>s in <code>s</code> are actually checked for equality against <code>l2</code> via <code>List#equals()</code> internally.</p>\n<p>And the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/List.html#equals-java.lang.Object-\" rel=\"nofollow noreferrer\"><code>List#equals(Object o)</code></a> javadoc states (emphasis mine):</p>\n<blockquote>\n<p>Compares the specified object with this list for equality. Returns true if and only if the specified object is also a list, both lists have the same size, and all corresponding pairs of elements in the two lists are equal. (Two elements e1 and e2 are equal if (e1==null ? e2==null : e1.equals(e2)).) <strong>In other words, two lists are defined to be equal if they contain the same elements in the same order.</strong> This definition ensures that the equals method works properly across different implementations of the List interface.</p>\n</blockquote>\n<p>Which is exactly why <code>l2</code> is found to be contained in <code>s</code>, but <code>l3</code> is not.</p>\n"}],"last_activity_date":1684323483,"question_id":76269658,"body":"<p>I wrote a program as below:</p>\n<pre><code>public static void main(String[] args) {\n        Set&lt;List&lt;Integer&gt;&gt; s = new HashSet&lt;&gt;();\n        List&lt;Integer&gt; l1 = new ArrayList&lt;&gt;(List.of(1,2,3));\n        List&lt;Integer&gt; l2 = new ArrayList&lt;&gt;(List.of(1,2,3));\n        List&lt;Integer&gt; l3 = new ArrayList&lt;&gt;(List.of(3,2,1));\n        s.add(l1);\n        if(s.contains(l2)) {\n            System.out.println(&quot;l2 is already present&quot;);\n        }\n        if(s.contains(l3)) {\n            System.out.println(&quot;l3 is present&quot;);\n        } else {\n            System.out.println(&quot;l3 is absent&quot;);\n        }\n}\n</code></pre>\n<p>Here is the output:</p>\n<pre><code>l2 is already present\nl3 is absent\n</code></pre>\n<p>I have a general idea of <code>equals</code> and <code>hashcode</code> in Java and rough idea of <code>Object</code> type, etc.</p>\n<p>Can someone explain conceptually how this thing able to compare internally a list of integers and find if it is already present? Notice that it works only if the order of elements in the list is same.</p>\n"},{"comments":[{"comment_id":122040614,"body":"Did you figure out what&#39;s going on? I am currently facing this."},{"comment_id":122056146,"body":"@Daniel_V No, I have not figured it out and the project is currently on hold."}],"last_activity_date":1684322357,"question_id":68431602,"body":"<p>I am trying to call a customer's endpoint to retrieve their data using WebClient. We have to use certificate when calling the endpoint. I configured the WebClient with filter (to handle auto-refresh of the access token) and also with httpclient taking the certificate as keyStore.  However, I am getting the <code>SSLHandshakeException</code>.  If I commented out the <code>filter(oauth)</code>, then I didn't get the  <code>SSLHandshakeException</code>.  Can someone please let me know how to let <code>ServerOAuth2AuthorizedClientExchangeFilterFunction</code> work with the keyStore setup? Thanks.</p>\n<pre><code>@Configuration\npublic class MyConfig {\n  @Bean\n  ReactiveClientRegistrationRepository clientRegistrations() {\n    ClientRegistration registration = \n      ClientRegistration.withRegistrationId(&quot;authProvider&quot;)\n                        .tokenUri(tokenUri)\n                        .clientId(clientId)\n                        .clientSecret(clientSecret)\n                        .scope(scope)\n                        .authorizationGrantType(AuthorizationGrantType.CLIENT_CREDENTIALS)\n                        .clientAuthenticationMethod(ClientAuthenticationMethod.CLIENT_SECRET_POST)\n                        .build();\n    \n      return new InMemoryReactiveClientRegistrationRepository(registration);\n      }\n\n    @Bean(name = &quot;mybean&quot;)\n    WebClient webClient(ReactiveClientRegistrationRepository clientRegistrations) {\n\n    ServerOAuth2AuthorizedClientExchangeFilterFunction oauth = \n       new ServerOAuth2AuthorizedClientExchangeFilterFunction(\n          new AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager(\n              clientRegistrations, \n              new InMemoryReactiveOAuth2AuthorizedClientService(clientRegistrations)));\n\n    oauth.setDefaultClientRegistrationId(&quot;authProvider&quot;);\n\n    KeyStore keyStore = KeyStore.getInstance(&quot;jks&quot;);\n    keyStore.load(new ClassPathResource(keyStoreFilename).getInputStream(), keyStoreString.toCharArray());\n    KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\n    keyManagerFactory.init(keyStore, keyStoreString.toCharArray());\n\n    SslContext sslContext = SslContextBuilder.forClient().keyManager(keyManagerFactory).build();\n\n    HttpClient httpClient = HttpClient.create().secure(sslSpec -&gt; sslSpec.sslContext(sslContext)); \n\n    return WebClient\n           .builder()\n           .filter(oauth) // if I commented it out, then it was working fine                    \n           .clientConnector(new ReactorClientHttpConnector(httpClient))\n           .defaultHeaders(httpHeaders -&gt; {\n                  httpHeaders.setContentType(MediaType.APPLICATION_JSON);\n                  httpHeaders.setAccept(List.of(MediaType.APPLICATION_JSON));\n                  httpHeaders.setBearerAuth(token);\n                    })\n          .build();\n }\n</code></pre>\n<p>And the class making the call, where I am getting <code>Caused by: java.lang.NumberFormatException: For input string: javax.net.ssl.SSLHandshakeException:</code></p>\n<pre><code>{\n   ResponseEntity&lt;String&gt; responseEntity;\n    try {\n        responseEntity = webClient.post()\n                .uri(url)\n                .body(BodyInserters.fromValue(valueString))\n                .retrieve()\n                .toEntity(String.class)\n                .block();\n  }\n</code></pre>\n"},{"comments":[{"comment_id":5887459,"body":"I imagine the persistent store on your device isn&#39;t very fast and ehcache may not access it in the most light weight way possible for your device. It was written for systems with performant IO."},{"comment_id":5888217,"body":"Hi,  this is the configuration I am using.  Configuration config = new Configuration(); CacheConfiguration defaultCacheConfiguration = new CacheConfiguration(); defaultCacheConfiguration.setOverflowToDisk(false); defaultCacheConfiguration.setDiskPersistent(false); config.setDefaultCacheConfiguration(defaultCacheConfiguratio&zwnj;&#8203;n); config.setUpdateCheck(false);   CacheManager mgr =  new CacheManager(config);  Which should never touch the disk unless I am wrong. This piece of code takes between 180 and 250 milliseconds on my machine. On the target machine this becomes half a minute."}],"answers":[{"answer_id":76271510,"body":"<p>Stumbled across the same problem just now.</p>\n<p>Turned out CacheManager.start() calls InetAddress.getLocalhost().</p>\n<p>Now, my box was named, say &quot;box2137&quot; (not localhost). I chose this name when installing RHEL.</p>\n<p>Turns out it was not added to /etc/hosts as 127.0.0.1/::1! When calling InetAddress.getLocalhost(), Java tried to DNS resolve &quot;box2137&quot; which took 30 seconds.</p>\n<p>Adding &quot;box2137&quot; to /etc/hosts solves the issue.</p>\n"}],"last_activity_date":1684322303,"question_id":5231267,"body":"<p>I am running an application using ehcache on an arm (arm5, no floating point unit) based machine, tested using both jamvm and openjdk and with a compact flash based rootfs (which is quite slow on this device). </p>\n\n<p>When I time CacheManager.create() this takes from 15 to 30 seconds. Even when I pass the default configuration as a parameter this still takes so long. The configuration disables all disk persistency, and checking for updates is disabled as well. Creating a new Cache is faster again.</p>\n\n<p>Does anyone know what I can do to make the CacheManager faster or why it is so slow?</p>\n\n<p>Regards,\nLeen</p>\n"},{"answers":[{"answer_id":70155534,"body":"<p>There are issues with openJDK 11+ being installed on alpine. Alpine Linux uses <code>musl-libc</code> for its <code>libc</code>, where most other flavours of Linux use <code>glibc</code>, GNU's C library. Standard Linux software is built on non-Alpine flavours, like ubuntu and centos, thus normally get linked against <code>glibc</code> and so cannot be executed successfully with Alpine as <code>libc</code> is not linking to the java installation. The only workaround is installing a <code>glibc</code> compatibility layer, which is not simple or using an alpine-openjdk11 container (which you may not be able to use as they are not official images, so have issues in maintainability)</p>\n<p>Try a debian (ubuntu) or fedora (centos) distribution and see if you can get it working</p>\n"},{"comments":[{"comment_id":134501940,"body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76271486/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"answer_id":76271486,"body":"<p>if you need exactly alpine, then:</p>\n<pre><code>export GLIBC_VERSION=2.34-r0\napk --no-cache add binutils curl\ncurl -sL https://alpine-pkgs.sgerrand.com/sgerrand.rsa.pub -o /etc/apk/keys/sgerrand.rsa.pub\ncurl -sLO https://github.com/sgerrand/alpine-pkg-glibc/releases/download/${GLIBC_VERSION}/glibc-${GLIBC_VERSION}.apk\ncurl -sLO https://github.com/sgerrand/alpine-pkg-glibc/releases/download/${GLIBC_VERSION}/glibc-bin-${GLIBC_VERSION}.apk\ncurl -sLO https://github.com/sgerrand/alpine-pkg-glibc/releases/download/${GLIBC_VERSION}/glibc-i18n-${GLIBC_VERSION}.apk\napk add --no-cache glibc-${GLIBC_VERSION}.apk glibc-bin-${GLIBC_VERSION}.apk glibc-i18n-${GLIBC_VERSION}.apk # you must be needed to add || true for alpine newer than 3.15\n</code></pre>\n<p>in my tests GLIBC_VERSION 2.34-r0 only working. I tried newer, but doesn't work</p>\n"}],"last_activity_date":1684322174,"question_id":70117670,"body":"<p>I am trying to run the <code>sonnarqube</code> scanner on a docker container on jenkins. I use following image:</p>\n<pre><code>FROM node:16-alpine\n</code></pre>\n<p>I install <code>java</code> from here:</p>\n<pre><code>RUN apk --no-cache add openjdk11 --repository=http://dl-cdn.alpinelinux.org/alpine/edge/community\n</code></pre>\n<p>I install <code>sonnarqube scanner</code> from here:</p>\n<pre><code>RUN wget https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-4.2.0.1873.zip\n</code></pre>\n<p>When running the scanner, I get following error:</p>\n<pre><code>22:33:55 sonar-scanner-4.2.0.1873-linux/bin/sonar-scanner: exec: line 64: /e2e/sonar-scanner-4.2.0.1873-linux/jre/bin/java: not found\n</code></pre>\n<p>I've checked java path:</p>\n<pre><code>22:33:49 Step 39/44 : RUN which java\n22:33:49  ---&gt; Running in 47df6c73c0b7\n22:33:50 /usr/bin/java\n</code></pre>\n<p>and append it to my <code>PATH</code> env variable (sonnarqube executable too):</p>\n<pre><code>22:50:57 /usr/bin/java/bin:/sonar-scanner-4.2.0.1873/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\n</code></pre>\n<p>In the <a href=\"https://docs.sonarqube.org/latest/analysis/scan/sonarscanner/\" rel=\"nofollow noreferrer\">docs</a>, they say that they provide a JRE for linux distribution.</p>\n<p>But if I inspect the sonnarqube folder, I just see:</p>\n<pre><code>22:50:39 drwxr-xr-x    5 root     root          4096 Nov 25 21:50 .\n22:50:39 drwxr-xr-x    1 root     root          4096 Nov 25 21:50 ..\n22:50:39 drwxr-xr-x    2 root     root          4096 Nov 25 21:50 bin\n22:50:39 drwxr-xr-x    2 root     root          4096 Nov 25 21:50 conf\n22:50:39 drwxr-xr-x    2 root     root          4096 Nov 25 21:50 lib\n</code></pre>\n<p>There's no <code>sonar-scanner-4.2.0.1873/jre/java/bin</code></p>\n<p>Should the <code>jre</code> be in the <code>sonar-scanner-4.2.0.1873</code> folder? is my <code>PATH</code> env var wrong? I can't figure out why java is not found.</p>\n"},{"answers":[{"comments":[{"comment_id":134510105,"body":"In case of an additional server started specifically for metrics, it&#39;s starting in a separate thread of the web application, correct?"},{"comment_id":134511545,"body":"@AndCode, requests to this server are processed by separate thread, if that&#39;s what you mean."}],"answer_id":76271449,"body":"<p>It depends oh how you are using those libraries.</p>\n<p>For example, as shown at <a href=\"https://github.com/prometheus-net/prometheus-net#quick-start\" rel=\"nofollow noreferrer\">Quick start</a> of linked by you library, you can start additional server on separate port, just for purposes of exposing metrics.</p>\n<p>But you also can expose metrics using your current routing, for example like shown at <a href=\"https://github.com/prometheus-net/prometheus-net#aspnet-web-api-exporter\" rel=\"nofollow noreferrer\">ASP.NET Web API exporter</a> part of documentation.</p>\n"}],"last_activity_date":1684321855,"question_id":76269133,"body":"<p>When adding Prometheus instrumentation with a client library for Java <a href=\"https://github.com/prometheus/client_java\" rel=\"nofollow noreferrer\">https://github.com/prometheus/client_java</a> or .NET <a href=\"https://github.com/prometheus-net/prometheus-net\" rel=\"nofollow noreferrer\">https://github.com/prometheus-net/prometheus-net</a>, does the instrumentation spin out a metrics web server in a separate thread of the microservice?</p>\n<p>What if the instrumented microservice is already running as a web server on port 80, can we expose metrics on a different port let's say 9001 with a separate instrumentation web server running in the same microservice?</p>\n"},{"comments":[{"comment_id":134500466,"body":"please share your code too."},{"comment_id":134501202,"body":"In particular the <code>CustomTimePickerDialog</code> class.  Evidently the code is attempting to use reflection to get a field name from <code>TimePicker</code> that does not exist."}],"last_activity_date":1684321387,"question_id":76271338,"body":"<p>When I'm trying to set time in my app then the app is stop working and the following error message is showing And This is only happening in android 9, On other version app is working good.</p>\n<p>FATAL EXCEPTION: main</p>\n<pre><code>java.lang.RuntimeException: java.lang.NoSuchFieldException: TimePicker\nat .app.Comfort.Helper.CustomTimePickerDialog.fixSpinner(CustomTimePickerDialog.java:92)\nat .app.Comfort.Helper.CustomTimePickerDialog.&lt;init&gt;(CustomTimePickerDialog.java:34)\nat .app.User.View.Away.onClick(Away.java:199)\nat android.view.View.performClick(View.java:6608)\nat android.view.View.performClickInternal(View.java:6585)\nat android.view.View.access$3100(View.java:782)\nat android.view.View$PerformClick.run(View.java:25945)\nat android.os.Handler.handleCallback(Handler.java:874)\nat android.os.Handler.dispatchMessage(Handler.java:100)\nat android.os.Looper.loop(Looper.java:198)\nat android.app.ActivityThread.main(ActivityThread.java:6729)\nat java.lang.reflect.Method.invoke(Native Method)\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\nCaused by: java.lang.NoSuchFieldException: TimePicker\nat java.lang.Class.getField(Class.java:1601)\nat .app.Comfort.Helper.CustomTimePickerDialog.fixSpinner(CustomTimePickerDialog.java:54)\nat .app.Comfort.Helper.CustomTimePickerDialog.&lt;init&gt;(CustomTimePickerDialog.java:34) \nat .app.User.View.Away.onClick(Away.java:199) \nat android.view.View.performClick(View.java:6608) \nat android.view.View.performClickInternal(View.java:6585) \nat android.view.View.access$3100(View.java:782) \nat android.view.View$PerformClick.run(View.java:25945) \nat android.os.Handler.handleCallback(Handler.java:874) \nat android.os.Handler.dispatchMessage(Handler.java:100) \nat android.os.Looper.loop(Looper.java:198) \nat android.app.ActivityThread.main(ActivityThread.java:6729) \nat java.lang.reflect.Method.invoke(Native Method) \nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:493) \nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:858)\n</code></pre>\n<p>If you can then please help me.</p>\n"},{"comments":[{"comment_id":134499738,"body":"Error message simply google translated to English says &quot;Connection error: User login error&quot;, and you are using <code>con = DriverManager.getConnection(url,&quot;&quot;,&quot;&quot;)</code> to connect to the DB, where username &amp; password are blank. So, the error could be related to that. Are you sure blank username with blank password will be able to connect to the DB?  Shouldn&#39;t the username be <code>sa</code> - if it is default installation, and its default password would also be there."},{"comment_id":134500131,"body":"You should also not limit information available to you about the error. <code>ex.printStackTrace()</code> is what you want"},{"comment_id":134500715,"body":"try DriverManager.getConnection(url);"}],"last_activity_date":1684321144,"question_id":76270806,"body":"<p>When running my code, I get the following error:</p>\n<blockquote>\n<p>Error de conexi�n: Error de inicio de sesi�n del usuario ''.\nClientConnectionId:7d721444-7622-4951-a321-3607a1c7167a</p>\n</blockquote>\n<p>this is the code:</p>\n<pre><code>import java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.util.Scanner;\npublic class Pokemon {\n    /*Esto guarda en una variable local de tipo String llamado url\n    la e indica que se esta utilizando SQL Server en la misma máquina \n    en la que se está ejecutando el programa, en el puerto 3003, y que la base de \n    datos que se está utilizando se llama &quot;pokemondb&quot;\n    El trusted server es para que no tire  error de certificado*/\n     private static final String driver=&quot;com.microsoft.sqlserver.jdbc.DriverJDBCVersion&quot;;\n      private static final String url = &quot;jdbc:sqlserver://localhost:3003;databaseName=pokemondb;Integrated Security=True;TrustServerCertificate=True&quot;;\n    //jbd es una api de Java que permite establecer conexion de Java con SQl\n    public static void main(String[] args) throws SQLException {\n        Connection con=conexion();\n        Scanner escaner = new Scanner(System.in);\n        boolean salir = false;//bandera para salir del menu\n        int opcion; //Guardaremos la opcion del usuario\n        do\n        {\n            System.out.println(&quot;-------- Menu Principal--------&quot;);\n            System.out.println(&quot;1 Mostrar todos los pokemons &quot;);\n            System.out.println(&quot;2 Actualizar nombre del pokemon por su numero de la Pokedex &quot;);\n            System.out.println(&quot;3 Borrar pokemon &quot;);\n            System.out.println(&quot;4 Insertar nuevo pokemon &quot;);\n            System.out.println(&quot;5 Mostrar todos los movimientos(incluyendo MT y MO) que puede apreder un pokemon&quot;);\n            System.out.println(&quot;6 Filtrar los pokemon por tipos &quot;);\n            System.out.println(&quot;7 Mostrar el número de movimientos de cada tipo &quot;);\n            System.out.println(&quot;8 Salir &quot;);\n            System.out.println(&quot;--------------------------------&quot;);\n            System.out.println(&quot;Ingrese una opcion&quot;);\n            opcion=escaner.nextInt();\n            switch (opcion) {\n            case 1:\n                mostrarPokemon();\n                break;\n            case 2:\n                System.out.println(&quot;Inserte el numero de la Pokedex&quot;);\n                int id=escaner.nextInt();\n                System.out.println(&quot;INTRODUZCA EL NUEVO NOMBRE DEL POKEMON&quot;);\n                String nombre=escaner.toString();\n                actualizarPokemon(id,nombre );\n                break;\n            case 3:\n                System.out.println(&quot;Inserte el numero de la Pokedex&quot;);\n                int id1=escaner.nextInt();\n                borrarPokemon(id1);\n                break;\n            case 4:\n                System.out.println(&quot;INTRODUZCA EL NOMBRE DEL NUEVO POKEMON&quot;);\n                String nombre1=escaner.toString();\n                System.out.println(&quot;INTRODUZCA EL PESO DEL POKEMON&quot;);\n                Float peso=escaner.nextFloat();\n                System.out.println(&quot;INTRODUZCA LA ALTURA DEL NUEVO POKEMON&quot;);\n                Float altura=escaner.nextFloat();\n                insertarPokemon(nombre1, peso, altura);\n                break;\n            case 5:\n                System.out.println(&quot;Introduce el numero de la pokedex&quot;);\n                int n=escaner.nextInt();\n                mostrarMovimiento(n);\n                break;\n            case 6:\n                System.out.println(&quot;Introduce un tipo para filtrarlo&quot;);\n                String tipo=escaner.toString();\n                filtrarTipo(tipo);\n                break;\n            case 7:\n                System.out.println(&quot;Introduce un tipo&quot;);\n                String tipo2=escaner.toString();\n                filtrarMovimiento(tipo2);\n                break;\n            case 8:\n                salir=true;\n                break;\n            default:\n                break;\n            }\n        }while(!salir);//mientras salir no sea verdadero\n        escaner.close();\n    }\n        public static void mostrarPokemon() throws SQLException{\n            Connection con=conexion();\n            String pokedex = &quot;SELECT NUMERO_POKEDEX,NOMBRE  FROM Pokemon&quot;;\n            PreparedStatement ps =con.prepareStatement(pokedex);\n            ResultSet rs=ps.executeQuery();\n            while(rs.next()){//mientras que en la consulta de rs se obtengra una respuesta\n                System.out.println(rs);//imprima la consulta de rs\n            }\n            \n            \n        }\n        public static String actualizarPokemon(int id, String nombre) throws SQLException{\n            Connection con=conexion();\n            String consulta = &quot;update Pokemon set NOMBRE=?  where NUMERO_POKEDEX=?&quot;;\n            PreparedStatement ps=con.prepareStatement(consulta);\n            ps.setString(1, nombre);//establece el nombre del parametro nombre\n            ps.setInt(2, id);//establece el valor del parametro NUMERO_POKEDEX\n            return &quot;El nombre del pokemon con id &quot; + id + &quot; ha sido actualizado a &quot; + nombre;\n        }\n        public static String borrarPokemon(int id) throws SQLException{\n            Connection con=conexion();\n            String consulta=&quot;delete  from Pokemon where NUMERO_POKEDEX= ?&quot;;\n            PreparedStatement ps=con.prepareStatement(consulta);\n            ps.setInt(1, id);\n            return &quot;El pokemon con numero &quot;+id+&quot; has sido eliminado&quot;;\n        }\n        public static void insertarPokemon(String nombre,double peso, double altura) throws SQLException{\n            Connection con=conexion();\n             String consulta = &quot;INSERT INTO Pokemon(NOMBRE, PESO, ALTURA) VALUES (?,?,?)&quot;;\n             PreparedStatement ps=con.prepareStatement(consulta);\n             ps.setString(1,nombre);\n             ps.setDouble(2,peso);\n             ps.setDouble(3,altura);\n             String n = &quot;SELECT NUMERO_POKEDEX FROM Pokemon WHERE NOMBRE=?&quot;;\n             PreparedStatement ps1=con.prepareStatement(n);\n             ps1.setString(1,nombre);\n             ResultSet rs=ps1.executeQuery();\n             while(rs.next()) {\n                 System.out.println(&quot;Se ha insertado el nuevo pokemon con nombre &quot;+nombre+&quot; y numero de la pokedex &quot;+rs.getInt(&quot;Pokemon.NUMERO_POKEDEX&quot;));\n             }\n               \n        }\n        private static void mostrarMovimiento(int n) throws SQLException{\n            Connection con=conexion();\n            String consulta=&quot;select p.NUMERO_POKEDEX,p.NOMBRE,m.NOMBRE from Pokemon p join Pokemon_Movimiento_Forma pmf on p.NUMERO_POKEDEX=pmf.NUMERO_POKEDEX  join Movimiento m on pmf.ID_MOVIMIENTO=m.ID_MOVIMIENTO  where p.NUMERO_POKEDEX=?&quot;;             \n            PreparedStatement ps=con.prepareStatement(consulta);\n            ps.setInt(1, n);\n            ResultSet rs=ps.executeQuery();\n            while(rs.next()) {\n                System.out.println(rs);\n            }\n    }\n        private static void filtrarTipo(String t) throws SQLException {\n            Connection con=conexion();\n            String consulta=&quot;select p.NUMERO_POKEDEX,p.NOMBRE,p.PESO,p.ALTURA,t.nombre from pokemon p join Pokemon_Tipo pt on p.NUMERO_POKEDEX=pt.NUMERO_POKEDEX join Tipo t on pt.ID_TIPO=t.ID_TIPO  where t.nombre=?;&quot;;\n            PreparedStatement ps=con.prepareStatement(consulta);\n            ps.setString(1,t);\n            ResultSet rs=ps.executeQuery();\n            while(rs.next()) {\n                System.out.println(rs);\n            }\n        }\n        private static void filtrarMovimiento(String t) throws SQLException {\n            Connection con=conexion();\n            String consulta=&quot;select t.nombre, count(t.nombre) AS \\&quot;Numeros de movimiento\\&quot; from Movimiento m join Tipo t on m.ID_TIPO=t.ID_TIPO where t.nombre=? group by t.nombre&quot;;\n            PreparedStatement ps=con.prepareStatement(consulta);\n            ps.setString(1,t);\n            ResultSet rs=ps.executeQuery();\n            while(rs.next()) {\n                System.out.println(rs);\n            }\n        }   \n          public static Connection conexion()  {\n                Connection con=null;\n                try {\n                    Class.forName(driver);\n                    con = DriverManager.getConnection(url,&quot;&quot;,&quot;&quot;);/*establece una conexión con la base de datos a través de JDBC (Java Database Connectivity), \n                    //utilizando la URL de conexión especificada.DriverManager es una clase del paquete java.sql \n                    que se encarga de cargar y registrar el controlador JDBC apropiado, y devolver una instancia de Connection \n                    que representa una conexión con la base de datos.*/\n                    System.out.println(&quot;Conexión exitosa&quot;);\n                    \n                } catch (SQLException | ClassNotFoundException ex) {\n                    System.out.println(&quot;Error de conexión: &quot; + ex.getMessage());\n                }\n                return con;             \n          }\n        }\n</code></pre>\n<p>I'm using the Windows login method and the port is 3003\nWhat do I have to change to make my code work?</p>\n<p>I am trying to establish a connection between java and the SQL Server pokemondb database.\nWhen I run the code I get this:</p>\n<blockquote>\n<p>Error de conexi�n: Error de inicio de sesi�n del usuario ''.\nClientConnectionId:7d721444-7622-4951-a321-3607a1c7167a</p>\n</blockquote>\n"},{"comments":[{"comment_id":134499951,"body":"Have you initialized the <code>TextView</code> you are using <code>setText()</code> on?"},{"comment_id":134499956,"body":"How am I supposed to initialize it? I don&#39;t have an Layout file for the ListItem"}],"answers":[{"answer_id":76271312,"body":"<p>The problem is you do not initialize subjectNameTextView, so it is null. And after that, you are trying to call the textView's method on a null object reference.\nTry doing this:</p>\n<pre><code>public class ListItem extends RelativeLayout {\n\n    public void setSubjectName() {\n        if (this.subjectName != null) {\n            if (this.subjectNameTextView == null){\n                this.subjectNameTextView = new TextView(context);\n            }\n            subjectNameTextView = new TextView(context);\n            addView(subjectNameTextView);\n            subjectNameTextView.setText(this.subjectName);\n        }\n    }\n}\n</code></pre>\n<p>Also, you can put text view initialization into your constructor, but be sure you call it if you have multiple constructors.\nThe context instance can be acquired from any view class instances, so you got it covered, because your ListItem extends View.</p>\n"},{"comments":[{"comment_id":134500552,"body":"This answer, together with David&#39;s answer, are not quite efficient, especially since you are going to use it in a list, judging by the class&#39;s name. The reason is that they instantiate <code>TextView</code> everytime you set the text. The best way to solve it is to instantiate the it in the <code>CONSTRUCTOR</code>, so you only do it once."},{"comment_id":134517895,"body":"But @ndriqa which constructor?"},{"comment_id":134517911,"body":"I have a constructor with only <code>context</code>, one with <code>context</code> and <code>attrs</code>, and one with <code>context</code>,<code>attrs</code>, and <code>defStyleAttr</code>"},{"comment_id":134526596,"body":"Since your view AND the text view are both <code>View</code>s, you can init the <code>TextView</code> in each constructor, and pass all the parameters of each constructor, So, in the constructor with only <code>context</code> you init <code>subjectNameTextView = TextView(context)</code>, in the constructor with <code>context</code> and <code>attrs</code>, you init <code>subjectNameTextView = TextView(context, attrs)</code>, ...etc"}],"answer_id":76271316,"body":"<p>You are getting the nullPointerException because you did not initialized you textview &quot;subjectNameTextView&quot;. please change</p>\n<pre><code>public class ListItem extends View {\n\nprivate String subjectName;\nprivate int backgroundColor;\nTextView subjectNameTextView;\n\npublic void setSubjectName() {\n    if (this.subjectName != null) {\n        subjectNameTextView.setText(this.subjectName);\n    }\n}\n\npublic void setColor() {\n    if (this.backgroundColor != 0) {\n        this.setBackgroundColor(this.backgroundColor);\n    }\n}\n}\n</code></pre>\n<p>to</p>\n<pre><code>public class ListItem extends View {\n\nprivate String subjectName;\nprivate int backgroundColor;\nTextView subjectNameTextView;\n\npublic void setSubjectName() {\n subjectNameTextView = new TextView(this); // this code you have to add\n    if (this.subjectName != null) {\n        subjectNameTextView.setText(this.subjectName);\n    }\n}\n\npublic void setColor() {\n    if (this.backgroundColor != 0) {\n        this.setBackgroundColor(this.backgroundColor);\n    }\n}\n}\n</code></pre>\n"}],"last_activity_date":1684320885,"question_id":76271027,"body":"<p>so I am trying to make a ListItem in an App that I am making, and I want it to look something like this:</p>\n<p><a href=\"https://i.stack.imgur.com/W26Vy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W26Vy.png\" alt=\"enter image description here\" /></a></p>\n<p>When I hop into my layout.xml file, without the ListItem, the preview renders properly and so does the app.</p>\n<p><a href=\"https://i.stack.imgur.com/VxhFVl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VxhFVl.png\" alt=\"enter image description here\" /></a><a href=\"https://i.stack.imgur.com/oOGj5l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oOGj5l.png\" alt=\"enter image description here\" /></a></p>\n<p>However with the ListItem, the preview and app do not render.</p>\n<p><a href=\"https://i.stack.imgur.com/Qcj2Al.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Qcj2Al.png\" alt=\"enter image description here\" /></a><a href=\"https://i.stack.imgur.com/jfbr3l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jfbr3l.png\" alt=\"enter image description here\" /></a></p>\n<p>The error was</p>\n<pre><code>Error inflating class ListItem\n</code></pre>\n<p>which was caused by</p>\n<pre><code>Attempt to invoke virtual method 'void android.widget.TextView.setText(java.lang.CharSequence)' on a null object reference\n</code></pre>\n<p>So it had to be something with the TextView.</p>\n<p>Here is my code (I just removed all imports and constructors):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ListItem extends View {\n\n    private String subjectName;\n    private int backgroundColor;\n    TextView subjectNameTextView;\n\n    public void setSubjectName() {\n        if (this.subjectName != null) {\n            subjectNameTextView.setText(this.subjectName);\n        }\n    }\n\n    public void setColor() {\n        if (this.backgroundColor != 0) {\n            this.setBackgroundColor(this.backgroundColor);\n        }\n    }\n}\n</code></pre>\n<p>Here is <code>activity_maths.xml</code> if needed.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.MathsActivity&quot;&gt;\n\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;Hello!&quot;\n        android:textSize=&quot;50sp&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\n\n    &lt;com.atharvnadkarni.funlurn.ListItem\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot; app:title=&quot;Text&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>Alright everyone, I found another post that said to do <code>addView</code> on a <code>ViewGroup</code>, so I changed my <code>setSubjectName</code> function to this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ListItem extends RelativeLayout {\n\n    public void setSubjectName() {\n        if (this.subjectName != null) {\n            addView(subjectNameTextView);\n            subjectNameTextView.setText(this.subjectName);\n        }\n}\n}\n</code></pre>\n<p>But this does not work, and shows that you\n<code>Cannot add a null child view to a ViewGroup</code></p>\n"},{"comments":[{"comment_id":134498645,"body":"You mean something like setting the <a href=\"https://openjfx.io/javadoc/11/javafx.controls/javafx/scene/control/TextInputControl.html#caretPositionProperty\" rel=\"nofollow noreferrer\">caret position</a> The best thing you can probably do is create a small example with a component and text and what you want to happen. More appropriatly you might need this method <a href=\"https://openjfx.io/javadoc/11/javafx.controls/javafx/scene/control/TextInputControl.html#positionCaret(int)\" rel=\"nofollow noreferrer\">positionCaret</a>"},{"comment_id":134498838,"body":"@matt i meant in general, not for a specific node class, I need to cancel the cursor&#39;s horizontal movement if a specific condition is met"},{"comment_id":134499430,"body":"Do you mean the <i>mouse</i> cursor? You want to prevent the user from moving the mouse cursor horizontally if a certain condition is met? If yes, then maybe <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/robot/Robot.html\" rel=\"nofollow noreferrer\"><code>Robot</code></a> is what you want. There&#39;s no way to observe the mouse&#39;s movement via <code>Robot</code> (and a listener on the e.g., <code>Window</code> would only work when the cursor is over said window), but you could repeatedly (via e.g., an <code>AnimationTimer</code>) poll the mouse&#39;s position and then set its <code>x</code> position if it changes. Though I could see a user getting frustrated by this behavior."},{"comment_id":134499725,"body":"I&#39;ve made a draggable pane that cant be dragged out of a certain area and i want to mouse to not be able to go out of it when dragging it, thats the idea. Anyway what&#39;s AnimationTimer about?"},{"comment_id":134500040,"body":"If you were to need to repeatedly poll something on the <i>JavaFX Application Thread</i>, then <code>AnimationTimer</code> would be a way to do that (wouldn&#39;t be hard to set up--see its documentation). But wouldn&#39;t it make more sense to just stop the pane from moving out of the area, while letting the cursor continue to move freely? That would be more user friendly, at least in my opinion. Having my cursor jump to its previous position after I explicitly moved it would annoy me, I think."},{"comment_id":134500114,"body":"The pane already cannot go out of the area but the cursor can, resulting in an ugly offset of the mouse and the pane, anyway i think i&#39;ll just make it so when the cursor comes back it picks up from where it was when it exited the window, I&#39;ve already found a way to do what I originally wanted to i&#39;ll answer the question myself. thanks!"},{"comment_id":134500201,"body":"You could have pane follow the cursor in one dimension. For example, if the mouse goes horizontally out-of-bounds, stop moving horizontally, but continue to move the pane vertically as the mouse does. Similar if the mouse goes vertically out-of-bounds. When the mouse is within bounds, move the pane in both dimensions. That should mean that whenever the mouse is within bounds of the draggable area, it is also hovering over the pane (though possibly at the pane&#39;s edge)."},{"comment_id":134500469,"body":"that&#39;s already to be implemented, im managing it horizontally first and then i&#39;ll use the same code for the vertical part, right now im figuring out how to make it so when the cursor is outside the area and moves towards it it doesn&#39;t move until it&#39;s back to the original position it was in when the pane stopped moving due to the border."},{"comment_id":134503369,"body":"Do you get mouse dragged events when you&#39;re out of bounds? It seems like you could make a simple example of dragging a rectangle. I think you can use the drag events to update the position, but your logic makes it sound like you don&#39;t actually need to update the cursor position, just perform the logic of moving the rectangle."},{"comment_id":134504258,"body":"The idea was to make the cursor stuck within the area in which the rectangle can be moved in for as long as the rectangle is being dragged, after about 2 hours of debugging and testing i&#39;ve settled on a &quot;safe&quot; version of that where when the rectangle is at the edge nothing happens and when the cursor comes back the rectangle&#39;s center gets anchored to the cursor, only issue with that is that if you move the rectangle towards the left and bottom borders rapidly it can glitch out of it for a split second but it comes back to where it should be right after, for now thats what i&#39;ll use."},{"comment_id":134509142,"body":"Check out <a href=\"https://gitlab.com/-/snippets/2543596\" rel=\"nofollow noreferrer\">gitlab.com/-/snippets/2543596</a>"}],"answers":[{"comments":[{"comment_id":134500210,"body":"Note: Given this is a JavaFX application, there&#39;s no reason to use AWT (you should avoid mixing UI frameworks unless absolutely necessary). JavaFX has its own <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/scene/robot/Robot.html\" rel=\"nofollow noreferrer\"><code>javafx.scene.robot.Robot</code></a> class since version 11. There&#39;s also has the <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/geometry/Point2D.html\" rel=\"nofollow noreferrer\"><code>javafx.geometry.Point2D</code></a> class."}],"answer_id":76271200,"body":"<p>This method will move the cursor to the desired point in the screen.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void moveCursor(Point point) {\n    Platform.runLater(() -&gt; {\n        try {\n            Robot robot = new Robot();\n            robot.mouseMove(point.x, point.y);\n        } catch (AWTException e) {\n            e.printStackTrace();\n        }\n    });\n}\n</code></pre>\n"}],"last_activity_date":1684320026,"question_id":76270135,"body":"<p>I need to set the cursor's position in JavaFX, I've searched a lot and most people asked about TextArea stuff and the rest about the Robot class, if this class is what I need, can someone explain how to use it?</p>\n"},{"comments":[{"comment_id":134500148,"body":"Perhaps you need to pay more money for more disk bandwidth?"},{"comment_id":134500341,"body":"@LaurenzAlbe is this configurable ? where we can configure this in Azure portal ?"},{"comment_id":134500600,"body":"First, analyze the problem using <code>EXPLAIN (ANALYZE, BUFFERS)</code>. Figure out what takes so long."}],"last_activity_date":1684319866,"question_id":76271183,"body":"<p>Currently i am trying to insert a large number of rows via JDBC below is my code :</p>\n<pre><code>public void saveAllJdbcBatch(List&lt;JdbcDeliveryDetail&gt; productData){\n   \n List&lt;List&lt;JdbcDeliveryDetail&gt;&gt; listOfBookSub = ListUtil.createSubList(productData, 1000);\nlistOfBookSub.parallelStream().forEach(row -&gt;  saveAllJdbcBatch(row));\n\n    }\n</code></pre>\n<p>Below is my main method to insert :</p>\n<pre><code>  public void saveAllJdbcBatch(List&lt;JdbcDeliveryDetail&gt; jdbcDeliveryDetails){\n       String sql = String.format(&quot;INSERT INTO %s  VALUES (?, ?, ? , ?)&quot;, JdbcDeliveryDetail.class.getAnnotation(Table.class).name());\n\n       try (Connection connection = hikariDataSource.getConnection();\n             PreparedStatement statement = connection.prepareStatement(sql);\n        ){\n            int counter = 0;\n            for (JdbcDeliveryDetail row : jdbcDeliveryDetails) {\n                statement.clearParameters();\n                statement.setInt(1, row.getQuantity());\n                statement.setDate(2, Date.valueOf(row.getDate()));\n                statement.setFloat(3, row.getId());\n                statement.setInt(4, row.getInsertId());\n                \n                statement.addBatch();\n                if ((counter + 1) % 1000 == 0 || (counter + 1) == jdbcDeliveryDetails.size()) {\n                    statement.executeBatch();\n                    statement.clearBatch();\n                }\n\n                counter++;\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>Here i am using connection pool size of <code>20</code> for both the database , currently in Azure SQL the insert is very slow for around <code>1,00,000</code> rows it's taking more around 60 sec and same code for postgresql is taking <code>12</code> seconds only. Both have same number of cores.</p>\n<p>Is postgresql perform better in terms of insertion ? Azure SQL JDBC do we need to any fine tuning parameter ?</p>\n"},{"comments":[{"comment_id":134497160,"body":"You should be able to get it from the stack trace which you can get via <code>Thread.currentThread().getStackTrace()</code>."},{"comment_id":134497796,"body":"or <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/StackWalker.StackFrame.html#getMethodName()\" rel=\"nofollow noreferrer\"><code>StackWalker.StackFrame.getMethodName()</code></a>"}],"answers":[{"comments":[{"comment_id":134497820,"body":"really <i>schauderhaft</i> ;-)  better use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Thread.html#getStackTrace()\" rel=\"nofollow noreferrer\"><code>Thread#getStackTrace</code></a>  instead of throwing and catching an Exception"},{"comment_id":134498774,"body":"Why not analyze the stack trace right after you created the exception? Throwing and catching the exception does not add anything useful to the process. Of course, it’s even clearer when you call <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Thread.html#getStackTrace()\" rel=\"nofollow noreferrer\"><code>Thread.getStackTrace()</code></a>. That method also does just <code>new Exception().getStackTrace()</code> under the hood, but using the method better documents the intention. Or use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/StackWalker.html\" rel=\"nofollow noreferrer\"><code>StackWalker</code></a> to only process <i>one</i> stack frame."}],"answer_id":76269282,"body":"<p>You can get the current stack trace from <code>Thread.currentThread().getStackTrace()</code> and analyse it to get the information you need.</p>\n<p>Thanks to <em>user16320675</em> and <em>Holger</em> who pointed out that my initial solution was uneccessary complex.</p>\n"}],"last_activity_date":1684319700,"question_id":76269245,"body":"<p>is there a good way to create a utils that we will call the name of the method in which it was used?</p>\n<pre><code>    @NoArgsConstructor(access = PRIVATE)\n    public class NameUtils {\n    \n    public static String getMethodName(){\n    ...\n    }\n    }\n    \n    public class MyClass {\n    \n    public void methodName(){\n    \n    String name = NameUtils.getMethodName()   //should return 'methodName'\n    }\n    }\n</code></pre>\n"},{"last_activity_date":1684319566,"question_id":76271096,"body":"<p>I want to get the Microsoft email notification in my java program. I am using change notification of Microsoft Graph API to get notified whenever new email gets received.\nI have information like Secret ID, Value, client_id and tenant_id.</p>\n<p>I have written a code to subscribe the emails but getting issues.</p>\n<p>Code :</p>\n<pre><code>\n    public static void main(String[] args) throws ParseException {\n\n        final ClientSecretCredential clientSecretCredential = new ClientSecretCredentialBuilder()\n                .clientId(&quot;**** client ID ****&quot;)\n                .clientSecret(&quot;**** client secret ****&quot;)\n                .tenantId(&quot;**** tenantID ****&quot;).build();\n\n        List&lt;String&gt; scope = new ArrayList&lt;&gt;();\n        scope.add(&quot;.default&quot;);\n        final TokenCredentialAuthProvider tokenCredentialAuthProvider = new TokenCredentialAuthProvider(scope,\n                clientSecretCredential);\n\n        final GraphServiceClient graphClient = GraphServiceClient.builder()\n                .authenticationProvider(tokenCredentialAuthProvider).buildClient();\n\n        final User me = graphClient.me().buildRequest().get();\n\n        Subscription subscription = new Subscription();\n        subscription.changeType = &quot;created,updated&quot;;\n        subscription.notificationUrl = &quot;https://webhook.azurewebsites.net/notificationClient&quot;;\n        subscription.lifecycleNotificationUrl = &quot;https://webhook.azurewebsites.net/api/lifecycleNotifications&quot;;\n        subscription.resource = &quot;/me/mailfolders('inbox')/messages&quot;;\n        subscription.expirationDateTime = OffsetDateTimeSerializer.deserialize(&quot;2024-03-20T11:00:00Z&quot;);\n        subscription.clientState = &quot;SecretClientState&quot;;\n\n        graphClient.subscriptions().buildRequest().post(subscription);\n\n    }\n}```\n\nAfter starting the java application, I am getting error as,\n\n15:48:18.633 [main] DEBUG reactor.util.Loggers - Using Slf4j logging framework\n15:48:19.101 [main] DEBUG com.azure.core.implementation.util.Providers - Using com.azure.core.http.okhttp.OkHttpAsyncClientProvider as the default com.azure.core.http.HttpClientProvider.\n15:48:19.729 [ForkJoinPool.commonPool-worker-1] DEBUG com.microsoft.aad.msal4j.ConfidentialClientApplication - [Correlation ID: 701314f0-c33f-465b-9102-463be729a515] Execution of class com.microsoft.aad.msal4j.AcquireTokenSilentSupplier failed.\ncom.microsoft.aad.msal4j.MsalClientException: Token not found in the cache\n    at com.microsoft.aad.msal4j.AcquireTokenSilentSupplier.execute(AcquireTokenSilentSupplier.java:98)\n    at com.microsoft.aad.msal4j.AuthenticationResultSupplier.get(AuthenticationResultSupplier.java:69)\n    at com.microsoft.aad.msal4j.AuthenticationResultSupplier.get(AuthenticationResultSupplier.java:18)\n    at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)\n    at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1760)\n    at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)\n    at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)\n    at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)\n    at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)\n    at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)\n15:48:19.740 [ForkJoinPool.commonPool-worker-1] DEBUG com.microsoft.aad.msal4j.AcquireTokenByClientCredentialSupplier - SkipCache set to false. Attempting cache lookup\n15:48:19.740 [ForkJoinPool.commonPool-worker-1] DEBUG com.microsoft.aad.msal4j.AcquireTokenByClientCredentialSupplier - Cache lookup failed: Token not found in the cache\n15:48:20.043 [ForkJoinPool.commonPool-worker-1] DEBUG com.microsoft.aad.msal4j.ConfidentialClientApplication - [Correlation ID: bcbf5e5d-09f7-4bdd-818f-353fbcfd2ea3] Access Token was returned\n15:48:20.044 [ForkJoinPool.commonPool-worker-1] INFO com.azure.identity.ClientSecretCredential - Azure Identity =&gt; getToken() result for scopes [.default]: SUCCESS\nMay 17, 2023 3:48:20 PM com.microsoft.graph.logger.DefaultLogger logError\nSEVERE: CoreHttpProvider[sendRequestInternal] - 408Graph service exception\nMay 17, 2023 3:48:20 PM com.microsoft.graph.logger.DefaultLogger logError\nSEVERE: Throwable detail: com.microsoft.graph.http.GraphServiceException: Error code: BadRequest\nError message: /me request is only valid with delegated authentication flow.\n\nGET https://graph.microsoft.com/v1.0/me\nSdkVersion : graph-java/v5.54.0\n\n\n400 : Bad Request\n[...]\n\n[Some information was truncated for brevity, enable debug logging for more details]\nException in thread &quot;main&quot; com.microsoft.graph.http.GraphServiceException: Error code: BadRequest\nError message: /me request is only valid with delegated authentication flow.\n\nGET https://graph.microsoft.com/v1.0/me\nSdkVersion : graph-java/v5.54.0\n\n\n400 : Bad Request\n[...]\n\n[Some information was truncated for brevity, enable debug logging for more details]\n    at com.microsoft.graph.http.GraphServiceException.createFromResponse(GraphServiceException.java:419)\n    at com.microsoft.graph.http.GraphServiceException.createFromResponse(GraphServiceException.java:378)\n    at com.microsoft.graph.http.CoreHttpProvider.handleErrorResponse(CoreHttpProvider.java:512)\n    at com.microsoft.graph.http.CoreHttpProvider.processResponse(CoreHttpProvider.java:442)\n    at com.microsoft.graph.http.CoreHttpProvider.sendRequestInternal(CoreHttpProvider.java:408)\n    at com.microsoft.graph.http.CoreHttpProvider.send(CoreHttpProvider.java:225)\n    at com.microsoft.graph.http.CoreHttpProvider.send(CoreHttpProvider.java:202)\n    at com.microsoft.graph.http.BaseRequest.send(BaseRequest.java:335)\n    at com.microsoft.graph.requests.UserRequest.get(UserRequest.java:72)\n    at com.nib.plp.controller.GraphSubscription.main(GraphSubscription.java:37)\n\n\nKindly suggest if any changes are required to be made.\nYour help is really appreciate as it is extremely important for me to implement.\n</code></pre>\n"},{"comments":[{"comment_id":73353417,"body":"The fact that something is written with JUnit doesn&#39;t mean it is a unit test it could very well be an integration test in which you wan to test the whole setup."},{"comment_id":73353691,"body":"The tests that I have seen are definitely not integration tests"},{"comment_id":73354128,"body":"MockMvc can be used in 2 different ways, standalone and with a full blown setup. Standalone mode is basically setting up the controller and you execute it like you would with a request. Added advantage is that you are also testing your mappings on your controller, which you wouldn&#39;t be testing if you simply invoke the method. This might be very handy if you expect certain things to happen (type checking, custom error handling) ."},{"comment_id":73354205,"body":"Next to that if you really need an extensive unit test to test functionality of your controller you are probably doing too much in your controller it should basically be nothing more then an integration component between the web and your service layer. It should contain little to no logic."}],"answers":[{"comments":[{"comment_id":73372664,"body":"add to that the possibility to test parameter validation with <code>@Valid</code> annotation and the corresponding return codes or the possibility to check that <code>@ExceptionHandler</code>s do their work."}],"answer_id":43138861,"body":"<p>When it comes to the unit-testing of a <code>Controller</code> (or any Endpoint which is exposed) classes, there are two things that we will validate:</p>\n\n<p>(1) Controller's actual logic itself as standalone i.e., right service calls are invoked or not etc..</p>\n\n<p>(2) Request URL mapping and the Response status &amp; object</p>\n\n<p>Item (1) above is what we test in general with all other classes like Services, Utility classes etc..</p>\n\n<p><strong>Item (2) needs to be covered/tested additionally for the endpoints (controller classes) which have been exposed</strong>, so whether we use Spring's <code>MockMVC</code> or other machinery to do that, it is up to us really. </p>\n\n<p><strong>Spring's <code>MockMVC</code> indeed helps us to start the in-memory servlet container</strong> &amp; check that the right controller methods are invoked &amp; then the right responses have been coming out.</p>\n\n<p>From my personal experience, testing the controllers (for item(2)) helped me to resolve URL mapping conflict issues (of course, within the same controller) etc.. straight away rather than fixing them at the later stages of the project.</p>\n"},{"answer_id":43139403,"body":"<p>Based on My experience I will try to answer your question.</p>\n\n<p><strong>First thing we need to understand why we use unit testing?</strong></p>\n\n<blockquote>\n  <p>It is a extra check used by developer to write clean working code.\n  Clean working code means every line written should be doing what it is\n  expected to do. how do you achieve this? Here comes unit testing. The\n  standalone unit of code you are writing should be verified standalone.\n  Method is best part in code which represents standalone unit code\n  template.</p>\n</blockquote>\n\n<p><strong>Unit Testing for Method</strong></p>\n\n<blockquote>\n  <p>Developer should write a test for method which describes the method\n  behavior. And possible checks that i follow is  is it returning the\n  expected value considering all positive scenarios? is it working in\n  case of Exception? is it calling correct subsequent methods ?</p>\n  \n  <p><strong>Developer should verify the method by actually calling it providing a\n  mock environment</strong></p>\n</blockquote>\n\n<p>Below is possible answer to your question. though it is solely based upon the developers.</p>\n\n<p>Controller methods are intended to invoke correct service call accepting input and returning the value from service to view. \nSo I may think of write a unit test case for controller method as you are thinking is a right approach. But <strong>you should verify the method by calling it in same way as it will be called in real time.</strong> \nso you need to call controller method in same way as MVC does. Hence it is better option to use MockMVC.\nMockMVC is also useful to verify the urls, input params , response and status which are part of controller method. Considering these all it makes it standalone unit of code.</p>\n\n<p>Hope this will clarify your doubt.</p>\n"}],"last_activity_date":1684318816,"question_id":43138249,"body":"<p>I have seen people around me using Spring MVC in unit tests for controller classes, which is not helpful in what a unit test is for.</p>\n\n<p>Unit tests are supposed to test your actual implementation of the controller class, and this can be achieved more accurately with simple Junit tests rather than using Spring Mock MVC.</p>\n\n<p>But then the question arises, what's the real usage of Spring Mock MVC then? What do you need it for?</p>\n\n<p>Let's say I have below code :</p>\n\n<pre><code>@Controller\n@RequestMapping(\"/systemusers\")\npublic class SystemUserController\n{\n    @RequestMapping(value = \"/{id}\", method = RequestMethod.GET)\n    public String getUser(final Model model)\n    {\n\n        // some logic to return user's details as json\n\n        return UserDetailsPage;\n    }\n }\n</code></pre>\n\n<p>I can test this class/controller more accurately with Junit than with Spring Mock MVC (all it does is generates some json which can be asserted with junit).</p>\n\n<p>I can also test with Spring Mock MVC like using the correct endpoint returns the correct HTTP status and correct response page string. </p>\n\n<p><strong>But doesn't that mean that we are testing Spring MVC's functionality rather than the actual code for method under test?</strong></p>\n\n<p>P.S. : I have kept the code to minimal which I think is sufficient to explain my question. Assume there is no compilation error.</p>\n"},{"answers":[{"answer_id":76270945,"body":"<p>As you have moved to spring 6 so it will use <code>jakarta.servlet-api</code>. Also, you have used spring-mvc so you have to do configuration in <strong>web.xml</strong> file to let the servlet know it needs to support multipart request. <code>@MultipartConfig</code> will not work with web.xml.</p>\n<p>You need 1 bean for <code>StandardServletMultipartResolver</code>.</p>\n<pre><code>@Bean\nMultipartResolver multipartResolver() {\n    return new StandardServletMultipartResolver();\n}\n</code></pre>\n<p>You need to update <code>web.xml</code> add <code>&lt;multipart-config /&gt;</code></p>\n<pre><code>&lt;servlet&gt;\n  &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n  &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n  &lt;multipart-config /&gt; &lt;!-- Add for supporting multipart request --&gt;\n&lt;/servlet&gt;\n&lt;servlet-mapping&gt;\n  &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n  &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n&lt;/servlet-mapping&gt;\n</code></pre>\n"}],"last_activity_date":1684318279,"question_id":75971936,"body":"<p>Trying to write a simple file upload handler using Spring MVC 6.0.6. A file is uploaded using <code>POST</code>, with encoding <code>multipart/form-data</code>. On the server side, the handler is</p>\n<pre class=\"lang-java prettyprint-override\"><code>import jakarta.servlet.annotation.MultipartConfig;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.multipart.MultipartFile;\n\n@Controller\n@MultipartConfig\npublic class SimpleUpload {\n    @PostMapping(path = &quot;/upload&quot;)\n    public ResponseEntity&lt;String&gt; uploadFile(@RequestParam(&quot;File&quot;) MultipartFile file) {\n        return file.isEmpty() ?\n                new ResponseEntity&lt;String&gt;(HttpStatus.NOT_FOUND) : new ResponseEntity&lt;String&gt;(HttpStatus.OK);\n    }\n\n}\n</code></pre>\n<p>Getting this error: <code>Unable to process parts as no multi-part configuration has been provided</code>.</p>\n<p>I have read other answers about this error, so I have added the multi-part configuration as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@EnableWebMvc\n@Configuration\n@Import({ApplicationConfig.class})\npublic class MvcConfig implements WebMvcConfigurer {\n\n    @Bean(name = &quot;multipartResolver&quot;)\n    public MultipartResolver getMultipartResolver() {\n        return new StandardServletMultipartResolver();\n    }\n    @Bean(name = &quot;filterMultipartResolver&quot;) // alternate name suggested by some people\n    public MultipartResolver getFilterMultipartResolver() {\n        return new StandardServletMultipartResolver();\n    }\n}\n</code></pre>\n<p>It does not seem to work, because the error is always the same.</p>\n<p>The unit test in the application is successful:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@WebAppConfiguration\n@ContextConfiguration(classes = { MvcConfig.class, SimpleUpload.class })\n@RunWith(SpringJUnit4ClassRunner.class)\npublic class MultipartPostRequestControllerUnitTest {\n    @Autowired\n    private WebApplicationContext webApplicationContext;\n\n    @Test\n    public void whenFileUploaded_thenVerifyStatus() throws Exception {\n        MockMultipartFile file = new MockMultipartFile(&quot;File&quot;,\n                &quot;hello.txt&quot;,\n                MediaType.TEXT_PLAIN_VALUE,\n                &quot;Hello, World!&quot;.getBytes());\n\n        MockMvc mockMvc = MockMvcBuilders.webAppContextSetup(webApplicationContext)\n                .build();\n        mockMvc.perform(multipart(&quot;/upload&quot;)\n                .file(file))\n                .andExpect(status().isOk());\n    }\n}\n</code></pre>\n<p>But sending a file via Postman to <a href=\"http://127.0.0.1:8080/upload\" rel=\"nofollow noreferrer\">http://127.0.0.1:8080/upload</a> returns an HTTP status 500, with root cause <code>Unable to process parts as no multi-part configuration has been provided</code>.</p>\n<p>How can I fix this?</p>\n<p>Using Tomcat 10.1.7 to run the app.</p>\n"},{"last_activity_date":1684318272,"question_id":76255312,"body":"<p>I am running some automation scripts using Appium, TestNG, and Cucumber in Java. I was just wondering if there was a way to set the value of the noRest cap at the feature file level.</p>\n<p>I have to jump between users a lot of my testing. So I currently have noRest=true but that adds a lot of time having to login in for every scenario. I was hoping there is a way to only have the app reset between feature files so that all scenarios in a feature file run in the same app session using the same user.</p>\n<p>Is that a possibility?</p>\n<p>Note: Appium 2.0 and Java 11</p>\n"},{"answers":[{"answer_id":76270874,"body":"<p>Assuming that you don't need to further process the data in your Java code (in a way that is not possible in Snowflake) and ignoring the fact that there are a large number of unknown variables implicit in your question, then doing it all in Snowflake will almost certainly perform better - Snowflake is an engine specifically designed to process data in the way you've described; Java is a generic coding language</p>\n"}],"last_activity_date":1684317761,"question_id":76270299,"body":"<p>Asummed I have several not big tables (thousands of records maximum, ~10 columns), and I need to join them and do more aggregations like count and group by; what is preferred, in terms of performance: doing the joins and aggregations in Snowflake, or fetching the data as is from Snowflake and doing the joins and aggregations in Java code?</p>\n"},{"answers":[{"comments":[{"comment_id":2369210,"body":"Aha! This makes more sense. I figured that the class literal on a generic wouldn&#39;t even make much sense, but I had no idea that it was due to this. Thanks!"},{"comment_id":48943858,"body":"<code>List&lt;Integer&gt; list1 = new ArrayList&lt;Integer&gt;();  List&lt;String&gt; list2 = (List&lt;String&gt;)list1;  list2.add(&quot;foo&quot;); &#47;&#47; perfectly legal</code>  You can;t do that in Java, you get type mismatch compilation error !"},{"comment_id":52992913,"body":"so... what do I do if I need one?"},{"comment_id":61110044,"body":"You can always fool the compiler by <code>List&lt;String&gt; list2 = (List&lt;String&gt;) (Object) list1;</code>"},{"comment_id":68139915,"body":"Yet another &quot;It just works in C#, but not in Java&quot; for me. I am deserialising a JSON object, and typeof(List&lt;MyClass&gt;) works perfectly fine in C#, but List&lt;MyClass&gt;.class is a syntax error in Java. Yes, there is a logical explanation for that as usual as Cletus wrote, but I always wonder why all those things just work in C#."},{"comment_id":76011385,"body":"@ChristopherFrancisco see the comment by kftse that follows yours, and more directly, the separate Answer by slaurent."},{"comment_id":77632350,"body":"what do you mean it perfectly legal? That part of the code doesn&#39;t compile?"},{"comment_id":104633412,"body":"@DamnVegetables If you&#39;re just trying to deserialize you can deserialize using MyClass[].class as that actually exists and it will deserialize properly."}],"answer_id":2390682,"body":"<p>You can't due to <a href=\"http://java.sun.com/docs/books/tutorial/java/generics/erasure.html\" rel=\"noreferrer\">type erasure</a>.</p>\n\n<p>Java generics are little more than syntactic sugar for Object casts. To demonstrate:</p>\n\n<pre><code>List&lt;Integer&gt; list1 = new ArrayList&lt;Integer&gt;();\nList&lt;String&gt; list2 = (List&lt;String&gt;)list1;\nlist2.add(\"foo\"); // perfectly legal\n</code></pre>\n\n<p>The only instance where generic type information is retained at runtime is with <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Field.html#getGenericType()\" rel=\"noreferrer\"><code>Field.getGenericType()</code></a> if interrogating a class's members via reflection.</p>\n\n<p>All of this is why <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#getClass()\" rel=\"noreferrer\"><code>Object.getClass()</code></a> has this signature:</p>\n\n<pre><code>public final native Class&lt;?&gt; getClass();\n</code></pre>\n\n<p>The important part being <code>Class&lt;?&gt;</code>.</p>\n\n<p>To put it another way, from the <a href=\"http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html#FAQ106\" rel=\"noreferrer\">Java Generics FAQ</a>:</p>\n\n<blockquote>\n  <h2>Why is there no class literal for concrete parameterized types?</h2>\n  \n  <p><strong><em>Because parameterized type has no exact runtime type representation.</em></strong></p>\n  \n  <p>A class literal denotes a <code>Class</code>\n  object that represents a given type.\n  For instance, the class literal\n  <code>String.class</code> denotes the <code>Class</code>\n  object that represents the type\n  <code>String</code> and is identical to the\n  <code>Class</code> object that is returned when\n  method <code>getClass</code> is invoked on a\n  <code>String</code> object. A class literal can\n  be used for runtime type checks and\n  for reflection. </p>\n  \n  <p>Parameterized types lose their type\n  arguments when they are translated to\n  byte code during compilation in a\n  process called type erasure . As a\n  side effect of type erasure, all \n  instantiations of a generic type share\n  the same runtime representation,\n  namely that of the corresponding raw\n  type .  In other words, parameterized\n  types do not have type representation\n  of their own. Consequently, there is\n  no point in forming class literals\n  such as <code>List&lt;String&gt;.class</code> ,\n  <code>List&lt;Long&gt;.class</code> and <code>List&lt;?&gt;.class</code>\n  , since no such <code>Class</code> objects exist.\n  Only the raw type <code>List</code> has a <code>Class</code>\n  object that represents its runtime\n  type. It is referred to as\n  <code>List.class</code>.</p>\n</blockquote>\n"},{"comments":[{"comment_id":2369215,"body":"Thanks for the additional explanation--my understanding of generics is so much clearer now that I realize they&#39;re not a runtime mechanism. :)"},{"comment_id":27084302,"body":"In my opinion, this just means that generic were implemented in a mediocre manner by Sun, hopefully Oracle fixes this some day. C#&#39;s implementation of generic is much much much better (Anders is godlike)"},{"comment_id":45255773,"body":"@MarcelValdezOrozco AFAIK, in Java they implemented it that way because they wanted old code (pre-1.5) to work on new JVMs without any issues. Seems it&#39;s a very smart design decision which cares about compatibility. I don&#39;t think there&#39;s anything mediocre in that."}],"answer_id":2390699,"body":"<p>To expound on cletus' answer, at runtime all record of the generic types is removed.  Generics are processed only in the compiler and are used to provide additional type safety.  They are really just shorthand that allows the compiler to insert typecasts at the appropriate places.  For example, previously you'd have to do the following:</p>\n\n<pre><code>List x = new ArrayList();\nx.add(new SomeClass());\nIterator i = x.iterator();\nSomeClass z = (SomeClass) i.next();\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>List&lt;SomeClass&gt; x = new ArrayList&lt;SomeClass&gt;();\nx.add(new SomeClass());\nIterator&lt;SomeClass&gt; i = x.iterator();\nSomeClass z = i.next();\n</code></pre>\n\n<p>This allows the compiler to check your code at compile-time, but at runtime it still looks like the first example.</p>\n"},{"comments":[{"comment_id":71422050,"body":"With this I was able create a class with a generic E and then use <code>clzz = new TypeToken&lt;E&gt;(){}.getRawType();</code> to later iterate over similarly structured enums with <code>clzz.getEnumConstants()</code> and then finally use refection to call member methods a la <code>Method method = clzz.getDeclaredMethod(&quot;getSomeFoo&quot;);</code> so much win! Thank YOU!"}],"answer_id":2399305,"body":"<p>There are no Class literals for parameterized types, however there are Type objects that correctly define these types. </p>\n\n<p>See java.lang.reflect.ParameterizedType \n  - <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/lang/reflect/ParameterizedType.html\" rel=\"noreferrer\">http://java.sun.com/j2se/1.5.0/docs/api/java/lang/reflect/ParameterizedType.html</a></p>\n\n<p>Google's Gson library defines a TypeToken class that allows to simply generate parameterized types and uses it to spec json objects with complex parameterized types in a generic friendly way. In your example you would use:</p>\n\n<pre><code>Type typeOfListOfFoo = new TypeToken&lt;List&lt;Foo&gt;&gt;(){}.getType()\n</code></pre>\n\n<p>I intended to post links to the TypeToken and Gson classes javadoc but Stack Overflow won't let me post more than one link since I'm a new user, you can easily find them using Google search</p>\n"},{"answer_id":2401994,"body":"<p>Due to the exposed fact that Class literals doesn't have generic type information, I think you should assume that it will be impossible to get rid of all the warnings. In a way, using <code>Class&lt;Something&gt;</code> is the same as using a collection without specifying the generic type. The best I could come out with was:</p>\n\n<pre><code>private &lt;C extends A&lt;C&gt;&gt; List&lt;C&gt; getList(Class&lt;C&gt; cls) {\n    List&lt;C&gt; res = new ArrayList&lt;C&gt;();\n    // \"snip\"... some stuff happening in here, using cls\n    return res;\n}\n\npublic &lt;C extends A&lt;C&gt;&gt; List&lt;A&lt;C&gt;&gt; getList() {\n    return getList(A.class);\n}\n</code></pre>\n"},{"comments":[{"comment_id":63096593,"body":"This is also the workaround used by JAX-RS, cf. <a href=\"http://docs.oracle.com/javaee/7/api/javax/ws/rs/core/GenericEntity.html\" rel=\"nofollow noreferrer\"><code>GenericEntity</code></a> and <a href=\"http://docs.oracle.com/javaee/7/api/javax/ws/rs/core/GenericType.html\" rel=\"nofollow noreferrer\"><code>GenericType</code></a>."}],"answer_id":29892616,"body":"<p>Well as we all know that it gets erased. But it can be known under some circumstances where the type is explicitly mentioned in the class hierarchy:</p>\n\n<pre><code>import java.lang.reflect.*;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.LinkedHashMap;\nimport java.util.Map;\nimport java.util.stream.Collectors;\n\npublic abstract class CaptureType&lt;T&gt; {\n    /**\n     * {@link java.lang.reflect.Type} object of the corresponding generic type. This method is useful to obtain every kind of information (including annotations) of the generic type.\n     *\n     * @return Type object. null if type could not be obtained (This happens in case of generic type whose information cant be obtained using Reflection). Please refer documentation of {@link com.types.CaptureType}\n     */\n    public Type getTypeParam() {\n        Class&lt;?&gt; bottom = getClass();\n        Map&lt;TypeVariable&lt;?&gt;, Type&gt; reifyMap = new LinkedHashMap&lt;&gt;();\n\n        for (; ; ) {\n            Type genericSuper = bottom.getGenericSuperclass();\n            if (!(genericSuper instanceof Class)) {\n                ParameterizedType generic = (ParameterizedType) genericSuper;\n                Class&lt;?&gt; actualClaz = (Class&lt;?&gt;) generic.getRawType();\n                TypeVariable&lt;? extends Class&lt;?&gt;&gt;[] typeParameters = actualClaz.getTypeParameters();\n                Type[] reified = generic.getActualTypeArguments();\n                assert (typeParameters.length != 0);\n                for (int i = 0; i &lt; typeParameters.length; i++) {\n                    reifyMap.put(typeParameters[i], reified[i]);\n                }\n            }\n\n            if (bottom.getSuperclass().equals(CaptureType.class)) {\n                bottom = bottom.getSuperclass();\n                break;\n            }\n            bottom = bottom.getSuperclass();\n        }\n\n        TypeVariable&lt;?&gt; var = bottom.getTypeParameters()[0];\n        while (true) {\n            Type type = reifyMap.get(var);\n            if (type instanceof TypeVariable) {\n                var = (TypeVariable&lt;?&gt;) type;\n            } else {\n                return type;\n            }\n        }\n    }\n\n    /**\n     * Returns the raw type of the generic type.\n     * &lt;p&gt;For example in case of {@code CaptureType&lt;String&gt;}, it would return {@code Class&lt;String&gt;}&lt;/p&gt;\n     * For more comprehensive examples, go through javadocs of {@link com.types.CaptureType}\n     *\n     * @return Class object\n     * @throws java.lang.RuntimeException If the type information cant be obtained. Refer documentation of {@link com.types.CaptureType}\n     * @see com.types.CaptureType\n     */\n    public Class&lt;T&gt; getRawType() {\n        Type typeParam = getTypeParam();\n        if (typeParam != null)\n            return getClass(typeParam);\n        else throw new RuntimeException(\"Could not obtain type information\");\n    }\n\n\n    /**\n     * Gets the {@link java.lang.Class} object of the argument type.\n     * &lt;p&gt;If the type is an {@link java.lang.reflect.ParameterizedType}, then it returns its {@link java.lang.reflect.ParameterizedType#getRawType()}&lt;/p&gt;\n     *\n     * @param type The type\n     * @param &lt;A&gt;  type of class object expected\n     * @return The Class&lt;A&gt; object of the type\n     * @throws java.lang.RuntimeException If the type is a {@link java.lang.reflect.TypeVariable}. In such cases, it is impossible to obtain the Class object\n     */\n    public static &lt;A&gt; Class&lt;A&gt; getClass(Type type) {\n        if (type instanceof GenericArrayType) {\n            Type componentType = ((GenericArrayType) type).getGenericComponentType();\n            Class&lt;?&gt; componentClass = getClass(componentType);\n            if (componentClass != null) {\n                return (Class&lt;A&gt;) Array.newInstance(componentClass, 0).getClass();\n            } else throw new UnsupportedOperationException(\"Unknown class: \" + type.getClass());\n        } else if (type instanceof Class) {\n            Class claz = (Class) type;\n            return claz;\n        } else if (type instanceof ParameterizedType) {\n            return getClass(((ParameterizedType) type).getRawType());\n        } else if (type instanceof TypeVariable) {\n            throw new RuntimeException(\"The type signature is erased. The type class cant be known by using reflection\");\n        } else throw new UnsupportedOperationException(\"Unknown class: \" + type.getClass());\n    }\n\n    /**\n     * This method is the preferred method of usage in case of complex generic types.\n     * &lt;p&gt;It returns {@link com.types.TypeADT} object which contains nested information of the type parameters&lt;/p&gt;\n     *\n     * @return TypeADT object\n     * @throws java.lang.RuntimeException If the type information cant be obtained. Refer documentation of {@link com.types.CaptureType}\n     */\n    public TypeADT getParamADT() {\n        return recursiveADT(getTypeParam());\n    }\n\n    private TypeADT recursiveADT(Type type) {\n        if (type instanceof Class) {\n            return new TypeADT((Class&lt;?&gt;) type, null);\n        } else if (type instanceof ParameterizedType) {\n            ArrayList&lt;TypeADT&gt; generic = new ArrayList&lt;&gt;();\n            ParameterizedType type1 = (ParameterizedType) type;\n            return new TypeADT((Class&lt;?&gt;) type1.getRawType(),\n                    Arrays.stream(type1.getActualTypeArguments()).map(x -&gt; recursiveADT(x)).collect(Collectors.toList()));\n        } else throw new UnsupportedOperationException();\n    }\n\n}\n\npublic class TypeADT {\n    private final Class&lt;?&gt; reify;\n    private final List&lt;TypeADT&gt; parametrized;\n\n    TypeADT(Class&lt;?&gt; reify, List&lt;TypeADT&gt; parametrized) {\n        this.reify = reify;\n        this.parametrized = parametrized;\n    }\n\n    public Class&lt;?&gt; getRawType() {\n        return reify;\n    }\n\n    public List&lt;TypeADT&gt; getParameters() {\n        return parametrized;\n    }\n}\n</code></pre>\n\n<p>And now you can do things like:</p>\n\n<pre><code>static void test1() {\n        CaptureType&lt;String&gt; t1 = new CaptureType&lt;String&gt;() {\n        };\n        equals(t1.getRawType(), String.class);\n    }\n\n    static void test2() {\n        CaptureType&lt;List&lt;String&gt;&gt; t1 = new CaptureType&lt;List&lt;String&gt;&gt;() {\n        };\n        equals(t1.getRawType(), List.class);\n        equals(t1.getParamADT().getParameters().get(0).getRawType(), String.class);\n    }\n\n\n    private static void test3() {\n            CaptureType&lt;List&lt;List&lt;String&gt;&gt;&gt; t1 = new CaptureType&lt;List&lt;List&lt;String&gt;&gt;&gt;() {\n            };\n            equals(t1.getParamADT().getRawType(), List.class);\n        equals(t1.getParamADT().getParameters().get(0).getRawType(), List.class);\n    }\n\n    static class Test4 extends CaptureType&lt;List&lt;String&gt;&gt; {\n    }\n\n    static void test4() {\n        Test4 test4 = new Test4();\n        equals(test4.getParamADT().getRawType(), List.class);\n    }\n\n    static class PreTest5&lt;S&gt; extends CaptureType&lt;Integer&gt; {\n    }\n\n    static class Test5 extends PreTest5&lt;Integer&gt; {\n    }\n\n    static void test5() {\n        Test5 test5 = new Test5();\n        equals(test5.getTypeParam(), Integer.class);\n    }\n\n    static class PreTest6&lt;S&gt; extends CaptureType&lt;S&gt; {\n    }\n\n    static class Test6 extends PreTest6&lt;Integer&gt; {\n    }\n\n    static void test6() {\n        Test6 test6 = new Test6();\n        equals(test6.getTypeParam(), Integer.class);\n    }\n\n\n\n    class X&lt;T&gt; extends CaptureType&lt;T&gt; {\n    }\n\n    class Y&lt;A, B&gt; extends X&lt;B&gt; {\n    }\n\n    class Z&lt;Q&gt; extends Y&lt;Q, Map&lt;Integer, List&lt;List&lt;List&lt;Integer&gt;&gt;&gt;&gt;&gt; {\n    }\n\n    void test7(){\n        Z&lt;String&gt; z = new Z&lt;&gt;();\n        TypeADT param = z.getParamADT();\n        equals(param.getRawType(), Map.class);\n        List&lt;TypeADT&gt; parameters = param.getParameters();\n        equals(parameters.get(0).getRawType(), Integer.class);\n        equals(parameters.get(1).getRawType(), List.class);\n        equals(parameters.get(1).getParameters().get(0).getRawType(), List.class);\n        equals(parameters.get(1).getParameters().get(0).getParameters().get(0).getRawType(), List.class);\n        equals(parameters.get(1).getParameters().get(0).getParameters().get(0).getParameters().get(0).getRawType(), Integer.class);\n    }\n\n\n\n\n    static void test8() throws IllegalAccessException, InstantiationException {\n        CaptureType&lt;int[]&gt; type = new CaptureType&lt;int[]&gt;() {\n        };\n        equals(type.getRawType(), int[].class);\n    }\n\n    static void test9(){\n        CaptureType&lt;String[]&gt; type = new CaptureType&lt;String[]&gt;() {\n        };\n        equals(type.getRawType(), String[].class);\n    }\n\n    static class SomeClass&lt;T&gt; extends CaptureType&lt;T&gt;{}\n    static void test10(){\n        SomeClass&lt;String&gt; claz = new SomeClass&lt;&gt;();\n        try{\n            claz.getRawType();\n            throw new RuntimeException(\"Shouldnt come here\");\n        }catch (RuntimeException ex){\n\n        }\n    }\n\n    static void equals(Object a, Object b) {\n        if (!a.equals(b)) {\n            throw new RuntimeException(\"Test failed. \" + a + \" != \" + b);\n        }\n    }\n</code></pre>\n\n<p>More info <a href=\"https://gist.github.com/purijatin/a0486995c7df0e56b398\" rel=\"nofollow\">here</a>. But again, it is almost impossible to retrieve for:</p>\n\n<pre><code>class SomeClass&lt;T&gt; extends CaptureType&lt;T&gt;{}\nSomeClass&lt;String&gt; claz = new SomeClass&lt;&gt;();\n</code></pre>\n\n<p>where it gets erased.</p>\n"},{"comments":[{"comment_id":65590003,"body":"By changing the second cast from <code>Object</code> to <code>Class</code> you can probably save the overhead of a (pointless) checked runtime cast."},{"comment_id":70652272,"body":"@Clashsoft Using <code>Class</code> instead of <code>Object</code>, as you suggest, seems more meaningful but it doesn&#39;t remove the need of the <code>@SuppressWarnings(&quot;unchecked&quot;)</code> annotation, it even add a new warning : <code>Class is a raw type. References to generic type Class&lt;T&gt; should be parameterized</code>"},{"comment_id":73856994,"body":"You can use <code>Class&lt;?&gt;</code>: <code>(Class&lt;List&lt;Foo&gt;&gt;)(Class&lt;?&gt;)List.class</code>"},{"comment_id":76011362,"body":"@Devstr I see you are correct when I try that... What are the arguments for using either (Object) or (Class&lt;?&gt;)?"},{"comment_id":91787938,"body":"This answer is totally pointless. The reason OP wanted to parameterize the class path was because he got a <code>unchecked</code> warning. This answer doesn&#39;t change / improve any of that. OP even states in his question that he doesn&#39;t want to use <code>SuppressWarnings</code>..."},{"comment_id":112424353,"body":"@Spenhouet That might be true, but it solved the problem I had - a constructor of my supertype needed a Class&lt;List&lt;T&gt;&gt; where I have defined the exact type of T."}],"answer_id":30754982,"body":"<p>You can manage it with a double cast :</p>\n\n<p><code>@SuppressWarnings(\"unchecked\")\nClass&lt;List&lt;Foo&gt;&gt; cls = (Class&lt;List&lt;Foo&gt;&gt;)(Object)List.class</code></p>\n"},{"comments":[{"comment_id":112424525,"body":"This is quite useful for implementing a concrete subclass of <code>com.fasterxml.jackson.databind.deser.std.StdDeserializer</code> with a generic type such as a collection."}],"answer_id":40517676,"body":"<p>You could use a helper method to get rid of <code>@SuppressWarnings(\"unchecked\")</code> all over a class.</p>\n\n<pre><code>@SuppressWarnings(\"unchecked\")\nprivate static &lt;T&gt; Class&lt;T&gt; generify(Class&lt;?&gt; cls) {\n    return (Class&lt;T&gt;)cls;\n}\n</code></pre>\n\n<p>Then you could write</p>\n\n<pre><code>Class&lt;List&lt;Foo&gt;&gt; cls = generify(List.class);\n</code></pre>\n\n<p>Other usage examples are</p>\n\n<pre><code>  Class&lt;Map&lt;String, Integer&gt;&gt; cls;\n\n  cls = generify(Map.class);\n\n  cls = TheClass.&lt;Map&lt;String, Integer&gt;&gt;generify(Map.class);\n\n  funWithTypeParam(generify(Map.class));\n\npublic void funWithTypeParam(Class&lt;Map&lt;String, Integer&gt;&gt; cls) {\n}\n</code></pre>\n\n<p>However, since it is rarely really useful, and the usage of the method defeats the compiler's type checking, I would not recommend to implement it in a place where it is publicly accessible.</p>\n"},{"answer_id":54031723,"body":"<p>The <a href=\"http://www.angelikalanger.com/GenericsFAQ/FAQSections/ParameterizedTypes.html#FAQ106\" rel=\"noreferrer\">Java Generics FAQ</a> and therefore also cletus' <a href=\"https://stackoverflow.com/a/2390682\">answer</a> sound like there is no point in having <code>Class&lt;List&lt;T&gt;&gt;</code>, however the real problem is that this is extremely dangerous:</p>\n\n<pre><code>@SuppressWarnings(\"unchecked\")\nClass&lt;List&lt;String&gt;&gt; stringListClass = (Class&lt;List&lt;String&gt;&gt;) (Class&lt;?&gt;) List.class;\n\nList&lt;Integer&gt; intList = new ArrayList&lt;&gt;();\nintList.add(1);\nList&lt;String&gt; stringList = stringListClass.cast(intList);\n// Surprise!\nString firstElement = stringList.get(0);\n</code></pre>\n\n<p>The <code>cast()</code> makes it look as if it is safe, but in reality it is not safe at all.</p>\n\n<hr>\n\n<p>Though I don't get where there can't be <code>List&lt;?&gt;.class</code> = <code>Class&lt;List&lt;?&gt;&gt;</code> since this would be pretty helpful when you have a method which determines the type based on the generic type of a <code>Class</code> argument.</p>\n\n<p>For <code>getClass()</code> there is <a href=\"https://bugs.openjdk.java.net/browse/JDK-6184881\" rel=\"noreferrer\">JDK-6184881</a> requesting to switch to using wildcards, however it does not look like this change will be performed (very soon) since it is not compatible with previous code (see <a href=\"https://bugs.openjdk.java.net/browse/JDK-6184881?focusedCommentId=12339160#comment-12339160\" rel=\"noreferrer\">this comment</a>).</p>\n"},{"answer_id":76270861,"body":"<p>What's not possible in Java is still possible if you add some Kotlin to the mix.</p>\n<p>Create a Kotlin file with the following content:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun &lt;T&gt; getGenericListType(): Class&lt;List&lt;T&gt;&gt; {\n    return emptyList&lt;T&gt;().javaClass\n}\n\nfun &lt;T&gt; getGenericListSuperType(): Class&lt;MutableList&lt;in T&gt;&gt; {\n    return mutableListOf&lt;T&gt;().javaClass\n}\n\nfun &lt;T&gt; getGenericListExtendsType(): Class&lt;MutableList&lt;out T&gt;&gt; {\n    return mutableListOf&lt;T&gt;().javaClass\n}\n</code></pre>\n<p>Calling these methods from Java will give you, respectively:</p>\n<ol>\n<li>a <code>Class&lt;List&lt;T&gt;&gt;</code>,</li>\n<li>a <code>Class&lt;List&lt;? super T&gt;&gt;</code>, and</li>\n<li>a <code>Class&lt;List&lt;? extends T&gt;&gt;</code>.</li>\n</ol>\n"}],"last_activity_date":1684317674,"question_id":2390662,"body":"<p>Typically, I've seen people use the class literal like this:</p>\n\n<pre><code>Class&lt;Foo&gt; cls = Foo.class;\n</code></pre>\n\n<p>But what if the type is generic, e.g. List? This works fine, but has a warning since List should be parameterized:</p>\n\n<pre><code>Class&lt;List&gt; cls = List.class\n</code></pre>\n\n<p>So why not add a <code>&lt;?&gt;</code>? Well, this causes a type mismatch error:</p>\n\n<pre><code>Class&lt;List&lt;?&gt;&gt; cls = List.class\n</code></pre>\n\n<p>I figured something like this would work, but this is just a plain ol' syntax error:</p>\n\n<pre><code>Class&lt;List&lt;Foo&gt;&gt; cls = List&lt;Foo&gt;.class\n</code></pre>\n\n<p>How can I get a <code>Class&lt;List&lt;Foo&gt;&gt;</code> statically, e.g. using the class literal?</p>\n\n<p>I <em>could</em> use <code>@SuppressWarnings(\"unchecked\")</code> to get rid of the warnings caused by the non-parameterized use of List in the first example, <code>Class&lt;List&gt; cls = List.class</code>, but I'd rather not.</p>\n\n<p>Any suggestions?</p>\n"},{"comments":[{"comment_id":134486507,"body":"You probably still have the reference to the deleted address(es) in your person object. Remove them from the addressList."},{"comment_id":134486845,"body":"How though? Thought deleteAll would take care of it automatically."},{"comment_id":134487601,"body":"You shouldn&#39;t try this, as JPA does caching by the entity ID - delete then persist is pretty much just an undo operation internally so I don&#39;t know why you&#39;d want delete then insert statements. That said, your issue is not likely with the delete then persist, but with your transactional context; the same issue you have in your other question. Put another way, are any changes you make committed and visible through your DB client? @Transactional is a Spring thing, so you&#39;d have to look at the contracts and how your methods chain together to understand why this might not work the way you want"},{"comment_id":134487676,"body":"If your issue is solely with the delete not working, that you are trying to delete something and seeing an issue because you want it gone in the end - you are, as the error suggest, passing in an entity that you&#39;ve marked to delete to the save/merge operation. Look at your model again, you&#39;ve got references between entities marked as cascade merge. So if they aren&#39;t null when one of those entities is saved, the save is likely cascading to the entity you want to delete, causing it to undo the delete. Clear and manage your references and the problem will go away."}],"answers":[{"answer_id":76266804,"body":"<p>The issue is that you have reference in your <code>addressList</code> to some of the Address instances that were delete.\nIf you debug and set a breakpoint before saving the <code>Person</code>, you will see that this list holds the IDs of the deleted addresses.\nDeleting the <code>Address</code> will not result in it being removed from the other (<code>Person</code>) object as long as it was loaded in memory before delete.</p>\n<p>I see 2 way to fix this:</p>\n<ol>\n<li>You fetch the Person from JPA after deletion.</li>\n<li>You manually remove the deleted addresses from the list</li>\n</ol>\n<p>As you have a list of addresses that you pass to the deleteAll, I guess you have everything you need to use solution 2. Just do a <code>person.addressList.removeAll(//list of addresses) </code> before saving.</p>\n<p>This is assuming that you want all addresses removed from DB. If you want to recreated them, you could remove the IDs of the addresses in the list.</p>\n"},{"answer_id":76270856,"body":"<p>For your mapping calling <code>AddressRespository.deleteAll(Iterable)</code> is not enough, because it removes <code>Address</code> items from the repo, but not from the <code>Person.addressList()</code>. To fix your issue you need to modify your code as</p>\n<pre class=\"lang-java prettyprint-override\"><code>person.getAddressList().removeAll(addressesToBeRemoved);\nAddressRespository.deleteAll(addressesToBeRemoved);\n</code></pre>\n<p>P.S. As soon as you have <code>orphanRemoval = true</code> in your <code>@OneToMany</code> declaration if the addresses you are removing are not referenced from another <code>Person</code> instance it can be enough just to remove addresses from <code>addressList()</code> to make Hibernate remove them from the <code>address</code> table as well:</p>\n<pre class=\"lang-java prettyprint-override\"><code>person.getAddressList().removeAll(addressesToBeRemoved);\n</code></pre>\n<p>See this answer: <a href=\"https://stackoverflow.com/a/60838256/12473843\">https://stackoverflow.com/a/60838256/12473843</a></p>\n"}],"last_activity_date":1684317633,"question_id":76263146,"body":"<p>I have two entities like this with joins,</p>\n<p>Entity <code>Address</code>:</p>\n<pre><code>@ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.MERGE)\n@JsonBackReference\n@EqaulsAndHashCode.Exclude\n@ToString.Exclude\n@JoinColumn(name=&quot;PERSON_ID&quot;, referencedColumns = &quot;PERSON_ID&quot;)\nprivate Person personDetails;\n</code></pre>\n<p>Entity <code>Person</code>:</p>\n<pre><code>@OneToMany(mappedBy = &quot;personDetails&quot;, orphanRemoval = true, cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n@ToString.Exclude\n@EqualsAndHashCode.Exclude\n@JsonManagedReference\nList&lt;Address&gt; addressList = new ArrayList&lt;&gt;();\n</code></pre>\n<p>I am deleting <code>Address</code> using <code>AddressRespository.deleteAll(//list of address)</code> inside a <code>@Transactional</code> method. This method then calls another method from a different service which is also annotated with <code>@Transactional</code> and updates one of the property of Person and performs the <code>save</code> operation.</p>\n<p>As this stage it returns an error <code>deleted instance passed to merge</code>.</p>\n<p>I tried to use <code>flush</code> after <code>deleteAll</code> which resolves this error but it did not delete anything in the database.</p>\n<p>How can I achieve the desired outcome here?</p>\n"},{"comments":[{"comment_id":52996812,"body":"We did a really good one in Udacity: we used newSTR = str.replace(findStr, &quot;&quot;); and returned count = ((str.length() - newSTR.length())/findStr.length());"},{"comment_id":73939541,"body":"Similar question for characters: <a href=\"http://stackoverflow.com/q/275944/873282\">stackoverflow.com/q/275944/873282</a>"},{"comment_id":77577787,"body":"Don&#39;t you also want to account for the case where the prefix of the search string is its suffix? In that case I don&#39;t think any of the suggested answers would work.  <a href=\"https://gist.github.com/itissid/c6b2dd2f3ffd55874dc8c2a721716a08\" rel=\"nofollow noreferrer\">here</a> is an example. In that case you would need a more elaborate algorithm, like the Knuth Morris Pratt(KMP) which is coded up in the CLRS book"},{"comment_id":77858451,"body":"it is not halting for you, because after reaching your &#39;halt&#39; condition (lastIndex == -1) you reset it by incrementing the value of lastIndex (lastIndex += findStr.length();)"},{"comment_id":116629644,"body":"@Sid if you wanted that behaviour you could just increment lastIndex by only 1 each time rather than findStr.length. In my case for example, I only need to know if a character matched or not, don&#39;t mind about counting multiple overlaps. so just depends on each individual use case"},{"comment_id":131190888,"body":"take a look: <a href=\"https://www.geeksforgeeks.org/frequency-substring-string/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/frequency-substring-string</a>"}],"answers":[{"answer_id":767766,"body":"<p>Increment <code>lastIndex</code> whenever you look for next occurrence. </p>\n\n<p>Otherwise it's always finding the first substring (at position 0).</p>\n"},{"comments":[{"comment_id":121996184,"body":"lastIndex is set to the return value and then incremented, the only way it is 0 after an iteration of the loop is if the length of the substring is 1"}],"answer_id":767768,"body":"<pre><code>public int indexOf(int ch,\n                   int fromIndex)\n</code></pre>\n\n<p>Returns the index within this string of the first occurrence of the specified character, starting the search at the specified index.</p>\n\n<p>So your <code>lastindex</code> value is always 0 and it always finds <em>hello</em> in the string.</p>\n"},{"answer_id":767773,"body":"<p>try adding <code>lastIndex+=findStr.length()</code> to the end of your loop, otherwise you will end up in an endless loop because once you found the substring, you are trying to find it again and again from the same last position.</p>\n"},{"comments":[{"comment_id":40823245,"body":"The code contains an error. If we search for a single character, the <code>findStr.length() - 1</code> returns 0 and we are in an endless cycle."}],"answer_id":767813,"body":"<pre><code>String str = \"helloslkhellodjladfjhello\";\nString findStr = \"hello\";\nint lastIndex = 0;\nint count = 0;\n\nwhile((lastIndex = str.indexOf(findStr, lastIndex)) != -1) {\n     count++;\n     lastIndex += findStr.length() - 1;\n}\nSystem.out.println(count);\n</code></pre>\n\n<p>at the end of the loop count is 3; hope it helps</p>\n"},{"comments":[{"comment_id":32468752,"body":"This does NOT find special characters, it will find 0 count for strings below:  <code>String str = &quot;hel+loslkhel+lodjladfjhel+lo&quot;; Pattern p = Pattern.compile(&quot;hel+lo&quot;);</code>"},{"comment_id":32472490,"body":"yes it will if you express your regex correctly. try with <code>Pattern.compile(&quot;hel\\\\+lo&quot;);</code> the <code>+</code> sign has a special meaning in a regex and needs to be escaped."},{"comment_id":44160648,"body":"If what you are looking for is to take an arbitrary String and use it as an exact match with all special regular expression characters ignored, <code>Pattern.quote(str)</code> is your friend!"},{"comment_id":67893826,"body":"this does not work for &quot;aaa&quot; when str = &quot;aaaaaa&quot;. There are 4 answer but yours giving 2"},{"comment_id":82164533,"body":"This solution doesn&#39;t work for this case: str = &quot;This is a test \\\\n\\\\r string&quot;, subStr = &quot;\\\\r&quot;, it shows 0 occurrences."},{"comment_id":105280153,"body":"Can modern Java (such as 1.8) reduce that line count with some clever iterator?"}],"answer_id":767828,"body":"<p>Do you really have to handle the matching yourself ? Especially if all you need is the number of occurences, regular expressions are tidier :</p>\n\n<pre><code>String str = \"helloslkhellodjladfjhello\";\nPattern p = Pattern.compile(\"hello\");\nMatcher m = p.matcher(str);\nint count = 0;\nwhile (m.find()){\n    count +=1;\n}\nSystem.out.println(count);     \n</code></pre>\n"},{"comments":[{"comment_id":122981076,"body":"This will fail for string &quot;aaa&quot; and substring &quot;aa&quot;. It will return 1 while the count is two. The indexes of the occurrences are [0,1]"},{"comment_id":127634536,"body":"@Niko The correct result depends on whether or not overlapping matches are allowed."}],"answer_id":767833,"body":"<p>Your <code>lastIndex += findStr.length();</code> was placed outside the brackets, causing an infinite loop (when no occurence was found, lastIndex was always to <code>findStr.length()</code>). </p>\n\n<p>Here is the fixed version :</p>\n\n<pre><code>String str = \"helloslkhellodjladfjhello\";\nString findStr = \"hello\";\nint lastIndex = 0;\nint count = 0;\n\nwhile (lastIndex != -1) {\n\n    lastIndex = str.indexOf(findStr, lastIndex);\n\n    if (lastIndex != -1) {\n        count++;\n        lastIndex += findStr.length();\n    }\n}\nSystem.out.println(count);\n</code></pre>\n"},{"comments":[{"comment_id":579969,"body":"This reply is the exact copy of the post I made an hour before ;)"},{"comment_id":592057,"body":"Note that this might or might not return the result expected. With substring &quot;aa&quot; and string to search &quot;aaa&quot; the number of occurences expected may be one (returned by this code), but may be two as well (in this case you&#39;ll need &quot;lastIndex++&quot; instead of &quot;lastIndex += findStr.length()&quot;) depending on what you are looking for."},{"comment_id":598109,"body":"@olivier didnt see that... :(  @stan thats absolutely correct... i was just fixing the code in the problem... guess it depends on what bobcom means by number of occurrences in the string..."},{"comment_id":929494,"body":"do{ ... } while(lastIndex != -1) would be a better fit, esp. when processing multiple lines."},{"comment_id":47323726,"body":"When are people going to learn to wrap stuff like this in a copy and paste static method? See my answer below, it&#39;s also more optimized."},{"comment_id":47422121,"body":"if you didnt see oliver&#39;s post, means that both of you copied the same source from somewhere else :)"},{"comment_id":48161631,"body":"or both of us wrote the same thing, IIRC I wrote the whole thing in a text editor... how many different ways can one write such a simple program in anyways."},{"comment_id":89531707,"body":"The moral here is that if you&#39;re intending to write an answer, check <i>first</i> whether or not someone else has already written the exact same answer.  There&#39;s really no benefit in having the same answer appear twice, regardless of whether your answer was copied, or written independently."},{"comment_id":122992459,"body":"plus one for everybody that ended up here from leet code :)"}],"answer_id":767910,"body":"<p>The last line was creating a problem. <code>lastIndex</code> would never be at -1, so there would be an infinite loop. This can be fixed by moving the last line of code into the if block.</p>\n\n<pre><code>String str = \"helloslkhellodjladfjhello\";\nString findStr = \"hello\";\nint lastIndex = 0;\nint count = 0;\n\nwhile(lastIndex != -1){\n\n    lastIndex = str.indexOf(findStr,lastIndex);\n\n    if(lastIndex != -1){\n        count ++;\n        lastIndex += findStr.length();\n    }\n}\nSystem.out.println(count);\n</code></pre>\n"},{"comments":[{"comment_id":19158283,"body":"<code>return haystack.split(Pattern.quote(needle), -1).length - 1;</code> if for instance <code>needle=&quot;:)&quot;</code>"},{"comment_id":19448062,"body":"You can even remove second argument of <code>split()</code> for a shorter one-liner"},{"comment_id":19448354,"body":"@lOranger Without the <code>,-1</code> it will drop trailing matches."},{"comment_id":19448434,"body":"Ouch, thanks, good to know! This will teach me to read the small lines in the javadoc..."},{"comment_id":23220274,"body":"Nice! But it includes only non-overlapping matches, no? E.g. matching &quot;aa&quot; in &quot;aaa&quot; will return 1, not 2? Of course including overlapping or non-overlapping matches are both valid and dependent on user requirements (perhaps a flag to indicate count overlaps, yes/no)?"},{"comment_id":40431729,"body":"-1 .. try running this on &quot;aaaa&quot; and &quot;aa&quot;.. the correct answer is 3 not 2."},{"comment_id":54764964,"body":"Possibly this answer could be improved two ways: (1) Use <code>Splitter</code> from Google Guava, as it can work directly from a <code>String</code>, or (2) Metaquote the <code>String</code> via <code>Pattern.quote(String)</code> before calling <code>String.find(String, int)</code>.  Without protective regex metaquoting, you may introduce subtle bugs."}],"answer_id":770069,"body":"<p>A shorter version. ;)</p>\n\n<pre><code>String str = \"helloslkhellodjladfjhello\";\nString findStr = \"hello\";\nSystem.out.println(str.split(findStr, -1).length-1);\n</code></pre>\n"},{"comments":[{"comment_id":38327500,"body":"No matter how right this suggestion is , it cannot be accepted as the solution as it is not answering OP&#39;s question"},{"comment_id":38548912,"body":"Is this deprecated or something .. my IDE is not recognising"},{"comment_id":53023526,"body":"@VamsiPavanMahesh StringUtils is a library of Apache Commons. Check here : <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html\" rel=\"nofollow noreferrer\">commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/&zwnj;&#8203;&hellip;</a>"},{"comment_id":59633243,"body":"This answer is a copy of Peter Lawrey&#39;s answer a day earlier (see below)."},{"comment_id":87556388,"body":"<code>StringUtils</code> hasn&#39;t <code>countMatches</code> method."},{"comment_id":103992387,"body":"it has since StringUtils version 3 org.apache.commons.lang3.StringUtils"}],"answer_id":772099,"body":"<p>How about using <a href=\"http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html#countMatches(java.lang.CharSequence,%20java.lang.CharSequence)\" rel=\"noreferrer\">StringUtils.countMatches</a> from Apache Commons Lang?</p>\n\n<pre><code>String str = \"helloslkhellodjladfjhello\";\nString findStr = \"hello\";\n\nSystem.out.println(StringUtils.countMatches(str, findStr));\n</code></pre>\n\n<p>That outputs:</p>\n\n<pre><code>3\n</code></pre>\n"},{"answer_id":12002599,"body":"<p>Try this one. It replaces all the matches with a <code>-</code>.</p>\n\n<pre><code>String str = \"helloslkhellodjladfjhello\";\nString findStr = \"hello\";\nint numberOfMatches = 0;\nwhile (str.contains(findStr)){\n    str = str.replaceFirst(findStr, \"-\");\n    numberOfMatches++;\n}\n</code></pre>\n\n<p>And if you don't want to destroy your <code>str</code> you can create a new string with the same content:</p>\n\n<pre><code>String str = \"helloslkhellodjladfjhello\";\nString strDestroy = str;\nString findStr = \"hello\";\nint numberOfMatches = 0;\nwhile (strDestroy.contains(findStr)){\n    strDestroy = strDestroy.replaceFirst(findStr, \"-\");\n    numberOfMatches++;\n}\n</code></pre>\n\n<p>After executing this block these will be your values:</p>\n\n<pre><code>str = \"helloslkhellodjladfjhello\"\nstrDestroy = \"-slk-djladfj-\"\nfindStr = \"hello\"\nnumberOfMatches = 3\n</code></pre>\n"},{"answer_id":14317260,"body":"<p>Here is the advanced version for counting how many times the token occurred in a user entered string:</p>\n\n<pre><code>public class StringIndexOf {\n\n    public static void main(String[] args) {\n\n        Scanner scanner = new Scanner(System.in);\n\n        System.out.println(\"Enter a sentence please: \\n\");\n        String string = scanner.nextLine();\n\n        int atIndex = 0;\n        int count = 0;\n\n        while (atIndex != -1)\n        {\n            atIndex = string.indexOf(\"hello\", atIndex);\n\n            if(atIndex != -1)\n            {\n                count++;\n                atIndex += 5;\n            }\n        }\n\n        System.out.println(count);\n    }\n\n}\n</code></pre>\n"},{"answer_id":14846347,"body":"<p>This below method show how many time substring repeat on ur whole string. Hope use full to you:-</p>\n\n<pre><code>    String searchPattern=\"aaa\"; // search string\n    String str=\"aaaaaababaaaaaa\"; // whole string\n    int searchLength = searchPattern.length(); \n    int totalLength = str.length(); \n    int k = 0;\n    for (int i = 0; i &lt; totalLength - searchLength + 1; i++) {\n        String subStr = str.substring(i, searchLength + i);\n        if (subStr.equals(searchPattern)) {\n           k++;\n        }\n\n    }\n</code></pre>\n"},{"comments":[{"comment_id":25351172,"body":"This has been covered in <a href=\"http://stackoverflow.com/a/770069/1053021\">another answer</a> already; and that answer did it better, too."},{"comment_id":32172881,"body":"This should be a comment on the answer in question, not another answer."}],"answer_id":17449292,"body":"<p>The answer given as correct is no good for counting things like line returns and is far too verbose. Later answers are better but all can be achieved simply with</p>\n\n<pre><code>str.split(findStr).length\n</code></pre>\n\n<p>It does not drop trailing matches using the example in the question.</p>\n"},{"answer_id":21780228,"body":"<p>here is the other solution without using regexp/patterns/matchers  or even not using StringUtils.</p>\n\n<pre><code>String str = \"helloslkhellodjladfjhelloarunkumarhelloasdhelloaruhelloasrhello\";\n        String findStr = \"hello\";\n        int count =0;\n        int findStrLength = findStr.length();\n        for(int i=0;i&lt;str.length();i++){\n            if(findStr.startsWith(Character.toString(str.charAt(i)))){\n                if(str.substring(i).length() &gt;= findStrLength){\n                    if(str.substring(i, i+findStrLength).equals(findStr)){\n                        count++;\n                    }\n                }\n            }\n        }\n        System.out.println(count);\n</code></pre>\n"},{"answer_id":27931326,"body":"<p>If you need the index of each substring within the original string, you can do something with indexOf like this:</p>\n\n<pre><code> private static List&lt;Integer&gt; getAllIndexesOfSubstringInString(String fullString, String substring) {\n    int pointIndex = 0;\n    List&lt;Integer&gt; allOccurences = new ArrayList&lt;Integer&gt;();\n    while(fullPdfText.indexOf(substring,pointIndex) &gt;= 0){\n       allOccurences.add(fullPdfText.indexOf(substring, pointIndex));\n       pointIndex = fullPdfText.indexOf(substring, pointIndex) + substring.length();\n    }\n    return allOccurences;\n}\n</code></pre>\n"},{"answer_id":29214065,"body":"<p>As @Mr_and_Mrs_D suggested:</p>\n\n<pre><code>String haystack = \"hellolovelyworld\";\nString needle = \"lo\";\nreturn haystack.split(Pattern.quote(needle), -1).length - 1;\n</code></pre>\n"},{"comments":[{"comment_id":134515678,"body":"Very slow. This is essentially what I&#39;m using and it&#39;s super slow. I&#39;m looking for something fast."}],"answer_id":29588095,"body":"<p>Here it is, wrapped up in a nice and reusable method:</p>\n<pre><code>public static int count(String text, String find) {\n        int index = 0, count = 0, length = find.length();\n        while( (index = text.indexOf(find, index)) != -1 ) {                \n                index += length; count++;\n        }\n        return count;\n}\n</code></pre>\n"},{"comments":[{"comment_id":70769790,"body":"Yes... surprised there isn&#39;t something like this in Apache StringUtils."},{"comment_id":115889201,"body":"Best answer as it  handles overlapping pattern."}],"answer_id":35640856,"body":"<p>A lot of the given answers fail on one or more of:</p>\n\n<ul>\n<li>Patterns of arbitrary length</li>\n<li>Overlapping matches (such as counting \"232\" in \"23232\" or \"aa\" in \"aaa\")</li>\n<li>Regular expression meta-characters</li>\n</ul>\n\n<p>Here's what I wrote:</p>\n\n<pre><code>static int countMatches(Pattern pattern, String string)\n{\n    Matcher matcher = pattern.matcher(string);\n\n    int count = 0;\n    int pos = 0;\n    while (matcher.find(pos))\n    {\n        count++;\n        pos = matcher.start() + 1;\n    }\n\n    return count;\n}\n</code></pre>\n\n<p>Example call:</p>\n\n<pre><code>Pattern pattern = Pattern.compile(\"232\");\nint count = countMatches(pattern, \"23232\"); // Returns 2\n</code></pre>\n\n<p>If you want a non-regular-expression search, just compile your pattern appropriately with the <code>LITERAL</code> flag:</p>\n\n<pre><code>Pattern pattern = Pattern.compile(\"1+1\", Pattern.LITERAL);\nint count = countMatches(pattern, \"1+1+1\"); // Returns 2\n</code></pre>\n"},{"comments":[{"comment_id":66854696,"body":"this one takes into account if the string repeats, for instance if you are looking for the string &#39;xx&#39; in a string &#39;xxx&#39;."}],"answer_id":35868922,"body":"<p>Based on the existing answer(s) I'd like to add a \"shorter\" version without the if:</p>\n\n<pre><code>String str = \"helloslkhellodjladfjhello\";\nString findStr = \"hello\";\n\nint count = 0, lastIndex = 0;\nwhile((lastIndex = str.indexOf(findStr, lastIndex)) != -1) {\n    lastIndex += findStr.length() - 1;\n    count++;\n}\n\nSystem.out.println(count); // output: 3\n</code></pre>\n"},{"comments":[{"comment_id":62532854,"body":"Does not work, you should specify the dependency you used."}],"answer_id":35980046,"body":"<p>You can number of occurrences using inbuilt library function:</p>\n\n<pre><code>import org.springframework.util.StringUtils;\nStringUtils.countOccurrencesOf(result, \"R-\")\n</code></pre>\n"},{"comments":[{"comment_id":104187133,"body":"Should be top answer. Thank you!"},{"comment_id":113439612,"body":"perfect answer !!"},{"comment_id":113851992,"body":"FYI: This throws an ArithmeticException because of division with zero in case of empty target string."},{"comment_id":123625191,"body":"@Attila of course it does... just as it throws a NullPointerException if str or target are null. What is the meaning of counting empty strings?"}],"answer_id":44838176,"body":"<p>I'm very surprised no one has mentioned this one liner. It's simple, concise and performs slightly better than <code>str.split(target, -1).length-1</code></p>\n\n<pre><code>public static int count(String str, String target) {\n    return (str.length() - str.replace(target, \"\").length()) / target.length();\n}\n</code></pre>\n"},{"comments":[{"comment_id":79868353,"body":"Good answer. Can you mind adding some notes on how does it work?"},{"comment_id":80507807,"body":"Sure, str - is our source string, subStr - is a substring. The goal is to calculate amount of occurrences of subStr in str. To do this, we use the formula: (a-b)/c, where a - length of str, b - length of str without all occurrences of subStr (we remove all occurrences of subStr from str for this), c - length of subStr. So, basically we extract from the length of str - length of str without all subStr, and then we divide result on the length of subStr. Please let me know if you have any other questions."},{"comment_id":82164470,"body":"Santhosh, you are welcome! The important part is to use Pattern.quote for subStr, otherwise in may fail in some cases, like this one: str = &quot;This is a test \\\\n\\\\r string&quot;, subStr = &quot;\\\\r&quot;. Some similar answers provided here don&#39;t use Pattern, so they will fail in such cases."},{"comment_id":109268495,"body":"There is no reason for regex, use <code>replace</code>, not <code>replaceAll</code>."}],"answer_id":45496942,"body":"<pre><code>public int countOfOccurrences(String str, String subStr) {\n  return (str.length() - str.replaceAll(Pattern.quote(subStr), \"\").length()) / subStr.length();\n}\n</code></pre>\n"},{"comments":[{"comment_id":82085207,"body":"this question is 8 years old, and without any indication of why this is a better solution than the 22 other solutions posted, it should probably be removed"}],"answer_id":47563478,"body":"<pre><code>public static int getCountSubString(String str , String sub){\nint n = 0, m = 0, counter = 0, counterSub = 0;\nwhile(n &lt; str.length()){\n  counter = 0;\n  m = 0;\n  while(m &lt; sub.length() &amp;&amp; str.charAt(n) == sub.charAt(m)){\n    counter++;\n    m++; n++;\n  }\n  if (counter == sub.length()){\n    counterSub++;\n    continue;\n  }\n  else if(counter &gt; 0){\n    continue;\n  }\n  n++;\n}\n\nreturn  counterSub;\n</code></pre>\n\n<p>}</p>\n"},{"answer_id":51865176,"body":"<p>This solution prints the total number of occurrence of a given substring throughout the string, also includes the cases where overlapping matches do exist.</p>\n\n<pre><code>class SubstringMatch{\n    public static void main(String []args){\n        //String str = \"aaaaabaabdcaa\";\n        //String sub = \"aa\";\n        //String str = \"caaab\";\n        //String sub = \"aa\";\n        String str=\"abababababaabb\";\n        String sub = \"bab\";\n\n        int n = str.length();\n        int m = sub.length();\n\n        // index=-1 in case of no match, otherwise &gt;=0(first match position)\n        int index=str.indexOf(sub), i=index+1, count=(index&gt;=0)?1:0;\n        System.out.println(i+\" \"+index+\" \"+count);\n\n        // i will traverse up to only (m-n) position\n        while(index!=-1 &amp;&amp; i&lt;=(n-m)){   \n            index=str.substring(i, n).indexOf(sub);\n            count=(index&gt;=0)?count+1:count;\n            i=i+index+1;  \n            System.out.println(i+\" \"+index);\n        }\n        System.out.println(\"count: \"+count);\n    }\n}\n</code></pre>\n"},{"answer_id":66506791,"body":"<p>🍑 Just a little more peachy answer</p>\n<pre><code>    public int countOccurrences(String str, String sub) {\n        if (str == null || str.length() == 0 || sub == null || sub.length() == 0) return 0;\n        int count = 0;\n        int i = 0;\n        while ((i = str.indexOf(sub, i)) != -1) {\n            count++;\n            i += sub.length();\n        }\n        return count;\n    }\n</code></pre>\n"},{"answer_id":68308995,"body":"<p>I was asked this question in an interview just now and I went completely blank. (Like always, I told myself that the moment the interview ends ill get the solution) which I did, 5 mins after the call ended :(</p>\n<pre><code>    int subCounter=0;\n    int count =0;\n    for(int i=0; i&lt;str.length(); i++) {\n        if((subCounter==0 &amp;&amp; &quot;a&quot;.equals(str.substring(i,i+1))) \n                || (subCounter==1 &amp;&amp; &quot;b&quot;.equals(str.substring(i,i+1)))\n                || (subCounter==2 &amp;&amp; &quot;c&quot;.equals(str.substring(i,i+1)))) {\n            ++subCounter;\n        }\n        if(subCounter==3) {\n            count = count+1;\n            subCounter=0;\n        }\n    }\n    System.out.println(count);\n</code></pre>\n"},{"answer_id":74810202,"body":"<h1><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Matcher.html#results()\" rel=\"nofollow noreferrer\"><code>Matcher.results()</code></a></h1>\n<p>You can find the number of occurrences of a substring in a string using Java 9 method <code>Matcher.results()</code> with a single line of code.</p>\n<p>It produces a Stream of <code>MatchResult</code> objects which correspond to captured substrings, and the only thing needed is to apply <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#count()\" rel=\"nofollow noreferrer\"><code>Stream.count()</code></a> to obtain the number of elements in the stream.</p>\n<pre><code>public static long countOccurrences(String source, String find) {\n    \n    return Pattern.compile(find) // Pattern\n        .matcher(source) // Mather\n        .results()       // Stream&lt;MatchResults&gt;\n        .count();\n}\n</code></pre>\n<p><code>main()</code></p>\n<pre><code>public static void main(String[] args) {\n    System.out.println(countOccurrences(&quot;helloslkhellodjladfjhello&quot;, &quot;hello&quot;));\n}\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>3\n</code></pre>\n"},{"answer_id":76270823,"body":"<p>The best solution to this problem you can find in <code>org.springframework.util.StringUtils.countOccurrencesOf(string, substring)</code>:</p>\n<pre><code>// IndexOfWithJumpSubstringCounterImpl (countOccurrencesOf after refactoring)\npublic static int count(String string, String substring) {\n    if (string == null || string.length() == 0 \n        || substring == null || substring.length() == 0) {\n        return 0;\n    }\n\n    int count = 0;\n    int idx;\n    for(int pos = 0; (idx = string.indexOf(substring, pos)) != -1; pos = idx + substring.length()) {\n        ++count;\n    }\n\n    return count;\n}\n</code></pre>\n<p>There is performance comparison based on JMH (full report: <a href=\"https://medium.com/p/d924cf933fc3\" rel=\"nofollow noreferrer\">https://medium.com/p/d924cf933fc3</a>):</p>\n<pre><code>(impl)                                Mode  Cnt      Score     Error   Units\nIndexOfWithJumpSubstringCounterImpl  thrpt   10  86171.752 ± 225.064  ops/ms\nIndexOfSubstringCounterImpl          thrpt   10  77560.418 ± 154.745  ops/ms\nReplaceBasedSubstringCounterImpl     thrpt   10  29758.761 ±  35.899  ops/ms\nRegExSubstringCounterImpl            thrpt   10   5121.197 ±  10.030  ops/ms\n</code></pre>\n"}],"last_activity_date":1684317430,"question_id":767759,"body":"<p>Why is the following algorithm not halting for me?</p>\n<p>In the code below, <code>str</code> is the string I am searching in, and <code>findStr</code> is the string occurrences of which I'm trying to find.</p>\n<pre><code>String str = &quot;helloslkhellodjladfjhello&quot;;\nString findStr = &quot;hello&quot;;\nint lastIndex = 0;\nint count = 0;\n    \nwhile (lastIndex != -1) {\n    lastIndex = str.indexOf(findStr,lastIndex);\n    \n    if( lastIndex != -1)\n        count++;\n           \n    lastIndex += findStr.length();\n}\n\nSystem.out.println(count);\n</code></pre>\n"},{"comments":[{"comment_id":134493098,"body":"Make sure your run configuration <a href=\"https://i.imgur.com/2oey7ty.png\" rel=\"nofollow noreferrer\">looks like this</a>."},{"comment_id":134493303,"body":"Also, copy this projects code. Your <code>pom.xml</code> is going to cause you grief in the long run. <a href=\"https://github.com/cucumber/cucumber-java-skeleton\" rel=\"nofollow noreferrer\">github.com/cucumber/cucumber-java-skeleton</a>"},{"comment_id":134494146,"body":"@CrazyCoder I tried that exact config and still had the same issue"},{"comment_id":134494150,"body":"This config works for me in a project you shared. Using IntelliJ IDEA 2023.1.1."}],"answers":[{"comments":[{"comment_id":134503779,"body":"I got it to work without a runnerclass. But I also added it in to make things easier down the line, Thanks!"}],"answer_id":76270808,"body":"<p>The main problem was that the feature file couldn't find the location of your steps. I created a RunnerClass for you, and it worked out on my PC</p>\n<pre><code>import io.cucumber.junit.Cucumber;\nimport io.cucumber.junit.CucumberOptions;\nimport org.junit.runner.RunWith;\n\n@RunWith(Cucumber.class)\n@CucumberOptions(\n        features = &quot;src/test/resources&quot;,\n        glue = &quot;com.test.definitions&quot;\n)\npublic class CucumberRunner {\n\n}\n</code></pre>\n<p>I'll add a Pull Request on your github project.</p>\n"}],"last_activity_date":1684317298,"question_id":76266771,"body":"<p>I have a very simple maven project setup and im using selenium webdriver and cucumber to run some basic tests. I have my step definitions .java file in a package under java &gt; test and my .feature file in a resources folder which I have set as the test resources root.</p>\n<p><a href=\"https://i.stack.imgur.com/y0lkA.png\" rel=\"nofollow noreferrer\">Issue</a></p>\n<p>Here's the link to my repository in case that helps: <a href=\"https://github.com/mahmood-alsaftawi/AmazonSelenium\" rel=\"nofollow noreferrer\">https://github.com/mahmood-alsaftawi/AmazonSelenium</a></p>\n<p>The things ive tried so far so updating intelliJ, ensuring the run config glue field was set to the step definitions .java file. Ive tried some other recommendations but I've had no luck.</p>\n"},{"comments":[{"comment_id":134492025,"body":"Followed this link: <a href=\"https://stackoverflow.com/questions/24016962/java8-why-is-it-forbidden-to-define-a-default-method-for-a-method-from-java-lan\" title=\"java8 why is it forbidden to define a default method for a method from java lan\">stackoverflow.com/questions/24016962/&hellip;</a>"},{"comment_id":134492221,"body":"It looks like a compiler error in java 8.  I suppose it gets confused by the fact that <code>Object.finalize()</code> is declared as <code>protected</code>."},{"comment_id":134492811,"body":"@MikeNakis Seems same to me. But why unlike toString(), ovrriding clone() and finalize() inside iterface is allowed?"},{"comment_id":134492861,"body":"According to Brian Goetz on the answer that you linked to, the only methods they disallow in interfaces are <code>equals()</code>, <code>hashCode()</code>, and <code>toString()</code>. This list of methods does not contain <code>clone()</code> and <code>finalize()</code>. You might ask okay, so, why? I do not know."},{"comment_id":134497596,"body":"The compiler is correct and I wouldn’t even call the error message misleading. A few more clarifying words would be helpful, though."}],"answers":[{"comments":[{"comment_id":134520911,"body":"The additional rule that you can’t override methods of Object with default methods is not necessary to enforce this.---   You mean is a rule for public methods of Object class only right? Because in case of above Program 2, ToStringer interface it isn&#39;t allowing to override. Please correct me if I am wrong."},{"comment_id":134560860,"body":"I think, you mean the correct thing. This sentence refers to the rule that prevents you from compiling the interface in the second example. As explained in the answer, it affects public methods only, because you can only override public methods in the interface in the first place. So we can say that it applies to <i>all</i> methods from java.lang.Object an interface can override, which is a better way to express the intention. But for non-public methods, this statement is <a href=\"https://en.wikipedia.org/wiki/Vacuous_truth\" rel=\"nofollow noreferrer\">vacuously true</a>."}],"answer_id":76269470,"body":"<p>When a class inherits a method from an interface and from its superclass, the superclass method has precedence. This is regardless of whether any of the methods is <code>abstract</code>.</p>\n<p>Therefore, when your <code>FOO</code> class does not declare the <code>clone()</code> and <code>finalize()</code> methods, it will inherit the <em><code>protected</code></em> methods from its superclass. The fact that the interface’s methods are <code>default</code> does not matter here. But the fact that these interface methods are implicitly <code>public</code> does matter, as the inherited <code>protected</code> methods are incompatible with the interface’s <code>public</code> declarations.</p>\n<p>That’s exactly what the error message tells you, the inherited protected “<em>finalize() in Object</em>” cannot implement the public interface method “<em>finalize() in ClonerFinalizer</em>” because that would “<em>assign weaker access privileges</em>”.</p>\n<p>The fact that superclass methods have precedence implies that you can never override a class’s method with an interface’s <code>default</code> method and therefore, it is impossible to provide an implementation for any of the methods of <code>java.lang.Object</code> without redeclaring the method in the implementation class.</p>\n<p>The additional rule that you can’t override methods of <code>Object</code> with <code>default</code> methods is not necessary to enforce this. It’s just there to keep you from trying, so you don’t waste your time.</p>\n<p>The reason why this doesn’t prevent you from declaring a <code>clone()</code> or <code>finalize()</code> method is simple: these declarations do not override a method.</p>\n<p>Interfaces can’t have <code>protected</code> methods, hence, these <code>protected</code> methods do not exist in the interface in the first place and your declaration is not overriding them. You can check this by adding an <code>@Override</code> annotation—it will cause a compiler error as the method does not override a method.</p>\n"}],"last_activity_date":1684316828,"question_id":76266192,"body":"<p>Question: Need to understand why in case of Program 1 getting this misleading error, but in Program 2 it gives correct error? Also why unlike <code>toString(),</code> <code>equals(Object),</code> and <code>hashCode(),</code> overriding <code>clone()</code> and <code>finalize()</code> inside interface is allowed?</p>\n<p>Program 1</p>\n<p>For below program getting misleading error:</p>\n<pre><code>FOO.java:10: error: finalize() in Object cannot implement finalize() in ClonerFinalizer\n\npublic class FOO implements ClonerFinalizer {\n             ^\nattempting to assign weaker access privileges; was public\n\n\ninterface ClonerFinalizer {\n    default Object clone() {\n        System.out.println(&quot;default clone&quot;); return this;\n    }\n    default void finalize() {\n        System.out.println(&quot;default finalize&quot;);\n    }\n}\n    \npublic class FOO implements ClonerFinalizer {\n//  @Override\n//  public Object clone() {\n//      return ClonerFinalizer.super.clone();\n//  }\n//  @Override\n//  public void finalize() {\n//      ClonerFinalizer.super.finalize();\n//     }\n    public static void main(String... args) {\n        new FOO().clone();\n        new FOO().finalize();\n    }\n}\n</code></pre>\n<p>But if uncommenting above commented code then it gives correct output.</p>\n<p>Program 2</p>\n<p>Unlike above program in below program clear/correct error</p>\n<pre><code>FOO.java:2: error: default method toString in interface ToStringer overrides a member of java.lang.Object\n\n    default String toString() {\n                   ^\n\n1 error\n\ninterface ToStringer {\n    default String toString() {\n        System.out.println(&quot;default clone&quot;); return &quot;HI&quot;;\n    }\n}\n            \npublic class FOO implements ToStringer {\n    @Override\n    public String toString() {\n        return ToStringer.super.toString();\n    }\n            \n    public static void main(String... args) {\n        new FOO().toString();\n    }\n}\n</code></pre>\n"},{"comments":[{"comment_id":134499384,"body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors.</a> Instead, edit your question to include the code as properly formatted text."},{"comment_id":134499466,"body":"i edited. sorry"},{"comment_id":134499566,"body":"@trangela : same remark for data and results. Do not share images but rather as formatted text."},{"comment_id":134500208,"body":"Probably <code>@JsonIgnore private Team teamId</code> - this <code>@JsonIgnore</code> is the root cause. This annotation might be leaving it to default value 0."},{"comment_id":134500318,"body":"i removed @JsonIgnore but didn&#39;t changed i got zero value for team_id"}],"last_activity_date":1684316825,"question_id":76270668,"body":"<p>hi i develop basic api with spring boot. i wrote api but i got zero value.</p>\n<p>my relationships:</p>\n<pre><code>@Table(name=&quot;teams&quot;)\n@Entity\npublic class Team { \n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name=&quot;id&quot;)\n    private int id;\n    @Column(name=&quot;team&quot;)\n    private String team;\n    @OneToMany(mappedBy = &quot;teamId&quot;)\n    @JsonIgnore\n    private List&lt;Player&gt; players;\n\n@Table(name=&quot;players&quot;)\n@Entity\npublic class Player {\n\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name=&quot;id&quot;)\n    private int id;\n    @Column(name=&quot;name&quot;)\n    private String name;\n    @Column(name=&quot;surname&quot;)\n    private String surname;\n    @Column(name=&quot;image_url&quot;)\n    private String image_url;\n    \n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name=&quot;team_id&quot;)\n    @JsonIgnore\n    private Team teamId;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/UWht5.png\" rel=\"nofollow noreferrer\">player table</a>\n<a href=\"https://i.stack.imgur.com/VfNbE.png\" rel=\"nofollow noreferrer\">team table</a></p>\n<p><a href=\"https://i.stack.imgur.com/TD6vF.png\" rel=\"nofollow noreferrer\"> api player</a>\n<a href=\"https://i.stack.imgur.com/QLTRx.png\" rel=\"nofollow noreferrer\">api team</a></p>\n<p>i except team_id = 1 value but i didn't get</p>\n"},{"comments":[{"comment_id":134499516,"body":"SO is an english-only site. But even if you translated your question into english, it would lack a lot of information to be answerable."}],"last_activity_date":1684316731,"question_id":76270710,"body":"<p>svp j'ai un soucis, a chaque fois que je lance une requête post j'obtiens une erreur 400 bad request</p>\n<p>j'ai utiliser le @RequestBody (import org.springframework.web.bind.annotation.*) et (import io.swagger.v3.oas.annotations.parameters.RequestBody) de mais toujours rien de tout</p>\n"},{"comments":[{"comment_id":126673055,"body":"It checks that <code>ch</code> is a letter in the range abc...z."}],"answers":[{"comments":[{"comment_id":126673297,"body":"In that case you treat chars like bytes, which is only true if you operate in ASCII. Even UTF-8 can have national special characters that are completely ignored by this approach."}],"answer_id":71675638,"body":"<p>A benefit of chars is that you can operate with them like if they were integers.</p>\n<p>For example, you can do you this as well <code>'a' + 3 = 'd'</code></p>\n<p>Meaning that <code>'a' &lt; 'd' = true</code>.</p>\n"},{"answer_id":71675677,"body":"<p>The comparison of characters the way it is done can create confusion, as you can see from <a href=\"https://stackoverflow.com/questions/43450659/java-character-comparison\">Java: Character comparison</a>.</p>\n<p>Basically @TDG is correct by saying that ch is checked to be between 'a' and 'z', and thus the check might be translated as &quot;is ch a lower case character?&quot;</p>\n<p>The tricky part is that depending on the language people use the expectation can be different, especially since language specific characters are not taken into account. In German language, 'ö' would definitely qualify as lower case character but is not in the range of the check. The complexity may get evident by studying the <a href=\"http://www.unicode.org/charts/\" rel=\"nofollow noreferrer\">Unicode code charts</a>.</p>\n<p>The best check is to use <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/Character.html#isLowerCase(char)\" rel=\"nofollow noreferrer\">Character.isLowerCase()</a>.</p>\n"},{"answer_id":71675980,"body":"<p><code>char</code> is a character that represented by a number which is the index of the character in the <code>ASCII/unicode</code> table, since the the alphabet characters are arranged in order in the <code>ASCII</code> table, the following code checks if the <code>ch</code> is in the range of the lowercase alphabet characters representation which is <code>97</code> to <code>122</code> in the table.</p>\n<p>using <code>(int) ch</code> you can see the decimal value of the character and can compare it with the index in the ASCII table.</p>\n<p>you can see the ASCII table here:<a href=\"https://www.asciitable.com/\" rel=\"nofollow noreferrer\">https://www.asciitable.com/</a></p>\n"},{"comments":[{"comment_id":126684349,"body":"Note that Java works with Unicode internally - without knowing the author&#39;s preferred language the ASCII chart is not appropriate. And why should upper case vowels be counted as consonants?"}],"answer_id":71677287,"body":"<p><a href=\"https://i.stack.imgur.com/RrL70.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RrL70.png\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li><p>notice the if statement catches all vowels</p>\n</li>\n<li><p>whats ever is not a vowel will either be a capital letter, a number, a special character or consonants</p>\n<p>else if (ch &gt;= 'a' &amp;&amp; ch &lt;= 'z')<br />\nthis checks if its not a vowel does it atleast fall in the range of small letter 'a'-'z' and is not a special charecter or a number.( we knonw its not a vowel but is it in the ascii range 26=a -51=z)</p>\n</li>\n</ul>\n<p>refer to the ASCII table to understand the range comparison</p>\n"},{"comments":[{"comment_id":134519057,"body":"Thank you for this code snippet, which might provide some limited, immediate help. A <a href=\"https://meta.stackexchange.com/q/114762/349538\">proper explanation</a> would greatly improve its long-term value by showing why this is a good solution to the problem and would make it more useful to future readers with other, similar questions. Please <a href=\"https://stackoverflow.com/posts/76270702/edit\">edit</a> your answer to add some explanation, including the assumptions you’ve made."}],"answer_id":76270702,"body":"<pre><code>package com.bharat;\n\npublic class CaptchaGenerator {\n    public static void main(String[] args) {\n        System.out.println(&quot;Hello World&quot;);\n        String s = &quot;hello world welcome the programming world&quot;;\n        StringBuffer sb = new StringBuffer();\n        StringBuffer sb1 = new StringBuffer();\n        String k = null;\n        int vc = 0;\n        char ch[] = new char[] { 'a', 'e', 'i', 'o', 'u' };\n        int v = s.length();\n        System.out.println(&quot;the length of the given string is which includes with spaces:&quot;+v);\n        for (int i = 0; i &lt; s.length(); i++) {\n\n            if (s.charAt(i) == ' ') {\n                v--;\n            }\n\n        }\n        System.out.println(&quot;the length of the given string after removing the spaces:&quot;+v);\n        \n\n        for (int i = 0; i &lt; s.length(); i++) {\n\n            if (s.charAt(i) != ' ') {\n\n                for (int j = 0; j &lt; ch.length; j++) {\n\n                    if (s.charAt(i) == ch[j]) {\n                        //System.out.println(&quot;vowels&quot;);\n                        sb.append(s.charAt(i));\n                        vc++;\n                        k = sb.toString();\n\n                    }\n\n                }\n\n            }\n\n        }\n        System.out.println(&quot;vowels count is:&quot; + vc);\n        int l = k.length();\n        int m = v - l;\n        System.out.println(&quot;the consonants in the string:&quot;+m);\n\n    }\n}\n</code></pre>\n"}],"last_activity_date":1684316657,"question_id":71675523,"body":"<p>I was exploring this code which gives a count of vowels and consonants, but didn't understand this <code>else if (ch &gt;= 'a' &amp;&amp; ch &lt;= 'z')</code> line of code. Please tell me what's the logic behind it.</p>\n<pre><code>import java.util.Scanner;\n\npublic class Vowels {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        Scanner sc = new Scanner(System.in);\n        System.out.println(&quot;Enter string&quot;);\n        String str = sc.nextLine();\n        int vowl = 0;\n        int conso = 0;\n\n        for (int i = 0; i &lt; str.length(); i++) {\n            char ch = str.charAt(i);\n            if (ch == 'a' || ch == 'e' || ch == 'i' || ch == 'o' || ch == 'u') {\n                vowl++;\n            } else if (ch &gt;= 'a' &amp;&amp; ch &lt;= 'z') {\n                conso++;\n            }\n        }\n        System.out.println(vowl);\n        System.out.println(conso);\n    }\n}\n</code></pre>\n"},{"comments":[{"comment_id":134501927,"body":"The PDF specification mentions border style &quot;U&quot; in the border style dictionary. I don&#39;t remember if this has an effect in for form fields widget annotations, PDFBox uses it for rendering only for link annotations. Maybe create such a file and see what happens."},{"comment_id":134503325,"body":"It is a bad idea to try and apply such changes <i>after signing</i>. The natural way to underline would be to add an underline annotation, but adding new annotations may not be allowed depending on the signature applied. You say that <i>approach has not been successful</i> - how did you try it, how did it fail?"}],"last_activity_date":1684316530,"question_id":76270689,"body":"<p>I am currently working on a Java application that uses Apache PDFBox to fill form fields and sign a PDF document. After the document is signed, I would like to underline the text in certain form fields.</p>\n<p>I have been able to manipulate the text in terms of font, size, and color, but underlining the text has proven to be a challenge. I have tried adding an underline as an annotation, but this approach has not been successful.\nI'm struggling to find clear instructions or examples in the PDFBox documentation or online about how to add an underline to the text in a form field after the document is signed.</p>\n<p>Here are my questions:</p>\n<p>Is it possible to underline text in a form field using PDFBox after signing the document? If so, how can it be done?\nIf underlining is not possible through the default appearance string or as an annotation, is there any workaround or alternative solution?\nAny guidance would be greatly appreciated. Thank you for your time.</p>\n"},{"comments":[{"comment_id":114193563,"body":"Looks like it might be a versioning issue between the junit Jupiter libs and mockito."},{"comment_id":114195233,"body":"Do you know which versions of each go together?"}],"answers":[{"comments":[{"comment_id":114502701,"body":"Okay, thanks, this has helped a lot.  I should have specified that I am using Spring Boot.  The tests are mostly working.  I am running into difficulty when trying to post to a method that takes ModelAttributes as parameters.  MockMvc&#39;s perform() is throwing an illegal state exception because it can&#39;t find a &quot;primary or default constructor for long,"},{"comment_id":114508055,"body":"please create a new question on Stack Overflow for this as this seems unrelated to your initial question."},{"comment_id":114581951,"body":"Okay.  That makes sense."}],"answer_id":64586118,"body":"<p>The use case you want to test is not what <code>@InjectMocks</code> in combination with <code>@Mock</code> is made for. You use this setup whenever you want to mock a <strong>collaborator</strong> of your class under test.</p>\n<p>Let's say your <code>AppController</code> would inject (e.g. via constructor) a <code>UserService</code> to fetch data. For this scenario, you could then use <code>@Mock</code> for the <code>UserService</code> and mock the behavior of this service throughout your whole unit test for your <code>AppController</code>.</p>\n<p>The <code>Model</code> is <strong>not</strong> a collaborator of your <code>AppController</code>, but rather injected by Spring to your method.</p>\n<p>In your test scenario, mocking the <code>Model</code> does not make much sense. Rather use <code>@WebMvcTest</code> to start a sliced Spring Context and then use <code>MockMvc</code> to access your endpoint. You can then use verification methods of <code>MockMvc</code> to check the <code>Model</code>, the view name, the response code.</p>\n<p>An example of this might look like the following:</p>\n<pre><code>@WebMvcTest(DashboardController.class)\nclass DashboardControllerTest {\n \n  @Autowired\n  private MockMvc mockMvc;\n \n  @MockBean\n  private DashboardService dashboardService;\n \n  @Test\n  public void shouldReturnViewWithPrefilledData() throws Exception {\n    when(dashboardService.getAnalyticsGraphData()).thenReturn(new Integer[]{13, 42});\n \n    this.mockMvc\n      .perform(get(&quot;/dashboard&quot;))\n      .andExpect(status().isOk())\n      .andExpect(view().name(&quot;dashboard&quot;))\n      .andExpect(model().attribute(&quot;user&quot;, &quot;Duke&quot;))\n      .andExpect(model().attribute(&quot;analyticsGraph&quot;, Matchers.arrayContaining(13, 42)))\n      .andExpect(model().attributeExists(&quot;quickNote&quot;));\n  }\n}\n</code></pre>\n<p>You can find more information in this <a href=\"https://rieckpil.de/guide-to-testing-spring-boot-applications-with-mockmvc/\" rel=\"nofollow noreferrer\">MockMvc guide</a>.</p>\n<p>PS: <code>@RunWith(MockitoRunner.class)</code> is for JUnit 4, you can remove it if you use JUnit Jupiter.</p>\n"},{"answer_id":64760546,"body":"<p>Code referenced in my comment above:</p>\n<p><strong>AppControllerTest.java</strong></p>\n<pre><code>\n    @Test\n    void testAddItem_Attributes() {\n        Long crust = Long.valueOf(0L);\n        Long sauce = Long.valueOf(1L);\n        Long size = Long.valueOf(2L);\n        Long cheese = Long.valueOf(3L);\n\n        PizzaToppingAssociationVo ptavBothSides = new PizzaToppingAssociationVo();\n        PizzaToppingAssociationVo ptavLeftOnly = new PizzaToppingAssociationVo();\n        PizzaToppingAssociationVo ptavRightOnly = new PizzaToppingAssociationVo();\n\n        ptavBothSides.setLeft(true);\n        ptavBothSides.setRight(true);\n        ptavBothSides.setToppingsId(5L);\n\n        ptavLeftOnly.setLeft(true);\n        ptavLeftOnly.setRight(false);\n        ptavLeftOnly.setToppingsId(6L);\n\n        ptavRightOnly.setLeft(false);\n        ptavRightOnly.setRight(true);\n        ptavRightOnly.setToppingsId(8L);\n\n        PizzaToppingAssociationVo [] toppingsArray = {ptavBothSides, ptavLeftOnly, ptavRightOnly};\n\n        try {\n            ObjectMapper objectMapper = new ObjectMapper();\n            String jsonToppings = objectMapper.writeValueAsString(toppingsArray);\n            \n            //this line throws the IllegalStateException with these parameters, but not if called with only &quot;/addItem&quot;\n            ResultActions ra = mockMvc.perform(MockMvcRequestBuilders.post(&quot;/addItem&quot;, crust, sauce, size, cheese, jsonToppings));\n            ra.andExpect(MockMvcResultMatchers.status().is3xxRedirection());\n            ra.andExpect(MockMvcResultMatchers.redirectedUrl(&quot;/menu&quot;));\n            ra.andExpect(model().attribute(&quot;crust&quot;, crust));\n\n            Map&lt;String, Object&gt; modelMap = ra.andReturn().getModelAndView().getModel();\n            assertEquals(modelMap.size(), 1);\n            assert(modelMap.containsKey(&quot;itemCount&quot;));\n        } catch (Exception e) {\n            e.printStackTrace();\n            fail();\n        }\n    }\n</code></pre>\n"},{"answer_id":76270625,"body":"<p>In most cases this a dependency issue.</p>\n<p>I faced same issue and my issue was the I was using the wrong version of the JDK. Mine was 19 while I should have used v 11.</p>\n<p>Give it a try. :)</p>\n"}],"last_activity_date":1684316119,"question_id":64580745,"body":"<p>I'm running into this issue when trying to mock an object of the interface <code>org.springframework.ui.Model</code>.  I'm using Mockito <code>3.5.15</code> w/Java 8 and JUnit Jupiter.  I've tried using both <code>@Mock</code> and <code>Mockito.mock()</code>, globally and inside a method, but get the error regardless.  Since <code>initMocks()</code> is deprecated, I am using <code>Mockito.openMocks()</code>.  I know that the contents of <code>testGetMenu()</code> aren't causing the error, because I get it even when the method body is empty.  The class being tested is a Spring MVC controller.</p>\n<p><strong>Stacktrace when mocking:</strong></p>\n<pre><code>java.lang.ExceptionInInitializerError\n    at org.mockito.internal.exceptions.stacktrace.ConditionalStackTraceFilter.&lt;init&gt;(ConditionalStackTraceFilter.java:17)\n    at org.mockito.exceptions.base.MockitoException.filterStackTrace(MockitoException.java:41)\n    at org.mockito.exceptions.base.MockitoException.&lt;init&gt;(MockitoException.java:30)\n    at org.mockito.exceptions.misusing.MockitoConfigurationException.&lt;init&gt;(MockitoConfigurationException.java:18)\n    at org.mockito.internal.configuration.plugins.PluginLoader.loadImpl(PluginLoader.java:66)\n    at org.mockito.internal.configuration.plugins.PluginLoader.loadPlugin(PluginLoader.java:24)\n    at org.mockito.internal.configuration.plugins.PluginRegistry.&lt;init&gt;(PluginRegistry.java:12)\n    at org.mockito.internal.configuration.plugins.Plugins.&lt;clinit&gt;(Plugins.java:11)\n    at org.mockito.internal.util.MockUtil.&lt;clinit&gt;(MockUtil.java:24)\n    at org.mockito.internal.stubbing.defaultanswers.ReturnsEmptyValues.&lt;init&gt;(ReturnsEmptyValues.java:58)\n    at org.mockito.internal.stubbing.defaultanswers.ReturnsMoreEmptyValues.&lt;init&gt;(ReturnsMoreEmptyValues.java:51)\n    at org.mockito.internal.stubbing.defaultanswers.ReturnsSmartNulls.&lt;init&gt;(ReturnsSmartNulls.java:40)\n    at org.mockito.Answers.&lt;clinit&gt;(Answers.java:43)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at java.lang.Class.getEnumConstantsShared(Class.java:3320)\n    at java.lang.Class.enumConstantDirectory(Class.java:3341)\n    at java.lang.Enum.valueOf(Enum.java:232)\n    at sun.reflect.annotation.AnnotationParser.parseEnumValue(AnnotationParser.java:483)\n    at sun.reflect.annotation.AnnotationParser.parseMemberValue(AnnotationParser.java:347)\n    at java.lang.reflect.Method.getDefaultValue(Method.java:606)\n    at sun.reflect.annotation.AnnotationType.&lt;init&gt;(AnnotationType.java:132)\n    at sun.reflect.annotation.AnnotationType.getInstance(AnnotationType.java:85)\n    at sun.reflect.annotation.AnnotationParser.parseAnnotation2(AnnotationParser.java:266)\n    at sun.reflect.annotation.AnnotationParser.parseAnnotations2(AnnotationParser.java:120)\n    at sun.reflect.annotation.AnnotationParser.parseAnnotations(AnnotationParser.java:72)\n    at java.lang.reflect.Field.declaredAnnotations(Field.java:1150)\n    at java.lang.reflect.Field.declaredAnnotations(Field.java:1148)\n    at java.lang.reflect.Field.getAnnotation(Field.java:1120)\n    at java.lang.reflect.AccessibleObject.getDeclaredAnnotation(AccessibleObject.java:219)\n    at org.junit.platform.commons.util.AnnotationUtils.findAnnotation(AnnotationUtils.java:128)\n    at org.junit.platform.commons.util.AnnotationUtils.findAnnotation(AnnotationUtils.java:115)\n    at org.junit.platform.commons.util.AnnotationUtils.isAnnotated(AnnotationUtils.java:93)\n    at org.junit.platform.commons.util.AnnotationUtils.lambda$findAnnotatedFields$6(AnnotationUtils.java:369)\n    at java.util.function.Predicate.lambda$and$0(Predicate.java:69)\n    at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:174)\n    at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1382)\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:472)\n    at java.util.stream.ReduceOps$ReduceOp.evaluateSequential(ReduceOps.java:708)\n    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)\n    at java.util.stream.ReferencePipeline.collect(ReferencePipeline.java:499)\n    at org.junit.platform.commons.util.ReflectionUtils.findFields(ReflectionUtils.java:1137)\n    at org.junit.platform.commons.util.AnnotationUtils.findAnnotatedFields(AnnotationUtils.java:371)\n    at org.junit.platform.commons.util.AnnotationUtils.findAnnotatedFields(AnnotationUtils.java:348)\n    at org.junit.jupiter.engine.descriptor.ExtensionUtils.registerExtensionsFromFields(ExtensionUtils.java:99)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.prepare(ClassBasedTestDescriptor.java:148)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.prepare(ClassBasedTestDescriptor.java:78)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:107)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:107)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:75)\n    at java.util.ArrayList.forEach(ArrayList.java:1257)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)\n    at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)\n    at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:141)\n    at org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:542)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:770)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:464)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\nCaused by: java.lang.NullPointerException\n    at org.mockito.internal.configuration.plugins.Plugins.getStackTraceCleanerProvider(Plugins.java:17)\n    at org.mockito.internal.exceptions.stacktrace.StackTraceFilter.&lt;clinit&gt;(StackTraceFilter.java:21)\n    ... 78 more\n</code></pre>\n<p><strong>AppControllerTest.java</strong></p>\n<pre><code>import static org.junit.Assert.assertEquals;\nimport static org.mockito.Mockito.times;\nimport static org.mockito.Mockito.verify;\n\nimport org.junit.jupiter.api.AfterEach;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.junit.runner.RunWith;\nimport org.mockito.InjectMocks;\nimport org.mockito.MockedStatic;\nimport org.mockito.Mockito;\nimport org.mockito.MockitoAnnotations;\nimport org.mockito.junit.MockitoJUnitRunner;\nimport org.mockito.junit.jupiter.MockitoExtension;\nimport org.springframework.ui.Model;\n\nimport com.javaduckspizza.OnlineOrderingApplication.common.TypesCache;\nimport com.javaduckspizza.OnlineOrderingApplication.main.AppController;\n\n@ExtendWith(MockitoExtension.class)\n@RunWith(MockitoJUnitRunner.class)\nclass AppControllerTest {\n    @InjectMocks\n    AppController appController = new AppController();\n    @Mock\n    Model model;\n\n    @BeforeEach\n    void setUp() throws Exception {\n//      model = Mockito.mock(Model.class);\n        MockitoAnnotations.openMocks(this); //using because initMocks() is deprecated\n    }\n\n    @AfterEach\n    void tearDown() throws Exception {\n    }\n\n    @Test\n    void testGetMenu() {\n        String result = appController.getMenu(model);\n        assertEquals(result, &quot;/menu.&quot;);\n        verify(model, times(5)).addAttribute(Mockito.anyString(), Mockito.any());\n        verify(model, times(1)).addAttribute(Mockito.anyString(), Mockito.anyInt());\n        MockedStatic&lt;TypesCache&gt; mockedTypesCache = Mockito.mockStatic(TypesCache.class);\n        mockedTypesCache.verify(Mockito.times(5), () -&gt; TypesCache.getActiveTypesByCategory(Mockito.anyString()));\n    }\n}\n</code></pre>\n<p><strong>AppController.java</strong></p>\n<pre><code>import java.math.BigDecimal;\nimport java.util.Date;\nimport java.sql.Timestamp;\nimport java.util.Calendar;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\n\nimport javax.ws.rs.GET;\nimport javax.ws.rs.POST;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.ModelAttribute;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.JsonMappingException;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.javaduckspizza.OnlineOrderingApplication.common.TypesCache;\nimport com.javaduckspizza.service.dao.ModifierServiceDao;\nimport com.javaduckspizza.service.dao.OrderServiceDao;\nimport com.javaduckspizza.vo.ModifierVo;\nimport com.javaduckspizza.vo.OrdersVo;\nimport com.javaduckspizza.vo.PizzaToppingAssociationVo;\nimport com.javaduckspizza.vo.PizzaVo;\n\n@Controller\n@RequestMapping(&quot;/&quot;)\npublic class AppController {\n    protected Map&lt;PizzaVo, List&lt;PizzaToppingAssociationVo&gt;&gt; mapShoppingCart =\n            new HashMap&lt;PizzaVo, List&lt;PizzaToppingAssociationVo&gt;&gt;();\n\n    @GET\n    @RequestMapping(&quot;/menu&quot;)\n    public String getMenu(Model model) {\n        System.err.println(&quot;In AppController.getMenu()&quot;);\n        addAttributesForMenu(model);\n        model.addAttribute(&quot;itemCount&quot;, mapShoppingCart.size());\n\n        return &quot;/menu.&quot;;  //I probably messed up something in the configuration.  If written without / and ., it tries to get WEB-INF/jspmenujsp\n    }\n\n    public void addAttributesForMenu(Model model) {\n        model.addAttribute(&quot;sizes&quot;, TypesCache.getActiveTypesByCategory(&quot;SIZE&quot;));\n        model.addAttribute(&quot;crusts&quot;, TypesCache.getActiveTypesByCategory(&quot;CRST&quot;));\n        model.addAttribute(&quot;cheeses&quot;, TypesCache.getActiveTypesByCategory(&quot;CHES&quot;));\n        model.addAttribute(&quot;sauces&quot;, TypesCache.getActiveTypesByCategory(&quot;SAUC&quot;));\n        model.addAttribute(&quot;toppings&quot;, TypesCache.getActiveTypesByCategory(&quot;TOPP&quot;));\n    }\n}\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.javaduckspizza&lt;/groupId&gt;\n    &lt;artifactId&gt;OnlineOrderingApplication&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;OnlineOrderingApplication&lt;/name&gt;\n    &lt;description&gt;Online ordering application for Java Ducks Pizza&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n            &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n            &lt;version&gt;3.5.15&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n            &lt;artifactId&gt;mockito-inline&lt;/artifactId&gt;\n            &lt;version&gt;3.5.15&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n            &lt;artifactId&gt;mockito-junit-jupiter&lt;/artifactId&gt;\n            &lt;version&gt;3.5.15&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.13&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.ws.rs&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.ws.rs-api&lt;/artifactId&gt;\n            &lt;version&gt;2.1.6&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;version&gt;5.7.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;version&gt;5.7.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.22.2&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p><strong>Stacktrace if I don't mock</strong></p>\n<pre><code>java.lang.NoSuchMethodError: org.mockito.Mockito.mockitoSession()Lorg/mockito/session/MockitoSessionBuilder;\n    at org.mockito.junit.jupiter.MockitoExtension.beforeEach(MockitoExtension.java:149)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$1(TestMethodTestDescriptor.java:154)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$5(TestMethodTestDescriptor.java:190)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:190)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:153)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:71)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:135)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at java.util.ArrayList.forEach(ArrayList.java:1257)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at java.util.ArrayList.forEach(ArrayList.java:1257)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)\n    at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)\n    at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:141)\n    at org.eclipse.jdt.internal.junit5.runner.JUnit5TestReference.run(JUnit5TestReference.java:98)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:542)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:770)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:464)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:210)\n    Suppressed: java.lang.NullPointerException\n        at org.mockito.junit.jupiter.MockitoExtension.afterEach(MockitoExtension.java:184)\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAfterEachCallbacks$11(TestMethodTestDescriptor.java:248)\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$13(TestMethodTestDescriptor.java:268)\n        at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$14(TestMethodTestDescriptor.java:268)\n        at java.util.ArrayList.forEach(ArrayList.java:1257)\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAllAfterMethodsOrCallbacks(TestMethodTestDescriptor.java:267)\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAfterEachCallbacks(TestMethodTestDescriptor.java:247)\n        at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:143)\n        ... 43 more\n</code></pre>\n"},{"comments":[{"comment_id":134499005,"body":"whats the repo?"},{"comment_id":134499086,"body":"a Github repository"},{"comment_id":134499319,"body":"yes, i got that. If you&#39;d like some help, I could try to clone the repo and try to work out the problem."},{"comment_id":134499364,"body":"<a href=\"https://github.com/hamza372/hamza372-ImageClassificationJavaStarter/tree/main\" rel=\"nofollow noreferrer\">github.com/hamza372/hamza372-ImageClassificationJavaStarter/&zwnj;&#8203;&hellip;</a>"},{"comment_id":134500731,"body":"I&#39;ve cloned the repo. Android studio flagged that the sdk location was invalid and I allowed the known location for my sdk install. Gradle then sync&#39;d and the project built."},{"comment_id":134502685,"body":"thank you, I did so, but now I have this error: Failed to notify dependency resolution listener"},{"comment_id":134502800,"body":"and this error when I click on run button The state of a Gradle build process (daemon) may be corrupt. Stopping all Gradle daemons may solve this problem,Your project may be using a third-party plugin which is not compatible with the other plugins in the project or the version of Gradle requested by the project. In the case of corrupt Gradle processes, you can also try closing the IDE and then killing all Java processes"},{"comment_id":134502819,"body":"I&#39;d do what it says"}],"last_activity_date":1684316009,"question_id":76270398,"body":"<p>I'm trying to build a repo from <code>GitHub</code> using <code>Android Studio</code> and whenever I try to build it, this message appears:</p>\n<pre><code>-Unable to find Gradle tasks to build: [:]. Build mode: REBUILD. Tests: None.\n-Multiple Gradle daemons might be spawned because the Gradle JDK and JAVA_HOME locations are different. Project\n</code></pre>\n<p>I tried different versions of <code>Android SDK</code> and <code>Java JDK</code>.\nI tried to put <code>Java JDK</code> and the project file in the same path, but none of them worked.</p>\n<p>Any help in this matter is appreciated.</p>\n"},{"last_activity_date":1684315881,"question_id":76270586,"body":"<p>i am having quite big issues to configure redis to my application. I have this config file:</p>\n<blockquote>\n<p>@Configuration\nclass RedisConfig {</p>\n</blockquote>\n<pre><code>@Bean\nfun redisConnectionFactory(): JedisConnectionFactory? {\n    val config = RedisStandaloneConfiguration(&quot;localhost&quot;, 6379)\n    return JedisConnectionFactory(config)\n}\n\n@Bean\nfun redisTemplate(redisConnectionFactory: RedisConnectionFactory?): RedisTemplate&lt;String, Any&gt; {\n    val template = RedisTemplate&lt;String, Any&gt;()\n    template.setConnectionFactory(redisConnectionFactory!!)\n    return template\n}\n</code></pre>\n<p>}</p>\n<p>the gradle file looks like this:</p>\n<pre><code> implementation(&quot;org.springframework.boot:spring-boot-starter-webflux&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-data-r2dbc&quot;)\n    implementation(&quot;com.fasterxml.jackson.module:jackson-module-kotlin&quot;)\n    implementation(&quot;io.projectreactor.kotlin:reactor-kotlin-extensions&quot;)\n    implementation(&quot;org.jetbrains.kotlin:kotlin-reflect&quot;)\n    implementation(&quot;org.jetbrains.kotlin:kotlin-stdlib-jdk8&quot;)\n    implementation(&quot;org.jetbrains.kotlinx:kotlinx-coroutines-reactor&quot;)\n    implementation(&quot;org.postgresql:r2dbc-postgresql&quot;)\n    implementation(&quot;io.github.microutils:kotlin-logging:3.0.2&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-actuator&quot;)\n    implementation(&quot;org.apache.poi:poi-ooxml:5.2.3&quot;)\n    implementation(&quot;com.mailjet:mailjet-client:5.2.2&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-data-redis&quot;\n    runtimeOnly(&quot;org.postgresql:postgresql&quot;)\n</code></pre>\n<p>Error happens the moment I add the data-redis dependency:</p>\n<pre><code>  implementation(&quot;org.springframework.boot:spring-boot-starter-data-redis&quot;)\n</code></pre>\n<p>The actual message of error is:</p>\n<blockquote>\n<p>Parameter 5 of constructor in\ncom.skenarios.microservices.export.services.DataService required a\nbean of type\n'com.skenarios.microservices.export.repository.MyRepo'\nthat could not be found.</p>\n</blockquote>\n<p>Repository looks like this:</p>\n<blockquote>\n<p>interface RenovationRepository : CoroutineCrudRepository&lt;TypeYearValue, Int&gt; {</p>\n</blockquote>\n<pre><code>@Query(\n    &quot;&quot;&quot;Here my query&quot;&quot;&quot;\n)\nfun findItemsById(buildingId: Int, start: LocalDateTime, end: LocalDateTime): Flow&lt;TypeYearValue&gt;\n</code></pre>\n<p>I feel like redis somehow conflicts with r2dbc dependency. Atleast from the searches I made that's what people saying. All my entities got also annotation @Table (which was suggested in some places as a fix).</p>\n"},{"answers":[{"answer_id":76270584,"body":"<p>I solved my problem by removing <code>EnableBatchProcessing(modular = true)</code> (by deleting <code>MyModularBatchJobContextConfiguration</code>), re-adding <code>@Configuration</code> to my batch job configuration classes and adding <code>@ConditionalOnProperty(&quot;spring.batch.job.name&quot;, havingValue=&lt;job-name-goes-here&gt;)</code> to each of them.</p>\n<p>This way, the configuration only gets initialized when the job is started with <code>--spring.batch.job.name=</code>. All other job configurations will not be initialized, thus the beans from other jobs won't get created.</p>\n"}],"last_activity_date":1684315866,"question_id":76235003,"body":"<p>I am upgrading to Spring Batch 5 / Spring Boot 3 / Jakarta 10. With Spring Batch 5, <code>@EnableBatchProcessing(modular=true)</code> does not behave as before, as it now disables the Auto-Configuration of Spring Batch, meaning I'd have to configure nearly everything myself that was configured by Spring Batch before.</p>\n<p>I'd like to avoid this (because I assume it requires far more effort) so I have to remove the <code>@EnableBatchProcessing(modular=true)</code> from my application and somehow modularize the contexts manually.</p>\n<h2>My Application</h2>\n<p>I have a Batch Application with 4 jobs, more are likely to be added.\nEach job defines its own typical beans, like</p>\n<ul>\n<li>ItemReader</li>\n<li>ItemProcessor</li>\n<li>ItemWriter</li>\n<li>TransactionManager</li>\n<li>Resource</li>\n</ul>\n<p>I basically need to have the whole configuration of the individual jobs modularized, so that all of the beans live in their own contexts and beans that are created by other jobs should not be found. For example, the <code>step()</code> method in the configuration of the job <code>job-a</code>, namely <code>BatchJobAConfiguration.class</code>, injects a bean of type <code>Resource</code>. The job <code>job-b</code> also defines a bean of type <code>Resource</code>, but the beans should live in different contexts so the application does not crash with an error like</p>\n<p><code>Parameter 2 of method step in path.to.my.batch.jobs.BatchJobAConfiguration required a single bean, but 2 were found:</code></p>\n<p>Probably, I could simply give each of my beans a <code>@Qualifier</code> and use it to prevent this type of error from occuring but, assuming this actually works, considering I already have 4 jobs and more are likely to be added I don't think this is the right way to do it. I would have to place like 15 <code>@Qualifier</code>s or so.</p>\n<p>Here is my current setup from before the update to Spring Batch 5. Please note that I cannot share the actual code because this is company code and thus i cannot share it here.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\n@EnableJpaRepositories(&quot;path.to.my.repositories&quot;)\n@EntityScan(&quot;path.to.my.entities&quot;)\n@EnableTask\npublic class MyBatchApplication{\n    public static void main(String[] args) {\n        System.exit(SpringApplication.exit(SpringApplication.run(MyBatchApplication.class, args)));\n    }\n\n}\n</code></pre>\n<p>This is my config</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableBatchProcessing(modular = true)\npublic class MyModularBatchJobContextConfiguration {\n    @Bean\n    ApplicationContextFactory getJobAContext() {\n        return new GenericApplicationContextFactory(BatchJobAConfiguration.class);\n    }\n\n    @Bean\n    ApplicationContextFactory getJobBContext() {\n        return new GenericApplicationContextFactory(BatchJobBConfiguration.class);\n    }\n\n    // More jobs ...\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class BatchJobAConfiguration {\n\n    private static final String MY_JOB_NAME = &quot;job-a&quot;\n\n    @Autowired\n    private EntityManagerFactory emf;\n\n    @Bean\n    public Job jobA(JobRepository jobRepository, Step myStep) {\n        return new JobBuilder(MY_JOB_NAME, jobRepository)\n                .flow(myStep)\n                .end()\n                .build();\n    }\n\n    @Bean\n    public Step myStep(JpaTransactionManager transactionManager,\n                       JobRepository jobRepository,\n                       FlatFileItemReader&lt;MyEntity&gt; reader,\n                       ItemProcessor&lt;MyEntity, MyEntity&gt; processor,\n                       JpaItemWriter&lt;MyEntity&gt; entityWriter) {\n        return new StepBuilder(MY_STEP_NAME, jobRepository)\n                .&lt;MyEntity, MyEntity&gt;chunk(10, transactionManager)\n                .reader(reader)\n                .processor(processor)\n                .writer(plzOrtEntityWriter)\n                .transactionManager(transactionManager)\n                .build();\n    }\n\n    @Bean\n    JpaTransactionManager jobATransactionManager() {\n            JpaTransactionManager transactionManager = new JpaTransactionManager();\n            transactionManager.setEntityManagerFactory(emf);\n            return transactionManager;\n    }\n\n// Reader, Writer, Processor...\n</code></pre>\n<p>Add the same time, I want to execute these jobs both from the IDE / CommandLine and from Spring Cloud Dataflow. Hence, the <code>@EnableTask</code> on the application class. But I would be already happy if I could make it work from IDE / CommandLine.</p>\n<p>Before the update to Spring Boot 3, this setup worked like a charm.</p>\n<p>Right now, after the update to Spring Batch 5, the Application basically does not run any job when I start it. Which makes sense, as the auto configuration is turned off.</p>\n<p>Removing <code>@EnableBatchProcessing(modular=true)</code> and <code>MyModularBatchJobContextConfiguration</code> and annotating my Batch job configuration classes with <code>@Configuration</code> now causes several bean clashes, which also makes sense because now all the beans are no longer present in their own isolated context.</p>\n<p>How can i migrate my setup to Spring Batch 5 without <code>@EnableBatchProcessing(modular = true)</code> so my setup works again?\nKeeping <code>EnableBatchProcessing(modular = true)</code> is also an option, but I am not sure what I have to configure myself now in order to make it work.</p>\n<p>Thanks in Advance!</p>\n"},{"answers":[{"comments":[{"comment_id":134498827,"body":"The problem is that class <code>ConfigurableWidgetConfigureActivity</code> extends <code>Activity()</code> instead <code>MainActivity</code> extends <code>AppCompatActivity()</code>."},{"comment_id":134498961,"body":"@Paul it have no different, AppCompatActivity just is a upgrade version of Activity (AppCompatActivity support for older android version)"}],"answer_id":76270035,"body":"<p>you could put <strong>pinAppWidget</strong> method into an object, so you can easy call it in both Activity:</p>\n<pre><code>class function : Activity() {\n    fun pinAppWidget(text: String?){}\n}\n\n//convert to\nobject function {\n    fun pinAppWidget(text: String?, activity: Activity){}\n}\n</code></pre>\n<p>Another way, you could create BaseActivity and put pinAppWidget into it. Then make your MainActivity extend BaseActivity, you can easy call pinAppWidget from here</p>\n<pre><code>class BaseActivity : AppCompatActivity() {\n   fun pinAppWidget (){}\n}\n\nclass MainActivity : BaseActivity() {\n   //call pinAppWidget()\n}\n</code></pre>\n"},{"comments":[{"comment_id":134498776,"body":"If I declare the class like this, I get the following problems: <a href=\"https://i.stack.imgur.com/QYda6.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/QYda6.png</a>  So shouldn&#39;t I extend from Activity() or AppCompatActivity()?"}],"answer_id":76270111,"body":"<p>You can pass the <code>Context</code> object as a parameter to the <code>pinAppWidget</code> function in the <code>function</code> class.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import android.app.PendingIntent\nimport android.appwidget.AppWidgetManager\nimport android.content.ComponentName\nimport android.content.Context\nimport android.content.Intent\nimport android.os.Build\nimport android.os.Bundle\nimport android.widget.Toast\n\nclass MyWidgetFunction {\n    fun pinAppWidget(context: Context, text: String?) {\n        val urlCode = extractLinks(text)\n        if (urlCode != &quot;&quot; &amp;&amp; Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            val mAppWidgetManager = context.getSystemService(\n                AppWidgetManager::class.java\n            )\n            // Rest of your code...\n        }\n    }\n\n    private fun extractLinks(text: String?): String {\n        val index = text!!.lastIndexOf(&quot;/&quot;)\n        return text.substring(index + 1)\n    }\n}\n</code></pre>\n<p>Now you can use the <code>MyWidgetFunction</code> class in both <code>MainActivity</code> and <code>ConfigurableWidgetConfigureActivity</code>. When calling the <code>pinAppWidget</code> function, make sure to pass the appropriate <code>Context</code> object.</p>\n<p>In <code>MainActivity</code>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val myWidgetFunction = MyWidgetFunction()\nmyWidgetFunction.pinAppWidget(this, text)\n</code></pre>\n<p>In <code>ConfigurableWidgetConfigureActivity</code>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val myWidgetFunction = MyWidgetFunction()\nmyWidgetFunction.pinAppWidget(this, text)\n</code></pre>\n<p>Note: Make sure to replace <code>MyWidget</code> with the actual name of your widget class.</p>\n"},{"answer_id":76270578,"body":"<p>This questions covers at least two things: architecture decision and android platform limitations.</p>\n<p>From software architecture perspective you could:</p>\n<ul>\n<li>create a common parent class and put this and the rest common logic inside; other activities will extend this class and inherit its behaviour.</li>\n<li>create utility class to encapsulate common logic and instantiate this class within each activity.</li>\n<li>inner classes (aka <code>object:</code> in kotlin) could be an alternative to this two options.</li>\n<li><code>kotlin</code> also provide such things as <a href=\"https://kotlinlang.org/docs/extensions.html#extension-functions\" rel=\"nofollow noreferrer\">extensions</a> which could a fourth way to achieve your task.</li>\n</ul>\n<p>From Android platform perspective component code should be called only from component (Activity, Service, BroadcastReceiver, ContentProvder). Your function uses component code (<code>mAppWidgetManager.requestPinAppWidget(...)</code>) and it would be good to keep it within component and do not put outside. Although, it is still possible to put it into a separate class and pass a <code>context</code> to run this code.</p>\n"}],"last_activity_date":1684315827,"question_id":76269902,"body":"<p>I have the following function <code>pinAppWidget</code> which I am using in <code>MainActivity</code> but I would need to be able to use it also in <code>ConfigurableWidgetConfigureActivity</code> to not have a duplicate of the function I would like to create a class that contains them.</p>\n<p>But I'm having some problems.</p>\n<p>Code original:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    fun pinAppWidget(text: String?) {\n        val urlCode = extractLinks(text)\n        if (urlCode != &quot;&quot; &amp;&amp; Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            val mAppWidgetManager = getSystemService(\n                AppWidgetManager::class.java\n            )\n\n            if (!mAppWidgetManager.isRequestPinAppWidgetSupported) {\n                Toast.makeText(\n                    this@MainActivity,\n                    &quot;Pin app widget is not supported&quot;,\n                    Toast.LENGTH_SHORT\n                ).show()\n                return\n            }\n\n            val myProvider = ComponentName(this@MainActivity, MyWidget::class.java)\n\n\n            val pinnedWidgetCallbackIntent = Intent(this@MainActivity, MyWidget::class.java)\n            val successCallback = PendingIntent.getBroadcast(\n                this@MainActivity, 0,\n                pinnedWidgetCallbackIntent, PendingIntent.FLAG_IMMUTABLE\n            )\n            mAppWidgetManager.requestPinAppWidget(myProvider, Bundle(), successCallback)\n        }\n    }\n\nfun extractLinks(text: String?): String {\n        val index = text!!.lastIndexOf(&quot;/&quot;)\n        return text.substring(index + 1)\n    }\n</code></pre>\n<p>Class function:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport android.app.Activity\nimport android.app.PendingIntent\nimport android.appwidget.AppWidgetManager\nimport android.content.ComponentName\nimport android.content.Intent\nimport android.os.Build\nimport android.os.Bundle\nimport android.widget.Toast\n\nclass function : Activity() {\n    fun pinAppWidget(text: String?) {\n        val urlCode = extractLinks(text)\n        if (urlCode != &quot;&quot; &amp;&amp; Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n            val mAppWidgetManager = getSystemService(\n                AppWidgetManager::class.java\n            )\n            if (!mAppWidgetManager.isRequestPinAppWidgetSupported) {\n                Toast.makeText(\n                    this@function,\n                    &quot;Pin app widget is not supported&quot;,\n                    Toast.LENGTH_SHORT\n                ).show()\n                return\n            }\n\n            val myProvider = ComponentName(this@function, MyWidget::class.java)\n            val pinnedWidgetCallbackIntent = Intent(this@function, MyWidget::class.java)\n            val successCallback = PendingIntent.getBroadcast(\n                this@function, 0,\n                pinnedWidgetCallbackIntent, PendingIntent.FLAG_IMMUTABLE\n            )\n            mAppWidgetManager.requestPinAppWidget(myProvider, Bundle(), successCallback)\n        }\n    }\n\n    fun extractLinks(text: String?): String {\n        val index = text!!.lastIndexOf(&quot;/&quot;)\n        return text.substring(index + 1)\n    }\n\n}\n</code></pre>\n<p>When I call inside the <code>MainActivity</code> function I get the following problem:</p>\n<p><a href=\"https://i.stack.imgur.com/ZB2Wk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZB2Wk.png\" alt=\"enter image description here\" /></a></p>\n<p>How can I do it, can you help me?</p>\n"},{"comments":[{"comment_id":134509703,"body":"Please provide enough code so others can better understand or reproduce the problem."}],"last_activity_date":1684315797,"question_id":76270575,"body":"<p>I used RequestDispatcher to forward to signIn.jsp but it gives me error. not able to find the error and error be like javax.servlet.ServletException: javax.ws.rs.ProcessingException: java.io.IOException: Stream closed</p>\n<p>Here what it did the coding</p>\n<pre><code>import java.io.IOException;\nimport javax.servlet.RequestDispatcher;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport javax.ws.rs.FormParam;\nimport javax.ws.rs.POST;\nimport javax.ws.rs.Path;\nimport javax.ws.rs.Produces;\nimport javax.ws.rs.core.Context;\nimport javax.ws.rs.core.MediaType;\nimport org.hibernate.Session;\nimport org.hibernate.SessionFactory;\nimport org.hibernate.Transaction;\nimport com.hibernate.utils.HibernateUtils;\nimport com.lottery.classes.User;\n\nSessionFactory sfactory = HibernateUtils.getSessionFactory();\nSession session = sfactory.openSession();\nTransaction tx = session.beginTransaction();\nsession.save(user);\ntx.commit();\nsession.close();\nsfactory.close();\nRequestDispatcher rd = request.getRequestDispatcher(&quot;signIn.jsp&quot;);\nrd.forward(request, response);\n</code></pre>\n<p>what it expected and what i get\ni expected to open signIn.jsp page but giving me error stream closed</p>\n"},{"comments":[{"comment_id":134460060,"body":"It is not clear what is your original HTML with JSON. Example would help."},{"comment_id":134463768,"body":"@P_M it&#39;s just an escaped URL. No need to post entire HTML. I&#39;ve added an example of its beginning"}],"answers":[{"comments":[{"comment_id":134463749,"body":"You want me to remove the &quot;replace&quot;, but as I wrote, this means the characters stayed, and so if I try to open a URL (such as a URL to an image) it would fail. I can&#39;t let those characters stay in the URL. I&#39;ve added an example of its beginning inside my post."},{"comment_id":134469840,"body":"@androiddeveloper you can check out my detailed update in the answer."},{"comment_id":134470223,"body":"As I wrote, it doesn&#39;t work without the &quot;replace&quot;. I had to add it. I&#39;ve updated my question again, showing what happens when I don&#39;t use &quot;replace&quot;."},{"comment_id":134477483,"body":"@androiddeveloper right, like I said, you can check out my answer and all the links I&#39;ve posted. Then, you can easily use either of the suggested options that perfectly work on your example. But like I said, you have to be careful with that and all of them make some assumptions about the input. So does your &quot;replace&quot; approach. Ideally, the input must not be that &quot;broken&quot; as I&#39;ve explained in my answer."},{"comment_id":134493792,"body":"I&#39;m not responsible about the input, and I don&#39;t understand what you are offering. Sorry"}],"answer_id":76248201,"body":"<p>Let me just give you my working example using <code>StringEscapeUtils.unescapeJson(input)</code> without <code>replace</code>. I've also looked into the <code>StringEscapeUtils</code> source code, which might help you a bit.</p>\n<p><strong>Here is my working Kotlin code</strong> (Java works the same in my test).</p>\n<pre><code>fun main(args: Array&lt;String&gt;) {\n    val input = &quot;Hello ampersand \\\\u0026 and forward slash \\\\/&quot;\n    println(input)\n\n    val output1 = StringEscapeUtils.unescapeJson(input)\n    println(output1)\n\n    val output2 = StringEscapeUtils.unescapeJson(input).replace(&quot;\\\\u0026&quot;, &quot;&amp;&quot;).replace(&quot;\\\\/&quot;, &quot;/&quot;)\n    println(output2)\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>Hello ampersand \\u0026 and forward slash \\/ - original input\nHello ampersand &amp; and forward slash /       - StringEscapeUtils.unescapeJson(input)\nHello ampersand &amp; and forward slash /       - StringEscapeUtils.unescapeJson(input).replace...\n</code></pre>\n<p>As you can see, the outputs are identical regardless of using the <code>replace</code> logic. I'm using <code>org.apache.commons:commons-text:1.10.0</code>.</p>\n<p>If we look into their source code, it's could be clear that we don't have to add any <code>replace(&quot;\\\\u0026&quot;, &quot;&amp;&quot;).replace(&quot;\\\\/&quot;, &quot;/&quot;)</code> because:</p>\n<ul>\n<li>the escaped-unicode representation of ampersand is handled by <a href=\"https://github.com/apache/commons-text/blob/b83474667d6f8ede75d6a0c4289e01bc2a54bae9/src/main/java/org/apache/commons/text/translate/UnicodeUnescaper.java#L29\" rel=\"nofollow noreferrer\">UnicodeUnescaper</a>. You can see it being used in your <code>unescapeUrl</code> originally replicated from <a href=\"https://github.com/apache/commons-text/blob/b83474667d6f8ede75d6a0c4289e01bc2a54bae9/src/main/java/org/apache/commons/text/StringEscapeUtils.java#L395\" rel=\"nofollow noreferrer\">UNESCAPE_JAVA</a> implementation.</li>\n<li>the <code>\\\\/</code> string is handled by another existing rule at <a href=\"https://github.com/apache/commons-text/blob/b83474667d6f8ede75d6a0c4289e01bc2a54bae9/src/main/java/org/apache/commons/text/StringEscapeUtils.java#L392\" rel=\"nofollow noreferrer\">UNESCAPE_JAVA</a>, which is <code>unescapeJavaMap.put(&quot;\\\\&quot;, StringUtils.EMPTY)</code> and also replicated in your <code>unescapeUrl</code>.</li>\n</ul>\n<p><strong>So, answering your questions <em>(NB: also see the UPDATE below taking into account the &quot;broken&quot; input from the author, which was posted later)</em>:</strong></p>\n<ol>\n<li>Not obvious what is wrong in your example using just <code>StringEscapeUtils.unescapeJson(input)</code> as you can see, it works in my Kotlin example (Java as well). Maybe the version of the &quot;common-text&quot; library? But I doubt that. I'm also using PC, not Android. <em>See the <strong>UPDATE</strong> below explaining the &quot;broken&quot; input posted later by the author and how to deal with that.</em></li>\n<li>It is true, totally agree. And in this particular example, not even &quot;something similar&quot;. You should be fine using the out-of-the-box method. No need to customise that in either way.</li>\n</ol>\n<p>I hope, this answer helps. Also, as it was mentioned in the comments, a good example from you would be very helpful!</p>\n<p><strong>UPDATE:</strong>\nLooking into the author's example (posted later), I can see that the escaped-unicode representation of ampersand is sort of double-escaped in the input as <code>\\\\u0026</code> instead of <code>\\u0026</code>. Thus, the problem. If you look into the source code of that <a href=\"https://github.com/apache/commons-text/blob/b83474667d6f8ede75d6a0c4289e01bc2a54bae9/src/main/java/org/apache/commons/text/StringEscapeUtils.java#L389\" rel=\"nofollow noreferrer\">UNESCAPE_JAVA (UNESCAPE_JSON)</a>, you will see that the <code>\\\\</code> string get transformed into a single backslash <code>\\</code> as in <code>unescapeJavaMap.put(&quot;\\\\\\\\&quot;, &quot;\\\\&quot;)</code>, and then in <a href=\"https://github.com/apache/commons-text/blob/master/src/main/java/org/apache/commons/text/translate/AggregateTranslator.java#L60\" rel=\"nofollow noreferrer\">that translators iteration</a> the index advances <strong>by 2</strong> as two characters have been replaced, which places the index at the <code>u</code> character.</p>\n<p>I would say, this is the upstream problem that sends you a badly formatted string. <strong>Ideally</strong>, it should be fixed so that they don't double escape the characters represented in escaped-unicode format. Then <code>\\\\u0026</code> should become <code>\\u0026</code>.</p>\n<p>You can also compose your own <code>AggregateTranslator</code> the way it properly handles this scenario. There might be few options but they could all be error-prone and stop working properly in other scenarios. So, you have to be careful with that.</p>\n<p>You can also run the <code>unescapeJson</code> method twice and it works in your particular example as in <code>StringEscapeUtils.unescapeJson(StringEscapeUtils.unescapeJson(input))</code>. But obviously, you could easily over-unescape the input.</p>\n"}],"last_activity_date":1684315663,"question_id":76247722,"body":"<h2>Background</h2>\n<p>I need to parse some string from HTML that is of a URL (seems it's inside JSON), so I tried to use org.apache.commons.text.StringEscapeUtils.unescapeJson.</p>\n<p>An example of such a URL started with this as the input:</p>\n<pre><code>https:\\/\\/scontent.cdninstagram.com\\/v\\/t51.2885-19\\/40405422_462181764265305_1222152915674726400_n.jpg?stp=dst-jpg_s150x150\\\\u0026\n</code></pre>\n<h2>The problem</h2>\n<p>It seems it had some characters that weren't handled so if I perform this:</p>\n<pre><code>val test=&quot;https:\\\\/\\\\/scontent.cdninstagram.com\\\\/v\\\\/t51.2885-19\\\\/40405422_462181764265305_1222152915674726400_n.jpg?stp=dst-jpg_s150x150\\\\\\\\u0026\\n&quot;\nLog.d(&quot;AppLog&quot;, &quot;${StringEscapeUtils.unescapeJson(test)}&quot;)\n</code></pre>\n<p>the result is:</p>\n<pre><code>https://scontent.cdninstagram.com/v/t51.2885-19/40405422_462181764265305_1222152915674726400_n.jpg?stp=dst-jpg_s150x150\\u0026\n</code></pre>\n<p>You can see that there is still &quot;0026&quot; in it, so I've found that using this solved it:</p>\n<pre><code>StringEscapeUtils.unescapeJson(input).replace(&quot;\\\\u0026&quot;,&quot;&amp;&quot;).replace(&quot;\\\\/&quot;, &quot;/&quot;) \n</code></pre>\n<p>This works, but I think I should use something more official, as it might fail due to too-direct replacing of substrings.</p>\n<h2>What I've tried</h2>\n<p>Looking at unescapeJson code (which is the same for Java&amp;Json, it seems), I thought that maybe I could just add the rules:</p>\n<pre><code>/**based on StringEscapeUtils.unescapeJson, but with addition of 2 more rules*/\nfun unescapeUrl(input: String): String {\n    val unescapeJavaMap= hashMapOf&lt;CharSequence, CharSequence&gt;(\n        &quot;\\\\\\\\&quot; to &quot;\\\\&quot;,\n        &quot;\\\\\\\\&quot; to &quot;\\\\&quot;,\n        &quot;\\\\\\&quot;&quot; to &quot;\\&quot;&quot;,\n        &quot;\\\\'&quot; to &quot;'&quot;,\n        &quot;\\\\&quot; to StringUtils.EMPTY,\n        //added rules:\n        &quot;\\\\u0026&quot; to &quot;&amp;&quot;,\n        &quot;\\\\/&quot; to &quot;/&quot;\n    )\n    val aggregateTranslator = AggregateTranslator(\n        OctalUnescaper(),\n        UnicodeUnescaper(),\n        LookupTranslator(EntityArrays.JAVA_CTRL_CHARS_UNESCAPE),\n        LookupTranslator(Collections.unmodifiableMap(unescapeJavaMap))\n    )\n    return aggregateTranslator.translate(input)\n}\n</code></pre>\n<p>This doesn't work. It leaves the string with &quot;\\u0026&quot; in it.</p>\n<h2>The questions</h2>\n<ol>\n<li><p>What did I do wrong here? How can I fix this?</p>\n</li>\n<li><p>It is true it's best to use something similar to the original code, instead of using &quot;replace&quot;, right?</p>\n</li>\n</ol>\n<p>BTW, I use this on Android using Kotlin, but same can be done on Java on PC.</p>\n"},{"comments":[{"comment_id":134499402,"body":"Please read <a href=\"https://developer.android.com/guide/topics/connectivity/wifi-scan\" rel=\"nofollow noreferrer\">developer.android.com/guide/topics/connectivity/wifi-scan</a> Since Android 9 foreground apps can perform a Wifi scan every 2 minutes. In background every 30 minutes."},{"comment_id":134512503,"body":"@Robert thanks for sharing this reference, I am creating this auto scanning mechanism in my activity class so this means that foreground policy will be applied in my case and i can get the updated wifi networks every 2mins, is this right?"}],"last_activity_date":1684315494,"question_id":76270530,"body":"<p>I am developing a wifi manager app for android.\nhere's the code that i am using to scan the networks</p>\n<pre><code>public void scanWifiList() {\n       \n            // Unregister the previous instance of the BroadcastReceiver\n            try {\n\n                unregisterReceiver(wifiReceiver);\n            }catch (Exception e){}\n            registerReceiver(wifiReceiver, new IntentFilter(WifiManager.SCAN_RESULTS_AVAILABLE_ACTION));\n\n            scanninghandler.postDelayed(new Runnable() {\n                @Override\n                public void run() {\n                    wifiManager.startScan();\n\n                     // Schedule the next scan after 5 seconds\n                    scanninghandler.postDelayed(runnable, 5000);\n                }\n            }, 1000); \n        \n    }\n\n    class WifiScanReceiver extends BroadcastReceiver {\n        public void onReceive(Context c, Intent intent) {\n            if (ActivityCompat.checkSelfPermission(c, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED) {\n                return;\n            }\n\n            if(wifiScanList != null)\n                wifiScanList.clear();\n            wifiScanList = wifiManager.getScanResults();\n\n            \n            wifiAdapter = new WifiAdapter(WifiNetworkList.this, sortedwifilist(wifiScanList),connected_ssid);\nall_wifi.setAdapter(wifiAdapter);\n            unregisterReceiver(this);\n\n        }\n</code></pre>\n<p>as you can see I am using handler to repeat scanning again and again after 5sec to get updated available networks but the issue here is that I'm only able to scan new wifi for the first 2,3 times and than it just keeps returning the old wifilist.</p>\n<p>i want to update the wifilist after every 5sec so that the user can see all the new networks available, Thanks</p>\n"},{"answers":[{"answer_id":76270260,"body":"<p>I solved the problem with changes in <code>SwaggerConfig.java</code>, I extended the <code>WebMvcConfigurerAdapter</code> in <code>SwaggerConfig</code> and overrided <code>void addResourceHandlers(ResourceHandlerRegistry registry)</code>\n:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.company.app.config;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\nimport org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;\nimport springfox.documentation.builders.PathSelectors;\nimport springfox.documentation.builders.RequestHandlerSelectors;\nimport springfox.documentation.spi.DocumentationType;\nimport springfox.documentation.spring.web.plugins.Docket;\nimport springfox.documentation.swagger2.annotations.EnableSwagger2;\n\n@Configuration\n@EnableSwagger2\n@EnableWebMvc\npublic class SwaggerConfig extends WebMvcConfigurerAdapter {\n    @Bean\n    public Docket api() {\n        return new Docket(DocumentationType.SWAGGER_2)\n                .select()\n                .apis(RequestHandlerSelectors.basePackage(&quot;com.company&quot;))\n                .paths(PathSelectors.any())\n                .build();\n    }\n\n    @Override\n    public void addResourceHandlers(ResourceHandlerRegistry registry) {\n         registry.addResourceHandler(&quot;swagger-ui.html&quot;)\n                 .addResourceLocations(&quot;classpath:/META-INF/resources/&quot;);\n\n         registry.addResourceHandler(&quot;/webjars/**&quot;)\n                 .addResourceLocations(&quot;classpath:/META-INF/resources/webjars/&quot;);\n     }\n}\n</code></pre>\n"}],"last_activity_date":1684315384,"question_id":76263231,"body":"<p>I want to setup swagger ui for my spring boot application but when I go to <code>http://localhost:8080/swagger-ui</code> I got 404 not found. I tried it with <code>http://localhost:8080/swagger-ui.html</code> and <code>http://localhost:8080/swagger-ui/index.html</code> but still got a 404. I have looked at countless tutorial and forms question but the problem continues. Here are my dependencies and swagger config file</p>\n<p>build.gradle:</p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '2.7.10'\n    id 'io.spring.dependency-management' version '1.0.15.RELEASE'\n}\n\n\ngroup = 'com.company'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '17'\n\nconfigurations {\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.modelmapper:modelmapper:2.1.1'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    compileOnly 'org.projectlombok:lombok'\n    runtimeOnly 'org.postgresql:postgresql'\n    annotationProcessor 'org.projectlombok:lombok'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    implementation 'io.springfox:springfox-swagger2:2.9.2'\n    implementation 'io.springfox:springfox-swagger-ui:2.9.2'\n}\n</code></pre>\n<p>SwaggerConfig.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.company.app.config;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\nimport springfox.documentation.builders.PathSelectors;\nimport springfox.documentation.builders.RequestHandlerSelectors;\nimport springfox.documentation.spi.DocumentationType;\nimport springfox.documentation.spring.web.plugins.Docket;\nimport springfox.documentation.swagger2.annotations.EnableSwagger2;\n\n@Configuration\n@EnableSwagger2\n@EnableWebMvc\npublic class SwaggerConfig {\n    @Bean\n    public Docket api() {\n        return new Docket(DocumentationType.SWAGGER_2)\n                .select()\n                .apis(RequestHandlerSelectors.basePackage(&quot;com.company&quot;))\n                .paths(PathSelectors.ant(&quot;/api/**&quot;))\n                .build();\n    }\n}\n</code></pre>\n<p>I assume it is about the versions, which one should I use with the spring boot version I am using if it is about versions of swagger?</p>\n"},{"last_activity_date":1684315156,"question_id":76270469,"body":"<p>I have a Synapse Dedicated SQL Pool setup. I need to call a stored procedure from the java :\nThe stored procedure definition :</p>\n<pre><code>SET ANSI_NULLS ON\nGO\nSET QUOTED_IDENTIFIER ON\nGO\nALTER PROC [dbo].[SaveData] (\n    @queries [VARCHAR](250),\n    @startDate [VARCHAR](20),\n    @endDate [VARCHAR](20),\n    @monthDayFrom [INT],\n    @monthDayTo [INT],\n    @triggerJobAfterLoad [INT],\n    @userID [VARCHAR](25) \n) AS\nBEGIN\n    DECLARE @submitDate DATETIME = GETDATE();\n    DECLARE @nRet INT = 0;\n    DECLARE @err_msg VARCHAR(8000) ;\n    DECLARE @err_date DATETIME = GETDATE();\n    DECLARE @f BIT;\n    SET NOCOUNT ON;\n\n    BEGIN TRY\n        \n        SET @f = CAST(@triggerJobAfterLoad AS BIT);\n\n        INSERT INTO [dbo].[DATA_TBL] (\n            [QUERY], [START_DATE], [END_DATE], [REPEAT_DAY_FROM], [REPEAT_DAY_TO], [TRIGGER_AFTER_LOAD], [USER_ID], [SUBMIT_DATE]\n        )\n        SELECT VALUE, @startDate, @endDate, @monthDayFrom, @monthDayTo, @f, @userID, @submitDate\n        FROM STRING_SPLIT(@queries, ',');\n\n        SELECT @nRet AS result;\n\n    END TRY\n    BEGIN CATCH\n        SET @err_msg = ERROR_MESSAGE();\n        \n        INSERT INTO [dbo].[ErrorTable] ( [DBName], [TableName], [Query], [ErrorMessage], [ProcedureName], [CreatedDate])    \n        VALUES ('SQLDW','','', @err_msg,'[dbo].[SaveData]',@err_date);\n\n        SET @nRet = -1;\n        SELECT @nRet AS result;\n    END CATCH;\n\nEND\n\n</code></pre>\n<p>The java code that calls the stored procedure :</p>\n<pre><code>public int SaveData(DataBean bean) \n{\n    int returnCode = -1;\n    Connection conn = null;\n    PreparedStatement s = null;\n    try {\n        conn = SqlDBConnect.getConnection(&quot;synapseDW&quot;);\n        String sql = &quot;EXEC [dbo].[SaveJobsToSchedule] ?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?;&quot;;\n        s = conn.prepareStatement(sql);\n        s.setQueryTimeout(180);\n        s.setString(1, bean.getQueries());\n        s.setString(2, bean.getStartDate());\n        s.setString(3, bean.getEndDate());\n        s.setInt(4, bean.getMonthDayFrom());\n        s.setInt(5, bean.getMonthDayTo());\n        s.setInt(6, bean.getJobTriggerAfterLoad());\n        s.setString(7, bean.getUserID());\n        \n        ResultSet rset = s.executeQuery();\n        while (rset.next()) {\n            returnCode = rset.getInt(&quot;result&quot;);\n            if(returnCode == DBConst.DB_SUCCESS) {\n                conn.commit();\n            }\n            else {\n                returnCode = DBConst.DB_FAIL;\n                conn.rollback();\n            }\n        }\n        \n    } catch (Exception e) {\n        returnCode = DBConst.DB_FAIL;\n        Configuration.getInstance().getTelemetry().trackException(e);\n        e.printStackTrace();\n        try {\n            conn.rollback();\n        } catch (SQLException f) {\n            Configuration.getInstance().getTelemetry().trackException(f);\n        }\n    } finally {\n        if(s != null) {\n            try {\n                s.close();\n            } catch (SQLException e) {\n                e.printStackTrace();\n            }\n        }\n        if(conn != null)\n        {\n            try {\n                conn.close();\n            } catch (SQLException e) {\n                Configuration.getInstance().getTelemetry().trackException(e);\n            } \n        }\n    }\n    \n    return returnCode;\n}\n</code></pre>\n<p>When the function is called and the stored procedure executes, I get the following error :</p>\n<pre><code>111213;The current transaction has aborted, and any pending changes have been rolled back. Cause: 111208;An internal error occurred that prevents further processing of this command: 'Distributed transaction completed. Either enlist this session in a new transaction or the NULL transaction. (Number=8525; ErrorCode=-2146232060; State=1)' Errors:[Distributed transaction completed. Either enlist this session in a new transaction or the NULL transaction. (Number=8525; State=1)] caused 'An exception occurred while executing a Transact-SQL statement or batch.' caused 'Failed to retrieve data for this request.' caused '111607;Error during statement generation: Failed to retrieve data for this request.'\n</code></pre>\n<p>I have similar stored procedures for other steps and others are executing as expected. I tried varying the stored procedure query, set the <code>autoCommit</code> option to true on the java side.</p>\n<p>The stored procedure executes fine when executed from the SQL server. How do I resolve this issue?</p>\n"},{"comments":[{"comment_id":134499175,"body":"Don&#39;t upload to <code>src&#47;main&#47;resources</code> that will break whe packaged as that is the classpath which you cannot upload to. Upload to an external directory instead."}],"last_activity_date":1684314890,"question_id":76270432,"body":"<p>I am using Java Spring Boot to create a picture-uploading system. The function I used goes like this:</p>\n<pre><code>public static JSONObject uploadFile(MultipartFile file, String folder) {\n        JSONObject result = new JSONObject();\n        try {\n            Path resourceDirectory = Paths.get(&quot;src&quot;,&quot;main&quot;,&quot;resources&quot;,&quot;templates&quot;,&quot;img&quot;, folder);\n            String absolutePath = resourceDirectory.toFile().getAbsolutePath();\n            folderCheckAdd(absolutePath);\n            File file2 = new File(absolutePath + &quot;/&quot; + file.getOriginalFilename());\n            String ext = FilenameUtils.getExtension(file2.getAbsolutePath());\n            if (ext.equalsIgnoreCase(&quot;png&quot;) || ext.equalsIgnoreCase(&quot;jpg&quot;)) {\n                InputStream is;\n                FileOutputStream os = null;\n                try {\n                    is = file.getInputStream();\n                    os = new FileOutputStream(file2);\n                    byte[] buffer = new byte[1024];\n                    int length;\n                    while ((length = is.read(buffer)) &gt; 0) {\n                        os.write(buffer, 0, length);\n                    }\n                } finally {\n                    os.close();\n                }\n                result.put(&quot;Result&quot;, &quot;Success&quot;);\n            } else {\n                result.put(&quot;Result&quot;, &quot;Fail&quot;);\n                result.put(&quot;Message&quot;, &quot;Picture not in PNG/JPG format&quot;);\n            }\n        } catch (IOException ex) {\n            result.put(&quot;Result&quot;, &quot;Fail&quot;);\n            result.put(&quot;Message&quot;, &quot;IO Exception caught&quot;);\n            \n        }\n        return result;\n    }\n    \n    public static void folderCheckAdd(String path) throws IOException{\n        File file = new File(path);\n        if (!file.exists()) {\n            file.mkdir();\n        }\n    }\n</code></pre>\n<p>Whereas, the command I'm using to load said picture goes like this.</p>\n<pre><code>import java.io.File;\nimport java.io.FileInputStream;\nimport java.io.IOException;\n\nimport org.apache.commons.io.FilenameUtils;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.core.io.Resource;\nimport org.springframework.core.io.ResourceLoader;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.util.ResourceUtils;\nimport org.springframework.util.StreamUtils;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\n@Controller\n@RequestMapping(&quot;/project/img/&quot;)\npublic class ImageController {\n    \n    @Autowired\n    ResourceLoader resourceLoader;\n\n    @GetMapping(&quot;/{name}&quot; )\n    public ResponseEntity&lt;byte[]&gt; getImage(@PathVariable String name) throws IOException {\n\n        return setupImage(name);\n        \n    }\n    \n    @GetMapping(&quot;/{category}/{name}&quot; )\n    public ResponseEntity&lt;byte[]&gt; getImage(@PathVariable String category, @PathVariable String name) throws IOException {\n        return setupImage(category+&quot;/&quot;+name);\n    }\n    \n    private ResponseEntity&lt;byte[]&gt; setupImage (String path) throws IOException {\n        File imgFile ;\n        Resource resource = resourceLoader.getResource(&quot;classpath:templates/img/&quot;+path);\n        if (resource.exists()) {\n            imgFile = ResourceUtils.getFile(&quot;classpath:templates/img/&quot;+path);\n        } else {\n            System.out.println(resource.getFilename());\n            imgFile = ResourceUtils.getFile(&quot;classpath:templates/img/noimage.png&quot;);\n        }\n        String ext = FilenameUtils.getExtension(imgFile.getAbsolutePath());\n        byte[] bytes = StreamUtils.copyToByteArray(new FileInputStream(imgFile));\n        MediaType type;\n        if (ext.equals(&quot;png&quot;)) {\n            type = MediaType.IMAGE_PNG;\n        } else {\n            type = MediaType.IMAGE_JPEG;\n        }\n        return ResponseEntity\n                .ok()\n                .contentType(type)\n                .body(bytes);\n    }\n}\n</code></pre>\n<p>When the first code snippet is run, it successfully saved the picture in the resource, therefore, in my PC, the picture appears and are copied. However, when I try to load the picture by using the second snippet, the picture will not load, the &quot;if (resource.exists())&quot; part always returns false. Until I restart my server a few times, then it appears for good. But I believe that is not the ideal outcome.</p>\n<p>So what should I do in order to ensure that once I upload, the picture can be displayed without needing to restart my server? Is there another coding that I should have used, or there's another framework as an alternative?</p>\n<p>Thank you.</p>\n"},{"comments":[{"comment_id":134499303,"body":"Does <code>http:&#47;&#47;192.168.0.128&#47;senior2&#47;signup.php</code> time out if you access it a different way (e.g. via a browser)? If so then the problem is likely to be in the PHP or webserver. If not, then maybe it&#39;s a connection error between the Android app and your server. I notice you&#39;re using a local LAN IP address...is your Android device connected to the same LAN?"},{"comment_id":134499325,"body":"P.S. It&#39;s not very secure to send a password in a URL GET parameter...it can easily by logged by webservers, routers etc. Better to send a POST request with the data in the body, and use HTTPS."},{"comment_id":134499328,"body":"Also, please don&#39;t store passwords in plain text - that is another security risk. Learn about <a href=\"https://www.php.net/manual/en/faq.passwords.php\" rel=\"nofollow noreferrer\">password hashing</a> instead. See also <a href=\"https://stackoverflow.com/questions/30279321/how-to-use-phps-password-hash-to-hash-and-verify-passwords\">How to use PHP&#39;s password_hash to hash and verify passwords</a>"},{"comment_id":134499336,"body":"And please bring your error handling into the 21st century. Add <code>mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);</code> before your <code>mysqli_connect()</code> (or <code>new mysqli()</code>) command, and this will ensure that errors with your SQL queries are reported correctly to PHP automatically. That way you don&#39;t need to clutter your script with repetitive code to keep checking errors after every mysqli command. And you should never be echoing error data deliberately - it can easily reveal sensitive info to attackers by accident."},{"comment_id":134501630,"body":"Notice how you are sending certain data from Android: <code>data.put(&quot;name&quot;, name);</code> and how do you try to retrieve them on the server: <code>$_GET[&quot;username&quot;]</code> Also, you never send <code>id</code>, but you try to retrieve it: <code>$_GET[&quot;id&quot;]</code>. Also, your style of programming in PHP is &quot;naive&quot;, too optimistic, you don&#39;t check that the values exist in <code>$_GET</code>. One other thing, in Android you said you will use <code>POST</code>, why do you use <code>$_GET</code> on the server and not <code>$_POST</code>?"},{"comment_id":134501786,"body":"Agree with the above...on closer inspection this does appear to be two pieces of separate code, not particularly designed to work together, but thrown together on the basis of...what? Guesswork, perhaps? It&#39;s unclear <i>why</i> you ever expected this to be correct? Programming is not guesswork. Learn how submitting data in a HTTP request works, especially in terms of the different HTTP methods (GET, POST etc) and specifying the names of the fields you submit (hint: it&#39;s not rocket science...the names of the parameters you send from the client must match what the server code is looking for....)"}],"last_activity_date":1684314816,"question_id":76270377,"body":"<p>This is my register code for the app the error i got doesnt show where is the problem it just says timeout error when i press the button register</p>\n<pre><code>package com.example.registerlogindemo;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport com.android.volley.AuthFailureError;\nimport com.android.volley.Request;\nimport com.android.volley.RequestQueue;\nimport com.android.volley.Response;\nimport com.android.volley.VolleyError;\nimport com.android.volley.toolbox.StringRequest;\nimport com.android.volley.toolbox.Volley;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class Register extends AppCompatActivity {\n    private EditText etName, etEmail, etPassword, etReenterPassword;\n    private TextView tvStatus;\n    private Button btnRegister;\n    private String URL = &quot;http://192.168.0.128/senior2/signup.php&quot;;\n    private String name, email, password, reenterPassword;\n\n    @Override\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.register);\n        etName = findViewById(R.id.etName);\n        etEmail = findViewById(R.id.etEmail);\n        etPassword = findViewById(R.id.etPassword);\n        etReenterPassword = findViewById(R.id.etReenterPassword);\n        tvStatus = findViewById(R.id.tvStatus);\n        btnRegister = findViewById(R.id.btnRegister);\n        name = email = password = reenterPassword = &quot;&quot;;\n    }\n\n    public void save(View view) {\n        name = etName.getText().toString().trim();\n        email = etEmail.getText().toString().trim();\n        password = etPassword.getText().toString().trim();\n        reenterPassword = etReenterPassword.getText().toString().trim();\n        if(!password.equals(reenterPassword)){\n            Toast.makeText(this, &quot;Password Mismatch&quot;, Toast.LENGTH_SHORT).show();\n        }\n        else if(!name.equals(&quot;&quot;) &amp;&amp; !email.equals(&quot;&quot;) &amp;&amp; !password.equals(&quot;&quot;)){\n            StringRequest stringRequest = new StringRequest(Request.Method.POST, URL, new Response.Listener&lt;String&gt;() {\n                @Override\n                public void onResponse(String response) {\n                    if (response.equals(&quot;success&quot;)) {\n                        tvStatus.setText(&quot;Successfully registered.&quot;);\n                        btnRegister.setClickable(false);\n                    } else if (response.equals(&quot;failure&quot;)) {\n                        tvStatus.setText(&quot;Something went wrong!&quot;);                    }\n                }\n            }, new Response.ErrorListener() {\n                @Override\n                public void onErrorResponse(VolleyError error) {\n                    Toast.makeText(getApplicationContext(), error.toString().trim(), Toast.LENGTH_SHORT).show();\n                }\n            }){\n                @Override\n                protected Map&lt;String, String&gt; getParams() throws AuthFailureError {\n                    Map&lt;String, String&gt; data = new HashMap&lt;&gt;();\n                    data.put(&quot;name&quot;, name);\n                    data.put(&quot;email&quot;, email);\n                    data.put(&quot;password&quot;, password);\n                    return data;\n                }\n            };\n            RequestQueue requestQueue = Volley.newRequestQueue(getApplicationContext());\n            requestQueue.add(stringRequest);\n        }\n    }\n\n    public void login(View view) {\n        Intent intent = new Intent(this, MainActivity.class);\n        startActivity(intent);\n        finish();\n    }\n}\n</code></pre>\n<p>This is my php signup that i created and it is working i tested it</p>\n<pre><code>&lt;?php\n$con = new mysqli(&quot;localhost&quot;, &quot;root&quot;, &quot;Aisha55733441&quot;, &quot;signupdb&quot;, 3307);\n\n$st_check = $con-&gt;prepare(&quot;SELECT * FROM users WHERE email = ?&quot;);\n$st_check-&gt;bind_param(&quot;s&quot;, $_GET[&quot;email&quot;]);\n$st_check-&gt;execute();\n$rs = $st_check-&gt;get_result();\n\nif ($rs-&gt;num_rows == 0) {\n    $st = $con-&gt;prepare(&quot;INSERT INTO users (id, username, email, password) VALUES (?, ?, ?, ?)&quot;);\n    if (!$st) {\n        die('Invalid query: ' . $con-&gt;error);\n    }\n    $st-&gt;bind_param(&quot;isss&quot;,$_GET[&quot;id&quot;], $_GET[&quot;username&quot;], $_GET[&quot;email&quot;],$_GET[&quot;password&quot;]);\n\n    if (!$st-&gt;execute()) {\n        die('Invalid query: ' . $st-&gt;error);\n    }\n    echo &quot;successful&quot;;\n} else {\n    $user = $rs-&gt;fetch_assoc();\n    echo &quot;User with ID &quot; . $user[&quot;id&quot;] . &quot; already exists&quot;;\n}\n\n</code></pre>\n<p>I searched everywhere and i couldnt find the error cause so please if anybody can help</p>\n<p>i want the user information to be inserted here</p>\n"},{"comments":[{"comment_id":134493967,"body":"Certainly looks like a bug from here, but <i>please</i> simplify this down to a <b>minimal</b> reproducer before reporting it."},{"comment_id":134512293,"body":"One thing to mention: When i change the order of the LEFT JOIN clauses (first the manufacterer and the the positions), the error disappears."}],"answers":[{"comments":[{"comment_id":134512279,"body":"I am returning the entity itself. Tried it with using the FQN, but this didn&#39;t change anything."}],"answer_id":76270405,"body":"<p>As far as I understand from the query your are returning the DTO having the same name as the entity you are querying from. So you need to distinguish between them somehow. Please use fully-qualified name for DTO declaration:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(\n      &quot;SELECT new com.your.package.name.Position(p, CASE WHEN p.sourceSetId IS NULL THEN p.sourceSetName ELSE s.name END as sourceSetName, pos.optimizedDisplayOrder) FROM Position p &quot;\n          + &quot;LEFT JOIN Position pos ON pos.projectId = p.projectId AND pos.positionId = p.sourceSetPositionId &quot;\n          + &quot;LEFT JOIN Manufacturer m ON p.optimizedItem.manufacturer.manufacturerId = m.manufacturerId &quot;\n          + &quot;LEFT JOIN Set s ON p.sourceSetId = s.setId AND p.projectId = s.projectId &quot;\n          + &quot;WHERE p.setId = :setId AND p.projectId = :projectId &quot;\n          + &quot;AND (UPPER(p.optimizedItem.code) LIKE UPPER(CONCAT('%', :searchParam, '%')) &quot;\n          + &quot;OR UPPER(m.name) LIKE UPPER(CONCAT('%', :searchParam, '%')) &quot;\n          + &quot;OR UPPER(p.optimizedItem.description) LIKE UPPER(CONCAT('%', :searchParam, '%')))&quot;)\n</code></pre>\n"}],"last_activity_date":1684314712,"question_id":76264419,"body":"<p>When updating to Hibernate 6 (coming from 5.6) some of the existing queries gets broken.</p>\n<p>For example, executing this query works fine in 5.6:</p>\n<pre><code>  @Query(\n      &quot;SELECT new Position(p, CASE WHEN p.sourceSetId IS NULL THEN p.sourceSetName ELSE s.name END as sourceSetName, pos.optimizedDisplayOrder) FROM Position p &quot;\n          + &quot;LEFT JOIN Position pos ON pos.projectId = p.projectId AND pos.positionId = p.sourceSetPositionId &quot;\n          + &quot;LEFT JOIN Manufacturer m ON p.optimizedItem.manufacturer.manufacturerId = m.manufacturerId &quot;\n          + &quot;LEFT JOIN Set s ON p.sourceSetId = s.setId AND p.projectId = s.projectId &quot;\n          + &quot;WHERE p.setId = :setId AND p.projectId = :projectId &quot;\n          + &quot;AND (UPPER(p.optimizedItem.code) LIKE UPPER(CONCAT('%', :searchParam, '%')) &quot;\n          + &quot;OR UPPER(m.name) LIKE UPPER(CONCAT('%', :searchParam, '%')) &quot;\n          + &quot;OR UPPER(p.optimizedItem.description) LIKE UPPER(CONCAT('%', :searchParam, '%')))&quot;)\n</code></pre>\n<p>but leads to the following error in 6:</p>\n<pre><code>2023-05-16T16:35:37.867+02:00  WARN 21803 --- [nio-8080-exec-9] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 42P01\n2023-05-16T16:35:37.867+02:00 ERROR 21803 --- [nio-8080-exec-9] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: missing FROM-clause entry for table &quot;o1_0&quot;\n  Position: 743\n2023-05-16T16:35:37.875+02:00 ERROR 21803 --- [nio-8080-exec-9] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.InvalidDataAccessResourceUsageException: JDBC exception executing SQL [select p1_0.position_id,p1_0.comment,p1_0.create_date,p1_0.last_modified_by,p1_0.last_modified_date,p1_0.optimized_display_order,case when p1_0.optimized_item_id IS NULL then p1_0.original_item_id else p1_0.optimized_item_id end ,p1_0.optimized_item_id,p1_0.optimized_quantity,p1_0.original_display_order,p1_0.original_item_id,p1_0.original_quantity,p1_0.project_id,p1_0.set_id,p1_0.source_set_id,p1_0.source_set_name,p1_0.source_set_position_id,case when p1_0.source_set_id is null then p1_0.source_set_name else s1_0.name end,p2_0.optimized_display_order from nemo_dev.position p1_0 left join nemo_dev.position p2_0 on p2_0.project_id=p1_0.project_id and p2_0.position_id=p1_0.source_set_position_id left join nemo_dev.manufacturer m1_0 on o1_0.manufacturer_id=m1_0.manufacturer_id left join nemo_dev.set s1_0 on p1_0.source_set_id=s1_0.set_id and p1_0.project_id=s1_0.project_id join nemo_dev.item o1_0 on o1_0.item_id=case when p1_0.optimized_item_id IS NULL then p1_0.original_item_id else p1_0.optimized_item_id end  where p1_0.set_id=? and p1_0.project_id=? and (upper(o1_0.code) like upper(('%'||?||'%')) escape '' or upper(m1_0.name) like upper(('%'||?||'%')) escape '' or upper(o1_0.description) like upper(('%'||?||'%')) escape '') order by p1_0.optimized_display_order asc offset ? rows fetch first ? rows only]; SQL [n/a]] with root cause\n\norg.postgresql.util.PSQLException: ERROR: missing FROM-clause entry for table &quot;o1_0&quot;\n  Position: 743\n    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676) ~[postgresql-42.5.4.jar:42.5.4]\n    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2366) ~[postgresql-42.5.4.jar:42.5.4]\n    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:356) ~[postgresql-42.5.4.jar:42.5.4]\n    at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:496) ~[postgresql-42.5.4.jar:42.5.4]\n</code></pre>\n<p>I have read the <a href=\"https://github.com/hibernate/hibernate-orm/blob/6.0/migration-guide.adoc\" rel=\"nofollow noreferrer\">migration guide</a> but couldn't find an explanation for this.</p>\n<p>Am i missing something?</p>\n"},{"last_activity_date":1684314693,"question_id":76262534,"body":"<p>Hello I was wondering how I would be able to code a program that takes a list of all people in a group chat for Instagram and then tallies up how many messages in that group chat they have added a reaction to and how many of their messages have been reacted to?</p>\n"},{"answers":[{"comments":[{"comment_id":4009124,"body":"But is this secure? Are you storing passwords in plain-text?"},{"comment_id":4009195,"body":"There&#39;s a case for storing passwords in plain text, as opposed to simply obfuscating them - obfuscation gives a false sense of safety. See for example <a href=\"http://developer.pidgin.im/wiki/PlainTextPasswords\" rel=\"nofollow noreferrer\">developer.pidgin.im/wiki/PlainTextPasswords</a>"},{"comment_id":4009248,"body":"Before I store a password, I will use <a href=\"http://www.jasypt.org/\" rel=\"nofollow noreferrer\">jasypt.org</a> to perform encryption. Currently, I hard code my encryption key in my application. I once thinking to let user specific the key. However, that may stop average user from using my app as it is kind to hard to explain what key is. Hence, I give up the idea. So far, I receive no complain on security issue by doing so."},{"comment_id":4010974,"body":"So anyone with a copy of your program can use anybody&#39;s key file? Lack of compalints doesn&#39;t make it secure. A person whose password is compromised may not even be aware of the fact. Sure this works and with properly protected machines it&#39;s quite low risk, but in fact the encryption buys very little. In effect your applciation is the key, so that&#39;s what needs to be protected."},{"comment_id":4018942,"body":"I think this is a security threat.As a cracker can get the hard coded password by decompiling your Java code."},{"comment_id":94358076,"body":"That&#39;s not where you store user or application data on Windows."}],"answer_id":3784695,"body":"<p>I usually store in user data directory, with sub directories of application name followed by application version.</p>\n\n<pre><code>public static String getUserDataDirectory() {\n    return System.getProperty(\"user.home\") + File.separator + \".jstock\" + File.separator + getApplicationVersionString() + File.separator;\n}\n</code></pre>\n\n<p>I had been using the following code for 3 years. This method works quite well either in Windows, Linux or Mac.</p>\n\n<p>Please note that, in Windows, never store it in <code>Program Files</code>, as UAC in Windows Vista or newer may give you a lot of trouble.</p>\n\n<p>Remember put a dot in-front of your application name, so that it will become a hidden folder in Linux.</p>\n\n<p>Good thing by using this methology is that, you are not limited your self in storing primitive value only. Instead, you may save the entire object state to the disk by using <a href=\"http://xstream.codehaus.org/\" rel=\"noreferrer\">xstream</a></p>\n\n<p>For example :</p>\n\n<pre><code>public static boolean toXML(Object object, File file) {\n    XStream xStream = new XStream();\n    OutputStream outputStream = null;\n    Writer writer = null;\n\n    try {\n        outputStream = new FileOutputStream(file);\n        writer = new OutputStreamWriter(outputStream, Charset.forName(\"UTF-8\"));\n        xStream.toXML(object, writer);\n    }\n    catch (Exception exp) {\n        log.error(null, exp);\n        return false;\n    }\n    finally {\n        close(writer);\n        close(outputStream);\n    }\n\n    return true;\n} \n</code></pre>\n"},{"answer_id":3784757,"body":"<p>Storing a single password <em>securely</em> is quite difficult. Suppose you encrypt the password using some secret key. Then when your applciation starts again it needs that secret key, where does it get that from? </p>\n\n<p>If it asks the user then he might as well just enter the ftp password which you stored in the first place. If it reads the secret key from somewhere then you need to secure the secret key, and we're back where we started. </p>\n\n<p>If you are keeping several passwords then asking the user for a single password to some \"vault\" may be much friendlier, but you then get into all the hassle of dealing with expired passwords. </p>\n\n<p>There are products available to deal with this wort of stuff, if you have a serious need then you probably need to investigate them.</p>\n"},{"comments":[{"comment_id":4012255,"body":"Where shall we store the required key?"},{"comment_id":24234766,"body":"Nice intro tutorial here:  <a href=\"http://www.mkyong.com/java/java-properties-file-examples/\" rel=\"nofollow noreferrer\">mkyong.com/java/java-properties-file-examples</a>"},{"comment_id":60512237,"body":"I want to note that on Windows you might have to change the registry if you are using Preferences. For a normal user of your application, this might be a blocker (no-go!)."},{"comment_id":72341417,"body":"@ElMac: I guess you refer to the infamous <code>WARNING: Could not open&#47;create prefs root node Software\\JavaSoft\\Prefs  at root 0x80000002. Windows RegCreateKeyEx(...) returned error code 5</code>  warning?  Which has led users to believe that they need to use <code>regedit</code> to create a new Win Registry key (because then this warning goes away). This is actually a <a href=\"http://stackoverflow.com/a/41151051/1504556\">bug in Java itself</a>. You are not meant to have to do this. It is a result of the bug."}],"answer_id":3784813,"body":"<p>The <a href=\"http://download.oracle.com/javase/1.5.0/docs/guide/preferences/index.html\" rel=\"noreferrer\">Preferences API</a> is a nice way to store user and system preferences. If you want to store passwords, you'll have to encrypt them. Here is a nice article that can get you started. </p>\n\n<p><a href=\"http://www.drdobbs.com/184416587\" rel=\"noreferrer\">Encrypted Preferences in Java</a></p>\n"}],"last_activity_date":1684314652,"question_id":3784657,"body":"<p>What is the best way to save user settings in java desktop app securely? For example If I want to save an Ftp account settings what is the best way to do that?</p>\n\n<p>Thanks</p>\n"}]}