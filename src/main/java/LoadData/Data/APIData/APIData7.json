{"items":[{"last_activity_date":1684740857,"question_id":76302200,"body":"<p>I'm trying to upgrade from <code>'com.onesignal:OneSignal:3.12.2'</code> to <code>'com.onesignal:OneSignal:[4.0.0, 4.99.99]'</code> but I can't find the equivalent of <code>com.onesignal.GcmBroadcastReceiver</code> in the documentation for <code>com.onesignal:OneSignal:[4.0.0, 4.99.99]</code></p>\n<p>here is the documentation that I use for the upgrade: <a href=\"https://documentation.onesignal.com/docs/android-13-push-notification-developer-update-guide\" rel=\"nofollow noreferrer\">https://documentation.onesignal.com/docs/android-13-push-notification-developer-update-guide</a></p>\n<p>the code below is a piece of code from the <code>AndroidManifest.xml</code> file for <code>com.onesignal:OneSignal:3.12.2</code> and I want to replace it with its equivalent for <code>com.onesignal:OneSignal:[4.0.0, 4.99.99]</code></p>\n<pre><code>        &lt;receiver\n        android:name=&quot;com.onesignal.GcmBroadcastReceiver&quot;\n        android:exported=&quot;true&quot;\n        android:permission=&quot;com.google.android.c2dm.permission.SEND&quot;&gt;\n\n            &lt;!-- High priority so OneSignal payloads can be filtered from other GCM receivers if filterOtherGCMReceivers is enabled. --&gt;\n            &lt;intent-filter android:priority=&quot;999&quot;&gt;\n                &lt;action android:name=&quot;com.google.android.c2dm.intent.RECEIVE&quot; /&gt;\n\n                &lt;category android:name=&quot;${applicationId}&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n</code></pre>\n"},{"comments":[{"comment_id":120445855,"body":"the same question:  <a href=\"https://stackoverflow.com/questions/24652128/how-to-modify-log4j-jsonlayout-field-names/68148523#68148523\" title=\"how to modify log4j jsonlayout field names\">stackoverflow.com/questions/24652128/&hellip;</a>"}],"answers":[{"comments":[{"comment_id":109013355,"body":"thanks, about solution gets <b>JSON</b> structure with <i><b>PatternLayout</b></i> but is there any possibility to define required attribute or remove unwanted attribute with <i><b>JsonLayout</b></i> ?"},{"comment_id":109013548,"body":"@Ravikumar You can define <code>&lt;pattern&gt;define here&lt;&#47;pattern&gt;</code> I attached link at my answer. <b>The parameter are described at here. Find Patterns at Pattern Layout.</b>"},{"comment_id":109014778,"body":"<b>your the solution is perfectly okay</b>, which brings me logs in JSON Format. But here we are using <i>pattern</i> inside <i><b>PatterLayout</b></i> to bring JSON format in logs its totally fine. But Slf4j2 supports JSON format by default in <i><b>JsonLayout</b></i> with default attributes like <i>timeMillis</i>, <i>endOfBatch</i> and so on. so here how can we limit / remove default attributes in <i><b>JsonLayout</b></i>. So is that possible with <i><b>JsonLayout</b></i> ?."},{"comment_id":109019680,"body":"@Ravikumar In my case, I only use <code>&lt;PatternLayout&gt;&lt;pattern&gt;...&lt;&#47;pattern&gt;&lt;&#47;PatternLayout&gt;</code> and print log well. <code>&lt;pattern&gt;{&quot;level&quot;:&quot;%p&quot;,&quot;loggerName&quot;:&quot;%c&quot;}&lt;&#47;pattern&gt;</code> print <code>{&quot;level&quot;:&quot;INFO&quot;,&quot;loggerName&quot;:&quot;com.test.LogTest&quot;}</code>"},{"comment_id":109045458,"body":"@Ravikumar Good luck!"}],"answer_id":61622284,"body":"<p>If you want to log only <code>level</code> and <code>loggerName</code> than customize like below in your configuration file.</p>\n\n<pre><code>...\n&lt;PatternLayout&gt;\n    &lt;pattern&gt;{\"level\":\"%p\",\"loggerName\":\"%c\"}&lt;/pattern&gt;\n&lt;/PatternLayout&gt;\n...\n</code></pre>\n\n<p>The parameter are described at <a href=\"https://logging.apache.org/log4j/2.x/manual/layouts.html\" rel=\"nofollow noreferrer\">here</a>. Find <code>Patterns</code> at <code>Pattern Layout</code>.</p>\n"},{"answer_id":76303815,"body":"<p>For this purpose, I slightly changed the <code>JSONLayout</code> class and created the new <code>JSONLayoutV2</code> class.\nYou can use the <code>JSONLayoutV2</code> class to customize these attributes until the <code>JSONLayout</code> class is modified.</p>\n<pre><code>&lt;JSONLayoutV2 objectMessageAsJsonObject=&quot;true&quot; thread=&quot;true&quot; threadId=&quot;true&quot; eventEol=&quot;true&quot; complete=&quot;true&quot; compact=&quot;false&quot;  properties=&quot;true&quot; /&gt;\n</code></pre>\n<p><code>JSONLayoutV2</code> class:</p>\n<pre><code>package org.apache.logging.log4j.core.layout;\n\nimport com.fasterxml.jackson.databind.ObjectWriter;\nimport com.fasterxml.jackson.databind.ser.impl.SimpleBeanPropertyFilter;\nimport com.fasterxml.jackson.databind.ser.impl.SimpleFilterProvider;\nimport org.apache.logging.log4j.core.LogEvent;\nimport org.apache.logging.log4j.core.config.Configuration;\nimport org.apache.logging.log4j.core.config.DefaultConfiguration;\nimport org.apache.logging.log4j.core.config.plugins.Plugin;\nimport org.apache.logging.log4j.core.config.plugins.PluginBuilderAttribute;\nimport org.apache.logging.log4j.core.config.plugins.PluginBuilderFactory;\nimport org.apache.logging.log4j.core.config.plugins.PluginElement;\nimport org.apache.logging.log4j.core.impl.Log4jLogEvent;\nimport org.apache.logging.log4j.core.util.KeyValuePair;\n\nimport java.io.IOException;\nimport java.io.Writer;\nimport java.nio.charset.Charset;\nimport java.nio.charset.StandardCharsets;\nimport java.util.HashMap;\nimport java.util.HashSet;\nimport java.util.Map;\nimport java.util.Set;\n\n\n@Plugin(\n        name = &quot;JsonLayoutV2&quot;,\n        category = &quot;Core&quot;,\n        elementType = &quot;layout&quot;,\n        printObject = true\n)\npublic final class JsonLayoutV2 extends AbstractJacksonLayout {\n    private static final String DEFAULT_FOOTER = &quot;]&quot;;\n    private static final String DEFAULT_HEADER = &quot;[&quot;;\n    static final String CONTENT_TYPE = &quot;application/json&quot;;\n\n    /** @deprecated */\n    @Deprecated\n    protected JsonLayoutV2(final Configuration config, final boolean locationInfo, final boolean properties, final boolean encodeThreadContextAsList, final boolean complete, final boolean compact, final boolean eventEol, final String endOfLine, final String headerPattern, final String footerPattern, final Charset charset, final boolean includeStacktrace) {\n        super(config, (new JacksonFactory.JSON(encodeThreadContextAsList, includeStacktrace, false, false)).newWriter(locationInfo, properties, compact), charset, compact, complete, eventEol, endOfLine, PatternLayout.newSerializerBuilder().setConfiguration(config).setPattern(headerPattern).setDefaultPattern(&quot;[&quot;).build(), PatternLayout.newSerializerBuilder().setConfiguration(config).setPattern(footerPattern).setDefaultPattern(&quot;]&quot;).build(), false, (KeyValuePair[])null);\n    }\n\n    private JsonLayoutV2(final Configuration config, final boolean locationInfo, final boolean properties, final boolean encodeThreadContextAsList, final boolean complete, final boolean compact, final boolean eventEol, final String endOfLine, final String headerPattern, final String footerPattern, final Charset charset, final boolean includeStacktrace, final boolean stacktraceAsString, final boolean includeNullDelimiter, final boolean includeTimeMillis, final KeyValuePair[] additionalFields, final boolean objectMessageAsJsonObject,\n                         final boolean instant, final boolean loggerFqcn, final boolean endOfBatch, final boolean loggerName, final boolean thread, final boolean threadId, final boolean threadPriority) {\n//        super(config, (new JacksonFactory.JSON(encodeThreadContextAsList, includeStacktrace, stacktraceAsString, objectMessageAsJsonObject)).newWriter(locationInfo, properties, compact, includeTimeMillis), charset, compact, complete, eventEol, endOfLine, PatternLayout.newSerializerBuilder().setConfiguration(config).setPattern(headerPattern).setDefaultPattern(&quot;[&quot;).build(), PatternLayout.newSerializerBuilder().setConfiguration(config).setPattern(footerPattern).setDefaultPattern(&quot;]&quot;).build(), includeNullDelimiter, additionalFields);\n        super(config, newWriter((new JacksonFactory.JSON(encodeThreadContextAsList, includeStacktrace, stacktraceAsString, objectMessageAsJsonObject)), locationInfo, properties, compact, includeTimeMillis,\n                instant,  loggerFqcn,  endOfBatch,  loggerName,  thread,  threadId,  threadPriority), charset, compact, complete, eventEol, endOfLine, PatternLayout.newSerializerBuilder().setConfiguration(config).setPattern(headerPattern).setDefaultPattern(&quot;[&quot;).build(), PatternLayout.newSerializerBuilder().setConfiguration(config).setPattern(footerPattern).setDefaultPattern(&quot;]&quot;).build(), includeNullDelimiter, additionalFields);\n    }\n\n    static ObjectWriter newWriter(JacksonFactory.JSON jacksonFactory, final boolean locationInfo, final boolean properties, final boolean compact, final boolean includeMillis,\n                                  final boolean instant, final boolean loggerFqcn, final boolean endOfBatch, final boolean loggerName, final boolean thread, final boolean threadId, final boolean threadPriority) {\n        SimpleFilterProvider filters = new SimpleFilterProvider();\n        Set&lt;String&gt; except = new HashSet(3);\n        if (!locationInfo) {\n            except.add(jacksonFactory.getPropertNameForSource());\n        }\n\n        if (!properties) {\n            except.add(jacksonFactory.getPropertNameForContextMap());\n        }\n\n        if (includeMillis) {\n            except.add(jacksonFactory.getPropertyNameForInstant());\n        } else {\n            except.add(jacksonFactory.getPropertyNameForTimeMillis());\n        }\n\n        if (!instant)           except.add(&quot;instant&quot;);\n        if (!loggerFqcn)        except.add(&quot;loggerFqcn&quot;);\n        if (!endOfBatch)        except.add(&quot;endOfBatch&quot;);\n        if (!loggerName)        except.add(&quot;loggerName&quot;);\n        if (!thread)            except.add(&quot;thread&quot;);\n        if (!threadId)          except.add(&quot;threadId&quot;);\n        if (!threadPriority)    except.add(&quot;threadPriority&quot;);\n\n        except.add(jacksonFactory.getPropertNameForNanoTime());\n        filters.addFilter(Log4jLogEvent.class.getName(), SimpleBeanPropertyFilter.serializeAllExcept(except));\n        ObjectWriter writer = jacksonFactory.newObjectMapper().writer(compact ? jacksonFactory.newCompactPrinter() : jacksonFactory.newPrettyPrinter());\n        return writer.with(filters);\n    }\n\n    public byte[] getHeader() {\n        if (!this.complete) {\n            return null;\n        } else {\n            StringBuilder buf = new StringBuilder();\n            String str = this.serializeToString(this.getHeaderSerializer());\n            if (str != null) {\n                buf.append(str);\n            }\n\n            buf.append(this.eol);\n            return this.getBytes(buf.toString());\n        }\n    }\n\n    public byte[] getFooter() {\n        if (!this.complete) {\n            return null;\n        } else {\n            StringBuilder buf = new StringBuilder();\n            buf.append(this.eol);\n            String str = this.serializeToString(this.getFooterSerializer());\n            if (str != null) {\n                buf.append(str);\n            }\n\n            buf.append(this.eol);\n            return this.getBytes(buf.toString());\n        }\n    }\n\n    public Map&lt;String, String&gt; getContentFormat() {\n        Map&lt;String, String&gt; result = new HashMap();\n        result.put(&quot;version&quot;, &quot;2.0&quot;);\n        return result;\n    }\n\n    public String getContentType() {\n        return &quot;application/json; charset=&quot; + this.getCharset();\n    }\n\n    /** @deprecated */\n//    @Deprecated\n//    public static JsonLayoutV2 createLayout(final Configuration config, final boolean locationInfo, final boolean properties, final boolean propertiesAsList, final boolean complete, final boolean compact, final boolean eventEol, final String headerPattern, final String footerPattern, final Charset charset, final boolean includeStacktrace) {\n//        boolean encodeThreadContextAsList = properties &amp;&amp; propertiesAsList;\n//        return new JsonLayoutV2(config, locationInfo, properties, encodeThreadContextAsList, complete, compact, eventEol, (String)null, headerPattern, footerPattern, charset, includeStacktrace, false, false, false, (KeyValuePair[])null, false);\n//    }\n\n    @PluginBuilderFactory\n    public static &lt;B extends Builder&lt;B&gt;&gt; B newBuilder() {\n        return (B) new Builder();\n    }\n\n    public static JsonLayoutV2 createDefaultLayout() {\n        return new JsonLayoutV2(new DefaultConfiguration(), false, false, false, false, false, false, (String)null, &quot;[&quot;, &quot;]&quot;, StandardCharsets.UTF_8, true, false, false, false, (KeyValuePair[])null, false,\n                false,false,false,false,false,false,false);\n    }\n\n    public void toSerializable(final LogEvent event, final Writer writer) throws IOException {\n        if (this.complete &amp;&amp; this.eventCount &gt; 0L) {\n            writer.append(&quot;, &quot;);\n        }\n\n        super.toSerializable(event, writer);\n    }\n\n    public static class Builder&lt;B extends Builder&lt;B&gt;&gt; extends AbstractJacksonLayout.Builder&lt;B&gt; implements org.apache.logging.log4j.core.util.Builder&lt;JsonLayoutV2&gt; {\n        @PluginBuilderAttribute\n        private boolean propertiesAsList;\n        @PluginBuilderAttribute\n        private boolean objectMessageAsJsonObject;\n        @PluginElement(&quot;AdditionalField&quot;)\n        private KeyValuePair[] additionalFields;\n\n        @PluginBuilderAttribute\n        private boolean instant;\n\n        @PluginBuilderAttribute\n        private boolean loggerFqcn;\n\n        @PluginBuilderAttribute\n        private boolean endOfBatch;\n\n        @PluginBuilderAttribute\n        private boolean loggerName;\n\n        @PluginBuilderAttribute\n        private boolean thread;\n\n        @PluginBuilderAttribute\n        private boolean threadId;\n\n        @PluginBuilderAttribute\n        private boolean threadPriority;\n\n        public Builder() {\n            this.setCharset(StandardCharsets.UTF_8);\n        }\n\n        public JsonLayoutV2 build() {\n            boolean encodeThreadContextAsList = this.isProperties() &amp;&amp; this.propertiesAsList;\n            String headerPattern = this.toStringOrNull(this.getHeader());\n            String footerPattern = this.toStringOrNull(this.getFooter());\n            return new JsonLayoutV2(this.getConfiguration(), this.isLocationInfo(), this.isProperties(), encodeThreadContextAsList, this.isComplete(), this.isCompact(), this.getEventEol(), this.getEndOfLine(), headerPattern, footerPattern, this.getCharset(), this.isIncludeStacktrace(), this.isStacktraceAsString(), this.isIncludeNullDelimiter(), this.isIncludeTimeMillis(), this.getAdditionalFields(), this.getObjectMessageAsJsonObject(),\n                    instant, loggerFqcn, endOfBatch, loggerName, thread, threadId, threadPriority);\n        }\n\n        public boolean isPropertiesAsList() {\n            return this.propertiesAsList;\n        }\n\n        public B setPropertiesAsList(final boolean propertiesAsList) {\n            this.propertiesAsList = propertiesAsList;\n            return this.asBuilder();\n        }\n\n        public boolean getObjectMessageAsJsonObject() {\n            return this.objectMessageAsJsonObject;\n        }\n\n        public B setObjectMessageAsJsonObject(final boolean objectMessageAsJsonObject) {\n            this.objectMessageAsJsonObject = objectMessageAsJsonObject;\n            return this.asBuilder();\n        }\n\n        public KeyValuePair[] getAdditionalFields() {\n            return this.additionalFields;\n        }\n\n        public B setAdditionalFields(final KeyValuePair[] additionalFields) {\n            this.additionalFields = additionalFields;\n            return this.asBuilder();\n        }\n    }\n}\n</code></pre>\n"}],"last_activity_date":1684740744,"question_id":61620495,"body":"<p>In <code>Spring Boot 2</code> application I have configured <code>Log4j2</code> with <code>JsonLayout</code> like below</p>\n\n<pre><code>    ....\n\n    &lt;Appenders&gt;\n        &lt;Console name=\"ConsoleJSONAppender\" target=\"SYSTEM_OUT\"&gt;\n            &lt;JsonLayout complete=\"false\" compact=\"false\"&gt;\n            &lt;/JsonLayout&gt;\n        &lt;/Console&gt;\n    &lt;/Appenders&gt; \n    &lt;Logger name=\"CONSOLE_JSON_APPENDER\" level=\"INFO\" additivity=\"false\"&gt;\n        &lt;AppenderRef ref=\"ConsoleJSONAppender\" /&gt;\n    &lt;/Logger&gt;\n\n    .....\n</code></pre>\n\n<p>and I got output like below</p>\n\n<pre><code>    {\n            \"timeMillis\" : 1496306649058,\n            \"thread\" : \"main\",\n            \"level\" : \"INFO\",\n            \"loggerName\" : \"ConsoleJSONAppender\",\n            \"message\" : \"Json Message\",\n            \"endOfBatch\" : false,\n            \"loggerFqcn\" : \"org.apache.logging.log4j.spi.AbstractLogger\",\n            \"threadId\" : 1,\n            \"threadPriority\" : 5\n    }\n\n</code></pre>\n\n<p>Output is fine but <strong><em>I don't want attributes like \"endofBatch\", \"threadPriority\" and others</em></strong> but it is getting displayed in logs, <strong><em>how to avoid unwanted (default) attributes in <code>JsonLayout</code> based logs</em></strong>.</p>\n"},{"comments":[{"comment_id":134518626,"body":"Encoding detection is not 100%. Also <code>ASCII</code> is a subset of <code>UTF8</code>, so there should not be any issues. Run tests to make sure things are fine. Encoding can be a headache. Everyone suggests reading <a href=\"https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/\" rel=\"nofollow noreferrer\">this</a>. Good luck!"},{"comment_id":134518678,"body":"I don&#39;t think you have to worry about your machine encoding. I think you just need to know the file encoding. If you know that, read using the file encoding. You can write to whatever encoding you like, given you do the proper conversion. I would suggest you keep using <code>UTF8</code>."},{"comment_id":134518859,"body":"It&#39;s conceivably impossible to distinguish between UTF-8 and ASCII depending on the content (because there <i>might</i> be no difference/distinction)"},{"comment_id":134518993,"body":"The <code>detectEncoding(String filePath)</code> code you&#39;ve shown will never detect file encoding as <code>new InputStreamReader(bis)</code> uses the default charset and so <code>isr.getEncoding()</code> always equals <code>Charset.defaultCharset()</code> whatever file you read, it isn&#39;t autodetected from reading the file."},{"comment_id":134519016,"body":"Problem is that in the file I have lines such as TR&#239;&#191;&#189;&#239;&#191;&#189; and on my local machine this symbol are replaced with ?? and it is important to be UTF because I create a signature based on the content of the file. The problem is that on my local machine I have a signature and on deployed machine I have another one because of ASCII encoding. When setting the encoding to UTF8 by passing as argument to the JVM than same signature is generated on both machines."},{"comment_id":134519076,"body":"You need to be looking at code that writes the file as that is what is determing the file encoding, and then use the same charset for reads."},{"comment_id":134519189,"body":"<i>Problem is that in the file I have lines such as TR&#239;&#191;&#189;&#239;&#191;&#189;</i> That <i>already</i> looks like garbage... And you don&#39;t show us <i>how</i> you&#39;re generating the sig (the read op) so it&#39;s difficult to help"},{"comment_id":134521509,"body":"Your problem is likely file <i>writing</i>, not file <i>reading</i>. Until recently, the character encoding for Java file writing defaulted to the default of the host OS. In Java 18+, <a href=\"https://openjdk.org/jeps/400\" rel=\"nofollow noreferrer\">UTF-8 is the default</a> for most purposes. I did not see any disclosure in your Question about file creation. I’m voting to close for lack of debugging details."},{"comment_id":134521618,"body":"FYI, every 8-bit US-ASCII file is also a UTF-8 file."},{"comment_id":134526329,"body":"@BasilBourque I&#39;ve added more information on the description."},{"comment_id":134526504,"body":"@BasilBourque you got me thinking: when setting <code>LineNumberReader fin = new LineNumberReader(new InputStreamReader(new FileInputStream(fileName), StandardCharsets.UTF_8))</code>, my understanding is that I read the file and I say that the chars in it should be interpreted as utf8 chars, regardless of the actual encoding of the file. I am wrong?"},{"comment_id":134527576,"body":"You&#39;re dead right. Got to say, again, that the portion I mentioned looks a bit garbagey"},{"comment_id":134527798,"body":"Also <code>String.getBytes()</code> is dangerous without specifying an encoding"},{"comment_id":134535996,"body":"For what it&#39;s worth: The <a href=\"https://www.fileformat.info/info/unicode/char/fffd/index.htm\" rel=\"nofollow noreferrer\">Unicode replacement character</a> � has a UTF-8 value of <code>0xEF 0xBF 0xBD</code>. When you attempt to display that character using ISO-8859-1, you get those three <code>&#239;</code>, <code>&#191;</code>, <code>&#189;</code> characters you mentioned in an earlier comment - because those three characters have those three bytes in ISO-8859-1 (and maybe other encodings also, such as Windows-1252). (As has already been said, your problem is likely file writing, not file reading.)"},{"comment_id":134539792,"body":"@anonimos For your last edit adding <code>encodeAsMD5</code>: of course you will get different signatures on machines with different file.encoding as <code>value.getBytes()</code> uses the platform encoding to derive the bytes that you pass on to the digest. Thats why they only match when you pass in the same character set UTF-8."}],"answers":[{"answer_id":76303863,"body":"<p>Thanks a lot for your answers. You were right, the problem was with the encoding method, specifically with <code>byte[] messageDigest = md.digest(value.getBytes());</code>. Changing the line to: <code>byte[] messageDigest = md.digest(value.getBytes(StandardCharsets.UTF_8));</code>\ndid the trick so no need for passing the encoding to the JVM.</p>\n"}],"last_activity_date":1684740401,"question_id":76282246,"body":"<p>I have a file that my java code reads inside a job and sets the encoding to be UTF8 in this line:</p>\n<pre><code>LineNumberReader fin = new LineNumberReader(new InputStreamReader(new FileInputStream(mutationInputFileName), StandardCharsets.UTF_8));\n</code></pre>\n<p>Right after this line I ckeck the encoding:         detectEncoding(mutationInputFileName);</p>\n<p>When I run the job locally on my mac, the encoding of the file is UTF8. When I run the code on the deploy machine is ASCII.\nI'm using tika to detect the file encoding:</p>\n<pre><code>public void detectEncoding(String filePath) {\n        try (FileInputStream fis = new FileInputStream(filePath);\n             BufferedInputStream bis = new BufferedInputStream(fis);\n             InputStreamReader isr = new InputStreamReader(bis)) {\n\n            String encoding = isr.getEncoding();\n            System.out.println(&quot;Detected encoding of file: &quot; + filePath + &quot; is : &quot; + encoding);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>I've added :</p>\n<pre><code>System.out.println(&quot;System encoding: &quot;+System.getProperty(&quot;file.encoding&quot;));\n</code></pre>\n<p>to see more and on my local machine it is stil utf8, on the deploy machine it is: System encoding: ANSI_X3.4-1968. The deploy machine uses linux and I'm using java 8 on both machines.</p>\n<p>Even more strange is that if in terminal I check the encoding with: file -bi text1.txt on my local machine says: &quot;regular file&quot; but on the deployed version:&quot;text/plain; charset=utf-8&quot;.\nI managed to set the encoding to be UTF8 on the deployed machine by giving</p>\n<pre><code>-Dfile.encoding=UTF-8\n</code></pre>\n<p>as arguments of the program when running the class.</p>\n<p>Any idea why LineNumberReader fin = new LineNumberReader(new InputStreamReader(new FileInputStream(mutationInputFileName), StandardCharsets.UTF_8)) doesn't set the encoding to utf-8 on the deploy machine?</p>\n<p>-- adding a bit more infos\nI am talking about same file, let's say file1.txt. I've downloaded the file from  the deploy machine. This file is created by another process that I cannot access.  The steps are:</p>\n<ol>\n<li>LineNumberReader fin = new LineNumberReader(new InputStreamReader(new FileInputStream(mutationInputFileName), StandardCharsets.UTF_8)); -- here I would expect to have the contet file in UTF8</li>\n<li>detectEncoding(mutationInputFileName);</li>\n<li>extract information from the file: using fin.lines() and String[] cols = line.split(TAB_SEPARATOR, -1); to get the columns. I'm interested in cols[0] which might have special characters such as ï¿½ï¿½.</li>\n<li>encoding the signature as md5</li>\n</ol>\n<pre><code>String signature = encodeAsMD5(signatureBeforeEncoding)\n</code></pre>\n<p>where signatureBeforeEncoding is col[0] and :</p>\n<pre><code>    public static String encodeAsMD5(String value) {\n        MessageDigest md = null;\n        try {\n            md = MessageDigest.getInstance(&quot;MD5&quot;);\n        } catch (NoSuchAlgorithmException e) {\n            throw new RuntimeException(e);\n        }\n        byte[] messageDigest = md.digest(value.getBytes());\n        BigInteger number = new BigInteger(1, messageDigest);\n        return number.toString(16);\n    }\n</code></pre>\n<p>I get different signature on local machine vs dev. I get same signature if I pass</p>\n<pre><code>-Dfile.encoding=UTF-8\n</code></pre>\n<p>as arguments of the program when running the class.</p>\n"},{"comments":[{"comment_id":134548196,"body":"Question: Does it work if you delete all local data on client reset and allow the app to re-sync to the server? (assuming the schema matches the schema on the server)"}],"answers":[{"answer_id":76303823,"body":"<p>Here is the solution I found which was nowhere mentioned. As I'm new to mongo db I had to go through lots of documentation reading but nowhere I found that when client reset occurs or if there is any issue with sync we must check logs in mongo db atlas.</p>\n<p>Logs give us the exact reason why syncing has stopped and we can fix it accordingly. After fixing my client reset code started working properly.\n<a href=\"https://i.stack.imgur.com/snvMK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/snvMK.png\" alt=\"enter image description here\" /></a></p>\n<p>Hope it helps.</p>\n"}],"last_activity_date":1684740096,"question_id":76299504,"body":"<p>Unable to perform client reset after doing schema changes using given sample in mongo db for realm android java sdk. But i was able to perform client reset after toggling sync in atlas.  The problem lies client reset not happening after breaking schema changes. Even I fixed schema.\nThis is the given sample in Mongo reference. And is there any process where we could now client reset triggers??</p>\n<pre><code>String appID = YOUR_APP_ID; // replace this with your App ID\nApp app = null;\nAtomicReference&lt;App&gt; globalApp = new AtomicReference&lt;&gt;(app);\n// accessing the app from within the lambda below requires an effectively final object\napp = new App(new AppConfiguration.Builder(appID)\n        .defaultSyncClientResetStrategy(new DiscardUnsyncedChangesStrategy() {\n            @Override\n            public void onBeforeReset(Realm realm) {\n                Log.w(&quot;EXAMPLE&quot;, &quot;Beginning client reset for &quot; + realm.getPath());\n            }\n            @Override\n            public void onAfterReset(Realm before, Realm after) {\n                Log.w(&quot;EXAMPLE&quot;, &quot;Finished client reset for &quot; + before.getPath());\n            }\n            @Override\n            public void onError(SyncSession session, ClientResetRequiredError error) {\n                Log.e(&quot;EXAMPLE&quot;, &quot;Couldn't handle the client reset automatically.&quot; +\n                        &quot; Falling back to manual client reset execution: &quot;\n                        + error.getErrorMessage());\n                // close all instances of your realm -- this application only uses one\n                globalRealm.close();\n                try {\n                    Log.w(&quot;EXAMPLE&quot;, &quot;About to execute the client reset.&quot;);\n                    // execute the client reset, moving the current realm to a backup file\n                    error.executeClientReset();\n                    Log.w(&quot;EXAMPLE&quot;, &quot;Executed the client reset.&quot;);\n                } catch (IllegalStateException e) {\n                    Log.e(&quot;EXAMPLE&quot;, &quot;Failed to execute the client reset: &quot; + e.getMessage());\n                    // The client reset can only proceed if there are no open realms.\n                    // if execution failed, ask the user to restart the app, and we'll client reset\n                    // when we first open the app connection.\n                    AlertDialog restartDialog = new AlertDialog.Builder(activity)\n                            .setMessage(&quot;Sync error. Restart the application to resume sync.&quot;)\n                            .setTitle(&quot;Restart to Continue&quot;)\n                            .create();\n                    restartDialog.show();\n                }\n                // open a new instance of the realm. This initializes a new file for the new realm\n                // and downloads the backend state. Do this in a background thread so we can wait\n                // for server changes to fully download.\n                ExecutorService executor = Executors.newSingleThreadExecutor();\n                executor.execute(() -&gt; {\n                    Realm newRealm = Realm.getInstance(globalConfig);\n                    // ensure that the backend state is fully downloaded before proceeding\n                    try {\n                        globalApp.get().getSync().getSession(globalConfig).downloadAllServerChanges(10000,\n                                TimeUnit.MILLISECONDS);\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                    Log.w(&quot;EXAMPLE&quot;,\n                            &quot;Downloaded server changes for a fresh instance of the realm.&quot;);\n                    newRealm.close();\n                });\n                // execute the recovery logic on a background thread\n                try {\n                    executor.awaitTermination(20000, TimeUnit.MILLISECONDS);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n        })\n        .build());\nglobalApp.set(app);\n</code></pre>\n"},{"comments":[{"comment_id":11089704,"body":"Could you please edit your question to include punctuation. Its really hard to understand what your question is."}],"answers":[{"answer_id":8873377,"body":"<p>Put <code>keyboard.nextLine()</code> after this line:</p>\n\n<pre><code>int answer=keyboard.nextInt();\n</code></pre>\n\n<p>This is a common problem that usually happens when you use <code>nextLine()</code> method after <code>nextInt()</code> method of <code>Scanner</code> class.</p>\n\n<p>What actually happens is that when the user enters an integer at <code>int answer = keyboard.nextInt();</code>, the scanner will take the digits only and leave the new-line character <code>\\n</code>. So you need to do a trick by calling <code>keyboard.nextLine();</code> just to discard that new-line character and then you can call <code>String input = keyboard.nextLine();</code> without any problem.</p>\n"},{"answer_id":76303761,"body":"<p>My first suggestion is to just add the entire line, split on a space, to a <code>String</code> array.<br />\nThen, assign <code>answer</code> the 0 index of the array, utilizing the <code>Integer.parseInt</code> method.</p>\n<p>Here is your code, refactored.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner keyboard = new Scanner(System.in);\nString[] strings = keyboard.nextLine().split(&quot; &quot;);\nint answer = Integer.parseInt(strings[0]);\nint left = 0, right = 0, forward = 0, back = 0;\nfor (int countA = 0; countA &lt; answer; countA++) {\n    for (String string : strings) {\n        switch (string.toLowerCase()) {\n            case &quot;left&quot; -&gt; left++;\n            case &quot;right&quot; -&gt; right++;\n            case &quot;forward&quot; -&gt; forward++;\n            case &quot;back&quot; -&gt; back++;\n        }\n    }\n}\n</code></pre>\n<p>Input</p>\n<pre class=\"lang-none prettyprint-override\"><code>10 left right back left\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>answer = 10\nstrings = [10, left, right, back, left]\nleft = 20\nright = 10\nforward = 0\nback = 10\n</code></pre>\n"}],"last_activity_date":1684739493,"question_id":8873351,"body":"<p>The problem is I cant read the variable input with next() cause when I try to split (.split\" \") every whitespace then the array just get the first two words I type so I had to use keyboard.nextLine() and the splitting process works the way it should work and I get all the words in the array but the problem is that If I use nextLine() then I have to create another keyboard object to read the first variable (answer) and that is the only way I can make it work here is the code</p>\n\n<pre><code>    Scanner keyboard=new Scanner(System.in);\n    Scanner keyboard2=new Scanner(System.in);//just to make answer word\n\n    int answer=keyboard.nextInt();//if I don't use the keyboard2 here then the program will not work as it should work, but if I use next() instead of nextLine down there this will not be a problem but then the splitting part is a problem(this variable counts number of lines the program will have).\n\n    int current=1;\n    int left=0,right=0,forward=0,back=0;\n\n    for(int count=0;count&lt;answer;count++,current++)\n    {\n        String input=keyboard.nextLine();\n        String array[]=input.split(\" \");\n        for (int counter=0;counter&lt;array.length;counter++)\n        {\n            if (array[counter].equalsIgnoreCase(\"left\"))\n            {\n                left++;\n            }\n            else if (array[counter].equalsIgnoreCase(\"right\"))\n            {     \n                right++;\n            }\n            else if (array[counter].equalsIgnoreCase(\"forward\"))\n            {\n                forward++;   \n            }\n            else if (array[counter].equalsIgnoreCase(\"back\"))\n            {     \n                back++;\n            }\n        }\n\n   }\n}\n</code></pre>\n\n<p>Thanks :)</p>\n"},{"comments":[{"comment_id":134536549,"body":"does your IDE show a warningabout the duplication?"},{"comment_id":134540194,"body":"@eduyayo no my IDE doesnt show warning"}],"answers":[{"answer_id":76296695,"body":"<p>One solution is to group together multiple mapping annotations into a custom annotation. For example, you can create an annotation for ignoring audit mappings:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Target({ElementType.METHOD})\n@Retention(RUNTIME)\n@Mapping(target = &quot;createdAt&quot;, ignore = true)\n@Mapping(target = &quot;updatedAt&quot;, ignore = true)\n@Mapping(target = &quot;createdBy&quot;, ignore = true)\n@Mapping(target = &quot;modifiedBy&quot;, ignore = true)\npublic @interface IgnoreAuditMapping {}\n</code></pre>\n<p>The annotation can be used in mappers to reduce duplication:</p>\n<pre><code>@Mapper(config = MapperConfiguration.class)\npublic interface CategoryMapper {\n    ...\n\n    @IgnoreAuditMapping\n    @Mapping(target = &quot;id&quot;, ignore = true)\n    @Mapping(target = &quot;quizzes&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.createdAt&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.updatedAt&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.createdBy&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.modifiedBy&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.id&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.quizzes&quot;, ignore = true)\n    Category toCategory(final CategoryDto categoryDto);\n\n    ...\n}\n</code></pre>\n"}],"last_activity_date":1684739239,"question_id":76292575,"body":"<p>There are ways how can I remove the same ignore mapping without reapeated @Mapping annotations on different methods, for example audit fields in one short annotation or interface like IgnoreMappingAuditionFields or other ways?\nSo what ways you can recommend for resolve this problem?</p>\n<pre><code>@Mapper(config = MapperConfiguration.class)\npublic interface CategoryMapper {\n    CategoryDto toDto(final Category category);\n\n    @Mapping(target = &quot;createdAt&quot;, ignore = true)\n    @Mapping(target = &quot;updatedAt&quot;, ignore = true)\n    @Mapping(target = &quot;createdBy&quot;, ignore = true)\n    @Mapping(target = &quot;modifiedBy&quot;, ignore = true)\n    @Mapping(target = &quot;id&quot;, ignore = true)\n    @Mapping(target = &quot;quizzes&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.createdAt&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.updatedAt&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.createdBy&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.modifiedBy&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.id&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.quizzes&quot;, ignore = true)\n    Category toCategory(final CategoryDto categoryDto);\n\n    @Mapping(target = &quot;createdAt&quot;, ignore = true)\n    @Mapping(target = &quot;updatedAt&quot;, ignore = true)\n    @Mapping(target = &quot;createdBy&quot;, ignore = true)\n    @Mapping(target = &quot;modifiedBy&quot;, ignore = true)\n    @Mapping(target = &quot;id&quot;, ignore = true)\n    @Mapping(target = &quot;quizzes&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.createdAt&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.updatedAt&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.createdBy&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.modifiedBy&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.id&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory.quizzes&quot;, ignore = true)\n    @Mapping(target = &quot;parentCategory&quot;, ignore = true)\n    @Mapping(target = &quot;childCategories&quot;, ignore = true)\n    Category toDomain(final CategoryCreationRequest categoryCreationRequest);\n}\n</code></pre>\n<p>Remove repeated fields</p>\n"},{"answers":[{"comments":[{"comment_id":134541264,"body":"Hi. That makes sense. I don&#39;t have the controlsfx.jmod, not sure it exists. I will try what you recommend when only having the .rar. Can you please add a little bit more information about the dependency part, not completely sure where to start :) I read that I don&#39;t have to pass any information about Controlsfx to JPackage?"},{"comment_id":134541319,"body":"Edit: Its working now, using what you recommended. Thank you very much."},{"comment_id":134544435,"body":"<code>jlink</code> does not require JMOD files. As long as the JAR file has a <code>module-info</code> descriptor it will work just fine. You only need a JMOD file if you want to package things like native code and licenses along with your class files in a clean manner."},{"comment_id":134544454,"body":"@droid You have <code>--add-modules javafx.controls,controlsfx</code> in your question, but the <a href=\"https://github.com/controlsfx/controlsfx/blob/0a8caa4ad2abb3dea48fecb10819ea540748e308/controlsfx/src/main/java/module-info.java#L31\" rel=\"nofollow noreferrer\">module name</a> for <i>ControlsFX</i> is <code>org.controlsfx.controls</code>."},{"comment_id":134546356,"body":"@Slaw that is useful info about jmod files, I shall amend my answer."},{"comment_id":134549288,"body":"I just tried again with the correct package name and this time JPackage runs fine and the installed program also works fine. Thanks. I learned a lot."},{"comment_id":134554839,"body":"@droid Sorry to be pedantic, but you used the wrong <b>module</b> name, not the wrong <i>package</i> name. Regardless, I&#39;m glad you got it to work :)"}],"answer_id":76295676,"body":"<p>As mentioned by @Slaw in comments below, you have used the wrong module name. You can confirm the module name of a jar by viewing the <a href=\"https://stackoverflow.com/questions/46616520/list-modules-in-jar-file/46617033#comment134547336_46617033\">module definition</a>. This tells you the name of the module to use with jpackage eg <code>org.controlsfx.controls</code> or will print <code>No module descriptor found.  Derived automatic module.</code> if a non module jar:</p>\n<pre><code>jar --file=controlsfx.jar --describe-module\norg.controlsfx.controls@11.1.2 jar:file:///c:/dev/mods/controlsfx.jar!/module-info.class\n... plus details of exports\n</code></pre>\n<p>The <code>jpackage</code> command will use <code>jlink</code> internally to build a runtime image that contains all the modules listed:</p>\n<pre><code>jpackage --input myinput --add-modules javafx.controls,org.controlsfx.controls --module-path c:\\xyz...\\javafx-jmods-NN --module-path c:\\abc...\\controlsfx.jar  --dest myoutput {otherargs}\n</code></pre>\n<p>After installation you can check which modules are in the installed runtime with:</p>\n<pre><code> C:\\Program Files\\XYZ\\runtime\\bin\\java --list-modules\n ...\n javafx.controls@somever\n ...\n org.controlsfx.controls@somever\n</code></pre>\n<p>Alternatively you can use a jar (module or non module) with <code>jpackage</code> by copying the jar into your target release structure somewhere under the <code>--input</code> directory. Then it will be picked up as a classpath jar dependency (inside the release directories) rather than as a module dependency (inside the runtime image as above).</p>\n<p>You can check if a jar was added as as classpath dependency by looking at the generated <code>{launcher}.cfg</code>, it should contain a line:</p>\n<pre><code> app.classpath=$APPDIR\\whateverplaceunder--input.dir\\controlsfx.jar\n</code></pre>\n"}],"last_activity_date":1684738866,"question_id":76295523,"body":"<p>I’m having some issues including Controlsfx when using Jpackage.</p>\n<p>I have set up a project in IntelliJ with JavaFX using a Archetype from Maven Central. Works fine with JavaFX in IntelliJ. I can package it with Maven (from IntelliJ) and use JPackage for making an exe-installer, that also works fine. I’m using this command with JPackage:</p>\n<pre><code>jpackage --input C:\\...\\target --add-modules javafx.controls --module-path C:\\...\\openjfx-20.0.1_windows-x64_bin-jmods\\javafx-jmods-20.0.1 --module-path --win-console --dest c:\\outputs --main-jar tests-1.0-SNAPSHOT.jar --main-class tests.App\n</code></pre>\n<p>Now I want to incorporate ControlsFX so I download the ControlsFX .JAR from Maven: <a href=\"https://mvnrepository.com/artifact/org.controlsfx/controlsfx/11.1.2IntelliJ\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.controlsfx/controlsfx/11.1.2IntelliJ</a>\nIn IntelliJ I add it as a Module. All fine, I wan use ControlsFX in my project.</p>\n<p>Now I want to make an exe-installer (like above without ControlsFX) so I add ControlsFX to my JPackage command:</p>\n<pre><code>jpackage --input C:\\...\\target --add-modules javafx.controls,controlsfx --module-path C:\\...\\openjfx-20.0.1_windows-x64_bin-jmods\\javafx-jmods-20.0.1 --module-path C:\\..\\controlsfx --win-console --dest c:\\test --main-jar tests-1.0-SNAPSHOT.jar --main-class tests.App\n</code></pre>\n<p>When running the command I get this:</p>\n<p>java.lang.module.FindException: Module controlsfx not found</p>\n<p>I know my issue is related to the command I pass to JPackage but cant figure out what is.</p>\n"},{"comments":[{"comment_id":133827016,"body":"Nice work! The code works, that&#39;s most important. The <code>public static void main(String[] args)</code> already is a method. But you can just rename it to whatever you want, remove the argument, and you&#39;ll have your method. It would probably be best as <code>public static String removeDiacritics(String textWithDiacritics)</code> that takes the input string as a parameter and returns the text without diacritics instead of printing it out. Then you can use that from your main method."},{"comment_id":134545723,"body":"Just a comment on &quot;normal&quot; letters-  that isn&#39;t really how things work in all languages.  In some, they think of the letter with the diacritics as a different letter.  For example, &#252; in some languages is not a u with an attachment, they are different letters and the speakers do not think of the two as being related in any way."},{"comment_id":134545733,"body":"Does this link help? <a href=\"https://www.baeldung.com/java-remove-accents-from-text\" rel=\"nofollow noreferrer\">baeldung.com/java-remove-accents-from-text</a>. It uses <code>java.text.Normalizer</code> to split the composed characters and then removes the attached accents."}],"answers":[{"answer_id":75871254,"body":"<p>There's still more to do, but the below code could give you a basic idea on how to create various methods.</p>\n<p>I separated two methods out of the original code. You could improve it still, first and foremost go ahead and create a <code>private static void printReversed()</code> method to contain the reverse-text printing code. Next, slightly more advanced and more involved would be making all the methods return something instead of directly printing out stuff (like <code>removeDiacritics()</code> does). In programming we generally frown upon methods with &quot;side-effects&quot; (like printing) and prefer pure methods that take something in, transform it and return something back, so that the calling code can do whatever it wants with it. Like printing :).</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n\n    public static void main(String... args) {\n        Scanner sc = new Scanner(System.in);\n        String input = sc.nextLine();\n        System.out.println(input);\n        System.out.println();\n\n        printStatistics(input);\n\n        char[] reversedText = input.toCharArray();\n        for (int i = (reversedText.length) - 1; i &gt;= 0; i--) {\n            System.out.print(reversedText[i]);\n        }\n        System.out.println();\n\n        String normalized = removeDiacritics(input);\n        System.out.println(normalized);\n    }\n\n    private static void printStatistics(String input) {\n        String[] sentences = input.split(&quot;\\\\. &quot;);\n\n        int sentenceCount = 0;\n        int vowelCount = 0;\n        int consonantCount = 0;\n        for (String sentence : sentences) {\n            vowelCount = 0;\n            consonantCount = 0;\n            sentenceCount++;\n            System.out.println(sentence);\n            String[] words = sentence.split(&quot; &quot;);\n            System.out.println(&quot;Number of words is &quot; + words.length);\n            String lowerCase = sentence.toLowerCase();\n            char[] chars = lowerCase.toCharArray();\n            System.out.println(&quot;Number of characters is &quot; + sentence.length());\n            for (char c : chars) {\n                if (c == 'a' || c == 'e' || c == 'i' || c == 'o' || c == 'u' || c == 'y') {\n                    vowelCount++;\n                } else if (c == 'h' || c == 'k' || c == 'r' || c == 'd' || c == 't' || c == 'n') {\n                    consonantCount++;\n                }\n            }\n            System.out.println(&quot;Number of vowels is &quot; + vowelCount);\n            System.out.println(&quot;Number of consonants is &quot; + consonantCount);\n        }\n        System.out.println();\n        System.out.println(&quot;Number of sentences is &quot; + sentenceCount);\n        System.out.println();\n    }\n\n    private static String removeDiacritics(String textWithDiacritics) {\n        char[] normalizedText = textWithDiacritics.toCharArray();\n        char[] diacritics = { 'ě', 'š', 'č', 'ř', 'ž', 'ý', 'á', 'í', 'é', 'ú', 'ů', 'Ě', 'Š', 'Č', 'Ř', 'Ž', 'Ý', 'Á', 'Í', 'É', 'Ú', 'Ů' };\n        char[] normal = { 'e', 's', 'c', 'r', 'z', 'y', 'a', 'i', 'e', 'u', 'u', 'E', 'S', 'C', 'R', 'Z', 'Y', 'A', 'I', 'E', 'U', 'U' };\n        for (int i = 0; i &lt; normalizedText.length; i++) {\n            char c = normalizedText[i];\n            int index = -1;\n            for (int j = 0; j &lt; diacritics.length; j++) {\n                if (c == diacritics[j]) {\n                    index = j;\n                    break;\n                }\n            }\n            if (index != -1) {\n                normalizedText[i] = normal[index];\n            }\n        }\n\n        return String.valueOf(normalizedText);\n    }\n}\n</code></pre>\n"},{"answer_id":76298295,"body":"<p>To replace all the diacritics with normal characters, you'll need a way to map one character to another.<br />\nIt appears you have this already, 2 separate arrays, where the index indicates the relationship.</p>\n<p>I was able to produce valid results with the following method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String replace(String string) {\n    char[] diacritics = { 'ě', 'š', 'č', 'ř', 'ž', 'ý', 'á', 'í', 'é', 'ú', 'ů', 'Ě', 'Š', 'Č', 'Ř', 'Ž', 'Ý', 'Á', 'Í', 'É', 'Ú', 'Ů' };\n    char[] normal = { 'e', 's', 'c', 'r', 'z', 'y', 'a', 'i', 'e', 'u', 'u', 'E', 'S', 'C', 'R', 'Z', 'Y', 'A', 'I', 'E', 'U', 'U' };\n    int index = 0;\n    for (char character : diacritics)\n        string = string.replace(character, normal[index++]);\n    return string;\n}\n</code></pre>\n<p>Example output</p>\n<pre class=\"lang-none prettyprint-override\"><code>exposé = expose\nlamé = lame\nmaté = mate\nrosé = rose\nrésumé = resume\n</code></pre>\n<p>I reviewed your code, and made a few changes as recommendations.<br />\nYou can replace the vowel and consonant counting procedures with regular expression pattern matching.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Scanner sc = new Scanner(System.in);\nString input = sc.nextLine();\nSystem.out.println(input);\nString[] sentences = input.split(&quot;\\\\. &quot;);\nchar[] reversedText = input.toCharArray();\nchar[] normalizedText;\nint sentenceCount = 0, vowelCount, consonantCount;\nfor (String sentence : sentences) {\n    vowelCount = consonantCount = 0;\n    sentenceCount++;\n    System.out.println(sentence);\n    String[] words = sentence.split(&quot; &quot;);\n    System.out.println(&quot;Number of words is &quot; + words.length);\n    String lowerCase = sentence.toLowerCase();\n    char[] chars = lowerCase.toCharArray();\n    System.out.println(&quot;Number of characters is &quot; + sentence.length());\n    for (char c : chars) {\n        if (String.valueOf(c).matches(&quot;[aeiouy]&quot;)) vowelCount++;\n        else if (String.valueOf(c).matches(&quot;[hkrdtn]&quot;)) consonantCount++;\n    }\n    System.out.println(&quot;Number of vowels is &quot; + vowelCount);\n    System.out.println(&quot;Number of consonants is &quot; + consonantCount);\n}\nSystem.out.println(&quot; &quot;);\nSystem.out.println(&quot;Number of sentences is &quot; + sentenceCount);\nfor (int i = (reversedText.length) - 1; i &gt;= 0; i--)\n    System.out.print(reversedText[i]);\nSystem.out.println(&quot; &quot;);\nnormalizedText = replace(input).toCharArray();\nSystem.out.println(normalizedText);\n</code></pre>\n"},{"answer_id":76303616,"body":"<p>I would rewrite your code to break out each operation into its own, unit-testable and well named, method:</p>\n<pre><code>    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        String input = sc.nextLine();\n        System.out.println(input);\n        String[] sentences = input.split(&quot; ?\\\\. ?&quot;);\n        for (String sentence : sentences) {\n            System.out.println(&quot;Number of words is &quot; + countWords(sentence));\n            System.out.println(&quot;Number of characters is &quot; + sentence.length());\n            System.out.println(&quot;Reversed is &quot; + new StringBuilder(sentence).reverse());\n            System.out.println(&quot;Diacritics removed is &quot; + removeDiacritics(sentence));\n            System.out.println(&quot;Number of vowels is &quot; + countVowels(sentence));\n            System.out.println(&quot;Number of consonants is &quot; + countConsonants(sentence));\n        }\n    }\n\n    private static final Map&lt;String, String&gt; DIACRITIC_MAPPINGS = new HashMap&lt;&gt;() {{\n        put(&quot;ě&quot;, &quot;e&quot;);\n        put(&quot;š&quot;, &quot;s&quot;);\n        put(&quot;č&quot;, &quot;c&quot;);\n        put(&quot;ř&quot;, &quot;r&quot;);\n        put(&quot;ž&quot;, &quot;z&quot;);\n        put(&quot;ý&quot;, &quot;y&quot;);\n        put(&quot;á&quot;, &quot;a&quot;);\n        put(&quot;í&quot;, &quot;i&quot;);\n        put(&quot;é&quot;, &quot;e&quot;);\n        put(&quot;ú&quot;, &quot;u&quot;);\n        put(&quot;ů&quot;, &quot;u&quot;);\n        put(&quot;Ě&quot;, &quot;E&quot;);\n        put(&quot;Š&quot;, &quot;S&quot;);\n        put(&quot;Č&quot;, &quot;C&quot;);\n        put(&quot;Ř&quot;, &quot;R&quot;);\n        put(&quot;Ž&quot;, &quot;Z&quot;);\n        put(&quot;Ý&quot;, &quot;Y&quot;);\n        put(&quot;Á&quot;, &quot;A&quot;);\n        put(&quot;Í&quot;, &quot;I&quot;);\n        put(&quot;É&quot;, &quot;E&quot;);\n        put(&quot;Ú&quot;, &quot;U&quot;);\n        put(&quot;Ů&quot;, &quot;U&quot;);\n    }};\n\n    private static final Pattern DIACRITICS = Pattern.compile('[' + String.join(&quot;&quot;, DIACRITIC_MAPPINGS.keySet()) + ']');\n\n    public static int countWords(String str) {\n        return str.trim().split(&quot; +&quot;).length;\n    }\n\n    public static int countVowels(String str) {\n        return str.replaceAll(&quot;(?i)[^aeiou]&quot;, &quot;&quot;).length();\n    }\n\n    public static int countConsonants(String str) {\n        return str.replaceAll(&quot;(?i)[ .aeiou]&quot;, &quot;&quot;).length();\n    }\n\n    public static String removeDiacritics(String str) {\n        return DIACRITICS.matcher(str).replaceAll(mr -&gt; DIACRITIC_MAPPINGS.get(mr.group()));\n    }\n}\n</code></pre>\n"}],"last_activity_date":1684738088,"question_id":75870129,"body":"<pre><code>import java.util.Scanner;\n\npublic class Main {\n            public static void main(String[] args) {\n                Scanner sc = new Scanner(System.in);\n                String input = sc.nextLine();\n                System.out.println(input);\n                String[] sentences = input.split(&quot;\\\\. &quot;);\n                char[] reversedText = input.toCharArray();\n                char[] normalizedText = input.toCharArray();\n                int sentenceCount = 0;\n                int vowelCount = 0;\n                int consonantCount = 0;\n                for (String sentence : sentences) {\n                    vowelCount = 0;\n                    consonantCount = 0;\n                    sentenceCount++;\n                    System.out.println(sentence);\n                    String[] words = sentence.split(&quot; &quot;);\n                    System.out.println(&quot;Number of words is &quot; + words.length);\n                    String lowerCase = sentence.toLowerCase();\n                    char[] chars = lowerCase.toCharArray();\n                    System.out.println(&quot;Number of characters is &quot; + sentence.length());\n                    for (char c : chars) {\n                        if (c == 'a' || c == 'e' || c == 'i' || c == 'o' || c == 'u' || c == 'y') {\n                            vowelCount++;\n                        } else if (c == 'h' || c == 'k' || c == 'r' || c == 'd' || c == 't' || c == 'n') {\n                            consonantCount++;\n                        }\n                    }\n                    System.out.println(&quot;Number of vowels is &quot; + vowelCount);\n                    System.out.println(&quot;Number of consonants is &quot; + consonantCount);\n                }\n                System.out.println(&quot; &quot;);\n                System.out.println(&quot;Number of sentences is &quot; + sentenceCount);\n                for (int i = (reversedText.length) - 1; i &gt;= 0; i--) {\n                    System.out.print(reversedText[i]);\n                }\n                System.out.println(&quot; &quot;);\n                char[] diacritics = {'ě', 'š', 'č', 'ř', 'ž', 'ý', 'á', 'í', 'é', 'ú', 'ů', 'Ě', 'Š', 'Č', 'Ř', 'Ž', 'Ý', 'Á', 'Í', 'É', 'Ú', 'Ů' };\n                char[] normal = {'e', 's', 'c', 'r', 'z', 'y', 'a', 'i', 'e', 'u', 'u', 'E', 'S', 'C', 'R', 'Z', 'Y', 'A', 'I', 'E', 'U', 'U' };\n                for (int i = 0; i &lt; normalizedText.length; i++) {\n                    char c = normalizedText[i];\n                    int index = -1;\n                    for (int j = 0; j &lt; diacritics.length; j++) {\n                        if (c == diacritics[j]) {\n                            index = j;\n                            break;\n                        }\n                    }\n                    if (index != -1) {\n                        normalizedText[i] = normal[index];\n                    }\n                }\n\n                System.out.println(normalizedText);\n\n            }}\n</code></pre>\n<p>I was working with Strings.\nCan someone show me how to do this with a method? Also please point out things that are wrong with my code in general.</p>\n<p>I was trying to replace all of the diacritics, with &quot;normal&quot; text, this is what I came up with, but it´s not a method but done manually.</p>\n"},{"comments":[{"comment_id":134549827,"body":"You need to attach the javadocs when building your artifact in its Pom.xml. Then they go together in the maven repository b"},{"comment_id":134550025,"body":"When I build my project, it produces two JAR files. How do I attach the javadocs JAR to the artifact?"}],"answers":[{"comments":[{"comment_id":134550094,"body":"I don&#39;t think this would work in this situation because the library I need Javadocs for is a local one that I made in another project. I just tried this and it indicates that my library has not been resolved."},{"comment_id":134550111,"body":"what means &quot;local one&quot; ? (is it released to a maven repo? or <code>&lt;scope&gt;system&lt;&#47;scope&gt;</code>!? ;("},{"comment_id":134550180,"body":"It is <code>&lt;scope&gt;system&lt;&#47;scope&gt;</code>, yes."},{"comment_id":134550290,"body":"for long term: you have to &quot;mavenize&quot; this! (install/deploy it (with sources and javadoc!) to local/repo), to quickly work in ide..: see screenshot ;)"},{"comment_id":134550358,"body":"Thank you for pointing me in the right direction! I ended up &quot;mavenizing&quot; my library by deploying the library + javadoc to a local repository (.m2 directory), and adding that path into my <code>pom.xml</code> repositories. I also removed the <code>&lt;scope&gt;system&lt;&#47;scope&gt;</code>. Javadocs are working now even after Maven reloads."}],"answer_id":76301015,"body":"<p>Pure Maven (good IDEs should recognize these):</p>\n<pre class=\"lang-bash prettyprint-override\"><code>mvn dependency:resolve -Dclassifier=javadoc\n</code></pre>\n<p>Ref: <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/resolve-mojo.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugins/maven-dependency-plugin/resolve-mojo.html</a></p>\n<p>Notes: It's rather unusual (unless explicitly ordered) to &quot;package&quot; (dependency) javadocs with the main artifact... In maven, &quot;we&quot; rather maintain (own!) artifacts for &quot;main&quot;/sources/and javadocs (See: <a href=\"https://maven.apache.org/repository/guide-central-repository-upload.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/repository/guide-central-repository-upload.html</a>)</p>\n<p>As mentioned, good IDEs should be capable of processing the &quot;local repository&quot; for javadoc (and source) artifacts of undrlying dependencies.</p>\n<p>To &quot;download sources&quot; use:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>mvn dependency:sources\n</code></pre>\n<p>Ref: <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/sources-mojo.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugins/maven-dependency-plugin/sources-mojo.html</a> ;)</p>\n<hr />\n<p>When your (remote) Repository does not comply with &quot;central requirements&quot; (has no &quot;source&quot; and &quot;javadoc&quot; artifacts attached),\nalso to eliminate (any) <code>&lt;scope&gt;system&lt;/scope&gt;</code> dependency, I would strongly recommend (to &quot;mavenize&quot; the dependencies and) install/deploy sources and javadocs artifacts for this:</p>\n<ul>\n<li>locally with: <code>mvn install:install ...</code></li>\n<li>to a &quot;repo&quot;: <code>mvn deploy:...</code></li>\n</ul>\n<p>For &quot;mavenize&quot; refer to:</p>\n<ul>\n<li>locally: <a href=\"https://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/guides/mini/guide-3rd-party-jars-local.html</a></li>\n<li>for &quot;deployments&quot;: <a href=\"https://maven.apache.org/guides/mini/guide-3rd-party-jars-remote.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/guides/mini/guide-3rd-party-jars-remote.html</a></li>\n</ul>\n<p>Specifically for sources and javadocs artifacts (once you have/generate these):</p>\n<ul>\n<li>deploy: <a href=\"https://maven.apache.org/plugins/maven-deploy-plugin/examples/deploying-sources-javadoc.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugins/maven-deploy-plugin/examples/deploying-sources-javadoc.html</a></li>\n<li>accordingly with &quot;install-file&quot;</li>\n</ul>\n<hr />\n<p>The &quot;pure IDE&quot; way, would be to link to the (external!) sources/javadocs (in file system/zip/jar archive):\n... See screenshot:</p>\n<p><a href=\"https://i.stack.imgur.com/C7GsK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C7GsK.png\" alt=\"screenshot\" /></a></p>\n<ul>\n<li><code>com.example:my-dep:0.0.1-SNAPSHOT</code> is my (fake) <code>system</code> scoped dependency.</li>\n<li>After &quot;applying&quot; changes and confirming the warn dialog (iml vs pom, re-import...), IntelliJ should recoginze javadocs and sources.</li>\n<li>According to the warning our &quot;modifications&quot; get lost in case of a &quot;maven re-import&quot;.</li>\n</ul>\n"},{"answer_id":76301182,"body":"<p>There is a more general maven-style way and should be preferred over the &quot;IDE way&quot;. You can use a local &quot;fake&quot; repository inside your project. Add the jar files to your repo. The maven call depends on the type of the jar.</p>\n<p><strong>The jar:</strong></p>\n<pre><code>mvn deploy:deploy-file \\\n  -DgroupId=org.example \\\n  -DartifactId=mylib\\\n  -Dversion=1.1 \\\n  -Dfile=/path/to/mylib-1.1.jar \\\n  -Dpackaging=jar \\\n  -Durl=file://path/to/your-project/fake-repo\n</code></pre>\n<p><strong>The sources:</strong></p>\n<pre><code>mvn deploy:deploy-file \\\n  -DgroupId=org.example \\\n  -DartifactId=mylib\\\n  -Dversion=1.1 \\\n  -Dfile=/path/to/mylib-1.1-sources.jar \\\n  -Dpackaging=jar \\\n  -Durl=file://path/to/your-project/fake-repo \\\n  -Dclassifier=sources\n</code></pre>\n<p><strong>The javadoc:</strong></p>\n<pre><code>mvn deploy:deploy-file \\\n  -DgroupId=org.example \\\n  -DartifactId=mylib\\\n  -Dversion=1.1 \\\n  -Dfile=/path/to/mylib-1.1-javadoc.jar \\\n  -Dpackaging=jar \\\n  -Durl=file://path/to/your-project/fake-repo \\\n  -Dclassifier=javadoc\n</code></pre>\n<p>The next step is adding the repo and the dependency to your pom:</p>\n<pre><code>&lt;repositories&gt;\n  &lt;repository&gt;\n    &lt;id&gt;fake-repo&lt;/id&gt;\n    &lt;name&gt;Just a fake repository.&lt;/name&gt;\n    &lt;url&gt;file://${project.basedir}/fake-repo&lt;/url&gt;\n  &lt;/repository&gt;\n&lt;/repositories&gt;\n\n&lt;dependencies&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;mylib&lt;/artifactId&gt;\n    &lt;version&gt;1.1&lt;/version&gt;\n  &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n"}],"last_activity_date":1684737896,"question_id":76300711,"body":"<p>I am making a local Java utility library and building it into a JAR file. I am also building a JAR file for the Javadocs.</p>\n<p>These are the JAR files generated by Maven:</p>\n<p><a href=\"https://i.stack.imgur.com/G3hzP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G3hzP.png\" alt=\"inside target/ directory, JAR files called redacted-libraries-0.0.1.jar and redacted-libraries-0.0.1-javadocs.jar\" /></a></p>\n<p>Now, I am trying to use the Javadocs JAR file with IntelliJ IDEA by importing it in File &gt; Project Structure, and it works. I get hints and documentation for code references in my IDE. But as soon as I reload my Maven project, the Javadocs are gone and I have to manually add it back.</p>\n<p>I am also getting this warning from IntelliJ everytime I add the Javadoc JAR file back.</p>\n<p><a href=\"https://i.stack.imgur.com/Ptmzo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ptmzo.png\" alt=\"Library 'Maven:com.redacted-library.0.0.1' is imported from Maven. Any changes made in its configuration might be lost after reimporting.\" /></a></p>\n<p>What is the proper way of adding a Javadoc JAR file into a Maven project?</p>\n"},{"answers":[{"answer_id":76291918,"body":"<p>How about using shutdown hook?\nIt could be like this:</p>\n<pre><code>Thread printStackTracesOnShutdownHook = new Thread(() -&gt; {\n    LOG.info(&quot;Shutdown hook called&quot;);\n    for (Map.Entry&lt;Thread, StackTraceElement[]&gt; pair : \n             Thread.getAllStackTraces().entrySet()) {\n        LOG.info(pair.getKey() + &quot; : &quot; + Arrays.toString(pair.getValue()));\n    }\n});\n\nRuntime.getRuntime().addShutdownHook(printStackTracesOnShutdownHook);\n</code></pre>\n<p>You can add this code somewhere in your application (where it will be executed). Then on shutdown <code>printStackTracesOnShutdownHook</code> will write to logs all stackTraces. And you will be able to find from these stackTraces where <code>System.exit()</code> was called.</p>\n"}],"last_activity_date":1684737862,"question_id":76290683,"body":"<p>I think there is a way to do this with <code>SecurityManager</code>, but I don't want to introduce it in an App just for this.</p>\n<p>Is there a way to catch and log stacktrace of what called exit() using some other solution?</p>\n"},{"comments":[{"comment_id":131708869,"body":"Sounds like a Spring lib issue vs an AWS issue."},{"comment_id":131743512,"body":"@smac2020 thx for the comment. As I understand still there is no update for aws in spring. So just waiting for that"}],"answers":[{"answer_id":74789039,"body":"<p>Thanks for bringing this to our attention.</p>\n<p>There is an issue with the latest version of Spring since it is using Jakarta instead of javax.</p>\n<p>I will add this as a work item for us.</p>\n"},{"answer_id":76303589,"body":"<p>This is fixed in latest upgrade.<br />\nYou need to import com.amazonaws:aws-xray-recorder-sdk-core:2.14.0\nand other related libraries</p>\n"}],"last_activity_date":1684737800,"question_id":74616492,"body":"<p>I'm working in a project and right now I'm migrating the project to Spring 3.0. So I made some changes in some classes. I can not share the classes because of the job rules but this class about the AwsXrayConfig class. And using filter. But when I try to build project I'm getting this &quot;cannot access javax.servlet.Filter&quot; error. In the class I already updated javax to jakarta but AWSXRayServletFilter still using com.amazon.xray.javax.servlet.AWSXRayServletFilter library. So I'm stuck here. Also I'm not sure about looking the true place? Is that about jakarta or spring or aws libraries I''m not sure. Any ideas? Thx</p>\n<p>I already removed import part about AWSXRayServletFilter but it's complaining. I changed javax.servlet.Filter to jakarta.servlet.Filter. Thats it</p>\n"},{"answers":[{"answer_id":76303562,"body":"<p><code>Settings.canDrawOverlays(currentAct)</code> is a way to check if you can get draw overlay permission or not. In Go devices, it'll always return false as it uses excessive memory, so you simply cannot allow that permission in Go devices.</p>\n<p>And for some special use cases, permission will be granted automatically regardless of an android version of the device. Explained here in detail as you mentioned - <a href=\"https://developer.android.com/about/versions/11/privacy/permissions#system_alert_autogrant\" rel=\"nofollow noreferrer\">Overlay permission changes</a></p>\n"}],"last_activity_date":1684737547,"question_id":76262369,"body":"<p>Hi I am working on a taxi driver application , in which I need to keep the driver online and app in background , I asked MANAGE_OVERLAY_PERMISSION as runtime permission . but in some devices (in Go edition , android 11) it shows 'feature not available' alert . I have read the <a href=\"https://developer.android.com/about/versions/10/behavior-changes-all#sysalert-go\" rel=\"nofollow noreferrer\">developer doc</a> and could find the reason . <strong>now my requirement is to ask MANAGE_OVERLAY_PERMISSION  runtime permission alert to the devices which support this feature</strong> . <strong>Which condition should I use to differentiate it?</strong></p>\n<p>Here is my code .</p>\n<pre><code>*if (//TODO Condition to check whether this feature is available on device?) {*  \n                         if (!Settings.canDrawOverlays(currentAct)) {\n                             checkForOverlay(activity); //asking permission for popup\n                         }\n\n                }\n</code></pre>\n<p>Also I read draw over permission removed for Version Q and higher it will be granted to apps automatically <a href=\"https://developer.android.com/about/versions/11/privacy/permissions#system_alert_autogrant\" rel=\"nofollow noreferrer\">here</a> , but it is not granting automatically.</p>\n<p>I tried <code>activityManager.isLowRamDevice()</code> , but I dont think it is right solution.</p>\n<p>how can I resolve these issues.</p>\n"},{"answers":[{"comments":[{"comment_id":31520139,"body":"Some versions of <code>su</code> will take the arguments on the command line, so you could e.g. <code>exec(&quot;su -c screenrecord &#47;sdcard&#47;foo.mp4&quot;)</code>."},{"comment_id":59525276,"body":"is it possible to do the recording without root access?"},{"comment_id":76430999,"body":"big thank you for this snippet, and just to add what I missed in this post is that <b>there has to be an <code>\\n</code></b> at the end of the command string"},{"comment_id":80727108,"body":"it has returned below error.  Error running exec(). Command: <a href=\"https://superuser.com\">Super User</a> Working Directory: null Environment: null"},{"comment_id":88573770,"body":"You need to have <code>su</code> in your execution path <code>&#47;system&#47;bin</code>. @Hendra"},{"comment_id":102691350,"body":"i run these code and get <code>su error=13, permission denied</code>, does it need root privilege?"},{"comment_id":103077413,"body":"it only works with root access ? does any method work without root ?"}],"answer_id":20932225,"body":"<p>You should grab the standard input of the <code>su</code> process just launched and write down the command there, otherwise you are running the commands with the current <code>UID</code>.</p>\n\n<p>Try something like this:</p>\n\n<pre><code>try{\n    Process su = Runtime.getRuntime().exec(\"su\");\n    DataOutputStream outputStream = new DataOutputStream(su.getOutputStream());\n\n    outputStream.writeBytes(\"screenrecord --time-limit 10 /sdcard/MyVideo.mp4\\n\");\n    outputStream.flush();\n\n    outputStream.writeBytes(\"exit\\n\");\n    outputStream.flush();\n    su.waitFor();\n}catch(IOException e){\n    throw new Exception(e);\n}catch(InterruptedException e){\n    throw new Exception(e);\n}\n</code></pre>\n"},{"comments":[{"comment_id":98378512,"body":"You sir, rock. Yes."}],"answer_id":26654728,"body":"<p>A modification of the code by @CarloCannas:</p>\n\n<pre><code>public static void sudo(String...strings) {\n    try{\n        Process su = Runtime.getRuntime().exec(\"su\");\n        DataOutputStream outputStream = new DataOutputStream(su.getOutputStream());\n\n        for (String s : strings) {\n            outputStream.writeBytes(s+\"\\n\");\n            outputStream.flush();\n        }\n\n        outputStream.writeBytes(\"exit\\n\");\n        outputStream.flush();\n        try {\n            su.waitFor();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        outputStream.close();\n    }catch(IOException e){\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>(You are welcome to find a better place for <em>outputStream.close()</em>)</p>\n\n<p>Usage example:</p>\n\n<pre><code>private static void suMkdirs(String path) {\n    if (!new File(path).isDirectory()) {\n        sudo(\"mkdir -p \"+path);\n    }\n}\n</code></pre>\n\n<p><strong>Update:</strong>\nTo get the result (the output to stdout), use:</p>\n\n<pre><code>public static String sudoForResult(String...strings) {\n    String res = \"\";\n    DataOutputStream outputStream = null;\n    InputStream response = null;\n    try{\n        Process su = Runtime.getRuntime().exec(\"su\");\n        outputStream = new DataOutputStream(su.getOutputStream());\n        response = su.getInputStream();\n\n        for (String s : strings) {\n            outputStream.writeBytes(s+\"\\n\");\n            outputStream.flush();\n        }\n\n        outputStream.writeBytes(\"exit\\n\");\n        outputStream.flush();\n        try {\n            su.waitFor();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        res = readFully(response);\n    } catch (IOException e){\n        e.printStackTrace();\n    } finally {\n        Closer.closeSilently(outputStream, response);\n    }\n    return res;\n}\npublic static String readFully(InputStream is) throws IOException {\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    byte[] buffer = new byte[1024];\n    int length = 0;\n    while ((length = is.read(buffer)) != -1) {\n        baos.write(buffer, 0, length);\n    }\n    return baos.toString(\"UTF-8\");\n}\n</code></pre>\n\n<p>The utility to silently close a number of Closeables (<a href=\"https://stackoverflow.com/a/29825740/755804\">Soсket may be no Closeable</a>) is:</p>\n\n<pre><code>public class Closer {\n// closeAll()\npublic static void closeSilently(Object... xs) {\n    // Note: on Android API levels prior to 19 Socket does not implement Closeable\n    for (Object x : xs) {\n        if (x != null) {\n            try {\n                Log.d(\"closing: \"+x);\n                if (x instanceof Closeable) {\n                    ((Closeable)x).close();\n                } else if (x instanceof Socket) {\n                    ((Socket)x).close();\n                } else if (x instanceof DatagramSocket) {\n                    ((DatagramSocket)x).close();\n                } else {\n                    Log.d(\"cannot close: \"+x);\n                    throw new RuntimeException(\"cannot close \"+x);\n                }\n            } catch (Throwable e) {\n                Log.x(e);\n            }\n        }\n    }\n}\n}\n</code></pre>\n"},{"comments":[{"comment_id":112648008,"body":"I am not able to launch application using above command executer <code>am start -n com.qop.tabletApp.activity.ConfigurationAndSetup</code>"}],"answer_id":27885984,"body":"<pre><code>Process p;\nStringBuffer output = new StringBuffer();\ntry {\n    p = Runtime.getRuntime().exec(params[0]);\n    BufferedReader reader = new BufferedReader(\n            new InputStreamReader(p.getInputStream()));\n    String line = \"\";\n    while ((line = reader.readLine()) != null) {\n        output.append(line + \"\\n\");\n        p.waitFor();\n    }\n} \ncatch (IOException e) {\n    e.printStackTrace();\n} catch (InterruptedException e) {\n    e.printStackTrace();\n}\nString response = output.toString();\nreturn response;\n</code></pre>\n"},{"answer_id":74777171,"body":"<p>Late reply, but it will benefit someone. You can use the <code>sh</code> command in the <code>exec()</code> method.\nHere is my example:</p>\n<pre><code>try {\n    File workingDirectory = new File(getApplicationContext().getFilesDir().getPath());\n    Process shProcess = Runtime.getRuntime().exec(&quot;sh&quot;, null, workingDirectory);\n    try{\n        PrintWriter outputExec = new PrintWriter(new OutputStreamWriter(shProcess.getOutputStream()));\n        outputExec.println(&quot;PATH=$PATH:/data/data/com.bokili.server.nginx/files;export LD_LIBRARY_PATH=/data/data/com.bokili.server.nginx/files;nginx;exit;&quot;);\n        outputExec.flush();\n    } catch(Exception ignored){  }\n    shProcess.waitFor();\n} catch (IOException ignored) {\n} catch (InterruptedException e) {\n    try{ Thread.currentThread().interrupt(); }catch(Exception ignored){}\n} catch (Exception ignored) { }\n</code></pre>\n<p>What have I done with this?\nFirst I call the <code>shell</code>, then I change (set) the necessary environments in it, and finally I start my nginx with it.</p>\n<p>This works on unrooted devices too.</p>\n<p>Greetings.</p>\n"},{"answer_id":76303532,"body":"<p>another solution launch app from android linux shell:<br></p>\n<pre><code>am start -n [your package]/.MainActivity\n</code></pre>\n<p>according\n<a href=\"https://falsinsoft.blogspot.com/2015/05/launch-app-from-android-shell-terminal.html\" rel=\"nofollow noreferrer\">Launch an app from Android shell terminal\n</a></p>\n"}],"last_activity_date":1684737140,"question_id":20932102,"body":"<p>I'm trying to execute this command from the application emulator terminal (you can find it in google play) in this app i write <code>su</code> and press <kbd>enter</kbd>, so write:</p>\n\n<p><code>screenrecord --time-limit 10 /sdcard/MyVideo.mp4</code> </p>\n\n<p>and press again <kbd>enter</kbd> and start the recording of the screen using the new function of android kitkat.</p>\n\n<p>so, i try to execute the same code from java using this:</p>\n\n<pre><code>Process su = Runtime.getRuntime().exec(\"su\");\nProcess execute = Runtime.getRuntime().exec(\"screenrecord --time-limit 10 /sdcard/MyVideo.mp4\");\n</code></pre>\n\n<p>But don't work because the file is not created. obviously i'm running on a rooted device with android kitkat installed. where is the problem? how can i solve? because from terminal emulator works and in Java not?</p>\n"},{"comments":[{"comment_id":85867871,"body":"Have you tried ?"},{"comment_id":85867891,"body":"You should not do this.  A better bet would be to use a JVM that allows hot redeploy."},{"comment_id":85868039,"body":"An Idea would be an OSGI environment like Apache Felix or Equinox. These enable dynamic loading, starting and stopping of soocalled bundles etc."},{"comment_id":85868063,"body":"So people and/or automated testing runs 24/7?  There is no time slice to update the server?  Which is more important: deploy fixed defects or keep the environment up?"},{"comment_id":85868152,"body":"actually its a small teating environment and almost no scope for OSGI, Apache Flex.  seems the requirement is to write a java program to dovthe job ...         will that be possible ?"},{"comment_id":85868753,"body":"Why would a deploy/restart of a small test environment be so disruptive?  How much time, 5 minutes?  Over lunch?  Scheduled at night?  Assuming it is possible, would it be acceptable to have the test environment not as close as the production environment?"},{"comment_id":85941980,"body":"consider multiple nodes + rolling restarts"}],"answers":[{"answer_id":49433170,"body":"<p>No you cannot, you would need to have the container on the server side. Although for your server like tomcat, jboss, websphere etc. you can configure them to hot deploy but the server side would still needs restart once new class file is placed. If you are trying to hot deploy a class file you can try using JRebel it will allow you to hot deploy the class file without actually restarting because it is managed within JRebel container. (also note that JRebel is not free)</p>\n"},{"comments":[{"comment_id":134554506,"body":"While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/low-quality-posts/34425723\">From Review</a>"}],"answer_id":76303318,"body":"<p>There are quite a few solutions/plugins which help you with hot-deployment of java code saving you with complete build and server restart. I had used jRebel earlier available at <a href=\"https://www.jrebel.com/products/jrebel\" rel=\"nofollow noreferrer\">https://www.jrebel.com/products/jrebel</a>. There are other such solutions/tools that can help you with the hot deployment.</p>\n"}],"last_activity_date":1684737139,"question_id":49432964,"body":"<p>I need a java/j2ee program, that will load an updated class file when the server is still on. In our Web Application testing environment few classes(Java files) are being frequently changed to fix defects and need to load them in JVM fresh.\nWe can not restart the server to impact on going testing .</p>\n\n<p>Can we write a program to load it using class loader?</p>\n"},{"answers":[{"comments":[{"comment_id":134551252,"body":"I have still the same error"},{"comment_id":134551372,"body":"Verify that the vinService dependency is used within the CarService class, check your dependencies in gradle/maven too."},{"comment_id":134554641,"body":"I found possible reason. Inside test class I am initializing CarService in additional method: carService = new CarService(vinService) and vinService = new VinService(anotherService). So I have real object and @Mock. I suppose in this case it is not possible to use verify method because it can be probably used only on Mock."},{"comment_id":134554737,"body":"Updated my comment. Just mock Class inside the test. and your test will use this mock."}],"answer_id":76301111,"body":"<p>Actually, it`s very simple. You just need to use <strong>@InjectMocks</strong> instead <strong>@Mock</strong> for the service that you are testing:</p>\n<pre><code>@InjectMocks\nprivate CarService carService;\n</code></pre>\n<p>This annotation says that Mockito will properly inject all mocks into your service(VinService into CarService).</p>\n<p><strong>Updated for comment</strong>\nif you have somewhere initializing your service then you can easily add your mock inside test.</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\n    public class CarServiceTest {\n\n        private static final String VIN = &quot;1G100000000000000&quot;\n\n        @InjectMocks\n        private CarService carService;\n\n        @Test\n        void vinShouldBeCheckedSuccessfully() {\n            VinService vinService = Mockito.mock(VinService.class);\n\n            //when\n            carService.checkCar(VIN);\n\n            //then\n            Mockito.verify(vinService, Mockito.times(1)).checkVIN(\n                Mockito.anyList(),\n                Mockito.anyString(),\n                Mockito.any()); // Consumer parameter\n        }\n    }\n</code></pre>\n"}],"last_activity_date":1684736951,"question_id":76300968,"body":"<p>My first steps with unit tests and Mockito. I would like to use verify() method to check if it was called once.</p>\n<pre><code>public class CarService {\n\n    private final VinService vinService;\n\n    public void checkCar(String VIN) {\n        (here there is some business logic like:create list, pass the VIN, and add Consumer)\n\n        vinService.checkVin(list, VIN, consumer); //checkVin inside VinService.class is also void\n    }\n}\n\n@ExtendWith(MockitoExtension.class)\npublic class CarServiceTest {\n\n    private static final String VIN = &quot;1G100000000000000&quot;\n\n    @Mock\n    private CarService carService;\n\n    @Mock\n    private VinService vinService;\n\n    @Test\n    void vinShouldBeCheckedSuccessfully() {\n\n        //when\n        carService.checkCar(VIN);\n\n        //then\n        Mockito.verify(vinService, Mockito.times(1)).checkVIN(\n                Mockito.anyList(),\n                Mockito.anyString(),\n                Mockito.any()); // Consumer parameter\n    }\n}\n</code></pre>\n<p>However I am getting the error:</p>\n<pre><code> org.mockito.exceptions.misusing.NotAMockException: \n    Argument passed to verify() is of type VinService and is not a mock!\n    Make sure you place the parenthesis correctly!\n    See the examples of correct verifications:\n        verify(mock).someMethod();\n        verify(mock, times(10)).someMethod();\n        verify(mock, atLeastOnce()).someMethod();\n</code></pre>\n<p>Could you help me to understand why?</p>\n"},{"comments":[{"comment_id":134554724,"body":"So you are sure the player used with the method is the right one? Because I don&#39;t see issue myself"},{"comment_id":134555625,"body":"Yeah im sure. I have no idea why its not working."},{"comment_id":134556659,"body":"Can you show the first call of those method? Like part of event or command"},{"comment_id":134557335,"body":"You mean like how it starts? it starts when you join the game or type /gui. It checks if you&#39;re a bedrock player thats joining first."},{"comment_id":134558124,"body":"Ok, and you&#39;re simply doing <code>CentoriUI23.getInstance().ui_screen_market(playerThatRanComm&zwnj;&#8203;and)</code> ?"},{"comment_id":134562676,"body":"uh not really lol."}],"last_activity_date":1684736868,"question_id":76274261,"body":"<p>I'm currently working on a plugin that includes a marketplace feature where players can open a GUI to browse and purchase items from other players. I have a method called <code>ui_screen_market</code> that displays a list of player names as buttons, and when a player clicks on a button, it should open a new GUI with the items that the corresponding player is selling. However, I'm facing an issue where clicking on a username in the ui_screen_market GUI opens another person's screen instead of the expected player's shop GUI.</p>\n<p>I have tried debugging the code and verifying the values being passed to the methods, but I couldn't find any obvious mistakes. I suspect there might be an issue with how I'm handling the button clicks or accessing the player's data.</p>\n<p>Expected behavior:</p>\n<p>Clicking on a player's name in the ui_screen_market GUI should open a new GUI displaying the items that the corresponding player is selling.</p>\n<p>Actual behavior:</p>\n<p>Clicking on a player's name in the ui_screen_market GUI opens another person's shop GUI instead of the expected player's shop GUI.</p>\n<p>Full code: <a href=\"https://pastebin.com/3Vffumk3\" rel=\"nofollow noreferrer\">https://pastebin.com/3Vffumk3</a></p>\n<p>Method with issue:</p>\n<pre><code>public void ui_screen_market_create(Player player) {\n    FloodgatePlayer floodgatePlayer = floodgateApi.getPlayer(player.getUniqueId());\n    if (floodgatePlayer != null) {\n        floodgatePlayer.sendForm(CustomForm.builder()\n                .title(&quot;Centori UI / MARKET / CREATE&quot;)\n                .input(&quot;Shop name&quot;)\n                .toggle(&quot;Confirm shop creation&quot;)\n                .validResultHandler(response -&gt; {\n                    player.sendMessage(&quot;Shop creation in progress...&quot;);\n                    boolean toggleValue = response.asToggle(1);\n                    String inputValue = response.asInput(0);\n                    if (toggleValue) {\n                        Plugin plugin = Bukkit.getPluginManager().getPlugin(&quot;CentoriUI23&quot;);\n                        assert plugin != null;\n                        File directory = new File(plugin.getDataFolder(), &quot;bdata/&quot; + floodgatePlayer.getUsername());\n                        boolean exists = directory.exists();\n\n                        if (exists) {\n                            player.sendMessage(&quot;An error occurred. Your shop might already exist.&quot;);\n                        } else {\n                            if (directory.mkdirs()) {\n                                File file = new File(directory, &quot;shops.json&quot;);\n                                try (FileWriter writer = new FileWriter(file)) {\n                                    writer.write(&quot;{\\n   'shop-name': '&quot; + inputValue + &quot;' \\n }&quot;);\n                                    writer.flush();\n                                    player.sendMessage(&quot;Shop created with name: &quot; + inputValue);\n                                } catch (IOException e) {\n                                    e.printStackTrace();\n                                    player.sendMessage(&quot;Something went wrong while creating the shop. Please open a ticket in Discord.&quot;);\n                                    System.err.println(&quot;Failed to write to file: &quot; + file.getAbsolutePath());\n                                }\n                            } else {\n                                player.sendMessage(&quot;Something went wrong while creating the directory. Please open a ticket in Discord.&quot;);\n                                System.err.println(&quot;Failed to create the directory: &quot; + directory.getAbsolutePath());\n                            }\n                        }\n                    } else {\n                        player.sendMessage(&quot;Shop creation has been canceled&quot;);\n                    }\n                })\n                .closedOrInvalidResultHandler(response -&gt; {\n                    player.sendMessage(&quot;Form closed or invalid&quot;);\n                })\n                .build());\n    }\n}\npublic void ui_screen_market(Player player) {\n    FloodgatePlayer floodgatePlayer = floodgateApi.getPlayer(player.getUniqueId());\n    if (floodgatePlayer != null) {\n        List&lt;String&gt; shopNames = new ArrayList&lt;&gt;();\n\n        Plugin plugin = Bukkit.getPluginManager().getPlugin(&quot;CentoriUI23&quot;);\n        assert plugin != null;\n        File bdataFolder = new File(plugin.getDataFolder(), &quot;bdata&quot;);\n        File[] shopDirectories = bdataFolder.listFiles();\n\n        if (shopDirectories != null) {\n            for (File directory : shopDirectories) {\n                if (directory.isDirectory()) {\n                    shopNames.add(directory.getName());\n                }\n            }\n        }\n\n        if (!shopNames.isEmpty()) {\n            SimpleForm.Builder formBuilder = SimpleForm.builder()\n                    .title(&quot;Centori UI / MARKET TEST&quot;)\n                    .button(&quot;Go Back&quot;)\n                    .button(&quot;Create shop&quot;)\n                    .button(&quot;Delete shop&quot;)\n                    .button(&quot;Add item to your shop&quot;)\n                    .validResultHandler(response -&gt; {\n                        int clickedButtonId = response.getClickedButtonId();\n                        if (clickedButtonId == 0) {\n                            ui_screen_join_main(player);\n                        } else if (clickedButtonId == 1) {\n                            ui_screen_market_create(player);\n                        } else if (clickedButtonId &gt;= 3) {\n                            String clickedShopName = shopNames.get(clickedButtonId - 3);\n                            openPlayerItemsGUI(player, clickedShopName); // Updated method call\n                        }\n                    })\n                    .closedOrInvalidResultHandler(response -&gt; {\n                        player.sendMessage(&quot;Form closed or invalid&quot;);\n                    });\n\n            for (String shopName : shopNames) {\n                formBuilder.button(shopName);\n            }\n\n            floodgatePlayer.sendForm(formBuilder.build());\n        } else {\n            player.sendMessage(&quot;No shops found.&quot;);\n        }\n    }\n}\n\n\n\n\n\npublic void ui_screen_market_add(Player player) {\n    FloodgatePlayer floodgatePlayer = floodgateApi.getPlayer(player.getUniqueId());\n    if (floodgatePlayer != null) {\n        floodgatePlayer.sendForm(CustomForm.builder()\n                .title(&quot;Centori UI / MARKET / ADD&quot;)\n                        .input(&quot;Enter Price&quot;)\n                        .slider(&quot;Amount to sell for price&quot;,1,64)\n                        .toggle(&quot;I confirm that the item in my possession will not be returned to me. (the item in your hand)&quot;)\n                .validResultHandler(response -&gt; {\n                    ItemStack heldItem = player.getInventory().getItemInMainHand();\n\n                        if (heldItem.getType() != Material.AIR) {\n\n                            Material heldMaterial = heldItem.getType();\n                            String itemName = heldItem.getType().toString();\n                            int itemPrice = Integer.parseInt(Objects.requireNonNull(response.asInput(0)));\n                            int itemAmount = heldItem.getAmount();\n                            if (itemAmount &lt; response.asSlider(1)) {\n                                player.sendMessage(&quot;You dont have enough of this item.&quot;);\n                            } else {\n                                JsonObject itemObject = new JsonObject();\n                                itemObject.addProperty(&quot;price&quot;, itemPrice);\n                                itemObject.addProperty(&quot;amount&quot;, itemAmount);\n                                String itemDetails = itemObject.toString();\n                                Plugin plugin = Bukkit.getPluginManager().getPlugin(&quot;&quot;);\n                                player.getInventory().setItemInMainHand(null);\n                            }\n\n                        } else {\n                            // The player is not holding any item or holding air\n                            player.sendMessage(&quot;You are not holding anything.&quot;);\n                        }\n                })\n                .closedOrInvalidResultHandler(response -&gt; {\n                    player.sendMessage(&quot;GUI closed, type /gui to reopen!&quot;);\n                })\n                .build());\n    }\n}\n\n\n\n\n\n\nprivate void openPlayerItemsGUI(Player player, String playerName) {\n    FloodgatePlayer floodgatePlayer = floodgateApi.getPlayer(player.getUniqueId());\n    if (floodgatePlayer != null) {\n        SimpleForm.Builder formBuilder = SimpleForm.builder()\n                .title(&quot;Items for Sale by: &quot; + playerName)\n                .validResultHandler(response -&gt; {\n                    player.sendMessage(&quot;Loading...&quot;);\n                    // Implement the click event handling for the item buttons\n                    // Add your desired logic here based on the clicked button\n                })\n                .closedOrInvalidResultHandler(response -&gt; {\n                    player.sendMessage(&quot;Form closed or invalid&quot;);\n                });\n\n        Plugin plugin = Bukkit.getPluginManager().getPlugin(&quot;CentoriUI23&quot;);\n        assert plugin != null;\n        File bdataFolder = new File(plugin.getDataFolder(), &quot;bdata&quot;);\n        File playerDirectory = new File(bdataFolder, playerName); // Use playerName parameter directly\n        File itemsFile = new File(playerDirectory, &quot;items.json&quot;);\n        if (!playerDirectory.exists()) {\n            player.sendMessage(&quot;Player directory does not exist: &quot; + playerName);\n            return;\n        }\n\n        // Check if the items file exists\n        if (!itemsFile.exists()) {\n            player.sendMessage(&quot;Items file does not exist: &quot; + itemsFile.getAbsolutePath());\n            return;\n        }\n        if (itemsFile.exists()) {\n            try (FileReader reader = new FileReader(itemsFile)) {\n                JsonParser parser = new JsonParser();\n                JsonElement jsonElement = parser.parse(reader);\n                JsonObject jsonObject = jsonElement.getAsJsonObject();\n\n                for (Map.Entry&lt;String, JsonElement&gt; entry : jsonObject.entrySet()) {\n                    String itemName = entry.getKey();\n                    String itemDetails = entry.getValue().getAsString();\n\n                    // Extract price and amount from the item details\n                    String[] priceAmount = itemDetails.split(&quot;\\\\. amount &quot;);\n                    int itemPrice = Integer.parseInt(priceAmount[0].split(&quot;:&quot;)[1].trim());\n                    int itemAmount = Integer.parseInt(priceAmount[1].trim());\n\n                    // Add the item as a button to the form\n                    formBuilder.button(itemName + &quot; - Price: &quot; + itemPrice + &quot;, Amount: &quot; + itemAmount);\n                }\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n\n        floodgatePlayer.sendForm(formBuilder.build());\n    }\n}\n</code></pre>\n"},{"comments":[{"comment_id":31752516,"body":"would this help? <a href=\"http://stackoverflow.com/questions/19464975/how-to-mock-drivermanager-getconnection\" title=\"how to mock drivermanager getconnection\">stackoverflow.com/questions/19464975/&hellip;</a>"},{"comment_id":31752723,"body":"You can&#39;t with mockito. You&#39;d need to use powermock on top of it."},{"comment_id":31770596,"body":"You can&#39;t with mockito <b>by desing</b> :)"},{"comment_id":43850055,"body":"I know it&#39;s not what you asked about, but this is done easily with <a href=\"http://jmockit.github.io/\" rel=\"nofollow noreferrer\">JMockit</a>."},{"comment_id":54751695,"body":"@MariuszS It isn&#39;t by design that Mockito (or EasyMock, or jMock) does not support mocking <code>static</code> methods, but <i>by accident</i>. This limitation (along with no support for mocking <code>final</code> classes/methods, or <code>new</code>-ed objects) is a natural (but unintended) consequence of the approach employed to implement mocking, where new classes are dynamically created that implement/extend the type to be mocked; other mocking libraries use other approaches which avoid these limitations. This happened in the .NET world as well."},{"comment_id":54757776,"body":"@Rog&#233;rio Thanks for explanation. <a href=\"https://github.com/mockito/mockito/wiki/FAQ\" rel=\"nofollow noreferrer\">github.com/mockito/mockito/wiki/FAQ</a> <b>Can I mock static methods?</b> <i>No. Mockito prefers object orientation and dependency injection over static, procedural code that is hard to understand &amp; change.</i> There is some <i>design</i> behind this limitation too :)"},{"comment_id":54787305,"body":"@MariuszS I read that as an attempt to dismiss legitimate use cases instead of admiting the tool has limitations that cannot be (easily) removed, and without providing any reasoned justification. BTW, <a href=\"http://jmockit.org/about.html#productionCode\" rel=\"nofollow noreferrer\">here is such a discussion</a> for the opposite viewpoint, with references."},{"comment_id":98698004,"body":"@Rog&#233;rio the link is removed. can you please correct it"},{"comment_id":101145369,"body":"Feature-tracking issue is <a href=\"https://github.com/mockito/mockito/issues/1013\" rel=\"nofollow noreferrer\">github.com/mockito/mockito/issues/1013</a>"},{"comment_id":111139680,"body":"Mockito now supports mocking static methods since v3.4.0 <a href=\"https://github.com/mockito/mockito/pull/1955\" rel=\"nofollow noreferrer\">github.com/mockito/mockito/pull/1955</a>"},{"comment_id":111278018,"body":"See also <a href=\"https://asolntsev.github.io/en/2020/07/11/mockito-static-methods/\" rel=\"nofollow noreferrer\">Mockito &#91;3.4.0&#93; can mock static methods!</a>."}],"answers":[{"comments":[{"comment_id":89922687,"body":"Please don&#39;t link to a website.  Answers should include actual usable answers.  If the site goes down or changes, the answer is no longer valid."}],"answer_id":21111644,"body":"<p>To mock static method you should use a Powermock look at:\n<a href=\"https://github.com/powermock/powermock/wiki/MockStatic\" rel=\"nofollow noreferrer\">https://github.com/powermock/powermock/wiki/MockStatic</a>.\nMockito <a href=\"https://code.google.com/p/mockito/wiki/FAQ#What_are_the_limitations_of_Mockito\" rel=\"nofollow noreferrer\">doesn't provide</a> this functionality.</p>\n\n<p>You can read nice a article about mockito:\n<a href=\"http://refcardz.dzone.com/refcardz/mockito\" rel=\"nofollow noreferrer\">http://refcardz.dzone.com/refcardz/mockito</a></p>\n"},{"comments":[{"comment_id":124444168,"body":"Hi, would you have an example for that? Thank you."}],"answer_id":21114773,"body":"<p>As mentioned before you can not mock static methods with mockito. </p>\n\n<p>If changing your testing framework is not an option you can do the following:</p>\n\n<p>Create an interface for DriverManager, mock this interface, inject it via some kind of dependency injection and verify on that mock. </p>\n"},{"comments":[{"comment_id":31835296,"body":"While this works in theory, <a href=\"https://stackoverflow.com/questions/21128690/mocking-static-methods-with-powermock-and-mockito\">having a hard time in practice</a>..."},{"comment_id":42788657,"body":"Unfortunately the huge disadvantage of this is the need for PowerMockRunner though."},{"comment_id":56751638,"body":"sut.execute() ? Means?"},{"comment_id":56757730,"body":"System Under Test, the class that requires mock of DriverManager. <a href=\"http://www.kaczanowscy.pl/tomek/2011-01/testing-basics-sut-and-docs\" rel=\"nofollow noreferrer\">kaczanowscy.pl/tomek/2011-01/testing-basics-sut-and-docs</a>"},{"comment_id":60474424,"body":"why does this line executes  &quot;DriverManager.getConnection(...)&quot; method <code>BDDMockito.given(DriverManager.getConnection(...)).willRetur&zwnj;&#8203;n(...);</code>"},{"comment_id":60574696,"body":"@sattu This is recording behaviour (stub method calls). Instruction: When someone invoke this method, then return this."},{"comment_id":67647951,"body":"PowerMockito is so pretty solution but it not suitable for some cases, for example jacoco does not consider tests coverage which methods and classes have used PowerMockito"},{"comment_id":67694025,"body":"generally it is better to refactor and do not use static methods"},{"comment_id":79845389,"body":"Note that PowerMockito mocks/stubs <i>all</i> static methods of a class. So if you want to mock <code>ClassA::methodY</code> to test <code>ClassA::methodX</code>, it&#39;s not going to work well. In that case, <code>ClassA::methodY</code> has to be extracted to <code>ClassB</code>."},{"comment_id":80856511,"body":"FYI, if you&#39;re already using JUnit4 you can do <code>@RunWith(PowerMockRunner.class)</code> and below that <code>@PowerMockRunnerDelegate(JUnit4.class)</code>."},{"comment_id":82219264,"body":"what about 2 static method in different classes?"},{"comment_id":82221379,"body":"@ZaferCelaloglu try to specify two classes inside <code>@PrepareForTest</code>"},{"comment_id":86091608,"body":"I used powermock in the past and it&#39;s a good tool, but really you should use it with caution. It comes with a lot of quirks, which is no surprise considering how it works. Most times your just better off wrapping stuff in methods."},{"comment_id":88034493,"body":"And if your mocking target is used inside another class object instance, remeber to prepare the class in the @PrepareForTest annotation! :-)"},{"comment_id":97891271,"body":"@PhilipRego <code>getConnection</code> return void?"},{"comment_id":97891439,"body":"@PhilipRego this answer is not about your function, it is about function with the result. Read about stubbing void methods first: <a href=\"https://static.javadoc.io/org.mockito/mockito-core/2.26.0/org/mockito/Mockito.html#do_family_methods_stubs\" rel=\"nofollow noreferrer\">static.javadoc.io/org.mockito/mockito-core/2.26.0/org/mockit&zwnj;&#8203;o/&hellip;</a>"},{"comment_id":97896049,"body":"@PhilipRego this is true that you cannot mix ArgumentMatchers and real objects. So stick to ArgumentMatchers for all parameters."},{"comment_id":97896483,"body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/191564/discussion-between-philip-rego-and-mariuszs\">continue this discussion in chat</a>."},{"comment_id":98181504,"body":"Well this works fine but the problem now I&#39;m facing is, other static method of my Util class are returning null &amp; I don&#39;t know how to get those real methods to work without mocking them. I want those methods to run as they are, but since I&#39;ve enabled powermocking on this whole class PowerMockito.mockStatic(DateTimeUtility.class); I am stuck with it"},{"comment_id":108127266,"body":"What are the dependencies which should be used here for Powermock? because <a href=\"https://mvnrepository.com/artifact/org.powermock\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.powermock</a> contains lot of different artifacts."},{"comment_id":110478912,"body":"It&#39;s easy to by using Functional Interface class , which is nothing but a function pointer to static method but wrapped in a class, and hence possible to mock"},{"comment_id":118365186,"body":"still gives me <code>MissingMethodInvocationException</code> with this <code>mockStatic(Base64.class); given(Base64.getDecoder()).willReturn(mockDecoder);</code>"}],"answer_id":21116014,"body":"<p>Use <a href=\"https://github.com/powermock/powermock/wiki/Mockito\" rel=\"noreferrer\">PowerMockito</a> on top of Mockito.</p>\n\n<p>Example code:</p>\n\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest(DriverManager.class)\npublic class Mocker {\n\n    @Test\n    public void shouldVerifyParameters() throws Exception {\n\n        //given\n        PowerMockito.mockStatic(DriverManager.class);\n        BDDMockito.given(DriverManager.getConnection(...)).willReturn(...);\n\n        //when\n        sut.execute(); // System Under Test (sut)\n\n        //then\n        PowerMockito.verifyStatic();\n        DriverManager.getConnection(...);\n\n    }\n</code></pre>\n\n<p>More information:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/4482315/why-does-mockito-not-mock-static-methods\">Why doesn&#39;t Mockito mock static methods?</a></li>\n</ul>\n"},{"comments":[{"comment_id":67380943,"body":"I created a tool to automatically generate Java 8 &quot;mixin&quot; interfaces which wrap static calls: <a href=\"https://github.com/aro-tech/interface-it\" rel=\"nofollow noreferrer\">github.com/aro-tech/interface-it</a> The generated mixins can be mocked like any other interface, or if your class under test &quot;implements&quot; the interface you can override any of its methods in a subclass for the test."}],"answer_id":29841824,"body":"<p>The typical strategy for dodging static methods that you have no way of avoiding using, is by creating wrapped objects and using the wrapper objects instead.</p>\n\n<p>The wrapper objects become facades to the real static classes, and you do not test those.</p>\n\n<p>A wrapper object could be something like</p>\n\n<pre><code>public class Slf4jMdcWrapper {\n    public static final Slf4jMdcWrapper SINGLETON = new Slf4jMdcWrapper();\n\n    public String myApisToTheSaticMethodsInSlf4jMdcStaticUtilityClass() {\n        return MDC.getWhateverIWant();\n    }\n}\n</code></pre>\n\n<p>Finally, your class under test can use this singleton object by, for example, \nhaving a default constructor for real life use:</p>\n\n<pre><code>public class SomeClassUnderTest {\n    final Slf4jMdcWrapper myMockableObject;\n\n    /** constructor used by CDI or whatever real life use case */\n    public myClassUnderTestContructor() {\n        this.myMockableObject = Slf4jMdcWrapper.SINGLETON;\n    }\n\n    /** constructor used in tests*/\n    myClassUnderTestContructor(Slf4jMdcWrapper myMock) {\n        this.myMockableObject = myMock;\n    }\n}\n</code></pre>\n\n<p>And here you have a class that can easily be tested, because you do not  directly use a class with static methods.</p>\n\n<p>If you are using CDI and can make use of the @Inject annotation then it is even easier.\nJust make your Wrapper bean @ApplicationScoped, get that thing injected as a collaborator (you do not even need messy constructors for testing), and go on with the mocking.</p>\n"},{"answer_id":31975820,"body":"<p>You can do it with a little bit of refactoring:</p>\n\n<pre><code>public class MySQLDatabaseConnectionFactory implements DatabaseConnectionFactory {\n\n    @Override public Connection getConnection() {\n        try {\n            return _getConnection(...some params...);\n        } catch (SQLException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    //method to forward parameters, enabling mocking, extension, etc\n    Connection _getConnection(...some params...) throws SQLException {\n        return DriverManager.getConnection(...some params...);\n    }\n}\n</code></pre>\n\n<p>Then you can extend your class <code>MySQLDatabaseConnectionFactory</code> to return a mocked connection, do assertions on the parameters, etc.</p>\n\n<p>The extended class can reside within the test case, if it's located in the same package (which I encourage you to do)</p>\n\n<pre><code>public class MockedConnectionFactory extends MySQLDatabaseConnectionFactory {\n\n    Connection _getConnection(...some params...) throws SQLException {\n        if (some param != something) throw new InvalidParameterException();\n\n        //consider mocking some methods with when(yourMock.something()).thenReturn(value)\n        return Mockito.mock(Connection.class);\n    }\n}\n</code></pre>\n"},{"comments":[{"comment_id":96050126,"body":"Not able to figure out ?.mockStatic and ?.when currently with JUnit 4"},{"comment_id":96050149,"body":"PowerMock.mockStatic &amp; Mockito.when doesn&#39;t seem to work."},{"comment_id":102510936,"body":"For anyone seeing this later, for me I had to type PowerMockito.mockStatic(StaticClass.class);"},{"comment_id":106699275,"body":"You need to include powermock-api-mockito maven arterfact."}],"answer_id":41644686,"body":"<p>I had a similar issue. The accepted answer did not work for me, until I made the change:  <code>@PrepareForTest(TheClassThatContainsStaticMethod.class)</code>, according to <a href=\"https://github.com/powermock/powermock/wiki/MockStatic\" rel=\"noreferrer\">PowerMock's documentation for mockStatic</a>.</p>\n\n<p>And I don't have to use <code>BDDMockito</code>. </p>\n\n<p>My class:</p>\n\n<pre><code>public class SmokeRouteBuilder {\n    public static String smokeMessageId() {\n        try {\n            return InetAddress.getLocalHost().getHostAddress();\n        } catch (UnknownHostException e) {\n            log.error(\"Exception occurred while fetching localhost address\", e);\n            return UUID.randomUUID().toString();\n        }\n    }\n}\n</code></pre>\n\n<p>My test class:</p>\n\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest(SmokeRouteBuilder.class)\npublic class SmokeRouteBuilderTest {\n    @Test\n    public void testSmokeMessageId_exception() throws UnknownHostException {\n        UUID id = UUID.randomUUID();\n\n        mockStatic(InetAddress.class);\n        mockStatic(UUID.class);\n        when(InetAddress.getLocalHost()).thenThrow(UnknownHostException.class);\n        when(UUID.randomUUID()).thenReturn(id);\n\n        assertEquals(id.toString(), SmokeRouteBuilder.smokeMessageId());\n    }\n}\n</code></pre>\n"},{"comments":[{"comment_id":89384899,"body":"I was banging my head against the wall trying to figure out why my static class wasn&#39;t mocking.  You would think in all the tutorials on the interwebs, ONE would have gone into more than the bare-bones use case."}],"answer_id":47022387,"body":"<p>Observation : When you call static method within a static entity, you need to change the class in @PrepareForTest.</p>\n\n<p>For e.g. :</p>\n\n<pre><code>securityAlgo = MessageDigest.getInstance(SECURITY_ALGORITHM);\n</code></pre>\n\n<p>For the above code if you need to mock MessageDigest class, use </p>\n\n<pre><code>@PrepareForTest(MessageDigest.class)\n</code></pre>\n\n<p>While if you have something like below : </p>\n\n<pre><code>public class CustomObjectRule {\n\n    object = DatatypeConverter.printHexBinary(MessageDigest.getInstance(SECURITY_ALGORITHM)\n             .digest(message.getBytes(ENCODING)));\n\n}\n</code></pre>\n\n<p>then, you'd need to prepare the class this code resides in. </p>\n\n<pre><code>@PrepareForTest(CustomObjectRule.class)\n</code></pre>\n\n<p>And then mock the method : </p>\n\n<pre><code>PowerMockito.mockStatic(MessageDigest.class);\nPowerMockito.when(MessageDigest.getInstance(Mockito.anyString()))\n      .thenThrow(new RuntimeException());\n</code></pre>\n"},{"comments":[{"comment_id":109684588,"body":"The provided link is dead."}],"answer_id":47060787,"body":"<p>I also wrote a combination of Mockito and AspectJ: <a href=\"https://github.com/iirekm/varia/tree/develop/ajmock\" rel=\"nofollow noreferrer\">https://github.com/iirekm/varia/tree/develop/ajmock</a></p>\n\n<p>Your example becomes:</p>\n\n<pre><code>when(() -&gt; DriverManager.getConnection(...)).thenReturn(...);\n</code></pre>\n"},{"answer_id":51921796,"body":"<p>Mockito cannot capture static methods, but since <a href=\"https://github.com/mockito/mockito/blob/release/2.x/doc/release-notes/official.md\" rel=\"noreferrer\">Mockito 2.14.0</a> you can simulate it by creating invocation instances of static methods.</p>\n\n<p>Example (extracted from <a href=\"https://github.com/moltmann/mockito/blob/641ef30b41c5bcd36f36db54fc8b3a7b6c732a4c/src/test/java/org/mockito/StaticMockingExperimentTest.java\" rel=\"noreferrer\">their tests</a>):</p>\n\n<pre><code>public class StaticMockingExperimentTest extends TestBase {\n\n    Foo mock = Mockito.mock(Foo.class);\n    MockHandler handler = Mockito.mockingDetails(mock).getMockHandler();\n    Method staticMethod;\n    InvocationFactory.RealMethodBehavior realMethod = new InvocationFactory.RealMethodBehavior() {\n        @Override\n        public Object call() throws Throwable {\n            return null;\n        }\n    };\n\n    @Before\n    public void before() throws Throwable {\n        staticMethod = Foo.class.getDeclaredMethod(\"staticMethod\", String.class);\n    }\n\n    @Test\n    public void verify_static_method() throws Throwable {\n        //register staticMethod call on mock\n        Invocation invocation = Mockito.framework().getInvocationFactory().createInvocation(mock, withSettings().build(Foo.class), staticMethod, realMethod,\n                \"some arg\");\n        handler.handle(invocation);\n\n        //verify staticMethod on mock\n        //Mockito cannot capture static methods so we will simulate this scenario in 3 steps:\n        //1. Call standard 'verify' method. Internally, it will add verificationMode to the thread local state.\n        //  Effectively, we indicate to Mockito that right now we are about to verify a method call on this mock.\n        verify(mock);\n        //2. Create the invocation instance using the new public API\n        //  Mockito cannot capture static methods but we can create an invocation instance of that static invocation\n        Invocation verification = Mockito.framework().getInvocationFactory().createInvocation(mock, withSettings().build(Foo.class), staticMethod, realMethod,\n                \"some arg\");\n        //3. Make Mockito handle the static method invocation\n        //  Mockito will find verification mode in thread local state and will try verify the invocation\n        handler.handle(verification);\n\n        //verify zero times, method with different argument\n        verify(mock, times(0));\n        Invocation differentArg = Mockito.framework().getInvocationFactory().createInvocation(mock, withSettings().build(Foo.class), staticMethod, realMethod,\n                \"different arg\");\n        handler.handle(differentArg);\n    }\n\n    @Test\n    public void stubbing_static_method() throws Throwable {\n        //register staticMethod call on mock\n        Invocation invocation = Mockito.framework().getInvocationFactory().createInvocation(mock, withSettings().build(Foo.class), staticMethod, realMethod,\n                \"foo\");\n        handler.handle(invocation);\n\n        //register stubbing\n        when(null).thenReturn(\"hey\");\n\n        //validate stubbed return value\n        assertEquals(\"hey\", handler.handle(invocation));\n        assertEquals(\"hey\", handler.handle(invocation));\n\n        //default null value is returned if invoked with different argument\n        Invocation differentArg = Mockito.framework().getInvocationFactory().createInvocation(mock, withSettings().build(Foo.class), staticMethod, realMethod,\n                \"different arg\");\n        assertEquals(null, handler.handle(differentArg));\n    }\n\n    static class Foo {\n\n        private final String arg;\n\n        public Foo(String arg) {\n            this.arg = arg;\n        }\n\n        public static String staticMethod(String arg) {\n            return \"\";\n        }\n\n        @Override\n        public String toString() {\n            return \"foo:\" + arg;\n        }\n    }\n}\n</code></pre>\n\n<p>Their goal is not to directly support static mocking, but to improve its public APIs so that other libraries, like <a href=\"https://github.com/powermock/powermock/wiki/Mockito\" rel=\"noreferrer\">Powermockito</a>, don't have to rely on internal APIs or directly have to duplicate some Mockito code. (<a href=\"https://www.linkedin.com/pulse/mockito-vs-powermock-opinionated-dogmatic-static-mocking-faber/\" rel=\"noreferrer\">source</a>)</p>\n\n<blockquote>\n  <p>Disclaimer: Mockito team thinks that the road to hell is paved with static methods. However, Mockito's job is not to protect your code from static methods. If you don’t like your team doing static mocking, stop using Powermockito in your organization. Mockito needs to evolve as a toolkit with an opinionated vision on how Java tests should be written (e.g. don't mock statics!!!). However, Mockito is not dogmatic. We don't want to block unrecommended use cases like static mocking. It's just not our job.</p>\n</blockquote>\n"},{"answer_id":53263055,"body":"<p><strong>Use JMockit framework</strong>. It worked for me. You don't have to write statements for mocking DBConenction.getConnection() method. Just the below code is enough.</p>\n\n<p>@Mock below is mockit.Mock package</p>\n\n<pre><code>Connection jdbcConnection = Mockito.mock(Connection.class);\n\nMockUp&lt;DBConnection&gt; mockUp = new MockUp&lt;DBConnection&gt;() {\n\n            DBConnection singleton = new DBConnection();\n\n            @Mock\n            public DBConnection getInstance() { \n                return singleton;\n            }\n\n            @Mock\n            public Connection getConnection() {\n                return jdbcConnection;\n            }\n         };\n</code></pre>\n"},{"answer_id":60186077,"body":"<p>Since that method is static, it already has everything you need to use it, so it defeats the purpose of mocking. \nMocking the static methods is considered to be a bad practice.</p>\n\n<p>If you try to do that, it means there is something wrong with the way you want to perform testing.</p>\n\n<p>Of course you can use PowerMockito or any other framework capable of doing that, but try to rethink your approach.</p>\n\n<p>For example: try to mock/provide the objects, which that static method consumes instead.</p>\n"},{"answer_id":62469844,"body":"<p>There is an easy solution by using java FunctionalInterface and then add that interface as dependency for the class you are trying to unit test.</p>\n"},{"comments":[{"comment_id":111277962,"body":"See also <a href=\"https://asolntsev.github.io/en/2020/07/11/mockito-static-methods/\" rel=\"nofollow noreferrer\">Mockito can mock static methods!</a> and <a href=\"https://github.com/mockito/mockito/pull/1955\" rel=\"nofollow noreferrer\">github.com/mockito/mockito/pull/1955</a>."},{"comment_id":112196733,"body":"For me one Testclass gave some really good insight, how to use the new statickMock-Feature: <a href=\"https://github.com/mockito/mockito/blob/4767db122f95e5302ad6a60a6efaa69f9d7e6cb1/subprojects/inline/src/test/java/org/mockitoinline/StaticMockTest.java\" rel=\"nofollow noreferrer\">StaticMockTest.java</a> and please see also the Bugfixes in Version <a href=\"https://github.com/mockito/mockito/blob/release/3.x/doc/release-notes/official.md#342\" rel=\"nofollow noreferrer\">3.4.2</a> and <a href=\"https://github.com/mockito/mockito/blob/release/3.x/doc/release-notes/official.md#346\" rel=\"nofollow noreferrer\">3.4.6</a>"},{"comment_id":120683188,"body":"Cannot resolve method &#39;mockStatic&#39; in &#39;Mockito&#39;"},{"comment_id":120684276,"body":"@HarshadPanmand which Mockito version do you use? <a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#mockStatic-java.lang.Class-\" rel=\"nofollow noreferrer\">javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/&hellip;</a>"},{"comment_id":120690137,"body":"It&#39;s working now by removing &#39;org.mockito:mockito-all:2.0.2-beta&#39; dependency. Previously, I used multiple dependencies of mockito like (core, inline, all)."},{"comment_id":125787677,"body":"Thank you leokom for pointing this out. However, I am not a fan of the try-with-resources approach that Mockito came up with and thus have replaced it with an JUnit5 Extension. I&#39;ll add an answer to describe it. It allows you to simply create an annotated field on your test class for the static mock. Much cleaner, especially when you need to mock multiple statics."},{"comment_id":128309384,"body":"See this answer for an example with arguments: <a href=\"https://stackoverflow.com/a/64714397/10318564\">stackoverflow.com/a/64714397/10318564</a>"},{"comment_id":133596538,"body":"Use <b>Mockito.CALLS_REAL_METHODS</b> in Mockito.mockStatic in order to make other methods work as usual. i.e if you mock LocalDate.now() you want LocalDate.of() still working as usual and not returning null. <code>try (MockedStatic&lt;LocalDate&gt; localDateStaticMock = Mockito.mockStatic(LocalDate.class, Mockito.CALLS_REAL_METHODS)) {       localDateStaticMock.when(LocalDate::now).thenReturn(TODAY_IS&zwnj;&#8203;_2023_03_13);</code>"}],"answer_id":62860455,"body":"<p>Mocking of static methods in Mockito is possible since Mockito 3.4.0.\nFor more details see:</p>\n<p><a href=\"https://github.com/mockito/mockito/releases/tag/v3.4.0\" rel=\"noreferrer\">https://github.com/mockito/mockito/releases/tag/v3.4.0</a></p>\n<p><a href=\"https://github.com/mockito/mockito/issues/1013\" rel=\"noreferrer\">https://github.com/mockito/mockito/issues/1013</a></p>\n<p><a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#static_mocks\" rel=\"noreferrer\">https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#static_mocks</a></p>\n<pre><code>assertEquals(&quot;foo&quot;, Foo.method());\ntry (MockedStatic mocked = mockStatic(Foo.class)) {\n mocked.when(Foo::method).thenReturn(&quot;bar&quot;);\n assertEquals(&quot;bar&quot;, Foo.method());\n mocked.verify(Foo::method);\n}\nassertEquals(&quot;foo&quot;, Foo.method());\n</code></pre>\n<p>In your case, something like this:</p>\n<pre><code>  @Test\n  public void testStaticMockWithVerification() throws SQLException {\n    try (MockedStatic&lt;DriverManager&gt; dummy = Mockito.mockStatic(DriverManager.class)) {\n      DatabaseConnectionFactory factory = new MySQLDatabaseConnectionFactory();\n      dummy.when(() -&gt; DriverManager.getConnection(&quot;arg1&quot;, &quot;arg2&quot;, &quot;arg3&quot;))\n        .thenReturn(new Connection() {/*...*/});\n\n      factory.getConnection();\n\n      dummy.verify(() -&gt; DriverManager.getConnection(eq(&quot;arg1&quot;), eq(&quot;arg2&quot;), eq(&quot;arg3&quot;)));\n    }\n  }\n</code></pre>\n<p><strong>NOTE: mocking STATIC METHODS requires mockito-inline dependency instead of mockito-core.</strong></p>\n<p>For JUnit5 also add this:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n  &lt;artifactId&gt;mockito-junit-jupiter&lt;/artifactId&gt;\n  &lt;version&gt;${mockito.version}&lt;/version&gt;\n  &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"answer_id":64714397,"body":"<p>For those who use JUnit 5, Powermock is not an option. You'll require the following dependencies to successfully mock a static method with just Mockito.</p>\n<pre><code>testCompile    group: 'org.mockito', name: 'mockito-core',           version: '3.6.0'\ntestCompile    group: 'org.mockito', name: 'mockito-junit-jupiter',  version: '3.6.0'\ntestCompile    group: 'org.mockito', name: 'mockito-inline',         version: '3.6.0'\n</code></pre>\n<p><code>mockito-junit-jupiter</code> add supports for JUnit 5.</p>\n<p>And support for mocking static methods is provided by <code>mockito-inline</code> dependency.</p>\n<p>Example:</p>\n<pre><code>@Test\nvoid returnUtilTest() {\n    assertEquals(&quot;foo&quot;, UtilClass.staticMethod(&quot;foo&quot;));\n\n    try (MockedStatic&lt;UtilClass&gt; classMock = mockStatic(UtilClass.class)) {\n\n        classMock.when(() -&gt; UtilClass.staticMethod(&quot;foo&quot;)).thenReturn(&quot;bar&quot;);\n\n        assertEquals(&quot;bar&quot;, UtilClass.staticMethod(&quot;foo&quot;));\n     }\n\n     assertEquals(&quot;foo&quot;, UtilClass.staticMethod(&quot;foo&quot;));\n}\n</code></pre>\n<p>The try-with-resource block is used to make the static mock remains temporary, so it's mocked only within that scope.</p>\n<p>When not using a try block, make sure to close the mock, once you are done with the assertions.</p>\n<pre><code>MockedStatic&lt;UtilClass&gt; classMock = mockStatic(UtilClass.class)\nclassMock.when(() -&gt; UtilClass.staticMethod(&quot;foo&quot;)).thenReturn(&quot;bar&quot;);\nassertEquals(&quot;bar&quot;, UtilClass.staticMethod(&quot;foo&quot;));\nclassMock.close();\n</code></pre>\n<p><strong>Mocking void methods:</strong></p>\n<p>When <code>mockStatic</code> is called on a class, all the static void methods in that class automatically get mocked to <code>doNothing()</code>.</p>\n"},{"answer_id":65699992,"body":"<p>For mocking static functions i was able to do it that way:</p>\n<ul>\n<li>create a wrapper function in some helper class/object. (using a name variant might be beneficial for keeping things separated and maintainable.)</li>\n<li>use this wrapper in your codes. (Yes, codes need to be realized with testing in mind.)</li>\n<li>mock the wrapper function.</li>\n</ul>\n<p>wrapper code snippet (not really functional, just for illustration)</p>\n<pre><code>class myWrapperClass ...\n    def myWrapperFunction (...) {\n        return theOriginalFunction (...)\n    }\n</code></pre>\n<p>of course having multiple such functions accumulated in a single wrapper class might be beneficial in terms of code reuse.</p>\n"},{"comments":[{"comment_id":120192797,"body":"I didn&#39;t get what is the use of mocking here. It doesn&#39;t catch if Buddy. name() changed."}],"answer_id":67278574,"body":"<p>I found one solution in Mockito. This feature comes with a version only from <code>3.4.0</code></p>\n<p><a href=\"https://asolntsev.github.io/en/2020/07/11/mockito-static-methods/\" rel=\"noreferrer\">https://asolntsev.github.io/en/2020/07/11/mockito-static-methods/</a></p>\n<ul>\n<li><p>dependency</p>\n<p>In your build.gradle replace mockito-core:3.3.3 by mockito-inline:3.4.0:</p>\n<pre><code>testImplementation('org.mockito:mockito-inline:3.4.0')\n</code></pre>\n</li>\n<li><p>what are we going to mock</p>\n<pre><code> class Buddy \n {\n     static String name() \n     {\n        return &quot;John&quot;;\n     }\n }\n</code></pre>\n</li>\n<li><p>Mock the static method</p>\n<pre><code>    @Test\n    void lookMomICanMockStaticMethods() \n    {\n         assertThat(Buddy.name()).isEqualTo(&quot;John&quot;);\n\n        try (MockedStatic&lt;Buddy&gt; theMock = Mockito.mockStatic(Buddy.class)) \n        {\n            theMock.when(Buddy::name).thenReturn(&quot;Rafael&quot;);\n            assertThat(Buddy.name()).isEqualTo(&quot;Rafael&quot;);\n        }\n\n        assertThat(Buddy.name()).isEqualTo(&quot;John&quot;);\n    }\n</code></pre>\n</li>\n</ul>\n<p>I think this could help us.</p>\n"},{"answer_id":71160714,"body":"<p>Here I share my mockito MockStatic solution based on an extension as promised in my answer to leokom's solution.</p>\n<p>So, why does Mockito choose try-with-resources? Well, simply because they want to keep a tidy ship. That is good programming after all. Try-with-resources allows construction with guaranteed calling of the close method. But in JUnit we already have that in BeforeEach and AfterEach. And one can easily add these for a generic purpose to each test class using an Extension that implements BeforeEachCallback and AfterEachCallback.</p>\n<p>So much for the theory. Let's make a static mock for</p>\n<pre><code>Instant.now()\n</code></pre>\n<p>I started with an annotation to be able to mark the fields in my test class that I want to use as static mocks.</p>\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.FIELD)\npublic @interface StaticMock {\n\n}\n</code></pre>\n<p>This allows me to create a field in my test class for static mocking that I can easily find in my Extension class.</p>\n<pre><code>  @StaticMock\n  private MockedStatic&lt;Instant&gt; staticInstantMock;\n</code></pre>\n<p>I added the Extension I created to my test class. You have two options.</p>\n<ol>\n<li>Create an Extension for this purpose and add it to the class next to MockitoExtension, which you also need.</li>\n<li>Create an Extension and have it inherit from MockitoExtension. Now you can replace MockitoExtension on your test class.</li>\n</ol>\n<p>I used the latter of the two.</p>\n<pre><code>@ExtendWith({CompanyMockitoExtension.class})\nclass MyExtendedTestClass {\n</code></pre>\n<p>Now we need something to be returned for the static when it's called:</p>\n<pre><code>  @Mock\n  private Instant now;\n\n  staticInstantMock.when(Instant::now).thenReturn(now);\n</code></pre>\n<p>The whole test class:</p>\n<pre><code>@ExtendWith({CompanyMockitoExtension.class})\nclass MyExtendedTestClass {\n\n  @StaticMock\n  private MockedStatic&lt;Instant&gt; staticInstantMock;\n\n  @Mock\n  private Instant now;\n\n  @Test\n  void myTestMethod() {\n    staticInstantMock.when(Instant::now).thenReturn(now);\n\n    assertThat(Instant::now).isSameAs(now); // This would normally happen in the class you are testing...\n  }\n}\n</code></pre>\n<p>Now let's take a look at the Extension class.</p>\n<pre><code>import static org.mockito.Mockito.mockStatic;\n\nimport java.lang.reflect.Field;\nimport java.lang.reflect.Method;\nimport java.util.List;\nimport org.junit.jupiter.api.extension.ExtensionContext;\nimport org.mockito.MockedStatic;\nimport org.mockito.Mockito;\nimport org.mockito.junit.jupiter.MockitoExtension;\n\npublic class CompanyMockitoExtension extends MockitoExtension {\n\n  @Override\n  public void beforeEach(ExtensionContext context) {\n    super.beforeEach(context); // Don't forget to call the super!!\n    if (context.getTestInstance().isEmpty()) { // Just to be sure...\n      return;\n    }\n    // Get the unit test instance\n    Object testSubject = context.getTestInstance().get();\n    initializeStaticMocks(testSubject);\n  }\n\n  private void initializeStaticMocks(Object testSubject) {\n    // Find all fields that I want to static mock\n    List&lt;Field&gt; staticMockFields = ReflectionHelper.getFieldsWithAnnotation(testSubject, StaticMock.class);\n    staticMockFields.forEach(field -&gt; initializeStaticMock(field, testSubject));\n  }\n\n  private void initializeStaticMock(Field field, Object testSubject) {\n    // Get the type of the static mock. It is within the generic MockedStatic&lt;&gt; class type.\n    Class&lt;?&gt; typeForStaticMock = (Class&lt;?&gt;) ReflectionHelper.getTypesForGeneric(field)[0];\n    try {\n      // Now set the field with the mockStatic method of Mockito.\n      field.setAccessible(true);\n      field.set(testSubject, mockStatic(typeForStaticMock));\n    } catch (IllegalAccessException e) {\n      throw new RuntimeException(&quot;Failed to instantiate Static Mock with type: &quot; + typeForStaticMock.getName());\n    }\n  }\n\n  @Override\n  public void afterEach(ExtensionContext context) {\n    super.afterEach(context); // Again, do not forget to call the super.\n    if (context.getTestInstance().isEmpty()) {\n      return;\n    }\n    Object testSubject = context.getTestInstance().get();\n    closeStaticMocks(testSubject); // Close all static mocks.\n  }\n\n  private void closeStaticMocks(Object testSubject) {\n    // Again find all fields we annotated\n    List&lt;Field&gt; staticMockFields = ReflectionHelper.getFieldsWithAnnotation(testSubject, StaticMock.class);\n    staticMockFields.forEach(field -&gt; closeStaticMock(field, testSubject));\n  }\n\n  private void closeStaticMock(Field field, Object testSubject) {\n    // Get the instance and simply call close.\n    MockedStatic&lt;?&gt; mockedStaticInstance = ReflectionHelper.getFieldInstance(field, testSubject, MockedStatic.class);\n    mockedStaticInstance.close();\n  }\n}\n</code></pre>\n<p>The nice thing about this extension is that you can add additional mocking stuff. I added verification of no more interactions on all mocks in the AfterEach. This is now automatic when we use this extension. I also added similar behavior for construction mocking as for the static mocking.</p>\n<p>As you see, I made my own reflection helper class. I know there are some standard reflection helper classes and those might be better. Here is mine for this purpose.</p>\n<pre><code>public class ReflectionHelper {\n\n  public static List&lt;Field&gt; getFieldsWithAnnotation(\n      Object testSubject,\n      Class&lt;? extends Annotation&gt; annotationType\n  ) {\n    Class&lt;?&gt; testSubjectClass = testSubject.getClass();\n\n    return Arrays.stream(testSubjectClass.getDeclaredFields())\n                 .filter(field -&gt; field.isAnnotationPresent(annotationType))\n                 .collect(toUnmodifiableList());\n  }\n\n  public static List&lt;Field&gt; getCollectionFields(Object testSubject) {\n    Class&lt;?&gt; testSubjectClass = testSubject.getClass();\n\n    return Arrays.stream(testSubjectClass.getDeclaredFields())\n                 .filter(field -&gt; Collection.class.isAssignableFrom(field.getType()))\n                 .collect(toUnmodifiableList());\n  }\n\n  @SuppressWarnings(&quot;unchecked&quot;)\n  public static &lt;T&gt; T getFieldInstance(Field field, Object testSubject, Class&lt;T&gt; type) {\n    return (T) getFieldInstance(field, testSubject);\n  }\n\n  public static Object getFieldInstance(Field field, Object testSubject) {\n    try {\n      boolean isStatic = isStatic(field.getModifiers());\n      Object context = isStatic ? null : testSubject;\n      field.setAccessible(true);\n      return field.get(context);\n    } catch (IllegalAccessException e) {\n      throw new RuntimeException(&quot;Failed to get instance of field.&quot;);\n    }\n  }\n\n  public static Type[] getTypesForGeneric(Field field) {\n    ParameterizedType parameterizedType = (ParameterizedType) field.getGenericType();\n    return parameterizedType.getActualTypeArguments();\n  }\n}\n</code></pre>\n"},{"answer_id":72289685,"body":"<p>When you try to mock the static method, you have to write the test inside the try block. because It's important to note that scoped mocks must be closed by the entity that activates the mock.</p>\n<pre class=\"lang-java prettyprint-override\"><code>      try (MockedStatic&lt;Tester&gt; tester = Mockito.mockStatic(Tester.class)) {\n            tester.when(() -&gt; Tester.testStatic(&quot;Testing..&quot;)).thenReturn(mock(ReturnObject.class));\n    //Here you have to write the test cases\n      }\n</code></pre>\n<p>In the above example, we have to mock the Tester Class testStatic Method with input param as &quot;Testing...&quot;. Here, this method will return a ReturnObject class type object. Hence we write mockito when chain like above.</p>\n<p>Don't forget to add below dependency in your Gradle/maven</p>\n<pre><code>    testImplementation 'org.mockito:mockito-inline:4.3.1'\n</code></pre>\n"},{"answer_id":74456490,"body":"<p>Refactor it a little bit:</p>\n<pre><code>public class MySQLDatabaseConnectionFactory implements DatabaseConnectionFactory {\n    ConnectionSupplier connectionSupplier = () -&gt; SupplierDriverManager.getConnection();\n\n    public void setConnSupplier(ConnectionSupplier supplier) {\n        this.connectionSupplier = supplier;\n    }\n\n    @Override \n    public Connection getConnection() {\n        try {\n            return connectionSupplier.conn();\n        } catch (SQLException e) {\n            throw new RuntimeException(e);\n        }\n    }\n    @FunctionalInterface\n    interface ConnectionSupplier {\n        Connection conn();\n    }\n}\n</code></pre>\n<p>Then you can use the <code>mockito</code>:</p>\n<pre><code>MySQLDatabaseConnectionFactory.ConnectionSupplier connectionSupplier = mock(MySQLDatabaseConnectionFactory.ConnectionSupplier.class);\nwhen(connectionSupplier.conn()).thenReturn(yourMockObject);\nyourConnectionFactory.setConnSupplier(connectionSupplier);\n</code></pre>\n"},{"answer_id":75731460,"body":"<p><strong>Mocking LocalDate.now()</strong> for stable tests.</p>\n<p>Please refer to @leokom answer above for more details on setting up static mock and dependencies.</p>\n<p><strong>Mockito.CALLS_REAL_METHODS</strong> makes sure other methods still work as usual. Otherwise LocalDate.of() would return null.</p>\n<pre><code>private static final LocalDate TODAY_IS_2023_03_13 = LocalDate.of(2023, 03, 13);\n@Test\nvoid now() {\ntry (MockedStatic&lt;LocalDate&gt; localDateStaticMock = Mockito.mockStatic(LocalDate.class, Mockito.CALLS_REAL_METHODS)) {\n  localDateStaticMock.when(LocalDate::now).thenReturn(TODAY_IS_2023_03_13);\n\n  assertThat(LocalDate.now()).isEqualTo(TODAY_IS_2023_03_13);\nassertThat(LocalDate.of(2023,03,16)).isNotNull().isEqualTo(TODAY_IS_2023_03_13);\n}\n</code></pre>\n<p>}</p>\n"},{"answer_id":76287393,"body":"<p>You can mock static without adding any dependency or using PowerMock. It's by doing this trick :)</p>\n<p>Add the file org.mockito.plugins.MockMaker under the folder src/test/resources/mockito-extensions/ with this content:</p>\n<pre><code>mock-maker-inline\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/2SJYw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2SJYw.png\" alt=\"enter image description here\" /></a></p>\n"}],"last_activity_date":1684736832,"question_id":21105403,"body":"<p>I've written a factory to produce <code>java.sql.Connection</code> objects:</p>\n\n<pre><code>public class MySQLDatabaseConnectionFactory implements DatabaseConnectionFactory {\n\n    @Override public Connection getConnection() {\n        try {\n            return DriverManager.getConnection(...);\n        } catch (SQLException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n\n<p>I'd like to validate the parameters passed to <code>DriverManager.getConnection</code>, but I don't know how to mock a static method. I'm using JUnit 4 and Mockito for my test cases. Is there a good way to mock/verify this specific use-case?</p>\n"},{"comments":[{"comment_id":134539715,"body":"Welcome to Stackoverflow. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a> Then you can update your question such that it is precise and answerable."},{"comment_id":134554673,"body":"Can you explain what is your issue? Also, prefer making a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with your code than copy/paste it and ask for keeping your own"},{"comment_id":134568855,"body":"@InoGamerz, the benefits are just for you. You are asking volunteers to donate their time for helping, therefore I think  this isn&#39;t the right way to ask.  Also, as already stated in the other comments, we cannot guess what are the problems here"},{"comment_id":134571085,"body":"It&#39;s just not loading giving error at start up if ya can fix please help fixing it"}],"last_activity_date":1684736622,"question_id":76292705,"body":"<p>Here's my code: (Please do not use it for your own benefits It belongs to me)</p>\n<pre><code>package me.zamin.zsb;\n\nimport java.util.Collections;\nimport java.util.Comparator;\nimport org.bukkit.Bukkit;\nimport org.bukkit.ChatColor;\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.command.TabExecutor;\nimport org.bukkit.entity.Player;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.player.PlayerJoinEvent;\nimport org.bukkit.plugin.java.JavaPlugin;\nimport org.bukkit.scoreboard.*;\nimport org.bukkit.scoreboard.Scoreboard;\n\nimport java.util.*;\n\npublic class ZaminScoreBoard extends JavaPlugin implements Listener, TabExecutor {\n\n    private Scoreboard scoreboard;\n    private Objective objective;\n    private Map&lt;Integer, String&gt; scoreboardLines;\n\n    @Override\n    public void onEnable() {\n        // Register events and initialize variables\n        Bukkit.getPluginManager().registerEvents(this, this);\n        scoreboardLines = new HashMap&lt;&gt;();\n\n        // Create the scoreboard and objective\n        objective = scoreboard.registerNewObjective(&quot;zsb_objective&quot;, &quot;dummy&quot;);\n        objective.setDisplayName(ChatColor.GREEN + &quot;ZaminScoreBoard&quot;);\n\n        // Register the commands\n        getCommand(&quot;zsb&quot;).setExecutor(this);\n        getCommand(&quot;zsb&quot;).setTabCompleter(this);\n    }\n\n    @Override\n    public void onDisable() {\n        // Unregister the objective to prevent memory leaks\n        objective.unregister();\n    }\n\n    @Override\n    public boolean onCommand(CommandSender sender, Command command, String label, String[] args) {\n        if (args.length &gt;= 1) {\n            String subCommand = args[0];\n\n            if (subCommand.equalsIgnoreCase(&quot;setdisplay&quot;)) {\n                if (args.length &gt;= 2) {\n                    String displayName = ChatColor.translateAlternateColorCodes('&amp;', args[1]);\n                    setScoreboardDisplayName(displayName);\n                    sender.sendMessage(ChatColor.GREEN + &quot;Set scoreboard display name to: &quot; + displayName);\n                    return true;\n                } else {\n                    sender.sendMessage(ChatColor.RED + &quot;Usage: /zsb setdisplay &lt;displayname&gt;&quot;);\n                    return true;\n                }\n            } else if (subCommand.equalsIgnoreCase(&quot;addline&quot;)) {\n                if (args.length &gt;= 2) {\n                    String line = ChatColor.translateAlternateColorCodes('&amp;', args[1]);\n                    addScoreboardLine(line);\n                    sender.sendMessage(ChatColor.GREEN + &quot;Added line to scoreboard: &quot; + line);\n                    return true;\n                } else {\n                    sender.sendMessage(ChatColor.RED + &quot;Usage: /zsb addline &lt;line&gt;&quot;);\n                    return true;\n                }\n            } else if (subCommand.equalsIgnoreCase(&quot;removeline&quot;)) {\n                if (args.length &gt;= 2) {\n                    int lineIndex;\n                    try {\n                        lineIndex = Integer.parseInt(args[1]);\n                    } catch (NumberFormatException e) {\n                        sender.sendMessage(ChatColor.RED + &quot;Invalid line index.&quot;);\n                        return true;\n                    }\n\n                    removeScoreboardLine(lineIndex);\n                    sender.sendMessage(ChatColor.GREEN + &quot;Removed line from scoreboard: &quot; + lineIndex);\n                    return true;\n                } else {\n                    sender.sendMessage(ChatColor.RED + &quot;Usage: /zsb removeline &lt;lineindex&gt;&quot;);\n                    return true;\n                }\n            } else if (subCommand.equalsIgnoreCase(&quot;setline&quot;)) {\n                if (args.length &gt;= 3) {\n                    int lineIndex;\n                    try {\n                        lineIndex = Integer.parseInt(args[1]);\n                    } catch (NumberFormatException e) {\n                        sender.sendMessage(ChatColor.RED + &quot;Invalid line index.&quot;);\n                        return true;\n                    }\n\n                    String line = ChatColor.translateAlternateColorCodes('&amp;', args[2]);\n                    setScoreboardLine(lineIndex, line);\n                    sender.sendMessage(ChatColor.GREEN + &quot;Set line &quot; + lineIndex + &quot; to: &quot; + line);\n                    return true;\n                } else {\n                    sender.sendMessage(ChatColor.RED + &quot;Usage: /zsb setline &lt;lineindex&gt; &lt;content&gt;&quot;);\n                    return true;\n                }\n            }\n        }\n\n        sender.sendMessage(ChatColor.RED + &quot;ZaminScoreBoard Commands:&quot;);\n        sender.sendMessage(ChatColor.RED + &quot;/zsb setdisplay &lt;displayname&gt; - Set the scoreboard display name.&quot;);\n        sender.sendMessage(ChatColor.RED + &quot;/zsb addline &lt;line&gt; - Add a line to the scoreboard.&quot;);\n        sender.sendMessage(ChatColor.RED + &quot;/zsb removeline &lt;lineindex&gt; - Remove a line from the scoreboard.&quot;);\n        sender.sendMessage(ChatColor.RED + &quot;/zsb setline &lt;lineindex&gt; &lt;content&gt; - Set the content of a line on the scoreboard.&quot;);\n        return true;\n    }\n\n    @EventHandler\n    private void updateScoreboard(Player player) {\n        Scoreboard scoreboard = player.getScoreboard();\n        Objective objective = scoreboard.getObjective(&quot;zsb_objective&quot;);\n\n        if (objective == null) {\n            objective = scoreboard.registerNewObjective(&quot;zsb_objective&quot;, &quot;dummy&quot;, &quot;ZaminScoreBoard&quot;);\n            objective.setDisplaySlot(DisplaySlot.SIDEBAR);\n        }\n\n        List&lt;String&gt; lines = getConfig().getStringList(&quot;scoreboard.lines&quot;);\n        int lineNumber = lines.size();\n\n        for (String line : lines) {\n            String formattedLine = ChatColor.translateAlternateColorCodes('&amp;', line);\n            Score score = objective.getScore(formattedLine);\n            score.setScore(lineNumber);\n            lineNumber--;\n        }\n    }\n\n        // Sort the scoreboard lines by index\n        List&lt;Integer&gt; sortedIndexes = new ArrayList&lt;&gt;(scoreboardLines.keySet());\n        sortedIndexes.sort(Comparator.comparingInt(o -&gt; lines.get(o).length()));\n\n    // Add the lines to the scoreboard in descending order\n        int score = sortedIndexes.size();\n        for (Integer index : sortedIndexes) {\n            String line = scoreboardLines.get(index);\n            String formattedLine = ChatColor.translateAlternateColorCodes('&amp;', line);\n\n            Scoreboard scoreboard = objective.getScoreboard();\n            ScoreboardLine scoreboardLine = new ScoreboardLine(scoreboard, formattedLine);\n            scoreboardLine.setScore(score);\n\n            score--;\n        }\n    }\n}\n\n</code></pre>\n"},{"comments":[{"comment_id":130310994,"body":"What does Nessus even scan? You show running openssl and nmap running against port 8443 - is this really what Nessus also does?"},{"comment_id":130314025,"body":"@SteffenUllrich..No, Nessus doesn&#39;t scan against port 8443. But it scans the entire server."},{"comment_id":130315239,"body":"If the results from Nessus regarding TLS 1.0 are not from scanning port 8443 but a different port, then you need to look at the configuration of whatever is running on this port instead."},{"comment_id":130569318,"body":"@SteffenUllrich..Please find my edited details at the end of my question."}],"answers":[{"answer_id":76303469,"body":"<p>Nessus is only scanner. This situation tells you. default tools and system services are secured, but it is not tomcat run inside JVM.\nYou have two ways for resolve this one:</p>\n<ol>\n<li>Disable old crypto protocols globally in JVM or Tomcat. Usually it is in JVM. You can do int in mail JVM config for all java process, or by specyfing variable for JVM run. It is described here: <a href=\"https://stackoverflow.com/questions/41181696/disabling-tlsv1-0-in-java8\">Disabling TLSv1.0 in java8</a></li>\n<li>Better way, is configuring apache as a proxy to tomcat, and completly disable tomcat for allowing TCP connection. You can do it by loopback netwok.</li>\n</ol>\n"}],"last_activity_date":1684736414,"question_id":73797872,"body":"<p>We are running our Java Application on RHEL 8.5 OS platform. In our Apache's ssl.conf file, we have enabled only TLSv1.2 protocol. And we are not using TLSv1 and TLSv1.1 protocols in our application.</p>\n<p>From the below details, it is confirmed that the above protocols are disabled from an OS perspective also.</p>\n<pre><code>update-crypto-policies --show\nDEFAULT\n</code></pre>\n<p>From RHEL, it is confirmed that &quot;The TLS versions TLS 1.0 and TLS 1.1 protocols are disabled in the DEFAULT system-wide cryptographic policy level. &quot;</p>\n<p>And from the below command results, it is confirmed that TLS 1.0 and TLS 1.1 is disabled from the Application Side.</p>\n<pre><code>[root@test ~]# openssl s_client -connect &lt;IP_ADDRESS&gt;:8443 -tls1\nCONNECTED(00000003)\n139679030896448:error:1409442E:SSL routines:ssl3_read_bytes:tlsv1 alert protocol version:ssl/record/rec_layer_s3.c:1544:SSL alert number 70\n---\nno peer certificate available\n---\nNo client certificate CA names sent\n---\nSSL handshake has read 7 bytes and written 104 bytes\nVerification: OK\n---\nNew, (NONE), Cipher is (NONE)\nSecure Renegotiation IS NOT supported\nCompression: NONE\nExpansion: NONE\nNo ALPN negotiated\nSSL-Session:\n    Protocol  : TLSv1\n    Cipher    : 0000\n    Session-ID:\n    Session-ID-ctx:\n    Master-Key:\n    PSK identity: None\n    PSK identity hint: None\n    SRP username: None\n    Start Time: 1662128840\n    Timeout   : 7200 (sec)\n    Verify return code: 0 (ok)\n    Extended master secret: no\n-----------------------------------------\n\n[root@test ~]# nmap -sV --script ssl-enum-ciphers -p 8443 &lt;IP_ADDRESS&gt;\nStarting Nmap 7.70 ( https://nmap.org ) at 2022-09-20 20:02 IST\nmass_dns: warning: Unable to open /etc/resolv.conf. Try using --system-dns or specify valid servers with --dns-servers\nmass_dns: warning: Unable to determine any DNS servers. Reverse DNS is disabled. Try using --system-dns or specify valid servers with --dns-servers\nNmap scan report for XXXXX (IP_ADDRESS)\nHost is up (0.00067s latency).\n\nPORT     STATE SERVICE  VERSION\n8443/tcp open  ssl/http Apache httpd\n|_http-server-header: Apache\n| ssl-enum-ciphers:\n|   TLSv1.2:\n|     ciphers:\n|       TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 (secp256r1) - A\n|       TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384 (secp256r1) - A\n|       TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384 (secp256r1) - A\n|     compressors:\n|       NULL\n|     cipher preference: client\n|_  least strength: A\nMAC Address: 00:50:56:A7:92:7B (VMware)\n\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 12.90 seconds\n\n-----------------------------------------\n</code></pre>\n<p>Please find the configurations on &quot;ssl.conf&quot;,</p>\n<pre><code>SSLProtocol -ALL +TLSv1.2\nSSLCipherSuite ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:AES256-CCM:DHE-RSA-AES256-CCM\n</code></pre>\n<p>But we are in confusion that why the Nessus scan vulnerability shows the TLS 1.0 and TLS 1.1 protocols even though those 2 protocols are disabled in all possibilities.</p>\n<p>Vulnerability Details are listed below,</p>\n<ol>\n<li>104743 TLS Version 1.0 Protocol Detection</li>\n<li>157288 TLS Version 1.1 Protocol Deprecated</li>\n</ol>\n<p>From Nessus team, we came to know that port 4567 is using the below ciphers,</p>\n<pre><code>TLS1_DHE_DSS_WITH_AES_128_CBC_SHA256\nTLS1_DHE_DSS_WITH_AES_256_CBC_SHA256\nTLS1_CK_DHE_DSS_WITH_AES_128_CBC_SHA\nTLS1_CK_DHE_DSS_WITH_AES_256_CBC_SHA\nTLS1_CK_DHE_DSS_WITH_3DES_EDE_CBC_SHA\n</code></pre>\n<p>In our application, we are using port 4567 as TRUSTSTORE_PORT where it is downloading the required certificates for the application to run.</p>\n<p>But we enabled only the TLSv1.2 protocol. How the TLS1 ciphers are enabled?</p>\n<p>Please let me know how to overcome these vulnerabilities.</p>\n<p>Thanks in Advance.</p>\n"},{"answers":[{"comments":[{"comment_id":134554615,"body":"I&#39;ve eddited the post with example how I did it in the past. Would checking which parts in batch were unable to be uploaded and then uploadid then alone to find reason good way to find issue?"}],"answer_id":76270513,"body":"<p>You would only see information on why the batch failed if the entire batch failed. Partial failures do not indicate the reason for failure, this is the same for both Mapper and Enhanced client.</p>\n"}],"last_activity_date":1684736314,"question_id":76270267,"body":"<p>In the past while using DynamoDBMapper I was able to get information after batch put items about the error message. Right now doing the batch using EnchancedDynamoDBClient I can only get key of that item. Any way to get information why the batch for specific item didint work?</p>\n<pre><code>private void saveToDb(DynamoDbTable&lt;PartImportWarehouse&gt;partStockDataTable, List&lt;PartImportWarehouse&gt; modifiedImportaWrehouse, DynamoDbEnhancedClient dynamoDbEnhancedClient) {\n        WriteBatch.Builder&lt;PartImportWarehouse&gt; writeBatchBuilder = WriteBatch.builder(PartImportWarehouse.class)\n                .mappedTableResource(partStockDataTable);\n\n        modifiedImportaWrehouse.forEach(writeBatchBuilder::addPutItem);\n\n        BatchWriteItemEnhancedRequest batchRequestBuilder = BatchWriteItemEnhancedRequest.builder()\n                .addWriteBatch(writeBatchBuilder.build())\n                .build();\n\n        BatchWriteResult batchWriteResult = dynamoDbEnhancedClient.batchWriteItem(batchRequestBuilder);\n\n        if (!CollectionUtils.isEmpty(batchWriteResult.unprocessedPutItemsForTable(partStockDataTable))) {\n            log.warn(batchWriteResult.unprocessedPutItemsForTable(partStockDataTable).stream()\n                    .map(i -&gt; &quot;issue with &quot; + i.getKey())\n                    .collect(Collectors.joining(&quot;, &quot;)));\n        }\n    }\n\n</code></pre>\n<p>@Edit\nIn past I was able to get partial response for failed part with code like:\n<a href=\"https://i.stack.imgur.com/kRLCO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kRLCO.png\" alt=\"enter image description here\" /></a>\nDont mind the errors. I havent reloaded the project. But I was able to get errors for each part.</p>\n"},{"last_activity_date":1684735877,"question_id":76303408,"body":"<p>I have multiple messages which should be sent to a MQ 'foo'.\nAfter sending a message from 'route-1', the program should wait for a reply on MQ 'bar'.\nOnly after getting a reply on queue 'bar', the next message should be sent.</p>\n<p><a href=\"https://camel.apache.org/manual/faq/how-can-i-stop-a-route-from-a-route.html\" rel=\"nofollow noreferrer\">Apache camel Documentation</a></p>\n<p>I have followed the steps given in the documentation. All the messages are getting routed and then the route is getting suspended.</p>\n<p>input.txt\n<code>msg1,msg2,msg3,msg4,msg5</code></p>\n<p>beans.xml</p>\n<pre><code>    &lt;camelContext id=&quot;orc-1&quot; xmlns=&quot;http://camel.apache.org/schema/spring&quot;&gt;\n        &lt;route id=&quot;route-1&quot;&gt;\n            &lt;from uri=&quot;file://D://camelInput?fileName=input.txt&quot; /&gt;\n            &lt;split&gt;\n                &lt;tokenize token=&quot;,&quot; /&gt;\n                &lt;log message=&quot;${body}&quot; /&gt;\n                &lt;to uri=&quot;jms:queue:foo&quot; /&gt;\n                &lt;process ref=&quot;postProcessor&quot; /&gt;\n            &lt;/split&gt;\n        &lt;/route&gt;\n        &lt;route id=&quot;route-2&quot;&gt;\n            &lt;from uri=&quot;jms:queue:bar&quot; /&gt;\n        &lt;!--restart route-1--&gt;\n        &lt;/route&gt;\n    &lt;/camelContext&gt;\n</code></pre>\n<p>PostProcessor.java</p>\n<pre><code>public class PostProcessor implements Processor {\n\n    Thread stop;\n\n    @Override\n    public void process(Exchange exchange) throws Exception {\n        // stop this route using a thread that will stop\n        // this route gracefully while we are still running\n        if (stop == null) {\n            stop = new Thread() {\n                @Override\n                public void run() {\n                    try {\n                        exchange.getContext().getRouteController().suspendRoute(&quot;route-1&quot;);\n                    } catch (Exception e) {\n                        // ignore\n                    }\n                }\n            };\n        }\n        // start the thread that stops this route\n        stop.start();\n    }\n}\n\n</code></pre>\n<p>logs</p>\n<pre><code>  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::               (v2.7.11)\n\n2023-05-22 11:01:52.812  INFO 23484 --- [           main] com.persistent.camel.CamelApplication    : Starting CamelApplication using Java 14.0.2 on PSL-5Q47XM3 with PID 23484 (D:\\camel\\camel\\target\\classes started by shashank_mugatkar in D:\\camel\\camel)\n2023-05-22 11:01:52.815  INFO 23484 --- [           main] com.persistent.camel.CamelApplication    : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-05-22 11:01:54.951  INFO 23484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.3 (orc-1) is starting\n2023-05-22 11:01:55.146  INFO 23484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Routes startup (started:3)\n2023-05-22 11:01:55.147  INFO 23484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started route-1 (file://D://camelInput)\n2023-05-22 11:01:55.147  INFO 23484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started route-2 (jms://queue:bar)\n2023-05-22 11:01:55.147  INFO 23484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   :     Started route-3 (direct://suspendRoute1)\n2023-05-22 11:01:55.147  INFO 23484 --- [           main] o.a.c.impl.engine.AbstractCamelContext   : Apache Camel 3.20.3 (orc-1) started in 453ms (build:64ms init:195ms start:194ms)\n2023-05-22 11:01:55.157  INFO 23484 --- [           main] com.persistent.camel.CamelApplication    : Started CamelApplication in 2.742 seconds (JVM running for 3.157)\n2023-05-22 11:01:56.007  INFO 23484 --- [/D://camelInput] route-1                                  : msg0\n2023-05-22 11:01:56.035  INFO 23484 --- [/D://camelInput] route-1                                  : msg1\n2023-05-22 11:01:56.040  INFO 23484 --- [ - ShutdownTask] o.a.c.i.engine.DefaultShutdownStrategy   : Waiting as there are still 2 inflight and pending exchanges to complete, timeout in 45 seconds. Inflights per route: [route-1 = 2]\n2023-05-22 11:01:56.050 ERROR 23484 --- [/D://camelInput] o.a.c.p.e.DefaultErrorHandler            : Failed delivery for (MessageId: 23D21B5DF3A3295-0000000000000001 on ExchangeId: 23D21B5DF3A3295-0000000000000001). Exhausted after delivery attempt: 1 caught: java.lang.IllegalThreadStateException\n\nMessage History (source location and message history is disabled)\n---------------------------------------------------------------------------------------------------------------------------------------\nSource                                   ID                             Processor                                          Elapsed (ms)\n                                         route-1/route-1                from[file://D://camelInput?fileName=input.txt]          2539704\n    ...\n                                         route-1/process1               ref:postProcessor                                             0\n\nStacktrace\n---------------------------------------------------------------------------------------------------------------------------------------\n\njava.lang.IllegalThreadStateException: null\n    at java.base/java.lang.Thread.start(Thread.java:792) ~[na:na]\n    at com.persistent.camel.PostProcessor.process(PostProcessor.java:27) ~[classes/:na]\n    at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65) ~[camel-support-3.20.3.jar:3.20.3]\n    at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:477) ~[camel-core-processor-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.processor.Pipeline.process(Pipeline.java:165) ~[camel-core-processor-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:492) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:245) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:206) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:202) ~[camel-support-3.20.3.jar:3.20.3]\n    at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:116) ~[camel-support-3.20.3.jar:3.20.3]\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[na:na]\n    at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) ~[na:na]\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\n    at java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\n\n2023-05-22 11:01:56.051  INFO 23484 --- [/D://camelInput] route-1                                  : msg2\n2023-05-22 11:01:56.061 ERROR 23484 --- [/D://camelInput] o.a.c.p.e.DefaultErrorHandler            : Failed delivery for (MessageId: 23D21B5DF3A3295-0000000000000002 on ExchangeId: 23D21B5DF3A3295-0000000000000002). Exhausted after delivery attempt: 1 caught: java.lang.IllegalThreadStateException\n\nMessage History (source location and message history is disabled)\n---------------------------------------------------------------------------------------------------------------------------------------\nSource                                   ID                             Processor                                          Elapsed (ms)\n                                         route-1/route-1                from[file://D://camelInput?fileName=input.txt]          2539720\n    ...\n                                         route-1/process1               ref:postProcessor                                             0\n\nStacktrace\n---------------------------------------------------------------------------------------------------------------------------------------\n\njava.lang.IllegalThreadStateException: null\n    at java.base/java.lang.Thread.start(Thread.java:792) ~[na:na]\n    at com.persistent.camel.PostProcessor.process(PostProcessor.java:27) ~[classes/:na]\n    at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65) ~[camel-support-3.20.3.jar:3.20.3]\n    at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:477) ~[camel-core-processor-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.processor.Pipeline.process(Pipeline.java:165) ~[camel-core-processor-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:492) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:245) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:206) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:202) ~[camel-support-3.20.3.jar:3.20.3]\n    at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:116) ~[camel-support-3.20.3.jar:3.20.3]\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[na:na]\n    at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) ~[na:na]\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\n    at java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\n\n2023-05-22 11:01:56.062  INFO 23484 --- [/D://camelInput] route-1                                  : msg3\n2023-05-22 11:01:56.072 ERROR 23484 --- [/D://camelInput] o.a.c.p.e.DefaultErrorHandler            : Failed delivery for (MessageId: 23D21B5DF3A3295-0000000000000003 on ExchangeId: 23D21B5DF3A3295-0000000000000003). Exhausted after delivery attempt: 1 caught: java.lang.IllegalThreadStateException\n\nMessage History (source location and message history is disabled)\n---------------------------------------------------------------------------------------------------------------------------------------\nSource                                   ID                             Processor                                          Elapsed (ms)\n                                         route-1/route-1                from[file://D://camelInput?fileName=input.txt]          2539730\n    ...\n                                         route-1/process1               ref:postProcessor                                             0\n\nStacktrace\n---------------------------------------------------------------------------------------------------------------------------------------\n\njava.lang.IllegalThreadStateException: null\n    at java.base/java.lang.Thread.start(Thread.java:792) ~[na:na]\n    at com.persistent.camel.PostProcessor.process(PostProcessor.java:27) ~[classes/:na]\n    at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65) ~[camel-support-3.20.3.jar:3.20.3]\n    at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:477) ~[camel-core-processor-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.processor.Pipeline.process(Pipeline.java:165) ~[camel-core-processor-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:492) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:245) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:206) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:202) ~[camel-support-3.20.3.jar:3.20.3]\n    at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:116) ~[camel-support-3.20.3.jar:3.20.3]\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[na:na]\n    at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) ~[na:na]\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\n    at java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\n\n2023-05-22 11:01:56.072  INFO 23484 --- [/D://camelInput] route-1                                  : msg4\n\n2023-05-22 11:01:56.083 ERROR 23484 --- [/D://camelInput] o.a.c.p.e.DefaultErrorHandler            : Failed delivery for (MessageId: 23D21B5DF3A3295-0000000000000004 on ExchangeId: 23D21B5DF3A3295-0000000000000004). Exhausted after delivery attempt: 1 caught: java.lang.IllegalThreadStateException\n\nMessage History (source location and message history is disabled)\n---------------------------------------------------------------------------------------------------------------------------------------\nSource                                   ID                             Processor                                          Elapsed (ms)\n                                         route-1/route-1                from[file://D://camelInput?fileName=input.txt]          2539741\n    ...\n                                         route-1/process1               ref:postProcessor                                             0\n\nStacktrace\n---------------------------------------------------------------------------------------------------------------------------------------\n\njava.lang.IllegalThreadStateException: null\n    at java.base/java.lang.Thread.start(Thread.java:792) ~[na:na]\n    at com.persistent.camel.PostProcessor.process(PostProcessor.java:27) ~[classes/:na]\n    at org.apache.camel.support.processor.DelegateSyncProcessor.process(DelegateSyncProcessor.java:65) ~[camel-support-3.20.3.jar:3.20.3]\n    at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:477) ~[camel-core-processor-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:181) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:59) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.processor.Pipeline.process(Pipeline.java:165) ~[camel-core-processor-3.20.3.jar:3.20.3]\n    at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:392) ~[camel-base-engine-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:492) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:245) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:206) ~[camel-file-3.20.3.jar:3.20.3]\n    at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:202) ~[camel-support-3.20.3.jar:3.20.3]\n    at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:116) ~[camel-support-3.20.3.jar:3.20.3]\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[na:na]\n    at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) ~[na:na]\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na]\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na]\n    at java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]\n\n2023-05-22 11:01:56.083  WARN 23484 --- [/D://camelInput] o.a.c.c.file.GenericFileOnCompletion     : Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileRenameProcessStrategy@4436c7b8 for file: GenericFile[D:\\camelInput\\input.txt]\n2023-05-22 11:01:57.047  INFO 23484 --- [       Thread-3] o.a.c.impl.engine.AbstractCamelContext   : Suspended route-1 (file://D://camelInput)\n\n</code></pre>\n"},{"last_activity_date":1684735678,"question_id":76303412,"body":"<p>in jenkins when run the freestyle project it show the blank report.</p>\n<p><a href=\"https://i.stack.imgur.com/PDVbL.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>-- i need all the log which run in my local machine but does not generate in the jenkins. also it generated the html file but it show blank white page.</p>\n"},{"comments":[{"comment_id":134554474,"body":"Can you edit the question with your code"},{"comment_id":134554538,"body":"Which code are you asking?"},{"comment_id":134554622,"body":"provide the code which you are trying in the question"},{"comment_id":134555891,"body":"The error <code>java.lang.IllegalStateException: zip file closed</code> indicate a broken dependency. You can find a similar issue here : <a href=\"https://stackoverflow.com/questions/75694101/spring-boot-tomcat-server-not-starting-due-to-zip-file-closed\">Spring boot Tomcat server not starting due to zip file closed</a>"}],"last_activity_date":1684735459,"question_id":76303341,"body":"<p>I am deploying a springboot app on azure. It shows deployed successfully but when i enter the url in the browser it gives me application failed to start error everytime ?</p>\n<p>My application also contains tomcat to render jsp pages. So then i tried to deployed one simple app without tomcat and it worked fine . But after adding tomcat in it also gives me same error. I tried changing ports, gave startup command but nothing worked .\napplication logs are as below.</p>\n<pre><code>2023-05-15T11:32:08.139273507Z    _|_|                                            \n2023-05-15T11:32:08.139308107Z  _|    _|  _|_|_|_|  _|    _|  _|  _|_|    _|_|    \n2023-05-15T11:32:08.139313407Z  _|_|_|_|      _|    _|    _|  _|_|      _|_|_|_|  \n2023-05-15T11:32:08.139317007Z  _|    _|    _|      _|    _|  _|        _|        \n2023-05-15T11:32:08.139320907Z  _|    _|  _|_|_|_|    _|_|_|  _|          _|_|_|\n2023-05-15T11:32:08.139324507Z \n2023-05-15T11:32:08.139327807Z      J A V A   O N   A P P   S E R V I C E\n2023-05-15T11:32:08.139331207Z \n2023-05-15T11:32:08.139334307Z Documentation: https://aka.ms/appservice\n2023-05-15T11:32:08.139337607Z \n2023-05-15T11:32:08.139340907Z **NOTE**: No files or system changes outside of /home will persist beyond your application's current session. /home is your application's persistent storage and is shared across all the server instances.\n2023-05-15T11:32:08.139347707Z \n2023-05-15T11:32:08.139350907Z \n2023-05-15T11:32:08.139672109Z Updating /etc/ssh/sshd_config to use PORT 2222\n2023-05-15T11:32:08.158498691Z Starting ssh service...\n2023-05-15T11:32:08.285563646Z ssh-keygen: generating new host keys: DSA \n2023-05-15T11:32:08.694137330Z  * Starting OpenBSD Secure Shell server sshd\n2023-05-15T11:32:08.896999716Z    ...done.\n2023-05-15T11:32:08.999859765Z  * sshd is running\n2023-05-15T11:32:09.044667760Z ## Printing build info...\n2023-05-15T11:32:09.067252659Z                                            PACKAGE |                             VERSION | COMMIT\n2023-05-15T11:32:09.067285559Z        Microsoft.AppService.WebsitesExtensionsJava |                          1.0.022547 | 5d33e9c4\n2023-05-15T11:32:09.067290859Z                                               self |                         1.0.0228639 | 693c2b72\n2023-05-15T11:32:09.067884861Z ## Done printing build info.\n2023-05-15T11:32:09.068095462Z Container info: WEBSITE_INSTANCE_ID = 08307498aa991c84523184617d17f074bad5139bd2c0710fdf2b1a0ad3d3a9b7 ; WEBSITE_SITE_NAME = smartinventorytest\n2023-05-15T11:32:09.090823161Z Add public certificates to keystore if exists...\n2023-05-15T11:32:09.091065862Z Add private certificates to keystore if exists...\n2023-05-15T11:32:09.091741665Z Configuring max heap = 1253 MB\n2023-05-15T11:32:09.175821032Z STARTUP_FILE=\n2023-05-15T11:32:09.175988833Z STARTUP_COMMAND=\n2023-05-15T11:32:09.176150333Z No STARTUP_FILE available.\n2023-05-15T11:32:09.176305034Z No STARTUP_COMMAND defined.\n2023-05-15T11:32:09.738843887Z Picked up JAVA_TOOL_OPTIONS: -Xmx1253M -Djava.net.preferIPv4Stack=true -javaagent:/agents/java/applicationinsights-agent-codeless.jar\n2023-05-15T11:32:10.950209262Z OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended\n2023-05-15T11:32:36.661153333Z Mangled result from Jar entry point parser is: 2023-05-15 11:32:35.390Z INFO  c.m.applicationinsights.agent - Application Insights Java Agent 3.4.6 started successfully (PID 45, JVM running for 25.629 s)\n2023-05-15T11:32:36.661227834Z 2023-05-15 11:32:35.479Z INFO  c.m.applicationinsights.agent - Java version: 17.0.4.1, vendor: Microsoft, home: /opt/java/openjdk\n2023-05-15T11:32:36.663417543Z __COM_MICROSOFT_AZURE_APPSERVICE_JARENTRYPOINT_PREFIX__org.springframework.boot.loader.JarLauncher__COM_MICROSOFT_AZURE_APPSERVICE_JARENTRYPOINT_SUFFIX__\n2023-05-15T11:32:36.713372862Z Extracted jar entry point. Class name is: 'org.springframework.boot.loader.JarLauncher'\n2023-05-15T11:32:36.742933092Z Defaulting to UTF-8\n2023-05-15T11:32:36.749596921Z Running command: java -cp /home/site/wwwroot/app.jar:/usr/local/appservice/lib/azure.appservice.jar: -Djava.util.logging.config.file=/usr/local/appservice/logging.properties -Dfile.encoding=UTF-8  -Dserver.port=80 -XX:ErrorFile=/home/LogFiles/java_error_smartinventorytest_lw0sdlwk000628_%p.log -XX:+CrashOnOutOfMemoryError -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/home/LogFiles/java_memdump_smartinventorytest_lw0sdlwk000628.log -Duser.dir=/home/site/wwwroot org.springframework.boot.loader.JarLauncher\n2023-05-15T11:32:36.750310224Z Launched child process with pid: 92\n2023-05-15T11:32:36.769582309Z Picked up JAVA_TOOL_OPTIONS: -Xmx1253M -Djava.net.preferIPv4Stack=true -javaagent:/agents/java/applicationinsights-agent-codeless.jar\n2023-05-15T11:32:36.788062590Z Waiting for main process to exit. GLOBAL_PID_MAIN=92\n2023-05-15T11:32:36.789243695Z Waiting for GLOBAL_PID_MAIN == 92\n2023-05-15T11:32:37.201911805Z OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended\n2023-05-15T11:32:53.543964388Z 2023-05-15 11:32:53.496Z INFO  c.m.applicationinsights.agent - Application Insights Java Agent 3.4.6 started successfully (PID 92, JVM running for 16.717 s)\n2023-05-15T11:32:53.545481794Z 2023-05-15 11:32:53.544Z INFO  c.m.applicationinsights.agent - Java version: 17.0.4.1, vendor: Microsoft, home: /opt/java/openjdk\n2023-05-15T11:33:08.836203647Z \n2023-05-15T11:33:08.837511552Z   .   ____          _            __ _ _\n2023-05-15T11:33:08.837528552Z  /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n2023-05-15T11:33:08.838708157Z ( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n2023-05-15T11:33:08.838727257Z  \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n2023-05-15T11:33:08.838732557Z   '  |____| .__|_| |_|_| |_\\__, | / / / /\n2023-05-15T11:33:08.838947258Z  =========|_|==============|___/=/_/_/_/\n2023-05-15T11:33:08.857923037Z  :: Spring Boot ::                (v3.0.4)\n2023-05-15T11:33:08.865216167Z \n2023-05-15T11:33:10.726461402Z 2023-05-15T11:33:10.564Z  INFO 92 --- [           main] c.e.s.SmartInventoryApplication          : Starting SmartInventoryApplication v0.0.1-SNAPSHOT using Java 17.0.4.1 with PID 92 (/home/site/wwwroot/app.jar started by root in /home/site/wwwroot)\n2023-05-15T11:33:10.757303030Z 2023-05-15T11:33:10.756Z  INFO 92 --- [           main] c.e.s.SmartInventoryApplication          : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-05-15T11:33:21.052113071Z 2023-05-15T11:33:21.051Z  INFO 92 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode\n2023-05-15T11:33:21.310293128Z 2023-05-15T11:33:21.309Z  INFO 92 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2023-05-15T11:33:22.184496304Z 2023-05-15T11:33:22.178Z  INFO 92 --- [           main] .RepositoryConfigurationExtensionSupport : Spring Data JPA - Could not safely identify store assignment for repository candidate interface com.einfochips.smartinventory.mongorepository.ProductRackRepository; If you want this repository to be a JPA repository, consider annotating your entities with one of these annotations: jakarta.persistence.Entity, jakarta.persistence.MappedSuperclass (preferred), or consider extending one of the following types with your repository: org.springframework.data.jpa.repository.JpaRepository\n2023-05-15T11:33:22.445876173Z 2023-05-15T11:33:22.445Z  INFO 92 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 1009 ms. Found 8 JPA repository interfaces.\n2023-05-15T11:33:23.027809451Z 2023-05-15T11:33:23.026Z  INFO 92 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode\n2023-05-15T11:33:23.044610520Z 2023-05-15T11:33:23.044Z  INFO 92 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.\n2023-05-15T11:33:23.130282469Z 2023-05-15T11:33:23.092Z  INFO 92 --- [           main] .RepositoryConfigurationExtensionSupport : Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.einfochips.smartinventory.userrepository.OrderItemRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository\n2023-05-15T11:33:23.130323169Z 2023-05-15T11:33:23.101Z  INFO 92 --- [           main] .RepositoryConfigurationExtensionSupport : Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.einfochips.smartinventory.userrepository.OrderRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository\n2023-05-15T11:33:23.130330569Z 2023-05-15T11:33:23.102Z  INFO 92 --- [           main] .RepositoryConfigurationExtensionSupport : Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.einfochips.smartinventory.userrepository.InventoryRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository\n2023-05-15T11:33:23.130337369Z 2023-05-15T11:33:23.102Z  INFO 92 --- [           main] .RepositoryConfigurationExtensionSupport : Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.einfochips.smartinventory.userrepository.CustomerRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository\n2023-05-15T11:33:23.130354969Z 2023-05-15T11:33:23.103Z  INFO 92 --- [           main] .RepositoryConfigurationExtensionSupport : Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.einfochips.smartinventory.userrepository.SupplierRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository\n2023-05-15T11:33:23.130360370Z 2023-05-15T11:33:23.112Z  INFO 92 --- [           main] .RepositoryConfigurationExtensionSupport : Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.einfochips.smartinventory.userrepository.UserRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository\n2023-05-15T11:33:23.130365470Z 2023-05-15T11:33:23.113Z  INFO 92 --- [           main] .RepositoryConfigurationExtensionSupport : Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.einfochips.smartinventory.userrepository.RoleRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository\n2023-05-15T11:33:23.130370870Z 2023-05-15T11:33:23.114Z  INFO 92 --- [           main] .RepositoryConfigurationExtensionSupport : Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.einfochips.smartinventory.userrepository.ProductRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository\n2023-05-15T11:33:23.201258959Z 2023-05-15T11:33:23.181Z  INFO 92 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 133 ms. Found 1 MongoDB repository interfaces.\n2023-05-15T11:33:33.320694911Z 2023-05-15T11:33:33.320Z  INFO 92 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 80 (http)\n2023-05-15T11:33:33.687390964Z x-ms-applog:Informational:base64:SW5pdGlhbGl6aW5nIFByb3RvY29sSGFuZGxlciBbImh0dHAtbmlvLTgwIl0Kc291cmNlOiBvcmcuYXBhY2hlLmNveW90ZS5BYnN0cmFjdFByb3RvY29sCm1ldGhvZDogaW5pdApsb2dnZXI6IG9yZy5hcGFjaGUuY295b3RlLmh0dHAxMS5IdHRwMTFOaW9Qcm90b2NvbA==\n2023-05-15T11:33:33.689729674Z x-ms-applog:Informational:base64:U3RhcnRpbmcgc2VydmljZSBbVG9tY2F0XQpzb3VyY2U6IG9yZy5hcGFjaGUuY2F0YWxpbmEuY29yZS5TdGFuZGFyZFNlcnZpY2UKbWV0aG9kOiBzdGFydEludGVybmFsCmxvZ2dlcjogb3JnLmFwYWNoZS5jYXRhbGluYS5jb3JlLlN0YW5kYXJkU2VydmljZQ==\n2023-05-15T11:33:33.792184880Z x-ms-applog:Informational:base64:U3RhcnRpbmcgU2VydmxldCBlbmdpbmU6IFtBcGFjaGUgVG9tY2F0LzEwLjEuNV0Kc291cmNlOiBvcmcuYXBhY2hlLmNhdGFsaW5hLmNvcmUuU3RhbmRhcmRFbmdpbmUKbWV0aG9kOiBzdGFydEludGVybmFsCmxvZ2dlcjogb3JnLmFwYWNoZS5jYXRhbGluYS5jb3JlLlN0YW5kYXJkRW5naW5l\napplog:Informational:base64:UGF1c2luZyBQcm90b2NvbEhhbmRsZXIgWyJodHRwLW5pby04MCJdCnNvdXJjZTogb3JnLmFwYWNoZS5jb3lvdGUuQWJzdHJhY3RQcm90b2NvbAptZXRob2Q6IHBhdXNlCmxvZ2dlcjogb3JnLmFwYWNoZS5jb3lvdGUuaHR0cDExLkh0dHAxMU5pb1Byb3RvY29s\n2023-05-15T11:33:34.943494939Z x-ms-applog:Informational:base64:U3RvcHBpbmcgc2VydmljZSBbVG9tY2F0XQpzb3VyY2U6IG9yZy5hcGFjaGUuY2F0YWxpbmEuY29yZS5TdGFuZGFyZFNlcnZpY2UKbWV0aG9kOiBzdG9wSW50ZXJuYWwKbG9nZ2VyOiBvcmcuYXBhY2hlLmNhdGFsaW5hLmNvcmUuU3RhbmRhcmRTZXJ2aWNl\n2023-05-15T11:33:34.988862618Z x-ms-applog:Informational:base64:RGVzdHJveWluZyBQcm90b2NvbEhhbmRsZXIgWyJodHRwLW5pby04MCJdCnNvdXJjZTogb3JnLmFwYWNoZS5jb3lvdGUuQWJzdHJhY3RQcm90b2NvbAptZXRob2Q6IGRlc3Ryb3kKbG9nZ2VyOiBvcmcuYXBhY2hlLmNveW90ZS5odHRwMTEuSHR0cDExTmlvUHJvdG9jb2w=\n2023-05-15T11:33:35.330861970Z 2023-05-15T11:33:35.313Z  WARN 92 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Unable to start web server\n2023-05-15T11:33:35.407655774Z 2023-05-15T11:33:35.407Z  INFO 92 --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : \n2023-05-15T11:33:35.407737474Z \n2023-05-15T11:33:35.407747974Z Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2023-05-15T11:33:35.695403212Z 2023-05-15T11:33:35.598Z ERROR 92 --- [           main] o.s.boot.SpringApplication               : Application run failed\n2023-05-15T11:33:35.695474212Z \n2023-05-15T11:33:35.695481012Z org.springframework.context.ApplicationContextException: Unable to start web server\n2023-05-15T11:33:35.695486012Z  at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:164) ~[spring-boot-3.0.4.jar!/:3.0.4]\n2023-05-15T11:33:35.695491212Z  at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:578) ~[spring-context-6.0.6.jar!/:6.0.6]\n2023-05-15T11:33:35.695516812Z  at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.4.jar!/:3.0.4]\n2023-05-15T11:33:35.695522412Z  at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:732) ~[spring-boot-3.0.4.jar!/:3.0.4]\n2023-05-15T11:33:35.695526712Z  at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434) ~[spring-boot-3.0.4.jar!/:3.0.4]\n2023-05-15T11:33:35.695530612Z  at org.springframework.boot.SpringApplication.run(SpringApplication.java:310) ~[spring-boot-3.0.4.jar!/:3.0.4]\n2023-05-15T11:33:35.695534512Z  at org.springframework.boot.SpringApplication.run(SpringApplication.java:1304) ~[spring-boot-3.0.4.jar!/:3.0.4]\n2023-05-15T11:33:35.695538512Z  at org.springframework.boot.SpringApplication.run(SpringApplication.java:1293) ~[spring-boot-3.0.4.jar!/:3.0.4]\n2023-05-15T11:33:35.695542512Z  at com.einfochips.smartinventory.SmartInventoryApplication.main(SmartInventoryApplication.java:13) ~[classes!/:0.0.1-SNAPSHOT]\n2023-05-15T11:33:35.695546512Z  at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n2023-05-15T11:33:35.695550412Z  at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n2023-05-15T11:33:35.695554412Z  at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n2023-05-15T11:33:35.695558312Z  at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n2023-05-15T11:33:35.695562212Z  at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49) ~[app.jar:0.0.1-SNAPSHOT]\n2023-05-15T11:33:35.695566112Z  at org.springframework.boot.loader.Launcher.launch(Launcher.java:95) ~[app.jar:0.0.1-SNAPSHOT]\n2023-05-15T11:33:35.695572412Z  at org.springframework.boot.loader.Launcher.launch(Launcher.java:58) ~[app.jar:0.0.1-SNAPSHOT]\n2023-05-15T11:33:35.695576812Z  at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65) ~[app.jar:0.0.1-SNAPSHOT]\n2023-05-15T11:33:35.695580712Z Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat\n2023-05-15T11:33:35.695584712Z  at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:142) ~[spring-boot-3.0.4.jar!/:3.0.4]\n2023-05-15T11:33:35.695588812Z  at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.&lt;init&gt;(TomcatWebServer.java:104) ~[spring-boot-3.0.4.jar!/:3.0.4]\n2023-05-15T11:33:35.695593012Z  at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getTomcatWebServer(TomcatServletWebServerFactory.java:488) ~[spring-boot-3.0.4.jar!/:3.0.4]\n2023-05-15T11:33:35.695597212Z  at org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory.getWebServer(TomcatServletWebServerFactory.java:210) ~[spring-boot-3.0.4.jar!/:3.0.4]\n2023-05-15T11:33:35.695601312Z  at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.createWebServer(ServletWebServerApplicationContext.java:183) ~[spring-boot-3.0.4.jar!/:3.0.4]\n2023-05-15T11:33:35.695610112Z  at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.onRefresh(ServletWebServerApplicationContext.java:161) ~[spring-boot-3.0.4.jar!/:3.0.4]\n2023-05-15T11:33:35.695614412Z  ... 16 common frames omitted\n2023-05-15T11:33:35.695618312Z Caused by: org.apache.catalina.LifecycleException: A child container failed during start\n2023-05-15T11:33:35.695622212Z  at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:935) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.695626212Z  at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:252) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.695630112Z  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.695634112Z  at org.apache.catalina.core.StandardService.startInternal(StandardService.java:430) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.695638112Z  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.695642012Z  at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:926) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.695646312Z  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.695650412Z  at org.apache.catalina.startup.Tomcat.start(Tomcat.java:485) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.695654413Z  at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.initialize(TomcatWebServer.java:123) ~[spring-boot-3.0.4.jar!/:3.0.4]\n2023-05-15T11:33:35.695658513Z  ... 21 common frames omitted\n2023-05-15T11:33:35.695662213Z Caused by: java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: A child container failed during start\n2023-05-15T11:33:35.695666313Z  at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122) ~[na:na]\n2023-05-15T11:33:35.695670213Z  at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191) ~[na:na]\n2023-05-15T11:33:35.695674113Z  at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:923) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.695678013Z  ... 29 common frames omitted\n2023-05-15T11:33:35.695681813Z Caused by: org.apache.catalina.LifecycleException: A child container failed during start\n2023-05-15T11:33:35.695685713Z  at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:935) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.695689713Z  at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:886) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.695693513Z  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.695697413Z  at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1393) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.707428759Z  at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1383) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.707446959Z  at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\n2023-05-15T11:33:35.707452259Z  at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-util-10.1.5.jar!/:10.1.5]\n2023-05-15T11:33:35.707456659Z  at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145) ~[na:na]\n2023-05-15T11:33:35.707460759Z  at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:916) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.707464759Z  ... 29 common frames omitted\n2023-05-15T11:33:35.707482359Z Caused by: java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].TomcatEmbeddedContext[]]\n2023-05-15T11:33:35.707488859Z  at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122) ~[na:na]\n2023-05-15T11:33:35.707493059Z  at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:191) ~[na:na]\n2023-05-15T11:33:35.707496959Z  at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:923) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.707503659Z  ... 37 common frames omitted\n2023-05-15T11:33:35.707507559Z Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Tomcat].StandardHost[localhost].TomcatEmbeddedContext[]]\n2023-05-15T11:33:35.707511659Z  at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.707515559Z  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.707519659Z  at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1393) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.707523559Z  at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1383) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.707527459Z  at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\n2023-05-15T11:33:35.760145767Z  at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75) ~[tomcat-util-10.1.5.jar!/:10.1.5]\n2023-05-15T11:33:35.760182468Z  at java.base/java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:145) ~[na:na]\n2023-05-15T11:33:35.760188268Z  at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:916) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.760192768Z  ... 37 common frames omitted\n2023-05-15T11:33:35.760196968Z Caused by: java.lang.IllegalStateException: zip file closed\n2023-05-15T11:33:35.760201168Z  at java.base/java.util.zip.ZipFile.ensureOpen(ZipFile.java:831) ~[na:na]\n2023-05-15T11:33:35.760205168Z  at java.base/java.util.zip.ZipFile.getManifestName(ZipFile.java:1057) ~[na:na]\n2023-05-15T11:33:35.760221968Z  at java.base/java.util.zip.ZipFile$1.getManifestName(ZipFile.java:1100) ~[na:na]\n2023-05-15T11:33:35.760226368Z  at java.base/java.util.jar.JarFile.getManEntry(JarFile.java:937) ~[na:na]\n2023-05-15T11:33:35.760230468Z  at java.base/java.util.jar.JarFile.checkForSpecialAttributes(JarFile.java:1000) ~[na:na]\n2023-05-15T11:33:35.760234368Z  at java.base/java.util.jar.JarFile.isMultiRelease(JarFile.java:389) ~[na:na]\n2023-05-15T11:33:35.760243268Z  at org.apache.tomcat.util.scan.JarFileUrlJar.&lt;init&gt;(JarFileUrlJar.java:68) ~[tomcat-util-scan-10.1.5.jar!/:10.1.5]\n2023-05-15T11:33:35.760247768Z  at org.apache.tomcat.util.scan.JarFactory.newInstance(JarFactory.java:41) ~[tomcat-util-scan-10.1.5.jar!/:10.1.5]\n2023-05-15T11:33:35.760251768Z  at org.apache.tomcat.util.scan.StandardJarScanner.process(StandardJarScanner.java:393) ~[tomcat-util-scan-10.1.5.jar!/:10.1.5]\n2023-05-15T11:33:35.760255768Z  at org.apache.tomcat.util.scan.StandardJarScanner.processURLs(StandardJarScanner.java:328) ~[tomcat-util-scan-10.1.5.jar!/:10.1.5]\n2023-05-15T11:33:35.760259768Z  at org.apache.tomcat.util.scan.StandardJarScanner.doScanClassPath(StandardJarScanner.java:271) ~[tomcat-util-scan-10.1.5.jar!/:10.1.5]\n2023-05-15T11:33:35.760263768Z  at org.apache.tomcat.util.scan.StandardJarScanner.scan(StandardJarScanner.java:234) ~[tomcat-util-scan-10.1.5.jar!/:10.1.5]\n2023-05-15T11:33:35.760267868Z  at org.apache.jasper.servlet.TldScanner.scanJars(TldScanner.java:262) ~[tomcat-jasper-10.1.5.jar!/:10.1.5]\n2023-05-15T11:33:35.760271868Z  at org.apache.jasper.servlet.TldScanner.scan(TldScanner.java:104) ~[tomcat-jasper-10.1.5.jar!/:10.1.5]\n2023-05-15T11:33:35.760275668Z  at org.apache.jasper.servlet.JasperInitializer.onStartup(JasperInitializer.java:83) ~[tomcat-jasper-10.1.5.jar!/:10.1.5]\n2023-05-15T11:33:35.760280468Z  at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5144) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.760339168Z  at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[tomcat-embed-core-10.1.5.jar!/:na]\n2023-05-15T11:33:35.760352668Z  ... 43 common frames omitted\n2023-05-15T11:33:35.760356968Z \n2023-05-15T11:33:36.279834820Z Wait for pid == 92 either returned successfully or was interrupted due to a signal 92\n2023-05-15T11:33:36.315925763Z Done waiting for main process. GLOBAL_PID_MAIN=92.\n2023-05-15T11:33:36.315965163Z Exiting entry script!\n\n</code></pre>\n"},{"answers":[{"comments":[{"comment_id":87462659,"body":"I just added my missing config which starts up my containers upon another event, this way:  ` \t\tfor (final MessageListenerContainer listenerContainer : registry.getListenerContainers()) { \t\t\tlistenerContainer.start(); \t\t}"},{"comment_id":87463089,"body":"Right but that won&#39;t start the <code>messageListenerContainer</code> <code>@Bean</code> - that one is a bean rather than being created for a <code>@RabbitListener</code>. You have to add the post processors to the listener container factory, not that container bean, if you want them applied to annotated listeners. It looks like you might be confusing <code>DirectMessageListenerContainer</code> with <code>DirectRabbitListenerContainerFactory</code> which is what is used to create one of the former for each listener."},{"comment_id":87463693,"body":"Fixed.   I am now using the DirectRabbitListenerContainerFactory and have set my post processors on it.  They&#39;re now being used.   Big thanks Gary."},{"comment_id":87463977,"body":"Gary, I got an exception:  <code>Caused by: java.io.UnsupportedEncodingException: gzip:UTF-8</code> `\tat java.lang.StringCoding.decode(StringCoding.java:190) ~[?:1.8.0_152]` `\tat java.lang.String.&lt;init&gt;(String.java:426) ~[?:1.8.0_152]` `\tat java.lang.String.&lt;init&gt;(String.java:491) ~[?:1.8.0_152]` `\tat org.springframework.amqp.support.converter.Jackson2JsonMessa&zwnj;&#8203;geConverter.convertB&zwnj;&#8203;ytesToObject(Jackson&zwnj;&#8203;2JsonMessageConverte&zwnj;&#8203;r.java:215)` `\tat org.springframework.amqp.support.converter.Jackson2JsonMessa&zwnj;&#8203;geConverter.fromMess&zwnj;&#8203;age(Jackson2JsonMess&zwnj;&#8203;ageConverter.java:17&zwnj;&#8203;9) `"},{"comment_id":87464214,"body":"Don&#39;t put stuff like that in comments; it&#39;s hard to read. I suggest you start a new question, showing your current code/configuration. It sounds like the uncompress MPP is not being applied. The Gzip MPP prefixes the <code>contentEncoding</code> message property with <code>gzip:</code> and the Unzip MPP strips the prefix off. The fact that the prefix is still there when the JSON converter is called indicates it was not unzipped."}],"answer_id":50222513,"body":"<p>It doesn't work that way, you can't autowire containers for <code>@RabbitListener</code>s; they are not beans; they are created by the container factory and registered in the registry. Instead you have to retrieve them from the registry (by id).</p>\n\n<p>However, since you have <code>autoStartup</code> set to false, it shouldn't be \"stealing\" messages from your <code>@RabbitListener</code>.</p>\n\n<p>Generally, DEBUG logging should help.</p>\n"},{"answer_id":76303396,"body":"<p>The official guide explains it at <a href=\"https://docs.spring.io/spring-amqp/reference/html/#post-processing\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-amqp/reference/html/#post-processing</a></p>\n<p>Basically there are couple of options i.e.</p>\n<ol>\n<li><p>Configure Message convertor like below</p>\n<pre><code>public class CompressionMessageConverter {\npublic static MessageConverter messageConverter() {\n    final MessageConverter simpleMessageConverter = new SimpleMessageConverter();\n    return new MessageConverter() {\n        @Override\n        public Message toMessage(Object messagePayload, MessageProperties messageProperties)\n                throws MessageConversionException {\n            final Message m = simpleMessageConverter.toMessage(messagePayload, messageProperties);\n            final ByteArrayOutputStream os = new ByteArrayOutputStream();\n            try (GZIPOutputStream gz = new GZIPOutputStream(os)) {\n                gz.write(m.getBody());\n            } catch (IOException e) {\n                throw new MessageConversionException(e.getMessage());\n            }\n\n            return new Message(os.toByteArray(), messageProperties);\n        }\n\n        @Override\n        public Object fromMessage(Message messagePayload) throws MessageConversionException {\n            final ByteArrayOutputStream os = new ByteArrayOutputStream();\n            try (GZIPInputStream is = new GZIPInputStream(new ByteArrayInputStream(messagePayload.getBody()))) {\n                byte[] b = new byte[2048];\n                int r;\n                while ((r = is.read(b)) != -1) {\n                    os.write(b, 0, r);\n                }\n            } catch (IOException ioException) {\n                throw new RuntimeException(ioException);\n            }\n\n            return simpleMessageConverter.fromMessage(new Message(os.toByteArray(), messagePayload.getMessageProperties()));\n        }\n    };\n}\n</code></pre>\n</li>\n</ol>\n<p>Use it in RabbitTemplate as</p>\n<pre><code>rabbitTemplate.setMessageConverter(CompressionMessageConverter .messageConverter());\n</code></pre>\n<ol start=\"2\">\n<li><p>Use post processors</p>\n<p>rabbitTemplate.setBeforePublishPostProcessors(new GZipPostProcessor());\nrabbitTemplate.setAfterReceivePostProcessors(new GUnzipPostProcessor());</p>\n</li>\n</ol>\n"}],"last_activity_date":1684735455,"question_id":50222164,"body":"<p>I have modified my RabbitMQ from a previous post (<a href=\"https://stackoverflow.com/questions/49566278/spring-rabbit-json-deserialization-for-arraylist-contents\">spring-rabbit JSON deserialization for ArrayList contents</a>) to now use a DirectMessageListener with MessagePostProcessors to GZip and GUnzip the message payloads.</p>\n\n<p>However, it doesn't appear to be working as the breakpoints are not activated, but also because my <code>RabbitListener</code>s are no longer receiving messages, whereas they did with a <code>SimpleMessageFactoryListenerContainer</code>.\nAlso, it appears the SimpleMessageListenerContainer(?) is still being used.  On a side-note, I am autowiring the <code>DirectMessageListenerContainer</code> so I can dynamically set the queues I used.</p>\n\n<hr>\n\n<p><strong><em>spring-rabbit: 2.0.3.RELEASE.</em></strong>\n<strong><em>spring-boot:  2.0.1.RELEASE.</em></strong></p>\n\n<hr>\n\n<p><strong>RabbitMQ configuration:</strong></p>\n\n<pre><code>@Configuration\n@EnableRabbit\npublic class MessagingConfiguration implements ShutdownListener {\n\n    @Autowired\n    private RabbitListenerEndpointRegistry registry;\n\n    @Autowired\n    private DirectMessageListenerContainer container;\n\n    @Bean\n    public DirectMessageListenerContainer messageListenerContainer(final ConnectionFactory connectionFactory) {\n        final DirectMessageListenerContainer listenerContainer = new DirectMessageListenerContainer();\n        listenerContainer.setConnectionFactory(connectionFactory);\n        listenerContainer.setMessageConverter(jsonConverter()); // i.e.@RabbitListener to use Jackson2JsonMessageConverter\n        listenerContainer.setAutoStartup(false);\n        // container.setErrorHandler(errorHandler);\n        final MessageListenerAdapter messageListener = new MessageListenerAdapter(new Object() {\n            @SuppressWarnings(\"unused\")\n            public String handleMessage(final String message) {\n                return message.toUpperCase();\n            }\n        });\n        messageListener.setBeforeSendReplyPostProcessors(new GZipPostProcessor());\n        listenerContainer.setMessageListener(messageListener);\n        listenerContainer.setAfterReceivePostProcessors(new GUnzipPostProcessor());\n        return listenerContainer;\n    }\n\n    @EventListener(ApplicationDatabaseReadyEvent.class)\n    public void onApplicationDatabaseReadyEvent() {\n        log.info(\"Starting all RabbitMQ Listeners...\"); //$NON-NLS-1$\n        for (final MessageListenerContainer listenerContainer : registry.getListenerContainers()) {\n            listenerContainer.start();\n        }\n        log.info(\"Register is running: {}\", registry.isRunning()); //$NON-NLS-1$\n        log.info(\"Started all RabbitMQ Listeners.\"); //$NON-NLS-1$\n    }\n\n    @Bean\n    public List&lt;Declarable&gt; bindings() {\n    final List&lt;Declarable&gt; declarations = new ArrayList&lt;&gt;();\n        final FanoutExchange exchange = new FanoutExchange(\"fx\", true, false);\n        final Queue queue = QueueBuilder.durable(\"orders\").build();\n        declarations.add(exchange);\n        declarations.add(queue);\n        declarations.add(BindingBuilder.bind(queue).to(exchange));\n        List&lt;String&gt; q = new ArrayList&lt;&gt;();\n        q.add(queue.getName());\n    container.addQueueNames(q.toArray(new String[queues.size()]));\n\n        return declarations;\n    }\n\n    @Bean\n    public Jackson2JsonMessageConverter jsonConverter() {\n        final Jackson2JsonMessageConverter converter = new Jackson2JsonMessageConverter();\n        converter.setClassMapper(classMapper());\n        return converter;\n    }\n\n    private static DefaultJackson2JavaTypeMapper classMapper() {\n        final DefaultJackson2JavaTypeMapper classMapper = new DefaultJackson2JavaTypeMapper();\n        classMapper.setTrustedPackages(\"*\"); //$NON-NLS-1$  //TODO add trusted packages\n        return classMapper;\n    }\n\n    @ConditionalOnProperty(name = \"consumer\", havingValue = \"true\")\n    @Bean\n    public ConsumerListener listenerConsumer() {\n        return new ConsumerListener();\n    }\n\n    @ConditionalOnProperty(name = \"producer\", havingValue = \"true\")\n    @Bean\n    public ProducerListener listenerProducer() {\n        return new ProducerListener();\n    }\n\n    @Bean\n    public RabbitAdmin rabbitAdmin(final CachingConnectionFactory connectionFactory) {\n        return new RabbitAdmin(connectionFactory);\n    }\n\n    @Bean\n    public RabbitTemplate rabbitTemplate(final ConnectionFactory connectionFactory) {\n        final RabbitTemplate rabbitTemplate = new RabbitTemplate(connectionFactory);\n        rabbitTemplate.setMessageConverter(jsonConverter()); // convert all sent messages to JSON\n        rabbitTemplate.setReplyTimeout(TimeUnit.SECONDS.toMillis(3));\n        rabbitTemplate.setReceiveTimeout(TimeUnit.SECONDS.toMillis(3));\n        return rabbitTemplate;\n    }\n\n    @Override\n    public void shutdownCompleted(final ShutdownSignalException arg0) {\n    }\n}\n</code></pre>\n"},{"comments":[{"comment_id":134564429,"body":"Hard to say what is going on exactly, but unless your app is doing something particularly disk intensive, &quot;too many open files&quot; typically means too many open network connections. Linux considers them to be &quot;files&quot; as well, so open network connections will count to the limit. Look at <code>VCAP_APPLICATION</code>, it has a <code>limits</code> section which will tell you how many open files your app instance can have. I can&#39;t speak to your environment, but it&#39;s usually in the thousands, so a couple of hundred db connections or open jar files is usually a small fraction of the total."},{"comment_id":134564439,"body":"Are you expecting your application to be very busy? If it has a lot of traffic, you might be just hitting the point where you need to scale up and add more instances. Each instance has its own file limit so you can scale the max open files by adding more instances."},{"comment_id":134572954,"body":"@DanielMikusa: I checked by doing ssh on application. The limit is ~32000. We already have scaling in place. The app has minimum 3 instances and max 6 instances."},{"comment_id":134572974,"body":"@DanielMikusa: Can the broken pipe error while accessing DB leak file handle?"},{"comment_id":134575335,"body":"I recommend running <code>cf env</code> and looking at <code>VCAP_APPLICATION</code>. When you <code>cf ssh</code> into a container, the environment is not always the same as the environment where the app is running. I don&#39;t know if that would impact how you are checking the limits, but I do know that what is reported in <code>VCAP_APPLICATION</code> will always be correct."}],"last_activity_date":1684735436,"question_id":76303395,"body":"<p>I have a java (tomcat / spring based) cloud multi-tenant application running on cloud foundry, which uses a cloud database. We use <code>tomcat jdbc</code> for connection pooling with maximum 8 connections per tenant. We have max wait configured for 60 seconds on connections in <code>tomcat jdbc</code>. We cache connection for 300 tenants at any given time.</p>\n<p>Recently we experienced <code>Too many open files</code> Error.</p>\n<p>When we checked <code>lsof</code>, we had some interesting findings:</p>\n<ol>\n<li>There were 191 entries for each jar in <code>lsof</code> output. Does it mean, the jar file is being opened for each request?</li>\n<li>There were many socket connections (to Cloud Database and Load Balancer - We have one http call to another micro-service in some calls) in <code>CLOSE_WAIT</code> state.</li>\n</ol>\n<p>We further checked our dynatrace and found following:</p>\n<ol>\n<li>We had some <code>getConnection</code> calls which failed with Broken Pipe error during <code>borrowConnection</code> (reconnect or validate), after 10 mins. I am not sure why <code>max wait</code> was not honoured, and is the socket closed after the Broken Pipe.</li>\n<li>Eventually <code>getConnection</code> and <code>jar loading</code> (Don't know, why jar is being loaded again) started failing with <code>Too many open files</code> Error.</li>\n</ol>\n<p>We also don't see any connection leak as it would resulted in <code>PoolExhaustedException</code> not the current one.</p>\n<p>Any ideas / hints on what is going wrong?</p>\n"},{"answers":[{"answer_id":5859282,"body":"<p>make sure all references in your manifest have been updated to reflect your new package name.</p>\n"},{"answer_id":5859292,"body":"<p>Should <code>package=\"Application\"</code> be <code>package=\"MyApplication\"</code>?</p>\n"},{"answer_id":5859297,"body":"<p>You need to correct the <code>android:name</code> attribute. Same problem mentioned at <a href=\"https://stackoverflow.com/questions/4407201/classnotfoundexception-after-changing-apps-name-in-android\">ClassNotFoundException after changing app&#39;s name in Android</a></p>\n"},{"comments":[{"comment_id":6744200,"body":"your are correct. i had a custom android.app.Application (MyApplication). What i forgot was the leading <code>.</code> prior to <code>app.MyApplication</code>"},{"comment_id":6744216,"body":"I&#39;m glad you&#39;ve made it, happy coding further!"},{"comment_id":36048830,"body":"@MichałK +1 for the comment above, Eclipse restart worked for me!"}],"answer_id":5859500,"body":"<p>Let's assume, that your projects base package is really <code>Application</code>, as you've stated it in the <code>manifest</code>.</p>\n\n<p>If your <code>MyApplication</code> class is inside this package (the package declaration of the class is <code>package Application;</code>), then the <code>application</code> element in your <code>androidManifest.xml</code> should look like </p>\n\n<pre><code>&lt;application android:name=\".MyApplication\" [...]\n</code></pre>\n\n<p>If this <code>MyApplication</code> class is inside the <code>Application.app</code> package (<code>package Application.app;</code>), then in the manifest you should write:</p>\n\n<pre><code>&lt;application android:name=\".app.MyApplication\" [...]\n</code></pre>\n\n<p>If you didn't extend the <code>android.app.Application</code> (you don't have a <code>MyApplication extends android.app.Application</code> class), just wanted to set a name to your application, remove it this attribute, since it says to the compiler that there is an <code>Application</code> extension that should be instantiated instead of the default <code>android.app.Application</code>.</p>\n\n<p>And finally, if the first assumption is wrong, and you've changed for any reason the package declaration in your androidManifest's <code>manifest</code> element, undo it or update your classes to be in that package.</p>\n"},{"answer_id":10485627,"body":"<p>this answer helped me, basically rename your lib to libs if you're using SDK 17+\n<a href=\"https://stackoverflow.com/a/10176048/46459\">https://stackoverflow.com/a/10176048/46459</a></p>\n"},{"answer_id":14221872,"body":"<p>In my case, I've change JAVA compiler compliance level from 1.7 to 1.6 and the problem was solved.</p>\n"},{"comments":[{"comment_id":57287228,"body":"1. Read the question (yes, all of it) 2. This question was answered literally years ago 3. Welcome to SE"},{"comment_id":102478766,"body":"It&#39;s works for me. My project has modify nothing, it happen suddenly. After delete the build folder, and run again, the problem solved. It&#39;s a bug of android studio."}],"answer_id":34767821,"body":"<p>Simple clean the project and rebuild.</p>\n"},{"comments":[{"comment_id":72322618,"body":"Android Studio team still didn&#39;t fix this issue"},{"comment_id":72995489,"body":"This should be the accepted answer. Instant run was creating issue."},{"comment_id":76679006,"body":"For disabling instant run -&gt; Settings and write instant run"},{"comment_id":95888296,"body":"Weird...for me it was enabling instant run"}],"answer_id":41897220,"body":"<p>For me, the issue was with instant-run. Disabling it solved the issue.</p>\n\n<p>Will update if I find a solution for re-enabling and making it work.</p>\n"},{"answer_id":52417152,"body":"<p>Removing these lines worked for me:</p>\n\n<pre><code>compileOptions {\n   sourceCompatibility JavaVersion.VERSION_1_8\n   targetCompatibility JavaVersion.VERSION_1_8\n}\n</code></pre>\n\n<p><strong>Update:</strong><br>\nThe reason behind this issue is that i have not installed JAVA 8 on my PC</p>\n"},{"answer_id":62302737,"body":"<p>In my case it throws:</p>\n<pre><code>Caused by: java.lang.IllegalAccessException: java.lang.Class&lt;foo.bar.MyApp&gt; is not accessible from java.lang.Class&lt;android.app.AppComponentFactory&gt;\n</code></pre>\n<p>The reason is <strong>the Application class must be declared with the modifier <code>public</code></strong>, e.g. do this:</p>\n<pre><code>public class MyApp extends Application {\n}\n</code></pre>\n<p>instead of:</p>\n<pre><code>class MyApp extends Application {\n}\n</code></pre>\n"},{"answer_id":63845636,"body":"<p>For me the issue was due to access level of the class, it has to be public</p>\n"},{"answer_id":76303367,"body":"<p>If you are using any dependency injection libraries or other third-party libraries that modify application startup, make sure the configuration is correct. Some frameworks require extra settings to work properly.</p>\n"}],"last_activity_date":1684735069,"question_id":5859261,"body":"<p>I renamed my package and now I get this strange error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Unable to instantiate application\napp.MyApplication: java.lang.ClassNotFoundException: \napp.MyApplication in loaderdalvik.system.PathClassLoader\n</code></pre>\n\n<p>The <code>MyApplication</code> class is in <code>Application/app</code>. The Manifest says:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n  xmlns:tools=\"http://schemas.android.com/tools\"\n  package=\"Application\"&gt;\n</code></pre>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;application \n    android:label=\"AGG\"\n    android:name=\"app.MyApplication\"...\n</code></pre>\n\n<p>I tried restart, clean built. Is doesn't work on an emulator nor on a real device.</p>\n\n<p>What on Earth is going on? </p>\n"},{"answers":[{"answer_id":75967938,"body":"<p>The error message is quite explicit: there is no user in the project with the email address you entered. This means that you'll have to call <code>createUserWithEmailAndPassword</code> to create that user first, before you can sign in with <code>signInWithEmailAndPassword</code>.</p>\n<p>To prevent getting this error, you may want to <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/auth/FirebaseAuth#fetchSignInMethodsForEmail(java.lang.String)\" rel=\"nofollow noreferrer\">call <code>fetchSignInMethodsForEmail</code></a> with just the email address - to see if Firebase has a email/password account for the email address the user enteres.</p>\n"},{"answer_id":76303365,"body":"<p>I had the same issue. I solved it by clearing the Android studio cache: File -&gt; Invalidate Caches. After that everything worked.</p>\n"}],"last_activity_date":1684735040,"question_id":75967650,"body":"<p>When I entered correct email address and password in &quot;owners&quot; object. run time error comes this :</p>\n<blockquote>\n<p>E/RecaptchaCallWrapper: Initial task failed for action RecaptchaAction(action=custom_signInWithPassword)with exception - There is no user record corresponding to this identifier. The user may have been deleted.</p>\n</blockquote>\n<p>After login, I want to go to profile page.</p>\n<p>This is my login.java</p>\n<pre><code>public class owner_login extends AppCompatActivity {\n    EditText textEmail, textPswd;\n    Button buttonSignupOwner, buttonLogin;\n    FirebaseAuth mAuth;\n    private DatabaseReference mDatabase;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_owner_login);\n        FirebaseAnalytics.getInstance(this).setAnalyticsCollectionEnabled(true);\n        FirebaseAnalytics.getInstance(this).setUserProperty(&quot;debug&quot;, &quot;true&quot;);\n        mAuth = FirebaseAuth.getInstance();\n        mDatabase = FirebaseDatabase.getInstance().getReference().child(&quot;owners&quot;);\n        textEmail = findViewById(R.id.editTextEmail);\n        textPswd = findViewById(R.id.editTextPassword);\n        buttonLogin = findViewById(R.id.buttonLogin);\n        buttonLogin.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                String email = textEmail.getText().toString().trim();\n                String password = textPswd.getText().toString().trim();\n                if (TextUtils.isEmpty(email)) {\n                    textEmail.setError(&quot;Email is required&quot;);\n                    return;\n                }\n                if (TextUtils.isEmpty(password)) {\n                    textPswd.setError(&quot;Password is required&quot;);\n                    return;\n                }\n                mAuth.signInWithEmailAndPassword(email, password).addOnCompleteListener(new OnCompleteListener &lt; AuthResult &gt; () {\n                    @Override\n                    public void onComplete(@NonNull Task\\ &lt; AuthResult\\ &gt; task) {\n                        if (task.isSuccessful()) {\n                            FirebaseUser user = mAuth.getCurrentUser();\n                            String userId = user.getUid();\n                            mDatabase.child(userId).addValueEventListener(new ValueEventListener() {\n                                @Override\n                                public void onDataChange(@NonNull DataSnapshot snapshot) {\n                                    String username = snapshot.child(&quot;username&quot;).getValue(String.class);\n                                    String email = snapshot.child(&quot;email&quot;).getValue(String.class);\n                                    Intent intent = new Intent(owner_login.this, owners_Profile.class);\n                                    intent.putExtra(&quot;username&quot;, username);\n                                    intent.putExtra(&quot;email&quot;, email);\n                                    startActivity(intent);\n                                    finish();\n                                }\n                                @Override\n                                public void onCancelled(@NonNull DatabaseError error) {\n                                    Toast.makeText(owner_login.this, &quot;Failed to retrieve user information&quot;, Toast.LENGTH_SHORT).show();\n                                }\n                            });\n                        } else {\n                            Toast.makeText(owner_login.this, &quot;Authentication failed&quot;, Toast.LENGTH_SHORT).show();\n                        }\n                    }\n                });\n            }\n        });\n    }\n}\n</code></pre>\n"},{"comments":[{"comment_id":134545627,"body":"Please add the complete stack trace of the exception to your question."},{"comment_id":134547196,"body":"Why are you mocking a completable future and not simply setting the value with <code>CompletableFuture.completed</code>?"},{"comment_id":134550010,"body":"@knittl - here I am mocking CompletableFuture.supplyAsync when(CompletableFuture.supplyAsync(any())).thenReturn(object&zwnj;&#8203;CompletableFuture); , I will try out CompletableFuture.completed and update"},{"comment_id":134553744,"body":"@knittl I am setting the value in test class using CompletableFuture.completed. Also, I have used Mockito.mockStatic() in other tests and it works fine. Also, while debugging, Mockito.mockstatic() is working."},{"comment_id":134554089,"body":"@tgdavies added exception log trace."},{"comment_id":134554313,"body":"Sorry, I didn&#39;t see the <code>mockStatic</code> call."},{"comment_id":134554325,"body":"turns out the solution is here - <a href=\"https://stackoverflow.com/questions/58101473/completablefuture-allof-get-does-not-run-in-a-unit-test#:~:text=The%20issue%20is%20that%20you%20mock%20Executor.%20It%20just%20never%20execute%20the%20task%2C%20so%20the%20test%20is%20just%20hang.%20What%20you%20can%20do%20is%20just%20use%20simple%20executor%20and%20inject%20it%20into%20your%20controller%3A\" title=\"completablefuture allof get does not run in a unit test%23%3a%7e%3atext%3dThe%2520issue%2520is%2520that%2520you%2520mock%2520Executor.%2520It%2520just%2520never%2520execute%2520the%2520task%252C%2520so%2520the%2520test%2520is%2520just%2520hang.%2520What%2520you%2520can%2520do%2520is%2520just%2520use%2520simple%2520executor%2520and%2520inject%2520it%2520into%2520your%2520controller%253A\">stackoverflow.com/questions/58101473/&hellip;</a> .  I was using a mocked ExecutorService, as I switched to this - Executors.newSingleThreadExecutor(), the issue is fixed. No need to mock CompletableFuture"},{"comment_id":134554574,"body":"So the question was impossible to answer, because it never mentioned that the executor service was mocked (and didn&#39;t show its definition). The question failed to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"comment_id":134561192,"body":"I didn&#39;t think that would have caused the issue. my bad."}],"last_activity_date":1684734591,"question_id":76298136,"body":"<p>I am trying to test CompletableFuture using mockito. I took reference from <a href=\"https://stackoverflow.com/questions/73332148/testing-completablefuture-supplyasync-with-mockito\">Testing CompletableFuture.supplyAsync with Mockito</a>. This helped me to create a CompletableFuture instance, and the test method completes execution. Below is the method under test:</p>\n<pre><code>public int publishProcessingRecord(List&lt;Customer&gt; records) {\n    List&lt;CompletableFuture&lt;Boolean&gt;&gt; recordsFutures =\n        records.stream()\n            .map(\n                record -&gt;\n                    CompletableFuture.supplyAsync(\n                        () -&gt; publishRecord(record, processingTopicName), executorService))\n            .collect(Collectors.toList());\n\n    return Math.toIntExact(\n        recordsFutures.stream().map(CompletableFuture::join).filter(result -&gt; result).count());\n  }\n</code></pre>\n<p><strong>Questions</strong></p>\n<ol>\n<li><p><em>List&lt;CompletableFuture&gt; recordsFutures</em> -&gt; using my test, I push 1 value in the list. As the list is Boolean type, so added value as “true”. I will add the screenshot while debugging where recordsFutures(the CompletableFuture variable) has a value, but “expanding” shows that it has no value. <strong>So, why is this null? how can make sure that “value” is present?</strong>\nHere is the screenshot while debugging:\n<a href=\"https://i.stack.imgur.com/19v5G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/19v5G.png\" alt=\"enter image description here\" /></a></p>\n</li>\n<li><p><em>publishRecord(record, processingTopicName), executorService)</em> : The execution doesn't pass from here and so this method is uncovered.</p>\n</li>\n</ol>\n<p>My test setup:</p>\n<pre><code>    @Test\n      void shouldNotCallKafkaTemplate_whenPublishProcessingRecordThrowsJsonProcessingException()\n          throws JsonProcessingException {\n    \n        Customer customer = createCustomer();\n        List&lt;MigratingCustomerAccount&gt; listOfAccounts = Collections.singletonList(mappedAccount);\n    \n        MockedStatic&lt;CompletableFuture&gt; completableFutureMockedStatic =  Mockito.mockStatic(CompletableFuture.class);\n        CompletableFuture&lt;Object&gt; objectCompletableFuture = CompletableFuture.completedFuture(true);\n        when(CompletableFuture.supplyAsync(any())).thenReturn(objectCompletableFuture);\n        CompletableFuture&lt;Object&gt; mockCompletableFuture = mock(CompletableFuture.class);\n        when(mockCompletableFuture.join()).thenReturn(true);\n    \n        int recordsProcessed = kafkaProducer.publishProcessingRecord(listOfAccounts);\ncompletableFutureMockedStatic.close();\n    }\n</code></pre>\n<p>This leads to NullPointerException, but that can be solved if I understand why the null value is being set at the first place.</p>\n<p>Note: my previous question was closed referring to this <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\">What is a NullPointerException, and how do I fix it?</a>, which is not what this question is not asking.</p>\n<p>Edit 1: Adding exception trace</p>\n<pre><code>java.lang.NullPointerException\nat java.util.stream.LongPipeline.reduce(LongPipeline.java:461)\nat java.util.stream.LongPipeline.sum(LongPipeline.java:419)\nat my.processor.kafka.KafkaProducer.publishProcessingRecord(KafkaProducer.java:80)\n</code></pre>\n<p>Also, I get this log:</p>\n<pre><code>org.junit.platform.commons.JUnitException: TestEngine with ID 'junit-jupiter' failed to execute tests\n</code></pre>\n<p>Edit 2: <strong>Solution</strong></p>\n<p>My issue was solved after referring to this solution - <a href=\"https://stackoverflow.com/questions/58101473/completablefuture-allof-get-does-not-run-in-a-unit-test#:%7E:text=The%20issue%20is%20that%20you%20mock%20Executor.%20It%20just%20never%20execute%20the%20task%2C%20so%20the%20test%20is%20just%20hang.%20What%20you%20can%20do%20is%20just%20use%20simple%20executor%20and%20inject%20it%20into%20your%20controller%3A\">https://stackoverflow.com/questions/58101473/completablefuture-allof-get-does-not-run-in-a-unit-test#:~:text=The%20issue%20is%20that%20you%20mock%20Executor.%20It%20just%20never%20execute%20the%20task%2C%20so%20the%20test%20is%20just%20hang.%20What%20you%20can%20do%20is%20just%20use%20simple%20executor%20and%20inject%20it%20into%20your%20controller%3A</a>\nInitially I had a mocked ExecutorService instance, like this:</p>\n<pre><code>@Mock private ExecutorService executorService;\n</code></pre>\n<p>I switched it to this:</p>\n<pre><code>private ExecutorService executorService = Executors.newSingleThreadExecutor();\n</code></pre>\n<p>After this need to <strong>remove</strong> the below lines from test class:</p>\n<pre><code>MockedStatic&lt;CompletableFuture&gt; completableFutureMockedStatic =  Mockito.mockStatic(CompletableFuture.class);\n        CompletableFuture&lt;Object&gt; objectCompletableFuture = CompletableFuture.completedFuture(true);\n        when(CompletableFuture.supplyAsync(any())).thenReturn(objectCompletableFuture);\n        CompletableFuture&lt;Object&gt; mockCompletableFuture = mock(CompletableFuture.class);\n        when(mockCompletableFuture.join()).thenReturn(true);\n</code></pre>\n"},{"answers":[{"answer_id":76292768,"body":"<p>You're attempting to map a json object to a json array (the json sample you provided starts and ends with curly braces <code>{}</code>)</p>\n<p>If you're controlling the json, you should be able to switch the format to something like this if you want to map it directly to a json array of EstatePropertyCreatorDto's:</p>\n<pre><code>[\n        {\n            &quot;id&quot;: &quot;8bd050b0-6578-443a-8e22-bf48318734ce&quot;,\n            &quot;title&quot;: &quot;test title&quot;,\n            &quot;type&quot;: &quot;APARTMENT&quot;,\n            &quot;floor&quot;: &quot;5&quot;,\n            &quot;details&quot;: &quot;This details should be aware of!&quot;\n        },\n        {\n            &quot;id&quot;: &quot;69786c5f-e35a-476d-82de-1d5833a12818&quot;,\n            &quot;title&quot;: &quot;test title for 2nd&quot;,\n            &quot;type&quot;: &quot;GARAGE&quot;,\n            &quot;alias&quot;: &quot;jamie garage&quot;,\n            &quot;floor&quot;: &quot;1&quot;,\n            &quot;details&quot;: &quot;Details for Jamie Garage&quot;\n        },\n        {\n            &quot;id&quot;: &quot;c935f330-eebe-4d35-818d-d2248fc8ca9e&quot;,\n            &quot;title&quot;: &quot;test title for 3rd&quot;,\n            &quot;type&quot;: &quot;OFFICE&quot;,\n            &quot;floor&quot;: &quot;2&quot;,\n            &quot;details&quot;: &quot;Details for Jamie office&quot;,\n            &quot;commonParts&quot;: &quot;Office common parts&quot;\n        }\n    ]\n</code></pre>\n<p>In which case it should be able to be mapped to the straight json array</p>\n<p>If you're not controlling the json, you'll need an additional wrapper class along these lines:</p>\n<pre><code>public class MappedObject {\n\n    public MappedObject() {\n    }\n\n    List&lt;EstatePropertyCreatorDto&gt; estateProperties;\n\n    public List&lt;EstatePropertyCreatorDto&gt; getEstateProperties() {\n        return estateProperties;\n    }\n\n    public void setEstateProperties(List&lt;EstatePropertyCreatorDto&gt; estateProperties) {\n        this.estateProperties = estateProperties;\n    }\n}\n</code></pre>\n<p>which should allow the json object to be properly mapped and the list be filled/mapped with the estateProperties jsonArray</p>\n"}],"last_activity_date":1684732995,"question_id":76292553,"body":"<p>POST Request with <code>@RequestBody</code> of <code>List&lt;T&gt;</code> -&gt; then I am getting the Json Parse Error Cannot deserialize value of type <code>java.util.ArrayList&lt;&quot;my path to the DTO class&quot;&gt;</code> from Object value <code>(token JsonToken.START_OBJECT); </code></p>\n<p>nested exception is</p>\n<blockquote>\n<p>com.fasterxml.jackson.databind.exc.MismatchedInputException</p>\n</blockquote>\n<p>Here is my DTO</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@ToString\npublic class EstatePropertyCreatorDto {\n\n    private UUID id;\n    private String title;\n    @NotNull private PropertyTypes type;\n    @Null private String alias;\n    @NotNull private String floor;\n    @NotNull private String details;\n    @Null private String commonParts;\n}\n</code></pre>\n<p>And Here is my controller method:</p>\n<pre><code>\n    @PostMapping(&quot;/{buildingId}/properties&quot;)\n    public List&lt;EstatePropertyCreatorDto&gt; addPropertiesToBuilding(@PathVariable UUID buildingId, @RequestBody List&lt;EstatePropertyCreatorDto&gt; estateProperties) {\n        buildingService.addPropertiesToBuilding(buildingId, estateProperties);\n\n        return List.of(&quot;Once I reach the method I will implement the return&quot;);\n    }\n</code></pre>\n<p>And here is my post request body:</p>\n<pre><code>  {\n    &quot;estateProperties&quot;: [\n        {\n            &quot;id&quot;: &quot;8bd050b0-6578-443a-8e22-bf48318734ce&quot;,\n            &quot;title&quot;: &quot;test title&quot;,\n            &quot;type&quot;: &quot;APARTMENT&quot;,\n            &quot;floor&quot;: &quot;5&quot;,\n            &quot;details&quot;: &quot;This details should be aware of!&quot;\n        },\n        {\n            &quot;id&quot;: &quot;69786c5f-e35a-476d-82de-1d5833a12818&quot;,\n            &quot;title&quot;: &quot;test title for 2nd&quot;,\n            &quot;type&quot;: &quot;GARAGE&quot;,\n            &quot;alias&quot;: &quot;jamie garage&quot;,\n            &quot;floor&quot;: &quot;1&quot;,\n            &quot;details&quot;: &quot;Details for Jamie Garage&quot;\n        },\n        {\n            &quot;id&quot;: &quot;c935f330-eebe-4d35-818d-d2248fc8ca9e&quot;,\n            &quot;title&quot;: &quot;test title for 3rd&quot;,\n            &quot;type&quot;: &quot;OFFICE&quot;,\n            &quot;floor&quot;: &quot;2&quot;,\n            &quot;details&quot;: &quot;Details for Jamie office&quot;,\n            &quot;commonParts&quot;: &quot;Office common parts&quot;\n        }\n    ]\n  }\n</code></pre>\n<p>Then I am getting the following error:</p>\n<pre><code>Cannot deserialize value of type `java.util.ArrayList&lt;&gt; from Object value (token `JsonToken.START_OBJECT`); nested exception is com.fasterxml.jackson.databind.exc.MismatchedInputException\n</code></pre>\n"},{"comments":[{"comment_id":134554293,"body":"How did you suppose those results would be? Please outline how you thought. And, please read the document again after that."},{"comment_id":134554449,"body":"When calling <code>.split(&quot; &quot;)</code>, it makes a further call to <code>split(String regex, int limit)</code> where limit = 0 (which means it&#39;s unbound). The doc further states <code>If the expression does not match any part of the input then the resulting array has just one element, namely this string</code> and <code>A zero-width match at the beginning however never produces such empty leading substring</code> and <code>If the limit is zero then the pattern will be applied as many times as possible, the array can have any length, and trailing empty strings will be discarded</code>."},{"comment_id":134554997,"body":"if you do not understand a method of (standard) Java, it is highly recommended to read the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#split(java.lang.String)\" rel=\"nofollow noreferrer\">documentation</a> - use the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#split(java.lang.String,int)\" rel=\"nofollow noreferrer\">2-argument <code>split()</code></a> method, providing a negative 2nd argument (e.g. <code>split(&quot; &quot;, -1)</code> ) to obtain the expected results: &quot;<i>If the limit is negative then the pattern will be applied as many times as possible</i>&quot; and not &quot;<i>trailing empty strings will be discarded</i>&quot;"}],"last_activity_date":1684732389,"question_id":76303194,"body":"<pre><code>String[] testArr = &quot;&quot;.split(&quot; &quot;);\n// testArr.length = 1;\n\ntestArr = &quot; &quot;.split(&quot; &quot;);\n// testArr.length = 0;\n\ntestArr = &quot;  &quot;.split(&quot; &quot;); // two space\n// testArr.length = 0;\n</code></pre>\n<p>why is the result like this? I cannot understand the logic of String.split function.</p>\n"},{"comments":[{"comment_id":134554161,"body":"Here is a similar question I answered, the links to tutorials might be helpful <a href=\"https://stackoverflow.com/a/76110117/217324\">stackoverflow.com/a/76110117/217324</a>. I&#39;m not a fan of the code posted here, using ID for equals is not the best idea and the ID generation is normally done with annotations on the entities, you don&#39;t use a repository for it. My preference would be not to use the abstract classes."},{"comment_id":134554181,"body":"Hey ty for your response. But im still not understanding it :("},{"comment_id":134554194,"body":"If this code is a representative sample of what the book is like, you need to find a better book."},{"comment_id":134554223,"body":"can you care to explain?"},{"comment_id":134554232,"body":"Are you looking for <code>@jakarta.persistence.Id</code> and  <code>@jakarta.persistence.GeneratedValue(strategy=jakarta.persist&zwnj;&#8203;ence.GenerationType.&zwnj;&#8203;AUTO)</code> annotations? The column in the DB will also need to be configured to auto generate like so <code>id   INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY</code>. You can find more <a href=\"https://www.baeldung.com/jpa-get-auto-generated-id\" rel=\"nofollow noreferrer\">here</a>."},{"comment_id":134554263,"body":"@MirzaPrangon the book seemed to miss out on the implementation of generator.getNextUniqueId(). Idts its mentioned anywhere to annotate the id column. Im asking help for the implementation of the getNextUniqueId() method"}],"last_activity_date":1684732113,"question_id":76303173,"body":"<p>I am working on a CRUD application by referring to Practical Guide to Building API backend with Spring Boot by Wim Deblauwe. I'm stuck in the part where they are telling to implement an unique id generator whenever we create an instance of the entity class to save to the database. Could someone please help with the implementation part of the id generator as I tried but failed miserably.</p>\n<pre><code>AbstractEntityId.java\npackage com.example.orm.jpa;\nimport com.example.util.ArtifactForFramework;\nimport javax.persistence.MappedSuperclass;\nimport java.io.Serializable;\nimport java.util.Objects;\nimport static com.google.common.base.MoreObjects.toStringHelper;\n@MappedSuperclass\npublic abstract class AbstractEntityId&lt;T extends Serializable&gt; implements Serializable,\nEntityId&lt;T&gt; {\n  private T id;\n  @ArtifactForFramework\n  protected AbstractEntityId() {\n  }\n  protected AbstractEntityId(T id) {\n  this.id = Objects.requireNonNull(id);\n  }\n  @Override\n\n  public T getId() {\n  return id;\n  }\n  @Override\n  public String asString() {\n  return id.toString();\n  }\n  @Override\n  public boolean equals(Object o) {\n  boolean result = false;\n  if (this == o) {\n  result = true;\n  } else if (o instanceof AbstractEntityId) {\n  AbstractEntityId other = (AbstractEntityId) o;\n  result = Objects.equals(id, other.id);\n  }\n  return result;\n  }\n  @Override\n  public int hashCode() {\n  return Objects.hash(id);\n  }\n  @Override\n  public String toString() {\n  return toStringHelper(this)\n  .add(&quot;id&quot;, id)\n  .toString();\n  }\n}\n</code></pre>\n<pre><code>AbstractEntity.java\n\npackage com.example.orm.jpa;\nimport com.example.util.ArtifactForFramework;\nimport javax.persistence.EmbeddedId;\nimport javax.persistence.MappedSuperclass;\nimport java.util.Objects;\nimport static com.google.common.base.MoreObjects.toStringHelper;\nimport static com.google.common.base.Preconditions.checkNotNull;\n/**\n * Abstract super class for entities. We are assuming that early primary key\n * generation will be used.\n *\n\n * @param &lt;T&gt; the type of {@link EntityId} that will be used for this entity\n */\n@MappedSuperclass\npublic abstract class AbstractEntity&lt;T extends EntityId&gt; implements Entity&lt;T&gt; {\n  @EmbeddedId\n  private T id;\n  @ArtifactForFramework\n  protected AbstractEntity() {\n  }\n  public AbstractEntity(T id) {\n  this.id = checkNotNull(id);\n  }\n  @Override\n  public T getId() {\n  return id;\n  }\n  @Override\n  public boolean equals(Object obj) {\n  boolean result = false;\n  if (this == obj) {\n  result = true;\n  } else if (obj instanceof AbstractEntity) {\n  AbstractEntity other = (AbstractEntity) obj;\n  result = Objects.equals(id, other.id);\n  }\n  return result;\n  }\n  @Override\n  public int hashCode() {\n  return Objects.hash(id);\n  }\n  @Override\n  public String toString() {\n  return toStringHelper(this)\n  .add(&quot;id&quot;, id)\n  .toString();\n\n  }\n}\n</code></pre>\n<pre><code>EntityId.java\npackage com.example.orm.jpa;\nimport java.io.Serializable;\n/**\n * Interface for primary keys of entities.\n *\n * @param &lt;T&gt; the underlying type of the entity id\n */\npublic interface EntityId&lt;T&gt; extends Serializable {\n  T getId();\n  String asString(); ①\n}\n</code></pre>\n<pre><code>package com.example.copsboot.user;\npublic interface UserRepositoryCustom {\n  UserId nextId();\n}\n</code></pre>\n<pre><code>public interface UserRepository extends CrudRepository&lt;User, UUID&gt;, UserRepositoryCustom\n{\n}\n</code></pre>\n<pre><code>package com.example.copsboot.user;\nimport com.example.orm.jpa.UniqueIdGenerator;\nimport java.util.UUID;\npublic class UserRepositoryImpl implements UserRepositoryCustom {\n  private final UniqueIdGenerator&lt;UUID&gt; generator;\n  public UserRepositoryImpl(UniqueIdGenerator&lt;UUID&gt; generator) {\n  this.generator = generator;\n  }\n  @Override\n  public UserId nextId() {\n  return new UserId(generator.getNextUniqueId());\n  }\n}\n</code></pre>\n<p>The last section of code is where they are asking for the generation(generator.getNextUniqueId()). All the above codes are for context. It could be really helpful if someone also explained why they are implementing these abstract entity classes for id generation.</p>\n<p>Thanks in advance</p>\n"},{"comments":[{"comment_id":134511420,"body":"Can you provide the code for the <code>Person</code> class?  Or, at least an outline."},{"comment_id":134511760,"body":"it would be better to not rely on Exceptions to check for <code>null</code>... this can eventually hide some errors, like something else being <code>null</code> (e.g. <code>a</code> or <code>b</code>)"}],"answers":[{"comments":[{"comment_id":134511221,"body":"I have tried this, but then it will get &quot;The target type of this expression must be a functional interface&quot; error"},{"comment_id":134511240,"body":"I just tested it, and it worked for me. Can you try copy and pasting my code exactly as is over your equivalent methods? And when it fails, show me the exact lines of code. You can edit your original question with the exact lines of code, then ping me here to let me know that you did so."},{"comment_id":134511282,"body":"Thank you. I just change the order of the parameters from  &#39;&#39;&#39;String message, RunnableExc r&#39;&#39;&#39; to &#39;&#39;&#39;RunnableExc r, String message&#39;&#39;&#39; and it works now!"},{"comment_id":134511287,"body":"Glad to hear it. Let me know if any other issues come up"}],"answer_id":76277712,"body":"<p>You could pass in a <code>String</code> as well. This is common practice for some of the precondition tools in Java. Take a look at <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Objects.html#requireNonNull(T)\" rel=\"nofollow noreferrer\"><code>Objects#requireNonNull(T)</code></a> vs <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Objects.html#requireNonNull(T,java.lang.String)\" rel=\"nofollow noreferrer\"><code>Objects#requireNonNull(T,String)</code></a>.</p>\n<p>So, like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private static void ignoringExc(RunnableExc r, String message) {\n        try {\n            r.run();\n        } catch (Exception e) {\n            log.error(message);\n        }\n    }\n\n    @FunctionalInterface\n    private interface RunnableExc {\n        void run() throws Exception;\n    }\n</code></pre>\n<p>Which would then allow you to do this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ignoringExc(() -&gt; a.setAddress(b.getPerson(&quot;address&quot;)), &quot;address message&quot;);\nignoringExc(() -&gt; a.setName(b.getPerson(&quot;name&quot;)),       &quot;name message&quot;);\nignoringExc(() -&gt; a.setAge(b.getPerson(&quot;age&quot;)),         &quot;age message&quot;);\n...\n</code></pre>\n"},{"comments":[{"comment_id":134553298,"body":"I have tried this method but it still throws an exception error. For my case, my getter is like this b.getName().getString(&quot;surname&quot;). How can I handle this case? @tgdavies"},{"comment_id":134553333,"body":"the null error occurs in this getName, not getString. so when running the code, it directly skips calling the &quot;setIfNotNull&quot; method and throws the error from this line: setIfNotNull(b.getName(), a::setName); @tgdavies"},{"comment_id":134553892,"body":"This is completely different to the scenario in your question, where the exception was being thrown by the setter."},{"comment_id":134554563,"body":"if for this case, is using NullPointerException the suitable way to solve it? @tgdavies"},{"comment_id":134555552,"body":"It&#39;s hard to say without seeing your actual code."},{"comment_id":134556213,"body":"My code is like this &#39;&#39;&#39;a.setAddress(b.getPerson(&quot;address&quot;).getString(&quot;Stress&quot;); a.setAddress(b.getPerson(&quot;address&quot;).getString(&quot;Country&quot;); a.setName(b.getPerson(&quot;name&quot;).getString(&quot;Surname&quot;);&#39;&#39;&#39; getPerson with a specific value may get a null value, getString as well. So, how can i catch run these without using notpotinerexception"}],"answer_id":76278201,"body":"<p>You shouldn't be using <code>NullPointerException</code> to do null checks. Throwing an exception is relatively expensive, as @user16320675 points out, other NPE's may occur, and you are also catching <code>Exception</code> which will ignore other problems.</p>\n<p>Instead, use a function like:</p>\n<pre><code>    static &lt;T&gt; void setIfNotNull(T value, Consumer&lt;T&gt; setter) {\n        if (value != null) {\n            setter.accept(value);\n        } else {\n            // logging if needed\n        }\n    }\n</code></pre>\n<p>and call it like this:</p>\n<pre><code>        setIfNotNull(b.getName(), a::setName);\n</code></pre>\n<p>Of course you could also consider making the setters on <code>A</code> silently ignore <code>null</code> instead of throwing an exception, but that depends on your requirements.</p>\n"}],"last_activity_date":1684731180,"question_id":76277691,"body":"<pre><code>    private static void ignoringExc(RunnableExc r) {\n        try {\n            r.run();\n        } catch (Exception e) {\n            log.error(&quot;&quot;);\n        }\n    }\n\n    @FunctionalInterface\n    private interface RunnableExc {\n        void run() throws Exception;\n    }\n\n</code></pre>\n<p>I have multiple variables that need to be set into a Person a. However, some variables from Person b may be null. So I use the above function to avoid null pointer exception error. But  I want to customise the error message in log.error() in ignoringExc function, such as &quot;The age of Person B is null&quot;. How to do that?</p>\n<pre><code>ignoringExc(() -&gt; a.setAddress(b.getPerson(&quot;address&quot;)));\nignoringExc(() -&gt; a.setName(b.getPerson(&quot;name&quot;)));\nignoringExc(() -&gt; a.setAge(b.getPerson(&quot;age&quot;)));\n...\n</code></pre>\n"},{"last_activity_date":1684730652,"question_id":76303085,"body":"<p>I am trying to call initiateTransaction Paytm gateway API <code>/theia/api/v1/initiateTransaction?mid=%s&amp;orderId=%s</code>, I am following documentation here: <code>https://business.paytm.com/docs/api/initiate-transaction-api?ref=payments</code> with all correct as per documentation but I am getting error &quot;Mid is invalid&quot;, but in actual it's correct. I am using <code>mid</code> and <code>apiKey</code> of test environment. Please hep me on where am I making the mistake.</p>\n<p>My Code:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.DataOutputStream;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.net.HttpURLConnection;\nimport java.net.MalformedURLException;\nimport java.net.URL;\n\nimport org.json.JSONObject;\nimport org.springframework.stereotype.Service;\n\nimport com.paytm.pg.merchant.PaytmChecksum;\n\n@Service\npublic class PaytmGatwayService {\n\n    public static void main(String[] args) throws Exception {\n        String baseUrl = &quot;https://securegw-stage.paytm.in&quot;;\n        String mid = &quot;&lt;TEST_ENV_MID&gt;&quot;;\n        String orderId = &quot;abc1234567&quot;;\n        String apiKey = &quot;&lt;TEST_ENV_API_KEY&gt;&quot;;\n\n        JSONObject body = new JSONObject();\n        body.put(&quot;requestType&quot;, &quot;Payment&quot;);\n        body.put(&quot;mid&quot;, mid);\n        body.put(&quot;orderId&quot;, orderId);\n        body.put(&quot;callbackUrl&quot;, &quot;https://localhost:4200/&quot;);\n        body.put(&quot;websiteName&quot;, &quot;WEBSTAGING&quot;);\n\n        JSONObject txnBody = new JSONObject();\n        txnBody.put(&quot;value&quot;, String.valueOf(&quot;3520.0&quot;));\n        txnBody.put(&quot;currency&quot;, &quot;INR&quot;);\n        body.put(&quot;txnAmount&quot;, txnBody);\n\n        JSONObject userInfo = new JSONObject();\n        userInfo.put(&quot;custId&quot;, &quot;custmer123456&quot;);\n        userInfo.put(&quot;email&quot;, &quot;user@email.com&quot;);\n        body.put(&quot;userInfo&quot;, userInfo);\n\n        JSONObject head = new JSONObject();\n        head.put(&quot;channelId&quot;, &quot;WEB&quot;);\n        String checksum = PaytmChecksum.generateSignature(body.toString(), apiKey);\n        head.put(&quot;signature&quot;, checksum);\n\n        JSONObject paytmParams = new JSONObject();\n        paytmParams.put(&quot;body&quot;, body);\n        paytmParams.put(&quot;head&quot;, head);\n        String post_data = paytmParams.toString();\n\n        String postUrl = String.format(&quot;/theia/api/v1/initiateTransaction?mid=%s&amp;orderId=%s&quot;, mid, orderId);\n\n        URL url = null;\n        try {\n            url = new URL(baseUrl + postUrl);\n        } catch (MalformedURLException e1) {\n\n        }\n        String responseData = &quot;&quot;;\n        try {\n            HttpURLConnection connection = (HttpURLConnection) url.openConnection();\n            connection.setRequestMethod(&quot;POST&quot;);\n            connection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\n            connection.setDoOutput(true);\n\n            DataOutputStream requestWriter = new DataOutputStream(connection.getOutputStream());\n            requestWriter.writeBytes(post_data);\n            requestWriter.close();\n\n            InputStream is = connection.getInputStream();\n            BufferedReader responseReader = new BufferedReader(new InputStreamReader(is));\n            if ((responseData = responseReader.readLine()) != null) {\n                System.out.append(&quot;Response: &quot; + responseData);\n            }\n            responseReader.close();\n        } catch (Exception exception) {\n            exception.printStackTrace();\n        }\n    }\n\n}\n\n</code></pre>\n<p>Version of paytm-checksum dependency is <code>1.2.1</code>\nSystem.out.append output:</p>\n<pre><code>Response: {&quot;head&quot;:{&quot;requestId&quot;:null,&quot;responseTimestamp&quot;:&quot;1684729867186&quot;,&quot;version&quot;:&quot;v1&quot;},&quot;body&quot;:{&quot;extraParamsMap&quot;:null,&quot;resultInfo&quot;:{&quot;resultStatus&quot;:&quot;F&quot;,&quot;resultCode&quot;:&quot;2006&quot;,&quot;resultMsg&quot;:&quot;Mid is invalid&quot;}}}\n</code></pre>\n"},{"comments":[{"comment_id":51498357,"body":"I think you should take a look at <a href=\"https://en.wikipedia.org/wiki/List_of_color_spaces_and_their_uses\" rel=\"nofollow noreferrer\">color spaces</a>, in particular the HSV or HSL family, which are far easier to use for this purpose. RGB isn&#39;t a very good color space for smooth hue transitions. (Please note that HS* color spaces are far from perfect themselves, but at least they are very simple and you can traverse the rainbow with a simple loop on <code>hue</code>.)"},{"comment_id":51498382,"body":"@rakeb.void because of <code>g++</code>."},{"comment_id":51498597,"body":"@biziclop Could you provide any links to examples of this being implemented and used in java? Would help a lot, thanks!"},{"comment_id":51498686,"body":"@user3166950 <code>java.awt.Color</code> has a static factory method called <a href=\"http://docs.oracle.com/javase/8/docs/api/java/awt/Color.html#getHSBColor-float-float-float-\" rel=\"nofollow noreferrer\"><code>getHSBColor()</code></a>, that should do the job."},{"comment_id":51499236,"body":"You can do it this way, but there should be 6 loops, not 3: red-&gt;yellow-&gt;green-&gt;cyan-&gt;blue-&gt;magenta-&gt;red."},{"comment_id":51501112,"body":"@pbabcdefp I managed to get it looping properly with this, thankyou. I&#39;ll update the original post with the solution."}],"answers":[{"answer_id":31785397,"body":"<p>You need to find all combinations. The problem with your code is that in one loop you modify two values. In this case you skip a color. For example you have G=100 and R=100:</p>\n\n<p>g++;\n r--;\nAfter this line G will be 101 and R will be 99. Next time it will be G102, R98 You now got three combinations:</p>\n\n<p>[g100,r100], g[101,r99], g[102,r98]. </p>\n\n<p>But you miss lots of other combinations here like [g100,r99] and g[101,r100], or g[101,r98] etc. </p>\n"},{"answer_id":76303072,"body":"<p>You can create an <code>RGB</code> class to hold the ARGB values, and create a method to increase the value by 1.</p>\n<p>Consider the following class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class RGB {\n    int alpha, red, green, blue;\n\n    void next() {\n        if (blue != 255) blue++;\n        else if (green != 255) green++;\n        else if (red != 255) red++;\n        else if (alpha != 255) alpha++;\n        else throw new IndexOutOfBoundsException();\n    }\n\n    @Override\n    public String toString() {\n        return &quot;%02x%02x%02x%02x&quot;.formatted(alpha, red, green, blue);\n    }\n}\n</code></pre>\n<p>Example of output</p>\n<pre class=\"lang-none prettyprint-override\"><code>00000001\n00000002\n00000003\n00000004\n00000005\n...\nfbffffff\nfcffffff\nfdffffff\nfeffffff\nffffffff\n</code></pre>\n"}],"last_activity_date":1684730377,"question_id":31784658,"body":"<p>I'm trying to loop through all rgb colours in rainbow order. Currently I have this:</p>\n\n<pre><code>int state = 1;\nint a = 255;\nint r = 255;\nint g = 0;\nint b = 0;\n\nif(g &lt; 255 &amp;&amp; state == 1){\n    g++;\n    r--;\n    if(g == 255)\n        state = 2;\n}\nif(b &lt; 255 &amp;&amp; state == 2){\n    b++;\n    g--;\n    if(b == 255)\n        state = 3;\n}\nif(state == 3){\n    r++;\n    b--;\n    if(b == 0)\n        state = 1;\n}\n\nint hex = (a &lt;&lt; 24) + (r &lt;&lt; 16) + (g &lt;&lt; 8) + (b);\n</code></pre>\n\n<p>It works but it doesn't seem to get all the colours. I know this is probably a bad way of doing it and yes I know I can do 3 loops inside each other but does anybody know a better way of doing this that gets all the colours?</p>\n\n<p>Also, the reason I'm not using the 3 loops is because it needs to update after every new RGB combination, not after the loops have finished, because that gives me the same outcome every time.</p>\n\n<p>EDIT:\nThanks to pbabcdefp I got it working and the solution is below.</p>\n\n<pre><code>int state = 0;\nint a = 255;\nint r = 255;\nint g = 0;\nint b = 0;\nif(state == 0){\n    g++;\n    if(g == 255)\n        state = 1;\n}\nif(state == 1){\n    r--;\n    if(r == 0)\n        state = 2;\n}\nif(state == 2){\n    b++;\n    if(b == 255)\n        state = 3;\n}\nif(state == 3){\n    g--;\n    if(g == 0)\n        state = 4;\n}\nif(state == 4){\n    r++;\n    if(r == 255)\n        state = 5;\n}\nif(state == 5){\n    b--;\n    if(b == 0)\n        state = 0;\n}\nint hex = (a &lt;&lt; 24) + (r &lt;&lt; 16) + (g &lt;&lt; 8) + (b);\n</code></pre>\n"},{"comments":[{"comment_id":134553305,"body":"Don&#39;t you need nested for loops to adequately and deeply copy the 2D array? Or a single for loop and arraycopy calls?"},{"comment_id":134553319,"body":"Despite a copy being implied the line <code>int[][] copyArr = arr;</code> actually doesn&#39;t do a deep copy of <code>arr</code>. Both <code>copyArr</code> and <code>arr</code> are pointing to the same thing. So, any changes made to <code>copyArr</code> will change <code>arr</code>.  This question is possibly a duplicate of: <a href=\"https://stackoverflow.com/questions/1564832/how-do-i-do-a-deep-copy-of-a-2d-array-in-java\" title=\"how do i do a deep copy of a 2d array in java\">stackoverflow.com/questions/1564832/&hellip;</a>"},{"comment_id":134553340,"body":"Thank you, you were right about the copying confusion. I used a loop instead to iterate through and create a replica array and it works now."}],"answers":[{"answer_id":76302720,"body":"<p>Assigning a variable to another variable in Java doesn't create a copy. It creates a second reference to the same object, or array in this case. You need to use a method to actually create a copy if that is your intention: <a href=\"https://www.baeldung.com/java-array-copy\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-array-copy</a></p>\n"},{"answer_id":76302789,"body":"<p>You won't be able to just assign <code>copyArr</code> to <code>arr</code> to make a legitimate copy.<br />\nDoing so will cause any updates within <code>arr</code> to also happen in <code>copyArr</code>.</p>\n<p><em>How that is useful, I'm not sure.</em></p>\n<p>You'll need to iterate over the values of <code>arr</code> and assign them to the corresponding indices of <code>copyArr</code>.</p>\n<p>It's fairly simple, you can use the following code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[][] copyArr = new int[arr.length][];\nfor (int index = 0; index &lt; arr.length; index++)\n    System.arraycopy(arr[i], 0, copyArr[i], 0, arr.length);\n</code></pre>\n"}],"last_activity_date":1684729176,"question_id":76302694,"body":"<pre><code>public static int[][] submatrix(int[][] arr, int i, int j)\n{\n    int[][] copyArr = arr;\n    int[][] newArr = new int[copyArr.length - 1][copyArr[0].length - 1];\n    \n    for(int k = 0; k &lt; copyArr[0].length; k++)\n    {\n        copyArr[j - 1][k] = 0;\n    }\n    \n    for(int x = 0; x &lt; copyArr.length; x++)\n    {\n        copyArr[x][i - 1] = 0;\n    }\n    printMatrix(copyArr);\n    System.out.println();\n    int row = 0;\n    int col = 0;\n    \n    for(int x = 0; x &lt; copyArr.length; x++)\n    {\n        for(int y = 0; y &lt; copyArr[0].length; y++)\n        {\n            if(copyArr[x][y] != 0)\n            {\n                newArr[row][col] = copyArr[x][y];\n                col += 1;\n                if(col == newArr[0].length)\n                {\n                    col -= newArr[0].length;\n                    row += 1;\n                }\n            }\n        }\n    }\n    return newArr;\n}\n</code></pre>\n<p>When I run this and use the 2d array:</p>\n<p>int[][] matrixI = new int[][]{{11, 12, 13, 14}, {21, 22, 23, 24}, {31, 32, 33, 34}, {41, 42, 43, 44}};</p>\n<p>It correctly calculates the sub matrix, but when I call the method again on the same 2d array with different parameters(for the row and column I am getting rid of) it uses the array that was made when I called it the first time. I tried to use a copy of the array to avoid it changing the value of the inputted arr but it is still changing it.</p>\n<p>The program is changing my value of arr when I dont want it to.</p>\n"},{"comments":[{"comment_id":5282532,"body":"yyyyy is not the same as yyyy.  :)"},{"comment_id":5283944,"body":"A boomerang question. What is your use case? Because it is possible that you should use built-in patterns (DateFormat.getDateTimeInstance())."},{"comment_id":49752281,"body":"The month is represented with MM in the format string, not with mm like in the examples above. mm means minutes."},{"comment_id":66743649,"body":"I changed yyyy-mm-dd to yyyy-MM-dd, cause initial version didn&#39;t work"},{"comment_id":118002983,"body":"&quot;mm&quot; is number of minutes :)"},{"comment_id":126550376,"body":"&quot;yyyyy-MM-dd hh:mm:ss&quot;"}],"answers":[{"comments":[{"comment_id":5282412,"body":"import java.text.ParseException; import java.text.SimpleDateFormat; import java.util.Date;   public class formateDate {  \t/** \t * @param args \t * @throws ParseException  \t */ \tpublic static void main(String[] args) throws ParseException { \t\t// TODO Auto-generated method stub  \t\tString date_s=&quot; 2011-01-18 00:00:00.0&quot;; \t\tSimpleDateFormat dt= new SimpleDateFormat(&quot;yyyyy-mm-dd hh:mm:ss&quot;); \t\tDate date=dt.parse(date_s); \t\tSimpleDateFormat dt1= new SimpleDateFormat(&quot;yyyyy-mm-dd&quot;); \t\t     \t\tSystem.out.println(  dt1.format(date)); \t}  }   i want out put should be &quot;2011-01-18&quot; but out put is 02011-00-1"},{"comment_id":5282419,"body":"Post any code you have as an addition to the original question (indented four spaces).  This way it will retain its formatting and we can then read it."},{"comment_id":5282430,"body":"See edit to my answer above.  You&#39;re using &quot;mm&quot; in your format String where you should be using &quot;MM&quot;"},{"comment_id":60560125,"body":"<code>hh</code> will give you the hour in the range 1-12, you&#39;ll need to use <code>a</code> in addition to print/parse <code>AM</code> or <code>PM</code>. To print/parse the hour in the range 0-23, use <code>HH</code>."}],"answer_id":4772431,"body":"<p>The answer is of course to create a SimpleDateFormat object and use it to parse Strings to Date and to format Dates to Strings.  If you've tried SimpleDateFormat and it didn't work, then please show your code and any errors you may receive.</p>\n\n<p>Addendum:  \"mm\" in the format String is not the same as \"MM\".  Use MM for months and mm for minutes. Also, yyyyy is not the same as yyyy.  e.g.,:</p>\n\n<pre><code>import java.text.ParseException;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\n\npublic class FormateDate {\n\n    public static void main(String[] args) throws ParseException {\n        String date_s = \"2011-01-18 00:00:00.0\";\n\n        // *** note that it's \"yyyy-MM-dd hh:mm:ss\" not \"yyyy-mm-dd hh:mm:ss\"  \n        SimpleDateFormat dt = new SimpleDateFormat(\"yyyy-MM-dd hh:mm:ss\");\n        Date date = dt.parse(date_s);\n\n        // *** same for the format String below\n        SimpleDateFormat dt1 = new SimpleDateFormat(\"yyyy-MM-dd\");\n        System.out.println(dt1.format(date));\n    }\n\n}\n</code></pre>\n"},{"comments":[{"comment_id":5282459,"body":"<code>DD</code> stands for &quot;day in year&quot;, not &quot;day in month&quot;. <code>hh</code> stands for &quot;hour in am/pm (1-12)&quot;, not &quot;hour in day (0-23)&quot;."}],"answer_id":4772449,"body":"<p>[edited to include BalusC's corrections]\nThe <a href=\"http://www.java2s.com/Tutorial/Java/0040__Data-Type/SimpleDateFormat.htm\" rel=\"noreferrer\">SimpleDateFormat</a> class should do the trick:</p>\n\n<pre><code>String pattern = \"yyyy-MM-dd HH:mm:ss.S\";\nSimpleDateFormat format = new SimpleDateFormat(pattern);\ntry {\n  Date date = format.parse(\"2011-01-18 00:00:00.0\");\n  System.out.println(date);\n} catch (ParseException e) {\n  e.printStackTrace();\n}\n</code></pre>\n"},{"comments":[{"comment_id":37094061,"body":"What if you want the date to look like &quot;Monday 1st September 2012&quot;?"},{"comment_id":37096216,"body":"@crm: Just click the javadoc link, figure the necessary pattern characters there and alter the pattern accordingly."},{"comment_id":102991814,"body":"When you&#39;re not on Java 8 yet, consider using the backport, <a href=\"https://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\">ThreeTen Backport</a>, and then the first examples from the answer. Or for Android below API level 26, <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a>."}],"answer_id":4772461,"body":"<p>Use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDateTime.html#parse(java.lang.CharSequence,java.time.format.DateTimeFormatter)\" rel=\"nofollow noreferrer\"><code>LocalDateTime#parse()</code></a> (or <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/ZonedDateTime.html#parse(java.lang.CharSequence,java.time.format.DateTimeFormatter)\" rel=\"nofollow noreferrer\"><code>ZonedDateTime#parse()</code></a> if the string happens to contain a time zone part) to parse a <code>String</code> in a certain pattern into a <code>LocalDateTime</code>.</p>\n<pre><code>String oldstring = &quot;2011-01-18 00:00:00.0&quot;;\nLocalDateTime datetime = LocalDateTime.parse(oldstring, DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.S&quot;));\n</code></pre>\n<p>Then use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/LocalDateTime.html#format(java.time.format.DateTimeFormatter)\" rel=\"nofollow noreferrer\"><code>LocalDateTime#format()</code></a> (or <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/ZonedDateTime.html#format(java.time.format.DateTimeFormatter)\" rel=\"nofollow noreferrer\"><code>ZonedDateTime#format()</code></a>) to format a <code>LocalDateTime</code> into a <code>String</code> in a certain pattern.</p>\n<pre><code>String newstring = datetime.format(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;));\nSystem.out.println(newstring); // 2011-01-18\n</code></pre>\n<p><strong>Or</strong>, when you're not on Java 8 yet, use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/DateFormat.html#parse(java.lang.String)\" rel=\"nofollow noreferrer\"><code>SimpleDateFormat#parse()</code></a> to parse a <code>String</code> in a certain pattern into a <code>Date</code>.</p>\n<pre><code>String oldstring = &quot;2011-01-18 00:00:00.0&quot;;\nDate date = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss.S&quot;).parse(oldstring);\n</code></pre>\n<p>Then use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/DateFormat.html#format(java.util.Date)\" rel=\"nofollow noreferrer\"><code>SimpleDateFormat#format()</code></a> to format a <code>Date</code> into a <code>String</code> in a certain pattern.</p>\n<pre><code>String newstring = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;).format(date);\nSystem.out.println(newstring); // 2011-01-18\n</code></pre>\n<h3>See also:</h3>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/4216745/java-string-to-date-conversion/\">Java string to date conversion</a></li>\n</ul>\n<hr />\n<p><strong>Update</strong>: as per your failed attempt which you added to the question after this answer was posted; the patterns are <strong>case sensitive</strong>. Carefully read the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\"><code>java.text.SimpleDateFormat</code> javadoc</a> what the individual parts stands for. So stands for example <code>M</code> for months and <code>m</code> for minutes. Also, years exist of four digits <code>yyyy</code>, not five <code>yyyyy</code>. Look closer at the code snippets I posted here above.</p>\n"},{"answer_id":10767247,"body":"<pre><code>   String str = \"2000-12-12\";\n   Date dt = null;\n   SimpleDateFormat formatter = new SimpleDateFormat(\"yyyy-MM-dd\");\n\n    try \n    {\n         dt = formatter.parse(str);\n    }\n    catch (Exception e)\n    {\n    }\n\n    JOptionPane.showMessageDialog(null, formatter.format(dt));\n</code></pre>\n"},{"answer_id":17938162,"body":"<pre><code>private SimpleDateFormat dataFormat = new SimpleDateFormat(\"dd/MM/yyyy\");\n\n@Override\npublic Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {\n    if(value instanceof Date) {\n        value = dataFormat.format(value);\n    }\n    return super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);\n};\n</code></pre>\n"},{"comments":[{"comment_id":91029381,"body":"Not exactly. You need the correct case too (no matter if you use the modern <code>DateTimeFormatter</code> or cling with the outdated <code>SimpleDateFormat</code>)."}],"answer_id":18953213,"body":"<p>remove one y form the format provide to:</p>\n<pre><code>SimpleDateFormat dt1 = new SimpleDateFormat(&quot;yyyyy-mm-dd&quot;);\n</code></pre>\n<p>It should be:</p>\n<pre><code>SimpleDateFormat dt1 = new SimpleDateFormat(&quot;yyyy-mm-dd&quot;);\n</code></pre>\n"},{"answer_id":19332502,"body":"<p>You can also use substring()</p>\n\n<pre><code>String date_s = \"2011-01-18 00:00:00.0\";\ndate_s.substring(0,10);\n</code></pre>\n\n<p>If you want a space in front of the date, use</p>\n\n<pre><code>String date_s = \" 2011-01-18 00:00:00.0\";\ndate_s.substring(1,11);\n</code></pre>\n"},{"answer_id":20296770,"body":"<p>Other answers are correct, basically you had the wrong number of \"y\" characters in your pattern.</p>\n\n<h2>Time Zone</h2>\n\n<p>One more problem though… You did not address time zones. If you intended <a href=\"https://en.wikipedia.org/wiki/Coordinated_Universal_Time\" rel=\"noreferrer\">UTC</a>, then you should have said so. If not, the answers are not complete. If all you want is the date portion without the time, then no issue. But if you do further work that may involve time, then you should be specifying a time zone.</p>\n\n<h2>Joda-Time</h2>\n\n<p>Here is the same kind of code but using the third-party open-source <a href=\"http://www.joda.org/joda-time/\" rel=\"noreferrer\">Joda-Time</a> 2.3 library</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// © 2013 Basil Bourque. This source code may be used freely forever by anyone taking full responsibility for doing so.\n\nString date_s = \"2011-01-18 00:00:00.0\";\n\norg.joda.time.format.DateTimeFormatter formatter = org.joda.time.format.DateTimeFormat.forPattern( \"yyyy-MM-dd' 'HH:mm:ss.SSS\" );\n// By the way, if your date-time string conformed strictly to ISO 8601 including a 'T' rather than a SPACE ' ', you could\n// use a formatter built into Joda-Time rather than specify your own: ISODateTimeFormat.dateHourMinuteSecondFraction().\n// Like this:\n//org.joda.time.DateTime dateTimeInUTC = org.joda.time.format.ISODateTimeFormat.dateHourMinuteSecondFraction().withZoneUTC().parseDateTime( date_s );\n\n// Assuming the date-time string was meant to be in UTC (no time zone offset).\norg.joda.time.DateTime dateTimeInUTC = formatter.withZoneUTC().parseDateTime( date_s );\nSystem.out.println( \"dateTimeInUTC: \" + dateTimeInUTC );\nSystem.out.println( \"dateTimeInUTC (date only): \" + org.joda.time.format.ISODateTimeFormat.date().print( dateTimeInUTC ) );\nSystem.out.println( \"\" ); // blank line.\n\n// Assuming the date-time string was meant to be in Kolkata time zone (formerly known as Calcutta). Offset is +5:30 from UTC (note the half-hour).\norg.joda.time.DateTimeZone kolkataTimeZone = org.joda.time.DateTimeZone.forID( \"Asia/Kolkata\" );\norg.joda.time.DateTime dateTimeInKolkata = formatter.withZone( kolkataTimeZone ).parseDateTime( date_s );\nSystem.out.println( \"dateTimeInKolkata: \" + dateTimeInKolkata );\nSystem.out.println( \"dateTimeInKolkata (date only): \" + org.joda.time.format.ISODateTimeFormat.date().print( dateTimeInKolkata ) );\n// This date-time in Kolkata is a different point in the time line of the Universe than the dateTimeInUTC instance created above. The date is even different.\nSystem.out.println( \"dateTimeInKolkata adjusted to UTC: \" + dateTimeInKolkata.toDateTime( org.joda.time.DateTimeZone.UTC ) );\n</code></pre>\n\n<p>When run…</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>dateTimeInUTC: 2011-01-18T00:00:00.000Z\ndateTimeInUTC (date only): 2011-01-18\n\ndateTimeInKolkata: 2011-01-18T00:00:00.000+05:30\ndateTimeInKolkata (date only): 2011-01-18\ndateTimeInKolkata adjusted to UTC: 2011-01-17T18:30:00.000Z\n</code></pre>\n"},{"answer_id":20963021,"body":"<pre><code>try\n {\n    String date_s = \"2011-01-18 00:00:00.0\";\n    SimpleDateFormat simpledateformat = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss.S\");\n    Date tempDate=simpledateformat.parse(date_s);\n    SimpleDateFormat outputDateFormat = new SimpleDateFormat(\"yyyy-MM-dd\");           \n    System.out.println(\"Output date is = \"+outputDateFormat.format(tempDate));\n  } catch (ParseException ex) \n  {\n        System.out.println(\"Parse Exception\");\n  }\n</code></pre>\n"},{"answer_id":23184340,"body":"<p>Using the <code>java.time</code> package in Java 8 and later:</p>\n\n<pre><code>String date = \"2011-01-18 00:00:00.0\";\nTemporalAccessor temporal = DateTimeFormatter\n    .ofPattern(\"yyyy-MM-dd HH:mm:ss.S\")\n    .parse(date); // use parse(date, LocalDateTime::from) to get LocalDateTime\nString output = DateTimeFormatter.ofPattern(\"yyyy-MM-dd\").format(temporal);\n</code></pre>\n"},{"comments":[{"comment_id":37786659,"body":"Why not use this? Because (a) it ignores the issue of time zone. Determining the date depends on the time zone. This code depends on the JVM&#39;s default time zone. So, results may vary inadvertently. And (b) because the java.util.Date and SimpleDateFormat classes are notoriously troublesome and should be avoided."},{"comment_id":84037028,"body":"always return strin,  Date requiredDate = df.format(new Date());"}],"answer_id":23580430,"body":"<p>Why not simply use this</p>\n<pre><code>Date convertToDate(String receivedDate) throws ParseException{\n        SimpleDateFormat formatter = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;);\n        Date date = formatter.parse(receivedDate);\n        return date;\n    }\n</code></pre>\n<p>Also, this is the other way :</p>\n<pre><code>DateFormat df = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\nString requiredDate = df.format(new Date()).toString();\n</code></pre>\n<p>or</p>\n<pre><code>Date requiredDate = df.format(new Date());\n</code></pre>\n"},{"comments":[{"comment_id":115172031,"body":"this code returns error &quot;Uncaught SyntaxError: Unexpected identifier&quot;"},{"comment_id":115211104,"body":"@IvanFrolov may be you have a missing import, in which line you get the error?"},{"comment_id":115260033,"body":"oh, sorry - did not noticed that it&#39;s solution for Java, I&#39;ve searched solution for javascript))) (btw - already found). Thanks!"},{"comment_id":115261491,"body":"Ah okay, it&#39;s obvious now."}],"answer_id":23874519,"body":"<p>You can just use:</p>\n\n<pre><code>Date yourDate = new Date();\n\nSimpleDateFormat DATE_FORMAT = new SimpleDateFormat(\"yyyy-MM-dd\");\nString date = DATE_FORMAT.format(yourDate);\n</code></pre>\n\n<p>It works perfectly!</p>\n"},{"comments":[{"comment_id":39178981,"body":"&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSZ&quot; should be &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&#39;Z&#39;&quot;"},{"comment_id":39434148,"body":"no if u put Z in single quote it will give Z as output but without it it will give Timezone. eg. 2014-08-14T01:24:57.236Z and from without it 2014-08-14T01:24:57.236-0530 --&gt; I tried on jdk1.7"},{"comment_id":43319591,"body":"&quot;yyyyy.MMMMM.dd GGG hh:mm aaa&quot;  02001.July.04 AD 12:08 PM Note extra M in month. Four not five!"},{"comment_id":43319873,"body":"if it&#39;s 4 letters or more, then the full form is used. so you can use 4 times m or even 5 times m its same"},{"comment_id":55884669,"body":"This is pretty much a Copy-Paste of the docs. No extra explanations are being provided, and there is no link to the docs where more info could be acquired if needed. -1. (<a href=\"https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html\" rel=\"nofollow noreferrer\">Here&#39;s the link btw</a>)"},{"comment_id":58285624,"body":"Very useful. Thank you."},{"comment_id":71556071,"body":"This is the most satisfying answer that I have found on using date formatter on java. Thank you very much"},{"comment_id":72737763,"body":"In Android, <code>MMMMM</code> didn&#39;t work for me, but <code>MMMM</code> did."},{"comment_id":81904701,"body":"Thanks, very nice! I needed use <code>yyyy-MM-dd&#39;T&#39;HH:mm:ssXXX</code>"}],"answer_id":24423756,"body":"<p>Formatting are CASE-SENSITIVE so USE MM for month not mm (this is for minute) and yyyy \nFor <a href=\"https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html\">Reference</a> you can use following cheatsheet.</p>\n\n<pre><code>G   Era designator  Text    AD\ny   Year    Year    1996; 96\nY   Week year   Year    2009; 09\nM   Month in year   Month   July; Jul; 07\nw   Week in year    Number  27\nW   Week in month   Number  2\nD   Day in year Number  189\nd   Day in month    Number  10\nF   Day of week in month    Number  2\nE   Day name in week    Text    Tuesday; Tue\nu   Day number of week (1 = Monday, ..., 7 = Sunday)    Number  1\na   Am/pm marker    Text    PM\nH   Hour in day (0-23)  Number  0\nk   Hour in day (1-24)  Number  24\nK   Hour in am/pm (0-11)    Number  0\nh   Hour in am/pm (1-12)    Number  12\nm   Minute in hour  Number  30\ns   Second in minute    Number  55\nS   Millisecond Number  978\nz   Time zone   General time zone   Pacific Standard Time; PST; GMT-08:00\nZ   Time zone   RFC 822 time zone   -0800\nX   Time zone   ISO 8601 time zone  -08; -0800; -08:00\n</code></pre>\n\n<p>Examples:</p>\n\n<pre><code>\"yyyy.MM.dd G 'at' HH:mm:ss z\"  2001.07.04 AD at 12:08:56 PDT\n\"EEE, MMM d, ''yy\"  Wed, Jul 4, '01\n\"h:mm a\"    12:08 PM\n\"hh 'o''clock' a, zzzz\" 12 o'clock PM, Pacific Daylight Time\n\"K:mm a, z\" 0:08 PM, PDT\n\"yyyyy.MMMMM.dd GGG hh:mm aaa\"  02001.July.04 AD 12:08 PM\n\"EEE, d MMM yyyy HH:mm:ss Z\"    Wed, 4 Jul 2001 12:08:56 -0700\n\"yyMMddHHmmssZ\" 010704120856-0700\n\"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\"   2001-07-04T12:08:56.235-0700\n\"yyyy-MM-dd'T'HH:mm:ss.SSSXXX\"   2001-07-04T12:08:56.235-07:00\n\"YYYY-'W'ww-u\"  2001-W27-3\n</code></pre>\n"},{"answer_id":25520059,"body":"<p>You could try <strong>Java 8</strong> new <code>date</code>, more information can be found on the <a href=\"http://www.oracle.com/technetwork/articles/java/jf14-date-time-2125367.html\" rel=\"nofollow noreferrer\">Oracle documentation</a>.    </p>\n\n<p>Or you can try the old one </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static Date getDateFromString(String format, String dateStr) {\n\n    DateFormat formatter = new SimpleDateFormat(format);\n    Date date = null;\n    try {\n        date = (Date) formatter.parse(dateStr);\n    } catch (ParseException e) {\n        e.printStackTrace();\n    }\n\n    return date;\n}\n\npublic static String getDate(Date date, String dateFormat) {\n    DateFormat formatter = new SimpleDateFormat(dateFormat);\n    return formatter.format(date);\n}\n</code></pre>\n"},{"answer_id":29030112,"body":"<p>Please refer \"Date and Time Patterns\" here. <a href=\"http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html</a>    </p>\n\n<pre><code>import java.text.SimpleDateFormat;\nimport java.util.Date;\nimport java.text.ParseException;\n\npublic class DateConversionExample{\n\n  public static void main(String arg[]){\n\n    try{\n\n    SimpleDateFormat sourceDateFormat = new SimpleDateFormat(\"yyyy-MM-DD HH:mm:ss\");\n\n    Date date = sourceDateFormat.parse(\"2011-01-18 00:00:00.0\");\n\n\n    SimpleDateFormat targetDateFormat = new SimpleDateFormat(\"yyyy-MM-dd\");\n    System.out.println(targetDateFormat.format(date));\n\n    }catch(ParseException e){\n        e.printStackTrace();\n    }\n  } \n\n}\n</code></pre>\n"},{"comments":[{"comment_id":71688970,"body":"Please add some information to your answer(s) to explain your code."},{"comment_id":71970189,"body":"there is a method name getDate() by which u can get date obj after that apply SimpleDateFormat so that you can convert date according to your format which is defined in SimpleDateFormat constructor and set in StringDate method you can make it cached"}],"answer_id":42265942,"body":"<pre><code>public class SystemDateTest {\n\n    String stringDate;\n\n    public static void main(String[] args) {\n        SystemDateTest systemDateTest = new SystemDateTest();\n        // format date into String\n        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\"dd-MM-yyyy hh:mm:ss\");\n        systemDateTest.setStringDate(simpleDateFormat.format(systemDateTest.getDate()));\n        System.out.println(systemDateTest.getStringDate());\n    }\n\n    public Date getDate() {\n        return new Date();\n    }\n\n    public String getStringDate() {\n        return stringDate;\n    }\n\n    public void setStringDate(String stringDate) {\n        this.stringDate = stringDate;\n    }\n}\n</code></pre>\n"},{"comments":[{"comment_id":100298404,"body":"This date-time class was supplanted years ago by the modern <i>java.time</i> classes. Specifically <code>DateTimeFormatter</code> and <code>DateTimeFormatterBuilder</code>. Suggesting <code>SimpleDateFormat</code> in 2019 is poor advice."},{"comment_id":100298456,"body":"<b>Incorrect</b> Your formatting codes here are wrong. <code>hh</code> is for hour."},{"comment_id":100298478,"body":"Usually we expect some discussion or explanation. Stack Overflow is meant to be more than a snippet library."}],"answer_id":56867425,"body":"<pre><code>SimpleDateFormat dt1 = new SimpleDateFormat(&quot;yyyy-mm-dd&quot;);\n</code></pre>\n"},{"answer_id":57144603,"body":"<p>Say you want to change 2019-12-20 10:50 AM GMT+6:00 to 2019-12-20 10:50 AM \nfirst of all you have to understand the date format first one date format is \nyyyy-MM-dd hh:mm a zzz and second one date format will be yyyy-MM-dd hh:mm a </p>\n\n<p>just return a string from this function like. </p>\n\n<pre><code>public String convertToOnlyDate(String currentDate) {\n    SimpleDateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd hh:mm a \");\n    Date date;\n    String dateString = \"\";\n    try {\n        date = dateFormat.parse(currentDate);\n        System.out.println(date.toString()); \n\n        dateString = dateFormat.format(date);\n    } catch (ParseException e) {\n        e.printStackTrace();\n    }\n    return dateString;\n}\n</code></pre>\n\n<p>This function will return your desire answer. If you want to customize more just add or remove component from the date format. </p>\n"},{"answer_id":62518551,"body":"<p>We can convert Today's date in the format of <em>'JUN 12, 2020'</em>.</p>\n<pre><code>String.valueOf(DateFormat.getDateInstance().format(new Date())));\n</code></pre>\n"},{"answer_id":67341464,"body":"<p>you have some wrong:\nSimpleDateFormat dt1 = new SimpleDateFormat(&quot;yyyyy-mm-dd&quot;);</p>\n<p>first :\nshould be\n<code> new SimpleDateFormat(&quot;yyyy-mm-dd&quot;);</code>\n//yyyy 4 not 5\nthis display 02011, but yyyy it disply 2011</p>\n<p>second:\nchange your code like this\n<code>new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);</code></p>\n<p>i hope help you</p>\n"},{"answer_id":67519315,"body":"<pre><code>/**\n * Method will take Date in &quot;MMMM, dd yyyy HH:mm:s&quot; format and return time difference like added: 3 min ago\n *\n * @param date : date in &quot;MMMM, dd yyyy HH:mm:s&quot; format\n * @return : time difference\n */\nprivate String getDurationTimeStamp(String date) {\n    String timeDifference = &quot;&quot;;\n\n    //date formatter as per the coder need\n    SimpleDateFormat sdf = new SimpleDateFormat(&quot;MMMM, dd yyyy HH:mm:s&quot;);\n    TimeZone timeZone = TimeZone.getTimeZone(&quot;EST&quot;);\n    sdf.setTimeZone(timeZone);\n    Date startDate = null;\n    try {\n        startDate = sdf.parse(date);\n    } catch (ParseException e) {\n        MyLog.printStack(e);\n    }\n\n    //end date will be the current system time to calculate the lapse time difference\n    Date endDate = new Date();\n\n    //get the time difference in milliseconds\n    long duration = endDate.getTime() - startDate.getTime();\n\n    long diffInSeconds = TimeUnit.MILLISECONDS.toSeconds(duration);\n    long diffInMinutes = TimeUnit.MILLISECONDS.toMinutes(duration);\n    long diffInHours = TimeUnit.MILLISECONDS.toHours(duration);\n    long diffInDays = TimeUnit.MILLISECONDS.toDays(duration);\n\n    if (diffInDays &gt;= 365) {\n        int year = (int) (diffInDays / 365);\n        timeDifference = year + mContext.getString(R.string.year_ago);\n    } else if (diffInDays &gt;= 30) {\n        int month = (int) (diffInDays / 30);\n        timeDifference = month + mContext.getString(R.string.month_ago);\n    }\n    //if days are not enough to create year then get the days\n    else if (diffInDays &gt;= 1) {\n        timeDifference = diffInDays + mContext.getString(R.string.day_ago);\n    }\n    //if days value&lt;1 then get the hours\n    else if (diffInHours &gt;= 1) {\n        timeDifference = diffInHours + mContext.getString(R.string.hour_ago);\n    }\n    //if hours value&lt;1 then get the minutes\n    else if (diffInMinutes &gt;= 1) {\n        timeDifference = diffInMinutes + mContext.getString(R.string.min_ago);\n    }\n    //if minutes value&lt;1 then get the seconds\n    else if (diffInSeconds &gt;= 1) {\n        timeDifference = diffInSeconds + mContext.getString(R.string.sec_ago);\n    } else if (timeDifference.isEmpty()) {\n        timeDifference = mContext.getString(R.string.now);\n    }\n\n    return mContext.getString(R.string.added) + &quot; &quot; + timeDifference;\n}\n</code></pre>\n"},{"answer_id":68955239,"body":"<h1><em>java.time</em></h1>\n<p>In March 2014, <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html\" rel=\"nofollow noreferrer\">modern date-time API</a><sup>*</sup> API supplanted the error-prone <code>java.util</code> date-time API and their formatting API, <code>SimpleDateFormat</code>. Since then it has been highly recommended to stop using the legacy API.</p>\n<p>Also, quoted below is a notice from the <a href=\"https://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\">home page of <strong>Joda-Time</strong></a>:</p>\n<blockquote>\n<p>Note that from Java SE 8 onwards, users are asked to migrate to java.time (JSR-310) - a core part of the JDK which replaces this project.</p>\n</blockquote>\n<h2>You do not need <code>DateTimeFormatter</code> for formatting</h2>\n<p>You need <code>DateTimeFormatter</code> only for parsing your string but you do not need a <code>DateTimeFormatter</code> to get the date in the desired format. The modern Date-Time API is based on <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> and thus the <code>toString</code> implementation of <code>java.time</code> types return a string in ISO 8601 format. Your desired format is the default format of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#toString--\" rel=\"nofollow noreferrer\"><code>LocalDate#toString</code></a>.</p>\n<p><strong>Solution using <code>java.time</code>, the modern Date-Time API:</strong></p>\n<pre><code>import java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.util.Locale;\n\npublic class Main {\n    public static void main(String[] args) {\n        String strDate = &quot;2011-01-18 00:00:00.0&quot;;\n        DateTimeFormatter dtfInput = DateTimeFormatter.ofPattern(&quot;u-M-d H:m:s.S&quot;, Locale.ENGLISH);\n        LocalDateTime ldt = LocalDateTime.parse(strDate, dtfInput);\n        // Alternatively,\n        // LocalDateTime ldt = dtfInput.parse(strDate, LocalDateTime::from);\n\n        LocalDate date = ldt.toLocalDate();\n        System.out.println(date);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>2011-01-18\n</code></pre>\n<p><a href=\"https://ideone.com/MxXM2D\" rel=\"nofollow noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n<p><strong>Some important notes about the solution:</strong></p>\n<ol>\n<li><code>java.time</code> made it possible to call <code>parse</code> and <code>format</code> functions on the <a href=\"https://docs.oracle.com/javase/tutorial/datetime/iso/overview.html\" rel=\"nofollow noreferrer\">Date-Time type</a> itself, <strong>in addition to</strong> the traditional way (i.e. calling <code>parse</code> and <code>format</code> functions on the formatter type, which is <code>DateTimeFormatter</code> in case of <code>java.time</code> API).</li>\n<li>Here, you can use <code>y</code> instead of <code>u</code> but <a href=\"https://stackoverflow.com/a/65928023/10819573\">I prefer <code>u</code> to <code>y</code></a>.</li>\n</ol>\n<p>Learn more about the modern Date-Time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n<hr />\n<p><sup>* For any reason, if you have to stick to Java 6 or Java 7, you can use <a href=\"http://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\"><em><strong>ThreeTen-Backport</strong></em></a> which backports most of the <em>java.time</em> functionality to Java 6 &amp; 7. If you are working for an Android project and your Android API level is still not compliant with Java-8, check <a href=\"https://developer.android.com/studio/write/java8-support-table\" rel=\"nofollow noreferrer\">Java 8+ APIs available through desugaring</a> and <a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">How to use ThreeTenABP in Android Project</a>.\n</sup></p>\n"},{"comments":[{"comment_id":134554716,"body":"Thanks for wanting to contribute. (1) No one should use the notoriously troublesome and long outdated <code>SimpleDateFormat</code> any more. IMHO helping people how to do htat is doing them an il favour. (2) <code>SimpleDateFormat</code> didn’t care whether there were 4 or 5 <code>y</code> when parsing. Even if you wanted to use that bad class, you were on the wrong track. (3) You are not covering all the issues with the original code. Older answers do that better."}],"answer_id":76303000,"body":"<p>First, your year is being 0 padded because you have used 5 <code>y</code> characters, instead of 4.</p>\n<p>Secondly, you're using a lower case <code>m</code>, whereas you want a capital <code>M</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String date_s = &quot; 2011-01-18 00:00:00.0&quot;;\nSimpleDateFormat dt = new SimpleDateFormat(&quot;yyyy-MM-dd hh:mm:ss&quot;);\nDate date = dt.parse(date_s);\nSimpleDateFormat dt1 = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\nSystem.out.println(dt1.format(date));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>2011-01-18\n</code></pre>\n<p>You can also use a <code>String.format</code>, with a <code>%tF</code> modifier.<br />\nThis maps to the ISO 8601 date format, which is yyyy-MM-dd.<br />\nSee <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Formatter.html\" rel=\"nofollow noreferrer\">Formatter (Java SE 20 &amp; JDK 20)</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.printf(&quot;%tF&quot;, date.getTime());\n</code></pre>\n"}],"last_activity_date":1684729059,"question_id":4772425,"body":"<p>I've a <code>String</code> representing a date.</p>\n\n<pre><code>String date_s = \"2011-01-18 00:00:00.0\";\n</code></pre>\n\n<p>I'd like to convert it to a <code>Date</code> and output it in <code>YYYY-MM-DD</code> format.</p>\n\n<blockquote>\n  <p>2011-01-18</p>\n</blockquote>\n\n<p>How can I achieve this?</p>\n\n<hr>\n\n<p>Okay, based on the answers I retrieved below, here's something I've tried:</p>\n\n<pre><code>String date_s = \" 2011-01-18 00:00:00.0\"; \nSimpleDateFormat dt = new SimpleDateFormat(\"yyyyy-mm-dd hh:mm:ss\"); \nDate date = dt.parse(date_s); \nSimpleDateFormat dt1 = new SimpleDateFormat(\"yyyyy-mm-dd\");\nSystem.out.println(dt1.format(date));\n</code></pre>\n\n<p>But it outputs <code>02011-00-1</code> instead of the desired <code>2011-01-18</code>. What am I doing wrong?</p>\n"},{"last_activity_date":1684729053,"question_id":76303014,"body":"<p>When a new order arises, I want to update the number of products again and an error occurred.\nThe program reported an error in the command:productDao.updateProduct(product);</p>\n<pre><code>@RequestMapping(&quot;checkOut&quot;)\n    public String checkOut(HttpSession session, Model model) {\n        Orders orders = new Orders();\n        List&lt;OrderDetail&gt; orderDetailList = (List&lt;OrderDetail&gt;) session.getAttribute(&quot;orderDetailList&quot;);\n        User user = (User) session.getAttribute(&quot;user&quot;);\n        int totalPrice = 0;\n        for (OrderDetail orderDetail : orderDetailList) {\n            totalPrice = totalPrice + orderDetail.getUnitPrice() * orderDetail.getQuantity();\n        }\n        int shipPrice = 40000;\n        int totalPriceOrder = totalPrice + shipPrice;\n        if (orderDetailList.size() != 0) {\n            orders.setShipAddress(user.getAddress());\n            orders.setUser(user);\n            orders.setStatus(1);\n            orders.setTotalPrice(totalPriceOrder);\n            LocalDate currentDate = LocalDate.now();\n            orders.setOrderDate(java.sql.Date.valueOf(currentDate));\n        }\n        boolean bl = ordersDao.insertOrders(orders);\n        if (bl) {\n            int temp = 0;\n            for (OrderDetail orderDetail : orderDetailList) {\n                orderDetail.setOrders(orders);\n                orderDetailDao.insertOrderDetail(orderDetail);\n\n                Product product = orderDetail.getProduct();\n                int quantityToReduce = orderDetail.getQuantity();\n                int currentQuantity = product.getQuantity();\n                if (currentQuantity &gt;= quantityToReduce) {\n                    product.setQuantity(currentQuantity - quantityToReduce);\n                    productDao.updateProduct(product);\n                }\n\n                temp++;\n            }\n\n            if (temp == orderDetailList.size()) {\n                orderDetailList.clear();\n                session.setAttribute(&quot;orderDetailList&quot;, orderDetailList);\n            }\n        }\n        if (orderDetailList.size() == 0) {\n            Thread thread = new Thread(new Runnable() {\n                @Override\n                public void run() {\n                    sendMail(user.getEmail(), mailAutoDao.getMailById(2).getMailType(), mailAutoDao.getMailById(2).getMailContent());\n                }\n            });\n            thread.start();\n            return &quot;redirect:/home&quot;;\n        } else {\n            return &quot;redirect:/listCart&quot;;\n        }\n    }\n</code></pre>\n<p>My program gives an error when trying to update a product\nMy DAO function:</p>\n<pre><code>@Override\n    public boolean updateProduct(Product product) {\n        Session session = sessionFactory.openSession();\n        Transaction tx = session.beginTransaction();\n        try {\n            session.update(product);\n            tx.commit();\n            return true;\n        } catch (Exception e) {\n            e.printStackTrace();\n            tx.rollback();\n            // TODO: handle exception\n        }finally {\n            session.close();\n        }\n        return false;\n    }\n</code></pre>\n<p>When I go to the admin page to update the product, everything goes normally, the error only appears when the user makes a purchase</p>\n<p>I tried many ways to fix it but couldn't, hope you can help, thanks</p>\n"},{"comments":[{"comment_id":10036079,"body":"Downvoted? Why would I ask such an easy question? Because Google lacks a really obvious search result for this question. By putting this here we&#39;ll change that."},{"comment_id":10036218,"body":"i completely agree with your opinion. I up voted this to get rid of the negative vote. I firmly believe in making googling topics like this easier for everyone. =)"},{"comment_id":10036287,"body":"Your position is arguable (meta question?); I guess we can assume the downvote is for &quot;lack of research&quot;."},{"comment_id":10036980,"body":"I did do research. I had to click on a few search results and look at lengthy blog posts and ads."},{"comment_id":10037370,"body":"Did your research include reading the documentation of the String class?"},{"comment_id":23673913,"body":"@DJClayworth Most SO questions could be answered with RTFM, but that&#39;s not very helpful. Why not let people who find the question upvote it and let things take their course?"},{"comment_id":32921315,"body":"@PaulBellora Only that StackOverflow has become <b>the first stop</b> for research. If there is a StackOverlfow link in the first 10 Google Results I com here."},{"comment_id":119413446,"body":"<a href=\"https://www.tutorialcup.com/java/convert-char-to-string-in-java.htm\" rel=\"nofollow noreferrer\">How to Convert Character to String in Java</a>"}],"answers":[{"comments":[{"comment_id":50414650,"body":"I think the shortcut compiles down to: <code>new StringBuilder(&quot;&quot;).append(&#39;s&#39;).toString();</code>"},{"comment_id":51154098,"body":"@BinkanSalaryman using javac 1.8.0_51-b16 and then javap to decompile, I see the constructor/method calls I have in the answer. What are you using?"}],"answer_id":8172439,"body":"<p>You can use <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Character.html#toString-char-\" rel=\"noreferrer\"><code>Character.toString(char)</code></a>. Note that this method simply returns a call to <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#valueOf-char-\" rel=\"noreferrer\"><code>String.valueOf(char)</code></a>, which also works.</p>\n\n<p>As others have noted, string concatenation works as a shortcut as well:</p>\n\n<pre><code>String s = \"\" + 's';\n</code></pre>\n\n<p>But this compiles down to:</p>\n\n<pre><code>String s = new StringBuilder().append(\"\").append('s').toString();\n</code></pre>\n\n<p>which is less efficient because the <code>StringBuilder</code> is backed by a <code>char[]</code> (over-allocated by <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/StringBuilder.java#StringBuilder.%3Cinit%3E%28%29\" rel=\"noreferrer\"><code>StringBuilder()</code></a> to <code>16</code>), only for that array to be defensively copied by the resulting <code>String</code>.</p>\n\n<p><code>String.valueOf(char)</code> \"gets in the back door\" by wrapping the <code>char</code> in a single-element array and passing it to the package private constructor <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/String.java#String.%3Cinit%3E%28char%5B%5D%2Cboolean%29\" rel=\"noreferrer\"><code>String(char[], boolean)</code></a>, which avoids the array copy.</p>\n"},{"answer_id":8172444,"body":"<p>Try this: <code>Character.toString(aChar)</code> or just this: <code>aChar + \"\"</code></p>\n"},{"answer_id":8172458,"body":"<p>Use the <code>Character.toString()</code> method like so:</p>\n\n<pre><code>char mChar = 'l';\nString s = Character.toString(mChar);\n</code></pre>\n"},{"answer_id":8172481,"body":"<p>Use any of the following:</p>\n\n<pre><code>String str = String.valueOf('c');\nString str = Character.toString('c');\nString str = 'c' + \"\";\n</code></pre>\n"},{"answer_id":15633542,"body":"<p>I've got of the following <strike>five</strike> <em>six</em> methods to do it.</p>\n<pre><code>// Method #1\nString stringValueOf = String.valueOf('c'); // most efficient\n\n// Method #2\nString stringValueOfCharArray = String.valueOf(new char[]{x});\n\n// Method #3\nString characterToString = Character.toString('c');\n\n// Method #4\nString characterObjectToString = new Character('c').toString();\n\n// Method #5\n// Although this approach seems very simple, \n// this is less efficient because the concatenation\n// expands to a StringBuilder.\nString concatBlankString = 'c' + &quot;&quot;;\n\n// Method #6\nString fromCharArray = new String(new char[]{x});\n</code></pre>\n<blockquote>\n<p>Note: <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Character.java#Character.toString%28char%29\" rel=\"noreferrer\">Character.toString(char)</a> returns <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String.valueOf%28char%29\" rel=\"noreferrer\">String.valueOf(char)</a>. So effectively both are same.</p>\n</blockquote>\n<p><code>String.valueOf(char[] value)</code> invokes <code>new String(char[] value)</code>, which in turn sets the <code>value</code> char array.</p>\n<pre><code>public String(char value[]) {\n    this.value = Arrays.copyOf(value, value.length);\n}\n</code></pre>\n<p>On the other hand <code>String.valueOf(char value)</code> invokes the following <strong>package private constructor.</strong></p>\n<pre><code>String(char[] value, boolean share) {\n    // assert share : &quot;unshared not supported&quot;;\n    this.value = value;\n}\n</code></pre>\n<p><em>Source code from <code>String.java</code> in <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8u40-b25/java/lang/String.java\" rel=\"noreferrer\">Java 8 source code</a></em></p>\n<blockquote>\n<p>Hence <code>String.valueOf(char)</code> seems to be most efficient method, in terms of both memory and speed, for converting <code>char</code> to <code>String</code>.</p>\n</blockquote>\n<p>Sources:</p>\n<ol>\n<li><a href=\"https://deepumohan.com/tech/java-how-to-convert-primitive-char-to/\" rel=\"noreferrer\">How to convert primitive char to String in Java</a></li>\n<li><a href=\"http://javarevisited.blogspot.in/2012/02/how-to-convert-char-to-string-in-java.html\" rel=\"noreferrer\">How to convert Char to String in Java with Example</a></li>\n</ol>\n"},{"comments":[{"comment_id":108537403,"body":"someone tested this?"}],"answer_id":30219789,"body":"<p>Below are various ways to convert to char c to String s (in decreasing order of speed and efficiency)</p>\n\n<pre><code>char c = 'a';\nString s = String.valueOf(c);             // fastest + memory efficient\nString s = Character.toString(c);\nString s = new String(new char[]{c});\nString s = String.valueOf(new char[]{c});\nString s = new Character(c).toString();\nString s = \"\" + c;                        // slowest + memory inefficient\n</code></pre>\n"},{"answer_id":32174377,"body":"<p>We have various ways to convert a <code>char</code> to <code>String</code>. <strong>One</strong> way is to make use of static method <code>toString()</code> in <code>Character</code> class:</p>\n\n<pre><code>char ch = 'I'; \nString str1 = Character.toString(ch);\n</code></pre>\n\n<p>Actually this <code>toString</code> method internally makes use of <code>valueOf</code> method from <code>String</code> class which makes use of char array:</p>\n\n<pre><code>public static String toString(char c) {\n    return String.valueOf(c);\n}\n</code></pre>\n\n<p>So <strong>second</strong> way is to use this directly:</p>\n\n<pre><code>String str2 = String.valueOf(ch);\n</code></pre>\n\n<p>This <code>valueOf</code> method in <code>String</code> class makes use of char array:</p>\n\n<pre><code>public static String valueOf(char c) {\n        char data[] = {c};\n        return new String(data, true);\n}\n</code></pre>\n\n<p>So the <strong>third</strong> way is to make use of an anonymous array to wrap a single character and then passing it to <code>String</code> constructor:</p>\n\n<pre><code>String str4 = new String(new char[]{ch});\n</code></pre>\n\n<p>The <strong>fourth</strong> way is to make use of concatenation:</p>\n\n<pre><code>String str3 = \"\" + ch;\n</code></pre>\n\n<p>This will actually make use of <code>append</code> method from <code>StringBuilder</code> class which is actually preferred when we are doing concatenation in a loop. </p>\n"},{"answer_id":35245532,"body":"<p>Here are a few methods, in no particular order:</p>\n\n<pre><code>char c = 'c';\n\nString s = Character.toString(c); // Most efficient way\n\ns = new Character(c).toString(); // Same as above except new Character objects needs to be garbage-collected\n\ns = c + \"\"; // Least efficient and most memory-inefficient, but common amongst beginners because of its simplicity\n\ns = String.valueOf(c); // Also quite common\n\ns = String.format(\"%c\", c); // Not common\n\nFormatter formatter = new Formatter();\ns = formatter.format(\"%c\", c).toString(); // Same as above\nformatter.close();\n</code></pre>\n"},{"answer_id":39532191,"body":"<p>I've tried the suggestions but ended up implementing it as follows</p>\n\n<pre><code>editView.setFilters(new InputFilter[]{new InputFilter()\n        {\n            @Override\n            public CharSequence filter(CharSequence source, int start, int end,\n                                       Spanned dest, int dstart, int dend)\n            {\n                String prefix = \"http://\";\n\n                //make sure our prefix is visible\n                String destination = dest.toString();\n\n                //Check If we already have our prefix - make sure it doesn't\n                //get deleted\n                if (destination.startsWith(prefix) &amp;&amp; (dstart &lt;= prefix.length() - 1))\n                {\n                    //Yep - our prefix gets modified - try preventing it.\n                    int newEnd = (dend &gt;= prefix.length()) ? dend : prefix.length();\n\n                    SpannableStringBuilder builder = new SpannableStringBuilder(\n                            destination.substring(dstart, newEnd));\n                    builder.append(source);\n                    if (source instanceof Spanned)\n                    {\n                        TextUtils.copySpansFrom(\n                                (Spanned) source, 0, source.length(), null, builder, newEnd);\n                    }\n\n                    return builder;\n                }\n                else\n                {\n                    //Accept original replacement (by returning null)\n                    return null;\n                }\n            }\n        }});\n</code></pre>\n"},{"comments":[{"comment_id":70956815,"body":"This does not provide an answer to the question. To critique or request clarification from an author, leave a comment below their post. - <a href=\"/review/low-quality-posts/15016514\">From Review</a>"},{"comment_id":70974420,"body":"I am Converting Char Array to String @pczeus"}],"answer_id":40735799,"body":"<p><strong>I am converting Char Array to String</strong></p>\n\n<pre><code>Char[] CharArray={ 'A', 'B', 'C'};\nString text = String.copyValueOf(CharArray);\n</code></pre>\n"},{"answer_id":44485322,"body":"<p>As @WarFox stated - there are 6 methods to convert char to string. However, the fastest one would be via concatenation, despite answers above stating that it is <code>String.valueOf</code>. Here is benchmark that proves that:</p>\n\n<pre><code>@BenchmarkMode(Mode.Throughput)\n@Fork(1)\n@State(Scope.Thread)\n@Warmup(iterations = 10, time = 1, batchSize = 1000, timeUnit = TimeUnit.SECONDS)\n@Measurement(iterations = 10, time = 1, batchSize = 1000, timeUnit = TimeUnit.SECONDS)\npublic class CharToStringConversion {\n\n    private char c = 'c';\n\n    @Benchmark\n    public String stringValueOf() {\n        return String.valueOf(c);\n    }\n\n    @Benchmark\n    public String stringValueOfCharArray() {\n        return String.valueOf(new char[]{c});\n    }\n\n    @Benchmark\n    public String characterToString() {\n        return Character.toString(c);\n    }\n\n    @Benchmark\n    public String characterObjectToString() {\n        return new Character(c).toString();\n    }\n\n    @Benchmark\n    public String concatBlankStringPre() {\n        return c + \"\";\n    }\n\n    @Benchmark\n    public String concatBlankStringPost() {\n        return \"\" + c;\n    }\n\n    @Benchmark\n    public String fromCharArray() {\n        return new String(new char[]{c});\n    }\n}\n</code></pre>\n\n<p>And result:</p>\n\n<pre><code>Benchmark                                        Mode  Cnt       Score      Error  Units\nCharToStringConversion.characterObjectToString  thrpt   10   82132.021 ± 6841.497  ops/s\nCharToStringConversion.characterToString        thrpt   10  118232.069 ± 8242.847  ops/s\nCharToStringConversion.concatBlankStringPost    thrpt   10  136960.733 ± 9779.938  ops/s\nCharToStringConversion.concatBlankStringPre     thrpt   10  137244.446 ± 9113.373  ops/s\nCharToStringConversion.fromCharArray            thrpt   10   85464.842 ± 3127.211  ops/s\nCharToStringConversion.stringValueOf            thrpt   10  119281.976 ± 7053.832  ops/s\nCharToStringConversion.stringValueOfCharArray   thrpt   10   86563.837 ± 6436.527  ops/s\n</code></pre>\n\n<p>As you can see, the fastest one would be <code>c + \"\"</code> or <code>\"\" + c</code>;</p>\n\n<pre><code>VM version: JDK 1.8.0_131, VM 25.131-b11\n</code></pre>\n\n<p>This performance difference is due to <code>-XX:+OptimizeStringConcat</code> optimization. You can read about it <a href=\"https://stackoverflow.com/questions/42193955/why-is-string-concatenation-faster-than-string-valueof-for-converting-an-integer\">here</a>.</p>\n"},{"answer_id":62394792,"body":"<pre><code>  char vIn = 'A';\n  String vOut = Character.toString(vIn);\n</code></pre>\n\n<p>For these types of conversion, I have site bookmarked called <a href=\"https://www.converttypes.com/\" rel=\"nofollow noreferrer\">https://www.converttypes.com/</a>\nIt helps me quickly get the conversion code for most of the languages I use.</p>\n"},{"answer_id":76302961,"body":"<p>To convert a <code>char</code> to a <code>String</code>, you can use the <code>String.valueOf</code> method.</p>\n<p>To convert a <code>String</code> to a <code>char</code>, you can use the <code>String.charAt</code> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>char character = 'a';\nString string = String.valueOf(character);\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>String string = &quot;a&quot;;\nchar character = string.charAt(0);\n</code></pre>\n"}],"last_activity_date":1684728015,"question_id":8172420,"body":"<p>I have a <code>char</code> and I need a <code>String</code>. How do I convert from one to the other?</p>\n"},{"last_activity_date":1684727394,"question_id":76289162,"body":"<p>I have an issue where the error page of the application is the payara one. I know that It can be changed to a custom one if I provide the file in the web.xml, and I would like to set It to the index.html.</p>\n<p>But the problem is that the the frontend is on a different pod an I can not acces the file from the pod of the backend where the payara is.</p>\n<p>I have an AuthorizationFilter class where I call the sendError function of the HttpServletResponse.\nI tried to call sendRedirect function instead of It with the home page url, but I am getting http 500 error.</p>\n<pre><code>@Override\npublic void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n    Objects.requireNonNull(request);\n    Objects.requireNonNull(response);\n    Objects.requireNonNull(chain);\n\n    HttpServletRequest httpRequest = (HttpServletRequest) request;\n    HttpServletResponse httpServletResponse = (HttpServletResponse) response;\n\n    if (oidcConstants.getNonOidcProtectedEndpoints().stream().anyMatch(p -&gt; httpRequest.getRequestURI().startsWith(p))) {\n        chain.doFilter(request, response);\n    } else if (context.getCallerName() == null\n                || CollectionUtils.isEmpty(context.getCallerGroups())){\n        LOGGER.debug(&quot;OIDC auth required: {}&quot;, context.getCallerName());\n        String redirectUrl = getRedirectURL(httpRequest);\n        Cookie oidcOriginalReferer = new Cookie(OidcConstants.OIDC_ORIGINAL_REFERER_COOKIE_NAME, redirectUrl);\n        oidcOriginalReferer.setPath(OidcConstants.OIDC_ORIGINAL_REFERER_COOKIE_PATH);\n        oidcOriginalReferer.setSecure(true);\n        httpServletResponse.addCookie(oidcOriginalReferer);\n        httpServletResponse.sendError(HttpServletResponse.SC_UNAUTHORIZED, &quot;User is not Authenticated yet&quot;);\n    } else if (oidcConstants.getAllowedRoles().stream().noneMatch(context.getCallerGroups()::contains)) {\n        LOGGER.warn(&quot;User {} has no role to login&quot;, context.getSubject());\n        httpServletResponse.sendError(HttpServletResponse.SC_FORBIDDEN, &quot;User has no proper role&quot;);\n    } else {\n        // user is already authenticated and has the required roles\n        chain.doFilter(request, response);\n    }\n\n}\n</code></pre>\n<p>In the frontend If It is receving response with the specific status code a popup should apear.\nI would like to see the popup for the error on the main page instead of the payara error page</p>\n"},{"comments":[{"comment_id":1683215,"body":"What&#39;s it for?  I have a nasty feeling this is some kind of field sanitiser to, say, prevent SQL injection attacks on a website.  Oh no!  This would not be the right way to go about that..."},{"comment_id":10571039,"body":"you need to use regular expression."}],"answers":[{"answer_id":1795413,"body":"<p>What do you exactly call &quot;special character&quot;? If you mean something like <em>&quot;anything that is not alphanumeric&quot;</em> you can use <code>org.apache.commons.lang.StringUtils</code> class (methods <code>IsAlpha/IsNumeric/IsWhitespace/IsAsciiPrintable</code>).</p>\n<p>If it is not so trivial, you can use a regex that defines the exact character list you accept and match the string against it.</p>\n"},{"answer_id":1795420,"body":"<p>All depends on exactly what you mean by \"special\". In a regex you can specify</p>\n\n<ul>\n<li>\\W  to mean non-alpahnumeric</li>\n<li>\\p{Punct} to mean punctuation characters</li>\n</ul>\n\n<p>I suspect that the latter is what you mean. But if not use a [] list to specify exactly what you want.</p>\n"},{"answer_id":1795424,"body":"<p>Have a look at the <code>java.lang.Character</code> class. It has some test methods and you may find one that fits your needs.</p>\n\n<p>Examples: <code>Character.isSpaceChar(c)</code> or <code>!Character.isJavaLetter(c)</code></p>\n"},{"answer_id":1795432,"body":"<p>Visit each character in the string to see if that character is in a blacklist of special characters; this is O(n*m).</p>\n\n<p>The pseudo-code is:</p>\n\n<pre><code>for each char in string:\n  if char in blacklist:\n    ...\n</code></pre>\n\n<p>The complexity can be slightly improved by sorting the blacklist so that you can early-exit each check.  However, the string find function is probably native code, so this optimisation - which would be in Java byte-code - could well be slower.</p>\n"},{"comments":[{"comment_id":11522891,"body":"It&#39;s much safer to make a list of acceptable characters and check against that."}],"answer_id":1795434,"body":"<p>First you have to exhaustively identify the special characters that you want to check.</p>\n\n<p>Then you can write a regular expression and use </p>\n\n<pre><code>public boolean matches(String regex)\n</code></pre>\n"},{"comments":[{"comment_id":1683287,"body":"you need to import the correct Matcher and Pattern. import java.util.regex.Matcher; import java.util.regex.Pattern;  This code is great for telling of the string passed in contains only a-z and 0-9, it won&#39;t give you a location of the &#39;bad&#39; character or what it is, but then the question didn&#39;t ask for that.  I feel regex is great skill for a programmer to master, I&#39;m still trying."},{"comment_id":23433092,"body":"if you want to show the the bad character you can use m.group() or m.group(index)"},{"comment_id":66441480,"body":"This will allow you Alpha numeric validation. If you update Reg Ex little bit Like =&gt; [^a-z] than it will validate alpha characters only."}],"answer_id":1795436,"body":"<pre><code>Pattern p = Pattern.compile(\"[^a-z0-9 ]\", Pattern.CASE_INSENSITIVE);\nMatcher m = p.matcher(\"I am a string\");\nboolean b = m.find();\n\nif (b)\n   System.out.println(\"There is a special character in my string\");\n</code></pre>\n"},{"answer_id":6366219,"body":"<pre><code>Pattern p = Pattern.compile(\"[\\\\p{Alpha}]*[\\\\p{Punct}][\\\\p{Alpha}]*\");\n        Matcher m = p.matcher(\"Afsff%esfsf098\");\n        boolean b = m.matches();\n\n        if (b == true)\n           System.out.println(\"There is a sp. character in my string\");\n        else\n            System.out.println(\"There is no sp. char.\");\n</code></pre>\n"},{"comments":[{"comment_id":102938221,"body":"This is not reliable! It only checks for <code>a-zA-Z0-9</code>. Try checking this against <code>123%#@ABC</code> input. It returns true."},{"comment_id":111696772,"body":"@RSun That would return false"}],"answer_id":6366275,"body":"<p>If it matches regex <code>[a-zA-Z0-9 ]*</code> then there is not special characters in it.</p>\n"},{"comments":[{"comment_id":109069419,"body":"If compared with &quot; abc&quot; then gives true, but if compared with &quot; &quot; then giving false."}],"answer_id":24425607,"body":"<p>You can use the following code to detect special character from string.</p>\n\n<pre><code>import java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class DetectSpecial{ \npublic int getSpecialCharacterCount(String s) {\n     if (s == null || s.trim().isEmpty()) {\n         System.out.println(\"Incorrect format of string\");\n         return 0;\n     }\n     Pattern p = Pattern.compile(\"[^A-Za-z0-9]\");\n     Matcher m = p.matcher(s);\n    // boolean b = m.matches();\n     boolean b = m.find();\n     if (b)\n        System.out.println(\"There is a special character in my string \");\n     else\n         System.out.println(\"There is no special char.\");\n     return 0;\n }\n}\n</code></pre>\n"},{"comments":[{"comment_id":119334770,"body":"Thanks for sharing, this is what I needed!"}],"answer_id":41697673,"body":"<p>If you want to have LETTERS, SPECIAL CHARACTERS and NUMBERS in your password with at least 8 digit, then use this code, it is working perfectly</p>\n\n<pre><code>public static boolean Password_Validation(String password) \n{\n\n    if(password.length()&gt;=8)\n    {\n        Pattern letter = Pattern.compile(\"[a-zA-z]\");\n        Pattern digit = Pattern.compile(\"[0-9]\");\n        Pattern special = Pattern.compile (\"[!@#$%&amp;*()_+=|&lt;&gt;?{}\\\\[\\\\]~-]\");\n        //Pattern eight = Pattern.compile (\".{8}\");\n\n\n           Matcher hasLetter = letter.matcher(password);\n           Matcher hasDigit = digit.matcher(password);\n           Matcher hasSpecial = special.matcher(password);\n\n           return hasLetter.find() &amp;&amp; hasDigit.find() &amp;&amp; hasSpecial.find();\n\n    }\n    else\n        return false;\n\n}\n</code></pre>\n"},{"answer_id":42400458,"body":"<p>//without using regular expression........</p>\n\n<pre><code>    String specialCharacters=\" !#$%&amp;'()*+,-./:;&lt;=&gt;?@[]^_`{|}~0123456789\";\n    String name=\"3_ saroj@\";\n    String str2[]=name.split(\"\");\n\n    for (int i=0;i&lt;str2.length;i++)\n    {\n    if (specialCharacters.contains(str2[i]))\n    {\n        System.out.println(\"true\");\n        //break;\n    }\n    else\n        System.out.println(\"false\");\n    }\n</code></pre>\n"},{"answer_id":42408656,"body":"<p>//this is updated version of code that i posted\n/*\nThe isValidName Method will check whether the name passed as argument should not contain-\n1.null value or space\n2.any special character\n3.Digits (0-9)\nExplanation---\nHere str2 is String array variable which stores the the splited string of name that is passed as argument\nThe count variable will count the number of special character occurs\nThe method will return true if it satisfy all the condition\n*/</p>\n\n<pre><code>public boolean isValidName(String name)\n{\n    String specialCharacters=\" !#$%&amp;'()*+,-./:;&lt;=&gt;?@[]^_`{|}~0123456789\";\n    String str2[]=name.split(\"\");\n    int count=0;\n    for (int i=0;i&lt;str2.length;i++)\n    {\n        if (specialCharacters.contains(str2[i]))\n        {\n            count++;\n        }\n    }       \n\n    if (name!=null &amp;&amp; count==0 )\n    {\n        return true;\n    }\n    else\n    {\n        return false;\n    }\n}\n</code></pre>\n"},{"answer_id":43608531,"body":"<p>in the line String str2[]=name.split(\"\"); give an extra character in Array... \nLet me explain by example\n\"Aditya\".split(\"\") would return [, A, d,i,t,y,a] You will have a extra character in your Array...<br>\nThe \"Aditya\".split(\"\") does not work as expected by saroj routray you will get an extra character in String => [, A, d,i,t,y,a]. </p>\n\n<p>I have modified it,see below code it work as expected </p>\n\n<pre><code> public static boolean isValidName(String inputString) {\n\n    String specialCharacters = \" !#$%&amp;'()*+,-./:;&lt;=&gt;?@[]^_`{|}~0123456789\";\n    String[] strlCharactersArray = new String[inputString.length()];\n    for (int i = 0; i &lt; inputString.length(); i++) {\n         strlCharactersArray[i] = Character\n            .toString(inputString.charAt(i));\n    }\n    //now  strlCharactersArray[i]=[A, d, i, t, y, a]\n    int count = 0;\n    for (int i = 0; i &lt;  strlCharactersArray.length; i++) {\n        if (specialCharacters.contains( strlCharactersArray[i])) {\n            count++;\n        }\n\n    }\n\n    if (inputString != null &amp;&amp; count == 0) {\n        return true;\n    } else {\n        return false;\n    }\n}\n</code></pre>\n"},{"answer_id":46183703,"body":"<p>This worked for me:</p>\n\n<pre><code>String s = \"string\";\nif (Pattern.matches(\"[a-zA-Z]+\", s)) {\n System.out.println(\"clear\");\n} else {\n System.out.println(\"buzz\");\n}\n</code></pre>\n"},{"answer_id":52797688,"body":"<p>Convert the string into char array with all the letters in lower case:</p>\n\n<pre><code>char c[] = str.toLowerCase().toCharArray();\n</code></pre>\n\n<p>Then you can use <code>Character.isLetterOrDigit(c[index])</code> to find out which index has special characters.</p>\n"},{"answer_id":54230178,"body":"<p>Use java.util.regex.Pattern class's static method  matches(regex, String obj)<br>\nregex : characters in lower and upper case &amp; digits between 0-9 <br>\nString obj : String object you want to check either it contain special character or not.<br><br>\nIt returns boolean value true if only contain characters and numbers, otherwise returns boolean value false<br><br>\nExample.<br><br></p>\n\n<pre><code>String isin = \"12GBIU34RT12\";&lt;br&gt;\nif(Pattern.matches(\"[a-zA-Z0-9]+\", isin)&lt;br&gt;{&lt;br&gt;\n   &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;System.out.println(\"Valid isin\");&lt;br&gt;\n}else{&lt;br&gt;\n   &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;System.out.println(\"Invalid isin\");&lt;br&gt;\n}\n</code></pre>\n"},{"answer_id":58687604,"body":"<p><strong>This is tested in android 7.0 up to android 10.0 and it works</strong></p>\n<p>Use this code to check if string contains special character and numbers:</p>\n<pre><code>  name = firstname.getText().toString(); //name is the variable that holds the string value\n\n  Pattern special= Pattern.compile(&quot;[^a-z0-9 ]&quot;, Pattern.CASE_INSENSITIVE);\n  Pattern number = Pattern.compile(&quot;[0-9]&quot;, Pattern.CASE_INSENSITIVE);\n  Matcher matcher = special.matcher(name);\n  Matcher matcherNumber = number.matcher(name);\n  \n  boolean constainsSymbols = matcher.find();\n  boolean containsNumber = matcherNumber.find();\n\n  if(constainsSymbols){\n   //string contains special symbol/character\n  }\n  else if(containsNumber){\n   //string contains numbers\n  }\n  else{\n   //string doesn't contain special characters or numbers\n  }\n</code></pre>\n"},{"answer_id":76302927,"body":"<p>There are a few approaches you can take to determine if a string contains a set of specified characters.</p>\n<p>You can use a regular expression pattern, specifically a character-class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>&quot;example*&quot;.matches(&quot;.*?[&quot; + Pattern.quote(&quot;[]{}{)*|:&gt;&quot;) + &quot;].*&quot;);\n</code></pre>\n<p>Or, you can create a for-loop, which returns <code>true</code> if it finds a match.</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean contains(String string, char... characters) {\n    for (char characterA : string.toCharArray()) {\n        for (char characterB : characters) {\n            if (characterA == characterB)\n                return true;\n        }\n    }\n    return false;\n}\n</code></pre>\n"}],"last_activity_date":1684727299,"question_id":1795402,"body":"<p>How do you check if a String contains a special character like: </p>\n\n<pre><code>[,],{,},{,),*,|,:,&gt;,\n</code></pre>\n"},{"comments":[{"comment_id":56916252,"body":"Have you <b>repeatedly</b> run this method and measured time?"},{"comment_id":56916360,"body":"See <a href=\"http://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java\" title=\"how do i write a correct micro benchmark in java\">stackoverflow.com/questions/504103/&hellip;</a>"},{"comment_id":56918380,"body":"I don&#39;t have access to the test cases, so I can&#39;t exactly run it repeatedly. I don&#39;t know what LeetCode does to achieve this weird performance, so the question is this: what it <i>could</i> be doing to make it that bad?"},{"comment_id":56919054,"body":"If the code is executed only once (for the examples on <a href=\"https://leetcode.com/problems/insert-interval/\" rel=\"nofollow noreferrer\">leetcode</a>) the decreasing execution time might be related due to the fact that the lambda bytecode is <b>generated at runtime</b>. Whereas your anonymous comparator class is created <b>at compile time</b>."},{"comment_id":56922721,"body":"I believe that should really be the answer, thank you! I had no idea. I thought that lambdas were something like syntactic sugar for anonymous classes."},{"comment_id":57031025,"body":"So far, my anecdotal experience (from my own use cases) is that lambdas are just slower than anonymous classes.  However, by like a few percent, not any 20x..."}],"answers":[{"comments":[{"comment_id":57030199,"body":"Any documentation to enforce your answer (and help us to convince sceptical) ?"},{"comment_id":57030546,"body":"@yunandtidus: I added links to other questions (whose answers provide even more links). The fact, that ASM is used, is an implementation detail, that won’t appear in a specification, but can be seen by looking at the <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/8-b132/java/lang/invoke/InnerClassLambdaMetafactory.java#249\" rel=\"nofollow noreferrer\">source code</a>"},{"comment_id":57030677,"body":"This is maybe more than initially expected by OP, but very interesting in my opinion. Thanks for pointing this out."},{"comment_id":95656854,"body":"Has the first-time initialization overhead of lambda expressions improved in JDK 11?"},{"comment_id":95659060,"body":"@lalo a quick test on my machine suggests that the first time initialization has been improved by factor four between JDK 8 and JDK 11, though, it’s not clear whether this is the result of a dedicated lambda optimization or a general speedup. It’s still more than the initialization of a single inner class, but mind that we’re talking about a single-time overhead of ~10 ms on my machine.  Also, you only notice it when no-one used them before; just specifying a <code>--module-path</code> on the command line make it disappear; apparently, the code handling application modules does use lambda expressions."},{"comment_id":95668578,"body":"@Holger this &quot;first-time&quot; slowness was part why my team abandoned <code>Nashhorn</code>; we have <i>lots</i> of code that relied on it, but because of <code>invokedynamic</code> used and being rather slow for the first runs (in our case in some cases it was 25-30 s) we dropped it a few years ago. Might be time to test this against java-11, but no idea if someone would want to re-write those portions of the code though"},{"comment_id":95680267,"body":"@Eugene It’s “Nashorn” (German for rhinoceros) and it has been deprecated for removal with JDK 11 (<a href=\"https://bugs.openjdk.java.net/browse/JDK-8202786\" rel=\"nofollow noreferrer\">JDK-8202786</a>). Honestly, I never understood why someone would want to have JavaScript in their application, unless when implementing a web browser…"},{"comment_id":95682220,"body":"@Holger as usual, it&#39;s some decision that was not really in developers control, anyway very useful info that it is removed! thank you"},{"comment_id":95682448,"body":"@Eugene not “is” but “will be”"},{"comment_id":111930214,"body":"@Holger I would suggest moving <a href=\"https://stackoverflow.com/questions/34585444/java-lambdas-20-times-slower-than-anonymous-classes#comment95659060_34642063\">this comment</a> as a part of an edit. It becomes relevant now that JDK-11 has been around for some time."}],"answer_id":34642063,"body":"<p>You are obviously encountering the first-time initialization overhead of lambda expressions. As already mentioned in the comments, the classes for lambda expressions are generated at runtime rather than being loaded from your class path.</p>\n<p>However, being generated isn’t the cause for the slowdown. After all, generating a class having a simple structure can be even faster than loading the same bytes from an external source. And the inner class has to be loaded too. But when the application hasn’t used lambda expressions before¹, even the framework for generating the lambda classes has to be loaded (Oracle’s current implementation uses ASM under the hood). This is the actual cause of the slowdown, loading and initialization of a dozen internally used classes, not the lambda expression itself².</p>\n<p>You can easily verify this. In your current code using lambda expressions, you have two identical expressions <code>(i1, i2) -&gt; Integer.compare(i1.start, i2.start)</code>. The current implementation doesn’t recognize this (actually, the compiler doesn’t provide a hint neither). So here, two lambda instances, having even different classes, are generated. You can refactor the code to have only one comparator, similar to your inner class variant:</p>\n<pre><code>final Comparator&lt;? super Interval&gt; comparator\n  = (i1, i2) -&gt; Integer.compare(i1.start, i2.start);\nint start = Collections.binarySearch(intervals, newInterval, comparator);\nint skip = start &gt;= 0 ? start : -start - 1;\nint end = Collections.binarySearch(intervals.subList(skip, intervals.size()),\n                                   new Interval(newInterval.end, 0),\n                                   comparator);\n</code></pre>\n<p>You won’t notice any significant performance difference, as it’s not the number of lambda expressions that matters, but just the class loading and initialization of the framework, which happens exactly once.</p>\n<p>You can even max it out by inserting additional lambda expressions like</p>\n<pre><code>final Comparator&lt;? super Interval&gt; comparator1\n    = (i1, i2) -&gt; Integer.compare(i1.start, i2.start);\nfinal Comparator&lt;? super Interval&gt; comparator2\n    = (i1, i2) -&gt; Integer.compare(i1.start, i2.start);\nfinal Comparator&lt;? super Interval&gt; comparator3\n    = (i1, i2) -&gt; Integer.compare(i1.start, i2.start);\nfinal Comparator&lt;? super Interval&gt; comparator4\n    = (i1, i2) -&gt; Integer.compare(i1.start, i2.start);\nfinal Comparator&lt;? super Interval&gt; comparator5\n    = (i1, i2) -&gt; Integer.compare(i1.start, i2.start);\n</code></pre>\n<p>without seeing any slowdown. It’s really the initial overhead of the very first lambda expression of the entire runtime you are noticing here. Since Leetcode itself apparently doesn’t use lambda expressions before entering your code, whose execution time gets measured, this overhead adds to your execution time here.</p>\n<p>See also <a href=\"https://stackoverflow.com/questions/16827262/how-will-java-lambda-functions-be-compiled\">“How will Java lambda functions be compiled?”</a> and <a href=\"https://stackoverflow.com/questions/27524445/does-a-lambda-expression-create-an-object-on-the-heap-every-time-its-executed\">“Does a lambda expression create an object on the heap every time it's executed?”</a></p>\n<p>¹ This implies that JDK code that will be executed before handing control over to your application doesn’t use lambda expressions itself. Since this code stems from times before the introduction of lambda expressions, this is usually the case. With newer JDKs, modular software will be initialized by different, newer code, which seems to use lambda expressions, so the initialization of the runtime facility can’t be measured within the application anymore in these setups.</p>\n<p>² The initialization time has been reduced significantly in newer JDKs. There are different possible causes, general performance improvements, dedicated lambda optimizations, or both. Improving initialization time in general, is an issue that the JDK developers did not forget.</p>\n"}],"last_activity_date":1684726214,"question_id":34585444,"body":"<p>I've seen a lot of questions here about Java lambdas performance, but most of them go like &quot;Lambdas are slightly faster, but become slower when using closures&quot; or &quot;Warm-up vs execution times are different&quot; or other such things.</p>\n<p>However, I hit a rather strange thing here. Consider <a href=\"https://leetcode.com/problems/insert-interval/\" rel=\"nofollow noreferrer\">this LeetCode problem</a>:</p>\n<blockquote>\n<p>Given a set of non-overlapping intervals, insert a new interval into\nthe intervals (merge if necessary).</p>\n<p>You may assume that the intervals were initially sorted according to\ntheir start times.</p>\n</blockquote>\n<p>The problem was tagged hard, so I assumed that a linear approach is not what they want there. So I decided to come up with a clever way to combine binary search with modifications to the input list. Now the problem is not very clear on modifying the input list—it says &quot;insert&quot;, even though the signature requires to return a reference to list, but never mind that for now. Here's the full code, but only the first few lines are relevant to this question. I'm keeping the rest here just so that anyone can try it:</p>\n<pre><code>public List&lt;Interval&gt; insert(List&lt;Interval&gt; intervals, Interval newInterval) {\n    int start = Collections.binarySearch(intervals, newInterval,\n                                         (i1, i2) -&gt; Integer.compare(i1.start, i2.start));\n    int skip = start &gt;= 0 ? start : -start - 1;\n    int end = Collections.binarySearch(intervals.subList(skip, intervals.size()),\n                                       new Interval(newInterval.end, 0),\n                                       (i1, i2) -&gt; Integer.compare(i1.start, i2.start));\n    if (end &gt;= 0) {\n        end += skip; // back to original indexes\n    } else {\n        end -= skip; // ditto\n    }\n    int newStart = newInterval.start;\n    int headEnd;\n    if (-start - 2 &gt;= 0) {\n        Interval prev = intervals.get(-start - 2);\n        if (prev.end &lt; newInterval.start) {\n            // the new interval doesn't overlap the one before the insertion point\n            headEnd = -start - 1;\n        } else {\n            newStart = prev.start;\n            headEnd = -start - 2;\n        }\n    } else if (start &gt;= 0) {\n        // merge the first interval\n        headEnd = start;\n    } else { // start == -1, insertion point = 0\n        headEnd = 0;\n    }\n    int newEnd = newInterval.end;\n    int tailStart;\n    if (-end - 2 &gt;= 0) {\n        // merge the end with the previous interval\n        newEnd = Math.max(newEnd, intervals.get(-end - 2).end);\n        tailStart = -end - 1;\n    } else if (end &gt;= 0) {\n        newEnd = intervals.get(end).end;\n        tailStart = end + 1;\n    } else { // end == -1, insertion point = 0\n        tailStart = 0;\n    }\n    intervals.subList(headEnd, tailStart).clear();\n    intervals.add(headEnd, new Interval(newStart, newEnd));\n    return intervals;\n}\n</code></pre>\n<p>This worked fine and got accepted, but with 80 ms runtime, while most solutions were 4-5 ms and some 18-19 ms. When I looked them up, they were all linear and very primitive. Not something one would expect from a problem tagged &quot;hard&quot;.</p>\n<p>But here comes the question: my solution is also linear at worst case (because add/clear operations are linear time). Why is it <em>that</em> slower? And then I did this:</p>\n<pre><code>Comparator&lt;Interval&gt; comparator = new Comparator&lt;Interval&gt;() {\n    @Override\n    public int compare(Interval i1, Interval i2) {\n        return Integer.compare(i1.start, i2.start);\n    }\n};\nint start = Collections.binarySearch(intervals, newInterval, comparator);\nint skip = start &gt;= 0 ? start : -start - 1;\nint end = Collections.binarySearch(intervals.subList(skip, intervals.size()),\n                                   new Interval(newInterval.end, 0),\n                                   comparator);\n</code></pre>\n<p>From 80 ms down to 4 ms! What's going on here? Unfortunately I have no idea what kind of tests LeetCode runs or under what environment, but still, isn't 20 times too much?</p>\n"},{"comments":[{"comment_id":51020849,"body":"Also you haven&#39;t used <code>setContentView</code> in your <code>onCreate</code>. Not related to the permission error but you need to fix that before it&#39;ll work."},{"comment_id":51020871,"body":"@MatterCat it might be a service or a fragment"},{"comment_id":51020878,"body":"If they&#39;re just starting out, it&#39;s most likely that it&#39;s an Activity. I suppose that&#39;s fair, though."},{"comment_id":51021242,"body":"@MatterCat hmmm yup true, but we should focus on his error, the permission error."},{"comment_id":51667210,"body":"it is indeed a service, i may just started out with java, but i am familiar with service based architecture in software development."}],"answers":[{"comments":[{"comment_id":51021210,"body":"that solved it for me, thanks. the completion of android studio made it fully upper case..."}],"answer_id":31529976,"body":"<p>Use small caps on ANDROID.PERMISSION</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" /&gt;\n&lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\"/&gt;\n</code></pre>\n"}],"last_activity_date":1684725831,"question_id":31529908,"body":"<p>Started learning java and app development. I tried to display a single Picture with a hard-coded path. I got left with an Error telling me, that the necessary permissions are missing:</p>\n<p><em><strong>Unable to decode stream: java.io.FileNotFoundException: /storage/emulated/0/media/logo.jpg: open failed: EACCES (Permission denied)</strong></em></p>\n<p><strong><em>AndroidManifest.xml</em>:</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\npackage=&quot;com.snwflake22.helloworld&quot; &gt;\n    &lt;uses-permission android:name=&quot;ANDROID.PERMISSION.READ_EXTERNAL_STORAGE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;ANDROID.PERMISSION.WRITE_EXTERNAL_STORAGE&quot;/&gt;\n    &lt;application\n    (...)\n    &lt;/application&gt;\n&lt;/manifest&gt;\n</code></pre>\n<p>The function itself looks like this:</p>\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n\n    File image = new File(Environment.getExternalStorageDirectory()+&quot;/media/&quot;, &quot;logo.jpg&quot;);\n    BitmapFactory.Options bmOptions = new BitmapFactory.Options();\n    Bitmap bitmap = BitmapFactory.decodeFile(image.getAbsolutePath(), bmOptions);\n    ImageView imageView = (ImageView) findViewById(R.id.imageView);\n    imageView.setImageBitmap(bitmap);\n}\n</code></pre>\n<p>Are there any other permissions I need to set to access the storage? or the media folder?</p>\n"},{"comments":[{"comment_id":134553700,"body":"I found a few answers, <a href=\"https://stackoverflow.com/questions/6967583/jackson-is-there-a-way-to-serialize-pojos-directly-to-treemodel\">Jackson: is there a way to serialize POJOs directly to treemodel?</a>, and <a href=\"https://stackoverflow.com/questions/11828368/convert-java-object-to-jsonnode-in-jackson\">Convert Java Object to JsonNode in Jackson</a>"}],"last_activity_date":1684725410,"question_id":76301356,"body":"<p>How to convert json to ArrayList&lt;ArrayList&gt; in java.\n<br>Corresponding c# code using NewtonJson is like:</p>\n<pre><code>JsonConvert.DeserializeObject&lt;List&lt;List&lt;Object&gt;&gt;&gt;(jsonstr)\n</code></pre>\n<p>But what would it be in Java? I could not find package for this.<br>If target type were some class then it would be easy using gson. But my problem is target type being double list ArrayList&lt;ArrayList&gt;.</p>\n<p>Regards Orgil.D</p>\n"},{"comments":[{"comment_id":1066532,"body":"What OS are you dealing with?"}],"answers":[{"answer_id":1240400,"body":"<p>You can try unzipping/unjarring rt.jar, which is usually available in <code>$JAVA_HOME/lib/rt.jar</code>.  The jar file should include the classfiles of all the <code>JDK</code>, if that is what you are asking about.</p>\n"},{"answer_id":1240405,"body":"<p>If you want a list of packages in the standard installation, just go to the <a href=\"http://java.sun.com/javase/6/docs/api/index.html\" rel=\"noreferrer\">Javadocs</a> and look in the upper left corner.</p>\n\n<p>If you want to see the .class files, they're in <code>lib\\rt.jar</code> in the JRE directory (<code>.jar</code> is the same as <code>.zip</code>, so you can open it with anything that can open zip files).</p>\n\n<p>If you want to see the source code, look in <code>src.zip</code> in the JDK directory. If it's not there, you probably elected not to install it when you installed the JDK.</p>\n\n<p>Keep in mind that packages are represented as folders on disk, so you might be a little disappointed by what you see.</p>\n"},{"answer_id":1240407,"body":"<p>Assuming you mean the packages that include the class libraries like java.lang.* and java.util.*, these live in the \"lib\" directory under wherever your Java Runtime Environment (JRE) is installed.</p>\n\n<p>On Windows, it would be something like this:</p>\n\n<pre><code>C:\\Program Files\\Java\\j2re1.4.2_12\\lib\n</code></pre>\n\n<p>In there, you should see files like <code>rt.jar</code> which contains the core Java classes and <code>charsets.jar</code> which contains many of the extended encoding support for EBCDIC and the CJK languages.</p>\n\n<p>In a parallel <code>bin</code> directory are the executables for Java and related utilities.</p>\n\n<p>If you've installed the Java Development Kit (JDK), in the directory above where you find the libs you will probably find a <code>src.jar</code> file. This can be unpacked either with the <code>jar.exe</code> utility, or with a standard <em>zip</em>-style tool, and contains the Java sources to the standard class library.</p>\n\n<p>Some of Java, such as the virtual machine itself, is machine-specific, and will be part of some of the DLL's or EXE's present.</p>\n"},{"answer_id":1242097,"body":"<p>My JDK 1.6.0_13 has a src.zip containing all the source code.  Give that a look.</p>\n"},{"answer_id":21542271,"body":"<p><strong>Windows:</strong></p>\n\n<p>For compressed compiled java packages( Java Class Library, JCL): program files/java/jdk/jre/lib/rt.jar</p>\n\n<p>For source of packages: program files/java/jdk/src.zip</p>\n\n<p>we can use any unzipping software to look into them. </p>\n"},{"comments":[{"comment_id":127974290,"body":"How to call this in python? , we have a python script where we used rt.jar, now after upgrading java we are facing errors"}],"answer_id":53897006,"body":"<p>From Java 9 onwards <code>rt.jar</code> was <a href=\"http://openjdk.java.net/jeps/220\" rel=\"noreferrer\">removed</a></p>\n\n<blockquote>\n  <p>The class and resource files previously stored in <code>lib/rt.jar</code>, <code>lib/tools.jar</code>, <code>lib/dt.jar</code>, and various other internal JAR files are now stored in a more efficient format in implementation-specific files in the lib directory. The format of these files is not specified and is subject to change without notice.</p>\n</blockquote>\n\n<p>The System class files can now be accessed as shown below</p>\n\n<pre><code>FileSystem fs = FileSystems.getFileSystem(URI.create(\"jrt:/\"));\nPath objClassFilePath = fs.getPath(\"modules\", \"java.base\", \"java/lang/Object.class\");\n</code></pre>\n"},{"answer_id":57407176,"body":"<p>As answered by @VenkataRaju i would like to put 2 more points that </p>\n\n<ol>\n<li>we have ./bin, ./conf, ./include, ./jmods, ./legal, ./lib</li>\n<li>we can see all the classlist in ./lib/classlist and ./lib/src.jar\nin java 11</li>\n</ol>\n"},{"answer_id":72962376,"body":"<p><code>rt.jar</code> is removed since Java 9. So, to find sources of JCL you should:</p>\n<pre><code>sudo find / -name java.base\n</code></pre>\n"},{"answer_id":76302834,"body":"<p>In a JDK version 18.0.1.1, all packages are present in the jrt-fs.jar file.</p>\n<p>path:- jdk-18.0.1.1\\lib\\jrt-fs.jar.</p>\n<p>inside this jrt-fs.jar file, all pre-defined classes are present in the package path like java\\io for java.io, java\\lang for java.lang, java\\util for java.util, java\\sql for java.sql etc..</p>\n"}],"last_activity_date":1684725225,"question_id":1240387,"body":"<p>I want to see all the java packages. Where are the packages stored in my machine? Can anyone help. I did search in jdk folder and found awt.dll and all. But its only a few. Can i see all of them?</p>\n"},{"comments":[{"comment_id":27815150,"body":"Since this is custom equality, you&#39;ll have to write custom code."},{"comment_id":27815218,"body":"Your stated goal and your code example don&#39;t seem to match. Do you want to compare the objects only on the basis of one field value?"},{"comment_id":27815224,"body":"Override the <code>equals(Object)</code> method of your custom object?"},{"comment_id":27818186,"body":"<code>for(Person p:list) if (p.getName().equals(&quot;John&quot;) return true; return false;</code> You won&#39;t find a more concise way in Java I&#39;m afraid."},{"comment_id":45691150,"body":"@Rajdeep sorry, I don&#39;t understand your question. <code>p.equals(p)</code> <i>should</i> always be true, so I&#39;m confused what you&#39;re trying to achieve. Hopefully if you <a href=\"http://stackoverflow.com/questions/ask\">ask a new question</a> you can get better help."}],"answers":[{"comments":[{"comment_id":27815357,"body":"Unless the setter returns <code>this</code>."},{"comment_id":27815669,"body":"So, if I override the equals method of the custom Objects being added to the list... can I get it to just return true if certain class variables are the same?"},{"comment_id":27815748,"body":"@RudiKershaw Yes that is the idea, you can return true on the basis of one/two/all fields. So if you believe it is logically correct to say that two objects with same name are equal objects then return true by just comapring the names."},{"comment_id":27817636,"body":"It&#39;s really not advisable to override <code>equals</code> for a single use case, unless it makes sense for the class in general. You&#39;d be much better off just writing the loop."},{"comment_id":27818014,"body":"@MikeFHay agreed, thats why i mentioned in the comment &quot;So if you believe it is logically correct to say that two objects with same name are equal objects then return true&quot;"}],"answer_id":18852137,"body":"<p><code>contains</code> method uses <code>equals</code> internally. So you need to override the <code>equals</code> method for your class as per your need.</p>\n\n<p>Btw this does not look syntatically correct: </p>\n\n<pre><code>new Object().setName(\"John\")\n</code></pre>\n"},{"comments":[{"comment_id":27815476,"body":"Alternatively you could use <code>Iterables.any(list, predicate)</code>, which is practically the same, and you may or may not prefer it stylistically."},{"comment_id":27815661,"body":"@EricJablow Yup. :) You could look at my solution."}],"answer_id":18852162,"body":"<h1>Google Guava</h1>\n\n<p>If you're using <a href=\"http://code.google.com/p/guava-libraries/\">Guava</a>, you can take a functional approach and do the following</p>\n\n<pre><code>FluentIterable.from(list).find(new Predicate&lt;MyObject&gt;() {\n   public boolean apply(MyObject input) {\n      return \"John\".equals(input.getName());\n   }\n}).Any();\n</code></pre>\n\n<p>which looks a little verbose. However the predicate is an object and you can provide different variants for different searches. Note how the library itself separates the iteration of the collection and the function you wish to apply. You don't have to override <code>equals()</code> for a particular behaviour.</p>\n\n<p>As noted below, the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html\">java.util.Stream</a> framework built into Java 8 and later provides something similar.</p>\n"},{"comments":[{"comment_id":27815486,"body":"So, if I override the equals method of the custom Objects being added to the list... can I get it to just return true if certain class variables are the same?"},{"comment_id":27815815,"body":"No, the idea behind <code>equals()</code> is very limited. It means to check for &quot;object identity&quot; - whatever that might mean for some class of objects. If you added a flag which fields should be included, that could cause all kinds of trouble. I strongly advise against it."},{"comment_id":63954010,"body":"Love groovy, so the &quot;new&quot; Java 8 Lambda really don&#39;t give us this coolness still?  <code>def result = list.find{ it.name == &#39;John&#39; }</code> Oracle/JCP should be sued for war crimes against programmers."}],"answer_id":18852245,"body":"<p><code>Collection.contains()</code> is implemented by calling <code>equals()</code> on each object until one returns <code>true</code>.</p>\n\n<p>So one way to implement this is to override <code>equals()</code> but of course, you can only have one equals.</p>\n\n<p>Frameworks like <a href=\"https://code.google.com/p/guava-libraries/\" rel=\"noreferrer\">Guava</a> therefore use predicates for this. With <code>Iterables.find(list, predicate)</code>, you can search for arbitrary fields by putting the test into the predicate.</p>\n\n<p>Other languages built on top of the VM have this built in. In <a href=\"http://groovy.codehaus.org/\" rel=\"noreferrer\">Groovy</a>, for example, you simply write:</p>\n\n<pre><code>def result = list.find{ it.name == 'John' }\n</code></pre>\n\n<p>Java 8 made all our lives easier, too:</p>\n\n<pre><code>List&lt;Foo&gt; result = list.stream()\n    .filter(it -&gt; \"John\".equals(it.getName())\n    .collect(Collectors.toList());\n</code></pre>\n\n<p>If you care about things like this, I suggest the book \"Beyond Java\". It contains many examples for the numerous shortcomings of Java and how other languages do better.</p>\n"},{"comments":[{"comment_id":27816174,"body":"Then, the second example should be <code>public boolean</code>. Also, you might want to use <code>Objects.equals()</code> in case <code>o.getName()</code> can be <code>null</code>."},{"comment_id":27816387,"body":"@EricJablow Right, I just copied and pasted after writing the <code>perform</code> method. Also, there&#39;s a fairly large chance that it will never be <code>null</code>. Have you noticed that no other answers perform a <code>null</code> check? Or are you just pointing it out to me?"},{"comment_id":27819788,"body":"I&#39;m just a paranoid programmer.  I&#39;ve dealt with projects where people were fast and loose with nulls, so I tend to be defensive.  Far better to ensure items not be null, ever."},{"comment_id":27829315,"body":"@EricJablow Perhaps you should comment on <b>ALL</b> of the answers that don&#39;t perform <code>null</code> checks, as opposed to just one (mine)."},{"comment_id":61311612,"body":"The first one is more flexible. You can return the found object with the name if you replace <code>isPresent()</code> with <code>.orElse(null)</code>"},{"comment_id":66591395,"body":"Even shorter and easier to understand:  <code>return list.stream().anyMatch(o -&gt; o.getName().equals(name));</code>"},{"comment_id":66705061,"body":"I aggree with @MK10 but i would use <code>java.util.Objects</code> for nullsafe comparison <code>return list.stream().anyMatch(o -&gt; Objects.euqals(o.getName(), name);</code> If you want to check objects in stream for null, you can add a <code>.filter(Objects::nonNull)</code> before anyMatch."},{"comment_id":82314978,"body":"Can you pls explain me what type of magic in that :) ? How can the void method &quot;perfom&quot; return something?"},{"comment_id":92779139,"body":"I can&#39;t believe this answer has so many points. Stream.anyMatch method does the work"},{"comment_id":106611351,"body":"I copied this answer and even my static linter realized I should just replace it with <code>anyMatch</code>. I wonder if the correct answer will ever reach the top, given it has just 20 votes in 2020."},{"comment_id":125771136,"body":"If you wanted to do &quot;contains()&quot; to see if an object is in a list, but wanted to skip checking one particular field (like the date modified of a file), how would you do that?"},{"comment_id":132220259,"body":"@MK10 how check match for 2  conditions for objects stream, im just want to validate if stream contains 2 object tha each fill one of the 2 confitions, actually Im doing 2 stream validation, but its posible to do in just 1"}],"answer_id":18852327,"body":"<h1>Streams</h1>\n<p>If you are using Java 8, perhaps you could try something like this:</p>\n<pre><code>public boolean containsName(final List&lt;MyObject&gt; list, final String name){\n    return list.stream().filter(o -&gt; o.getName().equals(name)).findFirst().isPresent();\n}\n</code></pre>\n<p>Or alternatively, you could try something like this:</p>\n<pre><code>public boolean containsName(final List&lt;MyObject&gt; list, final String name){\n    return list.stream().map(MyObject::getName).filter(name::equals).findFirst().isPresent();\n}\n</code></pre>\n<p>This method will return <code>true</code> if the <code>List&lt;MyObject&gt;</code> contains a <code>MyObject</code> with the name <code>name</code>. If you want to perform an operation on each of the <code>MyObject</code>s that <code>getName().equals(name)</code>, then you could try something like this:</p>\n<pre><code>public void perform(final List&lt;MyObject&gt; list, final String name){\n    list.stream().filter(o -&gt; o.getName().equals(name)).forEach(\n            o -&gt; {\n                //...\n            }\n    );\n}\n</code></pre>\n<p>Where <code>o</code> represents a <code>MyObject</code> instance.</p>\n<p>Alternatively, as the comments suggest (Thanks MK10), you could use the <code>Stream#anyMatch</code> method:</p>\n<pre><code>public boolean containsName(final List&lt;MyObject&gt; list, final String name){\n    return list.stream().anyMatch(o -&gt; name.equals(o.getName()));\n}\n</code></pre>\n"},{"comments":[{"comment_id":40112205,"body":"This is a great solution for small projects that don&#39;t want to use guava. One question though, the docs on binarySearch state that: &quot;The list must be sorted into ascending order according to the specified comparator, prior to making this call. If it is not sorted, the results are undefined&quot;. But in seems in some cases, depending on what&#39;s being compared, this might not be the case?"},{"comment_id":68543562,"body":"and the negative number represents where the object will be inserted if you add it and re-sort."}],"answer_id":18852332,"body":"<h1>Binary Search</h1>\n\n<p>You can use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#binarySearch(java.util.List,%20T,%20java.util.Comparator)\" rel=\"noreferrer\">Collections.binarySearch</a> to search an element in your list (assuming the list is sorted):</p>\n\n<pre><code>Collections.binarySearch(list, new YourObject(\"a1\", \"b\",\n                \"c\"), new Comparator&lt;YourObject&gt;() {\n\n            @Override\n            public int compare(YourObject o1, YourObject o2) {\n                return o1.getName().compareTo(o2.getName());\n            }\n        });\n</code></pre>\n\n<p>which will return a negative number if the object is not present in the collection or else it will return the <code>index</code> of the object. With this you can search for objects with different searching strategies.</p>\n"},{"comments":[{"comment_id":106287331,"body":"I think you forgot brackets for getter in  if(o != null &amp;&amp; o.getLocation.equals(location))"}],"answer_id":18852968,"body":"<p><b>You have two choices.</b></p>\n\n<p>1.  The first choice, which is preferable, is to override the `equals()` method in your Object class.</p>\n\n<p>Let's say, for example, you have this Object class:</p>\n\n<pre><code>public class MyObject {\n    private String name;\n    private String location;\n    //getters and setters\n}\n</code></pre>\n\n<p>Now let's say you only care about the MyObject's name, that it should be unique so if two `MyObject`s have the same name they should be considered equal.  In that case, you would want to override the `equals()` method (and also the `hashcode()` method) so that it compares the names to determine equality.</p>\n\n<p>Once you've done this, you can check to see if a Collection contains a MyObject with the name \"foo\" by like so:</p>\n\n<pre><code>MyObject object = new MyObject();\nobject.setName(\"foo\");\ncollection.contains(object);\n</code></pre>\n\n<p>However, this might not be an option for you if:</p>\n\n<ul>\n<li>You are using both the name and location to check for equality, but you only want to check if a Collection has any `MyObject`s with a certain location.  In this case, you've already overridden `equals()`.</li>\n<li>`MyObject` is part of an API that you don't have liberty to change.</li>\n</ul>\n\n<p><i>If either of these are the case, you'll want option 2:</i></p>\n\n<p>2.  Write your own utility method:</p>\n\n<pre><code>public static boolean containsLocation(Collection&lt;MyObject&gt; c, String location) {\n    for(MyObject o : c) {\n        if(o != null &amp;&amp; o.getLocation.equals(location)) {\n            return true;\n        }\n    }\n    return false;\n}\n</code></pre>\n\n<p>Alternatively, you could extend ArrayList (or some other collection) and then add your own method to it:</p>\n\n<pre><code>public boolean containsLocation(String location) {\n    for(MyObject o : this) {\n        if(o != null &amp;&amp; o.getLocation.equals(location)) {\n                return true;\n            }\n        }\n        return false;\n    }\n</code></pre>\n\n<p>Unfortunately there's not a better way around it.</p>\n"},{"answer_id":18857682,"body":"<h1>Eclipse Collections</h1>\n\n<p>If you're using <a href=\"https://github.com/eclipse/eclipse-collections\" rel=\"nofollow\">Eclipse Collections</a>, you can use the <code>anySatisfy()</code> method. Either adapt your <code>List</code> in a <code>ListAdapter</code> or change your <code>List</code> into a <code>ListIterable</code> if possible.</p>\n\n<pre><code>ListIterable&lt;MyObject&gt; list = ...;\n\nboolean result =\n    list.anySatisfy(myObject -&gt; myObject.getName().equals(\"John\"));\n</code></pre>\n\n<p>If you'll do operations like this frequently, it's better to extract a method which answers whether the type has the attribute.</p>\n\n<pre><code>public class MyObject\n{\n    private final String name;\n\n    public MyObject(String name)\n    {\n        this.name = name;\n    }\n\n    public boolean named(String name)\n    {\n        return Objects.equals(this.name, name);\n    }\n}\n</code></pre>\n\n<p>You can use the alternate form <code>anySatisfyWith()</code> together with a method reference.</p>\n\n<pre><code>boolean result = list.anySatisfyWith(MyObject::named, \"John\");\n</code></pre>\n\n<p>If you cannot change your <code>List</code> into a <code>ListIterable</code>, here's how you'd use <code>ListAdapter</code>.</p>\n\n<pre><code>boolean result = \n    ListAdapter.adapt(list).anySatisfyWith(MyObject::named, \"John\");\n</code></pre>\n\n<p>Note: I am a committer for Eclipse ollections.</p>\n"},{"answer_id":32608149,"body":"<p>If you need to perform this <code>List.contains(Object with field value equal to x)</code> repeatedly, a simple and efficient workaround would be:</p>\n\n<pre><code>List&lt;field obj type&gt; fieldOfInterestValues = new ArrayList&lt;field obj type&gt;;\nfor(Object obj : List) {\n    fieldOfInterestValues.add(obj.getFieldOfInterest());\n}\n</code></pre>\n\n<p>Then the <code>List.contains(Object with field value equal to x)</code> would be have the same result as <code>fieldOfInterestValues.contains(x);</code></p>\n"},{"answer_id":32608461,"body":"<h1><code>Predicate</code></h1>\n\n<p>If you dont use Java 8, or library which gives you more functionality for dealing with collections, you could implement something which can be more reusable than your solution.</p>\n\n<pre><code>interface Predicate&lt;T&gt;{\n        boolean contains(T item);\n    }\n\n    static class CollectionUtil{\n\n        public static &lt;T&gt; T find(final Collection&lt;T&gt; collection,final  Predicate&lt;T&gt; predicate){\n            for (T item : collection){\n                if (predicate.contains(item)){\n                    return item;\n                }\n            }\n            return null;\n        }\n    // and many more methods to deal with collection    \n    }\n</code></pre>\n\n<p>i'm using something like that, i have predicate interface, and i'm passing it implementation to my util class.</p>\n\n<p>What is advantage of doing this in my way? you have one method which deals with searching in any type collection. and you dont have to create separate methods if you want to search by different field. alll what you need to do is provide different predicate which can be destroyed as soon as it no longer usefull/</p>\n\n<p>if you want to use it, all what you need to do is call method and define tyour predicate</p>\n\n<pre><code>CollectionUtil.find(list, new Predicate&lt;MyObject&gt;{\n    public boolean contains(T item){\n        return \"John\".equals(item.getName());\n     }\n});\n</code></pre>\n"},{"comments":[{"comment_id":71485711,"body":"+1 Although it means a little overhead in putting the details into the map in the first place you then get constant time lookup. I&#39;m surprised no one has suggested this until now."}],"answer_id":42158130,"body":"<h1>Map</h1>\n\n<p>You could create a <code>Hashmap&lt;String, Object&gt;</code> using one of the values as a key, and then seeing if <code>yourHashMap.keySet().contains(yourValue)</code> returns true.</p>\n"},{"answer_id":45809583,"body":"<p>Despite JAVA 8 SDK there is a lot of collection tools libraries can help you to work with, for instance:\n <a href=\"http://commons.apache.org/proper/commons-collections/\" rel=\"nofollow noreferrer\">http://commons.apache.org/proper/commons-collections/</a></p>\n\n<pre><code>Predicate condition = new Predicate() {\n   boolean evaluate(Object obj) {\n        return ((Sample)obj).myField.equals(\"myVal\");\n   }\n};\nList result = CollectionUtils.select( list, condition );\n</code></pre>\n"},{"answer_id":47404446,"body":"<p>Here is a solution using <a href=\"https://github.com/google/guava\" rel=\"nofollow noreferrer\">Guava</a></p>\n\n<pre><code>private boolean checkUserListContainName(List&lt;User&gt; userList, final String targetName){\n\n    return FluentIterable.from(userList).anyMatch(new Predicate&lt;User&gt;() {\n        @Override\n        public boolean apply(@Nullable User input) {\n            return input.getName().equals(targetName);\n        }\n    });\n}\n</code></pre>\n"},{"comments":[{"comment_id":112847489,"body":"Tried the filter based answer by Josh above, but Intellij also suggested your anyMatch answer. Great!"},{"comment_id":123933609,"body":"Please flip the string equality check to avoid a potential null pointer exception  <code>&quot;John&quot;.equals(o.getName())</code>"}],"answer_id":52934936,"body":"<p>This is how to do it using Java 8+ :</p>\n<pre><code>boolean isJohnAlive = list.stream().anyMatch(o -&gt; &quot;John&quot;.equals(o.getName());\n</code></pre>\n"},{"answer_id":76297558,"body":"<p>Try this:</p>\n<pre><code>list.stream().filter(req -&gt; \nreq.getName().equals(&quot;John&quot;)).findFirst().isPresent()\n</code></pre>\n"}],"last_activity_date":1684724955,"question_id":18852059,"body":"<p>I want to check whether a <code>List</code> contains an object that has a field with a certain value. Now, I could use a loop to go through and check, but I was curious if there was anything more code efficient. </p>\n\n<p>Something like;</p>\n\n<pre><code>if(list.contains(new Object().setName(\"John\"))){\n    //Do some stuff\n}\n</code></pre>\n\n<p>I know the above code doesn't do anything, it's just to demonstrate roughly what I am trying to achieve.</p>\n\n<p>Also, just to clarify, the reason I don't want to use a simple loop is because this code will currently go inside a loop that is inside a loop which is inside a loop. For readability I don't want to keep adding loops to these loops. So I wondered if there were any simple(ish) alternatives.</p>\n"},{"answers":[{"answer_id":76302809,"body":"<p>In my case, I didn't have Managed Identity turned on for the Api Function (and App Service which will inherit Api Function's Managed Identity)</p>\n<ol>\n<li><p>To turn this on you need to navigate through the sidebar to Identity</p>\n<img src=\"https://i.stack.imgur.com/YUfAo.png\" height=\"400\" />\n</li>\n<li><p>Then you need to turn System Assigned status On\n<img src=\"https://i.stack.imgur.com/6bDRX.png\" height=\"300\" /></p>\n</li>\n<li><p>Then you need to assign the required role which was &quot;Storage Blob Data Contributor&quot;\n<img src=\"https://i.stack.imgur.com/5G3qy.png\" height=\"300\" /></p>\n</li>\n</ol>\n<p>Caution: I added &quot;Contributor&quot; role instead of &quot;Storage Blob Data Contributor&quot; which didn't worked and gave me 403. My thinking here was it will be more superior role but didn't work that way.\n<a href=\"https://i.stack.imgur.com/9HwVb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9HwVb.png\" alt=\"enter image description here\" /></a></p>\n"}],"last_activity_date":1684724506,"question_id":76301186,"body":"<p>I am new to Azure. What I am <strong>trying to do is upload a file to Azure Storage Account</strong> from  a <strong>spring boot</strong> application running inside a <strong>Azure App Function</strong> (using <strong>Azure App Service</strong>)?</p>\n<p>The <strong>code</strong> I am using <strong>to get the Azure Credentials</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>DefaultAzureCredential defaultCredential = new DefaultAzureCredentialBuilder().build();\n</code></pre>\n<p>but this code throws <strong>exception</strong>:</p>\n<pre><code>Result: Failure Exception: CredentialUnavailableException: EnvironmentCredential authentication unavailable. \nEnvironment variables are not fully configured.To mitigate this issue, please refer to the troubleshooting \nguidelines here at https://aka.ms/azsdk/java/identity/environmentcredential/troubleshoot Managed Identity \nauthentication is not available. SharedTokenCacheCredential authentication unavailable. No accounts were \nfound in the cache. IntelliJ Authentication not available. Please log in with Azure Tools for IntelliJ plugin \nin the IDE. AzureCliCredential authentication unavailable. Azure CLI not installed.To mitigate this issue, \nplease refer to the troubleshooting guidelines here at https://aka.ms/azsdk/java/identity/azclicredential/troubleshoot \nAzure PowerShell authentication failed using defaultpowershell(pwsh) with following error: Unable to execute \nPowerShell. Please make sure that it is installed in your system. Azure PowerShell authentication failed using powershell-core(powershell) with following error: Encountered error when deserializing response from Azure Power Shell.To mitigate this issue, please refer to the troubleshooting guidelines here at https://aka.ms/azure-identity-java-default-azure-credential-troubleshoot Stack: java.lang.reflect.InvocationTargetException at\n</code></pre>\n<p>If I try to run this <strong>locally then there is no problem</strong>, but <strong>in the Azure App Service it throws this error</strong>.</p>\n<p>Can anybody help me regarding adding the right code to get the credentials?</p>\n"},{"comments":[{"comment_id":134467288,"body":"What would that string look like? In other words, what is the result you want to obtain for this specific case?"},{"comment_id":134468338,"body":"As you can see in the picture above, the &quot;shadow$_klass_&quot; object has various values such as &quot;classFlags&quot; and &quot;accessFlags&quot;.  I am currently studying Android objects.  By collecting these various values, we try to identify common characteristics of Java classes.  Of course, you can do this manually.  However, I would like to pull that data from a vast amount of wild apps."},{"comment_id":134556303,"body":"I was able to extract the desired value by writing code like this:  This code is written in Kotlin. {\\n val tmp_class = Tmp_class()\\n val vo = tmp_class.javaClass.declaredFields.get(3) // In the result value (list) of declaredFields, ClassSize had the 3rd index value.\\n  vo.setAccessible(true)\\n val name = vo.name // &quot;classSize&quot;\\n val value = vo.get(tmp_class) // &quot;272&quot;\\n }"}],"last_activity_date":1684724186,"question_id":76252057,"body":"<p>I want to output the value of &quot;shadow$<em>klass</em>&quot; as &quot;String type&quot;.</p>\n<p>I tried all methods available in &quot;java.lang.class&quot;, but failed to extract the desired value.</p>\n<p>How to print the value of &quot;shadow$<em>klass</em>&quot;?</p>\n<p>The image is the value of the &quot;shadow$<em>klass</em>&quot; object that can be checked in android studio debug.</p>\n<p><a href=\"https://i.stack.imgur.com/R5ee5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/R5ee5.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried running all methods available in &quot;java.lang.class&quot;.</p>\n<p>As a result, I thought that the values of the &quot;shadow$c_klass_&quot; object could be output as &quot;String type&quot;.</p>\n<p>However, I could only get other object values or the package name of the parent class.</p>\n<p>-add contents-</p>\n<p>I want to get the &quot;classSize&quot; value of &quot;java.lang.class&quot;.</p>\n<p>However, &quot;classSize&quot; is declared private.</p>\n<p><a href=\"https://i.stack.imgur.com/ae3QI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ae3QI.png\" alt=\"enter image description here\" /></a></p>\n<p>What method can I use to get that value?</p>\n<p>-Methods (get...) for obtaining values ​​were not implemented in the class.</p>\n"},{"comments":[{"comment_id":134554496,"body":"we don&#39;t support old versions of karate so please upgrade. the linked Q&amp;A shows someone successfully running karate on maven + eclipse"}],"last_activity_date":1684723239,"question_id":76302750,"body":"<p>Am unable to execute Karate Feature file. What am missing?\nAm using Eclipse IDE and trying to execute the feature file as &quot;Run As&quot; &gt;&gt; &quot;Cucumber Feature&quot;</p>\n<p>I have followed below methods but nothing is able to resolve the below error:</p>\n<p><strong>Method 1:</strong>\nGo to Project Properties &gt;&gt; Java compiler &gt;&gt; Compiler &gt;&gt; JDK compliance level and modify to Java SE - 1.8\nModify to 1.7, 1.8, 14, 15 and checked</p>\n<p><strong>Method 2:</strong>\nGo to Preferences &gt;&gt; Java &gt;&gt; Installed JREs and Preferences &gt;&gt; Java &gt;&gt; Installed JREs &gt;&gt; Execution Environments\nModify to JAVASE-1.7, JAVASE-1.8, JAVASE-14, JAVASE-15</p>\n<p><strong>Method 3:</strong>\nGo to Run Configurations &gt;&gt; Runtime JRE &gt;&gt; Execution environment &gt;&gt; JAVASE-1.7, JAVASE-1.8, JAVASE-14, JAVASE-15.</p>\n<p>I have tried above 3 methods but still am receiving error as &quot;main&quot; java.lang.NoClassDefFoundError: jdk/nashorn/api/scripting/ScriptObjectMirror</p>\n<p><strong>pom.xml:</strong></p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n \n    &lt;groupId&gt;org.sam.kdsl.pract&lt;/groupId&gt;\n    &lt;artifactId&gt;myproject&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n \n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;maven.compiler.version&gt;3.8.1&lt;/maven.compiler.version&gt;\n        &lt;!--&lt;maven.surefire.version&gt;2.22.2&lt;/maven.surefire.version&gt;--&gt;\n        &lt;maven.surefire.version&gt;3.0.0-M1&lt;/maven.surefire.version&gt;      \n        &lt;karate.version&gt;0.9.5&lt;/karate.version&gt;\n    &lt;/properties&gt;    \n\n    &lt;dependencies&gt;         \n        &lt;dependency&gt;\n            &lt;groupId&gt;com.intuit.karate&lt;/groupId&gt;\n            &lt;artifactId&gt;karate-junit5&lt;/artifactId&gt;\n            &lt;version&gt;${karate.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        \n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.intuit.karate&lt;/groupId&gt;\n        &lt;artifactId&gt;karate-apache&lt;/artifactId&gt;\n        &lt;version&gt;${karate.version}&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n   &lt;dependency&gt;\n    &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n    &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\n    &lt;version&gt;7.12.0&lt;/version&gt;\n  &lt;/dependency&gt;             \n                \n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;testResources&gt;\n            &lt;testResource&gt;\n                &lt;directory&gt;src/test/java&lt;/directory&gt;\n                &lt;excludes&gt;\n                    &lt;exclude&gt;**/*.java&lt;/exclude&gt;\n                &lt;/excludes&gt;\n            &lt;/testResource&gt;\n        &lt;/testResources&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven.compiler.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n                    &lt;source&gt;${java.version}&lt;/source&gt;\n                    &lt;target&gt;${java.version}&lt;/target&gt;\n                    &lt;compilerArgument&gt;-Werror&lt;/compilerArgument&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven.surefire.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;argLine&gt;-Dfile.encoding=UTF-8&lt;/argLine&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;          \n        &lt;/plugins&gt;        \n    &lt;/build&gt;       \n    \n&lt;/project&gt;\n</code></pre>\n<p><strong>Java version</strong></p>\n<pre><code>J:\\My Drive\\API\\Karate-DSL\\karate-dsl1&gt;echo %JAVA_HOME%\nC:\\Program Files\\Java\\jdk1.8.0_261\nJ:\\My Drive\\API\\Karate-DSL\\karate-dsl1&gt;\n</code></pre>\n<p><strong>Maven version</strong></p>\n<pre><code>J:\\My Drive\\API\\Karate-DSL\\karate-dsl1&gt;mvn --version\nApache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)\nMaven home: C:\\maven\\apache-maven-3.6.3\\bin\\..\nJava version: 1.8.0_261, vendor: Oracle Corporation, runtime: C:\\Program Files\\Java\\jdk1.8.0_261\\jre\nDefault locale: en_US, platform encoding: Cp1252\nOS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;\n\nJ:\\My Drive\\API\\Karate-DSL\\karate-dsl1&gt;\n</code></pre>\n<p><strong>Error captured from Eclipse IDE Console</strong></p>\n<pre><code>\ncommand: J:/My Drive/API/Karate-DSL/kdsl/myproject/src/test/java/examples/users/users.feature --glue classpath: --plugin pretty --monochrome\n21:01:45.065 [main] INFO  com.intuit.karate.Runner - waiting for parallel features to complete ...\nKarate version: 0.9.5\n======================================================\nelapsed:   0.03 | threads:    1 | thread time: 0.00 \nfeatures:     0 | ignored:    0 | efficiency: 0.00\nscenarios:    0 | passed:     0 | failed: 0\n======================================================\n\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: jdk/nashorn/api/scripting/ScriptObjectMirror\n    at com.intuit.karate.JsonUtils.&lt;clinit&gt;(JsonUtils.java:108)\n    at com.intuit.karate.core.Engine.saveStatsJson(Engine.java:439)\n    at com.intuit.karate.Runner.parallel(Runner.java:356)\n    at com.intuit.karate.Runner$Builder.parallel(Runner.java:181)\n    at com.intuit.karate.cli.Main.main(Main.java:66)\n    at cucumber.api.cli.Main.main(Main.java:34)\nCaused by: java.lang.ClassNotFoundException: jdk.nashorn.api.scripting.ScriptObjectMirror\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n    ... 6 more\n</code></pre>\n<p><strong>Feature file</strong></p>\n<pre><code>Feature: sample karate test script\n  for help, see: https://github.com/karatelabs/karate/wiki/IDE-Support\n\n  Background:\n    * url 'https://jsonplaceholder.typicode.com'\n\n  Scenario: get all users and then get the first user by id\n    Given path 'users'\n    When method get\n    Then status 200\n\n    * def first = response[0]\n\n    Given path 'users', first.id\n    When method get\n    Then status 200\n\n  Scenario: create a user and then get it by id\n    * def user =\n      &quot;&quot;&quot;\n      {\n        &quot;name&quot;: &quot;Test User&quot;,\n        &quot;username&quot;: &quot;testuser&quot;,\n        &quot;email&quot;: &quot;test@user.com&quot;,\n        &quot;address&quot;: {\n          &quot;street&quot;: &quot;Has No Name&quot;,\n          &quot;suite&quot;: &quot;Apt. 123&quot;,\n          &quot;city&quot;: &quot;Electri&quot;,\n          &quot;zipcode&quot;: &quot;54321-6789&quot;\n        }\n      }\n      &quot;&quot;&quot;\n\n    Given url 'https://jsonplaceholder.typicode.com/users'\n    And request user\n    When method post\n    Then status 201\n\n    * def id = response.id\n    * print 'created id is: ', id\n\n    Given path id\n    # When method get\n    # Then status 200\n    # And match response contains user\n  \n</code></pre>\n"},{"comments":[{"comment_id":73427294,"body":"Can you please explain why won&#39;t use your driver as static?"}],"answers":[{"comments":[{"comment_id":73419024,"body":"I need to initialize it without declaring it as <b>Static</b> . Thanks"},{"comment_id":73424922,"body":"Updated my answer by removing static keyword of driver object, please verify and let me know if you have any queries"},{"comment_id":73456185,"body":"-Thanks.It work in this way but is it good practice to write the whole logic for initializing the webdriver instance inside constructor of Base class . How can i use annotation or if i need to perform some more action after initializing the driver."}],"answer_id":43172323,"body":"<p>Initialize web driver in base class constructor and extend Base class in Test class then assign driver to Base.driver.</p>\n\n<p>Try below code</p>\n\n<p><strong>Base Class:</strong></p>\n\n<pre><code>import org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.chrome.ChromeDriver;\n\npublic class Base \n{\npublic WebDriver driver;\n\npublic Base(){\n    driver = new ChromeDriver();\n}\n}\n</code></pre>\n\n<p><strong>UseFunction class:</strong></p>\n\n<pre><code>import org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\n\npublic class useFunction\n {\n     WebDriver driver;\n\n  public useFunction(WebDriver driver)\n  {\n    this.driver = driver;\n  }\n\n  public void func1()\n  {\n    driver.findElement(By.id(\"id of the element\")).click(); \n  }\n  }\n</code></pre>\n\n<p><strong>Test1 class:</strong></p>\n\n<pre><code>import org.testng.annotations.Test;\n\npublic class Test1{\n\n@Test\npublic void testMethod1()\n{\n    Base base = new Base();\n    useFunction funObj = new useFunction(base.driver);\n    funObj.func1(); \n\n}\n}\n</code></pre>\n\n<p>Try it and let me know if it works for you</p>\n"},{"answer_id":76284009,"body":"<pre><code>public WebDriver Base() {\n\n  WebDriverManager.edgedriver().setup(); //Change for Chrome.\n\n    EdgeOptions options = new EdgeOptions();\n    options.addArguments(&quot;--remote-allow-origins=*&quot;);\n\n    WebDriver ed = new EdgeDriver(options);\n    ed.manage().window().maximize();\n    ed.manage().timeouts().implicitlyWait(Duration.ofSeconds(30));\n\n    return ed;\n}\n</code></pre>\n<p>Test1:</p>\n<pre><code>public class Test1 extends Base {\n\n    public void Test1_TestNG() throws InterruptedException {\n\n        WebDriver ed = Base();\n        ed.manage().timeouts().implicitlyWait(Duration.ofSeconds(30));\n    }   \n}\n</code></pre>\n<p>Now you can use &quot;ed&quot; WebDriver for any methods (OR) further Web Based automation, by simply calling &quot;ed&quot; WebDriver.</p>\n"}],"last_activity_date":1684720973,"question_id":43171988,"body":"<pre><code>public class Base \n{\n    public WebDriver driver;\n\n    @BeforeMethod \n    public void setUp()\n    {\n        driver = new FirefoxDriver();\n    }\n\n}\n\npublic class useFunction extends Base\n{\n\n    public useFunction(WebDriver driver)\n    {\n        this.driver = driver;\n    }\n\n    public void func1()\n    {\n        driver.findElement().click();  //driver is null\n        --------\n        ---------\n    }\n}\n\nPublic class Test extends Base\n{\n    useFunction funObj = new useFunction(driver);\n    @Test\n    public void testMethod1()\n   {\n       funObj.func1();\n       ----\n       ------ \n\n  }\n}\n</code></pre>\n\n<p><strong>How can i use the initialized value of WebDriver instance in <code>UseFunction class</code> without declaring the Webdriver instance as static.</strong> When i pass the driver in constructor of <code>UseFunction class</code> while creating its object inside <code>Test class</code>, getting Null Pointer Exception</p>\n"},{"comments":[{"comment_id":134555276,"body":"server side rendering only applies to the HTML not the images. Those are still downloaded by the browser after is receives the HTML. But I would suggest to reconsider rendering a page with all your projects, instead use pages and render say 50 and include a search box to limit the ones you want to view."}],"last_activity_date":1684720541,"question_id":76302636,"body":"<p><strong>TLDR: I store <em>images</em> on a server with their <em>location</em> as a string on the <em>DB</em>. How can I <em>lazy</em> load these images in a <em>Thymeleaf</em> HTML page if I have a lot of images? How I access my images: <code>&lt;img th:src=&quot;@{${project.imagePath}}&quot;&gt;</code></strong></p>\n<p>I understand lazy loading when it comes to something like: <code>@OneToMany(fetch = FetchType.LAZY, mappedBy=&quot;...&quot;, cascade=...)</code>. If you have a Restaurant then you may want to lazy load Reviews. My question is a bit different.</p>\n<p>I have a model <code>Project(id, name, description, imagePath, ...)</code> with a MySQL table associated with it. Images are stored in the local directory/server directory and the location of the image is stored on the Project table as a string. I then use <code>&lt;img th:src=&quot;@{${project.imagePath}}&quot;&gt;</code> in Thymeleaf to display the image in the browser.</p>\n<p>These Projects are added as a <code>List&lt;Project&gt;</code> to the Model. <code>model.addAttribute(&quot;projects&quot;, projectRepository.findAll());</code> Then in Thymeleaf I loop over the <code>projects</code> object and display each <code>project</code>.</p>\n<p>Basic HTML/Thymeleaf:</p>\n<pre><code>    &lt;div th:each=&quot;project : ${projects}&quot; class=&quot;col&quot;&gt;\n        &lt;img th:src=&quot;@{${project.imagePath}}&quot;&gt;  \n        &lt;h1 th:text=&quot;${project.name}&quot;&gt;&lt;/h1&gt;\n        &lt;p class=&quot;project-description-text&quot; th:text=&quot;${project.description}&quot;&gt;&lt;/p&gt;                   \n    &lt;/div&gt; \n</code></pre>\n<p>If I have 500+ <strong>projects</strong> with their own corresponding <strong>images</strong> that will take a lot of time to load the page and the user won't see the first images on their screen let alone the ones they have to scroll for without waiting too long. I know separate the projects by pages, but is there a way to just load the images as the user scrolls down.</p>\n<p>I've read about <a href=\"https://developer.mozilla.org/en-US/docs/Web/Performance/Lazy_loading\" rel=\"nofollow noreferrer\">loading=&quot;lazy&quot;</a>. I could understand that may work if my  tag src was a link tag to another page, <strong>but will <em>loading=&quot;lazy&quot;</em> work with <em>server-side rendering</em> as the one Thymeleaf does and <em>the way I store my images</em>?</strong> What could be a possible solution for my case?</p>\n<p>Thank you! &lt;3</p>\n"},{"last_activity_date":1684720111,"question_id":76302621,"body":"<p>I have Address and Employee models.\nEach Address has the cityId. The addresses with the same cityId can be assigned to the same employee and must be sorted.</p>\n<p>Employee</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\n@PlanningEntity\npublic class Employee {\n\n  @PlanningId\n  private Long id;\n\n  @InverseRelationShadowVariable(sourceVariableName = &quot;employee&quot;)\n  private List&lt;Address&gt; addresses = new ArrayList&lt;&gt;();\n\n}\n</code></pre>\n<p>Address</p>\n<pre><code>\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\n@PlanningEntity\npublic class Address {\n\n    @PlanningId\n    private Long id;\n\n    private Long cityId;\n\n    @PlanningVariable(valueRangeProviderRefs = &quot;employeeRange&quot;)\n    private Employee employee;\n}\n</code></pre>\n<p>Constraint # 1</p>\n<pre><code>public static Constraint cityConflict(ConstraintFactory constraintFactory) {\n  return constraintFactory.forEach(Address.class)\n          .groupBy(Address::getEmployee)\n          .filter(employee -&gt; employee.getAddresses().stream()\n                  .anyMatch(address -&gt;\n                          !Objects.equals(address.getCityId(), address.getAddresses().get(0).getCityId())\n                  )\n          ).penalize(CITY_CONFLICT, HardMediumSoftLongScore.ONE_MEDIUM);\n}\n</code></pre>\n<p>Other constraints which I have tried:</p>\n<pre><code>public static Constraint addressesInSameCity(ConstraintFactory constraintFactory) {\n    return constraintFactory.forEach(Address.class)\n            .groupBy(Address::getEmployee, Address::getCityId)\n            .filter(((employee, cityId) -&gt; {\n                Long previousCityId = Long.MIN_VALUE;\n                for (Address address : inspector.getAddresses()) {\n                    Long currentVillageId = address.getCityId();\n                    if (currentCityId &lt; previousCityId) {\n                        return true; \n                    }\n                    previousCityId = currentCityId;\n                }\n                return false; \n            }))\n            .penalize(CITY_CONFLICT, HardMediumSoftLongScore.ONE_MEDIUM);\n}\n</code></pre>\n<p>Expected result -\nAddresses with the same id must be assigned to the employee and follow each other one.\nSomething like:</p>\n<pre><code>\n\n+----------------------+-----------------------+\n|      Employee 1      |      Employee 2       |\n+----------------------+-----------------------+\n| Address 1 (cityId 4) | Address 4 (cityId 1)  |\n| Address 2 (cityId 4) | Address 5 (cityId 1)  |\n| Address 3 (cityId 4) | Address 6 (cityId 2)  |\n| Address 7 (cityId 5) | Address 8 (cityId 2)  |\n| Address 9 (cityId 5) | Address 10 (cityId 2) |\n+----------------------+-----------------------+\n\n</code></pre>\n<p>How I can to achieve this with OptaPlanner constraints?\nThanks in advance for the help</p>\n"},{"answers":[{"comments":[{"comment_id":126954981,"body":"Thank&#39;s. spring.cloud.contract.verifier.assert.size works for check size but we have a problem with &quot;cross values&quot; when ckeck an arrays. The test in my example will pass also for {id:1, name:User2} and {id:2, name:User1}"},{"comment_id":126972843,"body":"That&#39;s an experimental feature so if you have any feedback about things not working you can file an issue"}],"answer_id":71830022,"body":"<p>You can turn on the array size check. Check the docs <a href=\"https://docs.spring.io/spring-cloud-contract/docs/current/reference/html/project-features.html#contract-limitations\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-cloud-contract/docs/current/reference/html/project-features.html#contract-limitations</a> . For your convenience I'm copying the part of the docs</p>\n<blockquote>\n<p>The support for verifying the size of JSON arrays is experimental. If you want to turn it on, set the value of the following system property to true: spring.cloud.contract.verifier.assert.size. By default, this feature is set to false. You can also set the assertJsonSize property in the plugin configuration.</p>\n</blockquote>\n"}],"last_activity_date":1684719716,"question_id":71754132,"body":"<p>I try to implement simple contract for <code>get users</code> REST Endpoit. I expect that Spring Cloud Contract generates test whitch checks json response more strongly. Can anyone know how to configure test generator?<br />\nMy contract <code>yaml</code> file here:</p>\n<pre><code>  Get Users contract\nrequest:\n  method: GET\n  url: /users\n  headers:\n    Content-Type: application/json\nresponse:\n  status: 200\n  bodyFromFile: get_users_response.json\n  headers:\n    Content-Type: application/json\n</code></pre>\n<p>and <code>get_users_response.json</code>:</p>\n<pre><code>[\n  {\n    &quot;id&quot;: 1,\n    &quot;name&quot;: &quot;User1&quot;\n  },\n  {\n    &quot;id&quot;: 2,\n    &quot;name&quot;: &quot;User2&quot;\n  }\n]\n</code></pre>\n<p>Spring Cloud Contract generates:</p>\n<pre><code>...\nassertThatJson(parsedJson).array().contains(&quot;['id']&quot;).isEqualTo(1);\nassertThatJson(parsedJson).array().contains(&quot;['name']&quot;).isEqualTo(&quot;User1&quot;);\nassertThatJson(parsedJson).array().contains(&quot;['id']&quot;).isEqualTo(2);\nassertThatJson(parsedJson).array().contains(&quot;['name']&quot;).isEqualTo(&quot;User2&quot;);\n...\n</code></pre>\n<p>But I assumed something like this:</p>\n<pre><code>//check the correspondent element\nassertThatJson(parsedJson).elementWithIndex(0).field(&quot;['id']&quot;).isEqualTo(1);\nassertThatJson(parsedJson).elementWithIndex(0).field(&quot;['name']&quot;).isEqualTo(&quot;&quot;);\nassertThatJson(parsedJson).elementWithIndex(1).field(&quot;['id']&quot;).isEqualTo(2);\nassertThatJson(parsedJson).elementWithIndex(1).field(&quot;[name']&quot;).isEqualTo(1);\n//and check array size\nassertThatJson(parsedJson).array().hasSize(2);\n</code></pre>\n"},{"comments":[{"comment_id":134551243,"body":"note: null layout (along with hard-coding sizes/locationsl is <b>wrong</b>"},{"comment_id":134551928,"body":"Why?  So many questions.  How do you intend to display the selected item to the user?  I&#39;d consider starting with just a button and working up a custom solution from there"},{"comment_id":134552020,"body":"@MadProgrammer The selected item will be displayed to the user somewhere else. The reason i didn&#39;t want a custom solution is because i assumed there is an easy way to override either the size of the editor and set it to &quot;0&quot;, or disable it completely. I did try to set it&#39;s size by overriding the configureEditor method, but that didn&#39;t help."},{"comment_id":134552061,"body":"Consider the intend of the component.  It&#39;s designed to be a compound component which shows the currently selected &quot;selected item&quot; and provide a means for the user to select a different item, all in a visually compact manner.  It&#39;s a self contained package, so, no I don&#39;t think there&#39;d be an easy way to simply break it - especially when you also add in the UI delegate, which could easily implement the functionality it&#39;s own way.  Personally, I&#39;d just start with a button <code>[...]</code> and go from there, but I&#39;d still have questions over it&#39;s usefulness and UX acceptability from the users perspective"},{"comment_id":134552699,"body":"One idea is to use a <code>JButton</code> and a <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/Popup.html\" rel=\"nofollow noreferrer\">Popup</a> together."}],"answers":[{"comments":[{"comment_id":134556142,"body":"Thank you! I&#39;ll start from this and see if i can make it work almost like a JComboBox."}],"answer_id":76302598,"body":"<p>I created the following GUI using a <code>JButton</code> and a <code>Popup</code> from the <code>PopupFactory</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/TYfVo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TYfVo.png\" alt=\"Example\" /></a></p>\n<p>There's a <code>JLabel</code> at the top to show the selection and a <code>JButton</code> to show the item options.  Unfortunately, I couldn't print the GUI when the item list is displayed.</p>\n<p>When you left-click the <code>JButton</code>, the list of items appear under the <code>JButton</code>.  When you select an item, the list disappears and the selected item is displayed.</p>\n<p>This is a proof of concept.  You would need to add code to hide the list when the Esc key is pressed to cancel the list, as one example.</p>\n<p>Here's the complete runnable code.</p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Dimension;\nimport java.awt.FlowLayout;\nimport java.awt.Point;\n\nimport javax.swing.BorderFactory;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JList;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.ListSelectionModel;\nimport javax.swing.Popup;\nimport javax.swing.PopupFactory;\nimport javax.swing.SwingUtilities;\n\npublic class ItemSelectorExample implements Runnable {\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(new ItemSelectorExample());\n    }\n\n    private int margin;\n\n    private JButton button;\n\n    private JFrame frame;\n\n    private JLabel label;\n\n    private JPanel buttonPanel;\n\n    private Popup popup;\n\n    @Override\n    public void run() {\n        this.margin = 5;\n\n        frame = new JFrame();\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        this.buttonPanel = createButtonPanel();\n        frame.add(buttonPanel, BorderLayout.CENTER);\n\n        frame.pack();\n        frame.setLocationByPlatform(true);\n        frame.setVisible(true);\n    }\n\n    private JPanel createButtonPanel() {\n        JPanel panel = new JPanel(new BorderLayout());\n        panel.setBorder(BorderFactory.createEmptyBorder(margin, margin, margin,\n                margin));\n\n        label = new JLabel(&quot; &quot;);\n        panel.add(label, BorderLayout.NORTH);\n\n        button = new JButton(&quot;Items&quot;);\n        button.addActionListener(event -&gt; {\n            popup = createItemSelectionPanel();\n            popup.show();\n        });\n        panel.add(button, BorderLayout.CENTER);\n\n        return panel;\n    }\n\n    private Popup createItemSelectionPanel() {\n        JPanel panel = new JPanel(new FlowLayout());\n        panel.setBorder(BorderFactory.createEmptyBorder(margin, margin, margin,\n                margin));\n\n        String[] items = new String[9];\n        for (int index = 0; index &lt; items.length; index++) {\n            items[index] = &quot;Item &quot; + (index + 1);\n        }\n\n        JList&lt;String&gt; list = new JList&lt;&gt;(items);\n        list.setVisibleRowCount(4);\n        list.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);\n        list.addListSelectionListener(event -&gt; {\n            String item = (String) list.getSelectedValue();\n            label.setText(item);\n            popup.hide();\n        });\n        JScrollPane scrollPane = new JScrollPane(list);\n        Dimension sp = scrollPane.getPreferredSize();\n        Dimension bp = buttonPanel.getSize();\n        Dimension b = button.getPreferredSize();\n        Point s = button.getLocationOnScreen();\n\n        int width = bp.width - margin - margin;\n        scrollPane.setPreferredSize(new Dimension(width, sp.height));\n\n        PopupFactory factory = PopupFactory.getSharedInstance();\n        Popup popup = factory.getPopup(panel, scrollPane, s.x, s.y + b.height);\n\n        return popup;\n    }\n\n}\n</code></pre>\n"}],"last_activity_date":1684719305,"question_id":76301046,"body":"<p>I want to remove the editor from a JComboBox to make the arrow button span\nthe entire width of the box.</p>\n<p>I tried to use a custom ComboBoxUI to set the size and color of the arrow button.\nThis partially works, but because i couldn't figure out how to remove the editor,\nthe button is only half the width of the entire box.</p>\n<p><strong>The main class:</strong></p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\npublic class Box {\n    public Box() {\n\n        JFrame frame = new JFrame(&quot;frame&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setSize(400,250);\n\n        JPanel panel = new JPanel();\n        panel.setLayout(null);\n        frame.add(panel);\n\n        String[] items = { &quot;&quot;, &quot;item1&quot;, &quot;item2&quot;, &quot;item3&quot;, &quot;item4&quot; };\n        JComboBox&lt;String&gt; box = new JComboBox&lt;&gt;(items);\n        box.setBounds(100,20,200,50);\n        UIManager.put(&quot;ComboBox.squareButton&quot;, Boolean.FALSE);\n        box.setUI(new ComboUI());\n        box.setBorder(BorderFactory.createMatteBorder(2,2,2,2, Color.BLACK));\n        panel.add(box);\n\n        frame.setVisible(true);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    }\n    public static void main(String[] args) {\n        new Box();\n    }\n}\n\n</code></pre>\n<p><strong>And the custom ComboBoxUI:</strong></p>\n<pre><code>import javax.swing.*;\nimport javax.swing.plaf.basic.BasicComboBoxUI;\nimport java.awt.*;\npublic class ComboUI extends BasicComboBoxUI {\n        @Override\n        protected JButton createArrowButton() {\n            final JButton button = new JButton(&quot;Items&quot;);\n            button.setBackground(Color.GRAY);\n            button.setForeground(Color.WHITE);\n            button.setBounds(0,0, 200,40);\n            return button;\n        }\n    }\n</code></pre>\n<p>This code results in this:</p>\n<p>Arrow button half the size of combo box&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/vxCd4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vxCd4.png\" alt=\"https://i.stack.imgur.com/vxCd4.png\" /></a></p>\n<p>What i would like instead is this:</p>\n<p>Arrow button same size as combo box:</p>\n<p><a href=\"https://i.stack.imgur.com/VsTGv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VsTGv.png\" alt=\"https://i.stack.imgur.com/VsTGv.png\" /></a></p>\n"},{"last_activity_date":1684718597,"question_id":76302536,"body":"<p>I'm a developer, and I use the nexts tools for develops APIs:</p>\n<ol>\n<li>Wso2 Integration Studio (Eclipse based IDE to develop APIs in a visual way)</li>\n<li>ActiveMQ (to manage queues)</li>\n</ol>\n<p>I have 2 projects in my Wso2 Integration Studio environment. They are:</p>\n<ol>\n<li>Make a 2 integers numbers addition and generate his result.</li>\n<li>Make a Queue in ActiveMQ</li>\n</ol>\n<p>But now I need make an API than unified the twos functions in an only one project, i mean in a only one API for sum 2 integer numbers and send the result in a ActiveMQ Queue.</p>\n<p>I use Wso2 Integration Studio 8.0 and ActiveMQ 5.15</p>\n<p>I hope you can guide me on how to start making my API.</p>\n"},{"comments":[{"comment_id":134552923,"body":"I see a lot of issues with this code, including inappropriately using null layouts, artificial constraints to JTextArea size, loops and sleeps that can block the Swing event thread, creation of a JTextArea whenever the <code>text(...)</code> method is called, resulting in multiple text areas being created, .... there is a lot to fix here, and I have to wonder if you might be best off starting over, but after first going through the <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Swing Tutorials</a>."},{"comment_id":134552932,"body":"<i>&quot;I tried moving the JTextArea to the constructor but that kept on either setting text as null ...&quot;</i> -- then fix that issue, but don&#39;t do what you&#39;re currently doing -- creating multiple JTextAreas. It just doesn&#39;t make sense."},{"comment_id":134553041,"body":"&quot;<i>I need to fix a setText() in java&quot;</i> - you need to do a lot more then that.  This is not how you should be approaching this type of problem and in fact, I&#39;d probably say it&#39;s worth taking the time to start again. Start by having a look at things like <a href=\"https://www.oracle.com/java/technologies/painting.html\" rel=\"nofollow noreferrer\">Painting in AWT and Swing</a>; <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Performing Custom Painting</a>; <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html\" rel=\"nofollow noreferrer\">Swing Timer</a> and <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>"},{"comment_id":134553048,"body":"You might also want to consider learning about things like &quot;delegation&quot; and the &quot;observer pattern&quot; and &quot;model view controller&quot;"},{"comment_id":134558918,"body":"For best results, please strive to make your question more focused as per the <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> link. Also, check out the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> link since this is the absolute best type of code that you can post in a question for getting decent and quick answers."},{"comment_id":134574699,"body":"aside:  stick to java naming conventions when showing java code publicly"},{"comment_id":134574711,"body":"note: null layout is <b>wrong</b>"}],"last_activity_date":1684717830,"question_id":76302470,"body":"<p>I am trying to make my score update in my Breakout game, whenever it hits a block the score updates but it is getting written on</p>\n<p>how I get the score:\n<code>window.Text(window.getScore() + blocks.get(x).pointValue);</code></p>\n<p>how I'm trying to print it:</p>\n<pre><code>import java.awt.Color;\n\nimport javax.swing.JFrame;\n// import javax.swing.JLabel;\nimport javax.swing.JTextArea;\n\n// import org.w3c.dom.Text;\n\npublic class Window extends JFrame {\n    public int score;\n    public int i;\n    private Breakoutscore_Vinnakota core;\n    private Breakout breakout;\n    public JTextArea text;\n    // there are relationship between Window and JFrame\n    // the relationship is called &quot;is-a&quot; relationship\n\n    // structure of a class that can be used as an object\n\n    // instance variable - variables that are related to the object \n\n    // constructor - this is where the instance variables get initialized\n\n    public Window() {\n        setSize(500, 650);\n        setTitle(&quot;Breakout - Vinnakota&quot;);\n        setLayout(null);\n        setLocationRelativeTo(null);\n        setResizable(false);\n        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        \n        \n        // make the Breakout object\n        Breakout out = new Breakout(300, 500,this);\n        add(out);\n        // JTextArea text;\n        // text = new JTextArea(&quot;Score:&quot;);\n        // // text.reload(score);\n        // text.setBounds(0, 450, 100, 100);\n        // text.setEditable(false);\n        // text.setForeground(Color.RED);\n        // add(text);\n        \n        Text(0);\n        setVisible(true); // needs to be the last line to make everything above it visible\n        \n        //game loop\n        while(true){\n            out.repaint();\n            out.move();\n\n            try {\n                Thread.sleep(30);\n            } catch (InterruptedException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n        }\n    }\n    public void Text(int i) {\n        score +=  i;\n        System.out.println(&quot;I am here&quot;);\n        System.out.println(score);\n        JTextArea text;\n        text = new JTextArea(&quot;Score:&quot;);\n        // displayScore(score, text);\n        // text.reload(score);\n        text.setBounds(0, 450, 500, 400);\n        text.setText(&quot;Score: &quot; + score); //-- commened by KSV - UCOMMENT\n        text.setText(&quot;Score: &quot; + score);\n        System.out.println(&quot;u am here &quot; + score);\n        //displayScore(i); // NEW ENTRY BY KSV\n        text.setEditable(false);\n        text.setForeground(Color.RED);\n        add(text);\n    }\n    public int getScore(){\n        return i;\n        // System.out.println(&quot;get score&quot;);\n    }\n    // public void displayScore(int score, JTextArea text){\n    //     text.setText(&quot;Score: &quot;+ score);\n    //     System.out.println(&quot;I am in display Score&quot; + score);\n    // }\n\n    // methods\n}\n</code></pre>\n<p>it keeps on showing this:</p>\n<p>My breakout game, look at the score please</p>\n<p><a href=\"https://i.stack.imgur.com/dWg6S.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dWg6S.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried moving the JTextArea to the constructor but that kept on either setting text as null or not updating the score at all and keeping it at 0</p>\n"},{"comments":[{"comment_id":134552867,"body":"<code>JLayeredPane</code> doesn&#39;t have a layout manager applied by default, so none of the components will be give any kind of sizing (default <code>0x0</code>); <code>File directory = new File(&quot;src&#47;bin&#47;&quot;);</code> &lt;- Don&#39;t reference <code>src</code> in your code, it won&#39;t exist once you export the project."},{"comment_id":134552886,"body":"@MadProgrammer when trying to apply a layout manager by doing e.g. <code>layeredPane.setLayout(new BorderLayout());</code> I get an error saying <code>cannot add to layout: constraint must be a string (or null)</code> which references the second parameter of <code>layeredPane.add(background, Integer.valueOf(0));</code>. can you pls explain what you mean by the <code>src</code> not existing once i export the project?"},{"comment_id":134552887,"body":"No need to use a JLayeredPane. Just use your BackgroundImage component as the content pane (with a BorderLayout) and add your panel with the CardLayout to the content pane. Of course an component you add to the content pane must use <code>setOpaque(false)</code> so you can see the background image. Also the panels you add to the CardLayout must be non-opaque."},{"comment_id":134552899,"body":"@camickr could you please show me how you would apply your solution in an answer? i tried applying what you wrote which made the background image show up but the JPanel cards are still not showing up. the JPanels still seem to be behind each other"},{"comment_id":134552913,"body":"@fullstacknoob Yes, then you&#39;d need to use <code>JLayeredPane#setLayer</code> instead"},{"comment_id":134553000,"body":"Sorry, I can&#39;t help with random lines of code posted. The issue may be in code not provided. Post a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> demonstrating the problem. We should be able to copy/paste/compile/test. That is why I suggested first getting the code to work without the image, just the background color so we can see if all the panels are added/displayed properly. Also note the &quot;navbar&quot; is not required for an MRE. The point of the MRE is to simplify the problem and get that working. Then you add more logic instead of trying to write all the logic at the start."}],"answers":[{"comments":[{"comment_id":134552971,"body":"i edited my question and showed how I applied your solution. the problem unfortunately still persists"}],"answer_id":76302510,"body":"<p>Swing has a parent/child relationship. You would have a structure like:</p>\n<ul>\n<li>frame\n<ul>\n<li>BackgroundImage (using BorderLayout) as the content pane\n<ul>\n<li>non opaque panel (using CardLayout)\n<ul>\n<li>non opaque panel</li>\n<li>non opaque panel</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>Basic solution is:</p>\n<pre><code>JPanel background = new BackgroundImage();\nbackground.setBackground( Color.YELLOW );\nbackground.setLayout( new BorderLayout() );\nframe.setContentPane( background );\n\nJPanel cards = new JPanel( new CardLayout() );\ncards.setOpaque( false );\nbackground.add( cards );\n\nJPanel card1 = new JPanel();\ncard1.add( new JLabel(&quot;Label for first card&quot;) );\ncard1.setOpaque( false );\ncards.add(card1, &quot;card1&quot;);\n\nJPanel card2 = new JPanel();\ncard2.add( new JLabel(&quot;Label for second card&quot;) );\ncard2.setOpaque( false );\ncards.add(card2, &quot;card2&quot;);\n</code></pre>\n<p>So first get the above code working so you see the background color of your panel and one of the cards displaying. If you have problems then you can post your code showing exactly what you have done. Once that works, then you replace the basic components with your custom components. If it stops working you know what you just changed.</p>\n"},{"comments":[{"comment_id":134556096,"body":"thanks, i applied your second approach and it worked!"}],"answer_id":76302531,"body":"<p>If you want to use <code>JLayeredPane</code> this way, then you will need to apply a suitable layout manager to it, for example...</p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.CardLayout;\nimport java.awt.Dimension;\nimport java.awt.EventQueue;\nimport java.awt.Graphics;\nimport java.awt.GridBagConstraints;\nimport java.awt.GridBagLayout;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.image.BufferedImage;\nimport java.io.IOException;\nimport javax.imageio.ImageIO;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JLayeredPane;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\n\npublic class Main {\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                JFrame frame = new JFrame();\n                frame.add(new MainPane());\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n            }\n        });\n    }\n\n    public interface Navigatable {\n        enum View {\n            MENU, CONTENT;\n        }\n        public void show(View view);\n    }\n\n    public class MainPane extends JPanel implements Navigatable {\n\n        private JLayeredPane layeredPane;\n\n        private JPanel contentPane;\n        private CardLayout cardLayout;\n\n        private MenuPane menuPane;\n\n        public MainPane() {\n            setLayout(new BorderLayout());\n\n            layeredPane = new JLayeredPane();\n            add(layeredPane);\n\n            layeredPane.setLayout(new GridBagLayout());\n\n            GridBagConstraints gbc = new GridBagConstraints();\n            gbc.gridx = 0;\n            gbc.gridy = 0;\n            gbc.weightx = 1;\n            gbc.weighty = 1;\n            gbc.fill = GridBagConstraints.BOTH;\n\n            BackgroundPane backgroundPane = new BackgroundPane();\n            layeredPane.add(backgroundPane, gbc);\n            layeredPane.setLayer(backgroundPane, Integer.valueOf(0));\n\n            cardLayout = new CardLayout();\n            contentPane = new JPanel(cardLayout);\n            contentPane.setOpaque(false);\n\n            layeredPane.add(contentPane, gbc);\n            layeredPane.setLayer(contentPane, Integer.valueOf(1));\n\n            contentPane.add(new MenuPane(this), Navigatable.View.MENU.name());\n            JLabel label = new JLabel(&quot;This is the content&quot;);\n            label.setHorizontalAlignment(JLabel.CENTER);\n            contentPane.add(label, Navigatable.View.CONTENT.name());\n        }\n\n        @Override\n        public void show(View view) {\n            cardLayout.show(contentPane, view.name());\n        }\n    }\n\n    public class MenuPane extends JPanel {\n        public MenuPane(Navigatable navigatable) {\n            setOpaque(false);\n            setLayout(new GridBagLayout());\n            setBorder(new EmptyBorder(32, 32, 32, 32));\n\n            JButton btn = new JButton(&quot;Show me the content&quot;);\n            add(btn);\n\n            btn.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    navigatable.show(Navigatable.View.CONTENT);\n                }\n            });\n        }       \n    }\n\n    public class BackgroundPane extends JPanel {\n\n        private BufferedImage bgImage;\n\n        public BackgroundPane() {\n            try {\n                bgImage = ImageIO.read(getClass().getResource(&quot;/images/Mando01-50.png&quot;));\n            } catch (IOException ex) {\n                ex.printStackTrace();\n            }\n        }\n\n        @Override\n        public Dimension getPreferredSize() {\n            if (bgImage != null) {\n                return new Dimension(bgImage.getWidth(), bgImage.getHeight());\n            }\n            return new Dimension(200, 200);\n        }\n\n        @Override\n        protected void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            if (bgImage == null) {\n                return;\n            }\n            int x = (getWidth() - bgImage.getWidth()) / 2;\n            int y = (getHeight() - bgImage.getHeight()) / 2;\n            g.drawImage(bgImage, x, y, this);\n        }\n    }\n}\n</code></pre>\n<p>But, a generally better solution would probably be to make use of the background pane directly, for example...</p>\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.CardLayout;\nimport java.awt.Dimension;\nimport java.awt.EventQueue;\nimport java.awt.Graphics;\nimport java.awt.GridBagLayout;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.image.BufferedImage;\nimport java.io.IOException;\nimport javax.imageio.ImageIO;\nimport javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JLabel;\nimport javax.swing.JPanel;\nimport javax.swing.border.EmptyBorder;\n\npublic class Main {\n    public static void main(String[] args) {\n        new Main();\n    }\n\n    public Main() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                JFrame frame = new JFrame();\n                frame.add(new MainPane());\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n            }\n        });\n    }\n\n    public interface Navigatable {\n        enum View {\n            MENU, CONTENT;\n        }\n        public void show(View view);\n    }\n\n    public class MainPane extends JPanel implements Navigatable {\n\n        private BackgroundPane backgroundPane;\n        private CardLayout cardLayout;\n\n        private MenuPane menuPane;\n\n        public MainPane() {\n            setLayout(new BorderLayout());\n\n            cardLayout = new CardLayout();\n            backgroundPane = new BackgroundPane();\n            backgroundPane.setLayout(cardLayout);\n            add(backgroundPane);\n\n            backgroundPane.add(new MenuPane(this), Navigatable.View.MENU.name());\n            JLabel label = new JLabel(&quot;This is the content&quot;);\n            label.setHorizontalAlignment(JLabel.CENTER);\n            backgroundPane.add(label, Navigatable.View.CONTENT.name());\n        }\n\n        @Override\n        public void show(View view) {\n            cardLayout.show(backgroundPane, view.name());\n        }\n    }\n\n    public class MenuPane extends JPanel {\n        public MenuPane(Navigatable navigatable) {\n            setOpaque(false);\n            setLayout(new GridBagLayout());\n            setBorder(new EmptyBorder(32, 32, 32, 32));\n\n            JButton btn = new JButton(&quot;Show me the content&quot;);\n            add(btn);\n\n            btn.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    navigatable.show(Navigatable.View.CONTENT);\n                }\n            });\n        }       \n    }\n\n    public class BackgroundPane extends JPanel {\n\n        private BufferedImage bgImage;\n\n        public BackgroundPane() {\n            try {\n                bgImage = ImageIO.read(getClass().getResource(&quot;/images/Mando01-50.png&quot;));\n            } catch (IOException ex) {\n                ex.printStackTrace();\n            }\n        }\n\n        @Override\n        public Dimension getPreferredSize() {\n            if (bgImage != null) {\n                return new Dimension(bgImage.getWidth(), bgImage.getHeight());\n            }\n            return new Dimension(200, 200);\n        }\n\n        @Override\n        protected void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            if (bgImage == null) {\n                return;\n            }\n            int x = (getWidth() - bgImage.getWidth()) / 2;\n            int y = (getHeight() - bgImage.getHeight()) / 2;\n            g.drawImage(bgImage, x, y, this);\n        }\n    }\n}\n</code></pre>\n"}],"last_activity_date":1684717614,"question_id":76302467,"body":"<p>I'm using Java 17 for a little project. I'm doing the Layout with the AWT <code>CardLayout</code> and the graphical components with Swing.</p>\n<p>I want to change my currently active <code>JPanel</code> in <code>Window.java</code> whenever I click on one of the <code>JMenuBarItem</code>s inside my <code>Navbar.java</code> class but show my background image from my <code>BackgroundImage</code> class all the time by using a <code>JLayeredPane</code>.</p>\n<p>Window.java:</p>\n<pre><code>public class Window extends JFrame {\nJPanel cards;\nJLayeredPane layeredPane;\n\nJPanel openPokédex = new OpenPokédexPanel();\n\npublic Window() {\naddWindowListener(new WindowAdapter() {\n    public void windowClosing (WindowEvent e) {\n    dispose();\n    }\n});\n\nthis.setSize(800, 600);\n\nlayeredPane = new JLayeredPane();\nthis.setContentPane(layeredPane);\n\nBackgroundImage background = new BackgroundImage();\nlayeredPane.add(background, Integer.valueOf(0));\n\ncards = new JPanel(new CardLayout());\nlayeredPane.add(cards, Integer.valueOf(1));\n\ncards.add(openPokédex, &quot;openPokedex&quot;);\n\nNavbar bar = new Navbar(cards, this);\nthis.setJMenuBar(bar);\n\nthis.setVisible(true);\n}\n\npublic void switchPanel(String panelName) {\n    CardLayout cardLayout = (CardLayout) cards.getLayout();\n    cardLayout.show(cards, panelName);\n    System.out.println(panelName);\n}\n}\n</code></pre>\n<p>Navbar.java:</p>\n<pre><code>public class Navbar extends JMenuBar{\nJPanel cards;\nWindow window;\n\npublic Navbar(JPanel cards, Window window) {\nthis.cards = cards;\nthis.window = window;\n\nJMenu pokedex = new JMenu(&quot;Pokédex&quot;);\nJMenuItem openPokedex = new JMenuItem(&quot;Open&quot;);\npokedex.add(openPokedex);\n\nthis.add(pokedex);\n\n// Events\nopenPokedex.addActionListener(e -&gt; window.switchPanel(&quot;openPokedex&quot;));\n}\n}\n</code></pre>\n<p>OpenPokédexPanel.java:</p>\n<pre><code>public class OpenPokédexPanel extends JPanel {\n\nOpenPokédexPanel() {\n// tried doing transparent background but made no difference\n//this.setOpaque(false);\n//this.setBackground(new Color(255, 255, 255, 0));\n\n// pretty much irrelevant. just to see if the panel is actually there\nJButton pokémonButton = new JButton(&quot;Pokémon&quot;);\nthis.add(pokémonButton);\n}\n}\n</code></pre>\n<p>BackgroundImage.java:</p>\n<pre><code>public class BackgroundImage extends JComponent {\nBufferedImage image = null;\n\npublic BackgroundImage() {\nFile bgimage = null;\n\nFile directory = new File(&quot;src/bin/&quot;);\n\nif (directory.isDirectory()) {\n    File[] files = directory.listFiles();\n    \n    if (files != null &amp;&amp; files.length &gt; 0) {\n    Random rng = new Random();\n    File randomFile = files[rng.nextInt(files.length)];\n    bgimage = randomFile;\n    \n    } else {\n    System.out.println(&quot;No images!&quot;);\n    }\n} else {\n    System.out.println(&quot;Not a directory!&quot;);\n}\n\ntry {\n    image = ImageIO.read(bgimage);\n} catch (IOException e) {\n    e.printStackTrace();\n}\n}\n\n@Override\nprotected void paintComponent(Graphics g) {\nsuper.paintComponent(g);\nif (image != null) {\n    g.drawImage(image, 0, 0, getWidth(), getHeight(), this);\n}\n}\n}\n</code></pre>\n<p>Before trying to combine the <code>BackgroudImage</code> with the <code>CardLayout</code>, the background image worked fine but the <code>JPanel</code>s weren't showing up because they apparently spawned behind my background image. I want to have a permanent background with <code>JPanel</code> displaying content on top.\nAt the moment it only shows a white screen when starting the program</p>\n<p><strong>EDIT 1</strong></p>\n<p>I modified <code>OpenPokédexPanel</code> JPanel class:</p>\n<pre><code>public class OpenPokédexPanel extends JPanel {\n\nOpenPokédexPanel() {\n\nthis.setOpaque(false); // added this again\n//this.setBackground(new Color(255, 255, 255, 0));\n\nJButton pokémonButton = new JButton(&quot;Pokémon&quot;);\nthis.add(pokémonButton);\n}\n}\n</code></pre>\n<p>and I modified the main <code>Window</code> class. I removed the <code>JLayeredPane</code> and added the following code as @camickr suggested:</p>\n<pre><code>BackgroundImage background = new BackgroundImage();\nthis.setLayout(new BorderLayout());\nthis.setContentPane(background);\n\ncards = new JPanel(new CardLayout());\ncards.setOpaque(false);\nbackground.add(cards);\n\ncards.add(openPokédex, &quot;openPokedex&quot;);\n</code></pre>\n<p>The background image shows up but the <code>JPanel</code> card <code>openPokédex</code> won't show up as well on click.</p>\n"},{"answers":[{"answer_id":76302540,"body":"<p>I have problems using Android Studio Flamingo | 2022.2.1 Patch 1<br />\nAfter updating 3 libraries:<br />\nin app/build.gradle I have updated:<br />\nFrom:</p>\n<pre><code>    implementation 'androidx.core:core-ktx:1.8.0'  \n    implementation 'androidx.lifecycle:lifecycle-runtime-ktx:2.3.1'  \n    implementation 'androidx.activity:activity-compose:1.5.1'  \n</code></pre>\n<p>To:</p>\n<pre><code>    implementation 'androidx.core:core-ktx:1.10.1'  \n    implementation 'androidx.lifecycle:lifecycle-runtime-ktx:2.6.1'  \n    implementation 'androidx.activity:activity-compose:1.7.1'  \n</code></pre>\n<p>I undo it and worked.</p>\n"}],"last_activity_date":1684717600,"question_id":76075482,"body":"<p>My project is in Java , but when i tried to compile the project , it throws kotlin-related error that there are duplicate classes whereas i'm not really using any kotlin dependency or kotlin , any reason why this is happening Thank you .</p>\n<ul>\n<li>This is my build gradle ( for project )</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/4ANLH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4ANLH.png\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li>This is my build gradle ( for module )</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/nWjJC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nWjJC.png\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"comment_id":134411856,"body":"Unfortunately that solution is for a different use case. It seems the main answer there is hardcoding the parameter in the second call. That is not realistic for my use case. It can be a massive parameter or may not be rendered correctly as String (e.g. float value)."},{"comment_id":134412479,"body":"I don&#39;t use Java, but a little digging found this <a href=\"https://jdbc.postgresql.org/documentation/server-prepare/\" rel=\"nofollow noreferrer\">Server prepare</a> <i>Server Prepared Statements Motivation</i>. It seems you might need to do: <code>ps1 = conn.prepareStatement( &quot;select * from documents where content = ?&quot;);</code>"},{"comment_id":134412548,"body":"That&#39;s what I&#39;m doing (in the second call). The first one <b>must use $1</b> to create a PostgreSQL procedure. I don&#39;t understand why the question was closed. The related answer is for a different question."},{"comment_id":134412607,"body":"1) I voted to reopen the question as it is different. 2) That is not what you are doing, you are using <code>prepare</code> and it&#39;s placeholder <code>$1</code> in your version of the query. If I understand the docs correctly that taken care of for you by <code>PreparedStatement</code>."}],"answers":[{"comments":[{"comment_id":134425769,"body":"Thank you for your answer. I think I cannot do <code>explain execute x (42)</code> since that would require to render the parameter(s) as string(s) (<code>42</code> in this case) and concatenate them to the SQL query. In this case some parameters can be massive, or may not be easy to render as strings like floating point numbers. Plus, I don&#39;t like to open a window for SQL Injection."},{"comment_id":134427391,"body":"Sorry to be confusing @JoeDiNottra, I&#39;m not saying you shoud do it this way, I&#39;m only showing how in works in <code>JDBC</code>. I also try to point you to the combination of <code>force_generic_plan</code> and passing <code>null</code> which I&#39;d try to investigate in your situation and check if it provides valuable results."},{"comment_id":134430605,"body":"When you say &quot;or if you realy must pass representation sample value(s)&quot;, that got me thinking. Maybe instead of passing the &quot;very long string&quot;, I can just pass a hardcoded &quot;a&quot; value. Maybe that&#39;s enough to get a valid plan. If that&#39;s the case I just need to make sure I have one hardcoded value for every single PostgreSQL data type, and done!"}],"answer_id":76226845,"body":"<p>You don't need to replace the <code>$1</code> with the <em>bind variable value</em>, but you can't apparently use the bind variable in the <code>explain execute</code> statement - here it must be stated.</p>\n<p>So this sequence works fine (pseudocode)</p>\n<pre><code>prep = con.prepareStatement(&quot;prepare x(integer) as select id, pad from jdbn.document where id = $1&quot;)\nprep.execute();\n\nstmt = con.prepareStatement(&quot;explain execute x (42)&quot;)\nrs = stmt.executeQuery()\n</code></pre>\n<p>As described in the previously marked as duplicated <a href=\"https://stackoverflow.com/a/44899432/4808122\">question</a> you get for first few execution a <em>custom plan</em> (i.e. you see the variable in the condition, here <code>id = 42</code>) and finaly a <em>generic plan</em> (i.e. with a predicate <code>id = $1</code>)</p>\n<p>Your <em>trick</em> with <code>null</code> fails as PostgreSql knows that  <code>id = null</code> returns nothing (I'm using vague formulation to avoid to be neither <em>true</em> nor <em>false</em>) and makes a <em>dummy</em> plan e.g. <code>One-Time Filter: false</code></p>\n<p>You may force to produce a <em>generic plan</em> with the <a href=\"https://www.postgresql.org/docs/current/runtime-config-query.html\" rel=\"nofollow noreferrer\"><code>plan_cache_mode</code></a> parameter</p>\n<pre><code>con.createStatement().execute(&quot;set plan_cache_mode = force_generic_plan&quot;)\n</code></pre>\n<p>in which case the the first explained plan is generic. It seem that with this setting the <code>null</code> parameter does not lead to a dummy plan (but I'm not sure if there are not other caveats).</p>\n<p>So I'd say you should always define the data type of the variable <code>prepare x(integer) ...</code>  but I'm not sure and have no experience if you can get a meaningfull execution plan with the combination of <code>force_generic_plan</code>  and passing <code>null</code> (similar to Oracle functionality) or if you realy must pass representation sample value(s) or the parameter(s).</p>\n<p><strong>Final Note</strong> all the discussion here is focused on <em>well designed prepared statements</em>, i.e. any possible value passed will lead to a single same excution plan. For <em>other</em> statements it is not meaningfull, as there is <em>no single execution plan</em>.</p>\n"},{"answer_id":76302514,"body":"<p>you can try this line</p>\n<pre><code>PreparedStatement ps1 = conn.prepareStatement(\n  &quot;prepare x as select * from documents where content = '&quot;+ 1 +&quot;'&quot;);\nps1.execute();\n</code></pre>\n<p>instead of</p>\n<pre><code>   PreparedStatement ps1 = conn.prepareStatement(\n      &quot;prepare x as select * from documents where content = $1&quot;);\n    ps1.execute();\n</code></pre>\n"}],"last_activity_date":1684717061,"question_id":76219095,"body":"<p>My application has a myriad of queries and I wanted to get the execution plan of some of them. Most if not\nall of the queries have multiple parameters and I can't find how to get the execution plan for any non-trivial query in PostgreSQL.</p>\n<p>The real cases are much more involved but here's a simple, representative case of a query (just one parameter for simplicity):</p>\n<pre class=\"lang-java prettyprint-override\"><code>Connection conn = DriverManager.getConnection(&quot;...&quot;, &quot;...&quot;, &quot;...&quot;);\n\nPreparedStatement ps1 = conn.prepareStatement(\n  &quot;prepare x as select * from documents where content = $1&quot;);\nps1.execute();\n\nPreparedStatement ps2 = conn.prepareStatement(\n  &quot;explain (format json) execute x (?)&quot;);\nps2.setString(1, &quot;Very long content here...&quot;); // Binds the parameter\nResultSet rs = ps2.executeQuery(); // Error here!\n\nwhile (rs.next()) {\n  System.out.println(rs.getString(1));\n}\n</code></pre>\n<p>When I run this, I get the error:</p>\n<blockquote>\n<p>ERROR: there is no parameter $1\nPosition: 34</p>\n</blockquote>\n<p>If I <strong>hardcode</strong> the parameter (e.g. replacing <code>$1</code> with <code>'a'</code>) everything works well and I get a plan. However, if I try to use a JDBC parameter it doesn't work. Hardcoding the parameter is not realistic for my use case since it can be a massive parameter or may not be rendered correctly as String (e.g. float value).</p>\n<p>I also tried using <code>null</code> instead of <code>?</code> and it doesn't crash, but\nit returns an execution plan that is wrong; it seems it somehow short-circuits the logic and returns something totally off reality.</p>\n<p>What am I doing wrong?</p>\n"},{"comments":[{"comment_id":134552820,"body":"Use a Swing <code>Timer</code> instead of <code>java.util.Timer</code>. Don&#39;t start timer in <code>paint</code> - in fact, don&#39;t override <code>paint</code> and don&#39;t paint directly to the frame, use a <code>JPanel</code> instead - see <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Performing Custom Painting</a> and <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html\" rel=\"nofollow noreferrer\">How to Use Swing Timers</a> - for <a href=\"https://stackoverflow.com/questions/23443503/changing-background-color-on-every-clock-tick/23443563#23443563\">example</a>"},{"comment_id":134552832,"body":"A painting method is for painting only. Don&#39;t have Timer logic in the painting method. Painting is done by using the Graphics object passed to the paintComponent() method of a JPanel. See: <a href=\"https://stackoverflow.com/a/54028681/131872\">stackoverflow.com/a/54028681/131872</a> for an example of using a Swing Timer for animation."},{"comment_id":134553129,"body":"For additional code context, you can view the full file on my github <a href=\"https://github.com/boxtop312/comp-sci-IntelliJ-IDEA/blob/main/src/Physics_Final.java\" rel=\"nofollow noreferrer\">link</a>"}],"last_activity_date":1684715528,"question_id":76302446,"body":"<p>When i use Timer and TimerTask to have it run the code every second it doesn't draw to the JFrame but still runs the code.</p>\n<pre><code>public void drawObject(Graphics g, int scale){\n        g.setColor(colors[rand]);\n        g.fillOval(xPos,yPos,scale*size,scale*size);\n    }\n</code></pre>\n<pre><code>    public void paint(Graphics g) {\n        setBackground(Color.WHITE);\n\n        Timer timer = new Timer();\n        TimerTask task = new TimerTask() {\n            boolean ting = false;\n            public void run() {\n                if(ting){\n                    g.setColor(Color.white);\n                    g.fillRect(0, 0, getWidth(), getHeight());\n                }\n                for(int i=0;i&lt;jTP.physicsObjectArrayList.size();i++){\n                    jTP.physicsObjectArrayList.get(i).drawObject(g,scale);\n                    System.out.println(&quot;test&quot;);\n                }\n                for(int i=0;i&lt;jTP.physicsObjectArrayList.size();i++) {\n                    jTP.physicsObjectArrayList.get(i).setxPos(jTP.physicsObjectArrayList.get(i).getxPos()+getForceX(i)+getVelocityX(i));\n                    jTP.physicsObjectArrayList.get(i).setyPos(jTP.physicsObjectArrayList.get(i).getyPos()+getForceY(i)+getVelocityY(i)+getGravity(i));\n                }\n                ting = true;\n            }\n        };\n\n        timer.scheduleAtFixedRate(task, new Date(System.currentTimeMillis()), (long) 1000.0);\n</code></pre>\n<p>I am expecting it to draw the circle but it doesn't but it does print test to the command line. when i comment out the timer stuff it does draw the circle but then it doesn't have the delays</p>\n"},{"comments":[{"comment_id":134539330,"body":"Please Note: My incoming JSON string is dynamic, can&#39;t fit into single POJO class"}],"answers":[{"answer_id":76295556,"body":"<p>Try this.</p>\n<pre><code>public static void main(String[] args) throws JsonMappingException, JsonProcessingException {\n    ObjectMapper mapper = new ObjectMapper();\n    String inputJsonString = &quot;{\\&quot;key1\\&quot;:\\&quot;bla bla bla bla\\&quot;,\\&quot;key2\\&quot;:{\\&quot;key21\\&quot;:\\&quot;bla bla bla\\&quot;},\\&quot;key3\\&quot;:[{\\&quot;key21\\&quot;:\\&quot;bla bla bla\\&quot;}]}&quot;;\n    System.out.println(inputJsonString);\n    JsonNode jsonNode = mapper.readTree(inputJsonString);\n\n    truncateStringValues(jsonNode);\n\n    System.out.println(jsonNode);\n\n}\n\nprivate static void truncateStringValues(JsonNode jsonNode) throws JsonMappingException, JsonProcessingException {\n    if (jsonNode.isArray()) {\n        for (JsonNode arrayItem : jsonNode) {\n            truncateStringValues(arrayItem);\n        }\n\n    } else if (jsonNode.isObject()) {\n        Iterator&lt;Entry&lt;String, JsonNode&gt;&gt; fields = jsonNode.fields();\n        while (fields.hasNext()) {\n            Entry&lt;String, JsonNode&gt; jsonField = fields.next();\n            JsonNode jsonFieldValue = jsonField.getValue();\n            if (!jsonFieldValue.isContainerNode()) {\n                ((ObjectNode) jsonNode).put(jsonField.getKey(), jsonFieldValue.asText().substring(0, 5));\n            } else {\n                truncateStringValues(jsonFieldValue);\n            }\n        }\n    }\n}\n</code></pre>\n"},{"answer_id":76297510,"body":"<p>Nice answer, <a href=\"https://stackoverflow.com/users/8041003/john-williams\">@John Williams</a>!</p>\n<p>Just a quick note: If the string to be truncated is less than 5 characters, there's a chance of encountering <code>java.lang.StringIndexOutOfBoundsException</code>. To handle this, you can use <code>Math.min</code> with substring. Here's an example:</p>\n<pre><code>String text = jsonFieldValue.asText();\nobjectNode.put(entry.getKey(), text.substring(0, Math.min(text.length(), 5)));\n</code></pre>\n<p>This ensures safe truncation. Thanks!</p>\n"}],"last_activity_date":1684711039,"question_id":76294414,"body":"<p>I have a dynamic nested json string and I wanted to limit the string value of all keys to have max length of 5 chars.</p>\n<p>Using: Java fasterxml.jackson</p>\n<p>For Json String like below:</p>\n<pre><code>String inputJsonString = &quot;{\\&quot;key1\\&quot;:\\&quot;bla bla bla bla\\&quot;,\\&quot;key2\\&quot;:{\\&quot;key21\\&quot;:\\&quot;bla bla bla\\&quot;}}&quot;;\n</code></pre>\n<p>I wanted this result:</p>\n<pre><code>String outputJsonString = &quot;{\\&quot;key1\\&quot;:\\&quot;bla b\\&quot;,\\&quot;key2\\&quot;:{\\&quot;key21\\&quot;:\\&quot;bla b\\&quot;}}&quot;;\n</code></pre>\n<p>For Json String like this:</p>\n<pre><code>String inputJsonString = &quot;{\\&quot;fname\\&quot;:\\&quot;bla bla bla bla\\&quot;,\\&quot;address\\&quot;:{\\&quot;street\\&quot;:\\&quot;bla bla bla\\&quot;}}&quot;;\n</code></pre>\n<p>I wanted this result:</p>\n<pre><code>String outputJsonString = &quot;{\\&quot;fname\\&quot;:\\&quot;bla b\\&quot;,\\&quot;address\\&quot;:{\\&quot;street\\&quot;:\\&quot;bla b\\&quot;}}&quot;;\n</code></pre>\n"},{"answers":[{"answer_id":76295199,"body":"<p>It really depends on what your application is logging and at what log level. Increase the levels from debug and trace to at least info. Those are usually too verbose and show too many details. It depends on spring boot if it will show the actual information that you want. Else you need to add your own logger to the application.</p>\n"}],"last_activity_date":1684710691,"question_id":76294341,"body":"<p>I have been trying to do the logging part in My Springboot appication.\nMy logs are filled with unwanted stuff</p>\n<p><code>&quot;\\u0006stdout\\u0010��������\\u0017\\u001a�\\u00012023-05-20 08:48:38.366 [http-nio-8080-exec-5] DEBUG o.s.w.f.CommonsRequestLoggingFilter - REQUEST DATA : GET /dg/public/course]\\u0000\\u0000\\u0000�\\u0000\\u0000\\u0000�&quot;</code></p>\n<p>Just wanted the <code> GET /dg/public/course</code></p>\n<p>How can i achieve that.\nThis is my logback.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;configuration&gt;\n\n  &lt;property name=&quot;LOGS&quot; value=&quot;/tmp/logs&quot; /&gt;\n\n  &lt;appender name=&quot;Console&quot;\n    class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\n    &lt;layout class=&quot;ch.qos.logback.classic.PatternLayout&quot;&gt;\n      &lt;Pattern&gt;\n        %black(%d{ISO8601}) %highlight(%-5level) [%blue(%t)] %yellow(%C{1.}): %msg%n%throwable\n      &lt;/Pattern&gt;\n    &lt;/layout&gt;\n  &lt;/appender&gt;\n\n  &lt;appender name=&quot;RollingFile&quot;\n    class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\n    &lt;file&gt;${LOGS}/spring-boot-logger.log&lt;/file&gt;\n    &lt;encoder\n      class=&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;&gt;\n      &lt;Pattern&gt;%d %p %C{1.} [%t] %m%n&lt;/Pattern&gt;\n    &lt;/encoder&gt;\n\n    &lt;rollingPolicy\n      class=&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;\n      &lt;!-- rollover daily and when the file reaches 10 MegaBytes --&gt;\n      &lt;fileNamePattern&gt;${LOGS}/archived/spring-boot-logger-%d{yyyy-MM-dd}.%i.log\n      &lt;/fileNamePattern&gt;\n      &lt;timeBasedFileNamingAndTriggeringPolicy\n        class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&gt;\n        &lt;maxFileSize&gt;10MB&lt;/maxFileSize&gt;\n      &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;\n    &lt;/rollingPolicy&gt;\n  &lt;/appender&gt;\n\n  &lt;!-- LOG everything at INFO level --&gt;\n  &lt;root level=&quot;info&quot;&gt;\n    &lt;appender-ref ref=&quot;RollingFile&quot; /&gt;\n    &lt;appender-ref ref=&quot;Console&quot; /&gt;\n  &lt;/root&gt;\n\n  &lt;!-- LOG &quot;com.teaching.gradzee*&quot; at TRACE level --&gt;\n  &lt;logger name=&quot;com.teaching.gradzee&quot; level=&quot;trace&quot; additivity=&quot;false&quot;&gt;\n    &lt;appender-ref ref=&quot;RollingFile&quot; /&gt;\n    &lt;appender-ref ref=&quot;Console&quot; /&gt;\n  &lt;/logger&gt;\n  &lt;logger name=&quot;org.hibernate.SQL&quot; level=&quot;ERROR&quot; /&gt;\n  &lt;logger name=&quot;org.springframework.web.filter.CommonsRequestLoggingFilter&quot; level=&quot;DEBUG&quot;/&gt;\n&lt;!--  &lt;logger name=&quot;org.zalando.logbook&quot; level=&quot;TRACE&quot; /&gt;--&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>Using new relic for logging.</p>\n<p>Agent is running in ec2, my application is in Docker</p>\n"},{"comments":[{"comment_id":132655292,"body":"You need to parse the string into separate variables. Ex: <code>000001BilboBagginsEsq.1020</code> -&gt; <code>int id = 1; String firstName = Bilbo; etc...</code> Is there a consistent format to the lines?"},{"comment_id":132655338,"body":"The data points are in separate variables but they are entered via user input in a separate program in the same project and are stored in a CSV variable as CSVPersonData = ID + firstName + lastName + Title + YOB;  Is this the format you are referring to?"},{"comment_id":132655526,"body":"Still a bit confused. Is <code>CSVPersonData</code> a <code>String</code>? Why does it not have commas separating the fields? <code>000001,Bilbo,Baggins,Esq.,1020</code>? That&#39;s what the <code>C</code> in <code>CSV</code> stands for."},{"comment_id":132656145,"body":"Sorry I know it is confusing, yes it is a string that contains ID, First Name, Last Name, Title, and YOB.  I realized I did not want the commas in the output but I haven&#39;t renamed the variable which I probably should.  I just want them to display with space in between."},{"comment_id":132656672,"body":"When smash all the data together like that you need some way to unsmash it. There needs to be a pattern. Assuming the first and last fields are always numbers, and the inner 3 fields are capital letters followed by lower case letters, you can use regex: <code>&quot;(\\\\d+)([A-Z][a-z]+)([A-Z][a-z]+)([A-Z][a-z.]+)(\\\\d+)&quot;</code>"}],"answers":[{"answer_id":76302274,"body":"<p>The fields have no delimiter, it appears.</p>\n<p>The text <code>000001BilboBagginsEsq.1020</code> needs to be delimited somehow.</p>\n<p>For the sake of argument, I'm going to presume the first field is a number, and second is a word, starting with an uppercase letter, same with the third and forth field, and the fifth field is a number.</p>\n<p>There are a few approaches you can take to accomplish this task.</p>\n<p>I recommend using a <code>Pattern</code> and <code>Matcher</code> to capture the values.<br />\nYou can then use a basic <code>class</code> structure to hold the data for each line.</p>\n<p>Consider the following class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Entry {\n    String fieldA, firstName, secondName, title, fieldE;\n\n    static Entry parse(String string) {\n        Entry entry = new Entry();\n        String regex = &quot;(\\\\d+)([A-Z][a-z._]+)([A-Z][a-z._]+)([A-Z][a-z._]+)(\\\\d+)&quot;;\n        Pattern pattern = Pattern.compile(regex);\n        Matcher matcher = pattern.matcher(string);\n        if (matcher.find()) {\n            entry.fieldA = matcher.group(1);\n            entry.firstName = matcher.group(2);\n            entry.secondName = matcher.group(3);\n            entry.title = matcher.group(4);\n            entry.fieldE = matcher.group(5);\n        }\n        return entry;\n    }\n\n    @Override\n    public String toString() {\n        String string;\n        string = &quot;%-15s&quot;.formatted(fieldA);\n        string += &quot;%-15s&quot;.formatted(firstName);\n        string += &quot;%-15s&quot;.formatted(secondName);\n        string += &quot;%-15s&quot;.formatted(title);\n        string += &quot;%s&quot;.formatted(fieldE);\n        return string;\n    }\n}\n</code></pre>\n<p>The <code>parse</code> method is static, and can be used to return an instance of <code>Entry</code>, given the line.<br />\nThe <code>toString</code> method will be used to format the data into a <code>String</code>, which we can then print to the standard-out.</p>\n<p>You can then use the following method to read a file, line-for-line, and print the data out.</p>\n<pre class=\"lang-java prettyprint-override\"><code>void print(String path) throws IOException {\n    try (BufferedReader reader = new BufferedReader(new FileReader(path))) {\n        Entry entry;\n        String line;\n        int count = 0;\n        while ((line = reader.readLine()) != null)\n            System.out.println(++count + &quot; &quot; + Entry.parse(line));\n    }\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>1 000001         Bilbo          Baggins        Esq.           1020\n</code></pre>\n"}],"last_activity_date":1684710506,"question_id":75174341,"body":"<p>I am trying to print the contents of a file that is read using a while loop after the user selects it from the JChooser prompt window.  The file is written in a program and contains an ID, first name, last name, title, and year of birth that is stored in a written data file as &quot;000001BilboBagginsEsq.1020&quot;  I am trying to use another program to choose the data file print the contents to the console such that it displays as:</p>\n<pre><code>000001          Bilbo              Baggins           Esq.          1020\n</code></pre>\n<p>I want to use the printf statement to format the data that is read and stored in the &quot;rec&quot; variable in this manner, but when I pass in the data from the file it seems to ignore the printf format and prints the data like this in the console:</p>\n<pre><code>1 000001BilboBagginsEsq.1020\n</code></pre>\n<p>My program uses the JChooser to pick a file and print its contents using a while loop:</p>\n<pre><code>while(reader.ready())\n                {\n                    rec = reader.readLine();\n                    line++;                    \n                    System.out.printf(&quot;\\n%4d %-60s &quot;, line, rec);\n                }\n                    reader.close();\nSystem.out.println(&quot;\\n\\nData file read!&quot;); \n</code></pre>\n<p>Any help on this would be appreciated.</p>\n<p>I tried formatting the rec using printf, expecting the output to display:</p>\n<pre><code>000001          Bilbo              Baggins           Esq.          1020\n</code></pre>\n<p>But instead it still prints:</p>\n<pre><code>1 000001BilboBagginsEsq.1020\n</code></pre>\n"},{"comments":[{"comment_id":1902295,"body":"How does the python program take input? This doesn&#39;t make a lot of sense, does it read from a directory every X minutes, or from STDIO? Do you exec the code yourself or what?"}],"answers":[{"comments":[{"comment_id":1900679,"body":"You should be able to make Jython work even without changing your python code."},{"comment_id":1900771,"body":"I want to treat the Python as a black closed box. More as a server.  How Python well python work with sockets?"},{"comment_id":1900798,"body":"@Rod: Jython is python running on JVM, and it&#39;s still a &quot;black box&quot;. It&#39;s just that Java can call it without using sockets and all that. And since you&#39;re using Java, this is the best way."},{"comment_id":1900806,"body":"Do I have to embed the Python app code in my the Java app? Or is it can be used as an intermediate technology?"},{"comment_id":1903363,"body":"Jython will not work if the Python code relies upon any C extensions (for example numpy).  Additionally, not all Python features exist in Jython, leading to bugs such as this one (<a href=\"http://bugs.jython.org/issue1398\" rel=\"nofollow noreferrer\">bugs.jython.org/issue1398</a>) in NLTK.  It would not hurt to try running on Jython, but I would personally use one of the solutions that launches a separate process."}],"answer_id":1984453,"body":"<p>Look into <a href=\"http://www.jython.org/\" rel=\"nofollow noreferrer\">Jython</a> - you can run Python programs directly from Java code, and interact seamlessly back and forth.</p>\n"},{"answer_id":1984457,"body":"<p>Expose one of the two as a service of some kind, web service maybe. Another option is to port the python code to Jython</p>\n"},{"answer_id":1984611,"body":"<p>One possible solution is <a href=\"http://jpype.sourceforge.net/\" rel=\"nofollow noreferrer\">jpype</a>.  This allows you to launch a JVM from Python and pass data back and forth between them.</p>\n\n<p>Another solution may be to write the Python program as a filter (reading data from stdin and writing result to stdout) then run it as a pipe.  However I do not know how well Java supports this - according to the Sun docs their concept of pipes only supports communication between threads on the same JVM.  </p>\n"},{"comments":[{"comment_id":1900788,"body":"Of course it means the python app must read from the stdin and write to the stdout. Good luck!"},{"comment_id":1900799,"body":"Wont it just return the exit code of the python process?  If not, what would be considered as available from the inputStream?"},{"comment_id":1900928,"body":"Nop. From the invoked (python) process you have an STDIN and a STDOUT (and a STDERR also :). Java can hook them, write in one and read the other. When you do printf(&quot;...&quot;) (sorry, I don&#39;t know about Python) you are writing to stdout. When you do something like &quot;dir | more&quot; in the Windows command line or &quot;ls | nl&quot; in Linux you are redirecting STDOUT of the first program to the STDIN of the second. If you want the return code of the process you have to call pythonProc.waitFor(). That returns an int."}],"answer_id":1984649,"body":"<p>I don't know nothing about Jython and the like. I guess it's the best solution if you can execute two programs without executing a new process each time the Java app needs to transform text. Anyway a simple proof of concept is to execute a separate process from the Java App to make it work. Next you can enhance the execution with all that tools.</p>\n\n<p><strong>Executing a separate process from Java</strong></p>\n\n<pre><code>String[] envprops = new String[] {\"PROP1=VAL1\", \"PROP2=VAL2\" };\nProcess pythonProc = Runtime.getRuntime().exec(\n   \"the command to execute the python app\", \n    envprops, \n    new File(\"/workingdirectory\"));\n\n// get an outputstream to write into the standard input of python\nOutputStream toPython = pythonProc.getOutputStream();\n\n// get an inputstream to read from the standard output of python\nInputStream fromPython = pythonProc.getInputStream();\n\n// send something\ntoPython.write(.....);\n// receive something\nfromPython.read(....);\n</code></pre>\n\n<p><strong>Important: chars are NOT bytes</strong></p>\n\n<p>A lot of people understimate this.</p>\n\n<p>Be careful with char to byte conversions (remember Writers/Readers are for chars, Input/OutputStreams are for bytes, encoding is necesary for convertir one to another, you can use <code>OuputStreamWriter</code> to convert string to bytes and send, <code>InputStreamReader</code> to convert bytes to chars and read them).</p>\n"},{"answer_id":1984650,"body":"<p>An option is making the python application work as a server, listens for request via sockets (TCP).</p>\n"},{"answer_id":1985463,"body":"<p>Use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/ProcessBuilder.html\" rel=\"nofollow noreferrer\">ProcessBuilder</a> to  execute your <a href=\"https://docs.python.org/3/\" rel=\"nofollow noreferrer\">Python</a> code as a filter:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.InputStreamReader;\n\npublic class PBTest {\n\n    public static void main(String[] args) {\n        ProcessBuilder pb = new ProcessBuilder(\n            &quot;python3&quot;, &quot;-c&quot;, &quot;print(42)&quot;);\n        pb.redirectErrorStream(true);\n        try {\n            Process p = pb.start();\n            String s;\n            BufferedReader stdout = new BufferedReader(\n                new InputStreamReader(p.getInputStream()));\n            while ((s = stdout.readLine()) != null) {\n                System.out.println(s);\n            }\n            System.out.println(&quot;Exit value: &quot; + p.waitFor());\n            p.getInputStream().close();\n            p.getOutputStream().close();\n            p.getErrorStream().close();\n        } catch (Exception ex) {\n            ex.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"}],"last_activity_date":1684710219,"question_id":1984445,"body":"<p>I have a python application which I cant edit its a black box from my point of view. The python application knows how to process text and return processed text.\nI have another application written in Java which knows how to collect non processed texts.</p>\n\n<p>Current state, the python app works in batch mode every x minutes.</p>\n\n<p>I want to make the python </p>\n\n<p>processing part of the process: Java app collects text and request the python app to process and return processed text as part of a flow.</p>\n\n<p>What do you think is the simplest solution for this?</p>\n\n<p>Thanks,\nRod</p>\n"},{"comments":[{"comment_id":134552548,"body":"The <code>outToServer.write(ByteBuffer.allocate(4).putInt(data.length(&zwnj;&#8203;)).array());</code> mess can be replaced with <code>outToServer.writeInt(data.length)</code>. You don&#39;t need to keep a dog and bark yourself. Show the receiving code. And you should not create a new connection per message. Keep using the same one as long as possible: especially if you need a specific sequence. TCP doesn&#39;t lose the data sequence within a single connection, but across multiple connections anything is possible."},{"comment_id":134552591,"body":"@user207421 Thankyou very much for the advice. However the server (A propritory one) it self supports a single client at a time. That is the reason for the client is moddled to disconnect once the required message is sent. The iteration is not part of the actual client code. Anyway I used this code for do simulating the multiple client. Some of the messages not recieved to the server."},{"comment_id":134552645,"body":"Supporting a single client at a time isn&#39;t the same thing as only supporting one message per connection. If you need message sequencing, you <i>must</i> send them all over the same connection. If the server won&#39;t support multiple clients at a time, don&#39;t execute multiple clients at the same time, or let the subsequent ones just wait until the prior one closes its connection. This will happen automatically up to the backlog limit. Are you sure you are implementing the application protocol correctly? TCP doesn&#39;t lose data."},{"comment_id":134558361,"body":"Yes, TCP <i>won&#39;t</i> lose data. Why do you open and close that <code>Socket</code> 1000 times btw?"}],"last_activity_date":1684709688,"question_id":76302245,"body":"<p>I'm using java.net.Socket to communicate with a C++ BE server.\nFollowing is the code.\nI create/send message and disconnect rapidly.</p>\n<pre><code>import java.io.*;\nimport java.net.*;\nimport java.nio.ByteBuffer;\nimport java.util.Date;\n\npublic class TCPClient {\n    public static void main(String[] args) {\n\n        for (int i = 0; i &lt; 1000; i++) {\n\n            String hostname = &quot;172.24.200.208&quot;;\n            int port = 10011;\n\n            try {\n\n                Socket socket = new Socket(hostname, port);\n                System.out.println(&quot;Connected &quot; + i);\n\n                String data = &quot;Hello........................ &quot; + i;\n\n                DataOutputStream outToServer = new DataOutputStream(socket.getOutputStream());\n                outToServer.write(ByteBuffer.allocate(4).putInt(data.length()).array());\n                outToServer.write(data.getBytes());\n\n                System.out.println(&quot;Data Sent &quot; + i);\n\n                socket.close();\n\n                System.out.println(&quot;Disconnected &quot; + i);\n            } catch (IOException e) {\n                System.out.println(\n                        &quot;IOException Exception as the given hostname and port are invalid : &quot;\n                                + e.getMessage());\n            }\n        }\n    }\n}\n</code></pre>\n<p>However noticed some of the messages not recieved to the BE server and some of the connection establishments not get noticed to the BE server.\nI ran wireshark and I noticed the the TCP message are not synced with the above code.\nI can see TCP messages for the second iteration even before completion of the 1st iteration.\nIs that normal? Can't we consider the TCP message flow is inline with the application code?</p>\n<p><a href=\"https://i.stack.imgur.com/hHGQE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hHGQE.png\" alt=\"enter image description here\" /></a></p>\n"},{"last_activity_date":1684709494,"question_id":76302237,"body":"<p>Estoy realizando un programa en JAVA de un punto de venta, En mi clase de Venta se agrego un método para buscar productos y agregarlos para la realización de la venta, pero al momento que se realiza la búsqueda y se agrega, funciona, pero me abre otra pestaña en vez de agregarse a la misma, alguna solución?</p>\n"},{"comments":[{"comment_id":134551279,"body":"Why do you use <code>volumes:  - &#39;mongo_data:&#47;data&#47;db&#39;</code> for kafka-ui? Did you manage to get it running. I&#39;m starting the GUI but it does not see any clusters. I checked port 9092, seems to have something running there."}],"answers":[{"comments":[{"comment_id":118963479,"body":"added the <code>docker-compose.yml</code>; I didn;t get what we mean by advertising listeners correctly"},{"comment_id":118963743,"body":"I get it that I&#39;m missing <code>KAFKA_ADVERTISED_LISTENERS=PLAINTEXT:&#47;&#47;127.0.0.1:19092</code>"},{"comment_id":118964659,"body":"Read the blog :)"}],"answer_id":67303044,"body":"<p>You've not shared your Docker Compose so I can't give you the specific fix to make, but in essence you need to configure your advertised listeners correctly. This is the value that the broker provides to the client telling it where to find it when it makes subsequent connections.</p>\n<p>Details: <a href=\"https://www.confluent.io/blog/kafka-client-cannot-connect-to-broker-on-aws-on-docker-etc/\" rel=\"nofollow noreferrer\">https://www.confluent.io/blog/kafka-client-cannot-connect-to-broker-on-aws-on-docker-etc/</a></p>\n"},{"answer_id":76302199,"body":"<p>I see that you tried to get Kafka-GUI running. I've wasted a lot of time myself trying to get it started. Thanks to the tutorial bellow now I understand properly how to setup a podman bridge network and how to configure advertised listeners in kafka. I'll list all the docker commands I've used to get a local one node setup running. Note: podman or docker, the commands are the same. Both kafka and kafka-ui are in containers. If you read the tutorial carefully you'll see this matters a lot. If you then want to connect from local app to container kafka you'll need extra settings.</p>\n<ul>\n<li><a href=\"https://www.confluent.io/blog/kafka-client-cannot-connect-to-broker-on-aws-on-docker-etc/\" rel=\"nofollow noreferrer\">My Python/Java/Spring/Go/Whatever Client Won’t Connect to My Apache Kafka Cluster in Docker/AWS/My Brother’s Laptop. Please Help!</a> - Contains a deep review of all potential issues when the kafka cluster fails to start. Thanks to this tutorial I managed to get Kafka UI running. The key was to setup a podman network and to properly name all containers. Once the containers are named we can used these names in the connection strings params when starting kafka-gui. Note: most tutorials prefer to name the kafka container <code>broker</code>. I used <code>kafka</code> for extra clarity, do as you please in your case.</li>\n</ul>\n<p><strong>Download Kafka &amp; Zookeeper</strong></p>\n<ul>\n<li><code>podman pull bitnami/kafka</code> - Download kafka</li>\n<li><code>podman pull zookeeper</code> - Download Zookeeper</li>\n</ul>\n<p><strong>Kafka Network</strong></p>\n<ul>\n<li><code>podman network create kafka-bridge</code> - Name it as you please</li>\n</ul>\n<p><strong>Zookeeper Volumes</strong>\nNeeded to persist data. Notice that we are creating volumes for one <code>zookeeper</code> instance. In production we will have more instances.</p>\n<ul>\n<li><code>podman volume create zookeeper-dataDir</code> - <code>/dataDir</code> - Snapshot of the in-memory database, current state of the data tree and the content of ephemeral nodes</li>\n<li><code>podman volume create zookeeper-dataLogDir</code> - <code>/dataLogDir</code> - Sequential record of all changes made to the ZooKeeper data tree since the last snapshot</li>\n<li><code>podman volume create zookeeper-logs</code> - <code>/logs</code> - Server logs, error logs, or diagnostic logs</li>\n</ul>\n<p><strong>Kafka Volume</strong></p>\n<ul>\n<li><code>podman volume create kafka-data</code> - By mounting a Docker volume to Kafka, the data generated and stored by Kafka will persist even if the container is stopped or removed.</li>\n</ul>\n<p><strong>Run Zookeeper</strong>\nNote: we are running zookeeper outside of the any api pods that are defined. We will have more pods all connected to the same kafka server. This one node setup needs to be improved in production to ensure scalability and resilience.</p>\n<pre><code>podman run -dt --name zookeeper \\\n--network=kafka-bridge \\\n-p 2181:2181 \\\n-e ZOOKEEPER_CLIENT_PORT=2181 \\\n-v 'zookeeper-dataDir:/data:Z' \\\n-v 'zookeeper-dataLogDir:/datalog:Z' \\\n-v 'zookeeper-logs:/logs:Z' \\\ndocker.io/library/zookeeper\n</code></pre>\n<p><strong>Run Kafka</strong>\nNote: we are running zookeeper outside of the mock-api-pod.\nWarning! <code>ALLOW_PLAINTEXT_LISTENER=yes</code> is for development env, not production.</p>\n<pre><code>podman run -dt --name kafka \\\n--network=kafka-bridge \\\n-p 7203:7203 \\\n-p 9092:9092 \\\n-v kafka-data:/kafka/data \\\n-e KAFKA_BROKER_ID=1 \\\n-e ALLOW_PLAINTEXT_LISTENER=yes \\\n-e KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181 \\\n-e KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://kafka:9092 \\\n-e KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1 \\\ndocker.io/bitnami/kafka\n</code></pre>\n<p><strong>Create Topic</strong>\nThis instruction can be defined in docker-compose or k8 yaml as an init instruction. For now (May 2023) we will manually configure it. <a href=\"https://stackoverflow.com/questions/64865361/docker-compose-create-kafka-topics\">Docker compose create kafka topics</a>.</p>\n<ul>\n<li><code>podman exec -it kafka sh</code> - Connect to kafka container</li>\n<li><code>cd /opt/bitnami/kafka/bin</code>- Cd to bins of kafka</li>\n<li><code>kafka-topics.sh --create --bootstrap-server localhost:9092 --replication-factor 1 --partitions 1 --topic api-mock</code> - Create a new topic</li>\n<li><code>kafka-configs.sh --bootstrap-server localhost:9092 --entity-type brokers --entity-name 1 --describe </code> - If you want to double check on the settings. Optional, no need to run this unless you are debugging</li>\n</ul>\n<p><strong>Kafka GUI</strong>\nWarning, starting kafka ui with this command does not create a password. In prod this needs to be auth.</p>\n<ul>\n<li><code>podman pull provectuslabs/kafka-ui</code> - Get the image</li>\n<li>Start kafka UI on port 9090 to avoid collisions with anything running on 8080.</li>\n</ul>\n<pre><code>podman run -it --name kafka-ui \\\n--network=kafka-bridge \\\n-p 9090:8080 \\\n-e KAFKA_CLUSTERS_0_NAME=local \\\n-e KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS=kafka:9092 \\\n-e KAFKA_CLUSTERS_0_ZOOKEEPER=zookeeper:2181 \\\n-e KAFKA_BROKERCONNECT=kafka:9092 \\\n-e DYNAMIC_CONFIG_ENABLED=true \\\nprovectuslabs/kafka-ui\n</code></pre>\n<ul>\n<li><code>http://localhost:9090/</code> - Visit the link to use the web gui for kafka</li>\n</ul>\n<p><strong>Connecting to Kafka container CLI</strong></p>\n<ul>\n<li><code>podman exec -it kafka sh</code> - Connect to kafka container</li>\n<li><code>cd /opt/bitnami/kafka/bin</code>- Cd to bins of kafka</li>\n<li><code>kafka-topics.sh --bootstrap-server=localhost:9092 --list</code> - List all topics</li>\n</ul>\n<p><strong>Inspecting Kafka via local CLI</strong></p>\n<ul>\n<li><code>brew install kcat</code> - First install kafkacat (renamed to kcat)</li>\n<li><code>kcat -b localhost:9092 -L</code> - List the available topics in the Kafka cluster</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/jF0m1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jF0m1.png\" alt=\"enter image description here\" /></a></p>\n"}],"last_activity_date":1684708610,"question_id":67302258,"body":"<p>I have configured following Kafka properties for my spring boot based library bundled inside a <code>lib</code> directory of an <code>EAR</code> deployed to <code>Wildfly</code>. I am able to start the spring components successfully by loading the porperty file from classpath (<code>WEB-INF/classes</code>)</p>\n<pre><code>spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration,org.springframework.boot.autoconfigure.jms.artemis.ArtemisAutoConfiguration,\\\norg.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration\nspring.kafka.admin.client-id=iris-admin-local\nspring.kafka.producer.client-id=iris-producer-local\nspring.kafka.producer.retries=3\nspring.kafka.producer.properties.max.block.ms=2000\nspring.kafka.producer.bootstrap-servers=127.0.0.1:19092\nspring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer\nspring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer\nfoo.app.kafka.executor.core-pool-size=10\nfoo.app.kafka.executor.max-pool-size=500\nfoo.app.kafka.executor.queue-capacity=1000\n</code></pre>\n<p>I run Kafka and zookeeper via docker compose, and the containers are mapped to host ports <code>12181</code> and <code>19092</code> respectively. The publish fails with the error</p>\n<pre><code>19:37:42,914 ERROR [org.springframework.kafka.support.LoggingProducerListener] (swiftalker-3) Exception thrown when sending a message with key='543507' and payload='com.foo.app.kanban.defect.entity.KanbanDefect@84b13' to topic alm_swift-alm:: org.apache.kafka.common.errors.TimeoutException: Topic alm_swift-alm not present in metadata after 2000 ms.\n\n19:37:43,124 WARN  [org.apache.kafka.clients.NetworkClient] (kafka-producer-network-thread | iris-producer-local-1) [Producer clientId=iris-producer-local-1] Error connecting to node 6be446692a1f:9092 (id: 1001 rack: null): java.net.UnknownHostException: 6be446692a1f\n    at java.net.InetAddress.getAllByName0(InetAddress.java:1281)\n    at java.net.InetAddress.getAllByName(InetAddress.java:1193)\n    at java.net.InetAddress.getAllByName(InetAddress.java:1127)\n    at org.apache.kafka.clients.ClientUtils.resolve(ClientUtils.java:110)\n    at org.apache.kafka.clients.ClusterConnectionStates$NodeConnectionState.currentAddress(ClusterConnectionStates.java:403)\n    at org.apache.kafka.clients.ClusterConnectionStates$NodeConnectionState.access$200(ClusterConnectionStates.java:363)\n    at org.apache.kafka.clients.ClusterConnectionStates.currentAddress(ClusterConnectionStates.java:151)\n    at org.apache.kafka.clients.NetworkClient.initiateConnect(NetworkClient.java:955)\n    at org.apache.kafka.clients.NetworkClient.access$600(NetworkClient.java:73)\n    at org.apache.kafka.clients.NetworkClient$DefaultMetadataUpdater.maybeUpdate(NetworkClient.java:1128)\n    at org.apache.kafka.clients.NetworkClient$DefaultMetadataUpdater.maybeUpdate(NetworkClient.java:1016)\n    at org.apache.kafka.clients.NetworkClient.poll(NetworkClient.java:547)\n    at org.apache.kafka.clients.producer.internals.Sender.runOnce(Sender.java:324)\n    at org.apache.kafka.clients.producer.internals.Sender.run(Sender.java:239)\n    at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n<p>Now this is after having provided <code>spring.kafka.producer.bootstrap-servers=127.0.0.1:19092</code> property. What's interesting though is</p>\n<pre><code>CONTAINER ID   NAMES                PORTS                                                                          CREATED          STATUS\n2133c81ed51d   mongo                0.0.0.0:23556-&gt;27017/tcp, 0.0.0.0:23557-&gt;27018/tcp, 0.0.0.0:23558-&gt;27019/tcp   29 minutes ago   Up 29 minutes\nf18b86d8739e   kafka-ui             0.0.0.0:18080-&gt;8080/tcp                                                        29 minutes ago   Up 29 minutes\n6be446692a1f   kafka                0.0.0.0:19092-&gt;9092/tcp                                                        29 minutes ago   Up 29 minutes\n873304e1e6a0   zookeeper            2181/tcp, 2888/tcp, 3888/tcp, 8080/tcp                                         29 minutes ago   Up 29 minutes\n</code></pre>\n<p>the Wildfly server error logs show the app is actually connecting to the docker container via it's container ID i.e.</p>\n<pre><code>6be446692a1f   kafka                0.0.0.0:19092-&gt;9092/tcp\n</code></pre>\n<p>from the <code>docker ps -a</code> output and</p>\n<pre><code>Error connecting to node 6be446692a1f:9092 (id: 1001 rack: null): java.net.UnknownHostException: 6be446692a1f\n</code></pre>\n<p>I'm confused as to how is the spring boot code, despite the config property referring server over localhost and mapped port <code>19092</code>, is managing to find a docker container on it's ID and default port and then trying to connect to it? How do I fix this?</p>\n<p>Update: The docker compose</p>\n<pre><code>version: '3'\n\nnetworks:\n  app-tier:\n    driver: bridge\n\nservices:\n  zookeeper:\n    image: 'docker.io/bitnami/zookeeper:3-debian-10'\n    container_name: 'zookeeper'\n    networks:\n      - app-tier\n    volumes:\n      - 'zookeeper_data:/bitnami'\n    environment:\n      - ALLOW_ANONYMOUS_LOGIN=yes\n  kafka:\n    image: 'docker.io/bitnami/kafka:2-debian-10'\n    container_name: 'kafka'\n    ports:\n      - 19092:9092\n    networks:\n      - app-tier\n    volumes:\n      - 'kafka_data:/bitnami'\n      - /var/run/docker.sock:/var/run/docker.sock\n    environment:\n      - KAFKA_CFG_ZOOKEEPER_CONNECT=zookeeper:2181\n      - ALLOW_PLAINTEXT_LISTENER=yes\n    depends_on:\n      - zookeeper\n  database:\n    image: 'mongo'\n    container_name: 'mongo'\n    environment:\n      - MONGO_INITDB_DATABASE='swiftalk_db'\n    networks:\n      - app-tier\n    ports:\n      - 23556-23558:27017-27019\n    depends_on:\n      - kafka\n  kafka-ui:\n    container_name: kafka-ui\n    image: provectuslabs/kafka-ui:latest\n    ports:\n      - 18080:8080\n    networks:\n      - app-tier\n    volumes: \n      - 'mongo_data:/data/db'\n    depends_on:\n      - kafka\n    environment:\n      - KAFKA_CLUSTERS_0_NAME=local\n      - KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS=kafka:9092\n      - KAFKA_CLUSTERS_0_ZOOKEEPER=zookeeper:2181\n\nvolumes:\n  zookeeper_data:\n    driver: local\n  kafka_data:\n    driver: local\n  mongo_data:\n    driver: local\n</code></pre>\n"},{"answers":[{"comments":[{"comment_id":134552663,"body":"Oh, I didn&#39;t know about it. I changed my <code>setName()</code> to private <code>computeName()</code> and I&#39;m calling it from the <code>setDateOfBirth()</code> method. I also found the <a href=\"https://openjpa.apache.org/builds/1.2.3/apache-openjpa/docs/jpa_overview_pc_callbacks.html\" rel=\"nofollow noreferrer\">PostLoad</a> annotation in the docs you linked, which I&#39;m also using on my <code>computeAge()</code> method, so it gets called every time an entity is instantiated. Thank you for the fast response :)"}],"answer_id":76302120,"body":"<p>JPA does not use your constructor. JPA specification requires no-arg constructor. You JPA implementation can create one for you if you don't provide one no-arg constructor (For example openjpa does it, see <a href=\"https://openjpa.apache.org/builds/1.2.3/apache-openjpa/docs/jpa_overview_pc.html#jpa_overview_pc_no_arg\" rel=\"nofollow noreferrer\">https://openjpa.apache.org/builds/1.2.3/apache-openjpa/docs/jpa_overview_pc.html#jpa_overview_pc_no_arg</a>).</p>\n<p>That's why your code works when you change the getter to compute the age value.</p>\n<p>If you don't want to recompute the age every time the getter is called you can :</p>\n<ul>\n<li>compute the age when the birth date is set, in the setDateOfBirth() method.</li>\n<li>lazily compute and store the age in the getAge() method. Something like :</li>\n</ul>\n<pre><code>\n    public Integer getAge() {\n      if (age == null &amp;&amp; dateOfBirth != null) {\n        age = Period.between(dateOfBirth, LocalDate.now()).getYears();\n       }\n       return age;\n    }\n\n</code></pre>\n"}],"last_activity_date":1684707454,"question_id":76302053,"body":"<p>I have a Student class that has some fields, including &quot;age&quot; and &quot;dateOfBirth&quot;. The age value is calculated and attributed inside the constructor, based on the dateOfBirth, as following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//Student.java\n\nprivate Integer id;\nprivate String name;\nprivate String email;\nprivate LocalDate dateOfBirth;\n@Transient\nprivate Integer age;\n\npublic Student(String name, String email, LocalDate dateOfBirth) {\n    this.name = name; // ex: &quot;John Doe&quot;\n    this.email = email; // ex: &quot;johndoe@gmail.com&quot;\n    this.dateOfBirth = dateOfBirth; // ex: LocalDate.of(2002, Month.MAY, 1));\n    this.age = Period.between(dateOfBirth, LocalDate.now()).getYears(); // result: 21\n}\n</code></pre>\n<p>The <code>getAge()</code> method inside the Student class returns the age field value</p>\n<pre class=\"lang-java prettyprint-override\"><code>//Student.java\n\npublic Integer getAge() {\n    return age; // Returns the expected value (21)\n}\n</code></pre>\n<p><em>(getters for every other field have the same structure as the <code>getAge()</code>: they return the field's value)</em></p>\n<p>I also have a simple Repository, to query data from DB. It extends from the <code>JpaRepository</code> and has nothing inside it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//StudentRepository.java\n\n@Repository\npublic interface StudentRepository extends JpaRepository&lt;Student, Integer&gt; { }\n</code></pre>\n<p>Inside the StudentController class, I have a route to <code>&quot;/&quot;</code>, which simply gets all the students from DB and return them:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//StudentController.java\n\n@GetMapping(&quot;/&quot;)\npublic List&lt;Student&gt; getStudents() {\n     return studentService.getStudents();\n}\n</code></pre>\n<p>The result I was expecting is the following, with the age field's value being 21:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[{&quot;id&quot;:1,&quot;name&quot;:&quot;John Doe&quot;,&quot;email&quot;:&quot;johndoe@gmail.com&quot;,&quot;dateOfBirth&quot;:&quot;2002-05-01&quot;,&quot;age&quot;:21}]\n</code></pre>\n<p>Instead, I got a <code>null</code> value for the age field:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[{&quot;id&quot;:1,&quot;name&quot;:&quot;John Doe&quot;,&quot;email&quot;:&quot;johndoe@gmail.com&quot;,&quot;dateOfBirth&quot;:&quot;2002-05-01&quot;,&quot;age&quot;:null}]\n</code></pre>\n<p>But if I change the <code>getAge()</code> method implementation of the Student class to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Student.java\n\n public Integer getAge() {\n    return Period.between(dateOfBirth, LocalDate.now()).getYears();\n}\n</code></pre>\n<p>I get the <code>21</code> as expected, not <code>null</code>.</p>\n<pre class=\"lang-json prettyprint-override\"><code>[{&quot;id&quot;:1,&quot;name&quot;:&quot;John Doe&quot;,&quot;email&quot;:&quot;johndoe@gmail.com&quot;,&quot;dateOfBirth&quot;:&quot;2002-05-01&quot;,&quot;age&quot;:21}]\n</code></pre>\n"},{"last_activity_date":1684707376,"question_id":76302145,"body":"<p>Hi Java Community I need help to start my study but couldn't find any good conditions for the survey You can help me find a study program for java qa</p>\n<p>I try finde a good course but cant and i need a good plan for stady if someone has and can help me its will be the great</p>\n"},{"comments":[{"comment_id":134513023,"body":"could you post the code that about your use case"},{"comment_id":134531449,"body":"@similieis2333 which code? I mean code about what? I thought my example was code"}],"answers":[{"comments":[{"comment_id":134563463,"body":"&#39;I suggest that you accept the permanent addition of entityType in the superclass&#39; - The problem is that the json is returned by an external API and I cannot modify it."},{"comment_id":134567094,"body":"OK, so how can you/the machine distinguish a <code>Employee</code> from a <code>Contractor</code>?  Can provide some specimen JSON for both?  There is another way..."},{"comment_id":134567141,"body":"OR to you always know at the point you invoke the deserialization what the content is: Employee or Contractor?"},{"comment_id":134575775,"body":"Yes I do know at the point of de-serialization what content it is, because the generic class gets the class type of the expected json as well. I can remove entityType, but then the openAPI doesn&#39;t generate the class hierarchy without the discriminator. I guess I can keep the BaseClass outside the OpenAPI somehow."}],"answer_id":76302143,"body":"<blockquote>\n<p>How would this deserializing work if I know that I'm de-serializing Employee.class, but the Json for employees that I receive does not have the entityType as a property at all?</p>\n</blockquote>\n<p>If <em>you</em> know that the JSON represents an <code>Employee</code> and not a <code>Contractor</code> (e.g. based on the source) then you can invoke the mapper passing the <code>Employee</code> class.  But if you are using this in a general case where you want the deserialization to return either <code>Employee</code> or <code>Contractor</code> then there needs to be a <em>discriminator</em> so the deserializer can choose the correct concrete class itself.  (Consider the case where two subclasses have identical fields, but nevertheless are being modelled as different classes - there would be no way for the serializer to guess which class it should instantiate.)</p>\n<p>(1) I suggest that you accept the permanent addition of <code>entityType</code> in the superclass - and in particular you should serialize it so that the JSON then carries the type info.  And (2) you should remove the <code>@JsonIgnoreProperties...</code> so that the type info <em>is</em> available to the deserializer.</p>\n<p>To enforce the correct type automatically here's what you can do: (3) <code>BaseClass</code> should require <code>entityType</code> in its constructor and you can code the correct type in <code>Employee</code> and <code>Contractor</code> constructors so they pass the type to <code>BaseClass</code>.</p>\n<p>As you are now managing the <code>entityType</code> yourself, I think (4) the <code>@JsonTypeInfo</code> should be:</p>\n<pre><code>@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.EXISTING_PROPERTY, property = &quot;entityType&quot;, visible = true)\n                                                                    ^^^^^^^^^\n</code></pre>\n<p>This approach is compatible with JPA.  I am using Jackson, Spring Data and Mongo as my backing store.  In the case of Mongo, Spring adds a <code>_class</code> field as its own different way to handle the de/serialisation.  The <code>_class</code> field occurs in the database but is not in the java object.  So this approach is using two parallel methods of type management and they do not collide; in fact this allows finer-grain control should you need slightly different external (JSON) models compared to the backing store.</p>\n"}],"last_activity_date":1684707332,"question_id":76220447,"body":"<p>I think this can be better explained with an example(code is below). Suppose I have BaseClass and some sub-classes like Employee, Contractor etc. I do not want a database table for BaseClass(Hence using @MappedSuperClass).\nBaseClass has some common fields, but entityType is not a valid database field in any subclass like Employee, Contrator (Hence I denoted it as @Transient).\nNow I get back a json that has all the Employee values, it does not have endDate value that is in the BaseClass. I want to set the BaseClass's common fields like endDate in the Employee class and save it to the Employee table.</p>\n<p>When retrieving I want to retrieve all Employees that have an endDate as some value. This should be possible because I did save the endDate when saving my Employee records.</p>\n<p>Additional Info: I'm having trouble getting this to work. I'm using openAPI and I understood that I need this discriminator column to have a super class-sub class relationship generated - <a href=\"https://stackoverflow.com/questions/76105116/inheritance-from-empty-abstract-class-using-openapi-3-0/76105322?noredirect=1#comment134400499_76105322\">Inheritance from empty abstract class using openapi 3.0</a>.</p>\n<pre><code>      @JsonIgnoreProperties(\n  value = &quot;entityType&quot;, // ignore manually set entityType, it will be automatically generated by Jackson during serialization\n  allowSetters = true // allows the entityType to be set during deserialization\n)\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = &quot;entityType&quot;, visible = true)\n@JsonSubTypes({\n  @JsonSubTypes.Type(value = Employee.class, name = &quot;Employee&quot;)\n   @JsonSubTypes.Type(value = Contractor.class, name = &quot;Contractor&quot;)\n}) \n  @jakarta.persistence.MappedSuperclass\n  public abstract BaseClass{\n   //common to all sub-classes\n   LocalDate endDate;\n\n   /**\n    Gets or Sets entityType\n   */\n   public enum EntityTypeEnum {\n    Employee(&quot;Employee&quot;);\n    Contractor(&quot;Contractor&quot;);\n\n    private String value;\n\n    EntityTypeEnum(String value) {\n      this.value = value;\n    }\n\n    @JsonValue\n    public String getValue() {\n      return value;\n    }\n\n    @Override\n    public String toString() {\n      return String.valueOf(value);\n    }\n\n    @JsonCreator\n    public static EntityTypeEnum fromValue(String value) {\n      for (EntityTypeEnum b : EntityTypeEnum.values()) {\n        if (b.value.equals(value)) {\n          return b;\n        }\n      }\n      throw new IllegalArgumentException(&quot;Unexpected value '&quot; + value + &quot;'&quot;);\n    }\n  }\n\n     @JsonProperty(&quot;entityType&quot;)\n     @jakarta.persistence.Transient\n     private EntityTypeEnum entityType;\n\n    }\n\n    public Employee extends BaseClass {...}\n\n    public Contractor extends BaseClass{...}\n</code></pre>\n<p>How would this deserializing work if I know that I'm de-serializing Employee.class, but the Json for employees that I receive does not have the entityType as a property at all? Currently I get 'missing type id property 'entityType''\nI want to de-serialize a json of Employees to List class. The Json does not have entityType or any superclass(i.e. BaseClass from the above example) fields.</p>\n<p>So to summarize, I want Jackson and JPA to play nicely with each other.</p>\n<ol>\n<li>I want to Jackson to correctly read a json, where the json has only the Employee related values(no superclass values yet) (At runtime I will know that I have Employee.class).</li>\n<li>I want to save this to the Employees table after setting my own values like endDate(which are in the BaseClass).</li>\n<li>I want to retrive this later, from the Employees table, knowing taht I have the endDate and Employee.class value at runtime.</li>\n</ol>\n<p>Hope this makes sense. If not let me rephrase my questions:\nOpenAPI requires me to use the discriminator, in this case we call it entityType, for the inheritance to work when the classes are generated. But when I do that, Jackson complains that it cannot find the property id entityType when serializing a json. The json obviously does not have a field called entityType because we created this field.\nI tired variaous apporached including using :\n1.</p>\n<pre><code> objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n</code></pre>\n<ol start=\"2\">\n<li></li>\n</ol>\n<pre><code>objectMapper.enable(DeserializationFeature.READ_UNKNOWN_ENUM_VALUES_USING_DEFAULT_VALUE);\n</code></pre>\n<ol start=\"3\">\n<li></li>\n</ol>\n<p>Adding the following to the top of the BaseClass:</p>\n<pre><code>@JsonIgnoreProperties(\n  value = &quot;entityType&quot;, // ignore manually set entityType, it will be automatically generated by Jackson during serialization\n  allowSetters = true // allows the entityType to be set during deserialization\n)\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = &quot;entityType&quot;)\n</code></pre>\n<p>and I still get this error com.fasterxml.jackson.databind.exc.InvalidTypeIdException: Could not resolve subtype of [simple type, class Employee]: missing type id property 'entityType'</p>\n"},{"last_activity_date":1684707268,"question_id":76302141,"body":"<p>I have a local instance of graphhopper running on the back-end using java spring boot.\nthis is the code:</p>\n<pre><code>package com.example.greenpathsbe.Services;\n\nimport com.graphhopper.GraphHopper;\nimport com.graphhopper.GraphHopperConfig;\nimport com.graphhopper.ResponsePath;\nimport com.graphhopper.reader.osm.GraphHopperOSM;\nimport com.graphhopper.config.Profile;\nimport com.graphhopper.util.Instruction;\nimport com.graphhopper.util.PointList;\nimport com.graphhopper.util.shapes.GHPoint;\nimport org.apache.commons.csv.CSVFormat;\nimport org.apache.commons.csv.CSVRecord;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.stereotype.Service;\n\nimport javax.annotation.PostConstruct;\nimport java.io.*;\nimport java.util.*;\n\n@Service\npublic class GraphHopperService {\n\n    @Value(&quot;${graphhopper.data.path}&quot;)\n    private String dataPath;\n\n    @Value(&quot;${graphhopper.data.pathToCsv}&quot;)\n    private String path;\n    private String graphFolder = &quot;./graphFolder&quot;;\n\n    private List&lt;Profile&gt; profiles;\n    private GraphHopper graphHopper;\n\n\n\n    @PostConstruct\n    public void init() {\n        Profile profile = new Profile(&quot;my_profile&quot;)\n                .setVehicle(&quot;foot&quot;)\n                \n                .setWeighting(&quot;shortest&quot;);\n        profile.getHints().put(&quot;instructions&quot;, &quot;true&quot;);\n        profiles = new ArrayList&lt;&gt;();\n        profiles.add(profile);\n        graphHopper = new GraphHopperOSM();\n        graphHopper.setOSMFile(dataPath + &quot;eindhoven.osm.pbf&quot;);\n        graphHopper.init(new GraphHopperConfig().setProfiles(profiles));\n        graphHopper.setGraphHopperLocation(graphFolder);\n        graphHopper.getCHPreparationHandler();\n        graphHopper.importOrLoad();\n    }\n\n    public GraphHopper getGraphHopper() {\n        return graphHopper;\n    }\n    public List&lt;CustomPath&gt; createCustomPaths(List&lt;ResponsePath&gt; responsePaths) {\n        List&lt;CustomPath&gt; customPaths = new ArrayList&lt;&gt;();\n        for (ResponsePath responsePath : responsePaths) {\n            CustomPath customPath = new CustomPath();\n            List&lt;Coordinate&gt; coordinates = new ArrayList&lt;&gt;();\n            for (GHPoint point : responsePath.getPoints()) {\n                Coordinate coordinate = new Coordinate();\n                coordinate.setLatitude(point.getLat());\n                coordinate.setLongitude(point.getLon());\n                coordinates.add(coordinate);\n            }\n            customPath.setNodes(coordinates.size());\n            customPath.setCoordinates(coordinates);\n            List&lt;PathSegment&gt; pathSegments = new ArrayList&lt;&gt;();\n            for (Instruction instruction : responsePath.getInstructions()) {\n                PathSegment pathSegment = new PathSegment();\n                pathSegment.setId(instruction.getSign());\n                pathSegment.setName(instruction.getName());\n                pathSegment.setDistance(instruction.getDistance());\n                pathSegment.setTime(instruction.getTime());\n                pathSegments.add(pathSegment);\n            }\n            customPath.setPathSegments(pathSegments);\n            customPaths.add(customPath);\n        }\n        return customPaths;\n    }\n    public CustomPath createCustomPath(ResponsePath responsePath) {\n        CustomPath customPath = new CustomPath();\n        List&lt;Coordinate&gt; coordinates = new ArrayList&lt;&gt;();\n        for (GHPoint point : responsePath.getPoints()) {\n            Coordinate coordinate = new Coordinate();\n            coordinate.setLatitude(point.getLat());\n            coordinate.setLongitude(point.getLon());\n            coordinates.add(coordinate);\n        }\n        customPath.setNodes(coordinates.size());\n        customPath.setCoordinates(coordinates);\n        List&lt;PathSegment&gt; pathSegments = new ArrayList&lt;&gt;();\n        for (Instruction instruction : responsePath.getInstructions()) {\n            PathSegment pathSegment = new PathSegment();\n            pathSegment.setId(instruction.getSign());\n            pathSegment.setName(instruction.getName());\n            pathSegment.setDistance(instruction.getDistance());\n            pathSegment.setTime(instruction.getTime());\n            pathSegments.add(pathSegment);\n        }\n        customPath.setPathSegments(pathSegments);\n        return customPath;\n    }\n}\n\n\n</code></pre>\n<p>This is the controller which I call in the front-end:</p>\n<pre><code>package com.example.greenpathsbe.controller;\n\nimport com.example.greenpathsbe.Services.CustomPath;\nimport com.example.greenpathsbe.Services.ExtendedResponsePath;\nimport com.example.greenpathsbe.Services.GraphHopperService;\nimport com.graphhopper.GHRequest;\nimport com.graphhopper.GHResponse;\nimport com.graphhopper.ResponsePath;\nimport com.graphhopper.util.Parameters;\nimport lombok.AllArgsConstructor;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.converter.HttpMessageNotWritableException;\nimport org.springframework.web.bind.annotation.*;\nimport com.graphhopper.routing.Path;\n\nimport java.lang.reflect.Parameter;\nimport java.util.List;\n\n@RestController\n@RequestMapping(&quot;/routes&quot;)\n@AllArgsConstructor\n@CrossOrigin(origins = &quot;http://localhost:3000/&quot;)\npublic class RouteController {\n    @Autowired\n    private GraphHopperService graphHopperService;\n\n    @GetMapping\n    public List&lt;CustomPath&gt; getRoute(\n            @RequestParam(&quot;fromLat&quot;) double fromLat,\n            @RequestParam(&quot;fromLng&quot;) double fromLng,\n            @RequestParam(&quot;toLat&quot;) double toLat,\n            @RequestParam(&quot;toLng&quot;) double toLng) {\n\n            System.out.println(&quot;fromLat: &quot; + fromLat);\n            System.out.println(&quot;fromLng: &quot; + fromLng);\n            System.out.println(&quot;toLat: &quot; + toLat);\n            System.out.println(&quot;toLng: &quot; + toLng);\n            GHRequest request = new GHRequest(fromLat, fromLng, toLat, toLng).setProfile(&quot;my_profile&quot;).setAlgorithm(Parameters.Algorithms.ALT_ROUTE);\n            request.getHints().put(&quot;instructions&quot;, &quot;true&quot;);  // Might be useless\n            GHResponse response = graphHopperService.getGraphHopper().route(request);\n            List&lt;ResponsePath&gt; responsePaths = response.getAll();\n            System.out.println(&quot;response: &quot; + response);\n\n          //  return graphHopperService.createCustomPath(response.getBest());\n            return graphHopperService.createCustomPaths(responsePaths);\n\n    }\n\n\n}\n</code></pre>\n<p>I am trying to make it so it will return multiple routes between point A and B. Right now I get a maximum of 2 routes which is not sufficient for my needs. Any ideas what can I do?</p>\n"},{"answers":[{"comments":[{"comment_id":134551998,"body":"No problem :) Please have a look at my edited answer, I think there is a better solution than using the ApplicationContext."}],"answer_id":76301927,"body":"<p>Some details that could be important are missing in your question (packages of the classes involved in your problem, for example) but I guess that, for any reason, the ApplicationContext you instantiate in your ProcessFileFactory does not discover the DoctorRepository class.</p>\n<p>I suggest to change your factory this way :</p>\n<pre><code>    @Component\n    public class ProcessFileFactory implements org.springframework.context.ApplicationContextAware {\n\n        private static ApplicationContext applicationContext;\n\n        public static ProcessImportFiles getInstance(String fileType) {\n            if (ImportTypes.DOCTORS.toString().equals(fileType)) {\n                return applicationContext.getBean(&quot;processDoctorFile&quot;, ProcessImportFiles.class);\n            }\n            if (ImportTypes.PATIENTS.toString().equals(fileType)) {\n                return applicationContext.getBean(&quot;processPatientFile&quot;, ProcessImportFiles.class);\n            }\n\n            return null;\n        }\n\n        @Override\n        public void setApplicationContext(ApplicationContext context)\n            throws BeansException {\n            this.applicationContext = context;\n        }\n    }\n</code></pre>\n<p>When you implement ApplicationContextAware interface, you ask Spring to inject into your class the existing application context.</p>\n<p>But, to be honest, there is a solution that, I think, would be cleaner as it would just use Dependency Injection instead of getting beans from the application context.</p>\n<p>Change your <code>ProcessImportFiles</code> this way :</p>\n<pre><code>    public interface ProcessImportFiles {\n\n      String getManagedFileType();\n\n      void processImportFile(String fileName, Sheet sheet);\n\n    }\n</code></pre>\n<p>Implementation example of the interface for <code>ProcessPatientFile</code>:</p>\n<pre><code>@Service\npublic class ProcessPatientFile implements ProcessImportFiles {\n\n    @Override\n    public String getManagedFileType() {\n        return ImportTypes.PATIENTS.toString();\n    }\n\n    @Override\n    public void processImportFile(String fileName, Sheet sheet) {\n\n        System.out.println(&quot;I'm processing a PATIENTS file&quot;);\n\n    }\n}\n</code></pre>\n<p>Then change your <code>ProcessFileFactory</code> class this way :</p>\n<pre><code>    @Component\n    public class ProcessFileFactory {\n\n      private Map&lt;String, ProcessImportFiles&gt; importFileProcessorsByType;\n\n      public ProcessFileFactory(Collection&lt;ProcessImportFiles&gt; importFileProcessors) {\n\n        importFileProcessorsByType = importFileProcessors.stream().collect(Collectors.toMap(\n            ProcessImportFiles::getManagedFileType,\n            processor -&gt; processor\n        ));\n\n      }\n\n      public ProcessImportFiles getInstance(String fileType) {\n        return importFileProcessorsByType.get(fileType);\n      }\n\n    }\n</code></pre>\n<p>Spring will automatically inject all beans implementing your interface into your factory. The internal map of your factory will retrieve the expected implementation according to the fileType.</p>\n<p>By the way, if one day, you need to code new implementations of the <code>ProcessImportFiles</code> interface, your factory will work without any change.</p>\n"},{"answer_id":76302063,"body":"<p>I rewrote your code and struct it again to look more readable, this is how I proceeded:</p>\n<p>First, this is the structure:</p>\n<p><a href=\"https://i.stack.imgur.com/Lb9gs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lb9gs.png\" alt=\"enter image description here\" /></a></p>\n<p>Assuming this is your ProcessDoctorFile service:</p>\n<pre><code>@Service\npublic class ProcessDoctorFileService implements ProcessImportFiles {\n    @Autowired\n    private DoctorRepository doctorRepository;\n\n    @Override\n    public void processImportFile(String fileName, Sheet sheet) {\n        System.out.println(fileName + &quot; &gt; ProcessDoctorFileService&quot;);\n    }\n}\n</code></pre>\n<p>same thing for the patient service:</p>\n<pre><code>@Service\npublic class ProcessPatientFileService implements ProcessImportFiles {\n    @Autowired\n    private PatientRepository doctorRepository;\n\n    @Override\n    public void processImportFile(String fileName, Sheet sheet) {\n        System.out.println(fileName + &quot; &gt; ProcessPatientFileService&quot;);\n    }\n}\n</code></pre>\n<p>Now the factory:</p>\n<pre><code>public class ProcessFileFactory   {\n    public static ProcessImportFiles getInstance(String fileType) {\n        if (ImportTypes.DOCTORS.toString().equals(fileType)) {\n            return ApplicationContextProvider.getApplicationContext().getBean(&quot;processDoctorFileService&quot;, ProcessImportFiles.class);\n        }\n        if (ImportTypes.PATIENTS.toString().equals(fileType)) {\n            return ApplicationContextProvider.getApplicationContext().getBean(&quot;processPatientFileService&quot;, ProcessImportFiles.class);\n        }\n\n        return null;\n    }\n}\n</code></pre>\n<p>To be sure that you don't get a null application context, you should get it in another class and then inject it into your factory, use ApplicationContextAware interface to make spring boot provide the application context for you:</p>\n<pre><code>@Component\npublic class ApplicationContextProvider implements ApplicationContextAware {\n\n    private static ApplicationContext applicationContext;\n\n    @Override\n    public void setApplicationContext(ApplicationContext applicationContext) {\n        ApplicationContextProvider.applicationContext = applicationContext;\n    }\n\n    public static ApplicationContext getApplicationContext() {\n        return applicationContext;\n    }\n}\n</code></pre>\n<p>let's test what we did until now using a CommandLineRunner:</p>\n<pre><code>@SpringBootApplication\npublic class StackoverflowApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(StackoverflowApplication.class, args);\n    }\n\n    @Bean\n    CommandLineRunner commandLineRunner(){\n        return args -&gt; {\n            Sheet sheet = new Sheet();\n            ProcessFileFactory.getInstance(ImportTypes.DOCTORS.name()).processImportFile(&quot;file name for doctors&quot;,sheet);\n            ProcessFileFactory.getInstance(ImportTypes.PATIENTS.name()).processImportFile(&quot;file name for patients&quot;,sheet);\n        };\n    }\n\n}\n</code></pre>\n<p>Result in the console:\n<a href=\"https://i.stack.imgur.com/Vm58Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vm58Y.png\" alt=\"enter image description here\" /></a></p>\n"}],"last_activity_date":1684707227,"question_id":76301832,"body":"<p>I have multiple implementations for a method, so I decided to use Factory design pattern for it. Here is the implementation for factory class:</p>\n<pre><code>@Component\npublic class ProcessFileFactory {\n\n    private static ApplicationContext applicationContext;\n\n    public ProcessFileFactory() {\n        applicationContext = new AnnotationConfigApplicationContext(\n                ProcessDoctorFile.class,\n                ProcessPatientFile.class\n        );\n    }\n\n    public static ProcessImportFiles getInstance(String fileType) {\n        if (ImportTypes.DOCTORS.toString().equals(fileType)) {\n            return applicationContext.getBean(&quot;processDoctorFile&quot;, ProcessImportFiles.class);\n        }\n        if (ImportTypes.PATIENTS.toString().equals(fileType)) {\n            return applicationContext.getBean(&quot;processPatientFile&quot;, ProcessImportFiles.class);\n        }\n\n        return null;\n    }\n}\n</code></pre>\n<p>ProcessImportFiles is the interface where I defined the method which has to be implemented differently. And here is one implementation of the method from the interface:</p>\n<pre><code>@Service\npublic class ProcessDoctorFile implements ProcessImportFiles {\n    @Autowired\n    private DoctorRepository doctorRepository;\n\n    @Override\n    public void processImportFile(String fileName, Sheet sheet) {\n        System.out.println(&quot;doctors&quot;);\n    }\n}\n</code></pre>\n<p>Also, this is how I call the the method in the rest controller:</p>\n<pre><code> ProcessFileFactory.getInstance(fileType).processImportFile(file.getName(), sheet);\n</code></pre>\n<p>But I receive this error:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'processFileFactory' defined in file [C:\\Workspace\\MedicalStatistics\\target\\classes\\app\\one\\MedicalStatistics\\importService\\ProcessFileFactory.class]: Failed to instantiate [app.one.MedicalStatistics.importService.ProcessFileFactory]: Constructor threw exception\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1306) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1198) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:917) ~[spring-context-6.0.6.jar:6.0.6]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[spring-context-6.0.6.jar:6.0.6]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.0.4.jar:3.0.4]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:732) ~[spring-boot-3.0.4.jar:3.0.4]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434) ~[spring-boot-3.0.4.jar:3.0.4]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:310) ~[spring-boot-3.0.4.jar:3.0.4]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1304) ~[spring-boot-3.0.4.jar:3.0.4]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1293) ~[spring-boot-3.0.4.jar:3.0.4]\n    at app.one.MedicalStatistics.MedicalStatisticsApplication.main(MedicalStatisticsApplication.java:16) ~[classes/:na]\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [app.one.MedicalStatistics.importService.ProcessFileFactory]: Constructor threw exception\n    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:223) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1300) ~[spring-beans-6.0.6.jar:6.0.6]\n    ... 17 common frames omitted\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'processDoctorFile': Unsatisfied dependency expressed through field 'doctorRepository': No qualifying bean of type 'app.one.MedicalStatistics.repository.DoctorRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:712) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:692) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:481) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1408) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:917) ~[spring-context-6.0.6.jar:6.0.6]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[spring-context-6.0.6.jar:6.0.6]\n    at org.springframework.context.annotation.AnnotationConfigApplicationContext.&lt;init&gt;(AnnotationConfigApplicationContext.java:93) ~[spring-context-6.0.6.jar:6.0.6]\n    at app.one.MedicalStatistics.importService.ProcessFileFactory.&lt;init&gt;(ProcessFileFactory.java:24) ~[classes/:na]\n    at java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:67) ~[na:na]\n    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500) ~[na:na]\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:484) ~[na:na]\n    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197) ~[spring-beans-6.0.6.jar:6.0.6]\n    ... 19 common frames omitted\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'app.one.MedicalStatistics.repository.DoctorRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1812) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1371) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325) ~[spring-beans-6.0.6.jar:6.0.6]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:709) ~[spring-beans-6.0.6.jar:6.0.6]\n    ... 38 common frames omitted\n</code></pre>\n<p>If I comment the declaration for DoctorRepository the application starts and design pattern works as expected. The problem appeared when I defined a repo in my service for updating data in DB. I tried to create a constructor to initialize the repository, also multiple annotations, but nothing works. Any idea how to fix it?</p>\n"},{"answers":[{"answer_id":16810174,"body":"<p>you can only use java:comp/env if you have declared a reference to the Object Pool in your web.xml under the resource-ref section. </p>\n\n<p>See <a href=\"https://stackoverflow.com/questions/2887967/what-is-resource-ref-in-web-xml-used-for\">What is resource-ref in web.xml used for?</a> for further explanation.</p>\n"}],"last_activity_date":1684706931,"question_id":16645851,"body":"<p>I have a web application trying to access a JNDI declared in WebSphere Application Server.\nThe JNDI is declared under <code>Object pool managers</code>. However, I'm receiving an error when I access the pool. The error says that <code>comp/env/pool is not found in context \"java:\"</code>.</p>\n\n<p>My code is written as follows:</p>\n\n<pre><code>InitialContext initialContext = new InitialContext();\nObjectPoolManager opm = (ObjectPoolManager)initialContext.lookup(\"java:comp/env/pool\");\n</code></pre>\n\n<p>Accessing the pool via the code below works:</p>\n\n<pre><code>ObjectPoolManager opm = (ObjectPoolManager)initialContext.lookup(\"pool\");\n</code></pre>\n\n<p>I'm confused because according to what I've found on the internet, <code>java:comp/env/</code> is a default prefix for JNDI. So why does it cause an error in my case?</p>\n\n<p>Thank you!</p>\n"},{"comments":[{"comment_id":122886306,"body":"Can you <code>ping</code> host <code>vault.example.com</code> port 443 from that client host?"},{"comment_id":122886555,"body":"@user207421 ping has nothing to do with tcp port 443. telnet &amp; curl works ok :) As I&#39;ve mentioned vault works ok &amp; most part of request from same pod go through without any problems at all so it&#39;s not a firewall issue or smth like that otherwise it wouldn&#39;t work at all."}],"answers":[{"comments":[{"comment_id":134566178,"body":"As you can see in my question had a 3 node HA cluster, not in dev mode. Unfortunately I don&#39;t know if the issue was resolved."}],"answer_id":76302068,"body":"<p>I ran into a similar (maybe even identical issue) of intermittent timeouts on requests to my vault server container irrespective of route (ingress, service, directly to pod).</p>\n<p>I believe in truth my issue was running Vault in dev mode, HA (high availability) mode saw the issue subside:</p>\n<p><a href=\"https://support.hashicorp.com/hc/en-us/articles/4406662733587-HCP-Vault-Development-tier-intermittent-request-timeout-IO-errors\" rel=\"nofollow noreferrer\">https://support.hashicorp.com/hc/en-us/articles/4406662733587-HCP-Vault-Development-tier-intermittent-request-timeout-IO-errors</a></p>\n<p>But I would love to know if you have found a more creative solution as it feels terribly wasteful running such a heavy instance of vault for each development bundle when it is pretty much entirely used for app startup in my organisation.</p>\n"}],"last_activity_date":1684706056,"question_id":69523940,"body":"<p>I have a 3 node HA Hashicorp Vault deployed to GKE (tried both with Raft &amp; Consul backends).</p>\n<p>A pod with java app is also running in GKE.</p>\n<p>Intermittently I see <code>java.net.SocketTimeoutException: connect timed out</code> but mostly it works ok.</p>\n<p>I've checked the Vault config, no resource quotas are configured, I've tried using just internal service instead of ingress + google lb &amp; it's still the same.</p>\n<p>Full log entry looks like this:</p>\n<pre><code>message:Failed executing getCredentials using address https://vault.example.com:443, open timeout 30, read timeout 30 and credentials Credentials(id=0, tenantId=1, vendorName=fortinet, values={}) @timestamp:Oct 11, 2021 @ 12:02:29.386 @version:1 logger_name:com.example.secret.service.impl.SecretStoreServiceImpl thread_name:http-nio-8080-exec-24 level:ERROR level_value:40,000 stack_trace:com.bettercloud.vault.VaultException: com.bettercloud.vault.rest.RestException: java.net.SocketTimeoutException: connect timed out at com.bettercloud.vault.api.Logical.read(Logical.java:118) at com.bettercloud.vault.api.Logical.read(Logical.java:74) at com.example.secret.service.impl.SecretStoreServiceImpl.getCredentials(SecretStoreServiceImpl.java:49) at com.example.secret.service.impl.SecretStoreServiceImpl.getCredentials(SecretStoreServiceImpl.java:77) at com.example.secret.controller.SecretStoreController.getCredentials(SecretStoreController.java:32) at jdk.internal.reflect.GeneratedMethodAccessor46.invoke(Unknown Source) at\n</code></pre>\n<p>What could be the problem?</p>\n<p>I've enabled metrics &amp; see no problems with resources &amp; etc &amp; no errors in audit logs (even though there're lots of logs in audit &amp; I may have missed smth)...</p>\n"},{"last_activity_date":1684705552,"question_id":76015698,"body":"<p>I'm trying to send feedback on a submission in my java application.\nIn teams I would submit it in the feedback box here:</p>\n<p><a href=\"https://i.stack.imgur.com/rkId1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rkId1.png\" alt=\"enter image description here\" /></a></p>\n<p>This is the request I'm sending with <code>GraphClient</code>:</p>\n<pre><code>_userClient.education()\n  .classes(classId)\n  .assignments(assignmentsId)\n  .submissions(submissionID)\n  .outcomes()\n  .buildRequest()\n  .post(outcome);\n</code></pre>\n<p>And this is how I get the outcome:</p>\n<pre><code>EducationItemBody body = new EducationItemBody();\nbody.content = message;\nbody.contentType = BodyType.TEXT;\n\nEducationFeedback feedback = new EducationFeedback();\nfeedback.text = body;\n\nEducationFeedbackOutcome outcome = new EducationFeedbackOutcome();\noutcome.feedback = feedback;\noutcome.publishedFeedback = feedback;\n</code></pre>\n<p>I know that there are different types of <code>EducationOutcomes</code> as described in <a href=\"https://learn.microsoft.com/en-us/graph/api/resources/educationoutcome?view=graph-rest-1.0\" rel=\"nofollow noreferrer\">the documentation</a>. I've based my Graph request on <a href=\"https://learn.microsoft.com/en-us/graph/api/educationfeedbackresourceoutcome-post-outcomes?view=graph-rest-1.0&amp;tabs=http\" rel=\"nofollow noreferrer\">the request for posting an education outcome with a file-based resource</a>, however I just want a text-based feedback, so I've used the <code>EducationFeedbackOutcome</code> model. I tried using the <code>EducationFeedbackResourceOutcome</code> model as described in the example, but it doesn't exist in the Graph SDK</p>\n<p>Now when I send the request I get an error:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;error&quot;: {\n    &quot;code&quot;: &quot;20243&quot;,\n    &quot;message&quot;: &quot;Invalid request body. Resource cannot be null.&quot;,\n    &quot;innerError&quot;: {\n      &quot;date&quot;: &quot;2023-04-14T13:24:55&quot;,\n      &quot;request-id&quot;: &quot;6fdd2196-6d77-4414-93ae-b7d2ef92d14a&quot;,\n      &quot;client-request-id&quot;: &quot;3cf86b17-59b9-4c9e-9687-49af6e25626d&quot;\n    }\n  }\n}\n</code></pre>\n<p>It seems that it expects a resource, but that is neither what I want, nor what I can give. I've filled out all the fields in the EducationOutcome. There is no &quot;resource&quot;  field.</p>\n<p>How can I submit feedback to an assignment using java? Maybe I need to use a different edpoint?</p>\n"},{"answers":[{"comments":[{"comment_id":4762769,"body":"David, I&#39;ve already seen the reviews and the forums. What I&#39;m looking for example is something like this: [Customer stories of Bamboo, from Codehaus.org <a href=\"http://blogs.atlassian.com/news/2009/04/bamboo_customer.html\" rel=\"nofollow noreferrer\">blogs.atlassian.com/news/2009/04/bamboo_customer.html</a> ]"}],"answer_id":4368277,"body":"<p>Look at the <a href=\"https://sourceforge.net/projects/symmetricds/reviews/\" rel=\"nofollow\">Project Reviews on sourceforge</a>: for example, <a href=\"https://sourceforge.net/users/skuda\" rel=\"nofollow\">Miguel Angel Rasero Peral</a> reported using it in production between 30 Postgresql databases on the project reviews page but <a href=\"https://sourceforge.net/projects/symmetricds/forums/forum/739235/topic/3760220?message=8525305\" rel=\"nofollow\">later reported some foreign key issues</a></p>\n"},{"comments":[{"comment_id":4805349,"body":"Well, the post doesn&#39;t really say anything specific about a  rebranding to include case studies, but if you are THE chenson of symmetricds.org, I will take your word for it :). THANKS!!"}],"answer_id":4403544,"body":"<p>Here is a <a href=\"https://blogs.oracle.com/retail/entry/data_replication_for_stores\" rel=\"nofollow\">blog article</a> about SymmetricDS.  JumpMind is working on re-branding their website which will include case studies for SymmetricDS.  It should be live by the first of the year.</p>\n"},{"comments":[{"comment_id":8566626,"body":"Appreciate this post on your experience."}],"answer_id":7119841,"body":"<p>I ended up choosing SymmetricDS for my company after having investigated database replication/synchronization for quite some time. My main issue was that i have a database table which represents physical files that needs to be replicated along with the database. SymmetricDS even takes care of this.</p>\n\n<p>The software is highly configurable, and the fact that you can plug in extension points (to take care of, for instance, file replication) makes it a powerful tool.</p>\n\n<p>I haven't had it up and running very long, but it appears to be working very well. Even though the learning curve is steep in the beginning (with regard to configuration), i'd say that it is worth the time it takes to learn it!</p>\n\n<p>UPDATE : I've had SymmetricDS running for almost 4 years now, and it has not failed a single time. It seems to be the <a href=\"http://www.topgear.com/uk/tv-show/series-3/episode-5\" rel=\"noreferrer\">Toyota Hilux</a> of replication software : it just works. I'm replicating a local internal database to a remote external database. We're not talking about a huge amount of data to be replicated, but still there's a fair amount of activity going on. Replication is fast (seconds). Also, if for some reason you'd like to \"populate\" the external node from scratch, you can easily do this with SymmetricDS as well. Thus, you can use SymmetricDS from start and have it to first populate the external node from scratch as well as take care of continuous replication. </p>\n\n<p>I've got replication set up both ways (for different tables, never tried same table), and this works very well as well.</p>\n\n<p>UPDATE 2 : 8 years later and it's still running stable. I have not made much changes to the setup it is replicating, but it is certainly doing its job</p>\n"},{"answer_id":28953694,"body":"<p>We are using SymmetricDS between a MySQL server and 2 PostgreSQL servers (one of which is on a poor [&lt;1Mbit] ADSL connection) fairly successfully on a small-ish database (pg_dump was 1.2G last week, ~15k rows INSERT/UPDATE'ed a day) .</p>\n\n<p>Configuration can be hard to wrap your head around and we have/have-had some foreign key issues (which <em>may</em> not be due to the way we apply schema updates for this application).</p>\n\n<p>Personally I found the few issues we had non-trivial and somewhat frustrating to debug, but we have had significantly fewer issues since upgrading to the 3.x releases (of which the remainder could be attributed to operator error rather than faults in the application).</p>\n\n<p>My main missing feature is sync of the PostgreSQL sequences, but we work around that by setting the increment to 10 on all servers and offsetting each server to a different value (the MySQL server is primarily read-only, so ymmv there)</p>\n"}],"last_activity_date":1684704994,"question_id":4264569,"body":"<p>I've been looking at some options to synchronize data between a few POS (Point of Sales) devices and the server.</p>\n\n<p><a href=\"http://symmetricds.codehaus.org/\" rel=\"noreferrer\">SymmetricDS</a> seems to be one of the options with a business friendly license.\nBeing a Codehaus project does guarantee a certain degree of quality, so I'm ok with that.</p>\n\n<p>They seem to have 'been there, done that, got the <a href=\"http://www.cafepress.com/symmetricds\" rel=\"noreferrer\">T-Shirt</a>'...but\nit would be nice if they had a \"who's using SymmetricDS\" page on their site.</p>\n\n<p>Does anyone know of a production grade implementation of SymmetricDS?</p>\n\n<p><em>I'd be even happier to hear if a fellow Stacker has implemented SymmetricDS.</em></p>\n"},{"comments":[{"comment_id":134550795,"body":"If your method is declared to return something, you must return something (or throw an exception; a special kind of &quot;return value&quot;). <code>peek</code> without returning anything doesn&#39;t make sense (because then you are not peeking)"},{"comment_id":134551186,"body":"Within the exception code block: <code>System.out.println(&quot;Stack is empty&quot;); return top;</code>. Remove the <code>return Integer.MIN_VALUE;</code> line."},{"comment_id":134551599,"body":"You can choose: change method to return <code>Integer</code> and use <code>return null</code> to signal it is empty (basically the specification of <code>Queue#peek</code>; return an <code>OptionalInt</code>; throw <code>NoSuchElementException</code>; or ..."},{"comment_id":134552577,"body":"It would be better to let it throw the exception. The caller needs to know there was nothing there, as opposed to Integer.MIN_VALUE which could be a real value on the stack. But actually if the application calls <code>peek()</code> when there is nothing on the stack, that is an application bug."}],"answers":[{"comments":[{"comment_id":134550857,"body":"I tried as you said ``` public int peek() throws ArrayIndexOutOfBoundsException{         // try {         //     return arr[top];         // } catch (ArrayIndexOutOfBoundsException e) {         //     System.out.println(&quot;Stack is empty&quot;);         // }         // return Integer.MIN_VALUE;         return arr[top];     } ``` But I get ``` Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: Index -1 out of bounds for length 10 \tat Stack.peek(Stack.java:33) \tat Stack.main(Stack.java:62) ```"},{"comment_id":134550876,"body":"@paneer_curry Yes. If you aren&#39;t returning <code>Integer.MIN_VALUE</code> and instead throw an <code>Exception</code> then the caller must handle that <code>Exception</code> (or it will bubble up to the user). There was no value. An alternative approach is to implement <code>isEmpty()</code> or <code>size()</code> and then test for <code>0</code> before calling the method."},{"comment_id":134551572,"body":"<code>OptionalInt</code> would be more adequate than <code>Optional&lt;Integer&gt;</code> IMO"},{"comment_id":134551604,"body":"@user16320675 Perhaps in this example. But really OP should have a generic <code>Stack</code>, or call it an <code>IntStack</code> or just use <code>ArrayDeque</code>."}],"answer_id":76301395,"body":"<p>Yes. Throw an <code>Exception</code>. You could simply throw the one you are currently catching.</p>\n<pre><code>public int peek() throws ArrayIndexOutOfBoundsException {\n    return arr[top];\n}\n</code></pre>\n<p>You could return an <code>Optional&lt;Integer&gt;</code> like</p>\n<pre><code>public Optional&lt;Integer&gt; peek() {\n    try {\n        return Optional.of(arr[top]);\n    } catch (ArrayIndexOutOfBoundsException e) {\n        System.out.println(&quot;Stack is empty&quot;);\n    }\n    return Optional.empty();\n}\n</code></pre>\n<p>Or you could return an <code>Integer</code> and make it <code>null</code>. Warning, this is possibly a <strong>billion dollar mistake</strong><sup>1</sup>. Like,</p>\n<pre><code>public Integer peek() {\n    try {\n        return arr[top];\n    } catch (ArrayIndexOutOfBoundsException e) {\n        System.out.println(&quot;Stack is empty&quot;);\n    }\n    return null;\n}\n</code></pre>\n<p><sup>1</sup><sub><a href=\"https://youtu.be/ybrQvs4x0Ps\" rel=\"nofollow noreferrer\">Null References The Billion Dollar Mistake</a></sub></p>\n"},{"answer_id":76301973,"body":"<p>I see what you're saying; only return a value if there is one, otherwise print a message.</p>\n<p>This is where exceptions are actually useful.</p>\n<p>Have your method throw an exception, and catch it wherever you are calling the <code>peek</code> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public int peek() throws ArrayIndexOutOfBoundsException {\n    return arr[top];\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>void example() {\n    int value;\n    try {\n        value = stack.peek();\n    } catch (ArrayIndexOutOfBoundsException exception) {\n        System.out.println(&quot;stack is empty&quot;);\n    }\n}\n</code></pre>\n<p>It's a matter of re-ordering and re-thinking your control-flow.<br />\nWhich for a situation like this, is typically at ground-level, and easy to implement.</p>\n"}],"last_activity_date":1684704121,"question_id":76301358,"body":"<p>I am learning data structures on my own and have been trying to implement them using Java. Currently I am attempting to implement a array based stack. In the <code>peek</code> method when the stack is empty I am currently catching <code>ArrayIndexOutOfBoundsException</code> and then returning <code>Integer.MIN_VALUE</code> to stop the program from quitting and getting it ready for further push operations. Is there any other way to implement the <code>peek</code> method so that it just prints the message inside the <code>catch</code> block without returning the Integer.MIN_VALUE.</p>\n<pre><code>public class Stack {\n    int[] arr;\n    int top = -1;\n    int currSize = 10;\n\n    /* Constructor */\n    public Stack() {\n        arr = new int[10];\n    }\n\n    public void push(int data) {\n        if (top ==  arr.length - 1) {\n            resize();\n        }\n        top++;\n        arr[top] = data;\n    }\n\n    /*\n    public void pop() {\n        arr[top] = 0;\n        top--;\n    }\n    */\n\n    public int peek() {\n        try {\n            return arr[top];\n        } catch (ArrayIndexOutOfBoundsException e) {\n            System.out.println(&quot;Stack is empty&quot;);\n        }\n        return Integer.MIN_VALUE;\n    }\n\n    /* Resizes the array when space runs out */\n    public void resize() {\n        int[] newArr = new int[2 * currSize];\n        currSize = 2 * currSize;\n        for (int i = 0; i &lt; newArr.length / 2; i++) {\n            newArr[i] = arr[i];\n        }\n        arr = newArr;\n        newArr = null;\n    }\n\n    /* Show elements in stack */\n    public void show() {\n        for (int i = 0; i &lt;= top; i++) {\n            System.out.print(arr[i] + &quot; -&gt; &quot;);\n        }\n        System.out.println();\n    }\n\n    /* Rturn the no of elements in stack */\n    public int getSize() {\n        return top + 1;\n    }\n\n    public static void main(String[] args) {\n        Stack st = new Stack();\n        System.out.println(st.peek());\n    }\n}\n</code></pre>\n<p>I tried omitting the <code>Integer.MIN_VALUE</code> return statement but the program wouldn't compile.</p>\n<p>I was expecting that after the message in <code>catch</code> block had been printed the control would return from the <code>peek</code> method to the <code>main</code> method and resume executing the other statements in main method (probably any push operations).</p>\n<p>A solution which occurs to me is the I change the <code>peek</code> method return type to void, print the top most value and the return <code>null</code> but I don't want to take this path because I may want to store the return value and use it in some other parts of program.</p>\n"},{"answers":[{"answer_id":76301922,"body":"<p>First off, the timestamp and file extension is always going to be the same amount of characters, so you don't need a character class.</p>\n<p>So, given <code>File_[TimeStamp:yyyyMMdd_HHmm].csv</code>.</p>\n<p>The pattern <code>\\[TimeStamp(:[^\\[\\]]+)?\\]</code> can be reduced to the following.</p>\n<pre><code>\\[TimeStamp(.{14}).{5}\n</code></pre>\n<p>Now, you're saying that you'd like to be able to match not only the text &quot;TimeStamp&quot;, but also other values.</p>\n<p>You can place the text <code>TimeStamp</code> within a non-capturing group, and use the <code>|</code> specifier, to delimit a set of possible values.</p>\n<pre><code>\\[(?:TimeStamp|Asia/Tokyo)(.{14}).{5}\n</code></pre>\n<p>So now, both of the following values will match.</p>\n<pre class=\"lang-none prettyprint-override\"><code>File_[TimeStamp:yyyyMMdd_HHmm].csv\nFile_[Asia/Tokyo:yyyyMMdd_HHmm].csv\n</code></pre>\n<p>Furthermore, you're saying that you want it to match a ZoneId which is provided at runtime.</p>\n<p>You can use the <code>String.format</code> for this, using the <code>%s</code> specifier to interpolate a <code>String</code> value into a <code>String</code>.</p>\n<p>Consider the following.<br />\nI've excluded the ZoneId value, as I'm not sure what your variable name will be.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String regex = &quot;\\\\[(?:TimeStamp|%s)(.{14}).{5}&quot;;\nString zoneId = Pattern.quote(/* zoneId */);\nregex = regex.formatted(zoneId);\n</code></pre>\n<p>If I used <code>America/Phoenix</code> as a ZoneId value, and we output the value of <code>regex</code>, we'll get the following.</p>\n<pre class=\"lang-none prettyprint-override\"><code>\\[(?:TimeStamp|\\QAmerica/Phoenix\\E)(.{14}).{5}\n</code></pre>\n<p>In conclusion, you can re-factor you code, as follows.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static final String DEFAULT_FORMAT = &quot;yyyyMMddHHmmss&quot;;\nprivate static final String TIMESTAMP_REGEX = &quot;\\\\[TimeStamp(.{14}).{5}&quot;;\n\npublic static String processFileName(String value, String regex) {\n    LocalDateTime dateTime = LocalDateTime.now();\n    Matcher matcher = Pattern.compile(regex).matcher(value);\n    while (matcher.find()) {\n        DateTimeFormatter dtf = DateTimeFormatter.ofPattern(DEFAULT_FORMAT);\n        if (matcher.group(1) != null)\n            dtf = DateTimeFormatter.ofPattern(matcher.group(1).substring(1));\n        value = value.replace(matcher.group(0), dtf.format(dateTime));\n    }\n    return value;\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>File_20230521_1711\n</code></pre>\n"}],"last_activity_date":1684703550,"question_id":75183769,"body":"<p>I am currently using a regex to interprete the below format.</p>\n<p>File Name : File_[TimeStamp:yyyyMMdd_HHmm].csv and regex for interpreting the format is : &quot;\\[TimeStamp(:[^\\[\\]]+)?\\]&quot; .\nit will return a String with timestamp value : File_20230120_1716.csv</p>\n<p>The sample code which support interpreting the timestamp format in the filename:</p>\n<pre><code>import java.time.LocalDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class Test {\n    private static final String DEFAULT_FORMAT= &quot;yyyyMMddHHmmss&quot;;\n    private static final String TIMESTAMP_REGEX = &quot;\\\\[TimeStamp(:[^\\\\[\\\\]]+)?\\\\]&quot;;\n    public  static String processFileName(String value, String regex ) {\n        LocalDateTime dateTime=LocalDateTime.now();\n        Matcher matcher=Pattern.compile(regex, Pattern.DOTALL).matcher(value);\n        while(matcher.find()) {\n            DateTimeFormatter dtf=DateTimeFormatter.ofPattern(DEFAULT_FORMAT);\n            if(matcher.group(1)!=null) {\n                dtf=DateTimeFormatter.ofPattern(matcher.group(1).replaceFirst(&quot;:&quot;, &quot;&quot;));\n            }\n            value=value.replace(matcher.group(0), dtf.format(dateTime));\n        }\n        return value;\n    }\n    public static void main(String args[]) {\n        \n        String str=processFileName(&quot;File_[TimeStamp:yyyyMMdd_HHmm].csv&quot;, TIMESTAMP_REGEX);\n        System.out.println(str);\n       }\n}\n</code></pre>\n<p>Output: File_20230120_1716.csv\nCurrently I can use File_[TimeStamp:yyyyMMdd_HHmm].csv or File_[TimeStamp].csv formats to interprete with above regex.</p>\n<p>But I wanted to modify the above &quot;\\[TimeStamp(:[^\\[\\]]+)?\\]&quot; sothat it can interpret ZonId also in this format : File_[TimeStam|Asia\\Tokyo:yyyyMMdd_HHmm].csv.\nBased upon ZoneId from the input I will modify the LocalDateTime value.</p>\n"},{"comments":[{"comment_id":19701967,"body":"Find your answer here: <a href=\"http://stackoverflow.com/questions/736571/using-intent-in-an-android-application-to-show-another-activity\" title=\"using intent in an android application to show another activity\">stackoverflow.com/questions/736571/&hellip;</a>"},{"comment_id":19702119,"body":"please research more on tutorial regarding this. there are bunch on the web.."},{"comment_id":19703029,"body":"Have you given android:onClick=&quot;click1&quot; property for button in activity_main.xml?"},{"comment_id":19714540,"body":"@user1956735 Please see my answer, it will solve your problem."},{"comment_id":19720439,"body":"There is more than one way to do this."},{"comment_id":19720739,"body":"FYI before you post a very simple and juvenile question on Stackoverflow, make sure to see if the question hasn&#39;t already been answered and to do some research before posting. A lack of research is frowned upon. Trust me, been there, done that."}],"answers":[{"answer_id":14208420,"body":"<p>Change your FirstyActivity to: </p>\n\n<pre><code>@Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        Button btn_go=(Button)findViewById(R.id.YOUR_BUTTON_ID);\n            btn_go.setOnClickListener(new OnClickListener() {\n\n            @Override\n            public void onClick(View v) {\n                // TODO Auto-generated method stub\n                  Log.i(\"clicks\",\"You Clicked B1\");\n              Intent i=new Intent(\n                     MainActivity.this,\n                     MainActivity2.class);\n              startActivity(i);\n            }\n        }\n    });\n\n}\n</code></pre>\n\n<p>Hope it will help you.</p>\n"},{"comments":[{"comment_id":19718374,"body":"in which Androidmanifest.xml do i need to add                                                                         &lt;activity     android:name=&quot;.MainActivity2&quot;     android:label=&quot;@string/title_activity_main&quot;&gt; &lt;/activity&gt;"},{"comment_id":19738020,"body":"There is only 1 Androidmanifest.xml file in your application, please see this link for detail about Androidmanifest.xml file <a href=\"http://developer.android.com/guide/topics/manifest/manifest-intro.html\" rel=\"nofollow noreferrer\">developer.android.com/guide/topics/manifest/manifest-intro.h&zwnj;&#8203;tml</a>"}],"answer_id":14208509,"body":"<p>Write below code in your MainActivity.java file instead of your code.</p>\n\n<pre><code>public class MainActivity extends Activity implements OnClickListener {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        Button mBtn1 = (Button) findViewById(R.id.mBtn1);\n        mBtn1.setOnClickListener(this);\n    }\n\n    @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        // Inflate the menu; this adds items to the action bar if it is present.\n        getMenuInflater().inflate(R.menu.activity_main, menu);\n        return true;\n    }\n\n    @Override\n    public void onClick(View v) {\n        Log.i(\"clicks\",\"You Clicked B1\");\n        Intent i=new Intent(MainActivity.this, MainActivity2.class);\n        startActivity(i);\n    }\n}\n</code></pre>\n\n<p>And Declare MainActivity2 into your Androidmanifest.xml file using below code.</p>\n\n<pre><code>&lt;activity\n    android:name=\".MainActivity2\"\n    android:label=\"@string/title_activity_main\"&gt;\n&lt;/activity&gt;\n</code></pre>\n"},{"comments":[{"comment_id":77936519,"body":"Right! learning the whole topic is better than finding just an answer"}],"answer_id":14218738,"body":"<p>There is more than one way to do this.</p>\n\n<p>Here is a good resource straight from Google:\n<a href=\"http://developer.android.com/training/basics/firstapp/starting-activity.html\" rel=\"nofollow\">http://developer.android.com/training/basics/firstapp/starting-activity.html</a></p>\n\n<p>At developer.android.com, they have numerous tutorials explaining just about everything you need to know about android. They even provide detailed API for each class.</p>\n\n<p>If that doesn't help, there are NUMEROUS different resources that can help you with this question and other android questions.</p>\n"}],"last_activity_date":1684702416,"question_id":14207392,"body":"<p>So what I've done in Eclipse, in layouts I have: activity_main.xml  and activity_main2.xml. What I tried is to create a button in activity_main.xml and on click to go on screen of activity_main2.xml</p>\n\n<p>so in <code>com.example.myfirstapp</code> I have</p>\n\n<p>MainActivity.Java:</p>\n\n<pre><code>package com.example.myfirstapp;\n\nimport android.os.Bundle;\nimport android.app.Activity;\nimport android.content.Intent;\nimport android.util.Log;\nimport android.view.Menu;\nimport android.view.View;\n\npublic class MainActivity extends Activity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n\n    @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        // Inflate the menu; this adds items to the action bar if it is present.\n        getMenuInflater().inflate(R.menu.activity_main, menu);\n        return true;\n    }\n\n    public void click1(View v) {\n        Log.i(\"clicks\",\"You Clicked B1\");\n        Intent i=new Intent(\n                     MainActivity.this,\n                     MainActivity2.class);\n        startActivity(i);\n    }\n}\n</code></pre>\n\n<p>MainActivity2.java</p>\n\n<pre><code>package com.example.myfirstapp;\n\nimport android.os.Bundle;\nimport android.view.Menu;\nimport android.app.Activity;\n\npublic class MainActivity2 extends Activity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main2);\n    }\n\n    @Override\n    public boolean onCreateOptionsMenu(Menu menu) {\n        // Inflate the menu; this adds items to the action bar if it is present.\n        getMenuInflater().inflate(R.menu.activity_main, menu);\n        return true;\n    }\n}\n</code></pre>\n"},{"comments":[{"comment_id":132700697,"body":"<code>expression = expression.replace(character, &#39; &#39;);</code> will replace <i>all</i> <code>character</code> occurances. So <code>&quot;11+&quot;.replace(&#39;1&#39;,&#39; &#39;)</code> will become <code>&quot;  +&quot;</code>. To replace <i>first</i> occurrence of that character you may want to use <code>replaceFirst</code>. Since it uses regex, you want to generate regex which represents that character (in case such character is regex metacharacter like <code>+</code>). To do that you can use <code>Pattern.quote</code> but it expects String. So you also need to convert your <code>character</code> to String first. Final version could look like <code>expression = expression.replaceFirst(Pattern.quote(&quot;&quot;+character), &quot;&quot;);</code>."},{"comment_id":132700723,"body":"Same for player inventory. BTW replacing character with <code>&quot;&quot;</code> (empty string) instead of <code>&#39; &#39;</code> (space) also lets you avoid <code>inventoryPlayer1 = inventoryPlayer1.replaceAll(&quot;\\\\s+&quot;, &quot;&quot;);</code> since you are not adding any spaces now."},{"comment_id":132700805,"body":"Thank you! I don&#39;t understand how to implement this still. But I will try to figure it out. Just replacing this &quot;expression = expression.replaceFirst...&quot; doesn&#39;t work. So I&#39;ll just see how you meant it and hopefully I&#39;ll get it. Thanks for your help"},{"comment_id":132701296,"body":"You are welcome. BTW if instead of String you can use other structures like List then you could use <code>yourList.remove(element)</code> which would remove <i>first</i> occurrence of that element from your list."}],"answers":[{"answer_id":76301839,"body":"<p>It looks like you're trying to remove any repeated characters.</p>\n<p>The following regular expression pattern will match any character that is immediately followed by the same character.</p>\n<pre><code>(.)\\1\n</code></pre>\n<p>You can use this within a <code>String.replaceAll</code> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String string = &quot;111234++&quot;\nwhile (string.matches(&quot;.*(.)\\\\1.*&quot;))\n    string = string.replaceAll(&quot;(.)\\\\1&quot;, &quot;$1&quot;);\n</code></pre>\n<p>The <code>string.matches</code> call is asserting that <code>string</code> contains at least 1 repeated set.<br />\nAnd, the <code>string.replaceAll</code> call is replacing the double-occurrence with a single occurrence.</p>\n"}],"last_activity_date":1684701623,"question_id":75200481,"body":"<p>I have a command line argument that looks like this:\n<code>&quot;111234++&quot;</code>. It is not hard-coded, so it could vary. Just for the sake of example, I'll stick to that specific input though.<br />\nThen there is going to be another expression, like this one: &quot;11+&quot;. My ultimate goal is the removal of these occurrences from the input string. This means, the following string: &quot;111234++&quot; should get converted into this the smaller one right here: &quot;1234+&quot;. For some reason I can't get this to work. Here is what I tried:</p>\n<pre><code>if (isExpressionInInventory(expression, inventoryPlayer1)) {\n    for (int i = 0; i &lt; expression.length(); i++) {\n        char character  = expression.charAt(i);\n        for (int j = 0; j &lt; inventoryPlayer1.length(); j++) {\n            if (inventoryPlayer1.charAt(j) == character) {\n                inventoryPlayer1 = inventoryPlayer1.replace(character, ' ');\n                expression = expression.replace(character, ' ');\n            }\n        }\n    }\n    inventoryPlayer1 = inventoryPlayer1.replaceAll(&quot;\\\\s+&quot;, &quot;&quot;);\n}\n</code></pre>\n<hr />\n<p>I tried iterating over the string-expression and store the character consecutively. My first character should be &quot;1&quot; then.. The nested for loop iterates through the inventory &quot;111234++&quot; and replaces each occurrence of the character with an empty character. This is the moment where my program has its flaw. I only want to replace one occurrence of that character. Sadly, I have no idea how to tackle this issue..\nThanks for any help in advance!</p>\n"},{"answers":[{"comments":[{"comment_id":39326411,"body":"the dependencies are listed in my project , but when I open <a href=\"http://repo1.maven.org\" rel=\"nofollow noreferrer\">repo1.maven.org</a> there was a message &quot;Browsing for this directory has been disabled.&quot;..so how can I fix this then?"},{"comment_id":39328029,"body":"@PrajyodKumar: Read the rest of the text."},{"comment_id":39328082,"body":"To fix the problem with Gradle, you need to configure it to use the same proxy settings as your web browser."},{"comment_id":51159195,"body":"I have same problem. I can access google.com normally but can not access repo1.maven.org. Not meaning can not access. The message is  &quot;Browsing for this directory has been disabled....&quot;"},{"comment_id":51167531,"body":"@KouTokyo: Maven Central doesn&#39;t allow to access this URL with a browser. But when you get the error page, that means your browser could connect to Maven Central - so the firewall is OK."}],"answer_id":25243438,"body":"<p>The real error is this:</p>\n\n<pre><code>Connection to http://repo1.maven.org refused\n</code></pre>\n\n<p>Gradle needs to download the dependencies listed in the error message to be able to compile the project.</p>\n\n<p>You're probably behind a firewall or your Internet connection isn't working. You need to make sure Gradle can access <code>http://repo1.maven.org</code>.</p>\n\n<p>Note: Maven Central (<a href=\"http://repo1.maven.org\">http://repo1.maven.org</a>) can be accessed with a browser. If you see the message \"Browsing for this directory has been disabled\" that means your browser could connect to the server (the error is a special message my Maven Central, not a standard HTTP error message).</p>\n\n<p>If you see this but Maven or Gradle fail, then you need to check your browser's/OS's proxy settings and configure your tool accordingly.</p>\n\n<p>Related:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/1251192/how-do-i-use-maven-through-a-proxy\">How do I use Maven through a proxy?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/5991194/gradle-proxy-configuration\">Gradle proxy configuration</a></li>\n</ul>\n"},{"answer_id":25243517,"body":"<p>It looks like you don't have a working internet connection or haven't configured your proxy/firewall. \nPlease check if you can access repo1.maven.org from commandline or a browser.</p>\n"},{"answer_id":29843753,"body":"<p>@Aaron Digulla said I have firewall problem.  </p>\n\n<p>I was having problem with <strong>GSON dependency</strong>, (hope it will solve other dependecy problems also) and this answer solved the problem. Stack Overflow <a href=\"https://stackoverflow.com/a/26671662/2032561\">Could not resolve all dependencies for configuration ':classpath'</a></p>\n\n<p>@Kangars post :\nThis is what i have in my <strong>gradle.build</strong> for build script and allprojects</p>\n\n<pre><code>buildscript {\nrepositories {\n    jcenter {\n        url \"http://jcenter.bintray.com/\"\n    }\n  }\n}\n\nallprojects {\nrepositories {\n    jcenter {\n        url \"http://jcenter.bintray.com/\"\n    }\n  }\n}\n</code></pre>\n"},{"answer_id":33916077,"body":"<p>I used the steps below to fix it.</p>\n\n<ol>\n<li><p>Go to command prompt and set the java opts.</p>\n\n<pre><code>SET JAVA_OPTS=-Dhttp.proxyHost=your_proxy_server_name -Dhttp.proxyPort=your_proxy_port -Dhttp.nonProxyHosts=127.0.0.1\n</code></pre></li>\n<li><p>Then build your Gradle application and all the connection refused errors no longer appear.</p>\n\n<p><code>gradle clean build distZip</code></p></li>\n</ol>\n"},{"answer_id":34930698,"body":"<p>Using --refresh-dependencies switch with gradle, helped me to resolve this issue.</p>\n"},{"answer_id":35552666,"body":"<p>This is because of slow internet connection or you haven't configure proxy settings correctly. Gradle needs to download some dependencies , if it cant access the repository it fires this error. All you have to do is check your internet connection and make sure gradle can access the maven repository.</p>\n"},{"answer_id":51563062,"body":"<p>In my case the problem was resolved when I changed my gradle version from 4.6 to 4.7.</p>\n"},{"answer_id":52688524,"body":"<p>The root cause\n<code>Connection to http://repo1.maven.org refused</code>\nindicates that the build is failing as gradle is not able to fetch some dependencies from the repository.</p>\n\n<p>Here is a list of causes and corresponding resolutions you might want to try:</p>\n\n<ol>\n<li>Internet connectivity issues - Have a good internet speed and connectivity</li>\n<li>Firewall (system or third party) - Ensure firewall is not blocking access to the repository</li>\n<li>Working behind a proxy - <a href=\"https://stackoverflow.com/questions/5991194/gradle-proxy-configuration\">Gradle proxy configuration</a></li>\n<li>Firewall or some random application meddling with proxy application<sup>1</sup> - Kill the process meddling with the proxy application</li>\n<li>The proxy application causes certificate problems<sup>2</sup> - Import proxy application's certificate</li>\n</ol>\n\n<p><em>References:</em></p>\n\n<ol>\n<li><a href=\"https://www.telerik.com/forums/fiddler-causes-my-internet-access-to-stop-working#2Q_DSu6nmE66fQo3ZYUiOw\" rel=\"nofollow noreferrer\">Telerik forum's answer on how to fix internet connectivity issue while using Fiddler</a></li>\n<li><a href=\"https://www.telerik.com/forums/your-connection-is-not-private-whenever-i-start-fiddler#Z6f4xKmGN0C-1SizhehzAw\" rel=\"nofollow noreferrer\">Telerik forum's answer on secure connection issue while using Fiddler</a></li>\n</ol>\n"},{"answer_id":73524407,"body":"<p>For my case it was a poor connection issue so the IDE couldn't get resources online</p>\n"},{"answer_id":76301833,"body":"<p>Mine worked after turning on the VPN. Although the build seems to take a long time and seems to stall at 85%, the service is actually building and I'm able to load it</p>\n"}],"last_activity_date":1684701478,"question_id":25243342,"body":"<p>I am trying for so many days to resolve this exception , followed many blogs and couldn't find  solution. when I run a bundle.gradle by giving jettyRun as command <img src=\"https://i.stack.imgur.com/5E2OC.jpg\" alt=\"enter image description here\"></p>\n\n<pre><code>I am getting an exception \n\n\n\n    **FAILURE: Build failed with an exception.\n\n        * What went wrong:\n        Could not resolve all dependencies for configuration ':compile'.\n        &gt; Could not resolve javax.servlet:servlet-api:2.5.\n          Required by:\n              :1-SimpleServlet:unspecified\n           &gt; Could not GET 'http://repo1.maven.org/maven2/javax/servlet/servlet-api/2.5/servlet-api-2.5.pom'.\n              &gt; Connection to http://repo1.maven.org refused\n        &gt; Could not resolve org.apache.commons:commons-io:1.3.2.\n          Required by:\n              :1-SimpleServlet:unspecified\n           &gt; Could not GET 'http://repo1.maven.org/maven2/org/apache/commons/commons-io/1.3.2/commons-io-1.3.2.pom'.\n              &gt; Connection to http://repo1.maven.org refused**\n</code></pre>\n"},{"comments":[{"comment_id":28700772,"body":"You should certainly read this article - <a href=\"http://martinfowler.com/articles/injection.html\" rel=\"nofollow noreferrer\">martinfowler.com/articles/injection.html</a>"},{"comment_id":28700825,"body":"Looks like you have read an old Spring in Action Book. Since Spring 3.0, there is not so much bean definition left in the xml."},{"comment_id":28704448,"body":"I did read Spring 3. You gotta help me by explaining how little xml configuration = inversion of control. How can that be?"},{"comment_id":28727310,"body":"Ralph, could you explain? How the xml has decreased in spring 3. How does autowiring allow decoupling?"}],"answers":[{"answer_id":19368496,"body":"<p>You don't truly appreciate Spring until you've had to do things the hard way.  The hard way being maintaining multiple large projects without a coherent framework.  If you have 4 big enterprise wide applications that all have their own way of starting themselves, and managing resources, you're in for a headache.  If you know that each application uses spring, then just look for the application context xml!  This also makes it incredibly easy to setup a new context for different environments, and test cases, all without mucking up your code base.</p>\n"},{"comments":[{"comment_id":63715560,"body":"Well said. If we use the anotation, Again we have to search in IDE and find the interface and It has to be change. I am not convinced. what is your view?"},{"comment_id":79702807,"body":"Is another more minor benefit this?:  Explicitly calling constructors in the &quot;Good old way&quot; prone to refactor even when the same implementation is used, but has and update to its constructor params?  If the constructor gets an added param, and DI is used, then that constructor&#39;s class just needs to autowire the new param, and no explicit constructor call refactor needed?  (reference: &quot;Changing the signature of the Person constructor&quot; at <a href=\"http://www.javacreed.com/why-should-we-use-dependency-injection/\" rel=\"nofollow noreferrer\">javacreed.com/why-should-we-use-dependency-injection</a>)"},{"comment_id":106323846,"body":"In the case of switching InMemoryLayer with SuperSecretRemoteCloudLayer, I can simply instantiate the storage layer once at put its reference as a public static member in certain. If I do it, I will have to change it only once in the place where the storage layer is instantiated."}],"answer_id":19368689,"body":"<p>Three Words: <strong>INVERSION OF CONTROL</strong></p>\n<p>In a nutshell:\nAs soon as you instantiate &quot;the good old way&quot; you create tight coupling, e.g.: your controller depends on a specific template engine, your entities on a concrete database layer, etc. And that's something you want to prevent and where the dependency injection container (DIC) comes in very handy. It manages your services and you don't really have to care anymore about specific implementations as long as those implement the same interface.</p>\n<p>Imagine a simple storage layer class called <code>InMemoryLayer</code> that gets instantiated by you when you need it. Now you want to switch it for an awesome new open-source GitHub solution called <code>SuperSecretRemoteCloudLayer</code>. Normally you would now hit &quot;Search and Replace&quot; in your IDE of choice and replace all occurrences of <code>InMemoryLayer</code> with the <code>SuperSecretRemoteCloudLayer</code>. But that's not handy and quite error-prone, why would you want to do all that hard work by hand? The DIC can do that for you and all <em>you</em> need to take care of, is that both <code>*Layer</code> implement the same interface (so your application won't break).</p>\n"},{"answer_id":19369886,"body":"<p>Spring's big deal is more about dependency injection, not XML-based configuration. As others have noted, Spring has been moving away from XML-based configuration. But DI is core to Spring.</p>\n\n<p>The a-ha is that DI offers a different model for linking components together. Instead of components creating each other directly (and thus being tightly coupled), the components stop doing that, and you inject the linkages from a central location. It turns out that this helps with testing and transaction management in particular.</p>\n"}],"last_activity_date":1684701185,"question_id":19368378,"body":"<p>I have been reading the book Spring in Action for a few weeks now to learn about the spring framework. I have about 2 years of programming experience mostly in java with some distractions here and there in Ruby and Python.</p>\n\n<p>After reading the first few chapters, I didn't quite get what the big deal is about dependency injection in spring. I was expecting a AHAAA moment but didn't quite experience that yet. I'm sure I'm missing something important.</p>\n\n<p>Why would I want to wire my beans in xml rather than instantiating them the good old way with the <code>= new myclass();</code></p>\n\n<p>I understand I can wire beans in the xml via constructor args and properties as well as configure datasources in spring so that I can hide away connection details in an xml file. But  why? There is more to this especially when it comes to good software design. Can some one explain the big deal?</p>\n"},{"comments":[{"comment_id":134538035,"body":"Some unit test frameworks might be able to do this.  However I usually avoid making things private that I need to test, so I&#39;m not really sure which ones to use specifically in this case.  Look around!"},{"comment_id":134538041,"body":"If  it is just a test ,you can  modify <code>Class2</code>  be a inner static class temporary ,so that you can instantiate class2 and test your method. In general , wo often use some test framework like junit , here is <a href=\"https://junit.org/junit5/\" rel=\"nofollow noreferrer\">doc</a>"},{"comment_id":134538631,"body":"You shouldn&#39;t test private methods or classes directly; test them through observable behaviour of package private (or higher) classes and methods."},{"comment_id":134538689,"body":"There must be some code in <code>Class1</code> that calls that method in <code>Class2</code>.  That&#39;s the code that you should be testing."},{"comment_id":134543621,"body":"Yes, there&#39;s a code in Class1 which calls methods of Class2, but somehow that couldn&#39;t be tested."}],"answers":[{"comments":[{"comment_id":134538197,"body":"&#39;should be moved into another class to promote reusability.&#39; is some weird verbiage. The essence of it is: &quot;If you want to test a private method, then that&#39;s a very strong indication that method should not be private&quot;. Same applies to private classes, of course. OP: You can have package private, too. Test code has no issues accessing those."},{"comment_id":134543627,"body":"Here, the issue is for private classes, not private methods. Of course, there should be rarely some private class within another class, but since it is there, we can&#39;t change it for now, and think of a way to solve the issue"},{"comment_id":134543734,"body":"@GlidingSwords997 I think that&#39;s what the documentation is inferring.  If you have a situation where this is occurring, then it&#39;s more logical to re-evaluate the structure."},{"comment_id":134543856,"body":"@GlidingSwords997, I&#39;ve provided an abstraction using reflection, if you&#39;d like to take a look."}],"answer_id":76293589,"body":"<p>You could use reflection, I was able to get the following to work.</p>\n<p>Consider the following, <code>Class1</code>, and <code>Class2</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Class1 {\n    private class Class2 {\n        int a1;\n        void method() {\n            System.out.println(&quot;value&quot;);\n        }\n    }\n}\n</code></pre>\n<p>The following method will return an instance of <code>Class2</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Class1.Class2 instance() throws ReflectiveOperationException {\n    Class1 class1 = new Class1();\n    Class&lt;?&gt; object = Class1.class.getDeclaredClasses()[0];\n    Constructor&lt;?&gt; constructor = object.getDeclaredConstructors()[0];\n    constructor.setAccessible(true);\n    return (Class1.Class2) constructor.newInstance(class1);\n}\n</code></pre>\n<p>Additionally, from the JUnit4 Frequently Asked Questions.</p>\n<p><a href=\"https://junit.org/junit4/faq.html#atests_11\" rel=\"nofollow noreferrer\">JUnit4 - How do I test private methods?</a></p>\n<blockquote>\n<p>Testing private methods may be an indication that those methods should be moved into another class to promote reusability.</p>\n<p>But if you must...</p>\n<p>If you are using JDK 1.3 or higher, you can use reflection to subvert the access control mechanism with the aid of the <a href=\"http://sourceforge.net/projects/privaccessor/\" rel=\"nofollow noreferrer\">PrivilegedAccessor</a>. For details on how to use it, read <a href=\"http://www.onjava.com/pub/a/onjava/2003/11/12/reflection.html\" rel=\"nofollow noreferrer\">this article</a>.</p>\n<p>If you are using JDK 1.6 or higher and you annotate your tests with @Test, you can use Dp4j to inject reflection in your test methods. For details on how to use it, see <a href=\"http://dp4j.com/testscript\" rel=\"nofollow noreferrer\">this test script</a>.</p>\n</blockquote>\n"},{"comments":[{"comment_id":134543631,"body":"Since its a code written by someone else, we can&#39;t change the source code. Had it been protected or static, there would be no issue"}],"answer_id":76293604,"body":"<p>If the access modifier of the embedded class were combined with a public getter, then it'd be more feasible and reliable. Also, it would force you to have a new instance every time <code>retrieveClass()</code> is called.</p>\n<p>Say...</p>\n<pre><code>public class Class1 { \n  private class Class2 { \n   int a1; \n   void method ();\n  }\n   public Class2 retrieveClass() { \n     return new Class2();\n }  \n} \n</code></pre>\n<p>Even if you had reflection handle it behind the scenes with a sort of mocking type of behavior, It may work but also I would not rely on that wonky code. Since you need it testable.</p>\n<p>Alternatively, these may be the undesired workarounds to go by:</p>\n<pre><code>   Method method = TargetClass.getDeclaredMethod(methodName, argClasses);\n   method.setAccessible(true);\n   return method.invoke(targetObject, argObjects);\n\n\n   Class obj = test.getClass(); // create an object of the class named Class\n\n   Field field = obj.getDeclaredField(&quot;fieldname&quot;); // access the private variable\n\n   field.setAccessible(true); // make private field accessible\n\n   field.set(test,&quot;value&quot;); // setting a field value\n</code></pre>\n"}],"last_activity_date":1684701104,"question_id":76293532,"body":"<p>There is a public class in which a private class has been written with some properties and methods. Now, we want to write test cases for this private class but since it's a private class, we can't create an instance of that class. I tried using reflection utils, but that can help only for private methods of public classes.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Class1{\n    private class Class2{\n        int a1;\n        void method () { }\n    }\n}\n</code></pre>\n"},{"comments":[{"comment_id":132740611,"body":"isn&#39;t this just: itemID[1] ? based on your stated desired output, no matter the split limit"},{"comment_id":132740720,"body":"@JohnnyMopp I overthought the output! This worked perfectly, thanks for simplifying it!"},{"comment_id":132740749,"body":"@FlavianIuga Yes it is, I overthought the output! Thank you!"}],"answers":[{"answer_id":75223829,"body":"<p>What about something using String.indexOf and String.substring functions (<a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/lang/String.html</a>)</p>\n<pre><code>int indexSecondOccurence = line.indexOf(&quot;,&quot;, line.indexOf(&quot;,&quot;) + 1);\nSystem.out.println(line.substring(0, indexSecondOccurence + 1));\n</code></pre>\n"},{"answer_id":75224079,"body":"<p>I'd suggest to modify your code as follows.</p>\n<pre><code>...\n        String[] itemID = line.split(&quot;,&quot;, 3); //attempt to use a regex limit\n        if(itemID[0].equals(test)) {\n            System.out.println(String.join (&quot;,&quot;, itemID[0],itemID[1]));\n        }\n...\n\n</code></pre>\n<p>The split() call will produce an array with maximum 3 elements. First two will be the string pieces that you need. The last element is the remaining &quot;tail&quot; of the original string.\nNow we only need to merge the pieces back with the join() method.\nHope this helps.</p>\n"},{"answer_id":76301787,"body":"<p>With <code>String.split</code>, the limit parameter is going to be the maximum number of <code>String</code> array values you want returned.<br />\nFor example, <code>&quot;A,B,C,D&quot;</code>, with a limit of 2 will return <code>[&quot;A&quot;, &quot;B,C,D&quot;]</code>.</p>\n<p>In terms of the use of <code>String.split</code> on the data.<br />\nIf the quoted text item, in this case, &quot;Stanley #2 Philips Screwdriver&quot;, is guaranteed not to contain a <code>,</code>, then <code>split</code> is the method to go with.\nFrom there, your <code>0</code> index will contain <code>&quot;14&quot;</code>, and your <code>1</code> index will contain <code>&quot;Stanley #2 Philips Screwdriver&quot;</code>.</p>\n<p>In regard to printing your data, just concatenate the values.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String itemID[] = line.split(&quot;,&quot;, 5);\nSystem.out.println(itemID[0] + &quot;, &quot; + itemID[1]);\n</code></pre>\n<p>So, in conclusion, you can do the following with the given data\n<code>14, &quot;Stanley #2 Philips Screwdriver&quot;, true, 6.95</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String string = &quot;14, \\&quot;Stanley #2 Philips Screwdriver\\&quot;, true, 6.95&quot;;\nString[] strings = string.split(&quot;, &quot;);\nString id = strings[0];\nString description = strings[1];\nSystem.out.println(id);\nSystem.out.println(description);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>14\n&quot;Stanley #2 Philips Screwdriver&quot;\n</code></pre>\n"}],"last_activity_date":1684701016,"question_id":75223726,"body":"<p>I am currently trying to stop printing a line of text after a <code>,</code> character is read on that line a second time from a text file. Example; <code>14, &quot;Stanley #2 Philips Screwdriver&quot;, true, 6.95</code>. Stop reading and print out the text after the <code>,</code> character is read a second time. So the output text should look like <code>14, &quot;Stanley #2 Philips Screwdriver&quot;</code>. I tried to use a limit on the regex to achieve this but, it just omits all the commas and prints out the entire text. This is what my code looks like so far;</p>\n<pre><code>public static void fileReader() throws FileNotFoundException {\n        File file = new File(&quot;/Users/14077/Downloads/inventory.txt&quot;);\n        Scanner scan = new Scanner(file);\n        String test = &quot;4452&quot;;\n        \n        while (scan.hasNext()) {\n            String line = scan.nextLine();\n            String[] itemID = line.split(&quot;,&quot;, 5); //attempt to use a regex limit\n            if(itemID[0].equals(test)) {\n                for(String a : itemID)\n                System.out.println(a);\n            }//end if \n            \n        }//end while    \n        \n    }//end fileReader\n</code></pre>\n<p>I also tried to print just part of the text up until the first comma like;</p>\n<pre><code>String itemID[] = line.split(&quot;,&quot;, 5);\n       System.out.println(itemID[0]);\n</code></pre>\n<p>But no luck, it just prints 14. Please any help will be appreciated.</p>\n"},{"comments":[{"comment_id":12218542,"body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/1828775/httpclient-and-ssl\">HttpClient and SSL</a>"},{"comment_id":37540793,"body":"Odly enough I got this error when communicating between clustered servers that had no SSL problems individually. Once I properly set <code>domainname</code> in my RHEL servers the problem was gone. Hope it helps someone."},{"comment_id":62350587,"body":"One other thing to check is that you have the latest version of Java - I was getting a similar error because of this."},{"comment_id":86416955,"body":"<a href=\"https://stackoverflow.com/questions/2893819/accept-servers-self-signed-ssl-certificate-in-java-client\" title=\"accept servers self signed ssl certificate in java client\">stackoverflow.com/questions/2893819/&hellip;</a> - also relevant and a fantastic answer."},{"comment_id":116708682,"body":"First of all import you&#39;r crt file into {JAVA_HOME}/jre/security/cacerts, if you still faced with this exception, change you&#39;r jdk version. For example from jdk1.8.0_17 to jdk1.8.0_231"},{"comment_id":123558234,"body":"I had this issue in windows, I found the answer here: <a href=\"https://stackoverflow.com/questions/41257366/import-windows-certificates-to-java\" title=\"import windows certificates to java\">stackoverflow.com/questions/41257366/&hellip;</a>"}],"answers":[{"comments":[{"comment_id":12206980,"body":"ran command keytool -list -keystore %JAVA_HOME/lib/security/cacerts. and got the error keytool error: java.lang.Exception: Keystore file does not exist: %JAVA_HOME/lib /security/cacerts"},{"comment_id":12207265,"body":"You&#39;ll have to use the full path, e.g. c:\\java\\jdk\\lib\\security\\cacerts"},{"comment_id":23562740,"body":"Like SimonSez said, you don&#39;t need a password, but if you want it, the default password is &quot;changeit&quot;."},{"comment_id":23563053,"body":"Also, in Windows you need to run the terminal as administrator, otherwise you get the error <code>keytool error:  java.io.FileNotFoundException ... (Access is denied)</code> when you try to import your certificate."},{"comment_id":28970802,"body":"Ah @SimonSez you are my god. But to add to it, one must specify trust store location and password as mentioned by @M Sach to get it to work."},{"comment_id":49018810,"body":"@Dejel as for the filetype I always go with the <code>*.cert</code> filetype but AFAIK the Java keytool isn&#39;t picky. You&#39;re free to choose any name for the <code>AliasName</code>. Like a nickname, something like &quot;MyCert&quot; or &quot;Spongebob&quot;. Cheers."},{"comment_id":51922867,"body":"Continued to have issues with Java 1.8. Needed to add cert as described and use Java &lt; 1.8"},{"comment_id":70861636,"body":"@SimonSez do I have to provide file path also? my .cer file is on my desktop"},{"comment_id":70863072,"body":"@Jesse you need to provide a path to any resource not in the scope (normally the dir) of the keytool script. So, without knowing your concrete setup, I would say yes. Cheers"},{"comment_id":85399397,"body":"I tested with JDK8(1.8.0_152) and it calls for a password."},{"comment_id":85399519,"body":"Shad see Felix comment"},{"comment_id":87322557,"body":"The keytool program can be found in the java bin directory. If you start looking for it, like I did."},{"comment_id":89382049,"body":"I imported this but I still get the same ValidationException. I verified in the trusted cacerts by trying to add again but it said <code>Certificate not imported, alias already exists</code>."},{"comment_id":89722477,"body":"If you getting <b>Certificate not imported, alias already exists</b> error then you first need to delete that certificate using alias name like: <b>keytool -delete</b> -noprompt -trustcacerts -alias &lt;AliasName&gt; -file   &lt;certificate&gt; -keystore &lt;KeystoreFile&gt; -storepass &lt;Password&gt;"},{"comment_id":92593874,"body":"Hi folks i just want to add the keyword ATLASSIAN BAMBOO because this fixed my atlassian bamboo agent running on windows server. Adding this keyword to this page will probably help people find this working solution faster through search engines. Many thanks again for the explaination, works perfect."},{"comment_id":111685454,"body":"I am getting <code>keytool error: java.io.IOException: Invalid keystore format</code>"},{"comment_id":114506895,"body":"keytool -import -noprompt -trustcacerts -alias &lt;AliasName&gt; -file   &lt;certificate&gt; -keystore &lt;KeystoreFile&gt; -storepass &lt;Password&gt;  : Can you please a real example of the commands without &lt;value&gt;"},{"comment_id":114512374,"body":"@Raulp: please see edited answer. Be aware that on a win machine you&#39;ll need to add the full path including the drive, e.g. <code>C:\\...</code>. Also you&#39;ll need to run the command line as admin. Cheers!"},{"comment_id":118275531,"body":"@SimonSez I tried everything and added the certificate it was working a day before but now i am again getting the same exception.. can you help me in this <a href=\"https://stackoverflow.com/questions/66868258/sun-security-validator-validatorexception-suncertpathbuilderexception-while-im\" title=\"sun security validator validatorexception suncertpathbuilderexception while im\">stackoverflow.com/questions/66868258/&hellip;</a>"},{"comment_id":120478741,"body":"even after adding certificate, I am getting same error"},{"comment_id":123973085,"body":"Yes the above command is working fine but if your certificate is PKCS12 and you get the error <b>keytool error: java.lang.Exception: Input not an X.509 certificate</b> then first apply this command <code>openssl pkcs12 -clcerts -in certfile.p12 -out newcertfile.cer</code> to convert it to valid format and then apply the above command for newcertfile.cer to add it to the java jre cacerts store."},{"comment_id":129041951,"body":"keytool error: java.lang.Exception: Input not an X.509 certificate"},{"comment_id":131261038,"body":"In your example command <code>keytool -list -keystore &quot;$JAVA_HOME&#47;jre&#47;lib&#47;security&#47;cacerts&quot;</code>, we are listing all the trusted Certificate Authorities in the <i>truststore</i> called <code>cacerts</code>. So why is the <code>-keystore</code> argument named the way it is? Shouldn&#39;t it be <code>-truststore</code>?"},{"comment_id":131566768,"body":"I received <code>keytool error: java.lang.Exception: Keystore file does not exist...</code> - had to run <code>keytool -list -keystore &quot;$JAVA_HOME&#47;lib&#47;security&#47;cacerts&quot;</code> (without the <code>&#47;jre&#47;</code> path) instead to view my keystore."},{"comment_id":131724324,"body":"For me it worked when omitting the &quot;keystore.jks&quot; at the end. So in my case the path was /usr/lib/jvm/&lt;jdk-dir&gt;/cacerts.   <code>Certificate was added to keystore</code>"}],"answer_id":9619478,"body":"<p>You need to add the certificate for <strong>App2</strong> to the truststore file of the used <strong>JVM</strong> located at <code>$JAVA_HOME\\lib\\security\\cacerts</code>.</p>\n<p>First you can check if your certificate is already in the truststore by running the following command:\n<code>keytool -list -keystore &quot;$JAVA_HOME/jre/lib/security/cacerts&quot;</code> (you don't need to provide a password)</p>\n<p>If your certificate is missing, you can get it by downloading it with your browser and add it to the truststore with the following command:</p>\n<pre><code>keytool -import -noprompt -trustcacerts -alias &lt;AliasName&gt; -file   &lt;certificate&gt; -keystore &lt;KeystoreFile&gt; -storepass &lt;Password&gt;\n</code></pre>\n<p><strong>Example:</strong></p>\n<pre><code>keytool -import -noprompt -trustcacerts -alias myFancyAlias -file /path/to/my/cert/myCert.cer -keystore /path/to/my/jdk/jre/lib/security/cacerts/keystore.jks -storepass changeit\n</code></pre>\n<p>After import you can run the first command again to check if your certificate was added.</p>\n<p>Sun/Oracle information can be found <a href=\"http://docs.oracle.com/javase/tutorial/security/toolsign/rstep2.html\" rel=\"noreferrer\">here</a>.</p>\n"},{"comments":[{"comment_id":25137183,"body":"What do you do when the certificate expires? Repeat everything (yearly)?"},{"comment_id":29986343,"body":"Consider using certificates that are valid for a longer time period? Like 50 Years for testing ;)"},{"comment_id":31503558,"body":"Is there any way to do this programmatically?"},{"comment_id":36560830,"body":"For people dealing with the PKIX error, &quot;Path does not chain with any of the trust anchors&quot;, this solution did not solve that problem for me unfortunately."},{"comment_id":43505115,"body":"One Question -  Does the aliasName is web address for which we are importing the certificate? For example, if URL is <a href=\"http://domain.site.com/pages/service.asmx\" rel=\"nofollow noreferrer\">domain.site.com/pages/service.asmx</a> then should alias be domain.site.com or complete URL(domain.site.com/pages/service.asmx) or should it also be prefixed with http:// or it is just an arbitrary name?"},{"comment_id":50511522,"body":"@IcedDante did you ever find a solution? I have the same problem."},{"comment_id":57443992,"body":"I am getting the same error, when I am calling Twitter source from flume. My jdk version is 1.8.0_45. What could be the problem because I have the latest jdk?"},{"comment_id":70861883,"body":"path:\\lib\\security&gt; keytool -import -noprompt -trustcacerts -alias webCert -file webCertResource.cer -keystore c:/Users/Jackie/Desktop -storepass changeit                          I get &quot;the system cannot find the file specified&quot;"},{"comment_id":102513054,"body":"If you get the error @Jesse had just ensure you run cmd with admin privileges"},{"comment_id":102622787,"body":"Nice, nice, nice and niiiiiice!"},{"comment_id":117115974,"body":"This did not work for me right away, the next day it suddenly did, so maybe you need to turn off your JVM/PC and try again"},{"comment_id":118747664,"body":"this worked for me I was getting PKIX error"},{"comment_id":123773242,"body":"FYI, <code>cacerts</code> file for Android Studio on MacOS is located in <code>&#47;Applications&#47;Android Studio.app&#47;Contents&#47;jre&#47;Contents&#47;Home&#47;lib&#47;security</code>"},{"comment_id":132308659,"body":"@NDeveloper how can i get the  HTTPS URL that Java could not access from the error because for my case i was building an apk and i don&#39;t know what url is being accessed"}],"answer_id":12524960,"body":"<blockquote>\n<p>javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</p>\n</blockquote>\n<p>• When I got the error, I tried to Google out the meaning of the expression and I found, this issue occurs when a server changes their HTTPS SSL certificate, and our older version of java doesn’t recognize the root certificate authority (CA).</p>\n<p>• If you can access the HTTPS URL in your browser then it is possible to update Java to recognize the root CA.</p>\n<p>• In your browser, go to the HTTPS URL that Java could not access. Click on the HTTPS certificate chain (there is lock icon in the Internet Explorer), click on the lock to view the certificate.</p>\n<p>• Go to “Details” of the certificate and “Copy to file”. Copy it in <strong>Base64 (.cer)</strong> format. It will be saved on your Desktop.</p>\n<p>• Install the certificate ignoring all the alerts.</p>\n<p>• This is how I gathered the certificate information of the URL that I was trying to access.</p>\n<p>Now I had to make my java version to know about the certificate so that further it doesn’t refuse to recognize the URL. In this respect I must mention that I googled out that root certificate information stays by default in JDK’s  <strong>\\jre\\lib\\security</strong> location, and the default password to access is: <strong>changeit.</strong></p>\n<p>To view the cacerts information the following are the procedures to follow:</p>\n<p>• Click on Start Button--&gt;Run</p>\n<p>• Type cmd. The command prompt opens (you may need to open it as administrator).</p>\n<p>• Go to your <code>Java/jreX/bin</code> directory</p>\n<p>• Type the following</p>\n<pre><code>keytool -list -keystore D:\\Java\\jdk1.5.0_12\\jre\\lib\\security\\cacerts\n</code></pre>\n<p>It gives the list of the current certificates contained within the keystore. It looks something like this:</p>\n<pre><code>C:\\Documents and Settings\\NeelanjanaG&gt;keytool -list -keystore D:\\Java\\jdk1.5.0_12\\jre\\lib\\security\\cacerts\n\nEnter keystore password:  changeit\n\nKeystore type: jks\n\nKeystore provider: SUN\n\nYour keystore contains 44 entries\n\nverisignclass3g2ca, Mar 26, 2004, trustedCertEntry,\n\nCertificate fingerprint (MD5): A2:33:9B:4C:74:78:73:D4:6C:E7:C1:F3:8D:CB:5C:E9\n\nentrustclientca, Jan 9, 2003, trustedCertEntry,\n\nCertificate fingerprint (MD5): 0C:41:2F:13:5B:A0:54:F5:96:66:2D:7E:CD:0E:03:F4\n\nthawtepersonalbasicca, Feb 13, 1999, trustedCertEntry,\n\nCertificate fingerprint (MD5): E6:0B:D2:C9:CA:2D:88:DB:1A:71:0E:4B:78:EB:02:41\n\naddtrustclass1ca, May 1, 2006, trustedCertEntry,\n\nCertificate fingerprint (MD5): 1E:42:95:02:33:92:6B:B9:5F:C0:7F:DA:D6:B2:4B:FC\n\nverisignclass2g3ca, Mar 26, 2004, trustedCertEntry,\n\nCertificate fingerprint (MD5): F8:BE:C4:63:22:C9:A8:46:74:8B:B8:1D:1E:4A:2B:F6\n</code></pre>\n<p>• Now I had to include the previously installed certificate into the cacerts.</p>\n<p>• For this the following is the procedure:</p>\n<pre><code>keytool -import -noprompt -trustcacerts -alias ALIASNAME -file FILENAME_OF_THE_INSTALLED_CERTIFICATE -keystore PATH_TO_CACERTS_FILE -storepass PASSWORD\n</code></pre>\n<p>If you are using Java 7:</p>\n<pre><code>keytool -importcert -trustcacerts -alias ALIASNAME -file PATH_TO_FILENAME_OF_THE_INSTALLED_CERTIFICATE -keystore PATH_TO_CACERTS_FILE -storepass changeit\n</code></pre>\n<p>• It will then add the certificate information into the cacert file.</p>\n<p>It is the solution I found for the Exception mentioned above!!</p>\n"},{"answer_id":13747000,"body":"<p>i wrote a small win32 (WinXP 32bit testet) stupid cmd (commandline) script which looks for all java versions in program files and adds a cert to them. \nThe Password needs to be the default \"changeit\" or change it yourself in the script :-)</p>\n\n<pre><code>@echo off\n\nfor /F  %%d in ('dir /B %ProgramFiles%\\java') do (\n    %ProgramFiles%\\Java\\%%d\\bin\\keytool.exe -import -noprompt -trustcacerts -file some-exported-cert-saved-as.crt -keystore %ProgramFiles%\\Java\\%%d\\lib\\security\\cacerts -storepass changeit\n)\n\npause\n</code></pre>\n"},{"comments":[{"comment_id":35649597,"body":"This works wonderfully if the problem is that you are using an older version of java which does not have the latest certificates."},{"comment_id":71533862,"body":"@atripathi how about a Mac?"},{"comment_id":89099075,"body":"There was something seriously wrong with your Java installation if the cacerts file was empty. You should have reinstalled it all."},{"comment_id":89118569,"body":"Perhaps, but this solution worked and nothing was ever wrong afterwards."}],"answer_id":17890083,"body":"<p>My cacerts file was totally empty.  I solved this by copying the cacerts file off my windows machine (that's using Oracle Java 7) and scp'd it to my Linux box (OpenJDK).  </p>\n\n<pre><code>cd %JAVA_HOME%/jre/lib/security/\nscp cacerts mylinuxmachin:/tmp\n</code></pre>\n\n<p>and then on the linux machine</p>\n\n<pre><code>cp /tmp/cacerts /etc/ssl/certs/java/cacerts\n</code></pre>\n\n<p>It's worked great so far.</p>\n"},{"answer_id":24132430,"body":"<p>For Tomcat running on Ubuntu server, to find out which Java is being used, use \"ps -ef | grep tomcat\" command:</p>\n\n<p>Sample:</p>\n\n<pre><code>/home/mcp01$ **ps -ef |grep tomcat**\ntomcat7  28477     1  0 10:59 ?        00:00:18 **/usr/local/java/jdk1.7.0_15/bin/java** -Djava.util.logging.config.file=/var/lib/tomcat7/conf/logging.properties -Djava.awt.headless=true -Xmx512m -XX:+UseConcMarkSweepGC -Djava.net.preferIPv4Stack=true -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.endorsed.dirs=/usr/share/tomcat7/endorsed -classpath /usr/share/tomcat7/bin/bootstrap.jar:/usr/share/tomcat7/bin/tomcat-juli.jar -Dcatalina.base=/var/lib/tomcat7 -Dcatalina.home=/usr/share/tomcat7 -Djava.io.tmpdir=/tmp/tomcat7-tomcat7-tmp org.apache.catalina.startup.Bootstrap start\n1005     28567 28131  0 11:34 pts/1    00:00:00 grep --color=auto tomcat\n</code></pre>\n\n<p>Then, we can go in to: <strong>cd /usr/local/java/jdk1.7.0_15/jre/lib/security</strong></p>\n\n<p>Default <strong>cacerts</strong> file is located in here. Insert the untrusted certificate into it.</p>\n"},{"comments":[{"comment_id":54040569,"body":"Step 2 did the trick for me using SpringBoot and Tomcat 7. Thank you."},{"comment_id":70112866,"body":"Do I have to use keytool from java that is used by tomcat?because on one server I can have many java"},{"comment_id":70123055,"body":"@vikifor yes. You can also run it for all java dirs installed on your system"},{"comment_id":77162696,"body":"I get <code>Keystore was tampered with, or password was incorrect</code> error while -importing <code>.crt</code>"},{"comment_id":77169896,"body":"@prayagupd - maybe the store password is different? the default password is <code>changeit</code>. see <a href=\"https://stackoverflow.com/q/16891182/3191896\">stackoverflow.com/q/16891182/3191896</a>"},{"comment_id":91684277,"body":"This worked ! thanks a ton @JossefHarush for such an useful answer !"},{"comment_id":107090495,"body":"my issue was solved after adding @Jossef Harush&#39;s code segment into my code."},{"comment_id":123928280,"body":"@JossefHarush thanks a lot for posting this!! it worked like a charm!!"}],"answer_id":32074827,"body":"<h1>How to work-it in Tomcat 7</h1>\n<p>I wanted to support a self signed certificate in a Tomcat App but <strong>the following snippet failed to work</strong></p>\n<pre><code>import java.io.DataOutputStream;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\n\npublic class HTTPSPlayground {\n    public static void main(String[] args) throws Exception {\n\n        URL url = new URL(&quot;https:// ... .com&quot;);\n        HttpURLConnection httpURLConnection = (HttpURLConnection) url.openConnection();\n\n        httpURLConnection.setRequestMethod(&quot;POST&quot;);\n        httpURLConnection.setRequestProperty(&quot;Accept-Language&quot;, &quot;en-US,en;q=0.5&quot;);\n        httpURLConnection.setDoOutput(true);\n        DataOutputStream wr = new DataOutputStream(httpURLConnection.getOutputStream());\n\n        String serializedMessage = &quot;{}&quot;;\n        wr.writeBytes(serializedMessage);\n        wr.flush();\n        wr.close();\n\n        int responseCode = httpURLConnection.getResponseCode();\n        System.out.println(responseCode);\n    }\n}\n</code></pre>\n<p>this is what solved my issue:</p>\n<h2><strong>1) Download the <code>.crt</code> file</strong></h2>\n<pre><code>echo -n | openssl s_client -connect &lt;your domain&gt;:443 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' &gt; ~/&lt;your domain&gt;.crt\n</code></pre>\n<ul>\n<li>replace <code>&lt;your domain&gt;</code> with your domain (e.g. <code>jossef.com</code>)</li>\n</ul>\n<h2>2) Apply the <code>.crt</code> file in Java's <code>cacerts</code> certificate store</h2>\n<pre><code>keytool -import -v -trustcacerts -alias &lt;your domain&gt; -file ~/&lt;your domain&gt;.crt -keystore &lt;JAVA HOME&gt;/jre/lib/security/cacerts -keypass changeit -storepass changeit\n</code></pre>\n<ul>\n<li>replace <code>&lt;your domain&gt;</code> with your domain (e.g. <code>jossef.com</code>)</li>\n<li>replace <code>&lt;JAVA HOME&gt;</code> with your java home directory</li>\n</ul>\n<h2>3) Hack it</h2>\n<p>Even though iv'e installed my certificate in <code>Java</code>'s default certificate stores, <strong>Tomcat ignores that</strong> (seems like it's not configured to use Java's default certificate stores).</p>\n<p>To hack this, add the following somewhere in your code:</p>\n<pre><code>String certificatesTrustStorePath = &quot;&lt;JAVA HOME&gt;/jre/lib/security/cacerts&quot;;\nSystem.setProperty(&quot;javax.net.ssl.trustStore&quot;, certificatesTrustStorePath);\n\n// ...\n</code></pre>\n"},{"comments":[{"comment_id":71752761,"body":"Same for me. An update from Java 1.8.0_91 to 1.8.0_121 solved the problem. I got the exception by using Apache HTTPClient."},{"comment_id":78692763,"body":"I still have this issue using Oauth2 authentication"}],"answer_id":42153814,"body":"<p>I have this problem too.</p>\n\n<p>I tried almost everything by adding the SSL cert to .keystore, but, it was not working with Java1_6_x.\nFor me it helped if we start using newer version of Java, Java1_8_x as JVM.</p>\n"},{"answer_id":42616647,"body":"<p>Using Tomcat 7 under Linux, this did the trick.</p>\n\n<pre><code>String certificatesTrustStorePath = \"/etc/alternatives/jre/lib/security/cacerts\";\nSystem.setProperty(\"javax.net.ssl.trustStore\", certificatesTrustStorePath);\nSystem.setProperty(\"javax.net.ssl.trustStorePassword\", \"changeit\");\n</code></pre>\n\n<p>Under Linux, <code>$JAVA_HOME</code> is not always setup, but usually <code>/etc/alternatives/jre</code> points to <code>$JAVA_HOME/jre</code></p>\n"},{"comments":[{"comment_id":96126467,"body":"thats look like what im having. can you explain on how you added the intermediate certs and where. im using httpd revers proxy and not NGINX ."},{"comment_id":96126902,"body":"this helped me in my case becasue im using httpd: <a href=\"https://access.redhat.com/solutions/43575\" rel=\"nofollow noreferrer\">access.redhat.com/solutions/43575</a>"},{"comment_id":104191249,"body":"With nginx, It only uses .key and .pem files for SSL config. First you convert .crt to .pem (simply: cp yourfile.crt yourfile.pem) and then for the SSL cert chain: you append .cer file to the last of .pem (cat yourfile.cer &gt;&gt; yourfile.pem)"}],"answer_id":43572322,"body":"<p>For me, this error appeared too while trying to connect to a process behind an NGINX reverse proxy which was handling the SSL. </p>\n\n<p>It turned out the problem was a certificate without the entire certificate chain concatenated. \nWhen I added intermediate certs, the problem was solved.</p>\n\n<p>Hope this helps.</p>\n"},{"comments":[{"comment_id":91467382,"body":"I had the same problem too. Calling an API with a Lets Encrypt Certificate may not work with older versions of Java because it isn&#39;t recognized by the trusted root certification authorities.  Updating Java will solve this issue."}],"answer_id":47952835,"body":"<p>Another reason could be an outdated version of JDK. I was using jdk version 1.8.0_60, simply updating to the latest version solved the certificate issue. </p>\n"},{"comments":[{"comment_id":89099081,"body":"This code is totally insecure and should not be used."},{"comment_id":100931797,"body":"@user207421 Why is it insecure? What is happening in the code briefly."},{"comment_id":106534459,"body":"This is skipping all certificate validations, basically it&#39;s allowing any certificate to be accepted.  The way certs work is that there&#39;s a root certificate (literally) physically protected, at various certifying authorities.  This certificate is then used to issue other secondary certs, which can be validated all the way back to the root certifying authority.  This is skipping all the upstream checks, meaning that I can send in any ssl cert (even self generated) and your application will accept it as secure, even though my identity as a url is not verified."}],"answer_id":50285016,"body":"<p>It is possible to disable SSL verification programmatically.  Works in a pinch for dev, but not recommended for production since you'll want to either use &quot;real&quot; SSL verification there or install and use your own trusted keys and then still use &quot;real&quot; SSL verification.</p>\n<p>Below code works for me:</p>\n<pre><code>import java.security.cert.CertificateException;\nimport java.security.cert.X509Certificate;\n\nimport javax.net.ssl.X509TrustManager;\n\npublic class TrustAnyTrustManager implements X509TrustManager {\n\n  public void checkClientTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n  }\n\n  public void checkServerTrusted(X509Certificate[] chain, String authType) throws CertificateException {\n  }\n\n  public X509Certificate[] getAcceptedIssuers() {\n    return null;\n  }\n}\n</code></pre>\n<hr />\n<pre><code>             HttpsURLConnection conn = null;\n             URL url = new URL(serviceUrl);\n             conn = (HttpsURLConnection) url.openConnection();\n             SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);  \n             sc.init(null, new TrustManager[]{new TrustAnyTrustManager()}, new java.security.SecureRandom());  \n                    // Create all-trusting host name verifier\n             HostnameVerifier allHostsValid = new HostnameVerifier() {\n               public boolean verify(String hostname, SSLSession session) {\n                return true;\n              }\n            };\n            conn.setHostnameVerifier(allHostsValid);\n</code></pre>\n<p>Or if you don't control the <code>Connection</code>s underneath, you can also override SSL verification globally for all connections <a href=\"https://stackoverflow.com/a/19542614/32453\">https://stackoverflow.com/a/19542614/32453</a></p>\n<p>If you are using Apache HTTPClient you must disable it &quot;differently&quot; (sadly): <a href=\"https://stackoverflow.com/a/2703233/32453\">https://stackoverflow.com/a/2703233/32453</a></p>\n"},{"answer_id":51510406,"body":"<p>I was using <code>jdk1.8.0_171</code> when I faced the same issue. I tried top 2 solutions here (adding a certificate using keytool and another solution which has a hack in it) but they didn't work for me.</p>\n\n<p>I upgraded my JDK to <code>1.8.0_181</code> and it worked like a charm.</p>\n"},{"answer_id":52501530,"body":"<p>In my case the issue was that the webserver was only sending the certificate and the intermediate CA, not the root CA.\nAdding this JVM option solved the problem: <code>-Dcom.sun.security.enableAIAcaIssuers=true</code></p>\n<blockquote>\n<p>Support for the caIssuers access method of the Authority Information Access extension is available. It is disabled by default for compatibility and can be enabled by setting the system property <code>com.sun.security.enableAIAcaIssuers</code> to the value true.</p>\n<p>If set to true, Sun's PKIX implementation of CertPathBuilder uses the information in a certificate's AIA extension (in addition to CertStores that are specified) to find the issuing CA certificate, provided it is a URI of type ldap, http, or ftp.</p>\n</blockquote>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/security/certpath/CertPathProgGuide.html#AIA\" rel=\"noreferrer\">Source</a></p>\n"},{"answer_id":54180049,"body":"<p>for safety we should not use self signed certificates in our implementation. However, when it comes to development often we have to use trial environments which got self-signed certs. I tried to fix this issue programmatically in my code and I fail. However, by adding the cert to the jre trust-store fixed my issue. Please find below steps,</p>\n\n<ol>\n<li><p>Download the site cert,</p>\n\n<ul>\n<li>Using <a href=\"https://drive.google.com/file/d/1wCoE8KX-vUM4RKc15wqsLnNWL9gTUJwp/view?usp=sharing\" rel=\"nofollow noreferrer\">Chrome</a> </li>\n<li>Using <a href=\"https://superuser.com/a/97203/358866\">Firefox</a></li>\n</ul></li>\n<li><p>Copy the certificate(ex:cert_file.cer) into the directory $JAVA_HOME\\Jre\\Lib\\Security</p></li>\n<li><p>Open CMD in Administrator and change the directory to $JAVA_HOME\\Jre\\Lib\\Security</p></li>\n<li><p>Import the certificate to a trust store using below command,</p></li>\n</ol>\n\n<blockquote>\n  <p>keytool -import -alias ca -file <strong>cert_file.cer</strong> -keystore cacerts\n  -storepass changeit</p>\n</blockquote>\n\n<p><em>If you got a error saying keytool is not recognizable please <a href=\"https://stackoverflow.com/a/14199969/3168721\">refer this.</a></em></p>\n\n<p>Type <strong>yes</strong> like below</p>\n\n<blockquote>\n  <p>Trust this certificate: <strong>[Yes]</strong></p>\n</blockquote>\n\n<ol start=\"5\">\n<li>Now try to run your code or access the URL programmatically using java.</li>\n</ol>\n\n<hr>\n\n<p><strong>Update</strong></p>\n\n<p>If your app server is jboss try adding below system property</p>\n\n<pre><code>System.setProperty(\"org.jboss.security.ignoreHttpsHost\",\"true\");\n</code></pre>\n\n<p>Hope this helps!</p>\n"},{"answer_id":56109973,"body":"<p>For MacOS X below is the exact command worked for me where I had to try with double hypen in  'importcert' option which worked :</p>\n\n<pre><code>sudo keytool -–importcert -file /PathTo/YourCertFileDownloadedFromBrowserLockIcon.crt -keystore /Library/Java/JavaVirtualMachines/jdk1.8.0_191.jdk/Contents/Home/jre/lib/security/cacerts -alias \"Cert\" -storepass changeit\n</code></pre>\n"},{"answer_id":58282432,"body":"<p>I was having this problem with Android Studio when I'm behind a proxy. I was using Crashlytics that tries to upload the mapping file during a build. </p>\n\n<p>I added the missing proxy certificate to the truststore located at \n<code>/Users/[username]/Documents/Android Studio.app/Contents/jre/jdk/Contents/Home/jre/lib/security/cacerts</code> </p>\n\n<p>with the following command: <code>keytool -import -trustcacerts -keystore cacerts -storepass [password] -noprompt -alias [alias] -file [my_certificate_location]</code></p>\n\n<p>for example with the default truststore password\n<code>keytool -import -trustcacerts -keystore cacerts -storepass changeit -noprompt -alias myproxycert -file /Users/myname/Downloads/MyProxy.crt</code></p>\n"},{"comments":[{"comment_id":103218894,"body":"Code-only answers are generally frowned upon on this site. Could you please edit your answer to include some comments or explanation of your code? Explanations should answer questions like: What does it do? How does it do it? Where does it go? How does it solve OP&#39;s problem?"},{"comment_id":106383441,"body":"<i>add this to your code</i>  No.  <b>Do not add this to your code</b>.  Creating an SSLContext in this manner removes all security checks that verify the identity of the server you are connecting to.  The answer to the problem of losing your keys is <b>NOT</b> to remove all the locks from everything you own."}],"answer_id":58439244,"body":"<p>In a pinch, you can disable SSL entirely, or per connection (note this is not recommended for production!) see <a href=\"https://stackoverflow.com/a/19542614/32453\">https://stackoverflow.com/a/19542614/32453</a></p>\n"},{"answer_id":59087392,"body":"<p>For me didn't work the recognized solution from this post: <a href=\"https://stackoverflow.com/a/9619478/4507034\">https://stackoverflow.com/a/9619478/4507034</a>.</p>\n\n<p>Instead, I managed to solve the problem by importing the certification to my machine trusted certifications.</p>\n\n<p>Steps: </p>\n\n<ol>\n<li>Go to the URL (eg. <code>https://localhost:8443/yourpath</code>) where the certification is not working. </li>\n<li>Export the certification as described in the mentioned post.</li>\n<li>On your windows machine open: <code>Manage computer certificates</code></li>\n<li>Go to <code>Trusted Root Certification Authorities</code> -> <code>Certificates</code></li>\n<li>Import here your <code>your_certification_name.cer</code> file.  </li>\n</ol>\n"},{"answer_id":59532940,"body":"<p>Just a small hack. Update the URL in the file \"hudson.model.UpdateCenter.xml\" from https to http</p>\n\n<pre><code>&lt;?xml version='1.1' encoding='UTF-8'?&gt;\n&lt;sites&gt;\n  &lt;site&gt;\n    &lt;id&gt;default&lt;/id&gt;\n    &lt;url&gt;http://updates.jenkins.io/update-center.json&lt;/url&gt;\n  &lt;/site&gt;\n&lt;/sites&gt;\n</code></pre>\n"},{"answer_id":60148613,"body":"<p><strong>DEPLOYABLE SOLUTION (Alpine Linux)</strong></p>\n\n<p>To be able to fix this issue in our application environments, we have prepared Linux terminal commands as follows:</p>\n\n<pre><code>cd ~\n</code></pre>\n\n<p>Will generate cert file in home directory.</p>\n\n<pre><code>apk add openssl\n</code></pre>\n\n<p>This command installs openssl in alpine Linux. You can find proper commands for other Linux distributions.</p>\n\n<pre><code>openssl s_client -connect &lt;host-dns-ssl-belongs&gt; &lt; /dev/null | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' &gt; public.crt\n</code></pre>\n\n<p>Generated the needed cert file.</p>\n\n<pre><code>sudo $JAVA_HOME/bin/keytool -import -alias server_name -keystore $JAVA_HOME/lib/security/cacerts -file public.crt -storepass changeit -noprompt\n</code></pre>\n\n<p>Applied the generated file to the JRE with the program 'keytool'.</p>\n\n<p><strong>Note:</strong> Please replace your DNS with <code>&lt;host-dns-ssl-belongs&gt;</code></p>\n\n<p><strong>Note2:</strong> Please gently note that <code>-noprompt</code> will not prompt the verification message (yes/no) and <code>-storepass changeit</code> parameter will disable password prompt and provide the needed password (default is 'changeit'). These two properties will let you use those scripts in your application environments like building a Docker image.</p>\n\n<p><strong>Note3</strong> If you are deploying your app via Docker, you can generate the secret file once and put it in your application project files. You won't need to generate it again and again.</p>\n"},{"answer_id":60924899,"body":"<p>I want to chime in since I have a QEMU environment where I have to download files in java. It turns out the <code>/etc/ssl/certs/java/cacerts</code> in QEMU does have problem because it does not match the <code>/etc/ssl/certs/java/cacerts</code> in the host environment. The host environment is behind a company proxy so the java cacerts is a customized version.</p>\n\n<p>If you are using a QEMU environment, make sure the host system can access files first. For example you can try <a href=\"https://gist.github.com/yunqu/a324cfd436b7deef29788294e1e994be\" rel=\"nofollow noreferrer\">this script</a> on your host machine first to see. If the script runs just fine in host machine but not in QEMU, then you are having the same problem as me.</p>\n\n<p>To solve this issue, I had to make a backup of the original file in QEMU, copy over the file in host environment to the QEMU chroot jail, and then java could download files normally in QEMU.</p>\n\n<p>A better solution would be mount the <code>/etc</code> into the QEMU environment; however I am not sure if other files will get impacted in this process. So I decided to use this ugly but easy work-around.</p>\n"},{"answer_id":61894817,"body":"<p>This seems as good a place as any to document another possible reason for the infamous PKIX error message. After spending far too long looking at the keystore and truststore contents and various java installation configs I realised that my issue was down to... a typo.</p>\n\n<p>The typo meant that I was also using the keystore as the truststore. As my companies Root CA was not defined as a standalone cert in the keystore but only as part of a cert chain, and was not defined anywhere else (i.e. cacerts) I kept getting the PKIX error. </p>\n\n<p>After a failed release (this is prod config, it was ok elsewhere) and two days of head scratching I finally saw the typo, and now all is good.</p>\n\n<p>Hope this helps someone.</p>\n"},{"answer_id":65127236,"body":"<p>My two cents:\nIn my case, cacerts was not a folder, but a file, and also it was presents on two paths\nAfter discover it, error disappeared after copy the .jks file over that file.</p>\n<pre><code># locate cacerts    \n/usr/java/jdk1.8.0_221-amd64/jre/lib/security/cacerts\n/usr/java/jre1.8.0_221-amd64/lib/security/cacerts\n</code></pre>\n<p>After backup them, I copy the .jks over.</p>\n<pre><code>cp /path_of_jks_file/file.jks /usr/java/jdk1.8.0_221-amd64/jre/lib/security/cacerts\ncp /path_of_jks_file/file.jks /usr/java/jre1.8.0_221-amd64/lib/security/cacerts\n</code></pre>\n<p>Note: this basic trick resolves this error on a Genexus project, in spite file.jks is also on the server.xml file of the Tomcat.</p>\n"},{"answer_id":65556641,"body":"<ul>\n<li>Make sure of your JVM location. There can be half a dozen JREs on\nyour system. Which one is your Tomcat really using? Anywhere inside\ncode running in your Tomcat, write\nprintln(System.getProperty(&quot;java.home&quot;)). Note this location. In\n&lt;java.home&gt;/lib/security/cacerts file are the certificates used by\nyour Tomcat.</li>\n<li>Find the root certificate that is failing. This can be\nfound by turning on SSL debug using -Djavax.net.debug=all. Run your\napp and note from console ssl logs the CA that is failing. Its url\nwill be available. In my case I was surprised to find that a proxy zscaler was the one which was failing, as it was actually proxying my calls, and returning its own CA certificate.</li>\n<li>Paste url in browser. Certificate will get\ndownloaded.</li>\n<li>Import this certificate into cacerts using keytool import.</li>\n</ul>\n"},{"answer_id":65724012,"body":"<p>I ran into this issue while making REST calls from my app server running in AWS EC2. The following Steps fixed the issue for me.</p>\n<ol>\n<li>curl -vs https://your_rest_path</li>\n<li>echo | openssl s_client -connect your_domain:443</li>\n<li>sudo apt-get install ca-certificates</li>\n</ol>\n<p>curl -vs https://your_rest_path will now work!</p>\n"},{"answer_id":66725263,"body":"<p>I also have the same problem on Apache Tomcat/7.0.67 and Java JVM Version: 1.8.0_66-b18. With upgrading Java to JRE 1.8.0_241 and it seems that the issue was solved.</p>\n"},{"answer_id":67879874,"body":"<p>If you are  using JDK 11, the folder doesn't have JRE in it anymore.  The location for the certs is jdk-11.0.11/lib/security/cacerts.</p>\n"},{"answer_id":68393826,"body":"<p>I am using flutter and  received this error out of nowhere. So, what basically happens is that the lines within your dependencies within <code>android/build.gradle</code> file such as:</p>\n<pre><code>  classpath 'com.android.tools.build:gradle:4.1.0'\n  classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n</code></pre>\n<p>require certification that the grade file downloads from the internet. But when there is something that's blocking the gradle to download those certificates, this is typically shown.</p>\n<p>I tried exporting the certificate and adding it manually but it didn't seem to work for me. What worked for me, after countless head scratches, was disabling the proxies from your network preferences. It was somewhere mentioned that disabling Charles Proxy would fix it but at that moment, I was clueless what Charles was and what proxy was. And in my case, I did not have the Charles proxy thing so I went on with finding the proxies in the network preferences settings in Mac( it could be found somewhere in network settings for Windows). I had Socks enabled within the proxy. I disabled it and then again rebuilt the gradle and TA-DAH!!! It worked butter smooth.</p>\n<p>There are a few things to remember. If you build your project right after disabling proxy without closing the network preferences tab, the disable proxies won't work and it will show the same error. Also if you've already built the project and you're running it again after disabling proxies, chances are it's gonna show the same error( could be due to IDE caches). How it worked for me: Restart the Mac, open a few tabs in the browser( for a few network calls), check the network preferences from system preferences&gt;&gt; wifi and disable proxies, close the system preferences app, and build the project.</p>\n"},{"answer_id":68955046,"body":"<p>Watch out for great answer for @NDeveloper. I did copy-paste of course, changing the values and I was getting</p>\n<pre><code>Illegal option:  ?import\n</code></pre>\n<p>I did checkout the hyphens and I saw that on that answer was the hyphen using the ASCII</p>\n<pre><code>– 8211\n</code></pre>\n<p>If you are getting problems check that the ASCII code that did the trick for me was this code = 45</p>\n<pre><code>- 45\n</code></pre>\n<p>My code</p>\n<pre><code>keytool -import -noprompt -trustcacerts -alias Certificado -file &quot;C:\\Users\\JavIut\\Desktop\\Company\\Certificados\\Certificado.cer&quot; -keystore &quot;C:\\Program Files\\Java\\jdk1.8.0_121\\jre\\lib\\security\\cacerts&quot;\n</code></pre>\n"},{"answer_id":69974545,"body":"<p>For OkHttpClient, this solution worked for me.\nIt might help someone using the library...</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n\n            String proxyHost = &quot;proxy_host&quot;;\n            String proxyUsername = &quot;proxy_username&quot;;\n            String proxyPassword = &quot;proxy_password&quot;;\n\n            Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(proxyHost, &quot;port goes here&quot;));\n\n            // Create a trust manager that does not validate certificate chains\n            TrustManager[] trustAllCerts = new TrustManager[]{\n                new X509TrustManager() {\n                    @Override\n                    public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n                        return new java.security.cert.X509Certificate[]{};\n                    }\n                    @Override\n                    public void checkClientTrusted(\n                            java.security.cert.X509Certificate[] certs, String authType) {\n                    }\n                    @Override\n                    public void checkServerTrusted(\n                            java.security.cert.X509Certificate[] certs, String authType) {\n                    }\n                }\n            };\n\n            // Install the all-trusting trust manager\n            final SSLContext sslContext = SSLContext.getInstance(&quot;SSL&quot;);\n            sslContext.init(null, trustAllCerts, new java.security.SecureRandom());\n            // Create an ssl socket factory with our all-trusting manager\n            final SSLSocketFactory sslSocketFactory = sslContext.getSocketFactory();\n\n            OkHttpClient client = new OkHttpClient().newBuilder()\n                    .sslSocketFactory(sslSocketFactory, (X509TrustManager) trustAllCerts[0])\n                    .hostnameVerifier((hostname, session) -&gt; true)\n                    .connectTimeout(timeout, TimeUnit.SECONDS)\n                    .proxy(proxy)\n                    .proxyAuthenticator((route, response) -&gt; {\n                        String credential = Credentials.basic(proxyUsername, proxyPassword);\n                        return response.request().newBuilder()\n                                .header(&quot;Proxy-Authorization&quot;, credential)\n                                .build();\n                    })\n                    .build();\n\n            MediaType mediaType = MediaType.parse(&quot;application/json&quot;);\n            RequestBody requestBody = RequestBody.create(payload, mediaType);\n\n            Request request = new Request.Builder()\n                    .url(url)\n                    .header(&quot;Authorization&quot;, &quot;authorization data goes here&quot;)\n                    .method(requestMethod, requestBody)\n                    .build();\n\n            Response response = client.newCall(request).execute();\n\n            resBody = response.body().string();\n\n            int responseCode = response.code();\n\n        } catch (Exception ex) {\n        }\n</code></pre>\n"},{"answer_id":70789493,"body":"<p>Looking on various certificates contents and the ones generated through the standard openssl procedure i noticed that the AutorityKeyIdentifier was set, for the openssl root certificate, to itself. Probably there is a way to overcome that...but i don't know it...</p>\n<p>Then i developed a small application with Java11 &amp; BouncyCastle to generate root certificates and keys, now on github: <a href=\"https://github.com/kendarorg/JavaCaCertGenerator\" rel=\"nofollow noreferrer\">https://github.com/kendarorg/JavaCaCertGenerator</a></p>\n<p>The root certificates generated with this tool DOES NOT CONTAINS the AuthorityKeyIdentifier and can be installed with keytool directly on the cacert store. When i create then the csr and the ext file with the domain names this will be validated against the cacert store containing the root.. and no more handshake exceptions!</p>\n<p>May be the cacert does not allow a recursive AuthorityKeyIdentifier? I don'know but i'll appreciate some review :)</p>\n"},{"comments":[{"comment_id":132278973,"body":"do you have this solution for macos"}],"answer_id":72237299,"body":"<p>I was getting this error in Android Studio. SO i did this after a lot of research.</p>\n<p>Password is changeit for cacert</p>\n<p>Step 1 : Open CMD as Administrator</p>\n<p>Step 2 : Type &quot;Powershell&quot;</p>\n<p>Step 3 : start-process powershell -verb runas</p>\n<p>Step 4 : Add all your Certificate in C:\\Program Files\\Android\\Android\nStudio\\jre\\lib\\security this location where cacert is available.</p>\n<p>Step 5 : Go to Keytool directory Set-Location -Path &quot;C:\\Program Files\\Android\\Android Studio\\jre\\bin&quot;</p>\n<p>Step 6 : run this command in powershell   .\\keytool -importcert -trustcacerts -alias GiveNameforyourcertificate -file &quot;C:\\Program Files\\Android\\Android Studio\\jre\\lib\\security\\Replace With Your Certificate name.cer&quot; -keystore cacerts</p>\n<p>Step 7 : If Error comes as Certificate added (Access denied) then create a D drive partition(<a href=\"https://www.diskpart.com/windows-10/how-to-create-d-drive-from-c-drive-in-windows-10-0725.html\" rel=\"nofollow noreferrer\">https://www.diskpart.com/windows-10/how-to-create-d-drive-from-c-drive-in-windows-10-0725.html</a>) or move you file to d drive then add certificate</p>\n<p>If you kept your file in D drive then only execute this</p>\n<p>Step 8 : keytool -importcert -trustcacerts -alias Nameyourcertificate -file &quot;D:\\Certificatename.cer&quot; -keystore cacerts</p>\n<p>Step 9 : Check if certificate was added or not  using this command  .\\keytool -list -keystore cacerts</p>\n"},{"answer_id":74932094,"body":"<p>We too had same issue and we did all following things.</p>\n<ol>\n<li>Reimported Server SSL certificates.</li>\n<li>Made sure weblogic is using the proper caecerts.</li>\n</ol>\n<p>Finally our weblogic enabled weblogic DEBUG mode and found there is &quot;NOT HANDSHAKED&quot; exception.</p>\n<p>Reason we found is ,  client system is using jdk 1.6 and server is using higher jdk version ( 1.8) because of which there is some TLS version mismatch causing the issue.</p>\n<p>Weblogic team tweaked server configuration by adding following lines in server arguments.</p>\n<pre><code>-Djdk.tls.client.protocol=TLSv1.2 -DUseSunHttpHandler=true.\n</code></pre>\n"},{"answer_id":76117236,"body":"<p>I have been searching about similar problem, because I need to serve angular application on local domain like as example.com as securely.</p>\n<p>To create certificate,</p>\n<pre><code>openssl req  -newkey rsa:2048 -x509 -nodes -keyout server.key -new -out server.crt  -config ./openssl-custom.cnf -sha256  -days 3650\n</code></pre>\n<p>openss-custom.cnf</p>\n<pre><code>[req]\ndefault_bits = 2048\nprompt = no\ndefault_md = sha256\nx509_extensions = v3_req\ndistinguished_name = dn\n\n[dn]\nC = TR\nST = Ankara\nL = Ankara\nO = Example\nOU = Angular\nemailAddress = angular@example.com\nCN = *.example.com\n\n[v3_req]\nsubjectAltName = @alt_names\n\n[alt_names]\nDNS.1 = *.example.com\n</code></pre>\n<p>Evenif I import this certificate to cacerts of the active jre, Spring boot application didn't work properly. And &quot;trustAnchor must be non empty&quot; error was throwed. Because jvm didn't contain my truststore. To solve this problem, truststore  should be given to jvm parameter.</p>\n<p>Set this parameters at spring boot side</p>\n<pre><code>@Configuration\npublic class SSLConfig {\n    @Autowired\n    private Environment env;\n\n    @PostConstruct\n    private void configureSSL() {\n      //load the 'javax.net.ssl.trustStore' and\n      //'javax.net.ssl.trustStorePassword' from application.properties\n      System.setProperty(&quot;javax.net.ssl.trustStore&quot;, env.getProperty(&quot;server.ssl.trust-store&quot;)); \n      System.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;,env.getProperty(&quot;server.ssl.trust-store-password&quot;));\n    }\n}\napplication.properties:\n\nserver.ssl.trust-store: YOUR_TRUST_STORE_PATH\nserver.ssl.trust-store-password: YOUR_TRUST_STORE_PASSWORD\n</code></pre>\n<p>or set jvm parameter when run java application</p>\n<pre><code>-Djavax.net.ssl.trustStore\n-Djavax.net.ssl.trustStorePassword\n</code></pre>\n"},{"answer_id":76301812,"body":"<p>In my case Charles Mac Os Proxy was the issue.<br />\nSteps to resolve -</p>\n<ol>\n<li>If charles is activated/opened then go to &quot;Proxy&quot; menu, unselect &quot;Mac OS X Proxy&quot; option.</li>\n<li>Kill all java processes using &quot;Activity Monitor&quot; app and try again.</li>\n</ol>\n"}],"last_activity_date":1684701010,"question_id":9619030,"body":"<p><strong>Edit :</strong> I tried to format the question and accepted answer in more presentable way at my <a href=\"https://tech-geek-passion.blogspot.com/2017/09/how-to-resolve-javaxnetsslsslhandshakee.html\" rel=\"noreferrer\">blog</a>.</p>\n<p>Here is the original issue.</p>\n<p>I am getting this error:</p>\n<blockquote>\n<p>detailed message sun.security.validator.ValidatorException: PKIX path\nbuilding failed:<br />\nsun.security.provider.certpath.SunCertPathBuilderException: unable to\nfind valid certification path  to requested target</p>\n<p>cause javax.net.ssl.SSLHandshakeException:\nsun.security.validator.ValidatorException: PKIX path   building\nfailed: sun.security.provider.certpath.SunCertPathBuilderException:\nunable to find valid certification path to requested target</p>\n</blockquote>\n<p>I am using Tomcat 6 as webserver. I have two HTTPS web applications installed on different Tomcats on different ports but on the same machine. Say App1 (port 8443) and  App2 (port 443). App1 connects to App2. When App1 connects to App2 I get the above error. I know this is a very common error so came across many solutions on different forums and sites. I have the below entry in <code>server.xml</code> of both Tomcats:</p>\n<pre><code>keystoreFile=&quot;c:/.keystore&quot; \nkeystorePass=&quot;changeit&quot;\n</code></pre>\n<p>Every site says the same reason that certificate given by app2 is not in the trusted store of app1 jvm. This seems to be true also when I tried to hit the same URL in IE browser, it works (with warming, There is a problem with this web site's security certificate. Here I say continue to this website). But when same URL is hit by Java client (in my case) I get the above error. So to put it in the truststore I tried these three options:</p>\n<h3>Option 1</h3>\n<pre><code>System.setProperty(&quot;javax.net.ssl.trustStore&quot;, &quot;C:/.keystore&quot;);\nSystem.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;, &quot;changeit&quot;);\n</code></pre>\n<h3>Option 2</h3>\n<p>Setting below in environment variable</p>\n<pre><code>CATALINA_OPTS -- param name\n-Djavax.net.ssl.trustStore=C:\\.keystore -Djavax.net.ssl.trustStorePassword=changeit ---param value\n</code></pre>\n<h3>Option 3</h3>\n<p>Setting below in environment variable</p>\n<pre><code>JAVA_OPTS -- param name\n-Djavax.net.ssl.trustStore=C:\\.keystore -Djavax.net.ssl.trustStorePassword=changeit ---param value\n</code></pre>\n<h3>Result</h3>\n<p>But nothing worked.</p>\n<p><strong>What at last worked</strong> is executing the Java approach suggested in <a href=\"https://stackoverflow.com/questions/1828775/httpclient-and-ssl\">How to handle invalid SSL certificates with Apache HttpClient?</a> by Pascal Thivent i.e. executing the program InstallCert.</p>\n<p><strong>But this approach is fine for devbox setup but I can not use it at production environment.</strong></p>\n<p>I am wondering why three approaches mentioned above did not work when I have mentioned the same values in <code>server.xml</code> of App2 server and same values in truststore by setting</p>\n<p><code>System.setProperty(&quot;javax.net.ssl.trustStore&quot;, &quot;C:/.keystore&quot;) and System.setProperty(&quot;javax.net.ssl.trustStorePassword&quot;, &quot;changeit&quot;);</code></p>\n<p>in App1 program.</p>\n<p>For more information this is how I am making the connection:</p>\n<pre><code>URL url = new URL(urlStr);\n\nURLConnection conn = url.openConnection();\n\nif (conn instanceof HttpsURLConnection) {\n\n  HttpsURLConnection conn1 = (HttpsURLConnection) url.openConnection();\n  \n  conn1.setHostnameVerifier(new HostnameVerifier() {\n    public boolean verify(String hostname, SSLSession session) {\n      return true;\n    }\n  });\n\n  reply.load(conn1.getInputStream());\n</code></pre>\n"},{"last_activity_date":1684700964,"question_id":76298745,"body":"<p>I am trying to install Java EE perspective in eclipse 2021-12 version.\nIt was downloading and showing an error like &quot;an error occured while collecting the items to be installed.&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/o3EcR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o3EcR.png\" alt=\"error\" /></a></p>\n<p>Can you help me to solve to download java EE and to solve my problem?</p>\n"},{"answers":[{"answer_id":76301797,"body":"<p>you can use the <code>when</code> block for this see <a href=\"https://www.jenkins.io/doc/book/pipeline/syntax/#when\" rel=\"nofollow noreferrer\">Pipeline Syntax</a>.</p>\n<p>example:</p>\n<pre><code>stage('FC') {\n   when { expression { return params.Build_type == 'FC' } }\n   steps {\n      echo &quot;D6-EPS EXECUTED&quot;}\n   }\n}\n</code></pre>\n"}],"last_activity_date":1684700724,"question_id":76298736,"body":"<pre><code> pipeline {\n  parameters {\nchoice choices: ['ME', 'FC', 'ME_and_FC'], description: 'Pick Something', name: 'Build_type'\n }\n  agent {\n    node{\n        label 'Slave_APP_Train_32'\n        customWorkspace 'App_WS'\n    }\n }\nstages {\n    stage('FC') { steps {echo &quot;D6-EPS EXECUTED&quot;}}\n    stage('FC') { steps {echo &quot;D6-EPS EXECUTED&quot;}}\n    stage('FC') { steps {echo &quot;D6-EPS EXECUTED&quot;}}\n      stage('parallel'){\n          parallel {\n            \n            stage('ME') {\n                stages {\n                    stage('D6 SRA') { steps {echo &quot;D6-EPS EXECUTED&quot;}}\n                   \n                }\n            }\n            stage('ME') {\n                stages {\n                    stage('D6 EPS') { steps {echo &quot;D6-EPS EXECUTED&quot;}}\n                   \n                }\n            }\n            stage('ME') {\n                stages {\n                    stage('C3 EPS') { steps {echo &quot;D6-EPS EXECUTED&quot;}}\n                   \n                }\n            }\n        }\n      }\n    \n    }\n  }`\n</code></pre>\n<p>Need some conditional statement to call the ME and FC stages ,so that it runs based on the choices given in the choice parameter</p>\n<p>This my script, i am not sure how to call the choice parameter with if condition\nSay for FC all the FC stages should run , for ME all the ME stages should run</p>\n<pre><code>I tried by calling with this command if(${params.Build_type=='ME'}||${params.Build_type=='ME_and_FC'})\n [ERROR](https://i.stack.imgur.com/x0BWA.png) it shows like not a valid syntax \n\nCan someone help me to figure it out`\n</code></pre>\n"},{"comments":[{"comment_id":134552007,"body":"Have you tried to Mock the UserRepository?"},{"comment_id":134552416,"body":"I haven&#39;t wanted to Mock so far. My reasoning is that if my tests are failing because an embedded MongoDB instance can&#39;t be started, then even if I mock UserRepository, I might still run into the same problem with other parts of my application that interact with MongoDB. Why do you think I should Mock as opposed to using an embedded version of MongoDB?"}],"last_activity_date":1684700527,"question_id":76301758,"body":"<p>I have an experimental Spring Boot Service that uses MongoDB. I've tried to write some unit tests with the <code>'de.flapdoodle.embed:de.flapdoodle.embed.mongo'</code> dependency. However, the tests are generating an error:</p>\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext. \n</code></pre>\n<p>When running debug level logging the only additional info I see is</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'embeddedMongoServer' defined in class path resource [org/springframework/boot/autoconfigure/mongo/embedded/EmbeddedMongoAutoConfiguration.class]: Invocation of init method failed; nested exception is java.lang.RuntimeException: Could not start process: &lt;EOF&gt;\n</code></pre>\n<p>Here is the unit test class:</p>\n<h2>UserRepositoryTest</h2>\n<pre class=\"lang-java prettyprint-override\"><code>package com.gitgrub.userservice.repository;\n\nimport com.gitgrub.userservice.model.User;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.data.mongo.DataMongoTest;\nimport org.springframework.test.context.ActiveProfiles;\n\nimport static org.junit.jupiter.api.Assertions.*;\n\n@DataMongoTest\n@ActiveProfiles(&quot;test&quot;)\nclass UserRepositoryTest {\n\n    @Autowired\n    private UserRepository userRepository;\n\n    @Test\n    void findByUsername() {\n        String testUsername = &quot;testUser&quot;;\n        User user = new User(testUsername, &quot;test@example.com&quot;, &quot;password&quot;);\n        userRepository.save(user);\n\n        User foundUser = userRepository.findByUsername(testUsername);\n        assertNotNull(foundUser);\n        assertEquals(testUsername, foundUser.getUsername());\n    }\n\n    @Test\n    void findByEmail() {\n        String testEmail = &quot;test@example.com&quot;;\n        User user = new User(&quot;testUser&quot;, testEmail, &quot;password&quot;);\n        userRepository.save(user);\n\n        User foundUser = userRepository.findByEmail(testEmail);\n        assertNotNull(foundUser);\n        assertEquals(testEmail, foundUser.getEmail());\n    }\n\n    @Test\n    void findByUsernameOrEmail() {\n        String testUsername = &quot;testUser&quot;;\n        String testEmail = &quot;test@example.com&quot;;\n        User user1 = new User(testUsername, &quot;user1@example.com&quot;, &quot;password&quot;);\n        User user2 = new User(&quot;user2&quot;, testEmail, &quot;password&quot;);\n\n        userRepository.save(user1);\n        userRepository.save(user2);\n\n        User foundUser1 = userRepository.findByUsernameOrEmail(testUsername, &quot;&quot;);\n        assertNotNull(foundUser1);\n        assertEquals(testUsername, foundUser1.getUsername());\n\n        User foundUser2 = userRepository.findByUsernameOrEmail(&quot;&quot;, testEmail);\n        assertNotNull(foundUser2);\n        assertEquals(testEmail, foundUser2.getEmail());\n    }\n}\n</code></pre>\n<p>Here is the main project interface that's being tested:</p>\n<h2>UserRepository</h2>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * UserRepository is an interface for a data access object (DAO) that handles User data.\n * It extends MongoRepository to leverage Spring Data MongoDB's functionality,\n * including CRUD operations and database queries.\n *\n * This repository provides methods for finding a user by username, by email,\n * or by either username or email.\n *\n * The repository is used by other components of the application (like services and controllers)\n * to interact with the User data in the database.\n *\n */\n\npackage com.gitgrub.userservice.repository;\n\nimport com.gitgrub.userservice.model.User;\nimport org.springframework.data.mongodb.repository.MongoRepository;\n\npublic interface UserRepository extends MongoRepository&lt;User, String&gt; {\n    User findByUsername(String username);\n\n    User findByEmail(String email);\n\n    User findByUsernameOrEmail(String username, String email);\n\n}\n</code></pre>\n"},{"comments":[{"comment_id":134545611,"body":"if you want to serve only static content why do you need a web application, you can deploy your static content in a http server. you dont need a servlet container. Look at this simple tutorial: <a href=\"https://dev.to/tikam02/deploying-static-website-in-apache24-1k63\" rel=\"nofollow noreferrer\">dev.to/tikam02/deploying-static-website-in-apache24-1k63</a>"},{"comment_id":134546142,"body":"why dont u try creating your won embedded tomcat app to understand better how it works? <a href=\"https://devcenter.heroku.com/articles/create-a-java-web-application-using-embedded-tomcat\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/&hellip;</a>"},{"comment_id":134548312,"body":"@techprat I am aware I don&#39;t need a web application, but I am interested in the ease it provides. All I need to do is hit package and spring-boot tooling will produce a web archive that can be immediately deployed anywhere with a JVM from a single file, serving my whole website. The concern for thinning out the dependencies is only because I know spring-boot will run other components automatically, and just a simple desire for a slightly more optimal solution. In short, I am using a servlet container because its easier to setup (spring-boot also provides default settings that work)"},{"comment_id":134548320,"body":"@JAsgarov I could create my own tomcat app, I even considered that. But as I mentioned in my other comment, I am interested in the help spring-boot provides to package everything as a simple web archive that can be deployed immediately anywhere with java, not setup or settings required"},{"comment_id":134548917,"body":"Tomcat can be embedded in a Java JAR-based project (no WAR is needed). Is that the piece of the jigsaw you are missing? Tomcat <a href=\"https://mvnrepository.com/search?q=tomcat-embed\" rel=\"nofollow noreferrer\">provides</a> <code>embed-core</code>, <code>embed-jasper</code>, <code>embed-websocket</code>, etc. to support this. You can instantiate the embedded Tomcat process in your own code: <code>Tomcat tomcat = new Tomcat();</code> and so on. I don&#39;t know the specific details - but I assume Spring uses these Tomcat classes in its Spring-Boot-Starter-Web (for example)."},{"comment_id":134548932,"body":"&quot;<i>I am trying to create a war archive</i>&quot; - in other words, you don&#39;t create a WAR - you create a JAR to do this. See also frameworks such as <a href=\"https://javalin.io/\" rel=\"nofollow noreferrer\">Javalin</a>, which do something similar. Javalin uses embedded Jetty, not embedded Tomcat. Maybe I have missed the point of your question?"},{"comment_id":134550779,"body":"@andrewJames Perhaps I haven&#39;t explained myself, spring-boot automatically creates a WAR archive that includes all dependencies, a custom class loader, alongside the build output, such that the archive is effectively a runnable java application. I am unsure why spring-boot packages as war and not jar, but in essence it&#39;s not different. Although I should perhaps look deeper into the Tomcat classes, since you make it sound like it would require little effort to create a similar setup with Tomcat alone"},{"comment_id":134550809,"body":"@andrewJames As per my other comments, the WAR is to all effects and purposes identical to a JAR, I am unsure why spring-boot packages the application as a war, but I can run it all the same through <code>java -jar archive.war</code>. In short, I was just wondering how does Spring achieve this behavior, in hopes of being able to just trim out the fat instead of having to replicate the behavior"},{"comment_id":134550875,"body":"This is what confuses me: &quot;<i>spring-boot automatically creates a WAR</i>&quot;. Can you show how you are doing this? Maybe by editing your question? Spring Boot (for me) automatically creates a JAR, not a WAR, unless <a href=\"https://www.baeldung.com/spring-boot-war-tomcat-deploy\" rel=\"nofollow noreferrer\">I explicitly tell it to create a WAR</a>."},{"comment_id":134551437,"body":"@andrewJames I actually just checked, funnily enough, I got confused reading the documentation and copied from the example for the war, under the impression that the jar option would produce a shaded jar, however, I just rechecked to source my claim and found out I completely misunderstood the article and both JAR and WAR can be used. However, the resulting archive is identical except for the folder containing compiled sources is BOOT-INF or WEB-INF depending on the packaging so jar or war shouldn&#39;t matter"}],"last_activity_date":1684700118,"question_id":76297913,"body":"<p>As the title states, I wonder how is spring-boot internally using Tomcat to serve requests, specifically, static files located in certain folders.</p>\n<p>I am trying to create a war* archive that contains a deployable website and trying to get it to be as small as possible, since I only want it to serve static files, and I have managed the exact desired output with spring-boot-starter-web, but would like to rid myself of all unnecessary dependencies.</p>\n<p>* (EDIT: as a side note, I have found out that making it a war archive is irrelevant since spring-boot is able to produce a jar under the exact same mechanism, but otherwise, they should function all the same)</p>\n<p>However, I have been unable to find much (or really any) documentation on how this is achieved by spring-boot, not even by looking at the sources although I admit I am unfamiliar with spring-boot sources or non-boot spring projects in general.</p>\n<p>I haven't found a way to actually start the same sort of behavior without the web starter</p>\n<p>EDIT: For those wondering how the archive is created, here's a link to Spring's documentation on it: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/executable-jar.html\" rel=\"nofollow noreferrer\">&quot;The Executable Jar Format&quot;</a></p>\n"},{"comments":[{"comment_id":132812144,"body":"Idk why you included recursion in the title, this does not require it. All you have to do is iterate over each character in the string, cut it when you hit the start point letter, take the tail. Then iterate over the tail until you reach the end point letter, cut the string and fetch the head."},{"comment_id":132812398,"body":"I figured we could do it the easier way but the assisngment require me to do with recursion"},{"comment_id":132812477,"body":"Any iteration can be refactored into being a recursion."}],"answers":[{"answer_id":75269144,"body":"<p>Try this:</p>\n<p>public static String getmiddle(String s, char start, char end) {</p>\n<pre><code>if (s.charAt(0) != start &amp;&amp; s.charAt(s.length() - 1) != end) {\n\n    return getmiddle(s.substring(1, s.length() - 2), start, end);\n\n} else if (s.charAt(0) != start) {\n    return getmiddle(s.substring(1), start, end);\n} else if (s.charAt(s.length() - 1) != end) {\n    return getmiddle(s.substring(0, s.length() - 2), start, end);\n\n} else {\n    return s.substring(1, s.length() - 1);\n}\n</code></pre>\n<p>}</p>\n"},{"answer_id":76301729,"body":"<p>Recursion is confusing, since there is not necessarily one way to derive the data.</p>\n<p>One approach is to write your control-flow, as though all conditions have already been met.<br />\nWhich is the complete opposite of just basic control-flow.</p>\n<p>The following method will return <code>ascr</code> for <code>javascript</code>, using <code>v</code> and <code>i</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static String getmiddle(String s, char start, char end) {\n    if (s.charAt(0) == start &amp;&amp; s.charAt(s.length() - 1) == end)\n        return s.substring(1, s.length() - 1);\n    else if (s.charAt(0) != start)\n        s = getmiddle(s.substring(1), start, end);\n    else if (s.charAt(s.length() - 1) != end)\n        s = getmiddle(s.substring(0, s.length() - 1), start, end);\n    return s;\n}\n</code></pre>\n<p>Your code deviated at the following conditional-statement, <code>if (str.charAt(0) != end)</code>.</p>\n<p>You would want to be checking the last character, here, <code>s.length() - 1</code>, as opposed to the first, at <code>0</code>.</p>\n"}],"last_activity_date":1684699686,"question_id":75264144,"body":"<p>I am stuck on the assignment which require to write a recursion method to return everything between 2 specific points.\nFor example, if the input is &quot;javascript&quot; with &quot;v&quot; as start point and &quot;i&quot; as end point, we have to return &quot;ascr&quot;</p>\n<pre><code>public static String getmiddle(String s, char start, char end) {\n    if (s.charAt(0)!=start) {\n        getmiddle(s.substring(1), start, end);  \n    }\n\n    str = str.substring(1);\n\n    if (str.charAt(0) != end) {\n        return s.substring(0,1) + getmiddle(s.substring(1), start, end);\n    } else {\n        return &quot;&quot;;\n    }\n}\n</code></pre>\n<p>This is what I did. The first if method I try to remove the first part before the start point, but I couldn't figure out my 2nd part.</p>\n"},{"comments":[{"comment_id":134551365,"body":"Refer this <a href=\"https://stackoverflow.com/questions/1795649/jpa-persisting-a-one-to-many-relationship\" title=\"jpa persisting a one to many relationship\">stackoverflow.com/questions/1795649/&hellip;</a>"}],"answers":[{"comments":[{"comment_id":134551960,"body":"Thanks! It&#39;s a bit more complicated than that due to Many to Many. Have to handle potentially deleted items, and items that have moved to different categories. It&#39;s an update on the Categories and subsequent items"}],"answer_id":76301721,"body":"<p>Refer this <a href=\"https://stackoverflow.com/questions/1795649/jpa-persisting-a-one-to-many-relationship\">JPA - Persisting a One to Many relationship</a>   Also manage the Id by JPA . you can refer this spec  : <a href=\"https://docs.oracle.com/cd/E16439_01/doc.1013/e13981/cmp30cfg001.htm\" rel=\"nofollow noreferrer\">https://docs.oracle.com/cd/E16439_01/doc.1013/e13981/cmp30cfg001.htm</a>               Also while update the hierarchy you better get the entity from DAO layer and then update it based on what coming from front end then persist the list. when you pull the existing parent and child together from the database. Treat like a pojo and save. Please do not manipulate Id.</p>\n"}],"last_activity_date":1684699575,"question_id":76301581,"body":"<p><strong>Context:</strong></p>\n<p>Lets say I have 3 entities. Entity A (Portfolio) which contains a list of Entity B (Categories) which contains a list of Entity C (CategoryItems)</p>\n<p>Let's say I already have a Portfolio with some categories and category items persisted.</p>\n<p><strong>Problem</strong>:</p>\n<p>If I have a list of Categories and nested CategoryItems. Some of which have ID's as they have already been persisted, and some which are new objects and have null ID's. And maybe some of the category items have been updated and are now nested under a different category.</p>\n<p>Is their any easy way to persist this using Hibernate?</p>\n<p>Or do we need to manually handle the merge by iterating through the new updated Categories and Items and handle the updates / create the new items.</p>\n"},{"comments":[{"comment_id":132816881,"body":"Welcome to SO.  Let&#39;s clarify your question before writing any code.  Are you taking a list of words and filtering them, separating them in two groups?  Or are you modifying the words?"}],"answers":[{"answer_id":75267538,"body":"<pre><code>\n    String[] words = {&quot;Ants&quot;, &quot;Bears&quot;, &quot;Cats&quot;, &quot;Dogs&quot;, &quot;Falcons&quot;};\n\n    System.out.println(&quot;Without plurals\\tWith plurals&quot;);\n    for (String word : words) {\n        String withoutS = word.replaceAll(&quot;s$&quot;, &quot;&quot;);\n        System.out.println(withoutS + &quot;\\t\\t\\t&quot; + word);\n    }\n\n</code></pre>\n<p>Output:</p>\n<pre><code>Without plurals With plurals\nAnt         Ants\nBear            Bears\nCat         Cats\nDog         Dogs\nFalcon          Falcons\n</code></pre>\n"},{"answer_id":76301643,"body":"<p>Here is a basic implementation, to generate 2 columns of <code>String</code> values.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String columns(String string) {\n    String[] strings = string.split(&quot; &quot;);\n    int widthA = 0;\n    for (int index = 0; index &lt; strings.length; index += 2) {\n        if (strings[index].length() &gt; widthA)\n            widthA = strings[index].length();\n    }\n    int widthB = 0;\n    for (int index = 0; index &lt; strings.length; index += 2) {\n        if (strings[index + 1].length() &gt; widthB)\n            widthB = strings[index + 1].length();\n    }\n    StringBuilder columns = new StringBuilder();\n    for (int index = 0; index &lt; strings.length; index += 2) {\n        columns.append((&quot;%-&quot; + widthB + &quot;s &quot;).formatted(strings[index + 1]));\n        columns.append((&quot;%-&quot; + widthA + &quot;s%n&quot;).formatted(strings[index]));\n    }\n    return columns.toString();\n}\n</code></pre>\n<p>Output using the data you provided, is as follows.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Ant    AntS   \nBear   BearS  \nCat    CatS   \nDog    DogS   \nFalcon FalconS\n</code></pre>\n<p>Alternately, if you are looking for two arrays, as opposed to two text columns, you can use the following method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String[][] columns(String string) {\n    String[] strings = string.split(&quot; &quot;);\n    String[][] columns = new String[2][strings.length / 2];\n    for (int indexA = 0, indexB = 0; indexA &lt; strings.length; indexA += 2, indexB++) {\n        columns[0][indexB] = strings[indexA + 1];\n        columns[1][indexB] = strings[indexA];\n    }\n    return columns;\n}\n</code></pre>\n<p>If we printed the data, we'd get the following output.</p>\n<pre class=\"lang-none prettyprint-override\"><code>[Ant, Bear, Cat, Dog, Falcon]\n[AntS, BearS, CatS, DogS, FalconS]\n</code></pre>\n"}],"last_activity_date":1684698941,"question_id":75267477,"body":"<p>AntS\nAnt\nBearS\nBear\nCatS\nCat\nDogS\nDog\nFalconS\nFalcon</p>\n<pre><code>String five = word;\nString Sremove = five.replace(&quot;s&quot;, &quot;S&quot;);\n            \nSystem.out.println(Sremove);\n    \n        \n//Display without plurals\nString remove = word;\nString withoutS = remove.replace(&quot;s&quot;,&quot; &quot;);\n  \nSystem.out.println(withoutS);\n</code></pre>\n<p>What I want is the 1st column are the words without plurals, and the 2nd column are the one with plurals.</p>\n<p>I can't find solutions so I went here</p>\n"},{"comments":[{"comment_id":134545203,"body":"Perhaps something is calling <code>DataSource.getDataSource()</code> before junit calls <code>setup()</code>. You can add some logging to check this. It isn&#39;t clear why you have written the <code>init</code> method. Why do you think that <code>init</code> will have any effect? Do you understand how your <code>DataSource.getDataSource()</code> method works? That <code>ds</code> is <code>static</code> and that it will only call <code>initdatabase()</code> once?"}],"answers":[{"comments":[{"comment_id":134541416,"body":"Never did anything like that. Could you show with an example?"},{"comment_id":134541455,"body":"This exceeds a Stackoverlow answer. You can search for Java Singleton Testing and find lots of articles. For example <a href=\"https://www.baeldung.com/java-singleton\" rel=\"nofollow noreferrer\">baeldung.com/java-singleton</a>"}],"answer_id":76295772,"body":"<p>Instead of using system properties to configure the database make your classore easily configurable and testable. You could implement a singleton pattern and an initializing method for example.</p>\n<p>Having said that, using a different database for production than for testing may not reproduce the exact behavior.</p>\n"},{"comments":[{"comment_id":134541593,"body":"According to the condition of the assignment, implementation is required in one method, without the use application.properties.  That is, from these two methods to make one. `    @BeforeAll     static void setup() {...}       @BeforeEach     void init() {...}`"}],"answer_id":76295831,"body":"<p>I understand that you want to configure a different datasource for tests. This can be done without any code just by providing a different <code>application.properties</code> file.</p>\n<p>Assuming your <code>application.properties</code> are in the <code>src/main/resources</code>. Make a copy of it and put it in the folder <code>src/test/resources</code>. In this file you can modify the properties for the tests. They will be found only by the tests. Application will still use the original file.</p>\n"}],"last_activity_date":1684698037,"question_id":76295701,"body":"<p>My project has a DataSource class that implements the database connection parameters, as well as the initialization of the database connection:</p>\n<pre><code>public class DataSource {\n    private static HikariConfig config = new HikariConfig();\n    private static HikariDataSource ds;\n \n    public static HikariDataSource getDataSource() {\n        if (ds == null) {\n            config.setJdbcUrl(System.getProperty(&quot;jdbcUrl&quot;,&quot;jdbc:postgresql://localhost:5433/postgres&quot;));\n            config.setUsername(System.getProperty(&quot;jdbcUser&quot;,&quot;postgres&quot;));\n            config.setPassword(System.getProperty(&quot;jdbcPassword&quot;,&quot;postgres&quot;));\n            ds = new HikariDataSource(config);\n \n            initDatabase();\n        }\n        return ds;\n    }\n \n    private static void initDatabase() {\n        try {\n            DatabaseConnection connection = new JdbcConnection(ds.getConnection());\n            Database database = DatabaseFactory.getInstance().findCorrectDatabaseImplementation(connection);\n            Liquibase liquibase = new Liquibase(\n                    System.getProperty(&quot;liquibaseFile&quot;,&quot;liquibase.xml&quot;),\n                    new ClassLoaderResourceAccessor(),\n                    database);\n            liquibase.update(new Contexts());\n        } catch (SQLException | LiquibaseException e) {\n            throw new RuntimeException(e);\n        }\n    }\n \n    public static Connection getConnection() throws SQLException {\n        return ds.getConnection();\n    }\n}\n</code></pre>\n<p>The JUnit library is used to develop unit tests for project dao methods. A base class has been created with the help of which the parameters for connecting to the database are redefined (in this case, to H2):</p>\n<pre><code>public class Base {\n \n    @BeforeAll\n    static void setup() {\n        System.setProperty(&quot;jdbcUrl&quot;, &quot;jdbc:h2:mem:test_&quot; + UUID.randomUUID());\n        System.setProperty(&quot;jdbcUser&quot;, &quot;sa&quot;);\n        System.setProperty(&quot;jdbcPassword&quot;, &quot;&quot;);\n        System.setProperty(&quot;liquibaseFile&quot;, &quot;liquibase_test.xml&quot;);\n    }\n \n    @BeforeEach\n    void init() {\n        setup();\n    }\n}\n</code></pre>\n<p>How can I make sure that System.setProperty properties are redefined within a single method? It is important that the behavior of the method is similar to that of @BeforeEach instead of the @BeforeAll annotation.\nI tried to put @BeforeEach instead of @BeforeAll, removing static, but when the test is executed, the postgress database is accessed, and not H2, as required by the condition.</p>\n"},{"comments":[{"comment_id":115100761,"body":"You say you have verified the file is available. Have you verified the file is available <b>inside the docker container</b>?"},{"comment_id":115101022,"body":"I printed the files that are available in that specific location. And from logs verified the file is available but the driver is unable to upload."},{"comment_id":115102790,"body":"What you mean by run it on a docker container ? Docker container as the hub ?"},{"comment_id":115103511,"body":"Docker container file system is isolated from host system. So you cannot just run your script in docker and expect it will access anything you have at your host. You need to mount a folder on your host to a folder inside the container or copy the file to container file system (both options are taken when build an image to run)."},{"comment_id":115104952,"body":"@PDHide, I ran in docker using the selenium stand alone chrome you can find the related info here <a href=\"https://github.com/SeleniumHQ/docker-selenium#standalone\" rel=\"nofollow noreferrer\">github.com/SeleniumHQ/docker-selenium#standalone</a>"},{"comment_id":115105063,"body":"@AlexeyR. you are correct and yes I also did a volume mapping where I have mapped my required folder to the container, and to check if all the files are available I have printed the files that are in folders into logs and verified the required files are available and I am sure this issue is more related to selenium."}],"answers":[{"comments":[{"comment_id":115105757,"body":"No, Iam not using Selenoid, and iam using windows in my host so and in the docker container using the chrome standalone server to run so, not sure about the volume mapping"}],"answer_id":65106461,"body":"<p>You need to add a path configuration.\nCreate a file browsers.json\nadd this script there</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;chrome&quot;: {\n        &quot;default&quot;: &quot;85.0&quot;,\n        &quot;versions&quot;: {\n            &quot;85.0&quot;: {\n                &quot;image&quot;: &quot;selenoid/vnc:chrome_85.0&quot;,\n                &quot;port&quot;: &quot;4444&quot;,\n                &quot;volumes&quot;: [&quot;/home/ubuntu/your-project:/opt/docker&quot;]\n            }\n        }\n    }\n}\n</code></pre>\n<p>and run with this <code>--browsers-json browsers.json</code> argument</p>\n<p>this example is for selenoid, but if you don't use selenoid, just add <code>&quot;volumes&quot;: [&quot;/home/ubuntu/your-project:/opt/docker&quot;]</code> to your selenium grid config.</p>\n"},{"comments":[{"comment_id":115105666,"body":"the browser is launched by the container using the selenium grid and as you can see above I have mapped my test script folder to the selenium container, All other tests are running except of the uploading a file so i&#39;m thinking this is more of a selenium issue than of docker"},{"comment_id":115106017,"body":"No you didn&#39;t map. You mapped it to <code>container_name : Maven-Java</code>. Not to <code>container_name : selenium</code>."},{"comment_id":115106520,"body":"Ok Got your point now, But will I be able to map the same folder to multiple containers @Alexey R."},{"comment_id":115106534,"body":"I believe you will"},{"comment_id":115106862,"body":"Thanks @Alexey R, You are right it worked for me, Also found an alternative with out mapping the volumes"}],"answer_id":65108101,"body":"<p>You mounted the volume to container where your test code is running. However you need to mount the volume to the container where the browser is running.</p>\n<p>The thing is that when your code says to the web app &quot;hey, this is the file that you need to upload&quot;, the test code sends not a file itself but a path that is passed to the browser. Then browser tries to look up that file and build appropriate request to the server.</p>\n<p>So the file hast to be within the container where the browser is running.</p>\n"},{"answer_id":65109139,"body":"<p>thank you all for the answer's so the working solution I found are two one is as @Alexey mentioned I should also volume map my script folder to the selenium container as well as below:</p>\n<pre><code>selenium:\n   volumes :\n     - .:/workspace\n</code></pre>\n<p>Above is a docker oriented solution,  the other one I found is with selenium grid where the grid can detect the files using a file detector, it can be done by adding the following snipet.</p>\n<pre><code>remoteDriver.setFileDetector(new LocalFileDetector());\n</code></pre>\n<p>Both the solutions are working and have solved my problem.</p>\n"}],"last_activity_date":1684697940,"question_id":65105218,"body":"<p>I have a selenium script that to upload an attachment runs on maven and java and is working fine when run from Local.</p>\n<p>When I run it on docker container using selenium standalone server receiving the following exception</p>\n<pre><code>org.openqa.selenium.InvalidArgumentException: invalid argument: File not found :\n</code></pre>\n<p>Not sure how to resolve it inside the container, I have verified the file is available</p>\n<p>The docker compose file Iam using is as follows:</p>\n<pre><code>    version : '3'\nservices :\n  maven:\n    container_name : Maven-Java\n    image : maven:3.5.3-jdk-8-alpine\n    volumes :\n      - .:/workspace\n      - ~/.m2:/root/.m2\n    depends_on :\n      - selenium\n    command : mvn -f /workspace test\n  selenium:\n    container_name : selenium\n    image : selenium/standalone-chrome:latest\n    volumes:\n      - /dev/shm:/dev/shm\n    ports :\n      - 4444:4444\n</code></pre>\n"},{"comments":[{"comment_id":134537572,"body":"Debug with <code>mvn -X ...</code> and confirm your theory first."},{"comment_id":134537574,"body":"Have you tried <code>mvn -U clean install </code> ?"},{"comment_id":134537630,"body":"you know that mvn clean install -o work in offline assuming you build the other project has -SNAPSHOT if not you can always do the ugly way build the Jar and define in dependency the systemPath to the jar himself"},{"comment_id":134539091,"body":"I would recommend to take a deep look into <a href=\"https://maven.apache.org/resolver/remote-repository-filtering.html\" rel=\"nofollow noreferrer\">maven.apache.org/resolver/remote-repository-filtering.html</a>"}],"answers":[{"comments":[{"comment_id":134539455,"body":"systemPath is nearly always a bad idea."}],"answer_id":76293429,"body":"<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;groupId&lt;/groupId&gt;\n  &lt;artifactId&gt;artifactId&lt;/artifactId&gt;\n  &lt;version&gt;version&lt;/version&gt;\n  &lt;scope&gt;system&lt;/scope&gt;\n  &lt;systemPath&gt;file path/jar-file.jar&lt;/systemPath&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>You can Add this into your <code>pom.xml</code> file then update your project.</p>\n"},{"answer_id":76294563,"body":"<p>First of all: Version ranges like <code>(0,0),</code> are evil.</p>\n<p>Sure, they are allowed in Maven, but they cause all kind of pain, and they are considered deprecated by many.</p>\n<p>So, what should you do?</p>\n<p>If your project Y and project X are so tightly coupled that project Y always needs the latest version of project X, you usually set up a multi-module project with both of them. Then you always build both together, problem solved.</p>\n<p>If this is not the way for you to go, you can use a <code>-SNAPSHOT</code> version of project X in project Y while developing. This allows for easier updates because you do not always need to change the version of the dependency when you rebuild X. Beware, though, that if you build the same SNAPSHOT versions locally and on the build server, it might be confusing which one actually &quot;wins&quot; and is drawn, depending on the specified update policy.</p>\n"}],"last_activity_date":1684697837,"question_id":76293171,"body":"<p>Might be best explained with an example:</p>\n<ul>\n<li><p>I have 2 custom maven projects (let's call them projectX and projectY).</p>\n</li>\n<li><p>projectY is dependent on projectX. projectX has been added to projectY via</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.projectx.core&lt;/groupId&gt;\n    &lt;artifactId&gt;projectx.core&lt;/artifactId&gt;\n    &lt;version&gt;(0.0),&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n</li>\n<li><p>In projectX, I made some changes to Constants.java and added a new public constant.</p>\n</li>\n<li><p>I'm trying to access this new constant in projectY, but it's not working. I'm getting this error =&gt; &quot;cannot find symbol: insert-constant-name-here&quot;</p>\n</li>\n<li><p>It seems to me that projectY is still referencing an older version of projectX. I believe projectY is still referencing whatever the latest version of projectX is that's available in our remote mvn repo.</p>\n</li>\n<li><p>I have a feeling that if I build projectX and push it to the remote mvn repo, everything will work fine. I cannot do this yet as I need to make more changes to projectX.</p>\n</li>\n</ul>\n"},{"comments":[{"comment_id":134551853,"body":"Try going over a tiny sample file with a few characters and work out on paper what you expect to be in the compressed file. Compare with what happens. Also the compression and decompression should be largely symmetrical, if one has a DataInputStream, the other could reasonably be expected to have a DataOutputStream..."},{"comment_id":134551882,"body":"<code>OutputStream.write()</code> despite accepting an <code>int</code>, does only write a <code>byte</code> (e.g. <code>write (256)</code>  will actually only write  <code>0</code> to the file)"}],"last_activity_date":1684697412,"question_id":76301005,"body":"<p>I need to compress and decompress a .db file which is filled with bytes using LZW in JAVA but the decompressed file is a lot bigger than the original file.</p>\n<p>The original file has a 1.249KB size and the compressed is 298KB, the problem is the decompressed file which is 2.83GB, what am I doing wrong when decompressing</p>\n<p>Compression method:</p>\n<pre><code>    FileInputStream inputStream = null;\n    FileOutputStream outputStream = null;\n\n    RandomAccessFile db = new RandomAccessFile(src_db, &quot;rw&quot;);\n    double tamanho_db_original = db.length();\n    db.close();\n\n    long tempoInicial = System.currentTimeMillis();\n\n    try {\n        // Abre os arquivos de leitura e escrita\n        inputStream = new FileInputStream(src_db);\n        outputStream = new FileOutputStream(src_db_compactadoSemPerda);\n\n        // Cria o dicionário inicial com os caracteres ASCII\n        for (int i = 0; i &lt; 256; i++) {\n            dicionario.put(&quot;&quot; + (char) i, i);\n        }\n\n        String current = &quot;&quot;;\n        List&lt;Integer&gt; compressed = new ArrayList&lt;&gt;();\n        int nextCode = 256;\n\n        // Lê os bytes do arquivo de leitura\n        int byteRead;\n        while ((byteRead = inputStream.read()) != -1) {\n            char c = (char) byteRead;\n            String combined = current + c;\n            if (dicionario.containsKey(combined)) {\n                current = combined;\n            } else {\n                compressed.add(dicionario.get(current));\n                dicionario.put(combined, nextCode);\n                nextCode++;\n                current = &quot;&quot; + c;\n            }\n        }\n\n        if (!current.equals(&quot;&quot;)) {\n            compressed.add(dicionario.get(current));\n        }\n\n        // Escreve os dados comprimidos no arquivo de escrita\n        for (int code : compressed) {\n            outputStream.write(code);\n        }\n    } finally {\n        // Fecha os arquivos\n        if (inputStream != null) {\n            inputStream.close();\n        }\n        if (outputStream != null) {\n            outputStream.close();\n        }\n    }\n</code></pre>\n<hr />\n<p>Decompression method:</p>\n<pre><code>    FileInputStream inputStream = null;\n    FileOutputStream outputStream = null;\n\n    RandomAccessFile db = new RandomAccessFile(src_db, &quot;rw&quot;);\n    double tamanho_db_original = db.length();\n    db.close();\n\n    File compactado = new File(src_db_compactadoSemPerda);\n    long tamanho_compactado = compactado.length();\n    System.out.println(&quot;\\n\\tTamanho compactado: &quot; + tamanho_compactado);\n\n    try (DataInputStream dis = new DataInputStream(new FileInputStream(src_db_compactadoSemPerda));\n         FileOutputStream fos = new FileOutputStream(src_db_descompactadoSemPerda)) {\n\n        Map&lt;Integer, String&gt; dictionary = new HashMap&lt;&gt;();\n        int nextCode = 256;\n\n        // Inicializa o dicionário com caracteres ASCII\n        for (int i = 0; i &lt; 256; i++) {\n            dictionary.put(i, String.valueOf((char) i));\n        }\n\n        int currentCode = dis.readInt();\n        String currentString = dictionary.get(currentCode);\n        fos.write(currentString.getBytes());\n\n        while (true) {\n            int code = dis.readInt();\n\n            if (!dictionary.containsKey(code)) {\n                // Caso o código não esteja no dicionário, crie uma nova entrada\n                currentString += currentString.charAt(0);\n            } else {\n                // Caso contrário, use a sequência correspondente do dicionário\n                currentString = dictionary.get(code);\n            }\n\n            fos.write(currentString.getBytes());\n\n            // Adiciona a nova sequência ao dicionário\n            dictionary.put(nextCode++, dictionary.get(currentCode) + currentString.charAt(0));\n\n            currentCode = code;\n        }\n    } catch (EOFException e) {\n        // Fim do arquivo\n        System.out.println(&quot;Arquivo descompactado com sucesso!&quot;);\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n"},{"comments":[{"comment_id":132823777,"body":"You should create a class and put the id and value in the class.  Add each instance of the class to a list and sort the list as required."},{"comment_id":132825342,"body":"other options to consider: Records instead of classes to cut out on boiler plate code, or you could use Tuples (Pair)"}],"answers":[{"comments":[{"comment_id":132824293,"body":"<code>people.sort((p1, p2) -&gt; Integer.compare(p1.score, p2.score));</code> p1.score and p2.score is not defined - do you mean the score in the player class?"},{"comment_id":132824646,"body":"Assuming the class has getters, <code>People.sort(Comparator.comparingInt(Person::getScore));</code>"},{"comment_id":132824658,"body":"If the instance fields are declared private then you will need getters to access the fields."}],"answer_id":75271808,"body":"<p>Here is the full <a href=\"http://tpcg.io/_K8FBFS\" rel=\"nofollow noreferrer\">snippet</a>, but as WJS <a href=\"https://stackoverflow.com/questions/75271649/sort-specific-parts-in-string#comment132823777_75271649\">commented</a>, create a class:</p>\n<pre><code>public class Person {\n    private String id;\n    private int score;\n    ...\n}\n</code></pre>\n<p>Then add these to a List:</p>\n<pre><code>...\nString[] parts = s.split(&quot; &quot;);\n    \nList&lt;Person&gt; people = new ArrayList&lt;&gt;();\nfor (int i = 0; i &lt; parts.length; i += 2) {\n    String id = parts[i];\n    int score = Integer.parseInt(parts[i+1]);\n    people.add(new Person(id, score));\n}\n</code></pre>\n<p>Then you sort the list by passing a comparator which compares <code>scores</code> and if you need it back in a String, join the list with spaces:</p>\n<pre><code>people.sort((p1, p2) -&gt; Integer.compare(p1.score, p2.score));    \nString result = people.stream().map(Person::toString).collect(Collectors.joining(&quot;,&quot;));\n</code></pre>\n"},{"answer_id":75272336,"body":"<p>Ok, here is how I did it. I used a record instead of a class as it creates the getters implicitly.  No setters since a record is immutable.</p>\n<p>record and data string</p>\n<pre><code>record Data (int id, int score) {\n  @Override\n  public String toString() {\n      return&quot;id=%d, score=%d&quot;.formatted(id, score);\n  }\n}\nString data = &quot;1 456 2 100 3 600 1 400&quot;;\n</code></pre>\n<ul>\n<li>create the list to hold the data</li>\n<li>split on one or more white space characters</li>\n<li>then for each <code>(id, score) pair</code>, create an instance of <code>Data</code> (I converted both to ints)</li>\n<li>add the instance to the list</li>\n<li>and sort the list</li>\n</ul>\n<pre><code>List&lt;Data&gt; list = new ArrayList&lt;&gt;();\nString[] items = data.split(&quot;\\\\s+&quot;);\nfor(int i = 0; i &lt; items.length; i+=2) {\n    list.add(new Data(Integer.parseInt(items[i]), Integer.parseInt(items[i+1])));\n}\nlist.sort(Comparator.comparingInt(Data::value));\nfor (Data d : list) {\n    System.out.println(d);\n}\n</code></pre>\n<p>prints</p>\n<pre><code>id=2, score=100\nid=1, score=400\nid=1, score=456\nid=3, score=600\n\n\n</code></pre>\n"},{"answer_id":76301555,"body":"<p>Great question.</p>\n<p>What you can do is use the score as the <code>key</code>, and use a list of id's at the <code>value</code>.</p>\n<p>Consider the following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;Integer, List&lt;Integer&gt;&gt; parse(String string) {\n    Map&lt;Integer, List&lt;Integer&gt;&gt; map = new TreeMap&lt;&gt;();\n    String[] strings = string.split(&quot; &quot;);\n    int id, score;\n    for (int index = 0; index &lt; strings.length; index += 2) {\n        id = Integer.parseInt(strings[index]);\n        score = Integer.parseInt(strings[index + 1]);\n        if (map.containsKey(score)) map.get(score).add(id);\n        else map.put(score, new ArrayList(Arrays.asList(id)));\n    }\n    return map;\n}\n</code></pre>\n<p>If we parsed a value of <code>&quot;1 456 2 100 3 600 1 400&quot;</code>, we get the following.</p>\n<pre class=\"lang-none prettyprint-override\"><code>{100=[2], 400=[1], 456=[1], 600=[3]}\n</code></pre>\n<p>And, as demonstration, if parsed a value of <code>&quot;1 456 2 100 3 600 1 400 5 456 6 600&quot;</code>, we would get this.</p>\n<pre class=\"lang-none prettyprint-override\"><code>{100=[2], 400=[1], 456=[1, 5], 600=[3, 6]}\n</code></pre>\n<p>Then, for access, you can implement a method similar to the following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/** @return null if not found */\nList&lt;Integer&gt; scores(int id, Map&lt;Integer, List&lt;Integer&gt;&gt; map) {\n    List&lt;Integer&gt; scores = new ArrayList&lt;&gt;();\n    for (Map.Entry&lt;Integer, List&lt;Integer&gt;&gt; entry : map.entrySet()) {\n        if (entry.getValue().contains(id))\n            scores.add(entry.getKey());\n    }\n    if (scores.isEmpty()) scores = null;\n    return scores;\n}\n</code></pre>\n<p>Output for <code>scores(1, parse(&quot;1 456 2 100 3 600 1 400&quot;))</code> is the following.</p>\n<pre class=\"lang-none prettyprint-override\"><code>[400, 456]\n</code></pre>\n"}],"last_activity_date":1684697284,"question_id":75271649,"body":"<p>Alright so, I have a String which contains:\n<code>1 456 2 100 3 600 1 400</code></p>\n<p>The 1 is the Id of a person which got a score of 456 and 400.\n2 is the Id of a person which got a score of 100 etc.</p>\n<p>I need the String to sort by <strong>values</strong> and not by <strong>id's</strong>. It should look like this: <code>2 100 1 400 1 456 3 600</code></p>\n<p>I already tried putting it into a hashmap and sorting it, but since a hashmap doesn't take identical keys, this is not an option.</p>\n"},{"last_activity_date":1684697146,"question_id":76301568,"body":"<p>I was going through <strong>Symmetric and Assymetric Signatures for JWT</strong> in Spring Security. I came accross this video by <strong>Dan Vega</strong>- <a href=\"https://www.youtube.com/watchv=66DtzkhBlSA&amp;list=PLZV0a2jwt22s5NCKOwSmHVagoDW8nflaC&amp;index=6&amp;ab_channel=DanVega\" rel=\"nofollow noreferrer\">https://www.youtube.com/watchv=66DtzkhBlSA&amp;list=PLZV0a2jwt22s5NCKOwSmHVagoDW8nflaC&amp;index=6&amp;ab_channel=DanVega</a><br />\nHere, in the <strong>SecurityConfig.java</strong>, <strong>Jwt Encoder</strong> and Jwt Decoder are created.</p>\n<pre><code> @Bean\n    public JwtEncoder jwtEncoder() {\n        return new NimbusJwtEncoder(new ImmutableSecret&lt;&gt;(jwtKey.getBytes()));\n    }\n    //Decoder\n    @Bean\n    public JwtDecoder jwtDecoder() {\n        byte[] bytes = jwtKey.getBytes();\n        SecretKeySpec originalKey = new SecretKeySpec(bytes, 0, bytes.length, &quot;RSA&quot;);\n        logger.info(&quot;Original Key: {}&quot;, originalKey.getEncoded());\n        return NimbusJwtDecoder.withSecretKey(originalKey).macAlgorithm(MacAlgorithm.HS512).build();\n    }\n</code></pre>\n<p><strong>Generating token-</strong></p>\n<pre><code>package com.ayushsingh.jwtsymmetric_keydemo.service;\n\nimport java.time.Instant;\nimport java.time.temporal.ChronoUnit;\nimport java.util.stream.Collectors;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.oauth2.jose.jws.MacAlgorithm;\nimport org.springframework.security.oauth2.jwt.JwsHeader;\nimport org.springframework.security.oauth2.jwt.JwtClaimsSet;\nimport org.springframework.security.oauth2.jwt.JwtEncoder;\nimport org.springframework.security.oauth2.jwt.JwtEncoderParameters;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class TokenService {\n\n    @Autowired\n    private JwtEncoder jwtEncoder;\n\n    // Method to generate the token\n    public String generateToken(Authentication authentication) {\n        Instant now = Instant.now(); \n        String scope = authentication.getAuthorities().stream()\n     \n                .map(GrantedAuthority::getAuthority)\n              \n                .filter(authority -&gt; !authority.startsWith(&quot;ROLE&quot;))\n                .collect(Collectors.joining(&quot; &quot;));\n        JwtClaimsSet claims = JwtClaimsSet.builder()\n                .issuer(&quot;self&quot;) \n                .issuedAt(now) \n                .expiresAt(now.plus(1, ChronoUnit.HOURS))\n                .subject(authentication.getName())\n                .claim(&quot;scope&quot;, scope)\n                .build();\n        var encodedParameters = JwtEncoderParameters.from(JwsHeader.with(MacAlgorithm.HS512).build(), claims); \n        return this.jwtEncoder.encode(encodedParameters).getTokenValue(); \n\n    }\n}\n\n</code></pre>\n<p><strong>My queries-</strong><br />\nI understand that we are using the same symmetric key for encryption here as explained in the video and here- <a href=\"https://www.pingidentity.com/en/resources/blog/post/jwt-security-nobody-talks-about.html#:%7E:text=using%20asymmetric%20signatures.-,Asymmetric%20JWT%20Signatures,verified%20with%20the%20public%20key\" rel=\"nofollow noreferrer\">https://www.pingidentity.com/en/resources/blog/post/jwt-security-nobody-talks-about.html#:~:text=using%20asymmetric%20signatures.-,Asymmetric%20JWT%20Signatures,verified%20with%20the%20public%20key</a>.<br />\nBut, I am not able to understand why we require a <strong>SecretKeySpec</strong> in the <strong>decoder-</strong></p>\n<pre><code> @Bean\n    public JwtDecoder jwtDecoder() {\n        byte[] bytes = jwtKey.getBytes();\n        SecretKeySpec originalKey = new SecretKeySpec(bytes, 0, bytes.length, &quot;RSA&quot;);\n        logger.info(&quot;Original Key: {}&quot;, originalKey.getEncoded());\n        return NimbusJwtDecoder.withSecretKey(originalKey).macAlgorithm(MacAlgorithm.HS512).build();\n    }\n</code></pre>\n<p>What does SecretKeySpec exactly do and why we use RSA here? Here, <strong>jwtKey</strong> 9faa372517ac1d389758d3750fc07acf00f542277f26fec1ce4593e93f64e338. The output for</p>\n<pre><code>logger.info(&quot;Original Key: {}&quot;, originalKey.getEncoded());\n</code></pre>\n<p>is-</p>\n<pre><code> Original Key: [57, 102, 97, 97, 51, 55, 50, 53, 49, 55, 97, 99, 49, 100, 51, 56, 57, 55, 53, 56, 100, 51, 55, 53, 48, 102, 99, 48, 55, 97, 99, 102, 48, 48, 102, 53, 52, 50, 50, 55, 55, 102, 50, 54, 102, 101, 99, 49, 99, 101, 52, 53, 57, 51, 101, 57, 51, 102, 54, 52, 101, 51, 51, 56]\n\n</code></pre>\n<p>Why are we using <strong>RSA</strong> in the decoder! It is not used anywhere else in the implementation. Please help me understand!</p>\n"},{"comments":[{"comment_id":134551131,"body":"How are you running this code?"},{"comment_id":134551161,"body":"the code you posted runs forever and does not give any of the errors you mentioned.  You need to post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of the EXACT code you are having the problem with, and not comment &quot;I made changes&quot; and getting other errors."},{"comment_id":134551636,"body":"The code seems to run just fine."}],"last_activity_date":1684696907,"question_id":76301526,"body":"<p>I am having trouble correcting the NoSuchElementException in java. After finish the code required for the lab assignment I was doing I was able to correct it from running an infinite loop, and now it is throwing this new error at runtime. I have tried everything I could think of to figure this out.</p>\n<p>This is the code that I wrote. Any help with this would be greatly appreciated. I am at a loss on this.</p>\n<pre><code>import java.util.Scanner;\n\npublic class DrawHalfArrow {\n   public static void main(String[] args) {\n      Scanner scnr = new Scanner(System.in);\n      int arrowBaseHeight;\n      int arrowBaseWidth;\n      int arrowHeadWidth;\n      \n      System.out.println(&quot;Enter arrow base height:&quot;);\n      arrowBaseHeight = scnr.nextInt();\n      \n      System.out.println(&quot;Enter arrow base width:&quot;);\n      arrowBaseWidth = scnr.nextInt();\n      \n      System.out.println(&quot;Enter arrow head width:&quot;);\n      arrowHeadWidth = scnr.nextInt();\n      System.out.println(&quot;&quot;);\n      \n      while (arrowHeadWidth &lt;= arrowBaseHeight) {\n         System.out.println(&quot;Enter arrow head width: &quot;);\n         arrowHeadWidth = scnr.nextInt();\n      }\n      System.out.println();\n      \n      for (int i = 0; i &lt; arrowBaseHeight; i++) {\n         for (int j = 0; j &lt; arrowBaseWidth; j++) {\n            System.out.print(&quot;*&quot;);\n         }\n         System.out.println();\n      }\n      \n      for (int i = arrowHeadWidth; i &gt; 0; i--) {\n         for (int j = 0; j &lt; i; j++) {\n            System.out.print(&quot;*&quot;);\n         }\n         System.out.println();\n      }\n   }\n}\n</code></pre>\n<p>I attempted to remove the first user prompt to input the arrow head width. As after searching on google that was one suggestion provided as the NoSuchElementException error was reading both user inputs for the same variable. Only after I removed the first user prompt. I was given the error that the variable arrowHeadWidth might not have been intinalized.</p>\n"},{"comments":[{"comment_id":79883108,"body":"Why not just use a <code>Set</code>?"},{"comment_id":79883112,"body":"Just use <code>LinkedHashSet</code>."},{"comment_id":79883152,"body":"with set or other data structure don&#39;t forget to implement hashcode and equals for not primitive types"},{"comment_id":79883178,"body":"Where is <code>insertWord</code> defined?"},{"comment_id":79883227,"body":"Your logic fails if it duplicates the last element. You should <code>return</code> instead of <code>break</code>, and insert unconditionally at the end."},{"comment_id":79883251,"body":"@shmosel In another main class."},{"comment_id":79883291,"body":"What&#39;s the logic of scanning for <code>insertWord</code> when trying to insert <code>word</code>?"},{"comment_id":79883938,"body":"@shmosel see edit, meant <code>insertWord</code> to be inserted."},{"comment_id":79884318,"body":"Any specific reason not using set.What I am seeing you need a collection which will contain unique word"},{"comment_id":79890234,"body":"I used the <code>list.size()</code> method to see how large it was after the last time I used it during execution. Then I created a array with that size. Then the time reduced by 15 seconds! Memory ain&#39;t a concern for me."}],"answers":[{"answer_id":46464644,"body":"<p>If you would still like to use a <code>LinkedList</code> data structure (not a <code>Set</code>) and do this with <code>Java8</code>, here it is an easy and faster solution:</p>\n\n<pre><code>LinkedList&lt;WordInDocument&gt; list = new LinkedList&lt;&gt;();\n\npublic void insert (WordInDocument insertWord) {\n    // try to find any matching element\n    Optional&lt;WordInDocument&gt; optionalExistingWord =\n        list\n        .stream()\n        .parallel()\n        .filter(element -&gt; element.word.equalsIgnoreCase(insertWord.word))\n        .findAny();\n    // if none is found, add the new element to the list\n    if(!optionalExistingWord.isPresent()) {\n        list.add(insertWord);\n    }\n}\n</code></pre>\n"},{"answer_id":46464955,"body":"<p>You can remove duplicates via TreeSet:</p>\n\n<pre><code>    LinkedList&lt;WordInDocument&gt; list = new LinkedList&lt;&gt;();\n    TreeSet&lt;WordInDocument&gt; set = new TreeSet&lt;&gt;(\n            new Comparator&lt;WordInDocument&gt;() {\n                @Override\n                public int compare(WordInDocument d1, WordInDocument d2) {\n                    return d1.word.compareToIgnoreCase(d2.word);\n                }\n            });\n    set.addAll(list);\n    list = new LinkedList&lt;WordInDocument&gt;(set);\n</code></pre>\n\n<p>this should be faster</p>\n"}],"last_activity_date":1684696690,"question_id":46464179,"body":"<p>I'm (was) trying to make a LinkedList that removes duplicates during the insertion. This is my code:</p>\n<pre><code>LinkedList&lt;WordInDocument&gt; list = new LinkedList&lt;WordInDocument&gt;();\n/**\n * Insert a word.\n * \n * @param insertWord The word that'll be inserted for, the word and it's Part Of Speech. \n * If you print &quot;insertWord.word&quot; you'll get the String of the word.\n */\npublic void insert (Word insertWord) {\n    ListIterator&lt;WordInDocument&gt; listIt = list.listIterator();\n    WordInDocument entry = new WordInDocument(insertWord);\n    if (list.isEmpty()) {\n        listIt.add(entry);\n    }\n    else {\n        while (listIt.hasNext()) {\n            //the iterator iterate with this if-statement, \n            //if the iterator finds a equal word, then break\n            if (listIt.next().wordInEntry.word.equalsIgnoreCase(insertWord.word)) {\n                break;\n            }\n        }\n        //only true if an equal word wasn't found, then ad the word at the end\n        if (!listIt.hasNext()) {\n            listIt.add (entry);\n        }\n    }\n}\n</code></pre>\n<p>But if it's a lot of inputs then it takes a long time to execute this (around 1 minute). Is their any better way of removing duplicate values during insertion?</p>\n<p>EDIT:<br />\nThanks for the help. I solved it by using &quot;binary insertion&quot; as I call it. That way it also is sorted after every insertion which I intended to do after the last insertion. Here is my code:</p>\n<pre><code>WordInDocument[] list = new WordInDocument[MAX_INDEX];\nint currentMaxIndex = 0;\n/**\n * Insert a word, it uses binary search to find where to put it, if the\n * current word doesn't exists, then insert it, this can bee called &quot;Binary insert&quot;.\n * If the current word already exists, then ignore.\n * \n * @param insertword The word that'll be inserted for, the word and it's Part Of Speech. \n * If you print &quot;insertWord.word&quot; you'll get the String of the word.\n */\npublic void insert(Word insertword) { // put element into array\n    WordInDocument entry = new WordInDocument(insertword);\n    //First element\n    if (list[0] == null) {\n        list[0] = entry;\n        currentMaxIndex++;\n        return;\n    }\n    int inputIndex = binaryInsert(insertword);\n    //It's at the end\n    if (list[inputIndex] == null) {\n        list[inputIndex] = entry;\n        currentMaxIndex++; \n        return;\n    }\n    //It's equal to another word\n    if (list[inputIndex].wordInEntry.word.equalsIgnoreCase(word.word)) {\n        return;\n    }\n    //It's between two entries\n    for (int i = currentMaxIndex; i &gt; inputIndex; i--) { // move bigger ones one up.\n        list[i] = list[i - 1];\n    }\n    list[inputIndex] = entry;\n    currentMaxIndex++;\n}\n\n private int binaryInsert(Word word) {\n    int lowerBound = 0;\n    int upperBound = currentMaxIndex - 1;\n    int compareStrings = list[mid].wordInEntry.word.compareToIgnoreCase(word.word);\n    while (true) {\n        int mid = (upperBound + lowerBound) / 2;\n        if (lowerBound == mid) {\n            if (compareStrings &gt; 0) {\n                return mid;\n            }\n        }\n        if (compareStrings &lt; 0) {\n            lowerBound = mid + 1; // its in the upper\n            if (lowerBound &gt; upperBound) {\n                return mid += 1;\n            }\n        } else if (lowerBound &gt; upperBound) {\n            return mid;\n        } else {\n            upperBound = mid - 1; // its in the lower\n        }\n    }\n }\n</code></pre>\n<p>Now it takes 2 seconds instead of 45 seconds.</p>\n"},{"comments":[{"comment_id":132840036,"body":"There is, if you&#39;re prepared to go down the dark road of <a href=\"https://www.oracle.com/technical-resources/articles/java/javareflection.html\" rel=\"nofollow noreferrer\">Java reflection</a>."},{"comment_id":132840092,"body":"For simple use cases though, you generally don&#39;t want to"},{"comment_id":134550896,"body":"@RobbyCornelissen, lol, I agree to an extent.  There are some complexities with reflection, although the fundamentals aren&#39;t too extraneous.  It&#39;s incredibly abstract, in terms of how it&#39;s structured, in relation to the general portion of the JDK."}],"answers":[{"answer_id":75281680,"body":"<p>You could use the <a href=\"https://commons.apache.org/proper/commons-ognl/language-guide.html\" rel=\"nofollow noreferrer\">Apache OGNL language</a>, it is an external dependency that allows you to access properties with names in strings.</p>\n<p>It has many more features, but you cannot expect that it simply expands your Java syntax - you will have to evaluate a String that contains an expression in that language.</p>\n<p>In some cases you can embed it, like in Apache Camel, where it is &quot;just another expression language&quot;.</p>\n"},{"answer_id":76300816,"body":"<p>No, it's not part of the syntax.</p>\n<p><a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-18.html\" rel=\"nofollow noreferrer\">Oracle, Chapter 18 - Syntax</a></p>\n<p>You could use reflection, if that suits your needs.<br />\nJava reflection offers the ability to access objects, fields, and methods via <code>String</code> values, and other methods, if need be.</p>\n<p>Consider the following class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Example {\n    String string = &quot;stack overflow&quot;;\n\n    int method(int valueA, int valueB) {\n        return valueA + valueB;\n    }\n}\n</code></pre>\n<p>If you want to access the field <code>string</code>, you can use the following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Example example = new Example();\nField field = example.getClass().getDeclaredField(&quot;string&quot;);\nString string = field.get(example);\n</code></pre>\n<p>If you want to call <code>method</code>, you can use the following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Example example = new Example();\nMethod method = example.getClass().getDeclaredMethod(&quot;method&quot;, int.class, int.class);\nint value = (int) method.invoke(example, 1, 2);\n</code></pre>\n"}],"last_activity_date":1684695251,"question_id":75281407,"body":"<p>In JavaScript you can access a property of an object in two ways:</p>\n<pre><code>object.property\nobject[&quot;property&quot;]\n</code></pre>\n<p>In Java, I am only aware of the first way. Is there a way to access a Java object's properties by using a string as well?</p>\n"}]}