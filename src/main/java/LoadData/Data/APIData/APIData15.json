{"items":[{"comments":[{"comment_id":134525260,"body":"Please provide enough code so others can better understand or reproduce the problem."}],"last_activity_date":1684461713,"question_id":76285546,"body":"<p>How to run ORMLite Auto-Generator generate table entity class</p>\n<p>Auto generate ORMLITE entity class.</p>\n<p>I have tried below cmd but didn't work\n&quot;ormlite-autogen generate -c generator.properties&quot; Where I can find &quot;ORMLite Auto-Generator&quot; dependencies</p>\n"},{"comments":[{"comment_id":126479400,"body":"edited, could you please help now?"},{"comment_id":126479500,"body":"Your Gradle build script doesn&#39;t define a dependency on the <code>javafaker</code> library."},{"comment_id":126479551,"body":"I removed it since my module.info gives me a tooltip that says &quot;Ambiguous module reference: javafaker&quot;"},{"comment_id":126479645,"body":"You definitely need the javafaker library declared in your dependencies.  Put it back."},{"comment_id":126479684,"body":"added the javafaker to the gradle file again."},{"comment_id":126479720,"body":"My first approach is to add the implementation in the build.gradle file, sync the gradle file and use the library classes. The only problem is, I can&#39;t import the class since the IDE tells me to add a requires directive in the module-info.java file, but then it says it can&#39;t find the module. When this failed, then I tried adding the library via the IDE."},{"comment_id":126479775,"body":"&quot;Package &#39;com.github.javafaker&#39; is declared in module &#39;javafaker&#39;, but module &#39;com.example.demo1&#39; does not read it&quot; This is the error I get when I don&#39;t add the requires directive in my module-info.java file"}],"answers":[{"answer_id":71564960,"body":"<p>I tried for a while to get this to work with Gradle but was unable to.  I don't know Gradle well, but unless you do, I don't advise trying it (unless the alternate option of a static import, discussed below, works for you).</p>\n<p><strong>Alternate option: use a static import</strong></p>\n<p>I didn't try this, but this is <a href=\"https://stackoverflow.com/a/71964439/1155209\">suggested in another answer</a>.</p>\n<p>Before you try this, see:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/46537294/whats-the-difference-between-requires-and-requires-static-in-module-declaration\">What&#39;s the difference between requires and requires static in module declaration</a></li>\n</ul>\n<p>It is IMO, a bit of a hack in this usage case.  This makes the module optional at runtime.  But, if the module is on the classpath instead of the module path its code can still be used.  More information quoted from the linked answer:</p>\n<blockquote>\n<p>A requires static clause expresses a dependency that is optional at\nrun time. That means at compile time the module system behaves exactly\nas described above.</p>\n<p>At run time, on the other hand, it mostly ignores requires static\nclauses. If it encounters one, it does not resolve it. That means, if\nan observable module is only referenced with requires static, it does\nnot make it into the module graph!</p>\n</blockquote>\n<p><strong>Alternate option: Non-modular project</strong></p>\n<p>You can fix this issue by making your project non-modular:</p>\n<ul>\n<li>Delete your <code>module-info.java</code> file.</li>\n<li>Run your application with JavaFX modules on the module-path.\n<ul>\n<li>The <code>org.openjfx.javafxplugin</code> you are already doing will help achieve this by specifying the modules to be used.</li>\n<li>To execute the application directly in the IDE rather than through Gradle, you will need to specify the module options to the VM for the IDE execution configuration (information on that is in the getting started documentation at openjfx.io).</li>\n</ul>\n</li>\n<li>For packaging, switch to using the <a href=\"https://badass-runtime-plugin.beryx.org/releases/latest/\" rel=\"nofollow noreferrer\">badass-runtime-plugin</a> rather than the <a href=\"https://badass-jlink-plugin.beryx.org/releases/latest/\" rel=\"nofollow noreferrer\">badass-jlink-plugin</a>.  This will package the application via <code>jpackage</code> rather than <code>jlink</code> (which cannot package non-modular applications or applications with automatic modules).</li>\n<li>In the <code>application</code> block of your build file, you no longer need to specify the module for your application as you no longer have one.</li>\n</ul>\n<p>While that means that your application is no longer modular, in this case, in my opinion, this is not such a big loss.  The dependencies you are using are not well-defined modules, so you can't use <code>jlink</code> to create a package for your application, and you don't have the level of modular encapsulation and definition you would normally receive for fully modular projects.</p>\n<p>For more information, see the Getting started instructions at:</p>\n<ul>\n<li><a href=\"https://openjfx.io/openjfx-docs/\" rel=\"nofollow noreferrer\">https://openjfx.io/openjfx-docs/</a></li>\n</ul>\n<p>Under the sections &quot;Non-Modular with Gradle&quot; for your selected IDE.</p>\n<p><strong>Alternate option: Using Maven</strong></p>\n<p>It is easy to get this to work with Maven.</p>\n<ol>\n<li><p>Create a <a href=\"https://www.jetbrains.com/help/idea/javafx.html\" rel=\"nofollow noreferrer\">new JavaFX project</a></p>\n<ul>\n<li>Choose Maven as your build system instead of Gradle.</li>\n</ul>\n</li>\n<li><p>Add the javafaker dependency to your pom.xml.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.github.javafaker&lt;/groupId&gt;\n    &lt;artifactId&gt;javafaker&lt;/artifactId&gt;\n    &lt;version&gt;1.0.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n</li>\n<li><p>Press the refresh icon in the Maven window to reimport the Maven project into the IDE.</p>\n</li>\n<li><p>Add the requires clause for the javafaker module into your module-info.java</p>\n<pre><code>requires javafaker;\n</code></pre>\n</li>\n<li><p>Add the code to use javafaker to your app.</p>\n</li>\n</ol>\n<p>I don't have code to use javafaker, so I could not verify that the last step would work, but, give it a try . . .</p>\n<p><strong>Why you can receive this issue when using Gradle, but not Maven</strong></p>\n<p>Looking at the <a href=\"https://docs.gradle.org/current/userguide/java_library_plugin.html#using_libraries_that_are_not_modules\" rel=\"nofollow noreferrer\">Gradle Documentation</a> section &quot;Using libraries that are not modules&quot;:</p>\n<blockquote>\n<p>A third case are traditional libraries that provide no module information at all — for example commons-cli:commons-cli:1.4. <strong>Gradle puts such libraries on the classpath instead of the module path.</strong> The classpath is then treated as one module (the so called unnamed module) by Java.</p>\n</blockquote>\n<p>This is the case with the javafaker dependency that you are using. It has no <code>module-info.java</code> and does not define the property <code>Automatic-Module-Name</code> in its manifest file (which are the other two cases in the section). Both the other cases result in Gradle putting the library on the module path, but the case you have means that it is on the class path.</p>\n<p>This is a problem when you want to access the code from a named module that you define, which you have because you created a <code>module-info.java</code>.</p>\n<p>Your module can only find code and resources of modules it requires (which need to be on the module path), so you add <code>requires javafaker</code> to the <code>module-info.java</code>, and get the following when you try to run through the IDE:</p>\n<pre><code>java.lang.module.FindException: Module javafaker not found, required by com.example.demo1\n</code></pre>\n<p>So you remove the <code>requires javafaker</code> from the <code>module-info.java</code> as advised by the Gradle documentation I linked and you get the following when you try to compile:</p>\n<pre><code>Package 'com.github.javafaker' is declared in module 'javafaker', but module 'com.example.demo1' does not read it\n</code></pre>\n<p>So you must place the library in the module-info to use it, but you can't place the library in module-info because Gradle puts in on the classpath -&gt; <a href=\"https://en.wikipedia.org/wiki/Catch-22#Concept\" rel=\"nofollow noreferrer\">catch-22</a>.</p>\n<p>There are workarounds to this such as providing VM arguments to allow access to the unnamed module (which is the classpath), or maybe modifying the module path handling of the Gradle build and/or IDE somehow (I don't know how), but they are pretty ugly.</p>\n<p>On the other hand, for this case, Maven acts differently from Gradle, it places the dependent library on the module path, even if it does not have a <code>module-info.java</code> or <code>Automatic-Module-Name</code> defined.  This means that it was (for me) much easier to set up and use.</p>\n<p><strong>Incidental advice on module naming</strong></p>\n<p>This is not an error, but note: Although <a href=\"https://openjdk.java.net/projects/jigsaw/spec/issues/#VersionsInModuleNames\" rel=\"nofollow noreferrer\">module names with numbers in them are now allowed due to a change in the module system specification</a>, it is probably best not to put numbers in module names to <a href=\"https://stackoverflow.com/a/41859239/1155209\">prevent the module name and version info being confused</a>.</p>\n"},{"comments":[{"comment_id":134524441,"body":"It is (in my opinion) not really intuitive what <code>requires static</code> does, but it does appear to resolve the issue.  If you would like to understand it, then see: <a href=\"https://stackoverflow.com/questions/46537294/whats-the-difference-between-requires-and-requires-static-in-module-declaration\">What&#39;s the difference between requires and requires static in module declaration</a>."}],"answer_id":71964439,"body":"<p>I've had a similar issue recently. Adding static to the requires statement helped however. Maybe this will fix your issue without having to switch to maven.</p>\n<p>So you'd need to add: <code>requires static javafaker;</code></p>\n"}],"last_activity_date":1684461514,"question_id":71562138,"body":"<p>I'm creating a sample demo application with JavaFX in IntelliJ, but I need to use a library called the JavaFaker library. I'm using Gradle as the build system, but every time I try to add the library, either as the implementation in the build.gradle file, or via IntelliJ project structure options, the module.java file says error: module not found. I've already tried adding it to modules but nothing changes.</p>\n<p>module-info.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>module com.example.demo1 {\n    requires javafx.controls;\n    requires javafx.fxml;\n    requires javafaker;\n\n    opens com.example.demo1 to javafx.fxml;\n    exports com.example.demo1;\n}\n</code></pre>\n<p>build.gradle</p>\n<pre><code>plugins {\n    id 'java'\n    id 'application'\n    id 'org.openjfx.javafxplugin' version '0.0.10'\n    id 'org.beryx.jlink' version '2.24.1'\n}\n\ngroup 'com.example'\nversion '1.0-SNAPSHOT'\n\nrepositories {\n    mavenCentral()\n}\n\next {\n    junitVersion = '5.8.2'\n    javaFakerVersion = '1.0.2'\n}\n\nsourceCompatibility = '17'\ntargetCompatibility = '17'\n\ntasks.withType(JavaCompile) {\n    options.encoding = 'UTF-8'\n}\n\napplication {\n    mainModule = 'com.example.demo1'\n    mainClass = 'com.example.demo1.HelloApplication'\n}\n\njavafx {\n    version = '17.0.1'\n    modules = ['javafx.controls', 'javafx.fxml']\n}\n\ndependencies {\n    implementation(&quot;com.github.javafaker:javafaker:${javaFakerVersion}&quot;)\n    testImplementation(&quot;org.junit.jupiter:junit-jupiter-api:${junitVersion}&quot;)\n    testRuntimeOnly(&quot;org.junit.jupiter:junit-jupiter-engine:${junitVersion}&quot;)\n}\n\ntest {\n    useJUnitPlatform()\n}\n\njlink {\n    imageZip = project.file(&quot;${buildDir}/distributions/app-${javafx.platform.classifier}.zip&quot;) as RegularFile\n    options = ['--strip-debug', '--compress', '2', '--no-header-files', '--no-man-pages']\n    launcher {\n        name = 'app'\n    }\n}\n\njlinkZip {\n    group = 'distribution'\n}\n\n</code></pre>\n<p>error message</p>\n<pre><code>&gt; Task :HelloApplication.main() FAILED\nError occurred during initialization of boot layer\njava.lang.module.FindException: Module javafaker not found, required by com.example.demo1\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/afOed.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/afOed.png\" alt=\"added library via project structure\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/hJuev.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hJuev.png\" alt=\"error\" /></a></p>\n"},{"last_activity_date":1684460910,"question_id":76284337,"body":"<p>Taking Full Page Screenshot using Selenium-Java:</p>\n<p>Looking for help in taking a full-page screenshot. I have tried multiple libraries like ashot(), shutterbug, ChromeDevTools, selenium native methods among others, however, it looks like due to the way the webpage is built(has multiple containers, which have their own scroll among other things), I can only take a screenshot of the visible parts of the page. It basically doesn't scroll and take full screenshot.</p>\n<p>So to overcome this, I had to create a custom script that will scroll based on the element(one of the containers within the page). It works fine. However, there are a couple of issues.</p>\n<ul>\n<li>When the webpage has small white space but is still scrollable, the below code results in a duplicate copy of the screenshot which doesn't add any value. I tried pixel-to-pixel comparison but that didn't work, since there is a slight difference because of the white space in the image.</li>\n<li>When a pop-up is open, the page script doesn't realize that and still scrolls and takes screenshot with the pop-up still there, just the background changing.</li>\n<li>How to remove the header which is repeated for each of the screenshots?</li>\n</ul>\n<p>How to handle such scenarios? Any tips are much appreciated.</p>\n<pre><code>if (driver.findElements(BodyLocator).size() &gt; 0) {\n            WebElement body = driver.findElement(BodyLocator);\n            driver.executeScript(&quot;arguments[0].scrollTo(0, 0);&quot;, body);\n\n            // Capture initial screenshot\n            screenshots.add(captureScreenshot());\n\n            // Scroll down until the end of the page is reached\n            long clientHeight = (long) driver.executeScript(&quot;return arguments[0].clientHeight;&quot;, body);\n            long scrollHeight = (long) driver.executeScript(&quot;return arguments[0].scrollHeight;&quot;, body);\n\n            long currentHeight = 0;\n\n            while (currentHeight + clientHeight &lt; scrollHeight) {\n                currentHeight += clientHeight;\n                driver.executeScript(&quot;arguments[0].scrollTo(0, arguments[1]);&quot;, body, currentHeight);\n                screenshots.add(captureScreenshot());\n            }\n\n            // Stitch screenshots together into a single image\n            BufferedImage stitchedImage = stitchScreenshots(screenshots);\n\n            // Save stitched image to file\n            File output = new File(output13.png&quot;);\n            ImageIO.write(stitchedImage, &quot;png&quot;, output);\n\n        }\n\n\nprivate static BufferedImage stitchScreenshots(List&lt;BufferedImage&gt; screenshots) {\n        int width = screenshots.get(0).getWidth();\n        int height = screenshots.get(0).getHeight() * screenshots.size();\n        BufferedImage stitchedImage = new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);\n        int y = 0;\n        for (BufferedImage image : screenshots) {\n            stitchedImage.createGraphics().drawImage(image, 0, y, null);\n            y += image.getHeight();\n        }\n        return stitchedImage;\n    }\n</code></pre>\n<p>Tried multiple libraries, but nothing helped.</p>\n"},{"comments":[{"comment_id":134523954,"body":"You can research <a href=\"https://www.google.com/search?q=option+Xbootclasspath/p:+not+allowed+with+target+17+site:stackoverflow.com\" rel=\"nofollow noreferrer\">similar questions</a>. Basically this option has been removed from more recent versions of Java."},{"comment_id":134524392,"body":"As already pointed out, there are several similar questions on Stack Overflow for this issue. Please be sure to search SO for your problem before asking a question here. There are several ways to resolve this, but I found <a href=\"https://stackoverflow.com/a/57292637/2985643\">this answer to be simple and effective</a> for NetBeans projects."},{"comment_id":134524449,"body":"Also: [1] Please show your error messages as text, rather than in a screen shot. [2] With respect to NetBeans, any configuration of Java in the external environment (e.g. <code>PATH</code> and <code>JAVA_HOME</code> settings) is irrelevant. [3] There can certainly be valid reasons to have multiple versions of Java on your machine at the same time. But unless there is a specific reason for doing so, it is usually safer to only have one version installed at a time. In your case it seems that you are running NetBeans with Java 17, but your console is using Java 20."},{"comment_id":134524704,"body":"Support for -Xbootclasspath was removed in Java 9.  So you need to fix your project&#39;s out-dated build tool configs if you want to make it run on Java 11, 17 or 20.  How you do that will depend on what build tool your project uses ... and why the build tool configs told it to use that option in the first place."},{"comment_id":134537290,"body":"thanks for your help i run netbean project very well, but when i turn off &quot;complie on save&quot; in  Properties i show that error ( i turn off it bc i want it run specific files, rather than running the file index.html for quick code and debug) :"},{"comment_id":134537301,"body":"Compiling 17 source files to C:\\Users\\van12\\OneDrive\\Desktop\\ki5\\SWP391\\SocialNetworkIRCN&zwnj;&#8203;V\\Clone\\SocialNetwor&zwnj;&#8203;kIRCNV\\SocialNetwork&zwnj;&#8203;IRCNV\\build\\web\\WEB-&zwnj;&#8203;INF\\classes error: option -Xbootclasspath/p: not allowed with target 19 BUILD FAILED (total time: 0 seconds)"}],"last_activity_date":1684460790,"question_id":76285242,"body":"<p>error: option -Xbootclasspath/p: not allowed with target 17</p>\n<p>When I try to run a Java web project it gives this error:</p>\n<p><a href=\"https://i.stack.imgur.com/JKGYX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JKGYX.png\" alt=\"error\" /></a></p>\n<p>I tried to downgrade from 20 to 17 but it still have this problem. How can I fix that?</p>\n<p>I am using NetBeans 15. I downloaded JDK 20 and 17.</p>\n<p><a href=\"https://i.stack.imgur.com/SFNlM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SFNlM.png\" alt=\"version\" /></a></p>\n"},{"comments":[{"comment_id":134524515,"body":"See <a href=\"https://stackoverflow.com/questions/70013308/postgresql-crashing-terminating-connection-due-to-unexpected-postmaster-exit\" title=\"postgresql crashing terminating connection due to unexpected postmaster exit\">stackoverflow.com/questions/70013308/&hellip;</a>"},{"comment_id":134524517,"body":"Look in the database server&#39;s log file to see if there is more information."}],"last_activity_date":1684460231,"question_id":76285482,"body":"<p>java.sql.SQLException: FATAL: postmaster exited during a parallel transaction</p>\n<p>I create an .xhtml website and start to run 2 queries when a page has been loaded. but it shows the above error.\nWhat's cause the problem ? and how to fix it ?</p>\n"},{"comments":[{"comment_id":134523913,"body":"I continue to be amazed how few people know how to <a href=\"https://stackoverflow.com/questions/3988788/what-is-a-stack-trace-and-how-can-i-use-it-to-debug-my-application-errors\">read stack traces</a>. The root cause of the error is the last &quot;Caused by&quot; in the stack trace, not the first line you provided us with ..."},{"comment_id":134523956,"body":"Thank you for clarifying @meriton that I indeed did miss the obvious caused by, I updated with my stack trace.  My bad for forgetting to include it"},{"comment_id":134524081,"body":"Well, that <a href=\"https://github.com/spring-projects/spring-data-commons/blob/main/src/main/java/org/springframework/data/repository/core/support/AbstractRepositoryMetadata.java#L59\" rel=\"nofollow noreferrer\">complains</a> that your repository interface is not, in fact, an interface. Try setting a breakpoint in the line of code throwing this exception to find out which repository interface Spring is complaining about ..."},{"comment_id":134524131,"body":"@meriton, i guess i have some diving to do to see why this is occurring.  Any ideas why Spring is trying to instantiate my repos at all?  Why isnt the test just staying scoped to the single test?"}],"answers":[{"answer_id":76285416,"body":"<p>Thanks @mertion for the string handed guide in the right direction.</p>\n<p>Just because my test was not testing any repositories, doesn't mean the test didn't try to instantiate them.<br />\nI had a test call 'MyRepo' instead of 'MyRepoTest', so Spring was instantiating the test as the real repo, which was causing my issue.</p>\n<p>So renaming a file fixed my issue.</p>\n"}],"last_activity_date":1684458958,"question_id":76285226,"body":"<p>I am writing a barebones junit5 test to test a view, but no matter how I set up the file, I get the same error over and over.  As a noob, I was wondering if anyone could guide me to the answer/or just tell me what combination of things I am doing is wrong.</p>\n<p>Test File</p>\n<pre><code>package com.example;\n\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.springframework.web.context.WebApplicationContext;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.springframework.test.context.junit.jupiter.SpringExtension;\nimport org.springframework.web.servlet.config.annotation.ViewControllerRegistry;\nimport org.springframework.context.support.StaticApplicationContext;\nimport org.springframework.boot.test.autoconfigure.web.servlet.AutoConfigureMockMvc;\nimport org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;\nimport org.springframework.boot.test.context.SpringBootTest;\n\nimport org.springframework.test.web.servlet.MockMvc;\nimport org.springframework.test.web.servlet.setup.MockMvcBuilders;\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;\n\n// @ExtendWith(SpringExtension.class)\n@SpringBootTest\n@AutoConfigureMockMvc\npublic class MyViewTest {\n\n    @Autowired\n    private MockMvc mockMvc;\n    // private WebApplicationContext webApplicationContext;\n\n    private ViewControllerRegistry registry;\n\n    @BeforeEach\n    public void setup() {\n        this.registry = new ViewControllerRegistry(new StaticApplicationContext());\n        // this.mockMvc = MockMvcBuilders.standaloneSetup(webApplicationContext).build();\n    }\n\n    @Test\n    public void testAddViewControllers() throws Exception {\n        MyViewview = new MyView();\n        view.addViewControllers(registry);\n\n        mockMvc.perform(get(&quot;/&quot;))\n                .andExpect(status().isOk())\n                .andExpect(view().name(&quot;forward:/public/index&quot;));\n    }\n}\n\n\n</code></pre>\n<p>Here are the parts of my POM that I think are relevant</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;version&gt;5.7.0&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n            &lt;artifactId&gt;mockito-inline&lt;/artifactId&gt;\n            &lt;version&gt;3.12.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n            &lt;artifactId&gt;mockito-junit-jupiter&lt;/artifactId&gt;\n            &lt;version&gt;3.12.4&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>And the View</p>\n<pre><code>package com.example;\n\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.Ordered;\nimport org.springframework.web.servlet.config.annotation.ViewControllerRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\n@Configuration\npublic class MyView implements WebMvcConfigurer {\n\n    @Override\n    public void addViewControllers( ViewControllerRegistry registry ) {\n        registry.addViewController( &quot;/&quot; ).setViewName( &quot;forward:/public/index&quot; );\n        registry.setOrder( Ordered.HIGHEST_PRECEDENCE );\n    }\n}\n</code></pre>\n<p>I've tried all combinations of online examples for the class @, using just @SpringBootTest, just the @AutoConfigureMockMvc, the @ExtendWith, and all possible permutations, as well as @autowiring the mvc, and trying to build it in the setup.</p>\n<p>EDIT\nThe stack trace meant nothing to me, but it was wrong of me to assume.\nStack Trace, last caused by</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: Given type must be an interface!\n        at org.springframework.util.Assert.isTrue(Assert.java:121) ~[spring-core-5.3.6.jar:5.3.6]\n        at org.springframework.data.repository.core.support.AbstractRepositoryMetadata.&lt;init&gt;(AbstractRepositoryMetadata.java:60) ~[spring-data-commons-2.4.8.jar:2.4.8]\n        at org.springframework.data.repository.core.support.AnnotationRepositoryMetadata.&lt;init&gt;(AnnotationRepositoryMetadata.java:45) ~[spring-data-commons-2.4.8.jar:2.4.8]\n        at org.springframework.data.repository.core.support.AbstractRepositoryMetadata.getMetadata(AbstractRepositoryMetadata.java:78) ~[spring-data-commons-2.4.8.jar:2.4.8]\n        at org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport.getRepositoryConfigurations(RepositoryConfigurationExtensionSupport.java:103) ~[spring-data-commons-2.4.8.jar:2.4.8]\n        at org.springframework.data.repository.config.RepositoryConfigurationDelegate.registerRepositoriesIn(RepositoryConfigurationDelegate.java:149) ~[spring-data-commons-2.4.8.jar:2.4.8]\n        at org.springframework.boot.autoconfigure.data.AbstractRepositoryConfigurationSourceSupport.registerBeanDefinitions(AbstractRepositoryConfigurationSourceSupport.java:62) ~[spring-boot-autoconfigure-2.4.5.jar:2.4.5]\n        at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.lambda$loadBeanDefinitionsFromRegistrars$1(ConfigurationClassBeanDefinitionReader.java:396) ~[spring-context-5.3.6.jar:5.3.6]\n        at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:684) ~[na:na]\n        at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsFromRegistrars(ConfigurationClassBeanDefinitionReader.java:395) ~[spring-context-5.3.6.jar:5.3.6]\n        at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForConfigurationClass(ConfigurationClassBeanDefinitionReader.java:157) ~[spring-context-5.3.6.jar:5.3.6]\n        at org.springframework.context.annotation.ConfigurationClassBeanDefinitionReader.loadBeanDefinitions(ConfigurationClassBeanDefinitionReader.java:129) ~[spring-context-5.3.6.jar:5.3.6]\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:343) ~[spring-context-5.3.6.jar:5.3.6]\n        at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:247) ~[spring-context-5.3.6.jar:5.3.6]\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:311) ~[spring-context-5.3.6.jar:5.3.6]\n        at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:112) ~[spring-context-5.3.6.jar:5.3.6]\n        at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:746) ~[spring-context-5.3.6.jar:5.3.6]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:564) ~[spring-context-5.3.6.jar:5.3.6]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:782) ~[spring-boot-2.4.5.jar:2.4.5]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:774) ~[spring-boot-2.4.5.jar:2.4.5]\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439) ~[spring-boot-2.4.5.jar:2.4.5]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:339) ~[spring-boot-2.4.5.jar:2.4.5]\n        at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:123) ~[spring-boot-test-2.4.5.jar:2.4.5]\n        at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.3.6.jar:5.3.6]\n        at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.3.6.jar:5.3.6]\n        ... 67 common frames omitted\n    ```\n</code></pre>\n"},{"comments":[{"comment_id":134504979,"body":"Why do you need the function to be generic.? An array of integers should be enough (knowing that you cast the elements to int inside the function."},{"comment_id":134505088,"body":"for university test"},{"comment_id":134505401,"body":"Also consider <code>Array.asList()</code>, a &quot;bridge between array-based and collection-based APIs.&quot;"},{"comment_id":134505493,"body":"meh,,,,fixed it"},{"comment_id":134505528,"body":"why are you writhing a generic method only to cast the results to int inside of the function?  That seems redundant and a good place for a whole host of errors."},{"comment_id":134506018,"body":"because my faculty wants it this way"},{"comment_id":134507415,"body":"It doesn&#39;t make sense. A generic method is supposed to work with any type. Is <code>new Object()</code> a palindrome? I suspect you&#39;re miscommunicating the requirements."}],"answers":[{"comments":[{"comment_id":134506091,"body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76274413/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"answer_id":76274413,"body":"<pre><code>public class pali{\n    public static void main(String[] args) {\n\n        Integer[] a = {12131,121,324,123,33,43,5654,45654};\n\n        System.out.println(&quot;Total palindromes : &quot;+checkPalindrome(a));\n\n        }\n\n        public static &lt;T&gt; int checkPalindrome(T[] b){\n\n            int n=0;\n\n            for(T a:b){\n                int sum=0,r=0;\n                int temp = (int)a;\n                int k = (int)a;\n\n                while(k!=0){\n                    r = k%10;\n                    sum = (sum*10)+r;\n                    k/=10;\n                }\n                if(temp == sum) \n                n++;\n            }\n\n            return n;\n        }\n    }\n</code></pre>\n"},{"answer_id":76274935,"body":"<p>You can convert your <code>Integer</code> values to strings, and utilize the <code>StringBuilder.reverse</code> method to validate a palindrome.</p>\n<pre class=\"lang-java prettyprint-override\"><code>static int checkPalindrome(Integer[] values) {\n    StringBuilder string;\n    int count = 0;\n    for (Integer value : values) {\n        string = new StringBuilder(value.toString());\n        if (string.reverse().toString().equals(value.toString()))\n            count++;\n    }\n    return count;\n}\n</code></pre>\n"}],"last_activity_date":1684458791,"question_id":76274029,"body":"<p>I want to write a generic method that takes an array of integers and counts how many of them are palindrome.</p>\n<p>Here is my program:</p>\n<pre><code>public class pal {\n    public static void main(String[] args) {\n\n        Integer[] a = {12131,121,324,123,33,43,5654};\n\n        System.out.println(&quot;Total palindromes : &quot;+checkPalindrome(a));\n\n        }\n\n        public static &lt;T&gt; int checkPalindrome(T[] b){\n            int n=0,temp=0,sum=0,r=0;\n            for(T a:b){\n                temp = (int)a;\n                while((int)a&gt;0){\n                    r = (int)a%10;\n                    sum = (sum*10)+r;\n                }\n                if(temp == sum){\n                    n++;\n                }\n            }\n            return n;\n        }\n    }\n</code></pre>\n<p>The code doesn't throw any exception nor does it do anything.</p>\n"},{"comments":[{"comment_id":127804709,"body":"The class is actually there in the JAR file. You have mentioned your dependency as &#39;provided&#39;, ensure the JAR is available in the CLASSPATH at runtime."}],"answers":[{"answer_id":53682447,"body":"<p>We had the same problem with java.lang.NoClassDefFoundError: Could not initialize class org.apache.http.conn.ssl.SSLConnectionSocketFactory and there was appropriate dependency in Maven.</p>\n\n<p>The reason of the problem in our case was tika-app, when we changed it to tica-core the problem was solved. The part commented below we replaced with the part above:</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tika&lt;/groupId&gt;\n        &lt;artifactId&gt;tika-core&lt;/artifactId&gt;\n        &lt;version&gt;1.19.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--&lt;dependency&gt;\n        &lt;groupId&gt;org.apache.tika&lt;/groupId&gt;\n        &lt;artifactId&gt;tika-app&lt;/artifactId&gt;\n        &lt;version&gt;1.16&lt;/version&gt;\n    &lt;/dependency&gt;--&gt;\n</code></pre>\n"}],"last_activity_date":1684458295,"question_id":43447847,"body":"<p>I am facing the following issue :</p>\n\n<blockquote>\n  <p>java.lang.NoClassDefFoundError: Could not initialize class org.apache.http.conn.ssl.SSLConnectionSocketFactory</p>\n</blockquote>\n\n<p>I am using httpclient 4.5 jar. Could you please let me know how to resolve it?</p>\n\n<pre><code>SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(sslcontext, new String[] {\"TLSv1\" }, null,\n                       SSLConnectionSocketFactory.BROWSER_COMPATIBLE_HOSTNAME_VERIFIER);\n</code></pre>\n\n<p>my pom.xml contains the following dependency -</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n    &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n    &lt;version&gt;4.5&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"comment_id":134524117,"body":"Is <code>Point</code> an inner class?  What happens if you declare it <code>static</code>?"}],"answers":[{"answer_id":76285376,"body":"<p>Your code is fine. You just need to handle the <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/catchOrDeclare.html\" rel=\"nofollow noreferrer\">checked exception</a> by catching it:</p>\n<pre><code>try {\n    Constructor&lt;Point&gt; constructor = Point.class.getConstructor(float.class, float.class);\n} catch (NoSuchMethodException e) {\n    System.out.println(&quot;missing constructor&quot;);\n}\n</code></pre>\n<p>Or declare it in the method signature:</p>\n<pre><code>public static void main(String[] args) throws NoSuchMethodException {\n</code></pre>\n"}],"last_activity_date":1684457866,"question_id":76285343,"body":"<p>I'm attempting to use reflection to create a new instance of a class, using <code>Class.getConstructor</code>, like so:</p>\n<pre><code>class Program {\n    public static void main(String[] args) {\n        // this throws NoSuchMethodException\n        Constructor&lt;Point&gt; constructor = Point.class.getConstructor(float.class, float.class);\n\n        // but this finds the method\n        Constructor&lt;Point&gt;[] constructors = (Constructor&lt;Point&gt;[])Point.class.getConstructors();\n        System.out.println(constructors[0].toString()); // public Point(float,float)\n    }\n}\n\nclass Point {\n    public float x, y;\n\n    public Point(float x, float y) {\n        this.x = x;\n        this.y = y;\n    }\n}\n</code></pre>\n<p>What am I doing wrong? Why can't I get the constructor by supplying argument types?</p>\n"},{"comments":[{"comment_id":12388491,"body":"Take a peek at the Spring framework. Specifically, the Dependency Injection capability is the part that is most useful to you."}],"answers":[{"answer_id":9740671,"body":"<p>The location of your log file is set outside the package, in a logging framework configuration. \nThe config file is usually on classpath. How it looks depends on what logging framework you use - I recommend to go with <a href=\"http://www.slf4j.org/\" rel=\"nofollow noreferrer\">SLF4J</a> and <a href=\"http://logback.qos.ch/\" rel=\"nofollow noreferrer\">Logback</a>. </p>\n"},{"answer_id":9740675,"body":"<p>The standard solutions for this are:</p>\n\n<ul>\n<li>Log4J: <a href=\"http://logging.apache.org/log4j/\" rel=\"nofollow noreferrer\">http://logging.apache.org/log4j/</a></li>\n<li>SLF4J: <a href=\"http://www.slf4j.org/\" rel=\"nofollow noreferrer\">http://www.slf4j.org/</a></li>\n<li>JDK Built-in Logger: <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/logging/overview.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/technotes/guides/logging/overview.html</a></li>\n</ul>\n\n<p>All of them will allow you to configure the log file location through configuration.</p>\n"},{"comments":[{"comment_id":12446609,"body":"Your example is misleading. The developer can use SLF4J API for is code and log4j adaptor for 3rd party at the same time. Then he just picks some SLF4J backend like logback. In fact this is a reason for SLF4J, it is so simple. No log4j config is necessary."},{"comment_id":12455603,"body":"@RostislavMatl Are you talking about SLF4J &quot;bridging modules&quot; (<a href=\"http://www.slf4j.org/legacy.html\" rel=\"nofollow noreferrer\">slf4j.org/legacy.html</a>)? These allow you to use a library that uses log4j,... internally and redirect its log messages to SLF4J (which might be backed by logback). This is certainly a great feature if you are the USER of a library. However when you are the DEVELOPER of a library why should you force your users to jump through such hoops? Why not use a facade directly? As the SLF4J page states these solutions are &quot;appropriate for software beyond your control&quot;. Please correct me if I have misunderstood you."},{"comment_id":12492611,"body":"Apparently we talk about different things. You wrote: &quot;if you use log4j but the developer using your library uses logback he will have to include a log4j configuration&quot; - that&#39;s not truth. And it&#39;s a bad solution at the same time.  I did not tell you cannot use SLF4J while developing a new code.   I chose the library user point or view because you&#39;ll be more often the user then the creator."},{"comment_id":12494665,"body":"@RostislavMatl Ah, now I understand. I wrote <i>&quot;he will have to include&quot;</i>, and you are saying there are other solutions, i.e. the bridging module. Regarding the point of view, I think the OP wrote from the point of view of the library creator, thus my answer is written in that way as well."},{"comment_id":12494934,"body":"@RostislavMatl I have updated my answer and added a link to <i>bridging modules</i>. However, I don&#39;t want to stress the point too much, since the best approach when developing a <b>new library</b> is still to use a facade directly I think. Would you agree?"},{"comment_id":12502183,"body":"Yes, I definitely recommend to use SLF4J with logback as backend and unify logging of 3rd party components logging in your environment with the help of the adaptors / bridging modules."}],"answer_id":9741118,"body":"<p>If you are developing a <strong>library</strong> the others will include in their application you should use a <strong>logging facade</strong>. Otherwise you force the users of your library to configure and include the logging framework you have choosen <strong>in addition to the framework</strong> they chose for their application.</p>\n<p>For instance if you use <strong>log4j</strong> but the developer using your library uses <strong>logback</strong> he will have to include a log4j configuration file and the log4j jar (or take <a href=\"http://www.slf4j.org/legacy.html\" rel=\"noreferrer\">other measures</a>) to make your library happy.</p>\n<p>Logging Facades solve this problem (from Apache Commons Logging):</p>\n<blockquote>\n<p>When writing a library it is very useful to log information. However there are many logging implementations out there, and a library cannot impose the use of a particular one on the overall application that the library is a part of.</p>\n<p>The Logging package is an ultra-thin bridge between different logging implementations. A library that uses the commons-logging API can be used with any logging implementation at runtime. Commons-logging comes with support for a number of popular logging implementations, and writing adapters for others is a reasonably simple task.</p>\n</blockquote>\n<p>Or the reasoning from SLF4J:</p>\n<blockquote>\n<p>The Simple Logging Facade for Java or (SLF4J) serves as a simple facade or abstraction for various logging frameworks, e.g. java.util.logging, log4j and logback, allowing the end user to plug in the desired logging framework at <em>deployment</em> time.</p>\n</blockquote>\n<p>Candidates for logging facades are:</p>\n<ul>\n<li><a href=\"http://commons.apache.org/logging/\" rel=\"noreferrer\">Apache Commons Logging</a></li>\n<li><a href=\"http://www.slf4j.org/\" rel=\"noreferrer\">SLF4J</a></li>\n</ul>\n<p>Personally I would recommend <a href=\"http://www.slf4j.org/\" rel=\"noreferrer\">SLF4J</a> (with <a href=\"http://logback.qos.ch/\" rel=\"noreferrer\">Logback</a>).</p>\n"},{"answer_id":76285367,"body":"<p>Starting From Java 9 libraries authors should use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/System.Logger.html\" rel=\"nofollow noreferrer\">System#getLogger</a> Facade\nand let the Developer choose the logging backend framework.</p>\n<p>All Java popular logging frameworks implement <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ServiceLoader.html\" rel=\"nofollow noreferrer\">Service Provider </a> of the new Facade <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/System.LoggerFinder.html\" rel=\"nofollow noreferrer\">SPI</a></p>\n"}],"last_activity_date":1684457851,"question_id":9740569,"body":"<p>I'm writing a library that gathers various functions that I'll be using in different applications. I want it to generate log statements visible for the user of the library, i.e., if I'm building an application and I'm using the library, I want the library to generate log statements visible to me. How do I do that? Since the log file will be configured by the developer of the application, how will my library know how to log?</p>\n"},{"comments":[{"comment_id":134004537,"body":"For a reputable answer, i would cite <i>all of</i> <a href=\"https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests\" rel=\"nofollow noreferrer\">docs.gradle.org/current/userguide/&hellip;</a>"},{"comment_id":134009195,"body":"It&#39;s possible to filter the included tests in Gradle <a href=\"https://stackoverflow.com/a/31468902/4161471\">stackoverflow.com/a/31468902/4161471</a>. However, it would be more idiomatic to move the different types of tests into different source sets. The <a href=\"https://docs.gradle.org/current/userguide/jvm_test_suite_plugin.html\" rel=\"nofollow noreferrer\">JVM Test Suite</a> plugin is the best way to achieve this."}],"answers":[{"answer_id":76285374,"body":"<p>I ended up using filters to separate the unit and integration tests and to bind the integration tests to the <strong>check</strong> task:</p>\n<pre><code>tasks.named('test') {\n    useJUnitPlatform {\n        filter {\n            includeTestsMatching &quot;*Test&quot;\n            excludeTestsMatching &quot;*IT&quot;\n        }\n    }\n}\n\ndef integrationTest = tasks.register(&quot;integrationTest&quot;, Test) {\n    useJUnitPlatform {\n        filter {\n            includeTestsMatching '*IT'\n            includeTestsMatching 'IT*'\n            includeTestsMatching '*ITCase'\n        }\n    }\n}\n\ntasks.named('check') {\n    dependsOn integrationTest\n}\n</code></pre>\n"}],"last_activity_date":1684457818,"question_id":75978156,"body":"<p>I'm migrating an existing Maven and JUnit 5 project where the integration and unit tests are separated into different phases:</p>\n<ul>\n<li>the <code>*Test.java</code> unit tests are run on the <em>test</em> phase</li>\n<li>the <code>*IT.java</code> integration tests are run on the <em>verify</em> phase</li>\n</ul>\n<p>How do I accomplish the same separation with Gradle? It is my understanding that Gradle's <em>check</em> task is the equivalent to Maven's <em>verify</em>.</p>\n"},{"comments":[{"comment_id":134512274,"body":"<code>jList1.setSelectedIndex(Integer.valueOf(addmore));</code>"}],"answers":[{"comments":[{"comment_id":134526439,"body":"yeah thanks mate, I got the answer from @devilshnd yday but thank you :)"},{"comment_id":134533515,"body":"@JohnnyD, no problem.  As a recommendation, when coding,  you can keep a browser window open, linked to the Java SE JavaDoc page.  <a href=\"https://docs.oracle.com/en/java/javase/20/\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/20</a>"}],"answer_id":76285327,"body":"<p>The <code>JList</code> method you're looking for is called <code>setSelectedIndex</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>brandsBgList.setSelectedIndex(Integer.valueOf(addmore));\n</code></pre>\n<p>You are using <code>isSelectedIndex</code>.</p>\n"}],"last_activity_date":1684456979,"question_id":76278375,"body":"<p>Hey guys I am trying to programmatically select an jlist index and also highlight it to emulate the mouse click.</p>\n<p>This is the code I am using to select the index, it does set it but I can't get the highlight effect that I need.  <code>brandsBgList.isSelectedIndex(Integer.valueOf(addmore));</code></p>\n<p><a href=\"https://i.stack.imgur.com/gkIxR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gkIxR.png\" alt=\"enter image description here\" /></a></p>\n"},{"comments":[{"comment_id":134018933,"body":"this is happening in Samsung S22 Ultra as well. It used to work. Suddenly it stopped working. Looks like Google ML Kit is not reliable."},{"comment_id":134039373,"body":"@VinothK It does also not work on the Samsung Galaxy A51 anymore. We had decided to refactor our custom barcode scanning Capacitor plugin to use <code>com.google.mlkit:barcode-scanning:17.1.0</code> instead. More info <a href=\"https://developers.google.com/ml-kit/vision/barcode-scanning/android\" rel=\"nofollow noreferrer\">here</a>. This requires a bit more effort, because you have to implement the UI yourself and the fancy scan animation is gone, but it works perfectly fine and is faster than the one mentioned in my post."},{"comment_id":134478717,"body":"did we find any solution I am seeing the issue in Samsung S22"},{"comment_id":134497608,"body":"@SweetyBertilla The solution for us was to refactor into using <code>com.google.mlkit:barcode-scanning:17.1.0</code>"}],"answers":[{"comments":[{"comment_id":134497640,"body":"This may work theoretically, but the end user&#39;s device is going to auto update anyway. Imo, it is best to refactor into using <code>com.google.mlkit:barcode-scanning:17.1.0</code>"}],"answer_id":76234524,"body":"<p>The solution that worked for me was to remove the updates from &quot;Google play services&quot;</p>\n<blockquote>\n<p>Story of how I got to this: Yesterday I was testing the library with a\nproject that exists on github and everything worked ok</p>\n<p>Today I tried to do it directly from a new project (thanks to the\nrepository that I used yesterday, I just met\n&quot;com.google.android.gms:play-services-code-scanner&quot;) and I got the\nerror that you posted and I couldn't find a solution (Samsung S20\nUltra), then a similar error came to mind with the &quot;android webview&quot;\nthat made many apps unusable and the solution was to remove all\nupdates and everything worked normally, so I tried the same to &quot;Google\nplay services &quot;and it turns out that now if I open the camera.</p>\n</blockquote>\n<p>I hope my solution will help you, which I think is not the cleanest\nfor the end user.</p>\n"},{"answer_id":76285310,"body":"<p>I met similar problem because of reuse <code>GmsBarcodeScanner</code>.\nMost of time it works. But once it stops working, the phone has to be reset to factory.</p>\n<p>The old code reuse <code>GmsBarcodeScanner</code>:</p>\n<pre><code>class HomeFragment : Fragment() {\n    private var mQRScanner : GmsBarcodeScanner?           = null\n    private var mQrCode    : String?                      = null\n    \n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        val options = GmsBarcodeScannerOptions.Builder()\n            .setBarcodeFormats( Barcode.FORMAT_QR_CODE )\n            .build()\n        mQRScanner = GmsBarcodeScanning.getClient(requireContext(), options)\n        \n        binding.bnQrCode.setOnClickListener{\n            mQRScanner?.startScan()\n                ?.addOnSuccessListener { barcode -&gt;\n                    mQrCode = barcode.rawValue                    \n                }\n        }\n    }\n}\n</code></pre>\n<p>the new code:</p>\n<pre><code>class HomeFragment : Fragment() {\n    private var mQrCode    : String?                      = null\n    \n     override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        binding.bnQrCode.setOnClickListener{\n            val options = GmsBarcodeScannerOptions.Builder()\n                .setBarcodeFormats( Barcode.FORMAT_QR_CODE )\n                .build()\n            val QRScanner = GmsBarcodeScanning.getClient( requireContext(), options )\n\n            QRScanner.startScan()\n                .addOnSuccessListener { barcode -&gt;\n                    mQrCode = barcode.rawValue\n                }                \n        }\n    }\n}\n</code></pre>\n"}],"last_activity_date":1684456391,"question_id":75661357,"body":"<h2>UPDATE:</h2>\n<p><strong>Maybe it works now since the <a href=\"https://developers.google.com/ml-kit/release-notes#march_21_2023\" rel=\"nofollow noreferrer\">March 21, 2023 update</a>, maybe not.</strong> You can read more about it in the <a href=\"https://developers.google.com/ml-kit/vision/barcode-scanning/code-scanner\" rel=\"nofollow noreferrer\">docs</a> if you want to use it.</p>\n<p><strong>Note again that we haven't tested if it works now. We had to quickly decide on how to get barcode scanning working again. So we refactored our custom barcode scanning Capacitor plugin to use <code>com.google.mlkit:barcode-scanning:17.1.0</code> instead. More info about it <a href=\"https://developers.google.com/ml-kit/vision/barcode-scanning/android\" rel=\"nofollow noreferrer\">here</a>. This requires a bit more effort, because you have to implement the UI yourself and the fancy scan animation is gone, but it just works and it seems to be faster.</strong></p>\n<hr />\n<p>We are using <code>com.google.android.gms:play-services-code-scanner:16.0.0-beta3</code> in combination with a custom Capacitor plugin for scanning barcodes like EAN-13 and EAN-8, but on certain devices, the activity seems to crash whenever the user tries to open the Google's barcode scanner UI.</p>\n<p>Here is the <strong>error log</strong> from logcat:</p>\n<pre><code>win=Window{f8c052d u0 com.[redacted]/com.google.mlkit.vision.codescanner.internal.GmsBarcodeScanningDelegateActivity} destroySurfaces: appStopped=true cleanupOnResume=false win.mWindowRemovalAllowed=false win.mRemoveOnExit=false win.mViewVisibility=4 caller=com.android.server.wm.ActivityRecord.destroySurfaces:6529 com.android.server.wm.ActivityRecord.destroySurfaces:6510 com.android.server.wm.ActivityRecord.notifyAppStopped:6574 com.android.server.wm.ActivityRecord.activityStopped:7162 com.android.server.wm.ActivityClientController.activityStopped:258 android.app.IActivityClientController$Stub.onTransact:613 com.android.server.wm.ActivityClientController.onTransact:136\n</code></pre>\n<p>The code that handles the scanning UI:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.[redacted];\n\nimport com.getcapacitor.JSObject;\nimport com.getcapacitor.Plugin;\nimport com.getcapacitor.PluginCall;\nimport com.getcapacitor.PluginMethod;\nimport com.getcapacitor.annotation.CapacitorPlugin;\nimport com.google.mlkit.vision.barcode.common.Barcode;\nimport com.google.mlkit.vision.codescanner.GmsBarcodeScannerOptions;\nimport com.google.mlkit.vision.codescanner.GmsBarcodeScanning;\n\n@CapacitorPlugin()\npublic class BarcodeScanner extends Plugin  {\n    private void scan() {\n        GmsBarcodeScannerOptions options = new GmsBarcodeScannerOptions.Builder()\n                .setBarcodeFormats(Barcode.FORMAT_EAN_13, Barcode.FORMAT_EAN_8, Barcode.FORMAT_CODE_128, Barcode.FORMAT_ITF)\n                .allowManualInput()\n                .build();\n\n        GmsBarcodeScanning\n                .getClient(getContext(), options)\n                .startScan()\n                .addOnSuccessListener(this::onSuccess);\n    }\n\n    private void onSuccess(Barcode result) {\n        JSObject jsObject = new JSObject();\n        jsObject.put(&quot;content&quot;, result.getDisplayValue());\n        jsObject.put(&quot;format&quot;, result.getFormat());\n\n        this.getSavedCall().success(jsObject);\n    }\n\n    @PluginMethod\n    public void startScan(PluginCall call) {\n        this.saveCall(call);\n        this.scan();\n    }\n}\n</code></pre>\n<p>The versions</p>\n<pre><code>    minSdkVersion = 23\n    compileSdkVersion = 33\n    targetSdkVersion = 33\n    androidxActivityVersion = '1.6.1'\n    androidxAppCompatVersion = '1.6.1'\n    androidxCoordinatorLayoutVersion = '1.2.0'\n    androidxCoreVersion = '1.9.0'\n    androidxFragmentVersion = '1.5.5'\n    coreSplashScreenVersion = '1.0.0-rc01'\n    androidxWebkitVersion = '1.6.0'\n    junitVersion = '4.13.2'\n    androidxJunitVersion = '1.1.5'\n    androidxEspressoCoreVersion = '3.5.1'\n    cordovaAndroidVersion = '10.1.1'\n</code></pre>\n<p>We have updated the Android Webview to the latest version, as well as any implementation package inside the app and Capacitor plugin's <code>build.gradle</code> files. We have no clue what causes the error, because the error description is very vague. We cannot find a solution anywhere. The error happens on a Galaxy Tab S7, <strong>where it has worked before</strong>. It suddenly stopped working, probably because of an internal update we don't know anything of. We have also tested with a Samsung Galaxy A51, but it just works on that device.</p>\n"},{"comments":[{"comment_id":134514411,"body":"<code>--n</code> mutates the variable and for the last element your trying to print index <code>-1</code>. You could change <code>--n</code> with <code>n - 1</code>"}],"answers":[{"answer_id":76285307,"body":"<p>Typing <code>--n</code> is different from typing <code>n--</code>.</p>\n<p>The first will decrement the value, and then read the value.<br />\nWhereas, the second one will read the value, and then decrement it.</p>\n<p>More information on Java Unary Operators can be found here.<br />\n<a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op1.html\" rel=\"nofollow noreferrer\">Assignment, Arithmetic, and Unary Operators - The Java Tutorials (Oracle)</a></p>\n"}],"last_activity_date":1684456333,"question_id":76279503,"body":"<p>It is a simple recursive function to print array elements in reverse.</p>\n<p>When I call the function above the print statement, it gives me index -1 <code>outOfBoundException</code>.\nWhen I print before calling the function, it seems to work. I suppose it is somewhat related to deepcopy of the variables but I do not know the correct Explanation. Can someone please provide me with the appropriate answer?</p>\n<pre><code> int[] arr = {1,2,3};\n int n = arr.length;\n print(arr,n-1);\n</code></pre>\n<p>This gives error:</p>\n<pre><code>public static void print(int[] arr, int n)\n    {\n        if(n&lt;0)\n            return;\n\n        print(arr,--n);\n        \n        System.out.println(arr[n]);\n    }\n</code></pre>\n<p>This does not:</p>\n<pre><code>public static void print(int[] arr, int n)\n    {\n        if(n&lt;0)\n            return;\n        \n        System.out.println(arr[n]);\n\n        print(arr,--n);\n    }\n</code></pre>\n"},{"answers":[{"answer_id":26406270,"body":"<p>You should try this:</p>\n\n<pre><code>info.addStyleName(\"line\");\n</code></pre>\n\n<p>with this CSS:</p>\n\n<pre><code>.v-caption-line {\n    display: inline !important;\n}\n</code></pre>\n"},{"answer_id":26406921,"body":"<p>It might be the label as well, you can try some inline CSS since you have specified your content type to HTML anyway, it should be something like this:\n<code>Label info = new Label(\"&lt;span style=\\\"dispaly: inline;\\\"&gt;Reports are generated every day at 5 pm&lt;/span&gt;\", ContentMode.HTML);</code></p>\n\n<p>If that didn't work, try doing the same thing with the div associated with the label - or - you can inject your icon with the inline CSS within the span.</p>\n"},{"comments":[{"comment_id":84527128,"body":"This is not possible for a custom icon, the question was about using a themeresource"}],"answer_id":32949196,"body":"<p>You can use icon inside label text:</p>\n\n<pre><code>Label date = new Label(FontAwesome.CALENDAR.getHtml() + \" \" + new Date());\ndate.setContentMode(ContentMode.HTML);\n</code></pre>\n\n<p>Source: <a href=\"https://vaadin.com/wiki?p_p_id=36&amp;p_p_lifecycle=0&amp;p_p_state=normal&amp;p_p_mode=view&amp;p_p_col_id=row-1&amp;p_p_col_pos=1&amp;p_p_col_count=3&amp;_36_struts_action=%2Fwiki%2Fview&amp;p_r_p_185834411_nodeName=vaadin.com+wiki&amp;p_r_p_185834411_title=Using+font+icons#section-Using+font+icons-Using+FontAwesome\" rel=\"noreferrer\">Vaadin Wiki</a>.</p>\n\n<p>Result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/VHTbk.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/VHTbk.png\" alt=\"Vaadin label with icon in the same line.\"></a></p>\n"},{"answer_id":38235335,"body":"<p>I had the same problem and used the following \"solution\" at the end. The advantage is if you use multiple labels on below each other they have the same space between icon and text.</p>\n\n<p>Vaadin Code</p>\n\n<pre><code>Button label = new Button(\"Your label text here.\");\nlabel.setIcon(FontAwesome.USER);\nlabel.addStyleName(ValoTheme.BUTTON_BORDERLESS + \" labelButton\");\n</code></pre>\n\n<p>CSS Code</p>\n\n<pre><code>.labelButton:after, .labelButton:active {\n    content: none;\n    border: none;\n    color: #000000;\n}\n\n.labelButton {\n    cursor: default;\n}\n</code></pre>\n"},{"answer_id":76285270,"body":"<p><strong>If it is your label is plain text, We can use use label.setCaption() instead of label.setValue() (leaving the value unset/null) Then caption will appear next to the icon.</strong></p>\n<p>But there will be additional empty space left below the label due to the space reserved for the blank value. This may impact the appearance. To avoid that we can use alignments for the whole row by align other elements to top (<code>layout.setComponentAlignment(otherComponent, Alignment.TOP_LEFT);</code>).</p>\n"}],"last_activity_date":1684455476,"question_id":26406010,"body":"<p>Text of the label jumps on a next line when I use <code>setIcon()</code>. How to output it in one line?         </p>\n\n<pre><code>Label info = new Label(\"Reports are generated every day at 5 pm\", ContentMode.HTML);\ninfo.setIcon( new ThemeResource(\"img/icons/information.png\") ) ;\ninfo.setSizeUndefined();\nJobsLayout.addComponent( info );\nJobsLayout.setComponentAlignment(info, Alignment.MIDDLE_RIGHT);\n</code></pre>\n"},{"comments":[{"comment_id":134523207,"body":"What is your goal here? Are you just trying to get a running Java program? Are you following a tutorial?  It is hard to follow because all of the text isn&#39;t formatted in a readable way. Try adding some white space or punctuation to make your question easier to understand."},{"comment_id":134523859,"body":"i need to know which and from which website  are the versions that i need to run jd-core from <a href=\"https://github.com/java-decompiler/jd-core\" rel=\"nofollow noreferrer\">github.com/java-decompiler/jd-core</a>  and jd-GUI from <a href=\"https://github.com/java-decompiler/jd-core\" rel=\"nofollow noreferrer\">github.com/java-decompiler/jd-core</a> ; how to run jd-core ?"}],"last_activity_date":1684453836,"question_id":76284625,"body":"<p>to solve that issues i first tried the following to solve all that issues.</p>\n<p>First i asked what is the java jre and java jdk version required to run jd-core ?. I aked from which website do i need to download them ?</p>\n<p>And they said me that jdk made also the function of jre( if you need to download both java jre and java jdk, because that is false; say me which website to use to download each one of them ? and which versions from that site i need to download ?)</p>\n<p>Someone said me that i just needed the jar file from github jd-core releases; which can be used to download jd-core java file;but i downloaded it after:</p>\n<p>1.i uninstalled temurin jdk and jre and oracle jre and jdk and the rest of java in my pc; with revo uninstaller (which is said to remove all track of a software in the PC).</p>\n<p>2.And they said that i needed java 8 to 12; from this website <a href=\"https://jdk.java.net/archive\" rel=\"nofollow noreferrer\">https://jdk.java.net/archive</a></p>\n<p>3.So to install them i entered in the PATH of the windows 11 Pro Version 22H2 Compilation 22621. 1702 Environment Variables the 8 to 12 OpenJDKs bin directory; the OpenJDKs where in the C:\\Program Files\\java folder.</p>\n<p>4.I entered them in the order from smallest to biggest number and i moved them to the first place; in the Path of Windows 11 Environment Variables; in the numerical order from biggest to smallest</p>\n<ol start=\"5\">\n<li>And i after i left cliced on PATH; where was the PATH; i clicked below it where was New... and i created a Variable name: called JAVA_HOME and i made left clic on Browse Directory... and looked for my 12 OpenJDK and i made clic in the OK; on the windows i was then in the windows before it and in the OK button in the first Window that remained;</li>\n</ol>\n<p>6.then i rebooted my pc;</p>\n<p>Then,i ejecuted jd-core jar file and nothing happened</p>\n<p>Somebody said me ,that, i need first to build jd-core; from the commands to use jd-core ; in its github repositorY.</p>\n<p>I executed all commands to build it from this website <a href=\"https://github.com/java-decompiler/jd-core\" rel=\"nofollow noreferrer\">https://github.com/java-decompiler/jd-core</a> succesfullY.</p>\n<p>Until i executed ./gradlew build command and i got this error:</p>\n<pre><code>Starting a Gradle Daemon, 4 incompatible and 1 stopped Daemons could not be reused, use --status for details\nTask :test\norg.jd.core.v1.JarFileToJavaSourceTest &gt; testScribe FAILED\njunit.framework.AssertionFailedError at JarFileToJavaSourceTest.java:229\norg.jd.core.v1.JavaAnonymousClassTest &gt; testJdk150AnonymousClass FAILED\njunit.framework.AssertionFailedError at JavaAnonymousClassTest.java:72\norg.jd.core.v1.JavaArrayTest &gt; testJdk150Array FAILED\njunit.framework.AssertionFailedError at JavaArrayTest.java:62\norg.jd.core.v1.JavaAssertTest &gt; testJdk150Assert FAILED\njunit.framework.AssertionFailedError at JavaAssertTest.java:80\norg.jd.core.v1.JavaBasicTest &gt; testJdk142Basic FAILED\njunit.framework.AssertionFailedError at JavaBasicTest.java:216\norg.jd.core.v1.JavaBasicTest &gt; testJdk118Basic FAILED\njunit.framework.AssertionFailedError at JavaBasicTest.java:193\norg.jd.core.v1.JavaLoopTest &gt; testJdk150For FAILED\njunit.framework.AssertionFailedError at JavaLoopTest.java:344\norg.jd.core.v1.JavaLoopTest &gt; testJdk160For FAILED\njunit.framework.AssertionFailedError at JavaLoopTest.java:368\norg.jd.core.v1.JavaLoopTest &gt; testIbmJ9For FAILED\njunit.framework.AssertionFailedError at JavaLoopTest.java:391\norg.jd.core.v1.JavaSwitchTest &gt; testEclipseJavaCompiler321Switch FAILED\njunit.framework.AssertionFailedError at JavaSwitchTest.java:133\norg.jd.core.v1.JavaSwitchTest &gt; testEclipseJavaCompiler3130Switch FAILED\njunit.framework.AssertionFailedError at JavaSwitchTest.java:148\norg.jd.core.v1.JavaTernaryOperatorTest &gt; testJdk118TernaryOperator FAILED\njunit.framework.AssertionFailedError at JavaTernaryOperatorTest.java:65\norg.jd.core.v1.JavaTryCatchFinallyTest &gt; testEclipseJavaCompiler370TryCatchFinally FAILED\njunit.framework.AssertionFailedError at JavaTryCatchFinallyTest.java:181\norg.jd.core.v1.JavaTryCatchFinallyTest &gt; testJdk118TryCatchFinally FAILED\njunit.framework.AssertionFailedError at JavaTryCatchFinallyTest.java:261\norg.jd.core.v1.JavaTryCatchFinallyTest &gt; testEclipseJavaCompiler3130TryCatchFinally FAILED\njunit.framework.AssertionFailedError at JavaTryCatchFinallyTest.java:221\norg.jd.core.v1.JavaTryCatchFinallyTest &gt; testEclipseJavaCompiler321TryCatchFinally FAILED\njunit.framework.AssertionFailedError at JavaTryCatchFinallyTest.java:137\norg.jd.core.v1.JavaTryCatchFinallyTest &gt; testJdk131TryCatchFinally FAILED\njunit.framework.AssertionFailedError at JavaTryCatchFinallyTest.java:297\n323 tests completed, 17 failed\nTask :test FAILED\nFAILURE: Build failed with an exception.\nWhat went wrong:\nExecution failed for task ':test'.\nThere were failing tests. See the report at: file:///C:/jd-core%20deocmpiler%20github%20repository%20built%20place/jd-core/build/reports/tests/test/index.html\nTry:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\nGet more help at https://help.gradle.org\nBUILD FAILED in 2m 57s\n5 actionable tasks: 5 executed\n</code></pre>\n<p>And then i entered for help in help.gradle.org</p>\n<p>I created a post saying my before issue; to try to build jd-core github repository\nWhen i executed the command.</p>\n<p>That i was asked to give the info that gives the command ./gradlew build --scan in help.gradle.org; i gave them the error i got</p>\n<p>That error was:</p>\n<pre><code>Task :test\norg.jd.core.v1.JarFileToJavaSourceTest &gt; testScribe FAILED\njunit.framework.AssertionFailedError at JarFileToJavaSourceTest.java:229\norg.jd.core.v1.JavaAnonymousClassTest &gt; testJdk150AnonymousClass FAILED\njunit.framework.AssertionFailedError at JavaAnonymousClassTest.java:72\norg.jd.core.v1.JavaArrayTest &gt; testJdk150Array FAILED\njunit.framework.AssertionFailedError at JavaArrayTest.java:62\norg.jd.core.v1.JavaAssertTest &gt; testJdk150Assert FAILED\njunit.framework.AssertionFailedError at JavaAssertTest.java:80\norg.jd.core.v1.JavaBasicTest &gt; testJdk142Basic FAILED\njunit.framework.AssertionFailedError at JavaBasicTest.java:216\norg.jd.core.v1.JavaBasicTest &gt; testJdk118Basic FAILED\njunit.framework.AssertionFailedError at JavaBasicTest.java:193\norg.jd.core.v1.JavaLoopTest &gt; testJdk150For FAILED\njunit.framework.AssertionFailedError at JavaLoopTest.java:344\norg.jd.core.v1.JavaLoopTest &gt; testJdk160For FAILED\njunit.framework.AssertionFailedError at JavaLoopTest.java:368\norg.jd.core.v1.JavaLoopTest &gt; testIbmJ9For FAILED\njunit.framework.AssertionFailedError at JavaLoopTest.java:391\norg.jd.core.v1.JavaSwitchTest &gt; testEclipseJavaCompiler321Switch FAILED\njunit.framework.AssertionFailedError at JavaSwitchTest.java:133\norg.jd.core.v1.JavaSwitchTest &gt; testEclipseJavaCompiler3130Switch FAILED\njunit.framework.AssertionFailedError at JavaSwitchTest.java:148\norg.jd.core.v1.JavaTernaryOperatorTest &gt; testJdk118TernaryOperator FAILED\njunit.framework.AssertionFailedError at JavaTernaryOperatorTest.java:65\norg.jd.core.v1.JavaTryCatchFinallyTest &gt; testEclipseJavaCompiler370TryCatchFinally FAILED\njunit.framework.AssertionFailedError at JavaTryCatchFinallyTest.java:181\norg.jd.core.v1.JavaTryCatchFinallyTest &gt; testJdk118TryCatchFinally FAILED\njunit.framework.AssertionFailedError at JavaTryCatchFinallyTest.java:261\norg.jd.core.v1.JavaTryCatchFinallyTest &gt; testEclipseJavaCompiler3130TryCatchFinally FAILED\njunit.framework.AssertionFailedError at JavaTryCatchFinallyTest.java:221\norg.jd.core.v1.JavaTryCatchFinallyTest &gt; testEclipseJavaCompiler321TryCatchFinally FAILED\njunit.framework.AssertionFailedError at JavaTryCatchFinallyTest.java:137\norg.jd.core.v1.JavaTryCatchFinallyTest &gt; testJdk131TryCatchFinally FAILED\njunit.framework.AssertionFailedError at JavaTryCatchFinallyTest.java:297\n323 tests completed, 17 failed\nTask :test FAILED\nFAILURE: Build failed with an exception.\nWhat went wrong:\nExecution failed for task ':test'.\nThere were failing tests. See the report at: file:///C:/jd-core%20deocmpiler%20github%20repository%20built%20place/jd-core/build/reports/tests/test/index.html\nTry:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\nGet more help at https://help.gradle.org\nBUILD FAILED in 2m 18s\n5 actionable tasks: 1 executed, 4 up-to-date\nThe build scan was not published due to a configuration problem.\nThe Gradle Terms of Service have not been agreed to.\nTo agree to the Gradle Terms of Service, include the following in your root project's configuration:\nbuildScan { termsOfServiceUrl = &quot;https://gradle.com/terms-of-service&quot;; termsOfServiceAgree = &quot;yes&quot; }\nFor more information, please see https://gradle.com/scans/help/plugin-terms-of-service.\nAlternatively, if you are using Gradle Enterprise, specify the server location.\nFor more information, please see https://gradle.com/scans/help/plugin-enterprise-config.\n</code></pre>\n<p>and that didn´t helped me to run jd-core</p>\n<p>So i still need to know which and from which website are the versions of jdk and jre that i need to run jd-core from <a href=\"https://github.com/java-decompiler/jd-core\" rel=\"nofollow noreferrer\">https://github.com/java-decompiler/jd-core</a> and jd-GUI from <a href=\"http://java-decompiler.github.io\" rel=\"nofollow noreferrer\">http://java-decompiler.github.io</a> and how to run jd-core ?;</p>\n<p>Can you answer this POST title questions ?</p>\n"},{"comments":[{"comment_id":28250305,"body":"Java doesn&#39;t have unsigned integers. Consider what would happen if your <code>int</code> overflowed? Also consider what <code>&gt;&gt;&gt;</code> does."},{"comment_id":28250377,"body":"I suggest you try it and see what difference it makes. This has been a known issue for decades so you could look it up but you will learn more by figuring it out by yourself."}],"answers":[{"answer_id":19106417,"body":"<p>You cannot use an unsigned int in Java. In case of overflow, the low 32 bits are considered, and the high order bits are discarded. The unsigned right shift will help u treat the int as unsigned int. However, in C++ you won't have the overflow.</p>\n"},{"answer_id":19106420,"body":"<p>The C++ version <em>doesn't</em> solve the overflow issue. It only solves the issue of successfully dividing by 2 using shift instead of <code>/</code>, an optimization that your compiler should be able to make itself if it would be a performance improvement.</p>\n\n<p>On the other hand overflow may not be a real problem, if your integral types are large enough to hold a reasonable range of indices.</p>\n"},{"comments":[{"comment_id":28250442,"body":"The other code is way more readable than this, and both will probably be the same speed. My questions is why it works..."},{"comment_id":85054822,"body":"What about overflow on the right hand addition?  If high is INT_MAX and low is negative, then the addition will overflow =&gt; undefined behavior."},{"comment_id":100710565,"body":"@Phil it&#39;s not really undefined behavior, at least in java. it is pretty known what will happen, the fact that the answer would be wrong in such a case is a different story."},{"comment_id":100756746,"body":"It doesn&#39;t work in either language. In C++, int overflow is undefined behavior, and existing compiler&#39;s optimizations break code that assumes addition is performed mod 2^n. Java says &quot;the result is the low-order bits of the mathematical sum as represented in some sufficiently large two&#39;s-complement format. If overflow occurs, then the sign of the result is not the same as the sign of the mathematical sum of the two operand values.&quot; I tried high = Integer.MAX_VALUE and low = -1, and above code gives a negative value on my Java, which is clearly not the midpoint. @Eugene"},{"comment_id":100761780,"body":"@Phil you said yourself, Java does have a predictable as easy to depict outcome, unlike C++. That was my entire point. And the example usually used for showing how <code>(a+b)&#47;2</code> breaks is when <code>a=b=Integer.MAX_VALUE</code>"}],"answer_id":19106443,"body":"<p>You are safe from integer overflows by using the way you said you already use, which is:</p>\n\n<pre><code>int mid = low + ((high - low) / 2);\n</code></pre>\n\n<p>Let you compiler do it's job to optimize this if it needs to.</p>\n"},{"answer_id":19106474,"body":"<p>The C++ version has a hidden cheat: <code>low</code> and <code>high</code> are <code>int</code>s but they're never negative. When you cast them to <code>unsigned int</code> your sign bit becomes an extra precision bit, which a single addition cannot overflow.</p>\n<p>It's not a very good cheat because array indices <em>may</em> be <code>unsigned</code> already. In that case the assumption is that the actual values aren't large enough to overflow even though they could be. If using 64-bit integers then that's a safe enough bet.</p>\n<p>Like was said elsewhere, <code>i &gt;&gt; 1</code> means <code>/2</code> for unsigned integers.</p>\n"},{"comments":[{"comment_id":28261342,"body":"Nice explanation. But if you would forgive my impertinence, what if both numbers were negative? It would appear from your example that the sign bit would/could be lost by that final bit shift."},{"comment_id":28274615,"body":"That&#39;s correct. For negative numbers, you&#39;d have to use &gt;&gt;, the signed bit shift. You could easily handle this case with an if-else statement. The only numbers this method doesn&#39;t work on is (for bytes) -128 and -128. For other integer types, it&#39;s always the minimum value plus itself.  If you&#39;re curious, I recommend playing around with it yourself. I wouldn&#39;t use bytes though. It turns out that Java doesn&#39;t support true byte addition, so the code I gave above doesn&#39;t work in practice."},{"comment_id":28274798,"body":"Note that the original question was about averaging indices, and that negative numbers aren&#39;t an issue in that context."}],"answer_id":19106490,"body":"<p>So let's consider bytes instead of ints. The only difference is that a byte is an 8-bit integer, while an int has 32 bits. In Java, both are always signed, meaning that the leading bit indicates whether they're positive (0) or negative (1).</p>\n\n<pre><code>byte low = Byte.valueOf(\"01111111\", 2); // The maximum byte value\nbyte high = low; // This copies low.\n\nbyte sum = low + high; // The bit representation of this is 11111110, which, having a\n                       // leading 1, is negative. Consider this the worst case\n                       // overflow, since low and high can't be any larger.\n\nbyte mid = sum &gt;&gt;&gt; 1; // This correctly gives us 01111111, fixing the overflow.\n</code></pre>\n\n<p>For ints, it's the same thing. Basically the gist of all this is that using an unsigned bitshift on signed integers allows you to leverage the leading bit to handle the largest possible values of low and high.</p>\n"},{"comments":[{"comment_id":31661990,"body":"If one wants the avg(-x,y) to equal -avg(x,y), the division-based approach is better.  If one wants avg(x+n,y+n) to equal avg(x,y)+n, an approach with shift-based division may be better."}],"answer_id":19110944,"body":"<p>The code you saw is broken: it doesn't compute the average of negative numbers correctly. If you are operating on non-negative values only, like indexes, that's OK, but it's not a  general replacement.\nThe code you have originally,</p>\n\n<pre><code>int mid = low + ((high - low) / 2);\n</code></pre>\n\n<p>isn't safe from overflow either because the difference <code>high - low</code> may overflow the range for signed integers. Again, if you only work with non-negative integers it's fine.</p>\n\n<p>Using the fact that <code>A+B = 2*(A&amp;B) + A^B</code> we can compute the average of two integers without overflow like this:</p>\n\n<pre><code>int mid = (high&amp;low) + (high^low)/2;\n</code></pre>\n\n<p>You can compute the division by 2 using a bit shift, but keep in mind the two are not the same: the division rounds towards 0 while the bit shift always rounds down.</p>\n\n<pre><code>int mid = (high&amp;low) + ((high^low)&gt;&gt;1);\n</code></pre>\n"},{"answer_id":61880711,"body":"<p>Program synthesis techniques appear to solve such problems. </p>\n\n<p>In this video, the programmer specifies constraints a) no overflow, b) no division, and c) no if-then-else. The synthesizer automatically came up with something pretty nice.</p>\n\n<p><a href=\"https://youtu.be/jZ-mMprVVBU\" rel=\"nofollow noreferrer\">https://youtu.be/jZ-mMprVVBU</a> </p>\n"}],"last_activity_date":1684453760,"question_id":19106350,"body":"<p>Whenever I need to average two numbers for an algorithm like binary search, I always do something like this:</p>\n\n<pre><code>int mid = low + ((high - low) / 2);\n</code></pre>\n\n<p>I recently saw another way to do it in <a href=\"http://googleresearch.blogspot.com/2006/06/extra-extra-read-all-about-it-nearly.html\" rel=\"noreferrer\">this post</a>, but I don't understand it. It says you can do this in Java:</p>\n\n<pre><code>int mid = (low + high) &gt;&gt;&gt; 1;\n</code></pre>\n\n<p>or this in C++:</p>\n\n<pre><code>int mid = ((unsigned int)low + (unsigned int)high)) &gt;&gt; 1;\n</code></pre>\n\n<p>The C++ version essentially makes both operands unsigned, so doing a shift results in an arithmetic shift instead of a signed shift. I understand what both these pieces of code are doing, but how does this solve the overflow issue? I thought the whole issue was that the intermediate value <code>high + low</code> could overflow?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Oh, duh. All the answers didn't exactly answer my question, but it was @John Zeringue's answer that made it click. I'll try to explain here.</p>\n\n<p>The issue with <code>(high + low)/2</code> in Java isn't exactly that <code>high + low</code> overflows (it does overflow since the integers are both signed, but all the bits are still there, and no information is lost). The issue with taking the average like this is the division. The division is operating on a signed value, so your result will be negative. Using the shift instead will divide by two but consider the bits instead of the sign (effectively treating it as unsigned).</p>\n"},{"comments":[{"comment_id":86722910,"body":"Related: <a href=\"https://stackoverflow.com/questions/46211535/how-do-i-elegantly-and-safely-maximize-the-amount-of-heap-space-allocated-to-a-j\" title=\"how do i elegantly and safely maximize the amount of heap space allocated to a j\">stackoverflow.com/questions/46211535/&hellip;</a>"},{"comment_id":86723191,"body":"Did you read <a href=\"https://blog.csanchez.org/2017/05/31/running-a-jvm-in-a-container-without-getting-killed/\" rel=\"nofollow noreferrer\">Running a JVM in a container without getting killed</a>?"},{"comment_id":86724455,"body":"I did. Someone asked in the comments whether allocating more than 90% of the available RAM for heap was safe and the author replied &quot;Supposedly the MaxRAMFraction=1 will still leave some room for the other non-heap memory. I haven’t done extensive testing though&quot;. Does not seem like a definitive answer."},{"comment_id":87744796,"body":"I know you are asking for Java8/9, but just an fyi Java 10 has added new option -XX:MaxRAMPercentage which is more sensible and gives more flexibility to specify the max heap size. So you can say -XX:MaxRAMPercentage=80 to tell JVM to use 80% of container memory as the heap. And the default max heap size is also closer to the container memory limit."},{"comment_id":133938833,"body":"why is -Xss used for"}],"answers":[{"comments":[{"comment_id":87998324,"body":"We have done similar testing.  We found that the non-heap memory allocation tends to be fairly fixed. We tested with Spring Boot 2, we had to set the fraction to 4, if we had the memory around 500MB, but as we went out to 1G, we could drop down.   And for even larger containers, 90% left enough for the app to perform fine.  (4gb memory in the container.)"},{"comment_id":109565346,"body":"4GB per container? Did you find that was the best way to optimise performance? I have been trying to increase load but it is difficult to find the right number of containers and memory per container."},{"comment_id":115255340,"body":"What numbers in parentheses does mean?"},{"comment_id":124321800,"body":"Sadly, The <code>xxxRAMPercentage</code> are still only affecting the heap, not the whole memory consumption of the JVM process (as soon from the OS/hypervisor)"}],"answer_id":50261206,"body":"<p>We did some simple testing which showed that setting <code>-XX:MaxRAM=$QUOTA</code> and <code>-XX:MaxRAMFraction=1</code> results in killed containers under load. The JVM allocates more than 900M heap, which is way too much. <code>-XX:MaxRAMFraction=2</code> seems safe(ish).</p>\n<p>Keep in mind that you may want to leave headroom for other processes like getting a debug shell (<code>docker exec</code>) or diagnostics in the container.</p>\n<hr />\n<p>Edit: we've written up what we've learned in detail in an <a href=\"https://www.atamanroman.dev/development/2018/11/10/jvm-memory-settings-container-environment.html\" rel=\"nofollow noreferrer\">article</a>. Money quotes:</p>\n<blockquote>\n<p><strong>TL'DR:</strong>\nJava memory management and configuration is still complex. Although the JVM can read cgroup memory limits and adapt memory usage accordingly since Java 9/8u131, it’s not a golden bullet. You need to know what <code>-XX:+UseCGroupMemoryLimitForHeap</code> does and you need to fine tune some parameters for every deployment. Otherwise you risk wasting resources and money or getting your containers killed at the worst time possible. <code>-XX:MaxRAMFraction=1</code> is especially dangerous. Java 10+ brings a lot of improvements but still needs manual configuration. To be safe, load test your stuff.</p>\n</blockquote>\n<p>and</p>\n<blockquote>\n<p>The most elegant solution is to upgrade to Java 10+. Java 10 deprecates <code>-XX:+UseCGroupMemoryLimitForHeap</code> (11) and introduces <code>-XX:+UseContainerSupport</code> (12), which supersedes it. It also introduces <code>-XX:MaxRAMPercentage</code> (13) which takes a value between 0 and 100. This allows fine grained control of the amount of RAM the JVM is allowed to allocate. Since <code>+UseContainerSupport</code> is enabled by default, everything should work out of the box.</p>\n</blockquote>\n<hr />\n<p>Edit #2: we've <a href=\"https://www.atamanroman.dev/development/2019/09/11/usecontainersupport-to-the-rescue.html\" rel=\"nofollow noreferrer\">written a little bit more</a> about <code>-XX:+UseContainerSupport</code></p>\n<blockquote>\n<p>Java 10 introduced <code>+UseContainerSupport</code> (enabled by default) which makes the JVM use sane defaults in a container environment. This feature is backported to Java 8 since 8u191, potentially allowing a huge percentage of Java deployments in the wild to properly configure their memory.</p>\n</blockquote>\n"},{"comments":[{"comment_id":95127246,"body":"These flags are available in JDK 10+ <a href=\"https://bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-8186248\" rel=\"nofollow noreferrer\">bugs.java.com/bugdatabase/view_bug.do?bug_id=JDK-8186248</a> However, <code>-XX:+UseContainerSupport</code> is available now with <code>8u191</code>."},{"comment_id":95151343,"body":"@Fleshgrinder I write a simple demo to test it, and it works on jdk-8u191, see <a href=\"https://github.com/alex-lx/jdk-8-heap-test\" rel=\"nofollow noreferrer\">github.com/alex-lx/jdk-8-heap-test</a>"},{"comment_id":95184256,"body":"I tried with <code>-XX:MaxRAMPercentage=75</code> and it gave me an error, maybe the fraction is required?!? Also interesting is that the bug itself does not mention a fix as part of <code>8u191</code>."},{"comment_id":95194701,"body":"@Fleshgrinder, It might be unreasonable, but in my test, the percentage must be a float number like 75.0, and another point should be mentioned that <code>-XX:MaxRAMPercentage</code> and <code>-XX:MinRAMPercentage</code> should be used together."},{"comment_id":95194821,"body":"Since the 8u191&#39;s release note include this feature, I think maybe someone forgot to update the bug :-P. Yes, it&#39;s really confused."},{"comment_id":95222034,"body":"Seems kinda broken in <code>8u191</code> one can use it as expected in (at least) 11. The requirement to use both max and min always together also makes little sense."},{"comment_id":104029623,"body":"@a.l. <code>MaxRAMPercentage</code> and <code>MinRAMPercentage</code> are different things and do not influence each other. One counts towards devices with small physical memory and the other not."},{"comment_id":104045801,"body":"@Eugene I agree these options should be independency. However, I did a test which indicates they&#39;re not, it&#39;s too long to remember the details of the test, and I can&#39;t reproduce the expected right now :-(, so I guess I made a mistake in that test."}],"answer_id":53864640,"body":"<p>The recent oracle-jdk-8(8u191) brings the following options to allow Docker container users to gain more fine grained control over the amount of system memory that will be used for the Java Heap:</p>\n\n<pre><code>-XX:InitialRAMPercentage\n-XX:MaxRAMPercentage\n-XX:MinRAMPercentage\n</code></pre>\n\n<blockquote>\n  <p>Three new JVM options have been added to allow Docker container users\n  to gain more fine grained control over the amount of system memory\n  that will be used for the Java Heap:</p>\n  \n  <p>-XX:InitialRAMPercentage\n  -XX:MaxRAMPercentage\n  -XX:MinRAMPercentage These options replace the deprecated Fraction forms (-XX:InitialRAMFraction, -XX:MaxRAMFraction, and\n  -XX:MinRAMFraction).</p>\n</blockquote>\n\n<p>See <a href=\"https://www.oracle.com/technetwork/java/javase/8u191-relnotes-5032181.html\" rel=\"noreferrer\">https://www.oracle.com/technetwork/java/javase/8u191-relnotes-5032181.html</a></p>\n"}],"last_activity_date":1684453154,"question_id":49854237,"body":"<p>Java 8/9 brought support for <code>-XX:+UseCGroupMemoryLimitForHeap</code> (with <code>-XX:+UnlockExperimentalVMOptions</code>). This sets <code>-XX:MaxRAM</code> to the cgroup memory limit. Per default, the JVM allocates roughly 25% of the max RAM, because <code>-XX:MaxRAMFraction</code> defaults to 4.</p>\n\n<p>Example: </p>\n\n<pre><code>MaxRAM = 1g\nMaxRAMFraction = 4\nJVM is allowed to allocate: MaxRAM / MaxRAMFraction = 1g / 4 = 256m\n</code></pre>\n\n<p>Using only 25% of the quota seems like waste for a deployment which (usually) consists of a single JVM process. So now people set <code>-XX:MaxRAMFraction=1</code>, so the JVM is theoretically allowed to use 100% of the MaxRAM. </p>\n\n<p>For the 1g example, this often results in heap sizes around 900m. This seems a bit high - there is not a lot of free room for the JVM or other stuff like remote shells or out-of-process tasks.</p>\n\n<p>So is this configuration (<code>-XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap -XX:MaxRAMFraction=1</code>) considered safe for prod or even best practice? Or should I still hand pick <code>-Xmx</code>, <code>-Xms</code>, <code>-Xss</code> and so on?</p>\n"},{"comments":[{"comment_id":93109620,"body":"It is pretty obvious what is happening. Each HTTP request you send is being redirected to a <code>login.jsp</code> page. The 200 is coming from when that login page is requested. So clearly you don&#39;t have the right credentials to access the WebSocket resource, or you are not sending them correctly."},{"comment_id":93124675,"body":"Hi thanks for the reply. i am new to websockets. how do we add credentials to the websocket client request."}],"answers":[{"answer_id":62006898,"body":"<p>Too late to be able to present a helpful resolution for your problem. Today I'm facing the same issue that you have already experienced. Unfortunately, Spring Framework samples and official resources are not referencing entirely.  Therefore, I would like to write about how I made it up and running. Firstly, the original answer doesn't belong to me. I found it at <a href=\"https://code5.cn/so/java/783097\" rel=\"noreferrer\">https://code5.cn/so/java/783097</a>. </p>\n\n<p>As far as I can understand, to be able to upgrade the WebSocket protocol from HTTP, we should extend the \"WebSocketConfiguration\" part a little bit with desired capabilities.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>RequestUpgradeStrategy upgradeStrategy = new TomcatRequestUpgradeStrategy();\nregistry.addEndpoint(\"/hello\")\n        .withSockJS();\n\nregistry.addEndpoint(\"/hello\")\n        .setHandshakeHandler(new DefaultHandshakeHandler(upgradeStrategy))\n        .setAllowedOrigins(\"*\");\n</code></pre>\n\n<p>After making the above adjustments, you could comprehend regarding switching between protocols through sniffing WireShark.</p>\n\n<p><a href=\"https://i.stack.imgur.com/isL2e.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/isL2e.png\" alt=\"enter image description here\"></a></p>\n\n<p>I hope it would be helpful for someone who is looking for a way to get rid of errors.</p>\n"},{"answer_id":76277005,"body":"<p>I fixed my project adding the websocket endpoint, from websocket config, into <em><strong>requestMatchers(from SecurityFilterChain)</strong></em> like this:</p>\n<pre><code>.requestMatchers(&quot;/h2-console/**&quot;, &quot;/&quot;, &quot;/login&quot;, &quot;/css/**&quot;, &quot;/js/**&quot;,\n &quot;/img/**&quot;, &quot;/websocket-server&quot;, &quot;/websocket-server/**&quot;).permitAll()\n</code></pre>\n"}],"last_activity_date":1684452668,"question_id":53105701,"body":"<p>I have my websocket client developed in STOMP Java client (Spring project) and server implemented in Spring boot.</p>\n\n<p>When the client/server handshake happens, I am getting a connection upgrade issue.</p>\n\n<p><strong>Java Client Code</strong></p>\n\n<pre><code>List&lt;Transport&gt; transports = new ArrayList&lt;&gt;(1);\ntransports.add(new WebSocketTransport(new StandardWebSocketClient()));      \n\nSockJsClient sockjsClient = new SockJsClient(transports);   \n\nWebSocketStompClient stompClient = new WebSocketStompClient(sockjsClient);\n\nstompClient.setMessageConverter(new MappingJackson2MessageConverter());\n\nstompClient.setTaskScheduler(new ConcurrentTaskScheduler());\n\nStompSessionHandler sessionHandler = new SessionHandler();\nstompClient.connect(\"ws://localhost:9090/health\", sessionHandler);\n</code></pre>\n\n<p><strong>Server side</strong></p>\n\n<pre><code>@Override\npublic void registerStompEndpoints(StompEndpointRegistry stompEndpointRegistry) {       \n    stompEndpointRegistry.addEndpoint(\"/health\")\n            .setAllowedOrigins(\"*\")\n            .withSockJS();\n}\n@Override\npublic void configureMessageBroker(MessageBrokerRegistry registry) {\n    registry.enableSimpleBroker(\"/topic\");\n    registry.setApplicationDestinationPrefixes(\"/app\");\n}\n</code></pre>\n\n<p><strong>Exception generated at client side while connection to server</strong></p>\n\n<pre>\n16:18:50.955/3771 [SimpleAsyncTaskExecutor-1] ERROR o.s.w.s.s.c.DefaultTransportRequest - No more fallback transports after TransportRequest[url=ws://localhost:9090/health/29/344d627baac949f5bab5506f05f1a7eb/websocket]\njavax.websocket.DeploymentException: The HTTP response from the server [200] did not permit the HTTP upgrade to WebSocket\n               at org.apache.tomcat.websocket.WsWebSocketContainer.connectToServerRecursive(WsWebSocketContainer.java:434)\n               at org.apache.tomcat.websocket.WsWebSocketContainer.connectToServerRecursive(WsWebSocketContainer.java:392)\n               at org.apache.tomcat.websocket.WsWebSocketContainer.connectToServer(WsWebSocketContainer.java:194)\n               at org.springframework.web.socket.client.standard.StandardWebSocketClient.lambda$doHandshakeInternal$0(StandardWebSocketClient.java:150)\n               at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n               at java.lang.Thread.run(Thread.java:745)\n</pre>\n\n<p><strong>In the tomcat localhost_access_log I see the below request info</strong></p>\n\n<pre>\n127.0.0.1 - - [01/Nov/2018:22:09:41 +0530] \"GET /health/info HTTP/1.1\" 302 - 0\n127.0.0.1 - - [01/Nov/2018:22:09:41 +0530] \"GET /login.jsp HTTP/1.1\" 200 7649 16\n127.0.0.1 - - [01/Nov/2018:22:09:41 +0530] \"GET /health/191/6828a1fdefee40cf8dc74e825d8d2b0c/websocket HTTP/1.1\" 302 - 0\n127.0.0.1 - - [01/Nov/2018:22:09:41 +0530] \"GET /login.jsp HTTP/1.1\" 200 7649 0\n</pre>\n\n<p>I didn't find any info on how to fix this issue and what is causing it.</p>\n\n<p>Please help me resolve this issue.</p>\n"},{"comments":[{"comment_id":113639095,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/13102045/scanner-is-skipping-nextline-after-using-next-or-nextfoo\">Scanner is skipping nextLine() after using next() or nextFoo()?</a>"},{"comment_id":114235005,"body":"Remember that you need to take the encoding of the input stream in consideration.  The system default is not necessarily always the one you wan.t"},{"comment_id":119744380,"body":"Most of these answers were written pre-Java 9, but now you can get a byte array from the InputStream using .readAllBytes. So, simply &quot;new String(inputStream.readAllBytes())&quot; works using String&#39;s byte[] constructor."}],"answers":[{"comments":[{"comment_id":110878970,"body":"Did the toString get deprecated? I see <code>IOUtils.convertStreamToString()</code>"},{"comment_id":120645040,"body":"I added an edit to include a searchable link to the actual source code itself as a reference. I believe this augments the answer for those who want to see how the command works."}],"answer_id":309448,"body":"<p>A nice way to do this is using <a href=\"http://commons.apache.org/\" rel=\"noreferrer\">Apache Commons</a> <code><a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-release/org/apache/commons/io/IOUtils.html\" rel=\"noreferrer\">IOUtils</a></code> to copy the <code>InputStream</code> into a <code>StringWriter</code>... Something like</p>\n<pre><code>StringWriter writer = new StringWriter();\nIOUtils.copy(inputStream, writer, encoding);\nString theString = writer.toString();\n</code></pre>\n<p>or even</p>\n<pre><code>// NB: does not close inputStream, you'll have to use try-with-resources for that\nString theString = IOUtils.toString(inputStream, encoding);\n</code></pre>\n<p>Alternatively, you could use <code>ByteArrayOutputStream</code> if you don't want to mix your Streams and Writers.</p>\n"},{"answer_id":309718,"body":"<p>Taking into account file one should first get a <code>java.io.Reader</code> instance. This can then be read and added to a <code>StringBuilder</code> (we don't need <code>StringBuffer</code> if we are not accessing it in multiple threads, and <code>StringBuilder</code> is faster). The trick here is that we work in blocks, and as such don't need other buffering streams. The block size is parameterized for run-time performance optimization.</p>\n\n<pre><code>public static String slurp(final InputStream is, final int bufferSize) {\n    final char[] buffer = new char[bufferSize];\n    final StringBuilder out = new StringBuilder();\n    try (Reader in = new InputStreamReader(is, \"UTF-8\")) {\n        for (;;) {\n            int rsz = in.read(buffer, 0, buffer.length);\n            if (rsz &lt; 0)\n                break;\n            out.append(buffer, 0, rsz);\n        }\n    }\n    catch (UnsupportedEncodingException ex) {\n        /* ... */\n    }\n    catch (IOException ex) {\n        /* ... */\n    }\n    return out.toString();\n}\n</code></pre>\n"},{"comments":[{"comment_id":117301957,"body":"Trying to get back InputStream, not working <a href=\"https://stackoverflow.com/q/66349701/3425489\">stackoverflow.com/q/66349701/3425489</a>"}],"answer_id":350723,"body":"<p>Apache Commons allows:</p>\n\n<pre><code>String myString = IOUtils.toString(myInputStream, \"UTF-8\");\n</code></pre>\n\n<p>Of course, you could choose other character encodings besides UTF-8.</p>\n\n<p>Also see: (<a href=\"http://commons.apache.org/proper/commons-io/javadocs/api-2.4/org/apache/commons/io/IOUtils.html#toString%28java.io.InputStream,%20java.lang.String\" rel=\"noreferrer\">documentation</a>)</p>\n"},{"answer_id":978162,"body":"<p>Use:</p>\n\n<pre><code>import java.io.BufferedInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.InputStream;\nimport java.io.IOException;\n\npublic static String readInputStreamAsString(InputStream in)\n    throws IOException {\n\n    BufferedInputStream bis = new BufferedInputStream(in);\n    ByteArrayOutputStream buf = new ByteArrayOutputStream();\n    int result = bis.read();\n    while(result != -1) {\n      byte b = (byte)result;\n      buf.write(b);\n      result = bis.read();\n    }\n    return buf.toString();\n}\n</code></pre>\n"},{"answer_id":2857414,"body":"<p>If you can't use <a href=\"https://commons.apache.org/proper/commons-io/\" rel=\"nofollow noreferrer\">Commons IO</a> (FileUtils, IOUtils, and CopyUtils), here's an example using a BufferedReader to read the file line by line:</p>\n<pre><code>public class StringFromFile {\n    public static void main(String[] args) /*throws UnsupportedEncodingException*/ {\n        InputStream is = StringFromFile.class.getResourceAsStream(&quot;file.txt&quot;);\n        BufferedReader br = new BufferedReader(new InputStreamReader(is/*, &quot;UTF-8&quot;*/));\n        final int CHARS_PER_PAGE = 5000; //counting spaces\n        StringBuilder builder = new StringBuilder(CHARS_PER_PAGE);\n        try {\n            for(String line=br.readLine(); line!=null; line=br.readLine()) {\n                builder.append(line);\n                builder.append('\\n');\n            }\n        }\n        catch (IOException ignore) { }\n\n        String text = builder.toString();\n        System.out.println(text);\n    }\n}\n</code></pre>\n<p>Or if you want raw speed, I'd propose a variation on what <a href=\"https://stackoverflow.com/questions/309424/how-do-i-read-convert-an-inputstream-into-a-string-in-java/309718#309718\">Paul de Vrieze suggested</a> (which avoids using a StringWriter (which uses a StringBuffer internally):</p>\n<pre><code>public class StringFromFileFast {\n    public static void main(String[] args) /*throws UnsupportedEncodingException*/ {\n        InputStream is = StringFromFileFast.class.getResourceAsStream(&quot;file.txt&quot;);\n        InputStreamReader input = new InputStreamReader(is/*, &quot;UTF-8&quot;*/);\n        final int CHARS_PER_PAGE = 5000; //counting spaces\n        final char[] buffer = new char[CHARS_PER_PAGE];\n        StringBuilder output = new StringBuilder(CHARS_PER_PAGE);\n        try {\n            for(int read = input.read(buffer, 0, buffer.length);\n                    read != -1;\n                    read = input.read(buffer, 0, buffer.length)) {\n                output.append(buffer, 0, read);\n            }\n        } catch (IOException ignore) { }\n\n        String text = output.toString();\n        System.out.println(text);\n    }\n}\n</code></pre>\n"},{"answer_id":3238954,"body":"<p>If you are using Google-Collections/Guava you could do the following:</p>\n\n<pre><code>InputStream stream = ...\nString content = CharStreams.toString(new InputStreamReader(stream, Charsets.UTF_8));\nCloseables.closeQuietly(stream);\n</code></pre>\n\n<p>Note that the second parameter (i.e. Charsets.UTF_8) for the <code>InputStreamReader</code> isn't necessary, but it is generally a good idea to specify the encoding if you know it (which you should!)</p>\n"},{"comments":[{"comment_id":113914255,"body":"Shouldn&#39;t we close the scanner before returning the value?"},{"comment_id":129904288,"body":"would do the same and close the resource with try with resource try( java.util.Scanner s = new java.util.Scanner(is).useDelimiter(&quot;\\\\A&quot;)){ return s.hasNext() ? s.next() : &quot;&quot;; }"}],"answer_id":5445161,"body":"<p>Here's a way using only the standard Java library (note that the stream is not closed, your mileage may vary).</p>\n\n<pre><code>static String convertStreamToString(java.io.InputStream is) {\n    java.util.Scanner s = new java.util.Scanner(is).useDelimiter(\"\\\\A\");\n    return s.hasNext() ? s.next() : \"\";\n}\n</code></pre>\n\n<p>I learned this trick from <a href=\"https://community.oracle.com/blogs/pat/2004/10/23/stupid-scanner-tricks\" rel=\"noreferrer\">\"Stupid Scanner tricks\"</a> article. The reason it works is because <a href=\"http://download.oracle.com/javase/8/docs/api/java/util/Scanner.html\" rel=\"noreferrer\">Scanner</a> iterates over tokens in the stream, and in this case we separate tokens using \"beginning of the input boundary\" (\\A), thus giving us only one token for the entire contents of the stream.</p>\n\n<p><strong>Note, if you need to be specific about the input stream's encoding, you can provide the second argument to <code>Scanner</code> constructor that indicates what character set to use (e.g. \"UTF-8\").</strong></p>\n\n<p>Hat tip goes also to <a href=\"https://stackoverflow.com/users/68127/jacob-gabrielson\">Jacob</a>, who once pointed me to the said article.</p>\n"},{"comments":[{"comment_id":117814076,"body":"<code>readLine()</code> removes the line feed character so the resulting string will contain no line breaks unless you add a line separator between each line you add to the builder."}],"answer_id":6938341,"body":"<p>Use:</p>\n\n<pre><code>InputStream in = /* Your InputStream */;\nStringBuilder sb = new StringBuilder();\nBufferedReader br = new BufferedReader(new InputStreamReader(in));\nString read;\n\nwhile ((read=br.readLine()) != null) {\n    //System.out.println(read);\n    sb.append(read);\n}\n\nbr.close();\nreturn sb.toString();\n</code></pre>\n"},{"answer_id":7743991,"body":"<p>I ran some timing tests because time matters, always.<br/></p>\n\n<p>I attempted to get the response into a String 3 different ways. (shown below)<br/>\nI left out try/catch blocks for the sake readability.<br/></p>\n\n<p>To give context, this is the preceding code for all 3 approaches:<br/></p>\n\n<pre><code>   String response;\n   String url = \"www.blah.com/path?key=value\";\n   GetMethod method = new GetMethod(url);\n   int status = client.executeMethod(method);\n</code></pre>\n\n<p>1)<br/></p>\n\n<pre><code> response = method.getResponseBodyAsString();\n</code></pre>\n\n<p>2)<br/></p>\n\n<pre><code>InputStream resp = method.getResponseBodyAsStream();\nInputStreamReader is=new InputStreamReader(resp);\nBufferedReader br=new BufferedReader(is);\nString read = null;\nStringBuffer sb = new StringBuffer();\nwhile((read = br.readLine()) != null) {\n    sb.append(read);\n}\nresponse = sb.toString();\n</code></pre>\n\n<p>3)<br/></p>\n\n<pre><code>InputStream iStream  = method.getResponseBodyAsStream();\nStringWriter writer = new StringWriter();\nIOUtils.copy(iStream, writer, \"UTF-8\");\nresponse = writer.toString();\n</code></pre>\n\n<p>So, after running 500 tests on each approach with the same request/response data, here are the numbers. Once again, these are my findings and your findings may not be exactly the same, but I wrote this to give some indication to others of the efficiency differences of these approaches.</p>\n\n<p>Ranks:<br/>\nApproach #1<br/>\nApproach #3 - 2.6% slower than #1<br/>\nApproach #2 - 4.3% slower than #1<br/></p>\n\n<p>Any of these approaches is an appropriate solution for grabbing a response and creating a String from it.</p>\n"},{"answer_id":9597413,"body":"<p>If you were feeling adventurous, you could mix Scala and Java and end up with this:</p>\n\n<pre><code>scala.io.Source.fromInputStream(is).mkString(\"\")\n</code></pre>\n\n<p>Mixing Java and Scala code and libraries has it's benefits.</p>\n\n<p>See full description here: <a href=\"https://stackoverflow.com/q/5221524/828757\">Idiomatic way to convert an InputStream to a String in Scala</a></p>\n"},{"answer_id":9949592,"body":"<p>Here's more-or-less <a href=\"https://stackoverflow.com/questions/309424/how-do-i-read-convert-an-inputstream-into-a-string-in-java/6938341#6938341\">sampath's answer</a>, cleaned up a bit and represented as a function:</p>\n<pre><code>String streamToString(InputStream in) throws IOException {\n  StringBuilder out = new StringBuilder();\n  BufferedReader br = new BufferedReader(new InputStreamReader(in));\n  for(String line = br.readLine(); line != null; line = br.readLine())\n    out.append(line);\n  br.close();\n  return out.toString();\n}\n</code></pre>\n"},{"answer_id":10505933,"body":"<p>This is the best pure Java solution that fits perfectly for Android and any other JVM.</p>\n\n<p>This solution works amazingly well... it is simple, fast, and works on small and large streams just the same!! (see benchmark above.. <strong>No. 8</strong>)</p>\n\n<pre><code>public String readFullyAsString(InputStream inputStream, String encoding)\n        throws IOException {\n    return readFully(inputStream).toString(encoding);\n}\n\npublic byte[] readFullyAsBytes(InputStream inputStream)\n        throws IOException {\n    return readFully(inputStream).toByteArray();\n}\n\nprivate ByteArrayOutputStream readFully(InputStream inputStream)\n        throws IOException {\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    byte[] buffer = new byte[1024];\n    int length = 0;\n    while ((length = inputStream.read(buffer)) != -1) {\n        baos.write(buffer, 0, length);\n    }\n    return baos;\n}\n</code></pre>\n"},{"comments":[{"comment_id":15318282,"body":"I get <code>java.io.StreamCorruptedException: invalid stream header</code>"},{"comment_id":22450251,"body":"<code>ObjectInputStream</code> is about deserialization, and the stream have to respect the serialization protocol to work, which may not always true in the context of this question."},{"comment_id":94936700,"body":"An explanation would be in order."}],"answer_id":11566262,"body":"<p>Quick and easy:</p>\n\n<pre><code>String result = (String)new ObjectInputStream( inputStream ).readObject();\n</code></pre>\n"},{"answer_id":11628754,"body":"<p>The below code worked for me. </p>\n\n<pre><code>URL url = MyClass.class.getResource(\"/\" + configFileName);\nBufferedInputStream bi = (BufferedInputStream) url.getContent();\nbyte[] buffer = new byte[bi.available() ];\nint bytesRead = bi.read(buffer);\nString out = new String(buffer);\n</code></pre>\n\n<p>Please note, according to Java docs, the <code>available()</code> method might not work with <code>InputStream</code> but always works with <code>BufferedInputStream</code>.\nIn case you don't want to use <code>available()</code> method we can always use the below code</p>\n\n<pre><code>URL url = MyClass.class.getResource(\"/\" + configFileName);\nBufferedInputStream bi = (BufferedInputStream) url.getContent();\nFile f = new File(url.getPath());\nbyte[] buffer = new byte[ (int) f.length()];\nint bytesRead = bi.read(buffer);\nString out = new String(buffer);\n</code></pre>\n\n<p>I am not sure if there will be any encoding issues. Please comment, if there will be any issues with the code.</p>\n"},{"answer_id":13195413,"body":"<p>Here's how to do it using just the JDK using byte array buffers. This is actually how the commons-io <code>IOUtils.copy()</code> methods all work. You can replace <code>byte[]</code> with <code>char[]</code> if you're copying from a <code>Reader</code> instead of an <code>InputStream</code>.</p>\n\n<pre><code>import java.io.ByteArrayOutputStream;\nimport java.io.InputStream;\n\n...\n\nInputStream is = ....\nByteArrayOutputStream baos = new ByteArrayOutputStream(8192);\nbyte[] buffer = new byte[8192];\nint count = 0;\ntry {\n  while ((count = is.read(buffer)) != -1) {\n    baos.write(buffer, 0, count);\n  }\n}\nfinally {\n  try {\n    is.close();\n  }\n  catch (Exception ignore) {\n  }\n}\n\nString charset = \"UTF-8\";\nString inputStreamAsString = baos.toString(charset);\n</code></pre>\n"},{"answer_id":13430647,"body":"<p>Make sure to close the streams at end if you use Stream Readers</p>\n\n<pre><code>private String readStream(InputStream iStream) throws IOException {\n    //build a Stream Reader, it can read char by char\n    InputStreamReader iStreamReader = new InputStreamReader(iStream);\n    //build a buffered Reader, so that i can read whole line at once\n    BufferedReader bReader = new BufferedReader(iStreamReader);\n    String line = null;\n    StringBuilder builder = new StringBuilder();\n    while((line = bReader.readLine()) != null) {  //Read till end\n        builder.append(line);\n        builder.append(\"\\n\"); // append new line to preserve lines\n    }\n    bReader.close();         //close all opened stuff\n    iStreamReader.close();\n    //iStream.close(); //EDIT: Let the creator of the stream close it!\n                       // some readers may auto close the inner stream\n    return builder.toString();\n}\n</code></pre>\n\n<hr>\n\n<p>EDIT: On JDK 7+, you can use try-with-resources construct.</p>\n\n<pre><code>/**\n * Reads the stream into a string\n * @param iStream the input stream\n * @return the string read from the stream\n * @throws IOException when an IO error occurs\n */\nprivate String readStream(InputStream iStream) throws IOException {\n\n    //Buffered reader allows us to read line by line\n    try (BufferedReader bReader =\n                 new BufferedReader(new InputStreamReader(iStream))){\n        StringBuilder builder = new StringBuilder();\n        String line;\n        while((line = bReader.readLine()) != null) {  //Read till end\n            builder.append(line);\n            builder.append(\"\\n\"); // append new line to preserve lines\n        }\n        return builder.toString();\n    }\n}\n</code></pre>\n"},{"answer_id":14107694,"body":"<p>Here's the most elegant, pure-Java (no library) solution I came up with after some experimentation:</p>\n\n<pre><code>public static String fromStream(InputStream in) throws IOException\n{\n    BufferedReader reader = new BufferedReader(new InputStreamReader(in));\n    StringBuilder out = new StringBuilder();\n    String newLine = System.getProperty(\"line.separator\");\n    String line;\n    while ((line = reader.readLine()) != null) {\n        out.append(line);\n        out.append(newLine);\n    }\n    return out.toString();\n}\n</code></pre>\n"},{"comments":[{"comment_id":29532479,"body":"Since you&#39;re using <code>buffer</code> variable locally with no chance of being shared across multiple threads you should consider changing its type to <code>StringBuilder</code>, to avoid the overhead of (useless) synchronization."},{"comment_id":29544475,"body":"That&#39;s a good point alex!. I thing that we both agree that this method isn&#39;t thread-safe in many ways. Even the input stream operations aren&#39;t thread-safe."},{"comment_id":39269492,"body":"If the stream contains UTF-8 character that spans across several lines, this algorithm can cut the character in two breaking the string."},{"comment_id":57960741,"body":"@VladLifliand How exactly would a UTF-8 character manage to span across several lines? That&#39;s impossible by definition. You probably meant something else."},{"comment_id":97158695,"body":"@ChristianHujer He probably means <code>buffers</code> instead of <code>lines</code>. UTF-8 codepoints/characters can be multi-byte."},{"comment_id":97205473,"body":"Oh yes, they can, and most of them are, multi-byte in UTF-8. Only US-ASCII-7 is not multi-byte in UTF-8. If it&#39;s buffers, as in the code, it makes sense. Just not with lines."}],"answer_id":15315403,"body":"<p>Well, you can program it for yourself... It's not complicated...</p>\n\n<pre><code>String Inputstream2String (InputStream is) throws IOException\n    {\n        final int PKG_SIZE = 1024;\n        byte[] data = new byte [PKG_SIZE];\n        StringBuilder buffer = new StringBuilder(PKG_SIZE * 10);\n        int size;\n\n        size = is.read(data, 0, data.length);\n        while (size &gt; 0)\n        {\n            String str = new String(data, 0, size);\n            buffer.append(str);\n            size = is.read(data, 0, data.length);\n        }\n        return buffer.toString();\n    }\n</code></pre>\n"},{"comments":[{"comment_id":23806798,"body":"See the commet by ChristofferHammarstr&#246;m in the answer by HarryLime."},{"comment_id":70978697,"body":"There is nothing in the question that would remotely suggest to which charset to convert to or that the solution should be immune to any charset."},{"comment_id":94936722,"body":"An explanation would be in order."}],"answer_id":16487716,"body":"<pre><code>  InputStream IS=new URL(\"http://www.petrol.si/api/gas_prices.json\").openStream();   \n\n  ByteArrayOutputStream BAOS=new ByteArrayOutputStream();\n  IOUtils.copy(IS, BAOS);\n  String d= new String(BAOS.toByteArray(),\"UTF-8\");           \n\nSystem.out.println(d);\n</code></pre>\n"},{"comments":[{"comment_id":34967643,"body":"will it work if last 2 lines are inserted in <code>do-while</code> loop?"},{"comment_id":72002582,"body":"There is nothing in the question about lines."}],"answer_id":16839350,"body":"<pre><code>InputStreamReader i = new InputStreamReader(s);\nBufferedReader str = new BufferedReader(i);\nString msg = str.readLine();\nSystem.out.println(msg);\n</code></pre>\n\n<p>Here s is your <code>InputStream</code> object which will get convert into <code>String</code> </p>\n"},{"answer_id":20407168,"body":"<p>JDK 7/8 answer that closes the stream and still throws an IOException:</p>\n\n<pre><code>StringBuilder build = new StringBuilder();\nbyte[] buf = new byte[1024];\nint length;\ntry (InputStream is = getInputStream()) {\n  while ((length = is.read(buf)) != -1) {\n    build.append(new String(buf, 0, length));\n  }\n}\n</code></pre>\n"},{"comments":[{"comment_id":92201575,"body":"What is difference between first 2 methods?"}],"answer_id":21163930,"body":"<p>You can use Apache Commons.</p>\n\n<p>In the IOUtils you can find the toString method with three helpful implementations.</p>\n\n<pre><code>public static String toString(InputStream input) throws IOException {\n        return toString(input, Charset.defaultCharset());\n}\n\npublic static String toString(InputStream input) throws IOException {\n        return toString(input, Charset.defaultCharset());\n}\n\npublic static String toString(InputStream input, String encoding)\n            throws IOException {\n        return toString(input, Charsets.toCharset(encoding));\n}\n</code></pre>\n"},{"comments":[{"comment_id":33186444,"body":"String concatenation in a loop with the <code>+=</code> operator is not a good idea. It is better to use a <code>StringBuilder</code> or a <code>StringBuffer</code>."}],"answer_id":21619906,"body":"<p>Try these 4 statements..</p>\n\n<p>As per the point recalled by Fred, it is not recommended to append a <code>String</code> with <code>+=</code> operator since every time a new <code>char</code> is appended to the existing <code>String</code> creating a new <code>String</code> object again and assigning its address to <code>st</code> while the old <code>st</code> object becomes garbage.</p>\n\n<pre><code>public String convertStreamToString(InputStream is)\n{\n    int k;\n    StringBuffer sb=new StringBuffer();\n    while((k=fin.read()) != -1)\n    {\n        sb.append((char)k);\n    }\n    return sb.toString();\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Not recommended, but this is also a way</strong></p>\n\n<pre><code>public String convertStreamToString(InputStream is) { \n    int k;\n    String st=\"\";\n    while((k=is.read()) != -1)\n    {\n        st+=(char)k;\n    }\n    return st;\n}\n</code></pre>\n"},{"answer_id":21912248,"body":"<p>This snippet was found in \\sdk\\samples\\android-19\\connectivity\\NetworkConnect\\NetworkConnectSample\\src\\main\\java\\com\\example\\android\\networkconnect\\MainActivity.java which is licensed under Apache License, Version 2.0 and written by Google.</p>\n\n<pre><code>/** Reads an InputStream and converts it to a String.\n * @param stream InputStream containing HTML from targeted site.\n * @param len Length of string that this method returns.\n * @return String concatenated according to len parameter.\n * @throws java.io.IOException\n * @throws java.io.UnsupportedEncodingException\n */\nprivate String readIt(InputStream stream, int len) throws IOException, UnsupportedEncodingException {\n    Reader reader = null;\n    reader = new InputStreamReader(stream, \"UTF-8\");\n    char[] buffer = new char[len];\n    reader.read(buffer);\n    return new String(buffer);\n}\n</code></pre>\n"},{"answer_id":21915153,"body":"<p>I have written a class that does just that, so I figured I'd share it with everyone. Sometimes you don't want to add Apache Commons just for one thing, and want something dumber than Scanner that doesn't examine the content.</p>\n\n<p>Usage is as follows</p>\n\n<pre><code>// Read from InputStream\nString data = new ReaderSink(inputStream, Charset.forName(\"UTF-8\")).drain();\n\n// Read from File\ndata = new ReaderSink(file, Charset.forName(\"UTF-8\")).drain();\n\n// Drain input stream to console\nnew ReaderSink(inputStream, Charset.forName(\"UTF-8\")).drainTo(System.out);\n</code></pre>\n\n<p>Here is the code for ReaderSink:</p>\n\n<pre><code>import java.io.*;\nimport java.nio.charset.Charset;\n\n/**\n * A simple sink class that drains a {@link Reader} to a {@link String} or\n * to a {@link Writer}.\n *\n * @author Ben Barkay\n * @version 2/20/2014\n */\npublic class ReaderSink {\n    /**\n     * The default buffer size to use if no buffer size was specified.\n     */\n    public static final int DEFAULT_BUFFER_SIZE = 1024;\n\n    /**\n     * The {@link Reader} that will be drained.\n     */\n    private final Reader in;\n\n    /**\n     * Constructs a new {@code ReaderSink} for the specified file and charset.\n     * @param file      The file to read from.\n     * @param charset   The charset to use.\n     * @throws FileNotFoundException    If the file was not found on the filesystem.\n     */\n    public ReaderSink(File file, Charset charset) throws FileNotFoundException {\n        this(new FileInputStream(file), charset);\n    }\n\n    /**\n     * Constructs a new {@code ReaderSink} for the specified {@link InputStream}.\n     * @param in        The {@link InputStream} to drain.\n     * @param charset   The charset to use.\n     */\n    public ReaderSink(InputStream in, Charset charset) {\n        this(new InputStreamReader(in, charset));\n    }\n\n    /**\n     * Constructs a new {@code ReaderSink} for the specified {@link Reader}.\n     * @param in    The reader to drain.\n     */\n    public ReaderSink(Reader in) {\n        this.in = in;\n    }\n\n    /**\n     * Drains the data from the underlying {@link Reader}, returning a {@link String} containing\n     * all of the read information. This method will use {@link #DEFAULT_BUFFER_SIZE} for\n     * its buffer size.\n     * @return  A {@link String} containing all of the information that was read.\n     */\n    public String drain() throws IOException {\n        return drain(DEFAULT_BUFFER_SIZE);\n    }\n\n    /**\n     * Drains the data from the underlying {@link Reader}, returning a {@link String} containing\n     * all of the read information.\n     * @param bufferSize    The size of the buffer to use when reading.\n     * @return  A {@link String} containing all of the information that was read.\n     */\n    public String drain(int bufferSize) throws IOException {\n        StringWriter stringWriter = new StringWriter();\n        drainTo(stringWriter, bufferSize);\n        return stringWriter.toString();\n    }\n\n    /**\n     * Drains the data from the underlying {@link Reader}, writing it to the\n     * specified {@link Writer}. This method will use {@link #DEFAULT_BUFFER_SIZE} for\n     * its buffer size.\n     * @param out   The {@link Writer} to write to.\n     */\n    public void drainTo(Writer out) throws IOException {\n        drainTo(out, DEFAULT_BUFFER_SIZE);\n    }\n\n    /**\n     * Drains the data from the underlying {@link Reader}, writing it to the\n     * specified {@link Writer}.\n     * @param out           The {@link Writer} to write to.\n     * @param bufferSize    The size of the buffer to use when reader.\n     */\n    public void drainTo(Writer out, int bufferSize) throws IOException {\n        char[] buffer = new char[bufferSize];\n        int read;\n        while ((read = in.read(buffer)) &gt; -1) {\n            out.write(buffer, 0, read);\n        }\n    }\n}\n</code></pre>\n"},{"answer_id":22960005,"body":"<p>Here is the complete method for converting <code>InputStream</code> into <code>String</code> without using any third party library. Use <code>StringBuilder</code> for single threaded environment otherwise use <code>StringBuffer</code>.  </p>\n\n<pre><code>public static String getString( InputStream is) throws IOException {\n    int ch;\n    StringBuilder sb = new StringBuilder();\n    while((ch = is.read()) != -1)\n        sb.append((char)ch);\n    return sb.toString();\n}\n</code></pre>\n"},{"comments":[{"comment_id":39433231,"body":"-1. Just because something is available doesn&#39;t mean it should be used. When you switch the logging provider, you&#39;re going to have to replace this. Also, it looks like it is internal and shouldn&#39;t really be used outside of log4j."}],"answer_id":23615823,"body":"<p>I had log4j available, so I was able to use the org.apache.log4j.lf5.util.StreamUtils.getBytes to get the bytes, which I was able to convert into a string using the String ctor</p>\n\n<pre><code>String result = new String(StreamUtils.getBytes(inputStream));\n</code></pre>\n"},{"answer_id":24104048,"body":"<p>This one is nice because:</p>\n\n<ul>\n<li>It safely handles the Charset.</li>\n<li>You control the read buffer size.</li>\n<li>You can provision the length of the builder and it doesn't have to be an exact value.</li>\n<li>Is free from library dependencies.</li>\n<li>Is for Java 7 or higher.</li>\n</ul>\n\n<p><em>How to do it?</em></p>\n\n<pre><code>public static String convertStreamToString(InputStream is) throws IOException {\n   StringBuilder sb = new StringBuilder(2048); // Define a size if you have an idea of it.\n   char[] read = new char[128]; // Your buffer size.\n   try (InputStreamReader ir = new InputStreamReader(is, StandardCharsets.UTF_8)) {\n     for (int i; -1 != (i = ir.read(read)); sb.append(read, 0, i));\n   }\n   return sb.toString();\n}\n</code></pre>\n\n<p>For JDK 9</p>\n\n<pre><code>public static String inputStreamString(InputStream inputStream) throws IOException {\n    try (inputStream) {\n        return new String(inputStream.readAllBytes(), StandardCharsets.UTF_8);\n    }\n}\n</code></pre>\n"},{"answer_id":24810414,"body":"<p>I'd use some Java 8 tricks.</p>\n\n<pre><code>public static String streamToString(final InputStream inputStream) throws Exception {\n    // buffering optional\n    try\n    (\n        final BufferedReader br\n           = new BufferedReader(new InputStreamReader(inputStream))\n    ) {\n        // parallel optional\n        return br.lines().parallel().collect(Collectors.joining(\"\\n\"));\n    } catch (final IOException e) {\n        throw new RuntimeException(e);\n        // whatever.\n    }\n}\n</code></pre>\n\n<p>Essentially the same as some other answers except more succinct.</p>\n"},{"answer_id":25103484,"body":"<p>This is an answer adapted from <code>org.apache.commons.io.IOUtils</code> <a href=\"http://grepcode.com/file/repo1.maven.org/maven2/commons-io/commons-io/2.4/org/apache/commons/io/IOUtils.java\" rel=\"noreferrer\">source code</a>, for those who want to have the apache implementation but do not want the whole library.</p>\n\n<pre><code>private static final int BUFFER_SIZE = 4 * 1024;\n\npublic static String inputStreamToString(InputStream inputStream, String charsetName)\n        throws IOException {\n    StringBuilder builder = new StringBuilder();\n    InputStreamReader reader = new InputStreamReader(inputStream, charsetName);\n    char[] buffer = new char[BUFFER_SIZE];\n    int length;\n    while ((length = reader.read(buffer)) != -1) {\n        builder.append(buffer, 0, length);\n    }\n    return builder.toString();\n}\n</code></pre>\n"},{"answer_id":25486003,"body":"<pre><code>InputStream is = Context.openFileInput(someFileName); // whatever format you have\n\nByteArrayOutputStream bos = new ByteArrayOutputStream();\n\nbyte[] b = new byte[8192];\nfor (int bytesRead; (bytesRead = is.read(b)) != -1;) {\n    bos.write(b, 0, bytesRead);\n}\n\nString output = bos.toString(someEncoding);\n</code></pre>\n"},{"answer_id":25782577,"body":"<p>The following doesn't address the original question, but rather some of the responses.</p>\n\n<p>Several responses suggest loops of the form</p>\n\n<pre><code>String line = null;\nwhile((line = reader.readLine()) != null) {\n  // ...\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>for(String line = reader.readLine(); line != null; line = reader.readLine()) {\n    // ...\n}\n</code></pre>\n\n<p>The first form pollutes the namespace of the enclosing scope by declaring a variable \"read\" in the enclosing scope that will not be used for anything outside the for loop. The second form duplicates the readline() call.</p>\n\n<p>Here is a much cleaner way of writing this sort of loop in Java. It turns out that the first clause in a for-loop doesn't require an actual initializer value. This keeps the scope of the variable \"line\" to within the body of the for loop. Much more elegant! I haven't seen anybody using this form anywhere (I randomly discovered it one day years ago), but I use it all the time.</p>\n\n<pre><code>for (String line; (line = reader.readLine()) != null; ) {\n    //...\n}\n</code></pre>\n"},{"answer_id":28311797,"body":"<p>Kotlin users simply do:</p>\n\n<pre><code>println(InputStreamReader(is).readText())\n</code></pre>\n\n<p>whereas </p>\n\n<pre><code>readText()\n</code></pre>\n\n<p>is Kotlin standard library’s built-in extension method.</p>\n"},{"answer_id":28750240,"body":"<p>Pure Java solution using <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html\" rel=\"noreferrer\">Stream</a>s, works since Java 8.</p>\n\n\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.util.stream.Collectors;\n\n// ...\npublic static String inputStreamToString(InputStream is) throws IOException {\n    try (BufferedReader br = new BufferedReader(new InputStreamReader(is))) {\n        return br.lines().collect(Collectors.joining(System.lineSeparator()));\n    }\n}\n</code></pre>\n\n<p>As mentioned by Christoffer Hammarström below <a href=\"https://stackoverflow.com/a/309448/639687\">other answer</a> it is safer to explicitly specify the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/nio/charset/Charset.html\" rel=\"noreferrer\">Charset</a>. I.e. The InputStreamReader constructor can be changes as follows:</p>\n\n\n\n<pre><code>new InputStreamReader(is, Charset.forName(\"UTF-8\"))\n</code></pre>\n"},{"answer_id":31318764,"body":"<p><a href=\"https://code.google.com/p/guava-libraries/wiki/IOExplained\" rel=\"nofollow\">Guava provides</a> much shorter efficient autoclosing solution in case when input stream comes from classpath resource (which seems to be popular task):</p>\n\n<pre><code>byte[] bytes = Resources.toByteArray(classLoader.getResource(path));\n</code></pre>\n\n<p>or </p>\n\n<pre><code>String text = Resources.toString(classLoader.getResource(path), StandardCharsets.UTF_8);\n</code></pre>\n\n<p>There is also general concept of <a href=\"http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/io/ByteSource.html\" rel=\"nofollow\">ByteSource</a> and <a href=\"http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/io/CharSource.html\" rel=\"nofollow\">CharSource</a> that gently take care of both opening and closing the stream.</p>\n\n<p>So, for example, instead of explicitly opening a small file to read its contents:</p>\n\n<pre><code>String content = Files.asCharSource(new File(\"robots.txt\"), StandardCharsets.UTF_8).read();\nbyte[] data = Files.asByteSource(new File(\"favicon.ico\")).read();\n</code></pre>\n\n<p>or just</p>\n\n<pre><code>String content = Files.toString(new File(\"robots.txt\"), StandardCharsets.UTF_8);\nbyte[] data = Files.toByteArray(new File(\"favicon.ico\"));\n</code></pre>\n"},{"answer_id":32351730,"body":"<p>Here's my <strong>Java 8</strong> based solution, which uses the <em>new Stream API</em> to collect all lines from an <code>InputStream</code>:</p>\n\n<pre><code>public static String toString(InputStream inputStream) {\n    BufferedReader reader = new BufferedReader(\n        new InputStreamReader(inputStream));\n    return reader.lines().collect(Collectors.joining(\n        System.getProperty(\"line.separator\")));\n}\n</code></pre>\n"},{"comments":[{"comment_id":114755958,"body":"I benchmarked this <a href=\"https://stackoverflow.com/questions/309424/how-do-i-read-convert-an-inputstream-into-a-string-in-java?page=2&amp;tab=oldest#comment114755893_35446009\">here</a>, and found this to be the fastest solution on my machine, running in about 60% the time of the next-fastest solution benchmarked."},{"comment_id":124340383,"body":"&gt;This method blocks until all remaining bytes have been read and end of stream is detected, or an exception is thrown."},{"comment_id":130223603,"body":"@MartinMeeser all solutions on this page do, as it is part of the task."},{"comment_id":130284271,"body":"@Holger read=br.readLine() WILL NOT block until all bytes are read or end of line is detected, InputStream.read will read one byte or given buffer size, difference to readAllBytes is quite impactfull"},{"comment_id":130284665,"body":"@MartinMeeser the <b>task</b> is to <i>read the entire <code>InputStream</code> into one string</i>. Of course, you can split it into multiple steps which are not reading the entire stream, but that is pointless when all you are doing with those steps, is to reassemble the partial results into a single result after the entire stream has been read. So, none of the solutions to this specific task will return before the entire stream has been read."}],"answer_id":32352386,"body":"<p>For completeness here is <strong>Java 9</strong> solution:</p>\n<pre><code>public static String toString(InputStream input) throws IOException {\n    return new String(input.readAllBytes(), StandardCharsets.UTF_8);\n}\n</code></pre>\n<p>This uses the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/io/InputStream.html#readAllBytes--\" rel=\"noreferrer\"><code>readAllBytes</code></a> method which was added to Java 9.</p>\n"},{"comments":[{"comment_id":95261948,"body":"It is not just a bad choice.  It will fail with a <code>StackOverflowError</code> if the input stream contains more than a few hundred characters."},{"comment_id":95268568,"body":"@StephenC That constitutes a bad choice in my opinion"},{"comment_id":95278499,"body":"I agree.  It is a &quot;bad choice&quot; to use a method that doesn&#39;t work (except in trivial cases).   But not <b>just</b> a &quot;bad choice&quot;.   Anyhow, I am down voting because this is wrong ... not because it is a &quot;bad choice&quot;.   And also because you don&#39;t explain <i>why</i> this approach should not be used."},{"comment_id":95303638,"body":"@StephenC I don&#39;t fundamentally agree with you, but thank you for at least leaving a comment instead of just fly-by downvoting. Recursion overflow issues are system limitations, and this method is not wrong, it just causes memory issues faster (albeit MUCH faster) than other methods."},{"comment_id":95314920,"body":"For the Java language and implementations, the absence of tail-call optimization is a deliberate design choice; see <a href=\"https://softwareengineering.stackexchange.com/questions/272061/why-doesnt-java-have-optimization-for-tail-recursion-at-all\" title=\"why doesnt java have optimization for tail recursion at all\">softwareengineering.stackexchange.com/questions/272061/&hellip;</a>.  It should be viewed as inherent to Java.  Certainly it is common to all extant mainstream Java implementations ... including Android."},{"comment_id":98874872,"body":"I liked your method, it&#39;s highly unusual. However, I don&#39;t get why it would &quot;cause memory issues much faster&quot;?"},{"comment_id":98903831,"body":"@parsecer because instead of running out when the RAM can&#39;t handle the memory being used, it dies when the stack can&#39;t handle more stack calls, which is a lot smaller of a number on any reasonable system."},{"comment_id":132252717,"body":"Why not use a loop and a StringBuilder?"}],"answer_id":33748600,"body":"<p>Note: This probably isn't a good idea. This method uses recursion and thus will hit a <code>StackOverflowError</code> very quickly:</p>\n<pre><code>public String read (InputStream is) {\n    byte next = is.read();\n    return next == -1 ? &quot;&quot; : next + read(is); // Recursive part: reads next byte recursively\n}\n</code></pre>\n"},{"comments":[{"comment_id":86361934,"body":"Note that this solution is the most inefficient based on my <a href=\"https://stackoverflow.com/a/48775964/1129332\">benchmark results</a>"}],"answer_id":34451847,"body":"<p>Based on the second part of <a href=\"https://stackoverflow.com/questions/309424/read-convert-an-inputstream-to-a-string?page=1&amp;tab=votes#309448\">the accepted Apache Commons answer</a> but with the small gap filled in for always closing the stream:</p>\n\n<pre><code>    String theString;\n    try {\n        theString = IOUtils.toString(inputStream, encoding);\n    } finally {\n        IOUtils.closeQuietly(inputStream);\n    }\n</code></pre>\n"},{"answer_id":34926427,"body":"<p>In terms of <code>reduce</code>, and <code>concat</code> it can be expressed in Java 8 as:</p>\n\n<pre><code>String fromFile = new BufferedReader(new   \nInputStreamReader(inputStream)).lines().reduce(String::concat).get();\n</code></pre>\n"},{"answer_id":35066091,"body":"<p>Use the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/io/InputStream.html#transferTo-java.io.OutputStream-\" rel=\"noreferrer\">java.io.InputStream.transferTo(OutputStream)</a> supported in Java 9 and the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/io/ByteArrayOutputStream.html#toString-java.lang.String-\" rel=\"noreferrer\">ByteArrayOutputStream.toString(String)</a> which takes the charset name:</p>\n\n<pre><code>public static String gobble(InputStream in, String charsetName) throws IOException {\n    ByteArrayOutputStream bos = new ByteArrayOutputStream();\n    in.transferTo(bos);\n    return bos.toString(charsetName);\n}\n</code></pre>\n"},{"comments":[{"comment_id":111765491,"body":"Nice work. Could be useful to provide a tl;dr summary at the bottom, i.e. throwing out the solutions that have problems with line breaks / unicode and then (out of those that remain) saying which is fastest with or without external libraries."},{"comment_id":114755893,"body":"I was curious about the Java 9 <code>InputStream.transferTo</code> and Java 10 <code>Reader.transferTo</code> solutions that were added since this answer was posted, so I checked out the linked code and added benchmarks for them.  I only tested the &quot;big string&quot; benchmarks.  <code>InputStream.transferTo</code> was the fastest of all the solutions tested, running in 60% of the time as <code>test8</code> did on my machine.  <code>Reader.transferTo</code> was slower than <code>test8</code>, but faster than all the other tests.  That said, it ran in 95% of the time as <code>test1</code>, so it&#39;s not a significant improvement."},{"comment_id":117397309,"body":"I converted all the <code>while</code> loops to <code>for</code> loops in an edit to this post, to avoid polluting the namespace with a variable that isn&#39;t used outside the loop. It&#39;s a neat trick that works in most Java reader/writer loops."},{"comment_id":119744360,"body":"With Java 9 you can get a byte array from the InputStream using .readAllBytes. So &quot;new String(inputStream.readAllBytes())&quot; works using String&#39;s byte[] constructor."},{"comment_id":130675489,"body":"Is 11 buffered? If not, the chunks may be small and what is seen is simply the additional overhead from the extra calls."}],"answer_id":35446009,"body":"<p>To summarize the other answers, I found 11 main ways to do this (see below). And I wrote some performance tests (see results below):</p>\n<p><strong>Ways to convert an InputStream to a String:</strong></p>\n<ol>\n<li><p>Using <code>IOUtils.toString</code> (Apache Utils)</p>\n<pre><code> String result = IOUtils.toString(inputStream, StandardCharsets.UTF_8);\n</code></pre>\n</li>\n<li><p>Using <code>CharStreams</code> (Guava)</p>\n<pre><code> String result = CharStreams.toString(new InputStreamReader(\n       inputStream, Charsets.UTF_8));\n</code></pre>\n</li>\n<li><p>Using <code>Scanner</code> (JDK)</p>\n<pre><code> Scanner s = new Scanner(inputStream).useDelimiter(&quot;\\\\A&quot;);\n String result = s.hasNext() ? s.next() : &quot;&quot;;\n</code></pre>\n</li>\n<li><p>Using <strong>Stream API</strong> (Java 8). <strong>Warning</strong>: This solution converts different line breaks (like <code>\\r\\n</code>) to <code>\\n</code>.</p>\n<pre><code> String result = new BufferedReader(new InputStreamReader(inputStream))\n   .lines().collect(Collectors.joining(&quot;\\n&quot;));\n</code></pre>\n</li>\n<li><p>Using <strong>parallel Stream API</strong> (Java 8). <strong>Warning</strong>: This solution converts different line breaks (like <code>\\r\\n</code>) to <code>\\n</code>.</p>\n<pre><code> String result = new BufferedReader(new InputStreamReader(inputStream))\n    .lines().parallel().collect(Collectors.joining(&quot;\\n&quot;));\n</code></pre>\n</li>\n<li><p>Using <code>InputStreamReader</code> and <code>StringBuilder</code> (JDK)</p>\n<pre><code> int bufferSize = 1024;\n char[] buffer = new char[bufferSize];\n StringBuilder out = new StringBuilder();\n Reader in = new InputStreamReader(stream, StandardCharsets.UTF_8);\n for (int numRead; (numRead = in.read(buffer, 0, buffer.length)) &gt; 0; ) {\n     out.append(buffer, 0, numRead);\n }\n return out.toString();\n</code></pre>\n</li>\n<li><p>Using <code>StringWriter</code> and <code>IOUtils.copy</code> (Apache Commons)</p>\n<pre><code> StringWriter writer = new StringWriter();\n IOUtils.copy(inputStream, writer, &quot;UTF-8&quot;);\n return writer.toString();\n</code></pre>\n</li>\n<li><p>Using <code>ByteArrayOutputStream</code> and <code>inputStream.read</code> (JDK)</p>\n<pre><code> ByteArrayOutputStream result = new ByteArrayOutputStream();\n byte[] buffer = new byte[1024];\n for (int length; (length = inputStream.read(buffer)) != -1; ) {\n     result.write(buffer, 0, length);\n }\n // StandardCharsets.UTF_8.name() &gt; JDK 7\n return result.toString(&quot;UTF-8&quot;);\n</code></pre>\n</li>\n<li><p>Using <code>BufferedReader</code> (JDK). <strong>Warning:</strong> This solution converts different line breaks (like <code>\\n\\r</code>) to <code>line.separator</code> system property (for example, in Windows to &quot;\\r\\n&quot;).</p>\n<pre><code> String newLine = System.getProperty(&quot;line.separator&quot;);\n BufferedReader reader = new BufferedReader(\n         new InputStreamReader(inputStream));\n StringBuilder result = new StringBuilder();\n for (String line; (line = reader.readLine()) != null; ) {\n     if (result.length() &gt; 0) {\n         result.append(newLine);\n     }\n     result.append(line);\n }\n return result.toString();\n</code></pre>\n</li>\n<li><p>Using <code>BufferedInputStream</code> and <code>ByteArrayOutputStream</code> (JDK)</p>\n<pre><code>BufferedInputStream bis = new BufferedInputStream(inputStream);\nByteArrayOutputStream buf = new ByteArrayOutputStream();\nfor (int result = bis.read(); result != -1; result = bis.read()) {\n    buf.write((byte) result);\n}\n// StandardCharsets.UTF_8.name() &gt; JDK 7\nreturn buf.toString(&quot;UTF-8&quot;);\n</code></pre>\n</li>\n<li><p>Using <code>inputStream.read()</code> and <code>StringBuilder</code> (JDK). <strong>Warning</strong>: This solution has problems with Unicode, for example with Russian text (works correctly only with non-Unicode text)</p>\n<pre><code>StringBuilder sb = new StringBuilder();\nfor (int ch; (ch = inputStream.read()) != -1; ) {\n    sb.append((char) ch);\n}\nreturn sb.toString();\n</code></pre>\n</li>\n</ol>\n<p><strong>Warning</strong>:</p>\n<ol>\n<li><p>Solutions 4, 5 and 9 convert different line breaks to one.</p>\n</li>\n<li><p>Solution 11 can't work correctly with Unicode text</p>\n</li>\n</ol>\n<p><strong>Performance tests</strong></p>\n<p>Performance tests for small <code>String</code> (length = 175), url in <a href=\"https://github.com/Vedenin/useful-java-links/blob/master/helloworlds/5.0-other-examples/src/main/java/other_examples/ConvertInputStreamToStringBenchmark.java\" rel=\"nofollow noreferrer\">github</a> (mode = Average Time, system = Linux, score 1,343 is the best):</p>\n<pre class=\"lang-none prettyprint-override\"><code>              Benchmark                         Mode  Cnt   Score   Error  Units\n 8. ByteArrayOutputStream and read (JDK)        avgt   10   1,343 ± 0,028  us/op\n 6. InputStreamReader and StringBuilder (JDK)   avgt   10   6,980 ± 0,404  us/op\n10. BufferedInputStream, ByteArrayOutputStream  avgt   10   7,437 ± 0,735  us/op\n11. InputStream.read() and StringBuilder (JDK)  avgt   10   8,977 ± 0,328  us/op\n 7. StringWriter and IOUtils.copy (Apache)      avgt   10  10,613 ± 0,599  us/op\n 1. IOUtils.toString (Apache Utils)             avgt   10  10,605 ± 0,527  us/op\n 3. Scanner (JDK)                               avgt   10  12,083 ± 0,293  us/op\n 2. CharStreams (guava)                         avgt   10  12,999 ± 0,514  us/op\n 4. Stream Api (Java 8)                         avgt   10  15,811 ± 0,605  us/op\n 9. BufferedReader (JDK)                        avgt   10  16,038 ± 0,711  us/op\n 5. parallel Stream Api (Java 8)                avgt   10  21,544 ± 0,583  us/op\n</code></pre>\n<p>Performance tests for big <code>String</code> (length = 50100), url in <a href=\"https://github.com/Vedenin/useful-java-links/blob/master/helloworlds/5.0-other-examples/src/main/java/other_examples/ConvertBigStringToInputStreamBenchmark.java\" rel=\"nofollow noreferrer\">github</a> (mode = Average Time, system = Linux, score 200,715 is the best):</p>\n<pre class=\"lang-none prettyprint-override\"><code>               Benchmark                        Mode  Cnt   Score        Error  Units\n 8. ByteArrayOutputStream and read (JDK)        avgt   10   200,715 ±   18,103  us/op\n 1. IOUtils.toString (Apache Utils)             avgt   10   300,019 ±    8,751  us/op\n 6. InputStreamReader and StringBuilder (JDK)   avgt   10   347,616 ±  130,348  us/op\n 7. StringWriter and IOUtils.copy (Apache)      avgt   10   352,791 ±  105,337  us/op\n 2. CharStreams (guava)                         avgt   10   420,137 ±   59,877  us/op\n 9. BufferedReader (JDK)                        avgt   10   632,028 ±   17,002  us/op\n 5. parallel Stream Api (Java 8)                avgt   10   662,999 ±   46,199  us/op\n 4. Stream Api (Java 8)                         avgt   10   701,269 ±   82,296  us/op\n10. BufferedInputStream, ByteArrayOutputStream  avgt   10   740,837 ±    5,613  us/op\n 3. Scanner (JDK)                               avgt   10   751,417 ±   62,026  us/op\n11. InputStream.read() and StringBuilder (JDK)  avgt   10  2919,350 ± 1101,942  us/op\n</code></pre>\n<p>Graphs (performance tests depending on Input Stream length in Windows 7 system)<br />\n<a href=\"https://i.stack.imgur.com/AYYhz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AYYhz.png\" alt=\"enter image description here\" /></a></p>\n<p>Performance test (Average Time) depending on Input Stream length in Windows 7 system:</p>\n<pre class=\"lang-none prettyprint-override\"><code> length  182    546     1092    3276    9828    29484   58968\n\n test8  0.38    0.938   1.868   4.448   13.412  36.459  72.708\n test4  2.362   3.609   5.573   12.769  40.74   81.415  159.864\n test5  3.881   5.075   6.904   14.123  50.258  129.937 166.162\n test9  2.237   3.493   5.422   11.977  45.98   89.336  177.39\n test6  1.261   2.12    4.38    10.698  31.821  86.106  186.636\n test7  1.601   2.391   3.646   8.367   38.196  110.221 211.016\n test1  1.529   2.381   3.527   8.411   40.551  105.16  212.573\n test3  3.035   3.934   8.606   20.858  61.571  118.744 235.428\n test2  3.136   6.238   10.508  33.48   43.532  118.044 239.481\n test10 1.593   4.736   7.527   20.557  59.856  162.907 323.147\n test11 3.913   11.506  23.26   68.644  207.591 600.444 1211.545\n</code></pre>\n"},{"answer_id":35705517,"body":"<p>Method to convert inputStream to String</p>\n\n<pre><code>public static String getStringFromInputStream(InputStream inputStream) {\n\n    BufferedReader bufferedReader = null;\n    StringBuilder stringBuilder = new StringBuilder();\n    String line;\n\n    try {\n        bufferedReader = new BufferedReader(new InputStreamReader(\n                inputStream));\n        while ((line = bufferedReader.readLine()) != null) {\n            stringBuilder.append(line);\n        }\n    } catch (IOException e) {\n        logger.error(e.getMessage());\n    } finally {\n        if (bufferedReader != null) {\n            try {\n                bufferedReader.close();\n            } catch (IOException e) {\n                logger.error(e.getMessage());\n            }\n        }\n    }\n    return stringBuilder.toString();\n}\n</code></pre>\n"},{"answer_id":35908771,"body":"<pre><code>InputStream  inputStream = null;\nBufferedReader bufferedReader = null;\ntry {\n    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));\n    String stringBuilder = new StringBuilder();\n    String content;\n    while((content = bufferedReader.readLine()) != null){\n        stringBuilder.append(content);\n    }\n    System.out.println(\"content of file::\" + stringBuilder.toString());\n}\ncatch (IOException e) {\n            e.printStackTrace();\n        }finally{           \n            if(bufferedReader != null){\n                try{\n                    bufferedReader.close();\n                }catch(IoException ex){\n                   ex.printStackTrace();\n            }\n</code></pre>\n"},{"comments":[{"comment_id":95261706,"body":"This does not answer the Question."}],"answer_id":37452030,"body":"<p>Also you can get InputStream from a specified resource path:</p>\n\n<pre><code>public static InputStream getResourceAsStream(String path)\n{\n    InputStream myiInputStream = ClassName.class.getResourceAsStream(path);\n    if (null == myiInputStream)\n    {\n        mylogger.info(\"Can't find path = \", path);\n    }\n\n    return myiInputStream;\n}\n</code></pre>\n\n<p>To get InputStream from a specific path:</p>\n\n<pre><code>public static URL getResource(String path)\n{\n    URL myURL = ClassName.class.getResource(path);\n    if (null == myURL)\n    {\n        mylogger.info(\"Can't find resource path = \", path);\n    }\n    return myURL;\n}\n</code></pre>\n"},{"answer_id":38667387,"body":"<p>Another one, for all the Spring users:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import java.nio.charset.StandardCharsets;\nimport org.springframework.util.FileCopyUtils;\n\npublic String convertStreamToString(InputStream is) throws IOException { \n    return new String(FileCopyUtils.copyToByteArray(is), StandardCharsets.UTF_8);\n}\n</code></pre>\n\n<p>The utility methods in <code>org.springframework.util.StreamUtils</code> are similar to the ones in <code>FileCopyUtils</code>, but they leave the stream open when done.</p>\n"},{"answer_id":38859690,"body":"<p>The easiest way in JDK is with the following code snipplets. </p>\n\n<pre><code>String convertToString(InputStream in){\n    String resource = new Scanner(in).useDelimiter(\"\\\\Z\").next();\n    return resource;\n}\n</code></pre>\n"},{"answer_id":41541671,"body":"<pre><code>public String read(InputStream in) throws IOException {\n    try (BufferedReader buffer = new BufferedReader(new InputStreamReader(in))) {\n        return buffer.lines().collect(Collectors.joining(\"\\n\"));\n    }\n}\n</code></pre>\n"},{"answer_id":41881604,"body":"<p><a href=\"http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/InputStream.html#getText()\" rel=\"nofollow noreferrer\">In Groovy</a></p>\n\n<pre><code>inputStream.getText()\n</code></pre>\n"},{"answer_id":43891396,"body":"<p><em>Raghu K Nair</em> Was the only one using a scanner.\nThe code I use is a little different:</p>\n\n<pre><code>String convertToString(InputStream in){\n    Scanner scanner = new Scanner(in)\n    scanner.useDelimiter(\"\\\\A\");\n\n    boolean hasInput = scanner.hasNext();\n    if (hasInput) {\n        return scanner.next();\n    } else {\n        return null;\n    }\n\n}\n</code></pre>\n\n<p>About Delimiters: <a href=\"https://stackoverflow.com/questions/28766377/how-do-i-use-a-delimiter-in-java-scanner\">How do I use a delimiter in Java Scanner?</a></p>\n"},{"answer_id":45535091,"body":"<p>You can use <a href=\"http://www.cactoos.org\" rel=\"nofollow noreferrer\">Cactoos</a>:</p>\n\n<pre><code>String text = new TextOf(inputStream).asString();\n</code></pre>\n\n<p>UTF-8 encoding is the default one. If you need another one:</p>\n\n<pre><code>String text = new TextOf(inputStream, \"UTF-16\").asString();\n</code></pre>\n"},{"answer_id":46861979,"body":"<p>This solution to this question is not the simplest, but since NIO streams and channels have not been mentioned, here goes a version which uses NIO channels and a ByteBuffer to convert a stream into a string.</p>\n\n<pre><code>public static String streamToStringChannel(InputStream in, String encoding, int bufSize) throws IOException {\n    ReadableByteChannel channel = Channels.newChannel(in);\n    ByteBuffer byteBuffer = ByteBuffer.allocate(bufSize);\n    ByteArrayOutputStream bout = new ByteArrayOutputStream();\n    WritableByteChannel outChannel = Channels.newChannel(bout);\n    while (channel.read(byteBuffer) &gt; 0 || byteBuffer.position() &gt; 0) {\n        byteBuffer.flip();  //make buffer ready for write\n        outChannel.write(byteBuffer);\n        byteBuffer.compact(); //make buffer ready for reading\n    }\n    channel.close();\n    outChannel.close();\n    return bout.toString(encoding);\n}\n</code></pre>\n\n<p>Here is an example how to use it:</p>\n\n<pre><code>try (InputStream in = new FileInputStream(\"/tmp/large_file.xml\")) {\n    String x = streamToStringChannel(in, \"UTF-8\", 1);\n    System.out.println(x);\n}\n</code></pre>\n\n<p>The performance of this method should be good for large files.</p>\n"},{"comments":[{"comment_id":98980827,"body":"<a href=\"http://tutorials.jenkov.com/java-performance/jmh.html#why-are-java-microbenchmarks-hard\" rel=\"nofollow noreferrer\">Making benchmarks in Java is not easy</a> (especially because of JIT). After reading Benchmark source code, I&#39;m convinced that those values above are not precise and everyone should be careful by believing them."},{"comment_id":99293075,"body":"@Dalibor you probably should provide more reasoning for your claim rather than just a link."},{"comment_id":99340835,"body":"I think that it is really known fact that it is not easy to make your own benchmark. For those who do not know that, there is link ;)"},{"comment_id":99342376,"body":"@Dalibor I am perhaps not the best, but I have a good understanding of Java benchmarks, so unless you can point out a specific problem, you are just misleading, and I will not continue the conversation with you under those conditions."},{"comment_id":104033266,"body":"Mostly I agree with Dalibor. You say you have a &quot;good understanding of Java benchmarks&quot;, but you seem to have implemented the most naive approach while being apparently ignorant of the well known issues of this approach. For starters, read every post on this question: <a href=\"https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java\" title=\"how do i write a correct micro benchmark in java\">stackoverflow.com/questions/504103/&hellip;</a>"},{"comment_id":104036362,"body":"@DavidS my test complies with the rules in the excepted answer that you linked. Are you able to point out for any problem in my implementation?"},{"comment_id":104037566,"body":"From the accepted answer: Rule 0: Read the paper, which essentially warns against attempting a micro-benchmark. Rule 1: You have no warm up phase. Rule 2-3: You&#39;ve given no indication you used these flags. Rule 8: Use a library like JMH. With 135 votes in the comments: Don&#39;t use <code>System.currentTimeMillis()</code>. Moving on to other highly voted answers. Jon Skeet: use <code>System.gc()</code> between iterations, and run your test long enough to measure the results in seconds, not milliseconds. Mixing tests in a single JVM run is bad, as the compiler optimizations done for one test will impact another."},{"comment_id":104144510,"body":"I have some free time, so here are a few more. Rule 5: You include the first iteration in your timing phase. Rule 6: You have used no special tools to &quot;read the compilers mind&quot;. Rule 7: You have given no indication that you used these flags. There, I think that about covers it. I think that&#39;s every rule except for rule 4."},{"comment_id":104150439,"body":"@DavidS Rule 0,8: As I already mentioned, I know what I am doing, so this one does not applies here, there is more than one way to do things. Rule 1: of course I do, read my code more carefully, the test is called before the timer starts to worm up! As for System.gc(), it&#39;s just hint for for the system, you cannot trust it to do anything."},{"comment_id":104150461,"body":"@DavidS if you disagree with my implementation, run your own banchmark using what ever library you want and bring your results here. I be happy to compare"},{"comment_id":104176596,"body":"You asked me to point out the problems. I have done so. I&#39;m almost done trying to convince you, but here we go one more time. Rule 1: A single iteration is not a &quot;warm up&quot;: the JIT compiler optimizes after thousands of iterations, not one. <code>System.gc</code> is a just a hint, but it&#39;s a very reliable one, and it would improve your tests. Finally, you are ignoring all of the other points: compiler flags, currentTimeMillis, splitting tests across multiple JVM runs. These are the serious problems with your attempt at benchmarking. I did not make them up myself: they are well known practices and tools."},{"comment_id":104182091,"body":"@DavidS I think you are miss reading this. Check out the input size. It&#39;s 1M byte array. Iterating on it once means the underline stream implementation is going todo a lot of loops."},{"comment_id":104182456,"body":"How many loops for warm-up? Will the loop count vary by algorithm used? Will it be enough to ensure the JIT compiler has achieved optimization? How would you know when it is enough? Wouldn&#39;t it be better to explicitly declare a warm-up phase with a known-number of iterations instead of relying on the underlying stream implementation?  Wouldn&#39;t it be better to use a tool like JMH instead of trying to account for all of this?"}],"answer_id":48775964,"body":"<p>I did a benchmark upon 14 distinct answers here (sorry for not providing credits but there are too many duplicates).</p>\n\n<p>The result is very surprising. It turns out that Apache <strong>IOUtils</strong> is the slowest and <code>ByteArrayOutputStream</code> is the fastest solutions:</p>\n\n<p>So first here is the best method:</p>\n\n<pre><code>public String inputStreamToString(InputStream inputStream) throws IOException {\n    try(ByteArrayOutputStream result = new ByteArrayOutputStream()) {\n        byte[] buffer = new byte[1024];\n        int length;\n        while ((length = inputStream.read(buffer)) != -1) {\n            result.write(buffer, 0, length);\n        }\n\n        return result.toString(UTF_8);\n    }\n}\n</code></pre>\n\n<h2>Benchmark results, of 20 MB random bytes in 20 cycles</h2>\n\n<p>Time in milliseconds</p>\n\n<ul>\n<li>ByteArrayOutputStreamTest: 194</li>\n<li>NioStream: 198</li>\n<li>Java9ISTransferTo: 201</li>\n<li>Java9ISReadAllBytes: 205</li>\n<li>BufferedInputStreamVsByteArrayOutputStream: 314</li>\n<li>ApacheStringWriter2: 574</li>\n<li>GuavaCharStreams: 589</li>\n<li>ScannerReaderNoNextTest: 614</li>\n<li>ScannerReader: 633</li>\n<li>ApacheStringWriter: 1544</li>\n<li>StreamApi: Error</li>\n<li>ParallelStreamApi: Error</li>\n<li>BufferReaderTest: Error</li>\n<li>InputStreamAndStringBuilder: Error</li>\n</ul>\n\n<h2>Benchmark source code</h2>\n\n<pre><code>import com.google.common.io.CharStreams;\nimport org.apache.commons.io.IOUtils;\n\nimport java.io.*;\nimport java.nio.ByteBuffer;\nimport java.nio.channels.Channels;\nimport java.nio.channels.ReadableByteChannel;\nimport java.nio.channels.WritableByteChannel;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.Random;\nimport java.util.stream.Collectors;\n\n/**\n * Created by Ilya Gazman on 2/13/18.\n */\npublic class InputStreamToString {\n\n\n    private static final String UTF_8 = \"UTF-8\";\n\n    public static void main(String... args) {\n        log(\"App started\");\n        byte[] bytes = new byte[1024 * 1024];\n        new Random().nextBytes(bytes);\n        log(\"Stream is ready\\n\");\n\n        try {\n            test(bytes);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private static void test(byte[] bytes) throws IOException {\n        List&lt;Stringify&gt; tests = Arrays.asList(\n                new ApacheStringWriter(),\n                new ApacheStringWriter2(),\n                new NioStream(),\n                new ScannerReader(),\n                new ScannerReaderNoNextTest(),\n                new GuavaCharStreams(),\n                new StreamApi(),\n                new ParallelStreamApi(),\n                new ByteArrayOutputStreamTest(),\n                new BufferReaderTest(),\n                new BufferedInputStreamVsByteArrayOutputStream(),\n                new InputStreamAndStringBuilder(),\n                new Java9ISTransferTo(),\n                new Java9ISReadAllBytes()\n        );\n\n        String solution = new String(bytes, \"UTF-8\");\n\n        for (Stringify test : tests) {\n            try (ByteArrayInputStream inputStream = new ByteArrayInputStream(bytes)) {\n                String s = test.inputStreamToString(inputStream);\n                if (!s.equals(solution)) {\n                    log(test.name() + \": Error\");\n                    continue;\n                }\n            }\n            long startTime = System.currentTimeMillis();\n            for (int i = 0; i &lt; 20; i++) {\n                try (ByteArrayInputStream inputStream = new ByteArrayInputStream(bytes)) {\n                    test.inputStreamToString(inputStream);\n                }\n            }\n            log(test.name() + \": \" + (System.currentTimeMillis() - startTime));\n        }\n    }\n\n    private static void log(String message) {\n        System.out.println(message);\n    }\n\n    interface Stringify {\n        String inputStreamToString(InputStream inputStream) throws IOException;\n\n        default String name() {\n            return this.getClass().getSimpleName();\n        }\n    }\n\n    static class ApacheStringWriter implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            StringWriter writer = new StringWriter();\n            IOUtils.copy(inputStream, writer, UTF_8);\n            return writer.toString();\n        }\n    }\n\n    static class ApacheStringWriter2 implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            return IOUtils.toString(inputStream, UTF_8);\n        }\n    }\n\n    static class NioStream implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream in) throws IOException {\n            ReadableByteChannel channel = Channels.newChannel(in);\n            ByteBuffer byteBuffer = ByteBuffer.allocate(1024 * 16);\n            ByteArrayOutputStream bout = new ByteArrayOutputStream();\n            WritableByteChannel outChannel = Channels.newChannel(bout);\n            while (channel.read(byteBuffer) &gt; 0 || byteBuffer.position() &gt; 0) {\n                byteBuffer.flip();  //make buffer ready for write\n                outChannel.write(byteBuffer);\n                byteBuffer.compact(); //make buffer ready for reading\n            }\n            channel.close();\n            outChannel.close();\n            return bout.toString(UTF_8);\n        }\n    }\n\n    static class ScannerReader implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream is) throws IOException {\n            java.util.Scanner s = new java.util.Scanner(is).useDelimiter(\"\\\\A\");\n            return s.hasNext() ? s.next() : \"\";\n        }\n    }\n\n    static class ScannerReaderNoNextTest implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream is) throws IOException {\n            java.util.Scanner s = new java.util.Scanner(is).useDelimiter(\"\\\\A\");\n            return s.next();\n        }\n    }\n\n    static class GuavaCharStreams implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream is) throws IOException {\n            return CharStreams.toString(new InputStreamReader(\n                    is, UTF_8));\n        }\n    }\n\n    static class StreamApi implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            return new BufferedReader(new InputStreamReader(inputStream))\n                    .lines().collect(Collectors.joining(\"\\n\"));\n        }\n    }\n\n    static class ParallelStreamApi implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            return new BufferedReader(new InputStreamReader(inputStream)).lines()\n                    .parallel().collect(Collectors.joining(\"\\n\"));\n        }\n    }\n\n    static class ByteArrayOutputStreamTest implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            try(ByteArrayOutputStream result = new ByteArrayOutputStream()) {\n                byte[] buffer = new byte[1024];\n                int length;\n                while ((length = inputStream.read(buffer)) != -1) {\n                    result.write(buffer, 0, length);\n                }\n\n                return result.toString(UTF_8);\n            }\n        }\n    }\n\n    static class BufferReaderTest implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            String newLine = System.getProperty(\"line.separator\");\n            BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));\n            StringBuilder result = new StringBuilder(UTF_8);\n            String line;\n            boolean flag = false;\n            while ((line = reader.readLine()) != null) {\n                result.append(flag ? newLine : \"\").append(line);\n                flag = true;\n            }\n            return result.toString();\n        }\n    }\n\n    static class BufferedInputStreamVsByteArrayOutputStream implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            BufferedInputStream bis = new BufferedInputStream(inputStream);\n            ByteArrayOutputStream buf = new ByteArrayOutputStream();\n            int result = bis.read();\n            while (result != -1) {\n                buf.write((byte) result);\n                result = bis.read();\n            }\n\n            return buf.toString(UTF_8);\n        }\n    }\n\n    static class InputStreamAndStringBuilder implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            int ch;\n            StringBuilder sb = new StringBuilder(UTF_8);\n            while ((ch = inputStream.read()) != -1)\n                sb.append((char) ch);\n            return sb.toString();\n        }\n    }\n\n    static class Java9ISTransferTo implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            ByteArrayOutputStream bos = new ByteArrayOutputStream();\n            inputStream.transferTo(bos);\n            return bos.toString(UTF_8);\n        }\n    }\n\n    static class Java9ISReadAllBytes implements Stringify {\n\n        @Override\n        public String inputStreamToString(InputStream inputStream) throws IOException {\n            return new String(inputStream.readAllBytes(), UTF_8);\n        }\n    }\n\n}\n</code></pre>\n"},{"comments":[{"comment_id":132679435,"body":"Though the <a href=\"https://stackoverflow.com/tags/okio/info\">tag wiki for Okio</a> has been plagiarised from that page."}],"answer_id":49707572,"body":"<p>With <a href=\"https://square.github.io/okio/\" rel=\"nofollow noreferrer\">Okio</a>:</p>\n<pre><code>String result = Okio.buffer(Okio.source(inputStream)).readUtf8();\n</code></pre>\n"},{"answer_id":51083322,"body":"<p>I have created this code, and it works. There are no required external plug-ins.</p>\n\n<p>There is a converter <code>String</code> to <code>Stream</code> and <code>Stream</code> to <code>String</code>:</p>\n\n<pre><code>import java.io.ByteArrayInputStream;\nimport java.io.InputStream;\n\npublic class STRINGTOSTREAM {\n\n    public static void main(String[] args)\n    {\n        String text = \"Hello Bhola..!\\nMy Name Is Kishan \";\n\n        InputStream strm = new ByteArrayInputStream(text.getBytes());    // Convert String to Stream\n\n        String data = streamTostring(strm);\n\n        System.out.println(data);\n    }\n\n    static String streamTostring(InputStream stream)\n    {\n        String data = \"\";\n\n        try\n        {\n            StringBuilder stringbuld = new StringBuilder();\n            int i;\n            while ((i=stream.read())!=-1)\n            {\n                stringbuld.append((char)i);\n            }\n            data = stringbuld.toString();\n        }\n        catch(Exception e)\n        {\n            data = \"No data Streamed.\";\n        }\n        return data;\n    }\n</code></pre>\n"},{"answer_id":53199396,"body":"<h1>ISO-8859-1</h1>\n\n<p>Here is a <strong>very</strong> performant way to do this if you know your input stream's encoding is ISO-8859-1 or ASCII. It (1) avoids the unnecessary synchronization present in <code>StringWriter</code>'s internal <code>StringBuffer</code>, (2) avoids the overhead of <code>InputStreamReader</code>, and (3) minimizes the number of times <code>StringBuilder</code>'s internal <code>char</code> array must be copied.</p>\n\n<pre><code>public static String iso_8859_1(InputStream is) throws IOException {\n    StringBuilder chars = new StringBuilder(Math.max(is.available(), 4096));\n    byte[] buffer = new byte[4096];\n    int n;\n    while ((n = is.read(buffer)) != -1) {\n        for (int i = 0; i &lt; n; i++) {\n            chars.append((char)(buffer[i] &amp; 0xFF));\n        }\n    }\n    return chars.toString();\n}\n</code></pre>\n\n<h1>UTF-8</h1>\n\n<p>The same general strategy may be used for a stream encoded with UTF-8: </p>\n\n<pre><code>public static String utf8(InputStream is) throws IOException {\n    StringBuilder chars = new StringBuilder(Math.max(is.available(), 4096));\n    byte[] buffer = new byte[4096];\n    int n;\n    int state = 0;\n    while ((n = is.read(buffer)) != -1) {\n        for (int i = 0; i &lt; n; i++) {\n            if ((state = nextStateUtf8(state, buffer[i])) &gt;= 0) {\n                chars.appendCodePoint(state);\n            } else if (state == -1) { //error\n                state = 0;\n                chars.append('\\uFFFD'); //replacement char\n            }\n        }\n    }\n    return chars.toString();\n}\n</code></pre>\n\n<p>where the <code>nextStateUtf8()</code> function is defined as follows:</p>\n\n<pre><code>/**\n * Returns the next UTF-8 state given the next byte of input and the current state.\n * If the input byte is the last byte in a valid UTF-8 byte sequence,\n * the returned state will be the corresponding unicode character (in the range of 0 through 0x10FFFF).\n * Otherwise, a negative integer is returned. A state of -1 is returned whenever an\n * invalid UTF-8 byte sequence is detected.\n */\nstatic int nextStateUtf8(int currentState, byte nextByte) {\n    switch (currentState &amp; 0xF0000000) {\n        case 0:\n            if ((nextByte &amp; 0x80) == 0) { //0 trailing bytes (ASCII)\n                return nextByte;\n            } else if ((nextByte &amp; 0xE0) == 0xC0) { //1 trailing byte\n                if (nextByte == (byte) 0xC0 || nextByte == (byte) 0xC1) { //0xCO &amp; 0xC1 are overlong\n                    return -1;\n                } else {\n                    return nextByte &amp; 0xC000001F;\n                }\n            } else if ((nextByte &amp; 0xF0) == 0xE0) { //2 trailing bytes\n                if (nextByte == (byte) 0xE0) { //possibly overlong\n                    return nextByte &amp; 0xA000000F;\n                } else if (nextByte == (byte) 0xED) { //possibly surrogate\n                    return nextByte &amp; 0xB000000F;\n                } else {\n                    return nextByte &amp; 0x9000000F;\n                }\n            } else if ((nextByte &amp; 0xFC) == 0xF0) { //3 trailing bytes\n                if (nextByte == (byte) 0xF0) { //possibly overlong\n                    return nextByte &amp; 0x80000007;\n                } else {\n                    return nextByte &amp; 0xE0000007;\n                }\n            } else if (nextByte == (byte) 0xF4) { //3 trailing bytes, possibly undefined\n                return nextByte &amp; 0xD0000007;\n            } else {\n                return -1;\n            }\n        case 0xE0000000: //3rd-to-last continuation byte\n            return (nextByte &amp; 0xC0) == 0x80 ? currentState &lt;&lt; 6 | nextByte &amp; 0x9000003F : -1;\n        case 0x80000000: //3rd-to-last continuation byte, check overlong\n            return (nextByte &amp; 0xE0) == 0xA0 || (nextByte &amp; 0xF0) == 0x90 ? currentState &lt;&lt; 6 | nextByte &amp; 0x9000003F : -1;\n        case 0xD0000000: //3rd-to-last continuation byte, check undefined\n            return (nextByte &amp; 0xF0) == 0x80 ? currentState &lt;&lt; 6 | nextByte &amp; 0x9000003F : -1;\n        case 0x90000000: //2nd-to-last continuation byte\n            return (nextByte &amp; 0xC0) == 0x80 ? currentState &lt;&lt; 6 | nextByte &amp; 0xC000003F : -1;\n        case 0xA0000000: //2nd-to-last continuation byte, check overlong\n            return (nextByte &amp; 0xE0) == 0xA0 ? currentState &lt;&lt; 6 | nextByte &amp; 0xC000003F : -1;\n        case 0xB0000000: //2nd-to-last continuation byte, check surrogate\n            return (nextByte &amp; 0xE0) == 0x80 ? currentState &lt;&lt; 6 | nextByte &amp; 0xC000003F : -1;\n        case 0xC0000000: //last continuation byte\n            return (nextByte &amp; 0xC0) == 0x80 ? currentState &lt;&lt; 6 | nextByte &amp; 0x3F : -1;\n        default:\n            return -1;\n    }\n}\n</code></pre>\n\n<h1>Auto-Detect Encoding</h1>\n\n<p>If your input stream was encoded using either ASCII or ISO-8859-1 or UTF-8, but you're not sure which, we can use a similar method to the last, but with an additional encoding-detection component to <em>auto-detect</em> the encoding before returning the string.</p>\n\n<pre><code>public static String autoDetect(InputStream is) throws IOException {\n    StringBuilder chars = new StringBuilder(Math.max(is.available(), 4096));\n    byte[] buffer = new byte[4096];\n    int n;\n    int state = 0;\n    boolean ascii = true;\n    while ((n = is.read(buffer)) != -1) {\n        for (int i = 0; i &lt; n; i++) {\n            if ((state = nextStateUtf8(state, buffer[i])) &gt; 0x7F)\n                ascii = false;\n            chars.append((char)(buffer[i] &amp; 0xFF));\n        }\n    }\n\n    if (ascii || state &lt; 0) { //probably not UTF-8\n        return chars.toString();\n    }\n    //probably UTF-8\n    int pos = 0;\n    char[] charBuf = new char[2];\n    for (int i = 0, len = chars.length(); i &lt; len; i++) {\n        if ((state = nextStateUtf8(state, (byte)chars.charAt(i))) &gt;= 0) {\n            boolean hi = Character.toChars(state, charBuf, 0) == 2;\n            chars.setCharAt(pos++, charBuf[0]);\n            if (hi) {\n                chars.setCharAt(pos++, charBuf[1]);\n            }\n        }\n    }\n    return chars.substring(0, pos);\n}\n</code></pre>\n\n<p>If your input stream has an encoding that is neither ISO-8859-1 nor ASCII nor UTF-8, then I defer to the other answers already present.</p>\n"},{"comments":[{"comment_id":105843150,"body":"IOUtils has a simpler function for that."}],"answer_id":55393395,"body":"<p>I suggest the <strong>StringWriter</strong> class for that problem.</p>\n\n<pre><code>StringWriter wt= new StringWriter();\nIOUtils.copy(inputStream, wt, encoding);\nString st= wt.toString();\n</code></pre>\n"},{"comments":[{"comment_id":124684417,"body":"You are converting line separators and in the case where the input doesn&#39;t end with a newline, you are adding one.  This is useful for some cases, but the it is interpreting the input stream rather than doing a direct conversion to a String."}],"answer_id":58954758,"body":"<p>This code is for new Java learners:</p>\n<pre><code>private String textDataFromFile;\n\npublic String getFromFile(InputStream myInputStream) throws FileNotFoundException, IOException {\n\n    BufferedReader bufferReader = new BufferedReader(new InputStreamReader(myInputStream));\n\n    StringBuilder stringBuilder = new StringBuilder();\n\n    String eachStringLine;\n\n    while ((eachStringLine = bufferReader.readLine()) != null) {\n        stringBuilder.append(eachStringLine).append(&quot;\\n&quot;);\n    }\n    textDataFromFile = stringBuilder.toString();\n\n    return textDataFromFile;\n}\n</code></pre>\n"},{"answer_id":61036395,"body":"<pre><code>String inputStreamToString(InputStream inputStream, Charset charset) throws IOException {\n    try (\n            final StringWriter writer = new StringWriter();\n            final InputStreamReader reader = new InputStreamReader(inputStream, charset)\n        ) {\n        reader.transferTo(writer);\n        return writer.toString();\n    }\n}\n</code></pre>\n\n<ul>\n<li>pure Java standard library solution - no libs</li>\n<li>since Java 10 - <a href=\"https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/io/Reader.html#transferTo(java.io.Writer)\" rel=\"noreferrer\">Reader#transferTo(java.io.Writer)</a></li>\n<li>loopless solution</li>\n<li>no new line character handling</li>\n</ul>\n"},{"answer_id":65265664,"body":"<p>If you need to convert the string to a specific character set <em>without</em> external libraries then:</p>\n<pre><code>public String convertStreamToString(InputStream is) throws IOException {\n  try (ByteArrayOutputStream baos = new ByteArrayOutputStream();) {\n    is.transferTo(baos);\n    return baos.toString(StandardCharsets.UTF_8);\n  }\n}\n</code></pre>\n"},{"answer_id":69865898,"body":"<p>The easiest way, a one-liner:</p>\n<pre><code>public static void main(String... args) throws IOException {\n    System.out.println(new String(Files.readAllBytes(Paths.get(&quot;csv.txt&quot;))));\n}\n</code></pre>\n"},{"answer_id":72002358,"body":"<p>If you're using AWS SDK v2, call <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/utils/IoUtils.html#toUtf8String-java.io.InputStream-\" rel=\"nofollow noreferrer\">IoUtils.toUtf8String()</a>:</p>\n<pre><code>public String convertStreamToString(InputStream is) {\n    return IoUtils.toUtf8String(is);\n}\n</code></pre>\n"},{"comments":[{"comment_id":134134702,"body":"Re <i>&quot;I see a lot of just snippets but zero explanations as to WHY this the snippet is a good way.&quot;</i>: The reason is probably that the posters don&#39;t understand it (blind <a href=\"https://meta.stackoverflow.com/questions/424261/where-do-the-duplication-start-when-an-answer-seems-similar-but-not-fully\">plagiarism</a>). But it is very hard to prove (or disprove)."},{"comment_id":134141350,"body":"Well I wasn&#39;t going to go that far, but I appreciate the sentiment.  I just thought everyone was being too succinct. :-)"}],"answer_id":75631044,"body":"<p>I see a lot of just snippets but zero explanations as to WHY this the snippet is a good way.  I'm going to limit myself to just plain Java.  What's key to understand about Java:</p>\n<ul>\n<li><code>java.io.InputStream</code> is for reading bytes.</li>\n<li><code>java.io.Reader</code> is for reading character data.</li>\n</ul>\n<p>You should NOT be reading InputStream and converting that to Strings yourself because the world we are in isn't single byte focused anymore.  And this is where <code>java.nio.charset.Charset</code> objects come into play.  <code>Charset</code> classes convert bytes -&gt; char.  They bridge <code>java.io.InputStream</code> and <code>java.io.Reader</code>.  You have to have <code>java.nio.charset.Charset</code> to convert InputStream into a Reader.</p>\n<p>I'm going to do this the low memory usage way (Well until you read the thing into a single string which will eat up the full memory, but dems the requirements ;-)</p>\n<p>Here's the code:</p>\n<pre><code>public String readString(InputStream inStream) {\n   char[] buffer = new char[2**16];\n   try( Reader reader = new InputStreamReader( inStream, &quot;UTF-8&quot;) ) {\n      int length = -1;\n      StringBuilder builder = new StringBuilder();\n      while( (length = reader.read( buffer, 0, buffer.length )) &gt;= 0 ) {\n          builder.append( buffer, 0, length );\n      }\n   }\n   return builder.toString();\n}\n</code></pre>\n<p>The key here is to use <code>InputStreamReader</code> to bridge between <code>InputStream</code> -&gt; <code>Reader</code> where you can read character data.  From there it's simple to build the string using a <code>StringBuilder</code>.  Another important part of <code>InputStreamReader</code> is specifying the character encoding.  In this case I used &quot;UTF-8&quot;, but it could be &quot;ISO-8859-1&quot; or &quot;UTF-16&quot;, etc.</p>\n<p>Word to the wise.  I didn't use BufferedInputStream or BufferedReader to wrap these.  Those classes are overused.  If you are calling <code>Reader.read( char[], int start, int len)</code> or other array read methods then you are providing a buffer.  Your usage is <em>mostly</em> optimized (the size of the buffer is what is in question)  There is no need to have BufferedInputStream create yet another buffer for you.  You've allocated your buffer so there is zero advantage added by wrapping your InputStream in a BufferedInputStream.  Now if you are calling <code>InputStream.read()</code> or <code>Reader.read()</code> then yes those classes are providing a speed boost by converting single byte/char reads into buffered reads.  But most of the time people don't read byte by byte.</p>\n<p>The only exception to that advice is if you want to use readLine in which case BufferedReader is your friend, and go right ahead and use it.  A word of caution is in order.  If you are reading a 1GB one line file it's going to take over 1GB of memory to read your file which is probably NOT what you want.</p>\n<p>That's the tightest loop with minimal memory usage for reading the actual data. And that's why reading the full data into a String might not always be the best approach, but this code can be adapted to other situations.  If you were write it out to a <code>java.io.Writer</code> that streamed it out to an external storage it'd be very tight.</p>\n"},{"answer_id":76105082,"body":"<blockquote>\n<p>How do I read / convert an InputStream into a String in Java?</p>\n</blockquote>\n<p>You would provide one more possible solution where performance is the main concern, you can improve speed by using a BufferedReader to read the InputStream line by line, instead of reading the InputStream byte by byte.\nHere it is a code:</p>\n<pre><code>public String convertStreamToString(InputStream inputStream) throws IOException {\n    BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));\n    StringBuilder stringBuilder = new StringBuilder();\n    String line;\n    while ((line = reader.readLine()) != null) {\n        stringBuilder.append(line).append(&quot;\\n&quot;);\n    }\n    return stringBuilder.toString();\n}\n\n</code></pre>\n<p>When compared to reading the input byte by byte, this method buffers the information and reads it in chunks, which can greatly improve performance.</p>\n"}],"last_activity_date":1684452646,"question_id":309424,"body":"<p>If you have a <code>java.io.InputStream</code> object, how should you process that object and produce a <code>String</code>?</p>\n<hr />\n<p>Suppose I have an <code>InputStream</code> that contains text data, and I want to convert it to a <code>String</code>, so for example I can write that to a log file.</p>\n<p>What is the easiest way to take the <code>InputStream</code> and convert it to a <code>String</code>?</p>\n<pre><code>public String convertStreamToString(InputStream is) {\n// ???\n}\n</code></pre>\n"},{"comments":[{"comment_id":134509839,"body":"Your version of maven-war-plugin (2.3 from your pom.xml listing) is over 10 years old. Try using a newer version. Also,  GlassFish 7 definitely won&#39;t work with JDK 20 in NetBeans. Unless you have a specific reason to be using JDK 20, just use JDK 17 with NetBeans, and also update your question to state which version  of NetBeans is being used."}],"answers":[{"answer_id":76285042,"body":"<p><strong>TLDR:</strong></p>\n<p>You are using a very old version of <strong>maven-war-plugin</strong> in your <strong>pom.xml</strong>. Use a recent version instead.</p>\n<p><strong>The Details:</strong></p>\n<p>You correctly cite this as the root cause of your problem:</p>\n<blockquote>\n<p>java.lang.reflect.InaccessibleObjectException: Unable to make field\nprivate final java.util.Comparator java.util.TreeMap.comparator\naccessible: module java.base does not &quot;opens java.util&quot; to unnamed\nmodule @79a13920</p>\n</blockquote>\n<p>That error arises from your use of a very old version of the maven-war-plugin:</p>\n<blockquote>\n<p>Failed to execute goal\norg.apache.maven.plugins:maven-war-plugin:2.3:war (default-war) on\nproject mavenproject2: Execution default-war of goal\norg.apache.maven.plugins:maven-war-plugin:2.3:war failed: Unable to\nload the mojo 'war' in the plugin\n'org.apache.maven.plugins:maven-war-plugin:2.3' due to an API\nincompatibility</p>\n</blockquote>\n<p>That <em>&quot;API incompatibility&quot;</em> is happening because you are using version 2.3 of <strong>maven-war-plugin</strong> which was released in 2012. That precedes by several years the introduction of Java Platform Module System (JPMS) in Java in JDK 9 in 2017.</p>\n<p>The war's attempt to access <code>private final java.util.Comparator java.util.TreeMap.comparator</code> was valid (if unwise) with Java 8, but is no longer allowed with JPMS. So just <a href=\"https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-war-plugin\" rel=\"nofollow noreferrer\">use a more recent version of maven-war-plugin</a> to resolve this.</p>\n<p>Here is the <strong>maven-war-plugin</strong> bug report for this issue, from 2017: <a href=\"https://issues.apache.org/jira/browse/MWAR-405\" rel=\"nofollow noreferrer\">MWAR-405\nWorkaround XStream incompatibility with Java9</a>. It states: <em>&quot;The problem is that XStreams tries to access &quot;comparator&quot; field of java.util.TreeMap and this is forbidden in Java9&quot;</em>. That is exactly what your stack trace shows.</p>\n<p>There is also an open NetBeans Bug Report for an issue very similar to yours. See <a href=\"https://github.com/apache/netbeans/issues/4552\" rel=\"nofollow noreferrer\">need to update maven-war-plugin for maven web application using jdk17 #4552</a>. It shows the same error in the stack trace as yours. Note that the bug report cites this as a workaround:\n<em>&quot;work around bump maven-web-plugin to version 3.3.2 in pom.xml&quot;</em>. (Actually I see that as the solution rather than a workaround, because there is nothing that NetBeans can do to prevent the use of obsolete software.)</p>\n<p>Update your question accordingly if using a recent version of <strong>maven-war-plugin</strong> doesn't fix your problem.</p>\n"}],"last_activity_date":1684452088,"question_id":76276401,"body":"<p>I am trying to create and run a jsf web app of 'hellow world' in netbeans using glassfish.\nI am using netbeans 17. I am using jdk 17 for glassfish 7.</p>\n<p>I have jdk 20 and jdk 17 installed. I have glassfish 7 installed and using jdk 17.</p>\n<p>The build of the project when created passes but when I try to actually run in I get the following error</p>\n<blockquote>\n<p>java.lang.reflect.InaccessibleObjectException: Unable to make field private final java.util.Comparator java.util.TreeMap.comparator accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @79a13920</p>\n</blockquote>\n<p>Below is the full stack trace</p>\n<pre><code>Error injecting: org.apache.maven.plugin.war.WarMojo\ncom.google.inject.ProvisionException: Unable to provision, see the following errors:\n\n1) Error injecting constructor, java.lang.ExceptionInInitializerError\n  at org.apache.maven.plugin.war.WarMojo.&lt;init&gt;(Unknown Source)\n  while locating org.apache.maven.plugin.war.WarMojo\n\n1 error\n    at com.google.inject.internal.InternalProvisionException.toProvisionException (InternalProvisionException.java:226)\n    at com.google.inject.internal.InjectorImpl$1.get (InjectorImpl.java:1053)\n    at com.google.inject.internal.InjectorImpl.getInstance (InjectorImpl.java:1086)\n    at org.eclipse.sisu.space.AbstractDeferredClass.get (AbstractDeferredClass.java:48)\n    at com.google.inject.internal.ProviderInternalFactory.provision (ProviderInternalFactory.java:85)\n    at com.google.inject.internal.InternalFactoryToInitializableAdapter.provision (InternalFactoryToInitializableAdapter.java:57)\n    at com.google.inject.internal.ProviderInternalFactory$1.call (ProviderInternalFactory.java:66)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:112)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:127)\n    at com.google.inject.internal.ProvisionListenerStackCallback.provision (ProvisionListenerStackCallback.java:66)\n    at com.google.inject.internal.ProviderInternalFactory.circularGet (ProviderInternalFactory.java:61)\n    at com.google.inject.internal.InternalFactoryToInitializableAdapter.get (InternalFactoryToInitializableAdapter.java:47)\n    at com.google.inject.internal.InjectorImpl$1.get (InjectorImpl.java:1050)\n    at org.eclipse.sisu.inject.Guice4$1.get (Guice4.java:162)\n    at org.eclipse.sisu.inject.LazyBeanEntry.getValue (LazyBeanEntry.java:81)\n    at org.eclipse.sisu.plexus.LazyPlexusBean.getValue (LazyPlexusBean.java:51)\n    at org.codehaus.plexus.DefaultPlexusContainer.lookup (DefaultPlexusContainer.java:263)\n    at org.codehaus.plexus.DefaultPlexusContainer.lookup (DefaultPlexusContainer.java:255)\n    at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getConfiguredMojo (DefaultMavenPluginManager.java:520)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:124)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:370)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:351)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:171)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:163)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:298)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: java.lang.ExceptionInInitializerError\n    at com.thoughtworks.xstream.XStream.setupConverters (XStream.java:679)\n    at com.thoughtworks.xstream.XStream.&lt;init&gt; (XStream.java:456)\n    at com.thoughtworks.xstream.XStream.&lt;init&gt; (XStream.java:381)\n    at com.thoughtworks.xstream.XStream.&lt;init&gt; (XStream.java:356)\n    at org.apache.maven.plugin.war.util.WebappStructureSerializer.&lt;clinit&gt; (WebappStructureSerializer.java:47)\n    at org.apache.maven.plugin.war.AbstractWarMojo.&lt;init&gt; (AbstractWarMojo.java:324)\n    at org.apache.maven.plugin.war.WarMojo.&lt;init&gt; (WarMojo.java:53)\n    at jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0 (Native Method)\n    at jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance (NativeConstructorAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance (DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstanceWithCaller (Constructor.java:499)\n    at java.lang.reflect.Constructor.newInstance (Constructor.java:480)\n    at com.google.inject.internal.DefaultConstructionProxyFactory$ReflectiveProxy.newInstance (DefaultConstructionProxyFactory.java:126)\n    at com.google.inject.internal.ConstructorInjector.provision (ConstructorInjector.java:114)\n    at com.google.inject.internal.ConstructorInjector.access$000 (ConstructorInjector.java:32)\n    at com.google.inject.internal.ConstructorInjector$1.call (ConstructorInjector.java:98)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:112)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:127)\n    at com.google.inject.internal.ProvisionListenerStackCallback.provision (ProvisionListenerStackCallback.java:66)\n    at com.google.inject.internal.ConstructorInjector.construct (ConstructorInjector.java:93)\n    at com.google.inject.internal.ConstructorBindingImpl$Factory.get (ConstructorBindingImpl.java:306)\n    at com.google.inject.internal.InjectorImpl$1.get (InjectorImpl.java:1050)\n    at com.google.inject.internal.InjectorImpl.getInstance (InjectorImpl.java:1086)\n    at org.eclipse.sisu.space.AbstractDeferredClass.get (AbstractDeferredClass.java:48)\n    at com.google.inject.internal.ProviderInternalFactory.provision (ProviderInternalFactory.java:85)\n    at com.google.inject.internal.InternalFactoryToInitializableAdapter.provision (InternalFactoryToInitializableAdapter.java:57)\n    at com.google.inject.internal.ProviderInternalFactory$1.call (ProviderInternalFactory.java:66)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:112)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:127)\n    at com.google.inject.internal.ProvisionListenerStackCallback.provision (ProvisionListenerStackCallback.java:66)\n    at com.google.inject.internal.ProviderInternalFactory.circularGet (ProviderInternalFactory.java:61)\n    at com.google.inject.internal.InternalFactoryToInitializableAdapter.get (InternalFactoryToInitializableAdapter.java:47)\n    at com.google.inject.internal.InjectorImpl$1.get (InjectorImpl.java:1050)\n    at org.eclipse.sisu.inject.Guice4$1.get (Guice4.java:162)\n    at org.eclipse.sisu.inject.LazyBeanEntry.getValue (LazyBeanEntry.java:81)\n    at org.eclipse.sisu.plexus.LazyPlexusBean.getValue (LazyPlexusBean.java:51)\n    at org.codehaus.plexus.DefaultPlexusContainer.lookup (DefaultPlexusContainer.java:263)\n    at org.codehaus.plexus.DefaultPlexusContainer.lookup (DefaultPlexusContainer.java:255)\n    at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getConfiguredMojo (DefaultMavenPluginManager.java:520)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:124)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:370)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:351)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:171)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:163)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:298)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private final java.util.Comparator java.util.TreeMap.comparator accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @79a13920\n    at java.lang.reflect.AccessibleObject.checkCanSetAccessible (AccessibleObject.java:354)\n    at java.lang.reflect.AccessibleObject.checkCanSetAccessible (AccessibleObject.java:297)\n    at java.lang.reflect.Field.checkCanSetAccessible (Field.java:178)\n    at java.lang.reflect.Field.setAccessible (Field.java:172)\n    at com.thoughtworks.xstream.converters.collections.TreeMapConverter.&lt;clinit&gt; (TreeMapConverter.java:59)\n    at com.thoughtworks.xstream.XStream.setupConverters (XStream.java:679)\n    at com.thoughtworks.xstream.XStream.&lt;init&gt; (XStream.java:456)\n    at com.thoughtworks.xstream.XStream.&lt;init&gt; (XStream.java:381)\n    at com.thoughtworks.xstream.XStream.&lt;init&gt; (XStream.java:356)\n    at org.apache.maven.plugin.war.util.WebappStructureSerializer.&lt;clinit&gt; (WebappStructureSerializer.java:47)\n    at org.apache.maven.plugin.war.AbstractWarMojo.&lt;init&gt; (AbstractWarMojo.java:324)\n    at org.apache.maven.plugin.war.WarMojo.&lt;init&gt; (WarMojo.java:53)\n    at jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0 (Native Method)\n    at jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance (NativeConstructorAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance (DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstanceWithCaller (Constructor.java:499)\n    at java.lang.reflect.Constructor.newInstance (Constructor.java:480)\n    at com.google.inject.internal.DefaultConstructionProxyFactory$ReflectiveProxy.newInstance (DefaultConstructionProxyFactory.java:126)\n    at com.google.inject.internal.ConstructorInjector.provision (ConstructorInjector.java:114)\n    at com.google.inject.internal.ConstructorInjector.access$000 (ConstructorInjector.java:32)\n    at com.google.inject.internal.ConstructorInjector$1.call (ConstructorInjector.java:98)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:112)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:127)\n    at com.google.inject.internal.ProvisionListenerStackCallback.provision (ProvisionListenerStackCallback.java:66)\n    at com.google.inject.internal.ConstructorInjector.construct (ConstructorInjector.java:93)\n    at com.google.inject.internal.ConstructorBindingImpl$Factory.get (ConstructorBindingImpl.java:306)\n    at com.google.inject.internal.InjectorImpl$1.get (InjectorImpl.java:1050)\n    at com.google.inject.internal.InjectorImpl.getInstance (InjectorImpl.java:1086)\n    at org.eclipse.sisu.space.AbstractDeferredClass.get (AbstractDeferredClass.java:48)\n    at com.google.inject.internal.ProviderInternalFactory.provision (ProviderInternalFactory.java:85)\n    at com.google.inject.internal.InternalFactoryToInitializableAdapter.provision (InternalFactoryToInitializableAdapter.java:57)\n    at com.google.inject.internal.ProviderInternalFactory$1.call (ProviderInternalFactory.java:66)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:112)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision (ProvisionListenerStackCallback.java:127)\n    at com.google.inject.internal.ProvisionListenerStackCallback.provision (ProvisionListenerStackCallback.java:66)\n    at com.google.inject.internal.ProviderInternalFactory.circularGet (ProviderInternalFactory.java:61)\n    at com.google.inject.internal.InternalFactoryToInitializableAdapter.get (InternalFactoryToInitializableAdapter.java:47)\n    at com.google.inject.internal.InjectorImpl$1.get (InjectorImpl.java:1050)\n    at org.eclipse.sisu.inject.Guice4$1.get (Guice4.java:162)\n    at org.eclipse.sisu.inject.LazyBeanEntry.getValue (LazyBeanEntry.java:81)\n    at org.eclipse.sisu.plexus.LazyPlexusBean.getValue (LazyPlexusBean.java:51)\n    at org.codehaus.plexus.DefaultPlexusContainer.lookup (DefaultPlexusContainer.java:263)\n    at org.codehaus.plexus.DefaultPlexusContainer.lookup (DefaultPlexusContainer.java:255)\n    at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getConfiguredMojo (DefaultMavenPluginManager.java:520)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:124)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:370)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:351)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:171)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:163)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:298)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n------------------------------------------------------------------------\nBUILD FAILURE\n------------------------------------------------------------------------\nTotal time:  2.836 s\nFinished at: 2023-05-18T00:24:47+03:00\n------------------------------------------------------------------------\nFailed to execute goal org.apache.maven.plugins:maven-war-plugin:2.3:war (default-war) on project mavenproject2: Execution default-war of goal org.apache.maven.plugins:maven-war-plugin:2.3:war failed: Unable to load the mojo 'war' in the plugin 'org.apache.maven.plugins:maven-war-plugin:2.3' due to an API incompatibility: org.codehaus.plexus.component.repository.exception.ComponentLookupException: null\n-----------------------------------------------------\nrealm =    plugin&gt;org.apache.maven.plugins:maven-war-plugin:2.3\nstrategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy\nurls[0] = file:/C:/Users/Aidel%20Silber/.m2/repository/org/apache/maven/plugins/maven-war-plugin/2.3/maven-war-plugin-2.3.jar\nurls[1] = file:/C:/Users/Aidel%20Silber/.m2/repository/org/apache/maven/reporting/maven-reporting-api/2.0.6/maven-reporting-api-2.0.6.jar\nurls[2] = file:/C:/Users/Aidel%20Silber/.m2/repository/org/apache/maven/doxia/doxia-sink-api/1.0-alpha-7/doxia-sink-api-1.0-alpha-7.jar\nurls[3] = file:/C:/Users/Aidel%20Silber/.m2/repository/commons-cli/commons-cli/1.0/commons-cli-1.0.jar\nurls[4] = file:/C:/Users/Aidel%20Silber/.m2/repository/org/codehaus/plexus/plexus-interactivity-api/1.0-alpha-4/plexus-interactivity-api-1.0-alpha-4.jar\nurls[5] = file:/C:/Users/Aidel%20Silber/.m2/repository/org/apache/maven/maven-archiver/2.5/maven-archiver-2.5.jar\nurls[6] = file:/C:/Users/Aidel%20Silber/.m2/repository/org/codehaus/plexus/plexus-io/2.0.5/plexus-io-2.0.5.jar\nurls[7] = file:/C:/Users/Aidel%20Silber/.m2/repository/org/codehaus/plexus/plexus-archiver/2.2/plexus-archiver-2.2.jar\nurls[8] = file:/C:/Users/Aidel%20Silber/.m2/repository/org/codehaus/plexus/plexus-interpolation/1.15/plexus-interpolation-1.15.jar\nurls[9] = file:/C:/Users/Aidel%20Silber/.m2/repository/junit/junit/3.8.1/junit-3.8.1.jar\nurls[10] = file:/C:/Users/Aidel%20Silber/.m2/repository/com/thoughtworks/xstream/xstream/1.4.3/xstream-1.4.3.jar\nurls[11] = file:/C:/Users/Aidel%20Silber/.m2/repository/xmlpull/xmlpull/1.1.3.1/xmlpull-1.1.3.1.jar\nurls[12] = file:/C:/Users/Aidel%20Silber/.m2/repository/xpp3/xpp3_min/1.1.4c/xpp3_min-1.1.4c.jar\nurls[13] = file:/C:/Users/Aidel%20Silber/.m2/repository/org/codehaus/plexus/plexus-utils/3.0.8/plexus-utils-3.0.8.jar\nurls[14] = file:/C:/Users/Aidel%20Silber/.m2/repository/org/apache/maven/shared/maven-filtering/1.0-beta-2/maven-filtering-1.0-beta-2.jar\nNumber of foreign imports: 1\nimport: Entry[import  from realm ClassRealm[maven.api, parent: null]]\n\n-----------------------------------------------------\n: ExceptionInInitializerError: Unable to make field private final java.util.Comparator java.util.TreeMap.comparator accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @79a13920\n-&gt; [Help 1]\n\nTo see the full stack trace of the errors, re-run Maven with the -e switch.\nRe-run Maven using the -X switch to enable full debug logging.\n\nFor more information about the errors and possible solutions, please read the following articles:\n[Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginContainerException\n</code></pre>\n<p>My pom is as following:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.mycompany&lt;/groupId&gt;\n    &lt;artifactId&gt;mavenproject2&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;mavenproject2-1.0-SNAPSHOT&lt;/name&gt;\n    \n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n        &lt;endorsed.dir&gt;${project.build.directory}/endorsed&lt;/endorsed.dir&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n        &lt;jakartaee&gt;10.0.0&lt;/jakartaee&gt;\n    &lt;/properties&gt;\n    \n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.jakartaee-api&lt;/artifactId&gt;\n            &lt;version&gt;${jakartaee}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    \n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;11&lt;/source&gt;\n                    &lt;target&gt;11&lt;/target&gt;\n                    &lt;compilerArguments&gt;\n                        &lt;endorseddirs&gt;${endorsed.dir}&lt;/endorseddirs&gt;\n                    &lt;/compilerArguments&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.3&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.6&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;validate&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;copy&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;outputDirectory&gt;${endorsed.dir}&lt;/outputDirectory&gt;\n                            &lt;silent&gt;true&lt;/silent&gt;\n                            &lt;artifactItems&gt;\n                                &lt;artifactItem&gt;\n                                    &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\n                                    &lt;artifactId&gt;jakarta.jakartaee-api&lt;/artifactId&gt;\n                                    &lt;version&gt;${jakartaee}&lt;/version&gt;\n                                    &lt;type&gt;jar&lt;/type&gt;\n                                &lt;/artifactItem&gt;\n                            &lt;/artifactItems&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>My nb-configuration is:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project-shared-configuration&gt;\n    &lt;!--\nThis file contains additional configuration written by modules in the NetBeans IDE.\nThe configuration is intended to be shared among all the users of project and\ntherefore it is assumed to be part of version control checkout.\nWithout this configuration present, some functionality in the IDE may be limited or fail altogether.\n--&gt;\n    &lt;properties xmlns=&quot;http://www.netbeans.org/ns/maven-properties-data/1&quot;&gt;\n        &lt;!--\nProperties that influence various parts of the IDE, especially code formatting and the like. \nYou can copy and paste the single properties, into the pom.xml file and the IDE will pick them up.\nThat way multiple projects can share the same settings (useful for formatting rules for example).\nAny value defined here will override the pom.xml file value but is only applicable to the current project.\n--&gt;\n        &lt;org-netbeans-modules-maven-j2ee.netbeans_2e_hint_2e_j2eeVersion&gt;10-web&lt;/org-netbeans-modules-maven-j2ee.netbeans_2e_hint_2e_j2eeVersion&gt;\n        &lt;org-netbeans-modules-maven-j2ee.netbeans_2e_hint_2e_deploy_2e_server&gt;gfv700ee10&lt;/org-netbeans-modules-maven-j2ee.netbeans_2e_hint_2e_deploy_2e_server&gt;\n        &lt;org-netbeans-modules-projectapi.jsf_2e_language&gt;Facelets&lt;/org-netbeans-modules-projectapi.jsf_2e_language&gt;\n    &lt;/properties&gt;\n&lt;/project-shared-configuration&gt;\n</code></pre>\n<p>I tried setting netbeans to use jdk17 instead of 20.</p>\n<p>I tried deleting the repository folder from C:\\Users\\Username\\.m2\\repository</p>\n"},{"comments":[{"comment_id":134521325,"body":"Show your error logs. It may be crash"},{"comment_id":134521368,"body":"Assign empty value for hall,  String hall=&quot;&quot;; or check not null when using hall. either way it will solve problem"}],"answers":[{"answer_id":76284998,"body":"<p>It's not clear exactly what you're doing or what triggers this code (is it a checkbox listener?) but you have a few unsafe operations:</p>\n<pre><code>int adult = Integer.parseInt(etAdult.getText().toString());\n</code></pre>\n<p><code>parseInt</code> <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#parseInt-java.lang.String-\" rel=\"nofollow noreferrer\">will throw a <code>NumberFormatException</code></a> if the contents of that <code>EditText</code> don't represent a valid integer, e.g. if it's empty or has text in it. So you need to catch that exception and handle it (e.g. treat the value as zero), and you need to do that for both of the text boxes you're parsing.</p>\n<hr />\n<pre><code>EditText etAdult = findViewById(R.id.etAdult);\n</code></pre>\n<p>All <code>findViewById</code> calls can return <em>null</em> if the view with that ID isn't found, so make sure all your views are in the layout. Calling <code>getText()</code> or <code>setText()</code> on a null variable will cause a <code>NullPointerException</code>. It's suspicious that your method takes a <code>View</code> parameter that you never use, are you supposed to be calling <code>findViewById</code> on that?</p>\n<p>Look in your error logs, if your app is restarting (which it sounds like, if the first Activity is appearing again) then it's probably a crash, and the error message will tell you exactly what's causing it and where to look.</p>\n"}],"last_activity_date":1684450835,"question_id":76283749,"body":"<p>I'm stuck with these checkbox calculate function. What I want to do is the checkbox that being checked will display at the total price along with the value of textview value of ticket for adult and child. But i did not find the solution to do it. The error is, when i click the checkbox, it will jump back to home screen. But when i calculate the hall and the ticket price only, it shows the total.</p>\n<p>Here is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class movie1 extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_movie1);\n    }\n\n    public void calculateTDEE(View view) {\n\n        String hall;\n\n        RadioButton rb1 = findViewById(R.id.rb1);\n        if (rb1.isSelected())\n            hall = &quot;2D&quot;;\n\n        else\n            hall = &quot;MX4D&quot;;\n\n        double sum =0;\n\n        CheckBox cb1 = (CheckBox) findViewById(R.id.cb1);\n        if(cb1.isChecked()){\n            sum = 14.50;\n        }\n        CheckBox cb2 = (CheckBox) findViewById(R.id.cb2);\n        if(cb2.isChecked()){\n            sum=18.50;\n        }\n        CheckBox cb3 = (CheckBox) findViewById(R.id.cb3);\n        if(cb3.isChecked()){\n            sum=14.50;\n        }\n\n            EditText etAdult = findViewById(R.id.etAdult);\n            int adult = Integer.parseInt(etAdult.getText().toString());\n\n            EditText etChild = findViewById(R.id.etChild);\n            int child = Integer.parseInt(etChild.getText().toString());\n\n            double BMR = 0.00;\n            if (hall.equals(&quot;2D&quot;))\n                BMR = (10.00 * child) + (21.50 * adult) + sum;\n            else\n                BMR = (18.00 * child) + (30.50 * adult ) + sum;\n\n            double TDEE = BMR;\n\n            TextView tvResult = findViewById(R.id.tvResult);\n            tvResult.setText(&quot;Your order already booked! Your Total Price is &quot; + (double) TDEE + &quot; Pay at Counter&quot;);\n        }\n</code></pre>\n"},{"answers":[{"comments":[{"comment_id":123835946,"body":"Can you give more context on &quot;Assuming security is configured correctly&quot;, is there something that needs to be configured specifically, or the configuration might be the same as for SecurityContextHolder? Any example, steps etc..?"},{"comment_id":123837839,"body":"I have updated my question with examples, please check. It seems that I&#39;m missing something in the configuration. That&#39;s why I said that there is no clear guide on full integration."},{"comment_id":123852794,"body":"It would help if you could show your configuration."},{"comment_id":123871320,"body":"Can you provide any guide/example where it&#39;s done properly? What steps are needed etc? I did not configure anything related to ReactiveSecurityContextHolder additionally.   I have configured SecurityContextHolder in OncePerRequestFilter    PreAuthenticatedAuthenticationToken ptk = new PreAuthenticatedAuthenticationToken(user, &quot;n/a&quot;,                             user.getRoles().getAuthorities());                     SecurityContextHolder.getContext().setAuthentication(ptk);"},{"comment_id":126063889,"body":"I tried, ReactiveSecurityContextHolder.getContext()             .map(SecurityContext::getAuthentication). returns null.  What else i need to configure?"},{"comment_id":126165633,"body":"@TariqN dpo you have the answer?"},{"comment_id":132139311,"body":"Which line makes subscruption here ?"}],"answer_id":70051265,"body":"<p>Assuming security is configured correctly. Spring security initialize <code>ReactiveSecurityContextHolder</code> during subscription so you can access it within this chain using <code>ReactiveSecurityContextHolder.getContext()</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping\nMono&lt;Void&gt; getItems() {\n    return ReactiveSecurityContextHolder.getContext()\n            .map(SecurityContext::getAuthentication)\n            .doOnNext(auth -&gt; log.info(String.valueOf(auth)))\n            .then();\n}\n</code></pre>\n<p>Sample output:</p>\n<blockquote>\n<p>UsernamePasswordAuthenticationToken\n[Principal=org.springframework.security.core.userdetails.User\n[Username=admin, Password=[PROTECTED], Enabled=true,\nAccountNonExpired=true, credentialsNonExpired=true,\nAccountNonLocked=true, Granted Authorities=[ROLE_ADMIN]],\nCredentials=[PROTECTED], Authenticated=true, Details=null, Granted\nAuthorities=[ROLE_ADMIN]]</p>\n</blockquote>\n"},{"answer_id":76284983,"body":"<p>Simply try</p>\n<pre><code>return ReactiveSecurityContextHolder.getContext().map(SecurityContext::getAuthentication)\n</code></pre>\n<p>and check the response. If no authentication is returned we need to see your full SecurityWebFilterChain setup</p>\n"}],"last_activity_date":1684450580,"question_id":70050719,"body":"<p>Usually while working with Spring Boot, a common way to get currently logged users is to use:</p>\n<pre><code>SecurityContextHolder.getContext();\n</code></pre>\n<p>This does not work when working with reactive programming, and Mono in Java since they do not belong to the same thread. It's recommended to use:</p>\n<pre><code>ReactiveSecurityContextHolder.getContext()\n</code></pre>\n<p>I've read many articles, StackOverflow questions, and answers, but never found a full explanation or example of how to fully integrate ReactiveSecurityContextHolder.</p>\n<p>Any help would be highly appreciated.</p>\n<p>This is what I have tried:</p>\n<pre><code>   @RequestMapping(value = &quot;/get-auth&quot;, method = RequestMethod.GET)\npublic @ResponseBody Mono&lt;Authentication&gt; test(Authentication authp) {\n    return ReactiveSecurityContextHolder.getContext().map(SecurityContext::getAuthentication).doOnNext(auth -&gt; {\n        log.info(&quot;print auth&quot;, String.valueOf(auth));\n    }).doOnSuccess(auth -&gt; {\n        log.error(&quot;print auth&quot;, auth);\n    });\n}\n</code></pre>\n<p>doOnSuccess - returns null<br />\ndoOnNext - not triggered</p>\n"},{"comments":[{"comment_id":44770391,"body":"This is related to entropy source: <a href=\"http://wiki.apache.org/tomcat/HowTo/FasterStartUp#Entropy_Source\" rel=\"nofollow noreferrer\">wiki.apache.org/tomcat/HowTo/FasterStartUp#Entropy_Source</a>"},{"comment_id":44771341,"body":"I&#39;m on mobile, so I don&#39;t have my links, but aet it to use /dev/urandom. There&#39;s no meaningful downside to using the non-blocking generator."}],"answers":[{"comments":[{"comment_id":68019035,"body":"I have a follow up question. <a href=\"http://stackoverflow.com/questions/40383430/tomcat-takes-too-much-time-to-start-java-securerandom\" title=\"tomcat takes too much time to start java securerandom\">stackoverflow.com/questions/40383430/&hellip;</a>. Is it ok to do so in production? Will this have any impact on security (like Session ID becoming predictable)?"},{"comment_id":76184142,"body":"It would be safer in a production environment to use the solution by @random_dude , I think."},{"comment_id":109575557,"body":"In my Ubuntu 18.04 with OpenJDK 11.0.7 this is in `$JAVA_HOME/conf/security/."}],"answer_id":28202322,"body":"<p>The secure random calls may be blocking as there is not enough entropy to feed them in /dev/random.</p>\n\n<p>If you have the line </p>\n\n<pre><code>securerandom.source=file:/dev/random\n</code></pre>\n\n<p>in /jre/lib/security/java.security, changing this to urandom may improve things (although this is probably already the default).</p>\n\n<p>Alternatively there are some suggestions on how to feed the pool here</p>\n\n<p><a href=\"https://security.stackexchange.com/questions/89/feeding-dev-random-entropy-pool\">https://security.stackexchange.com/questions/89/feeding-dev-random-entropy-pool</a></p>\n"},{"comments":[{"comment_id":60525894,"body":"add it works. you can see in:  <a href=\"https://wiki.apache.org/tomcat/HowTo/FasterStartUp\" rel=\"nofollow noreferrer\">wiki.apache.org/tomcat/HowTo/FasterStartUp</a>"}],"answer_id":36456691,"body":"<p>I changed /jre/lib/security/java.security, below:\nsecurerandom.source=file:/dev/./urandom</p>\n"},{"comments":[{"comment_id":68008998,"body":"You can just add <code>-Djava.security.egd=file:&#47;dev&#47;urandom</code> to the JAVA_OPTS or java VM options. For more information open <b>jre/lib/security/java.security</b> file, search for <code>securerandom.source</code> and you can find the doc there."},{"comment_id":68032951,"body":"Yeah that sounds more sensible"},{"comment_id":88698535,"body":"According to Tomcat website, add this Java property: -Djava.security.egd=file:/dev/./urandom"}],"answer_id":36610855,"body":"<p>Here are some specific instructions to adjust just tomcat as per Henry's answer</p>\n\n<p>create <code>/etc/tomcat/fastersecurerandom.properties</code></p>\n\n<pre><code>securerandom.source=file:/dev/urandom\n</code></pre>\n\n<p>edit <code>JAVA_OPTS</code> inside <code>/etc/tomcat/tomcat.conf</code></p>\n\n<pre><code>JAVA_OPTS=\"-Djava.security.properties=/etc/tomcat/fastersecurerandom.properties\"\n</code></pre>\n\n<p>FYI I found I could not set multiple <code>JAVA_OPTS</code> with <code>JAVA_OPTS=\"$JAVA_OPTS ...\"</code> despite the commented out examples. Poor old confused tomcat 7 wouldn't start as per a warning in <code>/var/log/messages</code></p>\n\n<p>On different versions/flavours you may find variations on where is best to set the environment variables for tomcat. The best way to debug if they are taking affect is is to check the command running like this:</p>\n\n<pre><code>$ ps aux | grep java\ntomcat    4821  4.7 13.9 2626888 263396 ?      Ssl  22:31   0:23 /usr/lib/jvm/jre/bin/java -DJENKINS_HOME=/opt/jenkins/ -Xmx512m -Djava.net.preferIPv4Stack=true -Djava.net.preferIPv4Addresses=true -Djava.security.properties=/etc/tomcat/fastersecurerandom.properties -classpath /usr/share/tomcat/bin/bootstrap.jar:/usr/share/tomcat/bin/tomcat-juli.jar:/usr/share/java/commons-daemon.jar -Dcatalina.base=/usr/share/tomcat -Dcatalina.home=/usr/share/tomcat -Djava.endorsed.dirs= -Djava.io.tmpdir=/var/cache/tomcat/temp -Djava.util.logging.config.file=/usr/share/tomcat/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager org.apache.catalina.startup.Bootstrap start\n</code></pre>\n"},{"comments":[{"comment_id":72018326,"body":"plusOne..this is the solution which actually doesn&#39;t compromise security, especially on a LIVE env."},{"comment_id":97934997,"body":"Excellent answer thanks.  I first ran into this problem on tomcat upgrading from tomcat 8.0.x to 8.5.x and migrating from AWS to google cloud at the same time.  After reading the article it looks like google cloud&#39;s CentOS 7 instances don&#39;t generate entropy as well as AWS&#39;s default CentOS image.  Writing my findings here in case anyone is googling these specific technology terms."}],"answer_id":40647727,"body":"<p>I faced same <a href=\"https://stackoverflow.com/questions/40383430/tomcat-takes-too-much-time-to-start-java-securerandom\">issue</a> of tomcat being too slow to start. I followed <a href=\"https://www.digitalocean.com/community/tutorials/how-to-setup-additional-entropy-for-cloud-servers-using-haveged\" rel=\"noreferrer\">this article on DigitalOcean</a> and installed haveged instead of using urandom. </p>\n\n<h2>haveged is a solution which will not compromise on security.</h2>\n\n<blockquote>\n  <p>haveged allows generating randomness based on variations in\n  code execution time on a processor. Since it's nearly impossible for\n  one piece of code to take the same exact time to execute, even in the\n  same environment on the same hardware, the timing of running a single\n  or multiple programs should be suitable to seed a random source. The\n  haveged implementation seeds your system's random source (usually\n  /dev/random) using differences in your processor's time stamp counter\n  (TSC) after executing a loop repeatedly</p>\n</blockquote>\n\n<h2>How to install haveged</h2>\n\n<p>Follow the steps in this article. <a href=\"https://www.digitalocean.com/community/tutorials/how-to-setup-additional-entropy-for-cloud-servers-using-haveged\" rel=\"noreferrer\">https://www.digitalocean.com/community/tutorials/how-to-setup-additional-entropy-for-cloud-servers-using-haveged</a></p>\n\n<p>I have posted it <a href=\"https://stackoverflow.com/a/40603084/6785908\">here</a></p>\n"},{"answer_id":54172682,"body":"<p>@KCD s answer above almost worked for me, I needed to massage it a bit - as follows:</p>\n<ol>\n<li><p>my tomcat was <code>tomcat7</code> , so I created my <code>fastersecurerandom.properties</code> file in the <code>/etc/tomcat7</code> directory,</p>\n</li>\n<li><p>As per <a href=\"https://wiki.apache.org/tomcat/HowTo/FasterStartUp#Entropy_Source\" rel=\"nofollow noreferrer\">another page</a>, I had to change the contents of <code>fastersecurerandom.properties</code>\nfrom\n<code>securerandom.source=file:/dev/urandom</code><br />\nto<br />\n<code>securerandom.source=file:/dev/./urandom</code></p>\n</li>\n<li><p>I didn't have a <code>tomcat.conf</code> file, so I added to my <code>/etc/init.d/tomcat7</code> (tomcat's startup script - I know) , just before the line - <code>catalina_sh() {</code><br />\n<code>JAVA_OPTS=&quot;$JAVA_OPTS -Djava.security.properties=/etc/tomcat7/fastersecurerandom.properties&quot;</code></p>\n</li>\n</ol>\n<p>Note: I added <code>7</code> to <code>tomcat</code> here too.</p>\n<p>It was worthwhile doing a <code>ps -deaf | grep tomcat</code> to first confirm that the new <code>-D</code> setting was getting through to the command, and also to check that it was referring to the correct file, and that the file was there.  This is when I noticed the missing <code>7</code>.</p>\n<p>I was on Java 1.7, and on Ubuntu 14.04.1.</p>\n"},{"answer_id":57499558,"body":"<p>Instead of changing the file <code>java.security</code> directly, at least with Java 8 it documents to support the following system property already:</p>\n\n<pre><code>-Djava.security.egd=file:/dev/random\n</code></pre>\n\n<p>In the context of Tomcat, that can be used to create a file <code>bin/setenv.sh</code> containing the following line:</p>\n\n<pre><code>CATALINA_OPTS=-Djava.security.egd=file:///dev/urandom\n</code></pre>\n"},{"comments":[{"comment_id":123372388,"body":"What does this do? How does this solve the problem?"}],"answer_id":68780368,"body":"<p><strong>configuration spring boot</strong></p>\n<pre><code>@Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n            .cors().and().csrf().disable()\n\n            .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS) //using JWT\n                .and()\n            .authorizeRequests()\n                .antMatchers(PUBLIC_ENDPOINTS).permitAll()\n                .anyRequest().authenticated()\n                .and()\n            .addFilterBefore(authFilter(), UsernamePasswordAuthenticationFilter.class);\n}\n</code></pre>\n<blockquote>\n<p><strong>.cors().and().csrf().disable()</strong></p>\n</blockquote>\n"},{"answer_id":69796215,"body":"<h1>Background info</h1>\n<p>This is not an answer in itself. But it's some background info, in case you're wondering where this log line comes from.</p>\n<p>This log line gets triggered when generation takes longer than a tenth of a second (100 miliseconds)</p>\n<p>This line used to be level INFO in 2014...</p>\n<ul>\n<li><a href=\"https://github.com/apache/tomcat/blame/fdd86cf2e0b851aced2f460c765fea5293a30940/java/org/apache/catalina/util/SessionIdGeneratorBase.java#L273\" rel=\"nofollow noreferrer\">https://github.com/apache/tomcat/blame/fdd86cf2e0b851aced2f460c765fea5293a30940/java/org/apache/catalina/util/SessionIdGeneratorBase.java#L273</a></li>\n</ul>\n<p>... but got changed to level WARN in 2017...</p>\n<ul>\n<li><a href=\"https://github.com/apache/tomcat/commit/d0fc016424c2110fdf40fd02fb90b23a6bba150c\" rel=\"nofollow noreferrer\">https://github.com/apache/tomcat/commit/d0fc016424c2110fdf40fd02fb90b23a6bba150c</a></li>\n</ul>\n<p>...to make it stand out more in the logs. The motivation for that change was this bug report here:</p>\n<ul>\n<li><a href=\"https://bz.apache.org/bugzilla/show_bug.cgi?id=61180\" rel=\"nofollow noreferrer\">Bug 61180 - Change log level of sessionIdGeneratorBase.createRandom to warn rather than info</a></li>\n</ul>\n<h1>Source</h1>\n<p>The message is triggered here:\n<a href=\"https://github.com/apache/tomcat/blob/main/java/org/apache/catalina/util/SessionIdGeneratorBase.java#L272\" rel=\"nofollow noreferrer\">https://github.com/apache/tomcat/blob/main/java/org/apache/catalina/util/SessionIdGeneratorBase.java#L272</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>long t2 = System.currentTimeMillis();\nif ((t2 - t1) &gt; 100) {\nlog.warn(sm.getString(&quot;sessionIdGeneratorBase.createRandom&quot;,\n        result.getAlgorithm(), Long.valueOf(t2 - t1)));\n}\n</code></pre>\n<p>And the human readable English text comes from here:\n<a href=\"https://github.com/apache/tomcat/blob/main/java/org/apache/catalina/util/LocalStrings.properties#L46\" rel=\"nofollow noreferrer\">https://github.com/apache/tomcat/blob/main/java/org/apache/catalina/util/LocalStrings.properties#L46</a></p>\n<pre><code>sessionIdGeneratorBase.createRandom=Creation of SecureRandom instance for session ID generation using [{0}] took [{1}] milliseconds.\n</code></pre>\n"},{"answer_id":75281281,"body":"<p>if in case you are using spring security add web security class.</p>\n<pre><code>@EnableWebSecurity\npublic class WebSecurity extends WebSecurityConfigurerAdapter {\n    \n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        // ...\n        http.cors();\n     //other configure params.\n        http.csrf().disable();\n    }\n\n    @Bean\n    CorsConfigurationSource corsConfigurationSource() {\n        final UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n\n        CorsConfiguration corsConfiguration = new CorsConfiguration().applyPermitDefaultValues();\n        corsConfiguration.addAllowedHeader(&quot;*&quot;);\n        corsConfiguration.addAllowedMethod(&quot;*&quot;);\n        corsConfiguration.addAllowedOrigin(&quot;*&quot;);\n        corsConfiguration.setAllowCredentials(true);\n        source.registerCorsConfiguration(&quot;/**&quot;, corsConfiguration);\n\n        return source;\n    }\n}\n</code></pre>\n"},{"answer_id":76284979,"body":"<p>In spring boot, u can use this code block:</p>\n<pre><code>   @Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http.csrf().csrfTokenRepository(new CookieCsrfTokenRepository())\n            .requireCsrfProtectionMatcher(httpServletRequest -&gt; httpServletRequest.getMethod().equals(&quot;none&quot;));\n    return http.build();\n}\n</code></pre>\n<p>its ok for me!!</p>\n"}],"last_activity_date":1684450506,"question_id":28201794,"body":"<p>I'm using Tomcat 7.0.57 on CentOS 6.6 32 bit and openJDK7.\nWhen I start 14 different instances of Tomcat on my server(production environment), many of them take too much time to start.</p>\n\n<p>This is part of the startup log, which tells me where is taking all the time</p>\n\n<pre><code>Jan 28, 2015 2:49:41 PM org.apache.catalina.util.SessionIdGenerator createSecureRandom\nINFO: Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [199,620] milliseconds.\n</code></pre>\n\n<p>What's the best practice/solution for this problem?</p>\n\n<p>Thanks!</p>\n"},{"comments":[{"comment_id":101086758,"body":"I updated my answer."}],"answers":[{"comments":[{"comment_id":101060862,"body":"I want to use annotation like <code>@Value</code> in spring-boot"},{"comment_id":101065525,"body":"You see your question? You said without Spring. In Spring Boot, it is even easier. Let me edit my answer."},{"comment_id":107006785,"body":"Is it possible without 3rd-party libraries?"},{"comment_id":107017262,"body":"I am afraid I am not aware."},{"comment_id":120691055,"body":"@Faraz, I used the above code to read yml file that has : server: box1: host = &quot;abcde&quot;. The system print statement has got key:server value:{box1{host=&quot;abcde&quot;}}. Will this convert into server.box1.host?"}],"answer_id":57246657,"body":"<p>You can use SnakeYAML without Spring.</p>\n<p>Download the dependency:</p>\n<pre><code>compile group: 'org.yaml', name: 'snakeyaml', version: '1.24'\n</code></pre>\n<p>Then you can load the .yaml (or .yml) file this way:</p>\n<pre><code>Yaml yaml = new Yaml();\nInputStream inputStream = this.getClass().getClassLoader()\n                           .getResourceAsStream(&quot;youryamlfile.yaml&quot;); //This assumes that youryamlfile.yaml is on the classpath\nMap&lt;String, Object&gt; obj = yaml.load(inputStream);\nobj.forEach((key,value) -&gt; { System.out.println(&quot;key: &quot; + key + &quot; value: &quot; + value ); });\n</code></pre>\n<p><a href=\"https://www.baeldung.com/java-snake-yaml\" rel=\"nofollow noreferrer\">Reference.</a></p>\n<p><strong>Edit:</strong> Upon further investigation, OP wants to know how to load properties in Spring boot. Spring boot has a built-in feature to read properties.</p>\n<p>Let's say you have a application.properties sitting in src/main/resources, and in it there is an entry say <code>application.name=&quot;My Spring Boot Application&quot;</code>, then in one of your classes annotated with <code>@Component</code> or any of its sub-stereotype annotations, one can fetch values like this:</p>\n<pre><code>@Value(&quot;${application.name}&quot;)\nprivate String applicationName;\n</code></pre>\n<p>The property in application.property file is now bound to this variable <code>applicationName</code></p>\n<p>You could also have a application.yml file and have the same property written this way</p>\n<pre><code>application:\n  name: &quot;My Spring Boot Application&quot;\n</code></pre>\n<p>You will get this property value the same way like last time by annotation a filed with <code>@Value</code> annotation.</p>\n"},{"answer_id":74701892,"body":"<p>flat properties from yaml</p>\n<pre><code>import static java.lang.String.format;\nimport static java.lang.System.getenv;\nimport static java.nio.charset.Charset.defaultCharset;\nimport static java.util.Collections.singletonMap;\nimport static org.apache.commons.io.IOUtils.resourceToString;\nimport static org.apache.commons.lang3.StringUtils.isBlank;\n\nimport java.io.IOException;\nimport java.util.Collection;\nimport java.util.LinkedHashMap;\nimport java.util.Map;\nimport java.util.Properties;\nimport org.yaml.snakeyaml.Yaml;\n\npublic class PropertiesUtils {\n\n    public static Properties loadProperties() {\n        return loadProperties(getenv(&quot;ENV&quot;));\n    }\n\n    public static Properties loadProperties(String profile) {\n        try {\n            Yaml yaml = new Yaml();\n            Properties properties = new Properties();\n            properties.putAll(getFlattenedMap(yaml.load(resourceToString(&quot;/application-config.yml&quot;, defaultCharset()))));\n            if (profile != null)\n                properties.putAll(getFlattenedMap(yaml.load(resourceToString(format(&quot;/application-config-%s.yml&quot;, profile), defaultCharset()))));\n            return properties;\n        } catch (IOException e) {\n            throw new Error(&quot;Cannot load properties&quot;, e);\n        }\n    }\n\n    private static final Map&lt;String, Object&gt; getFlattenedMap(Map&lt;String, Object&gt; source) {\n        Map&lt;String, Object&gt; result = new LinkedHashMap&lt;&gt;();\n        buildFlattenedMap(result, source, null);\n        return result;\n    }\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    private static void buildFlattenedMap(Map&lt;String, Object&gt; result, Map&lt;String, Object&gt; source, String path) {\n        source.forEach((key, value) -&gt; {\n            if (!isBlank(path))\n                key = path + (key.startsWith(&quot;[&quot;) ? key : '.' + key);\n            if (value instanceof String) {\n                result.put(key, value);\n            } else if (value instanceof Map) {\n                buildFlattenedMap(result, (Map&lt;String, Object&gt;) value, key);\n            } else if (value instanceof Collection) {\n                int count = 0;\n                for (Object object : (Collection&lt;?&gt;) value)\n                    buildFlattenedMap(result, singletonMap(&quot;[&quot; + (count++) + &quot;]&quot;, object), key);\n            } else {\n                result.put(key, value != null ? &quot;&quot; + value : &quot;&quot;);\n            }\n        });\n    }\n}\n</code></pre>\n"},{"answer_id":76150381,"body":"<p>I understand your question is about accessing the content with .yaml and .properties file <em><strong>without</strong></em> using the Spring framework, <em><strong>however</strong></em> if you do have access to the Spring Framework in your classpath and don't mind using some internal classes, the following code can read the content in a very succinct fashion</p>\n<p>For Properties file:</p>\n<pre><code>    File file = ResourceUtils.getFile(&quot;classpath:application.properties&quot;);\n    PropertiesFactoryBean propertiesFactoryBean = new PropertiesFactoryBean();\n    propertiesFactoryBean.setLocation(new PathResource(file.toPath()));\n    propertiesFactoryBean.afterPropertiesSet();\n\n    // you now have properties corresponding to contents in the application.properties file in a java.util.Properties object\n    Properties applicationProperties = propertiesFactoryBean.getObject();   \n    // now get access to whatever property exists in your file, for example\n    String applicationName = applicationProperties.getProperty(&quot;spring.application.name&quot;); \n\n</code></pre>\n<p>For a Yaml resource</p>\n<pre><code>    File file = ResourceUtils.getFile(&quot;classpath:application.yaml&quot;);\n    YamlPropertiesFactoryBean factory = new YamlPropertiesFactoryBean();\n    factory.setResources(new PathResource(file.toPath()));\n    factory.afterPropertiesSet();\n\n    // you now have properties corresponding to contents in the application.yaml file in a java.util.Properties object\n    Properties applicationProperties = factory.getObject();\n    // now get access to whatever property exists in your file, for example\n    String applicationName = applicationProperties.getProperty(&quot;spring.application.name&quot;); \n</code></pre>\n"}],"last_activity_date":1684450290,"question_id":57246626,"body":"<p>I have a project but not in spring, how can I use annotation to read content in config files like <code>*.yaml or *.properties</code> under resource package.</p>\n"},{"answers":[{"answer_id":76284932,"body":"<p>Since <code>Propagator.Getter</code> is context-dependent, you need to define it on your own, e.g.:</p>\n<pre class=\"lang-java prettyprint-override\"><code>propagator.extract(request, (record, key) -&gt; record.getHeader(key));\n</code></pre>\n<p>Also, a few things were redesigned, please look into the <code>io.micrometer.observation.transport</code> package where you also find the <code>Propagator</code> interface, it has <code>RequestReplyReceiverContext</code> and  <code>ReceiverContext</code> that might be useful to you (and how they are used).</p>\n"}],"last_activity_date":1684449727,"question_id":76114151,"body":"<p>I am trying to upgrade my application to Java 17 , my application is a gradle project and I am using micrometer propagator in place of Spring sleuth propagator for some specific reason.Below is the code i am using ,</p>\n<pre><code>import io.micrometer.tracing.Span;\nimport io.micrometer.tracing.SPanAndScope;\nimport io.micrometer.tracing.Tracer;\n........\n\n\n@Component\npublic class UtilSpanner implements BiFunction&lt;AtomicReference&lt;SpanAndScope&gt;, RecieverRecord&lt;String, ScheduleKafka&gt;,RecieverRecord&lt;String,ScheduleKafka&gt;&gt; {\n\nprivate final Tracer tracer;\nprivate final Propagator.Getter&lt;ConsumerRecord&lt;?,?&gt;&gt; extractor; \nprivate final Propagator propagator;\n\npublic UtilSpanner(Tracer tracer, Propagator.Getter&lt;ConsumerRecord&lt;?,?&gt;&gt; extractor //here is the problem i am getting \n, Propagator propagator){\n this.tracer = tracer;\n this.extractor = extractor;\n this.propagator = propagator;\n}\n</code></pre>\n<p>I am getting problem in the paramater 1 of the constructor where it is not able to identify the Propagator.Getter.</p>\n<p>Below is the gradle dependency i am using regarding micrometer</p>\n<pre><code>   plugins{\n     id 'org.springframework.boot' version '3.0.5'\n     id 'io.spring.dependency-management' version '1.1.0'\n     ......\n}\n\nimplementation 'io.micrometer:micrometer-core:1.10.6'\nimplementation 'io.micrometer:micrometer-registry-promethus:1.10.6'\nimplementation 'org.springframework.cloud:spring-cloud-starter-cuircuitbreaker-reactor-resiliance4j:3.0.1'\nimplementation 'io.micrometer:micrometer-tracing:latest.integration'\nimplementation 'io.micrometer:micrometer-observation'\nimplementation 'io.micrometer:micrometer-tracing-bridge-brave'\n</code></pre>\n<p>Please let me know how to solve this issue</p>\n"},{"answers":[{"comments":[{"comment_id":134523670,"body":"This might be related to RH8&#39;s new system-wide crypto policy, especially if the FIPS option is used, since OpenJDK providers are not FIPS and thus Java must instead use via PKCS11 a validated library (maybe NSS?)"},{"comment_id":134536677,"body":"@dave_thompson_085 That sounds promising. Do you know if this can be disabled?"},{"comment_id":134537722,"body":"<a href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/security_hardening/using-the-system-wide-cryptographic-policies_security-hardening\" rel=\"nofollow noreferrer\">access.redhat.com/documentation/en-us/red_hat_enterprise_lin&zwnj;&#8203;ux/&hellip;</a> says <code>fips-mode-setup</code> &quot;enables or disables FIPS mode&quot; but they give an example only of enabling. Try the man page; I don&#39;t have an actual system to test."},{"comment_id":134564734,"body":"This fixed the problem, thanks. You can disable FIPS with <code>fips-mode-setup --disable</code>. If you post that as an answer, I&#39;ll accept it."}],"answer_id":76284922,"body":"<p>Still not sure what is causing this, but it seems isolated to the builds of Java in the RHEL 8 repositories. Using other openjdk builds works as expected.</p>\n"}],"last_activity_date":1684449655,"question_id":76283941,"body":"<p>I am attempting to sign a JWT token and am receiving the following error</p>\n<pre><code>io.jsonwebtoken.security.InvalidKeyException: JWT standard signing algorithms require either 1) a SecretKey for HMAC-SHA algorithms or 2) a private RSAKey for RSA algorithms or 3) a private ECKey for Elliptic Curve algorithms.  The specified key is of type sun.security.pkcs11.P11Key$P11PrivateKey\n</code></pre>\n<p>The code where this error occurs</p>\n<pre><code>    public static String createJwtToken(Key privKey, String iss, String[] roles) {\n        long nowMs = System.currentTimeMillis();\n        long ttl = 60*60*1000; // 1 hour\n        Date now = new Date(nowMs);\n        Date exp = new Date(nowMs+ttl);\n        return &quot;Bearer &quot; + Jwts.builder()\n                .setHeaderParam(&quot;typ&quot;, &quot;JWT&quot;)\n                .claim(&quot;roles&quot;, roles)\n                .setIssuer(iss).setAudience(&quot;DRF&quot;)\n                .setIssuedAt(now)\n                .setExpiration(exp)\n                .signWith(privKey)\n                .compact();\n    }\n</code></pre>\n<p>My private key is an ECDSA key. The bytes are read from a file and then used to create a PrivateKey object with this code</p>\n<pre><code>     KeyFactory kf = KeyFactory.getInstance(&quot;EC&quot;);\n     EncodedKeySpec keySpec = new PKCS8EncodedKeySpec(keyBytes);\n     PrivateKey privateKey = kf.generatePrivate(keySpec);\n</code></pre>\n<p>There was no issue on RHEL 7 using Java 8. I have upgraded to RHEL 8 (with no other changes) and now see the problem. I've tried using Java 11 as well with no change. I'm using openjdk.</p>\n"},{"comments":[{"comment_id":134518009,"body":"are you sure this is the full stack trace? Please add everything you see in your logs here, not just what you think it relevant."},{"comment_id":134523335,"body":"The error is suggesting you&#39;re missing guava jar in your Spark libraries... How did you install Spark? Which version?"},{"comment_id":134532337,"body":"you have an older version of guava than whatever the hadoop-aws module was built with. Switch to hadoop 3.3.5 binaries which has its private copy of guava and reimplemented that precondition check internally as it was so brittle"}],"last_activity_date":1684449371,"question_id":76281744,"body":"<p>I am getting the following error when I am trying to write spark 3 dataframe to AWS s3.\nBut with some minor change when I am trying to write it with spark 2 dataframe to s3 I am able to do it.</p>\n<p>SPARK 3 code:</p>\n<pre><code>    spark.conf.set(&quot;spark.hadoop.fs.s3.impl&quot;, &quot;org.apache.hadoop.fs.s3a.S3AFileSystem&quot;)\n    spark.conf.set(&quot;spark.hadoop.fs.AbstractFileSystem.s3a.impl&quot;, &quot;org.apache.hadoop.fs.s3a.S3A&quot;)\n    spark.conf.set(&quot;spark.hadoop.fs.s3a.access.key&quot;, access_key)\n    spark.conf.set(&quot;spark.hadoop.fs.s3a.secret.key&quot;, secret_key)\n    spark.conf.set(&quot;spark.hadoop.fs.s3a.endpoint&quot;, &quot;s3.amazonaws.com&quot;)\n\n    df.coalesce(1).write.mode(&quot;overwrite&quot;).parquet(path)\n</code></pre>\n<p>Error:</p>\n<pre><code>py4j.protocol.Py4JJavaError: An error occurred while calling o88.parquet.\n: java.lang.NoSuchMethodError: com.google.common.base.Preconditions.checkArgument(ZLjava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)V\n    at org.apache.hadoop.fs.s3a.S3AUtils.lookupPassword(S3AUtils.java:816)\n    at org.apache.hadoop.fs.s3a.S3AUtils.lookupPassword(S3AUtils.java:792)\n    at org.apache.hadoop.fs.s3a.S3AUtils.getAWSAccessKeys(S3AUtils.java:747)\n    at org.apache.hadoop.fs.s3a.SimpleAWSCredentialsProvider.&lt;init&gt;(SimpleAWSCredentialsProvider.java:58)\n    at org.apache.hadoop.fs.s3a.S3AUtils.createAWSCredentialProviderSet(S3AUtils.java:600)\n    at org.apache.hadoop.fs.s3a.S3AFileSystem.initialize(S3AFileSystem.java:257)\n    at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:3303)\n    at org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:124)\n    at org.apache.hadoop.fs.FileSystem$Cache.getInternal(FileSystem.java:3352)\n    at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:3320)\n    at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:479)\n    at org.apache.hadoop.fs.Path.getFileSystem(Path.java:361)\n    at org.apache.spark.sql.execution.datasources.DataSource.planForWritingFileFormat(DataSource.scala:461)\n    at org.apache.spark.sql.execution.datasources.DataSource.planForWriting(DataSource.scala:556)\n    at org.apache.spark.sql.DataFrameWriter.saveToV1Source(DataFrameWriter.scala:382)\n    at org.apache.spark.sql.DataFrameWriter.saveInternal(DataFrameWriter.scala:355)\n    at org.apache.spark.sql.DataFrameWriter.save(DataFrameWriter.scala:239)\n    at org.apache.spark.sql.DataFrameWriter.parquet(DataFrameWriter.scala:781)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at py4j.reflection.MethodInvoker.invoke(MethodInvoker.java:244)\n    at py4j.reflection.ReflectionEngine.invoke(ReflectionEngine.java:357)\n    at py4j.Gateway.invoke(Gateway.java:282)\n    at py4j.commands.AbstractCommand.invokeMethod(AbstractCommand.java:132)\n    at py4j.commands.CallCommand.execute(CallCommand.java:79)\n    at py4j.ClientServerConnection.waitForCommands(ClientServerConnection.java:182)\n    at py4j.ClientServerConnection.run(ClientServerConnection.java:106)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n"},{"comments":[{"comment_id":23244649,"body":"See if this <a href=\"http://stackoverflow.com/questions/1074081/hibernate-error-org-hibernate-nonuniqueobjectexception-a-different-object-with\"><b>answer</b></a> helps you.."}],"answers":[{"comments":[{"comment_id":23305206,"body":"Thanks jbx. As you said, it turns out that the B objects are referring to multiple C instances in memory. Essentially what is happening is that one part of my program is reading in C, and attaching it to B. Another part is loading a different B with the same C from the database. Both are being attached to A which triggers the error on save.  I&#39;ve set the &lt;pre&gt;cascade&lt;/pre&gt; for the B-&gt;C relationship to &quot;&lt;pre&gt;none&lt;/pre&gt;,&quot; but I&#39;m still getting the same error. In many-to-one or one-to-many relationships, is there a way to tell Hibernate only to change the foreign key and not worry about the rest?"},{"comment_id":23346675,"body":"Does C&#39;s primary key have any ID generation strategy? Like a sequence-generator or something similar?"},{"comment_id":23660719,"body":"Yes, each has its own sequence in the database.  As you mentioned, cascading turned out to be the issue. We turned off cascadeing for the type tables, and for the others we used &quot;merge&quot; cascade, which allowed us to call merge() without creating all those null rows. I&#39;ve marked your answer accordingly, thanks!"},{"comment_id":29411888,"body":"I have used merge() instead of saveOrUpdate() and BOOM! it works :)"},{"comment_id":118465601,"body":"@AmirhoseinAl what does this have to do with the answer? ask a new question about your problem and describe it well"}],"answer_id":16246858,"body":"<p>Most probably its because the B objects are not referring to the same Java C object instance. They are referring to the same row in the database (i.e. the same primary key) but they're different copies of it. </p>\n\n<p>So what is happening is that the Hibernate session, which is managing the entities would be keeping track of which Java object corresponds to the row with the same primary key.</p>\n\n<p>One option would be to make sure that the Entities of objects B that refer to the same row are actually referring to the same object instance of C. Alternatively turn off cascading for that member variable. This way when B is persisted C is not. You will have to save C manually separately though. If C is a type/category table, then it probably makes sense to be that way.</p>\n"},{"comments":[{"comment_id":29612691,"body":"If he was not he wouldn&#39;t have this problem. The problem is he has two objects with the same identifier."}],"answer_id":19903478,"body":"<p>you might not be setting the identifier of the object before calling update query.</p>\n"},{"answer_id":24282492,"body":"<p>Just came across this message but in c# code. Not sure if it's relevant (exactly the same error message though).</p>\n\n<p>I was debugging the code with breakpoints and expanded some collections through private members while debugger was at a breakpoint. Having re-run the code without digging through structures made the error message go away. It seems like the act of looking into private lazy-loaded collections has made NHibernate load things that were not supposed to be loaded at that time (because they were in private members).</p>\n\n<p>The code itself is wrapped in a fairly complicated transaction that can update large number of records and many dependencies as part of that transaction (import process).</p>\n\n<p>Hopefully a clue to anyone else who comes across the issue.</p>\n"},{"answer_id":24940189,"body":"<p>Transfer the task of assigning the object ID from Hibernate to the database by using:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>&lt;generator class=\"native\"/&gt;\n</code></pre>\n\n<p>This solved the problem for me.</p>\n"},{"comments":[{"comment_id":115688534,"body":"How do I get a hold of the <code>session_object</code> that has the <code>clear()</code> method?"},{"comment_id":124381050,"body":"<code>session.clear()</code> also removes all other (non-offending) objects from the session. So this is not a good option."}],"answer_id":25907179,"body":"<p>You only need to do one thing. Run <code>session_object.clear()</code> and then save the new object. This will clear the session (as aptly named) and remove the offending duplicate object from your session.</p>\n"},{"answer_id":26229217,"body":"<p>One way to solve the above problem will be to override the <code>hashcode()</code>.<br>\nAlso flush the hibernate session before and after save.  </p>\n\n<pre><code>getHibernateTemplate().flush();\n</code></pre>\n\n<p>Explicitly setting the detached object to <code>null</code> also helps.</p>\n"},{"comments":[{"comment_id":98971182,"body":"Thanks! This was exactly my problem"}],"answer_id":29277906,"body":"<p>Add the annotation\n@GeneratedValue\nto the bean you are inserting.</p>\n"},{"answer_id":31092266,"body":"<p>I had this error few days a go and I sped too many time on fixing this error. </p>\n\n<pre><code> public boolean save(OrderHeader header) {\n    Session session = sessionFactory.openSession();\n\n\n    Transaction transaction = session.beginTransaction();\n\n    try {\n        session.save(header);\n\n        for (OrderDetail detail : header.getDetails()) {\n            session.save(detail);\n        }\n\n        transaction.commit();\n        session.close();\n\n        return true;\n    } catch (HibernateException exception) {\n\n        exception.printStackTrace();\n        transaction.rollback();\n        return false;\n    }\n}\n</code></pre>\n\n<p>Before i get this error , I didn't have mentioned ID generation type on the OrderDetil Object. when without generating Orderdetails' id it keeps Id as 0 for every OrderDetail objects.  this what #jbx explained. Yes it is the best answer. this one example how it happens.  </p>\n"},{"answer_id":31898721,"body":"<p>Just set cascade to MERGE, that should do the trick.</p>\n"},{"comments":[{"comment_id":126183772,"body":"After adding the @GeneratedValue annotation, you may need to increase the connection pool size. Also, GenerationType.IDENTITY worked for me, otherwise, it was throwing &quot;hibernate_sequence does not exist&quot;"},{"comment_id":128240335,"body":"Should I set any of these strategies if using an <code>@EmbeddedId</code>?"}],"answer_id":41846442,"body":"<p>I agree with @Hemant Kumar, thank you very much. According his solution, I solved my problem.</p>\n\n<p>For example：</p>\n\n<pre><code>@Test\npublic void testSavePerson() {\n    try (Session session = sessionFactory.openSession()) {\n        Transaction tx = session.beginTransaction();\n        Person person1 = new Person();\n        Person person2 = new Person();\n        person1.setName(\"222\");\n        person2.setName(\"111\");\n        session.save(person1);\n        session.save(person2);\n        tx.commit();\n    }\n}\n</code></pre>\n\n<p>Person.java</p>\n\n<pre><code>public class Person {\n    private int id;\n    private String name;\n\n    @Id\n    @Column(name = \"id\")\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    @Basic\n    @Column(name = \"name\")\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n}\n</code></pre>\n\n<p>This code always make mistake in my application:\n<code>A different object with the same identifier value was already associated with the session</code>, later I found out that I forgot\nto <strong>autoincrease my primary key!</strong> </p>\n\n<p>My solution is to add this code on your primary key:</p>\n\n<pre><code>@GeneratedValue(strategy = GenerationType.AUTO)\n</code></pre>\n"},{"answer_id":42153978,"body":"<p>Try to place the code of your query before.\nThat fix my problem.\ne.g. change this:</p>\n\n<pre><code>query1 \nquery2 - get the error \nupdate\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>query2\nquery1\nupdate\n</code></pre>\n"},{"answer_id":43394132,"body":"<p>Find the \"Cascade\" atribute in Hibernate and delete it. When you set \"Cascade\" available, it will call other operations (save, update and delete) on another entities which has relationship with related classes. So same identities value will be  happened. \nIt worked with me.</p>\n"},{"answer_id":47807138,"body":"<p>I met the problem because of the primary key generation is wrong,when I insert a row like this:</p>\n\n<pre><code>public void addTerminal(String typeOfDevice,Map&lt;Byte,Integer&gt; map) {\n        // TODO Auto-generated method stub\n        try {\n            Set&lt;Byte&gt; keySet = map.keySet();\n            for (Byte byte1 : keySet) {\n                Device device=new Device();\n                device.setNumDevice(DeviceCount.map.get(byte1));\n                device.setTimestamp(System.currentTimeMillis());\n                device.setTypeDevice(byte1);\n                this.getHibernateTemplate().save(device);\n            }\n            System.out.println(\"hah\");\n        }catch (Exception e) {\n            // TODO: handle exception\n            logger.warn(\"wrong\");\n            logger.warn(e.getStackTrace()+e.getMessage());\n        }\n}\n</code></pre>\n\n<p>I change the id generator class to identity</p>\n\n<pre><code>&lt;id name=\"id\" type=\"int\"&gt;\n    &lt;column name=\"id\" /&gt;\n    &lt;generator class=\"identity\"  /&gt;\n &lt;/id&gt;\n</code></pre>\n"},{"answer_id":49363634,"body":"<p>In my case only flush() did not work. I had to use a clear() after flush().</p>\n\n<pre><code>public Object merge(final Object detachedInstance)\n    {\n        this.getHibernateTemplate().flush();\n        this.getHibernateTemplate().clear();\n        try\n        {\n            this.getHibernateTemplate().evict(detachedInstance);\n        }\n}\n</code></pre>\n"},{"comments":[{"comment_id":97167804,"body":"not the case with question as per description given"}],"answer_id":49444349,"body":"<p>This means you are trying to save multiple rows in your table with the reference to the same object.</p>\n\n<p>check your Entity Class' id property.</p>\n\n<pre><code>@Id\nprivate Integer id;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>@Id\n@GeneratedValue(strategy = GenerationType.IDENTITY)\n@Column(unique = true, nullable = false)\nprivate Integer id;\n</code></pre>\n"},{"answer_id":53394945,"body":"<p>if you use EntityRepository then use saveAndFlush instead of save</p>\n"},{"answer_id":55910186,"body":"<p>If left an expressions tab in my IDE open which was making a hibernate get call on the object causing this exception. I was trying to delete this same object. Also I had a breakpoint on the delete call which seems to be necessary to get this error to happen. Simply making another expressions tab to be the front tab or changing the setting so that the ide does not stop on breakpoints solved this problem.</p>\n"},{"answer_id":58930164,"body":"<p>Make Sure, your entity have same Generation Type with all Mapped Entitys</p>\n\n<p>Ex : UserRole </p>\n\n<pre><code>public class UserRole extends AbstractDomain {\n\n@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\nprivate Long id;\n\nprivate String longName;\n\nprivate String shortName;\n\n@Enumerated(EnumType.STRING)\nprivate CommonStatus status;\n\nprivate String roleCode;\n\nprivate Long level;\n\n@Column(columnDefinition = \"integer default 0\")\nprivate Integer subRoleCount;\n\nprivate String modification;\n\n@ManyToOne(fetch = FetchType.LAZY)\nprivate TypeOfUsers licenseType;\n</code></pre>\n\n<p>}</p>\n\n<p>Module : </p>\n\n<pre><code>public class Modules implements Serializable {\n\n@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\nprivate Long id;\n\nprivate String longName;\n\nprivate String shortName;\n</code></pre>\n\n<p>}</p>\n\n<p>Main Entity with Mapping</p>\n\n<pre><code>public class RoleModules implements Serializable{\n\n@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\nprivate Long id;\n\n@ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.MERGE)\nprivate UserRole role;\n\n@ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.MERGE)\nprivate Modules modules;\n\n@Type(type = \"yes_no\")\nprivate boolean isPrimaryModule;\n\npublic boolean getIsPrimaryModule() {\n    return isPrimaryModule;\n}\n</code></pre>\n\n<p>}</p>\n"},{"answer_id":59809268,"body":"<p>In addition to all the previous answers, a possible fix to this problem in a large scale project, if your using a Value Object for your classes don't set the id attribute in the VO Transformer class.</p>\n"},{"comments":[{"comment_id":120308310,"body":"DONT use this approach. a commit should be done after you finished your whole work, since the transaction handling is very expensive."}],"answer_id":60389154,"body":"<p>just commit current transaction. </p>\n\n<pre><code>currentSession.getTransaction().commit();\n</code></pre>\n\n<p>\nnow you can begin another Transaction and do anything on entity</p>\n"},{"comments":[{"comment_id":123282335,"body":"Had this problem, adding allocationSize = 1 , fixed it because the sequence generator in db was defined with increment of 1 and hibernate&#39;s allocationSize default is 50 (for some weird reason)."}],"answer_id":64264730,"body":"<p>Another case when same error message can by generated, custom <code>allocationSize</code>:</p>\n<pre><code>@Id\n@Column(name = &quot;idpar&quot;)\n@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;paramsSequence&quot;)\n@SequenceGenerator(name = &quot;paramsSequence&quot;, sequenceName = &quot;par_idpar_seq&quot;, allocationSize = 20)\nprivate Long id;\n</code></pre>\n<p>without matching</p>\n<pre><code>alter sequence par_idpar_seq increment 20;\n</code></pre>\n<p>can cause constraint validation during insert(that one is easy to understand) or ths &quot;a different object with the same identifier value was already associated with the session&quot; - this case was less obvious.</p>\n"},{"answer_id":68658097,"body":"<p>The reason for this issue is you have have different copies of objects referring into same raw in your child table, so spring trying to treat your object as new object but while saving it identifies there is a raw with same primary key. So it gives above error.</p>\n<p>Best solution for this issue is to load the whole object (parent entity with child entities) from DB (you already know the primary key of parent object), then update values in the object loaded from DB from your new object(which you were trying to save) and then save the object you loaded from the DB which has new values.</p>\n<p>This will update your values in the DB without giving above error.</p>\n<p>PS- Do not need to update ids as they already exist in object loaded from DB, update only the values need to be changed</p>\n"},{"answer_id":70460246,"body":"<p>Another way to solve this if you are using spring data:</p>\n<ul>\n<li>replace calls to <code>entityManager.persist()</code> with calls to <code>repository.save()</code>, and</li>\n<li>replace calls to <code>entityManager.query().getResultList()</code> etc with calls to <code>repository.findBy...</code></li>\n</ul>\n<p>This way, spring data keeps track of the objects. It enables multiple get and persist  calls.</p>\n"},{"comments":[{"comment_id":125440191,"body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/70953701/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"answer_id":70953701,"body":"<p>instead of just @Id\ntry\n@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\nit worked for me</p>\n"},{"answer_id":71153182,"body":"<p>In my case, I had OneToOne relationship and after saving one row with a foreign key, attempt to save another row with the same foreign key throw the same exception. It means that requirement was not OneToOne relationship, but should be ManyToOne. So I have changed it to ManyToOne and it started working.</p>\n"},{"answer_id":71472673,"body":"<p>This error commonly occurs because you are violating a column of unique type or primary key when trying to insert repeated data.</p>\n"},{"answer_id":72346175,"body":"<p>make sure primary key is different for every entity.</p>\n<blockquote>\n<p>primary key must be unique</p>\n</blockquote>\n"},{"answer_id":75898577,"body":"<p>Faced this error too.\nIn my case problem was in row which has somehow zero id.</p>\n"},{"comments":[{"comment_id":134528439,"body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76284900/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"answer_id":76284900,"body":"<p>not using saveorupdate, as the experts say, is an aberration, using save and update or delete separately for Hibernate 5, for 6, this function is no longer used flush an clear</p>\n"}],"last_activity_date":1684449316,"question_id":16246675,"body":"<p>I essentially have some objects in this configuration (the real data model is a bit more complex):</p>\n\n<ul>\n<li>A has a many-to-many relationship with B. (B has <code>inverse=\"true\"</code>)</li>\n<li>B has a many-to-one relationship with C. (I have <code>cascade</code> set to <code>\"save-update\"</code>)</li>\n<li>C is a kind of type/category table.</li>\n</ul>\n\n<p>Also, I should probably mention that the primary keys are generated by the database on save.</p>\n\n<p>With my data, I sometimes run into problems where A has a set of different B objects, and these B objects refer to the same C object.</p>\n\n<p>When I call <code>session.saveOrUpdate(myAObject)</code>, I get a hibernate error saying: <code>\"a different object with the same identifier value was already associated with the session: C\"</code>. I know that hibernate can't insert/update/delete the same object twice in the same session, but is there some way around this? This doesn't seem like it would be that uncommon of a situation.</p>\n\n<p>During my research of this problem, I have seen folks suggest the use of <code>session.merge()</code>, but when I do that, any \"conflicting\" objects get inserted into the database as blank objects with all values set to null. Clearly that isn't what we want.</p>\n\n<p>[Edit] Another thing I forgot to mention is that (for architectural reasons beyond my control), each read or write needs to be done in a separate session.</p>\n"},{"comments":[{"comment_id":134506868,"body":"Can you post your complete current working code in java that is giving you this output?"}],"answers":[{"answer_id":76275270,"body":"<p>To start, I'm not sure how you got the results you did with code you've shown, so it's a bit difficult to understand exactly what your regular expression does. However, it seems like your main issue is that the content capture group in your regular expression is using <code>.+</code> to try to match anything. By default, <code>.</code> doesn't match line terminators (e.g. <code>\\r</code> and <code>\\n</code>), so you have a few options.</p>\n<h2>Solutions</h2>\n<h3>The dotall flag</h3>\n<p>This is probably the right solution for you here. After you include the dotall flag, <code>.+</code> will match line terminators as well. This will allow you to easily match multiple lines of arbitrary note content.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Pattern.compile(&quot;pattern&quot;, Pattern.DOTALL);\n</code></pre>\n<h3>Non-capturing group with alternations between <code>.</code> and line terminators</h3>\n<p>This solution is also fairly effective if you can't use the dotall flag. It allows you to check for <code>.</code> or a line terminator and use the <code>+</code> quantifier to check for that 1 or more times.</p>\n<pre class=\"lang-none prettyprint-override\"><code>/(?:.|\\r|\\n)+/\n</code></pre>\n<h3>Character set including line terminators</h3>\n<p>You can include line terminators in a character set that includes all of the characters you wish to allow in the note content. This is not a very good solution as it limits the note content to whatever characters you remember to include.</p>\n<pre class=\"lang-none prettyprint-override\"><code>/[\\w\\s!@#$%^&amp;*()=+[\\]{}&quot;':;&lt;&gt;,.?|\\\\~`\\r\\n]+/\n</code></pre>\n<h2>Complete regular expression</h2>\n<p>As I couldn't reproduce the results you got with your own regular expression. I've started from scratch and written one that should match your requirements.</p>\n<p><a href=\"https://regexr.com/7dvvl\" rel=\"nofollow noreferrer\">View this solution at RegExr</a></p>\n<pre class=\"lang-none prettyprint-override\"><code>/^\\*+$\\n(?&lt;content&gt;.+?)\\n^(?:(?&lt;userid&gt;\\w+)  )?(?&lt;timestamp&gt;\\d+-\\d+-\\d+T\\d\\d:\\d\\d:\\d\\dZ)$\\n+^\\*+$/gms\n</code></pre>\n<p>It should be noted that I didn't include <code>\\r</code> since RegExr doesn't have carriage return characters only <code>\\n</code> newline characters. However, this should be super easy to fix.</p>\n<h3>Results</h3>\n<ul>\n<li>Match 0\n<ul>\n<li>content: <code>Example noteText </code></li>\n<li>userid: <code>krishna</code></li>\n<li>timestamp: <code>2023-05-16T11:29:59Z</code></li>\n</ul>\n</li>\n<li>Match 1\n<ul>\n<li>content: <code>Example notes for testing\\nExtension of the same notes</code></li>\n<li>userid: <em>empty</em></li>\n<li>timestamp: <code>2023-05-16T11:36:03Z</code></li>\n</ul>\n</li>\n</ul>\n"},{"answer_id":76284888,"body":"<p>First, regular expression captures have to be in the order they appear.</p>\n<p>Secondly, you cannot merge capture groups, unfortunately.</p>\n<p>My recommendation is to just read the note line-for-line with a <code>BufferedReader</code>.</p>\n<p>You can use a class to hold the <code>timestamp</code> and <code>content</code>, and another class to hold the <code>userid</code> and a list of <code>content</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Note {\n    String userid;\n    List&lt;Content&gt; content;\n}\n\nclass Content {\n    String timestamp;\n    String string;\n\n    void append(String string) {\n        this.string += System.lineSeparator() + string;\n    }\n\n    @Override\n    public String toString() {\n        return String.join(&quot; &quot;, string.split(&quot;\\r\\n?|\\n&quot;));\n    }\n}\n</code></pre>\n<p>I've included a <code>toString</code> method in the <code>Content</code> class, as it appears you want the strings appended on one line.</p>\n<p>Then, create a method called <code>parse</code>, which returns a <code>Note</code>.<br />\nThe regular expression within this method is attempting to match the timestamp.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Note parse(String string) throws IOException {\n    try (BufferedReader reader = new BufferedReader(new StringReader(string))) {\n        String line;\n        int indexOf;\n        Note note = new Note();\n        Content content = null;\n        List&lt;Content&gt; list = new ArrayList&lt;&gt;();\n        while ((line = reader.readLine()) != null) {\n            if (!line.isEmpty() &amp;&amp; !line.matches(&quot;\\\\*+&quot;)) {\n                if (line.matches(&quot;.*\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}Z&quot;)) {\n                    indexOf = line.lastIndexOf(' ');\n                    if (content == null) content = new Content();\n                    if (indexOf != -1) {\n                        note.userid = line.substring(0, indexOf).strip();\n                        content.timestamp = line.substring(indexOf + 1);\n                    } else\n                        content.timestamp = line;\n                    list.add(content);\n                    content = null;\n                } else {\n                    if (content == null) {\n                        content = new Content();\n                        content.string = line;\n                    } else\n                        content.append(line);\n                }\n            }\n        }\n        note.content = list;\n        return note;\n    }\n}\n</code></pre>\n<p>Finally, add a <code>toString</code> method to your <code>Note</code> class, to build the JSON object.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Note {\n    String userid;\n    List&lt;Content&gt; content;\n\n    @Override\n    public String toString() {\n        StringBuilder json = new StringBuilder();\n        String newline = System.lineSeparator();\n        json.append('[').append(newline);\n        int index = 0;\n        for (Content string : content) {\n            json.append(&quot;{&quot;.indent(2));\n            json.append(&quot;\\&quot;timestamp\\&quot;: \\&quot;%s\\&quot;&quot;.formatted(string.timestamp).indent(4));\n            json.append(&quot;\\&quot;userid\\&quot;: \\&quot;%s\\&quot;&quot;.formatted(userid).indent(4));\n            json.append(&quot;\\&quot;content\\&quot;: \\&quot;%s\\&quot;&quot;.formatted(string).indent(4));\n            if (++index != content.size()) json.append(&quot;},&quot;.indent(2));\n            else json.append(&quot;}&quot;.indent(2));\n        }\n        json.append(']');\n        return json.toString();\n    }\n}\n</code></pre>\n<p>If you were to run <code>parse</code> on your input string, and then printed the <code>Note</code>, you would get the following.</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;timestamp&quot;: &quot;2023-05-16T11:29:59Z&quot;\n    &quot;userid&quot;: &quot;krishna&quot;\n    &quot;content&quot;: &quot;Example noteText &quot;\n  },\n  {\n    &quot;timestamp&quot;: &quot;2023-05-16T11:36:03Z&quot;\n    &quot;userid&quot;: &quot;krishna&quot;\n    &quot;content&quot;: &quot;Example notes for testing Extension of the same notes&quot;\n  }\n]\n</code></pre>\n"}],"last_activity_date":1684449234,"question_id":76274286,"body":"<h2>The Problem</h2>\n<p>In my application we are pulling notes that look like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>****************************\nExample noteText \nkrishna  2023-05-16T11:29:59Z\n\n****************************\n\n*****************************\nExample notes for testing\nExtension of the same notes\n\n2023-05-16T11:36:03Z\n******************************\n</code></pre>\n<p>Then we need to convert the notes to JSON. The result needs to be formatted like the following JSON:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;timestamp&quot;: &quot;2023-05-16T11:29:59Z&quot;,\n    &quot;userid&quot;: &quot;krishna&quot;,\n    &quot;content&quot;: &quot;Example noteText&quot;\n  },\n  {\n    &quot;timestamp&quot;: &quot;2023-05-16T11:36:03Z&quot;,\n    &quot;userid&quot;: &quot;krishna&quot;,\n    &quot;content&quot;: &quot;Example notes for testing  Extension of the same notes&quot;\n  } \n]\n</code></pre>\n<h2>Attempted Solution</h2>\n<p>My current solution is a regular expression in Java that unfortunately cannot capture multi-line note content in one capture group. This causes the output to separate one multi-line note into two notes.</p>\n<h3>Code</h3>\n<pre class=\"lang-java prettyprint-override\"><code>Pattern notesPattern = Pattern.compile(\n    &quot;(?:\\\\*{25}\\\\r\\\\n)&quot; +\n    &quot;(?&lt;date&gt;[\\\\w\\\\s:]+?)&quot; +\n    &quot;\\\\r\\\\n&quot; +\n    &quot;(?&lt;userid&gt;\\\\w+?)&quot; +\n    &quot;\\\\r\\\\n&quot; +\n    &quot;(?:\\\\*{25}\\\\r\\\\n)&quot; +\n    &quot;(?&lt;content&gt;.+)&quot; + // Note content is captured here\n    &quot;(?:\\\\r\\\\n\\\\r\\\\n)?&quot;);\n</code></pre>\n<h3>Output</h3>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;timestamp&quot;: &quot;2023-05-16T11:29:59Z&quot;,\n    &quot;userid&quot;: &quot;krishna&quot;,\n    &quot;content&quot;: &quot;Example noteText&quot;\n  },\n  {\n    &quot;timestamp&quot;: &quot;2023-05-16T11:36:03Z&quot;,\n    &quot;userid&quot;: &quot;krishna&quot;,\n    &quot;content&quot;: &quot;Example notes for testing &quot;\n  },\n  {\n    &quot;timestamp&quot;: null,\n    &quot;userid&quot;: null,\n    &quot;content&quot;: &quot;\\n\\nExtension of the same notes&quot;\n  }\n]\n</code></pre>\n<p>How can I modify my regular expression to capture multiple lines in one capture group?</p>\n"},{"comments":[{"comment_id":134453755,"body":"In your screenshot, I see <code>junit-4.12.jar</code> of test scope (shown with a darker icon) which contains <code>org.junit.Assert</code> and <code>org.junit.Test</code>, so it is not available in your non-test source folder <code>src</code>. The JARs are collapsed, not showing where <code>com.binance4j.binance</code> and <code>com.binance4j.model.market.TickerPrice</code> is contained."},{"comment_id":134453763,"body":"First why have you changed the default <code>&lt;sourceDirectory&gt;src&lt;&#47;sourceDirectory&gt;</code> if don&#39;t know what you are doing... second remove that line... and to solve your problem you have to add appropriate dependencies for the libraries you are using... Furthermore you have to use at least JDK 17 because you have defined <code>&lt;release&gt;17&lt;&#47;release&gt;</code> ... and also correctly locate your files for production code into <code>src&#47;main&#47;java&#47;&lt;package&gt;</code> and for test into <code>src&#47;test&#47;java&#47;&lt;package&gt;</code>..."}],"answers":[{"comments":[{"comment_id":134455202,"body":"Hi, thank you. Yes, I have tried that, without seeing any changes."}],"answer_id":76244770,"body":"<p>Have you tried updating the maven project to download the dependencies?</p>\n<p><a href=\"https://i.stack.imgur.com/x3Eyo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/x3Eyo.png\" alt=\"E\" /></a></p>\n<p>UPDATED!</p>\n<p>You can't find the junit imports because the scope is &quot;test&quot;. Here you can see how the same class in /src/main/java does not find dependencies, but in /src/test/java it can import the Test and Assert classes.</p>\n<p>Check the other two classes, they don't exist in the libraries you are importing. I don't know those libraries but in all maven central com.binance4j* dependencies neither of these two classes exist.</p>\n<p><a href=\"https://i.stack.imgur.com/AQuzP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AQuzP.png\" alt=\"![enter image description here\" /></a></p>\n"}],"last_activity_date":1684447831,"question_id":76243966,"body":"<p>I have set up a new project, converted it to a maven project and have imported the necessary dependencies. Independent from what dependency I use, I always get error message &quot;The import ... cannot be resolved&quot;.</p>\n<p>Things I have done so far:\n-Rebuilt and saved the project\n-Checked if Maven Repository contains files: it does (see screenshot)</p>\n<p><a href=\"https://i.stack.imgur.com/h6zpZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h6zpZ.png\" alt=\"enter image description here\" /></a></p>\n<p>-Downloaded the maven to eclipse plugin from <a href=\"https://github.com/eclipse-m2e/m2e-core/blob/master/README.md#-installation\" rel=\"nofollow noreferrer\">github</a>\n-tried it with different JRE Versions (JavaSE-1.6 and JavaSE-15)</p>\n<p>My pom.xml contains:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;BuyCoinDieZweite&lt;/groupId&gt;\n  &lt;artifactId&gt;BuyCoinDieZweite&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;dependencies&gt;\n      &lt;!-- https://mvnrepository.com/artifact/com.binance4j/binance4j-spot --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.binance4j&lt;/groupId&gt;\n    &lt;artifactId&gt;binance4j-spot&lt;/artifactId&gt;\n    &lt;version&gt;2.4.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;junit&lt;/groupId&gt;\n    &lt;artifactId&gt;junit&lt;/artifactId&gt;\n    &lt;version&gt;4.12&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n\n\n  &lt;/dependencies&gt;\n  &lt;build&gt;\n    &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.8.1&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;release&gt;17&lt;/release&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>My Main java file for test purpose:</p>\n<pre><code>import com.binance4j.binance.SpotApiRestClient;\nimport com.binance4j.model.market.TickerPrice;\nimport org.junit.Assert;\nimport org.junit.Test;\n\nimport java.util.List;\n\npublic class Main {\n\n    @Test\n    public void testConnection() {\n        // Create a client with API Key and Secret Key\n        // Replace &quot;yourApiKey&quot; and &quot;yourSecretKey&quot; with your actual keys\n        SpotApiRestClient client = new SpotApiRestClient(&quot;yourApiKey&quot;, &quot;yourSecretKey&quot;);\n\n        // Get ticker price for BTC/USDT\n        TickerPrice tickerPrice = client.getTickerPrice(&quot;BTCUSDT&quot;);\n\n        // Check that the ticker price is not null\n        Assert.assertNotNull(tickerPrice);\n        \n        // Check that the symbol is as expected\n        Assert.assertEquals(&quot;BTCUSDT&quot;, tickerPrice.getSymbol());\n    }\n}\n\n</code></pre>\n<p>There are no errors in the pom.xml, but only in the Main.java file. See the following (I have left out the errors &quot;ObjectXYZ cannot be resolved&quot;:</p>\n<pre><code>&quot;The import com.binance4j.binance cannot be resolved&quot;\n&quot;The import com.binance4j.model.market.TickerPrice cannot be resolved&quot;\n&quot;The import org.junit.Assert cannot be resolved&quot;\n&quot;The import org.junit.Test cannot be resolved&quot;\n</code></pre>\n"},{"comments":[{"comment_id":134508276,"body":"If a bean is missing, the app will fail at startup unless you’ve marked the bean as optional or using lazy loading. There’s not enough information in your question."}],"last_activity_date":1684446663,"question_id":76275839,"body":"<p>I have a spring-boot service that uses some libraries that rely on Guice. Not all of our services have migrated over to spring-boot.</p>\n<p>I have a bean that is not provided. The bean is not marked optional. I want to test the scenario where the service fails to start as the bean is missing. Instead, when debugging I observed that the service comes up fine. The service boots fine and I am able to access the Swagger UI.</p>\n<p>In debug mode, when I hover over the variable in the constructor, where this bean is wired, I see the exception below.</p>\n<pre><code>Method threw 'com.google.inject.ConfigurationException' exception. \nCannot evaluate jdk.proxy2.$Proxy302.toString()\n</code></pre>\n<p>When I invoke the code path where this bean is utilized, I get a runtime exception that the bean is unavailable.</p>\n"},{"comments":[{"comment_id":134524636,"body":"check if this <a href=\"https://stackoverflow.com/questions/31134333/this-application-has-no-explicit-mapping-for-error\">helps</a>"}],"last_activity_date":1684446176,"question_id":76283588,"body":"<p>I'm new to springBoot, I tried to built a simple form and added validation. Everything works fine but when I click on submit button with empty subject and name the program throws an error. I'm attaching the files and error for reference. Thanks In advance.</p>\n<pre><code>**ERROR**\n\nWhitelabel Error Page\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.\n\nThu May 18 23:36:46 IST 2023\nThere was an unexpected error (type=Internal Server Error, status=500).\nAn error happened during template parsing (template: &quot;class path resource [templates/form.html]&quot;)\norg.thymeleaf.exceptions.TemplateInputException: An error happened during template parsing (template: &quot;class path resource [templates/form.html]&quot;)\n    at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:241)\n    at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parseStandalone(AbstractMarkupTemplateParser.java:100)\n    at org.thymeleaf.engine.TemplateManager.parseAndProcess(TemplateManager.java:666)\n    at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1098)\n    at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1072)\n    at org.thymeleaf.spring5.view.ThymeleafView.renderFragment(ThymeleafView.java:366)\n    at org.thymeleaf.spring5.view.ThymeleafView.render(ThymeleafView.java:190)\n    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1401)\n    at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1145)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1084)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: org.attoparser.ParseException: Error during execution of processor 'org.thymeleaf.spring5.processor.SpringErrorsTagProcessor' (template: &quot;form&quot; - line 93, col 30)\n    at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:393)\n    at org.attoparser.MarkupParser.parse(MarkupParser.java:257)\n    at org.thymeleaf.templateparser.markup.AbstractMarkupTemplateParser.parse(AbstractMarkupTemplateParser.java:230)\n    ... 48 more\nCaused by: org.thymeleaf.exceptions.TemplateProcessingException: Error during execution of processor 'org.thymeleaf.spring5.processor.SpringErrorsTagProcessor' (template: &quot;form&quot; - line 93, col 30)\n    at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:117)\n    at org.thymeleaf.processor.element.AbstractElementTagProcessor.process(AbstractElementTagProcessor.java:95)\n    at org.thymeleaf.util.ProcessorConfigurationUtils$ElementTagProcessorWrapper.process(ProcessorConfigurationUtils.java:633)\n    at org.thymeleaf.engine.ProcessorTemplateHandler.handleOpenElement(ProcessorTemplateHandler.java:1314)\n    at org.thymeleaf.engine.TemplateHandlerAdapterMarkupHandler.handleOpenElementEnd(TemplateHandlerAdapterMarkupHandler.java:304)\n    at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler$InlineMarkupAdapterPreProcessorHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:278)\n    at org.thymeleaf.standard.inline.OutputExpressionInlinePreProcessorHandler.handleOpenElementEnd(OutputExpressionInlinePreProcessorHandler.java:186)\n    at org.thymeleaf.templateparser.markup.InlinedOutputExpressionMarkupHandler.handleOpenElementEnd(InlinedOutputExpressionMarkupHandler.java:124)\n    at org.attoparser.HtmlElement.handleOpenElementEnd(HtmlElement.java:109)\n    at org.attoparser.HtmlMarkupHandler.handleOpenElementEnd(HtmlMarkupHandler.java:297)\n    at org.attoparser.MarkupEventProcessorHandler.handleOpenElementEnd(MarkupEventProcessorHandler.java:402)\n    at org.attoparser.ParsingElementMarkupUtil.parseOpenElement(ParsingElementMarkupUtil.java:159)\n    at org.attoparser.MarkupParser.parseBuffer(MarkupParser.java:710)\n    at org.attoparser.MarkupParser.parseDocument(MarkupParser.java:301)\n    ... 50 more\nCaused by: java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'grades' available as request attribute\n    at org.springframework.web.servlet.support.BindStatus.&lt;init&gt;(BindStatus.java:153)\n    at org.springframework.web.servlet.support.RequestContext.getBindStatus(RequestContext.java:903)\n    at org.thymeleaf.spring5.context.webmvc.SpringWebMvcThymeleafRequestContext.getBindStatus(SpringWebMvcThymeleafRequestContext.java:227)\n    at org.thymeleaf.spring5.util.FieldUtils.getBindStatusFromParsedExpression(FieldUtils.java:306)\n    at org.thymeleaf.spring5.util.FieldUtils.getBindStatus(FieldUtils.java:253)\n    at org.thymeleaf.spring5.util.FieldUtils.getBindStatus(FieldUtils.java:227)\n    at org.thymeleaf.spring5.processor.SpringErrorsTagProcessor.doProcess(SpringErrorsTagProcessor.java:65)\n    at org.thymeleaf.processor.element.AbstractAttributeTagProcessor.doProcess(AbstractAttributeTagProcessor.java:74)\n    ... 63 more\n</code></pre>\n<p><strong>form.html</strong></p>\n<pre><code>  &lt;form method=&quot;post&quot; th:object=&quot;${grades}&quot; th:action=&quot;@{handleSubmit}&quot;&gt; \n    &lt;p style=&quot;color:red&quot; th:errors=&quot;*{name}&quot;&gt;&lt;/p&gt;\n    &lt;input type=&quot;text&quot; placeholder=&quot;Name&quot; th:field=&quot;*{name}&quot;&gt;\n    &lt;input type=&quot;text&quot; placeholder=&quot;Score&quot; th:field=&quot;*{score}&quot;&gt;  \n    &lt;p style=&quot;color:red&quot; th:errors=&quot;*{subject}&quot;&gt;&lt;/p&gt;\n    &lt;input type=&quot;text&quot; placeholder=&quot;Subject&quot; th:field=&quot;*{subject}&quot;&gt;\n    &lt;input type=&quot;hidden&quot; th:field=&quot;*{id}&quot;&gt;\n    &lt;br&gt;&lt;br&gt;\n    &lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;\n  &lt;/form&gt;  \n</code></pre>\n<p><strong>Controller</strong></p>\n<pre><code>List&lt;Grade&gt; obj=new ArrayList&lt;&gt;();\n@GetMapping(&quot;/grades&quot;)\npublic String getGrades(Model model){\n    model.addAttribute(&quot;grades&quot;,obj);\n    return &quot;grades&quot;;\n}\n\n@GetMapping(&quot;/&quot;)\npublic String getForm(Model model,@RequestParam(required = false) String id){\n    int index=getGradeIndex(id);\n     model.addAttribute(&quot;grades&quot;,index==Constants.Not_Found?new Grade():obj.get(index));\n    return &quot;form&quot;;\n}\n\n@PostMapping(&quot;/handleSubmit&quot;)\npublic String submitForm(@Valid Grade grade, BindingResult result){\n    if(result.hasErrors()){\n        return &quot;form&quot;;\n    }\n    int index=getGradeIndex(grade.getId());\n    if(index==Constants.Not_Found)\n    obj.add(grade);\n    else{\n        obj.set(index, grade);\n    }\n    \n    return &quot;redirect:/grades&quot;;\n}\n\npublic Integer getGradeIndex(String id){\n    for(int i=0;i&lt;obj.size();i++){\n        if(obj.get(i).getId().equals(id)){\n            return i;\n        }\n    }\n    return Constants.Not_Found;\n}\n</code></pre>\n<p>}</p>\n<p><strong>Grade.java</strong></p>\n<pre><code>@NotBlank(message=&quot;Name cannot be blank&quot;)\nprivate String name;\n@NotBlank(message=&quot;Subject cannot be blank&quot;)\nprivate String subject;\nprivate String score;\nprivate String id;\n\npublic Grade(){\n    this.id=UUID.randomUUID().toString();\n}\n\npublic Grade(String name,String subject,String score){\n    this.name=name;\n    this.subject=subject;\n    this.score=score;\n}\n</code></pre>\n"},{"comments":[{"comment_id":134529868,"body":"We can&#39;t possibly fix anything when all you have given us is an error message. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and learn <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}],"last_activity_date":1684446115,"question_id":76283591,"body":"<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'smsController' defined in file [D:\\STS-Project\\02-SMS\\02-SMS\\target\\classes\\com\\sms\\controller\\SmsController.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'studentServiceImp' defined in file [D:\\STS-Project\\02-SMS\\02-SMS\\target\\classes\\com\\sms\\service\\imp\\StudentServiceImp.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'studentRepo' defined in com.sms.repo.StudentRepo defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract com.sms.model.Student com.sms.repo.StudentRepo.findByname(java.lang.String); Reason: Failed to create query for method public abstract com.sms.model.Student com.sms.repo.StudentRepo.findByname(java.lang.String); No property 'name' found for type 'Student' Did you mean ''age''\n</code></pre>\n<p>solve it step by step</p>\n"},{"comments":[{"comment_id":134523216,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/70154082/getting-java-lang-nosuchmethoderror-org-yaml-snakeyaml-yaml-init-while-runnin\">Getting java.lang.NoSuchMethodError: org.yaml.snakeyaml.Yaml.&lt;init&gt; while running spark based spring boot application</a>"},{"comment_id":134528628,"body":"Please provide enough code so others can better understand or reproduce the problem."}],"last_activity_date":1684445979,"question_id":76284641,"body":"<pre><code>org.yaml.snakeyaml.constructor.SafeConstructor: method &lt;init&gt;()V not found\njava.lang.NoSuchMethodError: org.yaml.snakeyaml.constructor.SafeConstructor: method &lt;init&gt;()V not found\n\norg.yaml.snakeyaml.constructor.SafeConstructor: method &lt;init&gt;()V not found\njava.lang.NoSuchMethodError: org.yaml.snakeyaml.constructor.SafeConstructor: method &lt;init&gt;()V not found\n    at io.micronaut.context.env.yaml.CustomSafeConstructor.&lt;init&gt;(CustomSafeConstructor.java:34)\n    at io.micronaut.context.env.yaml.YamlPropertySourceLoader.processInput(YamlPropertySourceLoader.java:56)\n    at io.micronaut.context.env.AbstractPropertySourceLoader.read(AbstractPropertySourceLoader.java:117)\n    at io.micronaut.context.env.AbstractPropertySourceLoader.loadProperties(AbstractPropertySourceLoader.java:102)\n    at io.micronaut.context.env.AbstractPropertySourceLoader.load(AbstractPropertySourceLoader.java:68)\n    at io.micronaut.context.env.AbstractPropertySourceLoader.load(AbstractPropertySourceLoader.java:55)\n    at io.micronaut.context.env.DefaultEnvironment.loadPropertySourceFromLoader(DefaultEnvironment.java:569)\n    at io.micronaut.context.env.DefaultEnvironment.readPropertySourceList(DefaultEnvironment.java:502)\n    at io.micronaut.context.env.DefaultEnvironment.readPropertySourceList(DefaultEnvironment.java:488)\n    at io.micronaut.context.DefaultApplicationContext$BootstrapEnvironment.readPropertySourceList(DefaultApplicationContext.java:606)\n    at io.micronaut.context.env.DefaultEnvironment.readPropertySources(DefaultEnvironment.java:392)\n    at io.micronaut.context.env.DefaultEnvironment.start(DefaultEnvironment.java:254)\n    at io.micronaut.context.DefaultApplicationContext$RuntimeConfiguredEnvironment.createBootstrapEnvironment(DefaultApplicationContext.java:778)\n    at io.micronaut.context.DefaultApplicationContext$RuntimeConfiguredEnvironment.start(DefaultApplicationContext.java:719)\n    at io.micronaut.context.DefaultApplicationContext$RuntimeConfiguredEnvironment.start(DefaultApplicationContext.java:689)\n    at io.micronaut.context.DefaultApplicationContext.startEnvironment(DefaultApplicationContext.java:227)\n    at io.micronaut.context.DefaultApplicationContext.start(DefaultApplicationContext.java:179)\n    at io.micronaut.test.extensions.AbstractMicronautExtension.startApplicationContext(AbstractMicronautExtension.java:360)\n    at io.micronaut.test.extensions.AbstractMicronautExtension.beforeClass(AbstractMicronautExtension.java:239)\n    at io.micronaut.test.extensions.junit5.MicronautJunit5Extension.beforeAll(MicronautJunit5Extension.java:62)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeBeforeAllCallbacks$8(ClassBasedTestDescriptor.java:368)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeBeforeAllCallbacks(ClassBasedTestDescriptor.java:368)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:192)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:78)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:136)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248)\n    at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211)\n    at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:132)\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)\n    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\n    at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\n    at com.sun.proxy.$Proxy5.stop(Unknown Source)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.stop(TestWorker.java:133)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:182)\n    at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:164)\n    at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:414)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n    at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56)\n    at java.base/java.lang.Thread.run(Thread.java:834)\n</code></pre>\n<p>I found different references of documentation but i was try the result it the same in fail. Somebody that help with this error please?</p>\n"},{"comments":[{"comment_id":16156995,"body":"&quot;But then i thought adding jars one by one is waster of time&quot; you must be a very busy man indeed! My advice, do it the &quot;right&quot; way instead."},{"comment_id":16160615,"body":"what i did was the right thing actually. download spring distribution and add the jars to build path"},{"comment_id":16222909,"body":"I have resolved this. the problem was i have added the source jars for the build path instead of .class jars. Need to add the jars inside the dist folder of spring distribution."},{"comment_id":23847210,"body":"@FrankD - Haha, I have done that before. Glad you figured it out. You should post that as an answer, and close the question."}],"answers":[{"answer_id":12084286,"body":"<p>You have to add each of them, not just the directory. You can use Ctrl-click / mouse-drag to multi-select all the jars.</p>\n"},{"answer_id":12104100,"body":"<p>Include these libraries:</p>\n<ul>\n<li>org.springframework.context.support-3.1.0.RELEASE.jar and</li>\n<li>org.springframework.context-3.1.0.RELEASE.jar</p></li>\n</ul>\n"},{"answer_id":16591562,"body":"<p>Its not the Spring-bean jar.You need <strong>Spring-context</strong> jar. You might have missed it while adding all jars together. Good luck.</p>\n"},{"answer_id":28763975,"body":"<p>The spring jars should be imported from \"dist\" folder not from \"src\" folder.\nThis will resolve the above issue.</p>\n"},{"answer_id":36687296,"body":"<p>Download org.springframework.context-2.5.6.a.jar.zip from\n<a href=\"http://www.java2s.com/Code/Jar/o/Downloadorgspringframeworkcontext256ajar.htm\" rel=\"nofollow\">http://www.java2s.com/Code/Jar/o/Downloadorgspringframeworkcontext256ajar.htm</a>\nand import it from build path. Will resolve your problem.</p>\n"},{"answer_id":44846809,"body":"<p>I know that this answer is given in a lot of other threads, but still here is the solution that worked for me. Hope it helps somebody.</p>\n\n<p>Step 1: Close Eclipse</p>\n\n<p>Step 2:\nJust go to your maven folder:-</p>\n\n<p>C:\\Users\\Rohit.rokade.m2\\repository\\org</p>\n\n<p>And delete the 'springframework' folder. (This contains all the maven dependencies related to spring)</p>\n\n<p>Now open eclipse.</p>\n\n<p>Step 3: Eclipse shall re-download all the dependencies and the errors should have gone by now. If some of them still don't, just update your maven project.\n(Right click your project in eclipse -> Maven -> Update project)  </p>\n"},{"answer_id":50206289,"body":"<p>This resolved my issue:</p>\n\n<ol>\n<li>Open pom.xml</li>\n<li>Click on \"dependencies\" tab at the bottom and click Add.</li>\n<li>In artifactId - type \"org.springframework\"</li>\n<li>In groupId - type \"spring-core\"</li>\n<li>In search tab - type \"springframework\" and wait for couple of seconds.</li>\n<li>Look for spring-context and add it.</li>\n</ol>\n\n<p>Now, In the project explorer, right click on the project and search for Maven.\nClick on \"Update project. </p>\n\n<p>This should resolve the issue. </p>\n"},{"answer_id":66182346,"body":"<p>You have to include this dependency.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n    &lt;version&gt;5.2.12.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"answer_id":70574717,"body":"<p>This works with MacOS 10.15.7 + IntelliJ IDEA if you prefer adding any spring dependencies manually via project structure. otherwise using maven or other repos would definitely save the hassle. By the time this answer is written spring 5 has been launched.</p>\n<ol>\n<li><p>press the shortcut keys <code>command</code> + <code>;</code> together to redirect to project structure, and click the libraries. In the library section, press the plus sign and it will prompt you to find the directory where you should locate the spring jar package.</p>\n</li>\n<li><p>Starting from where we were at the last step, if you have been working with Spring before on the same machine, it is very likely that you have installed Spring framework in your machine.\nGo to finder &gt;<code>shift+command+h</code> to go to the home directory&gt; <code>shift+command+.</code> to show hidden file. Find .m2 file, enter .m2&gt;repository&gt;org&gt;spring-framework, click straight through the folders till you can see the <code>spring-context-versionnumber.jar</code> . Choose it and apply it, by now the <code>spring-conntext.jar</code> file would be successfully added to your working environment.</p>\n</li>\n<li><p>if step 2 is not your case, download the spring jar from here <a href=\"https://repo.spring.io/ui/native/release/org/springframework/spring/\" rel=\"nofollow noreferrer\">https://repo.spring.io/ui/native/release/org/springframework/spring/</a>\nchoose your desired version ends with <code>....RELEASE-dist.zip</code>, then unzip and locate the jar file in the same way as step 2 in the file you store the downloaded Spring release package.</p>\n</li>\n</ol>\n"},{"answer_id":76249401,"body":"<p>in <strong>SpringToolSuite</strong> IDE\nadd in <strong>build.gradle</strong></p>\n<pre><code>//implementation 'org.springframework.boot:spring-boot-starter'\nimplementation 'org.springframework:spring-context' \n</code></pre>\n<p>and comment <code>spring-boot-starter</code> (optionally).\nThen back to red underlined ApplicationContext word of the  main class click on crossed spot and select <strong>Fix Project Setup</strong> in dropdown window. save all, <strong>project -&gt; clean</strong>  and reds should go</p>\n"}],"last_activity_date":1684445913,"question_id":12084265,"body":"<p>I have added the all spring distribution 3.1.1 jars to the build path which includes org.springframework.context-sources-3.1.1.RELEASE.jar \norg.springframework.beans-sources-3.1.1.RELEASE.jar. </p>\n\n<p>But still the eclipse build error says, \n<em>\"The import org.springframework.context.ApplicationContext cannot be resolved\".</em></p>\n\n<p>Before adding the all jars in spring distribution 3.1.1, I have added jars manually one by one which includes, spring-context-3.0.2.RELEASE.jar and spring-beans-3.0.2.RELEASE.jar. At that time the ApplicationContext recognized successfully. But then i thought adding jars one by one is waster of time and why not download all jars in latest spring distribution and give it to build path.</p>\n\n<p>Initially i thought it might be a conflict with complied class in build forder because i build the project with diferent versions of context-sources jar. So i delete the build folder and clean the project too. Still the issue exists when i add spring 3.1.1 jars.</p>\n"},{"comments":[{"comment_id":70228955,"body":"Where is the implementation class of  <code>ClientRepository</code>?"},{"comment_id":70232696,"body":"@Arpit I create an instance of ClientRepository only in ClientServiceImpl. It&#39;s my first experience this Spring Data JPA and i don&#39;t know how do correctly. So I followed example"},{"comment_id":70235715,"body":"@Arpit Please look at my project on github (i add link)"}],"answers":[{"answer_id":41511609,"body":"<p>Add @Repository annotation to the Spring Data JPA repo</p>\n"},{"comments":[{"comment_id":70232290,"body":"This is I have in my appContext.xml and it doesn&#39;t help"}],"answer_id":41511610,"body":"<p>According to <a href=\"https://spring.io/blog/2011/02/10/getting-started-with-spring-data-jpa/\" rel=\"nofollow noreferrer\">documentation</a> you should set XML configuration:</p>\n\n<pre><code>&lt;jpa:repositories base-package=\"com.kopylov.repository\" /&gt;\n</code></pre>\n"},{"comments":[{"comment_id":70508184,"body":"Now I have such error:  org.springframework.beans.factory.NoSuchBeanDefinitionExcept&zwnj;&#8203;ion: No qualifying bean of type &#39;com.kopylov.repository.ClientRepository&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(req&zwnj;&#8203;uired=true)}"},{"comment_id":107454792,"body":"I also had the same issue, forgot to add Service annotation in impl. Adding Service annotation fixed the issue. Thanks @Alex"}],"answer_id":41511612,"body":"<p>The ClientRepository should be annotated with <code>@Repository</code> tag. \nWith your current configuration Spring will not scan the class and have knowledge about it. At the moment of booting and wiring will not find the ClientRepository class. </p>\n\n<p><strong>EDIT</strong>\nIf adding the <code>@Repository</code> tag doesn't help, then I think that the problem might be now with the <code>ClientService</code> and <code>ClientServiceImpl</code>.</p>\n\n<p>Try to annotate the <code>ClientService</code> (interface) with <code>@Service</code>. As you should only have a single implementation for your service, you don't need to specify a name with the optional parameter <code>@Service(\"clientService\")</code>. Spring will autogenerate it based on the interface' name.</p>\n\n<p>Also, as Bruno mentioned, the <code>@Qualifier</code> is not needed in the <code>ClientController</code> as you only have a single implementation for the service. </p>\n\n<p><strong>ClientService.java</strong></p>\n\n<pre><code>@Service\npublic interface ClientService {\n\n    void addClient(Client client);\n}\n</code></pre>\n\n<p><strong>ClientServiceImpl.java</strong> (option 1)</p>\n\n<pre><code>@Service\npublic class ClientServiceImpl implements ClientService{\n\n    private ClientRepository clientRepository;\n\n    @Autowired\n    public void setClientRepository(ClientRepository clientRepository){\n        this.clientRepository=clientRepository;\n    }\n\n    @Transactional\n    public void addClient(Client client){\n        clientRepository.saveAndFlush(client);\n    }\n}\n</code></pre>\n\n<p><strong>ClientServiceImpl.java</strong> (option 2/preferred)</p>\n\n<pre><code>@Service\npublic class ClientServiceImpl implements ClientService{\n\n    @Autowired\n    private ClientRepository clientRepository;\n\n    @Transactional\n    public void addClient(Client client){\n        clientRepository.saveAndFlush(client);\n    }\n}\n</code></pre>\n\n<p><strong>ClientController.java</strong></p>\n\n<pre><code>@Controller\npublic class ClientController {\n    private ClientService clientService;\n\n    @Autowired\n    //@Qualifier(\"clientService\")\n    public void setClientService(ClientService clientService){\n        this.clientService=clientService;\n    }\n\n    @RequestMapping(value = \"registration\", method = RequestMethod.GET)\n    public String reg(Model model){\n        model.addAttribute(\"client\", new Client());\n        return \"registration\";\n    }\n\n    @RequestMapping(value = \"registration/add\", method = RequestMethod.POST)\n    public String addUser(@ModelAttribute Client client){\n        this.clientService.addClient(client);\n    return \"home\";\n    }\n}\n</code></pre>\n"},{"comments":[{"comment_id":123126207,"body":"You are just writting the same things that already have been posted"}],"answer_id":41511651,"body":"<p>Considering that your package scanning is correctly set either through XML configuration or annotation based configuration.</p>\n\n<p>You will need a <code>@Repository</code> on your <code>ClientRepository</code> implementation as well to allow Spring to use it in an <code>@Autowired</code>. Since it's not here we can only suppose that's what's missing.</p>\n\n<p>As a side note, it would be cleaner to put your <code>@Autowired</code>/<code>@Qualifier</code> directly on your member if the setter method is only used for the <code>@Autowired</code>.</p>\n\n<pre><code>@Autowired\n@Qualifier(\"clientRepository\")\nprivate ClientRepository clientRepository;\n</code></pre>\n\n<p>Lastly, you don't need the <code>@Qualifier</code> is there is only one class implementing the bean definition so unless you have several implementation of <code>ClientService</code> and <code>ClientRepository</code> you can remove the <code>@Qualifier</code></p>\n"},{"comments":[{"comment_id":112966098,"body":"What about i have no main class ?"}],"answer_id":49251441,"body":"<p>Try adding @EntityScan(basePackages = \"insert package name here\") on top of your main class.</p>\n"},{"answer_id":49625394,"body":"<p>That might happen because the pojos you are using lack of the precise constructor the service needs. That is, try to generate  all the constructors for the pojo or objects (model object) that your serviceClient uses, so that the client can be instanced correctly. In your case,regenerate the constructors (with arguments)for your client object (taht is your model object).</p>\n"},{"answer_id":49955921,"body":"<p>The application needs to be placed in the same directory as the scanned package:</p>\n\n<p><img src=\"https://i.stack.imgur.com/gFQLN.png\" alt=\"enter image description here\"></p>\n"},{"answer_id":50175757,"body":"<p>I had the exactly same issue, with a very very long stack trace.\nAt the end of the trace I saw this:</p>\n\n<blockquote>\n  <p>InvalidQueryException: Keyspace 'mykeyspace' does not exist</p>\n</blockquote>\n\n<p>I created the keyspace in cassandra, and solved the problem.</p>\n\n<pre><code>CREATE KEYSPACE mykeyspace\n  WITH REPLICATION = { \n   'class' : 'SimpleStrategy', \n   'replication_factor' : 1 \n  };\n</code></pre>\n"},{"answer_id":50429384,"body":"<p>I was facing the same issue, and it was, as i missed marking my DAO class with Entity annotations. I tried below and error got resolved.</p>\n\n<pre><code>/**\n*`enter code here`\n*/\n@Entity &lt;-- was missing earlier\n    public class Topic {\n        @Id  \n        String id;\n        String name;\n        String desc;\n\n    .\n    .\n    .\n    }\n</code></pre>\n"},{"answer_id":52263897,"body":"<p>Check out the table structure of Client table, if there is a mismatch between table structure in db and the entity, you would get this error..</p>\n\n<p>I had this error which was coming due to datatype mismatch of primary key between db table and the entity ...  </p>\n"},{"comments":[{"comment_id":113646198,"body":"im not sure if would have helped the OP, but if anyone is using SpringBoot and have @EnableAutoConfiguration(exclude = {DataSource/HibernateJpa..etc}   These excludes may deny spring to auto verify the annotations declared in the CRUD classes, so the removal of the exclusions might fix it together with adding the @EnableJpaRepositories in the Main class"}],"answer_id":52736540,"body":"<p>I just added the <code>@Repository</code> annotation to Repository interface and <code>@EnableJpaRepositories</code> (\"domain.repositroy-package\") to the main class. It worked just fine.</p>\n"},{"answer_id":52978845,"body":"<p>If you describe a field as criteria in method definition (\"findBy\"), You must pass that parameter to the method, otherwise you will get \"Unsatisfied dependency expressed through method  parameter\" exception.</p>\n\n<pre><code>public interface ClientRepository extends JpaRepository&lt;Client, Integer&gt; {\n       Client findByClientId();                ////WRONG !!!!\n       Client findByClientId(int clientId);    /// CORRECT \n}\n</code></pre>\n\n<p>*I assume that your Client entity has clientId attribute.</p>\n"},{"comments":[{"comment_id":121215846,"body":"Could you please make it more clearer to understand"}],"answer_id":53785214,"body":"<p>I know it seems too late, but it may help others in future.</p>\n\n<p>I face the same error and the problem was that spring boot did not read my services package so add:</p>\n\n<p><code>@ComponentScan(basePackages = {\"com.example.demo.Services\"})</code> (you have to specify your own path to the services package) and in the class  <code>demoApplication</code> (class that have main function) and for service interface must be annotated  <code>@Service</code> and the class that implement the service interface must be annotated with <code>@Component</code>, then autowired the service interface.</p>\n"},{"comments":[{"comment_id":99035422,"body":"this fixed mine. THanks alot. But I wonder why it doesn&#39;t automatically detect my beans/classes even though they exist. Is this some sort of a bug?. My application is all under one package anyway and I dont have any other packages.I don&#39;t get why I have to manually have the component class be declared."},{"comment_id":113785524,"body":"Well if you are using @ SPringbootApplication annotation then you dont need @ ComponentScan .   @ SpringBootApplication = @ Configuration + @ ComponentScan + @ EnableAutoConfiguration"}],"answer_id":54773593,"body":"<p>If you are using Spring Boot, your main app should be like this (just to make and understand things in simple way)  - </p>\n\n<pre><code>package aaa.bbb.ccc;\n@SpringBootApplication\n@ComponentScan({ \"aaa.bbb.ccc.*\" })\npublic class Application {\n.....\n</code></pre>\n\n<p>Make sure you have @Repository and @Service appropriately annotated.</p>\n\n<p>Make sure all your packages fall under - aaa.bbb.ccc.*</p>\n\n<p>In most cases this setup resolves these kind of trivial issues. <a href=\"https://github.com/ajkr195/springbootrocks\" rel=\"noreferrer\">Here</a> is a full blown example. Hope it helps.</p>\n"},{"answer_id":55273041,"body":"<p>See if your     <code>&lt;context:component-scan base-package=&quot;your package &quot;/&gt;</code> is missing in either config or context xml file</p>\n"},{"answer_id":55913916,"body":"<p>That was the version incompatibility where their was the inclusion of lettuce. When i excluded , it worked for me.</p>\n\n<pre><code>&lt;!--Spring-Boot 2.0.0 --&gt;\n    &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\n                &lt;exclusions&gt;\n                    &lt;exclusion&gt;\n                        &lt;groupId&gt;io.lettuce&lt;/groupId&gt;\n                        &lt;artifactId&gt;lettuce-core&lt;/artifactId&gt;\n                    &lt;/exclusion&gt;\n                &lt;/exclusions&gt;    \n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;redis.clients&lt;/groupId&gt;\n                &lt;artifactId&gt;jedis&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n</code></pre>\n"},{"answer_id":57244428,"body":"<p>Just add @Service annotation to top of the service class</p>\n"},{"answer_id":58208879,"body":"<p>There is <strong>another</strong> instance still same error will shown after you doing everything above mentioned. When you change your codes accordingly mentioned solutions make sure to keep originals. So you can easily go back. So go and again <strong>check dispatcher-servelet</strong> configuration file's base package location. Is it <em>scanning all relevant packages</em> when you running application.</p>\n\n<pre><code>&lt;context:component-scan base-package=\"your.pakage.path.here\"/&gt;\n</code></pre>\n"},{"answer_id":63356130,"body":"<p>Add @Component annotation just above the component definition</p>\n"},{"answer_id":65533924,"body":"<p>This error can occur if there are syntax errors with Derived Query Methods. For example, if there are some mismatches with entity class fields and the Derived methods' names.</p>\n"},{"answer_id":69278893,"body":"<p>I was facing this issue because of duplicate column name <strong>staffId</strong> and <strong>staff_id</strong> in same entity class.</p>\n<pre><code>    private Integer staffId;\n    @ManyToOne(cascade = CascadeType.ALL, optional = false)\n    @JoinColumn(name = &quot;staff_id&quot;)\n    private User user;\n</code></pre>\n"},{"answer_id":71558885,"body":"<p>My issue got resolved by adding &quot;value&quot; &amp; &quot;nativeQuery&quot; tags in @Query annotation like this:</p>\n<pre><code>@Query(value = &quot;select * from employee e where e.email_address = ?1&quot;, nativeQuery = true)\n</code></pre>\n"},{"answer_id":71997284,"body":"<p>In my case, I was using dependency of <code>spring boot 3</code> in <code>spring boot 4.</code>\nmake sure you use latest dependency version.</p>\n<p>you can find that here <a href=\"https://mvnrepository.com/\" rel=\"nofollow noreferrer\">https://mvnrepository.com/</a></p>\n"},{"answer_id":75013745,"body":"<p>I was facing the same issue. In my <strong>Product Entity Class</strong> I had imported @Id from <code>org.springframework.data.annotation.Id</code> and this was causing the error.</p>\n<p>It was fixed after I change it to <code>import jakarta.persistence.Id;</code></p>\n"},{"answer_id":75637299,"body":"<p>Below one may be one of the reason, I was able to solve my error by doing that.</p>\n<p><strong>Just make sure that the methods you have written in Dao are correct or not, means the method is unique or not.</strong></p>\n"}],"last_activity_date":1684445771,"question_id":41511511,"body":"<p>For several days I have been trying to create a Spring CRUD application. I'm confused.\nI can't solve these errors.</p>\n<blockquote>\n<p>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'clientController': Unsatisfied dependency expressed through method 'setClientService' parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'clientService': Unsatisfied dependency expressed through field 'clientRepository'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.kopylov.repository.ClientRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}</p>\n</blockquote>\n<p>And this:</p>\n<blockquote>\n<p>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'clientService': Unsatisfied dependency expressed through field 'clientRepository'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.kopylov.repository.ClientRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}</p>\n</blockquote>\n<p><strong>ClientController</strong></p>\n<pre><code>@Controller\npublic class ClientController {\n    private ClientService clientService;\n\n    @Autowired\n    @Qualifier(&quot;clientService&quot;)\n    public void setClientService(ClientService clientService) {\n        this.clientService = clientService;\n    }\n\n    @RequestMapping(value = &quot;registration/add&quot;, method = RequestMethod.POST)\n    public String addUser(@ModelAttribute Client client) {\n        this.clientService.addClient(client);\n        return &quot;home&quot;;\n    }\n}\n</code></pre>\n<p><strong>ClientServiceImpl</strong></p>\n<pre><code>@Service(&quot;clientService&quot;)\npublic class ClientServiceImpl implements ClientService {\n\n    private ClientRepository clientRepository;\n\n    @Autowired\n    @Qualifier(&quot;clientRepository&quot;)\n    public void setClientRepository(ClientRepository clientRepository) {\n        this.clientRepository = clientRepository;\n    }\n\n    @Transactional\n    public void addClient(Client client) {\n        clientRepository.saveAndFlush(client);\n    }\n}\n</code></pre>\n<p><strong>ClientRepository</strong></p>\n<pre><code>public interface ClientRepository extends JpaRepository&lt;Client, Integer&gt; {\n\n}\n</code></pre>\n<p>I looked through a lot of similar questions, but not one answer to them helps me.</p>\n"},{"answers":[{"answer_id":43203748,"body":"<p>I finally figured it out.</p>\n<p>Since no one knew how to help me, I dropped the designated Google libraries and made my own token verification from scratch.</p>\n<p>I used the google-token-verifier-url-tool here:</p>\n<p><a href=\"https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=XYZ123\" rel=\"nofollow noreferrer\">https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=XYZ123</a></p>\n<p>At the bottom of the page here:</p>\n<p><a href=\"https://developers.google.com/identity/protocols/OpenIDConnect\" rel=\"nofollow noreferrer\">https://developers.google.com/identity/protocols/OpenIDConnect</a></p>\n<p>I found how to decipher the JSON.</p>\n<p>What I did was, I contact their online tool in code, get the JSONresponse and verify it manually.\nThis is my code:</p>\n<pre><code>    private Map&lt;String,String&gt; getMapFromGoogleTokenString(final String idTokenString){\n        BufferedReader in = null;\n        try {\n            // get information from token by contacting the google_token_verify_tool url :\n            in = new BufferedReader(new InputStreamReader(\n                                        ((HttpURLConnection) (new URL(&quot;https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=&quot; + idTokenString.trim()))\n                                        .openConnection()).getInputStream(), Charset.forName(&quot;UTF-8&quot;)));\n            \n            // read information into a string buffer :\n            StringBuffer b = new StringBuffer();\n            String inputLine;\n            while ((inputLine = in.readLine()) != null){\n                b.append(inputLine + &quot;\\n&quot;);\n            }\n            \n            // transforming json string into Map&lt;String,String&gt; :\n            ObjectMapper objectMapper = new ObjectMapper();\n            return objectMapper.readValue(b.toString(), objectMapper.getTypeFactory().constructMapType(Map.class, String.class, String.class));\n            \n        // exception handling :\n        } catch (MalformedURLException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        } catch(Exception e){\n            System.out.println(&quot;\\n\\n\\tFailed to transform json to string\\n&quot;);\n            e.printStackTrace();\n        } finally{\n            if(in!=null){\n                try {\n                    in.close();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n        return null;\n    }\n    \n    // chack the &quot;email_verified&quot; and &quot;email&quot; values in token payload \n    private boolean verifyEmail(final Map&lt;String,String&gt; tokenPayload){\n        if(tokenPayload.get(&quot;email_verified&quot;)!=null &amp;&amp; tokenPayload.get(&quot;email&quot;)!=null){\n            try{\n                return Boolean.valueOf(tokenPayload.get(&quot;email_verified&quot;)) &amp;&amp; tokenPayload.get(&quot;email&quot;).contains(&quot;@gmail.&quot;);\n            }catch(Exception e){\n                System.out.println(&quot;\\n\\n\\tCheck emailVerified failed - cannot parse &quot;+tokenPayload.get(&quot;email_verified&quot;)+&quot; to boolean\\n&quot;);\n            }\n        }else{\n            System.out.println(&quot;\\n\\n\\tCheck emailVerified failed - required information missing in the token&quot;);\n        }\n        return false;\n    }\n    \n    // check token expiration is after now :\n    private boolean checkExpirationTime(final Map&lt;String,String&gt; tokenPayload){\n        try{\n            if(tokenPayload.get(&quot;exp&quot;)!=null){\n                // the &quot;exp&quot; value is in seconds and Date().getTime is in mili seconds\n                return Long.parseLong(tokenPayload.get(&quot;exp&quot;)+&quot;000&quot;) &gt; new java.util.Date().getTime();\n            }else{\n                System.out.println(&quot;\\n\\n\\tCheck expiration failed - required information missing in the token\\n&quot;);\n            }\n        }catch(Exception e){\n            System.out.println(&quot;\\n\\n\\tCheck expiration failed - cannot parse &quot;+tokenPayload.get(&quot;exp&quot;)+&quot; into long\\n&quot;);\n        }\n        return false;\n    }\n    \n    // check that at least one CLIENT_ID matches with token values\n    private boolean checkAudience(final Map&lt;String,String&gt; tokenPayload){\n        if(tokenPayload.get(&quot;aud&quot;)!=null &amp;&amp; tokenPayload.get(&quot;azp&quot;)!=null){\n            List&lt;String&gt; pom = Arrays.asList(&quot;MY_CLIENT_ID_1&quot;,\n                                             &quot;MY_CLIENT_ID_2&quot;,\n                                             &quot;MY_CLIENT_ID_3&quot;);\n            \n            if(pom.contains(tokenPayload.get(&quot;aud&quot;)) || pom.contains(tokenPayload.get(&quot;azp&quot;))){\n                return true;\n            }else{\n                System.out.println(&quot;\\n\\n\\tCheck audience failed - audiences differ\\n&quot;);\n                return false;\n            }\n        }\n        System.out.println(&quot;\\n\\n\\tCheck audience failed - required information missing in the token\\n&quot;);\n        return false;\n    }\n    \n    // verify google token payload :\n    private boolean doTokenVerification(final Map&lt;String,String&gt; tokenPayload){\n        if(tokenPayload!=null){\n            return verifyEmail(tokenPayload) // check that email address is verifies \n                &amp;&amp; checkExpirationTime(tokenPayload) // check that token is not expired\n                &amp;&amp; checkAudience(tokenPayload) // check audience\n                ; \n        }\n        return false;\n    }\n</code></pre>\n<p>Once I have had this detailed verification, I was able to see exactly where the mistake was. The front end was sending me an invalid CLIENT_ID value. [<strong>grumble, grumble</strong>] I have asked them about it about a hundred times and they told me that those values match. <strong>BAH !</strong></p>\n<p>So the mistake was not somewhere in my original code for token verification, it was an error in communication in my office.</p>\n<p>I will revert to the original code, with the proper CLIENT_ID this time for the sake of security. Still, I must make one complaint about the Google library - it never told me why the token verification was failing. It took me DAYS of painstaking effort to finally figure it out. I know they did it out of security, but still, the lack of support is galling.</p>\n"},{"answer_id":51074057,"body":"<p>Had similar issue. It was so stupid, but I just have wrong time on my server. I think verification always fail because expiration time of token is end in my server time universe.</p>\n"},{"answer_id":66457568,"body":"<p>For those who still having this issue:</p>\n<ol>\n<li><p>Try python example(<a href=\"https://developers.google.com/identity/sign-in/web/backend-auth#python\" rel=\"nofollow noreferrer\">https://developers.google.com/identity/sign-in/web/backend-auth#python</a>) to ensure that you are using right CLIENT_ID, if no, you will see exception message with right CLIENT_ID</p>\n</li>\n<li><p>Use <code>com.google.api-client</code> of version <code>1.31.3</code> and <code>com.google.oauth-client</code> of version <code>1.31.4</code></p>\n</li>\n<li><p>Use <code>com.google.api.client.json.gson.GsonFactory</code> as <code>JsonFactory</code></p>\n</li>\n</ol>\n"},{"answer_id":68512773,"body":"<p>I solved my problem by sending <code>idToken</code> and not <code>authToken</code> from the client</p>\n"},{"answer_id":71355568,"body":"<p>Not sure if anyone is still looking at this, but the code from google GitHub actually solved this for me.\n<a href=\"https://github.com/googlearchive/gplus-verifytoken-java/tree/master/src/com/google/plus/samples/verifytoken\" rel=\"nofollow noreferrer\">https://github.com/googlearchive/gplus-verifytoken-java/tree/master/src/com/google/plus/samples/verifytoken</a></p>\n<p>They mention that the project is no longer actively maintained, and remains there as an archive of this work though.</p>\n"},{"answer_id":73765022,"body":"<p>I found two reasons of why it can happen.</p>\n<ol>\n<li>There is a CLIENT_ID mismatch between the Spring boot server and the frontend library.</li>\n<li>The token id which is generated upon Sign in with Google is expired. It generally expires after 1 hour.</li>\n</ol>\n<p>Solution to refresh the auth token:</p>\n<p>We get a reloadAuthResponse method on the response object upon successful sign in. Also, we get the expires_in property which gives us the number of milliseconds after which the token will expire. Following is the code snippet to use it.</p>\n<pre><code>const handleSuccessfulGoogleResponse = (response) =&gt; {\n console.log(response)\n const loginDetails = {\n   name: response.profileObj.name,\n   email: response.profileObj.email,\n   tokenId: response.tokenId\n }\n //Do what is needed with the data\n refreshTokenGenerator(response);\n}\n\nconst refreshTokenGenerator = res =&gt; {\n let refreshTime = (res.tokenObj.expires_in || 3600 - 50 * 60) * 1000;\n const refreshToken = async () =&gt; {\n    console.log('running at ',new Date(Date.now()).toLocaleTimeString());\n    const refreshedResponse = await res.reloadAuthResponse();\n    refreshTime = (refreshedResponse.expires_in || 3600 - 50 * 60) * \n   1000;\n\n   const newTokenId = refreshedResponse.id_token;\n   //store the newTokenId and use it for the network calls\n    setTimeout(refreshToken, refreshTime);\n }\n setTimeout(refreshToken, refreshTime);\n}\n</code></pre>\n<p>Here, the handleSuccessfulGoogleResponse() is executed upon a successful sign in. We are calling the refreshTokenGenerator() inside it which uses the expires_in property(if it exists otherwise 3600ms by default). We are then using setTimeout() to execute the function to generate the new token before the current one expires.</p>\n"}],"last_activity_date":1684445680,"question_id":43043526,"body":"<p>I am adding Google register/signin to my web app and I have encountered a problem.</p>\n<p>This is my code:</p>\n<pre><code>private static final HttpTransport transport = new NetHttpTransport();\nprivate static final JsonFactory jsonFactory = new JacksonFactory();\nprivate static final String MY_APP_GOOGLE_CLIENT_ID = &quot;wouldntyouliketoknow&quot;;\n\npublic UsernamePasswordAuthenticationToken verify(final String idTokenString){\n    \n    GoogleIdTokenVerifier verifier = new GoogleIdTokenVerifier.Builder(transport, jsonFactory)\n                                            .setAudience(Collections.singletonList(MY_APP_GOOGLE_CLIENT_ID))\n                                            .build();\n\n    try {\n        GoogleIdToken idToken = verifier.verify(idTokenString);// &lt;-- verifier.verify returns null !!!\n        if (idToken != null) {\n            Payload payload = idToken.getPayload();\n            String email = payload.getEmail();\n            if(Boolean.valueOf(payload.getEmailVerified())){\n                UserJPA jpa = userRepository.findByEmail(email);\n                if(jpa==null){\n                    throw new UsernameNotFoundException(&quot;Cannot find user with email = &quot;+email);\n                }\n                if(!jpa.isRegisterredWithGoogle()){\n                    throw new UsernameNotFoundException(&quot;This user did not use the 'Register with google' option.&quot;);\n                }\n                bokiAuthenticationProvider.checkUserActiveAndUnlocked(jpa);\n\n                return new UsernamePasswordAuthenticationToken(jpa.getUsername(), jpa.getPasswordHesh(), \n                        bokiAuthenticationProvider.getAuthorities(jpa.getUserHasRoleSecurityList()));\n            }\n        }else{\n            System.out.println(&quot;The *idToken* object is null !!!&quot;);\n        }\n    } catch (GeneralSecurityException | IOException e) {\n        e.printStackTrace();\n    }\n\n    throw new MyCustomException(&quot;Google token is invalid or has expired&quot;);\n}\n</code></pre>\n<p>To create my CLIENT_ID, I followed the instructions in the link below:</p>\n<p><a href=\"https://developers.google.com/identity/sign-in/web/devconsole-project\" rel=\"nofollow noreferrer\">https://developers.google.com/identity/sign-in/web/devconsole-project</a></p>\n<p>The problem is that <strong>verifier.verify</strong> keeps returning <strong>null</strong>.</p>\n<p>I have checked:</p>\n<ul>\n<li><p>my user did register with google and the database fields are properly filled</p>\n</li>\n<li><p>I am getting different string tokens from google each time I try google_sign_in</p>\n</li>\n<li><p>my <strong>CLIENT_ID</strong> is valid and active in the Google console.</p>\n</li>\n</ul>\n<p>To add to the confusion, this whole thing worked fine just a month ago. I went away on sick leave and when I came back, my boss welcomed me with this issue.</p>\n<p>Anyone have any idea what might have happened?</p>\n"},{"comments":[{"comment_id":113349933,"body":"In the title, you ask “How many String objects are created…”, in the body text, you ask “how many objects will be created…”. This is not the same. Further, the last sentence creates an entirely different question."}],"answers":[{"comments":[{"comment_id":113309373,"body":"So <code>toUpperCase</code>, as an implementation detail, can potentially return the same object as well?"},{"comment_id":113309475,"body":"In theory, yes.  And in practice, yes in Java 11."}],"answer_id":64076782,"body":"<p>The answer is ... it depends.</p>\n<p>The one thing that we can say with certainty is that neither <code>toUpperCase()</code> or <code>subString()</code> will place a <code>String</code> in the string pool<sup>1</sup>.  The only <code>String</code> operation that is specified as (possibly) adding a <code>String</code> to the string pool is <code>intern()</code>.</p>\n<p>We cannot say for certain that <code>toUpperCase()</code> and <code>subString()</code> will generate a new <code>String</code> object.  For example, in Java 11 <code>str.substring(0)</code> returns <code>str</code> itself.  This is an implementation detail, but the javadocs for many operations are worded so that it would be valid to return <code>this</code> ... if <code>this</code> satisfied the requirements.</p>\n<p>In the cases when a new <code>String</code> is created, it is implementation dependent how may objects are created.  A Java string is typically represented as a <code>String</code> object with a reference to an backing <code>char[]</code> or <code>byte[]</code> that represent the string's characters.  But in some Java releases, a backing array can be shared between multiple <code>String</code> objects ... under certain circumstances.  And indeed <code>substring</code> was one of the methods that would create <code>String</code> with shared backing arrays.</p>\n<p>Finally, as a commenter pointed out, this stuff is irrelevant to real world Java programming ... in all but the most extreme circumstances.  Normally, you should just let the JVM deal with this kind of stuff.</p>\n<hr />\n<p><sup>1 - It is the string pool not the &quot;constant string pool&quot;.  The &quot;constant pool&quot; is actually something that exists in class files.  But the string pool may contain strings that do not correspond to Java constants.</sup></p>\n"},{"answer_id":76276751,"body":"<p>No.</p>\n<p>You can test it by running the following code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    String s = new String(&quot;Hello&quot;);\n    String upperS = &quot;HELLO&quot;;\n    String s1 = s.toUpperCase();\n    System.out.println(s==s1);  //prints false\n    System.out.println(upperS==s1);  //prints false\n</code></pre>\n<p>From <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-3.html#:%7E:text=a%20string%20literal%20always%20refers%20to%20the%20same%20instance%20of%20class%20String.%20This%20is%20because%20string%20literals%20%2D%20or%2C%20more%20generally%2C%20strings%20that%20are%20the%20values%20of%20constant%20expressions%20(%C2%A715.29)%20%2D%20are%20%22interned%22%20so%20as%20to%20share%20unique%20instances%2C%20as%20if%20by%20execution%20of%20the%20method%20String.intern%20(%C2%A712.5)\" rel=\"nofollow noreferrer\">§3.10.5</a> of the Java documentation:</p>\n<blockquote>\n<p>…a string literal always refers to the same instance of class String. This is because string literals - or, more generally, strings that are the values of constant expressions (§15.29) - are &quot;interned&quot; so as to share unique instances, as if by execution of the method String.intern (§12.5).</p>\n</blockquote>\n<p>So, the String Pool holds only string literals from the Java source code (expressions like <code>&quot;abc&quot;</code>) and strings that have had their <code>.intern</code> method called.</p>\n<p>In your code the following line creates a String object on the heap, but not a literal in the String Pool.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    String s = new String(&quot;Hello&quot;);\n</code></pre>\n<p>The following line also creates another object in the Heap and doesn't create a literal in the String Pool.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    String s1 = s.toUpperCase();\n</code></pre>\n<p>So, in your example. 2 objects will be created in the heap. No new literals will be added to the String Pool.</p>\n<p>Take a look at this <a href=\"https://stackoverflow.com/questions/46398042/string-touppercase-created-a-new-object-in-heap-or-string-pool\">answer</a></p>\n"},{"answer_id":76277279,"body":"<p>Correct me if I'm wrong; the &quot;String Constant pool&quot; is just a section of the heap, specifically for <code>String</code> values.<br />\nSo, what is created in the heap, is the pool you're referring to.</p>\n<p>It's +2 <code>String</code> objects for <code>String s = new String(&quot;Hello&quot;)</code>.<br />\nAnd, +1 <code>String</code> object for <code>String s1 = s.toUpperCase()</code>.</p>\n<p>Additionally, most IDEs allow you to view the memory during a debugging process.</p>\n"}],"last_activity_date":1684445342,"question_id":64076617,"body":"<p>How many objects are created by the following 2 lines of Java code?</p>\n<pre><code>String s = new String(&quot;Hello&quot;);\nString s1 = s.toUpperCase();\n</code></pre>\n<p>I know toUpperCase() will create a new object in the heap. But I want to know if it will also be placed in the String pool.</p>\n"},{"comments":[{"comment_id":41043565,"body":"Related: <a href=\"http://stackoverflow.com/q/218608\">A good library to do URL Query String manipulation in Java</a>"},{"comment_id":41113555,"body":"@Mridang Agarwalla Does my answer solve your problem? Let me know if you require any more information."},{"comment_id":73829302,"body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/883136/what-is-the-idiomatic-way-to-compose-a-url-or-uri-in-java\">What is the idiomatic way to compose a URL or URI in Java?</a>"}],"answers":[{"comments":[{"comment_id":109935332,"body":"@Charlie Correct a ternary would reduce line count, but may also reduce readability"},{"comment_id":109936588,"body":"It eliminates some variables too which means less complexity."},{"comment_id":109936985,"body":"@Charlie I&#39;ve added alternative to my answer with ternary."},{"comment_id":109941194,"body":"Even simpler, don&#39;t bother pulling out the bits, you really just need to know if you should use a ? or a &amp;, which the ternary would do: return uri + new URI(uri).getQuery() == null ? &quot;?&quot; : &quot;&amp;&quot; + appendQuery;"},{"comment_id":112248382,"body":"Here it is assumed that <code>appendQuery</code> is escaped properly and not called like: <code>uri = appendUri(uri, &quot;foo=&quot; + bar)</code>.  I&#39;d strongly prefer an API with distinct <code>name</code> and <code>value</code> parameters and then have the escaping done <i>inside</i> <code>appendQuery</code>"},{"comment_id":120022892,"body":"Downvote because it is insecure. String concatenation is vulnerable to parameter injection as the added value is not encoded."}],"answer_id":26177982,"body":"<p>This can be done by using the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/URI.html\" rel=\"noreferrer\">java.net.URI</a> class to construct a new instance using the parts from an existing one, this should ensure it conforms to URI syntax.</p>\n\n<p>The query part will either be null or an existing string, so you can decide to append another parameter with &amp; or start a new query.</p>\n\n<pre><code>public class StackOverflow26177749 {\n\n    public static URI appendUri(String uri, String appendQuery) throws URISyntaxException {\n        URI oldUri = new URI(uri);\n\n        String newQuery = oldUri.getQuery();\n        if (newQuery == null) {\n            newQuery = appendQuery;\n        } else {\n            newQuery += \"&amp;\" + appendQuery;  \n        }\n\n        return new URI(oldUri.getScheme(), oldUri.getAuthority(),\n                oldUri.getPath(), newQuery, oldUri.getFragment());\n    }\n\n    public static void main(String[] args) throws Exception {\n        System.out.println(appendUri(\"http://example.com\", \"name=John\"));\n        System.out.println(appendUri(\"http://example.com#fragment\", \"name=John\"));\n        System.out.println(appendUri(\"http://example.com?email=john.doe@email.com\", \"name=John\"));\n        System.out.println(appendUri(\"http://example.com?email=john.doe@email.com#fragment\", \"name=John\"));\n    }\n}\n</code></pre>\n\n<p>Shorter alternative</p>\n\n<pre><code>public static URI appendUri(String uri, String appendQuery) throws URISyntaxException {\n    URI oldUri = new URI(uri);\n    return new URI(oldUri.getScheme(), oldUri.getAuthority(), oldUri.getPath(),\n            oldUri.getQuery() == null ? appendQuery : oldUri.getQuery() + \"&amp;\" + appendQuery, oldUri.getFragment());\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>http://example.com?name=John\nhttp://example.com?name=John#fragment\nhttp://example.com?email=john.doe@email.com&amp;name=John\nhttp://example.com?email=john.doe@email.com&amp;name=John#fragment\n</code></pre>\n"},{"answer_id":26178003,"body":"<p>Use the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/net/URI.html\" rel=\"noreferrer\"><code>URI</code></a> class.</p>\n\n<p>Create a new <code>URI</code> with your existing <code>String</code> to \"break it up\" to parts, and instantiate another one to assemble the modified url:</p>\n\n<pre><code>URI u = new URI(\"http://example.com?email=john@email.com&amp;name=John#fragment\");\n\n// Modify the query: append your new parameter\nStringBuilder sb = new StringBuilder(u.getQuery() == null ? \"\" : u.getQuery());\nif (sb.length() &gt; 0)\n    sb.append('&amp;');\nsb.append(URLEncoder.encode(\"paramName\", \"UTF-8\"));\nsb.append('=');\nsb.append(URLEncoder.encode(\"paramValue\", \"UTF-8\"));\n\n// Build the new url with the modified query:\nURI u2 = new URI(u.getScheme(), u.getAuthority(), u.getPath(),\n    sb.toString(), u.getFragment());\n</code></pre>\n"},{"answer_id":37062788,"body":"<p>There are plenty of libraries that can help you with URI building (don't reinvent the wheel). Here are three to get you started:</p>\n\n<hr>\n\n<h3><a href=\"http://search.maven.org/#artifactdetails%7Cjavax%7Cjavaee-api%7C7.0%7Cjar\" rel=\"noreferrer\">Java EE 7</a></h3>\n\n\n\n<pre><code>import javax.ws.rs.core.UriBuilder;\n...\nreturn UriBuilder.fromUri(url).queryParam(key, value).build();\n</code></pre>\n\n<hr>\n\n<h3><a href=\"http://search.maven.org/#artifactdetails%7Corg.apache.httpcomponents%7Chttpclient%7C4.5.2%7Cjar\" rel=\"noreferrer\">org.apache.httpcomponents:httpclient:4.5.2</a></h3>\n\n\n\n<pre><code>import org.apache.http.client.utils.URIBuilder;\n...\nreturn new URIBuilder(url).addParameter(key, value).build();\n</code></pre>\n\n<hr>\n\n<h3><a href=\"http://search.maven.org/#artifactdetails%7Corg.springframework%7Cspring-web%7C4.2.5.RELEASE%7Cjar\" rel=\"noreferrer\">org.springframework:spring-web:4.2.5.RELEASE</a></h3>\n\n\n\n<pre><code>import org.springframework.web.util.UriComponentsBuilder;\n...\nreturn UriComponentsBuilder.fromUriString(url).queryParam(key, value).build().toUri();\n</code></pre>\n\n<hr>\n\n<p><strong>See also:</strong> <a href=\"https://gist.github.com/nickgrealy/b4f35bf5e5e5a444aff20c4616b51513\" rel=\"noreferrer\">GIST > URI Builder Tests</a></p>\n"},{"comments":[{"comment_id":112248332,"body":"WARNING: Escape all components of <code>parameters</code> properly. Imagine I came with a value like <code>foo&amp;bar=45</code>..."}],"answer_id":53225089,"body":"<p>I suggest an improvement of the Adam's answer accepting HashMap as parameter</p>\n\n<pre><code>/**\n * Append parameters to given url\n * @param url\n * @param parameters\n * @return new String url with given parameters\n * @throws URISyntaxException\n */\npublic static String appendToUrl(String url, HashMap&lt;String, String&gt; parameters) throws URISyntaxException\n{\n    URI uri = new URI(url);\n    String query = uri.getQuery();\n\n    StringBuilder builder = new StringBuilder();\n\n    if (query != null)\n        builder.append(query);\n\n    for (Map.Entry&lt;String, String&gt; entry: parameters.entrySet())\n    {\n        String keyValueParam = entry.getKey() + \"=\" + entry.getValue();\n        if (!builder.toString().isEmpty())\n            builder.append(\"&amp;\");\n\n        builder.append(keyValueParam);\n    }\n\n    URI newUri = new URI(uri.getScheme(), uri.getAuthority(), uri.getPath(), builder.toString(), uri.getFragment());\n    return newUri.toString();\n}\n</code></pre>\n"},{"comments":[{"comment_id":107500412,"body":"A little bit late, but anyway. Try not to encode the equals symbol. Otherwise it may be problematic by clients to understand the keys and the values"},{"comment_id":115047677,"body":"Why should we encode params? It will throw: &#39;java.io.UnsupportedEncodingException: UTF_8&#39;."},{"comment_id":131528947,"body":"<code>queryParams</code> end up being encoded improperly"}],"answer_id":54520002,"body":"<p>Kotlin &amp; clean, so you don't have to refactor before code review:</p>\n\n<pre><code>private fun addQueryParameters(url: String?): String? {\n        val uri = URI(url)\n\n        val queryParams = StringBuilder(uri.query.orEmpty())\n        if (queryParams.isNotEmpty())\n            queryParams.append('&amp;')\n\n        queryParams.append(URLEncoder.encode(\"$QUERY_PARAM=$param\", Xml.Encoding.UTF_8.name))\n        return URI(uri.scheme, uri.authority, uri.path, queryParams.toString(), uri.fragment).toString()\n    }\n</code></pre>\n"},{"answer_id":59780141,"body":"<p>An update to Adam's answer considering tryp's answer too. Don't have to instantiate a String in the loop.</p>\n\n<pre><code>public static URI appendUri(String uri, Map&lt;String, String&gt; parameters) throws URISyntaxException {\n    URI oldUri = new URI(uri);\n    StringBuilder queries = new StringBuilder();\n\n    for(Map.Entry&lt;String, String&gt; query: parameters.entrySet()) {\n        queries.append( \"&amp;\" + query.getKey()+\"=\"+query.getValue());\n    }\n\n    String newQuery = oldUri.getQuery();\n    if (newQuery == null) {\n        newQuery = queries.substring(1);\n    } else {\n        newQuery += queries.toString();\n    }\n\n    URI newUri = new URI(oldUri.getScheme(), oldUri.getAuthority(),\n            oldUri.getPath(), newQuery, oldUri.getFragment());\n\n    return newUri;\n}\n</code></pre>\n"},{"comments":[{"comment_id":119497411,"body":"This is exactly the solution I was especting, thanks"}],"answer_id":63723801,"body":"<p>For android, Use:\n<a href=\"https://developer.android.com/reference/android/net/Uri#buildUpon()\" rel=\"noreferrer\">https://developer.android.com/reference/android/net/Uri#buildUpon()</a></p>\n<pre><code>URI oldUri = new URI(uri);\nUri.Builder builder = oldUri.buildUpon();\n builder.appendQueryParameter(&quot;newParameter&quot;, &quot;dummyvalue&quot;);\n Uri newUri =  builder.build();\n</code></pre>\n"},{"answer_id":74950389,"body":"<p>Use this function to append a new parameter to your existing URI</p>\n<pre><code> private Uri appendUriParameter(Uri uri, String key, String newValue) {\n        final Set&lt;String&gt; params = uri.getQueryParameterNames();\n        final Uri.Builder newUri = uri.buildUpon().clearQuery();\n        for (String param : params) {\n          newUri.appendQueryParameter(param, uri.getQueryParameter(param));\n        }\n        newUri.appendQueryParameter(key, newValue);\n    \n        return newUri.build();\n      }\n</code></pre>\n"},{"answer_id":76272460,"body":"<p>Using lambda and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/StringJoiner.html\" rel=\"nofollow noreferrer\">StringJoiner</a>, code can be more concise:</p>\n<pre><code>public static URI appendUri(String url, Map&lt;String, String&gt; parameters) throws URISyntaxException {\n    final var uri = new URI(url);\n    final var sj = new StringJoiner(&quot;&amp;&quot;);\n\n    parameters.forEach((name, value) -&gt; sj.add(name + &quot;=&quot; + value));\n    final var query = uri.getQuery() == null ? sj.toString() : sj.length() &gt; 0 ? uri.getQuery() + &quot;&amp;&quot; + sj : uri.getQuery();\n\n    return new URI(uri.getScheme(), uri.getUserInfo(), uri.getHost(), uri.getPort(), uri.getPath(), query, uri.getFragment());\n}\n</code></pre>\n"}],"last_activity_date":1684445167,"question_id":26177749,"body":"<p>I'd like to append key-value pair as a query parameter to an existing URL. While I could do this by checking for the existence of whether the URL has a query part or a fragment part and doing the append by jumping though a bunch of if-clauses but I was wondering if there was clean way if doing this through the Apache Commons libraries or something equivalent.</p>\n\n<p><code>http://example.com</code> would be <code>http://example.com?name=John</code></p>\n\n<p><code>http://example.com#fragment</code> would be <code>http://example.com?name=John#fragment</code></p>\n\n<p><code>http://example.com?email=john.doe@email.com</code> would be <code>http://example.com?email=john.doe@email.com&amp;name=John</code></p>\n\n<p><code>http://example.com?email=john.doe@email.com#fragment</code> would be <code>http://example.com?email=john.doe@email.com&amp;name=John#fragment</code></p>\n\n<p>I've run this scenario many times before and I'd like to do this without breaking the URL in any way.</p>\n"},{"comments":[{"comment_id":127631736,"body":"I don&#39;t know <a href=\"https://stackoverflow.com/questions/tagged/json\">json</a>, but you can construct an <a href=\"https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/image/Image.html\" rel=\"nofollow noreferrer\"><code>Image</code></a> with a URL of type <code>String</code>."},{"comment_id":127637252,"body":"What is the output from the last <code>System.out.println(…)</code>?"},{"comment_id":127641270,"body":"Don&#39;t use a <code>FileInputStream</code>, just pass the url you need directly to the Image constructor.  I know json, but I don&#39;t know gson, so can&#39;t advise on the rest of your code."},{"comment_id":127642263,"body":"@James_D Output:<a href=\"https://tse2.mm.bing.net/th?id=OIP.wNDH2qSu6oOl48-p3c9wkQHaGL&amp;amp\" rel=\"nofollow noreferrer\">tse2.mm.bing.net/th?id=OIP.wNDH2qSu6oOl48-p3c9wkQHaGL&zwnj;&#8203;&amp;amp</a> for ex."},{"comment_id":127643201,"body":"I asked what the output from the <code>System.out.println(…)</code> statement was. What is the value of <code>path</code>?"},{"comment_id":127643403,"body":"The value of path is the image URL."},{"comment_id":127648837,"body":"So why don’t you just do <code>Image image = new Image(path);</code>?"}],"answers":[{"answer_id":76284175,"body":"<p>To quote <a href=\"https://openjfx.io/javadoc/17/javafx.graphics/javafx/scene/image/Image.html\" rel=\"nofollow noreferrer\">the Javadoc</a>:</p>\n<pre><code>Image image3 = new Image(&quot;http://sample.com/res/flower.png&quot;, 100, 0, false, false);\n</code></pre>\n<p>Just pass your desired URL to the constructor.</p>\n"}],"last_activity_date":1684444693,"question_id":72238818,"body":"<p>I want to take the url of a image from a API, which I did. I also get the URL of the image that I want, but the image doesn't display in the JavaFX Scene.</p>\n<pre><code>String json2=readUrl(&quot;https://imsea.herokuapp.com/api/1?q=moon&quot;);\nimages.Images i=gson.fromJson(json2,images.Images.class);\nSystem.out.println(i.getResult1());\nString path = i.getResult1();\nImage image = new Image(new FileInputStream(i.getResult1()));\nimg_spaceObject.setImage(image);\n</code></pre>\n<p>*Update: I did that by first downloading the image and then displaying it, but I wanted a short version, as I mentioned before.</p>\n"},{"answers":[{"comments":[{"comment_id":10103444,"body":"The exact code for me that worked was      System.setProperty(&quot;sun.java2d.d3d&quot;, &quot;false&quot;);     System.setProperty(&quot;sun.java2d.noddraw&quot;, &quot;true&quot;);"},{"comment_id":10103511,"body":"Halfwarr: Oh, ok. Hadn&#39;t expected it."}],"answer_id":8217268,"body":"<p>Yes, you can use <a href=\"http://download.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#setProperty%28java.lang.String,%20java.lang.String%29\" rel=\"noreferrer\"><code>System.setProperty(property, value);</code></a> at the beginning of your program. Eg:</p>\n\n<pre><code>public static void main(String[] args)\n{\n    System.setProperty(\"sun.java2d.d3d\", \"false\");\n    System.setProperty(\"sun.java2d.noddraw\", \"true\");\n\n    // Start your real application\n}\n</code></pre>\n"},{"comments":[{"comment_id":134524969,"body":"This is an eleven year old question."}],"answer_id":76284203,"body":"<p><code>System.setProperty(&quot;sun.java2d.noddraw&quot;, &quot;true&quot;);</code> alone was enough to do it.</p>\n<p>We had been seeing massive screen tearing (or artifacts getting drawn) in our Java application with more new, powerful computers (e.g. with NVidia GTX 3090 card etc.), but not with all DirectX 12 setups.</p>\n<p>The common way to get this issue to materialize was that when we displayed tooltip popups or when a menu-panel went outside the client frame (or canvas), screen tearing of sorts started happening. Basically, the whole application screen was getting then drawn, starting at the point of action (for example, at the point of blinking cursor or a graphical element that you moved your mouse over).</p>\n<p>We had during trying to fix this, implemented in multiple locations those revalidate(); and repaint(); functions, but there were still plenty of ways it was breaking. However, the above solved our issue once and for all.</p>\n"}],"last_activity_date":1684444680,"question_id":8217243,"body":"<p>I currently had a problem similar to this previous question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/3602590/why-would-our-java-app-not-display-windows-on-secondary-monitor\">Why would our Java app not display windows on secondary monitor?</a></p>\n\n<p>The answer was to include:</p>\n\n<ul>\n<li>Dsun.java2d.d3d=false</li>\n<li>Dsun.java2d.noddraw=true</li>\n</ul>\n\n<p>So I created my shortcut to launch the application as such:</p>\n\n<pre><code>C:\\WINDOWS\\system32\\javaw.exe -Dsun.java2d.d3d=false  -Dsun.java2d.noddraw=true -jar &lt;file name&gt;\n</code></pre>\n\n<p>Is there anyway to force that application to use that in code and not have to use parameters?</p>\n"},{"answers":[{"comments":[{"comment_id":97704122,"body":"Can you show an example on how to set the security context in the reactive way?"},{"comment_id":132478763,"body":"I still didn&#39;t get why I can&#39;t subcribe/block inside the controller method but Spring can do it after method termination"}],"answer_id":51350355,"body":"<p>Since you are using WebFlux, you are handling requests using event-loop.\nYou are not using thread-per-request model anymore, as with Tomcat.</p>\n\n<blockquote>\n  <p>Authentication is stored per context.</p>\n</blockquote>\n\n<p><strong>With Tomcat</strong>, when request arrives, Spring stores <strong>authentication</strong> in <code>SecurityContextHolder</code>.\n<code>SecurityContextHolder</code> uses <code>ThreadLocal</code> variable to store <strong>authentication</strong>. Specific <strong>authentication</strong> object is visible to you, only if you are trying to fetch it from <code>ThreadLocal</code> object, in the same thread, in which it was set.\nThats why you could get <strong>authentication</strong> in controller via static call.\nThreadLocal object knows what to return to you, because it knows your context - your thread.</p>\n\n<p><strong>With WebFlux</strong>, you could handle all requests using just 1 thread.\nStatic call like this won't return expected results anymore:</p>\n\n<p><code>SecurityContextHolder.getContext().getAuthentication();</code></p>\n\n<p>Because there is no way to use ThreadLocal objects anymore.\nThe only way to get Authentication for you, is to ask for it in controller's method signature, or...</p>\n\n<blockquote>\n  <p>Return a reactive-chain from method, that is making a <code>ReactiveSecurityContextHolder.getContext()</code> call.</p>\n</blockquote>\n\n<p>Since you are returning a chain of reactive operators, Spring make a subscription to your chain, in order to execute it.\nWhen Spring does it, <a href=\"https://github.com/spring-projects/spring-security/blob/fb7394c1de60a4a8e564327894d99a6f335905ad/web/src/main/java/org/springframework/security/web/server/context/ReactorContextWebFilter.java#L45\" rel=\"noreferrer\">it provides a security context to whole chain</a>. Thus every call <code>ReactiveSecurityContextHolder.getContext()</code> inside this chain, will return expected data.</p>\n\n<p>Your can read more about Mono/Flux context <a href=\"http://projectreactor.io/docs/core/release/reference/#context\" rel=\"noreferrer\">here</a>, because it is a Reactor-specific feature.</p>\n"},{"comments":[{"comment_id":132478783,"body":"It would better if you share important code snippets on SO"}],"answer_id":57470293,"body":"<p>I also had a similar problem. so, I uploaded my github for ReactiveSecurityContext with JWT Token example.</p>\n\n<blockquote>\n  <p><a href=\"https://github.com/heesuk-ahn/spring-webflux-jwt-auth-example\" rel=\"noreferrer\">https://github.com/heesuk-ahn/spring-webflux-jwt-auth-example</a></p>\n</blockquote>\n\n<p>I hope it helps for you.</p>\n\n<p>We need to create a custom <code>authentication filter</code>.\nIf authentication succeeds in that filter, then it stores the <code>principal</code> information in the <code>ReactiveSecurityHolder</code>. We can access the <code>ReactiveSecurityHolder</code> from the controller.</p>\n"},{"comments":[{"comment_id":132476963,"body":"It works. But the issue here that you don&#39;t always have authentication in an ordinary place"}],"answer_id":70759981,"body":"<p>Today resolved such problem in the next way:</p>\n<pre><code>Authentication authentication = new UserPasswordAuthenticationToken(userCredentials, null, userCredentials.getAuthorities());\n\nReactiveSecurityContextHolder.getContext()\n.map(context -&gt; context.getAuthentication().getPrincipal())\n.cast(UserCredentials.class)\n.contextWrite(ReactiveSecurityContextHolder.withAuthentication(authentication))\n.subscribe();\n</code></pre>\n<p><code>UserCredential.class</code> - is custom class, which contains userId, initials, login and authorities.</p>\n"},{"comments":[{"comment_id":127609292,"body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/72222766/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"answer_id":72222766,"body":"<p>If you want to access the authentication object inside a webfilter, you can do it like this.</p>\n<pre><code>@Override\n  public Mono&lt;Void&gt; filter(ServerWebExchange exchange, @NotNull WebFilterChain chain) {\n    return exchange.getSession().flatMap((session) -&gt; {\n      SecurityContext context = session.getAttribute(SPRING_SECURITY_CONTEXT_ATTR_NAME);\n      logger.debug((context != null)\n              ? LogMessage.format(&quot;Found SecurityContext '%s' in WebSession: '%s'&quot;, context, session)\n              : LogMessage.format(&quot;No SecurityContext found in WebSession: '%s'&quot;, session));\n      if(context == null){\n        return filterHelper(exchange, chain);\n      }else{\n        // access the principal object here \n      }\n\n</code></pre>\n"},{"answer_id":76284487,"body":"<p>In addition to what Alex Derkach said, in more simple terms:</p>\n<pre><code>ReactiveSecurityContextHolder.getContext().map(ctx -&gt; ctx.getAuthentication()).block()\n</code></pre>\n<p>will yield null, because you are disrupting the reactor chain.</p>\n<p>What you can do is <strong>return the Mono object directly inside the RestController</strong>\nThen you will see the authentication context is indeed present.</p>\n"}],"last_activity_date":1684443943,"question_id":51315378,"body":"<p>I've been using ReactiveAuthenticationManager in Spring Security + Webflux. It is customised to return an instance of <code>UsernamePasswordAuthenticationToken</code> which from what I can tell is an what I should be receiving when I call <code>ReactiveSecurityContextHolder.getContext().map(ctx -&gt; ctx.getAuthentication()).block()</code>. As as far as I can tell I am unable to access the authentication context through both:</p>\n\n<pre><code>SecurityContextHolder.getContext().getAuthentication();\n</code></pre>\n\n<p>or </p>\n\n<pre><code>ReactiveSecurityContextHolder.getContext().map(ctx -&gt; ctx.getAuthentication()).block()\n</code></pre>\n\n<p>And attempting to access those from controllers or components resolves to <code>null</code>. I had some doubts about whether I am really returning an <code>Authentication</code> instance in my custom manager and it seems like I am:</p>\n\n<pre><code>@Override\npublic Mono&lt;Authentication&gt; authenticate(final Authentication authentication) {\n    if (authentication instanceof PreAuthentication) {\n        return Mono.just(authentication)\n            .publishOn(Schedulers.parallel())\n            .switchIfEmpty(Mono.defer(this::throwCredentialError))\n            .cast(PreAuthentication.class)\n            .flatMap(this::authenticatePayload)\n            .publishOn(Schedulers.parallel())\n            .onErrorResume(e -&gt; throwCredentialError())\n            .map(userDetails -&gt; new AuthenticationToken(userDetails, userDetails.getAuthorities()));\n    }\n\n    return Mono.empty();\n}\n</code></pre>\n\n<p>Where <code>PreAuthentication</code> is an instance of a <code>AbstractAuthenticationToken</code> and <code>AuthenticationToken</code> extends <code>UsernamePasswordAuthenticationToken</code></p>\n\n<p>Interestingly although <code>ReactiveSecurityContextHolder.getContext().map(ctx -&gt; ctx.getAuthentication()).block()</code> does not work in a controller I can inject the authentication principal with the <code>@AuthenticationPrincipal</code> annotation as a method parameter successfully in a controller. </p>\n\n<p>This seems like a configuration issue but I cannot tell where. Anyone have any idea why I cannot return authentication?</p>\n"},{"comments":[{"comment_id":2083010,"body":"As a programming question, this should be moved to Stack Overflow. (Although I&#39;m sure this has been asked there <i>lots</i> of times already...)"},{"comment_id":2083011,"body":"If you&#39;re just beginning, you might want to state that in your question. Also post what you&#39;ve tried and what problems you&#39;ve encountered. Otherwise you might not get any useful answers."},{"comment_id":2083012,"body":"(I didn&#39;t find any <i>exact</i> duplicates though, with a quick look on SO.)"},{"comment_id":2087500,"body":"goggle &quot;mysql java&quot;, click first match"}],"answers":[{"comments":[{"comment_id":2083256,"body":"Stupid answer. You don&#39;t add any value, and moreover you think you are funny with it. Questions from StackOverflow are in the first pages in Google searches. The point is to have actually an answer, not another google search. If you don&#39;t have anything to answer, then just say nothing. See this question on the meta site for more information: <a href=\"http://meta.stackexchange.com/questions/8724/how-to-deal-with-google-questions\" title=\"how to deal with google questions\">meta.stackexchange.com/questions/8724/&hellip;</a>"},{"comment_id":2227531,"body":"Much better indeed. Thanks for improving that answer."}],"answer_id":2141983,"body":"<p>...if you really are going to use java to query a MySql server you should look further and read some about <a href=\"http://en.wikipedia.org/wiki/Java_Database_Connectivity\" rel=\"nofollow noreferrer\">JDBC</a>, <a href=\"http://www.lalitbhatt.com/tiki-index.php?page=Introduction+to+ORM\" rel=\"nofollow noreferrer\">ORM</a>, <a href=\"http://en.wikipedia.org/wiki/Database_transaction\" rel=\"nofollow noreferrer\">transactions</a> and how this concepts will help you using a database.</p>\n\n<p>You can use JDBC to query an Mysql database, and virtually any other DBMS who have an JDBC driver implemented.</p>\n\n<p>An ORM system provides the programmer with a layer between Objects and Database and makes all the hard work for you (in theory).</p>\n\n<p>Even with the previous point you really need to have some basic knowledge about transactions, that encapsulates your actions in one atomic unit that only executes completely or does not execute at all.</p>\n"},{"answer_id":2142001,"body":"<p><a href=\"http://www.kitebird.com/articles/jdbc.html\" rel=\"nofollow noreferrer\">jdbc-mysql</a></p>\n"},{"comments":[{"comment_id":38606320,"body":"Fantastic answer Adam. You took this hobbyist Java dev from zero to MySQL query in under 15 minutes! And that includes .jar download/install! Uber kudos."}],"answer_id":2142352,"body":"<p>First get your JDBC driver, such as mysql's Connector/J - add the jar to your project.  Then, you can access a database like:</p>\n\n<p>public class mysqlTest {</p>\n\n<pre><code>public static void main(String[] args) {\n    String driver = \"com.mysql.jdbc.Driver\";\n    String protocol = \"jdbc:mysql://localhost/\";\n    String database = \"database\";\n    String username = \"mysqlUsername\";\n    String password = \"mysqlPassword\";\n\n    Properties props = new Properties();\n    props.put(\"user\", username);\n    props.put(\"password\", password);\n\n    Connection conn;\n    Statement s;\n    ResultSet rs;\n\n    String createTableStatment = \"CREATE TABLE test ( `id` INTEGER NOT NULL)\";\n    String insertStatment = \"INSERT INTO test VALUES(1)\";\n    String selectQuery = \"SELECT * FROM test\";\n\n    try {\n        Class.forName(driver).newInstance();\n    } catch (InstantiationException e) {\n        e.printStackTrace();\n    } catch (IllegalAccessException e) {\n        e.printStackTrace();\n    } catch (ClassNotFoundException e) {\n        e.printStackTrace();\n    }\n\n    try {\n        conn = DriverManager.getConnection(protocol + database,props);\n        conn.setAutoCommit(true);\n        s = conn.createStatement();\n        s.execute(createTableStatment);\n        s.execute(insertStatment);\n        rs = s.executeQuery(selectQuery);\n        while (rs.next()){\n            System.out.println(\"id = \"+rs.getString(\"id\"));\n        }\n    } catch (SQLException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>}</p>\n"},{"answer_id":16495988,"body":"<p>You can try <a href=\"https://code.google.com/p/mysql-jdbc-utilities/\" rel=\"nofollow\">MySQL JDBC Utilities</a> API for MySQL connectivity in java.</p>\n"}],"last_activity_date":1684443819,"question_id":2141933,"body":"<p>How can I connect to a MySQL DB and execute queries?</p>\n"},{"answers":[{"answer_id":76284407,"body":"<p>The query with mongo playground:<br />\n<a href=\"https://mongoplayground.net/p/Pp6p7jAimBJ\" rel=\"nofollow noreferrer\">https://mongoplayground.net/p/Pp6p7jAimBJ</a></p>\n<hr />\n<p>Code with Spring data</p>\n<pre><code>@Data\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\n@Document(collection = &quot;stateHistory&quot;)\npublic class DocumentStateHistory {\n\n    @Id\n    private String id;\n\n    private List&lt;StateHistory&gt; stateHistory;\n\n    @Data\n    @Builder\n    public static class StateHistory {\n        private String taskState;\n    }\n\n}\n</code></pre>\n<p>--</p>\n<pre><code>public List&lt;DocumentStateHistory.StateHistory&gt; getTaskStateIn(List&lt;String&gt; lastTaskStateIn) {\n\n        final var stateHistoryField = &quot;stateHistory&quot;;\n\n        var basicProjectStage = project(stateHistoryField).and(stateHistoryField).arrayElementAt(-1).as(&quot;lastElt&quot;);\n\n        ConditionalOperators.Cond condOperation = ConditionalOperators.when(Criteria.where(&quot;lastElt.taskState&quot;).in(lastTaskStateIn))\n                                                                        .thenValueOf(stateHistoryField)\n                                                                        .otherwise(Collections.emptyList());\n        var secondProjectStage = project().and(condOperation).as(stateHistoryField);\n\n\n        var aggregation = Aggregation.newAggregation(basicProjectStage, secondProjectStage, unwind(stateHistoryField), replaceRoot(stateHistoryField));\n        AggregationResults&lt;DocumentStateHistory.StateHistory&gt; results = mongoTemplate.aggregate(aggregation, DocumentStateHistory.class, DocumentStateHistory.StateHistory.class);\n\n        return results.getMappedResults();\n    }\n</code></pre>\n<p>--</p>\n<ul>\n<li><p><strong>Case 1: lastTaskStateIn: [&quot;FINISH&quot;]</strong></p>\n<pre><code>@Override\npublic void run(String... args) throws Exception {\n var lastTaskStateIn = List.of(&quot;FINISH&quot;);\n var aggregationResults = getTaskStateIn(lastTaskStateIn);\n log.info(&quot;Result =&gt; {}&quot;, aggregationResults);\n}\n</code></pre>\n</li>\n</ul>\n<blockquote>\n<p>Result =&gt; [DocumentStateHistory.StateHistory(taskState=DONE),\nDocumentStateHistory.StateHistory(taskState=START),\nDocumentStateHistory.StateHistory(taskState=FINISH)]</p>\n</blockquote>\n<p>--</p>\n<ul>\n<li><p><strong>Case 2: lastTaskStateIn: [&quot;DONE&quot;, &quot;START&quot;]</strong></p>\n<pre><code>@Override\npublic void run(String... args) throws Exception {\n var lastTaskStateIn = List.of(&quot;FINISH&quot;);\n var aggregationResults = getTaskStateIn(lastTaskStateIn);\n log.info(&quot;Result =&gt; {}&quot;, aggregationResults);\n}\n</code></pre>\n</li>\n</ul>\n<blockquote>\n<p>Result =&gt; []</p>\n</blockquote>\n"}],"last_activity_date":1684443697,"question_id":76282236,"body":"<p>i need help to build a query in Spring Boot for mongoDB.</p>\n<p>This is my Document Structure:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n&quot;stateHistory&quot;: [\n    {\n      &quot;taskState&quot;: &quot;DONE&quot;\n    },\n    {\n      &quot;taskState&quot;: &quot;START&quot;\n    },\n    {\n      &quot;taskState&quot;: &quot;FINISH&quot;\n    }\n  ],\n}\n</code></pre>\n<p>I defined already this query, it is returning all Documents, that have in any position of the array stateHistory a taskState that is in the given Array anyTaskStateIn.</p>\n<pre class=\"lang-java prettyprint-override\"><code>query.addCriteria(new Criteria().andOperator(\nCriteria.where(&quot;stateHistory&quot;).elemMatch(Criteria.where(&quot;taskState&quot;).in(anyTaskStateIn))));\n</code></pre>\n<p>Now i want a Query, that is returning all Documents, that has as last value in stateHistory the taskState, that is in the given array lastTaskStateIn.</p>\n<p>In JavaScript i would write it like this:</p>\n<pre class=\"lang-js prettyprint-override\"><code>if(stateHistory[stateHistory.length -1].taskState in lastTaskStateIn){\n   return\n}\n</code></pre>\n<p>In my example document, it would returne the document if the given array lastTaskStateIn would look like this [&quot;FINISH&quot;]\nAnd it would not return, if it look like this [&quot;DONE&quot;, &quot;START&quot;]</p>\n<p>Thanks for your help &lt;3</p>\n"},{"answers":[{"comments":[{"comment_id":134523175,"body":"Thank you, It is working now. I have one question if I want to determine the region based on the phone number&#39;s prefix, should I use null?  Example : Phonenumber.PhoneNumber phoneNumber = phoneNumberUtil.parse(phone,      null);"},{"comment_id":134533698,"body":"no, just use first 2 digit of your phone number to determine your country code or use country code picker - <a href=\"https://github.com/hbb20/CountryCodePickerProject\" rel=\"nofollow noreferrer\">github.com/hbb20/CountryCodePickerProject</a>"}],"answer_id":76284471,"body":"<p>you can try this, use com.google.i18n.phonenumbers</p>\n<pre><code>import com.google.i18n.phonenumbers.PhoneNumberUtil;\nimport com.google.i18n.phonenumbers.Phonenumber;\n\n// ...\n\npublic void sendOTP(String phone) {\nPhoneNumberUtil phoneNumberUtil = PhoneNumberUtil.getInstance();\ntry {\n    Phonenumber.PhoneNumber phoneNumber = phoneNumberUtil.parse(phone, \n    &quot;YOUR_DEFAULT_COUNTRY_CODE&quot;);\n    if (phoneNumberUtil.isValidNumber(phoneNumber)) {\n        String formattedPhoneNumber = phoneNumberUtil.format(phoneNumber, PhoneNumberUtil.PhoneNumberFormat.E164);\n        PhoneAuthOptions options =\n                PhoneAuthOptions.newBuilder(mAuth)\n                        .setPhoneNumber(formattedPhoneNumber)\n                        .setTimeout(60L, TimeUnit.SECONDS)\n                        .setActivity(this)\n                        .setCallbacks(mCallbacks)\n                        .build();\n        PhoneAuthProvider.verifyPhoneNumber(options);\n    } else {\n        Toast.makeText(MainActivity.this, &quot;Invalid phone number&quot;, Toast.LENGTH_SHORT).show();\n    }\n} catch (Exception e) {\n    e.printStackTrace();\n }\n}\n</code></pre>\n"}],"last_activity_date":1684443694,"question_id":76284361,"body":"<p>Firebase captcha check fails and prevents authentication.</p>\n<p>While Entering to the otp field and verify, it shows the error given below in Java :</p>\n<p>[firebase_auth/invalid-phone-number] The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]. [ Invalid format. ]</p>\n<p>I tried numerous ways like entering phone number with country code, with gaps, without gaps but it did't work. I have added the SHA-1 and SHA-256 to the firebase console project &amp; checked all the dependencies in my gradle files.</p>\n<p>Here's the java code :</p>\n<pre><code>package com.example.firebase_phone_verification;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.Toast;\nimport com.google.firebase.FirebaseException;\nimport com.google.firebase.auth.FirebaseAuth;\nimport com.google.firebase.auth.PhoneAuthCredential;\nimport com.google.firebase.auth.PhoneAuthOptions;\nimport com.google.firebase.auth.PhoneAuthProvider;\nimport java.util.concurrent.TimeUnit;\n\npublic class MainActivity extends AppCompatActivity {\n\n    EditText phonenumber, otp;\n    Button sendotp, submit;\n    String phone, verificationId;\n    FirebaseAuth mAuth;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        phonenumber = findViewById(R.id.phonenumber);\n        otp = findViewById(R.id.otp);\n        sendotp = findViewById(R.id.sendotp);\n        submit = findViewById(R.id.submit);\n        mAuth = FirebaseAuth.getInstance();\n\n        sendotp.setOnClickListener(new View.OnClickListener() {\n           \n            public void onClick(View view) {\n\n                phone = phonenumber.getText().toString();\n\n                if(!phone.isEmpty()){\n                    sendOTP(phone);\n                } else{\n                    Toast.makeText(MainActivity.this, &quot;Enter a valid phone number&quot;, Toast.LENGTH_SHORT).show();\n                }\n\n\n            }\n        });\n    }\n\n    private void verifyCode(String code){\n        PhoneAuthCredential credential = PhoneAuthProvider.getCredential(verificationId,code);\n        signInWithPhoneAuthCredential(credential);\n    }\n\n    private void signInWithPhoneAuthCredential(PhoneAuthCredential credential) {\n        mAuth.signInWithCredential(credential)\n                .addOnCompleteListener(this, task -&gt; {\n                    if (task.isSuccessful()) {\n\n                        Toast.makeText(MainActivity.this, &quot;Verification successful&quot;, Toast.LENGTH_SHORT).show();\n\n                    } else {\n\n                        Toast.makeText(MainActivity.this, &quot;Verification failed&quot;, Toast.LENGTH_SHORT).show();\n\n                    }\n                });\n    }\n\n    private PhoneAuthProvider.OnVerificationStateChangedCallbacks\n            mCallbacks =  new PhoneAuthProvider.OnVerificationStateChangedCallbacks() {\n\n        @Override\n        public  void onCodeSent(@NonNull String s, @NonNull PhoneAuthProvider.ForceResendingToken forceResendingToken){\n            super.onCodeSent(s, forceResendingToken);\n            verificationId = s;\n        }\n        @Override\n        public void onVerificationCompleted( PhoneAuthCredential credential) {\n            String code = credential.getSmsCode();\n            if(code != null){\n                otp.setText(code);\n                verifyCode(code);\n                //loading.setVisibility(View.GONE);\n            }\n        }\n\n        @Override\n        public void onVerificationFailed(FirebaseException e) {\n            Toast.makeText(MainActivity.this, e.getMessage(), Toast.LENGTH_SHORT).show();\n        }\n    };\n\n    public void sendOTP(String phone){\n\n        PhoneAuthOptions options =\n                PhoneAuthOptions.newBuilder(mAuth)\n                        .setPhoneNumber(phone)\n                        .setTimeout(60L, TimeUnit.SECONDS)\n                        .setActivity(this)\n                        .setCallbacks(mCallbacks)\n                        .build();\n        PhoneAuthProvider.verifyPhoneNumber(options);\n\n    }\n    \n}\n\n</code></pre>\n"},{"answers":[{"answer_id":34371239,"body":"<p>Try using <code>HttpPost(URI)</code> constructor insted of <code>HttpPost(String)</code>. Think it will work.</p>\n"},{"answer_id":34371323,"body":"<p>Try to add port separately like in code below:</p>\n\n<pre><code>private static final int HTTP_PORT = 8081;\n\nprivate static final String USER_AGENT_NAME = \"http.useragent\";\n\nprivate static final String USER_AGENT_VALUE = \"Mozilla/5.0 (Linux; U; Android 1.1; en-us;dream) AppleWebKit/525.10+ (KHTML, like Gecko) Version/3.0.4 Mobile Safari/523.12.2\";\n\n\nprotected DefaultHttpClient getHttpClient() throws KeyManagementException, UnrecoverableKeyException, \nNoSuchAlgorithmException, KeyStoreException, CertificateException, IOException {\n    if (httpClient == null) {\n\n        SchemeRegistry schemeRegistry = new SchemeRegistry();\n        schemeRegistry.register(new Scheme(\"http\", PlainSocketFactory.getSocketFactory(), HTTP_PORT));\n\n        HttpParams params = new BasicHttpParams();\n        params.setParameter(USER_AGENT_NAME, USER_AGENT_VALUE);\n        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);\n        HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);\n\n        ThreadSafeClientConnManager cm = new ThreadSafeClientConnManager(params, schemeRegistry);\n        httpClient = new DefaultHttpClient(cm, params);\n    }\n    return httpClient;\n}\n</code></pre>\n\n<p>While making HTTP request be sure that port is NOT included more.</p>\n"},{"answer_id":74759811,"body":"<p>With HttpPost, it works when you specify port number as part of http URL, like this:</p>\n<pre><code>HttpClient httpclient = new DefaultHttpClient();\nHttpPost httppost = new HttpPost(&quot;http://100.1.1.1:8081&quot;);\n\n</code></pre>\n"}],"last_activity_date":1684443660,"question_id":34371032,"body":"<p>I'm developing an Android App using JAVA in Android Studio IDE. I'm trying to send an HTTP Post request from my application to retrieve the response from the server as XML.</p>\n\n<p>When I run </p>\n\n<pre><code>HttpClient httpClient = new DefaultHttpClient();\nHttpPost httpPost = new HttpPost(\"100.1.1.1\");\n</code></pre>\n\n<p>It works without any exception but when I use a port in the URL like</p>\n\n<pre><code>HttpClient httpClient = new DefaultHttpClient();\nHttpPost httpPost = new HttpPost(\"100.1.1.1:8081\");\n</code></pre>\n\n<p>the app warns me by \"Unfortunately, App has stopped\" and exits.</p>\n\n<p>The real IP Addresses in this post have been replaced by 100.1.1.1</p>\n\n<p>My Question is \"why it doesn't work with Port number in URL?\" and if there is a better way to get data from a web server by URL and Query Strings what is that way.</p>\n\n<p>The URL that returns data as XML is like :</p>\n\n<blockquote>\n  <p>100.1.1.1:8081/?FindResults&amp;Parameter1&amp;Parameter2&amp;Parameter3</p>\n</blockquote>\n\n<p>Any help would be appreciated.</p>\n"},{"answers":[{"answer_id":76284462,"body":"<p>Your calls to writeDescriptor can not be submitted in sequence like that, since only one GATT operation is allowed at a time per BluetoothGatt object. Please wait for the onDescriptorWrite callback before writing the next one.</p>\n"}],"last_activity_date":1684443586,"question_id":76283706,"body":"<p>I am new in developing apps especially in BLE. I'm trying to display realtime data of three characteristics in TextViews from my BLE device which has a custom service with three characteristics. Only the first characteristics displays a value but the other two does not. Here is my onCharacteristicsChange under BluetoothGattCallback:</p>\n<pre><code>       public void onCharacteristicChanged(BluetoothGatt gatt, BluetoothGattCharacteristic characteristic) {\n            UUID characteristicUUID = characteristic.getUuid();\n            byte[] data = characteristic.getValue();\n\n            String value = new String(data);\n\n            runOnUiThread(new Runnable() {\n                @Override\n                public void run() {\n                    if (characteristicUUID.equals(UUID.fromString(&quot;082b9438-e83c-11e8-9f32-f2801f1b9fd1&quot;))) {\n                        mDataTextView1.setText(value);\n                    } else if (characteristicUUID.equals(UUID.fromString(&quot;082b9622-e83c-11e8-9f32-f2801f1b9fd1&quot;))) {\n                        mDataTextView2.setText(value);\n                    } else if (characteristicUUID.equals(UUID.fromString(&quot;082b976c-e83c-11e8-9f32-f2801f1b9fd1&quot;))) {\n                        mDataTextView3.setText(value);\n                    }\n                }\n            });\n        }\n</code></pre>\n<p>Here also my onServicesDiscovered under BluetoothGattCallback:</p>\n<pre><code>        @Override\n        public void onServicesDiscovered(BluetoothGatt gatt, int status) {\n            if (status == BluetoothGatt.GATT_SUCCESS) {\n                BluetoothGattCharacteristic characteristic1 = gatt.getService(UUID.fromString(&quot;082b91ae-e83c-11e8-9f32-f2801f1b9fd1&quot;))\n                        .getCharacteristic(UUID.fromString(&quot;082b9438-e83c-11e8-9f32-f2801f1b9fd1&quot;));\n                BluetoothGattCharacteristic characteristic2 = gatt.getService(UUID.fromString(&quot;082b91ae-e83c-11e8-9f32-f2801f1b9fd1&quot;))\n                        .getCharacteristic(UUID.fromString(&quot;082b9622-e83c-11e8-9f32-f2801f1b9fd1&quot;));\n                BluetoothGattCharacteristic characteristic3 = gatt.getService(UUID.fromString(&quot;082b91ae-e83c-11e8-9f32-f2801f1b9fd1&quot;))\n                        .getCharacteristic(UUID.fromString(&quot;082b976c-e83c-11e8-9f32-f2801f1b9fd1&quot;));\n\n                if (characteristic1 != null &amp;&amp; characteristic2 != null &amp;&amp; characteristic3 != null) {\n                    gatt.setCharacteristicNotification(characteristic1, true);\n                    gatt.setCharacteristicNotification(characteristic2, true);\n                    gatt.setCharacteristicNotification(characteristic3, true);\n\n                    BluetoothGattDescriptor descriptor1 = characteristic1.getDescriptor(\n                            UUID.fromString(&quot;00002902-0000-1000-8000-00805f9b34fb&quot;));\n                    BluetoothGattDescriptor descriptor2 = characteristic2.getDescriptor(\n                            UUID.fromString(&quot;00002902-0000-1000-8000-00805f9b34fb&quot;));\n                    BluetoothGattDescriptor descriptor3 = characteristic3.getDescriptor(\n                            UUID.fromString(&quot;00002902-0000-1000-8000-00805f9b34fb&quot;));\n\n                    if (descriptor1 != null &amp;&amp; descriptor2 != null &amp;&amp; descriptor3 != null) {\n                        descriptor1.setValue(BluetoothGattDescriptor.ENABLE_NOTIFICATION_VALUE);\n                        descriptor2.setValue(BluetoothGattDescriptor.ENABLE_NOTIFICATION_VALUE);\n                        descriptor3.setValue(BluetoothGattDescriptor.ENABLE_NOTIFICATION_VALUE);\n\n                        gatt.writeDescriptor(descriptor1);\n                        gatt.writeDescriptor(descriptor2);\n                        gatt.writeDescriptor(descriptor3);\n                    }\n                }\n            }\n        }\n\n</code></pre>\n<p>How to display the two characteristics or where in my code is wrong? Thanks and sorry for my english.</p>\n"},{"comments":[{"comment_id":134481780,"body":"Is this useful <a href=\"https://stackoverflow.com/questions/66799277/spring-returning-status-401-on-all-exceptions\" title=\"spring returning status 401 on all exceptions\">stackoverflow.com/questions/66799277/&hellip;</a>"}],"answers":[{"comments":[{"comment_id":134481597,"body":"His question is about 401 being thrown instead of 500. He has given the error as an example"},{"comment_id":134482306,"body":"I need this error to be returned to the client. And now it returns 401 instead of 500"}],"answer_id":76260093,"body":"<p>As the stack trace shows this is the issue of your database table relation</p>\n<pre><code>org.postgresql.util.PSQLException: ERROR: relation &quot;core.clientss&quot; does not exist\n</code></pre>\n<p>Position: 43</p>\n<p><strong>Please make necessary changes in your database table.</strong></p>\n"},{"comments":[{"comment_id":134482358,"body":"Now it returns 403 for every runtime exception."},{"comment_id":134482455,"body":"This proves that your authentication entry point is not configured properly"}],"answer_id":76260420,"body":"<p>Your <code>JwtAuthenticationEntryPoint</code> is not checking for authorization while rethrowing any exception.</p>\n<p>To check this hypothesis change <code>SC_UNAUTHORIZED</code> to <code>FORBIDDEN</code> and try again.</p>\n"},{"answer_id":76284460,"body":"<p>Simply added in <code>requestMatchers</code> '/error'.</p>\n<pre><code>    .authorizeHttpRequests()\n    // permit\n    .requestMatchers(\n        &quot;/api/v1/auth/**&quot;,\n        &quot;/api/docs/**&quot;,\n        &quot;/error&quot;\n    ).permitAll()\n    // any request must be authenticated\n    .anyRequest().authenticated()\n</code></pre>\n"}],"last_activity_date":1684443564,"question_id":76259893,"body":"<p>When an application throws an error, it always returns 401.\nI can't find what is the problem.</p>\n<p>I am using Java(17) version, Spring boot 3.0.6</p>\n<p><strong>Spring security config class</strong></p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableMethodSecurity\n@RequiredArgsConstructor\npublic class SecurityConfiguration {\n\n  private final JwtAuthenticationFilter jwtAuthFilter;\n  private final AuthenticationProvider authenticationProvider;\n  private final JwtAuthenticationEntryPoint authenticationEntryPoint;\n  private final LogoutHandler logoutHandler;\n\n  @Bean\n  public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n    http\n        .cors().and().csrf().disable()\n        .authorizeHttpRequests()\n        .requestMatchers(&quot;/api/v1/auth/**&quot;, &quot;/api/v1/docs/**&quot;).permitAll()\n        // any request must be authenticated\n        .anyRequest().authenticated()\n        .and()\n        // session\n        .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n        .and()\n        // entry point\n        .exceptionHandling()\n        .authenticationEntryPoint(authenticationEntryPoint)\n        .and()\n        // provider\n        .authenticationProvider(authenticationProvider)\n        // filter\n        .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class)\n        // logout\n        .logout().logoutUrl(&quot;/api/v1/auth/logout&quot;).addLogoutHandler(logoutHandler)\n        // clear context\n        .logoutSuccessHandler((request, response, authentication) -&gt; SecurityContextHolder.clearContext());\n    return http.build();\n  }\n\n  @Bean\n  CorsConfigurationSource corsConfigurationSource() {\n    CorsConfiguration corsConfiguration = new CorsConfiguration();\n    corsConfiguration.setAllowedOrigins(Collections.singletonList(&quot;*&quot;));\n    corsConfiguration.setAllowedMethods(Collections.singletonList(&quot;*&quot;));\n    corsConfiguration.setAllowedHeaders(Collections.singletonList(&quot;*&quot;));\n\n    UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n    source.registerCorsConfiguration(&quot;/**&quot;, corsConfiguration);\n\n    return source;\n  }\n\n}\n</code></pre>\n<p><strong>Auth entry point class</strong></p>\n<pre><code>@Slf4j\n@Component\npublic class JwtAuthenticationEntryPoint implements AuthenticationEntryPoint {\n\n  @Override\n  public void commence(HttpServletRequest httpServletRequest,\n                       HttpServletResponse httpServletResponse,\n                       AuthenticationException e) throws IOException {\n    log.error(&quot;Responding with unauthorized error. Message - {}&quot;, e.getMessage());\n    httpServletResponse.sendError(HttpServletResponse.SC_UNAUTHORIZED, &quot;Sorry, You're not authorized to access this resource.&quot;);\n  }\n}\n</code></pre>\n<p><strong>Auth filter</strong></p>\n<pre><code>@Slf4j\n@Component\n@RequiredArgsConstructor\npublic class JwtAuthenticationFilter extends OncePerRequestFilter {\n\n  private final JwtService jwtService;\n  private final UserDetailsService userDetailsService;\n  private final TokenRepository tokenRepository;\n\n  @Override\n  protected void doFilterInternal(@NonNull HttpServletRequest request,\n                                  @NonNull HttpServletResponse response,\n                                  @NonNull FilterChain filterChain) throws ServletException, IOException {\n\n    final String authHeader = request.getHeader(&quot;Authorization&quot;);\n    final String jwt;\n    final String username;\n\n    // is token exist in header ?\n    if (authHeader == null || !authHeader.startsWith(&quot;Bearer &quot;)) {\n      filterChain.doFilter(request, response);\n      return;\n    }\n\n    // substr jwt\n    jwt = authHeader.substring(7);\n    // extract username from jwt\n    username = jwtService.extractUsername(jwt);\n\n    if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\n      UserDetails userDetails = this.userDetailsService.loadUserByUsername(username);\n\n      var isTokenValid = tokenRepository.findByToken(jwt)\n          .map(t -&gt; !t.isExpired() &amp;&amp; !t.isRevoked())\n          .orElse(false);\n\n      if (jwtService.isTokenValid(jwt, userDetails) &amp;&amp; isTokenValid) {\n        UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(\n            userDetails,\n            null,\n            userDetails.getAuthorities());\n\n        authToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n        SecurityContextHolder.getContext().setAuthentication(authToken);\n      }\n    }\n\n    filterChain.doFilter(request, response);\n  }\n}\n</code></pre>\n<p>if the user calls a method that should throw an error, then the user will get 401 instead of 500</p>\n<p><strong>Example</strong>:</p>\n<p><a href=\"https://i.stack.imgur.com/muX6R.png\" rel=\"nofollow noreferrer\">Response</a></p>\n<p><strong>Stack trace</strong></p>\n<pre><code>\n2023-05-15T22:36:26.647+05:00 ERROR 10704 --- [nio-7000-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: relation &quot;core.clientss&quot; does not exist\n  Position: 43\n2023-05-15T22:36:26.661+05:00 ERROR 10704 --- [nio-7000-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.InvalidDataAccessResourceUsageException: JDBC exception executing SQL [select cast(c.id as varchar), c.name from core.clientss c where c.state_id = 0]; SQL [n/a]] with root cause\n\norg.postgresql.util.PSQLException: ERROR: relation &quot;core.clientss&quot; does not exist\n  Position: 43\n    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676) ~[postgresql-42.5.4.jar:42.5.4]\n    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2366) ~[postgresql-42.5.4.jar:42.5.4]\n    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:356) ~[postgresql-42.5.4.jar:42.5.4]\n    at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:496) ~[postgresql-42.5.4.jar:42.5.4]\n    at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:413) ~[postgresql-42.5.4.jar:42.5.4]\n    at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:190) ~[postgresql-42.5.4.jar:42.5.4]\n    at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:134) ~[postgresql-42.5.4.jar:42.5.4]\n    at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeQuery(ProxyPreparedStatement.java:52) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeQuery(HikariProxyPreparedStatement.java) ~[HikariCP-5.0.1.jar:na]\n    at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:217) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\n    at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:146) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\n    at org.hibernate.sql.results.jdbc.internal.AbstractResultSetAccess.getMetaData(AbstractResultSetAccess.java:33) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\n    at org.hibernate.sql.results.jdbc.internal.AbstractResultSetAccess.getColumnCount(AbstractResultSetAccess.java:49) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\n    at org.hibernate.query.results.ResultSetMappingImpl.resolve(ResultSetMappingImpl.java:187) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.resolveJdbcValuesSource(JdbcSelectExecutorStandardImpl.java:559) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:350) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:166) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.list(JdbcSelectExecutorStandardImpl.java:91) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\n    at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:31) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\n    at org.hibernate.query.sql.internal.NativeSelectQueryPlanImpl.performList(NativeSelectQueryPlanImpl.java:105) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\n    at org.hibernate.query.sql.internal.NativeQueryImpl.doList(NativeQueryImpl.java:602) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\n    at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:363) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\n    at org.hibernate.query.Query.getResultList(Query.java:94) ~[hibernate-core-6.1.7.Final.jar:6.1.7.Final]\n    at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:127) ~[spring-data-jpa-3.0.5.jar:3.0.5]\n    at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90) ~[spring-data-jpa-3.0.5.jar:3.0.5]\n    at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:148) ~[spring-data-jpa-3.0.5.jar:3.0.5]\n    at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:136) ~[spring-data-jpa-3.0.5.jar:3.0.5]\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136) ~[spring-data-commons-3.0.5.jar:3.0.5]\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120) ~[spring-data-commons-3.0.5.jar:3.0.5]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164) ~[spring-data-commons-3.0.5.jar:3.0.5]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.0.5.jar:3.0.5]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.8.jar:6.0.8]\n    at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:77) ~[spring-data-commons-3.0.5.jar:3.0.5]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.8.jar:6.0.8]\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.8.jar:6.0.8]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:391) ~[spring-tx-6.0.8.jar:6.0.8]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.8.jar:6.0.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.8.jar:6.0.8]\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.0.8.jar:6.0.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.8.jar:6.0.8]\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:134) ~[spring-data-jpa-3.0.5.jar:3.0.5]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.8.jar:6.0.8]\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.0.8.jar:6.0.8]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.8.jar:6.0.8]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:223) ~[spring-aop-6.0.8.jar:6.0.8]\n    at jdk.proxy2/jdk.proxy2.$Proxy158.getClientsWithIdAndName(Unknown Source) ~[na:na]\n    at uz.dafex.wsbpm.core.service.client.ClientService.getClientsWithIdAndName(ClientService.java:39) ~[classes/:na]\n    at uz.dafex.wsbpm.core.controller.client.ClientController.getClientsLight(ClientController.java:33) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.8.jar:6.0]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.8.jar:6.0.8]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.8.jar:6.0]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at uz.dafex.wsbpm.auth.filter.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:69) ~[classes/:na]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.0.3.jar:6.0.3]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.8.jar:6.0.8]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.8.jar:10.1.8]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n2023-05-15T22:36:26.670+05:00 ERROR 10704 --- [nio-7000-exec-2] u.d.w.a.s.JwtAuthenticationEntryPoint    : Responding with unauthorized error. Message - Full authentication is required to access this resource\n</code></pre>\n"},{"answers":[{"comments":[{"comment_id":126649790,"body":"That is already part of the example and that does not work. I assume it is because I have block() at the end."},{"comment_id":126653211,"body":"please be more specific. what exactly doesn&#39;t work?. this is a working example and`block is not an issue"},{"comment_id":126655829,"body":"check the updated example. hopefully it helps. As for <code>block</code>, please check another answer <a href=\"https://stackoverflow.com/questions/71647505/cant-handle-bad-request-using-doonerror-webflux/71649337#71649337\" title=\"cant handle bad request using doonerror webflux\">stackoverflow.com/questions/71647505/&hellip;</a> to understand how reactive signals are transformed after <code>block</code>."},{"comment_id":126670943,"body":"Tanks for the update, now I see where I went wrong: in the lambda function of the <code>onStatus</code> I had the bodyToMono followed by the return statement of the <code>RuntimeException</code>. Therefore I got the runtime exception and the other part was never executed as it is not returned."}],"answer_id":71650789,"body":"<p>Here is one approach to handle error responses:</p>\n<ul>\n<li>use <code>onStatus</code> to capture error http status</li>\n<li>deserialize error response <code>clientResponse.bodyToMono(ErrorResponse.class)</code></li>\n<li>generate new error signal based on the error response <code>Mono.error(new RuntimeException(error.getMessage()))</code>. Example uses <code>RuntimeException</code> but I would suggest to use custom exception to simplify error handling downstream.</li>\n</ul>\n<pre><code>webClient.get()\n        .uri(&quot;/error/&quot; + httpStatus)\n        .retrieve()\n        .onStatus(HttpStatus::isError, clientResponse -&gt;\n                clientResponse.bodyToMono(ErrorResponse.class)\n                        .flatMap(error -&gt;\n                                Mono.error(new RuntimeException(error.getMessage()))\n                        )\n        )\n        .bodyToMono(Response.class)\n</code></pre>\n<p>You don't really need <code>try-catch</code>. If you <code>block</code> the above code would return <code>Response</code> in case of the non-error response and throws exception with custom message in case of error response.</p>\n<p><strong>Update</strong></p>\n<p>Here is a full test using WireMock</p>\n<pre><code>class WebClientErrorHandlingTest {\n    private WireMockServer wireMockServer;\n\n    @BeforeEach\n    void init() {\n        wireMockServer = new WireMockServer(wireMockConfig().dynamicPort());\n        wireMockServer.start();\n        WireMock.configureFor(wireMockServer.port());\n    }\n\n    @Test\n    void test() {\n        stubFor(post(&quot;/test&quot;)\n                .willReturn(aResponse()\n                        .withHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n                        .withStatus(400)\n                        .withBody(&quot;{\\&quot;message\\&quot;:\\&quot;Request error\\&quot;,\\&quot;errorCode\\&quot;:\\&quot;10000\\&quot;}&quot;)\n                )\n        );\n\n        WebClient webClient = WebClient.create(&quot;http://localhost:&quot; + wireMockServer.port());\n\n        Mono&lt;Response&gt; request = webClient.post()\n                .uri(&quot;/test&quot;)\n                .retrieve()\n                .onStatus(HttpStatus::isError, clientResponse -&gt;\n                        clientResponse.bodyToMono(ErrorResponse.class)\n                                .flatMap(error -&gt;\n                                        Mono.error(new RuntimeException(error.getMessage() + &quot;: &quot; + error.getErrorCode()))\n                                )\n                )\n                .bodyToMono(Response.class);\n\n\n        RuntimeException ex = assertThrows(RuntimeException.class, () -&gt; request.block());\n        assertEquals(&quot;Request error: 10000&quot;, ex.getMessage());\n    }\n\n    @Data\n    private static class ErrorResponse {\n        private String message;\n        private int errorCode;\n    }\n\n    @Data\n    private static class Response {\n        private String result;\n    }\n}\n</code></pre>\n"},{"answer_id":76284422,"body":"<p>I know I'm late here, but I had to do quite some digging the past couple of days to get a solution that I wanted. In our situation, we just wanted the response to process normally from the WebClient's perspective no matter the status. We have a uniform format that all API's adhere to when returning a response between services.</p>\n<p>From the ResponseSpec interface JavaDoc for onStatus method:</p>\n<blockquote>\n<p>To suppress the treatment of a status code as an error and process it as a normal response, return Mono.empty() from the function. The response will then propagate downstream to be processed.</p>\n</blockquote>\n<pre><code>var response = webClient\n           .method()\n           .retrieve()\n           .onStatus(HttpStatus::isError, clientResponse -&gt; Mono.empty())\n           .toEntity(String.class)\n</code></pre>\n<p>Can do whatever I want with the <code>response</code> object from here on.</p>\n"}],"last_activity_date":1684443383,"question_id":71643036,"body":"<p>I am trying to replace the existing client code with <code>RestTemplate</code> with a <code>WebClient</code>. For that reason, most of the calls need to be blocking, so that the main portion of the application does not need to change. When it comes to error handling this poses a bit of a problem. There are several cases that have to be covered:</p>\n<ul>\n<li>In a successful case the response contains a JSON object of type A</li>\n<li>In an error case (HTTP status 4xx or 5xx) the response may contain a JSON object of type B</li>\n<li>On certain requests with response status 404 I need to return an empty <code>List</code> matching the type of a successful response</li>\n</ul>\n<p>In order to produce the correct error (<code>Exception</code>) the error response needs to be considered. So far I am unable to get my hands on the error body.</p>\n<p>I am using this <code>RestController</code> method to produce the error response:</p>\n<pre><code>@GetMapping(&quot;/error/404&quot;)\n@ResponseStatus(HttpStatus.NOT_FOUND)\npublic ResponseEntity error404() {\n    return ResponseEntity\n            .status(HttpStatus.NOT_FOUND)\n            .body(new ErrorResponse());\n}\n</code></pre>\n<p>With this response object:</p>\n<pre><code>public class ErrorResponse {    \n    private String message = &quot;Error message&quot;;    \n    public String getMessage() {\n        return message;\n    }\n}\n</code></pre>\n<p>The <code>WebClient</code> is defined as follows:</p>\n<pre><code>WebClient.builder()\n    .baseUrl(&quot;http://localhost:8081&quot;)\n    .clientConnector(connector)\n    .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n    .build();\n</code></pre>\n<p>With the connector being of type <code>CloseableHttpAsyncClient</code> (Apache Http client5).</p>\n<p>From my test application I make the call like this:</p>\n<pre><code>public String get(int httpStatus) {\n    try {\n        return webClient.get()\n                .uri(&quot;/error/&quot; + httpStatus)\n                .retrieve()\n                .onStatus(HttpStatus::isError, clientResponse -&gt; {\n                    clientResponse.bodyToMono(String.class).flatMap(responseBody -&gt; {\n                        log.error(&quot;Body from within flatMap within onStatus: {}&quot;, responseBody);\n                        return Mono.just(responseBody);\n                    });\n                    return Mono.error(new RuntimeException(&quot;Resolved!&quot;));\n                })\n                .bodyToMono(String.class)\n                .flatMap(clientResponse -&gt; {\n                    log.warn(&quot;Body from within flatMap: {}&quot;, clientResponse);\n                    return Mono.just(clientResponse);\n                })\n                .block();\n    } catch (Exception ex) {\n        log.error(&quot;Caught Error: &quot;, ex);\n        return ex.getMessage();\n    }\n}\n</code></pre>\n<p>What I get is the <code>RuntimeException</code> from the <code>onStatus</code> return and of course the caught exception in the end.\nI am missing the processing from the <code>bodyToMono</code> from within the <code>onStatus</code>. My suspicion is that this is not executed due to the blocking nature, as the response body is dealt with the <code>bodyToMono</code> after the <code>onStatus</code>.\nWhen commenting out the <code>onStatus</code> I would expect that we log the warning in the <code>flatMap</code>, which does not happen either.</p>\n<p>In the end I would like to define the handling of errors as a <code>filter</code> so that the code does not need to be repeated on every call, but I need to get the error response body, so that the exception can be populated with the correct data.</p>\n<p>How can I retrieve the error response in a synchronous <code>WebClient</code> call?</p>\n<p>This question is similar to <a href=\"https://stackoverflow.com/questions/44593066/spring-webflux-webclient-get-body-on-error\">Spring Webflux : Webclient : Get body on error</a>, which has no accepted answer and some of the suggested approaches use methods that are no deprecated.</p>\n"},{"comments":[{"comment_id":134522242,"body":"Good question.  To clarify, is the length of <code>arr</code> a fixed value, or will it change?  For example, it is a set of values that you coded in, or will it be some sort of user-based input?"},{"comment_id":134522580,"body":"Its not very clear what you are asking, adding an example would help."},{"comment_id":134523019,"body":"<i>&quot;if arr[] had very large values some might take longer than others&quot;</i> - This is not clear at all.  If you&#39;re processing items generated asynchronously by other threads or processes, then you want some sort of queue, especially since the order doesn&#39;t matter."}],"answers":[{"answer_id":76284410,"body":"<p>Good question, you're looking to get a value from an array one at a time, rather than storing the entire array all at once.</p>\n<p>You can increase the scope of <code>arr</code>, by making it a field within your class.<br />\nAdditionally, set up an integer value called <code>index</code>, which can be used to keep track of what the current index is.</p>\n<p>Next, create a method called <code>hasNext</code>, which will return whether the <code>index</code> is within range of <code>arr.length</code>.<br />\nFinally, create another method called <code>next</code> which will return <code>arr[index]</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] arr = {5, 6, 7, 8, 9};\nint index = 0;\n\nint next() {\n    return arr[index++];\n}\n\nboolean hasNext() {\n    return index &lt; arr.length;\n}\n</code></pre>\n<p>Now, from another method, you can access <code>arr</code>, one item at a time, using the two methods.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Integer&gt; a = new ArrayList&lt;&gt;();\nwhile (hasNext())\n    a.add(next());\n</code></pre>\n<p>Alternately, you can use an integer array.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] a = new int[arr.length];\nint index = 0;\nwhile (hasNext())\n    a[index++] = next();\n</code></pre>\n"}],"last_activity_date":1684443160,"question_id":76283336,"body":"<p>How can you split up arr[] for a return so you can populate a[] as they come in? I know this example will return them all instantly but if arr[] had very large values some might take longer than others. The order they end up in after being returned don't matter. I have seen parallel() and future() to solve this similar issues but not for a return</p>\n<pre><code>import java.util.Arrays;\n\npublic class ReturnArrayExample1 {\n  public static void main(String args[]) {\n    int[] a = numbers();           //obtain the array  \n    for (int i = 0; i &lt; a.length; i++) //for loop to print the array  \n      System.out.print(a[i] + &quot; &quot;);\n  }\n\n  public static int[] numbers() {\n    int[] arr = {5, 6, 7, 8, 9};  //initializing array  \n    return arr;\n  }\n}\n</code></pre>\n<p>I have messed with return arr using parallel() but it always threw errors.\nI am expecting the return to give a[] values in order of which came first to last.</p>\n"},{"answers":[{"comments":[{"comment_id":133923504,"body":"thank you, I have set up the context correctly, other methods are working fine.. I will update the Q with this info"}],"answer_id":75920580,"body":"<p>In Spring Boot your Context are by default not /AppName. Your Context are only /.</p>\n<p>so try this: <code>POST localhost:8080/api/v1/record/import</code></p>\n<p>if you want to change your default Context you must make this steps:</p>\n<p>1.)Insert in pom.xml the Line: <code>&lt;finalName&gt;myContext&lt;/finalName&gt;</code></p>\n<p>for Example:</p>\n<pre><code>&lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n        &lt;finalName&gt;myContext&lt;/finalName&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>2.) in application.properties insert this line: <code>server.servlet.context-path=/myContext</code></p>\n<p>3.) If you using Netbeans -&gt; Rightklick on Project -&gt; Properties -&gt; Run -&gt; Insert your Context Name in Context Path like &quot;/myContext&quot;</p>\n<p>thats it, i hope this helps</p>\n"},{"answer_id":76284406,"body":"<p>I found out, that one of the dependencies in our project had a <code>@ControllerAdvice</code> tagged class, that handled <code>NoHandlerFoundException.class</code> with a redirect to <code>&quot;/&quot;</code>, which did not exist and caused the redirect handling again and an endless loop..</p>\n<p>If anybody has similar issue, look for <code>NoHandlerFoundException.class</code> handling.</p>\n"}],"last_activity_date":1684443136,"question_id":75919943,"body":"<p>I have a spring boot running with context <code>myContext</code> and a rest controller with method</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(&quot;/api/v1&quot;)\n@Slf4j\npublic class MyController {\n\n    @SecurityRequirement(name = &quot;OpenId&quot;)\n    @PostMapping(path = &quot;/record/import&quot;, consumes = MediaType.APPLICATION_JSON_VALUE, produces = MediaType.APPLICATION_JSON_VALUE)\n    public ResponseEntity&lt;String&gt; importRecord(@RequestBody RecordJson importBody, Authentication auth, Locale locale) throws ParseException {\n    ...\n    }\n}\n</code></pre>\n<p>When I make a request with postman:\n<code>POST localhost:8080/myContext/api/v1/record/import</code></p>\n<p>the application falls into endless loop:</p>\n<pre><code>2023-04-03 14:57:39.136  INFO 22976 --- [)-192.168.0.111] o.a.c.c.C.[.[localhost].[/myContext]     : Initializing Spring DispatcherServlet 'dispatcherServlet'\n2023-04-03 14:57:39.136  INFO 22976 --- [)-192.168.0.111] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'\n2023-04-03 14:57:39.139  INFO 22976 --- [)-192.168.0.111] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms\n2023-04-03 14:57:45.229  WARN 22976 --- [nio-8080-exec-1] o.s.web.servlet.PageNotFound             : No mapping for POST /myContext/\n2023-04-03 14:57:45.232  INFO 22976 --- [nio-8080-exec-1] c.n.a.e.c.ForwardConfiguration           : No requested mapping found. Forwarding to index\n2023-04-03 14:57:45.229  WARN 22976 --- [nio-8080-exec-1] o.s.web.servlet.PageNotFound             : No mapping for POST /myContext/\n2023-04-03 14:57:45.232  INFO 22976 --- [nio-8080-exec-1] c.n.a.e.c.ForwardConfiguration           : No requested mapping found. Forwarding to index\n2023-04-03 14:57:45.229  WARN 22976 --- [nio-8080-exec-1] o.s.web.servlet.PageNotFound             : No mapping for POST /myContext/\n2023-04-03 14:57:45.232  INFO 22976 --- [nio-8080-exec-1] c.n.a.e.c.ForwardConfiguration           : No requested mapping found. Forwarding to index\n... repeating of two above lines\n</code></pre>\n<p>until it finishes with stackoverflow ex with repeating stack entries:</p>\n<pre><code>2023-04-03 14:57:46.534  INFO 22976 --- [nio-8080-exec-1] c.n.a.e.c.ForwardConfiguration           : No requested mapping found. Forwarding to index\n2023-04-03 14:57:46.545  WARN 22976 --- [nio-8080-exec-1] o.s.web.servlet.PageNotFound             : No mapping for POST /myContext/\n2023-04-03 14:57:46.546  INFO 22976 --- [nio-8080-exec-1] c.n.a.e.c.ForwardConfiguration           : No requested mapping found. Forwarding to index\nDisconnected from the target VM, address: '127.0.0.1:51491', transport: 'socket'\n2023-04-03 14:58:10.378 ERROR 22976 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[.[dispatcherServlet]      : Servlet.service() for servlet [dispatcherServlet] threw exception\n\njava.lang.StackOverflowError: null\n    at java.base/java.util.concurrent.ConcurrentHashMap.putVal(ConcurrentHashMap.java:1012)\n    at java.base/java.util.concurrent.ConcurrentHashMap.put(ConcurrentHashMap.java:1006)\n    at org.apache.catalina.connector.Request.setAttribute(Request.java:1584)\n    at org.apache.catalina.connector.RequestFacade.setAttribute(RequestFacade.java:540)\n    at org.apache.catalina.core.ApplicationHttpRequest.setAttribute(ApplicationHttpRequest.java:306)\n    at org.apache.catalina.core.ApplicationHttpRequest.setAttribute(ApplicationHttpRequest.java:306)\n    at org.apache.catalina.core.ApplicationHttpRequest.setAttribute(ApplicationHttpRequest.java:306)\n    at org.apache.catalina.core.ApplicationHttpRequest.setAttribute(ApplicationHttpRequest.java:306)\n...... repeating many lines of setAttribute \n\n    at org.apache.catalina.core.ApplicationHttpRequest.setAttribute(ApplicationHttpRequest.java:306)\n    at org.apache.catalina.core.ApplicationHttpRequest.setAttribute(ApplicationHttpRequest.java:306)\n    at org.apache.catalina.core.ApplicationHttpRequest.setAttribute(ApplicationHttpRequest.java:306)\n    at javax.servlet.ServletRequestWrapper.setAttribute(ServletRequestWrapper.java:259)\n    at javax.servlet.ServletRequestWrapper.setAttribute(ServletRequestWrapper.java:259)\n    at javax.servlet.ServletRequestWrapper.setAttribute(ServletRequestWrapper.java:259)\n    at javax.servlet.ServletRequestWrapper.setAttribute(ServletRequestWrapper.java:259)\n    at javax.servlet.ServletRequestWrapper.setAttribute(ServletRequestWrapper.java:259)\n    at javax.servlet.ServletRequestWrapper.setAttribute(ServletRequestWrapper.java:259)\n    at org.springframework.web.servlet.resource.ResourceUrlEncodingFilter$ResourceUrlEncodingRequestWrapper.setAttribute(ResourceUrlEncodingFilter.java:87)\n    at javax.servlet.ServletRequestWrapper.setAttribute(ServletRequestWrapper.java:259)\n    at org.springframework.web.servlet.mvc.condition.ProducesRequestCondition.getAcceptedMediaTypes(ProducesRequestCondition.java:287)\n    at org.springframework.web.servlet.mvc.condition.ProducesRequestCondition.getMatchingCondition(ProducesRequestCondition.java:208)\n    at org.springframework.web.servlet.mvc.method.RequestMappingInfo.getMatchingCondition(RequestMappingInfo.java:393)\n    at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getMatchingMapping(RequestMappingInfoHandlerMapping.java:109)\n    at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getMatchingMapping(RequestMappingInfoHandlerMapping.java:67)\n    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.addMatchingMappings(AbstractHandlerMethodMapping.java:448)\n    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.lookupHandlerMethod(AbstractHandlerMethodMapping.java:408)\n    at org.springframework.data.rest.webmvc.BasePathAwareHandlerMapping.lookupHandlerMethod(BasePathAwareHandlerMapping.java:103)\n    at org.springframework.data.rest.webmvc.RepositoryRestHandlerMapping.lookupHandlerMethod(RepositoryRestHandlerMapping.java:147)\n    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:383)\n    at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getHandlerInternal(RequestMappingInfoHandlerMapping.java:125)\n    at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getHandlerInternal(RequestMappingInfoHandlerMapping.java:67)\n    at org.springframework.web.servlet.handler.AbstractHandlerMapping.getHandler(AbstractHandlerMapping.java:498)\n    at org.springframework.data.rest.webmvc.config.DelegatingHandlerMapping$HandlerSelectionResult.from(DelegatingHandlerMapping.java:147)\n    at org.springframework.data.rest.webmvc.config.DelegatingHandlerMapping.getHandler(DelegatingHandlerMapping.java:114)\n    at org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1261)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1043)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:102)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:711)\n    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:459)\n    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:385)\n    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:313)\n    at org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$SessionCommittingRequestDispatcher.forward(SessionRepositoryFilter.java:412)\n    at org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequestDispatcher.forward(HeaderWriterFilter.java:170)\n    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:171)\n    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:316)\n    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1401)\n    at org.springframework.web.servlet.DispatcherServlet.processDispatchResult(DispatcherServlet.java:1145)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1084)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:102)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:711)\n    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:459)\n    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:385)\n    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:313)\n    at org.springframework.session.web.http.SessionRepositoryFilter$SessionRepositoryRequestWrapper$SessionCommittingRequestDispatcher.forward(SessionRepositoryFilter.java:412)\n    at org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequestDispatcher.forward(HeaderWriterFilter.java:170)\n    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:171)\n    \n... repeating blocks of stacktrace\n</code></pre>\n<p>Other rest endpoints in that controller are working correctly. Context is set in <code>application.properties</code>.</p>\n<p>It seems like I have two problems.</p>\n<ol>\n<li>Spring fails to map the request correctly to my controller.</li>\n<li>The no mapped method exception handling is somehow broken and redirects itself to the same url again and again.</li>\n</ol>\n"},{"comments":[{"comment_id":134522812,"body":"Open the .csv file for input (reading). Create a new file for ouput (writing) with a different name. Use a loop that reads the input file (until empty). For each line read, unless it is one of the lines to be deleted, write it to the output file. After the last line of the input file has been read, which terminates the loop, try this: Close the output file, saving it. Close the input file. Delete the input file. Rename the output file to have the name of the input file."},{"comment_id":134522847,"body":"If you have to actually overwrite the original .csv file, which might be desirable if you need to preserve the create date, try this: Once the loop described in the first comment terminates, close the output file, saving it. Close the input file. Open the output file for reading, so it is the new input file. Open the original .csv file for writing, so now its an output file. Have a loop similar to the one described in the previous comment, except it copies all lines. When the loop terminates, close the output file, close the input file, and delete the input file."},{"comment_id":134522856,"body":"These two comments assume you don&#39;t want to use commands or utilities that come with your operating system."}],"last_activity_date":1684443133,"question_id":76284403,"body":"<p>I need your help. I'm trying find a way to create a method that will delete a specific row in a .csv file based on a users input and overwrite the existing file. I would like for the method to use <em>scanner</em>since its what I'm used to.</p>\n<p>Help is very much appreciated</p>\n<p>I'm trying find a way to create a method that will delete a specific row in a .csv file based on a users input and overwrite the existing file.</p>\n"},{"comments":[{"comment_id":134521027,"body":"How are you referencing your datasource? Did you configure the datasource in Glassfish previously? Your log suggests that EclipseLink (the persistence provider) can&#39;t connect to Derby database. It would help if you could show the <code>persistence.xml</code> file."},{"comment_id":134522309,"body":"@MauricioBuffon added them"},{"comment_id":134522751,"body":"Thanks! As per the <a href=\"https://jakarta.ee/specifications/persistence/3.1/jakarta-persistence-spec-3.1.html#a12384\" rel=\"nofollow noreferrer\">documentation</a>, the properties <code>jakarta.persistence.jdbc.*</code> are intended for use in Java SE environments. Please review the configuration of the datasource in the course you&#39;re doing. The problem seems to be there."},{"comment_id":134522901,"body":"@MauricioBuffon What is the Jakarta EE substitution for the Java SE properties?"},{"comment_id":134523041,"body":"There are different options. 1) you can configure a datasource directly in your AppServer (Glassfish). 2) You can <a href=\"https://stackoverflow.com/questions/74741463/jakartaee-jpa-container-managed-entity-manager-with-in-memory-db\">programmatically define</a> your datasource. 3) You can configure the datasource in <code>web.xml</code> (<a href=\"https://github.com/mauriciobuffon/jakartaee-poc/blob/main/application/src/main/webapp/WEB-INF/web.xml\" rel=\"nofollow noreferrer\">the way I like do it</a>)."},{"comment_id":134523252,"body":"@MauricioBuffon I have this error now: [2023-05-18 06:08:59,013] Artifact hello-todo:war exploded: java.io.IOException: com.sun.enterprise.admin.remote.RemoteFailureException: Error occurred during deployment: Exception while preparing the app : Invalid resource: org.glassfish.resourcebase.resources.api.ResourceInfo@eb5bb6&zwnj;&#8203;98[jndiName=todo_dev&zwnj;&#8203;__pm, applicationName=null, moduleName=null]. Please see server.log for more details."},{"comment_id":134523324,"body":"Do you have this project in a public repository? Just send me a link of it and I&#39;ll try to make a pull-request for you."},{"comment_id":134523865,"body":"This is a common question/issue with a number of answers, see <a href=\"https://stackoverflow.com/a/70586870/496099\">stackoverflow.com/a/70586870/496099</a> for one example. The first error shows you haven&#39;t configured a &#39;todo_dev&#39; datasource in your glass fish container, while the last shows it isn&#39;t configured correctly. You have to show us what you&#39;ve done for anyone to help - the error points you to the server.log for details, what does it show?"}],"last_activity_date":1684442806,"question_id":76282330,"body":"<p>I'm using Jakarta EE 10 with Glassfish 7.0.4 as my server and Maven as the package manager. I'm having a difficult time trying to test a simple CRUD app. If it helps, my IDE is IntelliJ Ultimate 2023.1 and I'm somewhat following an Udemy course which can be found here: <a href=\"https://www.udemy.com/course/java-enterprise-edition-8\" rel=\"nofollow noreferrer\">https://www.udemy.com/course/java-enterprise-edition-8</a> . I understand the course is for JEE 8 and I'm using Jakarta 10 but I don't think there's that many huge changes between the two that would render major things to stop working.</p>\n<p>This is my pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;academy.learnprogramming&lt;/groupId&gt;\n    &lt;artifactId&gt;hello-todo&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;hello-todo&lt;/name&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;\n        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;\n        &lt;junit.version&gt;5.9.2&lt;/junit.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.jakartaee-api&lt;/artifactId&gt;\n            &lt;version&gt;9.1.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.mvc&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.mvc-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;version&gt;9.1-901-1.jdbc4&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.2&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>This is my persistence.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n&lt;persistence xmlns=&quot;https://jakarta.ee/xml/ns/persistence&quot;\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/persistence https://jakarta.ee/xml/ns/persistence/persistence_3_0.xsd&quot;\n             version=&quot;3.0&quot;&gt;\n    &lt;persistence-unit name=&quot;default&quot; transaction-type=&quot;JTA&quot;&gt;\n        &lt;jta-data-source&gt;todo_dev&lt;/jta-data-source&gt;\n        &lt;class&gt;academy.learnprogramming.entity.Todo&lt;/class&gt;\n        &lt;properties&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.url&quot;\n                      value=&quot;jdbc:postgresql://192.168.1.163/todo_dev&quot; /&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.user&quot; value=&quot;postgres&quot; /&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.password&quot; value=&quot;REDACTED&quot; /&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p>These are my error logs:</p>\n<pre><code>[2023-05-18T11:32:35.976340-04:00] [GF 7.0.4] [WARNING] [] [com.sun.logging.LogDomains] [tid: _ThreadID=1 _ThreadName=main] [levelValue: 900] [[\n  Cannot find the resource bundle for the name com.sun.logging.enterprise.resource.resourceadapter for class com.sun.appserv.connectors.internal.api.AppSpecificConnectorClassLoaderUtil using classloader org.glassfish.main.connectors.internal-api [47]]]\n\n[2023-05-18T11:32:36.033840-04:00] [GF 7.0.4] [WARNING] [] [com.sun.logging.LogDomains] [tid: _ThreadID=1 _ThreadName=main] [levelValue: 900] [[\n  Cannot find the resource bundle for the name LogStrings for interface com.sun.appserv.connectors.internal.api.ConnectorRuntime using classloader org.glassfish.main.connectors.internal-api [47]]]\n\n[2023-05-18T11:32:38.156333-04:00] [GF 7.0.4] [WARNING] [] [jakarta.enterprise.resource.resourceadapter.com.sun.enterprise.connectors.service] [tid: _ThreadID=68 _ThreadName=admin-listener(4)] [levelValue: 900] [[\n[2023-05-18T11:32:38.881330-04:00] [GF 7.0.4] [WARNING] [] [jakarta.enterprise.resource.resourceadapter.com.sun.gjc.spi] [tid: _ThreadID=68 _ThreadName=admin-listener(4)] [levelValue: 900] [[\n  Error allocating connection: [Failed to obtain/create connection from connection pool [DerbyPool]. Reason: Connection creation failed for 1 times.]]]\n\n[2023-05-18T11:32:38.888334-04:00] [GF 7.0.4] [SEVERE] [] [org.eclipse.persistence.session./file:/A:/IdeaProjects/hello-todo/target/hello-todo-1.0-SNAPSHOT/WEB-INF/classes/_default.ejb] [tid: _ThreadID=68 _ThreadName=admin-listener(4)] [levelValue: 1000] [[\n  Local Exception Stack: \nException [EclipseLink-4002] (Eclipse Persistence Services - 4.0.1.v202302241130): org.eclipse.persistence.exceptions.DatabaseException\nInternal Exception: java.sql.SQLException: Failed to obtain/create connection from connection pool [DerbyPool]. Reason: Connection creation failed for 1 times.\nError Code: 0\n    at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:319)\n    at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:152)\n    at org.eclipse.persistence.sessions.DatasourceLogin.connectToDatasource(DatasourceLogin.java:174)\n    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.setOrDetectDatasource(DatabaseSessionImpl.java:226)\n    at org.eclipse.persistence.internal.sessions.DatabaseSessionImpl.loginAndDetectDatasource(DatabaseSessionImpl.java:809)\n    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryProvider.login(EntityManagerFactoryProvider.java:259)\n    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:771)\n    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getAbstractSession(EntityManagerFactoryDelegate.java:221)\n    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:328)\n    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:343)\n    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:306)\n    at org.glassfish.persistence.jpa.JPADeployer$2.visitPUD(JPADeployer.java:471)\n    at org.glassfish.persistence.jpa.JPADeployer$PersistenceUnitDescriptorIterator.iteratePUDs(JPADeployer.java:546)\n    at org.glassfish.persistence.jpa.JPADeployer.iterateInitializedPUsAtApplicationPrepare(JPADeployer.java:522)\n    at org.glassfish.persistence.jpa.JPADeployer.event(JPADeployer.java:207)\n    at org.glassfish.kernel.event.EventsImpl.send(EventsImpl.java:107)\n    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:522)\n    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:259)\n    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:467)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$2$1.run(CommandRunnerImpl.java:529)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$2$1.run(CommandRunnerImpl.java:525)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at java.base/javax.security.auth.Subject.doAs(Subject.java:376)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$2.execute(CommandRunnerImpl.java:524)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$3.run(CommandRunnerImpl.java:555)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$3.run(CommandRunnerImpl.java:547)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at java.base/javax.security.auth.Subject.doAs(Subject.java:376)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:546)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1456)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1825)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1701)\n    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:510)\n    at com.sun.enterprise.v3.admin.AdminAdapter.onMissingResource(AdminAdapter.java:200)\n    at org.glassfish.grizzly.http.server.StaticHttpHandlerBase.service(StaticHttpHandlerBase.java:150)\n    at com.sun.enterprise.v3.services.impl.ContainerMapper$HttpHandlerCallable.call(ContainerMapper.java:453)\n    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:145)\n    at org.glassfish.grizzly.http.server.HttpHandler.runService(HttpHandler.java:174)\n    at org.glassfish.grizzly.http.server.HttpHandler.doHandle(HttpHandler.java:153)\n    at org.glassfish.grizzly.http.server.HttpServerFilter.handleRead(HttpServerFilter.java:196)\n    at org.glassfish.grizzly.filterchain.ExecutorResolver$9.execute(ExecutorResolver.java:88)\n    at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:246)\n    at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeChainPart(DefaultFilterChain.java:178)\n    at org.glassfish.grizzly.filterchain.DefaultFilterChain.execute(DefaultFilterChain.java:118)\n    at org.glassfish.grizzly.filterchain.DefaultFilterChain.process(DefaultFilterChain.java:96)\n    at org.glassfish.grizzly.ProcessorExecutor.execute(ProcessorExecutor.java:51)\n    at org.glassfish.grizzly.nio.transport.TCPNIOTransport.fireIOEvent(TCPNIOTransport.java:510)\n    at org.glassfish.grizzly.strategies.AbstractIOStrategy.fireIOEvent(AbstractIOStrategy.java:82)\n    at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy.run0(WorkerThreadIOStrategy.java:83)\n    at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy$WorkerThreadRunnable.run(WorkerThreadIOStrategy.java:101)\n    at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:535)\n    at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.run(AbstractThreadPool.java:515)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.sql.SQLException: Failed to obtain/create connection from connection pool [DerbyPool]. Reason: Connection creation failed for 1 times.\n    at com.sun.gjc.spi.base.AbstractDataSource.getConnection(AbstractDataSource.java:105)\n    at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:140)\n    ... 51 more\nCaused by: jakarta.resource.spi.ResourceAllocationException: Failed to obtain/create connection from connection pool [DerbyPool]. Reason: Connection creation failed for 1 times.\n    at com.sun.enterprise.connectors.ConnectionManagerImpl.internalGetConnection(ConnectionManagerImpl.java:307)\n    at com.sun.enterprise.connectors.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:183)\n    at com.sun.enterprise.connectors.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:157)\n    at com.sun.enterprise.connectors.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:151)\n    at com.sun.gjc.spi.base.AbstractDataSource.getConnection(AbstractDataSource.java:99)\n    ... 52 more\nCaused by: com.sun.appserv.connectors.internal.api.PoolingException: Connection creation failed for 1 times.\n    at com.sun.enterprise.resource.pool.datastructure.RWLockDataStructure.addResource(RWLockDataStructure.java:72)\n    at com.sun.enterprise.resource.pool.ConnectionPool.addResource(ConnectionPool.java:267)\n    at com.sun.enterprise.resource.pool.ConnectionPool.createResourceAndAddToPool(ConnectionPool.java:1416)\n    at com.sun.enterprise.resource.pool.ConnectionPool.createResources(ConnectionPool.java:891)\n    at com.sun.enterprise.resource.pool.ConnectionPool.initPool(ConnectionPool.java:218)\n    at com.sun.enterprise.resource.pool.ConnectionPool.internalGetResource(ConnectionPool.java:461)\n    at com.sun.enterprise.resource.pool.ConnectionPool.getResource(ConnectionPool.java:344)\n    at com.sun.enterprise.resource.pool.PoolManagerImpl.getResourceFromPool(PoolManagerImpl.java:223)\n    at com.sun.enterprise.resource.pool.PoolManagerImpl.getResource(PoolManagerImpl.java:152)\n    at com.sun.enterprise.connectors.ConnectionManagerImpl.getResource(ConnectionManagerImpl.java:355)\n    at com.sun.enterprise.connectors.ConnectionManagerImpl.internalGetConnection(ConnectionManagerImpl.java:298)\n    ... 56 more\nCaused by: com.sun.appserv.connectors.internal.api.PoolingException: Connection creation failed for 1 times.\n    at com.sun.enterprise.resource.pool.ConnectionPool.createSingleResource(ConnectionPool.java:869)\n    at com.sun.enterprise.resource.pool.ConnectionPool.createResource(ConnectionPool.java:1122)\n    at com.sun.enterprise.resource.pool.datastructure.RWLockDataStructure.addResource(RWLockDataStructure.java:67)\n    ... 66 more\nCaused by: com.sun.appserv.connectors.internal.api.PoolingException: Connection could not be allocated because: java.net.ConnectException : Error connecting to server localhost on port 1,527 with message Connection refused: connect.\n    at com.sun.enterprise.resource.allocator.LocalTxConnectorAllocator.createResource(LocalTxConnectorAllocator.java:83)\n    at com.sun.enterprise.resource.pool.ConnectionPool.createSingleResource(ConnectionPool.java:858)\n    ... 68 more\nCaused by: jakarta.resource.spi.ResourceAllocationException: Connection could not be allocated because: java.net.ConnectException : Error connecting to server localhost on port 1,527 with message Connection refused: connect.\n    at com.sun.gjc.spi.DSManagedConnectionFactory.createManagedConnection(DSManagedConnectionFactory.java:106)\n    at com.sun.enterprise.resource.allocator.LocalTxConnectorAllocator.createResource(LocalTxConnectorAllocator.java:71)\n    ... 69 more\nCaused by: java.sql.SQLNonTransientConnectionException: java.net.ConnectException : Error connecting to server localhost on port 1,527 with message Connection refused: connect.\n    at org.apache.derby.client.am.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:74)\n    at org.apache.derby.client.am.SqlException.getSQLException(SqlException.java:325)\n    at org.apache.derby.client.BasicClientDataSource.getConnection(BasicClientDataSource.java:1451)\n    at com.sun.gjc.spi.DSManagedConnectionFactory.createManagedConnection(DSManagedConnectionFactory.java:98)\n    ... 70 more\nCaused by: ERROR 08001: java.net.ConnectException : Error connecting to server localhost on port 1,527 with message Connection refused: connect.\n    at org.apache.derby.client.net.NetAgent.&lt;init&gt;(NetAgent.java:153)\n    at org.apache.derby.client.net.NetConnection.newAgent_(NetConnection.java:972)\n    at org.apache.derby.client.am.ClientConnection.initConnection(ClientConnection.java:275)\n    at org.apache.derby.client.am.ClientConnection.&lt;init&gt;(ClientConnection.java:227)\n    at org.apache.derby.client.net.NetConnection.&lt;init&gt;(NetConnection.java:224)\n    at org.apache.derby.client.net.ClientJDBCObjectFactoryImpl.newNetConnection(ClientJDBCObjectFactoryImpl.java:295)\n    at org.apache.derby.client.BasicClientDataSource.getConnectionX(BasicClientDataSource.java:1495)\n    at org.apache.derby.client.BasicClientDataSource.getConnection(BasicClientDataSource.java:1446)\n    ... 71 more\nCaused by: java.net.ConnectException: Connection refused: connect\n    at java.base/sun.nio.ch.Net.connect0(Native Method)\n    at java.base/sun.nio.ch.Net.connect(Net.java:579)\n    at java.base/sun.nio.ch.Net.connect(Net.java:568)\n    at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:588)\n    at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)\n    at java.base/java.net.Socket.connect(Socket.java:633)\n    at java.base/java.net.Socket.connect(Socket.java:583)\n    at java.base/java.net.Socket.&lt;init&gt;(Socket.java:507)\n    at java.base/java.net.Socket.&lt;init&gt;(Socket.java:287)\n    at java.base/javax.net.DefaultSocketFactory.createSocket(SocketFactory.java:271)\n    at org.apache.derby.client.net.OpenSocketAction.run(OpenSocketAction.java:121)\n    at org.apache.derby.client.net.OpenSocketAction.run(OpenSocketAction.java:42)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:569)\n    at org.apache.derby.client.net.NetAgent.&lt;init&gt;(NetAgent.java:146)\n    ... 78 more\n]]\n\n[2023-05-18T11:32:38.893335-04:00] [GF 7.0.4] [SEVERE] [] [jakarta.enterprise.system.core] [tid: _ThreadID=68 _ThreadName=admin-listener(4)] [levelValue: 1000] [[\n  Exception while deploying the app [hello-todo-1.0-SNAPSHOT]]]\n\n[2023-05-18T11:32:38.893834-04:00] [GF 7.0.4] [SEVERE] [NCLS-CORE-00026] [jakarta.enterprise.system.core] [tid: _ThreadID=68 _ThreadName=admin-listener(4)] [levelValue: 1000] [[\n  Exception during lifecycle processing\norg.glassfish.deployment.common.DeploymentException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 4.0.1.v202302241130): org.eclipse.persistence.exceptions.DatabaseException\nInternal Exception: java.sql.SQLException: Failed to obtain/create connection from connection pool [DerbyPool]. Reason: Connection creation failed for 1 times.\nError Code: 0\n    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:856)\n    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getAbstractSession(EntityManagerFactoryDelegate.java:221)\n    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:328)\n    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:343)\n    at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:306)\n    at org.glassfish.persistence.jpa.JPADeployer$2.visitPUD(JPADeployer.java:471)\n    at org.glassfish.persistence.jpa.JPADeployer$PersistenceUnitDescriptorIterator.iteratePUDs(JPADeployer.java:546)\n    at org.glassfish.persistence.jpa.JPADeployer.iterateInitializedPUsAtApplicationPrepare(JPADeployer.java:522)\n    at org.glassfish.persistence.jpa.JPADeployer.event(JPADeployer.java:207)\n    at org.glassfish.kernel.event.EventsImpl.send(EventsImpl.java:107)\n    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:522)\n    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:259)\n    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:467)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$2$1.run(CommandRunnerImpl.java:529)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$2$1.run(CommandRunnerImpl.java:525)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at java.base/javax.security.auth.Subject.doAs(Subject.java:376)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$2.execute(CommandRunnerImpl.java:524)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$3.run(CommandRunnerImpl.java:555)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$3.run(CommandRunnerImpl.java:547)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at java.base/javax.security.auth.Subject.doAs(Subject.java:376)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:546)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1456)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1825)\n    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1701)\n    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:510)\n    at com.sun.enterprise.v3.admin.AdminAdapter.onMissingResource(AdminAdapter.java:200)\n    at org.glassfish.grizzly.http.server.StaticHttpHandlerBase.service(StaticHttpHandlerBase.java:150)\n    at com.sun.enterprise.v3.services.impl.ContainerMapper$HttpHandlerCallable.call(ContainerMapper.java:453)\n    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:145)\n    at org.glassfish.grizzly.http.server.HttpHandler.runService(HttpHandler.java:174)\n    at org.glassfish.grizzly.http.server.HttpHandler.doHandle(HttpHandler.java:153)\n    at org.glassfish.grizzly.http.server.HttpServerFilter.handleRead(HttpServerFilter.java:196)\n    at org.glassfish.grizzly.filterchain.ExecutorResolver$9.execute(ExecutorResolver.java:88)\n    at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeFilter(DefaultFilterChain.java:246)\n    at org.glassfish.grizzly.filterchain.DefaultFilterChain.executeChainPart(DefaultFilterChain.java:178)\n    at org.glassfish.grizzly.filterchain.DefaultFilterChain.execute(DefaultFilterChain.java:118)\n    at org.glassfish.grizzly.filterchain.DefaultFilterChain.process(DefaultFilterChain.java:96)\n    at org.glassfish.grizzly.ProcessorExecutor.execute(ProcessorExecutor.java:51)\n    at org.glassfish.grizzly.nio.transport.TCPNIOTransport.fireIOEvent(TCPNIOTransport.java:510)\n    at org.glassfish.grizzly.strategies.AbstractIOStrategy.fireIOEvent(AbstractIOStrategy.java:82)\n    at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy.run0(WorkerThreadIOStrategy.java:83)\n    at org.glassfish.grizzly.strategies.WorkerThreadIOStrategy$WorkerThreadRunnable.run(WorkerThreadIOStrategy.java:101)\n    at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:535)\n    at org.glassfish.grizzly.threadpool.AbstractThreadPool$Worker.run(AbstractThreadPool.java:515)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n]]\n\n[2023-05-18T11:32:38.897334-04:00] [GF 7.0.4] [SEVERE] [] [jakarta.enterprise.system.core] [tid: _ThreadID=68 _ThreadName=admin-listener(4)] [levelValue: 1000] [[\n  Exception while deploying the app [hello-todo-1.0-SNAPSHOT] : Exception [EclipseLink-4002] (Eclipse Persistence Services - 4.0.1.v202302241130): org.eclipse.persistence.exceptions.DatabaseException\nInternal Exception: java.sql.SQLException: Failed to obtain/create connection from connection pool [DerbyPool]. Reason: Connection creation failed for 1 times.\nError Code: 0]]\n</code></pre>\n"},{"comments":[{"comment_id":133490659,"body":"how much RAM did you configure with -Xmx?"},{"comment_id":133490986,"body":"My configuration for both properties is: <code>-Xms1024m</code> and <code>-Xmx6144m</code>"}],"answers":[{"comments":[{"comment_id":133861654,"body":"This solution is fine while the downloaded files are storaged in some physical place, but i need to implement a solution which download the files through browser. How can i implement a similar solution with the steps that i use to download files?"}],"answer_id":75763863,"body":"<p>One way to avoid this error is to download the file in smaller chunks and write it directly to disk instead of keeping it all in memory. You can do this by replacing the ByteArrayOutputStream with a FileOutputStream that writes to a temporary file on disk. Here’s an example:</p>\n<pre><code>public void downloadFileByChunks(String blobName, String filePath) {\n    long chunkSize = 10 * 1024 * 1024;\n    CloudBlockBlob blob = connectAndgetCloudBlockBlob(blobName);\n    try (FileOutputStream fos = new FileOutputStream(filePath)) {\n        if (blob.exists()) {\n            blob.downloadAttributes();\n            long fileSize = blob.getProperties().getLength();\n            for (long i = 0; i &lt; fileSize; i += chunkSize) {\n                blob.downloadRange(i, Math.min(chunkSize, fileSize - i), fos);\n            }\n        }\n    } catch (StorageException | IOException e) {\n        throw new GenericException(e, BusinessErrorEnum.AZURE_BLOB_STORAGE_EXCEPTION);\n    }\n}\n</code></pre>\n<p>This method takes in an additional parameter filePath, which specifies where on disk to save the downloaded file. The method downloads the file in chunks and writes each chunk directly to disk using a FileOutputStream. This way, you can avoid keeping the entire file in memory and reduce the risk of running into an OutOfMemoryError.</p>\n"},{"answer_id":75932556,"body":"<p>Finally solved, my solution was a mix from <a href=\"https://stackoverflow.com/a/75763863/7077549\">Ramprasad's answer</a> and <a href=\"https://stackoverflow.com/a/5673356/7077549\">this answer</a> from another question.</p>\n<p>Basically the solution download the file in a physical location, in this case in the cluster where the app lives.</p>\n<p>I change the main method:</p>\n<pre><code>public byte[] getFileBytes(@RequestBody ZeusRequestVO&lt;String&gt; request) {\nreturn documentService.downloadFileByChunks(request).toByteArray();\n}\n</code></pre>\n<p>For this:</p>\n<pre><code>public void getFileBytes(@RequestBody ZeusRequestVO&lt;String&gt; request, HttpServletResponse response) {\n    FileInputStream fis = null;\n    String fileName = null;\n    try {\n        fileName = documentService.getFileBytes(request);\n        fis = new FileInputStream(fileName);\n        IOUtils.copy(fis, response.getOutputStream());\n        response.flushBuffer();\n    } catch (IOException e) {\n        e.printStackTrace();\n    } finally {\n        try {\n            if(ValidationUtil.isNotNull(fis)) {\n                fis.close();\n            }\n            File file = new File(fileName);\n            if(file.exists()) {\n                file.delete();\n            }\n        } catch(IOException ioe) {\n            ioe.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>The logic is download the file in a physical location, then it's downloaded through the browser from here avoiding memory leaks and finally the created file is deleted.</p>\n"}],"last_activity_date":1684442521,"question_id":75664794,"body":"<p>I'm getting a <code>java.lang.OutOfMemoryError:</code> when I try to download large files (&gt;200MB) from the web application that i working on.</p>\n<p>The flow to download is the next:</p>\n<p>Main method:</p>\n<pre><code>public byte[] getFileBytes(@RequestBody ZeusRequestVO&lt;String&gt; request) {\n    return documentService.downloadFileByChunks(request).toByteArray();\n}\n</code></pre>\n<p>Download logic:</p>\n<pre><code>public ByteArrayOutputStream downloadFileByChunks(String blobName) {\n    long file_size = 0;\n    long chunkSize = 10 * 1024 * 1024;\n    CloudBlockBlob blob = connectAndgetCloudBlockBlob(blobName);\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    try {\n        if (blob.exists()) {\n            blob.downloadAttributes();\n            file_size = blob.getProperties().getLength();\n            for (long i = 0; i &lt; file_size; i += chunkSize) {\n                blob.downloadRange(i, file_size, baos);\n            }\n        }\n    } catch (StorageException e) {\n        throw new GenericException(e, BusinesErrorEnum.AZURE_BLOB_STORAGE_EXCEPTION);\n    }\n    return baos;\n}\n</code></pre>\n<p>I already add <code>-Xms</code> and <code>-Xmx</code> config in my app and that works while files not passed 200MB, in fact initially the web app wasn't capable to donwload files larges than 30MB until the <code>-Xms</code> and <code>-Xmx</code> configuration was added.</p>\n<p>I see a solution <a href=\"https://stackoverflow.com/a/65403169\">here</a> but i'm not able to update or add more libraries than existing (company policies).</p>\n<p>Any advices?</p>\n"},{"comments":[{"comment_id":134494519,"body":"Don&#39;t you mean <code>ships[0][i]</code>?"}],"answers":[{"comments":[{"comment_id":134511735,"body":"Use a <code>LinkedHashSet</code> to preserve the order, use a <code>HashSet</code> to order by ascending values."}],"answer_id":76267727,"body":"<p>I'm going to recommend a re-factor. It looks like you're trying to display image files using their filenames and dimensions. Rather than using a 2d array, I recommend creating a <code>ShipImage</code> class:</p>\n<pre><code>public class ShipImage {\n    private String fileName;\n    private String width;\n    private String height;\n\n    // appropriate constructors and mutators\n}\n</code></pre>\n<p>And storing that in one of Java's <code>Collection</code> types. If order matters, you could use a LinkedHashSet:</p>\n<pre><code>    // other code\n    Set shipImages = new LinkedHashSet&lt;ShipImage&gt;();\n    //I'm guessing what values accompany which ship\n    shipImages.add(new ShipImage(&quot;Bismarck.png&quot;, &quot;170&quot;,&quot;20&quot;));\n    shipImages.add(new ShipImage(&quot;Rodney.png&quot;,&quot;50&quot;,&quot;220&quot;));\n</code></pre>\n<p>Assuming <code>createScene</code> is a method of class <code>BattleScene</code>, that class might look something like this:</p>\n<pre><code>public class BattleScene {\n    private Set&lt;ShipImage&gt; shipImages;\n\n    public BattleScene(Set&lt;ShipImage&gt; shipImages) {\n        this.shipImages = shipImages;\n    }\n\n    public void drawScene() {\n        //since the shipImages are stored in a class derived from Collection, we can trivially iterate over them\n        for(ShipImage image : shipImages) {\n            drawImage(image);\n        }\n    }\n\n    private void drawImage(ShipImage shipImage) {\n        // logic for drawing the image\n    }\n}\n</code></pre>\n<p>Note: edited based on Reilas's comment to note that LinkedHashSet preserves order</p>\n"},{"answer_id":76278259,"body":"<p>You don't need two loops.</p>\n<p>Since the first dimension of the array is going to always be <code>3</code> you simply need to create an iteration for whatever the length of at least one indice is.</p>\n<p>Then, for clarity, just create some variables to store your values in, before passing them to <code>drawImage</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void createScene() {\n    String[][] ships = {{&quot;Bismarck.png&quot;,&quot;Rodney.png&quot;},{&quot;170&quot;, &quot;50&quot;},{&quot;20&quot;, &quot;220&quot;}};\n    String filename;\n    String x, y;\n    for (int index = 0; index &lt; ships[0].length; index++) {\n        filename = ships[0][index];\n        x = ships[1][index];\n        y = ships[2][index];\n        drawImage(filename, x, y, 250, 7);\n    }\n}\n</code></pre>\n"}],"last_activity_date":1684441876,"question_id":76266448,"body":"<p>In my main class I have:</p>\n<pre><code>String[][] ships = {{&quot;Bismarck.png&quot;,&quot;Rodney.png&quot;},{&quot;170&quot;, &quot;50&quot;},{&quot;20&quot;, &quot;220&quot;}};\n\nBattleScene scene = new BattleScene(ships);\n</code></pre>\n<p>I am trying to call this method:</p>\n<pre><code>  public void createScene() {\n   for(int i = 0; i &lt; ships[0].length; i++ ){\n      for(int j = 0; j &lt; ships.length; j++){\n        drawImage(ships[i][0], ships[i][1], ships[i][2], 250, 7);\n      }\n     }\n</code></pre>\n<p>How do I set up my nested for loop to grab my values without me putting in the second array index by hand?</p>\n<p>I haven't got a clue what to try. But I know I want it to call the method using a 2D array nested for loop.</p>\n"},{"comments":[{"comment_id":132928213,"body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please.."},{"comment_id":132928551,"body":"please read the referenced help page and act accordingly.. that said: you <b>must not</b> access a node in an active scenegraph off the fx application thread"},{"comment_id":132933136,"body":"You must not modify the UI from a background thread."},{"comment_id":132934673,"body":"See if the ideas from <a href=\"https://stackoverflow.com/questions/44050344/timing-javafx-canvas-application/44056730#44056730\">here</a> can help."},{"comment_id":132934704,"body":"<a href=\"https://stackoverflow.com/questions/44136040/performance-of-javafx-gui-vs-swing\" title=\"performance of javafx gui vs swing\">stackoverflow.com/questions/44136040/&hellip;</a>"},{"comment_id":132938727,"body":"See also <a href=\"https://github.com/openjdk/jfx/tree/master/apps/samples/MandelbrotSet\" rel=\"nofollow noreferrer\"><code>MandelbrotSet</code></a>, <a href=\"https://stackoverflow.com/a/44141878/230513\">_loc. cit.</a>"},{"comment_id":132939890,"body":"@trashgod I haven&#39;t looked at that code in enough detail, but simply synchronizing on the <code>PixelWriter</code> isn&#39;t going to make updating it from a background thread safe (maybe there is something else going on in the code that does make it safe). You&#39;d have to know the <code>WritableImage</code> or <code>Canvas</code> was synchronizing on the <code>PixelWriter</code> (which it almost certainly isn&#39;t, as it&#39;s not designed to be multithreaded)."},{"comment_id":132943019,"body":"@James_D: I strongly endorse your point about <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/package-summary.html\" rel=\"nofollow noreferrer\">sufficient conditions</a> for thread safety; in this case, the explicit synchronization is confined to the background thread of a <code>javafx.concurrent.Task</code>."},{"comment_id":132956500,"body":"Thank you all for the detailed asnwers. Which part is the biggest problem if I may ask, (in the thread class) the if statements, the canvas .getGraphicsContent2D or both? Thanks again"},{"comment_id":132987967,"body":"@tino Probably, they are all problems. The rule is not to do <i>anything</i> with the active scene graph or properties related to it off the JavaFX thread. That includes writing <i>or reading</i> attributes of nodes (like canvas height and width) or drawing images to a canvas graphics context. The Task javadoc provides some advice on how to work with multi-threading and JavaFX."}],"answers":[{"comments":[{"comment_id":132935988,"body":"<i>&quot;Writing into the buffer is not restricted&quot;</i>. This makes some kind of intuitive sense to me, but is it documented anywhere that the buffer is thread-safe?"},{"comment_id":132938885,"body":"As an example, this <a href=\"https://github.com/openjdk/jfx/tree/master/apps/samples/MandelbrotSet\" rel=\"nofollow noreferrer\"><code>MandelbrotSet</code></a> synchronizes on the <code>PixelWriter</code>. I infer that is not so much <i>thread_safe</i> as <i>useable</i> with the usual <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/package-summary.html\" rel=\"nofollow noreferrer\">caveats</a>."},{"comment_id":132939673,"body":"The key element is the updateBuffer method which must be called on the fx application thread and calling this must be synchronized with your threads. In one of my examples I implemented double buffering that way so that you can write into one part of the buffer and show the other part and then switch the viewport in the updateBuffer method."},{"comment_id":132956501,"body":"Thank you all for the detailed asnwers. Which part is the biggest problem if I may ask, (in the thread class) the if statements, the canvas .getGraphicsContent2D or both? Thanks again"}],"answer_id":75337201,"body":"<p>What you are trying to do cannot be done with a Canvas because of the fx application thread restiction which has already been mentioned.</p>\n<p>But it can be done via the WritableImage of JavaFX 13+ with support for Buffers. Writing into the buffer is not restricted in the above way and can thus be done in parallel with high performance.</p>\n<p>I have compiled some examples (not any parallel ones) of how to use WritableImages with Buffers here: <a href=\"https://github.com/mipastgt/JFXToolsAndDemos\" rel=\"nofollow noreferrer\">https://github.com/mipastgt/JFXToolsAndDemos</a></p>\n"}],"last_activity_date":1684440671,"question_id":75333439,"body":"<p>I have a problem in regards to parallelism in javafx. More specifically, dividing the canvas of my program to run with multiple threads. When compiled, the program glitches out and doesn't work as supposed to. The code in the thread class is supposed to print out the Mandelbrot set, and the code in the application class is dividing the canvas into different parts that each should run in parallel. Here is</p>\n<p>I found that adding thread.join() fixes the problem, but then the program is ran on a single thread. Could anyone help me out resolve this issue?</p>\n"},{"comments":[{"comment_id":132039876,"body":"You have a typo in your <code>while</code> loop condition in <code>iterationChecker(...)</code>. (Should be <code>zi * zi</code>, not <code>zi + zi</code>.)"},{"comment_id":132042130,"body":"unrelated: stick to java naming conventions"}],"answers":[{"answer_id":74817504,"body":"<p>The iteration count is slightly off because of a typo in the condition for counting iterations to escape:</p>\n<pre><code>public int iterationChecker(double cr, double ci) {\n    int iterationsOfZ = 0;\n    double zr = 0.0;\n    double zi = 0.0;\n\n    //while (iterationsOfZ &lt; maximumIterations &amp;&amp; (zr * zr) + (zi + zi) &lt; 4){\n\n    while (iterationsOfZ &lt; maximumIterations &amp;&amp; (zr * zr) + (zi * zi) &lt; 4){\n        double oldZr = zr;\n        zr = (zr * zr) - (zi * zi) + cr;\n        zi = 2 * (oldZr * zi) + ci;\n        iterationsOfZ++;\n    }\n    return iterationsOfZ;\n}\n</code></pre>\n<blockquote>\n<p>Also, why does the Mandelbrot set still show up if I set the number 4 in the if statement of iterationChecker to any other number bigger than 4?</p>\n</blockquote>\n<p>A point <code>c</code> is considered to be in the Mandelbrot set if the sequence defined by <code>z(n+1) = z(n)^2 + c</code> (with <code>z(0)=0</code>) is bounded for all <code>n</code>.</p>\n<p>It's easy enough to prove that if <code>|c|&gt;2</code> then <code>c</code> is not in the Mandelbrot set, and for <code>|c|&lt;=2</code>, that if <code>|z(n)| &gt; 2</code> for any n, then the sequence <code>z(n)</code> is unbounded, and hence if <code>|z(n)| &gt; 2</code> (i.e. <code>|z|^2=zr^2+zi^2 &gt; 4</code>) then <code>c</code> is not in the Mandelbrot set.</p>\n<p>So the strategy is to iterate <code>z -&gt; z^2 + c</code>, and if <code>|z|^2&gt;4</code> at any point conclude <code>z</code> is not in the Mandelbrot set. Of course, if you choose any <code>k&gt;4</code>, then if <code>|z|^2 &gt; k</code>, then it's also true that <code>|z|^2 &gt; 4</code>, and <code>z</code> is not in the Mandelbrot set.</p>\n<p>Finding <code>z</code> with <code>|z|^2 &gt; 4</code> is called &quot;escaping&quot;, and the number of iterations until escape determines the color. If you reach some maximum number of iterations (you chose 50) without escaping, then you assume <code>c</code> is &quot;close to&quot; or inside the Mandelbrot set and color it black.</p>\n<p>So changing the escape level to another number bigger than 4 might change the colors, but it will not change it by much: the absolute value of <code>|z(n)|</code> grows as <code>n^2</code> from that point. So you would have to increase the escape threshold by a lot to make a difference of more than 1 or 2 in the time to escape.</p>\n"}],"last_activity_date":1684440536,"question_id":74817248,"body":"<p>I am wondering why is the background of my Mandelbrot set not as nice as the background on the other picture. Also, why does the Mandelbrot set still show up if I set the number 4 in the if statement of iterationChecker to any other number bigger than 4?</p>\n<p>Mandelbrot set, and the background looks crooked:</p>\n<p><a href=\"https://i.stack.imgur.com/ApODi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ApODi.png\" alt=\"crooked\" /></a></p>\n<p>I want the background to look like this:</p>\n<p><a href=\"https://i.stack.imgur.com/NA2HN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NA2HN.png\" alt=\"desire\" /></a></p>\n"},{"comments":[{"comment_id":134522040,"body":"Your code is trying to access a table named <code>TABLENAME</code>, which does not exist.  The connection to the database is working fine, your code is passing an incorrect table name.  Search your code for the string <code>TABLENAME</code>."}],"last_activity_date":1684440479,"question_id":76284136,"body":"<p>I'm unable to use EE datasource to connect to database.<br />\nkeep getting this error:<br />\norg.postgresql.util.PSQLException: ERROR: relation &quot;TABLENAME&quot; does not exist Position: 13</p>\n<p>I'm working with java/tomcat/eclipse<br />\nconsole logging and file logging work fine.</p>\n<p>this is context.xml:</p>\n<pre><code>`&lt;Context path=&quot;/sm&quot; docBase=&quot;sm&quot;  debug=&quot;5&quot; reloadable=&quot;false&quot; crossContext=&quot;true&quot; &gt;\n\n    &lt;Resource name=&quot;jdbc/sm_log&quot; auth=&quot;Container&quot;\n    type=&quot;javax.sql.DataSource&quot; driverClassName=&quot;org.postgresql.Driver&quot;\n    url=&quot;jdbc:postgresql://127.0.0.1:5432/sm_log&quot;\n    username=&quot;test&quot; password=&quot;test&quot; maxTotal=&quot;10&quot; maxIdle=&quot;1&quot; maxWaitMillis=&quot;-1&quot;/&gt;\n \n&lt;/Context&gt;\n</code></pre>\n<p>`</p>\n<p>...and tinylog.properties:</p>\n<pre><code>`   writer3 = jdbc\n    writer3.level = warn                               \n    writer3.url = java:/comp/env/jdbc/sm_log\n    writer3.table = log_entries  \n    writer3.field.edat = date\n    writer3.field.level = level\n    writer3.field.message = {class}.{method}() {message}                                 \n    writer3.reconnect = true                                \n    writer3.batch = false        \n`\n</code></pre>\n<p>Any help appreciated!</p>\n"},{"comments":[{"comment_id":134519512,"body":"I mean reading from the queue. And how can I then determine in this method what message came to me (byte or text)? And how do I get the message in bytes from the queue?"},{"comment_id":134521177,"body":"Do you have any feedback on any of the other questions you&#39;ve asked recently?"}],"answers":[{"answer_id":76284012,"body":"<p>The bodies of a JMS <code>BytesMessage</code> and <code>TextMessage</code> are serialized differently because the former is a <code>byte[]</code> and the latter is a <code>String</code>. You are attempting to get the <em>text</em> body out of a <code>BytesMessage</code> which doesn't exist and therefore you receive the <code>InvalidKeyException</code>.</p>\n<p>However, you can detect the kind of message it is and then adjust accordingly, e.g.:</p>\n<pre class=\"lang-java prettyprint-override\"><code>      QueueControl queueControl = ...\n      CompositeData[] messages = queueControl.browse();\n      for (CompositeData message : messages) {\n         if ((byte) message.get(CompositeDataConstants.TYPE) == (byte) 4) {\n            System.out.println(&quot;This is a BytesMessage&quot;);\n         } else {\n            System.out.println(&quot;This is a TextMessage&quot;);\n         }\n      }\n</code></pre>\n<p>If you want to get the <code>byte[]</code> body of the message you can do so like this:</p>\n<pre><code>byte[] body = (byte[]) message.get(CompositeDataConstants.BODY);\n</code></pre>\n<p>Of course, in order to actually <em>decode</em> they <code>byte[]</code> into a <code>String</code> for example you'll need to know how it was encoded in the first place. <code>String</code> objects in Java can be encoded many different ways although the most common is probably using UTF-8 in which case the code would look something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String body = Strings.getString((byte[]) message.get(CompositeDataConstants.BODY), StandardCharsets.UTF_8);\n</code></pre>\n"}],"last_activity_date":1684439802,"question_id":76282348,"body":"<p>I am reading a message via JMX. If it is text then everything is OK, but if it is byte then it gives such an error. I can't figure out how I should read a byte message and get its text in a string.</p>\n<p>Here's my Java code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static JMXMessage showMessage(QueueControl queueControl) {\n    JMXHeaders jmxHeaders;\n    JMXMessage jmxMessage;\n    String body;\n    String replyTo = null;\n    String correlationId = null;\n    try {\n        CompositeData[] messages = queueControl.browse();\n        j = queueLength - i;\n        if (j &gt; queueLength - 1) {\n            i = 1;\n            j = queueLength - i;\n        }\n        if (j &lt; 0) {\n            i = queueLength;\n            j = 0;\n        }\n\n        TabularData stringProps = (TabularData) messages[j].get(CompositeDataConstants.STRING_PROPERTIES);\n        for (CompositeData o : (Collection&lt;CompositeData&gt;) stringProps.values()) {\n            Object key = o.get(&quot;key&quot;);\n            if (key.equals(&quot;JMSReplyTo&quot;)) {\n                replyTo = o.get(&quot;value&quot;).toString();\n            }\n            if (key.equals(&quot;JMSCorrelationID&quot;)) {\n                correlationId = o.get(&quot;value&quot;).toString();\n            }\n        }\n        jmxHeaders = new JMXHeaders(messages[j].get(CompositeDataConstants.TYPE).toString(),\n                messages[j].get(CompositeDataConstants.EXPIRATION).toString(),\n                messages[j].get(CompositeDataConstants.DURABLE).toString(),\n                replyTo,\n                messages[j].get(CompositeDataConstants.MESSAGE_ID).toString(),\n                messages[j].get(CompositeDataConstants.TIMESTAMP).toString(),\n                correlationId,\n                messages[j].get(CompositeDataConstants.PRIORITY).toString());\n        body = (String) messages[j].get(CompositeDataConstants.TEXT_BODY);\n        jmxMessage = new JMXMessage(jmxHeaders, body);\n\n        return jmxMessage;\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p>Error code:</p>\n<pre><code>Caused by: java.lang.RuntimeException: javax.management.openmbean.InvalidKeyException: Argument key=&quot;text&quot; is not an existing item name for this CompositeData instance.\n    at jmxClientUIPConsole.BuildGet.showMessage(BuildGet.java:155)\n    at jmxClientUIPConsole.DConsoleFrameControllerGetMessage.viewMessage(DConsoleFrameControllerGetMessage.java:166)\n    ... 62 more\nCaused by: javax.management.openmbean.InvalidKeyException: Argument key=&quot;text&quot; is not an existing item name for this CompositeData instance.\n    at java.management/javax.management.openmbean.CompositeDataSupport.get(CompositeDataSupport.java:270)\n    at jmxClientUIPConsole.BuildGet.showMessage(BuildGet.java:150)\n    ... 63 more\n</code></pre>\n<p>That is the error in this line:</p>\n<pre class=\"lang-java prettyprint-override\"><code>body = (String) messages[j].get(CompositeDataConstants.TEXT_BODY);\n</code></pre>\n<p>How can I then determine in this method what message came to me (byte or text)? And how do I get the message in bytes from the queue?</p>\n"},{"comments":[{"comment_id":134520898,"body":"AFAIK JTextField does not come with X or cancel buttons. So there is nothing for you to remove. Check the component that you are actually looking at. See <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/textfield.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/uiswing/components/&hellip;</a>"},{"comment_id":134521097,"body":"True, JTextField does not have a cancel button, but it can easily be removed from the container that it sits in by calling <code>someContainer.remove(someTextField)</code>, the key being having the right references to both the container and the JTextField. Having said that, you&#39;re asking what is essentially an <a href=\"http://mywiki.wooledge.org/XyProblem\" rel=\"nofollow noreferrer\">XY Problem</a> where you ask &quot;how do I fix this code problem&quot; when the best solution is most likely to use a different approach entirely, since manipulating GUI&#39;s in this way leads to very brittle (easily breakable code)."},{"comment_id":134521106,"body":"Consider telling what exact behavior you&#39;re trying to elicit from the GUI, rather than how you&#39;re trying to do it, since again, most likely there is a better way, quite possibly by swapping JPanel &quot;views&quot; using a CardLayout, for instance: <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html\" rel=\"nofollow noreferrer\">CardLayout tutorial</a>"},{"comment_id":134521231,"body":"The java.awt.Container class has a <code>.components()</code> method which can get you an array of all the components held by that container. To get <i>all</i> of them would require that this be called recursively on any components in the array that happen to also be Containers (using <code>instanceof</code>) in a for loop, and again, this <i>can</i> be done, and again, I don&#39;t recommend that you do this."},{"comment_id":134521339,"body":"One way to &quot;Remove the cancel and exit button from a JOptionpane&quot;, is to not use a JOptionPane. Create a JDialog instead. You can even display it &quot;undecorated&quot; if desired."},{"comment_id":134523055,"body":"Also remember, it&#39;s possible for a component to have multiple depths of containers, so finding any other component isn&#39;t as simple as <code>getComponentAt</code>. You also need to be able to identify said component, which might not be as easy as looking at the text of a button, for example, as the text could change between look and feel delegates or localisations"}],"last_activity_date":1684437419,"question_id":76283561,"body":"<p>How do I get a list of components for a java swing application and how can I manipulate or remove them?</p>\n<p>For a example, lets say I want to remove the cancel and exit button from a JOptionpane.\nHow would I retrieve a list of all components? Specifically I don't know the syntax names of the x or cancel button.\nHow would I remove components from the JOptionPane?</p>\n<p>edit: woops I meant the JOptionPane.</p>\n"},{"comments":[{"comment_id":134525225,"body":"Please share your code and error that you are facing"}],"last_activity_date":1684437175,"question_id":76283797,"body":"<p>I am developing SOAP service from wsdl. I am using @RequestPayload annotation to map my request input. But it is returning the parameters as null.\nWhen I try to unmarshall the xml separately, it gives me the parameters.\nAny pointers why it is returning null? Where can I debug where this unmarshalling happens in spring?</p>\n"},{"comments":[{"comment_id":128403832,"body":"Selecting the warning in the <i>Problems</i> view and hitting Ctrl+1 provides you a Quick Fix. Or change the project manually in <i>Project &gt; Properties: Resource</i>. For details see <a href=\"https://www.eclipse.org/eclipse/news/4.24/platform.php#no-explicit-encoding-project-warning\" rel=\"nofollow noreferrer\">eclipse.org/eclipse/news/4.24/&hellip;</a> and/or watch my video <a href=\"https://youtu.be/zDJtVYAJwyY?t=663\" rel=\"nofollow noreferrer\">youtu.be/zDJtVYAJwyY?t=663</a>"},{"comment_id":128833882,"body":"The above from @howlger is an &quot;Answer&quot; not a question aimed at further clarification."}],"answers":[{"comments":[{"comment_id":131066348,"body":"I have a Maven project and every time I run <code>Update Project</code> it gives me the encoding set message. Is there a way to specify it in the <code>pom.xml</code>?"}],"answer_id":72947638,"body":"<p>Yes, the <a href=\"https://www.eclipse.org/eclipse/news/4.24/platform.php#no-explicit-encoding-project-warning\" rel=\"noreferrer\"><strong>warning for projects with no explicit default encoding</strong> is a <strong>new</strong> thing in <strong>Eclipse 2022-06</strong> (4.24)</a>.</p>\n<p>To set an explicit default encoding do one of the following:</p>\n<ul>\n<li>In the <strong><em>Problems</em> view, select the warning</strong>, hit <strong><kbd>Ctrl</kbd>+<kbd>1</kbd></strong> and apply the provided Quick Fix (sets the project encoding explicitly to the workspace encoding)</li>\n<li>Change the project manually in <em><strong>Project &gt; Properties: Resource</strong></em></li>\n</ul>\n<p>See also <a href=\"https://youtu.be/zDJtVYAJwyY?t=663\" rel=\"noreferrer\">my video showing and explaining this</a>.</p>\n"},{"answer_id":73937700,"body":"<p>If you prefer to ignore this warning for all projects you can change the preferences:</p>\n<blockquote>\n<p>General -&gt; Workspace -&gt; Report missing project encoding as: <strong>Ignore</strong></p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/dQlBy.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/dQlBy.png\" alt=\"enter image description here\" /></a></p>\n"},{"answer_id":76283796,"body":"<p>If you are using Maven, add something similar to the following to your <code>pom.xml</code>:</p>\n<pre><code>    &lt;build&gt;\n        &lt;pluginManagement&gt;\n            &lt;plugins&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;${maven.resources.plugin.version}&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n</code></pre>\n"}],"last_activity_date":1684437142,"question_id":72692978,"body":"<p>I downgraded from Windows 11 to Windows 10 today and had to reinstall the Eclipse-IDE.<br/>\nAfter successfully importing my workspaces and fixing the projects, a warning appeared for every project saying &quot;Project XXX has no explicit encoding set&quot;. I've already searched for a solution and only got some fixes for VSCode.</p>\n<p>I had <strong>Eclipse 2021-6</strong> and installed <strong>Eclipse 2022-6</strong></p>\n"},{"comments":[{"comment_id":5790258,"body":"Why? What are you attempting to do? I&#39;m sure there is a better solution."}],"answers":[{"comments":[{"comment_id":115966731,"body":"Thanks! Useful answer if you have keystroke action and also want to fire it from some mouse action like mouse wheel action"}],"answer_id":5152707,"body":"<p>Not without losing some information. The <code>MouseEvent</code> contains information about the mouse location (<code>x, y</code>) and which buttons that are pressed (if any).</p>\n\n<hr>\n\n<p>I would do the conversion like this:</p>\n\n<pre><code>MouseEvent me = ...;\nActionEvent ae = new ActionEvent(me.getSource(), me.getID(), me.paramString());\n</code></pre>\n"},{"answer_id":5152766,"body":"<p>Sure, that's what a Button does (to my understanding). It processes a <code>MouseEvent</code> and creates (sends) an <code>ActionEvent</code>.</p>\n\n<p>Action events are semantic events - like a signal, that a certain button (widget!) has been \"pressed\". The trigger for this action event may have been a mouse event (\"left button has been pressed and released while the mouse pointer was in the rectangle defined by a AWT Button widget\") or a keyboard event (\"Space bar has been pressed and released while the focus was at AWT Button widget\").</p>\n\n<p>I guess you're not looking at a technical conversion. Practiacally, you'll have to listen to mouse events and fire new action events to your action listeners.</p>\n"}],"last_activity_date":1684437019,"question_id":5152649,"body":"<p>is it possible to convert a MouseEvent to an ActionEvent?</p>\n"},{"comments":[{"comment_id":134508077,"body":"This issue will be tracked in <a href=\"https://github.com/jberet/jsr352/issues/286\" rel=\"nofollow noreferrer\">github.com/jberet/jsr352/issues/286</a>"}],"answers":[{"answer_id":76282402,"body":"<p>I discovered that the jberet oracle DLL is generating tables and sequences, but for some reason, it's not generating the triggers.</p>\n<p><img src=\"https://i.stack.imgur.com/Ln40n.png\" alt=\"enter image description here\" /></p>\n<p>So I manually compiled the triggers (<a href=\"https://github.com/jberet/jsr352/blob/master/jberet-core/src/main/resources/sql/jberet-oracle.ddl\" rel=\"nofollow noreferrer\">found here</a>), and now everything is working fine!</p>\n<pre><code>CREATE OR REPLACE TRIGGER JOB_INSTANCE_BRI\nBEFORE INSERT ON JOB_INSTANCE\nFOR EACH ROW\n  BEGIN\n    SELECT JOB_INSTANCE_SEQ.nextval INTO :new.JOBINSTANCEID FROM dual;\n  END;\n\nCREATE OR REPLACE TRIGGER JOB_EXECUTION_BRI\nBEFORE INSERT ON JOB_EXECUTION\nFOR EACH ROW\n  BEGIN\n    SELECT JOB_EXECUTION_SEQ.nextval INTO :new.JOBEXECUTIONID FROM dual;\n  END;\n\nCREATE OR REPLACE TRIGGER STEP_EXECUTION_BRI\nBEFORE INSERT ON STEP_EXECUTION\nFOR EACH ROW\n  BEGIN\n    SELECT STEP_EXECUTION_SEQ.nextval INTO :new.STEPEXECUTIONID FROM dual;\n  END;\n</code></pre>\n"}],"last_activity_date":1684436949,"question_id":76272782,"body":"<p>I'm running a Jakarta 10 application in Wildfly 27.0.1.Final server (thats implement Jakarta batch using Jberet)</p>\n<p>I want to use a JDBC Job Repository in JBeret.</p>\n<p>Everything runs okay when I use the default &quot;in-memory&quot; repository or when I use the MySQL repository. However, when I try to use the Oracle repository, even though the tables used by Jberet are correctly generated (I think so), I encounter this error when I execute a job.</p>\n<pre><code>Caused by: Error : 1400, Position : 0, SQL = INSERT INTO \nJOB_INSTANCE(JOBNAME, APPLICATIONNAME) VALUES(:1 , :2 ) RETURNING \nJOBINSTANCEID INTO :3  [SQL INCLUDES EXPRESSIONS ADDED BY THE ORACLE \nJDBC DRIVER], Original SQL = INSERT INTO JOB_INSTANCE(JOBNAME, \nAPPLICATIONNAME) VALUES(?, ?) RETURNING JOBINSTANCEID INTO ?, Error \nMessage = ORA-01400: impossible insert NULL in \n(&quot;TASK_USER&quot;.&quot;JOB_INSTANCE&quot;.&quot;JOBINSTANCEID&quot;)\n</code></pre>\n<p>Environment:\nWildfly 27.0.1.Final\nJakarta 10 -&gt; Jakarta Batch 2.1\nDB for job-repository: Oracle DB 21cXE</p>\n<p>Configuration in standalone-full.xml:\n<strong>Repository configuration</strong></p>\n<pre><code>    &lt;subsystem xmlns=&quot;urn:jboss:domain:batch-jberet:3.0&quot;&gt;\n        &lt;default-job-repository name=&quot;oracle-repository&quot;/&gt;\n        &lt;default-thread-pool name=&quot;batch&quot;/&gt;\n        &lt;job-repository name=&quot;in-memory&quot;&gt;\n            &lt;in-memory/&gt;\n        &lt;/job-repository&gt;\n        &lt;job-repository name=&quot;mysql-repository&quot;&gt;\n            &lt;jdbc data-source=&quot;MysqlDataSource&quot;/&gt;\n        &lt;/job-repository&gt;\n        &lt;job-repository name=&quot;oracle-repository&quot;&gt;\n            &lt;jdbc data-source=&quot;OracleDS&quot;/&gt;\n        &lt;/job-repository&gt;\n        &lt;thread-pool name=&quot;batch&quot;&gt;\n            &lt;max-threads count=&quot;10&quot;/&gt;\n            &lt;keepalive-time time=&quot;30&quot; unit=&quot;seconds&quot;/&gt;\n        &lt;/thread-pool&gt;\n    &lt;/subsystem&gt;\n</code></pre>\n<p><strong>DataSource configuration</strong></p>\n<pre><code>    &lt;subsystem xmlns=&quot;urn:jboss:domain:datasources:7.0&quot;&gt;\n        &lt;datasources&gt;\n            &lt;datasource jndi-name=&quot;java:jboss/datasources/ExampleDS&quot; pool-name=&quot;ExampleDS&quot; enabled=&quot;true&quot; use-java-context=&quot;true&quot; statistics-enabled=&quot;${wildfly.datasources.statistics-enabled:${wildfly.statistics-enabled:false}}&quot;&gt;\n                &lt;connection-url&gt;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;MODE=${wildfly.h2.compatibility.mode:REGULAR}&lt;/connection-url&gt;\n                &lt;driver&gt;h2&lt;/driver&gt;\n                &lt;security&gt;\n                    &lt;user-name&gt;sa&lt;/user-name&gt;\n                    &lt;password&gt;sa&lt;/password&gt;\n                &lt;/security&gt;\n            &lt;/datasource&gt;\n            &lt;datasource jndi-name=&quot;java:jboss/datasources/OracleDS&quot; pool-name=&quot;OracleDS&quot; enabled=&quot;true&quot; use-java-context=&quot;true&quot; statistics-enabled=&quot;${wildfly.datasources.statistics-enabled:${wildfly.statistics-enabled:false}}&quot;&gt;\n                &lt;connection-url&gt;jdbc:oracle:thin:@localhost:1521:XE&lt;/connection-url&gt;\n                &lt;driver&gt;oracle&lt;/driver&gt;\n                &lt;security&gt;\n                    &lt;user-name&gt;TASK_USER&lt;/user-name&gt;\n                    &lt;password&gt;taskpass&lt;/password&gt;\n                &lt;/security&gt;\n            &lt;/datasource&gt;\n            &lt;datasource jndi-name=&quot;java:jboss/datasources/MysqlDataSource&quot; pool-name=&quot;MysqlDataSource&quot; enabled=&quot;true&quot; use-java-context=&quot;true&quot; statistics-enabled=&quot;${wildfly.datasources.statistics-enabled:${wildfly.statistics-enabled:false}}&quot;&gt;\n                &lt;connection-url&gt;jdbc:mysql://127.0.0.1:3306/taskdb&lt;/connection-url&gt;\n                &lt;driver&gt;mysql&lt;/driver&gt;\n                &lt;security&gt;\n                    &lt;user-name&gt;TASK_USER&lt;/user-name&gt;\n                    &lt;password&gt;taskpass&lt;/password&gt;\n                &lt;/security&gt;\n            &lt;/datasource&gt;\n            &lt;drivers&gt;\n                &lt;driver name=&quot;h2&quot; module=&quot;com.h2database.h2&quot;&gt;\n                    &lt;xa-datasource-class&gt;org.h2.jdbcx.JdbcDataSource&lt;/xa-datasource-class&gt;\n                &lt;/driver&gt;\n                &lt;driver name=&quot;oracle&quot; module=&quot;com.oracle&quot;&gt;\n                    &lt;driver-class&gt;oracle.jdbc.driver.OracleDriver&lt;/driver-class&gt;\n                &lt;/driver&gt;\n                &lt;driver name=&quot;mysql&quot; module=&quot;com.mysql&quot;&gt;\n                    &lt;driver-class&gt;com.mysql.cj.jdbc.Driver&lt;/driver-class&gt;\n                    &lt;xa-datasource-class&gt;com.mysql.cj.jdbc.MysqlXADataSource&lt;/xa-datasource-class&gt;\n                &lt;/driver&gt;\n            &lt;/drivers&gt;\n        &lt;/datasources&gt;\n</code></pre>\n<p><strong>Complete error stack trace</strong></p>\n<pre><code>WARNING [jakarta.enterprise.resource.webcontainer.faces.lifecycle] (default task-1) #{JSFBean.doJob}: /my_face_page.xhtml @16,84 action=&quot;#{JSFBean.doJob}&quot;: jakarta.batch.operations.BatchRuntimeException: JBERET000626: Failed to run INSERT INTO JOB_INSTANCE(JOBNAME, APPLICATIONNAME) VALUES(?, ?): jakarta.faces.FacesException: #{JSFBean.doJob}: /my_face_page.xhtml @16,84 action=&quot;#{JSFBean.doJob}&quot;: jakarta.batch.operations.BatchRuntimeException: JBERET000626: Failed to run INSERT INTO JOB_INSTANCE(JOBNAME, APPLICATIONNAME) VALUES(?, ?)\n    at com.sun.jsf-impl@4.0.0.SP01//com.sun.faces.application.ActionListenerImpl.getNavigationOutcome(ActionListenerImpl.java:83)\n    at com.sun.jsf-impl@4.0.0.SP01//com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:62)\n    at jakarta.faces.api//jakarta.faces.component.UICommand.broadcast(UICommand.java:205)\n    at jakarta.faces.api//jakarta.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:858)\n    at jakarta.faces.api//jakarta.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1332)\n    at com.sun.jsf-impl@4.0.0.SP01//com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:56)\n    at com.sun.jsf-impl@4.0.0.SP01//com.sun.faces.lifecycle.Phase.doPhase(Phase.java:72)\n    at com.sun.jsf-impl@4.0.0.SP01//com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:159)\n    at jakarta.faces.api//jakarta.faces.webapp.FacesServlet.executeLifecyle(FacesServlet.java:691)\n    at jakarta.faces.api//jakarta.faces.webapp.FacesServlet.service(FacesServlet.java:449)\n    at io.undertow.servlet@2.3.0.Final//io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)\n    at io.undertow.servlet@2.3.0.Final//io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)\n    at io.smallrye.opentracing-contrib//io.smallrye.opentracing.contrib.jaxrs2.server.SpanFinishingFilter.doFilter(SpanFinishingFilter.java:69)\n    at io.undertow.servlet@2.3.0.Final//io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:67)\n    at io.undertow.servlet@2.3.0.Final//io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n    at io.undertow.servlet@2.3.0.Final//io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)\n    at io.undertow.servlet@2.3.0.Final//io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\n    at io.undertow.servlet@2.3.0.Final//io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)\n    at io.undertow.servlet@2.3.0.Final//io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\n    at org.wildfly.security.elytron-web.undertow-server@3.0.0.Final//org.wildfly.elytron.web.undertow.server.ElytronRunAsHandler.lambda$handleRequest$1(ElytronRunAsHandler.java:68)\n    at org.wildfly.security.elytron-base@2.0.0.Final//org.wildfly.security.auth.server.FlexibleIdentityAssociation.runAsFunctionEx(FlexibleIdentityAssociation.java:103)\n    at org.wildfly.security.elytron-base@2.0.0.Final//org.wildfly.security.auth.server.Scoped.runAsFunctionEx(Scoped.java:161)\n    at org.wildfly.security.elytron-base@2.0.0.Final//org.wildfly.security.auth.server.Scoped.runAs(Scoped.java:73)\n    at org.wildfly.security.elytron-web.undertow-server@3.0.0.Final//org.wildfly.elytron.web.undertow.server.ElytronRunAsHandler.handleRequest(ElytronRunAsHandler.java:67)\n    at io.undertow.servlet@2.3.0.Final//io.undertow.servlet.handlers.RedirectDirHandler.handleRequest(RedirectDirHandler.java:68)\n    at io.undertow.servlet@2.3.0.Final//io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:117)\n    at io.undertow.servlet@2.3.0.Final//io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\n    at io.undertow.core@2.3.0.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.core@2.3.0.Final//io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\n    at io.undertow.servlet@2.3.0.Final//io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\n    at io.undertow.core@2.3.0.Final//io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\n    at org.wildfly.security.elytron-web.undertow-server-servlet@3.0.0.Final//org.wildfly.elytron.web.undertow.server.servlet.CleanUpHandler.handleRequest(CleanUpHandler.java:38)\n    at io.undertow.core@2.3.0.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at org.wildfly.extension.undertow@27.0.1.Final//org.wildfly.extension.undertow.security.jacc.JACCContextIdHandler.handleRequest(JACCContextIdHandler.java:61)\n    at io.undertow.core@2.3.0.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at org.wildfly.extension.undertow@27.0.1.Final//org.wildfly.extension.undertow.deployment.GlobalRequestControllerHandler.handleRequest(GlobalRequestControllerHandler.java:68)\n    at io.undertow.servlet@2.3.0.Final//io.undertow.servlet.handlers.SendErrorPageHandler.handleRequest(SendErrorPageHandler.java:52)\n    at io.undertow.core@2.3.0.Final//io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.servlet@2.3.0.Final//io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:275)\n    at io.undertow.servlet@2.3.0.Final//io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:134)\n    at io.undertow.servlet@2.3.0.Final//io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:131)\n    at io.undertow.servlet@2.3.0.Final//io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)\n    at io.undertow.servlet@2.3.0.Final//io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\n    at org.wildfly.extension.undertow@27.0.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1435)\n    at org.wildfly.extension.undertow@27.0.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1435)\n    at org.wildfly.extension.undertow@27.0.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1435)\n    at org.wildfly.extension.undertow@27.0.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1435)\n    at org.wildfly.extension.undertow@27.0.1.Final//org.wildfly.extension.undertow.deployment.UndertowDeploymentInfoService$UndertowThreadSetupAction.lambda$create$0(UndertowDeploymentInfoService.java:1435)\n    at io.undertow.servlet@2.3.0.Final//io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:255)\n    at io.undertow.servlet@2.3.0.Final//io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:100)\n    at io.undertow.core@2.3.0.Final//io.undertow.server.Connectors.executeRootHandler(Connectors.java:391)\n    at io.undertow.core@2.3.0.Final//io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:859)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\n    at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\n    at org.jboss.xnio@3.8.8.Final//org.xnio.XnioWorker$WorkerThreadFactory$1$1.run(XnioWorker.java:1282)\n    at java.base/java.lang.Thread.run(Thread.java:834)\nCaused by: jakarta.el.ELException: /my_face_page.xhtml @16,84 action=&quot;#{JSFBean.doJob}&quot;: jakarta.batch.operations.BatchRuntimeException: JBERET000626: Failed to run INSERT INTO JOB_INSTANCE(JOBNAME, APPLICATIONNAME) VALUES(?, ?)\n    at com.sun.jsf-impl@4.0.0.SP01//com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:76)\n    at com.sun.jsf-impl@4.0.0.SP01//com.sun.faces.application.ActionListenerImpl.getNavigationOutcome(ActionListenerImpl.java:74)\n    ... 57 more\nCaused by: jakarta.batch.operations.BatchRuntimeException: JBERET000626: Failed to run INSERT INTO JOB_INSTANCE(JOBNAME, APPLICATIONNAME) VALUES(?, ?)\n    at org.jberet.jberet-core@2.1.1.Final//org.jberet.repository.JdbcRepository.insertJobInstance(JdbcRepository.java:329)\n    at org.jberet.jberet-core@2.1.1.Final//org.jberet.repository.AbstractPersistentRepository.createJobInstance(AbstractPersistentRepository.java:105)\n    at org.wildfly.extension.batch.jberet@27.0.1.Final//org.wildfly.extension.batch.jberet.job.repository.JobRepositoryService.createJobInstance(JobRepositoryService.java:112)\n    at org.wildfly.extension.batch.jberet@27.0.1.Final//org.wildfly.extension.batch.jberet.job.repository.JdbcJobRepositoryService.createJobInstance(JdbcJobRepositoryService.java:45)\n    at org.jberet.jberet-core@2.1.1.Final//org.jberet.operations.AbstractJobOperator$1.invoke(AbstractJobOperator.java:145)\n    at org.jberet.jberet-core@2.1.1.Final//org.jberet.operations.AbstractJobOperator$1.invoke(AbstractJobOperator.java:142)\n    at org.jberet.jberet-core@2.1.1.Final//org.jberet.operations.AbstractJobOperator.invokeTransaction(AbstractJobOperator.java:465)\n    at org.jberet.jberet-core@2.1.1.Final//org.jberet.operations.AbstractJobOperator.start(AbstractJobOperator.java:142)\n    at org.jberet.jberet-core@2.1.1.Final//org.jberet.operations.AbstractJobOperator.start(AbstractJobOperator.java:102)\n    at org.wildfly.extension.batch.jberet@27.0.1.Final//org.wildfly.extension.batch.jberet.deployment.JobOperatorService.start(JobOperatorService.java:258)\n    at org.jberet.jberet-core@2.1.1.Final//org.jberet.operations.DelegatingJobOperator.start(DelegatingJobOperator.java:68)\n    at deployment.taskbatch.war//com.rb.batch.mybatch.JSFBean.doJob(JSFBean.java:28)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.glassfish.expressly@5.0.0//org.glassfish.expressly.util.ReflectionUtil.invokeMethod(ReflectionUtil.java:186)\n    at org.glassfish.expressly@5.0.0//org.glassfish.expressly.parser.AstValue.invoke(AstValue.java:253)\n    at org.glassfish.expressly@5.0.0//org.glassfish.expressly.MethodExpressionImpl.invoke(MethodExpressionImpl.java:248)\n    at org.jboss.weld.core@5.1.0.Final//org.jboss.weld.module.web.util.el.ForwardingMethodExpression.invoke(ForwardingMethodExpression.java:40)\n    at org.jboss.weld.core@5.1.0.Final//org.jboss.weld.module.web.el.WeldMethodExpression.invoke(WeldMethodExpression.java:50)\n    at com.sun.jsf-impl@4.0.0.SP01//com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:70)\n    ... 58 more\nCaused by: java.sql.SQLIntegrityConstraintViolationException: ORA-01400: impossible insert NULL in (&quot;TASK_USER&quot;.&quot;JOB_INSTANCE&quot;.&quot;JOBINSTANCEID&quot;)\n\n    at com.oracle@23.2.0.0.0//oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:702)\n    at com.oracle@23.2.0.0.0//oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:608)\n    at com.oracle@23.2.0.0.0//oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1335)\n    at com.oracle@23.2.0.0.0//oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:1041)\n    at com.oracle@23.2.0.0.0//oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:443)\n    at com.oracle@23.2.0.0.0//oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:533)\n    at com.oracle@23.2.0.0.0//oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:262)\n    at com.oracle@23.2.0.0.0//oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:1392)\n    at com.oracle@23.2.0.0.0//oracle.jdbc.driver.OracleStatement.executeSQLStatement(OracleStatement.java:1877)\n    at com.oracle@23.2.0.0.0//oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1520)\n    at com.oracle@23.2.0.0.0//oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3751)\n    at com.oracle@23.2.0.0.0//oracle.jdbc.driver.OraclePreparedStatement.executeLargeUpdate(OraclePreparedStatement.java:4078)\n    at com.oracle@23.2.0.0.0//oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:4049)\n    at com.oracle@23.2.0.0.0//oracle.jdbc.driver.OraclePreparedStatementWrapper.executeUpdate(OraclePreparedStatementWrapper.java:997)\n    at org.jboss.ironjacamar.jdbcadapters@1.5.9.Final//org.jboss.jca.adapters.jdbc.WrappedPreparedStatement.executeUpdate(WrappedPreparedStatement.java:537)\n    at org.jberet.jberet-core@2.1.1.Final//org.jberet.repository.JdbcRepository.insertJobInstance(JdbcRepository.java:323)\n    ... 79 more\nCaused by: Error : 1400, Position : 0, SQL = INSERT INTO JOB_INSTANCE(JOBNAME, APPLICATIONNAME) VALUES(:1 , :2 ) RETURNING JOBINSTANCEID INTO :3  [SQL INCLUDES EXPRESSIONS ADDED BY THE ORACLE JDBC DRIVER], Original SQL = INSERT INTO JOB_INSTANCE(JOBNAME, APPLICATIONNAME) VALUES(?, ?) RETURNING JOBINSTANCEID INTO ?, Error Message = ORA-01400: impossible insert NULL in (&quot;TASK_USER&quot;.&quot;JOB_INSTANCE&quot;.&quot;JOBINSTANCEID&quot;)\n\n    at com.oracle@23.2.0.0.0//oracle.jdbc.driver.T4CTTIoer11.processError(T4CTTIoer11.java:710)\n    ... 94 more\n</code></pre>\n<p>Am I missing anything?</p>\n"},{"answers":[{"answer_id":76279689,"body":"<p>The issue you're encountering seems to be related to how you're sending the POST request from Angular. By default, Angular's <code>HttpClient.post()</code> method sends the request with a JSON payload in the request body, rather than as URL parameters. However, your server-side code expects the email and password parameters to be sent as URL parameters.</p>\n<p>To resolve this issue, you need to update your Angular code to send the email and password as URL parameters instead of in the request body.</p>\n<p>Here's how you can modify your code to achieve this:</p>\n<p>Update the <code>login()</code> method in your LoginService.</p>\n"}],"last_activity_date":1684436841,"question_id":76279661,"body":"<p>When making a POST request in Angular, I am encountering a &quot;MissingServletRequestParameterException&quot; error. The error message states that the required request parameter 'email' is not present. However, when I test the API using Postman and provide the email and password parameters in the URL, the request is successful and returns the expected result.</p>\n<p>I have implemented the login functionality using Angular's HttpClient module and a login service. The code seems correct, but I'm unsure why the required parameters are not being included in the request when using Angular.</p>\n<p>I would appreciate any insights or suggestions on how to resolve this issue. Thank you!</p>\n<p>Here is link of api : http://localhost:55624/doctors/login?email=test@gmail.com&amp;password=1234\nreturn :</p>\n<pre><code>{\n    &quot;message&quot;: &quot;Login successful&quot;,\n    &quot;resultat&quot;: {\n        &quot;id&quot;: 1,\n        &quot;firstName&quot;: &quot;H&quot;,\n        &quot;lastName&quot;: &quot;H&quot;,\n        &quot;email&quot;: &quot;test@gmail.com&quot;,\n        &quot;password&quot;: &quot;1234&quot;\n    },\n    &quot;etat&quot;: &quot;ok&quot;\n}\n</code></pre>\n<pre><code>@PostMapping(&quot;/login&quot;)\n    public Map&lt;String, Object&gt; loginDoctor(@RequestParam(&quot;email&quot;) String email, @RequestParam(&quot;password&quot;) String password) {\n        Doctor doctor = doctorRepository.findByEmail(email);\n        \n        if (doctor != null &amp;&amp; doctor.getPassword().equals(password)) {\n            \n            return Response.success(&quot;Login successful&quot;, doctor);\n        } else {\n            \n            return Response.failure(&quot;Invalid email or password&quot;, null);\n        }\n    }\n\n</code></pre>\n<p>Angular :</p>\n<pre><code>//service\nexport class LoginService {\n\n  private apiUrl = 'http://localhost:55624/doctors/login';\n  constructor(private http: HttpClient) { }\n\n  login(email: string, password: string): Observable&lt;any&gt; {\n    const body = {\n      email: email,\n      password: password\n    };\n\n    return this.http.post(this.apiUrl, body);\n  }\n}\n//component \nexport class LoginComponent { \n  email!: string;\n  password!: string;\n  constructor(private loginService: LoginService) { }\n\n  login(): void {\n    this.loginService.login(this.email, this.password).subscribe(\n      response =&gt; {\n        // Traitement de la réponse de l'API en cas de succès\n        console.log('Login successful:', response);\n      },\n      error =&gt; {\n        // Traitement de l'erreur en cas d'échec de l'API\n        console.error('Login failed:', error);\n      }\n    );\n  }\n}\n\n</code></pre>\n<p>I have verified that the email and password values are correctly bound to the component properties and are available when the login method is called. I have also confirmed that the API works as expected when tested with Postman.</p>\n"},{"comments":[{"comment_id":133980845,"body":"To use <a href=\"https://en.wikipedia.org/wiki/IntelliJ_IDEA\" rel=\"nofollow noreferrer\">IntelliJ</a> to create a JavaFX project driven by either Maven or Gradle, see <a href=\"https://stackoverflow.com/a/74764297/642706\">my Answer</a> on a similar Question."}],"answers":[{"answer_id":73611206,"body":"<p>I would suggest you go to <code>New Project</code> -&gt; <code>Java with Maven</code> -&gt; either <code>Simple JavaFX Maven Archetype(Gluon)</code> or <code>FXML JavaFX Maven Archetype(Gluon)</code>. Use the <code>POM</code> to change your version of <code>JavaFX</code> from the default to whatever version you like. I also use the <code>POM</code> to change the <code>JavaFX-Maven-Plugin</code> to the latest version.</p>\n<p><a href=\"https://i.stack.imgur.com/hNPtk.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hNPtk.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"answer_id":73611827,"body":"<p>I strongly endorse the approach using <a href=\"/questions/tagged/maven\" class=\"post-tag\" title=\"show questions tagged &#39;maven&#39;\" aria-label=\"show questions tagged &#39;maven&#39;\" rel=\"tag\" aria-labelledby=\"tag-maven-tooltip-container\">maven</a> suggested <a href=\"https://stackoverflow.com/a/73611206/230513\">here</a>. This <a href=\"https://github.com/trashgod/modular\" rel=\"nofollow noreferrer\">project</a> started exactly the same way; I'd welcome learning of any issues you encounter.</p>\n<p>Alternatively, follow the steps outlined in <a href=\"https://openjfx.io/openjfx-docs/#IDE-NetBeans\" rel=\"nofollow noreferrer\"><em>JavaFX and NetBeans: Non-modular projects: IDE</em></a>. You've created a JavaFX library, but &quot;Don't try to create a JavaFX project.&quot; Instead, choose <em>Java with Ant</em> and <em>Java Application</em> to create a new project, shown below, then follow the remaining steps carefully. It's a convenient alternative  for a scratch project while you assay <a href=\"/questions/tagged/maven\" class=\"post-tag\" title=\"show questions tagged &#39;maven&#39;\" aria-label=\"show questions tagged &#39;maven&#39;\" rel=\"tag\" aria-labelledby=\"tag-maven-tooltip-container\">maven</a>.</p>\n<p><a href=\"https://i.stack.imgur.com/nDWpv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nDWpv.png\" alt=\"NetBeans\" /></a></p>\n<p>Addendum: The <a href=\"/questions/tagged/ant\" class=\"post-tag\" title=\"show questions tagged &#39;ant&#39;\" aria-label=\"show questions tagged &#39;ant&#39;\" rel=\"tag\" aria-labelledby=\"tag-ant-tooltip-container\">ant</a> code for a <em>JavaFX</em> project, <em>not</em> selected in the image above, may attempt to package dependencies that are no longer required. In particular, a project using module <code>javafx.web</code> may fail with the following error, seen <a href=\"https://stackoverflow.com/q/71928637/230513\">here</a> and <a href=\"https://stackoverflow.com/q/66963470/230513\">here</a>.</p>\n<pre><code>Unable to create javax script engine for javascript.\n</code></pre>\n<p>The easiest fix is to recreate the enclosing project by choosing either of these:</p>\n<ul>\n<li><p><em>Java with Ant &gt; Java Project with Existing Sources</em></p>\n</li>\n<li><p><em>Java with Maven &gt; Project with Existing POM</em></p>\n</li>\n</ul>\n<p>Alternatively, a simple example using a custom <a href=\"/questions/tagged/ant\" class=\"post-tag\" title=\"show questions tagged &#39;ant&#39;\" aria-label=\"show questions tagged &#39;ant&#39;\" rel=\"tag\" aria-labelledby=\"tag-ant-tooltip-container\">ant</a> script is cited <a href=\"https://stackoverflow.com/a/71288497/230513\">here</a>.</p>\n"},{"answer_id":75665753,"body":"<p>The answer is given in the docs:</p>\n<p>&quot;Warning: Don't try to create a JavaFX project. The JavaFX Ant tasks of the current Apache NetBeans version are not ready for JavaFX 11+ yet, unless you have a custom JDK that bundles JavaFX, as described in Custom JDK+JavaFX image.&quot;</p>\n<p><a href=\"https://openjfx.io/openjfx-docs/\" rel=\"nofollow noreferrer\">https://openjfx.io/openjfx-docs/</a></p>\n"}],"last_activity_date":1684436743,"question_id":73607287,"body":"<p>I've been banging my head on this one for ages and all of the tutorials I've found don't seem to work. When I try to create a new JavaFX project in Netbeans 14, using JDK 18 and the latest JFX download for Windows here:\n<a href=\"https://gluonhq.com/products/javafx/\" rel=\"nofollow noreferrer\">https://gluonhq.com/products/javafx/</a></p>\n<p>Also tried with JDK and JFX 17 and still no luck. I get this error:\n<a href=\"https://i.stack.imgur.com/tAWW4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tAWW4.png\" alt=\"enter image description here\" /></a></p>\n<p>I've added the libraries like so:\n<a href=\"https://i.stack.imgur.com/SyT90.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SyT90.png\" alt=\"enter image description here\" /></a></p>\n<p>If I try to add the platform folder, it won't let me progress through the dialogue:\n<a href=\"https://i.stack.imgur.com/PtyRK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PtyRK.png\" alt=\"enter image description here\" /></a></p>\n<p>I can't find solutions to this anywhere and, again this is the same with JDK 17 and 18, and JFX 17 and 18. I've checked the documentation and there's nothing that seems to solve the issue.</p>\n<p>It says to go to the JavaFX tab and enable JavaFX, but there's no JavaFX tab... Unless they mean this:\n<a href=\"https://i.stack.imgur.com/A4VMS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A4VMS.png\" alt=\"enter image description here\" /></a></p>\n<p>But if that's it then, as you can see, it's already enabled and it's still not working. I'm totally lost. I don't understand why the documentation is so poor for FX, for every IDE. It's honestly like they don't want people to use it and every tutorial I'm finding is using outdated versions of NetBeans, the JDK and JFX D-: (they also don't solve the issue even if I do follow them).</p>\n<p>If anyone could help guide me, I'd really appreciate it.</p>\n"},{"comments":[{"comment_id":93706966,"body":"does your most visited, close by and fav. market views has same UI structure. or little  bit different."},{"comment_id":93707749,"body":"You don&#39;t need 3 adapters you need 3 different <code>view-holders</code>."}],"answers":[{"answer_id":53416349,"body":"<p>You can pass a tag in the constructor and get that tag back via a click listener to identify the click as</p>\n\n<pre><code>private final MarketsItemsClickListener mItemsClickListener;\nprivate final MarketLongClickListener mLongClickListener;\nprivate final MarketClickListener mClickListener;\nprivate final String mTag;\n\npublic MarketAdapter(Context context, MarketsItemsClickListener itemsClickListener, MarketClickListener clickListener, MarketLongClickListener longClickListener, String tag){\n    mTag = tag\n    mContext = context;\n    mItemsClickListener = itemsClickListener;\n    mLongClickListener = longClickListener;\n    mClickListener = clickListener;\n}\n</code></pre>\n\n<p>Modify the listener as</p>\n\n<pre><code>public interface MarketClickListener{\n    void onClick(int position, String tag);\n}\n</code></pre>\n\n<p>and the listener code in activity as</p>\n\n<pre><code>@Override\npublic void onClick(int position, String tag) {\n    switch(tag){\n        case \"adapter1\":\n        break;\n        case \"adapter2\":\n        break;\n        case \"adapter3\":\n        break;\n    }\n}\n</code></pre>\n\n<p>and create adapter object as</p>\n\n<pre><code> MarketAdapter adapter = new MarketAdapter(\"adapter1\"....); \n MarketAdapter adapter1 = new MarketAdapter(\"adapter2\"....); \n MarketAdapter adapter2 = new MarketAdapter(\"adapter3\"....); \n</code></pre>\n\n<p>and use</p>\n\n<pre><code>mClickListener.onClick(position, mTag);\n</code></pre>\n\n<p>Note: You can use enums as well</p>\n"},{"answer_id":53416354,"body":"<p>If you want to do it this way, I would add a new variable to the adapters constructor, and then use a case/if statement to determine what you want to do in your onbindviewholder.</p>\n"},{"answer_id":53416790,"body":"<p>You can add an attribute inside <code>MarketAdapter</code> so that you can tell what instance is that.</p>\n<p>Change your custom click listener to receive the adapter type:</p>\n\n<pre><code>public interface MarketClickListener {\n    //You can change this to receive any data you want from the adapter\n    void onClick(int position, int adapterType);\n}\n</code></pre>\n<p>Add the constants, the identifier attribute and change the listener in your adatper:</p>\n<pre><code>public class MarketAdapter extends RecyclerView.Adapter&lt;MarketAdapter.ViewHolder&gt; {\n    //The constants types\n    public static int MOST_VISITED_MARKETS = 1;\n    public static int CLOSE_BY_MARKETS = 2;\n    public static int FAVORITE_MARKETS = 3;\n    //New attribute\n    private int adapterType;\n\n    ...\n    //Keep the listener\n    private final MarketClickListener mClickListener;\n\n        public MarketAdapter(Context context, MarketsItemsClickListener itemsClickListener, MarketClickListener clickListener, MarketLongClickListener longClickListener, int adapterType){\n            ...\n            //Set the type\n            adapterType = adapterType;\n        }\n\n        ...\n\n}\n</code></pre>\n<p>In your activity:</p>\n<pre><code>mostVisitedRecyclerView.setAdapter(new MarketAdapter(this,itemsClickListener,clickListener,longClickListener,MarketAdapter.MOST_VISITED_MARKETS ));\ncloseByRecyclerView.setAdapter(new MarketAdapter(this,itemsClickListener,clickListener,longClickListener,MarketAdapter.CLOSE_BY_MARKETS));\nfavoritesRecyclerView.setAdapter(new MarketAdapter(this,itemsClickListener,clickListener,longClickListener,MarketAdapter.FAVORITE_MARKETS));\n</code></pre>\n<p>In your view holder, change the <code>onClick</code>:</p>\n<pre><code>@Override\n    public void onClick(View v) {\n        //Get position of Adapter\n        int position = getAdapterPosition();\n        //Handle the click\n        mClickListener.onClick(position,adapterType);\n    }\n</code></pre>\n<p>I didn't test this but I think it will do the trick. Try it out.</p>\n"}],"last_activity_date":1684436394,"question_id":53416182,"body":"<p>I have 3 <code>RecyclerView</code> to display most visited market, close by markets and favorite markets.</p>\n\n<p>I have created 3 difference instance of <code>MarketAdapter</code> class for the three <code>RecyclerView</code></p>\n\n<p>Everything works fine, but my <code>Activity</code> implements one <code>OnClickListener</code> and I cant figure out which adapter was clicked. Is it possible to programmatically determine the <code>Adapter</code> that was clicked from the <code>OnClickListener</code>?</p>\n\n<p>Here is my <code>MarketAdapter Class</code></p>\n\n<pre><code>public class MarketAdapter extends RecyclerView.Adapter&lt;MarketAdapter.ViewHolder&gt; {\n\nArrayList&lt;Markets&gt; mMarket = new ArrayList&lt;&gt;();\nContext mContext;\nprivate final MarketsItemsClickListener mItemsClickListener;\nprivate final MarketLongClickListener mLongClickListener;\nprivate final MarketClickListener mClickListener;\n\npublic MarketAdapter(Context context, MarketsItemsClickListener itemsClickListener, MarketClickListener clickListener, MarketLongClickListener longClickListener){\n    mContext = context;\n    mItemsClickListener = itemsClickListener;\n    mLongClickListener = longClickListener;\n    mClickListener = clickListener;\n}\n\npublic interface MarketLongClickListener{\n    void onLongClick(int position);\n}\n\npublic interface MarketClickListener{\n    void onClick(int position);\n}\n\npublic interface MarketsItemsClickListener{\n    void imageViewOnClickListener(View view, int position);\n}\n\n@NonNull\n@Override\npublic ViewHolder onCreateViewHolder(@NonNull ViewGroup viewGroup, int i) {\n    Context context = viewGroup.getContext();\n    int layoutForListItem = R.layout.list_market;\n    LayoutInflater inflater = LayoutInflater.from(context);\n    boolean shouldAttachToParentImmediately = false;\n\n    View view = inflater.inflate(layoutForListItem, viewGroup, shouldAttachToParentImmediately);\n    return new ViewHolder(view);\n}\n\n@Override\npublic void onBindViewHolder(@NonNull ViewHolder viewHolder, int i) {\n    viewHolder.bindView(i);\n}\n\n@Override\npublic int getItemCount() {\n    if(mMarket != null) return mMarket.size();\n    return 0;\n}\n\npublic void setData(ArrayList&lt;Markets&gt; markets){\n    mMarket = markets;\n    notifyDataSetChanged();\n}\n\npublic void addData(Markets market, int position){\n    mMarket.add(0, market);\n    notifyDataSetChanged();\n}\n\npublic Markets getItem(int position){return mMarket.get(position);}\n\nclass ViewHolder extends RecyclerView.ViewHolder implements View.OnLongClickListener, View.OnClickListener{\n\n    ImageView mImageView;\n    TextView mNameTextView, mCityTextView;\n\n    public ViewHolder(@NonNull View itemView) {\n        super(itemView);\n\n        mImageView = itemView.findViewById(R.id.image_view);\n        mNameTextView = itemView.findViewById(R.id.name_text_view);\n        mCityTextView = itemView.findViewById(R.id.city_text_view);\n\n        itemView.setOnLongClickListener(this);\n        itemView.setOnClickListener(this);\n    }\n\n    void bindView(int position){\n        Markets market = getItem(position);\n\n        mCityTextView.setText(market.getCity());\n        mNameTextView.setText(market.getName());\n    }\n\n    @Override\n    public void onClick(View v) {\n        //Get position of Adapter\n        int position = getAdapterPosition();\n        //Handle the click\n        mClickListener.onClick(position);\n    }\n\n    @Override\n    public boolean onLongClick(View v) {\n        return false;\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>and <code>OnClickListener</code> from <code>Activity</code></p>\n\n<pre><code>@Override\npublic void onClick(int position) {}\n</code></pre>\n"},{"last_activity_date":1684436040,"question_id":76283692,"body":"<p>I have my page that is opened by a POST command, I've decided to create my index.html with the code to open my main page.</p>\n<p>It works locally, my HTML file is stored in resources folder, but now I need to run under SouceLabs and the file is not located at the remote driver, I'm not sure if the path need to be changed for that, but I've enabled <code>webDriver.setFileDetector(new LocalFileDetector());</code></p>\n<p>Does anyone know how can I open this file using RemoteWebDriver?</p>\n"},{"comments":[{"comment_id":134524186,"body":"This is a bug in Netty and Jetty respectively. Report it to them, and have a look through their bug lists."}],"last_activity_date":1684435871,"question_id":76283678,"body":"<p><em>What I am trying to achieve:</em></p>\n<p>Send a high volume of http requests to a third party server</p>\n<p><em>Issue:</em></p>\n<p>Intermittently, I am facing this issue I am having a hard time understanding.</p>\n<p>Again, this is intermittent only.</p>\n<pre><code>javax.net.ssl|ALL|83|reactor-http-nio-12|SSLEngineImpl.java:825|Closing outbound of SSLEngine\njavax.net.ssl|ALL|83|reactor-http-nio-12|SSLEngineImpl.java:786|Closing inbound of SSLEngine\njavax.net.ssl|ERROR|83|reactor-http-nio-12|TransportContext.java:363|Fatal (INTERNAL_ERROR): closing inbound before receiving peer's close_notify (\n&quot;throwable&quot; : {\n  javax.net.ssl.SSLException: closing inbound before receiving peer's close_notify\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:133)\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:117)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:358)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:314)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:305)\n    at java.base/sun.security.ssl.SSLEngineImpl.closeInbound(SSLEngineImpl.java:796)\n    at io.netty.handler.ssl.SslHandler.setHandshakeFailure(SslHandler.java:1878)\n    at io.netty.handler.ssl.SslHandler.channelInactive(SslHandler.java:1078)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:305)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:281)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:274)\n    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelInactive(DefaultChannelPipeline.java:1405)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:301)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:281)\n    at io.netty.channel.DefaultChannelPipeline.fireChannelInactive(DefaultChannelPipeline.java:901)\n    at io.netty.channel.AbstractChannel$AbstractUnsafe$7.run(AbstractChannel.java:813)\n    at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)\n    at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)\n    at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    at java.base/java.lang.Thread.run(Thread.java:833)}\n</code></pre>\n<pre><code>javax.net.ssl|ALL|53|reactor-http-nio-10|SSLEngineImpl.java:786|Closing inbound of SSLEngine\njavax.net.ssl|ALL|33|reactor-http-nio-8|SSLEngineImpl.java:825|Closing outbound of SSLEngine\njavax.net.ssl|ALL|33|reactor-http-nio-8|SSLEngineImpl.java:786|Closing inbound of SSLEngine\njavax.net.ssl|ERROR|53|reactor-http-nio-10|TransportContext.java:363|Fatal (INTERNAL_ERROR): closing inbound before receiving peer's close_notify (\n&quot;throwable&quot; : {\n  javax.net.ssl.SSLException: closing inbound before receiving peer's close_notify\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:133)\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:117)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:358)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:314)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:305)\n    at java.base/sun.security.ssl.SSLEngineImpl.closeInbound(SSLEngineImpl.java:796)\n    at io.netty.handler.ssl.SslHandler.setHandshakeFailure(SslHandler.java:1878)\n    at io.netty.handler.ssl.SslHandler.channelInactive(SslHandler.java:1078)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:305)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:281)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:274)\n    at reactor.netty.channel.MicrometerChannelMetricsHandler$TlsMetricsHandler.channelInactive(MicrometerChannelMetricsHandler.java:278)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:305)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:281)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelInactive(AbstractChannelHandlerContext.java:274)\n    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelInactive(DefaultChannelPipeline.java:1405)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:301)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelInactive(AbstractChannelHandlerContext.java:281)\n    at io.netty.channel.DefaultChannelPipeline.fireChannelInactive(DefaultChannelPipeline.java:901)\n    at io.netty.channel.AbstractChannel$AbstractUnsafe$7.run(AbstractChannel.java:813)\n    at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)\n    at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)\n    at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasksFrom(SingleThreadEventExecutor.java:426)\n    at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:375)\n    at io.netty.util.concurrent.SingleThreadEventExecutor.confirmShutdown(SingleThreadEventExecutor.java:763)\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:596)\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    at java.base/java.lang.Thread.run(Thread.java:833)}\n\n</code></pre>\n<pre><code>javax.net.ssl|ERROR|6B|HttpClient@684b31de-182|TransportContext.java:363|Fatal (INTERNAL_ERROR): closing inbound before receiving peer's close_notify (\n&quot;throwable&quot; : {\n  javax.net.ssl.SSLException: closing inbound before receiving peer's close_notify\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:133)\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:117)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:358)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:314)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:305)\n    at java.base/sun.security.ssl.SSLEngineImpl.closeInbound(SSLEngineImpl.java:796)\n    at org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.closeInbound(SslConnection.java:985)\n    at org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.fill(SslConnection.java:769)\n    at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.process(HttpReceiverOverHTTP.java:180)\n    at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.receive(HttpReceiverOverHTTP.java:91)\n    at org.eclipse.jetty.client.http.HttpChannelOverHTTP.receive(HttpChannelOverHTTP.java:90)\n    at org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onFillable(HttpConnectionOverHTTP.java:194)\n    at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:314)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:100)\n    at org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.onFillable(SslConnection.java:558)\n    at org.eclipse.jetty.io.ssl.SslConnection.onFillable(SslConnection.java:379)\n    at org.eclipse.jetty.io.ssl.SslConnection$2.succeeded(SslConnection.java:146)\n    at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:100)\n    at org.eclipse.jetty.io.SelectableChannelEndPoint$1.run(SelectableChannelEndPoint.java:53)\n    at org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.runTask(AdaptiveExecutionStrategy.java:416)\n    at org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.consumeTask(AdaptiveExecutionStrategy.java:385)\n    at org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.tryProduce(AdaptiveExecutionStrategy.java:272)\n    at org.eclipse.jetty.util.thread.strategy.AdaptiveExecutionStrategy.lambda$new$0(AdaptiveExecutionStrategy.java:140)\n    at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:411)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:969)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.doRunJob(QueuedThreadPool.java:1194)\n    at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:1149)\n    at java.base/java.lang.Thread.run(Thread.java:833)}\n</code></pre>\n<p><em>Note:</em></p>\n<p>Other clients, running on same machine or different machines, when they fire requests at the same timestamp, no issue</p>\n<p><em>Question:</em></p>\n<p>May I ask what does it mean?</p>\n<p>Is it the third party server issue? Or me the client?</p>\n<p>What can I do in order to avoid this? What can I do to further debug this issue?</p>\n"},{"answers":[{"comments":[{"comment_id":134525652,"body":"<code>ParallelConsumerApplication</code> is the name of my java class which contains the main function."},{"comment_id":134528205,"body":"Not just the name of the class matters, you probably put it in a different package. You would need to show the code for this class at least. It should start with:  package io.confluent.developer;  And be in a a folder src/main/io/confluent/developer/"},{"comment_id":134528903,"body":"yes it&#39;s inside package <code>src&#47;main&#47;io&#47;confluent&#47;developer&#47;</code> only."}],"answer_id":76283666,"body":"<p>ParallelConsumerApplication is not something provided by any of the dependencies, it is a class you yourself need to write, see <a href=\"https://developer.confluent.io/tutorials/confluent-parallel-consumer/confluent.html\" rel=\"nofollow noreferrer\">https://developer.confluent.io/tutorials/confluent-parallel-consumer/confluent.html</a></p>\n<p>So clearly the error is caused because you didn't create such a class in your application. If you created it with another name, you need to use the name of your main application class instead of io.confluent.developer.ParallelConsumerApplication</p>\n"}],"last_activity_date":1684435802,"question_id":76269596,"body":"<p>This is probably a duplicate question but I have searched a lot and I couldn't find an answer that worked. I am sure that I am making a simple mistake but I just can't figure it out.</p>\n<p>I have created a simple core Java project using <code>Gradle wrapper 7.6</code>.</p>\n<p>I was able to create a docker image using <code>docker build</code> command but when I ran the command, I got the following error:</p>\n<pre><code>Could not find or load main class io.confluent.developer.ParallelConsumerApplication\n</code></pre>\n<p>Here is the <code>dockerfile</code>:</p>\n<pre><code>FROM gradle:7.6.1-jdk8 AS builder\nWORKDIR /app\nCOPY build.gradle ./\nRUN gradle build --scan --stacktrace \nFROM adoptopenjdk/openjdk8:alpine-jre\nWORKDIR /app\nCOPY --from=builder /app/build/libs/*.jar .\nENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;app-0.0.1-plain.jar&quot;]\n</code></pre>\n<p>Here is the <code>build.gradle</code> file:</p>\n<pre><code>    buildscript {\n        repositories {\n            mavenCentral()\n        }\n        dependencies {\n            classpath &quot;com.github.jengelman.gradle.plugins:shadow:6.1.0&quot;\n        }\n    }\n    \n    plugins {\n        id &quot;maven-publish&quot;\n        id &quot;java&quot;\n        id 'org.springframework.boot' version '2.7.1'\n    }\n    \n    //sourceCompatibility = JavaVersion.VERSION_17\n    //targetCompatibility = JavaVersion.VERSION_17\n    version = &quot;0.0.1&quot;\n    \n    repositories {\n        mavenCentral()\n        maven {\n            url &quot;https://packages.confluent.io/maven&quot;\n        }\n    }\n    \n    apply plugin: &quot;com.github.johnrengelman.shadow&quot;\n    //apply plugin: 'org.springframework.boot'\n    apply plugin: 'io.spring.dependency-management'\n    \n    dependencies {\n        implementation &quot;io.confluent.parallelconsumer:parallel-consumer-core:0.5.2.4&quot;\n        implementation &quot;org.apache.avro:avro:1.11.1&quot;\n        implementation &quot;io.confluent:kafka-avro-serializer:3.3.0&quot;\n        implementation &quot;org.springframework.boot:spring-boot-starter-web&quot;\n        implementation &quot;org.codehaus.jackson:jackson-core-asl:1.9.13&quot;\n        implementation &quot;org.codehaus.jackson:jackson-mapper-asl:1.9.13&quot;\n        implementation &quot;org.apache.commons:commons-lang3:3.12.0&quot;\n        implementation &quot;org.slf4j:slf4j-simple:2.0.0&quot;\n        implementation &quot;me.tongfei:progressbar:0.9.3&quot;\n        implementation 'org.awaitility:awaitility:4.2.0'\n        implementation(&quot;log4j:log4j:1.2.17&quot;)\n    \n        testImplementation &quot;junit:junit:4.13.2&quot;\n        testImplementation 'org.awaitility:awaitility:4.2.0'\n        testImplementation &quot;io.confluent.parallelconsumer:parallel-consumer-core:0.5.2.4:tests&quot; // for LongPollingMockConsumer\n    }\n    \n    test {\n        testLogging {\n            outputs.upToDateWhen { false }\n            showStandardStreams = true\n            exceptionFormat = &quot;full&quot;\n        }\n    }\n    \n    bootJar {\n        enabled = false\n    }\n    \n    \n    jar {\n      manifest {\n        attributes(\n          &quot;Class-Path&quot;: configurations.compileClasspath.collect { it.getName() }.join(&quot; &quot;),\n          'Main-Class': 'io.confluent.developer.ParallelConsumerApplication',\n        )\n      }\n    }\n    \n    \n    shadowJar {\n        archiveBaseName = &quot;confluent-parallel-consumer-application-standalone&quot;\n    }\n</code></pre>\n<p>This is not a spring boot application, I just used the <code>RestTemplate</code> in the project to make an API call.</p>\n<p>Any help is appreciated. Thanks in advance.</p>\n"},{"comments":[{"comment_id":134521648,"body":"did you try to allowCredentials ?"},{"comment_id":134536550,"body":"yes, I did that and the error is the same"}],"answers":[{"comments":[{"comment_id":134521012,"body":"This is nonsensical. If you control the client and the server, injecting a proxy just to bypass CORS is the worst possible way of doing this."},{"comment_id":134538604,"body":"Its not just to bypass CORS, its all in one"},{"comment_id":134540333,"body":"&quot;All in one&quot;? What does that even mean?"},{"comment_id":134558413,"body":"Well, it&#39;s not only for CORS, but I am dealing with CORS like that too, I said my way of dealing with CORS, because my FE and BE is supposed to be running on same URL, of course you can do it with restify&#39;s CORS or whatever node server you are using."},{"comment_id":134574475,"body":"OK, so you <b>are</b> suggesting introducing a proxy to get around CORS between your own front-end and back-end, which is objectively wrong, and avoids solving the real problem by layering on a whole new service. I reiterate, this is the worst possible way of doing this. If your backend is introducing overly restrictive CORS headers, using a proxy to remove them is terrible incorrect advice."}],"answer_id":76280414,"body":"<p>My way of dealing with CORS is setting proxy, create new file, name it however you want, and use the code below. Have in mind that you should switch target url to your servers url, and of course run npm i http-proxy-middleware in client. One reminder '/api' means that every endpoint you will create on your BE will need to start with /api for example /api/get-users</p>\n<pre><code>const { createProxyMiddleware } = require('http-proxy-middleware');\n\nmodule.exports = function(app) {\n    app.use(createProxyMiddleware('/api', { target: 'http://localhost:8080', changeOrigin: true }));\n};\n</code></pre>\n"}],"last_activity_date":1684435331,"question_id":76277781,"body":"<p>I made my backend using springboot and added CORS to all the routes:</p>\n<pre><code>package com.sysmap.showus.services.utils.config;\n\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.servlet.config.annotation.CorsRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\n@Configuration\npublic class CorsConfig implements WebMvcConfigurer {\n\n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n        registry.addMapping(&quot;/**&quot;)\n                .allowedOrigins(&quot;*&quot;)\n                .allowedMethods(&quot;*&quot;)\n                .allowedHeaders(&quot;*&quot;);\n    }\n}\n</code></pre>\n<p>Now I'm doing the frontend with React Typescript and to create and log into the account it works by passing the correct CORS header, but to do a get that returns me a user it's not returning the header and always gives an error:</p>\n<blockquote>\n<p>'p://localhost:8082/api/v1/user?email=l%40gmail.com' from origin\n'http://localhost:5173' has been blocked by CORS policy: Response to\npreflight request doesn't pass access control check: No\n'Access-Control-Allow-Origin' header is present on the requested\nresource.</p>\n</blockquote>\n<p>Does anyone know what this could be?\nHere is the Frontend API call that gives the error:</p>\n<pre><code>useEffect(() =&gt; {\n    const res = async () =&gt; {\n      const userEmail = localStorage.getItem('userEmail');\n      if (userEmail) {\n        await api\n          .get('/user', {\n            headers: getAuthHeader(),\n            params: {\n              email: userEmail,\n            },\n          })\n          .then((res) =&gt; {\n            console.log(res);\n          });\n      }\n    };\n    res();\n  }, []);\n</code></pre>\n<p>I tried putting the <code>@CrossOrigin</code> tag in all routes in the springboot but it gives the same result.</p>\n"},{"answers":[{"answer_id":20458267,"body":"<p>This is a bug (or expected behaviour?) of spring data mongodb (I get this in 1.3.x version, haven't tried 1.4.x).</p>\n\n<p>The problem is that User has reference to Draft and Draft to the same user instance so the converter gets into infinite loop.</p>\n\n<pre><code>@Document\npublic class User implements Serializable {\n...\n\n@DBRef\nprivate List&lt;Draft&gt; createdDraft = new ArrayList&lt;Draft&gt;();\n</code></pre>\n\n<p>and </p>\n\n<pre><code>@Document\npublic class Draft {\n...\n\n@DBRef\nprivate User lastEditor;\n@DBRef\nprivate User mainAuthor;\n@DBRef\nprivate List&lt;User&gt; coAuthors = new ArrayList&lt;User&gt;();\n</code></pre>\n\n<p>You should probably use simple id references, not DBRef (it is even suggested here <a href=\"http://docs.mongodb.org/manual/reference/database-references/\" rel=\"nofollow\">http://docs.mongodb.org/manual/reference/database-references/</a> as suitable for most use cases)</p>\n\n<p>If you find yourself using DBRef a lot you should consider using different kind of database, e.g. a graph database.</p>\n"},{"comments":[{"comment_id":55410524,"body":"i have found it that this scenario isn&#39;t right, so i am loading the references lazy like this -&gt; @DBRef(lazy=true).. so you will not fall into an infinite loop, so you can also omit the converters"}],"answer_id":33568873,"body":"<p>you should map your received entity (document) from the mongo database..</p>\n\n<p>use the Springs <a href=\"http://docs.spring.io/spring-data/data-mongo/docs/1.8.0.RELEASE/reference/html/#mongo.custom-converters\" rel=\"nofollow\">Converter interface</a></p>\n\n<p><strong>for example:</strong></p>\n\n<pre><code>public class ProfileReadConverter implements Converter&lt;DBObject, Profile&gt; {\n@Override\npublic Profile convert(DBObject source) {\n    @SuppressWarnings(\"unchecked\")\n    Profile p = new Profile((ObjectId) source.get(\"_id\"), (boolean) source.get(\"active\"), (String) source.get(\"name\"),\n            (String) source.get(\"shortName\"), (List&lt;Person&gt;) source.get(\"person\"));\n    return p;\n    }\n}\n</code></pre>\n\n<p><strong>Profile.java</strong></p>\n\n<pre><code>@Document(collection = \"profile\")\npublic class Profile {\n\n@Id\nprivate ObjectId id;\nprivate boolean active;\n@Indexed(unique = true)\n@Field(\"ProfileName\")\nprivate String name;\nprivate String shortName;\n@DBRef\nprivate List&lt;Person&gt; person = new ArrayList&lt;Person&gt;();\n\npublic Profile() {\n\n}\n\n@PersistenceConstructor\npublic Profile(ObjectId id, boolean active, String name, String shortName, List&lt;Person&gt; person,) {\n    this.id = id;\n    this.active = active;\n    this.name = name;\n    this.shortName = shortName;\n    this.person = person;\n}\n//getter and setter\n</code></pre>\n\n<p><strong>Person.java</strong></p>\n\n<pre><code>@Document(collection = \"person\")\npublic class Person extends Ressource {\n\n@Indexed\nprivate String firstname;\nprivate String lastname;\n@Field(\"email\")\n@Indexed(unique = true)\nprivate String eMailAddress;\nprivate String login;\n@DBRef\nprivate List&lt;Profile&gt; profiles = new ArrayList&lt;Profile&gt;();\n\npublic Person(ObjectId id, String firstname, String lastname, String eMailAddress, String login) {\n    this.setId(id);\n    this.firstname = firstname;\n    this.lastname = lastname;\n    this.eMailAddress = eMailAddress;\n    this.login = login;\n}\n\n@PersistenceConstructor\npublic Person(ObjectId id, String firstname, String lastname, String eMailAddress, String login,\n        List&lt;Profile&gt; profiles) {\n    this.firstname = firstname;\n    this.lastname = lastname;\n    this.eMailAddress = eMailAddress;\n    this.login = login;\n    this.profiles = profiles;\n}\n</code></pre>\n\n<p><strong>main or test class</strong></p>\n\n<pre><code>    ...\n    Profile profileFind = mongoOps.findOne(new Query(where(\"shortName\").is(\"SE\")), Profile.class, \"profile\");\n</code></pre>\n"},{"answer_id":76283590,"body":"<p>I was also facing this issue while querying data from mongo.\nIn my case, it was a dataType mismatch, I was using org.joda.DateTime to query on a document field of type java.time.LocalDateTime.</p>\n<p>For anyone facing such issue, please just have a look in this direction as well</p>\n"}],"last_activity_date":1684435087,"question_id":20437405,"body":"<p>I am using Spring data connect to mongodb. Please see my problems below:</p>\n<p>Now, I have two data models (User and Draft):</p>\n<pre><code>@Document\n\npublic class User implements Serializable {\n@Id\nprivate String id;\nprivate String showName;\nprivate String password;\n//..... (other attributes)\n\n@DBRef\nprivate List&lt;Draft&gt; createdDraft = new ArrayList&lt;Draft&gt;();\n\n//constructors\npublic User() {\nsuper();\n}\n\npublic User(String id, String showName, String password, //....other attributes\nList&lt;Draft&gt; createdDraft) {\nsuper();\nthis.id = id;\nthis.showName = showName;\nthis.password = password;\n//....\n}\n\n//getters and setters\n}\n</code></pre>\n<p>and</p>\n<pre><code>@Document\n\npublic class Draft {\n@Id\nprivate String id;\nprivate String title;\nprivate Date createTime;\nprivate Date lastEditTime;\n@DBRef\nprivate User lastEditor;\n@DBRef\nprivate User mainAuthor;\n@DBRef\nprivate List&lt;User&gt; coAuthors = new ArrayList&lt;User&gt;();\nprivate String externalURL;\n\n//constructors..\npublic Draft() {\nsuper();\n}\n\npublic Draft(String id, String title, Date createTime, Date lastEditTime,\nUser lastEditor, User mainAuthor, String externalURL) {\nsuper();\nthis.id = id;\nthis.title = title;\nthis.createTime = createTime;\nthis.lastEditTime = lastEditTime;\nthis.lastEditor = lastEditor;\nthis.mainAuthor = mainAuthor;\nthis.externalURL = externalURL;\n}\n\n//getters and setters...\n\n}\n</code></pre>\n<p>In my project, I have created the user successfully\nthen, I would like to add a draft to the existing user.</p>\n<pre><code>public String CreateNewDraft(User mainAuthor)\n{\nDraft draft = new Draft();\n\ndraft.setMainAuthor(mainAuthor); \n\nDate now = new Date(System.currentTimeMillis());\n \ndraft.setCreateTime(now);\n\nmainAuthor.getCreatedDraft().add(draft); \n\n//insert the draft --&gt; Successful (1)\n\nmongoOps.insert(draft);\n\n//update the user --&gt; Successful (2)\n\nmongoOps.save(mainAuthor);\n\n//find the last inserted draft. --&gt; Errors.\n\nDraft d = mongoOps.findOne(query(where(&quot;createTime&quot;).is(now) ), Draft.class);\n\nreturn d.getId()\n}\n</code></pre>\n<p><strong>In (1), I have found a new &quot;draft&quot; document created in mongoDB, which has _id = it has 52a1591597d738f7b397be96.</strong></p>\n<p><strong>In (2), I have found the existing user (mainAuhtor) document has one entry added in the createdDraft field like\n[ { &quot;$ref&quot; : &quot;draft&quot; , &quot;$id&quot; : { &quot;$oid&quot; : &quot;52a1591597d738f7b397be96&quot;}}]</strong></p>\n<p>Exception &amp; log:</p>\n<blockquote>\n<pre><code>processing failed; nested exception is java.lang.StackOverflowError\n\norg.springframework.web.servlet.DispatcherServlet.\ndoDispatch(DispatcherServlet.java:972)\norg.springframework.web.servlet.DispatcherServlet.\ndoService(DispatcherServlet.java:852)\norg.springframework.web.servlet.FrameworkServlet.p\nrocessRequest(FrameworkServlet.java:882)\norg.springframework.web.servlet.FrameworkServlet.d\noGet(FrameworkServlet.java:778)\njavax.servlet.http.HttpServlet.service(HttpServlet .java:621)\njavax.servlet.http.HttpServlet.service(HttpServlet .java:728)\norg.apache.tomcat.websocket.server.WsFilter.doFilt\ner(WsFilter.java:51)\n</code></pre>\n</blockquote>\n<p>root cause</p>\n<blockquote>\n<pre><code>java.lang.StackOverflowError \n\njava.net.SocketInputStream.socketRead0(Native Method)\njava.net.SocketInputStream.read(Unknown Source)\njava.net.SocketInputStream.read(Unknown Source)\njava.io.BufferedInputStream.fill(Unknown Source)\njava.io.BufferedInputStream.read1(Unknown Source)\njava.io.BufferedInputStream.read(Unknown Source)\norg.bson.io.Bits.readFully(Bits.java:46)\norg.bson.io.Bits.readFully(Bits.java:33)\norg.bson.io.Bits.readFully(Bits.java:28)\ncom.mongodb.Response.&lt;init&gt;(Response.java:40)\ncom.mongodb.DBPort.go(DBPort.java:124)\ncom.mongodb.DBPort.call(DBPort.java:74)\ncom.mongodb.DBTCPConnector.innerCall(DBTCPConnecto r.java:286)\ncom.mongodb.DBTCPConnector.call(DBTCPConnector.jav a:257)\ncom.mongodb.DBApiLayer$MyCollection.__find(DBApiLa yer.java:310)\ncom.mongodb.DBApiLayer$MyCollection.__find(DBApiLa yer.java:295)\ncom.mongodb.DBCollection.findOne(DBCollection.java :346)\ncom.mongodb.DBCollection.findOne(DBCollection.java :331)\ncom.mongodb.DBRefBase.fetch(DBRefBase.java:53)\norg.springframework.data.mongodb.core.convert.Mapp\ningMongoConverter.readValue(MappingMongoConverter. java:1046)\norg.springframework.data.mongodb.core.convert.Mapp\ningMongoConverter.access$100(MappingMongoConverter .java:77)\norg.springframework.data.mongodb.core.convert.Mapp\ningMongoConverter$MongoDbPropertyValueProvider.get\nPropertyValue(MappingMongoConverter.java:999)\norg.springframework.data.mongodb.core.convert.Mapp\ningMongoConverter.getValueInternal(MappingMongoCon verter.java:755)\norg.springframework.data.mongodb.core.convert.Mapp\ningMongoConverter$2.doWithAssociation(MappingMongo Converter.java:265)\norg.springframework.data.mapping.model.BasicPersis\ntentEntity.doWithAssociations(BasicPersistentEntit y.java:269)\norg.springframework.data.mongodb.core.convert.Mapp\ningMongoConverter.read(MappingMongoConverter.java: 262)\norg.springframework.data.mongodb.core.convert.Mapp\ningMongoConverter.read(MappingMongoConverter.java: 223)\norg.springframework.data.mongodb.core.convert.Mapp\ningMongoConverter.readCollectionOrArray(MappingMon\ngoConverter.java:788)\norg.springframework.data.mongodb.core.convert.Mapp\ningMongoConverter.readValue(MappingMongoConverter. java:1048)\norg.springframework.data.mongodb.core.convert.Mapp\ningMongoConverter.access$100(MappingMongoConverter .java:77)\norg.springframework.data.mongodb.core.convert.Mapp\ningMongoConverter$MongoDbPropertyValueProvider.get\nPropertyValue(MappingMon```\n</code></pre>\n</blockquote>\n<p><strong>Can someone help me to take a look? Thanks so much!</strong></p>\n"},{"comments":[{"comment_id":134520798,"body":"Other projects also running from same machine/server as your client"},{"comment_id":134520835,"body":"both same machines and other machines"}],"last_activity_date":1684434728,"question_id":76283483,"body":"<p><em>What I am trying to achieve:</em></p>\n<p>Send a high volume of http requests to a third party server</p>\n<p><em>Issue:</em></p>\n<p>Intermittently, I am facing this issue I am having a hard time understanding.</p>\n<p>Again, this is intermittent only.</p>\n<pre><code>2023-05-16 08:33:01 1 DEBUG --- [main] [,] o.a.h.impl.nio.client.MainClientExec : [exchange: 1] start execution\n2023-05-16 08:33:01 1 DEBUG --- [main] [,] o.a.h.c.protocol.RequestAddCookies : CookieSpec selected: default\n2023-05-16 08:33:01 1 DEBUG --- [main] [,] o.a.h.c.protocol.RequestAuthCache : Re-using cached 'basic' auth scheme for https://third-party-server.com:9200\n2023-05-16 08:33:01 1 DEBUG --- [main] [,] o.a.h.c.protocol.RequestAuthCache : No credentials for preemptive authentication\n2023-05-16 08:33:01 1 DEBUG --- [main] [,] o.a.h.i.n.c.InternalHttpAsyncClient : [exchange: 1] Request connection for {s}-&gt;https://third-party-server.com:9200\n2023-05-16 08:33:01 1 DEBUG --- [main] [,] o.a.h.i.n.c.PoolingNHttpClientConnectionManager : Connection request: [route: {s}-&gt;https://third-party-server.com:9200][total kept alive: 0; route allocated: 0 of 10; total allocated: 0 of 30]\n2023-05-16 08:33:11 1 DEBUG --- [pool-5-thread-1] [,] o.a.h.i.n.c.PoolingNHttpClientConnectionManager : Connection request failed\njava.net.NoRouteToHostException: No route to host\n        at java.base/sun.nio.ch.Net.pollConnect(Native Method)\n        at java.base/sun.nio.ch.Net.pollConnectNow(Unknown Source)\n        at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(Unknown Source)\n        at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)\n        at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)\n        at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)\n        at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:221)\n        at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)\n        at java.base/java.lang.Thread.run(Unknown Source)\n2023-05-16 08:33:11 1 DEBUG --- [pool-5-thread-1] [,] o.a.h.i.n.c.InternalHttpAsyncClient : [exchange: 1] connection request failed\n</code></pre>\n<p><em>Note:</em></p>\n<p>Other projects use different http client, such as Netty, Okhttp etc, when they fire requests at the same timestamp, no issue</p>\n<p><em>Question:</em></p>\n<p>May I ask what does it mean?</p>\n<p>Is it the third party server issue? Or me the client?</p>\n<p>What can I do in order to avoid this? What can I do to further debug this issue?</p>\n"},{"comments":[{"comment_id":134509279,"body":"Please provide enough code so others can better understand or reproduce the problem."}],"last_activity_date":1684434711,"question_id":76272317,"body":"<p>I just Added the same icon with action from the top bar to the side menu.(being dynamically uploaded from a database table). Now it Doesn't work on the side menu, when I click nothing occurs no even errors on chrome console.</p>\n<p><img src=\"https://i.stack.imgur.com/gE9DX.png\" alt=\"1\" /></p>\n<p><img src=\"https://i.stack.imgur.com/UGGVl.png\" alt=\"2\" /></p>\n<p>Expecting:\nSame out put, open a window on click</p>\n"},{"answers":[{"comments":[{"comment_id":80421841,"body":"The query is generated by Hibernate not me"}],"answer_id":46737491,"body":"<p>try to put the  ; before the \" and test ?</p>\n"},{"comments":[{"comment_id":93501463,"body":"<code>ORDER</code> is a reserved keyword for H2DB - <a href=\"http://h2database.com/html/advanced.html#compatibility\" rel=\"nofollow noreferrer\">h2database.com/html/advanced.html#compatibility</a>"},{"comment_id":93539629,"body":"Yes I understood that."},{"comment_id":93576707,"body":"<code>@Enumerated(EnumType.ORDINAL) private RaceGroup group</code> <code>GROUP</code>also causes same problem. :P"},{"comment_id":97065169,"body":"I also run into this problem but in my case reserved word was <code>offset</code>. Renaming column helped."},{"comment_id":116134275,"body":"had same issue, in my case its the &quot;from&quot; field that is causing problem so I have to specify @Column(name = &quot;from_date&quot;) to avoid conflict with reserved words."},{"comment_id":134072249,"body":"having a column named &quot;value&quot; will produce the same error, because its reserved as well"}],"answer_id":46737637,"body":"<p>Turns out I was being dumb and named a column \"Order\". Wonder why H2 wasn't happy :upside_down:</p>\n\n<p>Changed the variable name to something else and it worked!</p>\n"},{"comments":[{"comment_id":106361892,"body":"Exactly my case, I had <code>from</code> and <code>until</code> dates, that broke my query. Renaming them to <code>fromDate</code> and <code>untilDate</code> solved the issue."}],"answer_id":55847730,"body":"<p>I have the same problem while naming the fields: <code>private String to</code> and <code>private String from</code> , changed to ex. dayTo , dayFrom , and it worked.</p>\n"},{"answer_id":56530914,"body":"<p>I had the same problem with Spring and H2 database for tests, My entity had the field name <strong>\"interval\"</strong>, I renamed to <strong>\"inter\"</strong> and resolved the problem.</p>\n\n<p>So, these errors happen due to a sql reserved names in entities.</p>\n"},{"comments":[{"comment_id":117017256,"body":"THIS! Took me one hour to figure out."}],"answer_id":63373285,"body":"<p>Got same issue with Order as entity. Changed table name to &quot;orderz&quot; and goes on.</p>\n"},{"answer_id":64772969,"body":"<p>in my case problem cause was incorrect syntax in insert statement\nproblem :</p>\n<pre><code>insert into 'table name missing' (column names...) values(values...);\n</code></pre>\n<p>after adding table name</p>\n<p>fix:</p>\n<pre><code>insert into 'table name specified' (column names...) values(values...);\n</code></pre>\n<p>some times trivial mistakes are hard to spot :)</p>\n"},{"comments":[{"comment_id":114525558,"body":"This seem more like a comment than an answer. Can you provide an example with some code?"}],"answer_id":64773224,"body":"<p>I had the somewhat same problem but instead mine was missing a semi-colon.</p>\n"},{"answer_id":65867652,"body":"<p>I was facing a similar issue because of a field in my entity called &quot;interval&quot;.\nThe answers to this post help me identify the root cause, however changing the name of the field was not a solution for me because &quot;interval&quot; was perfect for my class.</p>\n<p>The solution I used was to rename the table column by using hibernate annotation.</p>\n<pre><code> @Column(name = &quot;FREQUENCY_INTERVAL&quot;)\n private int interval;\n</code></pre>\n<p>This helped me keep the variable name as 'interval' while mapping to a column name that is acceptable by the database.</p>\n"},{"answer_id":66298931,"body":"<p>I also had an issue with an entity field called <code>row</code> as it is also a keyword</p>\n<p>I specified a Column name (<code>&quot;SEAT_ROW&quot;</code>) to get around it.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Entity\ndata class Seat (\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    val id :            Long,\n    @Column(name=&quot;SEAT_ROW&quot;)\n    val row :           Char,\n    val num :           Int,\n    val price :         BigDecimal,\n    val description :   String\n) {\n    override fun toString(): String = &quot;Seat $row-$num $$price ($description)&quot;\n}\n</code></pre>\n<p><a href=\"http://h2database.com/html/advanced.html#compatibility\" rel=\"nofollow noreferrer\">H2 Compatibility and Keywords Table</a></p>\n"},{"answer_id":67424387,"body":"<p>I was using order as table name in h2. Changed to something like _order and I get it!</p>\n<p>As you can see <a href=\"http://www.h2database.com/html/advanced.html\" rel=\"nofollow noreferrer\">here</a>, order is a reserved word by h2.</p>\n"},{"answer_id":75884457,"body":"<p>For your script will be compatible with reserved words,\nit would be: &quot;ORDER&quot;, see here:</p>\n<pre><code>CREATE TABLE EMPLOYEE_FUNCTIONS ( EMPLOYEE_EMPLOYEEID VARCHAR(255) NOT NULL, ACTIVE BOOLEAN NOT NULL, DEPARTMENTNUMBER INTEGER NOT NULL, DESCRIPTION VARCHAR(255), &quot;ORDER&quot; INTEGER NOT NULL );\n</code></pre>\n<p>using the tip reserved words by albertocavalcante user.</p>\n"},{"answer_id":76283521,"body":"<p>Double check all your column names in your entity.\nBe sure you are not using reserved keywords, and if you are, add an alias using:</p>\n<pre><code>@Column(name = &quot;&lt;YOUR NOT RESERVED KEYWORD COLUMN NAME&gt;&quot;)\n</code></pre>\n<p>To the Entity attribute you are suspecting may be a reserved keyword, i.e.</p>\n<pre><code>@Column(name = &quot;_user&quot;)\nprivate String user\n</code></pre>\n"}],"last_activity_date":1684434379,"question_id":46737430,"body":"<p>I'm trying to associate a list of function (whom Embeddable) within my Employee Entity and H2 seems unhappy with this saying that it expected an \"identifier\"</p>\n\n<blockquote>\n  <p>Caused by: org.h2.jdbc.JdbcSQLException: Syntax error in SQL statement \"\n      CREATE TABLE EMPLOYEE_FUNCTIONS (\n          EMPLOYEE_EMPLOYEEID VARCHAR(255) NOT NULL,\n          ACTIVE BOOLEAN NOT NULL,\n          DEPARTMENTNUMBER INTEGER NOT NULL,\n          DESCRIPTION VARCHAR(255),\n          ORDER[*] INTEGER NOT NULL\n      ) \"; expected \"identifier\";</p>\n</blockquote>\n\n<p>The thing is I already done that with an other project and I don't see why it doesn't work.</p>\n\n<p>Employee.java</p>\n\n<pre><code>@Entity\npublic class Employee extends AbstractScheduleEntity&lt;EmployeeSchedule&gt; {\n    public static final String ACOMBA_UNIQUE_FIELD = \"acombaUnique\";\n\n    @Id\n    @GenericGenerator(name = \"sequence_id\", strategy = \n    \"ca.tecsar.core.sql.ServerSequenceGenerator\")\n    @GeneratedValue(generator = \"sequence_id\")\n    @Column(name = \"EmployeeID\", unique = true, nullable = false)\n    private String employeeID;\n    @ElementCollection\n    private List&lt;Function&gt; functions;\n\n    //getter and setter\n}\n</code></pre>\n\n<p>Function.java</p>\n\n<pre><code>@Embeddable\npublic class Function implements Serializable {\n    private int order;\n    private boolean active;\n    private String description;\n    private int departmentNumber;\n\n    //getter and setter\n}\n</code></pre>\n\n<p>I removed a few properties in Employee that wasn't necessary.\nWhat may cause this error? Is it because I have a String as identifier in my Employee? If so how can I tell to Hibernate to add Employee_EmployeeID as identifier?\nThanks</p>\n"},{"answers":[{"comments":[{"comment_id":134521186,"body":"cannot call <code>setUserCss()</code> on <code>getSharedContext()</code>. there is a method <code>setCss</code> but that takes some <code>StyleReference</code> as input"},{"comment_id":134541254,"body":"how about renderer.getSharedContext().getCss().add(css) ?"},{"comment_id":134562981,"body":"there is no add method available for getCss"}],"answer_id":76283498,"body":"<p>You need to set CSS properties for printing, can you try using the below css:</p>\n<pre><code> String css = &quot;@page { size: auto; margin: 2cm; }&quot;\n        + &quot;thead { display: table-header-group; }&quot;\n        + &quot;tfoot { display: table-footer-group; }&quot;;\n //input document to the renderer \n renderer.getSharedContext().setUserCSS(new StringReader(css));\n</code></pre>\n"}],"last_activity_date":1684434099,"question_id":76281979,"body":"<p>I have a thymeleaf template which I'm using to convert to pdf in java using flying saucer. The pdf that is getting generated has a long table and during page breaks the table is getting continued on new page but the table headers are not appearing on the new page.\nIf I open the html(thymeleaf with data) in browser and print it then table headers are appearing on new pages.\nBelow is the code which I'm using to convert to pdf.</p>\n<pre><code>import org.xhtmlrenderer.pdf.ITextRenderer;\nimport com.lowagie.text.DocumentException;\n\nprivate byte[] generatePdfFromHtml(String html) throws IOException, DocumentException {\n        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\n        ITextRenderer renderer = new ITextRenderer();\n        renderer.setDocumentFromString(html);\n        renderer.layout();\n        renderer.createPDF(byteArrayOutputStream);\n        return  byteArrayOutputStream.toByteArray();\n    }\n</code></pre>\n<p>Even it is working normally in browser but I still tried the below css, but it didn't work.</p>\n<pre><code>    table { page-break-inside:auto }\n    tr    { page-break-inside:avoid; page-break-after:auto }\n    thead { display:table-header-group }\n    tfoot { display:table-footer-group }\n</code></pre>\n<p>My requirement is, the table should get closed on page breaks and on new page the table headers should appear.</p>\n<p>Thank you.</p>\n"},{"comments":[{"comment_id":134528614,"body":"Please provide enough code so others can better understand or reproduce the problem."}],"last_activity_date":1684434030,"question_id":76283490,"body":"<p>I'm trying to figure out how to properly open an IMAP mailbox with OAUTH2 in Java. But I always get the error code &quot;A1 NO AUTHENTICATE failed.&quot; I think because when I tried to give a permission I could not grant admin consent because it is disable</p>\n<p>So how I can grant admin consent ?</p>\n<p>Or do we have another way to read all inbox from the outlook ?</p>\n"},{"comments":[{"comment_id":134447764,"body":"What&#39;s the problem you&#39;re having? If you already have the answer to your problem, please post it as an answer instead of inside the actual question. Also, please clarify the problem that you have within the actual post."},{"comment_id":134475547,"body":"I have some code that might help to get the frames from dji drone live stream.  After that I would like to give a frequency 2 frames per minute. I added some code to the posted code and I can&#39;t get the frames from dji drone live stream. So, I can&#39;t get 2 frames per minute."},{"comment_id":134478405,"body":"Please include that within the post instead of in a comment. Also, make sure you&#39;re only asking <i>one</i> question. Otherwise, it can be closed again for not be focused. Make sure to properly format code too."},{"comment_id":134520665,"body":"I fixed the question and the body."},{"comment_id":134521984,"body":"Please do not put the answer within the question. Please put the answer as an actual answer to this question."}],"last_activity_date":1684433693,"question_id":76228252,"body":"<p>This information might help.</p>\n<p>Drone: Matrice 300 RTK</p>\n<p>Camera: Zenmuse H20T</p>\n<p>Software package: Mobile SDK</p>\n<p>compileSdkVersion: 30</p>\n<p>buildToolsVersion: '28.0.3'</p>\n<p>This code might help.</p>\n<p>streamURl = &quot;&quot;;\nDJISDKManager.getInstance().getLiveStreamManager().setLiveUrl(streamURl);\nDJISDKManager.getInstance().getLiveStreamManager().setVideoSource(LiveStreamManager.LiveStreamVideoSource.Primary);\nDJISDKManager.getInstance().getLiveStreamManager().setAudioMuted(true);\nint result = DJISDKManager.getInstance().getLiveStreamManager().startStream();\nDJISDKManager.getInstance().getLiveStreamManager().setVideoEncodingEnabled(true);\nDJISDKManager.getInstance().getLiveStreamManager().setStartTime();</p>\n"},{"comments":[{"comment_id":134520676,"body":"&quot;failed&quot;, &quot;it kept failing&quot;, and &quot;nothing worked&quot; are not precise enough problem descriptions for us to help you. <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"},{"comment_id":134520678,"body":"<a href=\"https://idownvotedbecau.se/itsnotworking/\" rel=\"nofollow noreferrer\">idownvotedbecau.se/itsnotworking</a> <a href=\"https://idownvotedbecau.se/noexceptiondetails/\" rel=\"nofollow noreferrer\">idownvotedbecau.se/noexceptiondetails</a>"},{"comment_id":134520709,"body":"If your current output does not match your desired output, and you don&#39;t know why then it&#39;s time to start debugging. If you&#39;re not sure how to go about doing this, then please check out <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>. It won&#39;t solve your direct problem, but it will give you steps that you can follow that should help you solve it yourself, or even if that is not successful, then at least help you to better isolate your problem so that your question can be more focused and easier to answer."},{"comment_id":134520713,"body":"You need to read the spec carefully. I don&#39;t know where you&#39;d get the figure 24 from. Also I would read each character separately from the file using a <code>Reader</code>, enc/decrypt where it&#39;s a letter, else ignore"}],"last_activity_date":1684433576,"question_id":76283439,"body":"<p><strong>Caesar cipher with java failed!</strong>\nim  trying to do a Caesar cipher with this prompt question\n&quot;In cryptography, a Caesar cipher, is one of the simplest and most widely known encryption techniques. It's a substitution cipher that transforms a message by shifting its letters by a given offset. Let's say we want to shift the alphabet by 3, then letter A would be transformed to letter D, B to E, C to F, and so on.\nAs we can see, once the transformation goes beyond the letter Z, we go back to the start of the alphabet, so that X, Y and Z are transformed into A, B and C, respectively. Implement the Caesar cipher in Java. The program shall accept an input file named plain.txt that contains plain text and produce its encrypted to the screen using the Caesar cipher technique described above.\n<em>the file had this text: This is a secret message</em>&quot;</p>\n<p>i tried 2 ways to do the Caesar cipher it kept failing I tried to do it in two ways</p>\n<p>1- one is the one included in the code  which is if the index is greater than 24, it the position will be 26- that position.</p>\n<p>2- the other is (shift key + pos ) mod 26 .\ni was also reading from a file just the message\nnothing worked help me please</p>\n<pre><code>import java.io.*;\nimport java.util.*;\n class Main {\n     public static void main(String[] args) throws FileNotFoundException {\n         File file = new File(&quot;plain.txt&quot;);\n         Scanner scan = new Scanner(file);\n         String allletters = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;;\n         String newstring = &quot;&quot;;\n         String line= &quot;&quot;;\n         while (scan.hasNextLine()) {\n             line = scan.nextLine();\n             String[] all = line.split(&quot;\\\\s+&quot;);\n             for (int k = 0; k &lt; all.length; k++) {\n                 String r = all[k];\n                 for (int i = 0; i &lt; r.length(); i++) {\n                     char letter = line.charAt(i);\n                     int pos = allletters.indexOf(letter);\n                     if (pos&gt;=24){\n                         pos= 26-pos;\n                     }\n                     else{\n                         pos= pos+3;\n                     }\n                     System.out.print(&quot;pos &quot; + pos);\n                     char encryptChar = allletters.charAt(pos);\n                     System.out.print(&quot;char &quot; +encryptChar);\n                     newstring = newstring + encryptChar;\n\n                 }\n                 newstring = newstring +&quot; &quot;;\n\n             }\n\n\n             }\n         System.out.println(&quot; Ciphertext &quot;+ newstring);\n         }\n     }\n\n\n</code></pre>\n"},{"answers":[{"comments":[{"comment_id":65686397,"body":"Thank you very much, I will try it."},{"comment_id":65697227,"body":"the <code>gretty</code> dependency works fine for me, thanks for you help"},{"comment_id":65732167,"body":"The good thing to use a conection pool in the container is it can be shared across the webapps via <code>JNDI</code>, consequently optimizing the database connections. I have more than one webapp using the same database and in my case it seems more appropriated."}],"answer_id":39159874,"body":"<p>How are you adding the library to Gretty classpath?</p>\n\n<p>I've done something similar with this line in my gradle.build:</p>\n\n<p><code>\ndependencies {\n   ///...\n   gretty 'my:library:version'\n}\n</code></p>\n\n<p>And it worked great</p>\n\n<p><a href=\"http://akhikhl.github.io/gretty-doc/Servlet-container-classpath.html\" rel=\"nofollow\">http://akhikhl.github.io/gretty-doc/Servlet-container-classpath.html</a></p>\n\n<p>By the way, I'm also using HikariCP in a web app launched by Gretty, but in my case I'm instantiating the pool programatically, and the Hikari library is in the webapp classpath, not in the container's.</p>\n"}],"last_activity_date":1684433488,"question_id":39155889,"body":"<p>I created a Spring demo <a href=\"https://github.com/wbsouza/demo-spring-cas-pac4j\" rel=\"nofollow noreferrer\">web application</a> as a proof of concept. It works fine when I run the class <code>JettyWrapper</code> (embedded Jetty). However when I'm trying to run run Jetty 9 using the <code>gretty</code> plugin I'm getting a <code>ClassNotFoundException</code> of HikariCP even adding the HikariCP in the plugin classpath.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    jetty.xml config file\n\n    ...\n    &lt;New class=\"com.zaxxer.hikari.HikariDataSource\"&gt;\n        &lt;Arg&gt;\n            &lt;New id=\"hikariConfig\" class=\"com.zaxxer.hikari.HikariConfig\"&gt;\n                &lt;Set name=\"poolName\"&gt;&lt;SystemProperty name=\"hikaricp.poolName\" default=\"HikariCP\"/&gt;&lt;/Set&gt;\n                &lt;Set name=\"driverClassName\"&gt;&lt;SystemProperty name=\"hikaricp.driverClassName\" default=\"org.hsqldb.jdbc.JDBCDriver\"/&gt;&lt;/Set&gt;\n                &lt;Set name=\"idleTimeout\"&gt;&lt;SystemProperty name=\"hikaricp.idleTimeout\" default=\"10000\"/&gt;&lt;/Set&gt;\n                &lt;Set name=\"maximumPoolSize\"&gt;&lt;SystemProperty name=\"hikaricp.maximumPoolSize\" default=\"5\"/&gt;&lt;/Set&gt;\n                &lt;Set name=\"username\"&gt;&lt;SystemProperty name=\"hikaricp.username\" default=\"SA\"/&gt;&lt;/Set&gt;\n                &lt;Set name=\"password\"&gt;&lt;SystemProperty name=\"hikaricp.password\" default=\"\"/&gt;&lt;/Set&gt;\n                &lt;Set name=\"jdbcUrl\"&gt;&lt;SystemProperty name=\"hikaricp.jdbcUrl\" default=\"jdbc:hsqldb:hsql://localhost/demodb\"/&gt;&lt;/Set&gt;\n                &lt;Set name=\"connectionTestQuery\"&gt;&lt;SystemProperty name=\"hikaricp.connectionTestQuery\" default=\"SET DATABASE SQL SYNTAX MYS TRUE\"/&gt;&lt;/Set&gt;\n                &lt;Set name=\"connectionInitSql\"&gt;&lt;SystemProperty name=\"hikaricp.connectionInitSql\" default=\"SET DATABASE SQL SYNTAX MYS TRUE\"/&gt;\n                &lt;/Set&gt;\n            &lt;/New&gt;\n        &lt;/Arg&gt;\n    &lt;/New&gt;\n    ...\n\n\nException in thread \"main\" java.lang.ClassNotFoundException: com.zaxxer.hikari.HikariDataSource\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    at org.eclipse.jetty.util.Loader.loadClass(Loader.java:86)\n    at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.nodeClass(XmlConfiguration.java:364)\n    at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.newObj(XmlConfiguration.java:754)\n    at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.itemValue(XmlConfiguration.java:1125)\n    at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.value(XmlConfiguration.java:1030)\n    at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.newObj(XmlConfiguration.java:775)\n    at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.configure(XmlConfiguration.java:423)\n    at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.configure(XmlConfiguration.java:298)\n    at org.eclipse.jetty.xml.XmlConfiguration.configure(XmlConfiguration.java:248)\n    at org.eclipse.jetty.xml.XmlConfiguration$configure.call(Unknown Source)\n    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:48)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:113)\n    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)\n    at org.akhikhl.gretty.JettyConfigurerImpl.applyJettyXml(JettyConfigurerImpl.groovy:64)\n    at org.akhikhl.gretty.JettyConfigurer$applyJettyXml$0.call(Unknown Source)\n</code></pre>\n\n<p>If anyone can help with any tips and/or directions will be greatly appreciated.</p>\n\n<p><strong>EDITED:</strong> <em>After I got this problem solved, I found a new problem related what made me <a href=\"https://stackoverflow.com/questions/39177905/how-to-configure-gradle-to-add-a-resource-directory-on-the-gretty-classloader\">another post</a>. In that case I had some extra resources to be added in the classpath (configs dir) and I spent a couple hours until I found a non documented feature. Now everything is working fine.</em></p>\n"},{"answers":[{"answer_id":76283408,"body":"<p>Did you try using the full path to the data.json file in below code ?</p>\n<p>public static String data = &quot;data.json&quot;;</p>\n<p>for example:</p>\n<p>public static String data = &quot;/full/path/to/file/data.json&quot;;</p>\n"}],"last_activity_date":1684433201,"question_id":76282925,"body":"<p>Problem: I'm in an intro to java class trying to use Sinbad for a project. I'm trying to access a json file and process data. I connect the JSON to a DataSource object but when trying to load it throws a null pointer exception</p>\n<p>I cant figure out what is causing it. I have tried to use connectAs() instead of connect() to see if it was maybe not recognizing the JSON file but nothing has worked. This is my first time using Sinbad.</p>\n<p>code:</p>\n<pre><code>    import core.data.*;\n\n    public class DataDiver {\n        public static String data = &quot;data.json&quot;;\n        public static DataSource ds = DataSource.connect(data);\n\n        public static void main(String[] args){\n            ds.load();\n            testSource();\n        }\n\n        public static void testSource(){\n            ds.printUsageString();\n        }\n    }\n</code></pre>\n<p>error:</p>\n<pre><code>    Exception in thread &quot;main&quot; java.lang.NullPointerException\n        at java.base/java.io.Reader.&lt;init&gt;(Reader.java:168)\n        at java.base/java.io.InputStreamReader.&lt;init&gt;(InputStreamReader.java:89)\n        at org.json.JSONTokener.&lt;init&gt;(JSONTokener.java:75)\n        at data.json.JsonDataAccess.&lt;init&gt;(JsonDataAccess.java:27)\n        at data.json.JsonFactory.newInstance(JsonFactory.java:17)\n        at core.data.DataSource.load(DataSource.java:546)\n        at core.data.DataSource.load(DataSource.java:482)\n        at DataDiver.main(DataDiver.java:8)\n</code></pre>\n<p>thank you for any help</p>\n"},{"last_activity_date":1684433140,"question_id":76283393,"body":"<p>How do I change an Image view based on input?\nMy code gets the title of the png as a string and passees it into the getter function but that does not work. Is there anyway to convert the string input into an acceptable png title?</p>\n<p>For reference:\n<a href=\"https://i.stack.imgur.com/VJ14a.png\" rel=\"nofollow noreferrer\">here is my AS code</a>\nand the image file in my raw folder is\n<a href=\"https://i.stack.imgur.com/LTb1V.png\" rel=\"nofollow noreferrer\">titled the same as the string</a></p>\n<p>I expected this to get the png title that matched what the string states but understand that this was never the case due to the lack of quotation marks. So what can i do?</p>\n"},{"comments":[{"comment_id":85591107,"body":"<i>None of these options work and I still get the error when certain requests are large.</i> - Are you 100% sure that the payload is at most 10MB large? You are setting the limit to 20MB, are you 100% sure you aren&#39;t exceeding this limit?"},{"comment_id":85591277,"body":"I used the Chrome browser debugger and copied the json payload in a text file. The request size was 4 MB."},{"comment_id":85622195,"body":"Your 413 could be from abuse of the request line or headers too.  Make sure you are not sending that JSON object as a query string on your URI (for example), and that your request headers are reasonable in size.   If Jetty is replying with a 413, then your server logs should tell you why you got a 413 (or 431). If you don&#39;t see these logs, then you can be sure that its not a Jetty configuration causing that 413/431 result."},{"comment_id":85629898,"body":"The header size is within the limits. Is there a way to check what is the current limit of the request payload? Perhaps some java API in spring boot?"}],"answers":[{"comments":[{"comment_id":85629911,"body":"This option doesn&#39;t help. I still see the same error"}],"answer_id":49294638,"body":"<p>Add these in application.properties file in case the request is multipart and tune them as per your need:</p>\n\n<p>multipart.maxFileSize=20Mb</p>\n\n<p>multipart.maxRequestSize=20Mb</p>\n\n<p>Otherwise, have a look at this : <a href=\"https://stackoverflow.com/a/3861510/945214\">https://stackoverflow.com/a/3861510/945214</a> and this: <a href=\"https://stackoverflow.com/a/36899004/945214\">https://stackoverflow.com/a/36899004/945214</a></p>\n"},{"comments":[{"comment_id":85593395,"body":"But this question is tagged <code>jetty</code>, and the OP said he is using jetty."},{"comment_id":85630054,"body":"That&#39;s right. Also, These options are for requests where the content type is multi-part. My content type is json"}],"answer_id":49294987,"body":"<p>spring.http.multipart.max-file-size=200MB<br/><br/>\nspring.http.multipart.max-request-size=200MB<br/><br/>\nThese setting will work when you are running with embedded TOMCAT.</p>\n"},{"answer_id":51253044,"body":"<p>In your example, the <code>JettyEmbeddedServletContainer</code> you instantiate in your bean definition is never used, the bean you can override is the <code>JettyEmbeddedServletContainerFactory</code>. Have a look at <code>EmbeddedServletContainerAutoConfiguration.EmbeddedJetty</code> where the magic happens.</p>\n\n<p>To modify the property like you want, you could use the <code>JettyServerCustomizer</code> interface : </p>\n\n<pre><code>@Bean\npublic JettyEmbeddedServletContainerFactory jettyEmbeddedServletContainerFactory() {\n    JettyEmbeddedServletContainerFactory factory = new JettyEmbeddedServletContainerFactory();\n    factory.addServerCustomizers(server -&gt; server.setAttribute(\"org.eclipse.jetty.server.Request.maxFormContentSize\", 20971520));\n    return factor;\n}\n</code></pre>\n\n<p>or <code>EmbeddedServletContainerCustomizer</code> : </p>\n\n<pre><code>@Component\npublic class FormSizeCustomizer implements EmbeddedServletContainerCustomizer {\n    @Override\n    public void customize(ConfigurableEmbeddedServletContainer container) {\n        JettyEmbeddedServletContainerFactory factory = (JettyEmbeddedServletContainerFactory) container;\n        factory.addServerCustomizers(server -&gt; server.setAttribute(\"org.eclipse.jetty.server.Request.maxFormContentSize\",\n                                                                   20971520));\n    }\n}\n</code></pre>\n\n<p><strong>This limit is only applied to requests with a <code>application/x-www-form-urlencoded</code> content type.</strong> To enforce a maximum size on <code>application/json</code> requests (or other content types), you'll need custom code. You can do it by checking the Content-Length header or by wrapping the <code>ServletInputStream</code> and enforcing a max size while consuming for chunked requests. </p>\n\n<p>Source (Joakim is a Jetty developer) : <a href=\"https://stackoverflow.com/questions/49228950/jetty-and-max-content-size\">Jetty and max content size</a></p>\n"}],"last_activity_date":1684432855,"question_id":49294421,"body":"<p>My system consists of an angular application that communicates with a REST endpoint (POST) in a spring boot application. \nSpring boot is configured to use jetty as the embedded server. The angular application has TypeScript code that calls the REST endpoint and sends a json object as payload. The size of the json object will vary from 1 MB to 10 MB based on user selection in the browser.\nMy spring boot application runs in an Azure VM that runs Linux (CentOS).\nFor certain requests i get the HTTP error 413: Request size is too large.\nI did some searches and found 2 mechanisms to tune the spring boot application to overcome this limit.</p>\n\n<p>Option 1\nChange the request size limit in application.properties using this property\nserver.jetty.max-http-post-size=20971520 # Maximum size in bytes of the HTTP post or put content.</p>\n\n<p>Option 2\nOverride the jetty maxFormContentSize using some java code in the main application class</p>\n\n<pre><code>@Bean\npublic JettyEmbeddedServletContainerFactory jettyEmbeddedServletContainerFactory() {\n    JettyEmbeddedServletContainerFactory jettyContainer =\n            new JettyEmbeddedServletContainerFactory();\n    org.springframework.boot.context.embedded.jetty.JettyEmbeddedServletContainer serverContainer = (org.springframework.boot.context.embedded.jetty.JettyEmbeddedServletContainer)jettyContainer.getEmbeddedServletContainer();\n    serverContainer.getServer().setAttribute(\"org.eclipse.jetty.server.Request.maxFormContentSize\", \"20971520\");\n    return jettyContainer;\n}\n</code></pre>\n\n<p>None of these options work and I still get the error when certain requests are large.</p>\n\n<p>Is there a better way to solve this problem? </p>\n\n<p>Note: I see this error only in the Azure VM environment that runs CentOS. In my machine which runs windows 10, I don't see this error</p>\n\n<p>Update: I noticed that when the web server is rebooted, the very first request goes through but subsequent requests fail. This suggests that there some buffer or cache at the server which is not getting cleared in time. Is my understanding correct?</p>\n"},{"comments":[{"comment_id":83362016,"body":"The answers at <a href=\"https://stackoverflow.com/questions/37471346/automatically-and-elegantly-flatten-dataframe-in-spark-sql\" title=\"automatically and elegantly flatten dataframe in spark sql\">stackoverflow.com/questions/37471346/&hellip;</a> were also helpful."},{"comment_id":100844115,"body":"a nice solution is also presented here: <a href=\"https://stackoverflow.com/questions/47285871/exploded-struct-in-spark?rq=1\" title=\"exploded struct in spark\">stackoverflow.com/questions/47285871/&hellip;</a>"}],"answers":[{"comments":[{"comment_id":64882410,"body":"Exception in thread &quot;main&quot; org.apache.spark.sql.AnalysisException: No such struct field *"},{"comment_id":64882550,"body":"but using select on all the columns like df.select(df.col1, df.col2, df.col3) works, so I will accept this answer"},{"comment_id":64882584,"body":"I was just editing but it is strange. I can use *. Maybe some version issue?"},{"comment_id":64882710,"body":"Yeah maybe. I&#39;m using spark 1.6.1 and scala 2.10"},{"comment_id":79858785,"body":"How would you select key or note under the nested struct keyNote?"},{"comment_id":120345140,"body":"when I am selecting as df.select(&quot;data.*&#39;), it gives me n*n rows. (Duplicated n rows for each row). My data frame having n-2 distinct rows, so if I put distinct it gives me n-2 result.  But I want n results, which is actually present in my data. How can I achieve this using above mentioned select command."}],"answer_id":38754012,"body":"<p>This should work in Spark 1.6 or later:</p>\n\n<pre><code>df.select(df.col(\"data.*\"))\n</code></pre>\n\n<p>or</p>\n\n<pre><code>df.select(df.col(\"data.id\"), df.col(\"data.keyNote\"), df.col(\"data.details\"))\n</code></pre>\n"},{"answer_id":43355059,"body":"<p>An easy way is to use SQL, you could build a SQL query string to alias nested column as flat ones.</p>\n\n<ul>\n<li>Retrieve data-frame schema (<code>df.schema()</code>) </li>\n<li>Transform schema to SQL\n(for (field : <code>schema().fields()</code>) ...</li>\n<li><p>Query:</p>\n\n<pre><code>val newDF = sqlContext.sql(\"SELECT \" + sqlGenerated + \" FROM source\")\n</code></pre></li>\n</ul>\n\n<p>Here is <a href=\"https://gist.github.com/ebuildy/3de0e2855498e5358e4eed1a4f72ea48\" rel=\"nofollow noreferrer\">an example in Java</a>.</p>\n\n<p>(I prefer SQL way, so you can easily test it on Spark-shell and it's cross-language).</p>\n"},{"answer_id":49532496,"body":"<p>Here is function that is doing what you want and that can deal with multiple nested columns containing columns with same name:</p>\n<pre><code>import pyspark.sql.functions as F\n\ndef flatten_df(nested_df):\n    flat_cols = [c[0] for c in nested_df.dtypes if c[1][:6] != 'struct']\n    nested_cols = [c[0] for c in nested_df.dtypes if c[1][:6] == 'struct']\n\n    flat_df = nested_df.select(flat_cols +\n                               [F.col(nc+'.'+c).alias(nc+'_'+c)\n                                for nc in nested_cols\n                                for c in nested_df.select(nc+'.*').columns])\n    return flat_df\n</code></pre>\n<p>Before:</p>\n<pre><code>root\n |-- x: string (nullable = true)\n |-- y: string (nullable = true)\n |-- foo: struct (nullable = true)\n |    |-- a: float (nullable = true)\n |    |-- b: float (nullable = true)\n |    |-- c: integer (nullable = true)\n |-- bar: struct (nullable = true)\n |    |-- a: float (nullable = true)\n |    |-- b: float (nullable = true)\n |    |-- c: integer (nullable = true)\n</code></pre>\n<p>After:</p>\n<pre><code>root\n |-- x: string (nullable = true)\n |-- y: string (nullable = true)\n |-- foo_a: float (nullable = true)\n |-- foo_b: float (nullable = true)\n |-- foo_c: integer (nullable = true)\n |-- bar_a: float (nullable = true)\n |-- bar_b: float (nullable = true)\n |-- bar_c: integer (nullable = true)\n</code></pre>\n"},{"answer_id":49672951,"body":"<p>I generalized the solution from stecos a bit more so the flattening can be done on more than two struct layers deep:</p>\n\n<pre><code>def flatten_df(nested_df, layers):\n    flat_cols = []\n    nested_cols = []\n    flat_df = []\n\n    flat_cols.append([c[0] for c in nested_df.dtypes if c[1][:6] != 'struct'])\n    nested_cols.append([c[0] for c in nested_df.dtypes if c[1][:6] == 'struct'])\n\n    flat_df.append(nested_df.select(flat_cols[0] +\n                               [col(nc+'.'+c).alias(nc+'_'+c)\n                                for nc in nested_cols[0]\n                                for c in nested_df.select(nc+'.*').columns])\n                  )\n    for i in range(1, layers):\n        print (flat_cols[i-1])\n        flat_cols.append([c[0] for c in flat_df[i-1].dtypes if c[1][:6] != 'struct'])\n        nested_cols.append([c[0] for c in flat_df[i-1].dtypes if c[1][:6] == 'struct'])\n\n        flat_df.append(flat_df[i-1].select(flat_cols[i] +\n                                [col(nc+'.'+c).alias(nc+'_'+c)\n                                    for nc in nested_cols[i]\n                                    for c in flat_df[i-1].select(nc+'.*').columns])\n        )\n\n    return flat_df[-1]\n</code></pre>\n\n<p>just call with:</p>\n\n<pre><code>my_flattened_df = flatten_df(my_df_having_nested_structs, 3)\n</code></pre>\n\n<p>(second parameter is the level of layers to be flattened, in my case it's 3)</p>\n"},{"comments":[{"comment_id":117513712,"body":"This doesn&#39;t seem to recurse into nested structs inside arrays."},{"comment_id":117532779,"body":"@malthe It won&#39;t. I don&#39;t think it&#39;s feasible to do that, actually. Assuming you use the array index as column name (e.g. array.0.field, array.1.field, ...), you&#39;ll have to know the length of the array beforehand. All these solutions iterate the dataframe structure, which is known at the driver."},{"comment_id":117533304,"body":"I ended up figuring out how to do it and posted a script here: <a href=\"https://stackoverflow.com/a/66482320/647151\">stackoverflow.com/a/66482320/647151</a>."},{"comment_id":117547634,"body":"Oh, so the idea was to keep the array but transform the structures it contains. Nice!"},{"comment_id":131954660,"body":"how could you prevent certain columns from getting flattened using this approach?"}],"answer_id":56533459,"body":"<p>This <code>flatten_df</code> version flattens the dataframe at every layer level, using a stack to avoid recursive calls:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from pyspark.sql.functions import col\n\n\ndef flatten_df(nested_df):\n    stack = [((), nested_df)]\n    columns = []\n\n    while len(stack) &gt; 0:\n        parents, df = stack.pop()\n\n        flat_cols = [\n            col(\".\".join(parents + (c[0],))).alias(\"_\".join(parents + (c[0],)))\n            for c in df.dtypes\n            if c[1][:6] != \"struct\"\n        ]\n\n        nested_cols = [\n            c[0]\n            for c in df.dtypes\n            if c[1][:6] == \"struct\"\n        ]\n\n        columns.extend(flat_cols)\n\n        for nested_col in nested_cols:\n            projected_df = df.select(nested_col + \".*\")\n            stack.append((parents + (nested_col,), projected_df))\n\n    return nested_df.select(columns)\n</code></pre>\n\n<p>Example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from pyspark.sql.types import StringType, StructField, StructType\n\n\nschema = StructType([\n    StructField(\"some\", StringType()),\n\n    StructField(\"nested\", StructType([\n        StructField(\"nestedchild1\", StringType()),\n        StructField(\"nestedchild2\", StringType())\n    ])),\n\n    StructField(\"renested\", StructType([\n        StructField(\"nested\", StructType([\n            StructField(\"nestedchild1\", StringType()),\n            StructField(\"nestedchild2\", StringType())\n        ]))\n    ]))\n])\n\ndata = [\n    {\n        \"some\": \"value1\",\n        \"nested\": {\n            \"nestedchild1\": \"value2\",\n            \"nestedchild2\": \"value3\",\n        },\n        \"renested\": {\n            \"nested\": {\n                \"nestedchild1\": \"value4\",\n                \"nestedchild2\": \"value5\",\n            }\n        }\n    }\n]\n\ndf = spark.createDataFrame(data, schema)\nflat_df = flatten_df(df)\nprint(flat_df.collect())\n</code></pre>\n\n<p>Prints:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>[Row(some=u'value1', renested_nested_nestedchild1=u'value4', renested_nested_nestedchild2=u'value5', nested_nestedchild1=u'value2', nested_nestedchild2=u'value3')]\n</code></pre>\n"},{"answer_id":59905440,"body":"<p>below worked for me in spark sql</p>\n\n<pre><code>import org.apache.spark.sql._\nimport org.apache.hadoop.conf.Configuration\nimport org.apache.hadoop.fs._\nimport org.apache.http.client.methods.HttpGet\nimport org.apache.http.impl.client.DefaultHttpClient\nimport org.apache.spark.sql.{DataFrame, SaveMode, SparkSession}\nimport org.apache.spark.sql.functions._\nimport org.apache.spark.sql.types.StructType\nimport org.apache.log4j.{Level, Logger}\nimport org.apache.spark.rdd.RDD\nimport org.apache.spark.sql.types._\nimport org.apache.spark.storage.StorageLevel\nimport org.apache.spark.sql.functions.{explode, expr, posexplode, when}\n\nobject StackOverFlowQuestion {\n  def main(args: Array[String]): Unit = {\n\n    val logger = Logger.getLogger(\"FlattenTest\")\n    Logger.getLogger(\"org\").setLevel(Level.WARN)\n    Logger.getLogger(\"akka\").setLevel(Level.WARN)\n\n    val spark = SparkSession.builder()\n      .appName(\"FlattenTest\")\n      .config(\"spark.sql.warehouse.dir\", \"C:\\\\Temp\\\\hive\")\n      .master(\"local[2]\")\n      //.enableHiveSupport()\n      .getOrCreate()\n    import spark.implicits._\n\n    val stringTest =\n      \"\"\"{\n                               \"total_count\": 123,\n                               \"page_size\": 20,\n                               \"another_id\": \"gdbfdbfdbd\",\n                               \"sen\": [{\n                                \"id\": 123,\n                                \"ses_id\": 12424343,\n                                \"columns\": {\n                                    \"blah\": \"blah\",\n                                    \"count\": 1234\n                                },\n                                \"class\": {},\n                                \"class_timestamps\": {},\n                                \"sentence\": \"spark is good\"\n                               }]\n                            }\n                             \"\"\"\n    val result = List(stringTest)\n    val githubRdd=spark.sparkContext.makeRDD(result)\n    val gitHubDF=spark.read.json(githubRdd)\n    gitHubDF.show()\n    gitHubDF.printSchema()\n\n    gitHubDF.registerTempTable(\"JsonTable\")\n\n   spark.sql(\"with cte as\" +\n      \"(\" +\n      \"select explode(sen) as senArray  from JsonTable\" +\n      \"), cte_2 as\" +\n      \"(\" +\n      \"select senArray.ses_id,senArray.ses_id,senArray.columns.* from cte\" +\n      \")\" +\n      \"select * from cte_2\"\n    ).show()\n\n    spark.stop()\n}\n\n}\n\n</code></pre>\n\n<p>output:-</p>\n\n<pre><code>+----------+---------+--------------------+-----------+\n|another_id|page_size|                 sen|total_count|\n+----------+---------+--------------------+-----------+\n|gdbfdbfdbd|       20|[[[blah, 1234], 1...|        123|\n+----------+---------+--------------------+-----------+\n\nroot\n |-- another_id: string (nullable = true)\n |-- page_size: long (nullable = true)\n |-- sen: array (nullable = true)\n |    |-- element: struct (containsNull = true)\n |    |    |-- columns: struct (nullable = true)\n |    |    |    |-- blah: string (nullable = true)\n |    |    |    |-- count: long (nullable = true)\n |    |    |-- id: long (nullable = true)\n |    |    |-- sentence: string (nullable = true)\n |    |    |-- ses_id: long (nullable = true)\n |-- total_count: long (nullable = true)\n\n+--------+--------+----+-----+\n|  ses_id|  ses_id|blah|count|\n+--------+--------+----+-----+\n|12424343|12424343|blah| 1234|\n+--------+--------+----+-----+\n</code></pre>\n"},{"answer_id":62921755,"body":"<p>You can use this approach if, you have to covert only struct types.\nI would not suggest converting the array, as it could lead to duplicate records.</p>\n<pre><code>from pyspark.sql.functions import col\nfrom pyspark.sql.types import StructType\n\n\ndef flatten_schema(schema, prefix=&quot;&quot;):\n    return_schema = []\n    for field in schema.fields:\n        if isinstance(field.dataType, StructType):\n            if prefix:\n                return_schema = return_schema + flatten_schema(field.dataType, &quot;{}.{}&quot;.format(prefix, field.name))\n            else:\n                return_schema = return_schema + flatten_schema(field.dataType, field.name)\n        else:\n            if prefix:\n                field_path = &quot;{}.{}&quot;.format(prefix, field.name)\n                return_schema.append(col(field_path).alias(field_path.replace(&quot;.&quot;, &quot;_&quot;)))\n            else:\n                return_schema.append(field.name)\n    return return_schema\n</code></pre>\n<p>You can use it as</p>\n<pre><code>new_schema = flatten_schema(df.schema)\ndf1 = df.select(se)\ndf1.show()\n</code></pre>\n"},{"comments":[{"comment_id":112985201,"body":"Welcome to Stack Overflow. Code-only answers are discouraged on Stack Overflow because they don&#39;t explain how it solves the problem. Please edit your answer to explain what this code does and how it is more efficient than the other answers as you say it is, so that it is useful to other users with similar issues and they can learn from it."},{"comment_id":123573157,"body":"worked perfect for me. You would get more like if you add more explanation for sure."},{"comment_id":129006503,"body":"what is the data type for &quot;parents&quot; @Domenico Di Nicola"},{"comment_id":129008524,"body":"I had problems when the column_name includes &#39;dot&#39; in it. i know if it is explicit column name i can use back tick to escape it, but above, i could not do it."}],"answer_id":63893150,"body":"<p>A little more compact and efficient implementation:</p>\n<p>No need to create list and iterate on them.\nYou &quot;act&quot; on fields based on their type (if structures or not).</p>\n<p>you create a list and iterate on it, if the column is nested (struct) you need to flat it (.*) else you access with dot notation (parent.child) and replace . with _ (parent_child)</p>\n<pre><code>def flatten_df(nested_df):\n    stack = [((), nested_df)]\n    columns = []\n    while len(stack) &gt; 0:\n        parents, df = stack.pop()\n        for column_name, column_type in df.dtypes:\n            if column_type[:6] == &quot;struct&quot;:\n                projected_df = df.select(column_name + &quot;.*&quot;)\n                stack.append((parents + (column_name,), projected_df))\n            else:\n                columns.append(col(&quot;.&quot;.join(parents + (column_name,))).alias(&quot;_&quot;.join(parents + (column_name,))))\n    return nested_df.select(columns)\n</code></pre>\n"},{"answer_id":64013303,"body":"<p>This is for scala spark.</p>\n<pre><code>val totalMainArrayBuffer=collection.mutable.ArrayBuffer[String]()\ndef flatten_df_Struct(dfTemp:org.apache.spark.sql.DataFrame,dfTotalOuter:org.apache.spark.sql.DataFrame):org.apache.spark.sql.DataFrame=\n{\n//dfTemp.printSchema\nval totalStructCols=dfTemp.dtypes.map(x =&gt; x.toString.substring(1,x.toString.size-1)).filter(_.split(&quot;,&quot;,2)(1).contains(&quot;Struct&quot;)) // in case i the column names come with the word Struct embedded in it\nval mainArrayBuffer=collection.mutable.ArrayBuffer[String]()\nfor(totalStructCol &lt;- totalStructCols)\n{\nval tempArrayBuffer=collection.mutable.ArrayBuffer[String]()\ntempArrayBuffer+=s&quot;${totalStructCol.split(&quot;,&quot;)(0)}.*&quot;\n//tempArrayBuffer.toSeq.toDF.show(false)\nval columnsInside=dfTemp.selectExpr(tempArrayBuffer:_*).columns\nfor(column &lt;- columnsInside)\nmainArrayBuffer+=s&quot;${totalStructCol.split(&quot;,&quot;)(0)}.${column} as ${totalStructCol.split(&quot;,&quot;)(0)}_${column}&quot;\n//mainArrayBuffer.toSeq.toDF.show(false)\n}\n//dfTemp.selectExpr(mainArrayBuffer:_*).printSchema\nval nonStructCols=dfTemp.selectExpr(mainArrayBuffer:_*).dtypes.map(x =&gt; x.toString.substring(1,x.toString.size-1)).filter(!_.split(&quot;,&quot;,2)(1).contains(&quot;Struct&quot;)) // in case i the column names come with the word Struct embedded in it\nfor (nonStructCol &lt;- nonStructCols)\ntotalMainArrayBuffer+=s&quot;${nonStructCol.split(&quot;,&quot;)(0).replace(&quot;_&quot;,&quot;.&quot;)} as ${nonStructCol.split(&quot;,&quot;)(0)}&quot; // replacing _ by . in origial select clause if it's an already nested column \ndfTemp.selectExpr(mainArrayBuffer:_*).dtypes.map(x =&gt; x.toString.substring(1,x.toString.size-1)).filter(_.split(&quot;,&quot;,2)(1).contains(&quot;Struct&quot;)).size \nmatch {\ncase value if value ==0 =&gt; dfTotalOuter.selectExpr(totalMainArrayBuffer:_*)\ncase _ =&gt; flatten_df_Struct(dfTemp.selectExpr(mainArrayBuffer:_*),dfTotalOuter)\n}\n}\n\n\ndef flatten_df(dfTemp:org.apache.spark.sql.DataFrame):org.apache.spark.sql.DataFrame=\n{\nvar totalArrayBuffer=collection.mutable.ArrayBuffer[String]()\nval totalNonStructCols=dfTemp.dtypes.map(x =&gt; x.toString.substring(1,x.toString.size-1)).filter(!_.split(&quot;,&quot;,2)(1).contains(&quot;Struct&quot;)) // in case i the column names come with the word Struct embedded in it\nfor (totalNonStructCol &lt;- totalNonStructCols)\ntotalArrayBuffer+=s&quot;${totalNonStructCol.split(&quot;,&quot;)(0)}&quot;\ntotalMainArrayBuffer.clear\nflatten_df_Struct(dfTemp,dfTemp) // flattened schema is now in totalMainArrayBuffer \ntotalArrayBuffer=totalArrayBuffer++totalMainArrayBuffer\ndfTemp.selectExpr(totalArrayBuffer:_*)\n}\n\n\nflatten_df(dfTotal.withColumn(&quot;tempStruct&quot;,lit(5))).printSchema\n\n\n\n</code></pre>\n<p>File</p>\n<pre><code>{&quot;num1&quot;:1,&quot;num2&quot;:2,&quot;bool1&quot;:true,&quot;bool2&quot;:false,&quot;double1&quot;:4.5,&quot;double2&quot;:5.6,&quot;str1&quot;:&quot;a&quot;,&quot;str2&quot;:&quot;b&quot;,&quot;arr1&quot;:[3,4,5],&quot;map1&quot;:{&quot;cool&quot;:1,&quot;okay&quot;:2,&quot;normal&quot;:3},&quot;carInfo&quot;:{&quot;Engine&quot;:{&quot;Make&quot;:&quot;sa&quot;,&quot;Power&quot;:{&quot;IC&quot;:&quot;900&quot;,&quot;battery&quot;:&quot;165&quot;},&quot;Redline&quot;:&quot;11500&quot;} ,&quot;Tyres&quot;:{&quot;Make&quot;:&quot;Pirelli&quot;,&quot;Compound&quot;:&quot;c1&quot;,&quot;Life&quot;:&quot;120&quot;}}}\n{&quot;num1&quot;:3,&quot;num2&quot;:4,&quot;bool1&quot;:false,&quot;bool2&quot;:false,&quot;double1&quot;:4.2,&quot;double2&quot;:5.5,&quot;str1&quot;:&quot;u&quot;,&quot;str2&quot;:&quot;n&quot;,&quot;arr1&quot;:[6,7,9],&quot;map1&quot;:{&quot;fast&quot;:1,&quot;medium&quot;:2,&quot;agressive&quot;:3},&quot;carInfo&quot;:{&quot;Engine&quot;:{&quot;Make&quot;:&quot;na&quot;,&quot;Power&quot;:{&quot;IC&quot;:&quot;800&quot;,&quot;battery&quot;:&quot;150&quot;},&quot;Redline&quot;:&quot;10000&quot;} ,&quot;Tyres&quot;:{&quot;Make&quot;:&quot;Pirelli&quot;,&quot;Compound&quot;:&quot;c2&quot;,&quot;Life&quot;:&quot;100&quot;}}}\n{&quot;num1&quot;:8,&quot;num2&quot;:4,&quot;bool1&quot;:true,&quot;bool2&quot;:true,&quot;double1&quot;:5.7,&quot;double2&quot;:7.5,&quot;str1&quot;:&quot;t&quot;,&quot;str2&quot;:&quot;k&quot;,&quot;arr1&quot;:[11,12,23],&quot;map1&quot;:{&quot;preserve&quot;:1,&quot;medium&quot;:2,&quot;fast&quot;:3},&quot;carInfo&quot;:{&quot;Engine&quot;:{&quot;Make&quot;:&quot;ta&quot;,&quot;Power&quot;:{&quot;IC&quot;:&quot;950&quot;,&quot;battery&quot;:&quot;170&quot;},&quot;Redline&quot;:&quot;12500&quot;} ,&quot;Tyres&quot;:{&quot;Make&quot;:&quot;Pirelli&quot;,&quot;Compound&quot;:&quot;c3&quot;,&quot;Life&quot;:&quot;80&quot;}}}\n{&quot;num1&quot;:7,&quot;num2&quot;:9,&quot;bool1&quot;:false,&quot;bool2&quot;:true,&quot;double1&quot;:33.2,&quot;double2&quot;:7.5,&quot;str1&quot;:&quot;b&quot;,&quot;str2&quot;:&quot;u&quot;,&quot;arr1&quot;:[12,14,5],&quot;map1&quot;:{&quot;normal&quot;:1,&quot;preserve&quot;:2,&quot;agressive&quot;:3},&quot;carInfo&quot;:{&quot;Engine&quot;:{&quot;Make&quot;:&quot;pa&quot;,&quot;Power&quot;:{&quot;IC&quot;:&quot;920&quot;,&quot;battery&quot;:&quot;160&quot;},&quot;Redline&quot;:&quot;11800&quot;} ,&quot;Tyres&quot;:{&quot;Make&quot;:&quot;Pirelli&quot;,&quot;Compound&quot;:&quot;c4&quot;,&quot;Life&quot;:&quot;70&quot;}}}\n</code></pre>\n<p>Before:</p>\n<pre><code>root\n |-- arr1: array (nullable = true)\n |    |-- element: long (containsNull = true)\n |-- bool1: boolean (nullable = true)\n |-- bool2: boolean (nullable = true)\n |-- carInfo: struct (nullable = true)\n |    |-- Engine: struct (nullable = true)\n |    |    |-- Make: string (nullable = true)\n |    |    |-- Power: struct (nullable = true)\n |    |    |    |-- IC: string (nullable = true)\n |    |    |    |-- battery: string (nullable = true)\n |    |    |-- Redline: string (nullable = true)\n |    |-- Tyres: struct (nullable = true)\n |    |    |-- Compound: string (nullable = true)\n |    |    |-- Life: string (nullable = true)\n |    |    |-- Make: string (nullable = true)\n |-- double1: double (nullable = true)\n |-- double2: double (nullable = true)\n |-- map1: struct (nullable = true)\n |    |-- agressive: long (nullable = true)\n |    |-- cool: long (nullable = true)\n |    |-- fast: long (nullable = true)\n |    |-- medium: long (nullable = true)\n |    |-- normal: long (nullable = true)\n |    |-- okay: long (nullable = true)\n |    |-- preserve: long (nullable = true)\n |-- num1: long (nullable = true)\n |-- num2: long (nullable = true)\n |-- str1: string (nullable = true)\n |-- str2: string (nullable = true\n</code></pre>\n<p>After:</p>\n<pre><code>root\n |-- arr1: array (nullable = true)\n |    |-- element: long (containsNull = true)\n |-- bool1: boolean (nullable = true)\n |-- bool2: boolean (nullable = true)\n |-- double1: double (nullable = true)\n |-- double2: double (nullable = true)\n |-- num1: long (nullable = true)\n |-- num2: long (nullable = true)\n |-- str1: string (nullable = true)\n |-- str2: string (nullable = true)\n |-- map1_agressive: long (nullable = true)\n |-- map1_cool: long (nullable = true)\n |-- map1_fast: long (nullable = true)\n |-- map1_medium: long (nullable = true)\n |-- map1_normal: long (nullable = true)\n |-- map1_okay: long (nullable = true)\n |-- map1_preserve: long (nullable = true)\n |-- carInfo_Engine_Make: string (nullable = true)\n |-- carInfo_Engine_Redline: string (nullable = true)\n |-- carInfo_Tyres_Compound: string (nullable = true)\n |-- carInfo_Tyres_Life: string (nullable = true)\n |-- carInfo_Tyres_Make: string (nullable = true)\n |-- carInfo_Engine_Power_IC: string (nullable = true)\n |-- carInfo_Engine_Power_battery: string (nullable = true)\n\n</code></pre>\n<p>Tried for 2 Levels, it worked</p>\n"},{"comments":[{"comment_id":120004774,"body":"This works with Spark 3.1.0 too, but it doesn&#39;t preserve the <code>data</code> or whatever is parent is selected -- and doesn&#39;t descend if there are further nested structs."},{"comment_id":120345620,"body":"when I am selecting as df.select(&quot;data.*&#39;), it gives me n*n rows. (Duplicated n rows for each row). My data frame having n-2 distinct rows, so if I put distinct it gives me n-2 result. But I want n results, which is actually present in my data. How can I achieve this using above mentioned select command."},{"comment_id":124845729,"body":"the dollar can be omitted :)"},{"comment_id":125132334,"body":"Tested with DBR 9.1, Spark 3.1.2 and it works. <code>df.select(&quot;data.*&quot;)</code>"}],"answer_id":64783597,"body":"<p>For Spark 2.4.5,</p>\n<p>while,<code>df.select(df.col(&quot;data.*&quot;))</code> will give you <code>org.apache.spark.sql.AnalysisException: No such struct field * in</code> exception</p>\n<p>this will work:-</p>\n<pre><code>df.select($&quot;data.*&quot;)\n</code></pre>\n"},{"comments":[{"comment_id":120755128,"body":"This works very well. and i take the &#39;responsibility&#39; of using it carefully, since flatten <code>array of struct</code> can produce duplicate rows as others said."},{"comment_id":133456667,"body":"Could you explain what each for loop is doing? I&#39;m specifically interested in learning why you defined those specific numbers (:5, :6) in the functions."},{"comment_id":133456702,"body":"&quot;array&quot; -&gt; 5 chars, &quot;struct&quot;-&gt;6 chars"},{"comment_id":133457679,"body":"Ah the length of a string &quot;array&quot; is 5 and &quot;struct&quot; is 6. Thanks!"}],"answer_id":65256608,"body":"<p>PySpark solution to flatten nested df with both <strong>struct</strong> and <strong>array</strong> types with <strong>any level of depth</strong>. This is improved on this: <a href=\"https://stackoverflow.com/a/56533459/7131019\">https://stackoverflow.com/a/56533459/7131019</a></p>\n<pre><code>from pyspark.sql.types import *\nfrom pyspark.sql import functions as f\n\ndef flatten_structs(nested_df):\n    stack = [((), nested_df)]\n    columns = []\n\n    while len(stack) &gt; 0:\n        \n        parents, df = stack.pop()\n        \n        array_cols = [\n            c[0]\n            for c in df.dtypes\n            if c[1][:5] == &quot;array&quot;\n        ]\n        \n        flat_cols = [\n            f.col(&quot;.&quot;.join(parents + (c[0],))).alias(&quot;_&quot;.join(parents + (c[0],)))\n            for c in df.dtypes\n            if c[1][:6] != &quot;struct&quot;\n        ]\n\n        nested_cols = [\n            c[0]\n            for c in df.dtypes\n            if c[1][:6] == &quot;struct&quot;\n        ]\n        \n        columns.extend(flat_cols)\n\n        for nested_col in nested_cols:\n            projected_df = df.select(nested_col + &quot;.*&quot;)\n            stack.append((parents + (nested_col,), projected_df))\n        \n    return nested_df.select(columns)\n\ndef flatten_array_struct_df(df):\n    \n    array_cols = [\n            c[0]\n            for c in df.dtypes\n            if c[1][:5] == &quot;array&quot;\n        ]\n    \n    while len(array_cols) &gt; 0:\n        \n        for array_col in array_cols:\n            \n            cols_to_select = [x for x in df.columns if x != array_col ]\n            \n            df = df.withColumn(array_col, f.explode(f.col(array_col)))\n            \n        df = flatten_structs(df)\n        \n        array_cols = [\n            c[0]\n            for c in df.dtypes\n            if c[1][:5] == &quot;array&quot;\n        ]\n    return df\n\nflat_df = flatten_array_struct_df(df)\n</code></pre>\n"},{"answer_id":68802060,"body":"<p>We used <a href=\"https://github.com/lvhuyen/SparkAid\" rel=\"nofollow noreferrer\">https://github.com/lvhuyen/SparkAid</a> It works to any Level</p>\n<p>from sparkaid import flatten</p>\n<p>flatten(df_nested_B).printSchema()</p>\n"},{"answer_id":70032053,"body":"<p>Based on <a href=\"https://stackoverflow.com/a/49532496/17250408\">https://stackoverflow.com/a/49532496/17250408</a>\nhere is solution for <code>struct</code> and <code>array</code> fields with multilevel nesting</p>\n<pre><code>from pyspark.sql.functions import col, explode\n\n\ndef type_cols(df_dtypes, filter_type):\n    cols = []\n    for col_name, col_type in df_dtypes:\n        if col_type.startswith(filter_type):\n            cols.append(col_name)\n    return cols\n\n\ndef flatten_df(nested_df, sep='_'):\n    nested_cols = type_cols(nested_df.dtypes, &quot;struct&quot;)\n    flatten_cols = [fc for fc, _ in nested_df.dtypes if fc not in nested_cols]\n    for nc in nested_cols:\n        for cc in nested_df.select(f&quot;{nc}.*&quot;).columns:\n            if sep is None:\n                flatten_cols.append(col(f&quot;{nc}.{cc}&quot;).alias(f&quot;{cc}&quot;))\n            else:\n                flatten_cols.append(col(f&quot;{nc}.{cc}&quot;).alias(f&quot;{nc}{sep}{cc}&quot;))\n    return nested_df.select(flatten_cols)\n\n\ndef explode_df(nested_df):\n    nested_cols = type_cols(nested_df.dtypes, &quot;array&quot;)\n    exploded_df = nested_df\n    for nc in nested_cols:\n        exploded_df = exploded_df.withColumn(nc, explode(col(nc)))\n    return exploded_df\n\n\ndef flatten_explode_df(nested_df):\n    df = nested_df\n    struct_cols = type_cols(nested_df.dtypes, &quot;struct&quot;)\n    array_cols = type_cols(nested_df.dtypes, &quot;array&quot;)\n    if struct_cols:\n        df = flatten_df(df)\n        return flatten_explode_df(df)\n    if array_cols:\n        df = explode_df(df)\n        return flatten_explode_df(df)\n    return df\n\n\ndf = flatten_explode_df(nested_df)\n</code></pre>\n"},{"answer_id":75489933,"body":"<p>If you have a mix of multi-level nested structs and arrays, the code below will help.</p>\n<p>The code defines a class called <code>NestedDF</code> that can be used to flatten a mix of nested structs and nested arrays in a PySpark dataframe.</p>\n<p><strong>In a hurry?</strong> Here's One-Liner showing how to use the code right-away:</p>\n<p><code>nested_df = NestedDF(my_df).flattened_df</code> ...just replace <code>my_df</code> with your pyspark data_frame</p>\n<pre><code>from pyspark.sql.functions import col, size\nfrom pyspark.sql.types import ArrayType\n\nclass NestedDF:\n&quot;&quot;&quot;A class for flattening nested dataframes in PySpark.&quot;&quot;&quot;\n\ndef __init__(self, nested_df):\n    &quot;&quot;&quot;\n    Args:\n        nested_df (pyspark.sql.dataframe.DataFrame): Nested dataframe.\n    &quot;&quot;&quot;\n    self.nested_df = nested_df\n    self.flattened_struct_df = self.flatten_struct_df()\n    self.flattened_df = self.flatten_array_df()\n\ndef flatten_array_df(self):\n    &quot;&quot;&quot;Flatten a nested array dataframe into a single level dataframe.\n\n    Returns:\n        pyspark.sql.dataframe.DataFrame: Flattened dataframe.\n    &quot;&quot;&quot;\n    cols = self.flattened_struct_df.columns\n    for col_name in cols:\n        if isinstance(self.flattened_struct_df.schema[col_name].dataType, ArrayType):\n            array_len = self.flattened_struct_df.select(size(col(col_name)).alias(&quot;array_len&quot;)).collect()[0][&quot;array_len&quot;]\n            for i in range(array_len):\n                self.flattened_struct_df = self.flattened_struct_df.withColumn(col_name + &quot;_&quot; + str(i), self.flattened_struct_df[col_name].getItem(i))\n            self.flattened_struct_df = self.flattened_struct_df.drop(col_name)\n    return self.flattened_struct_df\n\ndef flatten_struct_df(self):\n    &quot;&quot;&quot;Flatten a nested dataframe into a single level dataframe.\n\n    Returns:\n        pyspark.sql.dataframe.DataFrame: Flattened dataframe.\n    &quot;&quot;&quot;\n    stack=[((), self.nested_df)]\n    columns=[]\n    while len(stack)&gt;0:\n        parents, df=stack.pop()\n        for col_name, col_type in df.dtypes:\n            if col_type.startswith('struct'):\n                stack.append((parents+(col_name,), df.select(col_name+&quot;.*&quot;)))\n            else:\n                columns.append(col(&quot;.&quot;.join(parents+(col_name,))).alias(&quot;_&quot;.join(parents+(col_name,))))\n    return self.nested_df.select(columns)\n</code></pre>\n<p><strong>Explanation:</strong></p>\n<p>The class has two methods: <code>flatten_array_df()</code> and <code>flatten_struct_df()</code>.\n<code>flatten_array_df()</code> flattens a nested array dataframe into a single-level dataframe. It first calls the <code>flatten_struct_df()</code> method to convert any nested structs in the dataframe into a single-level dataframe. Then, it iterates over the columns of the resulting dataframe and checks if each column contains an array. If a column contains an array, it calculates the length of the array and then iterates over each element of the array. For each element, it creates a new column in the dataframe with a name that combines the original column name and the index of the element. Finally, it drops the original column and returns the resulting flattened dataframe.</p>\n<p><code>flatten_struct_df()</code> flattens a nested dataframe that contains structs into a single-level dataframe. It first creates an empty stack and adds a tuple containing an empty tuple and the input nested dataframe to the stack. It then iteratively pops the top tuple from the stack and checks if each column of the corresponding dataframe contains a struct. If a column contains a struct, it adds a new tuple to the stack that contains the original column name as well as the struct's columns, and selects only those columns from the original dataframe. If a column does not contain a struct, it constructs a new column name by combining the column names of all of its parent structs and the original column name, and adds the resulting column to a list. Finally, it selects the columns in the list and returns the resulting flattened dataframe.</p>\n<pre><code>   def flatten_dictionary(data, path = []):\n    result = []\n    for key, value in data.items():\n        new_path = path + [key]\n        if isinstance(value, dict):\n            result.extend(flatten_dictionary(value, new_path))\n        elif isinstance(value, list):\n            for idx, item in enumerate(value):\n                if isinstance(item, dict):\n                    result.extend(flatten_dictionary(item, new_path))\n                else:\n                    result.append((&quot;_&quot;.join(map(str, new_path)), item))\n        else:\n            result.append((&quot;_&quot;.join(map(str, new_path)), value))\n    return result\n</code></pre>\n"},{"answer_id":76197871,"body":"<h6>It handles struct and array type both , whether you wants your array type as column or you want left it as it is.</h6>\n<pre><code>def new_flatten(df, need_as_column):\nstack, col_arr = [], []\nstack.append((df.schema.fields, '', df))\nwhile len(stack) &gt; 0:\n    arr, curr_name, curr_col = stack.pop()\n    if curr_name != '':\n        curr_name += '_'\n    for x in arr:\n        if str(x.dataType).startswith('StructType'):\n            stack.append((x.dataType.fields, curr_name+x.name, curr_col[x.name]))\n        elif str(x.dataType).startswith('ArrayType'):\n            if need_as_column:\n                elem_type = str(x.dataType.elementType)\n                length = df.select(size(curr_col[x.name]).alias('my_size')).agg(max('my_size')).head()[0]\n                for i in range(length):\n                    if elem_type.startswith('StructType'):\n                        stack.append((x.dataType.elementType.fields, curr_name + x.name + '_' + str(i), curr_col[x.name][i]))\n                    else:\n                        col_arr.append(curr_col[x.name].getItem(i).alias((curr_name + x.name + '_' + str(i)).lower())) \n            else:\n                col_arr.append(curr_col[x.name].alias(curr_name+x.name))\n        else:\n            col_arr.append(curr_col[x.name].alias(curr_name+x.name))\nreturn df.select(col_arr)\n</code></pre>\n"}],"last_activity_date":1684432800,"question_id":38753898,"body":"<p>I have a dataframe with the following structure:</p>\n\n<pre><code> |-- data: struct (nullable = true)\n |    |-- id: long (nullable = true)\n |    |-- keyNote: struct (nullable = true)\n |    |    |-- key: string (nullable = true)\n |    |    |-- note: string (nullable = true)\n |    |-- details: map (nullable = true)\n |    |    |-- key: string\n |    |    |-- value: string (valueContainsNull = true)\n</code></pre>\n\n<p>How it is possible to flatten the structure and create a new dataframe:</p>\n\n<pre><code>     |-- id: long (nullable = true)\n     |-- keyNote: struct (nullable = true)\n     |    |-- key: string (nullable = true)\n     |    |-- note: string (nullable = true)\n     |-- details: map (nullable = true)\n     |    |-- key: string\n     |    |-- value: string (valueContainsNull = true)\n</code></pre>\n\n<p>Is there something like explode, but for structs?</p>\n"},{"comments":[{"comment_id":131072703,"body":"You might also want to ask this on <a href=\"https://apple.stackexchange.com/\">AskDifferent</a>"},{"comment_id":131072839,"body":"Check your PATH variable or try where is javac. Sounds like the path is pointing to the v18 executable."},{"comment_id":131072969,"body":"@kiwiron <code>echo $PATH</code> returns this <code>&#47;Users&#47;xxx&#47;bin:&#47;usr&#47;local&#47;bin:&#47;Users&#47;xxx&#47;bin:&#47;usr&#47;local&#47;bin:&zwnj;&#8203;&#47;usr&#47;local&#47;bin:&#47;User&zwnj;&#8203;s&#47;xxx&#47;bin:&#47;usr&#47;local&zwnj;&#8203;&#47;bin:&#47;opt&#47;homebrew&#47;b&zwnj;&#8203;in:&#47;opt&#47;homebrew&#47;sbi&zwnj;&#8203;n:&#47;usr&#47;local&#47;bin:&#47;Us&zwnj;&#8203;ers&#47;xxx&#47;bin:&#47;usr&#47;loc&zwnj;&#8203;al&#47;bin:&#47;Library&#47;Fram&zwnj;&#8203;eworks&#47;Python.framew&zwnj;&#8203;ork&#47;Versions&#47;3.10&#47;bi&zwnj;&#8203;n:&#47;usr&#47;local&#47;bin:&#47;us&zwnj;&#8203;r&#47;bin:&#47;bin:&#47;usr&#47;sbin&zwnj;&#8203;:&#47;sbin</code>"},{"comment_id":131074060,"body":"By the way, a suggestion: <a href=\"https://sdkman.io/\" rel=\"nofollow noreferrer\">sdkman.io</a>"}],"answers":[{"comments":[{"comment_id":131099764,"body":"still spits the old version when I do <code>echo $JAVA_HOME</code> <code>&#47;Library&#47;Java&#47;JavaVirtualMachines&#47;jdk-18.0.2.jdk&#47;Contents&#47;Ho&zwnj;&#8203;me</code>"}],"answer_id":74241474,"body":"<pre><code>export JAVA_HOME=`/usr/libexec/java_home -v 11` \n</code></pre>\n"},{"comments":[{"comment_id":131099994,"body":"Thanks for the answer. I was able to change the version using jenv, however when I run the command <code>javac --version</code> I get <code>18.0.2</code>"},{"comment_id":131100016,"body":"Nvm I just had to refresh the terminal. Thank you sir, spent countless hours on this!"}],"answer_id":74245647,"body":"<p>What works like a charme for me is using jenv: <a href=\"https://www.jenv.be/\" rel=\"nofollow noreferrer\">https://www.jenv.be/</a></p>\n<p>With jenv you can also switch between different Java versions.</p>\n<p>Before using jenv, I relied on the Maven toolchains plugin: <a href=\"https://maven.apache.org/plugins/maven-toolchains-plugin/\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugins/maven-toolchains-plugin/</a></p>\n<p>Thus, I actually never really worried about <code>JAVA_HOME</code> on MacOS. Maybe one of these options also is an alternative for you.</p>\n"},{"comments":[{"comment_id":134527069,"body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76283318/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"answer_id":76283318,"body":"<p>I don't know if this typo is only in your question here, but you need to put a space between &quot;-v&quot; and &quot;11&quot;:</p>\n<pre><code>export JAVA_HOME=$(/usr/libexec/java_home -v 11)\n</code></pre>\n"}],"last_activity_date":1684432416,"question_id":74240319,"body":"<p>I am trying to set my machines javac version to 11 from 18.0.2 and I'm doing the following steps</p>\n<ol>\n<li>open ~/.zshenv</li>\n<li>export JAVA_HOME=$(/usr/libexec/java_home -v11)</li>\n<li>source ~/.zshenv</li>\n</ol>\n<p>When I check the version, I still get it as 18.0.2. Not sure what I am doing wrong here.\nCould someone please help me with this? Been stuck on this forever.</p>\n"},{"comments":[{"comment_id":134518987,"body":"Sounds like an onboarding problem. Whether or not non-prod keys belong in a repo is opinionated; I <b>personally</b> wouldn&#39;t do it, and I&#39;d make new machine setup part of the onboarding process. If the non-prod machines are accessible only locally, or through a VPN, the ultimate security risk is <b>relatively</b> low. Just depends--there&#39;s no generic answer."},{"comment_id":134520422,"body":"It&#39;s never a good idea. Your dev environment may get compromised, and attackers may gain further access from there. It&#39;s not worth the risk to spare new devs the few minutes to grab a key from the source your prod uses and store it locally for subsequent access."},{"comment_id":134520455,"body":"It&#39;s not a direct answer to this question, but testing against a containerized SFTP server would take care of this problem and provide a lot other benefits as well. It&#39;s not difficult with a framework like <a href=\"https://www.testcontainers.org/\" rel=\"nofollow noreferrer\">Testcontainers.</a>"}],"answers":[{"comments":[{"comment_id":134520400,"body":"I like best the suggestion to provision new developer&#39;s laptops with the private key required for tests."}],"answer_id":76282602,"body":"<p>I think you sincerely misunderstand what a private key is: Private. It should never leave the origin host. And yet, you want to commit and push it to github?</p>\n<p>I get what you're trying to do, but conceptually your approaching it wrong.</p>\n<p>If you want to continue with ssh+private keys, then new devs need to generate a new keypair and then <em>add their public key to .ssh/authorized_keys</em> - you can do this by using a previous key</p>\n<p>Another approach, If you really insist on sharing accounts and keys, then instead of checking it into github, provision new dev laptops with the private key already on their box.Or put the key on a shared internal drive/mount that requires authentication. Then update your process to use that specific key: <code>scp -i /path/to/mykey user@host</code> for either of these cases</p>\n<p>Finally, you can use a key with password encryption. At that point you share the password with your devs and you can put the private key anywhere you want (though, security experts would cringe). Sharing the password should be out-of-band.</p>\n<p>If you're looking for a zero effort solution, there isn't one and that's <strong>by design</strong>. Private keys are meant to be private and also individual to a user. If you share a key, it's like sharing a password. Would you check a password into github? Many would, but then no one should cry when they have security breaches.</p>\n"}],"last_activity_date":1684432311,"question_id":76282460,"body":"<p>Our Java application is a job which SFTP's files to a remote location with a private key. For non-PROD testing, there is a lower-environment private key, and PROD has its own upper-environment private key.</p>\n<p>If we don't check in any private keys into GitHub with the project, then a new developer will immediately fail on building/running the app. Both the job and its unit tests require a Private Key to exist somewhere on the user's machine. The only solution is to include a README.MD warning for new developers: &quot;Obtain a private key, put it somewhere on your machine, and set the variable SFTP_PRIVATE_KEY in <em>application.yaml</em> to that location -- <strong>before</strong> you do anything!&quot;</p>\n<p>If we do check in the Non-PROD Private Key into GitHub, and the checked-in <em>application.yaml</em> points to that key, everything will work for new developers from the ground up. But we've heard that it's never allowed to check in any keys into GitHub.</p>\n<p>Is it at least allowed to check in the Non-PROD Private Key into GitHub, to simplify this initial setup, or is it never a good idea?</p>\n<p>SFTP Application code using the private key, e.g.:</p>\n<pre><code>byteArrayInputStreamJSON = new ByteArrayInputStream(bytesJSON);         \njSch.addIdentity(filePrivateKey.getAbsolutePath(), sftpPrivateKeyPassphrase);\nchannelSftp.put(byteArrayInputStreamJSON, filename);\n</code></pre>\n"},{"answers":[{"answer_id":76283298,"body":"<p>With <code>Aggregation.project(&quot;sourced.reference&quot;)</code>, you no longer need the <code>ReducedEntity</code> class you directly use the <code>Sourced</code> class as outputType in the aggregate.</p>\n<pre><code>var aggregation = Aggregation.newAggregation(Aggregation.project(&quot;sourced.reference&quot;));\n\nAggregationResults&lt;Sourced&gt; results = mongoTemplate.aggregate(aggregation, collectionName, Sourced.class);\nreturn results.getMappedResults().stream().map(Sourced::getReference).collect(Collectors.toList());\n</code></pre>\n"}],"last_activity_date":1684432276,"question_id":76271104,"body":"<p>My object looks this way:</p>\n<pre><code>{\n  &quot;sourced&quot;: { &quot;reference&quot;: &quot;a&quot;, &quot;otherField: 1 }\n  &quot;derived&quot;: &quot;Q&quot;\n}\n</code></pre>\n<p>My final goal is to reduce it to:</p>\n<pre><code>{\n  &quot;reference&quot;: &quot;a&quot;\n}\n</code></pre>\n<p>And remove all duplicates with distinct.</p>\n<p>So far I got following working code:</p>\n<pre><code>@Data\nprivate static class ReducedEntity {\n    Sourced sourced;\n}\n\n@Data\nprivate static class Sourced {\n    private String reference;\n}\n\nvar aggregation = Aggregation.newAggregation(\n        match(new Criteria()),\n        Aggregation.project(&quot;sourced&quot;)\n        );\nAggregationResults&lt;ReducedEntity&gt; results = mongoTemplate.aggregate(aggregation, collectionName, ReducedEntity.class);\nList&lt;ReducedEntity&gt; mappedResult = results.getMappedResults();\nreturn mappedResult.stream().map(book -&gt; book.sourced.reference).collect(Collectors.toList());\n</code></pre>\n<p>It works but I prefer to have a single class with a reference property.</p>\n<p>One interesting observation is that</p>\n<pre><code>Aggregation.project(&quot;sourced.reference&quot;)\n</code></pre>\n<p>will return null for <code>sourced</code>.</p>\n<p>I tried to project &quot;sourced.reference&quot; to &quot;reference&quot; without luck. What's the issue? Thanks</p>\n"},{"last_activity_date":1684431759,"question_id":76283241,"body":"<p>is there a way to accept custom Content-Type - <code>application/health.message+xml; charset=utf-8; type=HEALTH_CHECK</code> from the client and change it to text/xml in SOAP webservice?\nThe application was developed in Java (Spring Boot WebService - JAX-WS)\nAccording to the search in internet there is a way to resolve the problem via nginx config.</p>\n<p>The exception which we are getting</p>\n<pre><code>UnsupportedMediaException: Unsupported Content-Type: application/health.message+xml; charset=utf-8;  type=HEALTH_CHECK Supported ones are: [text/xml]\n</code></pre>\n"},{"answers":[{"answer_id":76283234,"body":"<p>(As of JDK 17 - <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ResourceBundle.Control.html#getCandidateLocales(java.lang.String,java.util.Locale)\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ResourceBundle.Control.html#getCandidateLocales(java.lang.String,java.util.Locale)</a>)</p>\n<p>It is impossible to use Locale extension to select a different property file from a Bundle because <code>ResourceBundle.getBundle()</code> method depends on <code>ResourceBundle.Control.getCandidateLocales()</code> to generate a list of the possible matches. That list is only based on combinations of the L(anguage), S(cript), R(region), and V(ariants) attributes of the target Locale. It does not include any provisions for E(xtensions)</p>\n"}],"last_activity_date":1684431726,"question_id":72748411,"body":"<p>What's the naming convention for message bundle property files when using extensions or private use subtags?\nFor instance, if the locale is EN US, the property file lookup will be</p>\n<pre><code>message_en_US.properties\n</code></pre>\n<p>though, what if I need instantiate a local EN US and the private use subtag string is <code>RandomTag</code>. How do I name the file so <code>GetBundle</code> can find it? <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/ResourceBundle.html#getBundle%28java.lang.String,%20java.util.Locale,%20java.lang.ClassLoader%29\" rel=\"nofollow noreferrer\">The API doc does not talk about how to deal with extensions</a></p>\n<p>P.S: I realize <code>RandomTag</code> can be specified as a variant and I could just name the file <code>message_en_US_RandomTag.properties</code> but I would like to avoid this as we might use legitimate variants in the future as specified in the <a href=\"https://www.rfc-editor.org/rfc/rfc5646.html#section-2.2.5\" rel=\"nofollow noreferrer\">BCP-47 standards</a> for locale</p>\n"},{"comments":[{"comment_id":103053091,"body":"OK; And what is your question?"},{"comment_id":103053552,"body":"The above code giving error . need help to fix that issue ."},{"comment_id":103056925,"body":"Create and store a <b>copy</b> of the array. Otherwise the caller can modify the internal state of your object by modifying the array it gave you before (that&#39;s what the warning message tells you)."}],"answers":[{"answer_id":58362096,"body":"<p>As already mentioned in the comments, arrays are passed by Reference in Java (as all complex Objects).\nThis means there is the oportiunity to pass a valid Sting[] to your class and after you checked it and stored it, the caller changes the content of the array to what ever he wants.</p>\n\n<p>So if you want to close thie vulnerabilitity you need to store the array like this:</p>\n\n<pre><code>public class SaveArrayContainer {\n\npublic String[] data;\n\n    public SaveArrayContainer(String[] array) {\n        data = Arrays.copyOf(array, array.length);\n    }\n}\n</code></pre>\n"},{"answer_id":76278417,"body":"<p>But each time you create a copy when using <em><strong>Arrays.copyOf()</strong></em>, a new array object is allocated in memory. I would suggest you just use the SuppressWarning annotation.</p>\n"}],"last_activity_date":1684431713,"question_id":58347899,"body":"<p>the below code is giving an error when running through SonalQube for code Vulnerability.</p>\n\n<pre><code>public class Myclass{\n\nString[] text;\n\npublic MyClass(String [] texts){\nthis.texts = texts;\n}\n}\n</code></pre>\n\n<p>The above code is throwing vulnerability error: <strong>May Expose Internal Representation by storing an external mutable object</strong></p>\n"},{"comments":[{"comment_id":35894313,"body":"try running <code>sudo eclipse</code>."}],"answers":[{"answer_id":23422888,"body":"<p>As comments says if you want any super privilege use \"sudo\" for running eclipse as a super user go to the directory in which you installed eclipse by using <br></p>\n\n<pre><code> cd [dir to eclipse] \n sudo eclipse\n</code></pre>\n"},{"answer_id":76283196,"body":"<p>When you want to run eclipse as root user you should do these steps:</p>\n<pre><code>cd [path of your eclipse directory]\nsudo ./eclipse\n</code></pre>\n"}],"last_activity_date":1684431517,"question_id":23422213,"body":"<p>i have written a java program which access the system file.But it is showing error    <code>java.io.FileNotFoundException: /sys/kernel/debug/usb/usbmon/6u (Permission denied)</code></p>\n\n<p>i have change the permission of <code>6u</code> to <code>777</code> but it is showing same problem again and again.Any help toward this will be helpful.Thanks in advance</p>\n"},{"comments":[{"comment_id":134527093,"body":"So, running a toxiproxy in a container and test a local process running in your machine, right? See docs, please <a href=\"https://www.testcontainers.org/features/networking/#exposing-host-ports-to-the-container\" rel=\"nofollow noreferrer\">testcontainers.org/features/networking/&hellip;</a>"}],"last_activity_date":1684431300,"question_id":76283179,"body":"<p>I would like to simulate network latency with ToxiProxy between a custom written TCP server and a corresponding TCP client in a JUnit 5 test.<br />\nThe server will listen to a specific port on the host network (localhost).<br />\nI could not figure out a way to start the ToxiProxy container with network mode host to avoid connectivity issues between the client, the ToxiProxy server and my TCP server\nI tried the following piece of code:</p>\n<pre><code>ToxiproxyContainer toxiproxy = new ToxiproxyContainer(&quot;ghcr.io/shopify/toxiproxy:2.5.0&quot;)\n                            .withNetworkMode(&quot;host&quot;);\n\ntoxiproxy.start();\n</code></pre>\n<p>Which resulted in:</p>\n<pre><code>org.testcontainers.containers.ContainerLaunchException: Container startup failed\n\n    at org.testcontainers.containers.GenericContainer.doStart(GenericContainer.java:349)\n    at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:322)\n    at com.evolit.oebb.kmc.business.common.schnittstelle.subset137.client.Subset137ClientTest.testClientServerInteraction(Subset137ClientTest.java:37)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)\nCaused by: org.rnorth.ducttape.RetryCountExceededException: Retry limit hit with exception\n    at org.rnorth.ducttape.unreliables.Unreliables.retryUntilSuccess(Unreliables.java:88)\n    at org.testcontainers.containers.GenericContainer.doStart(GenericContainer.java:334)\n    ... 71 more\nCaused by: org.testcontainers.containers.ContainerLaunchException: Could not create/start container\n    at org.testcontainers.containers.GenericContainer.tryStart(GenericContainer.java:542)\n    at org.testcontainers.containers.GenericContainer.lambda$doStart$0(GenericContainer.java:344)\n    at org.rnorth.ducttape.unreliables.Unreliables.retryUntilSuccess(Unreliables.java:81)\n    ... 72 more\nCaused by: org.testcontainers.shaded.org.awaitility.core.ConditionTimeoutException: org.testcontainers.containers.GenericContainer expected the predicate to return &lt;true&gt; but it returned &lt;false&gt; for input of &lt;InspectContainerResponse(args=[-host=0.0.0.0], config=ContainerConfig(attachStderr=false, attachStdin=false, attachStdout=false, cmd=[-host=0.0.0.0], domainName=, entrypoint=[/toxiproxy], env=[PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin, LOG_LEVEL=info], exposedPorts=[8474/tcp, 8666/tcp, 8667/tcp, 8668/tcp, 8669/tcp, 8670/tcp, 8671/tcp, 8672/tcp, 8673/tcp, 8674/tcp, 8675/tcp, 8676/tcp, 8677/tcp, 8678/tcp, 8679/tcp, 8680/tcp, 8681/tcp, 8682/tcp, 8683/tcp, 8684/tcp, 8685/tcp, 8686/tcp, 8687/tcp, 8688/tcp, 8689/tcp, 8690/tcp, 8691/tcp, 8692/tcp, 8693/tcp, 8694/tcp, 8695/tcp, 8696/tcp, 8697/tcp], hostName=beast, image=ghcr.io/shopify/toxiproxy:2.5.0\n</code></pre>\n<p>Is it possible to run the ToxiProxy container with network mode host?<br />\nOr is there some alternative without having to run the custom TCP server in container and creating a dedicated Docker network?</p>\n"},{"comments":[{"comment_id":134519575,"body":"I have recently posted an answer to a similar issue. Please check it here: <a href=\"https://stackoverflow.com/questions/76207551/spring-controller-that-accepts-both-multipartfile-and-also-a-json-object/76209048#76209048\" title=\"spring controller that accepts both multipartfile and also a json object\">stackoverflow.com/questions/76207551/&hellip;</a>"},{"comment_id":134520736,"body":"@Mar-Z I&#39;m wondering if the problem is in the between RequestPart and RequestParameter annotations or between ResponseEntity&lt;String&gt; and DetailedMessageDto return values?"}],"last_activity_date":1684431018,"question_id":76282808,"body":"<p>I am making a news app with Spring Boot and I have a Message entity and an Image entity connected in a one to one relationship. Uploading them one by one is not a problem, but when I try to upload them at the same time it doesn't work.</p>\n<pre><code>@Entity\n@Table(name = &quot;images&quot;)\npublic class Image {\n    @Id\n    @GeneratedValue(generator = &quot;uuid&quot;)\n    @GenericGenerator(name = &quot;uuid&quot;, strategy = &quot;uuid2&quot;)\n    private String id;\n\n    @Column\n    private String name;\n\n    @Column\n    private String type;\n\n    @Lob\n    @Column\n    private byte[] data;\n\n    @OneToOne(mappedBy = &quot;image&quot;)\n    private Message message;\n\n    // getters and setters\n}\n\n</code></pre>\n<pre><code>@Entity\npublic class Message {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(nullable = false, name = &quot;published_at&quot;)\n    private LocalDateTime publishedAt;\n\n    @Column(nullable = false, length = 100)\n    private String title;\n\n    @Column(nullable = false, length = 500)\n    private String summary;\n\n    @Column(nullable = false, length = 10000)\n    private String text;\n\n    @OneToOne(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;file_id&quot;, referencedColumnName = &quot;id&quot;)\n    private Image image;\n    \n    // getters and setters\n}\n</code></pre>\n<pre><code>public class MessageInquiryDto {\n\n    private Long id;\n    @NotNull(message = &quot;Title must not be null&quot;)\n    private String title;\n\n    @NotNull(message = &quot;Summary must not be null&quot;)\n    private String summary;\n\n    @NotNull(message = &quot;Text must not be null&quot;)\n    private String text;\n\n    private Image image;\n    // getters and setters\n}\n</code></pre>\n<p>ImageStorageService store method:</p>\n<pre><code>public Image store(MultipartFile file) throws IOException {\n        String fileName = StringUtils.cleanPath(Objects.requireNonNull(file.getOriginalFilename()));\n        Image image = new Image(fileName, file.getContentType(), file.getBytes());\n\n        return imageRepository.save(image);\n    }\n</code></pre>\n<pre><code>@PostMapping(&quot;/messages&quot;)\n@ResponseStatus(HttpStatus.CREATED)\n@Operation(summary = &quot;Publish a new message with a file&quot;, security = @SecurityRequirement(name = &quot;apiKey&quot;))\npublic DetailedMessageDto create(@Valid @RequestBody MessageInquiryDto messageDto, @RequestParam(value = &quot;file&quot;) MultipartFile file) {\n    Image image = imageStorageService.store(file);\n    messageDto.setImage(image);\n    \n    return messageMapper.messageToDetailedMessageDto(\n            messageService.publishMessage(messageMapper.messageInquiryDtoToMessage(messageDto)));\n}\n\n</code></pre>\n<p>I haven't been able to send a request through Postman. The message has to be sent as JSON and the file has to be a MultipartFile.</p>\n<p>I've even tried to separate Post and Put methods like this:</p>\n<pre><code>@PutMapping(&quot;/{id}&quot;)\n@Operation(summary = &quot;Add image to a message&quot;, security = @SecurityRequirement(name = &quot;apiKey&quot;))\npublic DetailedMessageDto addImage(@PathVariable Long id, @RequestParam(&quot;file&quot;) MultipartFile file) {\n    try {\n        Image image = storageService.storeWithMessage(file, id);\n        Message message = messageService.findOne(id);\n        message.setImage(image);\n        return messageMapper.messageToDetailedMessageDto(messageService.publishMessage(message));\n    } catch (Exception e) {\n        throw new RuntimeException(&quot;Could not upload the file: &quot; + file.getOriginalFilename(), e);\n    }\n}\n\n</code></pre>\n<pre><code>public Image storeWithMessage(MultipartFile file, Long id) throws IOException {\n    String fileName = StringUtils.cleanPath(Objects.requireNonNull(file.getOriginalFilename()));\n    Image image = new Image(fileName, file.getContentType(), file.getBytes());\n\n    Optional&lt;Message&gt; message = messageRepository.findById(id);\n\n    message.ifPresent(value -&gt; value.setImage(image));\n    message.ifPresent(messageRepository::save);\n\n    return imageRepository.save(image);\n}\n</code></pre>\n<p>I then get an error: &quot;Unable to upload name_of_file.jpeg&quot;.</p>\n"},{"comments":[{"comment_id":80137147,"body":"You don&#39;t need to add the return type in the method name, it&#39;s already indicated <b>in the return type</b>. All IDEs are able to show the return type of the method, so there&#39;s no ambiguity."},{"comment_id":80137198,"body":"If you have a method that returns a primitive, it stands to reason you can never return null, so you don’t need the second method."},{"comment_id":80137621,"body":"There is no naming convention for this, so make your own. I&#39;ve used <code>double getDouble()</code> vs <code>Double getDoubleObj()</code> in the past, but you could also use <code>Double getBoxedDouble()</code> or <code>Double getNullableDouble()</code>. It&#39;s entirely up to you."},{"comment_id":80137922,"body":"guys, please, see my edit note. @Andreas thanks for your suggestion"},{"comment_id":80137940,"body":"Consider using <code>java.util.OptionalDouble</code> instead of a boxed nullable <code>Double</code>."}],"answers":[{"comments":[{"comment_id":80137740,"body":"Thanks for your suggestion, I will edit my question to clarify some points"}],"answer_id":46592100,"body":"<p>You are not supposed to use class name or type to form the getter or setter.</p>\n\n<p>You should use the object's name or variable's name.</p>\n\n<p>eg. for <code>Double length;</code> the getter would be <code>getLength()</code></p>\n\n<p>If you want both, you may use something like:</p>\n\n<pre><code>public double getLength(){\n    return length;\n}\n\npublic Double getLengthNullable{\n    //return sth\n}\n</code></pre>\n"},{"answer_id":46592572,"body":"<p>No, there is no naming convention, it should be documented in the API of the corresponding function. Every method that returns an object can return <code>null</code> in principle.</p>\n<p>Since Java 8 there is a class <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"nofollow noreferrer\"><code>Optional</code></a> that can be used to avoid a <code>null</code> return value, making the program safer.</p>\n<pre><code>   public Optional&lt;Double&gt; getSomething() {\n       return Optional.ofNullable(something);\n   }\n</code></pre>\n<p>The caller will be able to test if there is a value with <code>isPresent()</code>, or use a lambda to process it with <code>ifPresent(value -&gt; ....)</code>.</p>\n<p>However, nothing in Java will force you to use <code>Optional</code>, nor is there a naming convention.</p>\n"}],"last_activity_date":1684430843,"question_id":46592053,"body":"<p>Is there some name convention for methods that returns primitive vs nullable ones?</p>\n<p>Example:</p>\n<pre><code>public double getDouble() {\n    //...\n}\n\npublic Double getDouble() {\n    //...\n}\n</code></pre>\n<p>I want to have both of these methods in my project, but I can't figure out what would be a good name for the <code>Double</code> one. I have the same problem with the <code>getShort</code> and <code>getInteger</code> methods.</p>\n<p>Edit:</p>\n<p>I think some of you guys misunderstood me.\nThose examples are just a part of my code to simplify my question.\nThey are part of a class that can return the value of a string in several ways, getShort, getInt, getDouble etc.\nIn some cases we need the nullable one and in other one we need the primitive one.</p>\n<p>There are some reasons that can justify this approach like usability for the team's members and use cases where which method would be called around my code</p>\n"},{"comments":[{"comment_id":124131951,"body":"Use an official jdk instead of homebrew"}],"answers":[{"comments":[{"comment_id":124159797,"body":"Thank you for the answer. I&#39;ve install Rosetta2 on my Mac, but I see no &quot;Open using Rosetta&quot; on &quot;Apache Directory Studio&quot; info. Do you know how to force app to use  Rosetta2?"}],"answer_id":70230774,"body":"<p>The latest version of Apache Directory Studio needs Java 11 at a minimum.\nBut even that won't help you on M1, Eclipse won't run, with the old problem of &quot;missing symbol&quot; - which is actually there.</p>\n<p>Eclipse has had this problem on and off for years, on all platforms.</p>\n<p>The architecture of Java doesn't matter. The Intel version runs fine with Rosetta2. Remember, Java is architecture independent. It the JVM runs, the java application runs.</p>\n<p>You may want to encourage them by commenting on my bug report:</p>\n<p><a href=\"https://issues.apache.org/jira/projects/DIRSTUDIO/issues/DIRSTUDIO-1293\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/projects/DIRSTUDIO/issues/DIRSTUDIO-1293</a></p>\n<p>There is an RC release of Eclipse for the M1. No clue how long it will take the Apache Directory Studio team to pick it up.</p>\n"},{"answer_id":70586318,"body":"<p>There doesn't seem to be a current version which works.\nHowever, you can get a working version by installing the new M1 version of Eclipse available here:</p>\n<p><a href=\"https://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/2021-12/R/eclipse-java-2021-12-R-macosx-cocoa-aarch64.dmg%5D\" rel=\"noreferrer\">https://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/2021-12/R/eclipse-java-2021-12-R-macosx-cocoa-aarch64.dmg]</a></p>\n<p>Then, at the bottom of the Apache Directory Studio download page is a link with instructions on how to load the directory studio plugin into Eclipse.\nThis works fine. (I am using Java 17, but it should work with any java version from 11 upwards as far as I can see).</p>\n"},{"answer_id":70675192,"body":"<p>You can find org.eclipse.<em>.cocoa.macosx.x86_64.</em> in</p>\n<p>/Applications/ApacheDirectoryStudio.app/Contents/Eclipse/plugins.</p>\n<p>They are preventing boot on M1 Mac.</p>\n<p>You can use Apache Directory Studio as an application on Eclipse.\nSee\n<a href=\"https://directory.apache.org/studio/installation-in-eclipse.html\" rel=\"nofollow noreferrer\">https://directory.apache.org/studio/installation-in-eclipse.html</a></p>\n"},{"comments":[{"comment_id":125738714,"body":"So far, this seems to have worked great. You can also install ApacheDirectoryStudio using Homebrew with <code>brew install apache-directory-studio</code>."},{"comment_id":127179744,"body":"Nice one! Install the oracle-jdk and then edit the Info.plist as per <a href=\"https://stackoverflow.com/a/33477302\">stackoverflow.com/a/33477302</a>. This is the only solution that worked for me."},{"comment_id":131155980,"body":"I tried this method and also modified info.plist as suggested by moritz.vieli but it&#39;s not working for me. I&#39;m getting this error &quot;The JVM shared library &quot;/opt/homebrew/Cellar/openjdk/19/libexec/openjdk.jdk/Content&zwnj;&#8203;s/Home/bin/../lib/se&zwnj;&#8203;rver/libjvm.dylib&quot; does not contain the JNI_CreateJavaVM symbol.&quot; Any ideas?"},{"comment_id":132479524,"body":"Worked fine on Mac M1. Thanks!"}],"answer_id":70891659,"body":"<p>I was able to run ApacheDirectoryStudio by installing Java for x86_64. Rosetta 2 is required to make this work on the aarch64 (Apple M1) architecture.</p>\n<p>To install the x86_64 version of the Java JDK via Homebrew, following command can be used:</p>\n<pre><code>arch -x86_64 brew install oracle-jdk\n</code></pre>\n<p>Versions used:</p>\n<ul>\n<li>ApacheDirectoryStudio: 2.0.0.v20210717-M17</li>\n<li>Oracle JDK: 17.0.2</li>\n</ul>\n"},{"answer_id":74876845,"body":"<p>Somehow version <code>2.0.0.v20200411-M15</code> ran out of the box on my M1.</p>\n"},{"answer_id":75990106,"body":"<p>You can modify the content of Info.plist.</p>\n<pre><code>/Applications/ApacheDirectoryStudio.app/Contents/Info.plist\n</code></pre>\n<p>This file contains the following commented content:</p>\n<pre><code>      &lt;!-- to use a specific Java version (instead of the platform's default) uncomment one of the following options,\n                or add a VM found via $/usr/libexec/java_home -V\n            &lt;string&gt;-vm&lt;/string&gt;&lt;string&gt;/System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Commands/java&lt;/string&gt;\n            &lt;string&gt;-vm&lt;/string&gt;&lt;string&gt;/Library/Java/JavaVirtualMachines/1.8.0.jdk/Contents/Home/bin/java&lt;/string&gt;\n        --&gt;\n</code></pre>\n<p>Uncomment this line with the path to your installed JDK.</p>\n"},{"answer_id":76283135,"body":"<p>Martin M.'s solution to install the x86_64 version of a jdk worked for me.  Rather than using the oracle-jdk (because that is now licensed software) I used temurin-11.  Then following moritz.vieli's comment to modify the Info.plist got things working!  To find which path to put into the Info.plist file, run the following command to see which jdk's are installed on your mac:</p>\n<pre><code>/usr/libexec/java_home -V  (and append /bin/java to the path)\n</code></pre>\n<p>This info is found on the Apache Directory Studio website under the FAQ section.</p>\n"}],"last_activity_date":1684430840,"question_id":70220737,"body":"<p>I have a problem run Apache Directory Studio On Apple silicon MBP M1 Max.</p>\n<p>Error:</p>\n<pre><code>2021-12-03 12:42:07.497 ApacheDirectoryStudio[5675:42763] Error loading /Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/MacOS/libjli.dylib: \n dlopen(/Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/MacOS/libjli.dylib, 0x0109): \n tried: '/Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/MacOS/libjli.dylib' (mach-o file, but is an incompatible architecture (have 'arm64', need 'x86_64')),\n  '/usr/lib/libjli.dylib' (no such file)\n</code></pre>\n<p>Looks like <code>Homebrew</code> has ApacheDirectoryStudio <code>x86_64</code> version, but Java is <code>arm64</code>.</p>\n<p>Please help.</p>\n"},{"comments":[{"comment_id":48666930,"body":"Have a look at <a href=\"http://stackoverflow.com/questions/7611803/cxf-2-4-2-no-conduit-initiator-was-found-for-the-namespace-http-schemas-xmlso/15877959#15877959\">this SO post</a>, which discusses your problem.  Since adding the transport JAR didn&#39;t fix your problem you can focus on the other suggestions"}],"answers":[{"comments":[{"comment_id":101594217,"body":"I&#39;ve added only <code>cxf-rt-transports-http</code>, not <code>cxf-rt-transports-http-jetty</code>, and it helped anyway. Thanks!"}],"answer_id":41568241,"body":"<p>I had the same issue in my java project.</p>\n\n<p>Firstly I had only the following CXF dependency in my pom.xml:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n    &lt;artifactId&gt;cxf-rt-frontend-jaxws&lt;/artifactId&gt;\n    &lt;version&gt;${cxf.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Afterwards, I added the two CXF dependencies:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n    &lt;artifactId&gt;cxf-rt-transports-http&lt;/artifactId&gt;\n    &lt;version&gt;${cxf.version}&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n    &lt;artifactId&gt;cxf-rt-transports-http-jetty&lt;/artifactId&gt;\n    &lt;version&gt;${cxf.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>The full pom.xml:</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;fr.atatorus&lt;/groupId&gt;\n    &lt;artifactId&gt;bookclient&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;properties&gt;\n        &lt;cxf.version&gt;2.2.3&lt;/cxf.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n            &lt;artifactId&gt;cxf-rt-frontend-jaxws&lt;/artifactId&gt;\n            &lt;version&gt;${cxf.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n            &lt;artifactId&gt;cxf-rt-transports-http&lt;/artifactId&gt;\n            &lt;version&gt;${cxf.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n            &lt;artifactId&gt;cxf-rt-transports-http-jetty&lt;/artifactId&gt;\n            &lt;version&gt;${cxf.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.8.1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>This configuration helped my project to work properly.</p>\n"},{"answer_id":70123122,"body":"<p>There might be a really trivial reason for this SOAPFaultException:\nCheck your endpoint url.\nIf it does not start with &quot;http&quot; or &quot;https&quot; (e.g. due to a space in front like &quot; https://....&quot;), then you get exactly this exception.\nIn this case you only need to fix the url :).</p>\n<p>E.g. adding a space &quot; &quot; in front like &quot; https://...&quot; gives:\njavax.xml.ws.soap.SOAPFaultException: Could not find conduit initiator for address:  https://hostname/api/MyApi and transport: <a href=\"http://schemas.xmlsoap.org/soap/http\" rel=\"nofollow noreferrer\">http://schemas.xmlsoap.org/soap/http</a></p>\n<p>Note the somewhat hidden space in front of &quot; https://...&quot;.</p>\n"},{"comments":[{"comment_id":134536239,"body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76283130/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"answer_id":76283130,"body":"<p>I have added only cxf-rt-transports-http for dependence in pom.xml resolved for me.</p>\n"}],"last_activity_date":1684430792,"question_id":30284377,"body":"<p>I want call a .net SOAP web service from java. .net Service has ws-security module and I used apache CXF for setting username and password (and maybe later X.509 certificate). The code I used is: </p>\n\n<pre><code>    ITaxOrganService wsHttpBindingITaxOrganService = new TaxOrganService().getWSHttpBindingITaxOrganService();\n    Endpoint endpoint = ClientProxy.getClient(wsHttpBindingITaxOrganService).getEndpoint();\n\n    Map&lt;String,Object&gt; outProps = new HashMap&lt;&gt;();\n    outProps.put(WSHandlerConstants.ACTION,WSHandlerConstants.USERNAME_TOKEN);\n    outProps.put(WSHandlerConstants.USER,\"*****\");\n    outProps.put(WSHandlerConstants.PASSWORD_TYPE, WSConstants.PW_TEXT);\n    outProps.put(WSHandlerConstants.PW_CALLBACK_CLASS, ShahrdariPasswordCallback.class.getName());\n\n    WSS4JOutInterceptor wssOut = new WSS4JOutInterceptor(outProps);\n    endpoint.getOutInterceptors().add(wssOut);\n    PermissionPrintDS permissionPrintDS = wsHttpBindingITaxOrganService.providePermissionInfoByPermNo(10000198);\n</code></pre>\n\n<p>but java throw an exception on last line:</p>\n\n<pre><code>    Caused by: java.lang.RuntimeException: Could not find conduit initiator for address: http://urbanservices.iri/Services/xxyzService/xxyzService.svc and transport: http://schemas.xmlsoap.org/soap/http\n    at org.apache.cxf.binding.soap.SoapTransportFactory.getConduit(SoapTransportFactory.java:224) ~[cxf-rt-bindings-soap-3.1.0.jar:3.1.0]\n    at org.apache.cxf.binding.soap.SoapTransportFactory.getConduit(SoapTransportFactory.java:229) ~[cxf-rt-bindings-soap-3.1.0.jar:3.1.0]\n    at org.apache.cxf.endpoint.AbstractConduitSelector.createConduit(AbstractConduitSelector.java:145) ~[cxf-core-3.1.0.jar:3.1.0]\n    at org.apache.cxf.endpoint.AbstractConduitSelector.getSelectedConduit(AbstractConduitSelector.java:107) ~[cxf-core-3.1.0.jar:3.1.0]\n    at org.apache.cxf.endpoint.UpfrontConduitSelector.prepare(UpfrontConduitSelector.java:63) ~[cxf-core-3.1.0.jar:3.1.0]\n    at org.apache.cxf.endpoint.ClientImpl.prepareConduitSelector(ClientImpl.java:853) ~[cxf-core-3.1.0.jar:3.1.0]\n    at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:511) ~[cxf-core-3.1.0.jar:3.1.0]\n    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:425) ~[cxf-core-3.1.0.jar:3.1.0]\n    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:326) ~[cxf-core-3.1.0.jar:3.1.0]\n    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:279) ~[cxf-core-3.1.0.jar:3.1.0]\n    at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:96) ~[cxf-rt-frontend-simple-3.1.0.jar:3.1.0]\n    at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:139) ~[cxf-rt-frontend-jaxws-3.1.0.jar:3.1.0]\n    at com.sun.proxy.$Proxy144.providePermissionInfoByPermNo(Unknown Source) ~[na:na]\n</code></pre>\n\n<p>What can I do?</p>\n"},{"comments":[{"comment_id":134520024,"body":"See if <a href=\"https://stackoverflow.com/questions/20412445/how-to-create-a-reorder-able-tableview-in-javafx\">this</a> can get you going. <a href=\"https://gist.github.com/jewelsea/7821196\" rel=\"nofollow noreferrer\">same</a>"},{"comment_id":134520249,"body":"Unfortunately, i already found this code, but this is strictly for images, and i&#39;m not really able to shape it up for my specific case. Don&#39;t wanna sound stupid or lazy, but since i wasn&#39;t able to write a code on my own to solve this, rearranging someone elses code is perhaps even more difficult"},{"comment_id":134520477,"body":"@boh That makes no sense. The images are completely irrelevant to the drag and drop code in that example."},{"comment_id":134520634,"body":"In the question @SedJ601 posted, someone in the comment said the same thing. Also, i&#39;m not speaking just because of that comment. I already found that code before, i changed the parameters in many lines and my IDE gives me errors because i&#39;m not using Images. For example, in the &#39;dragboard.setDragView{}&#39; line, my IDE suggests me to &#39;wrap using &#39;Image.fromPlatformImage()&#39; method, and i think it&#39;s obvious it&#39;s not something i should do to a &#39;Category&#39; object."},{"comment_id":134520656,"body":"@boh Why do you need a drag view if you&#39;re not using images?"},{"comment_id":134520770,"body":"So, what should i write instead of the &#39;imageView&#39; variable inside &#39;BirdCell&#39;? It&#39;s also used in the updateItem() method. Also, the &#39;            setOnDragDone(DragEvent::consume);&#39; gives me an error and suggests me to create a local variable &#39;DragEvent&#39;."},{"comment_id":134520840,"body":"Just implement the <code>ListCell</code> the way you want to. It&#39;s just a standard <code>ListCell</code>, which is part of the basic API for JavaFX. If you don&#39;t know how to use a list cell, just read the documentation or pretty much any basic JavaFX tutorial.  The basic implementation of the <code>ListCell</code> has nothing to do with what you are asking about. Add the drag and drop handling in its constructor, as in the example. You sound like you are just trying to copy code without making any effort to understand what it does."},{"comment_id":134520884,"body":"I&#39;m sorry this is the impression i gave you. I&#39;ve just been stuck on this problem for over a week and i feel pretty frustrated. I&#39;ll look more into it. Thank you"},{"comment_id":134520908,"body":"Regarding my other question, once i&#39;ll be able to implement the drag and drop system, my idea on how to let it work with the database makes sense?"},{"comment_id":134520984,"body":"That&#39;s probably the way I&#39;d do it, but I&#39;m by no means a database expert. Questions like &quot;is that a good approach&quot; and &quot;are there better ways to do this&quot; are generally considered too opinion-based for this forum."},{"comment_id":134524739,"body":"This seems similar (though with a greater scope) then <a href=\"https://stackoverflow.com/questions/76284010/listview-drag-and-drop-error-indexoutofboundsexception-index-1-out-of-bounds\">this other question</a> (by a different username)."},{"comment_id":134525008,"body":"Try to focus on a single question when asking a question.  Reordering in a ListVIew is a different problem from retaining order in a database."}],"last_activity_date":1684430728,"question_id":76283122,"body":"<p>I have a Springboot Backend, and a JavaFX frontend.</p>\n<p>I have a class called Category, which has a name. Through my client, i can create a new Category and send it to the database.\nIn my frontend, i have a View in which i use the API REST to get a List, with all the categories stored on the database.</p>\n<p>What i want to do, is to be able to reorder them, and change their position in the database.</p>\n<p>So, for example, i create a category called &quot;A&quot;, and another one called &quot;B&quot;. When i do the GET method, they are retrieved in this order and populate a ListView. I'd like to be able to drag &quot;B&quot;, move it onto &quot;A&quot; and change their order.</p>\n<p>Since i want this to be persistent, i was thinking of adding a column in my database called &quot;position&quot;. When i move the elements inside the listview, by pressing &quot;Confirm&quot; i could update their 'position' value, thus changing my GET method with an &quot;ORDER BY position&quot;. Maybe i could cycle through the listview and using the index as the new 'position' value.</p>\n<p>Two things about this:</p>\n<ul>\n<li>Is this a good approach? Are there better ways of doing this?</li>\n<li>I don't know how to implement the Drag and Drop feature. I've looked online, asked ChatGPT, but nothing seems to work. Any advices?</li>\n</ul>\n"},{"comments":[{"comment_id":134524369,"body":"Seems like something is missing in the Kotlin package you&#39;re using. Try reinstalling the Kotlin?"},{"comment_id":134526665,"body":"This might be a class loader related issue since pokeapi uses its own classloader, but first try reinstalling kotlin as @acrastt said"}],"last_activity_date":1684430429,"question_id":76283091,"body":"<p>I have a problem, when connecting to the pokeapi api using java in eclipse, I am using gson and okhttp3, but when executing the method that makes the http request I get a java lang error that says that kotlin dependencies are missing, I have installed the kotlin jar and imported it, however I still get the error\nThis is the code</p>\n<pre><code>package pokemon;\nimport java.io.IOException;\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.util.Scanner;\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.Comparator;\nimport com.google.gson.Gson;\nimport com.google.gson.JsonArray;\nimport com.google.gson.JsonElement;\nimport com.google.gson.JsonObject;\nimport okhttp3.OkHttpClient;\nimport okhttp3.Request;\nimport okhttp3.Response;\nimport kotlin.*;\nublic class Pokemon  {\n    /*Esto guarda en una variable local de tipo String llamado url\n    la e indica que se esta utilizando SQL Server en la misma máquina \n    en la que se está ejecutando el programa, en el puerto 3003, y que la base de \n    datos que se está utilizando se llama &quot;pokemondb&quot;\n    El trusted server es para que no tire  error de certificado*/\n      private static final String driver=&quot;com.microsoft.sqlserver.jdbc.DriverJDBCVersion&quot;;\n      private static final String url = &quot;jdbc:sqlserver://localhost:3003;databaseName=pokemondb;TrustServerCertificate=True&quot;;\n      private int numeroPokedex;\n      private String nombre;\n      private double peso;\n      private double altura;\n      public Pokemon(int numeroPokedex, String nombre, double peso, double altura) {//Constructor del array list\n            this.numeroPokedex = numeroPokedex;\n            this.nombre = nombre;\n            this.peso = peso;\n            this.altura = altura;\n        }\n      \n        public int getNumeroPokedex() {\n        return numeroPokedex;\n    }\n\n    public void setNumeroPokedex(int numeroPokedex) {\n        this.numeroPokedex = numeroPokedex;\n    }\n\n    public String getNombre() {\n        return nombre;\n    }\n\n    public void setNombre(String nombre) {\n        this.nombre = nombre;\n    }\n\n    public double getPeso() {\n        return peso;\n    }\n\n    public void setPeso(double peso) {\n        this.peso = peso;\n    }\n\n    public double getAltura() {\n        return altura;\n    }\n\n    public void setAltura(double altura) {\n        this.altura = altura;\n    }\n    public static class CompararPeso implements Comparator&lt;Pokemon&gt; {\n        @Override\n        public int compare(Pokemon p1, Pokemon p2) {\n            return Double.compare(p2.getPeso(), p1.getPeso());\n        }\n    }\n\n    \n        @Override\n        public String toString() {\n            return &quot;Pokemon: numeroPokedex: &quot; + numeroPokedex + &quot;, Nombre: &quot; + nombre + &quot;, Peso: &quot; + peso + &quot;, Altura: &quot; + altura;\n        }//para mostrar datos con el arraylist\n    //jbd es una api de Java que permite establecer conexion de Java con SQl\n    public static void main(String[] args) throws SQLException {\n        Connection con=conexion();\n        Scanner escaner = new Scanner(System.in);\n        boolean salir = false;//bandera para salir del menu\n        int opcion; //Guardaremos la opcion del usuario\n        do\n        {\n            System.out.println(&quot;-------- Menu Principal--------&quot;);\n            System.out.println(&quot;1 Mostrar todos los pokemons &quot;);\n            System.out.println(&quot;2 Actualizar nombre del pokemon por su numero de la Pokedex &quot;);\n            System.out.println(&quot;3 Borrar pokemon &quot;);\n            System.out.println(&quot;4 Insertar nuevo pokemon &quot;);\n            System.out.println(&quot;5 Mostrar todos los movimientos(incluyendo MT y MO) que puede apreder un pokemon&quot;);\n            System.out.println(&quot;6 Filtrar los pokemon por tipos &quot;);\n            System.out.println(&quot;7 Mostrar el número de movimientos de cada tipo &quot;);\n            System.out.println(&quot;8 Mostrar la informacion del un pokemon &quot;);\n            System.out.println(&quot;9 Mostrar los 10 pokemones más pesados &quot;);\n            System.out.println(&quot;10 Mostras los nombres de los pokemons por llamadas a la API &quot;);\n            System.out.println(&quot;11 Salir &quot;);\n            System.out.println(&quot;--------------------------------&quot;);\n            System.out.println(&quot;Ingrese una opcion&quot;);\n            opcion=escaner.nextInt();\n            switch (opcion) {\n            case 1:\n                mostrarPokemon();\n                break;\n            case 2:\n                System.out.println(&quot;Inserte el numero de la Pokedex&quot;);\n                int id=escaner.nextInt();\n                System.out.println(&quot;INTRODUZCA EL NUEVO NOMBRE DEL POKEMON&quot;);\n                String nombre=escaner.next();\n                actualizarPokemon(id,nombre );\n                break;\n            case 3:\n                System.out.println(&quot;Inserte el numero de la Pokedex&quot;);\n                int id1=escaner.nextInt();\n                borrarPokemon(id1);\n                break;\n            case 4:\n                System.out.println(&quot;INTRODUZCA EL NOMBRE DEL NUEVO POKEMON&quot;);\n                String nombre1=escaner.next();\n                System.out.println(&quot;INTRODUZCA EL PESO DEL POKEMON&quot;);\n                Float peso=escaner.nextFloat();\n                System.out.println(&quot;INTRODUZCA LA ALTURA DEL NUEVO POKEMON&quot;);\n                Float altura=escaner.nextFloat();\n                insertarPokemon(nombre1, peso, altura);\n                break;\n            case 5:\n                System.out.println(&quot;Introduce el numero de la pokedex&quot;);\n                int n=escaner.nextInt();\n                mostrarMovimiento(n);\n                break;\n            case 6:\n                System.out.println(&quot;Introduce un tipo para filtrarlo&quot;);\n                String tipo=escaner.next();\n                filtrarTipo(tipo);\n                break;\n            case 7:\n                System.out.println(&quot;Introduce un tipo&quot;);\n                String tipo2=escaner.next();\n                filtrarMovimiento(tipo2);\n                break;\n            case 8:\n                System.out.println(&quot;Introduce el numero de la Pokedex para mostrar&quot;);\n                int n1=escaner.nextInt();\n                mostrarInformacion(n1);\n                break;\n            case 9:\n                mostrarPesados();\n                break;\n            case 10:\n                obtenerNombrePokemon();\n                break;\n            case 11:\n                salir=true;\n                break;\n            default:\n                break;\n            }\n        }while(!salir);//mientras salir no sea verdadero\n        escaner.close();\n    }\n        public static void mostrarPokemon() throws SQLException{\n            Connection con=conexion();\n            String pokedex = &quot;SELECT NUMERO_POKEDEX,NOMBRE  FROM Pokemon&quot;;\n            PreparedStatement ps =con.prepareStatement(pokedex);\n            ResultSet rs=ps.executeQuery();\n            while(rs.next()){//mientras que en la consulta de rs se obtengra una respuesta\n                System.out.println(rs.getInt(&quot;NUMERO_POKEDEX&quot;)+&quot;: &quot;+rs.getString(&quot;NOMBRE&quot;));//imprima la consulta de rs\n            }\n            \n            \n        }\n        public static String actualizarPokemon(int id, String nombre) throws SQLException{\n            Connection con=conexion();\n            String consulta = &quot;Update Pokemon set NOMBRE=?  where NUMERO_POKEDEX=?&quot;;\n            PreparedStatement ps=con.prepareStatement(consulta);\n            ps.setString(1, nombre);//establece el nombre del parametro nombre\n            ps.setInt(2, id);//establece el valor del parametro NUMERO_POKEDEX\n            ps.executeUpdate();//para ejecutar el update\n            return &quot;El nombre del pokemon con id &quot; + id + &quot; ha sido actualizado a &quot; + nombre;\n        }\n        public static String borrarPokemon(int id) throws SQLException{\n            Connection con=conexion();\n            String consulta=&quot;delete  from Pokemon where NUMERO_POKEDEX= ?&quot;;\n            PreparedStatement ps=con.prepareStatement(consulta);\n            ps.setInt(1, id);\n            ps.executeUpdate(); // Ejecutar la consulta de eliminación2\n            return &quot;El pokemon con numero &quot;+id+&quot; has sido eliminado&quot;;\n        }\n        public static void insertarPokemon(String nombre,double peso, double altura) throws SQLException{\n            Connection con=conexion();\n             String consulta = &quot;INSERT INTO Pokemon(NOMBRE, PESO, ALTURA) VALUES (?,?,?)&quot;;\n             PreparedStatement ps=con.prepareStatement(consulta);\n             ps.setString(1,nombre);\n             ps.setDouble(2,peso);\n             ps.setDouble(3,altura);\n             ps.executeUpdate();\n            // Obtener el último número de la Pokédex insertado\n                String n = &quot;SELECT MAX(NUMERO_POKEDEX) AS NUMERO_POKEDEX FROM Pokemon&quot;;\n                PreparedStatement ps1 = con.prepareStatement(n);\n                ResultSet rs = ps1.executeQuery();\n                while (rs.next()) {\n                    int numeroPokedex = rs.getInt(&quot;NUMERO_POKEDEX&quot;);\n                    System.out.println(&quot;Se ha insertado el nuevo Pokémon con nombre &quot; + nombre + &quot; y número de la Pokédex &quot; + numeroPokedex);\n                }\n               \n        }\n        private static void mostrarMovimiento(int n) throws SQLException{\n            Connection con=conexion();\n            String consulta = &quot;SELECT p.NUMERO_POKEDEX, m.NOMBRE AS MOVIMIENTO FROM Pokemon p JOIN Pokemon_Movimiento_Forma pmf ON p.NUMERO_POKEDEX = pmf.NUMERO_POKEDEX JOIN Movimiento m ON pmf.ID_MOVIMIENTO = m.ID_MOVIMIENTO WHERE p.NUMERO_POKEDEX = ?&quot;;\n            PreparedStatement ps = con.prepareStatement(consulta);\n            ps.setInt(1, n);\n            ResultSet rs = ps.executeQuery();\n            while (rs.next()) {\n                String nombreMovimiento = rs.getString(&quot;MOVIMIENTO&quot;);\n                System.out.println(nombreMovimiento);\n            }\n    }\n        private static void filtrarTipo(String t) throws SQLException {\n            Connection con=conexion();\n            String consulta=&quot;select p.NUMERO_POKEDEX,p.NOMBRE,p.PESO,p.ALTURA,t.nombre from pokemon p join Pokemon_Tipo pt on p.NUMERO_POKEDEX=pt.NUMERO_POKEDEX join Tipo t on pt.ID_TIPO=t.ID_TIPO  where t.nombre=?;&quot;;\n            PreparedStatement ps=con.prepareStatement(consulta);\n            ps.setString(1,t);\n            ResultSet rs=ps.executeQuery();\n            while(rs.next()) {\n                int numeroPokedex = rs.getInt(&quot;NUMERO_POKEDEX&quot;);\n                String nombrePokemon = rs.getString(&quot;NOMBRE&quot;);\n                double peso = rs.getDouble(&quot;PESO&quot;);\n                double altura = rs.getDouble(&quot;ALTURA&quot;);\n                String nombreTipo = rs.getString(&quot;nombre&quot;);\n                System.out.println(numeroPokedex + &quot;: &quot; + nombrePokemon + &quot; - Peso: &quot; + peso + &quot; - Altura: &quot; + altura + &quot; - Tipo: &quot; + nombreTipo);\n            }\n        }\n        private static void filtrarMovimiento(String t) throws SQLException {\n            Connection con=conexion();\n            String consulta=&quot;select t.nombre, count(t.nombre) AS \\&quot;Numeros de movimiento\\&quot; from Movimiento m join Tipo t on m.ID_TIPO=t.ID_TIPO where t.nombre=? group by t.nombre&quot;;\n            PreparedStatement ps=con.prepareStatement(consulta);\n            ps.setString(1,t);\n            ResultSet rs=ps.executeQuery();\n            while(rs.next()) {\n                String nombreTipo = rs.getString(&quot;nombre&quot;);\n                int numerosMovimiento = rs.getInt(&quot;Numeros de movimiento&quot;);\n                System.out.println(&quot;Tipo: &quot; + nombreTipo + &quot; - Número de movimientos: &quot; + numerosMovimiento);\n            }\n        }\n        private static void mostrarInformacion(int i) throws SQLException {\n            Connection con=conexion();\n            String consulta=&quot;select NUMERO_POKEDEX, NOMBRE,PESO,ALTURA from Pokemon where NUMERO_POKEDEX=?&quot;;\n            PreparedStatement ps=con.prepareStatement(consulta);\n            ps.setInt(1, i);\n            ArrayList&lt;Pokemon&gt; pokemon=new ArrayList&lt;&gt;();\n            ResultSet rs=ps.executeQuery();\n            while(rs.next()) {\n                pokemon.add(new Pokemon(rs.getInt(&quot;NUMERO_POKEDEX&quot;),rs.getString(&quot;NOMBRE&quot;),rs.getDouble(&quot;PESO&quot;),rs.getDouble(&quot;ALTURA&quot;)));\n            }\n            System.out.println(pokemon);//arraylist tiene el toString implicito\n        }\n        private static void mostrarPesados() throws SQLException {\n            Connection con=conexion();\n            String consulta=&quot;select  NUMERO_POKEDEX,NOMBRE,PESO,ALTURA from Pokemon&quot;;\n            PreparedStatement ps=con.prepareStatement(consulta);\n            ArrayList&lt;Pokemon&gt; listaPokemon = new ArrayList&lt;&gt;();\n            ResultSet rs=ps.executeQuery();\n            while (rs.next()) {\n                int numeroPokedex = rs.getInt(&quot;NUMERO_POKEDEX&quot;);\n                String nombre = rs.getString(&quot;NOMBRE&quot;);\n                double peso = rs.getDouble(&quot;PESO&quot;);\n                double altura = rs.getDouble(&quot;ALTURA&quot;);\n                Pokemon pokemon = new Pokemon(numeroPokedex, nombre, peso, altura);//crea un objeto pokemon \n                listaPokemon.add(pokemon);//añade el objeto pokemon a una lista\n            }\n            Collections.sort(listaPokemon, new CompararPeso());\n            for (int p=0; p&lt;10;p++) {//muestra los 10 primeros mas pesados\n                System.out.println(listaPokemon.get(p));\n            }\n        }\n        private static void obtenerNombrePokemon() {//obtendra el nombre de los pokemons haciendo la llama a la pokeapi\n            String url1 = &quot;https://pokeapi.co/api/v2/pokemon/?limit=151&quot;;//Define la URL de la API que se utilizará para obtener la información de los Pokémon.\n            try {\n                // Realizar la llamada a la API y obtener la respuesta como una cadena JSON\n                String respuestaJson =llamadaAPI(url1);//Realiza la llamada a la API utilizando el método llamadaAPI() y obtiene la respuesta JSON como una cadena.\n\n                // Analizar la respuesta JSON utilizando la librería GSON\n                Gson gson = new Gson();// Crea una instancia de la clase Gson, que se utiliza para analizar JSON.\n                JsonObject json = gson.fromJson(respuestaJson, JsonObject.class);//Analiza la respuesta JSON utilizando la instancia de Gson y convierte la cadena JSON en un objeto JsonObject.\n                // Obtener el array de resultados que contiene los detalles de cada Pokémon\n                JsonArray resultados = json.getAsJsonArray(&quot;resultados&quot;);//Obtiene el array de resultados de la respuesta JSON utilizando la clave &quot;resultados&quot;.\n\n                // Recorrer el array y obtener los nombres de los Pokémon\n                for (JsonElement resultado : resultados) {//Itera sobre cada elemento del array de resultados.\n                    String nombrePokemon = resultado.getAsJsonObject().get(&quot;name&quot;).getAsString();//Obtiene el nombre de cada Pokémon en forma de cadena.\n                    System.out.println(nombrePokemon);//Imprime el nombre del pokemon\n                }\n            } catch (Exception e) {\n                e.printStackTrace();//Captura cualquier excepción que pueda ocurrir durante el procesamiento y la imprime en la consola mediante e.printStackTrace()\n            }\n        }\n        \n        private static Connection conexion()  {\n                Connection con=null;\n                try {\n                    Class.forName(driver);\n                    con = DriverManager.getConnection(url,&quot;sa&quot;,&quot;1Ci9z3u*Psd91Ci9z3u*Psd9&quot;);/*establece una conexión con la base de datos a través de JDBC (Java Database Connectivity), \n                    //utilizando la URL de conexión especificada.DriverManager es una clase del paquete java.sql \n                    que se encarga de cargar y registrar el controlador JDBC apropiado, y devolver una instancia de Connection \n                    que representa una conexión con la base de datos.*/\n                    System.out.println(&quot;Conexión exitosa&quot;);\n                    \n                } catch (SQLException | ClassNotFoundException ex) {\n                    System.out.println(&quot;Error de conexión: &quot; + ex.getMessage());\n                }\n                return con;             \n          }\n        private static String llamadaAPI(String u) throws IOException {//Se encarga de realizar la llamada HTTP a la API y devolver la respuesta como una cadena de texto.\n            OkHttpClient cliente = new OkHttpClient();/*Crea una instancia de OkHttpClient, que es una clase proporcionada por la librería OkHttp para realizar solicitudes HTTP.*/\n            Request solicitud = new Request.Builder()//Crea una solicitud HTTP resquest utilidando el Resquest.Builder\n                    .url(u)//En este metodo se especifica la url de la solicitud, es decir toma como parametro de entra a la url de llamadaAPI\n                    .build();//Este metodo construye la solicitud de la url(es decir que.build  costruye la solicitud de .url(u)\n\n            Response respuesta = cliente.newCall(solicitud).execute();//Envia la solicitud HTTP a la pokeapi,utilizando el cliente creado con OkHttpClient\n                                                                      //y obtine la respuesta utilizando el metodo execute, esa respuesta se guardara en el objeto respuesta del tipo Response\n            return   respuesta.body().string();//Devuelve el objeto respuesta como una cadena de texto  utilizando el método body().string() del objeto Response. \n                                               //Esto extrae el contenido de la respuesta HTTP como una cadena de texto.    \n        }\n        }\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/Y5Jn2.png\" rel=\"nofollow noreferrer\">Here you can see the error when executing the method that obtains the names of the pokemons through an http request to the pokeapi</a></p>\n<p>I am trying to make a method that obtains and shows the names of the 151 pokemons through the http request to the pokeapi, for this I am using gson and okhttp3, I know that the error comes from depending on okhttp3 from the kotlin libraries but, even adding the kotlin jar and importing the kotlin package, I can fix the java lang error</p>\n"},{"comments":[{"comment_id":134522102,"body":"Post text rather than images wherever possible."},{"comment_id":134522121,"body":"Have you <a href=\"https://www.oracle.com/corporate/features/understanding-java-9-modules.html\" rel=\"nofollow noreferrer\">modularized</a> your codebase? Show your <code>module-info.java</code> file."},{"comment_id":134522152,"body":"Tip: Use a JavaFX-specific template or archetype to create your project. <a href=\"https://en.wikipedia.org/wiki/IntelliJ_IDEA\" rel=\"nofollow noreferrer\">IntelliJ</a> comes with a  nice JavaFX template for OpenJFX. If Eclipse does not, try to find a Maven or Gradle archetype for OpenJFX."}],"last_activity_date":1684430208,"question_id":76283069,"body":"<p>Eclipse used to work perfectly, but after I downloaded JavaFX, I started getting this error whenever I tried running any class. Also, I'm not sure that I downloaded JavaFX correctly so could it be the reason?\nCan someone please help me resolve this issue? P.S I use Mac OS</p>\n<p>Here's a screenshot of my console after running any program:\n<a href=\"https://i.stack.imgur.com/1h6lw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1h6lw.png\" alt=\"enter image description here\" /></a></p>\n"}]}